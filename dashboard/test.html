<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Diagnostics</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-gray-100 p-8 font-mono">
    <h1 class="text-2xl mb-4">üîç Dashboard Diagnostics</h1>

    <div id="results" class="space-y-2"></div>
    <div id="root" class="mt-4"></div>

    <script>
        const results = document.getElementById('results');

        function log(message, status) {
            const color = status === 'ok' ? 'text-green-400' : status === 'error' ? 'text-red-400' : 'text-yellow-400';
            results.innerHTML += `<div class="${color}">‚Ä¢ ${message}</div>`;
        }

        // Check React
        if (typeof React !== 'undefined') {
            log('React loaded: v' + React.version, 'ok');
        } else {
            log('React NOT loaded', 'error');
        }

        // Check ReactDOM
        if (typeof ReactDOM !== 'undefined') {
            log('ReactDOM loaded', 'ok');
        } else {
            log('ReactDOM NOT loaded', 'error');
        }

        // Check Babel
        if (typeof Babel !== 'undefined') {
            log('Babel loaded', 'ok');
        } else {
            log('Babel NOT loaded', 'error');
        }

        // Check Recharts
        if (typeof Recharts !== 'undefined') {
            log('Recharts loaded', 'ok');
        } else {
            log('Recharts NOT loaded', 'error');
        }

        // Check Tailwind
        log('Tailwind loaded (check if this text is styled)', 'ok');

        // Test fetch
        log('Testing data fetch...', 'wait');

        Promise.all([
            fetch('/data/processed/hot_topics.json'),
            fetch('/data/processed/spicy_threads.json'),
            fetch('/data/processed/key_participants.json')
        ]).then(async ([topics, threads, participants]) => {
            log(`hot_topics.json: ${topics.status} ${topics.ok ? '‚úì' : '‚úó'}`, topics.ok ? 'ok' : 'error');
            log(`spicy_threads.json: ${threads.status} ${threads.ok ? '‚úì' : '‚úó'}`, threads.ok ? 'ok' : 'error');
            log(`key_participants.json: ${participants.status} ${participants.ok ? '‚úì' : '‚úó'}`, participants.ok ? 'ok' : 'error');

            if (topics.ok && threads.ok && participants.ok) {
                const topicsData = await topics.json();
                const threadsData = await threads.json();
                log('All data files loaded successfully!', 'ok');
                log(`Found ${topicsData.hot_topics?.length || 0} hot topics`, 'ok');
                log(`Found ${threadsData.spicy_threads?.length || 0} spicy threads`, 'ok');
            }
        }).catch(err => {
            log('Fetch error: ' + err.message, 'error');
        });
    </script>

    <script type="text/babel">
        // Test React render
        function TestComponent() {
            return (
                <div className="mt-4 p-4 border border-green-500 rounded">
                    <h2 className="text-xl text-green-400">‚úì React + Babel Working!</h2>
                    <p className="text-sm text-gray-400">If you see this, React is rendering correctly</p>
                </div>
            );
        }

        try {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<TestComponent />);
            setTimeout(() => {
                document.getElementById('results').innerHTML += '<div class="text-green-400">‚Ä¢ React rendering: OK</div>';
            }, 100);
        } catch (err) {
            document.getElementById('results').innerHTML += '<div class="text-red-400">‚Ä¢ React render error: ' + err.message + '</div>';
        }
    </script>
</body>
</html>
