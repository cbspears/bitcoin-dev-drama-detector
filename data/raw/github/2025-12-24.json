{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:42:36.579140+00:00",
  "date": "2025-12-24",
  "pull_requests": [
    {
      "number": 34147,
      "title": "scripted-diff: refactor: wallet: Delete duplicate IsCrypted()",
      "body": "This function is a duplicate of `HasEncryptionKeys()`.\r\n",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2025-12-24T19:11:54Z",
      "updated_at": "2025-12-27T16:30:03Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34147",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34147.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/34147#issuecomment-3691176390), [billymcbip](https://github.com/bitcoin/bitcoin/pull/34147#issuecomment-3691226014), [polespinasa](https://github.com/bitcoin/bitcoin/pull/34147#pullrequestreview-3612077545), [rkrux](https://github.com/bitcoin/bitcoin/pull/34147#pullrequestreview-3613014222) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28333](https://github.com/bitcoin/bitcoin/pull/28333) (wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively by achow101)\n* [#27865](https://github.com/bitcoin/bitcoin/pull/27865) (wallet: Track no-longer-spendable TXOs separately by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-24T19:12:01Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm.\r\n\r\ni think the command size can be reduced by replacing the `ls-files` with `git grep -l IsCrypted`, but the command passes, so this is not required.\r\n\r\nreview ACK 11ce5cf7997e6d09806dd4e73043afa758810856 ðŸ”€\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 11ce5cf7997e6d09806dd4e73043afa758810856 ðŸ”€\r\na9Qham9/Ya82U/jQU1i/5WpuEpEQSmWQb+cOUGsNLFoBF+V66Of6KlnSF21XvkEB+JYYnhUOIHl3jj5TxsYADA==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-12-25T08:56:27Z"
        },
        {
          "user": "billymcbip",
          "body": "utACK [11ce5cf](https://github.com/bitcoin/bitcoin/pull/34147/commits/11ce5cf7997e6d09806dd4e73043afa758810856)",
          "created_at": "2025-12-25T09:37:08Z"
        }
      ]
    },
    {
      "number": 34146,
      "title": "p2p: send first addr self-announcement in separate message ðŸŽ„",
      "body": "This makes sure the initial address self-announcement a node sends to a peer happends in a separate P2P message. This has benefits for both inbound and outbound connections:\r\n\r\nFor inbound connections from a peer to us, previously, we might send the self-announcement along with our response to a GETADDR request. However, the self-announcement might replace an address from the GETADDR response. This isn't clean.\r\n\r\nFor outbound connections from us to a peer, previously, it could have happend that we send the self-announcement along with other addresses. Since shortly after connection open, the peer might only have one rate-limiting token for us, and the addresses are shuffeld on arrival, it's possible that the self-announcement gets rate-limited. However, note that these rate-limitings seem to be rare in practice.\r\n\r\nThis is inspired by and based on https://github.com/bitcoin/bitcoin/pull/33699#issuecomment-3462287763. The discussion there should be helpful for reviewers. ",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-24T15:38:31Z",
      "updated_at": "2026-01-15T12:34:16Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34146",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34146.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/34146#pullrequestreview-3626596738), [bensig](https://github.com/bitcoin/bitcoin/pull/34146#issuecomment-3712218070), [frankomosh](https://github.com/bitcoin/bitcoin/pull/34146#pullrequestreview-3660880917), [achow101](https://github.com/bitcoin/bitcoin/pull/34146#issuecomment-3751931511) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n",
          "created_at": "2025-12-24T15:38:42Z"
        },
        {
          "user": "bensig",
          "body": "ACK 792e2edf57ab31ae5c6f98acf33af8f67506630f\r\n\r\nBuilt and tested. \r\n\r\nLogic is clean - uses `m_next_local_addr_send == 0us` to detect first announcement and sends it separately. \r\n\r\nTest correctly verifies it arrives alone in first message",
          "created_at": "2026-01-05T21:54:41Z"
        },
        {
          "user": "achow101",
          "body": "ACK 792e2edf57ab31ae5c6f98acf33af8f67506630f",
          "created_at": "2026-01-14T22:08:29Z"
        },
        {
          "user": "0xB10C",
          "body": ">>> This new direct-send path bypasses the addr.IsValid() and IsAddrCompatible(peer, addr) checks performed by PushAddress().\r\nCould this be an issue?\r\n\r\n>> I think that those two checks might still be needed to ensure the address weâ€™re about to relay is valid and compatible with the peer, even if GetLocalAddrForPeer() succeeded.\r\n\r\n> I agree, but haven't had the time to investigate closer\r\n\r\nWell, merging this is one way of getting me to look into this sooner :grin:  IMO it might have been better to wait until the review is addressed and have someone more familiar with address relay look over it.",
          "created_at": "2026-01-15T07:43:13Z"
        },
        {
          "user": "frankomosh",
          "body": "> Well, merging this is one way of getting me to look into this sooner. IMO it might have been better to wait until the review is addressed.\r\n\r\n I added a follow up in #34297 ... maybe you can check if its correct?\r\n",
          "created_at": "2026-01-15T08:27:53Z"
        }
      ]
    },
    {
      "number": 34145,
      "title": "test: Add unit test for OP_NUMEQUALVERIFY",
      "body": "Add coverage for the error branch of `OP_NUMEQUALVERIFY`: https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/src/script/interpreter.cpp#L997\r\n\r\nNote the code coverage miss: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html (around line 997)\r\n\r\nI ran: `cmake -B build -DENABLE_WALLET=OFF && cmake --build build -j 8 && ctest --test-dir build -j 8`",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-24T10:47:53Z",
      "updated_at": "2026-01-14T17:23:50Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/34145",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34145.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [yashbhutwala](https://github.com/bitcoin/bitcoin/pull/34145#issuecomment-3749943401), [darosior](https://github.com/bitcoin/bitcoin/pull/34145#pullrequestreview-3661205728), [sedited](https://github.com/bitcoin/bitcoin/pull/34145#pullrequestreview-3661227904) |\n| Stale ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/34145#pullrequestreview-3613189496), [bensig](https://github.com/bitcoin/bitcoin/pull/34145#issuecomment-3702910956) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-24T10:48:01Z"
        },
        {
          "user": "billymcbip",
          "body": "@rkrux thanks for the ACK, but that line is dead code, see https://github.com/bitcoin/bitcoin/pull/33977. The `OP_CHECKMULTISIG` test case does not improve code coverage, but I think a \"missing dummy\" test case is good to have.",
          "created_at": "2025-12-27T09:58:54Z"
        },
        {
          "user": "bensig",
          "body": "ACK 8dd3db3\r\n\r\nBuilt and ran script_tests on macOS - all pass. Both test cases work as expected.",
          "created_at": "2025-12-31T21:13:53Z"
        },
        {
          "user": "billymcbip",
          "body": "Side note: I have another PR out for script_tests: #34099. Thought I'd mention it since it's within the same context (improving `interpreter` coverage).",
          "created_at": "2026-01-02T19:40:06Z"
        },
        {
          "user": "billymcbip",
          "body": "@darosior thank you, I did not notice that test case in `tx_invalid.json`. I've removed the second commit (https://github.com/bitcoin/bitcoin/commit/8dd3db347fc199cc819cf9729688faaddbfc441f) from this PR.\r\n\r\nTo be clear, the test case for OP_CHECKMULTISIG that I wanted to add in https://github.com/bitcoin/bitcoin/commit/8dd3db347fc199cc819cf9729688faaddbfc441f did not improve code coverage.\r\n\r\ncc @glozow",
          "created_at": "2026-01-14T13:00:50Z"
        },
        {
          "user": "yashbhutwala",
          "body": "ACK b7625387569af059adb359af4cff18dd7850f213\n\nBuilt and tested on macOS (Apple Silicon). Ran the full test suite with:\n\n```\ncmake -B build -DENABLE_WALLET=OFF -DENABLE_IPC=OFF\ncmake --build build -j 8\nctest --test-dir build -j 8\n```\n\nAll 132 tests pass. Also ran `test_bitcoin --run_test=script_tests` separately to confirm the new test case exercises the `SCRIPT_ERR_NUMEQUALVERIFY` error path at `src/script/interpreter.cpp:997`.\n\nNice little coverage improvement - straightforward and correct.",
          "created_at": "2026-01-14T14:54:35Z"
        },
        {
          "user": "darosior",
          "body": "> To be clear, the test case for OP_CHECKMULTISIG that I wanted to add in [8dd3db3](https://github.com/bitcoin/bitcoin/commit/8dd3db347fc199cc819cf9729688faaddbfc441f) did not improve code coverage.\r\n\r\nHow comes? I think you were correct in OP that the line that check for a missing dummy element is [currently not covered](https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html#L1199).",
          "created_at": "2026-01-14T15:00:51Z"
        },
        {
          "user": "billymcbip",
          "body": "@darosior:\r\n\r\n> How comes? I think you were correct in OP that the line that check for a missing dummy element is [currently not covered](https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html#L1199).\r\n\r\nIt's impossible to cover that line - it's dead code. Have a look at https://github.com/bitcoin/bitcoin/pull/33977.\r\n\r\nThe test case that I added in [8dd3db3](https://github.com/bitcoin/bitcoin/commit/8dd3db347fc199cc819cf9729688faaddbfc441f) is just as good as the one you cited in [bitcoin/src/test/data/tx_invalid.json](https://github.com/bitcoin/bitcoin/blob/62557c95298d88be8920c1b3b952d07d0aedb1af/src/test/data/tx_invalid.json#L83-L86). It wouldn't hurt to merge [8dd3db3](https://github.com/bitcoin/bitcoin/commit/8dd3db347fc199cc819cf9729688faaddbfc441f), but it wouldn't improve code coverage.",
          "created_at": "2026-01-14T17:23:40Z"
        }
      ]
    },
    {
      "number": 34144,
      "title": "refactor: use static_cast and add Doxygen to BlockTreeDB",
      "body": "## Summary\n\n- Replace C-style casts `(unsigned)` with `static_cast<unsigned>()` in `FindFilesToPruneManual()` and `FindFilesToPrune()` for compliance with coding standards\n- Add Doxygen documentation to all `BlockTreeDB` public methods\n\n## Test plan\n\n- [x] Build completes successfully\n- [ ] CI passes\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)",
      "state": "closed",
      "user": "Rob1Ham",
      "created_at": "2025-12-24T03:03:08Z",
      "updated_at": "2025-12-24T03:03:47Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34144",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34144.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-24T03:03:15Z"
        },
        {
          "user": "Rob1Ham",
          "body": "Sorry, did not intend to open here!",
          "created_at": "2025-12-24T03:03:47Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 4,
    "issues": 0
  }
}