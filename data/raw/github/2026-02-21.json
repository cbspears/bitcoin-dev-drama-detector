{
  "source": "github",
  "repo": "bitcoin/bitcoin",
  "fetched_at": "2026-02-21T16:21:15.735336+00:00",
  "date_range": {
    "since": "2026-02-14T16:21:15.735231+00:00",
    "until": "2026-02-21T16:21:15.735231+00:00"
  },
  "pull_requests": [
    {
      "id": 3299687172,
      "number": 34616,
      "title": "Cluster mempool: SFL cost model (take 2)",
      "body": "Part of #30289, replaces earlier #34138.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented in master right now, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on an average on a number of systems.\r\n\r\nSpecifically, the cost model was obtained by:\r\n* For a variety of machines:\r\n  * Running a fixed collection of ~385000 clusters found through random generation and fuzzing, optimizing for difficulty of linearization.\r\n    * Linearize each ~3000 times, with different random seeds. Sometimes without input linearization, sometimes with a bad one.\r\n      * Gather cycle counts for each of the operations included in this cost model, broken down by their parameters.\r\n  * Correct the data by subtracting the runtime of obtaining the cycle count.\r\n  * Drop the 5% top and bottom samples from each cycle count dataset, and compute the average of the remaining samples.\r\n  * For each operation, fit a least-squares linear function approximation through the samples.\r\n* Rescale all machine expressions to make their total time match, as we only care about relative cost of each operation.\r\n* Take the per-operation average of operation expressions across all machines, to construct expressions for an average machine.\r\n* Approximate the result with integer coefficients.\r\n\r\nThe benchmarks were performed by `l0rinc <pap.lorinc@gmail.com>` and myself, on AMD Ryzen 5950X, AMD Ryzen 7995WX, AMD Ryzen 9980X, Apple M4 Max, Intel Core i5-12500H, Intel Core Ultra 7 155H, Intel N150 (Umbrel), Intel Core i7-7700, Intel Core i9-9900K, Intel Haswell (VPS, virtualized), ARM Cortex-A76 (Raspberry Pi 5).\r\n\r\nBased on final benchmarking, the \"acceptable\" iteration count (which is the minimum spent on every cluster) is to 64000 units, which corresponds to roughly 50 μs on Ryzen 5950X and similar modern desktop hardware.",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-02-18T17:26:22Z",
      "updated_at": "2026-02-21T16:19:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34616",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3453,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2837615883,
      "number": 33421,
      "title": "node: add  `BlockTemplateCache`",
      "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify an optional template age limit in `MillisecondsDouble`:\r\n\r\n- If template age limit is `nullopt`, we create a new template and return it without adding it to the cache.\r\n- If a matching template (block template with identical block creation options) exists in the cache and hasn't exceeded the age limit, the cached version is returned.\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned. When evicting stale templates, we assume no duplicates exist since templates are evicted as soon as their age limit is reached or exceeded.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted after each insertion.\r\n\r\n\r\nCache lookup requires an exact match on ALL `BlockAssembler::Options` fields. While some fields (e.g., `test_block_validity`, `print_modified_fee`, `coinbase_output_script`) could be ignored for cache reuse, they mainly differ in tests and benchmarks. We keep the logic simple and accept cache misses in those cases.\r\n\r\n\r\nThe cache enforces at most one template per set of options. When searching for a match in `getCachedTemplate()`, if a template with matching options is found but has exceeded the age limit, it's immediately evicted before returning `nullptr`. This ensures no duplicate options exist in the cache. A `SanityCheck()` method verifies this invariant in tests by checking all cached entries for duplicates.\r\n\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\n`GetBlockTemplate()` uses double-checked locking: it first checks the cache with only `m_mutex` held, then if there's a miss, acquires both `cs_main` and `m_mutex` to create the template. Before creating, it checks again since another thread might have added a template while locks were released. \r\n\r\nThis PR removes an unused `node/context.h` import from miner to prevent a circular dependency when exposing the block template cache to the node context.",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-17T18:47:09Z",
      "updated_at": "2026-02-21T16:16:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33421",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2508,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3309768200,
      "number": 34641,
      "title": "node: scale `-dbcache` default from total system RAM",
      "body": "### Problem\r\n\r\n`-dbcache` controls how much RAM Bitcoin Core uses for the in-memory view of the UTXO set, while the authoritative chainstate remains on disk.\r\nThe default is still the fixed `450 MiB` value, chosen almost a decade ago, even though chainstate size and typical hardware profiles have changed significantly since then.\r\n\r\nIn practice, a fixed 450 MiB default is often too conservative on modern systems, where larger cache sizes can reduce flush churn and disk roundtrips during validation, especially in IBD. At the same time, memory pressure remains important on smaller systems.\r\n\r\n### Historical changes\r\n\r\n| Date       | dbcache change | PR                                                                                                                                                                                                    |\r\n|------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| 2016-07-06 | 100 -> 300     | [#8273: Bump -dbcache default to 300MiB](https://github.com/bitcoin/bitcoin/commit/32cab91278651d07a11132b7636dc3d21144e616#diff-d102b6032635ce90158c1e6e614f03b50e4449aa46ce23370da5387a658342fdR25) |\r\n| 2017-04-05 | 300 -> 450     | [#10133: Clean up calculations of pcoinsTip memory usage](https://github.com/bitcoin/bitcoin/pull/10133/changes#diff-d102b6032635ce90158c1e6e614f03b50e4449aa46ce23370da5387a658342fdR31)             |\r\n\r\n### IRC\r\n\r\nThe Feb 17-19, 2026 discussion converged on avoiding a single new fixed `-dbcache` value and moving to RAM-aware defaults instead, balancing performance gains on modern hardware against OOM risk on lower-memory systems.\r\n\r\n<details>\r\n<summary>IRC log links</summary>\r\n\r\n* https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2026-02-17\r\n* https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2026-02-18\r\n* https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2026-02-19\r\n\r\n</details>\r\n\r\n### Fix\r\n\r\nReplace the fixed default with a RAM-aware policy:\r\n```math\r\n\\text{default\\_dbcache}=\\mathrm{clamp}\\left(100\\,\\mathrm{MiB},\\ 0.25\\cdot\\left(\\text{system RAM}-2\\,\\mathrm{GiB}\\right),\\ 3000\\,\\mathrm{MiB}\\right)\r\n```\r\n\r\nIf system RAM cannot be determined, assume 4 GiB on 64-bit builds and 2 GiB on 32-bit builds.\r\nManual `-dbcache` values are unchanged and still override the automatic default.\r\n\r\n### Warning threshold update\r\n\r\nOversized `-dbcache` warnings are kept and aligned with the new policy - warn if:\r\n- `dbcache > default-dbcache` when `RAM < fallback RAM` (4 GiB on 64-bit, 2 GiB on 32-bit)\r\n- `dbcache` > `75% of total RAM`, otherwise\r\n\r\n### Performance measurements\r\n\r\n<details><summary>Umbrel - 20% faster reindex-chainstate with new default dbcache</summary>\r\n\r\n```bash\r\nfor DBCACHE in 450 3000; do \\\r\n  COMMITS=\"097c18239b58a8ee03794b3ebc6e722a0da30d8d\"; \\\r\n  STOP=936639; CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 1 && echo HDD || echo SSD)\"; echo \"\") && \\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -f ./build/bin/bitcoind; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind -j1 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20; rm -f $DATA_DIR/debug.log\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log && grep 'Bitcoin Core version' $DATA_DIR/debug.log | grep -q \"$(printf %.12s {COMMIT})\"; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n```\r\n\r\n<details><summary>2026-02-19 | reindex-chainstate | 936639 blocks | dbcache 450 | umbrel | x86_64 | Intel(R) N150 | 4 cores | 15Gi RAM | SSD</summary>\r\n\r\n```bash\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=936639 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        33619.332 s               [User: 61450.140 s, System: 5671.449 s]\r\n ```\r\n</details>\r\n\r\n<details><summary>2026-02-20 | reindex-chainstate | 936639 blocks | dbcache 3000 | umbrel | x86_64 | Intel(R) N150 | 4 cores | 15Gi RAM | SSD</summary>\r\n\r\n```bash\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=936639 -dbcache=3000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        27910.440 s               [User: 44917.351 s, System: 2090.958 s]\r\n```\r\n</details>\r\n\r\n</details>\r\n\r\n<details><summary>Rpi5 - 20% faster reindex-chainstate with new default dbcache</summary>\r\n\r\n```bash\r\nfor DBCACHE in 450 3000; do \\\r\n  COMMITS=\"097c18239b58a8ee03794b3ebc6e722a0da30d8d\"; \\\r\n  STOP=936639; CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 1 && echo HDD || echo SSD)\"; echo \"\") && \\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -f ./build/bin/bitcoind; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind -j1 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20; rm -f $DATA_DIR/debug.log\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log && grep 'Bitcoin Core version' $DATA_DIR/debug.log | grep -q \"$(printf %.12s {COMMIT})\"; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n\r\n```\r\n\r\n<details><summary>2026-02-19 | reindex-chainstate | 936639 blocks | dbcache 450 | rpi5-16-2 | aarch64 | Cortex-A76 | 4 cores | 15Gi RAM | SSD</summary>\r\n\r\n```bash\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=936639 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        48933.904 s               [User: 94560.562 s, System: 7823.574 s]\r\n ```\r\n</details>\r\n\r\n<details><summary>2026-02-20 | reindex-chainstate | 936639 blocks | dbcache 3000 | rpi5-16-2 | aarch64 | Cortex-A76 | 4 cores | 15Gi RAM | SSD</summary>\r\n\r\n```bash\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=936639 -dbcache=3000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        40586.782 s               [User: 65901.116 s, System: 3260.832 s]\r\n```\r\n</details>\r\n\r\n</details>\r\n\r\n<details><summary>Apple M4 Max - 286% faster reindex-chainstate with new default dbcache</summary>\r\n\r\n```bash\r\nfor DBCACHE in 450 3000; do \\\r\n  COMMITS=\"097c18239b58a8ee03794b3ebc6e722a0da30d8d\"; \\\r\n  STOP=900000; \\\r\n  DATA_DIR=\"$HOME/Library/Application Support/Bitcoin\"; LOG_DIR=\"$HOME/bitcoin-reindex-logs\"; mkdir -p \"$LOG_DIR\"; \\\r\n  COMMA_COMMITS=${COMMITS// /,}; \\\r\n  (echo \"\"; for c in $(echo $COMMITS); do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(sysctl -n machdep.cpu.brand_string) | $(nproc) cores | $(printf '%.1fGiB' \"$(( $(sysctl -n hw.memsize)/1024/1024/1024 ))\") RAM | SSD | $(sw_vers -productName) $(sw_vers -productVersion) $(sw_vers -buildVersion) | $(xcrun clang --version | head -1)\"; echo \"\") && \\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$LOG_DIR/rdx-$(echo \"$COMMITS\" | sed -E 's/([a-f0-9]{8})[a-f0-9]+ ?/\\1-/g;s/-$//')-$STOP-$DBCACHE-appleclang.json\" \\\r\n    --parameter-list COMMIT \"$COMMA_COMMITS\" \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null || true; rm -f \\\"$DATA_DIR\\\"/debug.log; git checkout {COMMIT}; git reset --hard && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release && ninja -C build bitcoind -j2 && \\\r\n      ./build/bin/bitcoind -datadir=\\\"$DATA_DIR\\\" -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n    --conclude \"killall bitcoind 2>/dev/null || true; sleep 5; grep -q 'height=0' \\\"$DATA_DIR\\\"/debug.log && grep -q 'Disabling script verification at block #1' \\\"$DATA_DIR\\\"/debug.log && grep -q \\\"height=$STOP\\\" \\\"$DATA_DIR\\\"/debug.log || { echo 'debug.log assertions failed'; exit 1; }; \\\r\n                cp \\\"$DATA_DIR\\\"/debug.log \\\"$LOG_DIR\\\"/debug-{COMMIT}-\\$(date +%s).log 2>/dev/null || true\" \\\r\n    \"./build/bin/bitcoind -datadir=\\\"$DATA_DIR\\\" -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n```\r\n\r\n<details><summary>2026-02-21 | reindex-chainstate | 900000 blocks | dbcache 450 | M4-Max.local | arm64 | Apple M4 Max | 16 cores | 64.0GiB RAM | SSD | macOS 26.2 25C56 | Apple clang version 17.0.0 (clang-1700.6.3.2)</summary>\r\n\r\n```bash\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: ./build/bin/bitcoind -datadir=\"/Users/lorinc/Library/Application Support/Bitcoin\" -stopatheight=900000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        20261.315 s               [User: 18768.521 s, System: 4271.673 s]\r\n ```\r\n</details>\r\n\r\n<details><summary>2026-02-21 | reindex-chainstate | 900000 blocks | dbcache 3000 | M4-Max.local | arm64 | Apple M4 Max | 16 cores | 64.0GiB RAM | SSD | macOS 26.2 25C56 | Apple clang version 17.0.0 (clang-1700.6.3.2)</summary>\r\n\r\n```bash\r\n\r\n097c18239b Merge bitcoin/bitcoin#34385: subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows\r\n\r\nBenchmark 1: ./build/bin/bitcoind -datadir=\"/Users/lorinc/Library/Application Support/Bitcoin\" -stopatheight=900000 -dbcache=3000 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 097c18239b58a8ee03794b3ebc6e722a0da30d8d)\r\n  Time (abs ≡):        7064.184 s               [User: 7701.391 s, System: 668.060 s]\r\n```\r\n</details>\r\n\r\n</details>\r\n\r\n<details><summary>i9 - 5% faster pruned IBD with new default dbcache</summary>\r\n\r\n```bash\r\nfor DBCACHE in 450 3000; do \\\r\n  COMMITS=\"5a8a427610ed9672f485ebfefbb8e63b55282636\"; \\\r\n  STOP=933339; PRUNE=550; \\\r\n  CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | pruned IBD | ${STOP} blocks | dbcache ${DBCACHE} | pruning ${PRUNE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 1 && echo HDD || echo SSD)\"; echo \"\") &&\\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 2 \\\r\n    --export-json \"$BASE_DIR/ibd-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -rf $DATA_DIR/*; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release && ninja -C build bitcoind -j2 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -prune=$PRUNE -printtoconsole=0; sleep 20\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log && grep 'Bitcoin Core version' $DATA_DIR/debug.log | grep -q \"$(printf %.12s {COMMIT})\"; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -blocksonly -prune=$PRUNE -printtoconsole=0\";\r\ndone\r\n```\r\n\r\n<details><summary>2026-02-19 | pruned IBD | 933339 blocks | dbcache 450 | pruning 550 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```bash\r\n5a8a427610 Merge bitcoin/bitcoin#32745: scripted-diff: Update DeriveType enum values to mention ranged derivations\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=933339 -dbcache=450 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 5a8a427610ed9672f485ebfefbb8e63b55282636)\r\n  Time (mean ± σ):     33256.735 s ± 954.998 s    [User: 74373.368 s, System: 4904.305 s]\r\n  Range (min … max):   32581.449 s … 33932.020 s    2 runs\r\n ```\r\n</details>\r\n\r\n<details><summary>2026-02-20 | pruned IBD | 933339 blocks | dbcache 3000 | pruning 550 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```bash\r\n5a8a427610 Merge bitcoin/bitcoin#32745: scripted-diff: Update DeriveType enum values to mention ranged derivations\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=933339 -dbcache=3000 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 5a8a427610ed9672f485ebfefbb8e63b55282636)\r\n  Time (mean ± σ):     31670.463 s ± 621.972 s    [User: 70829.639 s, System: 4403.924 s]\r\n  Range (min … max):   31230.663 s … 32110.264 s    2 runs\r\n```\r\n</details>\r\n\r\n</details>\r\n\r\n### Quick reference (64 bit)\r\n\r\n| System RAM | Automatic default | Warning fires above |\r\n|------------|-------------------|---------------------|\r\n| 1 GiB      | 100 MiB           | 100 MiB             |\r\n| 2 GiB      | 100 MiB           | 100 MiB             |\r\n| 4 GiB      | 512 MiB           | 3071 MiB            |\r\n| 8 GiB      | 1536 MiB          | 6143 MiB            |\r\n| 16 GiB     | 3000 MiB          | 12287 MiB           |\r\n| 32 GiB     | 3000 MiB          | 24575 MiB           |\r\n\r\n<img width=\"1384\" height=\"583\" alt=\"image\" src=\"https://github.com/user-attachments/assets/2ccca03e-9130-457c-b386-f8aea15de955\" />\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-02-20T23:00:45Z",
      "updated_at": "2026-02-21T16:14:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34641",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 16682,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3133212525,
      "number": 34165,
      "title": "coins: don't mutate main cache when connecting block",
      "body": "This is a slightly modified version of the first few commits of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nWhen accessing coins via the `CCoinsViewCache`, methods like `GetCoin` can call `FetchCoin` which actually mutate `cacheCoins` internally to cache entries when they are pulled from the backing db. This is generally a performance improvement for single threaded access patterns, but it precludes us from accessing entries in a `CCoinsViewCache` from multiple threads without a lock.\r\n\r\nAnother aspect is that when we use the resettable `CCoinsViewCache` view backed by the main cache for use in `ConnectBlock()`, we will insert entries into the main cache even if the block is determined to be invalid. This is not the biggest concern, since an invalid block requires proof-of-work. But, an attacker could craft multiple invalid blocks to fill the main cache. This would make us `Flush` the cache more often than necessary. Obviously this would be very expensive to do on mainnet.\r\n\r\nIntroduce `CoinsViewOverlay`, a `CCoinsViewCache` subclass that reads coins without mutating the underlying cache via `FetchCoin()`.\r\n\r\nAdd `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\r\n\r\nThis is the foundation for async input fetching, where worker threads must not mutate shared state.\r\n",
      "state": "closed",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:32:34Z",
      "updated_at": "2026-02-21T16:08:12Z",
      "merged_at": "2026-02-20T03:10:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34165",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1737,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3207919952,
      "number": 34401,
      "title": "kernel:  add serialization method for btck_BlockHeader API",
      "body": "This adds serialization for `btck_BlockHeader` API. Also, updated the `CheckHandle` to compare the byte content instead of size.\r\n\r\nThe changes here is done in two commits. First commit adds the `SpanWriter` class and next one moves the block header serialization to `SpanWriter`. See commit message for more details.\r\n\r\nFollow-up to #33822 .",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2026-01-25T06:50:13Z",
      "updated_at": "2026-02-21T16:03:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34401",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 401,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2858375622,
      "number": 33477,
      "title": "Rollback for dumptxoutset without invalidating blocks",
      "body": "This is an alternative approach to implement `dumptxoutset` with rollback that was discussed a few times. It does not rely on `invalidateblock` and `reconsiderblock` and instead creates a temporary copy of the coins DB, modifies this copy by rolling back as many blocks as necessary and then creating the dump from this temp copy DB. See also https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1978480989, https://github.com/bitcoin/bitcoin/issues/32817#issuecomment-3012406102 and #29565 discussions.\r\n\r\nThe nice side-effects of this are that forks can not interfere with the rollback and network activity does not have to be suspended. But there are also some downsides when comparing to the current approach: this does require some additional disk space for the copied coins DB and performance is slower (master took 3m 17s vs 9m 16s in my last test with the code here, rolling back ~1500 blocks). However, there is also not much code being added here, network can stay active throughout and performance would stay constant with this approach while it would impact master if there were forks that needed to be invalidated as well (see #33444 for the alternative approach), so this could still be considered a good trade-off.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-09-24T21:15:11Z",
      "updated_at": "2026-02-21T15:50:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33477",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1289,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2902093523,
      "number": 33593,
      "title": "guix: Use UCRT runtime for Windows release binaries",
      "body": "This PR:\r\n1. Switches Windows release binaries to UCRT.\r\n2. Update docs.\r\n3. Drops MSVCRT workarounds.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/30210.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-10-09T21:46:43Z",
      "updated_at": "2026-02-21T14:37:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33593",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3216048052,
      "number": 34422,
      "title": "Update libmultiprocess subtree to be more stable with rust IPC client",
      "body": "Includes:\r\n\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/241\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/240\r\n\r\nThe latter change fixes issues with asynchronous requests (https://github.com/bitcoin/bitcoin/issues/33923) and unclean disconnects (https://github.com/bitcoin/bitcoin/issues/34250) that happen with the rust mining client. It also adds tests for these fixes which had some previous review in #34284 (that PR was closed to simplify dependencies between PRs).\r\n\r\nThe changes can be verified by running `test/lint/git-subtree-check.sh src/ipc/libmultiprocess` as described in [developer notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees) and [lint instructions](https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh)\r\n\r\nResolves #33923 and #34250\r\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-01-27T20:06:40Z",
      "updated_at": "2026-02-21T14:12:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34422",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 909,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2784259944,
      "number": 33270,
      "title": "stabilize translations by reverting old ids by text content",
      "body": "### Summary\r\n\r\nRegenerating the Qt translation template (`src/qt/locale/bitcoin_en.xlf`) previously used sequential `_msg<N>` IDs. When strings moved within the sorted message list, IDs shifted, creating large diffs and making translation platforms treat unchanged strings as new.\r\n\r\nThis PR switches XLF `<trans-unit id=...>` values to stable IDs derived from a SHA256 hash of the message context and source text.\r\n\r\n### Details\r\n\r\nAs mentioned in https://github.com/bitcoin/bitcoin/pull/33224#issuecomment-3234820665, any change that moves a translatable string within the sorted messages can renumber subsequent entries when IDs are sequential.\r\n\r\nSome English texts can appear in multiple places (e.g. “Clear”) with different meanings depending on the Qt context. To avoid collisions, the hash includes the `<group resname=...>` context.\r\n\r\n### Fix\r\n\r\nThe `translate` target already runs `contrib/devtools/stabilize_xlf_ids.py`. Instead of trying to preserve/renumber `_msg<N>` IDs by matching old/new units, the script now rewrites every `<trans-unit id>` to:\r\n\r\n- `sha256(resname + \"\\0\" + source-text)` (hex)\r\n- keeping the existing plural `[N]` suffix for plural forms\r\n\r\nThe script also checks for duplicate IDs and aborts if any are detected.\r\n\r\nNote: this is a one-time mass change from `_msg<N>` IDs to hashes; after that, rerunning `translate` on an unchanged tree should not churn IDs.\r\n\r\nWith this PR applied, IDs become stable hashes so ordering changes no longer cause renumbering churn.\r\n\r\n### Reproducer\r\n\r\nYou can test the replacer by changing any translatable text:\r\n```patch\r\ndiff --git a/src/qt/bitcoingui.cpp b/src/qt/bitcoingui.cpp\r\n--- a/src/qt/bitcoingui.cpp\t(revision a38b8cf788922174538161cda81ce28f2ac462ec)\r\n+++ b/src/qt/bitcoingui.cpp\t(date 1767310724675)\r\n@@ -258,7 +258,7 @@\r\n     connect(modalOverlay, &ModalOverlay::triggered, tabGroup, &QActionGroup::setEnabled);\r\n \r\n     overviewAction = new QAction(platformStyle->SingleColorIcon(\":/icons/overview\"), tr(\"&Overview\"), this);\r\n-    overviewAction->setStatusTip(tr(\"Show general overview of wallet\"));\r\n+    overviewAction->setStatusTip(tr(\"Show general overview of Wallet\"));\r\n     overviewAction->setToolTip(overviewAction->statusTip());\r\n     overviewAction->setCheckable(true);\r\n     overviewAction->setShortcut(QKeySequence(QStringLiteral(\"Alt+1\")));\r\n```\r\nand regenerating the translations\r\n```bash\r\ncmake --preset dev-mode -DWITH_USDT=OFF && cmake --build build_dev_mode --target translate\r\n```\r\nYou will notice that the new text moved to a different place with a different hash, but all other messages retained their IDs.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-08-29T09:23:56Z",
      "updated_at": "2026-02-21T14:09:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33270",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2676,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2925411752,
      "number": 33646,
      "title": "log: check fclose() results and report safely in logging.cpp",
      "body": "`fclose()` can report write errors (for example if the disk is full or the filesystem has a problem). Right now, some `fclose()` calls in `src/logging.cpp` ignore the return value. This means errors might go unnoticed and log lines could be lost without warning.\r\n\r\n## What this PR does:\r\n- Add a small helper that prints `fclose()` errors to `stderr` (with path and errno).\r\n- In shutdown: close `m_fileout` safely and report errors.\r\n- In reopen: open the new file, swap it in, close the old one, and report errors if closing fails.\r\n- In shrink/rotate: check all `fclose(file)` calls and report failures.\r\n\r\nNo other behavior changes. Normal logging, rotation, and console output remain unchanged.",
      "state": "open",
      "user": "cedwies",
      "created_at": "2025-10-17T19:06:08Z",
      "updated_at": "2026-02-21T13:49:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33646",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 761,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2138649533,
      "number": 31132,
      "title": "validation: fetch block inputs on parallel threads 3x faster IBD",
      "body": "_Parts of this PR are isolated in independent smaller PRs to ease review:_\r\n\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/34164_\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/34165_\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34576_\r\n\r\n---\r\n\r\nThis PR parallelizes fetching all input prevouts of a block during block connection, achieving over 3x faster IBD performance in some scenarios[^1][^2][^3][^4][^5].\r\n\r\n### Problem\r\n\r\nCurrently, when fetching inputs in `ConnectBlock`, each input is fetched from the cache sequentially. A cache miss requires a round trip to the disk database to fetch the outpoint and insert it into the cache. Since the database is read-only during `ConnectBlock`, we can fetch all inputs of a block in parallel on multiple threads while connecting.\r\n\r\n### Solution\r\n\r\nWe introduce a new `CoinsViewCacheAsync` `CCoinsViewCache` subclass that manages worker threads to fetch block inputs in parallel. The block is passed to the `CoinsViewCacheAsync` view before entering `ConnectBlock`, which kicks off the worker threads to begin fetching the inputs. The view is then passed to `ConnectBlock` since it provides the same API as `CCoinsViewCache`. The cache returns fetched coins as they become available via the overridden `FetchCoin` method. If not available yet, the main thread also fetches coins as it waits.\r\n\r\n### Implementation Details\r\n\r\nThe `CoinsViewCacheAsync` implements a lock-free MPSC (Multiple Producer, Single Consumer) queue design:\r\n\r\n- **Work Distribution**: Collects all input prevouts into a queue and uses a barrier to start all worker threads simultaneously\r\n- **Synchronization**: Worker threads use an atomic counter to claim which inputs to fetch, and each input has an atomic flag to signal completion to the main thread\r\n- **Main Thread Processing**: The main thread waits for inputs in order and moves their `Coin` into the `cacheCoins` map as they become available.\r\n- **Work Stealing**: If the main thread catches up to the workers, it assists with fetching to maximize parallelism\r\n- **Completion**: All threads synchronize on a barrier via a `Reset` method, which ensures all threads are parked before proceeding\r\n\r\n### Safety and Correctness\r\n\r\n- The `CoinsViewCacheAsync` works on a block that has not been fully validated, but it does not interfere or modify any of the validation during `ConnectBlock`\r\n- It simply fetches inputs in parallel, which must be fetched before a transaction is validated anyways\r\n- **Invalid blocks**: If an invalid block is mined, the temporary cache is reset without being flushed. This is an improvement over the current behavior, where existing inputs are inserted into the main `CoinsTip()` cache when pulled through for an invalid block\r\n\r\n### Performance\r\n\r\nBenchmarks show over 3x faster IBD performance in a cloud environment with network connected storage[^1], 3x faster IBD for an M4 Mac and up to 46% faster with directly connected storage[^2][^3][^4][^5]. The parallelization of expensive disk lookups provides significant speedup.\r\n\r\n[Flamegraphs show how the execution is changed](https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3617315125).\r\n\r\n### Credits\r\n\r\nInspired by [this comment](https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638553680).\r\n\r\nResolves https://github.com/bitcoin/bitcoin/issues/34121.\r\n\r\n[^1]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806\r\n[^2]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3515011880\r\n[^3]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3463894000\r\n[^4]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3347436866\r\n[^5]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3488760623",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2024-10-22T14:40:28Z",
      "updated_at": "2026-02-21T13:49:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31132",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3806,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3299290114,
      "number": 34615,
      "title": "mempool: expose optimality of mempool to log / rpc",
      "body": "Post-SFL #34023 I don't think we expect the mempool to be unordered for long periods of time. If we consider it likely to be a serious regression in production, it would be useful to expose the fact  that the mempool is not known to be optimal.\r\n\r\n1. do a MEMPOOL log after any `DoWork()` returns false, meaning non-optimal\r\n2. expose it via getmempoolinfo, by calling `DoWork(0)`, which does nothing but return known-optimality\r\n\r\nI'm not wedded to either approach, I just think something is better than nothing for the next release.",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2026-02-18T15:44:28Z",
      "updated_at": "2026-02-21T13:19:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34615",
      "labels": [
        "Mempool",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 585,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3095820892,
      "number": 34054,
      "title": "net processing: Add ibd check before processing block for txdownloadman",
      "body": "Calculating the rolling bloom filters for the txorphanage takes some CPU time from the scheduler thread. This can be observed for example in [this flamegraph](https://bitcoin-dev-tools.github.io/benchcoin/results/pr-172/20066462508/mainnet-default-instrumented-base-flamegraph.svg?x=920203898521&y=780), where handling the filter takes about 2.6% of total time (and most of the scheduler thread's time). \r\n\r\nDuring ibd the entries in the tx download bloom filter are just continuously rolled over and aren't consumed, since no mempool entries are created by incoming transactions from peers during ibd. The mempool does accept transactions via RPC, or the wallet at the time, however these don't interact with the orphanage and the txdownloadman, because adding anything to those is guarded by IsInitialBlockDownload() checks as well.\r\n\r\nWe're usually latching ibd to false a few blocks before catching up to the tip, so this should also not significantly degrade the performance of the filter once fully caught up.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-12-12T09:06:28Z",
      "updated_at": "2026-02-21T13:17:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34054",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1087,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2956421896,
      "number": 33727,
      "title": "zmq: Log bind error at Error level, abort startup on init error",
      "body": "Fixes #33715",
      "state": "open",
      "user": "isrod",
      "created_at": "2025-10-28T18:59:03Z",
      "updated_at": "2026-02-21T12:56:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33727",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 76,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2965956843,
      "number": 33752,
      "title": "rest: Query predecessor headers using negative count param",
      "body": "There is currently no mechanism by which to batch-query headers from tip, backwards towards genesis.\r\nThis PR extends the REST Blockheaders API to support batch-querying predecessor headers, by providing a negative count parameter.",
      "state": "open",
      "user": "A-Manning",
      "created_at": "2025-10-31T09:11:11Z",
      "updated_at": "2026-02-21T12:29:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33752",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 290,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2517768893,
      "number": 32489,
      "title": "wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet",
      "body": "Currently, if a user wants to use an airgapped setup, they need to manually create the watchonly wallet that will live on the online node by importing the public descriptors. This PR introduces `exportwatchonlywallet` which will create a wallet file with the public descriptors to avoid exposing the specific internals to the user. Additionally, this RPC will copy any existing labels, transactions, and wallet flags. This ensures that the exported watchonly wallet is almost entirely a copy of the original wallet but without private keys.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-05-13T22:22:00Z",
      "updated_at": "2026-02-21T11:58:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32489",
      "labels": [
        "Wallet",
        "Needs rebase",
        "Review club"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 622,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3284423117,
      "number": 34591,
      "title": "cmake: Improve `install_name_tool` workaround",
      "body": "We stopped using `install_name_tool` in 3bee51427a05075150721f0a05ead8f92e1ba019 (https://github.com/bitcoin/bitcoin/pull/29890), which [required](https://github.com/hebasto/bitcoin/pull/180) a CMake-specific hack:https://github.com/bitcoin/bitcoin/blob/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab/CMakeLists.txt#L72-L76\r\n\r\nDue to recent changes in CMake, this hack has become problematic for the following reasons:\r\n1. It is no longer needed when using CMake 4.2 or newer. See upstream [Issue #27069](https://gitlab.kitware.com/cmake/cmake/-/issues/27069) and [MR #10955](https://gitlab.kitware.com/cmake/cmake/-/merge_requests/10955).\r\n\r\n2. It causes an [issue](https://github.com/bitcoin/bitcoin/issues/34513) when using CMake 4.0.5 or newer. See upstream [Issue #26814](https://gitlab.kitware.com/cmake/cmake/-/issues/26814) and [MR #10721](https://gitlab.kitware.com/cmake/cmake/-/merge_requests/10721).\r\n\r\nThis PR addresses both of these issues. Please see the individual commits for more details.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34513.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-14T11:37:33Z",
      "updated_at": "2026-02-21T11:49:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34591",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1104,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2982459951,
      "number": 33796,
      "title": "kernel: Expose `CheckTransaction` consensus validation function",
      "body": "This PR exposes the consensus-level `CheckTransaction` function through the libbitcoinkernel C API and adds a corresponding C++ wrapper.\r\n\r\nCurrently, libkernel only provided script-level validation via `btck_script_pubkey_verify` and `ScriptPubkeyApi<>::Verify`. \r\n\r\nAFAIK there was no way to perform context-free consensus checks on a transaction’s structure (e.g., coinbase rules, money-range, duplicate inputs).\r\n\r\nThis change introduces a new API:\r\n\r\n```c\r\nint btck_check_transaction(const btck_Transaction* tx, btck_TxValidationState** out_state);\r\n```\r\n\r\nand a C++ convenience wrapper:\r\n\r\n```cpp\r\nstd::pair<bool, TxValidationState> btck::CheckTransaction(const Transaction& tx);\r\n```\r\n\r\nBoth follow the ownership and error-handling conventions established in `bitcoinkernel.h`.\r\n\r\nThe test suite is extended with cases covering:\r\n* coinbase scriptSig length bounds\r\n* empty vin / vout detection\r\n* negative or out-of-range output values\r\n* duplicate inputs\r\n* null prevouts in non-coinbase transactions\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-05T23:59:50Z",
      "updated_at": "2026-02-21T11:28:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33796",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1077,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3124280596,
      "number": 34141,
      "title": "miniscript: Use Func and Expr when parsing keys, hashes, and locktimes",
      "body": "The miniscript parser currently only looks for the next `)` when parsing key, hash, and locktime expressions. This fails to parse when the expressions contain a nested expression. Currently, this is only possible with `musig()` inside of key expressions. However, this pattern can be generalized to handling hashes and locktimes, so I implemented those too.\r\n\r\nFixes #34076",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-12-22T21:36:58Z",
      "updated_at": "2026-02-21T11:19:05Z",
      "merged_at": "2026-02-21T11:19:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34141",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999254279,
      "number": 33854,
      "title": "fix assumevalid is ignored during reindex",
      "body": "During a reindex, the assumevalid setting may be ignored if the chainwork of the best header is below `minimumchainwork`. This happens when the previous IBD was stopped before connecting enough blocks to reach the required `minimumchainwork`. The assumevalid block will also be missing from the block index because the assumevalid block is set to match the `minimumchainwork`. See [Issue #31494](https://github.com/bitcoin/bitcoin/issues/31494).\r\n\r\nAs a result, `reindex` can take significantly longer to complete than necessary.\r\n\r\nThis PR addresses the issue by modifying reindex behaviour: if the chainwork of the `best_header` is below `minimumchainwork`, the node skips the `ActivateBestChain()` step and proceeds directly to synchronisation.\r\n\r\nThis PR takes a different approach from [PR #31615](https://github.com/bitcoin/bitcoin/pull/31615) to keep the validation path for `reindex` the same as the regular IBD validation path.\r\n\r\nDevelopers benchmarking IBD with `-reindex` may find this behaviour undesirable. In such cases, it’s recommended to use `-reindex-chainstate` instead or ensure that the available blocks have sufficient chainwork.\r\n\r\n`libbitcoinkernel` exposes the `ImportBlocks` function and expects `reindex` to connect blocks, so an attempt was made to preserve the existing behaviour for `libbitcoinkernel`.",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-11-11T14:21:14Z",
      "updated_at": "2026-02-21T10:43:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33854",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1512762627,
      "number": 28463,
      "title": "p2p: Increase inbound capacity for block-relay only connections",
      "body": "This is joint work with amitiuttarwar.\r\n\r\nSee issue #28462 for a broader discussion on increasing the number of block-relay-only connections independent of this particular implementation proposal.\r\n\r\nWe suggest to increase the number of inbound slots allocated to block-relay-only peers by increasing the default maximum connections from 125 to 200, with 50% of inbound slots accessible for tx-relaying peers.\r\nThis is a prerequisite for being able to increase the default number of outgoing block-relay-only peers later, because the current inbound capacity of the network is not sufficient.\r\nIn order to account for incoming tx-relaying peers separately from incoming block-relay peers, changes to the inbound eviction logic are necessary.\r\n\r\nSee the next post in this thread for a more detailed explanation and motivation of the changes.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2023-09-12T20:36:39Z",
      "updated_at": "2026-02-21T10:14:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28463",
      "labels": [
        "P2P",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 904,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3310263904,
      "number": 34643,
      "title": "[RFC] cluster_linearize: add O(N) fast path for chain-shaped clusters",
      "body": "This PR relies on PR https://github.com/bitcoin/bitcoin/pull/34625\r\n## Summary                                                                       \r\n                                                                                 \r\nThis PR adds `TryLinearizeChain()`, an O(N) specialised linearizer for chain-shaped\r\nclusters, and a benchmark targeting the feerate distribution that triggers the worst-case\r\nbehaviour of the general SPF algorithm on chains.                                \r\n                                                                                 \r\n**Commits:**                                                                     \r\n- `ad15466be1e4` cluster_linearize: add O(N) fast path for chain-shaped clusters \r\n- `72bf0faf820c` cluster_linearize: benchmark Linearize on worst-case chain feerate distribution\r\n                                                                                 \r\n---                                                                              \r\n                                                                                 \r\n## Motivation                                                                    \r\n                                                                                 \r\nInstrumentation added to a running node revealed that **virtually most cluster seen in the\r\nmempool is chain-shaped** — each transaction spends an output of the previous one. This is\r\nconsistent with widespread use of CPFP (Child-Pays-For-Parent) fee bumping, where a\r\nlow-feerate parent transaction is paired with a high-feerate child that spends one of its\r\noutputs, forming a two-transaction chain; longer chains arise from repeated CPFP stacking or\r\nbatch-payment patterns.                                                          \r\n                                                                                 \r\nBecause chain clusters dominate in practice, a topology-specific O(N) fast path has\r\ndisproportionately large impact compared with optimising for rarer topologies.   \r\n                                                                                 \r\nThe general `Linearize()` function uses the Spanning Forest (SPF) algorithm, whose\r\n`MakeTopological()` phase merges chunks iteratively. For a chain cluster with N transactions\r\nand strictly increasing individual feerates (fee_i = i+1), `MakeTopological` triggers a\r\ncascade that merges the entire chain into one chunk step-by-step. At merge step k, two\r\noperations each scan the growing top-part chunk of size k:                       \r\n                                                                                 \r\n- `UpdateChunk` iterates over all k transactions to write their `chunk_rep` (unconditionally,\r\n  regardless of any inner-loop conditions).                                      \r\n- `MergeChunks` iterates over all k transactions to locate the dependency connecting top and\r\n  bottom chunks.                                                                 \r\n                                                                                 \r\nThis accumulates O(1+2+...+(N-1)) = O(N²) loop iterations across the full cascade.\r\nAn O(N) specialised path avoids the SPF overhead entirely for chain-shaped clusters.\r\n                                                                                 \r\n---                                                                              \r\n                                                                                 \r\n## Algorithm                                                                     \r\n                                                                                 \r\n### Detection (`TryLinearizeChain`)                                              \r\n                                                                                 \r\nA cluster with N transactions is a chain if and only if its ancestor-set sizes form exactly\r\n{1, 2, ..., N}. This is checked in O(N) using a boolean presence array;          \r\n`Ancestors(i).Count()` is O(1) for the fixed-size `BitSet<64>` used here.        \r\n                                                                                 \r\n### Topological order                                                            \r\n                                                                                 \r\nThe node with k ancestors occupies position k−1 in the unique topological order. Recovered\r\nin O(N) by a single mapping pass.                                                \r\n                                                                                 \r\n### Why PostLinearize is not needed                                              \r\n                                                                                 \r\nThe topological order of a chain cluster is unique, and every adjacent pair has a dependency,\r\nso `ChunkLinearizationInfo`'s unconditional merge and `PostLinearize`'s merge/swap behave\r\nidentically (the swap branch never triggers). The topological order itself is the optimal\r\nlinearization, and `PostLinearize` can be safely skipped.                        \r\n                                                                                 \r\nThe result is returned early from `Linearize()` before the SPF machinery is initialised:\r\n                                                                                 \r\n```cpp                                                                           \r\n// In Linearize():                                                               \r\nif (auto chain_lin = TryLinearizeChain(depgraph); !chain_lin.empty()) {          \r\n    return {std::move(chain_lin), /*optimal=*/true, /*cost=*/0, /*is_chain=*/true};\r\n}                                                                                \r\n```                                                                              \r\n                                                                                 \r\nThe fourth return value (`is_chain`) allows the caller (`Relinearize()`) to skip the\r\n`PostLinearize()` pass, which is redundant for chains: `TryLinearizeChain` already\r\nproduces an optimal, connected linearization.                                    \r\n                                                                                 \r\n---                                                                              \r\n                                                                                 \r\n## Benchmark results                                                             \r\n                                                                                 \r\n### `LinearizeOptimallyMonotoneChainTotal` — increasing feerates (SPF worst case)\r\n                                                                                 \r\n`MakeMonotoneChainGraph` builds a chain with fee_i = i+1, size_i = 1. For the SPF\r\nalgorithm, every prefix of the chain has feerate (k+1)/2 (strictly increasing with length),\r\nso `MakeTopological` must merge the entire chain into a single chunk through N−1 steps.\r\nEach step scans the growing top-part chunk (via `UpdateChunk`'s unconditional `chunk_rep`\r\nwrite loop and `MergeChunks`'s dep-search loop), accumulating O(N²) iterations in total.\r\n`TryLinearizeChain` eliminates this entirely.                                    \r\n                                                                                 \r\n| Size | Before (ns/op) | After (ns/op) | Speedup |                              \r\n|------|---------------|--------------|---------|                                \r\n| 9 tx | 973 | 48 | **20×** |                                                    \r\n| 16 tx | 1,772 | 72 | **25×** |                                                 \r\n| 32 tx | 3,880 | 129 | **30×** |                                                \r\n| 48 tx | 6,205 | 185 | **34×** |                                                \r\n| 63 tx | 8,551 | 238 | **36×** |                                                \r\n                                                                                 \r\nInstructions per call after optimisation:                                        \r\n                                                                                 \r\n| N | Total instructions | Instructions/tx |                                     \r\n|---|-------------------|----------------|                                       \r\n| 9 | 954 | 106 |                                                                \r\n| 16 | 1,360 | 85 |                                                              \r\n| 32 | 2,295 | 72 |                                                              \r\n| 48 | 3,230 | 67 |                                                              \r\n| 63 | 4,100 | 65 |                                                              \r\n                                                                                 \r\nThe \"after\" timings confirm that `TryLinearizeChain` runs in O(N) regardless of feerate\r\ndistribution (~65–106 instructions per transaction at N=9..63, constant converging as N\r\ngrows). The speedup grows with N because the baseline trends towards O(N²) while the\r\noptimised path remains O(N).                                                     \r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2026-02-21T05:11:29Z",
      "updated_at": "2026-02-21T10:11:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34643",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 9324,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3310552312,
      "number": 34644,
      "title": "mining: add submitBlock to IPC Mining interface",
      "body": "This PR adds a `submitBlock` method to the IPC Mining interface, equivalent to the `submitblock` RPC. It accepts a serialized block over IPC, validates/processes it via the normal block-processing path.\r\n\r\nThe method uses the same result shape as `checkBlock`: `bool` + `reason/debug out-params`. It reports duplicate, inconclusive, and invalid-block rejection details, and initializes reason/debug on every call.\r\n\r\nCloses #34626",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-21T08:47:59Z",
      "updated_at": "2026-02-21T10:09:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34644",
      "labels": [
        "Mining",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 478,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3220617054,
      "number": 34435,
      "title": "refactor: use `_MiB`/`_GiB` consistently for byte conversions",
      "body": "### Problem\r\nByte-size conversions in the codebase currently show up in many equivalent formats (multiplication/division chains, shifts, hex/binary literals), which creates a maintenance burden and makes review error-prone - especially considering the architectural differences of `size_t`.\r\nInspired by https://github.com/bitcoin/bitcoin/pull/34305#discussion_r2734720002, it seemed appropriate to unify `Mebibyte` usage across the codebase and add `Gibibyte` support with 32/64 bit `size_t` validation.\r\n\r\n### Fix\r\nThis PR refactors those call sites to use `\"\"_MiB` (existing) and `\"\"_GiB` (new), and adds the encountered value/pattern replacements to unit tests to make review straightforward, and to ensure the conversions remain valid.\r\nThe literals are overflow-checked when converting to `size_t`, and unit tests cover the 32-bit boundary cases.\r\n\r\nConcretely, it replaces patterns such as:\r\n* `1024*1024`, `1<<20`, `0x100000`, `1048576`, `/ 1024 / 1024`, `* (1.0 / 1024 / 1024)` → `1_MiB` or `double(1_MiB)`\r\n* `1024*1024*1024`, `1<<30`, `0x40000000`, `1024_MiB`, `>> 30` → `1_GiB`\r\n\r\n### Note\r\nIn the few places where arithmetic involves signed values, the result is identical to the previous code assuming those quantities never become negative.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-28T21:26:10Z",
      "updated_at": "2026-02-21T09:50:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34435",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1317,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3031948596,
      "number": 33920,
      "title": "Export embedded ASMap RPC",
      "body": "This depends on the embedded data PR itself (#28792), until merge this will remain in draft status. All commit but the last one are from there.\r\n\r\nThere has been interest in exporting the embedded data back into a file. This is implemented here with a simple `exportasmap` RPC which provides this functionality. The exported file can be used to verify the data integrity or statistical analysis using e.g. `contrib/asmap-tool.py`.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-20T23:53:36Z",
      "updated_at": "2026-02-21T09:28:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33920",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 456,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3034182041,
      "number": 33922,
      "title": "mining: add getMemoryLoad() and track template non-mempool memory footprint",
      "body": "Implements a way to track the memory footprint of all non-mempool transactions that are still being referenced by block templates, see discussion in  #33899. It does not impose a limit.\r\n\r\nIPC clients can query this footprint (total, across all clients) using the `getMemoryLoad()` IPC method. Its client-side usage is demonstrated here:\r\n- https://github.com/stratum-mining/sv2-tp/pull/63\r\n\r\nAdditionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client drops references to them, or calls the template destroy method, or disconnects. The destroy method is called automatically by clients using [libmultiprocess](https://github.com/bitcoin-core/libmultiprocess), as [sv2-tp](https://github.com/stratum-mining/sv2-tp) does. In the Python tests it also happens when references are destroyed or go out of scope.\r\n\r\nThe PR starts with preparation refactor commits:\r\n\r\n1. Tweaks `interface_ipc.py` so `destroy()` calls happen in an order that's useful to later demonstrate memory management\r\n2. Change `std::unique_ptr<BlockTemplate> block_template` from a `static` defined in `rpc/mining.cpp` to `NodeContext`. This prevents a crash when we switch to a non-trivial destructor later (which uses `m_node`).\r\n\r\nThen the main commits:\r\n\r\n3. Add `template_tx_refs` to `NodeContext` to track how many templates contain any given transaction. This map is updated by the `BlockTemplate` constructor and destructor.\r\n4. Add `GetTemplateMemoryUsage()` which loops over this map and sums up the memory footprint for transactions outside the mempool\r\n5. Expose this information to IPC clients via `getMemoryLoad()` and add test coverage\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-21T15:34:14Z",
      "updated_at": "2026-02-21T09:14:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33922",
      "labels": [
        "Mining",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1801,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3037988791,
      "number": 33929,
      "title": "test: Remove `system_tests/run_command` runtime dependencies",
      "body": "`system_tests` currently rely on `cat`, `echo`, `false` and `sh` being available in `PATH` at runtime.\r\n\r\nThis PR:\r\n1. Removes these dependencies.\r\n2. Reduces the number of platform-specific code paths.\r\n\r\nThe change is primarily motivated by my work on maintaining the [`bitcoin-core`](https://packages.guix.gnu.org/packages/bitcoin-core) package in Guix. It enables the removal of the existing `bash` and `coreutils` native inputs, which in turn makes it possible to drop the implicit dependency on `qtbase@5` (see https://codeberg.org/guix/guix/pulls/4386#issuecomment-8613333).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-23T23:03:10Z",
      "updated_at": "2026-02-21T09:00:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33929",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 642,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3054407979,
      "number": 33966,
      "title": "refactor: disentangle miner startup defaults from runtime options",
      "body": "The interaction between node startup options like `-blockreservedweight` and runtime options, especially those passed via IPC, is confusing.\r\n\r\nThey're combined in `BlockAssembler::Options`, which this PR gets rid of in favour of two distinct structs:\r\n\r\n1. `BlockCreateOptions`: used by interface clients. As before, IPC clients have access to a safe / sane subset, whereas RPC and test code can use all fields.\r\n2. `MiningArgs`: these are set once during node startup\r\n\r\nBoth structs have a member for the maximum block height, which is not a problem since they're different structs. The one on `MiningArgs` (`block_max_weight`) matches `-maxblockheight` and is left alone. The one on `BlockCreateOptions` (`block_max_weight`) is an optional, it's set by `ApplyMiningDefaults` only if empty. \r\n\r\nThis all happens in the last commit and requires some preparation to keep things easy to review.\r\n\r\nWe get rid of `BlockAssembler::Options` but this is used in many tests. Since large churn is inevitable, we might as well switch all tests, bench and fuzzers over to the Mining interface. The first (non-base) commit does that, dramatically reducing direct use of `BlockAssembler`. Two exceptions are documented in the commit message. Because `test_block_validity` wasn't available via the interface and the block_assemble benchmark needs it, it's moved from `BlockAssembler::Options` to `BlockCreateOptions` (still not exposed via IPC).\r\n\r\nWe need access to mining related defaults and structs from both the miner and node initialization code. To avoid having to pull in all of `BlockAssembler` for the latter, the second commit introduces `node/mining.h` and moves constants and structs there from `src/node/types.h` (`BlockCreateOptions`, `BlockWaitOptions`, `BlockCheckOptions`) and `src/node/miner.h` (`DEFAULT_PRINT_MODIFIED_FEE`).\r\n\r\nI considered also moving `DEFAULT_BLOCK_MAX_WEIGHT`, `DEFAULT_BLOCK_RESERVED_WEIGHT`, `MINIMUM_BLOCK_RESERVED_WEIGHT` and `DEFAULT_BLOCK_MIN_TX_FEE` there from `policy.h`, since they are distinct from relay policy and not needed by the kernel. But this seems more appropriate for a follow-up and requires additional discussion.\r\n\r\nThe meat and potatoes of this PR is split between the three last commits for easier review:\r\n\r\n1. Adds `node/mining_args.{h,cpp}` and move the options checking out of `init.cpp`, without adding storage\r\n2. Add `block_max_weight` to `BlockCreateOptions` as explained above\r\n3. Introduce the `MiningArgs` struct, add it to the `NodeContext`, expand `mining_args.cpp` to store it, pass it to `BlockAssembler`, etc.\r\n\r\nI kept variable renaming and other formatting changes to a minimum to ease review with `--color-moved=dimmed-zebra`.\r\n\r\nThis PR builds on the bug fix in:\r\n- [ ] #33965\r\n\r\nOnce that is merged, this PR should not change behaviour.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T15:42:31Z",
      "updated_at": "2026-02-21T08:33:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33966",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2878,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3056547139,
      "number": 33974,
      "title": "cmake: Check dependencies after build option interaction",
      "body": "At present, `CMakeLists.txt` interleaves configuration-option handling with dependency discovery. As a result, unnecessary checks may be performed. For example:\r\n```\r\n$ cmake -B build --preset dev-mode -DBUILD_FOR_FUZZING=ON\r\n<snip>\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"2.3.0\")\r\n-- Found ZeroMQ: /usr/lib64 (found suitable version \"4.3.5\", minimum required is \"4.0.0\")\r\n-- Performing Test HAVE_USDT_H\r\n-- Performing Test HAVE_USDT_H - Success\r\n-- Found USDT: /usr/include\r\n-- Found QRencode: /usr/lib64/libqrencode.so (found version \"4.1.1\")\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\r\n-- Found Threads: TRUE\r\n-- Performing Test HAVE_STDATOMIC\r\n-- Performing Test HAVE_STDATOMIC - Success\r\n-- Found WrapAtomic: TRUE\r\n-- Found OpenGL: /usr/lib64/libOpenGL.so\r\n-- Found WrapOpenGL: TRUE\r\n-- Found WrapVulkanHeaders: /usr/include\r\n-- Found Qt: /usr/lib64/cmake/Qt6 (found suitable version \"6.10.1\", minimum required is \"6.2\")\r\nCMake Warning at CMakeLists.txt:206 (message):\r\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\r\n  BUILD_FUZZ_BINARY=ON.\r\n\r\n<snip>\r\n```\r\n\r\nThis PR restructures the code to ensure that all dependencies are checked only after the final build option interaction.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-30T15:50:06Z",
      "updated_at": "2026-02-21T08:19:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33974",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3207254787,
      "number": 34400,
      "title": "wallet: parallel fast rescan (approx 5x speed up with 16 threads)",
      "body": "This PR uses the [ThreadPool](https://github.com/bitcoin/bitcoin/blob/master/src/util/threadpool.h) to implement parallel fast rescan.\r\n\r\nThis PR:\r\n- Adds a `ThreadPool` to the `WalletContext` to be shared by all the wallets\r\n- Adds `-walletpar` parameter to configure the number of threads to be used for parallel scanning \r\n- Updates the `wallet_fast_rescan.py` test to ensure it catches cases where the FastRescan filter wasn't properly updated. This is crucial to ensure that changes in the PR do not cause newly added output scripts to be missed.\r\n- Refactors `ScanForWalletTransactions` to make the implementation of parallel scanning easier.\r\n- Implements parallel scanning\r\n\r\nBenchmarks:\r\n**NOTE: to reproduce, please tune your system with `pyperf system tune`**\r\n\r\n_EDIT\r\nSet up your node to use block filters by setting `blockfilterindex=1` in your bitcoin.conf file and ensure your blockfilterindex is synced to tip before attempting to reproduce._\r\n\r\nUsing the following command on mainnet with a wallet with no scripts and hyperfine version `1.20.0`:\r\n```\r\nhyperfine --show-output --export-markdown results.md --export-json results.json  \\\r\n--sort command \\\r\n--runs 3 \\\r\n-L commit ef847e8,37d356b \\\r\n-L num_threads 1,2,4,8,16 \\\r\n--prepare 'git checkout {commit} && cmake --build build -j 20 && build/bin/bitcoind -blockfilterindex=1 -walletpar={num_threads} && sleep 10 && build/bin/bitcoin-cli loadwalllet <wallet-name>' \\\r\n--conclude 'build/bin/bitcoin-cli stop && sleep 10' \\\r\n'build/bin/bitcoin-cli rescanblockchain 500000 900000'\r\n```\r\nI obtained the following results:\r\n| Command | Mean [s] | Min [s] | Max [s] | Relative |\r\n|:---|---:|---:|---:|---:|\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = baseline, num_threads = ..)` | 536.996 ± 0.722 | 536.257 | 537.701 | 4.64 ± 0.01 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 1)` | 540.210 ± 2.696 | 537.172 | 542.320 | 4.67 ± 0.03 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 2)` | 358.190 ± 0.515 | 357.675 | 358.706 | 3.10 ± 0.01 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 4)` | 230.217 ± 2.321 | 228.814 | 232.896 | 1.99 ± 0.02 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 8)` | 151.144 ± 1.748 | 149.506 | 152.984 | 1.31 ± 0.02 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 16)` | 115.642 ± 0.305 | 115.390 | 115.982 | 1.00 |\r\n\r\nSystem information:\r\n```\r\nArchitecture:             x86_64\r\n  CPU op-mode(s):         32-bit, 64-bit\r\n  Address sizes:          46 bits physical, 48 bits virtual\r\n  Byte Order:             Little Endian\r\nCPU(s):                   20\r\n  On-line CPU(s) list:    0-19\r\nVendor ID:                GenuineIntel\r\n  Model name:             Intel(R) Core(TM) Ultra 7 265\r\n    CPU family:           6\r\n    Model:                198\r\n    Thread(s) per core:   1\r\n    Core(s) per socket:   1\r\n    Socket(s):            20\r\n    Stepping:             2\r\n    CPU(s) scaling MHz:   41%\r\n    CPU max MHz:          4800.0000\r\n    CPU min MHz:          800.0000\r\n    BogoMIPS:             4761.60\r\n```\r\n\r\nFurther benchmarks were performed using a [python script](https://github.com/Eunovo/rescan-benchmark) with custom chains designed with payments at specified intervals, and the following graph was produced:\r\n\r\n<img width=\"4760\" height=\"8950\" alt=\"benchmark_comparison\" src=\"https://github.com/user-attachments/assets/1ba8c64d-cfca-4360-af06-1f034a30e307\" />\r\n\r\nThis graph was produced from a laptop with the following CPU specifications:\r\n```\r\nArchitecture:                x86_64\r\n  CPU op-mode(s):            32-bit, 64-bit\r\n  Address sizes:             48 bits physical, 48 bits virtual\r\n  Byte Order:                Little Endian\r\nCPU(s):                      16\r\n  On-line CPU(s) list:       0-15\r\nVendor ID:                   AuthenticAMD\r\n  Model name:                AMD Ryzen 9 8945HS w/ Radeon 780M Graphics\r\n    CPU family:              25\r\n    Model:                   117\r\n    Thread(s) per core:      2\r\n    Core(s) per socket:      8\r\n    Socket(s):               1\r\n    Stepping:                2\r\n    Frequency boost:         enabled\r\n    CPU(s) scaling MHz:      63%\r\n    CPU max MHz:             5263.0000\r\n    CPU min MHz:             400.0000\r\n```\r\n\r\nAll materials for the custom benchmarks can be found [here](https://github.com/Eunovo/rescan-benchmark).\r\n\r\nAlthough not explicitly checked with Valgrind, hyperfine reported that memory usage stayed the same across all runs. I'm not sure to what degree hyperfine's memory usage report can be trusted, but the PR limits the amount of block hashes that can be held in memory for processing to `1000` (not configurable by the user).\r\n\r\n\r\nAll benchmarks were performed against https://github.com/bitcoin/bitcoin/pull/34400/commits/37d356bbbe3efed3c7c9e64fae1bac3f4d0ec6eb instead of master because `-walletpar` is implemented here, and the benchmark scripts would otherwise break, or more complicated scripts would be required to accommodate master.\r\n",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2026-01-24T19:46:16Z",
      "updated_at": "2026-02-21T08:12:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34400",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 5257,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3076189471,
      "number": 34020,
      "title": "mining: add getTransactions(ByWitnessID) IPC methods",
      "body": "Based on:\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/242\r\n\r\nFor Stratum v2 custom job declaration to be bandwidth efficient, the pool can request[^0] only the transactions that it doesn't know about.\r\n\r\nThe spec doesn't specify how this is achieved, but one method is to call the `getrawtransaction` RPC on each transaction id listed in [DeclareMiningJob](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol?query=DeclareMiningJob#644-declareminingjob-client-server) (or a subset if the pool software maintains a cache). Using RPC is inefficient, made worse by the need to make multiple calls. It also doesn't support queuing by witness id (yet, see #34013).\r\n\r\nThis PR introduces two new IPC methods:\r\n\r\n- `getTransactionsById()`: takes a list of `Txid`'s\r\n- `getTransactionsByWitnessID()`: : takes a list of `Wtxid`'s\r\n\r\nBoth return a list of serialised transactions. An empty element is returned for transactions that were not found.\r\n\r\nThe `Txid` variant, just like its RPC counterpart, takes advantage of `-txindex` if enabled. The `Wtxid` variant can't do that unless we add a `-witnesstxindex`, but at least sv2 has no use for that.\r\n\r\nThe RPC additionally allows providing a `block_hash` hint. I haven't implemented that here because I don't have a need for it. It can always be added later.\r\n\r\nI thought about having a single (or overloaded) `getTransactions()` that works with both `Txid` and `Wtxid`, but I prefer that clients are intentional about which one they want.\r\n\r\nA unit and functional test cover the new functionality.\r\n\r\nSv2 probably only needs `getTransactionsByWitnessID()`, but it's easy enough to just add both.\r\n\r\n\r\n[^0]: there's two reasons the pool requests these transactions: to approve the template and to broadcast the block if a solution is found (the miner will also broadcast via their template provider). See also https://github.com/stratum-mining/sv2-spec/issues/170",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-05T19:13:47Z",
      "updated_at": "2026-02-21T08:10:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34020",
      "labels": [
        "Mining",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1988,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3070554287,
      "number": 34004,
      "title": "Implementation of SwiftSync",
      "body": "Link to the original protocol writeup found [here](https://gist.github.com/RubenSomsen/a61a37d14182ccd78760e477c78133cd). See the [Delving Bitcoin post](https://delvingbitcoin.org/t/swiftsync-speeding-up-ibd-with-pre-generated-hints-poc/1562) for initial works and discussion.\r\n\r\n# Motivation\r\n\r\nWhile many coins are available in cache when spent, every cache miss requires a trip to the disk. Memory can be scarce for single board machines, so cache misses are expected to be far more frequent. A trip to disk is all-the-more severe on low end hardware, so any minimization of disk interactions can speed up initial block download for limited resource devices. One such example may be a block template provider serving a home miner.\r\n\r\n# Intuition\r\n\r\nThe vast majority of coins created are later spent. The cost of this observation is many coins will be written to disk, only to be removed later. The SwiftSync protocol alleviates the problem by recording what coins have been added and removed with a small, in-memory aggregate. This allows for the removal of intermediate coin states until SwiftSync has completed. The state of the aggregate is verified at a predetermined chain height, and IBD continues as usual thereafter.\r\n\r\nFor any chain height, we know `all outputs - all inputs = UTXO set`, which is equivalently `all outputs - UTXO set = all inputs`. The goal is to verify the set `all outputs - UTXO set` is equal to `all inputs`. Addition and subtraction modulo a field offers a way to do so. For any set, if we add all elements of the set and subtract them, regardless of ordering, we will arrive at zero. In the current implementation, the set elements being compared are hashed outpoints.\r\n\r\nThe SwiftSync protocol is comprised of two structures. First, the aggregate that will record the state of what outpoints have been added (created) or subtracted (spent). Next, notice that the UTXO set must be reported in order to verify `all outputs - UTXO set = all inputs`. SwiftSync introduces a hints file, which may be provided to the client at startup. This hints file is nothing more than a pointer to each unspent output by recording the block height and the indexes that will remain unspent. By using this file, a client may omit outpoints that will be in the UTXO set when updating the aggregate. Note this file is not trusted. If a malicious actor provides a faulty UTXO set, the set comparison above will fail, and the client may begin a reindex.\r\n# Implementation\r\n\r\n## Aggregate\r\n\r\nThe hash aggregate takes outpoints, hashes them with a salted hasher, and updates 4, 64-bit limbs with wrapping modulo arithmetic. The choice of 4, 64-bit limbs with no carries between limbs was made to: 1. minimize code complexity within the aggregate 2. conform to existing APIs, namely `uint256`. After adding and subtracting some arbitrary list of outpoints, we may poll if the sets were equivalent with `IsZero`.\r\n## Hintsfile\r\n\r\nThe hints file is a map of block height to the indexes of the outputs in that block that _will_ be in the UTXO set. To construct this file for a particular UTXO set state, each block must be read and queried to find the outputs in that block that remain unspent. Because this is a read-only operation, this may be done on parallel threads in the future. To allow for parallelization, the hints file contains a \"contents\" section, which denotes the height and corresponding file position to find the hints for that block.\r\n\r\nTo save space when representing the indexes that remain unspent in a block, an easy choice is to take the difference between the last coin that was unspent and the next one in the block. AFICT this is a version of run-length-encoding. These indexes are encoded using `compactSize` to further save space, the run-lengths should normally fit into at least 16 bits, often 8 bits.\r\n## Parameter Interaction\r\n\r\nA side effect of omitting intermediate UTXO states while performing IBD is the \"undo data\" cannot be derived. There are already configurations that do not have full undo data history, namely pruned nodes. To avoid additional complexity in this PR, this version of accelerated IBD is only made available to pruned nodes, as the undo data would have been removed regardless of the this setting.\r\n\r\nOther parameter interactions, not yet implemented:\r\n- `assumeutxo`: Startup should fail if both are configured. A hints file will have no effect, as the UTXO set is already present.\r\n- `assumevalid`: A natural choice is to only allow SwiftSync when using `assumevalid`, and to only allow a hints file that commits to the `assumevalid` block. Similar to `assumeutxo`, a hash of the hints file may be committed to in the binary, which would be resistant to griefing attacks.\r\n# Testing [Linux example]\r\n\r\nIn your `bitcoin` directory, download the hints from the test server:\r\n\r\n```bash\r\ncurl -o signet.hints https://utxohints.store/hints/signet\r\n```\r\n\r\nVerify the hash of the file:\r\n\r\n```bash\r\necho \"2b625392ecb2adba2b5f9d7b00c8f3a8adca0d3c  signet.hints\" | sha1sum --check -\r\n```\r\n\r\nBuild the branch:\r\n\r\n```bash\r\ncmake -B build && cmake --build build -j $(nproc)\r\n```\r\n\r\nRemove existing chain state:\r\n\r\n```bash\r\nrm -rf ~/.bitcoin/signet/\r\n```\r\n\r\nProvide the file at startup:\r\n\r\n```bash\r\n./build/bin/bitcoind --chain=signet --utxohints=./signet.hints --prune=550\r\n```\r\n\r\n# Open Questions\r\n\r\n- Given the outcome of SwiftSync is pass/fail, and there is no use of intermediate states, should blocks be persisted to disk at all during the protocol?\r\n- To what degree should a hints file be committed to in the binary. No commitment allows for a server to provide hints for an arbitrary height, providing a convenience for the client, but opens up the possibility of a grief attack. Of course the server risks losing reputation for serving faulty files.\r\n\r\n# Future Iteration\r\n\r\nThis is the first iteration of the SwiftSync proposal, however more optimizations may be made. Namely, because set elements may be added or subtracted from the aggregate in any order, blocks may be downloaded in parallel from multiple peers. If you are interested in benchmarking the performance of a fully-parallel version, see the [Rust implementation](https://github.com/2140-dev/swiftsync).\r\n",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2025-12-04T09:50:39Z",
      "updated_at": "2026-02-21T07:25:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34004",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 6261,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3193557787,
      "number": 34359,
      "title": "test: add test for rebroadcast of transaction received via p2p",
      "body": "The wallet doesn't only rebroadcast transactions it created, but also relevant transactions received via p2p. \r\nSince this is not self-evident, add test coverage for it.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-21T02:42:05Z",
      "updated_at": "2026-02-21T07:25:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34359",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 232,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3088060609,
      "number": 34038,
      "title": "logging: replace -loglevel with -trace, various API improvements",
      "body": "Various API improvements:\r\n                                                                                                    \r\nFor users:      \r\n\r\n  - A new -trace option controls trace-level logging, using the same syntax as -debug. So `-debug=net` enables debug logs for net, `-trace=net` adds trace logs too. This replaces the `-loglevel` option, which had different syntax and had to be combined with `-debug` to take effect.\r\n - The logging RPC gains trace support: a new trace parameter enables trace-level logging per category, and the output now distinguishes excluded/debug/trace categories. (`-deprecatedrpc=logging` preserves the old format.)\r\n\r\nFor developers:\r\n\r\n  - `STDLOCK()` macro for `StdMutex`, enabling clang thread-safety analysis to catch annotation gaps.\r\n  - `util::log::NO_RATE_LIMIT` lets you write LogInfo(util::log::NO_RATE_LIMIT, \"...\") instead of using the internal `LogPrintLevel` function.\r\n  - Cleaner internals: `LogPrintLevel` moves to a `detail_` namespace, `GetLogCategory` moves into `Logger`, and more\r\n  files switch from `logging.h` to the lighter `util/log.h` (continuing the separation started in #34465).",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-10T05:56:20Z",
      "updated_at": "2026-02-21T06:39:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34038",
      "labels": [
        "Needs release note",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1215,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3308270443,
      "number": 34638,
      "title": "guix: Update storage requirement for HOSTS and added warning for Guix overhead",
      "body": "This is an alternative to #33889\r\n\r\nThe lasttime the storage requirements were updated is 4 years ago in #22075 and do not match the current needs of a Guix build. This PR updates the storage requirements to align with recent builds.\r\n\r\nThe current code is quite off for certain hosts (the total equals out overall), but the check also ignores the output directory which takes up an additional 5 GiB of disk space:\r\n\r\n<details>\r\n\r\nComparing real usage against the script's estimates:\r\n\r\n| Host                  | Real KiB  | Estimate KiB | Delta          |\r\n| --------------------- | --------- | ------------ | -------------- |\r\n| `aarch64-linux-gnu`   | 3,875,896 | 6,400,000    | **-2,524,104** |\r\n| `arm-linux-gnueabihf` | 2,983,008 | 6,400,000    | **-3,416,992** |\r\n| `riscv64-linux-gnu`   | 5,712,668 | 6,400,000    | -687,332       |\r\n| `x86_64-linux-gnu`    | 3,978,648 | 6,400,000    | **-2,421,352** |\r\n| `powerpc64-linux-gnu` | 4,026,948 | 6,400,000    | -2,373,052     |\r\n| `x86_64-w64-mingw32`  | 8,022,644 | 7,600,000    | +422,644       |\r\n| `x86_64-apple-darwin` | 2,714,848 | 440,000      | **+2,274,848** |\r\n| `arm64-apple-darwin`  | 2,659,824 | 440,000      | **+2,219,824** |\r\n| `output dir ` | 5,500,000 | 0 | **+5,500,00**|\r\n\r\n\r\n</details>\r\n\r\nThis PR makes the following changes: \r\n- Updates the required KiB per category to current needs + 10% margin\r\n- it adds an extra category for `riscv64` (was way off * category )\r\n- adds output directory storage requirements \r\n\r\nThis all totals to 42 GiB (using all hosts) :\r\n<details>\r\n\r\nOutput for #34550 on Guix 1.5.0 \r\n\r\n| Host                  |  Real KiB | Estimate      | Margin     |\r\n| --------------------- | ---------------- | ------------- | ---------- |\r\n| `aarch64-linux-gnu`   | ~3,880,000       | 4,400,000     | +13%       |\r\n| `arm-linux-gnueabihf` | ~3,041,000       | 4,400,000     | +45%       |\r\n| `powerpc64-linux-gnu` | ~4,089,000       | 4,400,000     | +8%        |\r\n| `x86_64-linux-gnu`    | ~3,985,000       | 4,400,000     | +10%       |\r\n| `riscv64-linux-gnu`   | ~5,767,000       | 6,300,000     | +9%        |\r\n| `x86_64-w64-mingw32`  | ~8,074,000       | 9,000,000     | +11%       |\r\n| `x86_64-apple-darwin` | ~2,726,000       | 3,000,000     | +10%       |\r\n| `arm64-apple-darwin`  | ~2,726,000       | 3,000,000     | +10%       |\r\n| **output**            | ~4,929,000 | 5,500,000 | +10% |\r\n\r\nOutput for #34627 on Guix 1.4.0 \r\n\r\n| Host                  |  Real KiB | Estimate      | Margin     |\r\n| --------------------- | ---------------- | ------------- | ---------- |\r\n| `aarch64-linux-gnu`   | ~3,934,232       | 4,400,000     | +12%       |\r\n| `arm-linux-gnueabihf` | ~3,040,552       | 4,400,000     | +45%       |\r\n| `powerpc64-linux-gnu` | ~4,084,480       | 4,400,000     | +8%        |\r\n| `x86_64-linux-gnu`    | ~4,036,900       | 4,400,000     | +9%       |\r\n| `riscv64-linux-gnu`   | ~5,764,512       | 6,300,000     | +9%        |\r\n| `x86_64-w64-mingw32`  | ~8,087,164       | 9,000,000     | +11%       |\r\n| `x86_64-apple-darwin` | ~2,762,992       | 3,000,000     | +9%       |\r\n| `arm64-apple-darwin`  | ~2,707,800       | 3,000,000     | +11%       |\r\n| **output**            | ~5,048,228 | 5,500,000 | +9% |\r\n\r\n</details>\r\n\r\nAdditionally, maybe more controversial (happy to drop), I've added a second check to warm users if they do not have enough free space to store the guix overhead (`/gnu` store) which is an additional 8,7 GiB.  This check only warns and does not stop the build. \r\n\r\n<details> <summary> New warning message:</summary>\r\n\r\n```terminal\r\nFound macOS SDK at '/root/SDK/Xcode-26.1.1-17B100-extracted-SDK-with-libcxx-head\r\ners', using...\r\n\r\nWARN: Available disk space (42 GiB) may be insufficient for the\r\n      estimated total of 51 GiB (build directories, output,\r\n      and Guix environment overhead).\r\n\r\nThe build will proceed, but may fail mid-way if disk space runs out.\r\n\r\nChecking that we can connect to the guix-daemon...\r\n```\r\n</details>\r\n\r\nNB.\r\nCould not find a good reason for the change  in disk usage, even older V29 build take up roughly the same size as recent builds.",
      "state": "open",
      "user": "janb84",
      "created_at": "2026-02-20T15:00:28Z",
      "updated_at": "2026-02-21T06:11:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34638",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4197,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3184839812,
      "number": 34329,
      "title": "rpc,net: Add private broadcast RPCs",
      "body": "Follow up from #29415 \r\n\r\nSending a transaction via private broadcast does not have any way for a user to track the status of the transaction before it gets returned by another peer. The default logs have been removed as well in #34267. Nor is there any way to abort a transaction once it has been added to the private broadcast queue.\r\n\r\nThis adds two new RPCs:\r\n- `getprivatebroadastinfo` returns information about what transactions are in the private broadcast queue, including all the peers' addresses we have chosen and timestamps.\r\n- `abortprivatebroadcast` stops broadcasting a transaction in the private broadcast queue.",
      "state": "closed",
      "user": "andrewtoth",
      "created_at": "2026-01-18T01:46:20Z",
      "updated_at": "2026-02-21T05:58:29Z",
      "merged_at": "2026-02-19T21:42:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34329",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 664,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3307862328,
      "number": 34636,
      "title": "node: allocate index caches proportional to usage patterns",
      "body": "The current cache allocation for optional indexes (txindex, txospenderindex, blockfilterindex) uses a sequential total_cache / 8 approach where each index gets 1/8 of the remaining budget after the previous index has been allocated. This means the order in which indexes appear in the code silently determines how much cache each one gets.\r\n\r\n|Index|Current share of total|\r\n|---|---|\r\n|txindex\t|~12%|\r\n|txospenderindex|~11%|\r\n|blockfilterindex\t|~10%|\r\n\r\nThis is unintuitive, undocumented, and probably doesn't reflect actual usage patterns. This PR replaces the sequential 1/8 allocation with explicit percentages based on how the indexes are typically used. The current values are an educated guess, and subject to further benchmark and research of typical client usage patterns.\r\n\r\n|Index|Allocation|Rationale|\r\n|---|---|---|\r\n|txindex |10% |Serves getrawtransaction RPCs with mostly unique lookups across the entire blockchain: low cache reuse|\r\n|txospenderindex|5%|Serves gettxspendingprevout RPCs with very specific outpoint queries: likely the least repetitive access pattern|\r\n|blockfilterindex|15%|Serves BIP 157 light clients that repeatedly query the same recent blocks: highest cache benefit|\r\n\r\nThis is a continuation of  the related discussion: https://github.com/bitcoin/bitcoin/pull/24539#discussion_r2809088034 and https://github.com/bitcoin/bitcoin/pull/31483.\r\n\r\nFurther feedback and input is very much appreciated.",
      "state": "open",
      "user": "svanstaa",
      "created_at": "2026-02-20T13:14:11Z",
      "updated_at": "2026-02-21T05:00:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34636",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1493,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3132300728,
      "number": 34158,
      "title": "torcontrol: Remove libevent usage",
      "body": "This is part of the effort to remove the libevent dependency from our code base: https://github.com/bitcoin/bitcoin/issues/31194\r\n\r\nThe current approach tries to reuse existing code and follows roughly similar design decisions. It replaces the libevent-based async I/O with blocking I/O utilizing the existing `Sock` and `CThreadInterrupt`. The controller runs in a dedicated thread.\r\n\r\nThere are some optional code modernizations thrown in made along the way (namings, constexpr etc.). These are not strictly necessary but make the end result with the new code more consistent.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-27T14:20:31Z",
      "updated_at": "2026-02-21T04:55:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34158",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 612,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3253567659,
      "number": 34523,
      "title": "doc: Clarify why performance-move-const-arg.CheckTriviallyCopyableMove=false",
      "body": "Without this doc, there is a risk that the setting will be turned off, see https://github.com/bitcoin/bitcoin/pull/34514.\r\n\r\nThe reason to disable it is to catch logic bugs, even on trivially copyable types:\r\n\r\n```cpp\r\n#include <utility>\r\nvoid Eat(int&& food) { food = 0; };\r\nint main() {\r\n  int food{2};\r\n  Eat(std::move(food));\r\n  Eat(std::move(food));  // This should err\r\n}\r\n```",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-06T07:49:13Z",
      "updated_at": "2026-02-21T04:53:50Z",
      "merged_at": "2026-02-09T13:54:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34523",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 459,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3300832556,
      "number": 34619,
      "title": "sqlite: Delete wallet.dat-journal on database close",
      "body": "The wallet.dat-journal file is SQLite's hot journal file. This file is either deleted, truncated, or has its header zeroed when a database transaction is committed. However, in `restorewallet`, we are assuming that sqlite decided to delete the journal file even though it may have truncated or zeroed its header instead.\r\n\r\nThis PR changes `SQLiteDatabase::Close()` to remove the journal file if it is 0 bytes, or if the header (first 28 bytes) is all 0's. Otherwise, it leaves the file untouched.\r\n\r\nThis fixes one of the issues described in #34354\r\n\r\nAn alternative is to have `RestoreWallet` specifically also delete the journal file. However, I thought that this solution would be more robust as I think there are other places where we expect the journal file to be deleted on a clean close of a wallet database.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-02-18T23:58:50Z",
      "updated_at": "2026-02-21T04:20:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34619",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 868,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3138438378,
      "number": 34184,
      "title": "mining: add cooldown to createNewBlock() immediately after IBD",
      "body": "As reported in #33994, connected mining clients will receive a flood of new templates if the node is still going through IBD or catching up on the last 24 hours. This PR fixes that using an _optional_ cooldown mechanism, only applied to `createNewBlock()`.\r\n\r\nFirst, cooldown waits for IBD. Then, as the tip keeps moving forward, it waits a few seconds to see if the tip updated. If so, it restarts the timer and waits again. The trade-offs for this mechanism are explained below.\r\n\r\nBecause this PR changes `createNewBlock()` from a method that returns quickly to one that can block for minutes, we rely on #34568 to fix a bug in our `.capnp` definition, adding the missing `context` to `createNewBlock` (and `checkBlock`).\r\n\r\nThe second commit then adds an `interrupt()` method so that clients can cleanly disconnect.\r\n\r\n---\r\n\r\n## Rationale\r\n\r\nThe cooldown argument is optional, and not used by internal non-IPC code, for two reasons:\r\n\r\n1. The mechanism wreaks havoc on the functional test suite, which would require very careful mock time handling to work around. But that's pointless, because only IPC clients need it.\r\n2. It needs to be optional for IPC clients too, because in some situations, like a signet with only one miner, waiting for IBD can mean being stuck forever.\r\n\r\nThe reason it's only applied to `createNewBlock()` is that this is the first method called by clients; `waitNext()` is a method on the interface returned by `createNewBlock()`, at which point the cooldown is done.\r\n\r\nAfter IBD, we wait N seconds if the header is N blocks ahead of the tip, with a minimum of 3 and a maximum of 20 seconds. The minimum waiting time is short enough that it shouldn't be annoying or confusing for someone manually starting up a client. While the maximum should be harmless if it happens spuriously (which it shouldn't).\r\n\r\nIf the minimum wait is too short, clients get a burst of templates, as observed in the original issue. We can't entirely rule this out without a lot of additional complexity (like scanning our own log file for heuristics). This PR should make it a lot less likely, and thanks to the IBD wait also limit it to one day worth of blocks (`-maxtipage`).\r\n\r\nSome test runs on an M4 MacBook Pro, where I had a node catch up on the last few days worth of blocks:\r\n\r\n<img width=\"872\" height=\"972\" alt=\"Scherm­afbeelding 2026-02-04 om 18 21 17\" src=\"https://github.com/user-attachments/assets/7902a0f2-0e0b-4604-9688-cec2da073261\" />\r\n\r\nAs the chart shows, sometimes it takes longer than 3 seconds. But it turns out that in all those cases there were quite a few headers ahead of the tip. It also demonstrates that it's important to first wait for IBD, because it's less likely a random tip update takes longer than 20 seconds.\r\n\r\n- modified sv2-apps: https://github.com/Sjors/sv2-apps/tree/2026/02/cooldown\r\n- test script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-run_mainnet_pool_loop-zsh\r\n- chart script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-tip_interval_charts-py",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-31T05:17:32Z",
      "updated_at": "2026-02-21T04:13:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34184",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3116,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149207404,
      "number": 34208,
      "title": "bench: add fluent API for untimed `setup` steps in nanobench",
      "body": "### Context\r\nAs described in https://github.com/martinus/nanobench/issues/130, we have a few benchmarks where we have to reset the state between runs, otherwise the repetitions will do something else than the first iteration.\r\n\r\n### Upstream\r\nI have opened a PR to `nanobench` to introduce an untimed setup phase, see: https://github.com/martinus/nanobench/pull/136\r\nUnfortunately the author has health issues and couldn't contribute to it in the past 2 years.\r\n\r\n### Tests\r\n\r\nTests were only added upstream, would be a bit awkward to wire in `nanobench.h` outside the benchmarking setup:\r\nhttps://github.com/martinus/nanobench/pull/136/changes/58350cfe5912d7e0533ccfcd759eea5d62eb55bb#diff-88160f647ce57661afe7d755fa70a5fa342a2b79d72d3511596878e69ed5cdc3\r\n\r\n### Fix\r\nI have moved the changes here as well and applied it to a few simple benchmarks as demonstration.\r\nWe can revert ones that are controversial and add other ones in follow-ups, this PR is mostly meant to add the `setup` feature.\r\n\r\n### Benchmarks\r\nMost benchmarks show a modest \"speedup\", others a \"slowdown\" - but it's only the effect of the setup that's not measured anymore - and a `run` phase which does the same operation in each epoch iteration (wallet benchmark changes were reverted since for simplicity):\r\n<img width=\"1496\" height=\"882\" alt=\"image\" src=\"https://github.com/user-attachments/assets/34c14565-f3df-41e5-9a86-95b2ca21703a\" />\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:45:35Z",
      "updated_at": "2026-02-21T03:50:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34208",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181854676,
      "number": 34320,
      "title": "coins: remove redundant and confusing `CCoinsViewDB::HaveCoin`",
      "body": "Split out of https://github.com/bitcoin/bitcoin/pull/34132#discussion_r2692307054.\r\n\r\n### Problem\r\nWe have two ways to check if a coin exists in the DB.\r\nOne tries to deserialize; the other just returns whether any value is associated with the key.\r\nBut we usually need the full value we probed for, and `HaveCoin` cannot cache the returned value, so it can trigger an extra lookup if `HaveCoin` uses `Exists` and the caller later needs the actual value.\r\nWe're already delegating most `HaveCoin` calls to `GetCoin` anyway for the above reasons, so the `CCoinsViewDB` implementation of `HaveCoin` is redundant.\r\n\r\n### Fix\r\nRemove `CCoinsViewDB::HaveCoin` (falls back to the base `CCoinsView::HaveCoin`, which delegates to `GetCoin`) and simplify `CCoinsViewCache::HaveCoin` to use `AccessCoin`.\r\n\r\n### Testing\r\nA unit test was added to confirm that `HaveInputs` calls the database's `::GetCoin` (not `::HaveCoin`) on cache miss and checks the cache first.\r\nAlso added a benchmark to track throughput before/after changes to ensure no regression.\r\n\r\n----\r\n\r\nNote: The latest version of the change keeps most `HaveCoin` calls for convenience; a previous version removed all of them.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-16T16:17:29Z",
      "updated_at": "2026-02-21T01:22:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34320",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1243,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3187823761,
      "number": 34342,
      "title": "cli: Replace libevent usage with simple http client",
      "body": "Part of the effort to remove the libevent dependency altogether, see #31194\r\n\r\nThis takes the [`HTTPHeaders` class](https://github.com/bitcoin/bitcoin/pull/32061/commits/d549f01caab659f1c431ccabf0f5ff1800debcfe) from #32061 and puts it into [`common/http.h|cpp`](https://github.com/bitcoin/bitcoin/pull/34342/commits/634d4dcfa428f17f0a12c2e2742c2c08e2345033). While it would not be strictly required for that PR to go in first, it might be better to review it first or simultaneously.\r\n\r\nOtherwise the change itself replaces the libevent-based HTTP client with a simple synchronous implementation which uses the `Sock` class directly.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-01-19T13:27:54Z",
      "updated_at": "2026-02-21T00:49:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34342",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 686,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3303304404,
      "number": 34622,
      "title": "test: assert_debug_log timeouts follow-up",
      "body": "Small fixups that fell through. See the commit messages for details.\r\n\r\nCan be tested via:\r\n\r\n```diff\r\ndiff --git a/src/util/thread.cpp b/src/util/thread.cpp\r\nindex 0fde73c..4fcfe4f 100644\r\n--- a/src/util/thread.cpp\r\n+++ b/src/util/thread.cpp\r\n@@ -8,2 +8,3 @@\r\n #include <util/log.h>\r\n+#include <util/time.h>\r\n #include <util/threadnames.h>\r\n@@ -18,2 +19,3 @@ void util::TraceThread(std::string_view thread_name, std::function<void()> threa\r\n     util::ThreadRename(std::string{thread_name});\r\n+    UninterruptibleSleep(999ms);\r\n     try {\r\ndiff --git a/src/validationinterface.cpp b/src/validationinterface.cpp\r\nindex c7be6ab..3237aec 100644\r\n--- a/src/validationinterface.cpp\r\n+++ b/src/validationinterface.cpp\r\n@@ -14,2 +14,3 @@\r\n #include <primitives/transaction.h>\r\n+#include <random.h>\r\n #include <util/check.h>\r\n@@ -156,2 +157,4 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\r\n \r\n+static FastRandomContext g_rnd{};\r\n+\r\n // Use a macro instead of a function for conditional logging to prevent\r\n@@ -166,2 +169,3 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\r\n             LOG_EVENT(fmt, local_name, __VA_ARGS__);           \\\r\n+            if(g_rnd.randrange(2)<1)UninterruptibleSleep(55ms);\\\r\n             event();                                           \\\r\n```\r\n\r\nWith this diff and without the changes here, the touched tests fail.\r\nWith this diff and with the changes here, the touched tests pass.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34621",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-19T14:17:26Z",
      "updated_at": "2026-02-21T00:46:17Z",
      "merged_at": "2026-02-21T00:46:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34622",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1537,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119599294,
      "number": 34124,
      "title": "refactor: make `CCoinsView` a pure virtual interface",
      "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\nThis is part of ongoing coins caching cleanup efforts, see https://github.com/bitcoin/bitcoin/issues/34280.\r\n\r\n### Fix\r\nThis PR separates interface and noop behavior, and makes `CCoinsView` pure virtual in incremental steps:\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and temporary backends\r\n* Replace direct bare-`CCoinsView` test/dummy instantiations with `CCoinsViewEmpty`\r\n* Make all `CCoinsView` methods pure virtual (`GetCoin`, `HaveCoin`, `GetBestBlock`, `GetHeadBlocks`, `BatchWrite`, `Cursor`, `EstimateSize`)\r\n* Remove legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real db-backed view and `CCoinsViewEmpty`\r\n* In `MemPoolAccept::PreChecks`, switch backend to `CCoinsViewEmpty::Get()` explicitly instead of using a local `m_dummy` member",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T08:47:33Z",
      "updated_at": "2026-02-21T00:39:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34124",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1363,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1799118469,
      "number": 29770,
      "title": "index: Check all necessary block data is available before starting to sync",
      "body": "Currently, we check that `BLOCK_HAVE_DATA` is available for all blocks an index needs to sync during startup. However, for `coinstatsindex` and `blockfilterindex` we also need the undo data for these blocks. If that data is missing in the blocks, we are currently still starting to sync each of these indices and then crash later when we encounter the missing data.\r\n\r\nThis PR adds explicit knowledge of which block data is needed for each index and then checks its availability during startup before initializing the sync process on them.\r\n\r\nThis also addresses a few open comments from #29668 in the last commit.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2024-03-30T22:55:19Z",
      "updated_at": "2026-02-20T23:59:07Z",
      "merged_at": "2026-02-20T23:59:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29770",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 689,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3309769545,
      "number": 34642,
      "title": "wallet: call SyncWithValidationInterfaceQueue after disconnecting chain notifications",
      "body": "When the wallet disconnects chain notifications, it is expecting no further notifications to execute, but this is not the case. This results in test failures such as in #34354. Instead of disconnecting the notifications and continuing shutdown, we should wait for the validation interface queue to be drained before the rest of wallet shutdown. This is achieved by adding an `interfaces::Handler::sync()` function which calls `SyncWithValidationInterfaceQueue()`.\r\n\r\nFixes #34354",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-20T23:01:26Z",
      "updated_at": "2026-02-20T23:23:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34642",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 565,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3203071670,
      "number": 34389,
      "title": "net/log: standardize peer+addr log formatting via `LogPeer`",
      "body": "This is an alternative to #34293, but aims to address the remaining logging inconsistencies more broadly.\r\nIt extends the example fixed there to every instance, restores the original separator behavior, applies it consistently via a single helper, and adds tests for `logips` (covering both current and new behavior).\r\n\r\n### Problem\r\nAfter #28521 centralized peer address logging into `CNode::LogIP()`, the original comma separator before `peeraddr=` was lost, resulting in inconsistent formatting across net (and recent private broadcast) logs.\r\nSome lines also had double spaces, empty fields, or mismatched format specifiers.\r\n\r\n### Fix\r\nIntroduces `CNode::LogPeer(bool)` which always emits `peer=<id>` and, when `-logips=1`, appends `, peeraddr=<addr>`. This eliminates hand-rolled separators and makes peer identification predictable.\r\nMinor issues (double spaces, empty placeholders, format specifiers) are fixed along the way in separate commits.\r\n\r\n### Reproducer\r\nRun with `-debug=net -logips=1` and observe peer log lines now show `peer=<id>, peeraddr=<addr>` (comma-separated). The new assertion in `feature_logging.py` automates this check.\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-23T12:09:26Z",
      "updated_at": "2026-02-20T23:22:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34389",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1214,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3307808113,
      "number": 34635,
      "title": "rpc, index: txospenderindex follow-ups",
      "body": "This addresses my own comments in the last review of #24539: https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-3829110465\r\n\r\nThe first commit fixes three small formatting errors.\r\n\r\nThe second commit refactors the body of the `gettxspendingprevout` RPC. The main theme is getting rid of the custom `Entry` struct and using a `prevouts` vector of `COutPoint`s in the first loop, pushing found spenders into the result directly and filling the prevouts that still should be processed by the index into a `index_prevouts` vector. This means there is now a clearer separation between what the two loops are doing. Early `return`/`continue` are used to get rid of some intermittend variables (`missing_from_mempool`, `txospenderindex_ready`) and if/else blocks. The result is in my opinion simpler and easier to reason about but it did not reduce the number of lines of code (which I had hoped for) so I would call this rather a style preference than a clear win.\r\n\r\nIf reviewers don't like the style of the second commit or think it is not worth the hassle to review this, I am happy to drop it!",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-02-20T12:58:10Z",
      "updated_at": "2026-02-20T23:06:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34635",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1144,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3209325275,
      "number": 34405,
      "title": "wallet: skip APS when no partial spend exists",
      "body": "Fixes #25150\n\nAPS (Avoid Partial Spends) runs a second coin selection pass to fully spend\nUTXOs sharing a scriptPubKey. This currently runs unconditionally, even when\nthe first selection has no partial spend. Running APS unnecessarily wastes\ncomputation and can produce a worse result when there was nothing to fix.\n\nDetect partial spends by comparing selected vs available UTXO counts per\nscriptPubKey, reusing available_coins. Skip APS if none found.\n\nTest updated to create partial spend scenarios so tracepoints fire.\n\n---\n\n*Supersedes #34362 which was corrupted by a shallow clone force-push.*",
      "state": "open",
      "user": "8144225309",
      "created_at": "2026-01-26T04:36:55Z",
      "updated_at": "2026-02-20T23:03:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34405",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 644,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3054115118,
      "number": 33965,
      "title": "mining: fix -blockreservedweight shadows IPC option",
      "body": "Also enforce `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients.\r\n\r\nThe `-blockreservedweight` startup option should only affect RPC code, because IPC clients (currently) do not have a way to signal their intent to use the node default (the `BlockCreateOptions` struct defaults merely document a recommendation for client software).\r\n\r\nBefore this PR however, if the user set `-blockreservedweight` then `ApplyArgsManOptions` would cause the `block_reserved_weight` option passed by IPC clients to be ignored. _Users who don't set this value were not affected._\r\n\r\nFix this by making BlockCreateOptions::block_reserved_weight an std::optional.\r\n\r\nInternal interface users, such as the RPC call sites, don't set a value so -blockreservedweight is used. Whereas IPC clients do set a value which is no longer ignored.\r\n\r\nTest coverage is added, with a preliminary commit that refactors the `create_block_template` and `wait_next_template` helpers.\r\n\r\n`mining_basic.py` already ensured `-blockreservedweight` is enforced by mining RPC methods. The second commit adds coverage for Mining interface IPC clients. It also verifies that `-blockreservedweight` has no effect on them.\r\n\r\nThe third commit enforces `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients. Previously lower values were quietly clamped.\r\n\r\n---\r\n\r\nMerge order preference: #34452 should ideally go first.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-28T13:38:33Z",
      "updated_at": "2026-02-20T22:51:54Z",
      "merged_at": "2026-02-12T02:22:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33965",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1412,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3309713624,
      "number": 34640,
      "title": "wallet: rpc: Improve error message for low feerates.",
      "body": "Giving the user a hint about what action to take when they encounter an error related to a feerate that is below the minimum. I encountered this myself not knowing about `-mintxfee` and the manpage was slightly less than clear,\r\n\r\n```\r\n       -mintxfee=<amt>\r\n\r\n              Fee rates (in BTC/kvB) smaller than this are considered zero fee for  transaction  creation\r\n              (default: 0.00001)\r\n```",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-02-20T22:38:55Z",
      "updated_at": "2026-02-20T22:39:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34640",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 459,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3213105614,
      "number": 34416,
      "title": "Add nullptr-check to CChain::Contains(), tests",
      "body": "Add unit tests to the `CChain` class, and add a nullptr-check to `CChain::Contains()` to avoid potential memory access violation by `nullptr` dereference.\r\n\r\nThe `CChain::Contains()` method (in `src/chain.h`) dereferences its input without checking. The `Next()` method also calls into this with a `nullptr` if invoked with `nullptr`. While most call sites have indirect guarantee that the input is not `nullptr`, it's not easy to establish this to all call sites with high confidence. These methods are publicly available. There is no known high-level use case to trigger this error, but the fix is easy, and makes the code safer.\r\n\r\nAlso, unit tests were added to the `CChain` class, filling a gap.\r\n\r\nChanges:\r\n\r\n- Add basic unit tests for `CChain` class methods\r\n- Add a nullptr-check to `CChain::Contains()`\r\n\r\nAlternative. I have considered changing `Contains()` to take a reference instead of pointer, however, when applying that to various methods, it grew to a much bigger changeset -- see #34440. Having in mind the friction of larger PRs, I think the present minimal one-check solution (with the tests) makes sense on its own.\r\n\r\nThis change is remotely related to and indirectly triggered by #32875 .\r\n",
      "state": "open",
      "user": "optout21",
      "created_at": "2026-01-27T05:25:08Z",
      "updated_at": "2026-02-20T22:39:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34416",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1261,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3214411194,
      "number": 34418,
      "title": "qa: Make wallet_multiwallet.py Windows crossbuild-compatible",
      "body": "Makes the functional test compatible with *Linux->Windows cross-built executables*.\r\n\r\nMain parts:\r\n* Commit \"qa: Check for platform-independent part of error message\" switches to match on platform-independent part of error message.\r\n* Commit \"qa: Test scanning errors individually\" disentangles code causing the same error message substring, based on #31410.\r\n* Commit \"qa: Disable parts of the test when running under Windows or root\" enables the test to be run on Windows, based in part on https://github.com/bitcoin/bitcoin/pull/31410#issuecomment-3554721014.\r\n\r\nAlso:\r\n* Removes unused option in wallet_multiwallet.py.\r\n* Breaks apart wallet_multiwallet.py's `run_test()` into smaller test functions.\r\n* Improves `assert_equal()` output for dicts.\r\n\r\nFixes #31409.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2026-01-27T12:35:18Z",
      "updated_at": "2026-02-20T22:33:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34418",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 830,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3308893519,
      "number": 34639,
      "title": "iwyu: Remove some `pragma: export` and other improvements",
      "body": "This PR is a prerequisite for https://github.com/bitcoin/bitcoin/pull/34448. It was split into a separate PR to limit the scope and minimize potential merge conflicts.\r\n\r\nThe first commit improves the accuracy of IWYU suggestions within our heavily templated code. Note that, for now, the `serialize.h` header itself is excluded from IWYU inspection because it lacks a corresponding source file.\r\n\r\nThe remaining commits follow the Developer Notes [guidance](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#using-iwyu):\r\n> Use `IWYU pragma: export` very sparingly, as this enforces transitive inclusion of headers and undermines the specific purpose of IWYU.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-20T17:54:01Z",
      "updated_at": "2026-02-20T21:17:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34639",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 738,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3220693682,
      "number": 34436,
      "title": "refactor: add overflow-safe `CeilDiv` helper and use it in unsigned callsites",
      "body": "### Problem\r\nThe codebase has many open-coded ceiling-division expressions (for example `(x+y-1)/y`) scattered across files.\r\nThese are less readable, duplicate logic, and can be overflow-prone in edge cases.\r\n\r\n### Fix\r\nIntroduce a small overflow-safe integer helper, `CeilDiv()`, and use it in existing **unsigned** callsites where the conversion is straightforward and noise-free.\r\n\r\n### What this PR does\r\n* Adds `CeilDiv()` to `src/util/overflow.h` for unsigned integral inputs.\r\n* Keeps the precondition check `assert(divisor > 0)`.\r\n* Replaces selected unsigned ceiling-division expressions with `CeilDiv(...)`.\r\n* Adds focused unit tests in `src/test/util_tests.cpp` for the migrated patterns.\r\n\r\n---\r\n\r\nThis is a pure refactor with no intended behavioral change.\r\nSigned arithmetic callsites are intentionally left unchanged in this PR.\r\nThis PR changed a few more things originally but based on feedback reverted to the simplest cases only.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-28T21:47:06Z",
      "updated_at": "2026-02-20T21:16:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34436",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1028,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3221659481,
      "number": 34439,
      "title": "qa: Drop recursive deletes from test code, add lint checks.",
      "body": "Both `fs::remove_all` and `shutil::rmtree()` are a bit dangerous, and most of their uses are not necessary, this PR removes most instances of both.\r\n\r\n`remove_all()` is still used in in `src/test/util/setup_common.cpp` as part of `BasicTestingSetup::BasicTestingSetup`'s constructor and destructor, and it is used in the kernel test code's [`TestDirectory`](https://github.com/bitcoin/bitcoin/blob/4ae00e9a7183cb15877c3014bf46f2e36470c304/src/test/kernel/test_kernel.cpp#L100-L112):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/734899a4c404f24379d0597744465c147d9ad024/src/test/kernel/test_kernel.cpp#L100-L112\r\n\r\nIn both cases, `remove_all` is likely necessary, but the kernel's test code is RAII, ideally `BasicTestingSetup` could be made similar in a follow-up or in this PR if reviewers think it is important.\r\n\r\nSimilarly in the python code, most usage was unnecessary, but there are a few places where `rmtree()` was necessary, I have added sanity checks to make sure these are inside of the `tmpdir` before doing recursive delete there.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-01-29T03:59:52Z",
      "updated_at": "2026-02-20T21:03:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34439",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1101,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3226824452,
      "number": 34457,
      "title": "wallet: add private broadcast support for wallet transactions",
      "body": "## Summary\r\n\r\nExtends the private broadcast feature (#29415) to wallet transactions. When `-privatebroadcast=1` is enabled, wallet RPCs (`sendtoaddress`, `send`, `sendall`, `sendmany`) now broadcast transactions through short-lived Tor/I2P connections instead of announcing to all connected peers.\r\n\r\n## Key Changes\r\n\r\n**Centralized availability check** (commit 1)\r\n- Moves the Tor/I2P reachability check from `sendrawtransaction` RPC to `BroadcastTransaction()`\r\n- All broadcast callers now get consistent error handling\r\n\r\n**Wallet integration** (commit 2)\r\n- `CommitTransaction()`: Uses private broadcast when enabled, fails loudly if Tor/I2P unavailable\r\n- `ResubmitWalletTransactions()`: Rebroadcasts using the original broadcast method\r\n- Persists a `private_broadcast` flag in the wallet transaction's `mapValue`\r\n\r\n**Functional tests** (commits 3-4)\r\n- Tests wallet send via SOCKS5 proxy\r\n- Tests flag persistence across restarts\r\n- Tests error handling when Tor/I2P unavailable\r\n\r\n## Behavior Matrix\r\n\r\n| Scenario | TX Flag | Node Setting | Expected Behavior | Tested |\r\n|----------|---------------|--------------|-------------------|--------|\r\n| New tx | Private | - | Via SOCKS5, flag set | Test 1 ✓ |\r\n| Resubmit | Private | Public | Skip | Test 2 ✓ |\r\n| Resubmit | Public | Private | Skip | Test 3 ✓ |\r\n| Resubmit | Private | Private | Rebroadcast | Test 3 ✓ |\r\n| New tx | Private | - (no Tor) | RPC error | Test 4 ✓ |\r\n| Resubmit | Private | Private (no Tor) | Log error | Test 4 ✓ |\r\n\r\n**Why skip on mode mismatch?** Rebroadcasting via a different method than originally used may allow correlation of transaction to origin, or may indicate origin has `-privatebroadcast` enabled.\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-01-30T08:06:34Z",
      "updated_at": "2026-02-20T20:09:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34457",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1758,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2496293029,
      "number": 32409,
      "title": "test: Introduce `SUPPRESS_ABORT_MESSAGE` environment variable",
      "body": "This PR adds a way to suppress the abort message box when running `test_bitcoin.exe` and `fuzz.exe` built with the debug runtime library on Windows.\r\n\r\nOtherwise, a failing `assert()` triggers the `abort` routine, which displays a message box and causes a timeout in CI.\r\n\r\nHere are CI jobs for the \"Debug\" configuration:\r\n - on the master branch: https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/14759346479/job/41435857332\r\n - with this PR: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/15038743417/job/42265371841\r\n\r\nAddresses this [comment](https://github.com/bitcoin/bitcoin/issues/32341#issuecomment-2842716175).\r\n\r\nAccording to Microsoft's [docs](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/abort), this behavior is MSCV-specific.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-05-02T19:45:20Z",
      "updated_at": "2026-02-20T20:00:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32409",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 848,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2911002547,
      "number": 33616,
      "title": "policy: don't CheckEphemeralSpends on reorg",
      "body": "Similar reasoning to https://github.com/bitcoin/bitcoin/pull/33504\r\n\r\nDuring a deeper reorg it's possible that a long sequence of dust-having transactions that are connected in a linear fashion. On reorg, this could cause each subsequent \"generation\" to be rejected. These rejected transactions may contain a large amount of competitive fees via normal means.\r\n\r\nPreCheck based `PreCheckEphemeralSpends` is left in place because we wouldn't have relayed them prior to the reorg.",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2025-10-13T17:37:23Z",
      "updated_at": "2026-02-20T19:59:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33616",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 522,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3295924536,
      "number": 34608,
      "title": "test: Fix broken --valgrind handling after bitcoin wrapper",
      "body": "Currently, tool_bitcoin.py is failing under `--valgrind`:\r\n\r\n```sh\r\n$ ./bld-cmake/test/functional/tool_bitcoin.py --valgrind\r\nTestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"./test/functional/test_framework/test_framework.py\", line 138, in main\r\n    self.setup()\r\n    ~~~~~~~~~~^^\r\n  File \"./test/functional/test_framework/test_framework.py\", line 269, in setup\r\n    self.setup_network()\r\n    ~~~~~~~~~~~~~~~~~~^^\r\n  File \"./test/functional/tool_bitcoin.py\", line 38, in setup_network\r\n    assert all(node.args[:len(node_argv)] == node_argv for node in self.nodes)\r\n           ~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError\r\n```\r\n\r\nFix this issue by running `bitcoin` under valgrind.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-17T20:38:21Z",
      "updated_at": "2026-02-20T19:54:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34608",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 820,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3294159200,
      "number": 34605,
      "title": "build: define CMAKE_COMPILE_WARNING_AS_ERROR as a cache option",
      "body": "`CMAKE_COMPILE_WARNING_AS_ERROR` is not a cache variable by default in CMake, so it has no value in the configure summary when not set, and even when set cannot be toggled in `ccmake`. Define it as an `option()` to make it a cache BOOL with a default of OFF.\r\n\r\nFrom the original MR to cmake, this was deliberately not set as a cache variable: https://gitlab.kitware.com/cmake/cmake/-/merge_requests/7187 (see Brad King's reply to the collapsed comments from Marc Chevrier).\r\n\r\nMost `CMAKE_*` variables which are expected to be toggled by users are (as far as I can research) cache variables by default. Those that are considered likely to be set by the project (e.g. `CMAKE_CXX_STANDARD` or `CMAKE_POSITION_INDEPENDENT_CODE`) are not, along with read-only variables, script/internal variables, platform sppecific variables, template variables. `CMAKE_COMPILE_WARNING_AS_ERROR` may be a slight outlier here.\r\n\r\nI count ~ 600 documented CMAKE_* variables, of which ~ 60 are default cache variables.\r\n\r\nI could only see a few of these like:\r\n\r\n  - CMAKE_COMPILE_WARNING_AS_ERROR\r\n  - CMAKE_CXX_STANDARD,\r\n  - CMAKE_POSITION_INDEPENDENT_CODE\r\n  - CMAKE_INTERPROCEDURAL_OPTIMIZATION\r\n  \r\n ...that we (or any project) _might_ want to expose as user-togglable, and would have to add as an `option()` in CMakeLists.txt.",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2026-02-17T12:28:37Z",
      "updated_at": "2026-02-20T19:15:41Z",
      "merged_at": "2026-02-20T19:15:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34605",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3239243501,
      "number": 34489,
      "title": "index: batch db writes during initial sync",
      "body": "Decouples part of #26966.\r\n\r\nRight now, index initial sync writes to disk for every block, which is not the best for HDD. This change batches those, so disk writes are less frequent during initial sync. This also cuts down `cs_main` contention by reducing the number of `NextBlockSync` calls (instead of calling it for every block, we will call it once per block window), making the node more responsive (IBD and validation) while indexes sync up. On top of that, it lays the groundwork for the bigger speedups, since part of the parallelization pre-work is already in place.\r\n\r\nJust as a small summary:\r\n\r\n* Batch DB writes instead of flushing per block, which improves sync time on HDD due to the reduced number of disk write operations.\r\n* Reduce `cs_main` lock contention, which improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n* Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n* Reduces the number of generated LDB files. See l0rinc's [comment](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773).\r\n\r\nNote:\r\nPending initial sync benchmark and further testing. I have only focused on decoupling and simplifying what was in #26966 first. Commits should be simple to digest.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-02-03T04:06:34Z",
      "updated_at": "2026-02-20T18:15:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34489",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1360,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3277360664,
      "number": 34576,
      "title": "threadpool: add SubmitMany",
      "body": "The current `ThreadPool::Submit` is not very efficient when we have a use case where we need to submit multiple tasks immediately. The `Submit` method must take the lock for each task, and notifies only a single worker thread. This will cause lock contention with the awakened worker thread trying to take the lock and the caller trying to submit the next task.\r\n\r\nIntroduce `SubmitMany`, which takes the lock once and submits a vector of tasks, then notifies all worker threads after the lock is released.\r\n\r\nThis is needed for #31132 to be able to use `ThreadPool`.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-02-12T17:39:40Z",
      "updated_at": "2026-02-20T18:06:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34576",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 594,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3223998841,
      "number": 34448,
      "title": "ci, iwyu: Fix warnings in `src/util` and treat them as errors",
      "body": "This PR [continues](https://github.com/bitcoin/bitcoin/pull/33725#issuecomment-3466897433) the ongoing effort to enforce IWYU warnings.\r\n\r\nSee [Developer Notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#using-iwyu).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-29T15:38:39Z",
      "updated_at": "2026-02-20T17:54:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34448",
      "labels": [
        "Refactoring",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 305,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2272618048,
      "number": 31644,
      "title": "leveldb: show non-default options during init",
      "body": "To help with to debugging and traceability (in alignment with displaying other non-default args such as `Command-line arg: dbcache=\"10000\"`) we can extend the LevelDB opening log with an additional debug message for the used non-default settings.\r\n\r\nTo avoid showing booleans as e.g. `create_if_missing=1`, I've added a local `ToString` lambda for `bool`.\r\nI wanted to use `util::Join` at the end, but couldn't find any way that I liked.\r\n\r\nExample output after the change:\r\n```bash\r\n2025-10-15T02:39:45Z Opened LevelDB successfully\r\n2025-10-15T02:39:45Z [leveldb] startup options: options.compression=NoCompression, options.create_if_missing=true, options.max_file_size=33554432, options.paranoid_checks=true, options.write_buffer_size=524288, readoptions.fill_cache=false, readoptions.verify_checksums=true, writeoptions.sync=true\r\n```",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-01-12T17:30:54Z",
      "updated_at": "2026-02-20T17:00:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31644",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 883,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3250214855,
      "number": 34514,
      "title": "refactor: remove unnecessary std::move for trivially copyable types",
      "body": "Inspired by https://github.com/bitcoin/bitcoin/pull/34320#discussion_r2751764873.\r\n\r\n### Problem\r\nA few function signatures in the codebase use rvalue references for trivially copyable types, forcing callers to `std::move()` values where there is no benefit - for trivially copyable types, moving is semantically identical to copying (see https://godbolt.org/z/hdrn17v9b).\r\n\r\nAdditionally, some call sites use `std::move()` on plain enums and primitive types where it is basically just noise.\r\n\r\nNote: `CheckTriviallyCopyableMove` remains `false` - `std::move()` on trivially copyable types is still permitted where it serves as intent documentation (e.g. signaling that a value should not be reused after a call).\r\n\r\n### Fix\r\n* Document why `CheckTriviallyCopyableMove` is kept disabled (to preserve `bugprone-use-after-move` coverage on trivially copyable types where `std::move` signals intent), cherry-picked from #34523\r\n* Change `EmplaceCoinInternalDANGER` to take `const COutPoint&` instead of `COutPoint&&`\r\n* Change logging functions to take `const SourceLocation&` instead of `SourceLocation&&`\r\n* Remove `std::move()` on enum types in RPC constructors and on `bool`/`int` members in `txgraph.cpp`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-02-05T13:27:48Z",
      "updated_at": "2026-02-20T16:59:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34514",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1275,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173584131,
      "number": 34284,
      "title": "ipc, test: Add tests for unclean disconnect and thread busy behavior",
      "body": "Upcoming libmultiprocess changes are expected to alter this behavior (https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3749243782), making test coverage useful for documenting current behavior and validating the intended changes.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2026-01-14T13:46:24Z",
      "updated_at": "2026-02-20T16:48:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34284",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 310,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3251388923,
      "number": 34521,
      "title": "validation: fix UB in `LoadChainTip`",
      "body": "Addresses https://github.com/bitcoin/bitcoin/issues/34503. See this issue for more details as well.\r\n\r\nFixes a bug where, under certain conditions, `setBlockIndexCandidates` had blocks in it that were worse than the tip. Removing the tip from `setBlockIndexCandidates` before modifying its `nSequenceId` avoids the undefined behavior that results from modification of the sequence id field while the tip is still in the set.\r\n\r\n",
      "state": "open",
      "user": "marcofleon",
      "created_at": "2026-02-05T18:23:00Z",
      "updated_at": "2026-02-20T16:42:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34521",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 465,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3265664984,
      "number": 34545,
      "title": "doc: Update Guix installation instructions for Debian/Ubuntu",
      "body": " The `guix` package was removed from Debian repositories due to security \r\n vulnerabilities (CVE-2025-46415, CVE-2025-46416) affecting guix-daemon. \r\n See https://lwn.net/Articles/1035491/\r\n     \r\n Ubuntu and Debian derivatives will likely follow.\r\n     \r\n Updates the Debian/Ubuntu section to warn users and redirect to alternative \r\n installation methods already documented in the file.\r\n\r\n\r\n Fixes #33982\r\n",
      "state": "open",
      "user": "ToRyVand",
      "created_at": "2026-02-10T06:05:27Z",
      "updated_at": "2026-02-20T16:19:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34545",
      "labels": [
        "Docs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 470,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3257065528,
      "number": 34533,
      "title": "wallet: resubmit transactions with private broadcast if enabled",
      "body": "The wallet keeps track of transactions related to it and periodically rebroadcasts them every 12-36 hours if they are not mined.\r\n\r\nIf `-privatebroadcast=1` and a transaction is submitted locally with the `sendrawtransaction` RPC and it is related to the wallet, then the rebroadcasts would use the send-to-all method. Change that to use the private broadcast method.\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-02-07T05:35:17Z",
      "updated_at": "2026-02-20T16:14:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34533",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 433,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3259815827,
      "number": 34534,
      "title": "rpc: Manual prune lock management (Take 2)",
      "body": "This is a refreshed version of #19463, which was closed after inactivity but there was some mentions of users/external applications at the last CoreDev that would be interested in using this. Unfortunately, I can not recall who was mentioned as a potential user but I would appreciate if someone could ping them to take a look if this is still relevant to them.\r\n\r\nThis PR leverages the existing prune locks system we already have. The interface of the RPCs of the old PR has been slightly updated, it now matches the pattern used by `setban`/`listbanned` exactly. The locks are prefixed to distinguish them from the systems locks and prevent naming colissions. They are not persisted across restarts.\r\n\r\nUsage of temporary prune locking may also be helpful in other functional test scenarios but I didn't spend time to check where might apply.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-02-08T14:01:05Z",
      "updated_at": "2026-02-20T16:01:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34534",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 887,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2349932670,
      "number": 31929,
      "title": "http: Make server shutdown more robust",
      "body": "- Log HTTP request pointers to be able to discover which one is stuck.\r\n- Instead of hanging indefinitely, use timeouts and abort when HTTP connections take unreasonably long to close.\r\n- Ensure we always free libevent HTTP.\r\n\r\nShould help debug #31894.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-02-21T15:32:53Z",
      "updated_at": "2026-02-20T15:45:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31929",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 292,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018324242,
      "number": 33889,
      "title": "guix: update per-host disk-space estimates in build gate",
      "body": "Today, the build gates are obsolete. I found this out after seeing someone flag this on a commit setting `-static-libgcc`. Note that the Linux builds came in at the expected amount of disk space utilization, so I did not touch the values for them.\r\n\r\nThis PR aims to readjust the build gate disk space per-host estimates for darwin and mingw based on some testing I did locally in my build VM.\r\n\r\nDetails:\r\n(Copied from https://github.com/kevkevinpal/bitcoin/issues/200):\r\n\r\nI ran `HOSTS=\"x86_64-w64-mingw32\" ./contrib/guix/guix-build`\r\n\r\nAfter (+10 GiB):\r\n```\r\nFilesystem     1G-blocks  Used Available Use% Mounted on\r\n/dev/sda5           512G   98G      393G  20% /gnu/store\r\n```\r\n\r\nThese numbers makes this change seem reasonable (1.5x safety factor):\r\n```\r\n-        *mingw*)  required_KiB=7600000 ;;\r\n+        *mingw*)  required_KiB=15728640 ;;\r\n```\r\n\r\n---\r\n\r\nThen I ran `HOSTS=\"aarch64-linux-gnu\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+6 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  104G  387G  22% /gnu/store\r\n```\r\n\r\n---\r\n\r\nThen I setup the SDK for macOS. This established a new *before* snapshot of disk use:\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  116G  375G  24% /gnu/store\r\n```\r\n\r\nThen I ran `HOSTS=\"x86_64-apple-darwin\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+5 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  121G  370G  25% /gnu/store\r\n```\r\n\r\nIMO, this is grounds for updating this (5 GiB * 1.5x safety factor):\r\n```\r\n-        *darwin*) required_KiB=440000 ;;\r\n+        *darwin*) required_KiB=8388608 ;;\r\n```\r\n",
      "state": "open",
      "user": "djkazic",
      "created_at": "2025-11-17T17:21:07Z",
      "updated_at": "2026-02-20T15:41:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33889",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1692,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3304010125,
      "number": 34627,
      "title": "guix: use a temporary file over sponge, drop moreutils",
      "body": "Remove sponge (moreutils).",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-19T17:05:52Z",
      "updated_at": "2026-02-20T15:26:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34627",
      "labels": [
        "Build system",
        "DrahtBot Guix build requested"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 81,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3277895355,
      "number": 34577,
      "title": "http: fix submission during shutdown race",
      "body": "Fixes #34573.\r\n\r\nAs mentioned in https://github.com/bitcoin/bitcoin/issues/34573#issuecomment-3891596958, the ThreadPool PR (#33689) revealed an existing issue.\r\n\r\nBefore that PR, we were returning an incorrect error \"Request rejected because http work queue depth exceeded\" during shutdown for unhandled requests (we were not differentiating between \"queue depth exceeded\" and \"server interrupted\" errors). Now, with the ThreadPool inclusion, we return the proper error but we don't handle it properly.\r\n\r\nThis PR improves exactly that. Handling the missing error and properly returning it to the user.\r\n\r\nThe race can be reproduced as follows:\r\n\r\n1) The server receives an http request.\r\n2) Processing of the request is delayed, and shutdown is triggered in the meantime.\r\n3) During shutdown, the libevent callback is unregistered and the threadpool interrupted.\r\n4) The delayed request (step 2) resumes and tries to submit a task to the now-interrupted server.\r\n\r\nReproduction test can be found https://github.com/bitcoin/bitcoin/pull/34577#issuecomment-3902672521.\r\n\r\nAlso, to prevent this kind of issue from happening again, this PR changes task submission\r\nto return the error as part of the function's return value using `util::Expected` instead of\r\nthrowing the exception. Unlike exceptions, which require extra try-catch blocks and can be\r\nignored, returning `Expected` forces callers to explicitly handle failures, and attributes\r\nlike `[[nodiscard]]` allow us catch unhandled ones at compile time.\r\n\r\n",
      "state": "closed",
      "user": "furszy",
      "created_at": "2026-02-12T19:52:35Z",
      "updated_at": "2026-02-20T15:25:07Z",
      "merged_at": "2026-02-19T20:41:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34577",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1554,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3264847922,
      "number": 34544,
      "title": "wallet: Disallow wallet names that are paths including `..` and `.` elements",
      "body": "Wallet names including `..` and `.` are unintuitive and can lead to various issues, see #34497\r\n\r\nThis disallows creating or loading wallets that have any path elements that are `..` or `.`, including any present in an absolute path. This does not disallow relative paths altogether but rather limits them to only being subdirectories of the wallets directory.",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-09T23:28:03Z",
      "updated_at": "2026-02-20T15:07:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34544",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 437,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3266545660,
      "number": 34547,
      "title": "lint: modernise lint tooling",
      "body": "Modernise our lint tooling by:\r\n\r\n\\- Replacing pyenv + pip with [uv](https://docs.astral.sh/uv/) for better Python environment and dependency management\r\n\\- Replacing mypy with https://github.com/astral-sh/ty\r\n\\- Replacing the 01_install.sh runtime install script with COPY --from multi-stage Docker image imports for uv, ruff, shellcheck, mlc, and ty\r\n\\- Moving ruff lint rules from hardcoded Rust array (in lint_py.rs) into a top-level ruff.toml, and add ty.toml for the type checker\r\n\\- Extracting all remaining pip dependencies into dedicated ci/lint/requirements.txt\r\n\r\nExtra rationale:\r\n\r\n`COPY --from` pulls pre-built binaries from upstream images instead of compiling/downloading at runtime. Containerfile layer optimisations reduce rebuild frequency further.\r\n\r\n`ty` is significantly faster/more modern/maintained than `mypy`, and configured declaratively.\r\n\r\nAdding root-level `[ty|ruff].toml` config files means contributors can easily run `ty check` or `ruff check` locally without running the full linter, along with being accessible to other tooling (similarly for requriements.txt).\r\n\r\nPinning tool versions in the dockerfile makes it more excplicit and easier to find.\r\n\r\nThe tradeoff we make here is that there is no longer a bare install script to install tooling on a local machine. However I think this is OK, as it currently only works for `apt`-based OSes anyway, and I don't think running the linter outside of the container is such a valuable use-case as it is with some of the other CI jobs.\r\n\r\nFurther work can drop individual rules from `ty.toml` fixing up the infringing code as necessary.\r\n\r\nI can split this up if wanted, but IMO it makes sense to do it altogether.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-10T10:25:27Z",
      "updated_at": "2026-02-20T14:41:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34547",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1724,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3303456310,
      "number": 34625,
      "title": "cluster_linearize: add tests and benchmarks for chain and tree-shaped clusters",
      "body": "                                                                                 \r\n## Summary                                                                       \r\n                                                                                 \r\nThis PR adds correctness tests and benchmarks specifically targeting chain and tree-shaped\r\ncluster topologies, which are both common in real-world mempools and structurally special\r\nwith respect to `PostLinearize`.                                                 \r\n                                                                                 \r\n**Commits:**                                                                     \r\n- `a11760f9` cluster_linearize: add chain cluster benchmarks for PostLinearize and Linearize\r\n- `4b7e2b28` cluster_linearize: test PostLinearize optimality on random tree-shaped clusters\r\n- `0725aa05` cluster_linearize: test PostLinearize optimality on random chain clusters\r\n                                                                                 \r\n---                                                                              \r\n                                                                                 \r\n## Motivation                                                                    \r\n                                                                                 \r\n`PostLinearize` gives an optimality guarantee for clusters with a **tree shape**: if every\r\ntransaction has at most one direct parent, or every transaction has at most one direct child,\r\nthe result is provably optimal. A chain (tx_0 → tx_1 → ... → tx_{N-1}) satisfies *both*\r\nconditions simultaneously.                                                       \r\n                                                                                 \r\nThese structural guarantees lacked dedicated test coverage and chain-specific benchmarks,\r\nmaking it hard to observe the effect of topology-aware optimizations on linearization\r\nperformance.                                                                     \r\n                                                                                 \r\n---                                                                              \r\n                                                                                 \r\n## Changes                                                                       \r\n                                                                                 \r\n### Tests (`src/test/cluster_linearize_tests.cpp`)                               \r\n                                                                                 \r\n#### `postlinearize_tree_optimal_tests`                                          \r\n                                                                                 \r\nAdds `MakeRandomTreeGraph()`, which generates random tree-shaped dependency graphs in two\r\norientations:                                                                    \r\n                                                                                 \r\n- **Upright tree**: transaction i picks a random parent from [0, i), so every node has at\r\n  most one direct parent.                                                        \r\n- **Reverse tree**: transaction i picks a random child from [0, i), so every node has at\r\n  most one direct child.                                                         \r\n                                                                                 \r\nFor random trees of sizes 5..30, the test verifies:                              \r\n1. `PostLinearize` produces a linearization of equal quality to the exhaustive `Linearize()`\r\n   result (as guaranteed by `PostLinearize`'s interface for tree-shaped inputs). \r\n2. **Idempotency**: a second `PostLinearize` pass produces no change.            \r\n                                                                                 \r\n#### `postlinearize_chain_optimal_tests`                                         \r\n                                                                                 \r\nAdds `MakeRandomChainGraph()`, which generates random linear chain dependency graphs\r\n(tx_0 → tx_1 → ... → tx_{N-1}) with randomized feerates.                         \r\n                                                                                 \r\nFor chains of sizes 5..50, the test verifies:                                    \r\n1. `PostLinearize` produces a linearization of equal quality to the exhaustive `Linearize()`\r\n   result. A chain satisfies both tree-shape conditions simultaneously, so optimality is\r\n   guaranteed.                                                                   \r\n2. **Idempotency**: a second `PostLinearize` pass produces no change.            \r\n                                                                                 \r\n### Benchmarks (`src/bench/cluster_linearize.cpp`)                               \r\n                                                                                 \r\nAdds `MakeChainGraph()` to build deterministic random chain dependency graphs    \r\n(tx_0 → tx_1 → ... → tx_{N-1}) with randomized feerates seeded deterministically from the\r\ncluster size, and two sets of chain-specific benchmarks:                         \r\n                                                                                 \r\n- **`PostLinearizeChain{16,32,48,64,75,99}Tx`**: measure `PostLinearize` throughput on\r\n  chain-shaped clusters across a range of sizes.                                 \r\n- **`LinearizeOptimallyChainTotal_{9,16,32,48,63}tx`**: measure the total time for\r\n  `Linearize` to reach an optimal result on chain-shaped clusters.               \r\n                                                                                 \r\nChain clusters are a common real-world mempool pattern (each transaction spending an output\r\nof the previous one). Dedicated benchmarks make it easy to observe the effect of \r\ntopology-specific linearization optimizations as they are developed.             \r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2026-02-19T14:55:09Z",
      "updated_at": "2026-02-20T14:28:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34625",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6134,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3272817290,
      "number": 34562,
      "title": "ThreadPool follow-ups, proactive shutdown and HasReason dependency cleanup",
      "body": "A few follow-ups to #33689, includes:\r\n\r\n1) `ThreadPool` active-wait during shutdown:\r\nInstead of just waiting for workers to finish processing tasks, `Stop()` now helps them actively.\r\nThis speeds up the JSON-RPC and REST server shutdown, resulting in a faster node shutdown when many requests remain unhandled. This wasn't included in the original PR due to the behavior change this introduces.\r\n\r\n2) Decouple `HasReason` from the unit test framework machinery\r\nThis avoids providing the entire unit test framework dependency to low-level tests that only require access to the `HasReason` utility class. Examples are: `reverlock_tests.cpp`, `sync_tests.cpp`, `util_check_tests.cpp`, `util_string_tests.cpp`, `script_parse_tests.cpp` and `threadpool_tests.cpp`. These tests no longer gain access to unnecessary components like the chainstate, node context, caches, etc. It includes @l0rinc's `threadpool_tests.cpp` `HasReason` changes.\r\n\r\n3) Include response body in non-JSON HTTP error messages\r\nStraight from @pinheadmz [comment](https://github.com/bitcoin/bitcoin/pull/33689#discussion_r2783817192), it makes debugging CI issues easier.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-02-11T18:00:13Z",
      "updated_at": "2026-02-20T14:00:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34562",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1215,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3274425083,
      "number": 34568,
      "title": "mining: Break compatibility with existing IPC mining clients",
      "body": "This PR increments the field number of the `Init.makeMining` method and makes the old `makeMining` method return an error, so IPC mining clients not using the latest schema file will get an error and not be able to access the Mining interface.\r\n\r\nNormally, there shouldn't be a need to break compatibility this way, but the mining interface has evolved a lot since it was first introduced, with old clients using the original methods less stable and performant than newer clients. So now is a good time to introduce a cutoff, drop deprecated methods, and stop supporting old clients which can't function as well.\r\n\r\nBumping the field number is also an opportunity to make other improvements that would be awkward to implement compatibly:\r\n- Making Cap'n Proto default parameter and field values match default values of corresponding C++ methods and structs. \r\n- Adding missing Context parameters to Mining.createNewBlock and checkBlock methods so these methods will be executed on separate execution threads and not block the Cap'n Proto event loop thread.\r\n\r\nMore details about these changes are in the commit messages.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2026-02-12T04:10:23Z",
      "updated_at": "2026-02-20T13:42:53Z",
      "merged_at": "2026-02-20T10:06:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34568",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1181,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2540992851,
      "number": 32606,
      "title": "p2p: Drop unsolicited CMPCTBLOCK from non-HB peer",
      "body": "Processing unsolicited `CMPCTBLOCK`'s from a peer that has not been marked high bandwidth is not well-specified behavior in BIP-0152, in fact the BIP seems to imply that it is not permitted:\r\n\r\n> \"[...] method is not useful for compact blocks because `cmpctblock` blocks can be sent unsolicitedly in high-bandwidth mode\"\r\n\r\nSee https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki#separate-version-for-segregated-witness\r\n\r\nThis partially mitigates a mempool leak described in #28272, making it only possible for peers selected as high bandwidth to discover a node's mempool.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-23T21:58:15Z",
      "updated_at": "2026-02-20T13:42:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32606",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3273035746,
      "number": 34565,
      "title": "refactor: extract BlockDownloadManager from PeerManagerImpl",
      "body": "### Motivation\r\n\r\n`net_processing.cpp` is the largest file in the codebase (~6200 lines) and `PeerManagerImpl` mixes several largely independent subsystems into a single class: transaction relay, address gossip, headers sync, compactblocks, and block download. This makes the file difficult to review, test in isolation, and reason about lock ordering.\r\n\r\n #30110 successfully extracted transaction download logic into `TxDownloadManager`. This PR applies the same approach to block download, continuing the incremental decomposition of `PeerManagerImpl`.\r\n \r\n### What this PR does\r\n\r\nExtract all block download state and scheduling logic into a new `BlockDownloadManager` module:\r\n\r\n**Global state moved** (from `PeerManagerImpl`): `mapBlocksInFlight`, `mapBlockSource`, `nSyncStarted`, `m_block_stalling_timeout`, `m_last_tip_update`, `m_num_preferred_download_peers`, `m_peers_downloading_from`.\r\n\r\n**Per-peer state moved** (from `CNodeState`): `pindexBestKnownBlock`, `hashLastUnknownBlock`, `pindexLastCommonBlock`, `pindexBestHeaderSent`, `fSyncStarted`, `vBlocksInFlight`, `m_downloading_since`, `m_stalling_since`, `fPreferredDownload`.\r\n\r\n**Methods moved** (from `PeerManagerImpl`): `FindNextBlocksToDownload`, `TryDownloadingHistoricalBlocks`, `ProcessBlockAvailability`, `UpdateBlockAvailability`, `BlockRequested`, `RemoveBlockRequest`, `IsBlockRequested`, `IsBlockRequestedFromOutbound`, `TipMayBeStale`.\r\n\r\n### The result:\r\n* `net_processing.cpp` shrinks from 6193 to 5751 lines (−442 net)\r\n* `CNodeState` loses 10 fields, retaining only compact block relay and chain sync timeout state\r\n* Block download logic becomes unit-testable in isolation (8 test cases added)\r\n\r\n### Design\r\n\r\nFollows the `TxDownloadManager` pimpl pattern:\r\n* `blockdownloadman.h` — public interface\r\n* `blockdownloadman_impl.h` — implementation class with per-peer state\r\n* `blockdownloadman_impl.cpp` — implementation\r\n\r\n Unlike `TxDownloadManager`, no new mutex is introduced. Block download is inherently tied to chain state through `CBlockIndex*` pointers, so `cs_main` remains the synchronizing lock. The extraction is for code organization and testability, not lock granularity.\r\n \r\n ### Commits\r\n\r\n1. **Add BlockDownloadManager class with pimpl skeleton**: all new module files, no call sites changed\r\n2. **Add unit tests**: exercises the module in isolation\r\n3. **Migrate call sites**: ~150 call sites in `net_processing.cpp` rewired through `m_blockdownloadman`, pure mechanical replacement",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-11T18:54:52Z",
      "updated_at": "2026-02-20T13:40:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34565",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2548,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3091431534,
      "number": 34049,
      "title": "rpc: Disallow captures in RPCMethodImpl",
      "body": "When defining `RPCHelpMan` objects, we usually return a lambda, and mostly we define those via `[&](...) { ... }` which explicitly captures any parameters or local variables by reference. If we were to actually use any of those captures (we don't), we would invoke undefined behaviour. So instead, convert all the `[&]` to `[]` to avoid capturing, and as part of `RPCHelpMan` check that the function we provide is convertible to a bare function pointer, so that any attempts to capture anything (even if it's by-copy, which is safe) results in an error.\r\n\r\nWhile we're at it, rename `RPCHelpMan` to `RPCMethod`, reflecting it's greater responsibility since #19386.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-11T03:25:25Z",
      "updated_at": "2026-02-20T13:37:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34049",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3298196135,
      "number": 34612,
      "title": "leveldb: remove unused files",
      "body": "Remove `db/c.cc`, `dumpfile.cc` & `histogram.cc`.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-18T10:55:33Z",
      "updated_at": "2026-02-20T13:10:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34612",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 78,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2237045890,
      "number": 31507,
      "title": "build: Use clang-cl to build on Windows natively",
      "body": "Building on Windows using Clang instead of the MS compiler may be beneficial, considering the issues with the latter, as outlined in https://github.com/bitcoin/bitcoin/issues/31456:\r\n\r\n>    * non-optimized codegen: [build: remove need to test for endianness #29852 (comment)](https://github.com/bitcoin/bitcoin/pull/29852#issuecomment-2049803970)\r\n> \r\n>    * compile failure: [MSVC 17.12.0 internal compiler error  #31303](https://github.com/bitcoin/bitcoin/issues/31303)\r\n> \r\n>    * legal, but brittle stdlib: [util: Drop boost posix_time in ParseISO8601DateTime #31391 (comment)](https://github.com/bitcoin/bitcoin/pull/31391#issuecomment-2510762011)\r\n> \r\n>    * unspecified issue: [refactor: Check translatable format strings at compile-time #31061 (comment)](https://github.com/bitcoin/bitcoin/pull/31061#issuecomment-2531244463)\r\n\r\nAdditionally, MSVC does not [support](https://learn.microsoft.com/en-us/cpp/assembler/inline/inline-assembler) inline assembly on the ARM and x64 processors.\r\n\r\nSo this PR:\r\n1. Closes https://github.com/bitcoin/bitcoin/issues/31456 (and addresses https://github.com/bitcoin/bitcoin/issues/14118).\r\n2. Could be an alternative to https://github.com/bitcoin/bitcoin/pull/24773.\r\n\r\n---\r\n\r\nAdditionally, clang-cl:\r\n1. Produces binaries with [better](https://github.com/bitcoin-core/secp256k1/pull/1681) performance. For example:\r\n\r\n| MSVC, block/s | clang-cl, block/s | benchmark |\r\n|--------------:|------------------:|:----------|\r\n|          7.40 |             11.52 | `ConnectBlockAllEcdsa`\r\n|          7.32 |             11.81 | `ConnectBlockAllSchnorr`\r\n|          7.38 |             11.45 | `ConnectBlockMixedEcdsaSchnorr`\r\n|         91.86 |            143.12 | `DeserializeAndCheckBlockTest`\r\n|        121.46 |            189.04 | `DeserializeBlockTest`\r\n\r\n2. Builds faster on the CI:\r\n    - [MSVC](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575846787) - 20m 35s\r\n    - [clang-cl](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575849680) - 12m 43s\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-12-16T10:58:38Z",
      "updated_at": "2026-02-20T13:07:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31507",
      "labels": [
        "Windows",
        "Build system",
        "Needs release note",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2081,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 877751403,
      "number": 24539,
      "title": "Add a \"tx output spender\" index",
      "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\nWe use a composite key with 2 parts (suggested by romanz): hash(spent outpoint) and tx position, with an empty value. Average composite key size is 15 bytes.\r\n\r\nThe spending tx can optionally be returned by `gettxspendingprevout` (even it `-txindex is not set`).",
      "state": "closed",
      "user": "sstone",
      "created_at": "2022-03-11T19:32:41Z",
      "updated_at": "2026-02-20T14:41:59Z",
      "merged_at": "2026-02-20T08:27:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24539",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 957,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3305951143,
      "number": 34628,
      "title": "p2p: Replace per-peer transaction rate-limiting with global rate limits",
      "body": "Per-peer `m_tx_inventory_to_send` queues have CPU and memory costs that scale with both queue size and peer count. Under high transaction volume, this has previously caused severe issues ([May 2023 disclosure][1]) and still can cause measurable delays ([Feb 2026 Runestone surge][2], with the msghand thread observed hitting 100% CPU and queue memory reaching ~95MB).\r\n\r\nThis PR replaces the per-peer rate limiting with a global queue using dual token buckets (limiting transaction by both count and serialized size). Transactions that arrive within the bucket capacity still relay nearly immediately, but excess transactions queue in a global backlog and drain as the token buckets refill.\r\n\r\nKey parameters:\r\n  - Count bucket: 14 tx/s, 420 capacity (30s buffer)\r\n  - Size bucket: 20 kB/s (~12 MB/600s), 50 MB capacity\r\n  - Outbound peers refill faster by a factor of 2.5\r\n  \r\nPer-peer queues are retained solely for privacy batching and are always fully emptied, removing the old `INVENTORY_BROADCAST_MAX` cap.\r\n\r\nThis reduces the memory and CPU burden during transaction spikes when the queuing logic is engaged from O(queue * peers) to O(queue), as the queued transactions no longer need to be retained per-peer or re-sorted per-peer.\r\n\r\nDesign discussion: https://gist.github.com/ajtowns/d61bea974a07190fa6c6c8eaef3638b9\r\n\r\n[1]: https://bitcoincore.org/en/2024/10/08/disclose-large-inv-to-send/\r\n[2]: https://bnoc.xyz/t/increased-b-msghand-thread-utilization-due-to-runestone-transactions-on-2026-02-17/81\r\n",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2026-02-20T03:09:59Z",
      "updated_at": "2026-02-20T12:43:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34628",
      "labels": [
        "P2P",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1584,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3120160595,
      "number": 34132,
      "title": "coins: drop error catcher, centralize fatal read handling",
      "body": "### Problem\r\nThe current coins database read-error handling adds unnecessary complexity to the critical path:\r\n* `CCoinsViewErrorCatcher` sits between the cache and database views, wrapping every read operation\r\n* `ExecuteBackedWrapper` adds another function call layer with lambda captures on each database read\r\n* Uses `std::vector<std::function<void()>>` for callbacks when there's only ever one callback registered\r\n* The error callback is set after database initialization rather than during construction (requiring a `cs_main` lock)\r\n\r\nThis adds unnecessary stack depth and bookkeeping overhead on every coins database read operation (`GetCoin`). Also note that `CCoinsViewDB::HaveCoin` isn't even on the hot path as far as I can tell.\r\n\r\n### Context\r\nThis is part of ongoing coins caching cleanup efforts, see https://github.com/bitcoin/bitcoin/issues/34280.\r\n\r\n### Fix\r\n**Behavior change:** Treat deserialization failures in `CDBWrapper::Read()` as fatal instead of catching and returning `false`. This makes corruption visible and avoids ambiguous missing-vs-unreadable handling at call sites: on decode failure, `CDBWrapper` logs the error, executes a provided callback, and then calls `std::abort()`.\r\n\r\nWith read-failure handling centralized in `CDBWrapper`, collapse the `CCoinsViewErrorCatcher` layer entirely by removing `ExecuteBackedWrapper` and `CCoinsViewErrorCatcher` which also enables making coins view lookups `noexcept`.\r\n\r\nA new test verifies the node aborts with a clear error message on a few database corruption paths.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T22:56:45Z",
      "updated_at": "2026-02-20T12:23:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34132",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1604,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3283486399,
      "number": 34588,
      "title": "refactor: decompose Peer struct into focused sub-components",
      "body": "The `Peer` struct in `net_processing.cpp` has ~40 fields protected by 6 different mutexes, mixing address relay, headers sync, block announcements, ping/pong, transaction relay, and misbehavior state into one flat struct.\r\nThis makes it hard to see which fields belong together and which mutex protects what.\r\n\r\nThis PR groups related fields into four sub-structs, each owning its mutex where applicable:\r\n\r\n| Sub-struct               | Fields | Mutex                    |\r\n|--------------------------|--------|--------------------------|\r\n| `PeerAddrRelay`          | 12     | `m_addr_send_times_mutex` |\r\n| `PeerHeadersSyncState`   | 7      | `m_headers_sync_mutex`    |\r\n| `PeerBlockAnnouncement`  | 3      | `m_block_inv_mutex`       |\r\n| `PeerLatency`            | 3      | *(all atomic)*            |\r\n\r\nAccess changes from flat (`peer.m_addrs_to_send`) to qualified (`peer.m_addr_relay.m_addrs_to_send`). No locking semantics, runtime behavior, or public interfaces change.\r\n\r\nThe first commit defines the four structs and adds them as members of `Peer`. The remaining four commits each move one group of fields and update all call sites.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-14T02:47:16Z",
      "updated_at": "2026-02-20T11:50:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34588",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1205,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3284200855,
      "number": 34589,
      "title": "ci: Temporarily use clang in valgrind tasks",
      "body": "valgrind currently does not work on GCC compiled executables, due to an upstream bug. https://bugs.kde.org/show_bug.cgi?id=472329\r\n\r\nSo temporarily switch to clang, so that a long term solution can be figured out in the meantime.\r\n\r\nAlso, expand the first valgrind suppression, so that it works with newer clang versions as well.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-14T09:39:26Z",
      "updated_at": "2026-02-20T11:42:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34589",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 373,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2527184806,
      "number": 32554,
      "title": "bench: replace embedded raw block with configurable block generator",
      "body": "### Problem\r\n\r\nThe [hardcoded benchmark block 413567](https://mempool.space/block/413567) has several issues:\r\n- embeds 1.1MB of binary data in the repository (we can't remove it from history, but we can, from `HEAD`)\r\n- mined in 2016, predates SegWit v0, Taproot, and modern script types\r\n- benchmarks cannot test different transaction patterns or script mixes\r\n- updating to a newer block (e.g., [#32457](https://github.com/bitcoin/bitcoin/pull/32457)) would still add binary bloat and would remain inflexible\r\n\r\n### Fix\r\n\r\nAdded configurable `bench/block_generator.{h,cpp}` that builds fully valid blocks at runtime providing blocks or raw serialized stream.\r\n\r\n### Reproducer\r\n\r\nYou can run all affected tests and benchmarks with a sanity check:\r\n```bash\r\nrm -rf build && \\\r\ncmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_BENCH=ON && \\\r\ncmake --build build -j$(nproc) && \\\r\nbuild/bin/test_bitcoin -t block_generator_deterministic_seeded_output,block_generator_serialization_roundtrip,block_generator_seed_perturbation,block_generator_multiple_seed_sanity && \\\r\nbuild/bin/bench_bitcoin -sanity-check -filter='DeserializeBlockTest|DeserializeAndCheckBlockTest|LoadExternalBlockFile|WriteBlockBench|ReadBlockBench|ReadRawBlockBench|BlockToJsonVerbosity1|BlockToJsonVerbosity2|BlockToJsonVerbosity3|BlockToJsonVerboseWrite|HexStrBench'\r\n```\r\n---\r\n\r\nThis supersedes #32457 by eliminating the need for any hardcoded block data while enabling flexible benchmark scenarios.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-18T21:39:14Z",
      "updated_at": "2026-02-20T11:36:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32554",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1540,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1566486194,
      "number": 28690,
      "title": "build: Introduce internal kernel library",
      "body": "This PR introduces a new `libbitcoin_kernel` internal library. It completes the internal library design as laid out in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). Since the `util` library contains a bunch of modules that are not required by the kernel library, a new `kernel_util` library is introduced as well that only consists of the modules required by the kernel library. The external `libbitcoinkernel` library now re-uses the compiled objects from the internal libraries. \r\n\r\nThere is a trade-off to this. Since we don't manually export symbols from the kernel library yet, this would make the library unusable if `REDUCE_EXPORTS=ON`. For now this means that the patch here introduces a separate source file list for the external library that gets populated by the source files of its static dependents.",
      "state": "open",
      "user": "sedited",
      "created_at": "2023-10-20T11:01:03Z",
      "updated_at": "2026-02-20T11:25:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28690",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 906,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1717651443,
      "number": 29409,
      "title": "multiprocess: Add capnp wrapper for Chain interface",
      "body": "Changes making it possible to call `interface::Chain` over a socket.\r\n\r\nNote: The changes in this PR allow a `bitcoin-node` process to be controlled over a socket. The socket can either be an UNIX socket created by specifying the `-ipcbind` option, or it can be a socketpair created by a controlling process and passed to `bitcoin-node` via the `-ipcfd=<n>` with a file descriptor number. This PR is a dependency of #10102 which allows the wallet code to run in a separate process and use the `Chain` interface.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-02-08T13:54:40Z",
      "updated_at": "2026-02-20T11:24:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29409",
      "labels": [
        "Needs rebase",
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 675,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2466171613,
      "number": 32297,
      "title": "bitcoin-cli: Add -ipcconnect option",
      "body": "This implements an idea from sipa in https://github.com/bitcoin/bitcoin/issues/28722#issuecomment-2807026958 to allow `bitcoin-cli` to connect to the node via IPC instead of TCP, if the ENABLE_IPC cmake option is enabled and the node has been started with `-ipcbind`.\r\n\r\nThis feature can be tested with:\r\n\r\n```\r\nbuild/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\r\nbuild/bin/bitcoin-cli -regtest -ipcconnect=unix -getinfo\r\n```\r\n\r\nThe -ipconnect parameter can also be omitted, since this change also makes `bitcoin-cli` prefer IPC over HTTP by default, and falling back to HTTP if an IPC connection can't be established.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-17T13:55:32Z",
      "updated_at": "2026-02-20T11:20:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32297",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 772,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3289598409,
      "number": 34597,
      "title": "util: Fix UB in SetStdinEcho when ENOTTY",
      "body": "The call to `tcgetattr` may fail with `ENOTTY`, leaving the struct possibly uninitialized (UB).\r\n\r\nFix this UB by returning early when `isatty` fails, or when `tcgetattr` fails. (Same for Windows)\r\n\r\n\r\nThis can be tested by a command that fails valgrind before the change and passes after:\r\n\r\n```\r\necho 'pipe' | valgrind --quiet ./bld-cmake/bin/bitcoin-cli -stdinrpcpass uptime",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-16T11:37:29Z",
      "updated_at": "2026-02-20T11:16:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34597",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 418,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275774710,
      "number": 34572,
      "title": "cmake: Fix NetBSD-specific workaround for Boost",
      "body": "The recently merged https://github.com/bitcoin/bitcoin/pull/34143 broke builds with depends on NetBSD due to a workaround introduced in 5a5ddbd78922236402df378c8588a7b0b3f83a13.\r\n\r\nThe upstream [bug](https://gnats.netbsd.org/59856) has been fixed, and the entire workaround can be removed once the fixed Boost package becomes generally available.\r\n\r\nHowever, it seems prudent to amend the workaround now to have it workable in the 31.0 release.\r\n\r\nHere are CI runs:\r\n- broken: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21933683654\r\n- fixed: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21933683654",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-02-12T11:27:01Z",
      "updated_at": "2026-02-20T11:13:50Z",
      "merged_at": "2026-02-20T11:13:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34572",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3174906348,
      "number": 34293,
      "title": "Bugfix: net_processing: Restore missing comma between peer and peeraddr in \"receive version message\" and \"New ___ peer connected\"",
      "body": "Versions prior to 29.x all included a comma here, and the general format of the message still includes commas between all other fields\r\n",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2026-01-14T20:34:00Z",
      "updated_at": "2026-02-20T11:07:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34293",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 266,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2203477250,
      "number": 31382,
      "title": "kernel: Flush in ChainstateManager destructor",
      "body": "This simplifies the shutdown code a bit and reduces the amount of extra logic required in kernel/bitcoinkernel.cpp to tear down the chainman.\r\n\r\nMoving the second flush out of the Shutdown function into the ChainstateManager destructor, should be safe since there should be no new events created after the first flush. Tweak the chainman tests to actually exercise this new tear down behaviour.\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587)",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-11-27T13:18:50Z",
      "updated_at": "2026-02-20T10:02:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31382",
      "labels": [
        "Validation",
        "Up for grabs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 549,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110851566,
      "number": 34093,
      "title": "netif: fix compilation warning in QueryDefaultGatewayImpl()",
      "body": "```\r\nsrc/common/netif.cpp:137:51: error: comparison of integers of different signs: 'int64_t' (aka 'long') and 'unsigned long' [-Werror,-Wsign-compare]\r\n  137 |         for (nlmsghdr* hdr = (nlmsghdr*)response; NLMSG_OK(hdr, recv_result); hdr = NLMSG_NEXT(hdr, recv_result)) {\r\n      |                                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netlink/netlink.h:220:31: note: expanded from macro 'NLMSG_OK'\r\n  220 | #define NLMSG_OK(_hdr, _len)            NL_ITEM_OK(_hdr, _len, NLMSG_HDRLEN, _NLMSG_LEN)\r\n      |                                         ^                ~~~~  ~~~~~~~~~~~~\r\n/usr/include/netlink/netlink.h:203:10: note: expanded from macro 'NL_ITEM_OK'\r\n  203 |         ((_len) >= _hlen && _LEN_M(_ptr) >= _hlen && _LEN_M(_ptr) <= (_len))\r\n      |           ~~~~  ^  ~~~~~\r\n1 error generated.\r\n```\r\n\r\nHappens on FreeBSD 15.0, with the default compiler (Clang 19).\r\n\r\nOn FreeBSD 14, `/usr/include/netlink/netlink.h` contains:\r\n```\r\n #define NLMSG_HDRLEN                    ((int)sizeof(struct nlmsghdr))\r\n```\r\n\r\nOn FreeBSD 15, `/usr/include/netlink/netlink.h` contains:\r\n```\r\n #define NLMSG_HDRLEN                    (sizeof(struct nlmsghdr))\r\n```\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-12-17T17:45:19Z",
      "updated_at": "2026-02-20T09:50:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34093",
      "labels": [
        "Needs backport (30.x)"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3321,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3227556540,
      "number": 34459,
      "title": "[30.x] Backports",
      "body": "Backports:\r\n* #34409\r\n* #34434\r\n* #34445\r\n* #34453\r\n* #34461\r\n* #34510\r\n* #34549\r\n* #34554",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-30T11:55:58Z",
      "updated_at": "2026-02-20T09:45:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34459",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 107,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3267434865,
      "number": 34549,
      "title": "net: reduce log level for PCP/NAT-PMP NOT_AUTHORIZED failures",
      "body": "Cherry-picks (and tweaks) a commit from #34117 which the ANAVHEOBA\r\ndid not follow up with when changes were requested.\r\n\r\nThe tweak here is to log once at `LogWarning`, so that users have a chance\r\nto spot misconfiguration.\r\n\r\n----\r\n\r\nUsers running on home networks with routers that don't support PCP (Port\r\nControl Protocol) or NAT-PMP port mapping receive frequent warning-level\r\nlog messages every few minutes:\r\n\r\n  \"pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\"\r\n\r\nThis is expected behavior for many consumer routers that have PCP\r\ndisabled by default, not an actionable error.\r\n\r\nAdd explicit constants for the NOT_AUTHORIZED result code (value 2)\r\nfor both NAT-PMP and PCP protocols. Log the first NOT_AUTHORIZED\r\nfailure at warning level for visibility, then downgrade subsequent\r\noccurrences to LogDebug to avoid log noise. Other failure types\r\ncontinue to warn unconditionally.\r\n\r\nFixes #34114\r\n",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2026-02-10T14:12:45Z",
      "updated_at": "2026-02-20T09:45:42Z",
      "merged_at": "2026-02-20T00:58:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34549",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 979,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3195778555,
      "number": 34370,
      "title": "[29.x] Fix #34222 backport bugs",
      "body": "",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2026-01-21T15:47:10Z",
      "updated_at": "2026-02-20T09:35:13Z",
      "merged_at": "2026-01-29T16:48:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34370",
      "labels": [
        "Wallet",
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 32,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3300999675,
      "number": 34620,
      "title": "[28.x] backports and 28.4rc2",
      "body": "Backports:\r\n\r\n* #34370\r\n\r\nAnd the rc2 release process things",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-19T01:17:55Z",
      "updated_at": "2026-02-20T09:33:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34620",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 89,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3306847677,
      "number": 34633,
      "title": "Revert \"ci: Treat SHA1 LLVM signing key as warning\"",
      "body": "`git revert 3c8f5e48f710313de78bcbfafd09fed71890d754`\r\n\r\nThis is now fixed [upstream](https://github.com/llvm/llvm-project/issues/153385).",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2026-02-20T08:47:53Z",
      "updated_at": "2026-02-20T09:32:54Z",
      "merged_at": "2026-02-20T09:32:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34633",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 190,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3299949354,
      "number": 34617,
      "title": "fees: wallet: remove block policy fee estimator internals from wallet",
      "body": "\r\nPart of #34075\r\n\r\n#### Motivation\r\nThe wallet currently knows the block policy estimator's internals from the response returned by `estimateSmartFee`.\r\n`estimateSmartFee` logging, which is supposed to be inside the method, is done in the wallet.\r\nAlso, the source of a wallet transaction fee is saved in the `CBlockPolicyEstimator::FeeReason` enum. This shows that there is tight coupling between the wallet and `CBlockPolicyEstimator`, which results in code that is a bit messy to extend and even read.\r\nIn #34075 the wallet is going to use a response returned via a fee rate estimator manager which does not return all those internals, hence motivating this refactor.\r\nThis PR refactors the interface between the wallet and the fee estimator to improve encapsulation and separate two distinct concerns: the source of a fee rate (where it came from) and the estimator's reason (why the algorithm chose it).\r\n\r\n#### Key Changes\r\n* Separate `FeeSource` from `FeeReason`:\r\n   Introduced a new `FeeSource` enum in `src/util/fees.h` to represent the high-level origin of a fee rate (e.g., `PAYTXFEE`, `FALLBACK`, `FEE_RATE_ESTIMATOR`). The existing `FeeReason` is now strictly scoped to internal `CBlockPolicyEstimator` details.\r\n* Encapsulate `estimateSmartFee` Logging:\r\n   Moved the fee calculation logging logic into `CBlockPolicyEstimator`. This removes the need for the wallet to manage a `FeeCalculation` object just to facilitate logging, especially when the caller passes `nullptr`.\r\n* Refactor `GetMinimumFeeRate`:\r\n   Updated `wallet::GetMinimumFeeRate` to return a `MinimumFeeRateResult` struct. This avoids the use of output parameters and provides a cleaner interface for retrieving the fee rate, source, and target.\r\n* Move `StringForFeeReason`:\r\n   Moved `StringForFeeReason` to `src/policy/fees/block_policy_estimator.cpp` to align with the location of the `FeeReason` enum. The function was also refactored to use a switch statement without a default case to ensure compile-time coverage of all reasons.\r\n* RPC Breaking Change:\r\n   Renamed the `fee_reason` field to `fee_source` in wallet RPCs (such as `send`, `walletcreatefundedpsbt`). This correctly identifies the origin of the fee rate rather than the estimator's internal logic.\r\n* Additional Logging:\r\n   Added logging for transaction fee, size, and source in `CreateTransactionInternal` to improve debugging of fee selection.",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2026-02-18T18:45:18Z",
      "updated_at": "2026-02-20T08:59:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34617",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2469,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2173924864,
      "number": 31275,
      "title": "doc: corrected lockunspent rpc quoting",
      "body": "bitcoin-cli help lockunspent RPC example shows:\r\n\r\n```\r\nAs a JSON-RPC call\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, \"[{\\\"txid\\\":\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\",\\\"vout\\\":1}]\"]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\nIncluding quotes around the transactions argument. Using the RPC in this way fails:\r\n\r\n```\r\ncurl --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, \"[{\\\"txid\\\":\\\"6f244af8e2162138369fc736a673f85ead59ad88fb5a1edd6e03f81b33c537b0\\\",\\\"vout\\\":1}]\"]}' -H 'content-type: text/plain;' http://127.0.0.1:18443/wallet/locktest\r\n\r\n{\"result\":null,\"error\":{\"code\":-3,\"message\":\"Expected type array, got string\"},\"id\":\"curltest\"}\r\n```\r\n\r\nThis change corrects the documentation to remove the additional quotes so the example works as intended:\r\n\r\n```\r\ncurl --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, [{\"txid\":\"6f244af8e2162138369fc736a673f85ead59ad88fb5a1edd6e03f81b33c537b0\",\"vout\":0}]]}' -H 'content-type: text/plain;' http://127.0.0.1:18443/wallet/locktest\r\n\r\n{\"result\":true,\"error\":null,\"id\":\"curltest\"}\r\n```",
      "state": "open",
      "user": "Talej",
      "created_at": "2024-11-12T02:44:48Z",
      "updated_at": "2026-02-20T08:55:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31275",
      "labels": [
        "Docs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1285,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275524332,
      "number": 34571,
      "title": "test: Fix intermittent issues in feature_assumevalid.py",
      "body": "The test has many issues:\r\n\r\n* The `send_blocks_until_disconnected` seems to imply to wait until a disconnect happens. However, in reality it will blindly send all blocks and then return early, when done or when a disconnect happens. This will cause test failures when python is running faster than Bitcoin Core, for example when using sanitizers.\r\n* The `assert_debug_log` scopes are bloated, which makes finding the above issue harder. This is, because a test failure will basically print the 1000+ line debug log excerpt twice, with the second instance stripped of useful python test logs. Also, the checks are less precise, if they happen over a larger scope/snippet.\r\n\r\nFix all issues, by:\r\n\r\n* Removing `send_blocks_until_disconnected` and just sending the blocks that are needed to get the disconnect and then explicitly waiting for the disconnect.\r\n* Reduce the scopes of the debug log checks. This can be reviewed with the git options `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-12T10:29:24Z",
      "updated_at": "2026-02-20T08:00:47Z",
      "merged_at": "2026-02-20T00:52:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34571",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1063,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2934151848,
      "number": 33671,
      "title": "wallet: Add separate balance info for non-mempool wallet txs",
      "body": "Changes `getbalances` to report the sum of txos spent by transactions that aren't confirmed nor in the mempool (eg due to being part of too long a mempool chain, or spending non-standard outputs, or having a datacarrier output that exceeds `-datacarriersize`, etc). Those values are added to the trusted/untrusted_pending/immature/used fields as appropriate (where previously they were skipped), and subtracted from the new nonmempool field, so that the sum of all fields remains the same.\r\n\r\nFor example:\r\n\r\n```\r\n$ bitcoin-cli -regtest getbalances\r\n{\r\n  \"mine\": {\r\n    \"trusted\": 6049.99999220,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 3200.00000780,\r\n    \"nonmempool\": -100.00000000\r\n  },\r\n  \"lastprocessedblock\": {\r\n    \"hash\": \"3ab4582226d5e8ad76438db48d76e822c31bce2cdbc7ba82a5d974a277515d0d\",\r\n    \"height\": 221\r\n  }\r\n}\r\n```\r\n\r\nCloses #11887",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-10-21T16:59:13Z",
      "updated_at": "2026-02-20T07:58:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33671",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 922,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3306634028,
      "number": 34630,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Kushmanmb",
      "created_at": "2026-02-20T07:45:34Z",
      "updated_at": "2026-02-20T07:51:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34630",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3291253508,
      "number": 34602,
      "title": "test: addrman: successive failures in the last week for IsTerrible",
      "body": "This PR adds test coverage for the case that an address is considered terrible if we had N successive failures in the last week.\r\n\r\nIt kills the following mutant (https://corecheck.dev/mutation/src/addrman.cpp#L88):\r\n```diff\r\ndiff --git a/src/addrman.cpp b/src/addrman.cpp\r\nindex e3981e6a40..f8045491c1 100644\r\n--- a/src/addrman.cpp\r\n+++ b/src/addrman.cpp\r\n@@ -65,7 +65,7 @@ bool AddrInfo::IsTerrible(NodeSeconds now) const\r\n     }\r\n\r\n     if (now - m_last_success > ADDRMAN_MIN_FAIL && nAttempts >= ADDRMAN_MAX_FAILURES) { // N successive failures in the last week\r\n-        return true;\r\n+        return false;\r\n     }\r\n\r\n     return false;\r\n\r\n```",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2026-02-16T19:14:41Z",
      "updated_at": "2026-02-20T05:25:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34602",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 716,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 991865101,
      "number": 25573,
      "title": "guix: produce a `-static-pie` bitcoind",
      "body": "Use Guix to produce a `-static-pie` bitcoind using GCC `14.3.0` and glibc `2.43`. Using glibc for static builds, would be less of a leap compared to switching to musl libc (POC in #23203).\r\n\r\n[`-static-pie`](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)\r\n> Produce a static position independent executable on targets that support it.\r\nA static position independent executable is similar to a static executable,\r\nbut can be loaded at any address without a dynamic linker.\r\n\r\n```bash\r\n# file bitcoind\r\n\tELF 64-bit LSB pie executable, x86-64, version 1 (GNU/Linux), static-pie linked, for GNU/Linux 3.2.0, stripped\r\n\r\n# ldd bitcoind\r\n\tstatically linked\r\n```\r\n\r\n`x86_64-linux-gnu` size comparison:\r\nmaster (a7e80676104b5c90c5b5e3bfab815d55a9061052) `bitcoind` is `15.35` megabytes.\r\nThis PR (597b5296d3adc693001ce39626fe32b9545eb604) `bitcoind` is `17.45` megabytes.\r\n\r\nFixes #19075.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2022-07-08T16:49:48Z",
      "updated_at": "2026-02-20T01:36:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25573",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 926,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1004149182,
      "number": 25665,
      "title": "refactor: Add util::Result failure types and ability to merge result values",
      "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/0263614685582fed2290494f5233dbe038fc350c) as an initial application. Followup PRs [#25722](https://github.com/bitcoin/bitcoin/pull/25722) and [#29700](https://github.com/bitcoin/bitcoin/pull/29700) use it more broadly to return errors and warnings from wallet and kernel functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations. See [design notes](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/util::Result-design-notes).\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Comparison with `std::expected`\r\n\r\nCurrently, the `util::Result` class is useful for error reporting—returning translated, user-facing error strings—but not as useful for error handling, where callers need structured failure information to decide how to proceed. By contrast, `std::expected` / `util::Expected` (#34005, #34006) is good for error handling but less helpful for reporting. This PR closes the gap between the two classes.\r\n\r\nWith this PR, `std::expected` remains a good choice for lower-level functions or simple functions that fail in only a few well-defined ways. Meanwhile,\r\n\r\n- `Result` becomes a better choice for operations that can fail in many different ways—loading a wallet, connecting a block, etc.—where callers may want complete error traces, not just low-level errors without context or high-level errors without detail. (Followup [#25722](https://github.com/bitcoin/bitcoin/pull/25722) applies this to wallet-loading functions.) \r\n- `Result` can also be more useful than `expected` when merging status information from multiple calls. (Followup [#29700](https://github.com/bitcoin/bitcoin/pull/29700) uses this to reliably propagate flush and fatal-error status from validation code that can internally trigger flushes or shutdowns.)\r\n- `Result` may also be a better choice than `std::expected` when returning pointer values. (Followup [#26022](https://github.com/bitcoin/bitcoin/pull/26022) adds a `ResultPtr` specialization that avoids double dereferencing.) \r\n- `Result` can be more efficient than `std::expected` when failures are rare but failure objects are large, since failure values are heap-allocated.\r\n\r\nThis PR effectively makes `Result` a superset of `expected`, making the representations compatible and allowing them to be used together.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-21T12:46:09Z",
      "updated_at": "2026-02-20T01:22:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25665",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4045,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1047758233,
      "number": 26022,
      "title": "Add util::ResultPtr class",
      "body": "<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`5142f017eaa` Add util::ResultPtr class](https://github.com/bitcoin/bitcoin/pull/26022/commits/5142f017eaa3b3f6d0109fc9f836e6243349d541)\n- [`8ef747c80fc` Use ResultPtr<unique_ptr> instead of Result<unique_ptr>](https://github.com/bitcoin/bitcoin/pull/26022/commits/8ef747c80fc3e39ecb2bb5856a489cbfc5737f48)<!-- end -->\n\n---\n\nThe `util::ResultPtr` class is a wrapper for `util::Result` providing syntax sugar to make it less awkward to use with returned pointers. Instead of needing to be deferenced twice with `**result` or `(*result)->member`, it only needs to be dereferenced once with `*result` or `result->member`. Also when it is used in a boolean context, instead of evaluating to true when there is no error and the pointer is null, it evaluates to false so it is straightforward to determine whether the result points to something.\n\nThis PR is only partial a solution to #26004 because while it makes it easier to check for null pointer values, it does not make it impossible to return a null pointer value inside a successful result. It would be possible to enforce that successful results always contain non-null pointers by using a `not_null` type (https://github.com/bitcoin/bitcoin/issues/24423) in combination with `ResultPtr`, though.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-09-06T15:57:14Z",
      "updated_at": "2026-02-20T01:10:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26022",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1358,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1389230610,
      "number": 27865,
      "title": "wallet: Track no-longer-spendable TXOs separately",
      "body": "In #27286, the wallet keeps track of all of its transaction outputs, even if they are already spent or are otherwise unspendable. This TXO set is iterated for balance checking and coin selection preparation, which can still be slow for wallets that have had a lot of activity. This PR aims to improve the performance of such wallets by moving UTXOs that are definitely no longer spendable to a different map in the wallet so that far fewer TXOs need to be iterated for the aforementioned functions.\r\n\r\nUnspendable TXOs (not to be confused with Unspent TXOs) are those which have a spending transaction that has been confirmed, or are no longer valid due to reorgs. TXOs that are spent in unconfirmed transactions remain in the primary TXO set, and are filtered out of balance and coin selection as before.\r\n\r\nDepends on #27286",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-06-12T18:40:10Z",
      "updated_at": "2026-02-20T00:12:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27865",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 876,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1487286408,
      "number": 28333,
      "title": "wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively",
      "body": "Instead of constructing ScriptPubKeyMans with no data, and then loading data as we find it, we should gather everything first and then load it all on construction. If there actually is no data and we want to setup generation, then that should also occur in a constructor rather than afterwards.\r\n\r\nThis change is only applied to DescriptorScriptPubKeyMan and ExternalSignerScriptPubKeyMan, and should be done for any ScriptPubKeyMans added in the future. I don't think it's really worth it to do this for LegacyScriptPubKeyMan since it would make loading performance worse (or cause layer violations) and it's (supposed to be) going away soon.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-08-24T02:55:39Z",
      "updated_at": "2026-02-20T00:06:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28333",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1587218477,
      "number": 28792,
      "title": "build: Embedded ASMap [3/3]: Build binary dump header file",
      "body": "This is the final in a series of PRs that implement the necessary changes for embedding of asmap data into the binary. This last part add the initial asmap data, implements the build changes and adds further documentation.\r\n\r\nCurrently an asmap file needs to be acquired by there user from some location or the user needs to generate one themselves. Then they need to move the file to the right place in datadir or pass the path to the file as `-asmap=PATH` in order to use the asmap feature. The change here allows for builds to embed asmap data into the bitcoind binary which makes it possible to use the feature without handling of the asmap file by the user. If the user starts bitcoind with `-asmap` the embedded data will be used for bucketing of nodes.\r\n\r\nThe data lives in the repository at `src/node/data/ip_asn.dat` and can be replaced with a new version at any time. The idea is that the data should be updated with every release. By default the data at that location is embedded into the binary but there is also a build option to prevent this (`-DWITH_EMBEDDED_ASMAP=OFF`). In this case the original behavior of the `-asmap` option is maintained.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2023-11-04T22:13:31Z",
      "updated_at": "2026-02-20T00:01:17Z",
      "merged_at": "2026-02-19T00:43:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28792",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1218,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1785565107,
      "number": 29700,
      "title": "kernel, refactor: return error status on all fatal errors",
      "body": "Return util::Result objects from all functions that can trigger fatal errors.\n\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\n\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\n\n---\n\n<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`513065d8e05` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/513065d8e0536737806e7b64bd22caf35e9c9562)\n- [`1aca9a06118` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/1aca9a06118e98977639cc202fe85fb55688b8bd)\n- [`eab17e5853d` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/eab17e5853d5c1ba7559b9d8f04ddce17b54bc48)\n- [`0597c54a4bf` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/0597c54a4bfd2b3de177847295eef5fe1ff487a4)\n- [`924c14e8f0b` refactor, validation: Switch to result.Update](https://github.com/bitcoin/bitcoin/pull/29700/commits/924c14e8f0b8e134e43da55a28d0d563c0ce0098)\n- [`e5b6d454453` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/e5b6d45445359ee275bdf7d402d2a86567a43329)\n- [`9f89c918697` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/9f89c91869779f98dcfa1ee0baf8cb01985a8fe7)\n- [`3ccd6282fb4` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/3ccd6282fb48d734a7d4b09d5088e27e573a53e3)\n- [`5a10b1aaa47` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/5a10b1aaa47ff7c1adc640f6ae413a8856a1c0bd)\n- [`dcd3c7058ca` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/dcd3c7058caa71ee1cd42aec26fccbc1422f6eb8)\n- [`64bcb99af8e` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/64bcb99af8e77cae057c129513e466082d0db5fd)\n- [`d8ea4c652a2` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/d8ea4c652a278a30fb417a1d572660850a0d743d)\n- [`07267be89ca` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/07267be89cae97d86c0bff65d23e3f30092eec97)\n- [`54b8f6e808f` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/54b8f6e808f95a75b38c34727495b5e9dcfb40a8)\n- [`09cbe90fa5c` ci: Avoid -Wno-error=maybe-uninitialized false positives](https://github.com/bitcoin/bitcoin/pull/29700/commits/09cbe90fa5c05e56d43895948d0d4f2b771cff9f)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-03-21T23:11:56Z",
      "updated_at": "2026-02-19T23:22:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29700",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3675,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2679273445,
      "number": 33018,
      "title": "coins: remove SetFresh method from CCoinsCacheEntry",
      "body": "There is plenty of test code that exercises the code path for FRESH-but-not-DIRTY coins in CCoinsViewCache. However, we can see there is only one place in production code where we call `SetFresh` that is not preceded by `SetDirty`. This is in `CCoinsViewCache::FetchCoin` and we can see that this is called if the coin retrieved from `base->GetCoin` is spent. The `base` in this case can be another `CCoinsViewCache` or a `CCoinsViewDB`. In `CCoinsViewCache::GetCoin` we can see that we do not return spent coins, and in `CCoinsViewDB` we don't ever store spent coins so there are none to return.\r\n\r\nThus, we can safely remove this dead code, and now we can see that there are never any calls to `SetFresh` not preceded by `SetDirty`. This PR removes this dead code and replaces `SetFresh` by passing a `fresh` boolean flag to `SetDirty`. This simplifies the logic of `CCoinsViewCache` and lets us remove test cases checking for FRESH-but-not-DIRTY coins. It removes the possibility of FRESH-but-not-DIRTY coins being called from any code path, so we can eliminate this state entirely and reduce the cognitive load of having to consider it.\r\n\r\nThis is pulled out from https://github.com/bitcoin/bitcoin/pull/30673 to make the change simpler.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-07-19T19:21:35Z",
      "updated_at": "2026-02-19T23:16:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33018",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1293,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3169361001,
      "number": 34271,
      "title": "net_processing: make m_tx_for_private_broadcast optional",
      "body": "Make `PeerManagerImpl::m_tx_for_private_broadcast` optional because it is needed for in private broadcast mode (`-privatebroadcast=1`).\r\n\r\nA followup to #29415, requested in:\r\nhttps://github.com/bitcoin/bitcoin/pull/29415#discussion_r2620864832\r\nhttps://github.com/bitcoin/bitcoin/pull/29415/files#r2620864832",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-01-13T11:32:27Z",
      "updated_at": "2026-02-19T23:08:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34271",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 366,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3182466003,
      "number": 34322,
      "title": "node: Persist private broadcast transactions over node restarts",
      "body": "Follow-up from #29415 \r\n\r\nCurrently private broadcast transactions are stored in peer manager and do not persist over restarts. A submitted transaction can be lost if the node restarts before it is privately broadcast.\r\n\r\nThis change dumps the set of private broadcast transactions to a `privatebroadcast.dat` file on shutdown, and adds the transactions back to the private broadcast data structure on restart.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-01-16T19:37:05Z",
      "updated_at": "2026-02-19T23:08:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34322",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 474,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1940584116,
      "number": 30343,
      "title": "wallet, logging: Replace WalletLogPrintf() with LogInfo()",
      "body": "Make new logging macros `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` compatible with wallet code and drop custom WalletLogPrintf() function. The new logging macros introduced in #28318 weren't previously useful in wallet code because wallet code prefixes most log messages with the wallet names to be be able to distinguish log output from multiple wallets. Fix this by introducing a new `WalletLogSource` class inheriting from `BCLog::Source` which can include the wallet name in log messages.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256.** The non-base commits are:\n\n- [`35ab88ce0e7` wallet, logging: Replace WalletLogPrintf() with LogInfo()](https://github.com/bitcoin/bitcoin/pull/30343/commits/35ab88ce0e7116c0a2bee2569ea1bc9eb5afffea)\n- [`f5039574576` wallet, logging: Switch LogInfo to LogWarning/LogError](https://github.com/bitcoin/bitcoin/pull/30343/commits/f5039574576f3128fe904147a53e3fcaab6c0d85)\n- [`aac55f94938` wallet, logging: Switch LogInfo to LogError in AddWalletDescriptor](https://github.com/bitcoin/bitcoin/pull/30343/commits/aac55f94938aa7ac727b840a9766adb848e998ab)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:57:15Z",
      "updated_at": "2026-02-19T23:05:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30343",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1201,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1943443355,
      "number": 30354,
      "title": "doc: external-signer, example 'createwallet' RPC call requires eight argument",
      "body": "The eight argument 'true' is necessary to invoke the external signer upon creating the wallet. The parameter defaults to 'false' otherwise.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2024-06-28T01:53:11Z",
      "updated_at": "2026-02-19T23:02:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30354",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217053399,
      "number": 31425,
      "title": "RFC: Riscv bare metal CI job",
      "body": "This adds a CI job for building the static consensus library and linking it to an executable. It uses newlib-cygwin as a C library for the final linking step. This ensure compatibility with this target going forward and can serve as a starting point for enabling bare metal builds for the entire kernel library. This would have also caught the error fixed in #31365.",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-12-05T08:30:01Z",
      "updated_at": "2026-02-19T22:28:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31425",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2294479432,
      "number": 31723,
      "title": "qa: Facilitate debugging bitcoind inside functional tests",
      "body": "Facilitates debugging specific instances of bitcoind *in the context of Python tests, inside of an editor/IDE/debugger*.\r\n\r\nMakes bitcoind spin during startup, waiting for a debugger to be attached, so that breakpoints during process init can be debugged.\r\n\r\n### Example usage\r\n\r\n1. Generate build files with `-DENABLE_WAIT_FOR_DEBUGGER=ON` & build.\r\n   \r\n   ```\r\n   cmake -B build -DCMAKE_BUILD_TYPE=Debug -DENABLE_WAIT_FOR_DEBUGGER=ON && cmake --build build -j$(nproc)\r\n   ```\r\n\r\n2. Set breakpoints in the C++ code in your editor/IDE/debugger.\r\n\r\n3. Start a Python functional test with a debugger command such as:\r\n   - LLDB inside an already started Tmux pane (append ` -o continue` to the LLDB args to have the debugger continue automatically):\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"tmux split-window -h lldb -p \\$PID\\$\"\r\n     ```\r\n   - Sublime Text Debugger, allows a running session to attach:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"subl --command \\\"debugger {\\\\\\\"action\\\\\\\": \\\\\\\"start\\\\\\\", \\\\\\\"configuration\\\\\\\": {\\\\\\\"name\\\\\\\": \\\\\\\"foo\\\\\\\", \\\\\\\"type\\\\\\\": \\\\\\\"lldb\\\\\\\", \\\\\\\"request\\\\\\\": \\\\\\\"attach\\\\\\\", \\\\\\\"program\\\\\\\": \\\\\\\"dummyprogram\\\\\\\", \\\\\\\"pid\\\\\\\": \\\\\\\"\\$PID\\$\\\\\\\"}}\\\"\"\r\n     ```\r\n   - Don't specify `--debug_cmd ...\\$PID\\$...`, instead have the test framework log which bitcoind PID you should manually attach to:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2\r\n     ```\r\n\r\n5. Experience how debugger hits breakpoints as the functional test executes RPCs.\r\n\r\nUsing `-debug_runs <RUN_INDEX>` often requires doing a dry-run of a functional test with `-ldebug` and examining the log to see which run index is the one we want to debug:\r\n```\r\n2025-...Z TestFramework.node0 (DEBUG): bitcoind started (run #1, node #0), waiting for RPC to come up\r\n``` \r\n\r\n### Alternative usage\r\n\r\nTweak functional test code to specify `wait_for_debugger` when (re)starting a node:\r\n\r\n```diff\r\n-        self.restart_node(0)\r\n+        self.restart_node(0, wait_for_debugger=True)\r\n```\r\nWhile it can be messy to modify files while moving between commits, and cumbersome inside of loops, it might be more straightforward than `-debug_runs <RUN_INDEX>` in a given case.\r\n\r\n### *Needed before merge*\r\n\r\n- [ ] Testing on Mac to confirm -waitfordebugger on the C++ side behaves as expected.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-23T13:18:06Z",
      "updated_at": "2026-02-19T22:08:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31723",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2417478258,
      "number": 32138,
      "title": "wallet, rpc: remove settxfee and paytxfee",
      "body": "**Summary**\r\n\r\nThis PR removes the settxfee RPC and paytxfee setting (Bitcoin Core 31.0).\r\nThese two features were deprecated in https://github.com/bitcoin/bitcoin/pull/31278.",
      "state": "closed",
      "user": "polespinasa",
      "created_at": "2025-03-25T18:30:56Z",
      "updated_at": "2026-02-19T21:44:38Z",
      "merged_at": "2026-02-19T00:36:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32138",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1841534940,
      "number": 29963,
      "title": "depends: Do not consider `CC` environment variable for detecting system",
      "body": "On the master branch @ 3c88eac28e8984893746caebb313dc3b2fca90db, consider the following commands in the `depends` subdirectory:\r\n```sh\r\n$ make print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=x86_64-pc-linux-gnu\r\n$ make print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```\r\nThe printed variable values are expected.\r\n\r\nHowever, switching the `CC` variable context from Makefile to the shell environment breaks expectations:\r\n```sh\r\n$ CC=\"clang -m32\" make print-build HOST=i686-pc-linux-gnu\r\nbuild=i686-pc-linux-gnu\r\n$ CC=\"clang -m32\" make print-host HOST=i686-pc-linux-gnu\r\nhost=i686-pc-linux-gnu\r\n```\r\n\r\nThis PR fixes this issue.\r\n\r\n#### UPDATE 2026-01-20\r\n\r\nOn the master branch @ 7f5ebef56a0f2bad7df30252b11da3e33cb3c144:\r\n```\r\n$ gmake print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=i686-pc-linux-gnu\r\n$ gmake print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-04-25T19:01:29Z",
      "updated_at": "2026-02-19T21:32:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29963",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1009,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2876629729,
      "number": 33512,
      "title": "coins: use dirty entry count for flush warnings and disk space checks",
      "body": "### Problem\r\nNow that non-wiping flushes are possible (#28280, #28233), the cache may be mostly clean at flush time.\r\nBut the flush warning, disk-space check, and benchmark logging still used total cache size, so a node with a 10 GiB cache that only needs to write a small fraction of dirty entries could still trigger a scary warning via the disk-space checks.\r\n\r\nThe previous `DynamicMemoryUsage` metric was also fundamentally wrong for estimating disk writes, even before non-wiping flushes. In-memory coin size differs from on-disk write size due to LevelDB overhead, log doubling, and compaction.\r\n\r\nThe warning also only fired in `FlushStateToDisk`, so `AssumeUTXO` snapshot loads never warned at all.\r\n\r\n### Fix\r\n\r\nThis PR tracks the actual number of dirty entries via `m_dirty_count` in `CCoinsViewCache`, maintained alongside the existing dirty-flag linked list, `SanityCheck` cross-validating both counts.\r\n\r\nThe warning and benchmark log move from `FlushStateToDisk` down to `CCoinsViewDB::BatchWrite`, where the actual I/O happens. This is the single place all flush paths converge (regular flushes, syncs, and snapshot loads), so the warning now fires correctly for `AssumeUTXO` too.\r\nThe threshold changes from 1 GiB of memory to 10 million dirty entries, which is roughly equivalent but avoids the in-memory vs on-disk size confusion.\r\n\r\nThe disk-space safety check now uses `GetDirtyCount()` with the existing conservative 48-byte-per-entry estimate, preventing unnecessary shutdowns when the cache is large but mostly clean.\r\n\r\n---\r\n\r\nNote: the first commit adds fuzz coverage for `EmplaceCoinInternalDANGER` in `SimulationTest` to exercise the accounting paths before modifying them.\r\nNote: this is a revival of #31703 with all outstanding review feedback addressed.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-10-01T02:24:51Z",
      "updated_at": "2026-02-19T21:19:06Z",
      "merged_at": "2026-02-19T21:19:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33512",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1854,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2748998057,
      "number": 33199,
      "title": "fees: enable `CBlockPolicyEstimator` return sub 1 sat/vb fee rate estimates",
      "body": "This is a simple PR that updates the block policy estimator’s `MIN_BUCKET_FEERATE` constant to be 100, which is identical to the policy `DEFAULT_MIN_RELAY_TX_FEE`. \r\n\r\nThis change enables the block policy fee rate estimator to return sub-1 sat/vB fee rate estimates.\r\n\r\nThe change is correct because the estimator creates buckets of fee rates from\r\n`MIN_BUCKET_FEERATE`,\r\n`MIN_BUCKET_FEERATE` + `FEE_SPACING`,\r\n`MIN_BUCKET_FEERATE` + `2 * FEE_SPACING`,\r\n… up to `MAX_BUCKET_FEERATE`.\r\n\r\nThis means it will record sub-1 sat/vB fee rates in the buckets and may return them as a fee rate estimate when that bucket is the lowest one with sufficient transactions for a given target.\r\n\r\n---\r\n\r\nWhile touching this part of the fee estimator code, this PR got rid of the dummy value persisted in the file",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-08-15T15:15:26Z",
      "updated_at": "2026-02-19T21:09:38Z",
      "merged_at": "2026-02-19T19:41:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33199",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 872,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2471245988,
      "number": 32317,
      "title": "kernel: Separate UTXO set access from validation functions",
      "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API (as done [here](https://github.com/sedited/bitcoin/commit/09e05493010119fc60d310d3e7ffc388de441f9a#diff-f638e65d9278276b2a6ac42ffbbd26d079c3dba752feed5038a25a1ee565d320R947))",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-04-21T13:15:46Z",
      "updated_at": "2026-02-19T20:48:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32317",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1886,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3250989124,
      "number": 34517,
      "title": "drop my key from trusted-keys",
      "body": "As planned!\r\n\r\nAlso bump trusted-git-root to 88a7294356e75bbaa136c9427c64e239f7c6fd40, which is the last merge signed with this key.\r\n\r\nEDIT: I didn’t plan to write a \"statement\" but I keep getting asked to comment:\r\n\r\nI was added as a maintainer ~3.5 years ago in recognition that mempool needed extra attention and work. It is a sensitive area of the codebase with painful tradeoffs and attracted stop energy from many angles. With package relay, TRUC + other policy features, cluster mempool, and a number of other projects shipping, I’m happy with what we’ve achieved for L2 security and mining decentralization. Here is a natural stopping point for a mempool maintainer.\r\n\r\nOver the last decade, Bitcoin Core has seen dozens of brigaded mempool policy PRs (covered to varying degrees by media). I've had the privilege of authoring, reviewing, moderating and/or merging the vast majority of them in the last 4 years and each one has strengthened the project's resistance to harassment. I cannot say the same for myself and my family, but it is an **honor** to receive so much personal recognition for my impact on Bitcoin Core's decision-making process and p2p code.\r\n\r\nI have deep respect for the skill of capturing people’s attentions/emotions. But the choice between integrity and engagement has always been an obvious one to me, and a privilege to be able to make as a maintainer of this project.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2026-02-05T16:29:34Z",
      "updated_at": "2026-02-19T20:46:16Z",
      "merged_at": "2026-02-05T18:06:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34517",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1434,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2486358825,
      "number": 32367,
      "title": "cmake: Check user-defined `APPEND_*FLAGS` variables early",
      "body": "For the purpose of checks performed by the build system, we strive to handle user-defined `APPEND_*FLAGS` in the same way as flags provided by other standard means. In particular, they are considered when the `try_compile()` command is used.\r\n\r\nHowever, these flags are not considered during `enable_language()` command invocation due to design limitations, which might cause issues, such as https://github.com/bitcoin/bitcoin/issues/32323.\r\n\r\nThis PR addresses the issue by introducing an additional compiler check that does consider the user-defined `APPEND_*FLAGS`.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32323:\r\n```\r\n$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init\"\r\n-- The CXX compiler identification is GNU 14.2.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Failed\r\nCMake Error at cmake/module/EnableLanguage.cmake:42 (message):\r\n  The CXX compiler is not able to compile a simple test program.\r\n\r\n  Check that the \"APPEND_*FLAGS\" variables are set correctly.\r\n\r\n\r\n\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:71 (bitcoincore_enable_language)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nhebasto@TS-P340:~/dev/bitcoin$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init=zero\"\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Success\r\n...\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-04-28T16:35:27Z",
      "updated_at": "2026-02-19T20:34:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32367",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1636,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1640676570,
      "number": 29060,
      "title": "Policy: Report debug message why inputs are non standard",
      "body": "This PR is another attempt at  #13525.\r\n\r\nTransactions that fail `PreChecks` Validation due to non-standard inputs now  returns invalid validation state`TxValidationResult::TX_INPUTS_NOT_STANDARD` along with a debug error message.\r\n\r\nPreviously, the debug error message for non-standard inputs do not specify why the inputs were considered non-standard. \r\nInstead, the same error string, `bad-txns-nonstandard-inputs`, used for all types of non-standard input scriptSigs.\r\n\r\nThis PR updates the `AreInputsStandard`  to include the reason why inputs are non-standard in the debug message.\r\nThis improves the `Precheck` debug message to be more descriptive.\r\n\r\nFurthermore, I have addressed all remaining comments from #13525 in this PR.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2023-12-12T13:16:05Z",
      "updated_at": "2026-02-19T20:18:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29060",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 794,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2501800868,
      "number": 32427,
      "title": "(RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store",
      "body": "Opening this PR mostly to get concept/approach feedback.\r\n\r\nThis is motivated by the kernel library, where the internal usage of leveldb is a limiting factor to its future use cases. Specifically it is not possible to share leveldb databases between two processes. A notable use-case for the kernel library is accessing and analyzing existing block data. Currently this can only be done by first shutting down the node writing this data. Moving away from leveldb opens the door towards doing this in parallel. A flat file based approach was chosen, since the requirements for persistence here are fairly simple (no deletion, constant-size entries). The change also offers better performance by making node startup faster, and has a smaller on-disk footprint, though this is negligible in the grand scheme of things.\r\n\r\nThe BlockTreeStore introduces a new data format for storing block indexes and headers on disk. The class is very similar to the existing CBlockTreeDB, which stores the same data in a leveldb database. Unlike CBlockTreeDB, the data stored through the BlockTreeStore is directly serialized and written to flat .dat files. The storage schema introduced\r\nis simple. It relies on the assumption that no entry is ever deleted and that no duplicate entries are written. These assumptions hold for the current users of CBlockTreeDB.\r\n\r\nA write ahead ahead log and boolean flags as file existence checks ensure write atomicity. Every data entry is also given a crc32c checksum to detect data corruption.\r\n\r\nThe change also opens the door towards getting rid of having to reindex the block tree due to corruption (though switching from pruned -> un-pruned still requires extra logic). This would simplify a lot of kernel/validation code, as can be seen in this [commit](https://github.com/TheCharlatan/bitcoin/commit/bfb2709e1d116d4e613601c3f0140f099530159d#diff-28f178018e05634ee3f8ddce3f4e0cec334ae69915cecf92be8299c749d8d470). The implementation here should be fairly robust against corruption (no parallel read/writes, no background compaction).\r\n\r\nAn alternative to this pull request, that could allow the same kernel feature, would be closing and opening the leveldb database only when reading and writing. This might incur a (negligible) performance penalty, but more importantly requires careful consideration of how to handle any contentions when opening, which might have complex side effects due to our current locking mode. It would also be possible to introduce an existing database with the required features for just the block tree, but that would introduce reliance on a new dependency and come with its own tradeoffs. For these reasons I chose this approach.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-05-06T14:27:59Z",
      "updated_at": "2026-02-19T19:52:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32427",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2759,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3249875645,
      "number": 34512,
      "title": "rpc: add coinbase_tx field to getblock",
      "body": "This adds a `coinbase_tx` field to the `getblock` RPC result, starting at verbosity level 1. It contains only fields guaranteed to be small, i.e. not the outputs.\r\n\r\nInitial motivation for this was to more efficiently scan for BIP54 compliance. Without this change, it requires verbosity level 2 to get the coinbase, which makes such scan very slow. See https://github.com/bitcoin-inquisition/bitcoin/pull/99#issuecomment-3852370506.\r\n\r\nAdding these fields should be useful in general though and hardly makes the verbosity 1 result longer.\r\n\r\n```\r\nbitcoin rpc help getblock\r\n\r\ngetblock \"blockhash\" ( verbosity )\r\n\r\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\r\nIf verbosity is 1, returns an Object with information about block <hash>.\r\nIf verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\r\n...\r\nResult (for verbosity = 1):\r\n{                                 (json object)\r\n  \"hash\" : \"hex\",                 (string) the block hash (same as provided)\r\n  \"confirmations\" : n,            (numeric) The number of confirmations, or -1 if the block is not on the main chain\r\n  \"size\" : n,                     (numeric) The block size\r\n  \"strippedsize\" : n,             (numeric) The block size excluding witness data\r\n  \"weight\" : n,                   (numeric) The block weight as defined in BIP 141\r\n  \"coinbase_tx\" : {               (json object) Coinbase transaction metadata\r\n    \"version\" : n,                (numeric) The coinbase transaction version\r\n    \"locktime\" : n,               (numeric) The coinbase transaction's locktime (nLockTime)\r\n    \"sequence\" : n,               (numeric) The coinbase input's sequence number (nSequence)\r\n    \"coinbase\" : \"hex\",         (string) The coinbase input's script\r\n    \"witness\" : \"hex\"             (string, optional) The coinbase input's first (and only) witness stack element, if present\r\n  },\r\n  \"height\" : n,                   (numeric) The block height or index\r\n  \"version\" : n,                  (numeric) The block version\r\n...\r\n```\r\n\r\n```\r\nbitcoin rpc getblock 000000000000000000013c986f9aebe800a78454c835ccd07ecae2650bfad3f6 1\r\n```\r\n\r\n```json\r\n{\r\n  \"hash\": \"000000000000000000013c986f9aebe800a78454c835ccd07ecae2650bfad3f6\",\r\n  \"confirmations\": 2,\r\n  \"height\": 935113,\r\n  \"version\": 561807360,\r\n  \"...\": \"...\",\r\n  \"weight\": 3993624,\r\n  \"coinbase_tx\": {\r\n    \"version\": 2,\r\n    \"locktime\": 0,\r\n    \"sequence\": 4294967295,\r\n    \"coinbase\": \"03c9440e04307c84692f466f756e6472792055534120506f6f6c202364726f70676f6c642ffabe6d6d9a8624235259d3680c972b0dd42fa3fe1c45c5e5ae5a96fe10c182bda17080e70100000000000000184b17d3f138020000000000\",\r\n    \"witness\": \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n  },\r\n  \"tx\": [\r\n    \"70eb053340c7978c5aa1b34d75e1ba9f9d1879c09896317f306f30c243536b62\",\r\n    \"5bcf8ed2900cb70721e808b8977898e47f2c9001fcee83c3ccd29e51c7775dcd\",\r\n    \"3f1991771aef846d7bb379d2931cccc04e8421a630ec9f52d22449d028d2e7f4\",\r\n    \"...\"\r\n  ]\r\n}\r\n```\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2026-02-05T11:54:15Z",
      "updated_at": "2026-02-19T19:31:54Z",
      "merged_at": "2026-02-19T19:31:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34512",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3071,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 304070624,
      "number": 16545,
      "title": "refactor: Implement missing error checking for ArgsManager flags",
      "body": "Trigger startup errors if bitcoin is configured with bad setting values according to flags. Also raise internal errors if settings are registered and retrieved with inconsistent flags.\n\nThis change has no effect on behavior because the new ArgsManager flags added here are not used outside of tests yet.\n\nIt'll probably be easier to start applying type checking flags to _new_ options than _existing_ options. But for examples of how type checking flags can make sense applied to existing options, see the new [example_options unit test](https://github.com/ryanofsky/bitcoin/blob/pr/argcheck/src/test/argsman_tests.cpp#L27) added in this PR.\n\n---\n\nFollowups:\n\n- Support for flag combinations is possible and is added in commit c919f51c044f0e80ecd301f9c9d396ddff2331ba ([branch](https://github.com/ryanofsky/bitcoin/commits/pr/argcomb))\n- ALLOW_LIST flags are added and enforced in [#17580](https://github.com/bitcoin/bitcoin/pull/17580)\n- Bad IsArgSet usages with ALLOW_LIST are removed in [#30529](https://github.com/bitcoin/bitcoin/pull/30529) and prevented in [#17783](https://github.com/bitcoin/bitcoin/pull/17783)\n- Confusing and ignored multiple assignments in config files are disallowed in [#17493](https://github.com/bitcoin/bitcoin/pull/17493)\n- Confusing reverse-precedence settings merging code is removed in [#17581](https://github.com/bitcoin/bitcoin/pull/17581)\n- Type flags added in this PR implement runtime part of a change to add more compile-time checking in [#22978](https://github.com/bitcoin/bitcoin/pull/22978)\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-08-04T14:13:12Z",
      "updated_at": "2026-02-19T18:31:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/16545",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1600,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2391882324,
      "number": 32061,
      "title": "Replace libevent with our own HTTP and socket-handling implementation",
      "body": "This is a major component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194), by replacing the HTTP server used for RPC and REST with one implemented entirely within the Bitcoin Core codebase. The new `HTTPServer` class runs its own I/O thread, handling socket connections with code based on #30988, but tailored specifically for HTTP.\r\n\r\nSome functional tests were added in #32408 to cover libevent behaviors that remain consistent with this branch. \r\n\r\nCommit strategy:\r\n- Implement a few helper functions for strings, timestamps, etc needed by HTTP protocol\r\n- Isolate the existing libevent-based HTTP server in a namespace `http_libevent`\r\n- Implement HTTP in a new namespace `http_bitcoin` (classes like `HTTPRequest`, `HTTPClient`, etc...)\r\n- Switch bitcoind from the libevent server to the new server\r\n- Clean up (delete `http_libevent`)\r\n\r\nI am currently seeing about a 10% speed up in the functional tests on my own arm/macos machine.\r\n\r\n## Integration testing:\r\n\r\nI am testing the new HTTP server by forking projects that integrate with bitcoin via HTTP and running their integration tests with bitcoind built from this branch (on Github actions). I will continue adding integrations over time, and re-running these CI tests as this branch gets rebased:\r\n\r\n- [NodeJS `rpc-bitcoin`](https://github.com/pinheadmz/rpc-bitcoin/pull/1)\r\n- [electrs](https://github.com/pinheadmz/electrs/pull/1)\r\n- [lnd](https://github.com/pinheadmz/lnd/pull/1)\r\n- [eclair](https://github.com/pinheadmz/eclair/pull/1)\r\n- [corepc](https://github.com/pinheadmz/corepc/pull/1)\r\n- [bitcoinjs-lib](https://github.com/pinheadmz/bitcoinjs-lib/pull/1)",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2025-03-13T19:32:14Z",
      "updated_at": "2026-02-19T18:25:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32061",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3210441228,
      "number": 34411,
      "title": "[POC] Full Libevent removal",
      "body": "This builds on all the work being done by pinheadmz and fjahr (#32061, #34342, #34158), to demo a libevent-less bitcoind.\r\n\r\nOne thing we could decide to change, or not, is the `libevent` logging catergory. Other than that, any remaining references to libevent, should be in documentation/code comments.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-26T12:35:26Z",
      "updated_at": "2026-02-19T18:11:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34411",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3298830305,
      "number": 34614,
      "title": "ci: Put space and non-ASCII char in scratch dir",
      "body": "It seems unlikely that many users have a space in their paths, but it seems a use-case worth enough to be tested by CI, so that it does not have to be done manually. Ref https://github.com/bitcoin/bitcoin/pull/33929#discussion_r2590523065\r\n\r\n\r\nSo do that here, and also add a non-ASCII char while touching.\r\n\r\nAlso, fix all tests that are broken and assume no space exists in paths.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-18T13:48:28Z",
      "updated_at": "2026-02-19T18:06:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34614",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 430,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3201168043,
      "number": 34385,
      "title": "subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows",
      "body": "This PR is a prerequisite for https://github.com/bitcoin/bitcoin/pull/31507.\r\n\r\nIt resolves `-Wunused-private-field` warnings triggered in `src/util/subprocess.h` when compiling with clang-cl on Windows:\r\n```\r\nD:\\a\\bitcoin\\bitcoin\\src\\util/subprocess.h(759,10): warning : private field 'parent_' is not used [-Wunused-private-field] [D:\\a\\bitcoin\\bitcoin\\build\\src\\util\\bitcoin_util.vcxproj]\r\nD:\\a\\bitcoin\\bitcoin\\src\\util/subprocess.h(760,7): warning : private field 'err_wr_pipe_' is not used [-Wunused-private-field] [D:\\a\\bitcoin\\bitcoin\\build\\src\\util\\bitcoin_util.vcxproj]\r\nD:\\a\\bitcoin\\bitcoin\\src\\util/subprocess.h(1038,7): warning : private field 'child_pid_' is not used [-Wunused-private-field] [D:\\a\\bitcoin\\bitcoin\\build\\src\\util\\bitcoin_util.vcxproj]\r\n```\r\n\r\nOnly the second commit has been [submitted](https://github.com/arun11299/cpp-subprocess/pull/127) upstream. The first commit is specific to this repository and not applicable upstream.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-22T22:26:40Z",
      "updated_at": "2026-02-19T17:08:31Z",
      "merged_at": "2026-02-19T17:05:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34385",
      "labels": [
        "Refactoring",
        "Windows"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1037,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3281186451,
      "number": 34582,
      "title": "rpc: Properly parse -rpcworkqueue/-rpcthreads",
      "body": "The integral arg parsing has many issues:\r\n\r\n* There is no way to parse an unsigned integral type at all\r\n* There is no way to parse an integral type of less width than int64_t\r\n* As a result, calling code splatters confusing c-style casts just to let the code compile. However, usually there are no range checks and proper range handling.\r\n\r\nFor example, when someone (maybe for testing) wants to set the rpc work queue to the maximum possible number, there is no easy way to do so without reading the source code and manually crafting the exact integer value. Using the \"9999 hack\" will silently set it to `-1` (!)\r\n\r\nTo test:\r\n\r\n`/bld-cmake/bin/bitcoin-qt -datadir=/tmp -regtest -rpcworkqueue=99999999999999999999999999 -printtoconsole=1 -server=1 -debug=http | grep 'set work queue of depth'`\r\n\r\nBefore:\r\n\r\n```\r\n[http] set work queue of depth -1\r\n```\r\n\r\nAfter:\r\n\r\n```\r\n[http] set work queue of depth 2147483647\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-13T14:40:20Z",
      "updated_at": "2026-02-19T17:08:12Z",
      "merged_at": "2026-02-19T16:45:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34582",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 962,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3237671040,
      "number": 34486,
      "title": "net: Reduce local network activity when networkactive=0",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/34190\r\n\r\nWhen `networkactive=0` is set, NAT-PMP port mapping and Tor **control connections**\r\nstill run in the background, mapping ports and logging retry attempts despite\r\nthe node being \"inactive.\"\r\n\r\nThis wires both subsystems to CConnman::SetNetworkActive so they start and stop\r\nwith the network state:\r\n\r\n- mapport: EnableMapPort is injected as a callback via CConnman::Options.\r\n  SetNetworkActive and SetMapPortEnabled both gate on network state.\r\n\r\n- torcontrol: is injected similarly. The callback dispatches onto the tor event loop via \r\n  event_base_once to respect thread ownership. `EVLOOP_NO_EXIT_ON_EMPTY` is \r\n  used to keep the event loop alive without keepalive timers, so the controller starts disconnected and waits for CConnman::Start() to signal.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-02T17:46:47Z",
      "updated_at": "2026-02-19T16:39:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34486",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 873,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3303345951,
      "number": 34623,
      "title": "Update secp256k1 subtree to latest master",
      "body": "https://github.com/bitcoin-core/secp256k1/pull/1760 was merged upstream, which improves test parallism, and reduces overall runtime. Our longest running tests are secp256k1 tests (secp256k1_tests), so we might want to pull this down, to speedup all of our ctest invocations.\r\n\r\nThe new upstream code increases output verbosity, i.e the test list is now ~330, and we have output like:\r\n```bash\r\nLabel Time Summary:\r\nsecp256k1_exhaustive        =  19.52 sec*proc (1 test)\r\nsecp256k1_noverify_tests    =  45.65 sec*proc (91 tests)\r\nsecp256k1_tests             =  90.55 sec*proc (91 tests)\r\n```\r\nmaybe we can mute that somewhat.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-19T14:28:05Z",
      "updated_at": "2026-02-19T15:55:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34623",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 666,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2670706297,
      "number": 32993,
      "title": "fuzz: wallet: add target for tx scanning",
      "body": "Tracking issue (#29901)\r\n\r\nThis PR adds a fuzz target for wallet tx scanning (`ScanForWalletTransactions`). Unfortunately, it's not a regression test for the issue #31474 since it would require a more complex scenario/async operations.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2025-07-16T13:15:08Z",
      "updated_at": "2026-02-19T15:07:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32993",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 276,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2836114252,
      "number": 33414,
      "title": "tor: enable PoW defenses for automatically created hidden services",
      "body": "Enable [PoW defenses](https://tpo.pages.torproject.net/onion-services/ecosystem/technology/security/pow/) for hidden services that we create via Tor Control using the [`ADD_ONION` command](https://spec.torproject.org/control-spec/commands.html#add_onion).\r\n\r\nThe ability to do that has been added in [tor-0.4.9.2-alpha](https://gitlab.torproject.org/tpo/core/tor/-/commit/02c18044464bfe45f168b55297a785244094cfd5). Previous versions return a syntax error to the `ADD_ONION` command with `PoWDefensesEnabled=1`, so the approach here is to try with PoW and if we get syntax error, then retry without PoW.\r\n\r\nAlso update `doc/tor.md` with a hint on enabling PoW on manually configured Tor hidden services.",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-09-17T10:40:41Z",
      "updated_at": "2026-02-19T14:50:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33414",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 769,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3280570256,
      "number": 34581,
      "title": "test: Set assert_debug_log timeout to 0",
      "body": "The `assert_debug_log` helper is meant to be a context manager. However, it has a  default timeout of 2 seconds, and can act as a silent polling/wait/sync function. This is confusing and brittle, and leads to intermittent bugs such as https://github.com/bitcoin/bitcoin/pull/34571.\r\n\r\nFix all issues, by setting the default timeout to zero. Then adjust all call sites to either use this correctly like a context manager, or adjust them explicitly to specify a timeout, to document that this is a polling sync function.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-13T11:54:20Z",
      "updated_at": "2026-02-19T14:01:06Z",
      "merged_at": "2026-02-18T17:03:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34581",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 558,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2712708880,
      "number": 33112,
      "title": "wallet: relax external_signer flag constraints",
      "body": "The `external_signer` indicates that an external signer device may be called via [HWI](https://github.com/bitcoin-core/HWI) or [equivalent](https://github.com/bitcoin/bitcoin/blob/master/doc/external-signer.md#signer-api) application.\r\n\r\nWhen it was initially introduced some additional constraints were placed on wallets with this flag: it had to be a descriptor wallet and watch-only. Also the flag could not be added or removed later.\r\n\r\nThe constraints aren't a problem for the main supported and documented use case of connecting a single hardware wallet and using it just like a normal single sig Bitcoin Core wallet.\r\n\r\nBut they get in the way of more advanced constructions, which are becoming increasingly practical especially once MuSig2 support lands with #29675. See https://github.com/Sjors/bitcoin/pull/91 and https://github.com/bitcoin-core/HWI/pull/794 for a collection of changes on top of that which facilitate MuSig2 with a hardware wallet. And see #24861.\r\n\r\nThis pull requests drops the following constraints:\r\n\r\n- `disable_private_keys` is no longer mandatory (but still default)\r\n- `external_signer` flag is now mutable\r\n\r\nAdditionally it does the following:\r\n\r\n- make the `blank` option for `createwallet` consistent with regular wallets by _not_ importing keys from the connected signer\r\n- avoid going through `createTransaction` for external signers (otherwise the GUI breaks)\r\n- update `external-signer.md` mainly to use named arguments and point out a GUI setting\r\n\r\n\r\nThis should no noticeable effect on the default single sig use case described above.\r\n\r\n \r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-08-01T10:11:18Z",
      "updated_at": "2026-02-19T13:34:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33112",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2659421742,
      "number": 32950,
      "title": "validation: remove BLOCK_FAILED_CHILD",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32173\r\n\r\neven though we have a distinction between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` in the codebase,\r\nwe don't use it for anything. Whenever we check for BlockStatus, we use `BLOCK_FAILED_MASK` which encompasses both of them.\r\n\r\nSince there is no functional difference between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` and it's added\r\ncode complexity to correctly categorise them (ex: https://github.com/bitcoin/bitcoin/pull/31405#discussion_r1914366243, https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-565506585), we could just remove it.\r\n\r\nLooking for conceptual feedback on whether it's better to improve handling of `BLOCK_FAILED_CHILD` in the codebase or remove `BLOCK_FAILED_CHILD`.\r\n\r\nOf less relevance, but it would also fix a `reconsiderblock` crash that could happen in the situation mentioned in https://github.com/bitcoin/bitcoin/issues/32173#issuecomment-2767030982\r\n\r\nSimilar attempt in the past in https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-568073859",
      "state": "closed",
      "user": "stratospher",
      "created_at": "2025-07-11T15:04:52Z",
      "updated_at": "2026-02-19T13:22:47Z",
      "merged_at": "2026-02-18T15:48:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32950",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1096,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2438236794,
      "number": 32217,
      "title": "Bugfix: Only use git for build info if the repository is actually the right one",
      "body": "cmake port of fix originally fixed for autotools in #7522",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2025-04-03T23:21:21Z",
      "updated_at": "2026-02-19T13:08:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32217",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 137,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2589913550,
      "number": 32745,
      "title": "scripted-diff: Update DeriveType enum values to mention ranged derivations",
      "body": "While reviewing the MuSig2 descriptors PR #31244, I realized that the enum\r\n`DeriveType` here logically refers to the derive type for ranged descriptors.\r\nThis became evident to me while going through the implementations of `IsRange`\r\n & `IsHardened` functions of `BIP32PubkeyProvider`, and the `ParsePubkeyInner`\r\nfunction. Initially I got confused by reading `IsRange` translating to\r\n`!= DeriveType::NO`, but later realised it specifically referred to the presence\r\n of ranged derivations. I propose explicitly mentioning \"ranged\" in the values\r\nof the `DeriveType` enum would make it easier to parse the descriptors code.\r\n\r\nThis enum is used in one file only - `script/descriptors.cpp`. That's why I\r\nexplicitly passed it as the argument in the `sed` command in the script.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-06-13T10:56:00Z",
      "updated_at": "2026-02-19T12:28:30Z",
      "merged_at": "2026-02-19T12:28:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32745",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 853,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3268261877,
      "number": 34550,
      "title": "guix: update time-machine to 43396dea109680d4ef7edf38991abdf9bfeccd66",
      "body": "Update the Guix time-machine to [43396dea109680d4ef7edf38991abdf9bfeccd66](https://codeberg.org/guix/guix/commit/43396dea109680d4ef7edf38991abdf9bfeccd66).\r\n\r\nPackage updates:\r\nbinutils 2.41 -> 2.44\r\ncmake-minimal 3.24.2 -> 3.31.10\r\ndiffutils 3.10 -> 3.12\r\nfile 5.45 -> 5.46\r\ngit-minimal 2.46.0 -> 2.52.0\r\n(base) glibc 2.39 -> 2.41\r\ngzip 1.13 -> 1.14\r\nlinux-headers 6.1.119 -> 6.1.163\r\nLLVM/Clang 19.1.4 -> 19.1.7\r\nmingw-w64 12.0.0 -> 13.0.0\r\nnsis 3.10 -> 3.11\r\npython-minimal 3.10 -> 3.11\r\n\r\nCMake 4.x becomes available.\r\nClang/LLVM 20 & 21 become available.\r\n\r\nSwitch to upstream `osslsigncode` (2.13, `python-lief` (0.17.3) and `python-oscrypto` (1.3.0) packages.\r\n\r\nUpdate glibc to the latest commit on the `2.31` branch.\r\n\r\nCould be used for #32764.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-10T17:21:45Z",
      "updated_at": "2026-02-19T11:51:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34550",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 824,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3236402146,
      "number": 34480,
      "title": "wallet: don't back-date locktime below input locktime",
      "body": "Fixes #26527\r\n\r\nThe Bitcoin Core wallet implements an anti-fee-sniping mechanism that sets a transaction's nLockTime to the current block height, and occasionally to an earlier height.\r\n\r\nPreviously, when creating a transaction, the wallet could choose an nLockTime that was lower than the nLockTime of one of its inputs. This creates an unrealistic \"transaction signed earlier but only broadcast now\" scenario and may act as a wallet fingerprint.\r\n\r\nThis PR fixes the issue by adding a `min_allowed_locktime` parameter to `DiscourageFeeSniping`. When creating a transaction, the wallet now sets this minimum to the highest locktime among all parent transactions. This ensures that while the locktime can still be backdated for anti-fee-sniping, it won't go below any input's locktime.\r\n\r\n`DiscourageFeeSniping` is invoked by the following RPCs:\r\n- `sendall`\r\n- `send`\r\n- `sendtoaddress`\r\n- `sendmany`\r\n- `fundrawtransaction`\r\n- `walletcreatefundedpsbt`\r\n\r\nTests are added for `sendall`, `send`, `sendtoaddress` and `sendmany`.\r\n\r\n`fundrawtransaction` and `walletcreatefundedpsbt` can't hit this edge case, because they don't use the anti-fee-sniping logic and instead always set nLockTime to 0 unless explicitly provided by the user.",
      "state": "open",
      "user": "danielabrozzoni",
      "created_at": "2026-02-02T12:47:55Z",
      "updated_at": "2026-02-19T11:48:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34480",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1288,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3222524030,
      "number": 34441,
      "title": "ci: Allow running iwyu CI in worktree",
      "body": "Currently, the iwyu CI fails to run in a git-worktree, or git-archive. This is due to the use of `git diff`.\r\n\r\nFix this by force-initializing a dummy git repo with a single dummy commit.\r\n\r\nIt may be possible to detect when `git diff` is not available in the directory, and only apply the fallback when needed, but the git history is not needed and it is easier to unconditionally apply the git init.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-29T09:21:57Z",
      "updated_at": "2026-02-19T10:45:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34441",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 439,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2914415786,
      "number": 33626,
      "title": "ci: run native fuzz with MSAN job",
      "body": "I think this job should exist in this repo (not just qa-assets), if the alternative is double-handling changes to the interpreter. #32998 made changes which were then re-changed in #33600, to work around a false positive.\r\n\r\nThe unchached runtime of this job with `-lg` is `~32m`, with `-md` it's `~43m`.\r\n\r\nTimeout is set to 150m, as the slow GHA runners were close to hitting a 120m limit.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-14T16:57:56Z",
      "updated_at": "2026-02-19T10:23:27Z",
      "merged_at": "2025-11-04T13:58:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33626",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 425,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2835868804,
      "number": 33411,
      "title": "ci: re-add Valgrind job to the CI",
      "body": "Now that we've migrated to the new CI setup, and runtimes are looking decent, we could re-add some of the nightly/jobs runs in other repos, back to the main CI. This also came up in https://github.com/bitcoin/bitcoin/pull/33201#discussion_r2325069692.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-17T09:26:38Z",
      "updated_at": "2026-02-19T10:23:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33411",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 285,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3293596106,
      "number": 34604,
      "title": "guix: remove double export of `TZ`",
      "body": "Remove a double export of `TZ` and fix a typo.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-02-17T10:01:24Z",
      "updated_at": "2026-02-19T10:19:15Z",
      "merged_at": "2026-02-19T10:19:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34604",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 81,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3280499535,
      "number": 34580,
      "title": "build: Add a compiler minimum version check",
      "body": "Adds a compiler minimum version check. If failed, it returns a fatal error.\r\nThis early stop at configure time will avoid contributors losing time trying to fix compilation errors because of not fitting the requirements.\r\n\r\nExample of the output for GCC:\r\nVersion requirement satisfied:\r\n```\r\nsliv3r@sliv3r-tuxedo:~/Documentos/Projectes/BitcoinCore/bitcoin$ cmake -B BUILD\r\n-- The CXX compiler identification is GNU 13.3.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n....\r\n```\r\nVersion requirement not satisfied:\r\n```\r\n$ cmake -B build -S .   -DCMAKE_C_COMPILER=/usr/bin/gcc-11   -DCMAKE_CXX_COMPILER=/usr/bin/g++-11\r\n-- The CXX compiler identification is GNU 11.5.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/g++-11 - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\nCMake Error at CMakeLists.txt:91 (message):\r\n  GCC >= 12.1 required.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n\r\n```\r\n\r\n\r\nExample of the output for Clang:\r\nVersion requirement satisfied:\r\n```\r\nsliv3r@sliv3r-tuxedo:~/Documentos/Projectes/BitcoinCore/bitcoin$ cmake -B build\r\n-- The CXX compiler identification is Clang 18.1.3\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n...\r\n```\r\n\r\nVersion requirement not satisfied:\r\n```\r\n$ cmake -B build -DCMAKE_C_COMPILER=clang-16       -DCMAKE_CXX_COMPILER=clang++-16\r\n-- The CXX compiler identification is Clang 16.0.6\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/clang++-16 - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\nCMake Error at CMakeLists.txt:86 (message):\r\n  Clang >= 17.0 required.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2026-02-13T11:31:21Z",
      "updated_at": "2026-02-19T09:52:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34580",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1914,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3123216401,
      "number": 34138,
      "title": "Cluster mempool: more accurate cost model for SFL",
      "body": "Builds on top of #34023, part of #30289.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented as of #32545 and #34023, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on an average on a number of systems.\r\n",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-12-22T14:57:53Z",
      "updated_at": "2026-02-19T08:56:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34138",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1859,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2919092278,
      "number": 33637,
      "title": "refactor: optimize block index comparisons (1.4-6.8x faster)",
      "body": "### Context\r\nThe comparator is often called either directly or for the sorting of [setBlockIndexCandidates](https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L637), a red-black tree-set containing valid block headers where the comparator is invoked extensively.\r\nBesided the sorted set usages, the comparator is used directly in `Chainstate` in `FindMostWorkChain`, `PruneBlockIndexCandidates`, `ActivateBestChain` and `InvalidateBlock`; and in `ChainstateManager` in `LoadBlockIndex`, `CheckBlockIndex`, `ActivateSnapshot` and `PopulateAndValidateSnapshot`.\r\n\r\nIt was profiled during the investigation of https://github.com/bitcoin/bitcoin/issues/33618#issuecomment-3402229976. \r\n\r\n### Testing\r\nTo ensure the optimized implementations are both fast and correct, the first commit adds a dedicated benchmark to measure `CBlockIndexWorkComparator` performance, and the second commit adds randomized tests comparing the new implementation with the original one.\r\n\r\n### Results\r\n\r\n> GCC 15.0.1:\r\n\r\n* `CBlockIndexWorkComparator`: 100,772,511 cmp/s → 656,674,205 cmp/s = 6.51x faster\r\n* `CheckBlockIndex`: 9,091 ops/s → 14,765 ops/s = 1.62x faster\r\n\r\n> Clang 22.0.0:\r\n\r\n* `CBlockIndexWorkComparator`: 100,451,893 cmp/s → 683,414,234 cmp/s = 6.8x faster\r\n* `CheckBlockIndex`: 10,322 ops/s → 14,376 ops/s = 1.39x faster\r\n\r\nSee https://corecheck.dev/bitcoin/bitcoin/pulls/33637 for the CI's `CheckBlockIndex` performance.\r\n\r\n<details>\r\n<summary>gcc and clang measurements</summary>\r\n\r\n> Compiler: gcc 15.0.1\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.92 |      100,772,511.62 |    0.0% |           63.98 |           35.64 |  1.795 |          14.17 |    1.9% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          109,996.46 |            9,091.20 |    0.2% |    1,014,421.11 |      394,979.29 |  2.568 |     313,025.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.48 |      154,439,491.66 |    0.0% |           31.01 |           23.25 |  1.334 |           7.16 |    3.8% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          105,754.86 |            9,455.83 |    0.1% |      913,130.11 |      379,588.20 |  2.406 |     276,692.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.37 |      156,990,488.06 |    0.0% |           28.85 |           22.87 |  1.261 |           8.61 |    3.2% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           83,803.10 |           11,932.73 |    0.0% |      743,565.09 |      300,824.84 |  2.472 |     232,646.08 |    0.0% |      5.56 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.52 |      656,674,205.98 |    0.0% |           13.18 |            5.47 |  2.410 |           3.06 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           67,726.84 |           14,765.19 |    0.2% |      585,826.07 |      243,155.90 |  2.409 |     181,920.07 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n> Compiler: clang 22.0.0\r\n\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.96 |      100,451,893.46 |    0.0% |           61.28 |           35.75 |  1.714 |          13.62 |    2.1% |      5.52 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           96,878.70 |           10,322.19 |    0.1% |      802,827.10 |      347,679.01 |  2.309 |     234,823.10 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.13 |      163,183,693.10 |    0.0% |           25.74 |           22.01 |  1.170 |           6.10 |    4.6% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           86,307.94 |           11,586.42 |    1.2% |      646,229.09 |      309,785.33 |  2.086 |     195,119.09 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.36 |      157,330,900.16 |    1.0% |           26.20 |           22.61 |  1.159 |           6.55 |    4.4% |      5.53 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           75,031.66 |           13,327.71 |    1.0% |      650,604.15 |      266,934.04 |  2.437 |     149,967.14 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.46 |      683,414,234.14 |    0.0% |           16.12 |            5.25 |  3.067 |           4.02 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           69,559.70 |           14,376.14 |    0.1% |      559,208.07 |      249,654.28 |  2.240 |     132,342.07 |    0.0% |      5.51 | `CheckBlockIndex`\r\n\r\n</details>\r\n\r\n### Reproducer\r\n\r\nRun the equivalence tests with:\r\n```bash\r\ncmake -B build && cmake --build build && ./build/bin/test_bitcoin --run_test=arith_uint256_tests,blockchain_tests\r\n```\r\n\r\nEach commit shows how it changes the relevant benchmarks.\r\n\r\n<details>\r\n<summary>Benchmark script</summary>\r\n\r\n```bash\r\nfor compiler in gcc clang; do \\\r\n  if [ \"$compiler\" = \"gcc\" ]; then CC=gcc; CXX=g++; COMP_VER=$(gcc -dumpfullversion); \\\r\n  else CC=clang; CXX=clang++; COMP_VER=$(clang -dumpversion); fi && \\\r\n  echo \"> Compiler: $compiler $COMP_VER\" && \\\r\n  for commit in 70c6244b709fcf6a853ea44b91b9ed219609ac90 516e05cd7d8dbb61b05854c59f5393367e502284 d053b27c06d06cccbc6395b0aa7dc1c4193a6fc3 8ef4ce2cb3ac80cbe58b8cf76e183f9eca6fafe4 703165e6d3b9fbd58b9c31ddce0e961047fc5e71; do \\\r\n    git fetch origin $commit >/dev/null 2>&1 && git checkout $commit >/dev/null 2>&1 && git log -1 --pretty='%h %s' && \\\r\n    rm -rf build && \\\r\n    cmake -B build -DBUILD_BENCH=ON -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX >/dev/null 2>&1 && \\\r\n    cmake --build build -j$(nproc) >/dev/null 2>&1 && \\\r\n    for i in 1; do \\\r\n      build/bin/bench_bitcoin -filter='CBlockIndexWorkComparator|CheckBlockIndex' -min-time=5000; \\\r\n    done; \\\r\n  done; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\nNote: something similar was already started in https://github.com/bitcoin/bitcoin/pull/33334, but this is a broader optimization that doesn't use the same technique.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-16T01:54:31Z",
      "updated_at": "2026-02-19T07:13:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33637",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11214,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2971018954,
      "number": 33765,
      "title": "doc: update interface, --stdin flag, `signtx` (#31005)",
      "body": "Updates to documentation for External Signer.\r\n\r\n- Added mention that `signtransaction` command is no longer primary mechanism.\r\n- Document inter-process communication via `--stdin` flag followed with stdin-content.\r\n- Document `signtx` command followed by Base64-encoded PSBT.\r\n\r\nBest to squash commits when ready to merge.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2025-11-02T23:24:59Z",
      "updated_at": "2026-02-19T04:51:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33765",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 379,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 344943058,
      "number": 17580,
      "title": "refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags",
      "body": "<!-- begin based-on -->\n**This is based on #16545.** The non-base commits are:\n\n- [`44d38d5a921` common: Add support for combining ArgsManager flags](https://github.com/bitcoin/bitcoin/pull/17580/commits/44d38d5a921d2ea7f08a1ed1ef02632cc3cfcc19)\n- [`a16319602eb` scripted-diff: Add ALLOW_LIST flag to arguments retrieved with GetArgs](https://github.com/bitcoin/bitcoin/pull/17580/commits/a16319602ebab8fc3a24195aa8a809116d1a0371)\n- [`93c929ec81d` refactor: Fix more ALLOW_LIST arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/93c929ec81db112c6e850728c396d542b695923b)\n- [`a2c954b8a90` Always reject empty -blockfilterindex=\"\" arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/a2c954b8a90fa36b2131470c09f486604493f539)\n- [`c7aa26b7b79` refactor: Stop calling GetArg/IsArgSet on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17580/commits/c7aa26b7b79a0346baff7cd7961855d4c7287a3c)\n- [`d96eb990a42` refactor: Always enforce ALLOW_LIST in CheckArgFlags](https://github.com/bitcoin/bitcoin/pull/17580/commits/d96eb990a42c5e89d156881b417075807b8b38a5)<!-- end -->\n\n---\n\nExcept for two `rpcauth` and `blockfilterindex` fixes (update: rpcauth fix was merged separately in #30401) this PR does not change any behavior outside of tests. It is just supposed to enforce internal consistency and prevent bugs by ensuring that list arguments are always retrieved with GetArgs() and non-list arguments are always retrieved with GetArg(). Followup PRs could use the ALLOW_LIST flags for better documentation and error checking in the future. For example, #17493 builds on this to disallow conflicting config values. \n\nThis change was originally made as part of #17493",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:05:39Z",
      "updated_at": "2026-02-19T02:40:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17580",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1763,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1685623460,
      "number": 29278,
      "title": "Wallet:  Add `maxfeerate` wallet startup option",
      "body": "This PR fixes #29220\r\n\r\n- The PR adds a wallet `-maxfeerate` startup option, as the upper limit of wallet transactions fee rate.\r\n\r\n- This fixes the ambiguity of using `maxtxfee` value to check the upper limit of transactions fee rate.\r\n\r\n-  Wallet will not create a transaction with fee rate above `maxfeerate` value. And you can not set wallet fee rate with `settxfee` RPC above `maxfeerate` value.\r\n\r\n- This PR adds a functional test that ensure the behavior is enforced.\r\n \r\n\r\n\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2024-01-18T22:23:49Z",
      "updated_at": "2026-02-19T02:38:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29278",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3102178109,
      "number": 34075,
      "title": "fees: Introduce Mempool Based Fee Estimation to reduce overestimation",
      "body": "This PR is another attempt to fix #27995 using a better approach.\r\n\r\nFor background and motivation, see #27995 and the discussion in the Delving Bitcoin post [Mempool Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\r\nThis PR is currently limited to using the mempool only to lower what is recommended by the Block Policy Estimator.\r\nAccurate and safe fee estimation using the mempool is challenging. There are open questions about how to prevent mempool games that are theoretically possible for miners [(a variant of the Finney attack)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6)\r\n\r\nThis is one of the reasons I opted to use the mempool only to lower the Block Policy Estimator, which itself is not gameable, and therefore this mechanism is not susceptible to this attack.\r\n\r\nThe underlying assumption here is that, with the current tools and work done to make RBF and CPFP feasible and guarantee (TRUC transaction relay, ephemeral anchors, cluster size 2 package rbf), it is safer to underestimate rather than overestimate.\r\nWe now assume it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that.\r\n\r\nAnother open question when using the mempool for fee estimation is how to account for incoming transaction inflow.\r\n[Bitcoin Augur](https://github.com/block/bitcoin-augur) does this by using past inflow plus a constant expected inflow to predict future inflow. I find this unconvincing for fee estimation and potentially prone to more overestimation, as past conditions are not always representative of the future. See my [review of the Augur fee rate estimator and open questions](https://github.com/block/bitcoin-augur/issues/3).\r\n\r\nThis PR uses a much simpler approach based on current user behavior, similar to the widely used method employed by mempool.space: looking at the top block of the mempool and selecting a percentile feerate depending on whether the user is economical or conservative.\r\n\r\nEmpirical data from both myself and Clara Shikhelman shows that the 75th percentile feerate for economical users and the 50th percentile feerate for conservative users provide positive confirmation guarantees, hence this is what is used in this PR.\r\n\r\nParallel research by René Pickhardt and his student suggests that using the [average fee per byte of the block template performs well](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12).\r\n\r\nAll of these are constants that can be adjusted, there is parallel work exploring these constants and running benchmarks across fee estimators to find a sweet spot.\r\n\r\nSee also work in LND, the [LND Budget Sweeper](https://delvingbitcoin.org/t/lnds-deadline-aware-budget-sweeper/1512), which applies this idea successfully. Their approach is to estimate fees initially with bitcoind, then increment gradually as the confirmation deadline approaches, using a fixed fee budget.\r\n\r\nHistorical data indicates that by doing only the approach in this PR, we are able to [reduce overestimation quite significantly (~29%)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8).\r\n\r\nThis is particularly useful in scenarios where the Block Policy Estimator recommends a high feerate while the mempool is empty.\r\n<img width=\"1800\" height=\"1090\" alt=\"56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" src=\"https://github.com/user-attachments/assets/c035c40c-8ece-42a7-b290-d29f1ac9bf4d\" />\r\n\r\nAs seen in the image above, there is only one remaining unfixed case: when there is a sudden inflow of transactions and the feerate rises, the Block Policy Estimator takes time to reflect this. In that case, users will continue to see a low feerate estimate until it slowly updates. From the historical data linked above, [this occurs about ~26% of the time](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8)).\r\n\r\nOverall, we observe a **73% success rate with 0% overestimation, and 26% underestimation** with this approach.\r\n\r\nThis PR also includes refactors that enable this work. Rather than splitting the PR and implementing changes incrementally, I opted for an end-to-end implementation:\r\n\r\n### 1. Refactors\r\n\r\n* Separation of feerate format from the fee estimate mode enumerator (separation of concerns, as they are semantically distinct)\r\n* Move logging after fee estimation estimateSmartFee from the wallet to the Block Policy Estimator internal method (also separation of concerns and avoiding leaking fee estimator internals). This change also comes with updating `createTransactionInternal` to log only the fee and its source (fee estimator, fallback fee, etc.), which is more appropriate.\r\n* Separate the fee estimate mode enum from the fee source enumerator (separation of concerns, as they are semantically distinct). This introduces a minor breaking change: the wallet RPCs now return fee *source* instead of fee *reason*, which is more accurate. Let me know if we prefer to keep the field name unchanged while returning the fee source.\r\n* Move the `StringForReason` enum from `common` to the Block Policy Estimator (also separation of concerns)\r\n* Various test file updates and renames for improved accuracy\r\n* Update Block Policy Estimator unit tests to be independent of the mempool and the validation interface\r\n\r\n### 2. Introduce Mempool-Based Fee Estimator and Fee Estimator Manager\r\n\r\n* Introduce a new abstract fee estimator base class that all fee estimators must implement\r\n\r\n* Introduce `FeeRateEstimateResult` as the response type, containing metadata and avoiding the use of out-parameters. This is easily extensible and makes future changes less invasive, as method signatures do not need to change.\r\n\r\n* Add `FeeEstimatorType` enum to identify different fee estimators\r\n\r\n* Make `CBlockPolicyEstimator` derive from the new fee estimator base class\r\n\r\n* Add `FeeRateEstimatorManager`, responsible for managing all fee estimators\r\n\r\n* Update the node context to store a `unique_ptr` to `FeeRateEstimatorManager` instead of `CBlockPolicyEstimator`\r\n\r\n* Update `CBlockPolicyEstimator` to no longer subscribe directly to the validation interface; instead, `FeeRateEstimatorManager` subscribes and forwards relevant notifications\r\n\r\n* Add a percentile calculation function that takes the chunk feerates of a block template and returns feerate percentiles; this can also be reused by the `getblockstats` RPC\r\n\r\n* Add a mempool fee estimator that generates a block template when called, calculates a percentile feerate, and returns the 75th percentile for economical mode or the 50th percentile for conservative mode\r\n\r\n* Add caching to the mempool estimator so that new estimates are generated only every 7 seconds, assuming enough [transactions have propagated](https://bitcoin.stackexchange.com/questions/125776/how-long-does-it-take-for-a-transaction-to-propagate-through-the-network/125777#125777) to make a meaningful difference.\r\n  This heuristic will likely be replaced by requesting block templates via the general-purpose block template cache proposed here: [https://github.com/bitcoin/bitcoin/issues/33389](https://github.com/bitcoin/bitcoin/issues/33389)\r\n\r\n* Update `MempoolTransactionRemovedForBlock` to return the actual block transactions as well\r\n\r\n* Track the weight of block transactions and evicted transactions after each block connection\r\n  This data is tracked for the last 6 mined blocks. A mempool feerate estimate is returned only when the average ratio of mempool transaction weight evicted due to `BLOCK` reasons to block transaction weight is greater than 75%. This heuristic provides rough confidence that the node’s mempool matches that of the majority of the hashrate. The 75% threshold is arbitrary and can be adjusted.\r\n\r\nThere is a caveat when transactions in the local mempool are consistently not mined by the network, as described in #27995 (e.g., due to filtering).\r\nAccounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself (see #33510). Handling this again within fee estimation would be redundant.\r\n\r\n* Persist statistics for the 6 most recent blocks to disk during periodic flushes and shutdown, so this data is available after restarts\r\n* Expose this data to users when running `estimatesmartfee` with verbosity > 2\r\n\r\n<details>\r\n<summary>see example output</summary>\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n```\r\n\r\n```\r\n{\r\n  \"feerate\": 0.00002133,\r\n  \"errors\": [],\r\n  \"blocks\": 2,\r\n  \"mempool_health_statistics\": [\r\n    {\r\n      \"block_height\": 927953,\r\n      \"block_weight\": 3991729,\r\n      \"mempool_txs_weight\": 3942409,\r\n      \"ratio\": 0.987644451815241\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-12-15T11:53:35Z",
      "updated_at": "2026-02-19T02:23:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34075",
      "labels": [
        "TX fees and policy",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 8927,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3292085705,
      "number": 34603,
      "title": "wallet: Fix detection of symlinks on Windows",
      "body": "This PR implements symlink detection for Windows, since GCC [doesn't support symlinks on Windows](https://gcc.gnu.org/git/?p=gcc.git;a=blob;f=libstdc%2B%2B-v3/src/filesystem/ops-common.h;h=ba377905a2e90f7baf30c900b090f1f732397e08;hb=refs/heads/releases/gcc-13#l124). This is used by the wallet's `ListDatabases` in order to detect symlinks and avoid recursing them. It's also used in wallet path validation since that is also checking whether paths are symlinks, and we should properly detect symlinks on Windows.\r\n\r\nUnder the hood, the `IsSymlink` function uses `std::filesystem::is_symlink` for non-Windows systems. On Windows, it checks a file's attributes to determine if it is a [reparse point](https://learn.microsoft.com/en-us/windows/win32/fileio/reparse-points). Strictly speaking, this will also catch files that aren't symlinks, such as directories that are Onedrive mounts. I think it's fine to not be recursively searching such directories.\r\n\r\nThis is based on #34418 for the multiwallet test and CI changes that it enables. The last commit also removes the skipping of the symlink checks so that we are testing that the symlink handling behavior on Windows matches that on Linux and MacOS.",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-17T00:34:28Z",
      "updated_at": "2026-02-19T02:15:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34603",
      "labels": [
        "Wallet",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1248,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3239542097,
      "number": 34490,
      "title": "wallet: Follow-ups to create/load split (#32636)",
      "body": "This adds documentation for `PopulateWalletFromDB()` and improves documentation for `LoadExisting()` and `CreateNew()`, and makes `WalletBatch::WriteVersion(int client_version)` respect the argument that it's passed, addressing issues reviewers pointed in #32636.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-02-03T06:02:55Z",
      "updated_at": "2026-02-19T00:54:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34490",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 312,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096669232,
      "number": 34059,
      "title": "refactor: Use NodeClock::time_point for m_addr_token_timestamp",
      "body": "It is a bit confusing to have some code use the deprecated `GetTime`, which returns a duration and not a time point, and other code to use `NodeClock` time points.\r\n\r\nFix one place `m_addr_token_timestamp` to use `NodeClock::time_point`.\r\n\r\nAlso:\r\n\r\n* Extract a `ProcessAddrs` helper, similar to the other `Process*()` helpers, to cut down the `ProcessMessage` with a massive scope.\r\n* Rename the confusing `current_a_time` to `now_seconds`. (The `a` in this context refers to the removed \"adjusted\" time, see commit fadd8b2676f6d68ec87189871461c9a6a6aa3cac, which removed adjusted time here)\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-12T14:15:29Z",
      "updated_at": "2026-02-18T22:40:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34059",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 657,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3294354112,
      "number": 34606,
      "title": "[RFC] common: warn on high swap usage",
      "body": "### Problem\r\nHigh swapping could grind execution to a halt, but today users get no direct warning from the node when this happens.\r\n\r\n### Fix\r\nWe can log to let the user know when the system is under heavy swap pressure.\r\nThis change adds a periodic Linux-only check (via `sysinfo()`) and emits a one-time warning when swap usage exceeds 512 MiB, with guidance to reduce memory-heavy settings (`-dbcache`,`-maxmempool`, `-maxconnections`) or use `-blocksonly`.\r\n\r\nThis is intentionally an RFC, and currently implemented for Linux only.\r\n\r\n### Reproducer\r\n> Enable swap\r\n\r\n```bash\r\nsudo dd if=/dev/zero of=/data/swapfile bs=1M count=4096 status=none && \\\r\nsudo chmod 600 /data/swapfile && sudo mkswap /data/swapfile && sudo swapon /data/swapfile && \\\r\nsudo sysctl -w vm.swappiness=100 && \\\r\nswapon --show && free -h\r\n```\r\n\r\n> Disable swap\r\n\r\n```bash\r\n(sudo swapoff /data/swapfile 2>/dev/null || true) && \\\r\nsudo rm -f /data/swapfile && \\\r\nsudo sysctl -w vm.swappiness=60 && \\\r\nswapon --show && free -h\r\n```\r\n\r\n> Reproducer (assuming 16 GB memory and PR already checked out)\r\n```bash\r\nsed -i -E '/MaybeWarnIfSystemSwapping/s/30min/5s/' src/init.cpp && \\\r\ncmake --build build --target bitcoind -j$(nproc) && rm -rf datadir && mkdir -p datadir && \\\r\n(timeout 100 build/bin/bitcoind -regtest -datadir=\"$PWD/datadir\" -listen=0 -dnsseed=0 -fixedseeds=0 -connect=0 -maxsigcachesize=16000 -dbcache=2048 -printtoconsole=0 || true) && \\\r\ngrep -En \"High swap usage detected|Using .*signature cache|Using .*script execution cache\" \"$PWD/datadir/regtest/debug.log\" || true; \\\r\ngit restore src/init.cpp\r\n```",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-02-17T13:24:35Z",
      "updated_at": "2026-02-18T22:27:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34606",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1630,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3023781832,
      "number": 33908,
      "title": "kernel: add context‑free block validation API (`btck_check_block_context_free`) with POW/Merkle flags",
      "body": "This PR exposes Bitcoin Core’s context‑free block checks to library users via a new C API entry point, `btck_check_block_context_free`. \r\n\r\nCallers can validate a block’s structure (size/weight, coinbase rules, per‑tx context‑free checks) and optionally re‑run Proof‑of‑Work and Merkle‑root verification without touching chainstate, the block index, or the UTXO set. \r\n\r\nRationale\r\nClients embedding the kernel need a pure block sanity check without requiring node state or disk writes (candidate block validation, for example). This API offers that surface in a single call, with optional PoW/Merkle toggles to avoid redundant work when the header has already been validated or when Merkle verification is deferred.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-18T23:37:30Z",
      "updated_at": "2026-02-18T18:56:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33908",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3242791811,
      "number": 34494,
      "title": "test: fix intermittent feature blockfile assertion",
      "body": "intermittent `feature_assumeutxo.py` failures were a race  with `-fastprune 64 KiB blockfiles`,\r\nthe `normal chainstate` can fill `blk00000.dat` and roll to `blk00002.dat` while the `snapshot chainstate` writes `blk00001.dat` before `-stopatheight` trips...The test now only asserts that both chainstates wrote to disk `blk00000` and `blk00001`, tolerates `blk00002.dat` when it appears, and logs it. Behavior is unchanged; we just stop failing on a benign rollover..\r\ni believe this should fix #33635",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-02-03T20:20:48Z",
      "updated_at": "2026-02-18T17:57:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34494",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 552,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940576733,
      "number": 30342,
      "title": "kernel, logging: Pass Logger instances to kernel objects",
      "body": "Pass `Logger` instances to `BlockManager`, `CCoinsViewDB`, `CDBWrapper`, `Chainstate`, `ChainstateManager`, `CoinsViews`, and `CTxMemPool` classes so libbitcoinkernel applications and tests have the option to control where log output goes instead of having all output sent to the global logger.\n\nThis PR is an alternative to #30338. It is more limited because it only changes kernel code while leaving other parts of the codebase alone. It also takes the opportunity to migrate legacy LogPrint / LogPrintf calls to the new log macros introduced in #28318.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256 + #33847.** The non-base commits are:\n\n- [`bb99c4103d7` refactor: Pass Logger instances to kernel objects](https://github.com/bitcoin/bitcoin/pull/30342/commits/bb99c4103d73623b94800ec4de91b1ee3286221e)\n- [`c864c8a84fd` refactor: Log kernel output to local log instances](https://github.com/bitcoin/bitcoin/pull/30342/commits/c864c8a84fd18b3ec3056f1e521b30b320d46f03)\n- [`aa11409e59b` refactor: Pass Logger instance to CTxMemPool](https://github.com/bitcoin/bitcoin/pull/30342/commits/aa11409e59ba7cc3f86487bd940cfbb9f7eb3f11)\n- [`eeb84002a84` kernel: Drop global Logger instance](https://github.com/bitcoin/bitcoin/pull/30342/commits/eeb84002a84226614e5d3acb9013c15ba5ce71ff)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:52:24Z",
      "updated_at": "2026-02-18T17:22:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30342",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1357,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163535277,
      "number": 34254,
      "title": "validation: Prevent duplicate logging and looping in invalid block handling",
      "body": "`InvalidChainFound()` is called from 3 spots:\r\n1. from `InvalidBlockFound()`\r\n2. from `ActivateBestChain()`, with the highest connectable block of the chain\r\nas an arg (after having called `InvalidBlockFound()` already for the block that failed in `ConnectTip()`)\r\n3. from `InvalidateBlock()` (rpc-only)\r\n\r\nMost of the logic in `InvalidChainFound()` is not required for 2) and 3):\r\nIn `ActivateBestChain()`, the previous call to `InvalidChainFound()` before via `InvalidBlockFound` did the flag updates, best header calculation and logging, so only `m_best_invalid` could need additional updating.\r\nIn `InvalidateBlock()` (which doesn't call `InvalidBlockFound()`), we do most of the accounting manually.\r\n\r\nTherefore move of all logic but the `m_best_invalid` update into `InvalidBlockFound()`, avoiding duplicate logging and unnecessary work (the loops over the block index in `SetBlockFailureFlags()` and `RecalculateBestHeader()`\r\nwere done twice before).\r\n\r\nThe second commit renames `InvalidChainFound` to `UpdateBestInvalid` to adjust to its remaining role.\r\n\r\nThis addresses past discussions about repeated work in `InvalidateBlock()` (https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2135717500) and `ActivateBestChain()` (https://github.com/bitcoin/bitcoin/pull/31533#discussion_r2607189790)",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-11T16:59:21Z",
      "updated_at": "2026-02-18T17:06:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34254",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3222520742,
      "number": 34440,
      "title": "Refactor CChain methods to use references, tests",
      "body": "Refactor `CChain` methods (`Contains()`, `Next()`, etc.) to use references instead of pointers, to minimize the risk of accidental `nullptr` dereference (memory access violation). Also add missing unit tests to the `CChain` class.\r\n\r\nThe `CChain::Contains()` method (in `src/chain.h`) dereferences its input without checking. The `Next()` method also calls into this with a `nullptr` if invoked with `nullptr`. While most call sites have indirect guarantee that the input is not `nullptr`, it's not easy to establish this to all call sites with high confidence. These methods are publicly available. There is no known high-level use case to trigger this error, but the fix is easy, and makes the code safer.\r\n\r\nChanges:\r\n\r\n- Add basic unit tests for `CChain` class methods\r\n- Refactor `CChain::Contains()` to take reference\r\n- Refactor `CChain::Next()` to take reference\r\n- Add unit tests for `CChain::FindFork()`\r\n- Change `PeerManagerImpl::BlockRequestAllowed()` to take reference\r\n\r\nTODO:\r\n\r\n- ? /Change `CChain` internals to store references instead of pointers/\r\n- ? /Explore the change to always have at least one element (genesis), that way there is always genesis and tip./\r\n- Check related methods to change to reference -- `FindFork`, `FindEarliestAtLeast`, `FindForkInGlobalIndex`, `blockman.AddToBlockIndex`, etc.\r\n\r\nAlternative. A simpler change is to stick with pointers, with extra checks where needed, see #34416 .\r\n\r\nThis change is remotely related to and indirectly triggered by #32875 .\r\n",
      "state": "open",
      "user": "optout21",
      "created_at": "2026-01-29T09:21:03Z",
      "updated_at": "2026-02-18T17:03:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34440",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1556,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3269124223,
      "number": 34554,
      "title": "build: avoid exporting secp256k1 symbols",
      "body": "Take advantage of the [new secp256k1 option to avoid visibility attributes](https://github.com/bitcoin-core/secp256k1/pull/1696) on API functions.\r\n\r\nWhile most users of a shared libsecp always want API functions exported so that they can actually be linked against, we always build it statically. When that static lib is linked into a (static or shared) libbitcoinkernel, by default its symbols end up exported there as well.\r\n\r\nAs libsecp is an implementation detail of the kernel (and any future Core lib), its symbols should never be exported.\r\n\r\n[This was the intended use for the above PR](https://github.com/bitcoin-core/secp256k1/pull/1696#issuecomment-3028838988), looks like we just forgot to follow-up and actually hook it up.\r\n\r\nThis is most easily tested by building with `-DBUILD_KERNEL_LIB=ON -DBUILD_SHARED_LIBS=ON` (with or without `-DREDUCE_EXPORTS=ON`) and inspecting via:\r\n```bash\r\nnm -CD lib/libbitcoinkernel.so | grep secp\r\n```\r\n\r\nBefore this change, secp's symbols will show up there. After, they should be absent.\r\n\r\nThis should finally solve secp symbol visibility once and for all :)",
      "state": "closed",
      "user": "theuni",
      "created_at": "2026-02-10T21:29:37Z",
      "updated_at": "2026-02-18T16:25:46Z",
      "merged_at": "2026-02-11T13:53:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34554",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1150,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3190110147,
      "number": 34349,
      "title": "util: Remove brittle and confusing sp::Popen(std::string)",
      "body": "The subprocess Popen call that accepts a full `std::string` has many issues:\r\n\r\n* It promotes brittle and broken code, where spaces are not properly quoted. Example: https://github.com/bitcoin/bitcoin/pull/33929#discussion_r2590523065\r\n* The internally used `util::split` function does incorrectly split on spaces, instead of using `shlex.split`.\r\n* It is redundant and not needed, because a vector interface already exists.\r\n\r\nFix all issues by removing it and just using the vector interface.\r\n\r\nThis pull request should not change any behavior: Note that the command taken from `gArgs.GetArg(\"-signer\", \"\")` is still passed through the `sp::util::split` helper, just like before. Fixing that is left for a follow-up, so that this change here is basically just a refactor.\r\n\r\nThis also fixes a unit test bug as a side-effect: Fixes https://github.com/bitcoin/bitcoin/issues/32574.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-20T07:19:24Z",
      "updated_at": "2026-02-18T16:18:25Z",
      "merged_at": "2026-02-18T10:18:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34349",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 940,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3245237633,
      "number": 34502,
      "title": "wallet: remove most asserts of `WALLET_FLAG_DESCRIPTORS` flag",
      "body": "Reasons:\r\n1. Few of the wallet methods are descriptors specific as suggested\r\nby their names, these assertions seems redundant within them.\r\n2. Since the legacy wallet can't be loaded anymore, few of these\r\nassertions are outdated now.\r\n3. Seeing too many of these assertions in the `CWallet` class while\r\nreading the code is cognitively loaded, and after a while becomes\r\nannoying for the reader.\r\n\r\nNote: Such assertions in the migration specific functions have been\r\nleft untouched because they seem necessary there.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "rkrux",
      "created_at": "2026-02-04T10:42:07Z",
      "updated_at": "2026-02-18T13:50:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34502",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2647,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3298526365,
      "number": 34613,
      "title": "replace manual byte copies",
      "body": "crypto: replace manual byte copies with std::memcpy in poly1305 update\r\nThe two manual for loops in poly1305 update that copy bytes into st->buffer\r\nare replaced with std::memcpy.",
      "state": "closed",
      "user": "mangoostaa",
      "created_at": "2026-02-18T12:26:32Z",
      "updated_at": "2026-02-18T12:49:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34613",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 206,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078106843,
      "number": 34023,
      "title": "Optimized SFL cluster linearization",
      "body": "Follow-up to #32545, part of #30289.\r\n\r\nThis contains many of the optimizations that were originally part of #32545 itself.\r\n\r\nHere is a list of commits and the geometric average of the benchmark timings. Note that these aren't worst cases, but because of the nature of the optimizations here, I do expect them to apply roughly equally to all kinds of clusters. In other words, the relative improvement shown by these numbers should be representative:\r\n\r\n| commit title | ns per optimal linearization |\r\n|:--|--:|\r\n| clusterlin: split tx/chunk dep counting (preparation) | 24,760.30 |\r\n| clusterlin: count chunk deps without loop (optimization) | 24,677.64 |\r\n| scripted-diff: rename _rep -> _idx in SFL | 24,640.08 |\r\n| clusterlin: get rid of DepData, reuse sets (optimization) | 24,389.01 |\r\n| clusterlin: improve TxData::dep_top_idx type (optimization) | 22,578.58 |\r\n| clusterlin: abstract out functions from MergeStep (refactor) | 22,577.15 |\r\n| clusterlin: split up OptimizeStep (refactor) | 22,981.11 |\r\n| clusterlin: simplify PickMergeCandidate (optimization) | 22,018.63 |\r\n| clusterlin: precompute reachable sets (optimization) | 21,194.91 |\r\n| clusterlin: make MergeSequence take SetIdx (simplification) | 21,135.60 |\r\n| clusterlin: special-case self-merges (optimization) | 20,588.13 |\r\n| clusterlin: keep track of active children (optimization) | 13,911.22 |\r\n| clusterlin: track suboptimal chunks (optimization) | 13,629.42 |\r\n| clusterlin: unidirectional MakeTopological initially (optimization) | 12,796.57 |\r\n| clusterlin: inline UpdateChunk into (De)Activate (optimization) | 12,706.35 |\r\n| clusterlin: inline GetReachable into Deactivate (optimization) | 12,525.66 |\r\n\r\nAnd to show that they apply to all clusters roughly similarly:\r\n\r\n\r\n<img width=\"1239\" height=\"640\" alt=\"output(1)\" src=\"https://github.com/user-attachments/assets/edd73937-3f87-4582-b2b9-eaed7e6ff352\" />",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-12-06T20:21:44Z",
      "updated_at": "2026-02-18T09:56:15Z",
      "merged_at": "2026-02-18T09:56:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34023",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1928,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3233731791,
      "number": 34471,
      "title": "refactor: Use aliasing shared_ptr in Sock::Wait",
      "body": "Currently, a no-op lambda is used as the deleter for the temporary shared pointer helper in `Sock::Wait`. This is perfectly fine, but has a few style issues:\r\n\r\n* The lambda needs to be allocated on the heap\r\n* It triggers a false-positive upstream GCC-16-trunk bug: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=123912\r\n\r\nFix all issues by just using an aliasing shared pointer, which points to `this`, but is otherwise empty (sits on the stack without any heap allocations).",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-01T18:37:53Z",
      "updated_at": "2026-02-18T08:52:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34471",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 523,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3281425700,
      "number": 34583,
      "title": "ci: [refactor] Drop last use of pwsh",
      "body": "The use of pwsh was a bit confusing and inconsistent around the exit code. See also https://github.com/bitcoin/bitcoin/pull/32672\r\n\r\nI think it is fine to drop it and purely use Bash/Python.\r\n\r\nThis also moves a bit of code from the github yaml to the python script.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-13T15:40:57Z",
      "updated_at": "2026-02-18T08:44:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34583",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 303,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3251091686,
      "number": 34520,
      "title": "refactor: Add [[nodiscard]] to functions returning bool+mutable ref",
      "body": "Legacy code often used a function signature of the form `bool Get...(const& in, mut& in_out);` to implement a getter that optionally returns a value.\r\n\r\nIn modern code, this can be replaced by `std::optional<_> Get...(const& in);`.\r\n\r\nHowever, some legacy code remains. To ensure that the \"imaginary optional\" is not unwrapped when the getter returns false, add a C++17 `[[nodiscard]]` attribute to all those legacy functions.\r\n\r\nThere were only a few places that ignored the return value. I've fixed them in separate commits.\r\n\r\nThis should be easy to review via `--word-diff-regex=.` and then confirming that the attribute was added to such a getter.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-05T16:58:07Z",
      "updated_at": "2026-02-18T06:17:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34520",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 720,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3296959625,
      "number": 34611,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "gniumg-source",
      "created_at": "2026-02-18T03:57:02Z",
      "updated_at": "2026-02-18T03:57:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34611",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3296952802,
      "number": 34610,
      "title": "README.md",
      "body": "@gregwebs #32950 \r\n@ldenman #34418 \r\n@casey #34562 \r\n@eklitzke #32150 \r\n@rion #34549\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n> Contributing to Bitcoin Core\r\n============================\r\n\r\nThe Bitcoin Core project operates an open contributor model where anyone is\r\nwelcome to contribute towards development in the form of peer review, testing\r\nand patches. This document explains the practical process and guidelines for\r\ncontributing.\r\n\r\nFirst, in terms of structure, there is no particular concept of \"Bitcoin Core\r\ndevelopers\" in the sense of privileged people. Open source often naturally\r\nrevolves around a meritocracy where contributors earn trust from the developer\r\ncommunity over time. Nevertheless, some hierarchy is necessary for practical\r\npurposes. As such, there are repository maintainers who are responsible for\r\nmerging pull requests, the [release cycle](/doc/release-process.md), and\r\nmoderation.\r\n\r\nGetting Started\r\n---------------\r\n\r\nNew contributors are very welcome and needed.\r\n\r\nReviewing and testing is highly valued and the most effective way you can contribute\r\nas a new contributor. It also will teach you much more about the code and\r\nprocess than opening pull requests. Please refer to the [peer review](#peer-review)\r\nsection below.\r\n\r\nBefore you start contributing, familiarize yourself with the Bitcoin Core build\r\nsystem and tests. Refer to the documentation in the repository on how to build\r\nBitcoin Core and how to run the unit tests, functional tests, and fuzz tests.\r\n\r\nThere are many open issues of varying difficulty waiting to be fixed.\r\nIf you're looking for somewhere to start contributing, check out the\r\n[good first issue](https://github.com/bitcoin/bitcoin/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22)\r\nlist or changes that are\r\n[up for grabs](https://github.com/bitcoin/bitcoin/issues?utf8=%E2%9C%93&q=label%3A%22Up+for+grabs%22).\r\nSome of them might no longer be applicable. So if you are interested, but\r\nunsure, you might want to leave a comment on the issue first.\r\n\r\nYou may also participate in the [Bitcoin Core PR Review Club](https://bitcoincore.reviews/).\r\n\r\n### Good First Issue Label\r\n\r\nThe purpose of the `good first issue` label is to highlight which issues are\r\nsuitable for a new contributor without a deep understanding of the codebase.\r\n\r\nHowever, good first issues can be solved by anyone. If they remain unsolved\r\nfor a longer time, a frequent contributor might address them.\r\n\r\nYou do not need to request permission to start working on an issue. However,\r\nyou are encouraged to leave a comment if you are planning to work on it. This\r\nwill help other contributors monitor which issues are actively being addressed\r\nand is also an effective way to request assistance if and when you need it.\r\n\r\nCommunication Channels\r\n----------------------\r\n\r\nMost communication about Bitcoin Core development happens on IRC, in the\r\n`#bitcoin-core-dev` channel on Libera Chat. The easiest way to participate on IRC is\r\nwith the web client, [web.libera.chat](https://web.libera.chat/#bitcoin-core-dev). Chat\r\nhistory logs can be found\r\non [https://www.erisian.com.au/bitcoin-core-dev/](https://www.erisian.com.au/bitcoin-core-dev/)\r\nand [https://gnusha.org/bitcoin-core-dev/](https://gnusha.org/bitcoin-core-dev/).\r\n\r\nDiscussion about codebase improvements happens in GitHub issues and pull\r\nrequests.\r\n\r\nThe developer\r\n[mailing list](https://groups.google.com/g/bitcoindev)\r\nshould be used to discuss complicated or controversial consensus or P2P protocol changes before working on\r\na patch set.\r\nArchives can be found on [https://gnusha.org/pi/bitcoindev/](https://gnusha.org/pi/bitcoindev/).\r\n\r\n\r\nContributor Workflow\r\n--------------------\r\n\r\nThe codebase is maintained using the \"contributor workflow\" where everyone\r\nwithout exception contributes patch proposals using \"pull requests\" (PRs). This\r\nfacilitates social contribution, easy testing and peer review.\r\n\r\nPull request authors must fully and confidently understand their own changes\r\nand must have tested them. Contributors should mention which tests cover their\r\nchanges, or include the manual steps they used to confirm the change.\r\nContributors are expected to be prepared to clearly motivate and explain their\r\nchanges. If there is doubt, the pull request may be closed.\r\nPlease refer to the [peer review](#peer-review) section below for more details.\r\n\r\nTo contribute a patch, the workflow is as follows:\r\n\r\n  1. Fork repository ([only for the first time](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo))\r\n  1. Create topic branch\r\n  1. Commit patches\r\n\r\nFor GUI-related issues or pull requests, the https://github.com/bitcoin-core/gui repository should be used.\r\nFor all other issues and pull requests, the https://github.com/bitcoin/bitcoin node repository should be used.\r\n\r\nThe master branch for all monotree repositories is identical.\r\n\r\nAs a rule of thumb, everything that only modifies `src/qt` is a GUI-only pull\r\nrequest. However:\r\n\r\n* For global refactoring or other transversal changes the node repository\r\n  should be used.\r\n* For GUI-related build system changes, the node repository should be used\r\n  because the change needs review by the build systems reviewers.\r\n* Changes in `src/interfaces` need to go to the node repository because they\r\n  might affect other components like the wallet.\r\n\r\nFor large GUI changes that include build system and interface changes, it is\r\nrecommended to first open a pull request against the GUI repository. When there\r\nis agreement to proceed with the changes, a pull request with the build system\r\nand interfaces changes can be submitted to the node repository.\r\n\r\nThe project coding conventions in the [developer notes](doc/developer-notes.md)\r\nmust be followed.\r\n\r\n### Committing Patches\r\n\r\nIn general, [commits should be atomic](https://en.wikipedia.org/wiki/Atomic_commit#Atomic_commit_convention)\r\nand diffs should be easy to read. For this reason, do not mix any formatting\r\nfixes or code moves with actual code changes.\r\n\r\nMake sure each individual commit is hygienic: that it builds successfully on its\r\nown without warnings, errors, regressions, or test failures.\r\nThis means tests must be updated in the same commit that changes the behavior.\r\n\r\nCommit messages should be verbose by default consisting of a short subject line\r\n(50 chars max), a blank line and detailed explanatory text as separate\r\nparagraph(s), unless the title alone is self-explanatory (like \"Correct typo\r\nin init.cpp\") in which case a single title line is sufficient. Commit messages should be\r\nhelpful to people reading your code in the future, so explain the reasoning for\r\nyour decisions. Further explanation [here](https://cbea.ms/git-commit/).\r\n\r\nIf a particular commit references another issue, please add the reference. For\r\nexample: `refs #1234` or `fixes #4321`. Using the `fixes` or `closes` keywords\r\nwill cause the corresponding issue to be closed when the pull request is merged.\r\n\r\nCommit messages should never contain any `@` mentions (usernames prefixed with \"@\").\r\n\r\nPlease refer to the [Git manual](https://git-scm.com/doc) for more information\r\nabout Git.\r\n\r\n  - Push changes to your fork\r\n  - Create pull request\r\n\r\n### Creating the Pull Request\r\n\r\nThe title of the pull request should be prefixed by the component or area that\r\nthe pull request affects. Valid areas as:\r\n\r\n  - `consensus` for changes to consensus critical code\r\n  - `doc` for changes to the documentation\r\n  - `qt` or `gui` for changes to bitcoin-qt\r\n  - `log` for changes to log messages\r\n  - `mining` for changes to the mining code\r\n  - `net` or `p2p` for changes to the peer-to-peer network code\r\n  - `refactor` for structural changes that do not change behavior\r\n  - `rpc`, `rest` or `zmq` for changes to the RPC, REST or ZMQ APIs\r\n  - `contrib` or `cli` for changes to the scripts and tools\r\n  - `test`, `qa` or `ci` for changes to the unit tests, QA tests or CI code\r\n  - `util` or `lib` for changes to the utils or libraries\r\n  - `wallet` for changes to the wallet code\r\n  - `build` for changes to CMake\r\n  - `guix` for changes to the GUIX reproducible builds\r\n\r\nExamples:\r\n\r\n    consensus: Add new opcode for BIP-XXXX OP_CHECKAWESOMESIG\r\n    net: Automatically create onion service, listen on Tor\r\n    qt: Add feed bump button\r\n    log: Fix typo in log message\r\n\r\nThe body of the pull request should contain sufficient description of *what* the\r\npatch does, and even more importantly, *why*, with justification and reasoning.\r\nYou should include references to any discussions (for example, other issues or\r\nmailing list discussions).\r\n\r\nThe description for a new pull request should not contain any `@` mentions. The\r\nPR description will be included in the commit message when the PR is merged and\r\nany users mentioned in the description will be annoyingly notified each time a\r\nfork of Bitcoin Core copies the merge. Instead, make any username mentions in a\r\nsubsequent comment to the PR.\r\n\r\n### Translation changes\r\n\r\nNote that translations should not be submitted as pull requests. Please see\r\n[Translation Process](https://github.com/bitcoin/bitcoin/blob/master/doc/translation_process.md)\r\nfor more information on helping with translations.\r\n\r\n### Work in Progress Changes and Requests for Comments\r\n\r\nIf a pull request is not to be considered for merging (yet), please\r\nprefix the title with [WIP] or use [Tasks Lists](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#task-lists)\r\nin the body of the pull request to indicate tasks are pending.\r\n\r\n### Address Feedback\r\n\r\nAt this stage, one should expect comments and review from other contributors. You\r\ncan add more commits to your pull request by committing them locally and pushing\r\nto your fork.\r\n\r\nYou are expected to reply to any review comments before your pull request is\r\nmerged. You may update the code or reject the feedback if you do not agree with\r\nit, but you should express so in a reply. If there is outstanding feedback and\r\nyou are not actively working on it, your pull request may be closed.\r\n\r\nPlease refer to the [peer review](#peer-review) section below for more details.\r\n\r\n### Squashing Commits\r\n\r\nIf your pull request contains fixup commits (commits that change the same line of code repeatedly) or too fine-grained\r\ncommits, you may be asked to [squash](https://git-scm.com/docs/git-rebase#_interactive_mode) your commits\r\nbefore it will be reviewed. The basic squashing workflow is shown below.\r\n\r\n    git checkout your_branch_name\r\n    git rebase -i HEAD~n\r\n    # n is normally the number of commits in the pull request.\r\n    # Set commits (except the one in the first line) from 'pick' to 'squash', save and quit.\r\n    # On the next screen, edit/refine commit messages.\r\n    # Save and quit.\r\n    git push -f # (force push to GitHub)\r\n\r\nPlease update the resulting commit message, if needed. It should read as a\r\ncoherent message. In most cases, this means not just listing the interim\r\ncommits.\r\n\r\nIf your change contains a merge commit, the above workflow may not work and you\r\nwill need to remove the merge commit first. See the next section for details on\r\nhow to rebase.\r\n\r\nPlease refrain from creating several pull requests for the same change.\r\nUse the pull request that is already open (or was created earlier) to amend\r\nchanges. This preserves the discussion and review that happened earlier for\r\nthe respective change set.\r\n\r\nThe length of time required for peer review is unpredictable and will vary from\r\npull request to pull request.\r\n\r\n### Rebasing Changes\r\n\r\nWhen a pull request conflicts with the target branch, you may be asked to rebase it on top of the current target branch.\r\n\r\n    git fetch https://github.com/bitcoin/bitcoin  # Fetch the latest upstream commit\r\n    git rebase FETCH_HEAD  # Rebuild commits on top of the new base\r\n\r\nThis project aims to have a clean git history, where code changes are only made in non-merge commits. This simplifies\r\nauditability because merge commits can be assumed to not contain arbitrary code changes. Merge commits should be signed,\r\nand the resulting git tree hash must be deterministic and reproducible. The script in\r\n[/contrib/verify-commits](/contrib/verify-commits) checks that.\r\n\r\nAfter a rebase, reviewers are encouraged to sign off on the force push. This should be relatively straightforward with\r\nthe `git range-diff` tool explained in the [productivity\r\nnotes](/doc/productivity.md#diff-the-diffs-with-git-range-diff). To avoid needless review churn, maintainers will\r\ngenerally merge pull requests that received the most review attention first.\r\n\r\nPull Request Philosophy\r\n-----------------------\r\n\r\nPatchsets should always be focused. For example, a pull request could add a\r\nfeature, fix a bug, or refactor code; but not a mixture. Please also avoid super\r\npull requests which attempt to do too much, are overly large, or overly complex\r\nas this makes review difficult.\r\n\r\n\r\n### Features\r\n\r\nWhen adding a new feature, thought must be given to the long term technical debt\r\nand maintenance that feature may require after inclusion. Before proposing a new\r\nfeature that will require maintenance, please consider if you are willing to\r\nmaintain it (including bug fixing). If features get orphaned with no maintainer\r\nin the future, they may be removed by the Repository Maintainer.\r\n\r\n\r\n### Refactoring\r\n\r\nRefactoring is a necessary part of any software project's evolution. The\r\nfollowing guidelines cover refactoring pull requests for the project.\r\n\r\nThere are three categories of refactoring: code-only moves, code style fixes, and\r\ncode refactoring. In general, refactoring pull requests should not mix these\r\nthree kinds of activities in order to make refactoring pull requests easy to\r\nreview and uncontroversial. In all cases, refactoring PRs must not change the\r\nbehaviour of code within the pull request (bugs must be preserved as is).\r\n\r\nProject maintainers aim for a quick turnaround on refactoring pull requests, so\r\nwhere possible keep them short, uncomplex and easy to verify.\r\n\r\nPull requests that refactor the code should not be made by new contributors. It\r\nrequires a certain level of experience to know where the code belongs to and to\r\nunderstand the full ramification (including rebase effort of open pull requests).\r\n\r\nTrivial pull requests or pull requests that refactor the code with no clear\r\nbenefits may be immediately closed by the maintainers to reduce unnecessary\r\nworkload on reviewing.\r\n\r\n\r\n\"Decision Making\" Process\r\n-------------------------\r\n\r\nThe following applies to code changes to the Bitcoin Core project (and related\r\nprojects such as libsecp256k1), and is not to be confused with overall Bitcoin\r\nNetwork Protocol consensus changes.\r\n\r\nWhether a pull request is merged into Bitcoin Core rests with the project merge\r\nmaintainers.\r\n\r\nMaintainers will take into consideration if a patch is in line with the general\r\nprinciples of the project; meets the minimum standards for inclusion; and will\r\njudge the general consensus of contributors.\r\n\r\nIn general, all pull requests must:\r\n\r\n  - Have a clear use case, fix a demonstrable bug or serve the greater good of\r\n    the project (for example refactoring for modularisation);\r\n  - Be well peer-reviewed;\r\n  - Have unit tests, functional tests, and fuzz tests, where appropriate;\r\n  - Follow code style guidelines ([C++](doc/developer-notes.md), [functional tests](test/functional/README.md));\r\n  - Not break the existing test suite;\r\n  - Where bugs are fixed, where possible, there should be unit tests\r\n    demonstrating the bug and also proving the fix. This helps prevent regression.\r\n  - Change relevant comments and documentation when behaviour of code changes.\r\n\r\nPatches that change Bitcoin consensus rules are considerably more involved than\r\nnormal because they affect the entire ecosystem and so must be preceded by\r\nextensive mailing list discussions and have a numbered BIP. While each case will\r\nbe different, one should be prepared to expend more time and effort than for\r\nother kinds of patches because of increased peer review and consensus building\r\nrequirements.\r\n\r\n\r\n### Peer Review\r\n\r\nAnyone may participate in peer review which is expressed by comments in the pull\r\nrequest. Typically reviewers will review the code for obvious errors, as well as\r\ntest out the patch set and opine on the technical merits of the patch. Project\r\nmaintainers take into account the peer review when determining if there is\r\nconsensus to merge a pull request (remember that discussions may have been\r\nspread out over GitHub, mailing list and IRC discussions).\r\n\r\nCode review is a burdensome but important part of the development process, and\r\nas such, certain types of pull requests are rejected. In general, if the\r\n**improvements** do not warrant the **review effort** required, the PR has a\r\nhigh chance of being rejected. It is up to the PR author to convince the\r\nreviewers that the changes warrant the review effort, and if reviewers are\r\n\"Concept NACK'ing\" the PR, the author may need to present arguments and/or do\r\nresearch backing their suggested changes.\r\n\r\nMoreover, if there is reasonable doubt that the pull request author does not\r\nfully understand the changes they are submitting themselves, or if it becomes\r\nclear that they have not tested the changes on a basic level themselves, the\r\npull request may be closed immediately.\r\n\r\n#### Conceptual Review\r\n\r\nA review can be a conceptual review, where the reviewer leaves a comment\r\n * `Concept (N)ACK`, meaning \"I do (not) agree with the general goal of this pull\r\n   request\",\r\n * `Approach (N)ACK`, meaning `Concept ACK`, but \"I do (not) agree with the\r\n   approach of this change\".\r\n\r\nA `NACK` needs to include a rationale why the change is not worthwhile.\r\nNACKs without accompanying reasoning may be disregarded.\r\n\r\n#### Code Review\r\n\r\nAfter conceptual agreement on the change, code review can be provided. A review\r\nbegins with `ACK BRANCH_COMMIT`, where `BRANCH_COMMIT` is the top of the PR\r\nbranch, followed by a description of how the reviewer did the review. The\r\nfollowing language is used within pull request comments:\r\n\r\n  - \"I have tested the code\", involving change-specific manual testing in\r\n    addition to running the unit, functional, or fuzz tests, and in case it is\r\n    not obvious how the manual testing was done, it should be described;\r\n  - \"I have not tested the code, but I have reviewed it and it looks\r\n    OK, I agree it can be merged\";\r\n  - A \"nit\" refers to a trivial, often non-blocking issue.\r\n\r\nProject maintainers reserve the right to weigh the opinions of peer reviewers\r\nusing common sense judgement and may also weigh based on merit. Reviewers that\r\nhave demonstrated a deeper commitment and understanding of the project over time\r\nor who have clear domain expertise may naturally have more weight, as one would\r\nexpect in all walks of life.\r\n\r\nWhere a patch set affects consensus-critical code, the bar will be much\r\nhigher in terms of discussion and peer review requirements, keeping in mind that\r\nmistakes could be very costly to the wider community. This includes refactoring\r\nof consensus-critical code.\r\n\r\nWhere a patch set proposes to change the Bitcoin consensus, it must have been\r\ndiscussed extensively on the mailing list and IRC, be accompanied by a widely\r\ndiscussed BIP and have a generally widely perceived technical consensus of being\r\na worthwhile change based on the judgement of the maintainers.\r\n\r\n### Finding Reviewers\r\n\r\nAs most reviewers are themselves developers with their own projects, the review\r\nprocess can be quite lengthy, and some amount of patience is required. If you find\r\nthat you've been waiting for a pull request to be given attention for several\r\nmonths, there may be a number of reasons for this, some of which you can do something\r\nabout:\r\n\r\n  - It may be because of a feature freeze due to an upcoming release. During this time,\r\n    only bug fixes are taken into consideration. If your pull request is a new feature,\r\n    it will not be prioritized until after the release. Wait for the release.\r\n  - It may be because the changes you are suggesting do not appeal to people. Rather than\r\n    nits and critique, which require effort and means they care enough to spend time on your\r\n    contribution, thundering silence is a good sign of widespread (mild) dislike of a given change\r\n    (because people don't assume *others* won't actually like the proposal). Don't take\r\n    that personally, though! Instead, take another critical look at what you are suggesting\r\n    and see if it: changes too much, is too broad, doesn't adhere to the\r\n    [developer notes](doc/developer-notes.md), is dangerous or insecure, is messily written, etc.\r\n    Identify and address any of the issues you find. Then ask e.g. on IRC if someone could give\r\n    their opinion on the concept itself.\r\n  - It may be because your code is too complex for all but a few people, and those people\r\n    may not have realized your pull request even exists. A great way to find people who\r\n    are qualified and care about the code you are touching is the\r\n    [Git Blame feature](https://docs.github.com/en/repositories/working-with-files/using-files/viewing-and-understanding-files). Simply\r\n    look up who last modified the code you are changing and see if you can find\r\n    them and give them a nudge. Don't be incessant about the nudging, though.\r\n  - Finally, if all else fails, ask on IRC or elsewhere for someone to give your pull request\r\n    a look. If you think you've been waiting for an unreasonably long time (say,\r\n    more than a month) for no particular reason (a few lines changed, etc.),\r\n    this is totally fine. Try to return the favor when someone else is asking\r\n    for feedback on their code, and the universe balances out.\r\n  - Remember that the best thing you can do while waiting is give review to others!\r\n\r\n\r\nBackporting\r\n-----------\r\n\r\nSecurity and bug fixes can be backported from `master` to release\r\nbranches.\r\nMaintainers will do backports in batches and\r\nuse the proper `Needs backport (...)` labels\r\nwhen needed (the original author does not need to worry about it).\r\n\r\nA backport should contain the following metadata in the commit body:\r\n\r\n```\r\nGithub-Pull: #<PR number>\r\nRebased-From: <commit hash of the original commit>\r\n```\r\n\r\nHave a look at [an example backport PR](\r\nhttps://github.com/bitcoin/bitcoin/pull/16189).\r\n\r\nAlso see the [backport.py script](\r\nhttps://github.com/bitcoin-core/bitcoin-maintainer-tools#backport).\r\n\r\nCopyright\r\n---------\r\nespacios.",
      "state": "closed",
      "user": "gniumg-source",
      "created_at": "2026-02-18T03:53:54Z",
      "updated_at": "2026-02-18T03:54:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34610",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 3,
        "positive_keywords": 5,
        "text_length": 24724,
        "has_nack": true,
        "has_ack": false
      }
    },
    {
      "id": 2420947155,
      "number": 32150,
      "title": "coinselection: Optimize BnB exploration",
      "body": "This PR rewrites the implementation of the BnB coinselection algorithm\r\nto skip the duplicate evaluation of previously visited input selections.\r\n\r\nIn the original implementation of BnB, the state of the search is\r\nbacktracked by explicitly walking back to the omission branch and then\r\ntesting again. This retests an equivalent candidate set as before, e.g.,\r\nafter backtracking from {ABC}, it would evaluate {AB_}, before trying\r\n{AB_D}, but {AB_} is equivalent to {AB} which was tested before.\r\n\r\nCoinGrinder tracks the state of the search instead by remembering which\r\nUTXO was last added and explicitly shifting from that UTXO directly to\r\nthe next, so after {ABC}, it will immediately move on to {AB_D}. We\r\nreplicate this approach here.\r\n\r\nAs fewer nodes are visited, this approach will enumerate more possible\r\ncombinations than the original implementation given the same limit for \r\niterations.",
      "state": "open",
      "user": "murchandamus",
      "created_at": "2025-03-27T02:33:51Z",
      "updated_at": "2026-02-18T01:11:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32150",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 943,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3289601930,
      "number": 34598,
      "title": "bench: use deterministic `HexStr` payload",
      "body": "### Context\r\nSplit out of https://github.com/bitcoin/bitcoin/pull/32554\r\nInspired by https://github.com/bitcoin/bitcoin/pull/32457#discussion_r2081323234\r\n \r\n### Problem\r\n`HexStrBench` uses the bytes from the embedded block fixture as a random source of bytes to measure `HexStr` performance against.\r\nThis coupling makes block benchmark migrations in #32554 slightly more work than necessary.\r\n\r\n### Fix\r\nWe can use deterministic pseudo-random bytes instead so this benchmark keeps stable input without fixture coupling.\r\nUse `MAX_BLOCK_WEIGHT` so the benchmark stays in the same size range and keeps measured work above harness overhead.\r\nThis changes the benchmark baseline because input size moves from about 1 MB to 4 MB.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-02-16T11:38:28Z",
      "updated_at": "2026-02-18T00:16:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34598",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 768,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2799580389,
      "number": 33306,
      "title": "index: Force database compaction in coinstatsindex",
      "body": "This PR forces full database compaction on coinstatsindex every 10,000 blocks. This does not seem to come with any considerable performance impact, though I did not test on many different systems.\r\n\r\nMotivation: Currently, coinstatsindex ends up using a lot of 55kb files if this is not the case. This is likely related to very fast writes occurring during sync but so far I could not pin down where exactly the difference in behavior is coming from. It seems to be a LevelDB internal thing though, since I can not make out any difference in configuration between coinstatsindex and the other indexes.\r\n\r\nThis was first reported here: https://github.com/bitcoin/bitcoin/pull/30469#issuecomment-3235597424",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-09-04T13:56:22Z",
      "updated_at": "2026-02-17T23:38:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33306",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 755,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3296242887,
      "number": 34609,
      "title": "test: remove appveyor reference in comment",
      "body": "Appveyor is not longer used however the test still requires to check for permissions including 666 as otherwise the tests fail on Windows\r\n\r\nFixes: #32576",
      "state": "open",
      "user": "m3dwards",
      "created_at": "2026-02-17T22:29:08Z",
      "updated_at": "2026-02-17T23:00:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34609",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 197,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3285344764,
      "number": 34593,
      "title": "fuzz: expand script verification flag testing to segwit v0 and tapscript",
      "body": "This continues the work originally started by dergoegge in #31460.\r\n\r\nThe `script_flags` fuzz harness tests that script verification flags are soft-forks applying flags can only tighten rules never widen them. Currently, the fuzzer can't reach `SigVersion::WITNESS_V0` or `SigVersion::TAPSCRIPT` code paths because it can't construct inputs that pass the P2WSH script hash check or a valid taproot commitment.\r\n\r\nThis PR makes those checks mockable by moving them into virtual methods on `BaseSignatureChecker`\r\n\r\n- `CheckWitnessScriptHash(program, exec_script)` for P2WSH script hash verification\r\n- `CheckTaprootCommitment(control, program, tapleaf_hash)` for taproot script-path commitment\r\n\r\nA new `script_flags_mocked` fuzz target uses `FuzzedSignatureChecker` which mocks out signature validation and these commitment checks, allowing the fuzzer to exercise the interpreter under witness v0 and tapscript contexts\r\n\r\nso the coverage report shows that `script_flags_mocked` reaches segwit v0 and tapscript paths\r\n\r\n**Segwit v0 (P2WSH / P2WPKH)**\r\n\r\n| Line | Hits | Code path |\r\n|------|------|-----------|\r\n| `program.size() == WITNESS_V0_SCRIPTHASH_SIZE` | **10.0k** | P2WSH branch entered |\r\n| `checker.CheckWitnessScriptHash(program, exec_script)` | **6.77k** | P2WSH script-hash check |\r\n| `ExecuteWitnessScript(..., SigVersion::WITNESS_V0, ...)` (P2WSH) | **4.87k** | Witness v0 script execution (P2WSH) |\r\n| `ExecuteWitnessScript(..., SigVersion::WITNESS_V0, ...)` (P2WPKH) | **2.11k** | Witness v0 script execution (P2WPKH) |\r\n\r\n**Taproot / tapscript**\r\n\r\n| Line | Hits | Code path |\r\n|------|------|-----------|\r\n| `checker.CheckSchnorrSignature(..., SigVersion::TAPROOT, ...)` | **88** | Key-path spend |\r\n| `checker.CheckTaprootCommitment(control, program, ...)` | **273** | Script-path commitment |\r\n| `(control[0] & TAPROOT_LEAF_MASK) == TAPROOT_LEAF_TAPSCRIPT` | **87** | Tapscript leaf branch |\r\n| `ExecuteWitnessScript(..., SigVersion::TAPSCRIPT, ...)` | **80** | Tapscript execution |",
      "state": "closed",
      "user": "b-l-u-e",
      "created_at": "2026-02-14T20:34:38Z",
      "updated_at": "2026-02-17T21:17:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34593",
      "labels": [
        "CI failed",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 2078,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3295731767,
      "number": 34607,
      "title": "contrib: Add PIP-2030 Quantum Shield (Dilithium Mode3) Toolset",
      "body": "### Rationale\r\nThis PR introduces `contrib/pq-shield`, a standalone toolset implementing CRYSTALS-Dilithium Mode3 signature scheme. This serves as a foundational step for PIP-2030, addressing the quantum vulnerability of ECDSA by 2030.\r\n\r\n### Technical Approach\r\n- **Algorithm**: Dilithium Mode3 (NIST PQC finalist).\r\n- **Implementation**: Go-based wrapper around Cloudflare's Circl library.\r\n- **Components**:\r\n  - `pq-shield`: CLI for key generation, signing, and verification.\r\n  - `audit`: Forensic tool for validating key formats and permissions.\r\n- **Security**: Includes fuzz testing and strict file permission checks (0600 for private keys).\r\n\r\n### Tests\r\n- Unit tests cover key generation, signing round-trip, and tamper resistance.\r\n- Fuzz testing implemented for signature verification.\r\n- Verified locally on Linux/Windows.\r\n\r\n### Impact\r\nNo changes to consensus code. This is a purely additive tool in `contrib/` for experimentation and future integration planning.",
      "state": "closed",
      "user": "rsdenck",
      "created_at": "2026-02-17T19:38:14Z",
      "updated_at": "2026-02-17T19:38:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34607",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1041,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3185680005,
      "number": 34333,
      "title": "fuzz: add target for wallet receive",
      "body": "Tracking issue (https://github.com/bitcoin/bitcoin/issues/29901)\r\n\r\nThis adds a fuzz target for wallet receive\r\n\r\nhere is the coverage was able to gather for wallet receive target\r\n\r\n| File | Regions | Lines | Branches |\r\n|------|---------|-------|----------|\r\n| `src/wallet/receive.cpp` | 94.92% | 97.10% | 88.12% |\r\n| `src/wallet/test/fuzz/receive.cpp` | 93.50% | 94.86% | 89.80% |\r\n| `src/wallet/walletutil.h` | 57.89% | 33.33% | 0.00% |\r\n| `src/wallet/wallet.h` | 30.85% | 38.78% | 13.89% |\r\n| `src/wallet/transaction.h` | 31.40% | 28.66% | 14.29% |\r\n| `src/wallet/test/util.h` | 38.46% | 26.09% | - |\r\n| `src/wallet/db.h` | 33.33% | 37.14% | 0.00% |\r\n| `src/wallet/scriptpubkeyman.h` | 18.75% | 17.39% | - |\r\n| `src/wallet/walletdb.h` | 15.62% | 11.86% | 10.00% |\r\n| `src/wallet/test/util.cpp` | 10.13% | 7.95% | 11.76% |\r\n| `src/wallet/scriptpubkeyman.cpp` | 12.51% | 10.29% | 6.30% |\r\n| `src/wallet/wallet.cpp` | 8.79% | 8.87% | 5.52% |\r\n| `src/wallet/walletdb.cpp` | 3.86% | 3.63% | 3.10% |\r\n| `src/wallet/transaction.cpp` | 5.00% | 7.32% | 0.00% |\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-01-18T19:38:24Z",
      "updated_at": "2026-02-17T18:53:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34333",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1094,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3268498638,
      "number": 34552,
      "title": "fees: refactor: separate feerate format from fee estimate mode",
      "body": "### Motivation\r\n\r\nPart of #34075\r\n\r\n- The `FeeEstimateMode` enum was responsible for both selecting the fee estimation algorithm and specifying the fee rate' format. \r\n\r\n####  Changes in this PR:\r\n   * The `FeeEstimateMode` enum (`UNSET`, `ECONOMICAL`, `CONSERVATIVE`) is moved to a new util/fees.h header.\r\n   * A new `FeeRateFormat `enum (`BTC_KVB`, `SAT_VB`) is introduced in `policy/feerate.h` for feerate formatting.\r\n   * The `CFeeRate::ToString()` method is updated to use `FeeRateFormat`.\r\n   * All relevant function calls have been updated to use the new `FeeRateFormat` enum for formatting and `FeeEstimateMode` for fee estimation mode.\r\n\r\n This refactoring separates these unrelated responsibilities to improve code clarity.",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2026-02-10T18:21:41Z",
      "updated_at": "2026-02-17T16:27:04Z",
      "merged_at": "2026-02-17T13:15:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34552",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 798,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275501062,
      "number": 34570,
      "title": "doc: update Windows MSVC build guide to utilize winget to install build requirements",
      "body": "This PR updates the Windows MSVC build guide to bring it more in line with the macOS and Unix build guides. \r\n\r\nCurrently the guide listed requirements but left users to manually do the download/installation. The macOS and the Unix guide utilize package managers to provide concrete installation commands that users can follow. By introducing  `winget`, the Windows MSVC build guide now also provides concrete installation commands.\r\n\r\nThe changes/commands can be tested on any windows machine, provided it run a  Windows 10 (version 1809 (build 17763)) or later (e.g. Windows 11 / Server 2025).",
      "state": "closed",
      "user": "janb84",
      "created_at": "2026-02-12T10:23:38Z",
      "updated_at": "2026-02-17T15:51:55Z",
      "merged_at": "2026-02-16T13:43:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34570",
      "labels": [
        "Docs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3278487026,
      "number": 34578,
      "title": "depends: Update Qt to version 6.10.2",
      "body": "This PR updates the `qt` package in depends to the most recent version [6.10.2](https://www.qt.io/blog/qt-6.10.2-released).\r\n\r\nThe update includes many bugfixes that enable dropping some patches.\r\n\r\nAdditionally, [patches](https://github.com/bitcoin/bitcoin/issues/34569#issuecomment-3892793262) for compatibility with GCC 16 have been included.\r\n\r\nA [commit](https://github.com/bitcoin/bitcoin/pull/32709/changes/8f1b55d1d52fb6e44a6d2d34b506f7f309c89ad1) from https://github.com/bitcoin/bitcoin/pull/32709 is also included.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-12T22:40:52Z",
      "updated_at": "2026-02-17T15:33:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34578",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 561,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2854045392,
      "number": 33464,
      "title": "p2p: Use network-dependent timers for inbound inv scheduling",
      "body": "Currently, `NextInvToInbounds` schedules  each round of `inv` at the same time for all inbound peers. It's being done this way because with a separate timer per peer (like it's done for outbounds), an attacker could do multiple connections to learn about the time a transaction arrived. (#13298).\r\n\r\nHowever, having a single timer for inbounds of all networks is also an obvious fingerprinting vector: Connecting to a suspected pair of privacy-network and clearnet addresses and observing the `inv` pattern makes it trivial to confirm or refute that they are the same node.\r\n\r\nThis PR changes it such that a separate timer is used for each network.\r\nIt uses the existing method  from `getaddr` caching and generalizes it to be saved in a new field `m_network_key` in `CNode` which will be used for both `getaddr` caching and `inv` scheduling, and can also be used for any future anti-fingerprinting measures.",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-09-23T17:19:20Z",
      "updated_at": "2026-02-17T13:14:45Z",
      "merged_at": "2025-10-03T22:45:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33464",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 969,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3245590755,
      "number": 34504,
      "title": "build: replace `WERROR` with `CMAKE_COMPILE_WARNING_AS_ERROR`",
      "body": "`CMAKE_COMPILE_WARNING_AS_ERROR` was added to CMake in 3.24.\r\n\r\n`--compile-no-warning-as-error` can be used, if needed, in future, to\r\nsuppress the `CMAKE_COMPILE_WARNING_AS_ERROR` behaviour from a CI\r\nconfig.\r\n\r\nPotential alternative to #33297. Closes #33284.\r\n\r\nSee https://cmake.org/cmake/help/latest/prop_tgt/COMPILE_WARNING_AS_ERROR.html.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-02-04T12:18:37Z",
      "updated_at": "2026-02-17T12:30:17Z",
      "merged_at": "2026-02-05T18:59:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34504",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 405,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3276965167,
      "number": 34575,
      "title": "test: Avoid empty errmsg in JSONRPCException",
      "body": "It is unclear why the fallback should be an empty message, when it is better to include all rpc_error details that are available.\r\n\r\nAlso, include the http status.\r\n\r\nThis allows to revert commit 6354b4fd7fe819eb13274b212e426a7d10ca75d3, because it is no longer needed.\r\n\r\n\r\nCan be tested by running this diff:\r\n\r\n```diff\r\ndiff --git a/test/functional/wallet_disable.py b/test/functional/wallet_disable.py\r\nindex dbcccd4778..9717a2d248 100755\r\n--- a/test/functional/wallet_disable.py\r\n+++ b/test/functional/wallet_disable.py\r\n@@ -18,9 +18,8 @@ class DisableWalletTest (BitcoinTestFramework):\r\n         self.extra_args = [[\"-disablewallet\"]]\r\n         self.wallet_names = []\r\n \r\n-    def run_test (self):\r\n-        # Make sure wallet is really disabled\r\n-        assert_raises_rpc_error(-32601, 'Method not found', self.nodes[0].getwalletinfo)\r\n+    def run_test(self):\r\n+        self.nodes[0].getwalletinfo()\r\n         x = self.nodes[0].validateaddress('3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy')\r\n         assert x['isvalid'] == False\r\n         x = self.nodes[0].validateaddress('mneYUmWYsuk7kySiURxCi3AGxrAqZxLgPZ')\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-12T16:12:09Z",
      "updated_at": "2026-02-17T12:14:43Z",
      "merged_at": "2026-02-17T09:40:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34575",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1158,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3201053750,
      "number": 34383,
      "title": "ci: remove commit count limit from `test-each-commit` and fail fast",
      "body": "### Problem\r\n\r\n`test-each-commit` currently tests only a limited number of ancestor commits in a PR, so failures introduced deeper in the commit stack might be missed.\r\n\r\n### Fix\r\n\r\nRemove the max-count limit so `test-each-commit` runs the full build + unit + functional test flow on every non-head PR commit, while keeping the PR tip excluded because it is already covered by the normal CI jobs.\r\nIt will also stop after the first failure to surface the root cause sooner and keep logs readable when testing ancestor commits.\r\n\r\n### Examples\r\n* Example failure 10 commits deep: https://github.com/l0rinc/bitcoin/actions/runs/21390976651/job/61577575033?pr=105 in https://github.com/l0rinc/bitcoin/pull/105\r\n* Example pass with >7 dummy commits: https://github.com/l0rinc/bitcoin/actions/runs/21392557521/job/61595159841?pr=106 in https://github.com/l0rinc/bitcoin/pull/106\r\n\r\n---------\r\n\r\nNote: this PR has gone through a few iterations, the latest one just extends the existing job.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-22T21:38:21Z",
      "updated_at": "2026-02-17T10:03:43Z",
      "merged_at": "2026-02-17T10:03:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34383",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1052,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2691828975,
      "number": 33051,
      "title": "Don't fix Python patch version",
      "body": "`.python-version` always matches the minimum supported Python version.\r\nIt's main purpose is to catch accidental use of too modern syntax\r\nin scripts and functional tests.\r\n\r\nWe (currently) don't specify a minimum patch version, so it's not\r\nnecessary to do so here. The minor verion is enough.\r\n\r\nThis also avoids requiring users to keep a potentially unsafe old\r\npatch version installed.\r\n\r\nThe linter CI job used `python_build` (part of PyEnv) which requires specifying an exact Python version. The first commit changes it to use the higher level `pyenv install` which will pick the most recent patch version it knows about.\r\n\r\nThe original stated reason for using the lower level `python_build` https://github.com/bitcoin/bitcoin/pull/26716#issuecomment-1356314359 was that it allowed specifying `CC=clang` which needs fewer resources, but `pyenv install` can do that as well.  \r\n\r\nSee also https://github.com/bitcoin-core/HWI/pull/695",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-07-24T12:18:31Z",
      "updated_at": "2026-02-17T09:19:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33051",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 970,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173345068,
      "number": 34281,
      "title": "build: Temporarily remove confusing and brittle `-fdebug-prefix-map`",
      "body": "The compiler option `-fdebug-prefix-map` is unconditionally set by the build system. This is problematic for many reasons:\r\n\r\n* Users and devs have no easy way to disable it without modifying the build system source code\r\n* The mapping is broken since the cmake migration, and requires manual fixups such as https://github.com/bitcoin/bitcoin/issues/31204 or https://github.com/bitcoin/bitcoin/issues/31957\r\n\r\nFix all issues by temporarily removing it.\r\n\r\nThough, the option is kept for the guix build, so that no change in behavior is observed for the release binaries.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31957\r\nFixes https://github.com/bitcoin/bitcoin/issues/31204\r\n\r\n\r\nThe option can be added back in the future, if there is any need to. Though, adding it back should ideally work out of the box, or at least provide easy workarounds for all commonly used tooling.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-14T12:31:05Z",
      "updated_at": "2026-02-17T07:08:05Z",
      "merged_at": "2026-01-26T13:56:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34281",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 952,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3284402582,
      "number": 34590,
      "title": "test: accept multiple execve error strings in rpc_signer",
      "body": "Summary\r\n\r\nRelax the rpc_signer.py test to accept multiple POSIX execve failure messages when the signer command is missing.\r\n\r\nMotivation\r\n\r\nThe exact errno text for execve failures can vary across environments (e.g. \"No such file or directory\" vs \"Not a directory\", and may include errno numbers). Matching a single exact string makes the test brittle.\r\nKeep the check strict (matching the \"execve failed:\" prefix) while allowing expected POSIX variants.\r\n\r\nRefs #31506.\r\n\r\nHow tested:\r\nexport DYLD_LIBRARY_PATH=\"...\"\r\npython3 build/test/functional/test_runner.py rpc_signer.py\r\n",
      "state": "closed",
      "user": "SakshiKasat18",
      "created_at": "2026-02-14T11:26:24Z",
      "updated_at": "2026-02-17T05:35:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34590",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 638,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3235087967,
      "number": 34473,
      "title": "test: add Taproot support to script_builder",
      "body": "Make the script_builder used in unit tests compatible with Taproot by adding a PushSchnorrSig helper. Add a few tests that cover boundary values for Taproot SIGHASH flags in SignatureHashSchnorr (including values at and above 84, which were not covered by existing unit tests).\r\nThis slightly improves unit test coverage of SignatureHashSchnorr, as suggested in issue #23279.\r\nCurrent unit test coverage for src/script/interpreter.cpp can be seen here: https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/script/interpreter.cpp.gcov.html\r\n\r\nWe also have Taproot tests in bip341_keypath_test_vectors, but extending those tests would require preparing a test data. Making script_builder Taproot-compatible is a simpler way to add edge-case tests for SignatureHashSchnorr and to add more Taproot unit tests later.",
      "state": "open",
      "user": "kannapoix",
      "created_at": "2026-02-02T06:30:56Z",
      "updated_at": "2026-02-17T01:14:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34473",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 862,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3260481659,
      "number": 34535,
      "title": "test: Add wallet reorg test during assumeutxo background sync",
      "body": "This PR adds a test that verifies wallet balance consistency when a chain reorg occurs while assumeutxo background validation is in progress\r\n\r\nmotivation\r\ncurrently test file tests wallet functionality with snapshots but there is no test covering what happens when reorg occurs during background validation phase.\r\n\r\nso what it tests\r\n- wallet state remains consistent through reorg\r\n- balance updates when coins are orphaned",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-02-08T21:23:58Z",
      "updated_at": "2026-02-16T21:10:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34535",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 488,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3290639518,
      "number": 34600,
      "title": "security: Replace memset with memory_cleanse for sensitive data clearing",
      "body": "memset calls used to clear sensitive cryptographic material can be optimized away by the compiler as \"dead stores\" when the buffer is not used afterward (e.g., before return or in destructors).\r\n\r\nReplace with memory_cleanse() which uses memory barriers to prevent this optimization, ensuring secrets are actually cleared from memory.\r\n\r\nAffected locations:\r\n- key.cpp: Secret key buffer after failed ec_seckey_import_der validation\r\n- aes.cpp: AES-256 key schedules and IVs in destructors\r\n\r\nThis prevents potential key material leakage in memory after use.\r\n\r\nFix: https://github.com/bitcoin/bitcoin/issues/31744\r\n\r\n",
      "state": "closed",
      "user": "embetrix",
      "created_at": "2026-02-16T16:10:37Z",
      "updated_at": "2026-02-16T17:14:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34600",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 691,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2594396603,
      "number": 32757,
      "title": "net: Fix Discover() not running when using -bind=0.0.0.0:port",
      "body": "  This PR fixes two related issues with address discovery when using explicit bind addresses in Bitcoin Core:\r\n\r\n  -  #31293\r\n  -  #31336\r\n\r\nWhen using `-bind=0.0.0.0:port` (or `-bind=::`), the `Discover()` function was not being executed because the code only checked the `bind_on_any` flag. This led to two problems:\r\n- The node would not discover its own local addresses if an explicit \"any\" bind was used.\r\n- The functional test `feature_bind_port_discover.py` would fail, as it expects local addresses to be discovered in these cases.\r\n\r\nThis PR:\r\n1. Checks both `bind_on_any` and any bind addresses using `IsBindAny()`\r\n   Ensures `Discover()` runs when binding to 0.0.0.0 or ::, even if specified explicitly.\r\n2. Ensures correct address discovery\r\n   The node will now discover its own addresses when using explicit \"any\" binds, matching user expectations and fixing the test.\r\n3. Maintains backward compatibility\r\n   The semantic meaning of `bind_on_any` is preserved as defined in `net.h`:  \r\n   > \"True if the user did not specify -bind= or -whitebind= and thus we should bind on 0.0.0.0 (IPv4) and :: (IPv6)\"\r\n4. Updates the test to use dynamic ports\r\n   The functional test `feature_bind_port_discover.py` is updated to use dynamic ports instead of hardcoded ones, improving reliability.\r\n\r\nReferences\r\n\r\n- Implementation follows the approach proposed in my [review comment on #31492](https://github.com/bitcoin/bitcoin/pull/31492#issuecomment-2941773645).\r\n\r\nCloses #31293\r\n\r\nThe #31336 has the overall test failure and requires both this PR and #33362 to be fully resolved.\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-06-16T04:28:44Z",
      "updated_at": "2026-02-16T16:24:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32757",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1651,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2724706971,
      "number": 33145,
      "title": "CI: silent merge check",
      "body": "With the upcoming potential migration to cirrus runners (#32989) we need a way to periodically check for a silent merge conflict. Cirrus CI currently does this every week.\r\n\r\nThis is part of a proposal that will look for a label on a PR as a trigger to run the lint and get_previous_releases test. This label could be added manually or better, Drahtbot could periodically add (and remove) this label.\r\n\r\nAn example of this running on a test org: https://github.com/testing-cirrus-runners/bitcoin/actions/runs/16780213204/job/47516540034",
      "state": "open",
      "user": "m3dwards",
      "created_at": "2025-08-06T14:53:08Z",
      "updated_at": "2026-02-16T16:21:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33145",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 559,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2940741002,
      "number": 33689,
      "title": "http: replace WorkQueue and single threads handling for ThreadPool",
      "body": "This has been a recent discovery; the general thread pool class created for #26966, cleanly \r\nintegrates into the HTTP server. It simplifies init, shutdown and requests execution logic.\r\nReplacing code that was never unit tested for code that is properly unit and fuzz tested.\r\nAlthough our functional test framework extensively uses this RPC interface (that’s how\r\nwe’ve been ensuring its correct behavior so far - which is not the best).\r\n\r\nThis clearly separates the responsibilities:\r\nThe HTTP server now focuses solely on receiving and dispatching requests, while ThreadPool handles\r\nconcurrency, queuing, and execution.\r\n\r\nThis will also allows us to experiment with further performance improvements at the task queuing and\r\nexecution level, such as a lock-free structure or task prioritization or any other implementation detail\r\nlike coroutines in the future, without having to deal with HTTP code that lives on a different layer.\r\n\r\nNote:\r\nThe rationale behind introducing the ThreadPool first is to be able to easily cherry-pick it across different\r\nworking paths. Some of the ones that are benefited from it are #26966 for the parallelization of the indexes\r\ninitial sync, #31132 for the parallelization of the inputs fetching procedure, #32061 for the libevent replacement,\r\nthe kernel API #30595 (https://github.com/bitcoin/bitcoin/pull/30595#discussion_r2413702370) to avoid blocking validation among others use cases not publicly available.\r\n\r\nNote 2:\r\nI could have created a wrapper around the existing code and replaced the `WorkQueue` in a subsequent\r\ncommit, but it didn’t seem worth the extra commits and review effort. The `ThreadPool` implements\r\nessentially the same functionality in a more modern and cleaner way.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2025-10-23T14:36:44Z",
      "updated_at": "2026-02-16T15:47:05Z",
      "merged_at": "2026-02-11T17:04:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33689",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 65530907,
      "number": 7829,
      "title": "Globals: TODO: Experiment: Kill \"Params()\"",
      "body": "Dependencies (and list of things TODO):\r\n\r\n~~\\- [ ] Globals: Explicitly pass const CChainParams& to UpdateTip() #7876~~\r\n\r\n~~\\- [ ] Globals: DisconnectTip() requires the full CChainParams, not just Consensus::Params (depends on #7876)~~\r\n\r\n~~\\- [ ] Make functions in validation.cpp static: #10227~~\r\n\r\n- [X] Trivial: Globals: Explicitly pass const CChainParams& to ProcessMessage() #7828\r\n- [X] Explicitly pass CChainParams& to DisconnectTip() #7916 (does UpdateTip() DisconnectTip() and InvalidateBlock() at once)\r\n- [X] Consensus: Decouple from chainparams.o and timedata.o #8077 [CheckBlockHeader, CheckBlock, ContextualCheckBlockHeader]\r\n- [X] Trivial: pass Consensus::Params& instead of CChainParams& in ContextualCheckBlock #8413 \r\n- [X] Chainparams: Trivial: In AppInit2(), s/Params()/chainparams/ #8975\r\n- [x] Trivial: Explicitly pass const CChainParams& to LoadBlockIndexDB() #9013\r\n- [ ] pass Consensus::Params& to functions in validation.cpp and make them static #10201\r\n\r\n- [ ] Globals: Pass Consensus::Params through CBlockTreeDB::LoadBlockIndexGuts() #9176 [0.13-chainparams-loadblockindexguts]\r\n- [ ] ConnectBlock()\r\n- [ ] FlushStateToDisk()\r\n- [ ] LoadMempool()\r\n- [ ] ProcessMessages() [not trivial]\r\n- [ ] SendMessages() [not trivial]\r\n- [ ] IsInitialBlockDownload() (disruptive)\r\n- [ ] Explicitly pass const CChainParams and Consensus::Params() in net.cpp (several functions)\r\n\r\n\"I opened this PR so that newcomers to the Bitcoin Core project could make simple changes to get familiar with contributing to Bitcoin Core. I have marked a number of TODO comments in the source code of this pull request. The changes listed here are not critical to the project but they are good introductory material. Each TODO is relatively simple, and more experienced developers are busy doing other tasks, making this an excellent chance for you to get feedback from me on basic contributions to Bitcoin Core. Hopefully this will help you streamline submissions to Core, please let me know how I can help.\"\r\n\r\nWe can slowly turn the global pCurrentParams (hidden behind the function \"Params()\" for no good reason) into a CChainParams& parameter wherever is needed. This will take very long and I won't be done by one single person. I'm pretty convinced that everybody agrees with this in general, so it should be relatively easy to get your based-on-this-PR merged. But I'm here, just ask.\r\n\r\nYou may be interested in this PR because:\r\n\r\n1) You are a developer, but you're not familiar with git (or mercurial or similar), or you are intimidated about contributing to Bitcoin Core for whatever reason. I've done it. I'm trying to be here to show you you can too (without coma between 2 \"yous\", if that's allowed in enligsh).\r\n2) You are interested in my PROMISES*\r\n3) You just want to get one commit merged in github/bitcoin/bitcoin because you have an interview in the evening, I don't care if you help me.\r\n4) rustyrussell told me nobody would ever read the forth point in a numbered list.\r\n\r\nWhat would you have to do:\r\n\r\nSimple: force me to remove TODO lines from this PR, one function at a time if possible.\r\n\r\nPROMISES:\r\n\r\nIf you force me to replace any TODO line in this PR, and you're open for nits in your own PR, I promise:\r\n- I will review your PR and nack soon or nit until I can give a no-test-needed ACK (or an utACK [the former is better]).\r\n- Please ping me on this PR, or on your own for anything related to this.\r\n\r\nOnce a month (at least):\r\n- collect nits and solve them\r\n- I will incorporate open PRs that remove TODOs from this mission.\r\n- I will rebase anything that's needed if the maintainer can't do it from my base to my-next-month-base, every month\r\n- I will try to attract more review to your PR. \r\n- You will just need patience some times.\r\n\r\n@laanwj please, take this as an open issue that is going to last for long. Just with code [but, still, never to merge no matter how much I change it].\r\n\r\nContinues #6173 #6163 #6024 (closed) #5054 and friends.\r\n",
      "state": "closed",
      "user": "jtimon",
      "created_at": "2016-04-06T20:29:53Z",
      "updated_at": "2026-02-16T13:56:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/7829",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 3,
        "text_length": 4028,
        "has_nack": true,
        "has_ack": false
      }
    },
    {
      "id": 3273321979,
      "number": 34567,
      "title": "test: Add package RBF test with deduplicated parent",
      "body": "This PR adds a unit test scenario to `txpackage_tests.cpp` covering a specific edge case:\r\n\"Package RBF with a deduplicated parent\".\r\n\r\nThe test simulates a package {Parent, Child} where:\r\n1. The Parent transaction is already in the mempool (result: `MEMPOOL_ENTRY`).\r\n2. The Child transaction conflicts with another in-mempool transaction.\r\n3. The Child pays sufficient fees to effect RBF.\r\n\r\nThis ensures that the package validation logic correctly handles RBF calculations for the child even when the parent is deduplicated and not re-validated.",
      "state": "open",
      "user": "HassanFleyah",
      "created_at": "2026-02-11T20:02:48Z",
      "updated_at": "2026-02-16T12:29:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34567",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 600,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1185011431,
      "number": 26812,
      "title": "test: add end-to-end tests for CConnman and PeerManager",
      "body": "Add unit tests that write data to a mocked socket and inspect what CConnman/PeerManager have written back to the socket, or check the internal state to verify that the behavior is as expected.\r\n\r\nThis is now possible, after most of https://github.com/bitcoin/bitcoin/pull/21878 has been merged - we don't do any syscalls (e.g. `connect()`, `recv()`) from the high level code and using a mocked socket allows testing the entire networking stack without opening actual network connections.",
      "state": "open",
      "user": "vasild",
      "created_at": "2023-01-04T14:39:37Z",
      "updated_at": "2026-02-16T11:42:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26812",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 543,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3287029755,
      "number": 34594,
      "title": "fix flaky zmq test that randomly fails on recv",
      "body": "This test kept failing on me randomly turns out recv_multipart() sometimes hits a timing issue where the message isn't ready yet and throws zmq.error.Again.\r\n\r\nSwitched to using wait_until_helper_internal() which is what other tests do for this kind of thing. Uses DONTWAIT and retries properly instead of just hoping the message is there.\r\n\r\nShould stop the random CI failures.Fixes https://github.com/bitcoin/bitcoin/issues/34189",
      "state": "closed",
      "user": "Hijanhv",
      "created_at": "2026-02-15T15:02:02Z",
      "updated_at": "2026-02-16T11:01:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34594",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 478,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3287374977,
      "number": 34595,
      "title": "wallet/rpc/backup: allow importprunedfunds to import spending txs (#3…",
      "body": "…4584)\r\n\r\nCurrently, importprunedfunds only imports transactions that credit wallet addresses.\r\nThis PR allows spending transactions (IsFromMe) to be imported as well.\r\n\r\nFixes #34584\r\n",
      "state": "closed",
      "user": "bhavyagupta999",
      "created_at": "2026-02-15T18:58:20Z",
      "updated_at": "2026-02-16T10:58:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34595",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 256,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3282013742,
      "number": 34585,
      "title": "Fix race condition in mempool fee estimation during block reorg",
      "body": "Fixes #34584\r\n\r\nThis commit addresses a critical race condition between mempool trimming (LimitMempoolSize) and transaction validation that could lead to stale UTXO cache usage and consensus divergence.\r\n\r\nChanges:\r\n- Add cache flush after LimitMempoolSize() in MaybeUpdateMempoolForReorg()\r\n- Reset m_view backend after CleanupTemporaryCoins() in single tx acceptance\r\n- Add explicit CleanupTemporaryCoins() after package mempool trimming\r\n- Ensure proper backend reset in CleanupTemporaryCoins() itself\r\n\r\nThe fix ensures that after any mempool state change, the cached coin view is properly synchronized to prevent validation using stale data. This prevents false 'mempool full' rejections and maintains mempool consistency across nodes during chain reorganizations.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "vishalharkal15",
      "created_at": "2026-02-13T18:22:05Z",
      "updated_at": "2026-02-16T10:57:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34585",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2899,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3289444871,
      "number": 34596,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "haeli05",
      "created_at": "2026-02-16T10:55:16Z",
      "updated_at": "2026-02-16T10:55:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34596",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2598874149,
      "number": 32764,
      "title": "guix: Build for macOS using Clang only",
      "body": "This PR makes macOS builds Clang-only by switching the build compiler in depends to `clang` + `libc++`.\r\n\r\nSee: https://github.com/bitcoin/bitcoin/issues/30206.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-06-17T13:39:41Z",
      "updated_at": "2026-02-16T10:54:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32764",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 199,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3282496156,
      "number": 34586,
      "title": "txorphanage: replace boost::multi_index with dual std::map",
      "body": "### Motivation\r\n\r\n`TxOrphanage` needs to look up orphan announcements in two different orders — by `(wtxid, peer)` for transaction lookups, and by `(peer, reconsider, sequence)` for per-peer iteration and eviction. \r\n\r\nCurrently this is done with `boost::multi_index_container`, one of the last remaining Boost uses in the codebase. This PR removes it in favor of standard library containers, contributing to the ongoing effort to eliminate the Boost dependency from bitcoind.\r\n\r\n### Approach\r\n\r\nReplace the `boost::multi_index_container` with a hand-rolled `AnnouncementIndex` class wrapping two `std::map` containers cross-linked by iterators:\r\n\r\n- **`m_by_wtxid`** `std::map<(Wtxid, NodeId), Announcement>` — owns the data\r\n- **`m_by_peer`** `std::map<(NodeId, bool, Seq), WtxidMap::iterator>` — stores cross-references, no data duplication\r\n\r\n`std::map` iterator stability guarantees that cross-references remain valid across insertions and erasures of other elements. All mutations go through `AnnouncementIndex` member functions (`Insert`/`Erase`/`SetReconsider`) to keep both indices in sync, with `Assume()` assertions verifying every mutation.\r\n\r\nNo behavior change. \r\n\r\n### Operation mapping\r\n\r\n| Operation | Before (boost) | After (AnnouncementIndex) |\r\n|---|---|---|\r\n| **Insert** | `m_orphans.get<ByWtxid>().emplace(tx, peer, seq)` | `m_orphans.Insert(tx, peer, seq)` |\r\n| **Erase** | `m_orphans.get<Tag>().erase(it)` | `m_orphans.Erase(it)` (overloaded) |\r\n| **Modify reconsider** | `index.modify(it, [](auto& a){ a.m_reconsider = val; })` | `m_orphans.SetReconsider(it, val)` |\r\n| **Project peer→wtxid** | `m_orphans.project<ByWtxid>(peer_it)` | `m_orphans.ToWtxid(peer_it)` |\r\n| **Access field** | `it->m_tx` | `Ann(it).m_tx` |\r\n",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2026-02-13T20:16:42Z",
      "updated_at": "2026-02-16T10:31:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34586",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1681972231,
      "number": 29256,
      "title": "log, refactor: Allow log macros to accept context arguments",
      "body": "Allow `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` macros to accept context arguments to provide more information in log messages and more control over logging to callers.\r\n\r\nThis functionality is used in followup PRs:\r\n\r\n- [#30342](https://github.com/bitcoin/bitcoin/pull/30342) - To let libbitcoinkernel send output to specfic `BCLog::Logger` instances instead of a global instance, so output can be disambiguated and applications can have more control over logging.\r\n\r\n- [#30343](https://github.com/bitcoin/bitcoin/pull/30343) - To replace custom `WalletLogPrintf` calls with standard logging calls that automatically include wallet names and don't log everything at info level.\r\n\r\nThis PR does not change behavior of current log prints or require them to be updated. It includes tests and documentation covering the new functionality.\r\n\r\n---\r\n\r\nNote: Originally this PR also removed some restrictions around passing category constants to log macros to try to make them more consistent, but these changes were too controversial and have been dropped.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-01-16T22:09:35Z",
      "updated_at": "2026-02-16T09:57:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29256",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2086428775,
      "number": 30951,
      "title": "net: option to disallow v1 connection on ipv4 and ipv6 peers",
      "body": "resolves #29618.\r\n\r\nThis PR adds a config flag option `-v2onlyclearnet` which disallows outbound v1 connections on ipv4 and ipv6 networks since they're unencrypted. outbound v1 connections are still possible from tor/i2p/cjdns peers since they're encrypted networks.\r\n\r\n- v1 outbound connections to peers are not attempted\r\n- v1 reconnections are not attempted (if peer is falsely advertised as v2 peer and we attempt a v2 connection but it fails, we do not attempt a v1 reconnection when `-v2onlyclearnet` is switched on)\r\n\r\nCurrently 70% of reachable nodes in network supporting v2 (according to https://21.ninja/reachable-nodes/node-service-share/ and https://bitnodes.io/nodes). Also found 81% of addresses supporting v2 in the addrman of nodes I checked - personal node and the nodes in [peer.observer](https://peer.observer/addrman/alice). (You can use [this branch ](https://github.com/stratospher/bitcoin/commits/addrinfo_service_display/)to check the % of v2 addresses in a node's addrman.)",
      "state": "open",
      "user": "stratospher",
      "created_at": "2024-09-23T12:23:48Z",
      "updated_at": "2026-02-16T07:29:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30951",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1060,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2989452954,
      "number": 33822,
      "title": "kernel: Add block header support and validation",
      "body": "Adds a new `btck_BlockHeader` type and associated functions to create, access, and validate block headers. Block headers will have their own type (`btck_BlockHeader`) that can be created from raw data, copied, and queried for all the standard header fields (hash, prev hash, timestamp, bits, version, nonce). We can also extract headers from full blocks or block tree entries.\r\n\r\nThe first commit here refactors `BlockValidationState` to use Handle/View pattern so external code can own them, which is required for the header processing in the API.\r\n\r\n #### New Block Header API\r\n\r\n  - **`btck_BlockHeader` type**: Opaque handle for block headers\r\n  - **Header methods**:\r\n    - `btck_block_header_create()`: Create header from 80-byte serialized data\r\n    - `btck_block_header_copy()`: Copy block headers\r\n    - `btck_block_header_destroy()`: Destroy header object\r\n    - `btck_block_header_get_hash()`: Calculate block hash\r\n    - `btck_block_header_get_prev_hash()`: Get previous block hash\r\n    - `btck_block_header_get_timestamp()`: Get block timestamp\r\n    - `btck_block_header_get_bits()`: Get difficulty target (compact format)\r\n    - `btck_block_header_get_version()`: Get block version\r\n    - `btck_block_header_get_nonce()`: Get proof-of-work nonce\r\n    \r\n    - `btck_block_get_header()`: Extract header from a full block\r\n    - `btck_block_tree_entry_get_block_header()`: Get header associated with a block tree entry\r\n  \r\n  - **Header Processing Methods:**\r\n    - **`btck_chainstate_manager_process_block_header()`**: Validates and processes a block header without requiring the full block. This performs proof-of-work verification, timestamp validation, and updates the internal chain state.\r\n    - **`btck_chainstate_manager_get_best_entry()`**: Returns the block tree entry with the most cumulative proof-of-work.\r\n\r\nWhy `btck_chainstate_manager_get_best_entry()` is included alongside header validation? Just as we have logic to get the tip for block validation (so you can request more blocks extending your best from your peers), we need the equivalent for header validation. To make header validation worthwhile, knowing what the best current header is seems useful—it tells you what headers to request next from peers.\r\n\r\n\r\n\r\n  ### Testing\r\n\r\n  Added tests in `test_kernel.cpp` that cover creating headers from raw data, extracting all header fields, and processing headers through the chainstate manager.\r\n  \r\n  CC sedited",
      "state": "closed",
      "user": "yuvicc",
      "created_at": "2025-11-07T17:16:01Z",
      "updated_at": "2026-02-16T06:27:01Z",
      "merged_at": "2026-01-23T13:04:11Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33822",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2492,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2309959380,
      "number": 31774,
      "title": "crypto: Use secure_allocator for `AES256_ctx`",
      "body": "Fixes #31744 \r\n\r\nReuse `secure_allocator` for `AES256_ctx` in the aes 256 encrypters and decrypters and the `iv` of `AES256CBC` encrypters and decrypters. These classes are relevant to `CCrypter`, used for encrypting wallets, and my understanding is that if an attacker knows some or all of the contents of these data structures (`AES256_ctx` & `iv`) they might be able to decrypt a user's wallet.\r\n\r\n Presently the `secure_allocator` tries to protect sensitive data with `mlock()` on POSIX systems and `VirtualLock()` on Windows to prevent memory being paged to disk, and by zero'ing out memory contents on deallocation with `memory_cleanse()` which is similar to `OPENSSL_cleanse()` by scaring compilers away from optimizing `memset` calls on non-Windows systems, and using `SecureZeroMemory()` on Windows.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-01-31T20:10:56Z",
      "updated_at": "2026-02-16T04:24:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31774",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 854,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2901201712,
      "number": 33585,
      "title": "cmake: Use builtin support for .manifest files",
      "body": "Remove some redundant logic from the CMake code:\r\n\r\n* The `WIN32_EXECUTABLE` target property only has an effect when building for `WIN32`. Checking `WIN32` is redundant.\r\n* CMake has builtin support for `.rc` and `.manifest` files. Both may be added to sources unconditionally. They only have an effect when building for `WIN32`.\r\n",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-10-09T15:44:53Z",
      "updated_at": "2026-02-15T15:45:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33585",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 378,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2929620815,
      "number": 33661,
      "title": "test: Add test on skip heights in CBlockIndex",
      "body": "The skip height values, used by `CBlockIndex::BuildSkip()` and `GetSkipHeight()` are not tested directly and not well documented. Indirect tests, through `GetAncestor()` exist in `skiplist_tests.cpp`. (This was noticed while reviewing #33515, recently merged.)\r\n\r\nThe motivation is to document the skip value computation through a test.\r\n\r\nThe first commit adds a test for the number of steps needed for an ancestor search, the number should be much lower than the linear distance.\r\n\r\nThe next commits add low-level tests to the `GetSkipHeight()` method. The previously internal method is exposed first.",
      "state": "open",
      "user": "optout21",
      "created_at": "2025-10-20T12:08:37Z",
      "updated_at": "2026-02-15T15:28:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33661",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 649,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3276622702,
      "number": 34574,
      "title": "fix intermittent failure in interface_zmq.py",
      "body": "The `interface_zmq.py` test has been flaky due to a race condition - sometimes ZMQ messages aren't available immediately when we try to read them.\r\n\r\nThis adds a simple retry mechanism: if the message isn't ready, we'll retry up to 5 times with a 0.1s delay between attempts. Instead of crashing on `zmq.error.Again` exceptions, the test now handles them gracefully.\r\n\r\nFixes #34189\r\n",
      "state": "closed",
      "user": "Hijanhv",
      "created_at": "2026-02-12T14:52:00Z",
      "updated_at": "2026-02-15T15:05:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34574",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 429,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3226540911,
      "number": 34456,
      "title": "p2p: assign separate network keys to outbound onion connections",
      "body": "This PR is inspired by sipa's suggestion in https://github.com/bitcoin/bitcoin/pull/33464#issuecomment-3356266112.\r\n\r\nOutbound onion connections use distinct Tor circuits and appear unrelated externally. Sharing a network_id might allow correlation via addr caching behaviour (e.g., `GetAddresses()` responses), enabling an observer to link apparently distinct connections.\r\n\r\nChanges proposed here assign each outbound onion connection a unique, deterministic network_id based on its destination address.\r\n\r\nUnchanged:\r\n- Inbound onion connections continue grouping (already linked through the same hidden service)\r\n- Clearnet outbound connections continue grouping (already linked through the same source IP)",
      "state": "closed",
      "user": "frankomosh",
      "created_at": "2026-01-30T06:30:05Z",
      "updated_at": "2026-02-15T12:34:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34456",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 774,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3223764653,
      "number": 34447,
      "title": "doc: clarify pruning information insetup documentation",
      "body": "This PR improves the readability of the setup documentation by clarifying the explanation of pruning.\r\n\r\nIt is intended to help beginners, especially users running Bitcoin Core on Linux in a virtual machine (e.g. VirtualBox). The changes clarify how pruning works, including related concepts such as dbcache and connection settings, which are often confusing for new users syncing the node for learning or basic usage.\r\n\r\nNo functional changes.\r\n\r\n\r\n",
      "state": "closed",
      "user": "shivanshshri",
      "created_at": "2026-01-29T14:41:32Z",
      "updated_at": "2026-02-15T09:17:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34447",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 505,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133089501,
      "number": 34162,
      "title": "net: Avoid undershooting in GetAddressesUnsafe",
      "body": "This is demonstrating an alternative approach to #33663. The author didn't seem to like by suggestion so I am putting it here to be considered by reviewers. I personally prefer this approach due to it's simplicity.\r\n\r\n`GetAddressesUnsafe` filters banned and discouraged addresses if those exist. If addresses are filtered the returned list of addresses can be shorter than originally requested because the list isn't backfilled with more valid addresses. These results end up in `GETADDR` responses as well as the `getnodeaddresses` RPC.\r\n\r\nFix this by requesting all available addresses and filter them, then only trim them to the requested `max_addresses` afterwards. Also adds a functional test which checks the new behavior via `getnodeaddresses` RPC.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-28T17:01:53Z",
      "updated_at": "2026-02-15T05:54:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34162",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 802,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3243034362,
      "number": 34495,
      "title": "Replace boost signals with minimal compatible implementation",
      "body": "This drops our dependency on `boost::signals2`, leaving `boost::multi_index` as the only remaining boost dependency for bitcoind.\r\n\r\n`boost::signals2` is a complex beast, but we only use a small portion of it. Namely: it's a way for multiple subscribers to connect to the same event, and the ability to later disconnect individual subscribers from that event.\r\n\r\n`btcsignals` adheres to the subset of the `boost::signals2` API that we currently use, and thus is a drop-in replacement. Rather than implementing a complex `slot` tracking class that we never used anyway (and which was much more useful in the days before std::function existed), callbacks are simply wrapped directly in `std::function`s.\r\n\r\nThe new tests work with either `boost::signals2` or the new `btcsignals` implementation. Reviewers can verify\r\nfunctional equivalency by running the tests in the commit that introduces them against `boost::signals2`, then again with `btcsignals`.\r\n\r\nThe majority of the commits in this PR are preparation and cleanup. Once `boost::signals2` is no longer needed, it is removed from depends. Additionally, a few CMake targets no longer need boost includes as they were previously only required for signals.\r\n\r\nI think this is actually pretty straightforward to review. I kept things simple, including keeping types unmovable/uncopyable where possible rather than trying to define those semantics. In doing so, the new implementation has even fewer type requirements than boost, which I believe is due to a boost bug. I've opened a PR upstream for that to attempt to maintain parity between the implementations.\r\n\r\nSee individual commits for more details.\r\n\r\nCloses #26442.",
      "state": "open",
      "user": "theuni",
      "created_at": "2026-02-03T21:27:43Z",
      "updated_at": "2026-02-14T17:58:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34495",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1736,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3254836472,
      "number": 34525,
      "title": "Release: Prepare \"Open Transifex translations for v31.0\" step",
      "body": "This PR follows our [Release Process](https://github.com/bitcoin/bitcoin/blob/46e1288df2b4021969c50351e27175b4fad20f13/doc/release-process.md).\r\n\r\nIt is required to open Transifex translations for v31.0, as scheduled in https://github.com/bitcoin/bitcoin/issues/33607.\r\n\r\nFor reference, see the previous similar PR: https://github.com/bitcoin/bitcoin/pull/33152.\r\n\r\n**Note for reviewers:**\r\n\r\nTo reproduce the diff in the last commit, run:\r\n```\r\ncmake --preset dev-mode\r\ncmake --build build_dev_mode --target translate\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-02-06T13:50:56Z",
      "updated_at": "2026-02-14T17:07:10Z",
      "merged_at": "2026-02-07T13:08:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34525",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 585,
        "has_nack": false,
        "has_ack": false
      }
    }
  ],
  "issues": [
    {
      "id": 3972277056,
      "number": 34645,
      "title": "oss-fuzz: coins_view_overlay: ASSERT: m_dirty_count == 0",
      "body": "https://issues.oss-fuzz.com/issues/486389268\n```bash\nCommand: /mnt/scratch0/clusterfuzz/resources/platform/linux/unshare -c -n /mnt/scratch0/clusterfuzz/bot/builds/clusterfuzz-builds_bitcoin-core_83aef6625aaeafa301867de74608b320f3c923fe/revisions/coins_view_overlay -rss_limit_mb=2560 -timeout=60 -runs=100 /mnt/scratch0/clusterfuzz/bot/inputs/fuzzer-testcases/crash-e84f31ab73616c1a282fb40ce4e33abd394fb911\n\tTime ran: 0.49608683586120605\n\t\n\tINFO: Running with entropic power schedule (0xFF, 100).\n\tINFO: Seed: 360939801\n\tINFO: Loaded 1 modules   (603691 inline 8-bit counters): 603691 [0x55a793000eb0, 0x55a7930944db),\n\tINFO: Loaded 1 PC tables (603691 PCs): 603691 [0x55a7930944e0,0x55a7939ca790),\n\t/mnt/scratch0/clusterfuzz/bot/builds/clusterfuzz-builds_bitcoin-core_83aef6625aaeafa301867de74608b320f3c923fe/revisions/coins_view_overlay: Running 1 inputs 100 time(s) each.\n\tRunning: /mnt/scratch0/clusterfuzz/bot/inputs/fuzzer-testcases/crash-e84f31ab73616c1a282fb40ce4e33abd394fb911\n\tcoins.cpp:283 void CCoinsViewCache::Flush(bool): Assertion `m_dirty_count == 0` failed.\n\t==241== ERROR: libFuzzer: deadly signal\n\t    #0 0x55a7909aa551 in __sanitizer_print_stack_trace /src/llvm-project/compiler-rt/lib/asan/asan_stack.cpp:87:3\n\t    #1 0x55a79089bff8 in fuzzer::PrintStackTrace() /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerUtil.cpp:210:5\n\t    #2 0x55a79087eb45 in fuzzer::Fuzzer::CrashCallback() /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerLoop.cpp:231:3\n\t    #3 0x7f08d19c041f in libpthread.so.0\n\t    #4 0x7f08d17b400a in __libc_signal_restore_set /build/glibc-B3wQXB/glibc-2.31/sysdeps/unix/sysv/linux/internal-signals.h:86:3\n\t    #5 0x7f08d17b400a in raise /build/glibc-B3wQXB/glibc-2.31/sysdeps/unix/sysv/linux/raise.c:48:3\n\t    #6 0x7f08d1793858 in abort /build/glibc-B3wQXB/glibc-2.31/stdlib/abort.c:79:7\n\t    #7 0x55a7915cc5e2 in assertion_fail(std::__1::source_location const&, std::__1::basic_string_view<char, std::__1::char_traits<char>>) [bitcoin-core/src/util/check.cpp:41](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/util/check.cpp#L41):5\n\t    #8 0x55a79128c7ea in inline_assertion_check<false, bool> [bitcoin-core/src/util/check.h:90](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/util/check.h#L90):13\n\t    #9 0x55a79128c7ea in CCoinsViewCache::Flush(bool) [bitcoin-core/src/coins.cpp:283](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/coins.cpp#L283):5\n\t    #10 0x55a790c4dea7 in operator() [bitcoin-core/src/test/fuzz/coins_view.cpp:135](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/coins_view.cpp#L135):34\n\t    #11 0x55a790c4dea7 in CallOneOf<(lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:116:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:134:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:137:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:140:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:146:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:160:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:164:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:167:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:173:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:181:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:189:13), (lambda at /src/bitcoin-core/src/test/fuzz/coins_view.cpp:197:13)> [bitcoin-core/src/test/fuzz/util.h:42](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/util.h#L42):27\n\t    #12 0x55a790c4dea7 in TestCoinsView(FuzzedDataProvider&, CCoinsViewCache&, CCoinsView&, bool) [bitcoin-core/src/test/fuzz/coins_view.cpp:114](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/coins_view.cpp#L114):9\n\t    #13 0x55a790c4c486 in coins_view_overlay_fuzz_target(std::__1::span<unsigned char const, 18446744073709551615ul>) [bitcoin-core/src/test/fuzz/coins_view.cpp:404](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/coins_view.cpp#L404):5\n\t    #14 0x55a7912282f4 in operator() /usr/local/include/c++/v1/__functional/function.h:274:12\n\t    #15 0x55a7912282f4 in operator() /usr/local/include/c++/v1/__functional/function.h:772:10\n\t    #16 0x55a7912282f4 in test_one_input [bitcoin-core/src/test/fuzz/fuzz.cpp:88](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/fuzz.cpp#L88):5\n\t    #17 0x55a7912282f4 in LLVMFuzzerTestOneInput [bitcoin-core/src/test/fuzz/fuzz.cpp:216](https://github.com/bitcoin/bitcoin/blob/ee2065fdeaca91caaad9eb7daeeffe939441d804/src/test/fuzz/fuzz.cpp#L216):5\n\t    #18 0x55a79088022d in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerLoop.cpp:619:13\n\t    #19 0x55a790869f42 in fuzzer::RunOneTest(fuzzer::Fuzzer*, char const*, unsigned long) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerDriver.cpp:329:6\n\t    #20 0x55a79086fe10 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerDriver.cpp:865:9\n\t    #21 0x55a79089c9a2 in main /src/llvm-project/compiler-rt/lib/fuzzer/FuzzerMain.cpp:20:10\n\t    #22 0x7f08d1795082 in __libc_start_main /build/glibc-B3wQXB/glibc-2.31/csu/libc-start.c:308:16\n\t    #23 0x55a79086302d in _start\n\t\n\tNOTE: libFuzzer has rudimentary signal handlers.\n\t      Combine libFuzzer with AddressSanitizer or similar for better crash reports.\n\tSUMMARY: libFuzzer: deadly signal\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-21T16:07:31Z",
      "updated_at": "2026-02-21T16:08:38Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34645",
      "labels": [],
      "comment_data": [
        {
          "id": 3939024362,
          "user": "fanquake",
          "body": "cc @andrewtoth ",
          "created_at": "2026-02-21T16:08:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 15,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5778,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3510034192,
      "number": 33607,
      "title": "Release Schedule for 31.0",
      "body": "Here is a proposed release schedule for `v31.0`, the next major release of Bitcoin Core.\nThe dates are set to target a release in early April.\n\n## 2026-02-06 :heavy_check_mark:\n- Open Transifex translations for `v31.0`\n- Soft translation string freeze (no large or non-critical string changes until release)\n- Finalize and close translations for `v29.0`\n\n## 2026-02-20 :construction:\n- Feature freeze (bug fixes only until release)\n- Translation string freeze (no more source language changes until release)\n\n## 2026-03-10 :construction:\n- Anything needed before branch-off, see https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md\n- Split off `31.x` branch from `master`\n- Start RC cycle, tag and release `v31.0rc1`\n- Start merging for `32.x` on `master` branch\n\n## 2026-04-10 :construction:\n- Tag `v31.0` (aim).\n\nIf any specific dates are a problem for you, please leave a comment.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-10-13T13:14:55Z",
      "updated_at": "2026-02-21T16:05:10Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/33607",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3910437479,
          "user": "AO-LocLab",
          "body": "The [LLM translation review](https://github.com/maflcko/b-c-gui-translations-review) is a valuable tool. Errors that made sense were fixed in the French translation.",
          "created_at": "2026-02-16T20:42:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 165,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3932987788,
          "user": "hebasto",
          "body": "> ## 2026-02-20 🚧\n> \n>    * Translation string freeze (no more source language changes until release)\n\nPlease review https://github.com/bitcoin-core/gui/pull/931.",
          "created_at": "2026-02-20T10:39:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 162,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3938917153,
          "user": "ostruvek",
          "body": "Sorry for my late reaction. Czech translation should be completed except two strings which I am not able to save after edit.",
          "created_at": "2026-02-21T14:57:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 124,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3939010103,
          "user": "Emzy",
          "body": "> Sorry for my late reaction. Czech translation should be completed except two strings which I am not able to save after edit.\n\nHave a look at the [1] [other] buttons at the top right side of Transiflex. You need to provide both translations to press the save button.",
          "created_at": "2026-02-21T15:59:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 267,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 926,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3730153407,
      "number": 34076,
      "title": "tapscript with time-locked musig2",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nTrying to import descriptor with time-locked musig fragment in tapscript returns:\n```\nerror code: -5\nerror message:\nInvalid musig() expression\n```\n\n### Expected behaviour\n\nImport should work.\n\n### Steps to reproduce\n\ntry `getdescriptorinfo` with following BIP-388 policy:\n\n`tr(musig(@0,@1,@2)/**,{and_v(v:pk(musig(@0,@1)/**),older(12960)),{and_v(v:pk(musig(@0,@2)/**),older(12960)),and_v(v:pk(musig(@1,@2)/**),older(12960))}})`\n\nwhich translates (for example) to following descriptor:\n\n```\ntr(musig([a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6,[6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG)/<0;1>/*,{and_v(v:pk(musig([6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG,[a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q)/<0;1>/*),older(12960)),{and_v(v:pk(musig([6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6)/<0;1>/*),older(12960)),and_v(v:pk(musig([a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6)/<0;1>/*),older(12960))}})\n```\n\n(imo) error is caused by the first leaf where `expr` after split is missing terminating parentheses of musig expression https://github.com/bitcoin/bitcoin/blob/2210feb4466eff1455468f0a25045fce4b89c55d/src/script/descriptor.cpp#L1844-L1847\n\nOR use below patch to add test case to musig functional tests:\n\n```\nSubject: [PATCH] test\n---\nIndex: test/functional/wallet_musig.py\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/test/functional/wallet_musig.py b/test/functional/wallet_musig.py\n--- a/test/functional/wallet_musig.py\t(revision 2210feb4466eff1455468f0a25045fce4b89c55d)\n+++ b/test/functional/wallet_musig.py\t(date 1765796643152)\n@@ -236,6 +236,7 @@\n         self.do_test(\"tr(H,{pk(musig/*), pk(same keys different musig/*)})\", \"tr($H,{pk(musig($0,$1,$2)/<0;1>/*),pk(musig($1,$2)/0/*)})\", scriptpath=True)\n         self.do_test(\"tr(musig/*,{pk(partial keys diff musig-1/*),pk(partial keys diff musig-2/*)})}\", \"tr(musig($0,$1,$2)/<3;4>/*,{pk(musig($0,$1)/<5;6>/*),pk(musig($1,$2)/7/*)})\")\n         self.do_test(\"tr(musig/*,{pk(partial keys diff musig-1/*),pk(partial keys diff musig-2/*)})} script-path\", \"tr(musig($0,$1,$2)/<3;4>/*,{pk(musig($0,$1)/<5;6>/*),pk(musig($1,$2)/7/*)})\", scriptpath=True, nosign_wallets=[0])\n+        self.do_test(\"time-locked musig\", \"tr(musig($0,$1,$2)/<0;1>/*,{and_v(v:pk(musig($0,$1)/<0;1>/*),older(12960)),{and_v(v:pk(musig($0,$2)/<0;1>/*),older(12960)),and_v(v:pk(musig($1,$2)/<0;1>/*),older(12960))}})\", scriptpath=True)\n \n \n if __name__ == '__main__':\n```\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@2210feb4466eff1455468f0a25045fce4b89c55d\n\n### Operating system and version\n\nLinux ... 6.14.0-37-generic #37~24.04.1-Ubuntu ... x86_64 x86_64 x86_64 GNU/Linux\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "scgbckbone",
      "created_at": "2025-12-15T12:14:26Z",
      "updated_at": "2026-02-21T11:19:04Z",
      "closed_at": "2026-02-21T11:19:04Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34076",
      "labels": [
        "Wallet",
        "Descriptors"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3948,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3963457530,
      "number": 34626,
      "title": "Sv2 needs a `submitBlock` IPC method",
      "body": "currently, IPC mining interface only allows broadcasting blocks via `BlockTemplate.submitSolution`\n\na Sv2 Job Declarator Server can receive solutions via [`PushSolution`](https://stratumprotocol.org/specification/06-job-declaration-protocol/#649-pushsolution-client---server) message, for which it has no corresponding `BlockTemplate` on the Bitcoin Core side\n\nin summary, we need the equivalent of a [`submitblock`](https://developer.bitcoin.org/reference/rpc/submitblock.html#submitblock) RPC\n\ncc @ryanofsky @ismaelsadeeq @Sjors ",
      "state": "open",
      "user": "plebhash",
      "created_at": "2026-02-19T15:08:04Z",
      "updated_at": "2026-02-21T09:38:30Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34626",
      "labels": [
        "Mining",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3928095640,
          "user": "Sjors",
          "body": "This should be trivial, but I would file this under nice to have, not \"need\". It would allow a client implementation without any RPC code, which is nice.\n\n",
          "created_at": "2026-02-19T15:43:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 155,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3928826054,
          "user": "plebhash",
          "body": "> This should be trivial, but I would file this under nice to have, not \"need\".\n\nwell, not having this available forces SRI to take a hybrid IPC/RPC route for full Sv2 JDS functionality, which is pretty ugly\n\nso from our standpoint, I'd lean more towards the \"need\"\n\nbut I understand there could be other priorities compared to this",
          "created_at": "2026-02-19T17:43:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 332,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3938518311,
          "user": "w0xlt",
          "body": "I’ve opened PR https://github.com/bitcoin/bitcoin/pull/34644 for this.\nI’m not very familiar with the IPC interface, but it looked straightforward. Happy to adjust if needed.",
          "created_at": "2026-02-21T09:38:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 174,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 568,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3967338664,
      "number": 34632,
      "title": "`listtransactions` does not list unconfirmed tx that spends only change outputs to a change address",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nI described this issue in a PR comment [here](https://github.com/bitcoin/bitcoin/pull/33671#issuecomment-3931638422), but @achow101 requested that I open a separate issue, stating that my problem is distinct from the one addressed by that PR.\n\nThe problem is that Bitcoin Core v30.2 has apparently forgotten about a transaction that I created, signed, and broadcast to consolidate some outputs. The outputs that I spent in the transaction are no longer listed by `listunspent`, but neither is the spending transaction listed by `listtransactions`. My transaction drew three inputs from a single wallet and sent one output back into that same wallet, but that unconfirmed incoming amount is not accounted for anywhere. `getbalance` and `getbalances` do not include the amount. Effectively, it looks as though I have simply lost money. I can retrieve the transaction by specifying its TxID to `gettransaction`, but the transaction does not appear in `listtransactions`.\n\n### Expected behaviour\n\n`listtransactions` should show all transactions involving addresses in the wallet, even if those transactions are unconfirmed, and even if they have been evicted from the local node's mempool.\n\n### Steps to reproduce\n\n1. Have three outputs, all sent to the same P2WPKH address. Mine were all sent in different transactions.\n2. Construct a transaction to consolidate the three outputs into a single output to that same address. (Yes, I know that broadcasting this transaction makes the address less quantum-resistant because its EC pubkey is now published.)\n    ```\n    $ bitcoin-tx -create in=a1b2…c3d4:0 in=b1c2…d3e4:2 in=c1d2…e3f4:1 outaddr=12.345:bc1q…etc\n    ```\n    **Note:** The amount specified in the `outaddr` argument is exactly the sum of the amounts of the three inputs.\n3. Calculate and deduct a minimal fee from the output.\n    ```\n    $ bitcoin-cli -rpcwallet=\"${wallet}\" fundrawtransaction \"${hex}\" '{\"add_inputs\":false,\"subtractFeeFromOutputs\":[0],\"fee_rate\":0.1}'\n    ```\n4. Sign the transaction using the wallet.\n    ```\n    $ bitcoin-cli -rpcwallet=\"${wallet}\" signrawtransactionwithwallet \"${hex}\"\n    ```\n5. Broadcast the signed transaction.\n    ```\n    $ bitcoin-cli sendrawtransaction \"${hex}\"\n    ```\n    **Note:** No `-rpcwallet=` argument was specified in this command.\n6. Somehow cause the transaction to be evicted from the local node's mempool.\n    ```\n    $ bitcoin-cli getrawtransaction \"${txid}\"\n    error code: -5\n    error message:\n    No such mempool transaction. Use -txindex or provide a block hash to enable blockchain transaction queries. Use gettransaction for wallet transactions.\n    ```\n7. Attempt to find the transaction in the output of `listtransactions`.\n    ```\n    $ bitcoin-cli -rpcwallet=\"${wallet}\" listtransactions '*' 10000 | jq --arg txid \"${txid}\" '.[] | select(.txid == $txid)'\n    ```\n    It's not there.\n8. Query the wallet's balance.\n    ```\n    $ bitcoin-cli -rpcwallet=\"${wallet}\" -named getbalance minconf=0 avoid_reuse=false\n    ```\n    The money is apparently missing!\n9. Query the wallet for the missing transaction.\n    ```\n    $ bitcoin-cli -rpcwallet=\"${wallet}\" -named gettransaction txid=\"${txid}\" verbose=true\n    ```\n    The wallet indeed knows about the transaction and reports `\"confirmations\": 0`, yet the transaction is not accounted for anywhere.\n\n### Relevant log output\n\nThe node's `debug.log` does include a line `AddToWallet ${txid}  new InMempool` dated when the transaction was originally broadcast. It also includes another line, dated about 18½ hours later: `Submitting wtx ${txid} to mempool for relay`. There are no other mentions of the TxID in the log.\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv30.2\n\n### Operating system and version\n\nGentoo Linux\n\n### Machine specifications\n\nLinux 6.12.58-gentoo x86_64",
      "state": "open",
      "user": "whitslack",
      "created_at": "2026-02-20T08:44:36Z",
      "updated_at": "2026-02-21T02:39:54Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34632",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3937930665,
          "user": "achow101",
          "body": "Following the instruction as written, I'm unable to reproduce this. The transaction shows up as expected in `listtransactions`.\n\nHowever, `listtransactions` does do interpretation of transactions in order to make \"logical transactions\" to avoid confusing users with various Bitcoin internals (e.g. change, multiple inputs, etc.). This includes excluding outputs that the wallet things are change. If I send to a change address, then the transaction does not show up, and I think that's the only way to make that happen.\n\nHow did you get the address you sent to? What is the output of `getaddressinfo` for the output address?\n\n***\n\nWe should probably have a `listrawtransactions` RPC that just outputs all of the transactions known to the wallet without trying to interpret things.",
          "created_at": "2026-02-21T02:06:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 780,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3937966138,
          "user": "whitslack",
          "body": "@achow101: Thank you for your efforts. The output address is in fact a change address. `getaddressinfo` reports `\"ischange\": true`, and the descriptor from which the address was derived is marked as `\"internal\": true`. The use case is merging multiple \"dusting attack\" outputs into the same address that they had dusted so as to reveal no information to the attacker (other than that the address is still being watched and the private key for it is still known). When the dusting attack is made against an address that had originally been used to receive change, then merging the dust outputs into the change output and reusing that change address means that the merged output will be going to a change address.",
          "created_at": "2026-02-21T02:32:46Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 711,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4064,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3963109090,
      "number": 34621,
      "title": "qa: Intermittent failure in `p2p_invalid_tx.py`",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/22181787708/job/64145682186:\n```\n316/455 - p2p_invalid_tx.py --v2transport failed, Duration: 3 s\n\nstdout:\n2026-02-19T12:56:47.242316Z TestFramework (INFO): PRNG seed is: 6348560005473754043\n\n2026-02-19T12:56:47.276714Z TestFramework (INFO): Initializing test directory D:\\a\\bitcoin\\bitcoin\\test_runner_₿_🏃_20260219_124134\\p2p_invalid_tx_138\n\n2026-02-19T12:56:47.695785Z TestFramework (INFO): Create a new block with an anyone-can-spend coinbase.\n\n2026-02-19T12:56:47.799348Z TestFramework (INFO): Mature the block.\n\n2026-02-19T12:56:47.976687Z TestFramework (INFO): Testing invalid transaction: OutputMissing\n\n2026-02-19T12:56:48.033913Z TestFramework (INFO): Testing invalid transaction: InputMissing\n\n2026-02-19T12:56:48.086804Z TestFramework (INFO): Testing invalid transaction: SizeTooSmall\n\n2026-02-19T12:56:48.144583Z TestFramework (INFO): Testing invalid transaction: ExtraWitness\n\n2026-02-19T12:56:48.197926Z TestFramework (INFO): Testing invalid transaction: BadInputOutpointIndex\n\n2026-02-19T12:56:48.251347Z TestFramework (INFO): Testing invalid transaction: DuplicateInput\n\n2026-02-19T12:56:48.304591Z TestFramework (INFO): Testing invalid transaction: PrevoutNullInput\n\n2026-02-19T12:56:48.357833Z TestFramework (INFO): Testing invalid transaction: NonexistentInput\n\n2026-02-19T12:56:48.410814Z TestFramework (INFO): Testing invalid transaction: SpendTooMuch\n\n2026-02-19T12:56:48.463890Z TestFramework (INFO): Testing invalid transaction: CreateNegative\n\n2026-02-19T12:56:48.516884Z TestFramework (INFO): Testing invalid transaction: CreateTooLarge\n\n2026-02-19T12:56:48.570317Z TestFramework (INFO): Testing invalid transaction: CreateSumTooLarge\n\n2026-02-19T12:56:48.623911Z TestFramework (INFO): Testing invalid transaction: InvalidOPIFConstruction\n\n2026-02-19T12:56:48.677788Z TestFramework (INFO): Testing invalid transaction: TooManySigopsPerBlock\n\n2026-02-19T12:56:48.787518Z TestFramework (INFO): Testing invalid transaction: TooManySigopsPerTransaction\n\n2026-02-19T12:56:48.851114Z TestFramework (INFO): Testing invalid transaction: NonStandardAndInvalid\n\n2026-02-19T12:56:48.904906Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_CAT\n\n2026-02-19T12:56:48.958373Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_SUBSTR\n\n2026-02-19T12:56:49.011903Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_LEFT\n\n2026-02-19T12:56:49.064977Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_RIGHT\n\n2026-02-19T12:56:49.118325Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_INVERT\n\n2026-02-19T12:56:49.171756Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_AND\n\n2026-02-19T12:56:49.224993Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_OR\n\n2026-02-19T12:56:49.277882Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_XOR\n\n2026-02-19T12:56:49.331221Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_2MUL\n\n2026-02-19T12:56:49.384629Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_2DIV\n\n2026-02-19T12:56:49.437805Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_MUL\n\n2026-02-19T12:56:49.491221Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_DIV\n\n2026-02-19T12:56:49.544034Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_MOD\n\n2026-02-19T12:56:49.596877Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_LSHIFT\n\n2026-02-19T12:56:49.649868Z TestFramework (INFO): Testing invalid transaction: DisabledOpcode_OP_RSHIFT\n\n2026-02-19T12:56:49.960918Z TestFramework (INFO): Test orphan transaction handling ... \n\n2026-02-19T12:56:49.961101Z TestFramework (INFO): Send the orphans ... \n\n2026-02-19T12:56:50.070383Z TestFramework (INFO): Send the withhold tx ... \n\n2026-02-19T12:56:50.124751Z TestFramework (INFO): Test orphanage can store more than 100 transactions\n\n2026-02-19T12:56:50.268148Z TestFramework (INFO): Test orphan with rejected parents\n\n2026-02-19T12:56:50.322356Z TestFramework (INFO): Test that a peer disconnection causes erase its transactions from the orphan pool\n\n2026-02-19T12:56:50.479576Z TestFramework (INFO): Test that a transaction in the orphan pool is included in a new tip block causes erase this transaction from the orphan pool\n\n2026-02-19T12:56:50.479848Z TestFramework (INFO): Send the orphan ... \n\n2026-02-19T12:56:50.486753Z TestFramework (INFO): Send the block that includes the previous orphan ... \n\n2026-02-19T12:56:50.498315Z TestFramework (ERROR): Unexpected exception:\n\nTraceback (most recent call last):\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\n\n    self.run_test()\n\n    ~~~~~~~~~~~~~^^\n\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/p2p_invalid_tx.py\", line 180, in run_test\n\n    with node.assert_debug_log([\"Erased 1 orphan transaction(s) included or conflicted by block\"]):\n\n         ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.14.3\\x64\\Lib\\contextlib.py\", line 148, in __exit__\n\n    next(self.gen)\n\n    ~~~~^^^^^^^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 584, in assert_debug_log\n\n    self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n                                f'not found in log:\\n\\n{join_log(log)}\\n\\n')\n\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 229, in _raise_assertion_error\n\n    raise AssertionError(self._node_msg(msg))\n\nAssertionError: [node 0] Expected message(s) ['Erased 1 orphan transaction(s) included or conflicted by block'] not found in log:\n\n\n\n - 2026-02-19T12:56:50.488541Z [msghand] [net_processing.cpp:3555] [ProcessMessage] [net] received: headers (82 bytes) peer=3\n\n - 2026-02-19T12:56:50.488619Z [msghand] [net_processing.cpp:3526] [LogBlockHeader] Saw new header hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d height=102 peer=3\n\n - 2026-02-19T12:56:50.488674Z [msghand] [net_processing.cpp:2854] [HeadersDirectFetchBlocks] [net] Requesting block 4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d from  peer=3\n\n - 2026-02-19T12:56:50.488691Z [msghand] [net.cpp:4074] [PushMessage] [net] sending getdata (37 bytes) peer=3\n\n - 2026-02-19T12:56:50.489460Z [msghand] [net.cpp:4074] [PushMessage] [net] sending sendheaders (0 bytes) peer=3\n\n - 2026-02-19T12:56:50.492975Z [msghand] [net_processing.cpp:3555] [ProcessMessage] [net] received: block (497 bytes) peer=3\n\n - 2026-02-19T12:56:50.492999Z [msghand] [net_processing.cpp:4841] [ProcessMessage] [net] received block 4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d peer=3\n\n - 2026-02-19T12:56:50.493050Z [msghand] [validationinterface.cpp:261] [NewPoWValidBlock] [validation] NewPoWValidBlock: block hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d\n\n - 2026-02-19T12:56:50.493284Z [msghand] [validation.cpp:3062] [ConnectTip] [bench]   - Using cached block\n\n - 2026-02-19T12:56:50.493305Z [msghand] [validation.cpp:3069] [ConnectTip] [bench]   - Load block from disk: 0.02ms\n\n - 2026-02-19T12:56:50.493405Z [msghand] [validation.cpp:2386] [ConnectBlock] [bench]     - Sanity checks: 0.00ms [0.00s (0.00ms/blk)]\n\n - 2026-02-19T12:56:50.493432Z [msghand] [validation.cpp:2488] [ConnectBlock] [bench]     - Fork checks: 0.03ms [0.00s (0.02ms/blk)]\n\n - 2026-02-19T12:56:50.493468Z [msghand] [validation.cpp:2603] [ConnectBlock] [bench]       - Connect 4 transactions: 0.03ms (0.008ms/tx, 0.011ms/txin) [0.00s (0.01ms/blk)]\n\n - 2026-02-19T12:56:50.493493Z [msghand] [validation.cpp:2626] [ConnectBlock] [bench]     - Verify 3 txins: 0.06ms (0.020ms/txin) [0.01s (0.03ms/blk)]\n\n - 2026-02-19T12:56:50.493639Z [msghand] [validation.cpp:2642] [ConnectBlock] [bench]     - Write undo data: 0.14ms [0.01s (0.05ms/blk)]\n\n - 2026-02-19T12:56:50.493657Z [msghand] [validation.cpp:2657] [ConnectBlock] [bench]     - Index writing: 0.02ms [0.00s (0.01ms/blk)]\n\n - 2026-02-19T12:56:50.493671Z [msghand] [validationinterface.cpp:255] [BlockChecked] [validation] BlockChecked: block hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d state=Valid\n\n - 2026-02-19T12:56:50.493688Z [msghand] [validation.cpp:3087] [ConnectTip] [bench]   - Connect total: 0.38ms [0.02s (0.11ms/blk)]\n\n - 2026-02-19T12:56:50.493704Z [msghand] [validation.cpp:3095] [ConnectTip] [bench]   - Flush: 0.02ms [0.00s (0.01ms/blk)]\n\n - 2026-02-19T12:56:50.493720Z [msghand] [validation.cpp:3105] [ConnectTip] [bench]   - Writing chainstate: 0.02ms [0.00s (0.01ms/blk)]\n\n - 2026-02-19T12:56:50.493740Z [msghand] [validationinterface.cpp:229] [MempoolTransactionsRemovedForBlock] [validation] Enqueuing MempoolTransactionsRemovedForBlock: block height=102 txs removed=1\n\n - 2026-02-19T12:56:50.493790Z [msghand] [validation.cpp:2873] [UpdateTipLog] UpdateTip: new best=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d height=102 version=0x00000004 log2_work=7.686501 tx=106 date='2026-02-19T13:06:50Z' progress=1.000000 cache=0.3MiB(105txo)\n\n - 2026-02-19T12:56:50.493810Z [msghand] [validation.cpp:3122] [ConnectTip] [bench]   - Connect postprocess: 0.09ms [0.01s (0.05ms/blk)]\n\n - 2026-02-19T12:56:50.493825Z [msghand] [validation.cpp:3126] [ConnectTip] [bench] - Connect block: 0.52ms [0.04s (0.17ms/blk)]\n\n - 2026-02-19T12:56:50.493836Z [msghand] [txmempool.cpp:435] [check] [mempool] Checking mempool with 2 transactions and 2 inputs\n\n - 2026-02-19T12:56:50.493867Z [msghand] [validationinterface.cpp:219] [BlockConnected] [validation] Enqueuing BlockConnected: block hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d block height=102\n\n - 2026-02-19T12:56:50.493888Z [msghand] [validationinterface.cpp:182] [UpdatedBlockTip] [validation] Enqueuing UpdatedBlockTip: new block hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d fork block hash=1a5c3bc8b1c4b797b167f2cf9fbfd872094daedbd96c5f8d2b5094618970c2b5 (in IBD=false)\n\n - 2026-02-19T12:56:50.493904Z [msghand] [validationinterface.cpp:190] [ActiveTipChange] [validation] ActiveTipChange: new block hash=4b6a4a2986406d7f3eb90dd04a1282d8dcc60340e231b329c4f1ebddaf89253d block height=102\n\n - 2026-02-19T12:56:50.494957Z [msghand] [net_processing.cpp:3555] [ProcessMessage] [net] received: ping (8 bytes) peer=3\n\n - 2026-02-19T12:56:50.494981Z [msghand] [net.cpp:4074] [PushMessage] [net] sending pong (8 bytes) peer=3\n\n - 2026-02-19T12:56:50.496498Z [msghand] [net_processing.cpp:3555] [ProcessMessage] [net] received: ping (8 bytes) peer=3\n\n - 2026-02-19T12:56:50.496522Z [msghand] [net.cpp:4074] [PushMessage] [net] sending pong (8 bytes) peer=3\n\n - 2026-02-19T12:56:50.497570Z [http] [httpserver.cpp:232] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:59760\n\n - 2026-02-19T12:56:50.497615Z [http_pool_0] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__\n\n\n\n\n\n2026-02-19T12:56:50.558119Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n\n2026-02-19T12:56:50.558309Z TestFramework (WARNING): Not cleaning up dir D:\\a\\bitcoin\\bitcoin\\test_runner_₿_🏃_20260219_124134\\p2p_invalid_tx_138\n\n2026-02-19T12:56:50.558437Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\bitcoin\\bitcoin\\test_runner_₿_🏃_20260219_124134\\p2p_invalid_tx_138/test_framework.log\n\n2026-02-19T12:56:50.558563Z TestFramework (ERROR): \n\n2026-02-19T12:56:50.558923Z TestFramework (ERROR): Hint: Call D:\\a\\bitcoin\\bitcoin\\test\\functional\\combine_logs.py 'D:\\a\\bitcoin\\bitcoin\\test_runner_₿_🏃_20260219_124134\\p2p_invalid_tx_138' to consolidate all logs\n\n2026-02-19T12:56:50.559050Z TestFramework (ERROR): \n\n2026-02-19T12:56:50.559148Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n\n2026-02-19T12:56:50.559269Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n\n2026-02-19T12:56:50.559367Z TestFramework (ERROR): \n\n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\n\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-02-19T13:52:12Z",
      "updated_at": "2026-02-21T00:46:15Z",
      "closed_at": "2026-02-21T00:46:15Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34621",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3927483465,
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/22163591188/job/64086436515#step:10:5786",
          "created_at": "2026-02-19T13:58:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 88,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 12478,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3834142125,
      "number": 34354,
      "title": "test `wallet_assumeutxo.py` / wallet_backup.py is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. ",
      "body": "ISTM that the [Windows, ucrt, test cross-built CI failure](https://github.com/bitcoin/bitcoin/actions/runs/21172425203/job/60894641918?pr=33014) is unrelated, a restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.\r\n\r\n<details open>\r\n<summary>From the logs:</summary>\r\n\r\n```zsh\r\n2026-01-20T13:41:07.2385503Z 2026-01-20T13:41:04.152353Z TestFramework (INFO): Ensuring wallet can't be restored from a backup that was created before the pruneheight (pruned node)\r\n2026-01-20T13:41:07.2386535Z \r\n2026-01-20T13:41:07.2386839Z 2026-01-20T13:41:06.479889Z TestFramework (ERROR): Unexpected exception\r\n2026-01-20T13:41:07.2387306Z \r\n2026-01-20T13:41:07.2387503Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2387815Z \r\n2026-01-20T13:41:07.2388269Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 166, in try_rpc\r\n2026-01-20T13:41:07.2388901Z \r\n2026-01-20T13:41:07.2389049Z     fun(*args, **kwds)\r\n2026-01-20T13:41:07.2389318Z \r\n2026-01-20T13:41:07.2389432Z     ~~~^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2389660Z \r\n2026-01-20T13:41:07.2390180Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n2026-01-20T13:41:07.2390808Z \r\n2026-01-20T13:41:07.2391156Z     return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n2026-01-20T13:41:07.2391651Z \r\n2026-01-20T13:41:07.2392093Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 156, in __call__\r\n2026-01-20T13:41:07.2392771Z \r\n2026-01-20T13:41:07.2392996Z     raise JSONRPCException(response['error'], status)\r\n2026-01-20T13:41:07.2393424Z \r\n2026-01-20T13:41:07.2395532Z test_framework.authproxy.JSONRPCException: filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\\node3\\regtest\\w2\\wallet.dat] (-1)\r\n2026-01-20T13:41:07.2397271Z \r\n2026-01-20T13:41:07.2397277Z \r\n2026-01-20T13:41:07.2397281Z \r\n2026-01-20T13:41:07.2397613Z During handling of the above exception, another exception occurred:\r\n2026-01-20T13:41:07.2398102Z \r\n2026-01-20T13:41:07.2398107Z \r\n2026-01-20T13:41:07.2398112Z \r\n2026-01-20T13:41:07.2398334Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2398622Z \r\n2026-01-20T13:41:07.2399135Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\r\n2026-01-20T13:41:07.2399796Z \r\n2026-01-20T13:41:07.2399922Z     self.run_test()\r\n2026-01-20T13:41:07.2400161Z \r\n2026-01-20T13:41:07.2400286Z     ~~~~~~~~~~~~~^^\r\n2026-01-20T13:41:07.2400474Z \r\n2026-01-20T13:41:07.2400948Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 267, in run_test\r\n2026-01-20T13:41:07.2401587Z \r\n2026-01-20T13:41:07.2401827Z     self.test_restore_wallet_pruneheight(n3)\r\n2026-01-20T13:41:07.2402338Z \r\n2026-01-20T13:41:07.2402476Z     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\r\n2026-01-20T13:41:07.2402806Z \r\n2026-01-20T13:41:07.2403384Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\r\n2026-01-20T13:41:07.2404151Z \r\n2026-01-20T13:41:07.2404691Z     assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2\", \"backup_w2.dat\")\r\n2026-01-20T13:41:07.2405294Z \r\n2026-01-20T13:41:07.2405553Z     ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2405970Z \r\n2026-01-20T13:41:07.2406496Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 157, in assert_raises_rpc_error\r\n2026-01-20T13:41:07.2407238Z \r\n2026-01-20T13:41:07.2407544Z     assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n2026-01-20T13:41:07.2408097Z \r\n2026-01-20T13:41:07.2408261Z            ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2408598Z \r\n2026-01-20T13:41:07.2409048Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 170, in try_rpc\r\n2026-01-20T13:41:07.2409645Z \r\n2026-01-20T13:41:07.2410041Z     raise AssertionError(\"Unexpected JSONRPC error code %i\" % e.error[\"code\"])\r\n2026-01-20T13:41:07.2410583Z \r\n2026-01-20T13:41:07.2410797Z AssertionError: Unexpected JSONRPC error code -1\r\n2026-01-20T13:41:07.2411215Z \r\n2026-01-20T13:41:07.2411925Z 2026-01-20T13:41:06.484138Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2026-01-20T13:41:07.2412795Z \r\n2026-01-20T13:41:07.2413676Z 2026-01-20T13:41:06.484270Z TestFramework (WARNING): Not cleaning up dir D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\r\n2026-01-20T13:41:07.2414525Z \r\n2026-01-20T13:41:07.2415646Z 2026-01-20T13:41:06.484375Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56/test_framework.log\r\n2026-01-20T13:41:07.2416737Z \r\n\r\n2026-01-20T13:42:33.3464929Z wallet_assumeutxo.py                                                             | ✖ Failed  | 8 s\r\n2026-01-20T13:42:33.3465209Z \r\n2026-01-20T13:42:33.3465460Z ALL                                                                              | ✖ Failed  | 2893 s (accumulated) \r\n2026-01-20T13:42:33.3465784Z Runtime: 796 s\r\n\r\n```\r\n</details>\r\n\r\n_Originally posted by @rkrux in https://github.com/bitcoin/bitcoin/issues/33014#issuecomment-3773073528_\r\n            ",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-20T15:07:00Z",
      "updated_at": "2026-02-20T23:02:01Z",
      "closed_at": null,
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/34354",
      "labels": [
        "Bug",
        "Wallet",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3917124910,
          "user": "maflcko",
          "body": "Same for wallet_backup.py:\n\n```\n node3 2026-02-17T20:40:22.128215Z [scheduler] [wallet/wallet.h:943] [WalletLogPrintf] [restore_pruned] Releasing wallet restore_pruned.. \n test  2026-02-17T20:40:22.340793Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 166, in try_rpc\n                                       fun(*args, **kwds)\n                                       ~~~^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                     File \"/usr/lib/python3.13/http/client.py\", line 1450, in getresponse\n                                       response.begin()\n                                       ~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 336, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ~~~~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 305, in _read_status\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\n                                                                \" response\")\n                                   http.client.RemoteDisconnected: Remote end closed connection without response\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/b-c/bld-cmake/test/functional/wallet_backup.py\", line 292, in run_test\n                                       self.test_pruned_wallet_backup()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/bld-cmake/test/functional/wallet_backup.py\", line 212, in test_pruned_wallet_backup\n                                       assert_raises_rpc_error(-4, error_message, node.restorewallet, \"restore_pruned\", backup_file)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n                                       assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 177, in try_rpc\n                                       raise AssertionError(\"Unexpected exception raised: \" + type(e).__name__)\n                                   AssertionError: Unexpected exception raised: RemoteDisconnected\n test  2026-02-17T20:40:22.344578Z TestFramework (DEBUG): Closing down network thread \n test  2026-02-17T20:40:22.394821Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2026-02-17T20:40:22.394967Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262 \n test  2026-02-17T20:40:22.395048Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/test_framework.log \n test  2026-02-17T20:40:22.395168Z TestFramework (ERROR): \n test  2026-02-17T20:40:22.395280Z TestFramework (ERROR): Hint: Call /b-c/test/functional/combine_logs.py '/tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262' to consolidate all logs \n test  2026-02-17T20:40:22.395334Z TestFramework (ERROR): \n test  2026-02-17T20:40:22.395375Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2026-02-17T20:40:22.395443Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2026-02-17T20:40:22.395497Z TestFramework (ERROR): \n\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n",
          "created_at": "2026-02-17T21:15:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 5650,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3922844815,
          "user": "achow101",
          "body": "There seem to be 2 different issues reported here.\n\nThe first is `filesystem error: cannot remove: The process cannot access the file because it is being used by another process` which suggests that the wallet.dat file is still open by sqlite.\n\nThe second is `Assertion fs::is_empty(wallet_path)' failed.` which is probably caused by `wallet.dat-journal` still existing.\n\nI have a theoretical fix for the second issue. I don't have one for the first.",
          "created_at": "2026-02-18T19:49:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 450,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3923063027,
          "user": "maflcko",
          "body": "Nice. A fix for the second issue would be helpful, and I am happy to test it, since I can reproduce it relatively easily. edit: And sorry for mixing the two unrelated issues. I'll open a new issue for the remaining issue, as soon as one is fixed.\n\nI wonder why Antithesis has not yet found this. 🤔 cc @dergoegge ",
          "created_at": "2026-02-18T20:31:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 312,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3929236184,
          "user": "maflcko",
          "body": "Not sure if https://github.com/bitcoin/bitcoin/pull/34619 is going to fix this issue. If the journal was zero'd, the size should be small, but  I don't see such small files after the test failure:\n\n```\n# find '/tmp/test_runner_\\342\\202\\277_\\360\\237\\217\\203_20260219_175359/wallet_assumeutxo_8651' \\\n  -type f -name 'wallet.dat-journal' -exec wc -c {} +\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node0/regtest/w/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node0/regtest/w2/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w/wallet.dat-journal\n 12824 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w1/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node1/regtest/w2/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node2/regtest/w/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node3/regtest/w/wallet.dat-journal\n 12824 /tmp/test_runner_₿_🏃_20260219_175359/wallet_assumeutxo_8651/node3/regtest/w2_pruneheight/wallet.dat-journal\n ```\n\nSee https://drahtbot.space/temp_scratch/wallet_assumeutxo_8651.tar.zstd\n\n\nAnd:\n\n```\n# find $'/tmp/test_runner_\\342\\202\\277_\\360\\237\\217\\203_20260217_203305' \\\n  -type f -name 'wallet.dat-journal' -exec wc -c {} +\n 25136 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node0/regtest/wallets/default_wallet/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node1/regtest/wallets/default_wallet/wallet.dat-journal\n 25136 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node2/regtest/wallets/default_wallet/wallet.dat-journal\n 29240 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node3/regtest/wallets/default_wallet/wallet.dat-journal\n 29240 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node3/regtest/wallets/pruned/wallet.dat-journal\n 21032 /tmp/test_runner_₿_🏃_20260217_203305/wallet_backup_262/node3/regtest/wallets/restore_pruned/wallet.dat-journal\n\n```\n\nhttps://drahtbot.space/temp_scratch/wallet_backup_262.tar.zstd\n\n\n\n\n",
          "created_at": "2026-02-19T18:51:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2177,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3929441550,
          "user": "achow101",
          "body": "> If the journal was zero'd, the size should be small, but I don't see such small files after the test failure:\n\nSQLite doesn't always truncate or delete the journal file. It may only overwrite the header with 0's to invalidate the file. I believe it does this when the file is larger than the disk sector size. #34619 does handle that case though.\n\nEdit: Looking at the files provided, the journal files all have 0'd headers",
          "created_at": "2026-02-19T19:25:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 425,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3930451868,
          "user": "maflcko",
          "body": "It is a bit odd, that it is only me that can reproduce this. Does this diff work to reproduce?\n\n\n```diff\ndiff --git a/src/validationinterface.cpp b/src/validationinterface.cpp\nindex c7be6abc3a..aacb7b6563 100644\n--- a/src/validationinterface.cpp\n+++ b/src/validationinterface.cpp\n@@ -14,2 +14,3 @@\n #include <primitives/transaction.h>\n+#include <random.h>\n #include <util/check.h>\n@@ -156,2 +157,4 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n \n+static FastRandomContext g_rnd{};\n+\n // Use a macro instead of a function for conditional logging to prevent\n@@ -166,2 +169,3 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n             LOG_EVENT(fmt, local_name, __VA_ARGS__);           \\\n+            if(g_rnd.randrange(2)<1)UninterruptibleSleep(15ms);\\\n             event();                                           \\\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 63dab29972..21629dd546 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -74,2 +74,3 @@\n #include <algorithm>\n+#include <atomic>\n #include <cassert>\n@@ -77,2 +78,3 @@\n #include <exception>\n+#include <mutex>\n #include <optional>\n@@ -83,2 +85,7 @@\n \n+std::atomic<bool> g_debug_waiting{false};\n+std::atomic<bool> g_debug_continue{false};\n+std::mutex g_debug_mutex;\n+std::condition_variable g_debug_cv;\n+\n struct KeyOriginInfo;\n@@ -542,2 +549,3 @@ std::shared_ptr<CWallet> RestoreWallet(WalletContext& context, const fs::path& b\n         if (created_parent_dir) {\n+        UninterruptibleSleep(1ms);\n             Assume(fs::is_empty(wallet_path));\n@@ -1530,2 +1538,7 @@ void CWallet::blockConnected(const ChainstateRole& role, const interfaces::Block\n     }\n+    UninterruptibleSleep(20ms);\n+    if (g_debug_waiting) {\n+        g_debug_continue = true;\n+        g_debug_cv.notify_all();\n+    }\n     assert(block.data);\n@@ -3199,2 +3212,10 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n \n+    {\n+        g_debug_continue = false;\n+        g_debug_waiting = true;\n+        std::unique_lock<std::mutex> lock(g_debug_mutex);\n+        g_debug_cv.wait_for(lock, std::chrono::seconds(2), [] { return g_debug_continue.load(); });\n+        g_debug_waiting = false;\n+    }\n+\n     // If rescan_required = true, rescan_height remains equal to 0\n```\n\nWith that patch, I can reproduce the crash, even with https://github.com/bitcoin/bitcoin/pull/34619\n",
          "created_at": "2026-02-19T22:16:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2402,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3930922504,
          "user": "achow101",
          "body": "> Does this diff work to reproduce?\n\nOnly for `wallet_assumeutxo.py`.\n\nI see what the problem is now. There is a race condition where the blocks that were generated and subsequently pruned are still in the validation interface queue, so when the wallet is being loaded for the restore, there are `blockConnected` signals that the wallet starts processing after `AttachChain` exits with the error about being pruned. Since `AttachChain` errors, we are expecting the wallet to be immediately destroyed once `LoadExisting` exits as the wallet shared_ptr goes out of scope. However, if it is still processing `blockConnected`s slowly, the shared_ptr still exists so the database is still open, so we get both the windows issue (the database file is still open) and the assertion (the journal file hasn't been deleted as the database has not been closed).\n\nAdding a `n3.syncwithvalidationinterfacequeue` after `self.generate` fixes the issue in the test, but the race is still actually there and that needs to be fixed.\n\nAlso I guess linux just lets us delete a file that is still open?\n\nThe `wallet_backup.py` failure may be related to this, but the diff does not cause that to fail for me. However, it is a similar failure scenario in restoring a backup to a pruned node, right after a bunch of blocks were generated. Edit: It fails if I increase the number of generated blocks. Likewise it is fixed with a `syncwithvalidationinterfacequeue()', so I believe it's the same problem.",
          "created_at": "2026-02-20T00:34:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1477,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3935712712,
          "user": "maflcko",
          "body": "For reference, the diff for wallet_backup would be:\n\n```diff\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 63dab29..1bcf597 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -74,2 +74,3 @@\n #include <algorithm>\n+#include <atomic>\n #include <cassert>\n@@ -77,2 +78,3 @@\n #include <exception>\n+#include <mutex>\n #include <optional>\n@@ -83,2 +85,7 @@\n \n+std::atomic<bool> g_debug_waiting{false};\n+std::atomic<bool> g_debug_continue{false};\n+std::mutex g_debug_mutex;\n+std::condition_variable g_debug_cv;\n+\n struct KeyOriginInfo;\n@@ -542,2 +549,3 @@ std::shared_ptr<CWallet> RestoreWallet(WalletContext& context, const fs::path& b\n         if (created_parent_dir) {\n+        UninterruptibleSleep(1ms);\n             Assume(fs::is_empty(wallet_path));\n@@ -1530,2 +1538,7 @@ void CWallet::blockConnected(const ChainstateRole& role, const interfaces::Block\n     }\n+    if (g_debug_waiting) {\n+        g_debug_continue = true;\n+        g_debug_cv.notify_all();\n+    }\n+    UninterruptibleSleep(260ms);\n     assert(block.data);\n@@ -3199,2 +3212,10 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n \n+    {\n+        g_debug_continue = false;\n+        g_debug_waiting = true;\n+        std::unique_lock<std::mutex> lock(g_debug_mutex);\n+        g_debug_cv.wait_for(lock, std::chrono::seconds(2), [] { return g_debug_continue.load(); });\n+        g_debug_waiting = false;\n+    }\n+\n     // If rescan_required = true, rescan_height remains equal to 0\n```\n\nThen,\n\n```\nwhile ( ./bld-cmake/test/functional/test_runner.py -j 12 --timeout-factor=4 $( printf \"wallet_backup %.0s\" {1..12} ) ) ; do echo >> /tmp/counter_ ; done\n```\n\nGives:\n\n```\nTEST             | STATUS    | DURATION\n\nwallet_backup.py | ✓ Passed  | 186 s\nwallet_backup.py | ✓ Passed  | 189 s\nwallet_backup.py | ✓ Passed  | 190 s\nwallet_backup.py | ✖ Failed  | 189 s\nwallet_backup.py | ✖ Failed  | 190 s\nwallet_backup.py | ✖ Failed  | 191 s\nwallet_backup.py | ✖ Failed  | 191 s\nwallet_backup.py | ✖ Failed  | 191 s\nwallet_backup.py | ✖ Failed  | 192 s\nwallet_backup.py | ✖ Failed  | 192 s\nwallet_backup.py | ✖ Failed  | 192 s\nwallet_backup.py | ✖ Failed  | 192 s\n\nALL              | ✖ Failed  | 2285 s (accumulated) \nRuntime: 192 s\n",
          "created_at": "2026-02-20T15:53:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2244,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3937554619,
          "user": "achow101",
          "body": "#34642 resolves the issue for me with the previous reproducer.",
          "created_at": "2026-02-20T23:02:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 62,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5559,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3968351917,
      "number": 34634,
      "title": "rpc shutdown race: [error] libevent: http.c:2842: Assertion TAILQ_FIRST(&evcon->requests) == req failed in evhttp_send",
      "body": "Diff to reproduce:\n\n```diff\ndiff --git a/src/httpserver.cpp b/src/httpserver.cpp\nindex b84f0da08f..98dc24eb36 100644\n--- a/src/httpserver.cpp\n+++ b/src/httpserver.cpp\n@@ -190,2 +190,3 @@ static void http_request_cb(struct evhttp_request* req, void* arg)\n {\n+        UninterruptibleSleep(std::chrono::milliseconds{100});\n     evhttp_connection* conn{evhttp_request_get_connection(req)};\ndiff --git a/src/init.cpp b/src/init.cpp\nindex e2cdb9c647..f1a820147b 100644\n--- a/src/init.cpp\n+++ b/src/init.cpp\n@@ -1552,2 +1552,4 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n \n+    UninterruptibleSleep(std::chrono::milliseconds{60});\n+\n     // ********************************************************* Step 5: verify wallet database integrity\n```\n\nSteps to reproduce (takes about 3-4 tries):\n\n```\nvalgrind --tool=none ./bld-cmake/bin/bitcoind -datadir=/tmp/ -walletdir=wallets_missing -server=1 -printtoconsole=1 -debug=http -regtest -rpcuser=u -rpcpassword=pw & while sleep 0.05 ; do ./bld-cmake/bin/bitcoin-cli -datadir=/tmp/ -regtest -rpcuser=u -rpcpassword=pw getblockcount &> /dev/null ; done\n```\n\nOutput:\n\n```\n...\n2026-02-20T12:30:16Z [http] Waiting for HTTP event thread to exit\n2026-02-20T12:30:16Z [http] Received a POST request for / from 127.0.0.1:51160\n2026-02-20T12:30:16Z [error] libevent: http.c:2842: Assertion TAILQ_FIRST(&evcon->requests) == req failed in evhttp_send\n==2885428== \n==2885428== Process terminating with default action of signal 6 (SIGABRT): dumping core\n==2885428==    at 0x5D3AE5C: __pthread_kill_implementation (in /usr/lib64/libc.so.6)\n==2885428==    by 0x5CE0F0D: raise (in /usr/lib64/libc.so.6)\n==2885428==    by 0x5CC86CF: abort (in /usr/lib64/libc.so.6)\n==2885428==    by 0x57016FC: ??? (in /usr/lib64/libevent_core-2.1.so.7.0.1)\n==2885428==    by 0x571D8B2: event_errx (in /usr/lib64/libevent_core-2.1.so.7.0.1)\n==2885428==    by 0x574AD2C: evhttp_send_reply (in /usr/lib64/libevent_extra-2.1.so.7.0.1)\n==2885428==    by 0x44EDDE8: std::_Function_handler<void (), HTTPRequest::WriteReply(int, std::span<std::byte const, 18446744073709551615ul>)::$_0>::_M_invoke(std::_Any_data const&) (src/httpserver.cpp:596)\n==2885428==    by 0x44EBB87: httpevent_callback_fn(int, short, void*) (std_function.h:593)\n==2885428==    by 0x57183C7: ??? (in /usr/lib64/libevent_core-2.1.so.7.0.1)\n==2885428==    by 0x571A22E: event_base_loop (in /usr/lib64/libevent_core-2.1.so.7.0.1)\n==2885428==    by 0x44EB4CC: ThreadHTTP(event_base*) (src/httpserver.cpp:304)\n==2885428==    by 0x59833E3: ??? (in /usr/lib64/libstdc++.so.6.0.34)\n==2885428== \n[1]+  Aborted                 (core dumped) valgrind --tool=none ./bld-cmake/bin/bitcoind -datadir=/tmp/ -walletdir=wallets_missing -server=1 -printtoconsole=1 -debug=http -regtest -rpcuser=u -rpcpassword=pw\n^C\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-20T12:34:02Z",
      "updated_at": "2026-02-20T20:34:44Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34634",
      "labels": [],
      "comment_data": [
        {
          "id": 3934058587,
          "user": "maflcko",
          "body": "I initially tried to reproduce https://github.com/bitcoin/bitcoin/issues/34624, but I guess I ran into a separate issue instead?",
          "created_at": "2026-02-20T12:38:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 128,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3937025472,
          "user": "hodlinator",
          "body": "This seems to fix the issue - waiting for the `eventBase` dispatch thread to finish processing events *before* we free `eventHTTP`:\n\n```diff\n--- a/src/httpserver.cpp\n+++ b/src/httpserver.cpp\n@@ -473,18 +473,15 @@ void StopHTTPServer()\n         }\n         g_requests.WaitUntilEmpty();\n     }\n-    if (eventHTTP) {\n-        // Schedule a callback to call evhttp_free in the event base thread, so\n-        // that evhttp_free does not need to be called again after the handling\n-        // of unfinished request connections that follows.\n-        event_base_once(eventBase, -1, EV_TIMEOUT, [](evutil_socket_t, short, void*) {\n-            evhttp_free(eventHTTP);\n-            eventHTTP = nullptr;\n-        }, nullptr, nullptr);\n-    }\n     if (eventBase) {\n         LogDebug(BCLog::HTTP, \"Waiting for HTTP event thread to exit\\n\");\n         if (g_thread_http.joinable()) g_thread_http.join();\n+    }\n+    if (eventHTTP) {\n+        evhttp_free(eventHTTP);\n+        eventHTTP = nullptr;\n+    }\n+    if (eventBase) {\n         event_base_free(eventBase);\n         eventBase = nullptr;\n     }\n```",
          "created_at": "2026-02-20T20:32:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1088,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3937038162,
          "user": "hodlinator",
          "body": "(I was curious whether it had anything to do with `ThreadPool` in 4a05825a3f3993b8e402a7c18e2bc04f6d287e96 but it reproduces for the merge-commit before that one).",
          "created_at": "2026-02-20T20:34:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 163,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2926,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3959509636,
      "number": 34618,
      "title": "test: cmpctblock: No coverage for fRevertToHeaderProcessing in compact block message handling.",
      "body": "### At a glance\n\nThe following diff causes no tests to fail:\n\n```diff\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\nindex e5b4bc7772..d9b0b46733 100644\n--- a/src/net_processing.cpp\n+++ b/src/net_processing.cpp\n@@ -4576,10 +4576,6 @@ void PeerManagerImpl::ProcessMessage(Peer& peer, CNode& pfrom, const std::string\n\n         bool fProcessBLOCKTXN = false;\n\n-        // If we end up treating this as a plain headers message, call that as well\n-        // without cs_main.\n-        bool fRevertToHeaderProcessing = false;\n-\n         // Keep a CBlock for \"optimistic\" compactblock reconstructions (see\n         // below)\n         std::shared_ptr<CBlock> pblock = std::make_shared<CBlock>();\n@@ -4713,18 +4709,6 @@ void PeerManagerImpl::ProcessMessage(Peer& peer, CNode& pfrom, const std::string\n                     fBlockReconstructed = true;\n                 }\n             }\n-        } else {\n-            if (requested_block_from_this_peer) {\n-                // We requested this block, but its far into the future, so our\n-                // mempool will probably be useless - request the block normally\n-                std::vector<CInv> vInv(1);\n-                vInv[0] = CInv(MSG_BLOCK | GetFetchFlags(peer), blockhash);\n-                MakeAndPushMessage(pfrom, NetMsgType::GETDATA, vInv);\n-                return;\n-            } else {\n-                // If this was an announce-cmpctblock, we want the same treatment as a header message\n-                fRevertToHeaderProcessing = true;\n-            }\n         }\n         } // cs_main\n\n@@ -4734,15 +4718,6 @@ void PeerManagerImpl::ProcessMessage(Peer& peer, CNode& pfrom, const std::string\n             return ProcessCompactBlockTxns(pfrom, peer, txn);\n         }\n\n-        if (fRevertToHeaderProcessing) {\n-            // Headers received from HB compact block peers are permitted to be\n-            // relayed before full validation (see BIP 152), so we don't want to disconnect\n-            // the peer if the header turns out to be for an invalid block.\n-            // Note that if a peer tries to build on an invalid chain, that\n-            // will be detected and the peer will be disconnected/discouraged.\n-            return ProcessHeadersMessage(pfrom, peer, {cmpctblock.header}, /*via_compact_block=*/true);\n-        }\n-\n         if (fBlockReconstructed) {\n             // If we got here, we were able to optimistically reconstruct a\n             // block that is in flight from some other peer.\n```\n\n---\n\nIn some circumstances, a node might receive a [`CMPCTBLOCK`](https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki) [message](https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki#headerandshortids) which for one reason or another that there is no hope of being able to successfully reconstruct the block from the CMPCTBLOCK. \n\nOne case that is covered in existing code, is if a `CMPCTBLOCK` is received that has a height `>= ActiveChain().Height() + 2`:\nhttps://github.com/bitcoin/bitcoin/blob/9e4567b17a285a266fa540b4141e0db5781cc228/src/net_processing.cpp#L4637 `                // [Process the block bla bla bla...]`\nhttps://github.com/bitcoin/bitcoin/blob/9e4567b17a285a266fa540b4141e0db5781cc228/src/net_processing.cpp#L4716-L4728\n\nIn this case, our mempool is not very likely to be helpful but a header exists with valid PoW, so it's worth it for us to work hard to try to get the block from our peer, so we revert to treating it as a headers message. My assumption is that the reason for checking if we already have requested the block is to be able to break out of a loop where we request a block and get a CMPCTBLOCK response, but can't process the CMPCTBLOCK message.\n\nThat all seems reasonable, and we should probably have functional test cases for it, but I want to also ask if it makes sense to do this at all since above in the CMPCTBLOCK messages, we have already processed the header as part of our anti-dos checks:\n\nhttps://github.com/bitcoin/bitcoin/blob/9e4567b17a285a266fa540b4141e0db5781cc228/src/net_processing.cpp#L4564\n\nand we've updated our state for the peer to indicate that they have this block:\n\nhttps://github.com/bitcoin/bitcoin/blob/9e4567b17a285a266fa540b4141e0db5781cc228/src/net_processing.cpp#L4590\n\nSo what is the difference between doing those two things and calling ProcessHeadersMessage? As far as I can tell the only difference is that ProcessHeadersMessage will send a request for the block immediately. But I'm pretty sure that by learning the header, and marking the peer as knowing about the header, we'll send a `GETDATA` for the block on the next tick of `SendMessages` for this peer:\n\nhttps://github.com/bitcoin/bitcoin/blob/9e4567b17a285a266fa540b4141e0db5781cc228/src/net_processing.cpp#L6113-L6148\n\nSo maybe this code can be safely deleted, since it's mostly a no-op.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-02-18T19:49:14Z",
      "updated_at": "2026-02-20T19:45:03Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34618",
      "labels": [],
      "comment_data": [
        {
          "id": 3934786810,
          "user": "Crypt-iQ",
          "body": "This makes sense to me. I also noticed that there are no tests for this branch. I could not figure out via the git history why this check was introduced. I think some tests here would also be nice to add.",
          "created_at": "2026-02-20T13:44:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 204,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4927,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3918326723,
      "number": 34542,
      "title": "RFC: Erlay Conceptual Discussion",
      "body": "As suggested during the IRC meeting last week ([logs](https://www.erisian.com.au/bitcoin-core-dev/log-2026-02-05.html#l-251)), this issue is for discussing recent progress on [Erlay](https://github.com/bitcoin/bips/blob/master/bip-0330.mediawiki), evaluating its trade-offs and goals, and ultimately deciding whether it's worth continuing to pursue.\n\nThe current project tracking issue is https://github.com/bitcoin/bitcoin/issues/30249, though some of the performance research results shown there may be outdated. We can gather updated data here and discuss.\n\nCouple questions on my mind:\n\n- What does the bandwidth/latency trade-off look like as we scale the number of connections?\n- Do the benefits outweigh the added code complexity?\n\nOf course, discussion isn't limited to the above. Feel free to bring up any other points that come to mind.",
      "state": "open",
      "user": "marcofleon",
      "created_at": "2026-02-09T21:53:28Z",
      "updated_at": "2026-02-20T16:56:34Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/34542",
      "labels": [
        "Brainstorming"
      ],
      "comment_data": [
        {
          "id": 3918541396,
          "user": "stickies-v",
          "body": "_Note: I'm not super involved with p2p, so my comments in this thread are a best-effort to contribute to the conversation moving forward, but shouldn't be taken for much more than that._\n\n> For those concerned about the additional complexity, would this be an acceptable tradeoff\n\nI think it makes sense to reframe the tradeoff like this. Improving partition resistance (as per sipa's [writing](https://github.com/bitcoin/bitcoin/issues/34542#issuecomment-3885427451)) and sustainably scaling the network (as per your [writing](https://github.com/bitcoin/bitcoin/issues/34542#issuecomment-3885128011)) both are interesting goals to pursue. Evental project decisions can then be framed as how much we improve on those two domains, for a certain cost (such a code complexity, bandwidth, latency, ...). Having a measure of the current state of partition resistance and network scaling currently would be helpful too, if at all possible.\n\nI generally prefer incremental, meaningful improvements. If separate reconciliation connections address the most important painpoints at minimal complexity, that absolutely seems like a good direction to focus on.\n\n> This would still require the added complexity of minisketch\n\nSince minisketch is a separate library, I'm much less concerned about its complexity than I am about complexity in p2p code.",
          "created_at": "2026-02-18T04:33:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1337,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3921311603,
          "user": "sr-gi",
          "body": "> I'd like to understand the current state of partition resistance and what concrete improvement Erlay would bring (and what metric best captures this). \n\n> Having a measure of the current state of partition resistance and network scaling currently would be helpful too, if at all possible.\n\nI'm happy to be corrected, but I do not think there is any metric that realistically captures what the current state of network partition resistance is, or that can quantify what would be good enough. Theoretically, we could compute how many /16 groups (or ASes for ASMap) would need to be controlled to have a certain likelihood of a node being eclipsed, but how realistic it is for an attacker capable of doing this to exist feels more speculative to me.\n\n> If we'd just be doing this to improve partition resistance (because increased connectivity is obviously better in that regard) while it's not clear that improvements are needed, then I'm not sure if I'd make this a priority myself. \n\nThat is fair, but it applies to any network proposal trying to improve partition resistance. I personally think that improving partition resistance is a good goal on its own, especially if it doesn't come with significant tradeoffs with bandwidth and latency.  \n\n> Given a project of this size, we'd need some momentum and at least a couple dedicated reviewers, otherwise we'll still be discussing this in 5 years.\n\nI agree with you there. I have no interest in pursuing this if there is no sufficient reviewer buy-in ",
          "created_at": "2026-02-18T14:59:00Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 1504,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3932025430,
          "user": "ajtowns",
          "body": "FWIW, I like the idea of reconciliation-only connections -- in thinking about inv2send stuff which is now PRed as #34628 I've been worried about the distinction we make for the inbound vs outbound side of connections (ie, the side that made the connection will send txs at potentially 2.5x the rate the other side will), which will mess up reconciliation while that zone is being hit. Having a dedicated class of connection (or even just a mode switch like the high-bw vs low-bw compact block stuff) would avoid that -- once you decide to make it a reconciliation connection, just have both sides use the lower rate.\n\nFWIW, I think bumping the number of blocks-only connections should be a high priority (and higher pri than erlay), but it keeps slipping off my radar.\n\nFWIW, if you look at erlay as an anti-censorship addition to the network (ie, we're just using it to add connectivity, not replacing the existing INV connectivity with it), then I don't think latency matters very much. If you're getting your tx relayed in five minutes, when without erlay it would not have been relayed at all due to censorship, that's a win, even if uncensored txs take a fraction of that time.\n\nAs far as the stats go, I don't think 6-8 significant figures of precision is very realistic...\n\n> Are the expected values for the poisson processes set to stone? Is it OK to reduce them? How can we reason about the implications?\n\nThe random delays between INVs is to give a little privacy -- if you wait 8s between INVs and txs are coming in at 7tx/s, then you have an anonymity set of 56 txs where your peers can't discern the order in which they arrived. Because it's an exponential/poisson process, the 5s average will mean that 10% of the time it will be less than 0.52s between INVs, so the anonymity set may be 3.7 transactions or less. I think \"90% of the time, the anonymity set will be at least ~4 transactions\" is the right sort of implication to think about here.\n\nOne thing I've been thinking about with template sharing is if the ephemeral connections we make can be used for tx relay -- ie, we do an extra block relay connection every few minutes already, if we share a template on that, that gives us much broader top-of-mempool tx relay capacity than a set of static connections, at least if a there's a high-feerate tx that's getting censored by a majority of the network for an extended period. Maybe doing a one-off \"txs from the last few minutes\" reconciliation immediately on making a new \"blocks-only\" connection to a compatible peer would also be feasible and useful. (Or maybe not 🤷‍♂️)\n\nAnyway, just some thoughts.",
          "created_at": "2026-02-20T06:50:27Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 2624,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3936022035,
          "user": "gmaxwell",
          "body": "> the threshold is quite low\n\nI disagree.\n\nIt's quite inexpensive to spin up more \"nodes\". There are already existing known attackers running multiple multiple /24s with every IP pretending to be a distinct node.  The already mentioned censorship attackers have written attack software to gum up the connections of non-censoring nodes and fake their identity which at best leaves preferential peering an expensive cat and mouse game.\n\nWhen it only costs someone a nanosecond to test a password, the space of possible passwords must be enormous to have meaningful security. Similar applies here.\n\nBeyond just spinning up 'nodes' attackers can approach the 10% threshold by trying to knock honest nodes offline through DOS attacks, false abuse reporting, etc.  This is a risk to all operators that they'll be disrupted by an attacker with a realistic prospect of making progress by attacking others.\n\nSo I think the 10% sort of threshold only holds against attackers that are hardly competent or hardly trying, maybe ones that care if their efforts go unnoticed or not-- not the sort of thing that should be relied on.\n\nIt's also a target on average, rather than worst case. If the consequence of being censored is a mere delay then knowing the attacker is unlikely to be successful on average if at least 10% of the 'nodes' you select from are honest is helpful.  But if the consequence is that your funds will be lost, for example, then you likely care about how many nodes must be honest for the attacker success to be less than, say, one in a million.  And by that metric the existing behavior performs poorly.\n\nThe number of effective connections is an important *exponent* in many kinds of attack resistance, in that it makes most other defenses more effective.   E.g. say you want to use behavioral analysis to peer preferentially, having more connections makes that work better and work safer (by applying the preference only to a subset of connections you're at least no worse off than if you didn't make that subset of connections at all).\n\nSimilarly, people have suggested things like POW or ZK-proof-of-utxo-ownership or trading captcha solving for blinded access tokens to create attack resistant connection slots... but all those schemes have their own weaknesses and if they were a primary mechanism could make some attackers more powerful because they're better at meeting them than ordinary honest participants.  If, instead, these mechanisms only run in addition to connections you'd otherwise have then that risk doesn't matter.  But that only works if you can expand the connection pool for these new attack resistant connections.\n\nAnd the only reason to not have every node constantly connect to *every* other node is resource consumption.\n\nWith respect to latency the latency of transaction relay over a connection that doesn't exist is infinite.  I think that's the right metric to judge this.  One could hold connection count constant and try to improve bandwidth sure-- but the only reason to do that is if you care more about bandwidth than latency.  I suspect for most people who do, blocksonly would probably be a better tool.\n\nIn terms of latency requirements: For the operation of the network there is particular reason to get a transaction widely relayed before it would be rationally mined and the network frequently has backlog.   Even for the secondary purpose of transaction notification, delays of many seconds should be fine-- consider that even knowing there has been a delay at that time scale means that you have another communication channel to know that the transaction exists, which could just as well be used to give you the transaction. :)  For transactions that are being censored even fairly delayed propagation is probably fine (it just has to be fast enough to not make the delay into an exploitable attack against exchange protocols).\n\nIt might be somewhat unsatisfying to have tools that are only valuable against attacks and then have the attacks not happen specifically because the tool moots the attack.  But that's the nature of defense: you often only need it if you don't have it.\n\n\n\n",
          "created_at": "2026-02-20T16:56:34Z",
          "drama_signals": {
            "drama_keywords": 3,
            "positive_keywords": 2,
            "text_length": 4139,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 879,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3968865126,
      "number": 34637,
      "title": "\"txospenderindex_tests/txospenderindex_initial_sync\": critical check tx_spender->has_value() has failed",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/22227876457/job/64299801435?pr=34615#step:8:652\n```bash\n\n./test/txospenderindex_tests.cpp(15): Entering test case \"txospenderindex_initial_sync\"\n./test/txospenderindex_tests.cpp(60): fatal error: in \"txospenderindex_tests/txospenderindex_initial_sync\": critical check tx_spender->has_value() has failed\nCommand '['./bin/test_bitcoin.exe', '-l', 'test_suite']' returned non-zero exit status 3221225477.\n\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-20T14:38:17Z",
      "updated_at": "2026-02-20T16:10:19Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34637",
      "labels": [],
      "comment_data": [
        {
          "id": 3935644369,
          "user": "hodlinator",
          "body": "Notable that it only happens on Windows UCRT in the linked run, indicating probable insufficient synchronization between txospenderindex and the new block in chainstate. Maybe we should move `SyncWithValidationInterfaceQueue()` before the failing check?",
          "created_at": "2026-02-20T15:38:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 253,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3935792416,
          "user": "sedited",
          "body": "> Maybe we should move SyncWithValidationInterfaceQueue() before the failing check?\n\n`BlockUntilSyncedToCurrentChain()` should already be doing that. It's a bit puzzling, I also couldn't reproduce a failure after 10'000 test runs. ",
          "created_at": "2026-02-20T16:10:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 231,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 558,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3967266428,
      "number": 34631,
      "title": "Intermittent failure of p2p_private_broadcast.py",
      "body": "Not sure if this is from the original PR or #34329\n\n<details>\n<summary>Logs:</summary>\n\n\n```\n455/455 - p2p_private_broadcast.py failed, Duration: 84 s                              \n\nstdout:\n2026-02-20T08:16:52.932185Z TestFramework (INFO): PRNG seed is: 5474091116900090230\n2026-02-20T08:16:52.932503Z TestFramework (INFO): Initializing test directory /tmp/merging_clang_build_Debug/test_runner_₿_🏃_20260220_091548/p2p_private_broadcast_74\n2026-02-20T08:16:58.196783Z TestFramework (INFO): Created txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349: for basic test\n2026-02-20T08:16:58.196839Z TestFramework (INFO): Created txid=1586df3125397f95009109f8978a656d966eba39b36bb7552d0cfa703e58d84a: for broadcast with dependency in mempool + rebroadcast\n2026-02-20T08:16:58.196858Z TestFramework (INFO): Created txid=f4580414da8808a9772291d522281ba7d3c5d4ad480cde6580b5363590ec79d2: for broadcast with dependency not in mempool\n2026-02-20T08:17:13.762676Z TestFramework (INFO): Outbound connection i=10: the private broadcast target received and further relayed the transaction\n2026-02-20T08:17:13.762865Z TestFramework (INFO): Basic: ok: outbound connection i=11 is private broadcast of txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349\n2026-02-20T08:17:13.762948Z TestFramework (INFO): Basic: ok: outbound connection i=12 is private broadcast of txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349\n2026-02-20T08:17:13.764109Z TestFramework (INFO): Resending the same transaction via RPC again (it is not in the mempool yet)\n2026-02-20T08:17:13.765058Z TestFramework (INFO): Sending a malleated transaction with an invalid witness via RPC\n2026-02-20T08:17:13.766052Z TestFramework (INFO): Checking that the transaction is not in the originator node's mempool\n2026-02-20T08:17:13.766348Z TestFramework (INFO): Sending INV and waiting for GETDATA from node\n2026-02-20T08:17:13.817260Z TestFramework (INFO): Waiting for normal broadcast to another peer\n2026-02-20T08:17:16.720760Z TestFramework (INFO): Checking getprivatebroadcastinfo no longer reports the transaction after it is received back\n2026-02-20T08:17:16.721406Z TestFramework (INFO): Checking abortprivatebroadcast removes a pending private-broadcast transaction\n2026-02-20T08:17:16.723782Z TestFramework (INFO): Checking abortprivatebroadcast fails for non-existent transaction\n2026-02-20T08:17:16.724255Z TestFramework (INFO): Sending a transaction that is already in the mempool\n2026-02-20T08:17:16.925456Z TestFramework (INFO): Broadcast of mempool transaction: ok: outbound connection i=13 is private broadcast of txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349\n2026-02-20T08:17:16.975699Z TestFramework (INFO): Broadcast of mempool transaction: ok: outbound connection i=14 is private broadcast of txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349\n2026-02-20T08:17:17.075987Z TestFramework (INFO): Broadcast of mempool transaction: ok: outbound connection i=15 is private broadcast of txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349\n2026-02-20T08:17:17.076719Z TestFramework (INFO): Sending a transaction with a dependency in the mempool\n2026-02-20T08:17:17.228560Z TestFramework (INFO): Dependency in mempool: ok: outbound connection i=16 is private broadcast of txid=1586df3125397f95009109f8978a656d966eba39b36bb7552d0cfa703e58d84a\n2026-02-20T08:17:17.278785Z TestFramework (INFO): Dependency in mempool: ok: outbound connection i=17 is private broadcast of txid=1586df3125397f95009109f8978a656d966eba39b36bb7552d0cfa703e58d84a\n2026-02-20T08:17:17.328990Z TestFramework (INFO): Dependency in mempool: ok: outbound connection i=18 is private broadcast of txid=1586df3125397f95009109f8978a656d966eba39b36bb7552d0cfa703e58d84a\n2026-02-20T08:17:17.329712Z TestFramework (INFO): Sending a transaction with a dependency not in the mempool (should be rejected)\n2026-02-20T08:17:17.331228Z TestFramework (INFO): Checking that rebroadcast works\n2026-02-20T08:18:17.331354Z TestFramework (ERROR): Unexpected exception:\nTraceback (most recent call last):\n  File \"/home/user/bitcoin/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n  File \"/home/user/bitcoin/clang_build/Debug/test/functional/p2p_private_broadcast.py\", line 429, in run_test\n    with tx_originator.busy_wait_for_debug_log(expected_msgs=[rebroadcast_msg.encode()]):\n  File \"/usr/lib/python3.12/contextlib.py\", line 144, in __exit__\n    next(self.gen)\n  File \"/home/user/bitcoin/test/functional/test_framework/test_node.py\", line 616, in busy_wait_for_debug_log\n    self._raise_assertion_error(f'Expected message(s) {remaining_expected!s} '\n  File \"/home/user/bitcoin/test/functional/test_framework/test_node.py\", line 229, in _raise_assertion_error\n    raise AssertionError(self._node_msg(msg))\nAssertionError: [node 0] Expected message(s) [b'Reattempting broadcast of stale txid=1586df3125397f95009109f8978a656d966eba39b36bb7552d0cfa703e58d84a'] not found in log:\n\n - 2026-02-20T08:17:17.331379Z [http] [httpserver.cpp:233] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:36796\n - 2026-02-20T08:17:17.331431Z [http_pool_1] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=setmocktime user=__cookie__\n - 2026-02-20T08:17:17.331568Z (mocktime: 2026-02-20T08:37:17Z) [http] [httpserver.cpp:233] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:36796\n - 2026-02-20T08:17:17.331669Z (mocktime: 2026-02-20T08:37:17Z) [http_pool_0] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=mockscheduler user=__cookie__\n - 2026-02-20T08:17:17.331823Z (mocktime: 2026-02-20T08:37:17Z) [scheduler] [net.cpp:2438] [StartExtraBlockRelayPeers] [net] enabling extra block-relay-only peers\n - 2026-02-20T08:17:17.333250Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=2\n - 2026-02-20T08:17:17.333389Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=2\n - 2026-02-20T08:17:17.333462Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=2 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.333508Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=19\n - 2026-02-20T08:17:17.333530Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5012] [ProcessMessage] [privatebroadcast] Got a PONG (the transaction will probably reach the network), marking for disconnect, peer=19\n - 2026-02-20T08:17:17.333574Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=7\n - 2026-02-20T08:17:17.333613Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 started\n - 2026-02-20T08:17:17.333631Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 completed (0μs)\n - 2026-02-20T08:17:17.333648Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending inv (37 bytes) peer=7\n - 2026-02-20T08:17:17.333662Z (mocktime: 2026-02-20T08:37:17Z) [net] [net.cpp:558] [CloseSocketDisconnect] [net] Resetting socket for peer=19\n - 2026-02-20T08:17:17.333687Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=7\n - 2026-02-20T08:17:17.333749Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=7 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.333802Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=1\n - 2026-02-20T08:17:17.333900Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=1\n - 2026-02-20T08:17:17.333936Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 started\n - 2026-02-20T08:17:17.333953Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 completed (0μs)\n - 2026-02-20T08:17:17.333964Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=1 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334016Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=6\n - 2026-02-20T08:17:17.334055Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 started\n - 2026-02-20T08:17:17.334067Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 completed (0μs)\n - 2026-02-20T08:17:17.334078Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=6\n - 2026-02-20T08:17:17.334150Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=6 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334192Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=9\n - 2026-02-20T08:17:17.334265Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=9\n - 2026-02-20T08:17:17.334340Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=9 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334378Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=3\n - 2026-02-20T08:17:17.334470Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=3\n - 2026-02-20T08:17:17.334526Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 started\n - 2026-02-20T08:17:17.334542Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=3 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334551Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 completed (0μs)\n - 2026-02-20T08:17:17.334568Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=0\n - 2026-02-20T08:17:17.334609Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 started\n - 2026-02-20T08:17:17.334622Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 completed (4μs)\n - 2026-02-20T08:17:17.334656Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=0\n - 2026-02-20T08:17:17.334719Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=0 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334749Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=5\n - 2026-02-20T08:17:17.334830Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=5\n - 2026-02-20T08:17:17.334893Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=5 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.334941Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=8\n - 2026-02-20T08:17:17.334972Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 started\n - 2026-02-20T08:17:17.334983Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->m_sock_mutex, net.cpp:2138 completed (0μs)\n - 2026-02-20T08:17:17.335000Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=8\n - 2026-02-20T08:17:17.335068Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=8 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.335110Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=4\n - 2026-02-20T08:17:17.335163Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 started\n - 2026-02-20T08:17:17.335177Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention pnode->cs_vSend, net.cpp:2072 completed (0μs)\n - 2026-02-20T08:17:17.335190Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=4\n - 2026-02-20T08:17:17.335247Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5339] [ConsiderEviction] [net] sending getheaders to outbound peer=4 to verify chain work (current best known block:<none>, benchmark blockhash: 76b181cf5782e03af6adb8f990404168f05f9abd940e7a4e92a33e6044d1f6a5)\n - 2026-02-20T08:17:17.335294Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention cs_main, net_processing.cpp:1680 started\n - 2026-02-20T08:17:17.335304Z (mocktime: 2026-02-20T08:37:17Z) [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention cs_main, net_processing.cpp:1680 completed (0μs)\n - 2026-02-20T08:17:17.335311Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=0\n - 2026-02-20T08:17:17.335335Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [logging/timer.h:58] [Log] [lock] Enter: lock contention cs_main, net_processing.cpp:5614 started\n - 2026-02-20T08:17:17.335343Z (mocktime: 2026-02-20T08:37:17Z) [net] [net_processing.cpp:1750] [FinalizeNode] [net] Cleared nodestate for peer=19\n - 2026-02-20T08:17:17.335351Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [logging/timer.h:58] [Log] [lock] Enter: lock contention cs_main, net_processing.cpp:5614 completed (0μs)\n - 2026-02-20T08:17:17.335403Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=3\n - 2026-02-20T08:17:17.335455Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=7\n - 2026-02-20T08:17:17.335481Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=5\n - 2026-02-20T08:17:17.335506Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=4\n - 2026-02-20T08:17:17.335532Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=2\n - 2026-02-20T08:17:17.335557Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=1\n - 2026-02-20T08:17:17.335583Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=8\n - 2026-02-20T08:17:17.335606Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=6\n - 2026-02-20T08:17:17.335632Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=9\n - 2026-02-20T08:17:17.335727Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: getdata (37 bytes) peer=7\n - 2026-02-20T08:17:17.335735Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:4225] [ProcessMessage] [net] received getdata (1 invsz) peer=7\n - 2026-02-20T08:17:17.335744Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:4228] [ProcessMessage] [net] received getdata for: wtx 300386bebae3d16bdf431a264212a900e15716f784d3888fd800b583d235a389 peer=7\n - 2026-02-20T08:17:17.335777Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending tx (133 bytes) peer=7\n - 2026-02-20T08:17:17.342789Z (mocktime: 2026-02-20T08:37:17Z) [scheduler] [txmempool.cpp:435] [check] [mempool] Checking mempool with 1 transactions and 1 inputs\n - 2026-02-20T08:17:17.342847Z (mocktime: 2026-02-20T08:37:17Z) [scheduler] [net_processing.cpp:1663] [ReattemptPrivateBroadcast] [privatebroadcast] Giving up broadcast attempts for txid=2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349 wtxid=300386bebae3d16bdf431a264212a900e15716f784d3888fd800b583d235a389: txn-already-in-mempool\n - 2026-02-20T08:17:17.343326Z (mocktime: 2026-02-20T08:37:17Z) [scheduler] [net.cpp:2401] [DumpAddresses] [net] Flushed 100 addresses to peers.dat  0ms\n - 2026-02-20T08:17:17.603367Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [addrman.cpp:786] [Select_] [addrman] Selected [80::1]:8333 from new\n - 2026-02-20T08:17:17.603457Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [net.cpp:396] [ConnectNode] [net] trying v1 connection [80::1]:8333 lastseen=0.3hrs\n - 2026-02-20T08:17:17.603487Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [net.cpp:486] [ConnectNode] [proxy] Using proxy: 127.0.0.1:11890 to connect to [80::1]:8333\n - 2026-02-20T08:17:17.603607Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [netbase.cpp:396] [Socks5] [net] SOCKS5 connecting 80::1\n - 2026-02-20T08:17:17.603898Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [netbase.cpp:435] [Socks5] [proxy] SOCKS5 sending proxy authentication b498d4efaac06cd7-20:b498d4efaac06cd7-20\n - 2026-02-20T08:17:17.603975Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [netbase.cpp:514] [Socks5] [net] SOCKS5 connected 80::1\n - 2026-02-20T08:17:17.604089Z (mocktime: 2026-02-20T08:37:17Z) [opencon] [net.cpp:4006] [CNode] [net] Added connection peer=20\n - 2026-02-20T08:17:17.636870Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending version (114 bytes) peer=20\n - 2026-02-20T08:17:17.636987Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:1595] [PushNodeVersion] [net] send version message: version=70016, blocks=200, txrelay=0, peer=20\n - 2026-02-20T08:17:17.655393Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: version (111 bytes) peer=20\n - 2026-02-20T08:17:17.655440Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3702] [ProcessMessage] [net] receive version message: /python-p2p-tester:0.0.3/: version 70016, blocks=-1, us=0.0.0.0:0, txrelay=1, peer=20\n - 2026-02-20T08:17:17.655453Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending wtxidrelay (0 bytes) peer=20\n - 2026-02-20T08:17:17.655510Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending sendaddrv2 (0 bytes) peer=20\n - 2026-02-20T08:17:17.655559Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending verack (0 bytes) peer=20\n - 2026-02-20T08:17:17.655679Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [addrman.cpp:676] [Good_] [addrman] Moved [80::1]:8333 to tried[35][47]\n - 2026-02-20T08:17:17.655695Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [node/timeoffsets.cpp:31] [Add] [net] Added time offset -1200s, total samples 11\n - 2026-02-20T08:17:17.655879Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: wtxidrelay (0 bytes) peer=20\n - 2026-02-20T08:17:17.656325Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: verack (0 bytes) peer=20\n - 2026-02-20T08:17:17.656342Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3842] [ProcessMessage] New block-relay-only peer connected: transport: v1, version: 70016, blocks=-1 peer=20\n - 2026-02-20T08:17:17.656359Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending sendcmpct (9 bytes) peer=20\n - 2026-02-20T08:17:17.656428Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending ping (8 bytes) peer=20\n - 2026-02-20T08:17:17.656487Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net.cpp:4074] [PushMessage] [net] sending getheaders (645 bytes) peer=20\n - 2026-02-20T08:17:17.656544Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:5811] [SendMessages] [net] initial getheaders (199) to peer=20 (startheight:-1)\n - 2026-02-20T08:17:17.697564Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [net_processing.cpp:3582] [ProcessMessage] [net] received: pong (8 bytes) peer=20\n - 2026-02-20T08:17:17.898187Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [logging/timer.h:58] [Log] [lock] Enter: lock contention connman.m_nodes_mutex, net.h:1812 started\n - 2026-02-20T08:17:17.898212Z (mocktime: 2026-02-20T08:37:17Z) [msghand] [logging/timer.h:58] [Log] [lock] Enter: lock contention connman.m_nodes_mutex, net.h:1812 completed (1μs)\n - 2026-02-20T08:17:21.077693Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session 76611381d8 with 127.0.0.1:1\n - 2026-02-20T08:17:21.077810Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:17:21.077857Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n - 2026-02-20T08:17:29.077977Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session ad468d1474 with 127.0.0.1:1\n - 2026-02-20T08:17:29.078063Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:17:29.078100Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n - 2026-02-20T08:17:38.078194Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session 857489dee6 with 127.0.0.1:1\n - 2026-02-20T08:17:38.078258Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:17:38.078285Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n - 2026-02-20T08:17:48.078396Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session 583b195c09 with 127.0.0.1:1\n - 2026-02-20T08:17:48.078489Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:17:48.078525Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n - 2026-02-20T08:17:59.078597Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session d5af5b3c3c with 127.0.0.1:1\n - 2026-02-20T08:17:59.078672Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:17:59.078701Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n - 2026-02-20T08:18:02.331914Z (mocktime: 2026-02-20T08:37:17Z) [scheduler] [net_processing.cpp:5393] [operator()] [net] keeping block-relay-only peer=20 chosen for eviction (connect time: 1771576637, blocks_in_flight: 0)\n - 2026-02-20T08:18:11.078881Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:418] [CreateIfNotCreatedAlready] [i2p] Creating persistent I2P SAM session 3d08732ffb with 127.0.0.1:1\n - 2026-02-20T08:18:11.079007Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [netbase.cpp:584] [LogConnectFailure] connect() to 127.0.0.1:1 failed after wait: Connection refused (111)\n - 2026-02-20T08:18:11.079052Z (mocktime: 2026-02-20T08:37:17Z) [i2paccept] [i2p.cpp:152] [Listen] [error] Couldn't listen: Cannot connect to 127.0.0.1:1\n\n\n2026-02-20T08:18:17.391487Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n```\n\n</details>",
      "state": "open",
      "user": "sedited",
      "created_at": "2026-02-20T08:26:24Z",
      "updated_at": "2026-02-20T14:31:34Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34631",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3932437627,
          "user": "fanquake",
          "body": "cc @vasild @andrewtoth ",
          "created_at": "2026-02-20T08:39:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 23,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3932574631,
          "user": "maflcko",
          "body": "I guess that one is different from https://github.com/bitcoin/bitcoin/issues/34387\n\n",
          "created_at": "2026-02-20T09:13:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 84,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3932850114,
          "user": "maflcko",
          "body": "I was thinking this is just a `assert_debug_log` timeout issue, but the traceback shows `tx_originator.busy_wait_for_debug_log(expected_msgs=[rebroadcast_msg.encode()])`, so this must be somethign else.",
          "created_at": "2026-02-20T10:13:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 202,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3935224755,
          "user": "maflcko",
          "body": "There is also a third failure: https://github.com/bitcoin/bitcoin/actions/runs/22211364381/job/64246250770?pr=34628#step:9:8320:\n\n```\np2p_private_broadcast.py\", line 432, in run_test\n                                       self.check_broadcasts(\"Rebroadcast\", txs[1], 1, skip_destinations)\n                                     File \"/home/admin/actions-runner/_work/bitcoin/bitcoin/ci_build/test/functional/p2p_private_broadcast.py\", line 284, in check_broadcasts\n                                       assert_equal(peer.message_count, {\n                                     File \"/home/admin/actions-runner/_work/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 78, in assert_equal\n                                       raise AssertionError(\"not(%s == %s)\\n  in particular not(%s == %s)\" % (thing1, thing2, d1, d2))\n                                   AssertionError: not(defaultdict(<class 'int'>, {'version': 1, 'verack': 1, 'inv': 1}) == {'version': 1, 'verack': 1, 'inv': 1, 'tx': 1, 'ping': 1})\n                                     in particular not({} == {'ping': 1, 'tx': 1})",
          "created_at": "2026-02-20T14:31:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1095,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 26238,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3901573586,
      "number": 34513,
      "title": "CMake 4.1.0+ fails to configure cross-build for macOS with Ninja generator",
      "body": "When cross-compiling for macOS on Linux, the configuration step fails when using the Ninja generator:\n```\n$ gmake -j $(nproc) -C depends HOST=x86_64-apple-darwin NO_QT=1\n$ cmake -B build -G Ninja --toolchain depends/x86_64-apple-darwin/toolchain.cmake\n<snip>\nCMake Error at src/CMakeLists.txt:301 (add_executable):\n  The install of the bitcoind target requires changing an RPATH from the\n  build tree, but this is not supported with the Ninja generator unless on an\n  ELF-based or XCOFF-based platform.  The CMAKE_BUILD_WITH_INSTALL_RPATH\n  variable may be set to avoid this relinking step.\n\n\n<snip>\n```\n\nThis behavior is observed with CMake starting from version 4.1.0.\n\nThis issue does not occur when building with depends on macOS.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-05T13:25:18Z",
      "updated_at": "2026-02-20T12:40:38Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/34513",
      "labels": [
        "macOS",
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3933780423,
          "user": "fanquake",
          "body": "From what I can tell, this doesn't effect `30.x`?",
          "created_at": "2026-02-20T12:12:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 49,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3934086513,
          "user": "hebasto",
          "body": "> From what I can tell, this doesn't effect `30.x`?\n\nTrue.",
          "created_at": "2026-02-20T12:40:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 58,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 809,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3586989882,
      "number": 33777,
      "title": "Mining interface tracking issue",
      "body": "The mining interface is defined in:\n- https://github.com/bitcoin/bitcoin/blob/master/src/interfaces/mining.h\n- https://github.com/bitcoin/bitcoin/blob/master/src/ipc/capnp/mining.capnp\n\nClients that are known to depend on it:\n- https://github.com/stratum-mining/sv2-tp\n- https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2\n\n**Priority changes for v31.x:**\n\nThese are bug fixes, not new features. Except for #34568 (already merged) they are not breaking changes, so they if they don't make it into v31.0, they can safely be back-ported for v31.1. But it's better if they do make it.  \n\n- [ ] #34284\n- [ ] https://github.com/bitcoin-core/libmultiprocess/pull/240\n  - [ ] #34422\n- [x] #34568\n  - [ ] #34184\n\n---\n\n**Non-breaking changes for later releases**\n\nThe changes below are not breaking, unless mentioned otherwise. Adding new methods or new arguments to existing methods is not a breaking change.\n\n- [x] #33965 \n  - [ ] #33966\n- [ ] #34020\n- [ ] #33899\n  - [ ] #33922\n- [ ] #33756 \n\nAt this state it's OK to make breaking changes, such as deleting a method or changing its signature. But ideally we should do so once in a major release, collecting a bunch of fixes.\n\nMisc related:\n\n- [ ] #30437",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-04T15:05:33Z",
      "updated_at": "2026-02-20T12:07:25Z",
      "closed_at": null,
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/issues/33777",
      "labels": [
        "Mining",
        "interfaces",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3933434789,
          "user": "Sjors",
          "body": "And the merging continues!\n\nI added a \"Priority changes for v31\" section at the top.\n\nI dropped https://github.com/Sjors/bitcoin/commit/2ece972a3f78cb7faaf75b6271016316ead572f4 and https://github.com/Sjors/bitcoin/pull/106/changes/40d1886584d3d7c89fa5656e325222edd51c2f89 from the overview because I don't think they're very useful:\n- clients should not use `getBlock()` to get the (dummy) coinbase transaction, but we can make that clear in documentation.\n- we could omit the witness op_return for empty blocks, but we almost never produce those anyway and there's no need to save space in an empty block",
          "created_at": "2026-02-20T11:39:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 605,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1248,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3966579468,
      "number": 34629,
      "title": "interfaces/wallet: replace raw receive-request string APIs with typed methods",
      "body": "### Please describe the feature you'd like to see added.\n\nAdd typed receive-request APIs to interfaces::Wallet so GUI code passes normal fields (address, label, message, amount, date) instead of serialized blobs.\n\n### Is your feature related to a problem, if so please describe it.\n\nThe current interface uses raw strings for receive requests, and GUI code serializes/de-serializes RecentRequestEntry itself. That couples GUI code to wallet storage format and makes format changes risky. Gui actually crashes if it can't de-serialize the string.\n\n### Describe the solution you'd like\n\nAdd typed wallet methods for receive requests (list/save/delete). UI interfacing with the wallet should have clean types/objects so it knows exactly what to expect.\n\nThe wallet should likely also be responsible for assigning ids, handle legacy entries, and deal with compatibility.\n\n### Describe any alternatives you've considered\n\nKeep the current string API and just harden GUI parsing. GUI still owns the storage format, though, and you just have to hope all of the user interfaces interacting with the wallet data are serializing the data in the same way.\n\n### Please leave any additional context\n\n_No response_",
      "state": "open",
      "user": "johnny9",
      "created_at": "2026-02-20T04:52:56Z",
      "updated_at": "2026-02-20T07:18:11Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34629",
      "labels": [
        "Feature",
        "Wallet",
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1278,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3747139562,
      "number": 34114,
      "title": "log: frequent `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs as `net:warning`",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nOn my node at home (not a monitoring node), I'm seeing three `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs every five minutes logged as `net:warnings`. I think that's too frequent.\n\n```\n...\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:00:54Z Flushed fee estimates to fee_estimates.dat.\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n...\n```\n\n### Expected behaviour\n\nFewer of the pcp warnings.\n\n### Steps to reproduce\n\nRun a node behind a router that returns NOT_AUTHORIZED for PCP (?)\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv30.0 (via nixpkgs)\n\n### Operating system and version\n\nNixOS\n\n### Machine specifications\n\nMachine is behind a home internet router with PCP disabled by default.  I'm running the node with `txindex=1`, `addnode`, and otherwise default configuration.",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-19T11:16:06Z",
      "updated_at": "2026-02-20T00:58:08Z",
      "closed_at": "2026-02-20T00:58:08Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34114",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2929,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3931343578,
      "number": 34573,
      "title": "bug: uncaught exception from RPC invocation during shutdown",
      "body": "The new thread pool introduced in https://github.com/bitcoin/bitcoin/pull/33689 [will throw an exception](https://github.com/bitcoin/bitcoin/blob/07b924775e4ff5dbfb9f2e7549fd13db8ec5c61b/src/util/threadpool.h#L162) (which will not be caught and lead to an unclean exit) if an RPC is called during shutdown.\n\n```\n2026-02-11T18:56:34Z [http:debug] Received a POST request for / from 10.89.0.6:58998\n2026-02-11T18:56:34Z [http:debug] Interrupting HTTP server\n2026-02-11T18:56:34Z [rpc:debug] Interrupting HTTP RPC server\n2026-02-11T18:56:34Z [all:info] http_pool_1 thread exit\n2026-02-11T18:56:34Z [all:info] http_pool_0 thread exit\n2026-02-11T18:56:34Z [rpc:debug] Interrupting RPC\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  No active workers; cannot accept new tasks\n```\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*\n",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2026-02-12T11:31:49Z",
      "updated_at": "2026-02-19T20:41:23Z",
      "closed_at": "2026-02-19T20:41:23Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/34573",
      "labels": [
        "Bug",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 946,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3949157462,
      "number": 34601,
      "title": "bitcoind sync gets very, very slow on Augst 2023 in btc chain (maybe 2/3 progressed or something like that)",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nbitcoind sync gets very, very slow on Augst 2023 in BTC chain (maybe 2/3 progressed or something like that)\n\nEarlier (e.g. first sync in 2024), it was faster, but i also used another version there. the version i use now, is v30.99.0-0ffb20dee178 (self-compiled from master branch)\n\nAND: i also changed my HW: From SSD SATA on LSI SATA-3 controller to a Seagate video SATA-33 HDD on UBS 2.0 controller (because it can bypass the to VM on VirtualBox 7.2.x on MS Window$ (maybe on Linux, i would be able to bypass PCI SATA devices or VHD files in a raw mode - but on Windows, PCIE SATA bypass is not supported and VHD file raw mode is not cleanly implemented. So i need to use USB drives to bypass it completely/in a raw mode)\n\n(But i don't think that is the problem TBH)\n\n**Currently, it needs ~1 day for 1 day in block chain:** On 2026-02-06, on blockchain it was on 2023-08-05 and now we have 2026-02-16 and blockchain sync is on 2023-08-19. **Which means, it will result in an infinite process** \n\n### Expected behaviour\n\nShould be synced in maybe 2-3 weeks maximum so i think, similar to the last sync (2024 when i remember right? But it was another version, don't know that's the reason or not?).\n\n### Steps to reproduce\n\nbitcoind sync gets very, very slow on Augst 2023 in BTC chain (maybe 2/3 progressed or something like that)\n\nEarlier (e.g. first sync in 2024), it was faster, but i also used another version there. the version i use now, is v30.99.0-0ffb20dee178 \n\nAND: i also changed my HW: From SSD SATA on LSI SATA-3 controller to a Seagate video SATA-33 HDD on UBS 2.0 controller (because it can bypass the to VM on VirtualBox 7.2.x on MS Window$ (maybe on Linux, i would be able to baypass PCI SATA devices or VHD files in a raw mode - but on Windows, PCIE SATA bypass is not supported and bypass file raw mode is not cleanly implemented. So i need to use USB drives to bypass it completely/in a raw mode)\n\n(But i don't think that is the problem TBH)\n\n**Currently, it needs ~1 day for 1 day in block chain:** On 2026-02-06, on blockchain it was on 2023-08-05 and now we have 2026-02-16 and blockchain sync is on 2023-08-19. **Which means, it will result in an infinite process** \n\n### Relevant log output\n\n<!-- Failed to upload \"debug.zip\" -->\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv30.99.0-0ffb20dee178\n\n### Operating system and version\n\nDebian 12.x x64, most current version, with most current updates\n\n### Machine specifications\n\n**PRIMERGY TX120 S3 Server with 4-core (8 virt. Cores) Xeon, 32GB of RAM**",
      "state": "open",
      "user": "kosuodhmwa",
      "created_at": "2026-02-16T19:00:43Z",
      "updated_at": "2026-02-19T18:42:03Z",
      "closed_at": null,
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/issues/34601",
      "labels": [
        "Resource usage",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3910093878,
          "user": "kosuodhmwa",
          "body": "PS: I was not able to attach zipped debug log here. Got an error message... \n\nHERE, because of that issue: \nhttps://limewire.com/d/5xAA1#NmroMAVYvc ",
          "created_at": "2026-02-16T19:01:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 148,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3910139705,
          "user": "sipa",
          "body": "What is your `dbcache` setting set to?",
          "created_at": "2026-02-16T19:08:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 38,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3910171577,
          "user": "sipa",
          "body": "Based on your debug.log, it looks like you have the default dbcache setting, 450 MiB. With that much RAM, I recommend setting it to `dbcache=10000` or so, to cache most of the chainstate in memory.",
          "created_at": "2026-02-16T19:13:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 197,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3910191268,
          "user": "l0rinc",
          "body": "> to cache most of the chainstate in memory\n\nYeah, especially for a HDD through a USB 2.\n\n> the version i use now, is v30.99.0-0ffb20dee178\n\nThat's very recent, basically a month old: https://github.com/bitcoin/bitcoin/commit/0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2",
          "created_at": "2026-02-16T19:17:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3910290699,
          "user": "kosuodhmwa",
          "body": "Thank you very much for your fast feedback! :-) \n\n**bitcoin.conf's content:**\n\n´´´\nroot@debian12-btc-node:~/.bitcoin# cat  bitcoin.conf\n# --- Core ---\nserver=1\ntxindex=1\ndisablewallet=1\n\n# --- Netzwerk ---\nlisten=1\nbind=127.0.0.1\n#bind=192.168.1.174\nrpcbind=127.0.0.1\n#rpcbind=192.168.1.174\n\n# --- RPC / REST (für lnd) ---\nrpcuser=.....\nrpcpassword=.....\nrpcallowip=127.0.0.1\n#rpcallowip=192.168.1.174\n#rpcallowip=192.168.1.0/24\nrest=1\n\n# --- Whitelisting ---\nwhitelist=127.0.0.1\n#whitelist=192.168.1.174\n#whitelist=192.168.1.0/24\n\n# --- Tor ---\nproxy=127.0.0.1:9050\nlistenonion=1\nonlynet=onion\n\n# --- Pfade ---\ndatadir=/root/.bitcoin\n´´´\n\n**_\"That very recent, basically a month old: https://github.com/bitcoin/bitcoin/commit/0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2\"_**\n\nYes, i also had the same problem before with a version that was a few monts old. Because of that, i used the latest master branch when i tried to solve the problem a few weeks ago.",
          "created_at": "2026-02-16T19:50:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 953,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3910294441,
          "user": "kosuodhmwa",
          "body": "OK, so i will cancel the process now, the add \"dbcache=10000\", then start it again... :-) ",
          "created_at": "2026-02-16T19:51:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 90,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3910303898,
          "user": "kosuodhmwa",
          "body": "**so bitcoind.conf is now like that:** \n\n´´´\n# --- Core ---\nserver=1\ntxindex=1\ndisablewallet=1\ndbcache=10000\n\n# --- Netzwerk ---\n...\n...\n...\n´´´",
          "created_at": "2026-02-16T19:54:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 144,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3913039660,
          "user": "l0rinc",
          "body": "Did it improve? Expect that when the in-memory data gets dumped again (after the 10 GB dbcache gets filled), the process will \"freeze\" for a long time - should still be a lot faster than dumping every time the 450 MB dbcache gets full.",
          "created_at": "2026-02-17T08:26:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 235,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3914772345,
          "user": "kosuodhmwa",
          "body": "Hmmm... still slow so it seems, now i'm on 2023-08-21 in block chain sync... yesterday, so before that setting change, it was on 2023-08-19 :-( ",
          "created_at": "2026-02-17T13:41:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 144,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3914779226,
          "user": "kosuodhmwa",
          "body": "Maybe a lil bit faster - without setting change, i would maybe still on 2023-08-19 or on 2023-08-20... instead of 21th",
          "created_at": "2026-02-17T13:43:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 118,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3914820059,
          "user": "willcl-ark",
          "body": "I think here you have essentially stacked every possible (random IO) performance-related bottleneck that I know of :(\n\n- spinning HDD (probably totally dominated by random reads/writes to the LevelDB)\n- USB 2.0 (extra latency per IO operation, very slow random IO)\n- VirtualBox (another layer of IO overhead)\n- tor (possibly contributing, possibly not)\n- `txindex=1` even more random IO via the above for another DB\n- (previously) `dbcache=450` - increasing random IO needed even further\n\nI think you may have addressed the final point in increasing that value, but I think with the rest iof the stack remaining, you are still not going to have a good time.\n\nI don't think this is anything that can be solved on our side, and it needs hardware/configuration  to be changed. The other low-hanging fruit could be to disable `txindex` and see if that speeds it up (and re-enable after you are synced). But I suspect without addressing other bottlenecks you might still not have a great time.",
          "created_at": "2026-02-17T13:52:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 988,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3914933871,
          "user": "l0rinc",
          "body": "> you have essentially stacked every possible (random IO) performance-related bottleneck that I know of\n\nExcept for swapping (probably) :D\n\nIt might even be faster for you to restart IBD and do everything in-memory with a high dbcache",
          "created_at": "2026-02-17T14:15:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 234,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3915135767,
          "user": "maflcko",
          "body": "I think increasing dbcache will not affect IO write requirements? After https://github.com/bitcoin/bitcoin/pull/30611, a write will happen every hour, which seems more frequent than write  due to a full dbcache? Also, restarting to increase dbcache will clear the dbache, so everything will need to be read again into memory from HDD, which is slow.\n\n\nsince you already have an SSD, and have used it in the past, my recommendation would be to figure out how to use the SSD.\n",
          "created_at": "2026-02-17T14:45:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 474,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3921563388,
          "user": "darosior",
          "body": "> since you already have an SSD, and have used it in the past, my recommendation would be to figure out how to use the SSD.\n\nMaybe one pointer here. If you have a large-enough SSD to contain the chainstate (the UTxO database) but not the full block chain, consider pointing the `-datadir` to your SSD and the `-blocksdir` to the HDD.",
          "created_at": "2026-02-18T15:44:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 333,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3929165600,
          "user": "kosuodhmwa",
          "body": "OK, thx, firstly, my ideas was to use it for another device, but when formated it with \"low level format tool\" (on a usb 3 adapter on laptop), i saw that it only reaches ~40mb/s (adapter and/or laptop should not be the problem here). Usually, SSDs reach 300mb/s or something like that on that usb 3.0 adapter... so the SSD seems to be \"used\". \n\n**So i will buy a new one ASAP.** BTW: What is future-proof , maybe for the next ~5y? What do you think? 3TB is OK or better 4? (maybe difficult to say haha). And a \"small card size\" USB 3.0 adapter too.* \n\n\n\n*Maybe another detail, but it's not relevant i.m.o.: The adapter on the server where VirtualBox BTC node VM is has ONLY usb 2.0 ports, but the adapter i used is USB 3.0. (USB 2.0 speed in both cases..)",
          "created_at": "2026-02-19T18:40:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 755,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2807,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3542617139,
      "number": 33684,
      "title": "Async Payjoin",
      "body": "This issue is for the tracking and brainstorming of the implementation of [BIP 77 Async Payjoin](https://github.com/bitcoin/bips) into the wallet.\n\n***\n\n- [ ] HPKE #32617 \n- [ ] The rest :)\n\n***\n\nAsync Payjoin utilizes an external Directory server to allow the Sender and Receiver to communicate with each other without needing to operate any infrastructure. The servers are reached using [RFC 9458 Oblivious HTTP (OHTTP)](https://www.ietf.org/rfc/rfc9458.html) relays to avoid revealing the IPs of the Sender and Receiver to the Directory. All communication between the Sender or Recevier to the OHTTP Relay is encrypted, as described in the OHTTP RFC. Additionally, the payload data itself is encrypted with methodology similar to OHTTP to prevent the Directory from being able to read the transaction data.\n\nThe cryptography uses things that we already have in the project. Specifically, all keys used are EC keys on secp256k1, keys are exchanged using DH, and encryption is done with ChaCha20Poly1305. Pubkeys included directly in the payload (ephemeral keys used to do additional key exchanges for responses) are encoded with ElligatorSwift. All of these algorithms are already included in the project to support BIP 324, so it should not be difficult to reuse them for Async Payjoin.\n\nOHTTP itself is encrypted using the aforementioned cryptography. It uses plain HTTP, not HTTPS, so there is no need to include anything related to TLS.\n\n***\n\nThe general operation of Async Payjoin is:\n1. The Receiver produces a Bitcoin URI containing a parameter which includes the URL of a mailbox endpoint on a Directory server (i.e. some URL for the Sender to POST to). The URL additionally contains the public key of the Directory itself, and an ephemeral(ish)public key of the Receiver.\n2. The Receiver provides the URI to the Sender out of band.\n3. The Sender generates an ephemeral public key, performs a key exchange with the Receiver's ephemeral key to compute a shared secret. This shared secret is used with ChaCha20-Poly1305 to encrypt:\n   * A new ephemeral pubkey for the key exchange for the reply (Reply Key)\n   * The Original PSBT which pays the receiver\n4. The Sender connects to the specified Directory server via a OHTTP Relay, performing a DH key exchange with the Directory public key, and encrypting the ElligatorSwift encoding of their Reply Key and the encrypted payload produced in the previous step. The payload is POSTed to the specified mailbox endpoint.\n5. The Receiver polls the Directory server at the mailbox endpoint until it receives the Sender's payload.\n6. The Receiver performs DHKE with the Sender's ephemeral key, then decrypts the encrypted payload.\n7. The Receiver produces a Proposal PSBT which is the Sender's Original PSBT modified with the Receiver's inputs and outputs, as well as any necessary signatures and witnesses.\n8. The Receiver generates a new ephemeral key to perform DHKE with the Sender's Reply Key, and uses the shared secret to encrypt their Proposal PSBT\n9. The Receiver connects to the previously specified Directory via a OHTTP Relay, and provides an encapsulated payload of the ElligatorSwift encoding of their ephemeral key. The payload is POSTed to a new mailbox endpoint derived from the Sender's Reply Key.\n10. The Sender polls the Directory server at the mailbox endpoint derived from their Reply Key until it receives the Receiver's payload.\n11. The Sender performs DHKE with the Receiver's new ephemeral key, decrypts the Proposal PSBT, validates and signs it. The Sender broadcasts the final transaction.\n\nAdditionally, the original Bitcoin URI contains an expiration time. This is used by both the Sender and Receiver to have a timeout on polling the Directory. The Receiver can also broadcast the Original PSBT and the Sender should stop polling if it sees that be broadcast.\n\n***\n\nThere are a few questions that need to be answered for implementing Async Payjoin\n\n* If we are the Receiver, how do we get the pubkey of the Directory. Some suggestions are:\n  * The user gets it out of band somehow\n  * OHTTP specifies a way to do key discovery by querying the server directly without OHTTP. But this both requires TLS, and reveals our IP unless some other IP hiding method is used.\n  * A set of keys are hard coded into the software. (ew)\n* How do we choose which OHTTP relay to use?\n* What is the polling interval?\n* What shows in the GUI when we are waiting for and polling the Directory, for both Receivers and Senders?\n* We should not be automatically signing transactions for our users:\n  * How will Senders using the GUI be notified and prompted when a reply is received so that the PSBT can be signed?\n  * How will Senders using the CLI know when a reply was received and that a PSBT needs to be signed?",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-10-22T23:06:58Z",
      "updated_at": "2026-02-19T18:11:57Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/33684",
      "labels": [
        "Feature",
        "Wallet",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3920584299,
          "user": "fanquake",
          "body": "Doesn't seem like there was any conclusion here. @hebasto can you clarify what the status of any of the GUIs are, and where developers should direct development & new features?",
          "created_at": "2026-02-18T12:33:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 176,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3928920481,
          "user": "achow101",
          "body": "Implementing this is not contingent on any of the GUIs. It needs to be in the wallet first, before the GUI can use it. The questions regarding the GUI are there to prompt some thought on that, but are not blockers.",
          "created_at": "2026-02-19T18:00:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 214,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3928937583,
          "user": "fanquake",
          "body": "> Implementing this is not contingent \n\nImplementing this is contingent on a plan for how it's going to ship, and what dependencies it needs. That includes a GUI discussion, which seems important, if the plan is for this feature to be exposed to non technical users.",
          "created_at": "2026-02-19T18:02:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3928990512,
          "user": "achow101",
          "body": "> Implementing this is contingent on a plan for how it's going to ship,[...] That includes a GUI discussion, which seems important, if the plan is for this feature to be exposed to non technical users.\n\nSure, but they are not so intrinsically linked that that discussion is a blocker. The plan is to make the feature available on both RPC and GUI. Which GUI it gets implemented on doesn't matter, and really only depends on what GUI we're supporting by the time we get to implementing that. Implementing in the GUI is basically the last step of this.\n\n> and what dependencies it needs\n\nIt doesn't need any new dependencies.",
          "created_at": "2026-02-19T18:11:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 623,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4788,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 168534134,
      "number": 8437,
      "title": "Separate resource usage profiles",
      "body": "There has been talk before (and I'm surprised to not find an existing issue about it) of having different memory usage profiles. This could encompass defaults for:\n- `-dbcache`\n- `-par`\n- `-maxsigcachesize`\n- `-maxmempool`\n- `-maxorphantx`\n- `-maxconnections`\n- `-maxreceivebuffer`\n- `-maxsendbuffer`\n\nFor desktop systems, autodetecting could be used to determine optimal settings. For servers, it could be specified on the command line. I have heard about interest in a means for specifying \"Just use all the memory I have\".\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2016-07-31T19:34:44Z",
      "updated_at": "2026-02-19T16:33:08Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/8437",
      "labels": [
        "Feature",
        "Resource usage",
        "Settings"
      ],
      "comment_data": [
        {
          "id": 3928387714,
          "user": "darosior",
          "body": "This was brought up again during [today's IRC meeting](https://www.erisian.com.au/bitcoin-core-dev/log-2026-02-19.html).",
          "created_at": "2026-02-19T16:33:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 120,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 559,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3963276355,
      "number": 34624,
      "title": "Intermittent shutdown deadlock (in wallet_multiwallet.py; AssertionError: [node 0] bitcoind should have exited within 4800s with expected error Error: Specified -walletdir \"wallets\" is a relative path)",
      "body": "Not sure how this could happen https://github.com/bitcoin/bitcoin/actions/runs/22177363139/job/64129376799?pr=34533#step:9:6127\n\nIt looks like the error is properly printed, and the node starts to shut down, but it deadlocks after `[http] [httpserver.cpp:299] [ThreadHTTP] [http] Exited http event loop`:\n\n```\nnode0 2026-02-19T10:43:28.250836Z [init] [httpserver.cpp:435] [StartHTTPServer] Starting HTTP server with 2 worker threads \nError:  node0 2026-02-19T10:43:28.250951Z [init] [noui.cpp:31] [noui_ThreadSafeMessageBox] [error] Specified -walletdir \"wallets\" is a relative path \n node0 2026-02-19T10:43:28.250982Z [init] [httpserver.cpp:442] [InterruptHTTPServer] [http] Interrupting HTTP server \n node0 2026-02-19T10:43:28.250988Z [init] [httprpc.cpp:349] [InterruptHTTPRPC] [rpc] Interrupting HTTP RPC server \n node0 2026-02-19T10:43:28.250993Z [init] [rpc/server.cpp:284] [operator()] [rpc] Interrupting RPC \n node0 2026-02-19T10:43:28.251002Z [init] [init.cpp:292] [Shutdown] Shutdown in progress... \n node0 2026-02-19T10:43:28.251009Z [shutoff] [httprpc.cpp:354] [StopHTTPRPC] [rpc] Stopping HTTP RPC server \n node0 2026-02-19T10:43:28.251016Z [shutoff] [httpserver.cpp:699] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for / (exactmatch 1) \n node0 2026-02-19T10:43:28.251021Z [shutoff] [httpserver.cpp:699] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for /wallet/ (exactmatch 0) \n node0 2026-02-19T10:43:28.251027Z [shutoff] [rpc/server.cpp:296] [operator()] [rpc] Stopping RPC \n node0 2026-02-19T10:43:28.251076Z [http_pool_0] [util/thread.cpp:20] [TraceThread] http_pool_0 thread start \n node0 2026-02-19T10:43:28.251083Z [http_pool_0] [util/thread.cpp:22] [TraceThread] http_pool_0 thread exit \n node0 2026-02-19T10:43:28.251106Z [http] [httpserver.cpp:296] [ThreadHTTP] [http] Entering http event loop \n node0 2026-02-19T10:43:28.251158Z [http_pool_1] [util/thread.cpp:20] [TraceThread] http_pool_1 thread start \n node0 2026-02-19T10:43:28.251167Z [http_pool_1] [util/thread.cpp:22] [TraceThread] http_pool_1 thread exit \n node0 2026-02-19T10:43:28.251344Z [shutoff] [rpc/server.cpp:298] [operator()] [rpc] RPC stopped. \n node0 2026-02-19T10:43:28.251350Z [shutoff] [httpserver.cpp:453] [StopHTTPServer] [http] Stopping HTTP server \n node0 2026-02-19T10:43:28.251355Z [shutoff] [httpserver.cpp:455] [StopHTTPServer] [http] Waiting for HTTP worker threads to exit \n node0 2026-02-19T10:43:28.251502Z [http] [httpserver.cpp:299] [ThreadHTTP] [http] Exited http event loop \n test  2026-02-19T12:03:28.189795Z TestFramework (ERROR): Unexpected exception: \n                                   Traceback (most recent call last):\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/wallet_multiwallet.py\", line 168, in run_test\n                                       self.nodes[0].assert_start_raises_init_error(['-walletdir=wallets'], 'Error: Specified -walletdir \"wallets\" is a relative path', cwd=data_dir())\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_node.py\", line 762, in assert_start_raises_init_error\n                                       self._raise_assertion_error(assert_msg)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_node.py\", line 229, in _raise_assertion_error\n                                       raise AssertionError(self._node_msg(msg))\n                                   AssertionError: [node 0] bitcoind should have exited within 4800s with expected error Error: Specified -walletdir \"wallets\" is a relative path (cmd: ['bitcoin', '-m', 'node', '-datadir=/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/test_runner/test_runner_₿_🏃_20260219_103433/wallet_multiwallet_253/node0', '-logtimemicros', '-debug', '-debugexclude=libevent', '-debugexclude=leveldb', '-debugexclude=rand', '-uacomment=testnode0', '-logthreadnames', '-logsourcelocations', '-loglevel=trace', '-nologratelimit', '-v2transport=0', '-walletdir=wallets'])",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-19T14:29:23Z",
      "updated_at": "2026-02-19T14:59:23Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34624",
      "labels": [
        "Wallet",
        "macOS",
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4893,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1712437859,
      "number": 27677,
      "title": "Proposal for a new mempool design",
      "body": "@sipa and I gave a presentation to some other developers recently about some work we've been doing to redesign how the mempool works, and I wanted to share a writeup outlining our thoughts with a broader audience to further the discussion.  I've also attached a PDF of slides that go along with this: [Reinventing the Mempool.pdf](https://github.com/bitcoin/bitcoin/files/11490409/Reinventing.the.Mempool.pdf).\r\n\r\n--------\r\n\r\n# Summary\r\n\r\nThe current mempool is primarily designed around maintaining two different sort orders, where for each transaction we keep track of its position in an ancestor-feerate-sort and in a descendant-feerate-sort.  We then use those two cached sort orders in order to implement eviction and mining.\r\n\r\nThose algorithms are deficient in several ways. In particular, the eviction algorithm (which removes the transaction with lowest descendant feerate, along with its descendants) does not guarantee that the first transaction evicted would be the last transaction mined, and there exist situations where we could evict a transaction that would otherwise actually be mined in the next block.\r\n\r\nFurthermore, the mining algorithm is more complex than the ancestor feerate sort we maintain, and it is insufficient to merely do lookups into our ancestor feerate index to determine which of two transactions will be mined from the mempool first. This lack of a total ordering on mempool transactions makes RBF calculations difficult to align with miner incentives, and creates distortions where we sometimes can replace transactions via RBF that would actually be better for a miner than the replacement.\r\n\r\nTo solve all these problems, we propose maintaining a total ordering on mempool transactions, which we use to implement a mining and eviction algorithm that are symmetrically opposite and provide better RBF rules for determining when to allow a replacement to occur.\r\n\r\n# Background\r\n\r\n## [Eviction and mining are not opposite](#eviction-mining-not-opposite)\r\n\r\nSometimes our eviction criteria might remove something that would be mined in the next block from our mempool. Consider the following transaction graph _(with (ancestor, descendant) feerates in sat/byte in parentheses)_:\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[\"Tx A: size 250, fee 250 (1, 2)\"]-->B;\r\n    A-->C;\r\n    A-->E[\"Tx E: size 250, fee 49750 (100, 199)\"];\r\n    B[\"Tx B: size 50000, fee 50000 (1, 2.02)\"]-->D[\"Tx D: size 500, fee 52000 (1.51, 104)\"];\r\n    C[\"Tx C: size 50000, fee 50000 (1, 2.02)\"]-->D;\r\n```\r\n\r\nNote that the ancestor feerate of E is 100 sat/byte, while the descendant feerate of A is 2 sat/byte.  In particular, the descendant feerate of A is lowest among all transactions in this diagram, so if it were also the lowest descendant feerate package in the mempool, then we might evict A, and therefore E, even though (A, E) might otherwise be selected for the next block.\r\n\r\n## RBF is not incentive compatible\r\n\r\nThere are many forms of incentive incompatibility baked into the BIP 125 replacement rules:\r\n * The \"no-new-parents\" rule doesn't consider the replacement transaction's desirability to a miner -- it might be better than all the to-be-replaced transactions, despite the new unconfirmed parent.\r\n * The rule requiring that a new transaction pays a higher feerate than its direct conflicts is insufficient to ensure that the new transaction is more desirable than what is being evicted. One of the direct conflicts could have a smaller set of unconfirmed parents than the new transaction, resulting in a higher ancestor feerate. Moreover, because we don't compare feerates of any indirect conflicts -- that is, descendants of direct conflicts -- with the feerate of the new transaction, it's possible that we're evicting a child transaction that would otherwise be mined in the next block with something that will not be mined for a long time.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/26451 for more discussion of the second point.\r\n\r\n# Proposed solution\r\n\r\nIf we're able to maintain a total ordering on the mempool, then we can design efficient algorithms that will solve these problems.\r\n\r\n## How to maintain a total ordering\r\n\r\nWith the current algorithm and rules, it is infeasible to continuously maintain a fully-ordered mempool at all times. Ordering an $n$-transaction mempool from scratch scales with $O(d n \\log n)$, where $d$ is the descendant limit (default 25), which quickly becomes too much when the mempool grows beyond a trivial size. And unfortunately, doing this incrementally (just re-ordering affected transactions whenever updates happen) does not help, because even a single added transaction can change the ordering of all remaining ones.\r\n\r\n[_Edited to use a better example_] As an example of this effect, consider the following transaction graph (all transactions are same size, with ancestor feerates of children in parentheses):\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[Tx A: fee 16]-->D[\"Tx D: fee 17 (16.5)\"];\r\n    A-->E[\"Tx E: fee 19 (16)\"];\r\n    B[Tx B: fee 13]-->E;\r\n    B-->F[\"Tx F: fee 23 (14.67)\"];\r\n    C[Tx C: fee 8]-->F;\r\n```\r\n\r\nWith these ancestor feerates, Tx D should be included first along with its parent Tx A. Once Tx A is included, Tx E will have the next highest ancestor feerate and it is included next with its parent, and so on to produce the ordering: [A, D, B, E, C, F].\r\n\r\nNow consider a single transaction being added, Tx G:\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[Tx A: fee 16]-->D[\"Tx D: fee 17 (16.5)\"];\r\n    A-->E[\"Tx E: fee 19 (16)\"];\r\n    B[Tx B: fee 13]-->E;\r\n    B-->F[\"Tx F: fee 23 (14.67)\"];\r\n    C[Tx C: fee 8]-->F;\r\n    C-->G[\"Tx G: fee 29 (18.5)\"]\r\n```\r\n\r\nTransaction G now has the highest ancestor feerate, and so it would be chosen first in our ancestor-feerate-based ordering. Once Tx G and its parent Tx C are included, Tx F will see its ancestor feerate increase (as it only has one remaining ancestor) to 18, making it the next best to include (along with its parent Tx B). Once Tx B is in, Tx E has the next highest ancestor feerate and we can see that the final ordering of transactions is: [C, G, B, F, A, E, D]. Note that the order in which the child transactions appear has been reversed, and moreover, the number of transactions in this graph could be extended arbitrarily while retaining this behavior.\r\n\r\nFundamentally this means that we need to bound the number of transactions whose ordering can be affected by individual changes to the mempool. Our main insight is that this number is exactly the size of the largest \"cluster\" of transactions that we might have in the mempool, where a \"cluster\" is a maximal set of transactions that are connected via ancestor/descendant relationships in the transaction graph.\r\n\r\nOur proposal is thus to introduce a limit on the size of clusters in the mempool. It then becomes feasible to maintain an ordering for all the individual clusters at all times, and perform a quick merge sort over all of them whenever a total ordering of the entire mempool is needed.\r\n\r\n### Definitions\r\n\r\n#### Clusters\r\n\r\nWe associate the transactions in the mempool with a graph, where each transaction corresponds to a vertex and two transactions are adjacent (ie have an edge between them) if one spends any outputs of the other. We say that two transactions are in the same cluster if there exists a path of edges between them. The overall graph of transactions is partitioned into disjoint clusters, where each transaction is in exactly one cluster. \r\n\r\n#### Linearizations\r\n\r\nWe introduce the term \"linearization\" to refer to any topologically valid ordering of transactions, that is, any ordering of transactions that would be valid in a block under Bitcoin's consensus rules. This could be an ancestor-feerate-based ordering of transactions (like we use in the mining code today), or it could be the optimal ordering (one where we choose amongst all possible subsets of transactions the topologically valid subset that maximizes feerate, and repeat until all transactions are selected).  Or it could be something in between; for the purposes of discussion we abstract away the details of the cluster ordering algorithm, or \"linearization\", that we might settle on.\r\n\r\n#### Chunks\r\n\r\nOur intuition for cluster linearization algorithms is that we often will choose transactions with lower feerate before we choose transactions with higher feerate, because of topology constraints. This is a consequence of behaviors like \"child- pays-for-parent\".  So when thinking about how we might compare transactions from two different clusters to determine which  one is \"better\" (eg for mining) or \"worse\" (eg for eviction), we don't just want to look at the first or last transaction in the cluster. Instead, our intuition is that we want to look at the same package of transactions that our ordering algorithm would have used in coming up with the ordering in the first place.\r\n\r\nThis concept, that transactions should be looked at in some aggregate with other transactions, can be generalized in a way that is indifferent to the underlying linearization algorithm that is used. For a given linearized cluster  $[tx_1, ..., tx_n]$, we can partition the cluster into a series of disjoint \"chunks\" $[c_1, c_2, ..., c_j]$ where $c_1 = [tx_1, ..., tx_{i_1}]$, $c_2 = [tx_{i_1+1}, ..., tx_{i_2}]$ ,..., $c_j = [tx_{i_{j-1}+1}, ..., tx_n]$, such that the feerate of each chunk is no greater than the feerate of the chunk that precedes it. \r\n\r\nAnother way of putting it: chunks are the partitioning of a cluster that respects the linearization in a way that ensures that feerates from one chunk to the next are monotonically decreasing.\r\n\r\n(_Note that due to ties there can be more than one chunking that is compatible with the given definition; generally we'll prefer smaller chunks and therefore not merge together chunks with the same feerate._)\r\n\r\nGiven any cluster linearization, it turns out that it's possible to construct the chunks for the cluster in linear time, and this operation is independent of the linearization algorithm that may have been used.\r\n\r\n### Implementing fundamental mempool operations\r\n\r\nFor the sake of discussion below, let's now imagine that our mempool is grouped into its different clusters, and each cluster is linearized using some algorithm (perhaps the ancestor-feerate-based mining algorithm in use today, or perhaps an optimal ordering), and those linearized clusters are each chunked into their monotonically decreasing feerate order.  Given such a mempool, we can design algorithms to implement the fundamental mempool operations.\r\n\r\n#### Mining\r\n\r\nOur goal with mining is to maximize the fees in a block template, and we do so by applying a greedy algorithm. \r\n\r\n1. Make a highest-feerate-sorted heap consisting of the first chunk from each cluster.  Note that these will be each cluster's highest feerate chunk.\r\n2. While the candidate block is not yet full:\r\n    i. Remove the top of the heap and add to the block candidate.\r\n    ii. If the cluster from which the selection was made has more chunks left, insert the next best chunk from that cluster into the heap.\r\n\r\nNote that when we approach the end of a block, we run into a knapsack problem where chunks may not fit. How we might optimize the end of a block is deferred for later discussion.\r\n\r\n#### Eviction\r\n\r\nOur goal with eviction is to remove the transactions that would be the last ones selected by our mining algorithm. With a  fully ordered mempool, this calculation is straightforward and mirrors the mining algorithm.\r\n\r\n1. Make a lowest-feerate-sorted heap consisting of the last chunk from each cluster. Note that these will be each cluster's lowest feerate chunk.\r\n2. While the mempool is over its size limit:\r\n    i. Remove the top of the heap and evict from the mempool.\r\n    ii. If the cluster from which the selection was made has more chunks left, insert the next lowest feerate chunk from that cluster into the heap.\r\n\r\nAs with our current eviction algorithm, we will also bump up the mempool's minimum fee to be an increment above the highest feerate chunk that was evicted.\r\n\r\n#### [RBF](#RBF)\r\n\r\nOur goal with RBF is to allow a \"better\" transaction (something a miner would prefer to have) to evict some existing, conflicting transactions in a way that is DoS-resistant but is otherwise as permissible as practical.\r\n\r\nGiven a mempool where all clusters are ordered and chunked, we can assign a score to a transaction which is the chunk feerate of the chunk to which it belongs.  Then our main RBF incentive compatibility rule just becomes:\r\n\r\n1. A replacement transaction must have a chunk feerate greater than that of all transactions which it would evict.\r\n\r\nThis would eliminate the BIP 125 rule against replacements introducing new unconfirmed parents and replaces the BIP 125 feerate rule in which a replacement transaction must have a higher individual feerate than all direct conflicts.\r\n\r\nHowever, at least for now, we would retain some of the additional anti-DoS rules:\r\n\r\n1. A replacement transaction must pay more total fees than the sum of fees paid by all evicted transactions.\r\n2. A replacement transaction must not evict more than (100?) existing transactions.\r\n\r\nThe first of those rules prevents free-relay attacks, while some version of the second rule is necessary to prevent us from needing to re-cluster/re-order too much of the mempool while processing a single transaction.\r\n\r\n## Some open questions\r\n\r\n1. Philosophically, is it problematic for RBF rules to be even more of a \"black box\" than the BIP 125 algorithm?\r\n2. Are there usage patterns for wallets or other protocols that would be fundamentally harmed by cluster size limits? Do we know what values would be acceptable or what values would be insufficient?\r\n3. What can we do if a high feerate transaction arrives that would violate the cluster limit? Can we design some sort of \"cluster-sibling eviction\" algorithm that is DoS-resistant and would help reduce the downsides of cluster size limits?\r\n4. Is it problematic if linearization algorithms used on the network are non-deterministic?\r\n   * We could imagine using a variety of linearization algorithms at any given moment -- perhaps for small clusters we use an exponential run-time optimal ordering algorithm, while for medium sized clusters we do something different, like an ancestor-feerate-based ordering, or an optimal ordering with some bounded computation limits.\r\n   * Are there situations where different nodes having different orders causes meaningful user-facing issues with transactions not relaying effectively, eg because of the use of chunk feerates in the RBF algorithm?\r\n6. Chunk sizes should be bounded in vbytes, so that we don't exacerbate the knapsack problem during mining. However, what is the best way to do that?\r\n   * We could just bound the vbytes allowed in a single cluster, which would guarantee that chunks are not too big.\r\n   * Or we could design linearization algorithms and adapt our chunking logic to never produce chunks bigger than a certain size -- but this would come at the expense of chunks within a cluster no longer having monotonically decreasing feerates. This may be possible to do, but is the need for large clusters (measured in vbytes) great enough to warrant the complexity that this would introduce in our algorithms?\r\n\r\n# Current status and next steps\r\n\r\n1. First draft implementation of this logic is done (link to be added).\r\n2. Analyzing effects of this logic on historical transaction data is in process, to try to answer questions like:\r\n   * How big are the clusters we've historically seen / what is the cluster size distribution on the network today\r\n   * How would the network have been affected if we'd had cluster sizes bounded at various different values in the past\r\n3. Performance analysis of all the mempool operations (particularly as a function of cluster size) to ensure that mempool operations are optimized with this approach.\r\n4. The information gathered will (eventually) inform a concrete proposal for what cluster size limits we might consider (along with chunk vbyte and/or cluster vbyte limits).\r\n",
      "state": "closed",
      "user": "sdaftuar",
      "created_at": "2023-05-16T17:29:33Z",
      "updated_at": "2026-02-19T10:06:00Z",
      "closed_at": "2026-02-19T10:06:00Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/issues/27677",
      "labels": [
        "Brainstorming",
        "Mempool"
      ],
      "comment_data": [
        {
          "id": 3926128160,
          "user": "fanquake",
          "body": "Closing. Any further discussion should should happen in #30289, or the remaining PRs.",
          "created_at": "2026-02-19T10:06:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 85,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 16174,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2353376259,
      "number": 30289,
      "title": "Cluster mempool tracking issue",
      "body": "What to review next:\n\n* #34616 \n\n---\n\nPlan:\n* Lowest level: generic utilities:\n  * [x] [#29242 FeeFrac type](https://github.com/bitcoin/bitcoin/pull/29242)\n    * [x] [#30535 Add FeeFrac::EvaluateFee](https://github.com/bitcoin/bitcoin/pull/30535)\n      * [x] [#32240 Fix integer overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32240)\n      * [x] [#32300 Fix different overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32300)\n  * [x] [#30160 BitSet type](https://github.com/bitcoin/bitcoin/pull/30160)\n  * [x] [#30161 VecDeque type](https://github.com/bitcoin/bitcoin/pull/30161)\n* Low level: operations on `DepGraph` type (dependencies/linearizations for a single cluster)\n  * [x] [#30126 Base linearization algorithm](https://github.com/bitcoin/bitcoin/pull/30126)\n    * [x] [#30605 Split tests from tests-of-tests](https://github.com/bitcoin/bitcoin/pull/30605)\n    * [x] [#30857 Extend `DepGraph` functionality](https://github.com/bitcoin/bitcoin/pull/30857)\n  * [x] [#30285 Merging and postprocessing of linearizations](https://github.com/bitcoin/bitcoin/pull/30285)\n  * [x] [#30286 Optimized candidate search](https://github.com/bitcoin/bitcoin/pull/30286)\n  * [x] [#32545 Replace linearization with SFL](https://github.com/bitcoin/bitcoin/pull/32545)\n    * [x] [#34259 SFL chunk minimization](https://github.com/bitcoin/bitcoin/pull/34259)\n  * [x] [#34023 SFL optimizations](https://github.com/bitcoin/bitcoin/pull/34023)\n  * [ ] [#34616 SFL cost model](https://github.com/bitcoin/bitcoin/pull/34616)\n    * ~~[#34138 Old version](https://github.com/bitcoin/bitcoin/pull/34138)~~\n* Intermediate level: operations on `TxGraph` type (dependencies/linearizations for the entire mempool)\n  * [x] [#31363 TxGraph basics](https://github.com/bitcoin/bitcoin/pull/31363)\n    * [x] [#32151 TxGraph basics follow-up](https://github.com/bitcoin/bitcoin/pull/32151)\n    * [x] [#32177 TxGraph increase fuzz coverage](https://github.com/bitcoin/bitcoin/pull/32177)\n    * [x] [#32191 Make TxGraph fuzzing more deterministic](https://github.com/bitcoin/bitcoin/pull/32191)\n    * [x] [#33354 Use enum Level instead of bool main_only](https://github.com/bitcoin/bitcoin/pull/33354)\n    * [x] [#33862 Drop support for `TxGraph::Ref` move assignment](https://github.com/bitcoin/bitcoin/pull/33862)\n    * ~~[#33335 Randomize order of transactions](https://github.com/bitcoin/bitcoin/pull/33335)~~\n    * [x] [#34257 Deterministic order of transactions](https://github.com/bitcoin/bitcoin/pull/34257)\n  * [x] [#31444 TxGraph mining/eviction](https://github.com/bitcoin/bitcoin/pull/31444)\n    * [x] [#33469 Use `std::unordered_set` for skipped clusters](https://github.com/bitcoin/bitcoin/pull/33469)\n  * [x] [#31553 TxGraph reorgs](https://github.com/bitcoin/bitcoin/pull/31553)\n  * [x] [#32263 TxGraph work controls](https://github.com/bitcoin/bitcoin/pull/32263)\n  * [x] [#33157 TxGraph memory usage](https://github.com/bitcoin/bitcoin/pull/33157)\n  * [x] [#34085 TxGraph exploiting SFL better](https://github.com/bitcoin/bitcoin/pull/34085)\n* High level: changes to mempool/validation/RPC\n  * [x] [#31122 Changesets for mempool](https://github.com/bitcoin/bitcoin/pull/31122)\n  * [x] [#33629 Cluster mempool implementation](https://github.com/bitcoin/bitcoin/pull/33629)\n    * ~~[#28676 Old version](https://github.com/bitcoin/bitcoin/pull/28676)~~\n  * [x] [#33591 Cluster mempool optimizations and cleanups](https://github.com/bitcoin/bitcoin/pull/33591)\n  * [x] [#34384 Remove epoch-based graph traversal](https://github.com/bitcoin/bitcoin/pull/34384)\n  * [ ] [#34615 Report mempool optimality](https://github.com/bitcoin/bitcoin/pull/34615)\n---\n\nIdeas for future follow-ups:\n* Clean up the comparison operators of `FeeFrac`, especially the `operator<<` and `operator>>`: https://github.com/bitcoin/bitcoin/pull/34257#discussion_r2780475893",
      "state": "open",
      "user": "sipa",
      "created_at": "2024-06-14T13:21:36Z",
      "updated_at": "2026-02-19T10:02:58Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/30289",
      "labels": [
        "Mempool",
        "Tracking Issue"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3904,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2066296124,
      "number": 29183,
      "title": "Prune Node Rescan Project Tracking",
      "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n#### What should I review now? \r\n\r\n👇 👇 👇 👇 \r\n-- #27837 --\r\n☝️ ☝️ ☝️ ☝️\r\n\r\n\r\nThe goal of this project is to enable complete blockchain rescan capability on prune nodes, allowing these storage-limited nodes to import new wallet descriptors and update existing ones at any time, as well as loading external and un-synced wallets with a birth-time older than 48 hours. This, in turn, enables the monitoring of new addresses/scripts and tracking balance changes without the need to repeatedly download the entire blockchain.\r\n\r\nThe first project milestone introduces the feature for prune nodes that construct and maintain a local block filters set database. The node will request and keep track of the missing historical blocks that match the wallet scripts filters set to subsequently perform the rescan.\r\n\r\n#### The following sections are ordered by their PRs dependencies:\r\n\r\n##### Net: Single Block Requests Tracking System and On Download Failure Retry Mechanism\r\n* [x] #28170\r\n* [x] #28120\r\n* [x] #30118\r\n* [ ] #27837\r\n\r\n##### Indexes Stability and Performance Improvements\r\n* [X] #27607\r\n* [X] #27720\r\n* [x] #28955\r\n* [ ] #26966\r\n\r\n##### Wallet Rescan (depends on the net section)\r\n* [X] #27469\r\n* [ ] Cache wallet filters' set and connect it to the current wallet rescan functionality. (Pending)\r\n* [ ] Wallet: implement \"rescan status\" class to track the progress and retrieve it via an RPC command. (Pending)\r\n* [ ] Wallet: introduce prune node rescan functionality. (Pending - depends on net changes)\r\n\r\n#### Issues Solved By This Work\r\n\r\n* [ ] #21267\r\n* [ ] #23727\r\n* [ ] #27188\r\n* [ ] #27652\r\n* [ ] #27939\r\n* [ ] https://github.com/sparrowwallet/sparrow/issues/1111#issuecomment-2054204911",
      "state": "open",
      "user": "furszy",
      "created_at": "2024-01-04T20:31:51Z",
      "updated_at": "2026-02-19T05:05:05Z",
      "closed_at": null,
      "comments": 17,
      "url": "https://github.com/bitcoin/bitcoin/issues/29183",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3921265159,
          "user": "darosior",
          "body": "I'm curious if a first step of simply downloading blocks for the desired interval, instead of using block filters, was considered. We already have access to a validated tip and a header chain, so we could download past blocks and scan them without re-validating them again. A second step could weigh whether introducing the complexity of client side filtering is worth the reduction in bandwidth usage. Finally, because this method would indiscriminately download blocks like in IBD, it would not be necessary to try and use an anonymization network.",
          "created_at": "2026-02-18T14:50:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 550,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3921929273,
          "user": "Sjors",
          "body": "> I'm curious if a first step of simply downloading blocks for the desired interval\n\nEssentially just unpruning all the way to the block where the wallet was last synced? That seems reasonable, but you'd want some user interaction if it's a big download. \n\nPerhaps a simple `unprune HEIGHT` RPC could be added? And then when wallet loading fails, it could suggest something like `Try the unprune HEIGHT rpc if you have X GB of free space` (anything is better than the current reindex suggestion).\n\nThe `unprune` RPC could prevent pruning while the node is running, so the user can do their wallet rescan. At the next restart things get pruned back, unless they change the `-prune` setting. ",
          "created_at": "2026-02-18T16:50:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 690,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3922199139,
          "user": "darosior",
          "body": "Not really, what i had in mind was rather to only temporarily download those blocks. That could be done in chunks of a day worth of blocks for instance (144 blocks), or anything that would be minimal disk space overhead anyways compared to the current size of the chainstate.",
          "created_at": "2026-02-18T17:34:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 275,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922229383,
          "user": "Sjors",
          "body": "Oh you mean a rolling window of ephemeral downloads during the rescan? That makes sense too, though we also wouldn't want to do that without prompting the user, since it can be a long and slow download.",
          "created_at": "2026-02-18T17:40:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 202,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3923437987,
          "user": "furszy",
          "body": "> I'm curious if a first step of simply downloading blocks for the desired interval, instead of using block filters, was considered. We already have access to a validated tip and a header chain, so we could download past blocks and scan them without re-validating them again.\n\nThe next unmerged step along this path adds the ability to request, track, and re-attempt block downloads (#27837), which is essentially what you are asking for, just extended with an interval locator on top.\nThe idea there was to separate the logic responsible for downloading best-chain blocks up to the tip from the logic responsible for downloading specific blocks, with the goal of having two structures answering the same question  \"what should download next\" in different ways and with different priorities.\n\nRe \"simply download blocks from the desired interval\" approach:\nI have always felt this wasn't really a complete feature, but more of a half-baked implementation of the real one, mainly because of the excessive bandwidth it would consume for older wallets. That said, it is doable.\n\nThe rolling/ephemeral window approach wouldn't work as you imagine. The wallet isn't loaded (we fail during load on prune nodes), so we can't notify and discard the blocks.\n\nThere is a good way we can implement this that is way more space-efficient than that. Basically, irrelevant blocks can be discarded immediately by storing the wallet's elements set (scripts hash-mapped into the filter space) within the interval tracking mechanism. This doesn't require a wallet to be loaded at all, and it enables additional use cases like running `scanblocks` on prune nodes and letting users query for txs relevant to given script(s) on the fly on prune nodes too.\n\nIf we have enough review power for this, I can update+rework #27837 (or open a new PR) to move us one step closer to the requested functionality, but we should coordinate to make sure we are using our time wisely.",
          "created_at": "2026-02-18T22:00:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1948,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3924704521,
          "user": "AndySchroder",
          "body": "> A second step could weigh whether introducing the complexity of client side filtering is worth the reduction in bandwidth usage\n\nWith blocks already downloaded, I can do a a full chain re-scan in a fairly short amount of time. See https://github.com/sparrowwallet/sparrow/issues/1368#issuecomment-2050047410 for some data. It seems to me if we are just re-scanning a specific wallet, the time would be much shorter. If a wallet only has 200 transactions and does need to download some blocks, I would think that would mean only 200 blocks need to be downloaded at most, right?",
          "created_at": "2026-02-19T05:01:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 578,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1819,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3846299633,
      "number": 34387,
      "title": "qa: failure in p2p_private_broadcast.py",
      "body": "Noticed on the test-each-commit job for #32857:\n\nhttps://github.com/bitcoin/bitcoin/actions/runs/21254115595/job/61163625701?pr=32857\n\n```\n node1 2026-01-22T16:33:40.225497Z [http] [httpserver.cpp:308] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:40648 \n node1 2026-01-22T16:33:40.225559Z [httpworker.1] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__ \n test  2026-01-22T16:33:40.276527Z TestFramework.utils (ERROR): wait_until() failed. Predicate: '''' \n                                           self.wait_until(lambda: len(tx_receiver.getrawmempool()) > 0)\n                                   '''\n test  2026-01-22T16:33:40.276665Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                     File \"/home/runner/work/bitcoin/bitcoin/ci_build/test/functional/p2p_private_broadcast.py\", line 331, in run_test\n                                       self.wait_until(lambda: len(tx_receiver.getrawmempool()) > 0)\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 746, in wait_until\n                                       return wait_until_helper_internal(test_function, timeout=timeout, timeout_factor=self.options.timeout_factor, check_interval=check_interval)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 420, in wait_until_helper_internal\n                                       raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\n                                   AssertionError: Predicate ''''\n                                           self.wait_until(lambda: len(tx_receiver.getrawmempool()) > 0)\n                                   ''' not true after 60 seconds\n test  2026-01-22T16:33:40.277541Z TestFramework (DEBUG): Closing down network thread \n test  2026-01-22T16:33:40.327831Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n```",
      "state": "open",
      "user": "Sjors",
      "created_at": "2026-01-23T07:56:48Z",
      "updated_at": "2026-02-18T19:47:39Z",
      "closed_at": null,
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/34387",
      "labels": [
        "CI failed"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2582,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2914790961,
      "number": 32045,
      "title": "Wallet migration includes rescan",
      "body": "Users may want to migrate legacy wallets they haven't used in years. The migration itself is typically very quick, but it's followed by a rescan (if the wallet is behind).\n\nDepending on whether the user has `-blockfilterindex` enabled, this rescan takes somewhere between long and really really long.\n\nThere's no visual indication, only the logs show what's going on:\n\n<img width=\"383\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/da911b44-8052-4b90-aa16-67625e550e3e\" />\n\nIdeally the migration should finish and then prompt the user that a rescan is about to happen. That way the user can abort the rescan and resume it some other time if it takes too long.\n\nAlternatively, the migrate wallet dialog could at least warn that a rescan is (or may be) happening and could take a while.\n\nFun aside: block filters don't work on legacy wallets, so it's much faster to first migrate and then rescan.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-12T18:14:56Z",
      "updated_at": "2026-02-18T18:45:44Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/32045",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3920596530,
          "user": "fanquake",
          "body": "This seems to be a request for a GUI change / feature, so I've moved it to: https://github.com/bitcoin-core/gui/issues/930.",
          "created_at": "2026-02-18T12:36:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 123,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922418010,
          "user": "achow101",
          "body": "This is not a GUI issue.",
          "created_at": "2026-02-18T18:20:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 24,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922434908,
          "user": "fanquake",
          "body": "It's asking for a visual indication. In the gui?",
          "created_at": "2026-02-18T18:24:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 48,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922445944,
          "user": "achow101",
          "body": "The underlying issue is in wallet migration which can be reached via CLI. The same old wallet migrated with `migratewallet` would do the rescan and take just as long, with no indication to the user.",
          "created_at": "2026-02-18T18:26:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 198,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922464780,
          "user": "fanquake",
          "body": "Sure, but I don't see how solving that for CLI/the daemon solves it for the GUI (and it's more than likely someone solving it for CLI, won't touch GUI code)? Code will have to be added to the GUI, whenever the relevant code is added to the daemon, to expose the required information. Maybe the issue on the code side can be renamed / reworked to make it clear that it isn't solving anything visual.",
          "created_at": "2026-02-18T18:31:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 398,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3922503237,
          "user": "achow101",
          "body": "Yes, code will have to be added to the GUI, but also code will have to be added to the wallet. Just because it has some GUI elements required at some point does not automatically make an issue a GUI issue. There are several wallet PRs which have GUI components with the GUI stuff pulled into a separate PR to the GUI repo. That doesn't make the issues that they resolve GUI issues. While the initial report is something observed in the GUI, and the requested solution is for something in the GUI, actually solving the issue requires significant changes to the wallet that are inappropriate for the GUI repo.\n\nYou can leave the GUI issue open if you really feel that strongly about it. Leave this one open too, otherwise I'll forget to come back to it later.",
          "created_at": "2026-02-18T18:38:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 757,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3922536024,
          "user": "fanquake",
          "body": "Yes, I think should be left open, as we've seen constantly, issues solved/features added to the daemon never end up in the GUI, so having issues on both sides make it clear what actually needs doing. ",
          "created_at": "2026-02-18T18:45:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 200,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 941,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3685537028,
      "number": 33994,
      "title": "Mining IPC `createNewBlock` should not return before IBD is over",
      "body": "### Please describe the feature you'd like to see added.\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Is your feature related to a problem, if so please describe it.\n\non SRI [`bitcoin_core_sv2`](https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2) crate, we want to wait for IBD is over as part of the bootstrapping processes\n\ndiscussing with @ismaelsadeeq and @Shourya742 during BTrust dev day, we came to the conclusion that `createNewBlock` shouldn't even return before IBD is over\n\n### Describe the solution you'd like\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Describe any alternatives you've considered\n\n`isInitialBlockDownload` is already available, but it would require us to poll it, which feels a bit backwards with capnproto\n\n### Please leave any additional context\n\nwe're getting reports of crashes when [`sv2-tp`](https://github.com/stratum-mining/sv2-tp) is connected to v30 during IBD\n\nhttps://discord.com/channels/950687892169195530/1179824984592490496/1445351230258937867",
      "state": "open",
      "user": "plebhash",
      "created_at": "2025-12-02T12:10:24Z",
      "updated_at": "2026-02-18T16:46:10Z",
      "closed_at": null,
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/issues/33994",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3921181871,
          "user": "plebhash",
          "body": "while testing on the [Sv2 Wizard](https://github.com/stratum-mining/sv2-wizard) (which automates deployments of the Sv2 stack, but does not assert IBD is done), we witnessed a segfault on Bitcoin Core 30.2 (which was still doing IBD)\n\n![Image](https://github.com/user-attachments/assets/baa94c49-0fb9-4f6c-aca8-2b7e770d3e00)\n\ncc @Sjors ",
          "created_at": "2026-02-18T14:34:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 336,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3921906569,
          "user": "Sjors",
          "body": "@plebhash a segfault after disconnect sounds like #34284, even if in a different code path. Let's see if that still happens after #34422 is merged.",
          "created_at": "2026-02-18T16:46:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 147,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1126,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2960274990,
      "number": 32173,
      "title": "validation: `CheckBlockIndex` crashes during block reconsideration",
      "body": "Functional test to reproduce:\n\n```python\nfrom test_framework.test_framework import BitcoinTestFramework\n\nclass CheckBlockIndexBug(BitcoinTestFramework):\n    def set_test_params(self):\n        self.setup_clean_chain = True\n        self.num_nodes = 1\n\n    def run_test(self):\n        self.generatetoaddress(self.nodes[0], 1, \"2N9hLwkSqr1cPQAPxbrGVUjxyjD11G2e1he\");\n        hashes = self.generatetoaddress(self.nodes[0], 1, \"2N9hLwkSqr1cPQAPxbrGVUjxyjD11G2e1he\");\n        self.generatetoaddress(self.nodes[0], 1, \"2N2CmnxjBbPTHrawgG2FkTuBLcJtEzA86sF\");\n\n        res = self.nodes[0].gettxoutsetinfo()\n        self.generatetoaddress(self.nodes[0], 3, \"2N9hLwkSqr1cPQAPxbrGVUjxyjD11G2e1he\");\n        self.log.info(self.nodes[0].invalidateblock(res[\"bestblock\"]))\n        self.generatetoaddress(self.nodes[0], 3, \"2N9hLwkSqr1cPQAPxbrGVUjxyjD11G2e1he\");\n        self.nodes[0].reconsiderblock(hashes[0])\n        self.nodes[0].invalidateblock(hashes[0])\n        self.log.info(self.nodes[0].reconsiderblock(res[\"bestblock\"]))\n\nif __name__ == '__main__':\n    CheckBlockIndexBug(__file__).main()\n```\n\nStack trace:\n```\nbitcoind: validation.cpp:5392: void ChainstateManager::CheckBlockIndex(): Assertion `(pindex->nStatus & BLOCK_FAILED_MASK) == 0' failed.\nAddressSanitizer:DEADLYSIGNAL\n=================================================================\n==3423379==ERROR: AddressSanitizer: ABRT on unknown address 0x000000343c93 (pc 0x7fb83abf0eec bp 0x7fb8348f16c0 sp 0x7fb8348efc30 T6)\n    #0 0x7fb83abf0eec  (/lib/x86_64-linux-gnu/libc.so.6+0x8aeec) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #1 0x7fb83aba1fb1 in raise (/lib/x86_64-linux-gnu/libc.so.6+0x3bfb1) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #2 0x7fb83ab8c471 in abort (/lib/x86_64-linux-gnu/libc.so.6+0x26471) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #3 0x7fb83ab8c394  (/lib/x86_64-linux-gnu/libc.so.6+0x26394) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #4 0x7fb83ab9aec1 in __assert_fail (/lib/x86_64-linux-gnu/libc.so.6+0x34ec1) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #5 0x5578f6306f64 in ChainstateManager::CheckBlockIndex() /bitcoin/build_fuzz/src/./validation.cpp:5392:13\n    #6 0x5578f62fe81a in Chainstate::ActivateBestChain(BlockValidationState&, std::shared_ptr<CBlock const>) /bitcoin/build_fuzz/src/./validation.cpp:3627:16\n    #7 0x5578f5d03436 in ReconsiderBlock(ChainstateManager&, uint256) /bitcoin/build_fuzz/src/./rpc/blockchain.cpp:1669:33\n    #8 0x5578f5e3fbc7 in reconsiderblock()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /bitcoin/build_fuzz/src/./rpc/blockchain.cpp:1694:5\n    #9 0x5578f5e3fbc7 in UniValue std::__invoke_impl<UniValue, reconsiderblock()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(std::__invoke_other, reconsiderblock()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14\n    #10 0x5578f5e3fbc7 in std::enable_if<is_invocable_r_v<UniValue, reconsiderblock()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>, UniValue>::type std::__invoke_r<UniValue, reconsiderblock()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(reconsiderblock()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9\n    #11 0x5578f5e3fbc7 in std::_Function_handler<UniValue (RPCHelpMan const&, JSONRPCRequest const&), reconsiderblock()::$_0>::_M_invoke(std::_Any_data const&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:9\n    #12 0x5578f717fe3a in std::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9\n    #13 0x5578f717fe3a in RPCHelpMan::HandleRequest(JSONRPCRequest const&) const /bitcoin/build_fuzz/src/./rpc/util.cpp:684:20\n    #14 0x5578f5dc8455 in CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /bitcoin/build_fuzz/src/./rpc/server.h:101:91\n    #15 0x5578f5dc8455 in bool std::__invoke_impl<bool, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(std::__invoke_other, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONR\nPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:61:14\n    #16 0x5578f5dc8455 in std::enable_if<is_invocable_r_v<bool, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>, bool>::type std::__invoke_r<bool, CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan\n(*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/invoke.h:114:9\n    #17 0x5578f5dc8455 in std::_Function_handler<bool (JSONRPCRequest const&, UniValue&, bool), CRPCCommand::CRPCCommand(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>::_M_invoke(std::_Any_data const&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:290:\n9\n    #18 0x5578f6177d47 in std::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9\n    #19 0x5578f6177d47 in ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) /bitcoin/build_fuzz/src/./rpc/server.cpp:512:20\n    #20 0x5578f6177d47 in ExecuteCommands(std::vector<CRPCCommand const*, std::allocator<CRPCCommand const*>> const&, JSONRPCRequest const&, UniValue&) /bitcoin/build_fuzz/src/./rpc/server.cpp:477:13\n    #21 0x5578f6176b16 in CRPCTable::execute(JSONRPCRequest const&) const /bitcoin/build_fuzz/src/./rpc/server.cpp:497:13\n    #22 0x5578f61759e6 in JSONRPCExec(JSONRPCRequest const&, bool) /bitcoin/build_fuzz/src/./rpc/server.cpp:353:31\n    #23 0x5578f6512301 in HTTPReq_JSONRPC(std::any const&, HTTPRequest*) /bitcoin/build_fuzz/src/./httprpc.cpp:217:21\n    #24 0x5578f653449f in std::function<bool (HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&)>::operator()(HTTPRequest*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) const /usr/lib/gcc/x86_64-linux-gnu/12/../../../../include/c++/12/bits/std_function.h:591:9\n    #25 0x5578f653449f in HTTPWorkItem::operator()() /bitcoin/build_fuzz/src/./httpserver.cpp:60:9\n    #26 0x5578f653c305 in WorkQueue<HTTPClosure>::Run() /bitcoin/build_fuzz/src/./httpserver.cpp:115:13\n    #27 0x5578f6526470 in HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) /bitcoin/build_fuzz/src/./httpserver.cpp:417:12\n    #28 0x7fb83af2c4a2  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xd44a2) (BuildId: 0c47cec75226c7736517d5acb61e373d541a5023)\n    #29 0x5578f56a1b06 in asan_thread_start(void*) asan_interceptors.cpp.o\n    #30 0x7fb83abef1f4  (/lib/x86_64-linux-gnu/libc.so.6+0x891f4) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #31 0x7fb83ac6f89b  (/lib/x86_64-linux-gnu/libc.so.6+0x10989b) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n```",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2025-03-31T11:50:20Z",
      "updated_at": "2026-02-18T15:48:04Z",
      "closed_at": "2026-02-18T15:48:04Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/32173",
      "labels": [
        "Bug",
        "Validation"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 8254,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2253240293,
      "number": 29914,
      "title": "RFC: In guix compile the GUI sequentially from everything else?",
      "body": "Compiling the GUI pulls in quite a few dependencies, which could theoretically include backdoors that are leaked into bitcoind (or other non-GUI utils) as well.\r\n\r\nA possible mitigation would be to compile the GUI in a separate guix container from the rest of the binaries. The downside would be that the node library, and the `depends` dependencies of the node library would have to be compiled twice, but the overhead may be worth it?\r\n\r\n(I won't be working on this, but I wanted to keep track of this in a brainstorming issue, as the topic has repeatedly come up)",
      "state": "open",
      "user": "maflcko",
      "created_at": "2024-04-19T15:07:18Z",
      "updated_at": "2026-02-18T15:47:52Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/29914",
      "labels": [
        "Brainstorming",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3921585808,
          "user": "fanquake",
          "body": "It seems like what we would end with is something like:\n* Guix env with minimal manifest (bitcoind & utils only) tooling\n* Build depends with NO_QT=1 \n* Build bitcoind and utils\n* Exit Guix\n* New Guix env with minimal manifest + Qt tooling/deps + any packaging tools (+ previously built bins)\n* Rebuild all of depends (likely forced given profile/env has changed) with QT=1\n* Build `bitcoin-qt` & `bitcoin-gui`\n* Build installers / perform packing\n* Exit Guix env\n\nSome other thoughts:\n- We'd (given static builds) end up with different sets of flags when building bitcoind + utils and bitcoin-qt / bitcoin-gui.\n- The security and symbol check scripts would need to be refactored to accomodate different binary types. i.e static vs not.\n- Building the installers (i.e windows) seems doable, as we can manually run NSIS on the bins. I'm not sure if that becomes easier, or harder if we migrate to CPack (a todo according to cmakelists).",
          "created_at": "2026-02-18T15:47:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 935,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 630,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2741254080,
      "number": 31506,
      "title": "test: different error message fails rpc_signer.py",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nOn my Ubuntu 24.04 system on running rpc_signer.py functional test (after compiling from source) fails the test which tests the case of missing script (on master and 28.x but passes on 27.x !) \r\nI tried running (with only regtest = 1 in bitcoin.conf)\r\n```\r\nbitcoind  -daemon  -signer=fake.py\r\nbitcoin-cli enumeratesigners\r\n```\r\nto get the following:\r\n```\r\nexecve failed: Not a directory (20)\r\n```\r\nwhich is different than what is asserted in the test.\r\nI tried compiling 28.x and master on a Ubuntu 24.04 VM running on Qemu/KVM and the test passes there.\r\n\r\nI followed all the steps for installing the dependencies mentioned in build-unix.md and checked the versions mentioned in dependencies.md . Also tried removing bitcoin and again compiling from source but the test still fails.\n\n### Expected behaviour\n\nThe functional test should pass just like it does on the CI. \n\n### Steps to reproduce\n\nI referred to build-unix.md for compile instructions and installing dependencies.\r\nFor master followed the following commands:\r\n```\r\ncmake -B build\r\ncmake --build build\r\ncmake --install build\r\nbuild/test/functional/rpc_signer.py\r\n```\r\nwhich gives basically the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/codingp110/bitcoin/build/test/functional/rpc_signer.py\", line 56, in run_test\r\n    assert_raises_rpc_error(\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/util.py\", line 151, in assert_raises_rpc_error\r\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/util.py\", line 166, in try_rpc\r\n    raise AssertionError(\r\nAssertionError: Expected substring not found in error message:\r\nsubstring: 'execve failed: No such file or directory'\r\nerror message: 'execve failed: Not a directory (20)'.\r\n```\r\nFor 28.x and 27.x (used git worktree to create separate directories and then git reset hard to overwrite with upstream/28.x and upstream/27.x):\r\n```\r\n./autogen.sh\r\n./configure\r\nmake\r\ntest/functional/rpc_signer.py\r\n```\r\n28.x gives similar error as master but 27.x passes!\n\n### Relevant log output\n\nrelevant log (master):\r\n```\r\n2024-12-16T02:42:47.859000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/util.py\", line 160, in try_rpc\r\n    fun(*args, **kwds)\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/authproxy.py\", line 146, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: execve failed: Not a directory (20) (-1)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/codingp110/bitcoin/build/test/functional/rpc_signer.py\", line 56, in run_test\r\n    assert_raises_rpc_error(\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/util.py\", line 151, in assert_raises_rpc_error\r\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/codingp110/bitcoin/test/functional/test_framework/util.py\", line 166, in try_rpc\r\n    raise AssertionError(\r\nAssertionError: Expected substring not found in error message:\r\nsubstring: 'execve failed: No such file or directory'\r\nerror message: 'execve failed: Not a directory (20)'.\r\n```\r\n\r\nrunning `bitcoind` with the `-signer=fake.py` and then getting strace output on running `enumeratesigners` rpc gave only the following major differences on master and 27.x\r\non master:\r\n```\r\nreadv(6, [{iov_base=\"HTTP/1.1 200 OK\\r\\nContent-Type: application/json\\r\\nDate: Sat, 14 Dec 2024 09:31:05 GMT\\r\\nContent-Length: 93\\r\\nConnection: close\\r\\n\\r\\n{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"error\\\":{\\\"code\\\":-1,\\\"message\\\":\\\"execve failed: Not a directory (20)\\\"},\\\"id\\\":1}\\n\", iov_len=220}], 1) = 220\r\n```\r\non 27.x\r\n```\r\nreadv(6, [{iov_base=\"HTTP/1.1 500 Internal Server Error\\r\\nContent-Type: application/json\\r\\nDate: Sat, 14 Dec 2024 09:32:19 GMT\\r\\nContent-Length: 96\\r\\nConnection: close\\r\\n\\r\\n{\\\"result\\\":null,\\\"error\\\":{\\\"code\\\":-1,\\\"message\\\":\\\"execve failed: No such file or directory\\\"},\\\"id\\\":1}\\n\", iov_len=242}], 1) = 242\r\n```\r\nbut on doing the same for master and 28.x on a VM(Ubuntu 24.04.1 LTS on VirtualBox) gave the same strace output as my system but with the correct error message.\r\n\r\nPS: The logs/outputs mentioned for master(except for the first one in this section) are old and not for master-b042c4f0538c\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv28.99.0-b042c4f0538c \n\n### Operating system and version\n\nUbuntu 24.04.1 LTS\n\n### Machine specifications\n\nOS: Ubuntu 24.04\r\nArchitecture:             x86_64\r\nCPU(s):                   8\r\nVendor ID:                GenuineIntel\r\n  Model name:             12th Gen Intel(R) Core(TM) i3-1215U",
      "state": "closed",
      "user": "110CodingP",
      "created_at": "2024-12-16T03:48:07Z",
      "updated_at": "2026-02-18T14:25:03Z",
      "closed_at": "2026-02-18T14:10:30Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31506",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3906971099,
          "user": "maflcko",
          "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?\n\n> but on doing the same for master and 28.x on a VM(Ubuntu 24.04.1 LTS on VirtualBox) gave the same strace output as my system but with the correct error message.\n\nThe fact that this stops reproducing as soon as you hop into a vm, and the fact that no one else reproduced this so far, makes me wonder if this is a local issue?",
          "created_at": "2026-02-16T07:58:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 430,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3921043412,
          "user": "110CodingP",
          "body": "This issue seems to be fixed as per [2706758](https://github.com/bitcoin/bitcoin/commit/2706758dc38c7a4e271d9df5ea3104b7135974f3). Feel free to close!",
          "created_at": "2026-02-18T14:09:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 150,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3921132313,
          "user": "maflcko",
          "body": "> This issue seems to be fixed as per [2706758](https://github.com/bitcoin/bitcoin/commit/2706758dc38c7a4e271d9df5ea3104b7135974f3). Feel free to close!\n\nNice. Thx for reporting back. The commit you link to is meant to be a refactor, which shouldn't change any behavior, so I'd be surprised if this was the exact commit that fixed it.\n\nIn any case, good to hear it is finally fixed",
          "created_at": "2026-02-18T14:25:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 381,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5631,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 507009636,
      "number": 17145,
      "title": "GUI event loop should be block free",
      "body": "When I created the bitcoin-qt GUI I made a big mistake in its design. I copied this more or less exactly from the wxwindows GUI. I was aware of this back in the day, but was planning to fix it later. I never got around to it. Honestly speaking I don't think I ever will.\r\n\r\nIn any case, the event loop in the main thread of a Qt program (or any GUI program, for that matter) is never supposed to block. Any operation that can take non-trivial time (even in the order of 40ms) should be executed asynchronously.\r\n\r\nWe have many such cases; not only when the user does an explicit operation such as send, but also in response to internal notiications, and automatic periodic polls for new transactions, the current balance, and so on (these can take longer due to `cs_main` lock contention: worst during initial sync and when catching up). Also at the start of the application. Pretty much all communication with the node and wallet happens in the GUI thread itself.\r\n\r\nThis is more \"redesign\" than \"refactor\", anyhow, and definitely not a \"good first issue\" it needs to happen at some point. Even more if we want [snazzy animations in the android GUI](https://github.com/bitcoin/bitcoin/pull/16883).\r\n\r\n(ref #17112 and plenty of other \"GUI not responding\" issues)",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2019-10-15T05:11:34Z",
      "updated_at": "2026-02-18T12:40:50Z",
      "closed_at": "2026-02-18T12:40:50Z",
      "comments": 28,
      "url": "https://github.com/bitcoin/bitcoin/issues/17145",
      "labels": [
        "Brainstorming",
        "GUI",
        "Refactoring"
      ],
      "comment_data": [
        {
          "id": 3920619714,
          "user": "fanquake",
          "body": "I guess this will be solved with QML, as that will be designed/implemented in such a way, that it just wont have this issue? My understanding is that such a change is not going to happen with the current Widgets GUI, at this point, so I think we can close this for now, and any efforts should be pointed to QML?",
          "created_at": "2026-02-18T12:40:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 311,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1298,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1173662670,
      "number": 24612,
      "title": "[flatpak]  - I cannot choose or change datadir when running from flatpak",
      "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nThe -choosedatadir Should allow me to choose the datadir. But it is not. It immediately starts downloading headers from the peers.\r\nThe chooses a predefined datadir in \r\n\r\n```\r\n~/.var/app/org.bitcoincore.bitcoin-qt$ ls\r\ncache  config  data\r\n```\r\n\r\n* I am unable to modify the datadir location when I run the client using flatpak (on PopOS).\r\n\r\n**To reproduce**\r\n\r\n1. Install flatpak client\r\n2. try the command\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\nEverytime.\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n1. PopOS, Flatpak version. Client information\r\n```\r\n$ flatpak run org.bitcoincore.bitcoin-qt -version\r\nBitcoin Core version v22.0.0\r\nCopyright (C) 2009-2021 The Bitcoin Core developers\r\n\r\nPlease contribute if you find Bitcoin Core useful. Visit\r\n<https://bitcoincore.org/> for further information about the software.\r\nThe source code is available from <https://github.com/bitcoin/bitcoin>.\r\n\r\nThis is experimental software.\r\nDistributed under the MIT software license, see the accompanying file COPYING\r\nor <https://opensource.org/licenses/MIT>\r\n\r\n```\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
      "state": "closed",
      "user": "orsenthil",
      "created_at": "2022-03-18T14:35:49Z",
      "updated_at": "2026-02-18T12:31:39Z",
      "closed_at": "2026-02-18T12:31:39Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/24612",
      "labels": [
        "Bug",
        "GUI"
      ],
      "comment_data": [
        {
          "id": 3920575648,
          "user": "fanquake",
          "body": "I've moved this over to the packaging repo: https://github.com/bitcoin-core/packaging/issues/332.",
          "created_at": "2026-02-18T12:31:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 97,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2465,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2990224395,
      "number": 32254,
      "title": "build: Android build and related stuff for `Qt 6.x`",
      "body": "## Summary\n\n- At the moment, Android build support was removed due to Qt 5.15’s limitations with NDK r25 and the migration to C++20 (as mentioned in #30049 #29360). \n\n- #30049 #29636  indicates that the removed components will be reinstated once the build system is migrated to CMake and Qt is upgraded to 6.x.\n\n- Are there any timelines or progress updates regarding the reintroduction of Android builds now that the transition to CMake is underway?\n\n",
      "state": "closed",
      "user": "naftalimurgor",
      "created_at": "2025-04-12T05:12:38Z",
      "updated_at": "2026-02-18T12:25:52Z",
      "closed_at": "2026-02-18T12:25:51Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32254",
      "labels": [
        "GUI",
        "Android"
      ],
      "comment_data": [
        {
          "id": 3920548806,
          "user": "fanquake",
          "body": "I guess this can be closed for now, given (https://github.com/bitcoin/bitcoin/pull/34211#issuecomment-3729993801):\n> The current GUI, based on Qt Widgets, does not offer a viable experience for modern mobile devices. This limitation was a primary driver for initiating the new QML-based GUI.\n> Therefore, I see little value in packaging a Qt Widgets application for Android in 2026. \n\nand any discussion can be continued in the QML repo.",
          "created_at": "2026-02-18T12:25:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 437,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 504,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3629232876,
      "number": 33879,
      "title": "Embedded ASMap data Tracking Issue (Part 2)",
      "body": "The predecessor tracking issue for this topic can be found here: #28794 This was closed since there seemed to be just one main PR left but I am reviving a topic issue for asmap because recently a few PRs have spun out of the main PR and related discussions. Aside from the somewhat tangential changes the main embedding PR is split into a series of three as of now.\n\n- [ ] Embedding implementation series\n  - [x] #33026 \n  - [x] #33878 \n  - [ ] #28792\n- [ ] Embedding follow-ups\n  - [ ] #33920\n- [x] `-asmap` UX changes (https://github.com/bitcoin/bitcoin/issues/33386)\n  - [x] #33631 \n  - [x] #33632 (alternative approach to above which was abandoned) \n  - [x] #33770 \n\n",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-15T20:54:43Z",
      "updated_at": "2026-02-18T12:20:29Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33879",
      "labels": [
        "Tracking Issue"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 715,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3079678746,
      "number": 32576,
      "title": "test: `tool_wallet.py` references no-longer used CI",
      "body": "We no longer use Appveyor, so any code that existed to support it, should be dropped:\n\nhttps://github.com/bitcoin/bitcoin/blob/54e406a3055ad0454a576f14b51def34ab8e9209/test/functional/tool_wallet.py#L160\n\nhttps://github.com/bitcoin/bitcoin/blob/54e406a3055ad0454a576f14b51def34ab8e9209/test/functional/tool_wallet.py#L171",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-21T10:05:58Z",
      "updated_at": "2026-02-18T11:52:34Z",
      "closed_at": "2026-02-18T11:52:33Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/32576",
      "labels": [
        "Windows",
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3913891518,
          "user": "fanquake",
          "body": "> Suggest just changing comment to:\n> 666 on Windows\n\n@m3dwards can you open a PR to address this?",
          "created_at": "2026-02-17T10:48:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 98,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3920392487,
          "user": "fanquake",
          "body": "Will close this, and we can finish up in #34609.",
          "created_at": "2026-02-18T11:52:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 48,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 373,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078112840,
      "number": 32574,
      "title": "subprocess: `sh -c 'echo err 1>&2 && false'` must return `1`",
      "body": "On OpenIndiana:\n```\n./test/system_tests.cpp(54): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned\", command)) != std::string::npos has failed\n./test/system_tests.cpp(55): error: in \"system_tests/run_command\": check what.find(expected) != std::string::npos has failed\n```\n\nSame on [OmniOS](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/15121791773/job/42505618501):\n```\n./test/system_tests.cpp(54): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned\", command)) != std::string::npos has failed\n./test/system_tests.cpp(55): error: in \"system_tests/run_command\": check what.find(expected) != std::string::npos has failed\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-20T20:07:00Z",
      "updated_at": "2026-02-18T10:18:30Z",
      "closed_at": "2026-02-18T10:18:30Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32574",
      "labels": [
        "Tests"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 827,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2471924410,
      "number": 30671,
      "title": "bitcoind shouldn't be shutdown automatically despite wallet synchronisation error",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nBitcoind startup is terminated.\n\n### Expected behaviour\n\nbitcoind should complete startup and keep running successfully.\n\n### Steps to reproduce\n\nStep:\r\n`$ ./bitcoind`\n\n### Relevant log output\n\nResult (logs):\r\nKeys: 9 plaintext, 0 encrypted, 0 w/ metadata, 9 total. Unknown wallet records: 0\r\nWallet completed loading in             326ms\r\nError: Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\r\nError: Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\r\nShutdown: In progress...\r\nscheduler thread exit\r\nShutdown: done\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster\n\n### Operating system and version\n\nLinux\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "GregTonoski",
      "created_at": "2024-08-18T11:34:24Z",
      "updated_at": "2026-02-17T21:12:56Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/30671",
      "labels": [
        "Docs",
        "Wallet"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1093,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3941584748,
      "number": 34592,
      "title": "Fatal Error: Filename too long.",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\n<img width=\"828\" height=\"637\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0a607957-b068-4b58-83ca-27e8a8296eef\" />\n\nDir path cannot get any shorter but I think its misleading, there are no files even close to 256 char, might be an issue because its on E:\\ ? Nothing useful in debug.log. Fix the data for core as well, it's still showing 2009-2024. \n\n### Expected behaviour\n\nExpected behavior is that it should continue to write the blocks. \n\n### Steps to reproduce\n\nInstall Bitcoin core 28.1.0. \n\n### Relevant log output\n\n[debug.zip](https://github.com/user-attachments/files/25315742/debug.zip)\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n28.1.0\n\n### Operating system and version\n\nWindows 10\n\n### Machine specifications\n\n8core i7 16gb ram, 14TB ssd",
      "state": "open",
      "user": "JPPinto-SS",
      "created_at": "2026-02-14T15:00:32Z",
      "updated_at": "2026-02-17T17:52:23Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34592",
      "labels": [
        "Windows",
        "Block storage"
      ],
      "comment_data": [
        {
          "id": 3914443282,
          "user": "maflcko",
          "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce? That is, what is your config + settings + command line args (etc). Also, what is the relevant section of the debug log? No need to zip it up, you can just share it here directly, possibly wrapped in a \n\n```\n<details><summary>debug log</summary>\n\n\\```\n content\n\\```\n\n</details>",
          "created_at": "2026-02-17T12:28:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 379,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3915454621,
          "user": "JPPinto-SS",
          "body": "I have installed 30.2 and its still synchronizing with network, it usually throws the error when there is ~1 year left to sync. I will report back if it completes or not. \n\n<img width=\"561\" height=\"50\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9f2adfe8-27ac-481b-a65e-e30036efcb8d\" />",
          "created_at": "2026-02-17T15:42:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 302,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3915534591,
          "user": "maflcko",
          "body": "What is the filesystem? FAT32?\n\nI presume the exception comes from `src/flatfile.cpp:    fs::create_directories(path.parent_path());`, which is confusing, because some errors are handled locally in the function and a failure is returned, and other errors are thrown.",
          "created_at": "2026-02-17T15:55:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3915585265,
          "user": "JPPinto-SS",
          "body": "<img width=\"396\" height=\"467\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/78d910a9-9d05-4f5a-aa30-989ac68540a8\" />",
          "created_at": "2026-02-17T16:05:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 130,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 970,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3434544542,
      "number": 33438,
      "title": "ci: add (atleast one) *BSD job to the CI",
      "body": "See https://github.com/bitcoin/bitcoin/pull/33333#discussion_r2362493046 & #33435. BSDs are being tested in nightly repos, but merging code here, just to have it reported as broken after the fact, which then requires more changes to fix, isn't ideal. Issues should be caught in this repo, before merging.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-09-19T14:12:56Z",
      "updated_at": "2026-02-17T16:22:15Z",
      "closed_at": null,
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/33438",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3915682350,
          "user": "dergoegge",
          "body": "Concept ACK\n\nIf we care about *BSD platforms, we should have them in CI to catch issues early.",
          "created_at": "2026-02-17T16:22:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 94,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 345,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 292386047,
      "number": 12291,
      "title": "Timeout downloading block",
      "body": "When investigating my mempool statistics there are from time to time >15 minutes intervals without blocks followed immediately by two or three fast blocks and it happened too often to be just due to the high variance of exponential distributiion.\r\n\r\nLooking into the logs revealed the culprit:\r\n\r\n```\r\ngrep Timeout -A1 debug.log | tail\r\n2018-01-29 08:45:20 Timeout downloading block 00000000000000000031a8bf543031f89b7a2a445d5b872883b2b5375c251571 from peer=47947, disconnecting\r\n2018-01-29 08:45:22 UpdateTip: new best=00000000000000000031a8bf543031f89b7a2a445d5b872883b2b5375c251571 height=506627 version=0x20000000 log2_work=87.990329 tx=296113862 date='2018-01-29 08:34:56' progress=0.999993 cache=85.3MiB(564264txo)\r\n--\r\n2018-01-29 09:41:12 Timeout downloading block 000000000000000000254d01e7f0d550506ae1d23be0d255e9e650ecbe887e6a from peer=51377, disconnecting\r\n2018-01-29 09:41:13 UpdateTip: new best=000000000000000000254d01e7f0d550506ae1d23be0d255e9e650ecbe887e6a height=506635 version=0x20000000 log2_work=87.990749 tx=296124995 date='2018-01-29 09:31:05' progress=0.999994 cache=88.7MiB(591588txo)\r\n--\r\n2018-01-29 11:33:16 Timeout downloading block 00000000000000000064da61afd140ad94b973d5d355e653111c04edba9ea625 from peer=51664, disconnecting\r\n2018-01-29 11:33:17 UpdateTip: new best=00000000000000000064da61afd140ad94b973d5d355e653111c04edba9ea625 height=506642 version=0x20000000 log2_work=87.991116 tx=296138316 date='2018-01-29 11:22:36' progress=0.999993 cache=94.6MiB(639913txo)\r\n```\r\n\r\nThe peer seems to be always the same (IP addresses aren't logged):\r\n\r\n```\r\n2018-01-29 09:42:12 receive version message: /ViaBTC:bitpeer.0.2.0/: version 70015, blocks=0, us=0.0.0.0:0, peer=51664\r\n```\r\n\r\n### What behavior did you expect?\r\n\r\nFirst, I'd expect a shorter timeout (it seems to be 10 minutes).  While a 10 minutes timeout is not that critical for my node, it means that you shouldn't use an unmodified bitcoin core for solo mining or you risk high orphan rate.\r\n\r\nAlso why is the node not banned?  It is disconnected but it is allowed to immediately reconnect.  Wouldn't it be possible to exploit this behaviour to make the blocks of competitors relay slowly, by just sending the inv message for them but never delivering the content.\r\n\r\nThis is with bitcoin v0.15.1\r\n",
      "state": "closed",
      "user": "jhoenicke",
      "created_at": "2018-01-29T12:17:45Z",
      "updated_at": "2026-02-17T15:39:17Z",
      "closed_at": "2026-02-17T15:39:17Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/12291",
      "labels": [
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3915338004,
          "user": "willcl-ark",
          "body": "As the last report of this was an \"OK\" over 2 years ago, do we think this issue can be closed now (keeping #29281 open)?",
          "created_at": "2026-02-17T15:20:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 120,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3915440848,
          "user": "maflcko",
          "body": "Let's move discussion to https://github.com/bitcoin/bitcoin/issues/29281 for now.",
          "created_at": "2026-02-17T15:39:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 81,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2311,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3225420780,
      "number": 32955,
      "title": "Bitcoin Core v29.0 incorrectly enters IBD mode when only ~600 blocks behind, preventing normal sync",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nHi, I have a full node on a development machine that is not always run. It runs a self compiled none modified v29.0 node as systemd service on an Ubuntu 24.04 system. I had it twice now that the node, after not using it for a few days would go into IBD mode. This time I tried rebuilding the chain state but it would only go as far as the same block it was stuck on before. By running `bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf reconsiderblock 000000000000000000009d1dd2f71099471a348f4074285707b17e0588c41002` it would synced 48 blocks to then get stuck again. Running reconsiderblock again using `bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf reconsiderblock $(bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf getbestblockhash)` did not trigger the sync to continue. After restarting with parameters -minimumchainwork=0 -maxtipage=31536000 it is now syncing again normally.\n\n### Expected behaviour\n\nShould sync normally without manual intervention\n\n### Steps to reproduce\n\nTurn of the PC normally and let it fall behind a few days. I cannot say how reproducible this is since it only happened twice so far and it does not happen often that the machine is not used for more than ~12 hours. With shorter times offline it seems not to happen.\n\n### Relevant log output\n\nThis is my startup log from a try where it was in IBD:\n\nJul 12 10:48:31 linuxpc systemd[1]: Starting bitcoind.service - Bitcoin Daemon...\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Bitcoin Core version v29.0 (release build)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using the 'x86_shani(1way,2way)' SHA256 implementation\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using RdSeed as an additional entropy source\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using RdRand as an additional entropy source\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Default data directory /nonexistent/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using data directory /mnt/btc/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file: /mnt/btc/.bitcoin/bitcoin.conf\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: bind=\"0.0.0.0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: checkblocks=\"24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: checklevel=\"0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: dbcache=\"8000\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: listen=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: maxconnections=\"24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: port=\"8333\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcallowip=\"192.168.1.0/24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcbind=\"0.0.0.0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcpassword=****\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcport=\"8332\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcuser=****\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: server=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: txindex=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Setting file arg: wallet = [\"cormorant\"]\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: conf=\"/mnt/btc/.bitcoin/bitcoin.conf\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: datadir=\"/mnt/btc/.bitcoin\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: startupnotify=\"systemd-notify --ready\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using at most 24 automatic connections (65535 file descriptors available)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z scheduler thread start\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Binding RPC on address 0.0.0.0 port 8332\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Starting HTTP server with 16 worker threads\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using wallet directory /mnt/btc/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Verifying wallet(s)…\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using SQLite Version 3.45.1\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using wallet /mnt/btc/.bitcoin/cormorant\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using /16 prefix for IP bucketing\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading P2P addresses…\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Loaded 67617 addresses from peers.dat  132ms\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading banlist…\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z SetNetworkActive: true\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Cache configuration:\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 2.0 MiB for block index database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 1000.0 MiB for transaction index database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 8.0 MiB for chain state database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 6990.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Script verification uses 15 additional threads\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using obfuscation key for blocksdir *.dat files (/mnt/btc/.bitcoin/blocks): 'cb7f2abf983a0e66'\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Opening LevelDB in /mnt/btc/.bitcoin/blocks/index\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Opened LevelDB successfully\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using obfuscation key for /mnt/btc/.bitcoin/blocks/index: 0000000000000000\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading block index…\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Assuming ancestors of block 00000000000000000001b658dd1120e82e66d2790811f89ede9742ada3ed6d77 have valid signatures.\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Setting nMinimumChainWork=0000000000000000000000000000000000000000b1f3b93b65b16d035a82be84\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z LoadBlockIndexDB: last block file = 5021\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=45, size=62616878, heights=904539...904606, time=2025-07-08...2025-07-08)\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z Checking all blk files are present...\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opening LevelDB in /mnt/btc/.bitcoin/chainstate\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opened LevelDB successfully\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using obfuscation key for /mnt/btc/.bitcoin/chainstate: 922d01a00a52f620\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loaded best chain: hashBestChain=000000000000000000009d1dd2f71099471a348f4074285707b17e0588c41002 height=904558 date=2025-07-08T05:32:02Z progress=0.998569\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Verifying blocks…\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verifying last 24 blocks at level 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 0%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 12%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 20%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 33%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 41%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 50%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 62%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 70%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 83%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 91%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification: No coin database inconsistencies in last 24 blocks (0 transactions)\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Block index and chainstate loaded\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opening LevelDB in /mnt/btc/.bitcoin/indexes/txindex\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opened LevelDB successfully\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using obfuscation key for /mnt/btc/.bitcoin/indexes/txindex: 0000000000000000\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using SQLite Version 3.45.1\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using wallet /mnt/btc/.bitcoin/cormorant\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Loading wallet…\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Wallet file version = 10500, last client version = 290000\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Descriptors: 0, Descriptor Keys: 0 plaintext, 0 encrypted, 0 total.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Wallet completed loading in               0ms\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] setKeyPool.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] mapWallet.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] m_address_book.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Setting NODE_NETWORK on non-prune mode\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z block tree size = 904607\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z nBestHeight = 904558\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z initload thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Bound to 0.0.0.0:8333\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z torcontrol thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loaded 0 addresses from \"anchors.dat\"\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loading 14572 mempool transactions from file...\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z 0 block-relay-only anchors will be tried for connections.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Starting network threads…\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z net thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z addcon thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z dnsseed thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Waiting 300 seconds before querying DNS seeds.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Done loading\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z opencon thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z msghand thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex is enabled at height 904559\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex thread exit\nJul 12 10:48:35 linuxpc systemd[1]: Started bitcoind.service - Bitcoin Daemon.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Progress loading mempool transactions from file: 10% (tried 1458, 13114 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 20% (tried 2915, 11657 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 30% (tried 4372, 10200 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z New outbound-full-relay v2 peer connected: version: 70016, blocks=905230, peer=0\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 40% (tried 5829, 8743 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 50% (tried 7286, 7286 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 60% (tried 8744, 5828 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=1\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 70% (tried 10201, 4371 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 80% (tried 11658, 2914 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 90% (tried 13115, 1457 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Imported mempool transactions from file: 14572 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z initload thread exit\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=2\nJul 12 10:48:38 linuxpc bitcoind[335661]: 2025-07-12T13:48:38Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=3\nJul 12 10:48:39 linuxpc bitcoind[335661]: 2025-07-12T13:48:39Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=4\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv29.0\n\n### Operating system and version\n\nUbuntu 24.04 LTS\n\n### Machine specifications\n\nRyzen 7 5700G, 64GB Ram, NVME Disks, wired network with 550Mbit Optical Fibre Internet with good reliable connection.",
      "state": "open",
      "user": "anhilde",
      "created_at": "2025-07-12T14:30:04Z",
      "updated_at": "2026-02-17T15:38:34Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/32955",
      "labels": [
        "P2P",
        "Net"
      ],
      "comment_data": [
        {
          "id": 3915436992,
          "user": "maflcko",
          "body": "> ok, I will look out for that the next time.\n\nAny new insights, or the missing part of the debug log? \n\n\nFor reference, there is a brainstorming issue about the P2P block download timeouts in https://github.com/bitcoin/bitcoin/issues/29281 . However, you are using `reconsiderblock` to start download again, which sounds sketchy. To diagnose whether this is local data corruption or a bug, more debug logs would be helpful. Absent that, there is less that can be done.",
          "created_at": "2026-02-17T15:38:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 469,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 16126,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3120569558,
      "number": 32681,
      "title": "ci: libFuzzer disabled leak detection after every mutation",
      "body": "https://cirrus-ci.com/task/4646509657980928?logs=ci#L91\n```bash\n[05:44:30.094] INFO: libFuzzer disabled leak detection after every mutation.\n[05:44:30.094]       Most likely the target function accumulates allocated\n[05:44:30.094]       memory in a global state w/o actually leaking it.\n[05:44:30.094]       You may try running this binary with -trace_malloc=[12]      to get a trace of mallocs and frees.\n[05:44:30.094]       If LeakSanitizer is enabled in this process it will still\n[05:44:30.094]       run on the process shutdown.\n```\n\nHappening in at least `txgraph` & `transaction`. Not sure I've seen this before.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-06-05T09:51:51Z",
      "updated_at": "2026-02-17T12:42:00Z",
      "closed_at": "2026-02-17T12:41:55Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32681",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3905821515,
          "user": "MkDev11",
          "body": "Hey @fanquake, I’d like to fix this by passing `-detect_leaks=0` to the fuzz binary in `test/fuzz/test_runner.py` (same idea as #31481), so leak detection only runs at process exit. I’d add it in the `run_once` and `generate_corpus` code paths (and optionally merge_inputs). Is this approach okay before I open a PR?\n",
          "created_at": "2026-02-16T00:40:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 317,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3914492852,
          "user": "maflcko",
          "body": "Can this be closed?",
          "created_at": "2026-02-17T12:40:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 19,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3914500176,
          "user": "fanquake",
          "body": "Yea I think so.",
          "created_at": "2026-02-17T12:41:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 15,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 679,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2521854208,
      "number": 30876,
      "title": "cmake: adjust Find modules to try `find_package` & fallback to `pkg_check_modules`",
      "body": "See the discussion in: https://github.com/bitcoin/bitcoin/pull/30803#discussion_r1743507523.\r\n\r\n> I assume one thing we could do, is try find_package(ZeroMQ) first, and fallback to pkg_check_modules(libzmq), and just maintain this (pretty much) forever. That might be better than somewhat vauge comments about \"modern\" distros, because, (some) modern distros do already support this, and it's actually the case that all versions of all distros Bitcoin Core supports need to do this, before we could do a complete switch.\r\n\r\n",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-09-12T09:27:34Z",
      "updated_at": "2026-02-17T11:55:44Z",
      "closed_at": "2026-02-17T11:55:44Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/30876",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3914306894,
          "user": "fanquake",
          "body": "I think this can be closed now. Upstream there hasn't been much change, so the [original comment](https://github.com/bitcoin/bitcoin/pull/30803#discussion_r1743507523) still stands. We'll need to maintain both methods of searching for dependencies (try CMake `find_package` and fall back to `pkg_check_modules`) for quite some time yet.\n\nIf anyone wants to push this along, you can try and petition your local distro/package manager to ship CMake config files, for all the dependencies we use, if they don't already.",
          "created_at": "2026-02-17T11:55:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 516,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 607,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3947786851,
      "number": 34599,
      "title": "wallet: Assertion `!wtx.isConfirmed()` failed",
      "body": "[This](https://github.com/bitcoin/bitcoin/blob/b65ff0e5a1fd4ea2ae75e204729b8008c4ebb9ab/src/wallet/wallet.cpp#L1307) assertion may fail if the `abandontransaction` RPC is invoked.\n\n```\n2026-02-14T22:10:25Z [validation:debug] TransactionAddedToMempool: txid=9b7c74aa66902368b7c802b4316116820928c94f59ab149b6d2d5f626e3087d7 wtxid=8f74ad52785dc43786cd10d74aa902af6250367b695da94a5253afffd620d525\n2026-02-14T22:10:25Z [validation:debug] TransactionAddedToMempool: txid=4ab2539222a69a6d1b2a024c3440e79c39a6e0e960a43c817b6251a59a97dc30 wtxid=bbb480078ed2cd7ade22877e63357daac28f9e1cfbe73a8f483ac938a9d4bc40\n2026-02-14T22:10:25Z [net:debug] received: inv (37 bytes) peer=0\n2026-02-14T22:10:25Z [net:debug] got inv: wtx 0a5e16ee258b32dd6a63885aad733ca1e5f1a00acde6e61740904c1af72937f6  new peer=0\n2026-02-14T22:10:26Z [http:debug] Received a POST request for / from 10.89.0.6:38644\n2026-02-14T22:10:26Z [rpc:debug] ThreadRPCServer method=listtransactions user=user\n2026-02-14T22:10:27Z [net:debug] sending inv (73 bytes) peer=1\n2026-02-14T22:10:27Z [net:debug] Requesting wtx 0a5e16ee258b32dd6a63885aad733ca1e5f1a00acde6e61740904c1af72937f6 peer=0\n2026-02-14T22:10:27Z [net:debug] sending getdata (37 bytes) peer=0\n2026-02-14T22:10:27Z [http:debug] Received a POST request for / from 10.89.0.6:38644\n2026-02-14T22:10:27Z [rpc:debug] ThreadRPCServer method=abandontransaction user=user\nbitcoind: wallet/wallet.cpp:1307: auto wallet::CWallet::AbandonTransaction(CWalletTx &)::(anonymous class)::operator()(CWalletTx &) const: Assertion `!wtx.isConfirmed()' failed.\n```\n\nDebug logs for the node that hit the assertion as well as the full test logs can be found [here](https://drive.google.com/drive/folders/1TZX8n9zlMeK8E-h2RH57h81Afy6RMH-b?usp=sharing).\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-02-16T13:28:46Z",
      "updated_at": "2026-02-16T13:33:23Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34599",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1869,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3938408116,
      "number": 34584,
      "title": "Bug: Race Condition in Mempool Fee Estimation Leading to Consensus Failure",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen transactions are re-admitted to the mempool during block reorganizations, a race condition exists between [UpdateTransactionsFromBlock()](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) and [LimitMempoolSize()](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) that causes:\n\nStale UTXO cache ([m_view](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) data used for transaction validation\nValid transactions incorrectly rejected with \"mempool full\"\nInconsistent mempool state across nodes during reorg windows\nPotential consensus divergence between peers\nAffected Code: [validation.cpp](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) lines 300-400 ([MaybeUpdateMempoolForReorg](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) and lines 585-900 ([MemPoolAccept](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) class)\n\nExpected Behaviour\nUTXO cache should be properly synchronized after mempool state changes\nTransaction validation must use current, accurate coin data\nAll nodes should reach consistent mempool state regardless of timing\nNo race conditions between mempool trimming and transaction acceptance\n\n### Expected behaviour\n\nMempool fee calculations should remain consistent and accurate during block reorganizations\nUTXO cache ([m_view](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) must be properly synchronized after any mempool state change\nTransaction validation should use fresh, accurate coin data\nNo race conditions should exist between mempool trimming and fee estimation\nAll nodes should reach consensus on mempool contents regardless of timing\n\n### Steps to reproduce\n\nRun Bitcoin Core with near-full mempool: bitcoind -maxmempool=300 -debug=mempool -regtest\n\n2.Generate blocks and fill mempool to ~90% capacity\n3.Trigger manual reorg (2-3 blocks deep): bitcoin-cli invalidateblock <block_hash>\nbitcoin-cli reconsiderblock <block_hash>\n3.During the reorg window, broadcast transactions with borderline fees (near mempool minimum)\n4.Observe inconsistent acceptance across nodes - some accept, others reject as \"mempool full\"\n\n### Relevant log output\n\n2026-02-13T10:23:45Z [mempool] replacing mempool tx abc123... (fees=500, vsize=250)\n2026-02-13T10:23:45Z [validation] AcceptToMemoryPool: tx REJECTED (reason: mempool full)\n2026-02-13T10:23:45Z [validation] BUG! PLEASE REPORT THIS! CheckInputScripts failed\n2026-02-13T10:23:46Z [mempool] transaction failed: mempool full (code 64)\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core version v30.99.0-dev\n\n### Operating system and version\n\nUbuntu 22.04 LTS Also reproducible on macOS 13+ and Windows 10/11\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "vishalharkal15",
      "created_at": "2026-02-13T18:10:56Z",
      "updated_at": "2026-02-16T10:57:39Z",
      "closed_at": "2026-02-16T10:57:39Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34584",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3540,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 854937077,
      "number": 21647,
      "title": "RPC importprunedfunds doesn't allow importing spending txs, only receiving txs",
      "body": "I noticed one of my wallets shows that I own funds that I really don't. I identified the spending transaction and tried to import it using 'importprunedfunds' but was told:\r\n\r\n`No addresses in wallet correspond to included transaction`\r\n\r\nIt turns out that 'importprunedfunds' only allows you to import txs which credit an address owned by your wallet. It won't let you import txs which spend from addresses owned by your wallet.\r\n\r\nI made the following change and then was able to import the missing transaction:\r\n\r\n    --- a/src/wallet/rpcdump.cpp\r\n    +++ b/src/wallet/rpcdump.cpp\r\n    @@ -372,7 +372,7 @@ RPCHelpMan importprunedfunds()\r\n         CWalletTx::Confirmation confirm(CWalletTx::Status::CONFIRMED, height, merkleBlock.header.GetHash(), txnIndex);\r\n     \r\n         CTransactionRef tx_ref = MakeTransactionRef(tx);\r\n    -    if (pwallet->IsMine(*tx_ref)) {\r\n    +    if (pwallet->IsMine(*tx_ref) || pwallet->IsFromMe(*tx_ref)) {\r\n             pwallet->AddToWallet(std::move(tx_ref), confirm);\r\n             return NullUniValue;\r\n         }",
      "state": "open",
      "user": "dooglus",
      "created_at": "2021-04-10T00:36:28Z",
      "updated_at": "2026-02-16T06:50:03Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/21647",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3906200400,
          "user": "Mterra64",
          "body": "I have been reviewing this issue to better understand the current behavior of the `importprunedfunds` RPC.\n\nFrom what I understand, the RPC currently allows importing receiving transactions but does not support importing spending transactions. This seems to create an incomplete wallet state representation, especially in scenarios where pruned nodes need to reconstruct historical wallet activity.\n\nWould extending support to spending transactions require additional validation logic to ensure consistency with existing UTXO tracking and wallet state management?\n\nI am currently exploring how wallet transaction metadata is handled internally, particularly how imported transactions are reconciled with the UTXO set.\n\nAny clarification on the intended architectural constraints around `importprunedfunds` would be very helpful.",
          "created_at": "2026-02-16T03:06:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 828,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1130,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1453726595,
      "number": 26527,
      "title": "wallet: don't back-date locktime when spending unconfirmed UTXOs",
      "body": "As mentioned in https://github.com/bitcoin/bitcoin/pull/26451#issuecomment-1313934927 example 3:\r\n\r\nIf we do anti-fee sniping, the Bitcoin Core wallet has a 10% chance to back-date the locktime of a transaction to up to 100 blocks.  Electrum has similar behavior.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/48174c0f287b19931ca110670610bd03a03eb914/src/wallet/spend.cpp#L725-L731\r\n\r\nWhen spending an unconfirmed UTXO, it can happen that we back-date the locktime of our transaction to a locktime before the locktime of the unconfirmed parent. In this case, the \"transaction signed earlier but only broadcast now\" is unrealistic I think (please correct me if you think there is a protocol where this makes sense). This is a fingerprint that we are a Bitcoin Core or Electrum wallet.\r\n\r\nrelated https://github.com/bitcoin/bitcoin/issues/26526\r\nelectrum issue: https://github.com/spesmilo/electrum/issues/8073",
      "state": "open",
      "user": "0xB10C",
      "created_at": "2022-11-17T17:35:57Z",
      "updated_at": "2026-02-14T19:38:17Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/26527",
      "labels": [
        "Feature",
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3902400153,
          "user": "gmaxwell",
          "body": "This is Not A Bug.\n\nSure, if no inputs are ANYONECANPAY then setting a locktime less aggressive than any input is semantically no different than setting it to the input. But it's harmless.  Kinda like people noting the the 'duration between blocks' can be negative. :P\n\nClamping to the inputs is non-trivial because locktimes are a union type between a lock height, a lock time, and a lockmeaningless-state due to sequences.  A PR attempting to 'fix' this issue in core (#34480) appears to have gotten it wrong due to these complexities, and also introduced a potential information leak over which inputs are wallet inputs vs non-wallet (e.g. in a payjoin or coinjoin).\n",
          "created_at": "2026-02-14T19:38:17Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 670,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 970,
        "has_nack": false,
        "has_ack": true
      }
    }
  ],
  "summary": {
    "total_prs": 227,
    "total_issues": 47,
    "total_comments": 96,
    "unique_participants": 94
  }
}