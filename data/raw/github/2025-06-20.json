{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:51:16.119393+00:00",
  "date": "2025-06-20",
  "pull_requests": [
    {
      "number": 32788,
      "title": "descriptors: Allow `H` as a hardened indicator",
      "body": "BIP 380 states that `H` is a valid hardened indicator.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-06-20T23:14:29Z",
      "updated_at": "2025-07-03T22:15:40Z",
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/pull/32788",
      "labels": [
        "Needs Conceptual Review",
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32788.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32788#issuecomment-2993239435), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32788#pullrequestreview-2948229377), [janb84](https://github.com/bitcoin/bitcoin/pull/32788#pullrequestreview-2949164658), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32788#pullrequestreview-2955511313) |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/32788#issuecomment-2993242960), [rkrux](https://github.com/bitcoin/bitcoin/pull/32788#pullrequestreview-2949654103), [Sjors](https://github.com/bitcoin/bitcoin/pull/32788#issuecomment-2996082521) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32724](https://github.com/bitcoin/bitcoin/pull/32724) (Musig2 tests by w0xlt)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T23:14:33Z"
        },
        {
          "user": "davidgumberg",
          "body": "ACK https://github.com/bitcoin/bitcoin/pull/32788/commits/b6252655fe502ed1bbb97ab9597d9bbcf8c4484c\r\n\r\nConforms to BIP-380: https://github.com/bitcoin/bips/blob/master/bip-0380.mediawiki#key-expressions",
          "created_at": "2025-06-21T01:49:42Z"
        },
        {
          "user": "jonatack",
          "body": "Concept ACK, see https://github.com/bitcoin/bips/pull/1803",
          "created_at": "2025-06-21T01:58:11Z"
        },
        {
          "user": "Sjors",
          "body": "Concept ACK\r\n\r\nCan you modify one of the functional tests to cover the use of `H` in `importdescriptors` (e.g. `wallet_signer.py`) and `getdescriptorinfo`?",
          "created_at": "2025-06-23T11:27:24Z"
        },
        {
          "user": "scgbckbone",
          "body": "Why is another way to specify hardened derivation needed? Is anyone using it? Seems better to remove `H` from BIP.\n\nI'm sure most of the software out there rejects anything besides `h` `'`",
          "created_at": "2025-06-23T11:41:21Z"
        },
        {
          "user": "rkrux",
          "body": "> Why is another way to specify hardened derivation needed? Is anyone using it? Seems better to remove H from BIP.\r\n\r\nI would prefer the removal from BIP if no other software is using it but I'm not sure if there is a way to comprehensively verify if this has not been used in the past (https://github.com/bitcoin/bips/pull/1643). And with the lack of such a verification, the allowance in core wallet seems required to me.",
          "created_at": "2025-06-23T12:13:33Z"
        },
        {
          "user": "Sjors",
          "body": "My guess is that some wallets use ALL CAPS descriptors in order to generate smaller QR codes.\r\n\r\nhttps://shkspr.mobi/blog/2025/02/why-are-qr-codes-with-capital-letters-smaller-than-qr-codes-with-lower-case-letters/\r\n\r\nNot sure how useful that is when you have a mixed case xpub and other characters that are not in the limited set, e.g. `()[]`, though mixed-mode is possible: https://www.barcodefaq.com/2d/qr-code/qr-code-auto-encoding-mode/",
          "created_at": "2025-06-23T12:17:32Z"
        },
        {
          "user": "scgbckbone",
          "body": "> > Why is another way to specify hardened derivation needed? Is anyone using it? Seems better to remove H from BIP.\r\n> \r\n> I would prefer the removal from BIP if no other software is using it but I'm not sure if there is a way to comprehensively verify if this has not been used in the past ([bitcoin/bips#1643](https://github.com/bitcoin/bips/pull/1643)). And with the lack of such a verification, the allowance in core wallet seems required to me.\r\n\r\ni think the argument is circular. How those \"softwares\" worked up until this point? \r\n\r\nAdding it now to ref implementation will cause that someone will start using it and then all wallet implementations will need to implement, or stay incompatible. \r\n\r\nthanks @Sjors, I didn't know that is possible. I thought you need just alphanumeric for that.",
          "created_at": "2025-06-23T17:30:55Z"
        },
        {
          "user": "achow101",
          "body": "> How those \"softwares\" worked up until this point?\r\n\r\nWe don't know, which is kind of the point of this PR.\r\n\r\nThe text of the BIP has always stated that `H` is valid hardened indicator, so anyone implementing from just the description of the text should have included `H`.\r\n\r\nThe document the BIP is based on (doc/descriptors.md) did not state that `H` is a valid hardened indicator.\r\n\r\nHowever, there was also a test vector that had `H` as an invalid expression. Anyone who also implemented this test vector would have noticed that the text of the BIP did not match what this test vector stated was invalid. But this test vector was also added to the BIP about 2 years after the BIP was originally written.\r\n\r\nSince this discrepancy was only flagged a few months ago, it seems like there are multiple possibilities of what could have happened:\r\n\r\n1. Many implementations of descriptors was done prior to the test vectors, and probably prior to the BIP being written, as we know descriptors was specified long before the BIP. Such implementations may or may not have implemented it correctly.\r\n2. Some implementations of descriptors were done after the test vectors were added, but did not implement the test vectors, or implemented based off of existing implementations which may or may not have allowed `H`.\r\n3. Few implementations were done specifically from the text and tests alone, as no one flagged this discrepancy for multiple years.\r\n\r\nThe 2 primary implementations of descriptors are probably Bitcoin Core and rust-miniscript. Looking at rust-miniscript, it seems that they also did not allow `H`. However, even if people tested against Bitcoin Core and rust-bitcoin, it's possible that they could be allowing `H` as they may not be producing descriptors with `H`. For example, it looks like libwally allows `H` as a hardened indicator, so any implementation that uses libwally for handling things like extended keys and derivation paths are probably allowing `H`.\r\n\r\nMaybe I'll ask on the mailing list again.",
          "created_at": "2025-06-23T18:28:39Z"
        },
        {
          "user": "davidgumberg",
          "body": "> Adding it now to ref implementation will cause that someone will start using it and then all wallet implementations will need to implement, or stay incompatible.\r\n\r\nIn my understanding, BIP 380 is intended to describe an implementation-independent language for describing output scripts, while Bitcoin Core is specified as a reference implementation in the BIP, isn't it a better course of action to modify the reference implementation to more closely match the spec than to change out the spec from under existing [^1] implementations? \r\n\r\n\r\n[^1]: Sparrow: https://github.com/sparrowwallet/drongo/blob/13e1fafbe8892d7005a043ae561e09ed66f7cea6/src/main/java/com/sparrowwallet/drongo/KeyDerivation.java#L69 \r\n         Libwally (used by Blockstream Green): https://github.com/ElementsProject/libwally-core/blob/12ab3fa22cbdc26040a9900d02cdb03da5164c85/src/bip32.c#L80-L87\r\n         I also checked [NBitcoin](https://github.com/MetacoSA/NBitcoin/blob/8afeeffd8ddd3dcbaf8e5e750fb67f836361fc4b/NBitcoin/WalletPolicies/MiniscriptNode.cs#L645)  (BTCPayServer), [Electrum](https://github.com/spesmilo/electrum/blob/6f5041443f50edcf338dcb109405f76a12522cd3/electrum/bip32.py#L339), [rust-miniscript](https://github.com/rust-bitcoin/rust-miniscript/blob/e5f50ab2671bc6f7acc93328ccabf3a099a0d896/src/descriptor/key.rs#L1029-L1031) (BDK) and they don't allow `H`.\r\n         \r\n",
          "created_at": "2025-06-23T18:58:31Z"
        },
        {
          "user": "Ademan",
          "body": "> My guess is that some wallets use ALL CAPS descriptors in order to generate smaller QR codes.\r\n> \r\n> https://shkspr.mobi/blog/2025/02/why-are-qr-codes-with-capital-letters-smaller-than-qr-codes-with-lower-case-letters/\r\n> \r\n> Not sure how useful that is when you have a mixed case xpub and other characters that are not in the limited set, e.g. `()[]`, though mixed-mode is possible: https://www.barcodefaq.com/2d/qr-code/qr-code-auto-encoding-mode/\r\n\r\n**If** I did my back of the napkin math correctly, you could encode an xpub into a format like bech32, encoded into QR alphanumeric mode and save ~15% over a base58 encoded xpub in QR binary mode.\r\n\r\nSince afaik nobody has bothered exploring this, maybe it's of dubious value, and if you wanted to encode full descriptors you'd probably need some kind of escape sequence for `(,),[,], etc...` that might hamper readability to the point of \"why bother?\".",
          "created_at": "2025-06-23T20:08:33Z"
        },
        {
          "user": "Sjors",
          "body": "> you could encode an xpub into a format like bech32, encoded into QR alphanumeric mode and save ~15% over a base58 encoded xpub in QR binary mode\r\n\r\nI think it would be nice in general to have a bech32m encoding for extended keys, because part of the reason why descriptors look weird is the mix of bech32 and base58. Like Silent Payment addresses it could just concatenate the public key and chain code. For the human readable prefix `xpub`, `xprv`, `tpub`, `tprv` would make sense. Add a version for good measure. E.g. `tpub1qqfvn9pmvmz0ewpnp7w302lxqmnue2kgtpne2p38nuunun883sw36yq48ny7n2jl0nx9ljhmdnrgvpee6aufmg9wfvqfcr6c02at6r4u4xsegph7a` (nonsensical testnet xpub based on https://gist.github.com/kdmukai/e6de87c90d4fedeaf866f2b10c0833a9)\r\n\r\nhttps://github.com/bitcoin/bips/blob/master/bip-0352.mediawiki#address-encoding\r\n\r\nAdditionally you could allow a slightly shorter encoding without checksum, since the descriptor itself already has one, but then it wouldn't comply with bech32m. And people and software might copy xpubs around to generate more complex wallets setups, so they should always have a checksum.  ",
          "created_at": "2025-06-24T07:14:57Z"
        },
        {
          "user": "glozow",
          "body": "Not merging for now - IIUC if the approach mentioned in https://groups.google.com/u/1/g/bitcoindev/c/IAYEx4zUhHA is taken, this would be closed?",
          "created_at": "2025-06-25T18:30:16Z"
        },
        {
          "user": "pythcoiner",
          "body": "> Is anyone using it?\r\n\r\nsupport for `H` have been introduced in embit in [this commit](https://github.com/diybitcoinhardware/embit/pull/47/commits/1696d6815cf6c2ddb7f56dfbf3bc50162e463647) but afair I add `H` because it was in the BIP not because it was needed.",
          "created_at": "2025-06-28T03:52:12Z"
        },
        {
          "user": "fanquake",
          "body": "Moved this to draft for now, given https://github.com/bitcoin/bips/pull/1888.",
          "created_at": "2025-07-02T13:22:26Z"
        },
        {
          "user": "achow101",
          "body": "https://github.com/bitcoin/bips/pull/1888 was merged so this is no longer relevant.",
          "created_at": "2025-07-03T22:15:39Z"
        }
      ]
    },
    {
      "number": 32787,
      "title": "bench: reduces unnecessary big vector definition",
      "body": "The data vector used in the benchmark was defined to hold 32 bytes, instead of 4, while the writing functions work with 32-bit values.",
      "state": "closed",
      "user": "sr-gi",
      "created_at": "2025-06-20T18:34:25Z",
      "updated_at": "2025-07-28T18:51:21Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32787",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32787.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32787#pullrequestreview-2947033883), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32787#issuecomment-2993098719) |\n| User requested bot ignore | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/32787#pullrequestreview-2947074942) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T18:34:30Z"
        },
        {
          "user": "davidgumberg",
          "body": "~ACK https://github.com/bitcoin/bitcoin/commit/2a50c61e8d41be425f9f43ea62d1329258ee0126~\r\n\r\nSee: https://github.com/bitcoin/bitcoin/pull/32787#discussion_r2159978665",
          "created_at": "2025-06-20T23:29:40Z"
        },
        {
          "user": "fanquake",
          "body": "Going to close this for now. Someone could open a new PR, adding an explanatory comment to the code here.",
          "created_at": "2025-07-02T13:18:18Z"
        }
      ]
    },
    {
      "number": 32786,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "AndrexB",
      "created_at": "2025-06-20T12:40:43Z",
      "updated_at": "2025-06-24T15:05:47Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32786",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-06-20T12:40:47Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32786.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T12:40:49Z"
        }
      ]
    },
    {
      "number": 32785,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "AndrexB",
      "created_at": "2025-06-20T11:40:46Z",
      "updated_at": "2025-06-24T15:06:01Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32785",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-06-20T11:40:50Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32785.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T11:40:52Z"
        }
      ]
    },
    {
      "number": 32784,
      "title": "wallet: derivehdkey RPC to get xpub at arbitrary path",
      "body": "Given a (blank) wallet with an `unused(KEY)` descriptor, `derivehdkey \"m/87h/0h/0h\"` gets the xpub or xpriv at any given path.\r\n\r\nThis is particularly useful for multisig setup where it's not desirable to use our default derivations (e.g. 44h).\r\n\r\nI updated the multisig tutorial and the functional test.\r\n\r\nBased on:\r\n- #29136",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-06-20T11:04:39Z",
      "updated_at": "2026-01-06T12:09:02Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32784",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32784.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32784#issuecomment-3089115820) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33874](https://github.com/bitcoin/bitcoin/pull/33874) (wallet: refactor ProcessDescriptorImport by naiyoma)\n* [#33008](https://github.com/bitcoin/bitcoin/pull/33008) (wallet: support bip388 policy with external signer by Sjors)\n* [#32489](https://github.com/bitcoin/bitcoin/pull/32489) (wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet by achow101)\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n* [#30341](https://github.com/bitcoin/bitcoin/pull/30341) (Permit Combiner to strip bip32_deriv information by willcl-ark)\n* [#29136](https://github.com/bitcoin/bitcoin/pull/29136) (wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- memcpy(origin.fingerprint, descendant.vchFingerprint, 4) in src/rpc/util.cpp\n\n\n\n<sup>2026-01-05</sup>\n",
          "created_at": "2025-06-20T11:04:44Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/44475268764</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by errors from the lint check 'py_lint', specifically due to unused imports flagged by ruff.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-20T11:47:19Z"
        },
        {
          "user": "rkrux",
          "body": "Very nice, Concept ACK.\r\nI will review this PR.",
          "created_at": "2025-07-18T11:11:25Z"
        },
        {
          "user": "Sjors",
          "body": "(will rebase this later)",
          "created_at": "2025-09-26T10:15:56Z"
        },
        {
          "user": "Sjors",
          "body": "Rebased after #32821 landed and #29136 was rebased. Re-tested by having an LLM follow the tutorial.",
          "created_at": "2026-01-05T04:05:29Z"
        }
      ]
    },
    {
      "number": 32783,
      "title": "doc: Add fetching single PRs from upstream to productivity.md",
      "body": "Current recommendation is to add a new remote fetching all PRs, but this is resource-intensive.\r\n\r\nDocument a better way to fetch a single PR, and to update a PR which has been force-pushed.\r\n\r\nFollows up on a [comment from 32774](https://github.com/bitcoin/bitcoin/pull/32774#discussion_r2156728913)",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-06-20T10:12:17Z",
      "updated_at": "2025-07-01T01:26:39Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32783",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32783.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32783#pullrequestreview-2959405149), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32783#issuecomment-3005968667), [theStack](https://github.com/bitcoin/bitcoin/pull/32783#pullrequestreview-2959753896), [achow101](https://github.com/bitcoin/bitcoin/pull/32783#issuecomment-3021366309) |\n| Concept ACK | [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/32783#pullrequestreview-2949866383) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T10:12:22Z"
        },
        {
          "user": "theStack",
          "body": "Concept ACK",
          "created_at": "2025-06-20T10:23:44Z"
        },
        {
          "user": "pablomartin4btc",
          "body": "re-ACK 45b1d39",
          "created_at": "2025-06-25T19:56:20Z"
        },
        {
          "user": "achow101",
          "body": "ACK 45b1d39757668939b03b27401c324a938ef0cd8d",
          "created_at": "2025-07-01T01:25:48Z"
        }
      ]
    },
    {
      "number": 32782,
      "title": "test: disable secp256 tests by default",
      "body": "Paritally addresses: #32770\r\n\r\nThis PR disables the slow `secp256`  test suites by default, both in CI runs and normal developer builds/tests. These tests are  static in every run, except for the case in which we update the secp256 subtree.\r\n\r\nThis is done by decoupling the `SECP256K1_BUILD_TESTS` and `SECP256K1_BUILD_EXHAUSTIVE_TESTS` variables from the `${BUILD_TESTS}` configuration, allowing them to be selected individually.\r\n\r\nWe would likely still like to run these tests when the subtree is updated. To do this a standalone workflow is provided which runs only when modifications to `src/secp256k1/**` are detected.\r\n\r\nThis reduces unit test runtime on my machine from ~30 seconds to ~10 seconds. On slower CI machines these tests are taking up to 10 minutes to run, so we may save up to 6 minutes of runtime per CI run.",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-06-20T09:00:26Z",
      "updated_at": "2025-06-30T10:15:31Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/32782",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32782.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-20T09:00:31Z"
        },
        {
          "user": "willcl-ark",
          "body": "Questions:\r\n\r\n- [ ] The new workflow relies on GitHub detecting changes to the subtree dir. This could be risky? We might want to also add a weekly `on:` target to the workflow, or write our own function to test if the subtree was updated (e.g. diff the commit range as detected in `test_each_commit` job), to avoid cases where this subtree detection doesn't work as planned/expected.\r\n- [ ] The new workflow only runs these tests on x64 Linux, whereas currently the tests are run on a variety of platforms. Should we be concerned about this? These tests **are** run in the secp256k1 repo on x64, i686, s390x, arm32, arm64, ppc64le, under valgrind, with various sanitizers, windows, macos, etc.\r\n- [ ] Should we perhaps enable these tests in the `dev-mode` preset in _CMakePresets.json_?\r\n\r\ncc @maflcko ",
          "created_at": "2025-06-20T09:02:04Z"
        },
        {
          "user": "l0rinc",
          "body": "Could we keep them for CI, to make sure that our setup (different compiler versions, sanitizers, architectures) can still handle them? Though many of those will likely be tested implicitly anyway...",
          "created_at": "2025-06-20T10:25:34Z"
        },
        {
          "user": "willcl-ark",
          "body": "> Could we keep them for CI, to make sure that our setup (different compiler versions, sanitizers, architectures) can still handle them? Though many of those will likely be tested implicitly anyway...\r\n\r\nMy fault for not making it more clear, but the intent behind this change is mostly _towards_ (slow) CI. I don't think a few extra seconds locally is any kind of issue for devs (also related to my Q about enabling them in the `dev-mode` preset), but this runtime is much longer on some CI runs (see #32770) where it starts to add up.\r\n\r\nSo, if you wanted to keep them running in CI for the reasons you stated, then you should NACK this PR :)",
          "created_at": "2025-06-20T10:30:55Z"
        },
        {
          "user": "maflcko",
          "body": "if you want to run it through the sanitizers (msan, etc), the easiest would probably to check in the `./ci` if the last merge commit is the secp256k subtree merge commit. If yes, run the tests. If no, skip them.",
          "created_at": "2025-06-20T12:17:15Z"
        },
        {
          "user": "hebasto",
          "body": "> Paritally addresses: #32770\r\n> \r\n> This PR disables the slow `secp256` test suites by default, both in CI runs and normal developer builds/tests. These tests are static in every run, except for the case in which we update the secp256 subtree.\r\n> \r\n> This is done by decoupling the `SECP256K1_BUILD_TESTS` and `SECP256K1_BUILD_EXHAUSTIVE_TESTS` variables from the `${BUILD_TESTS}` configuration, allowing them to be selected individually.\r\n> \r\n> We would likely still like to run these tests when the subtree is updated. To do this a standalone workflow is provided which runs only when modifications to `src/secp256k1/**` are detected.\r\n> \r\n> This reduces unit test runtime on my machine from ~30 seconds to ~10 seconds. On slower CI machines these tests are taking up to 10 minutes to run, so we may save up to 6 minutes of runtime per CI run.\r\n\r\nAlternatively, libsecp256k1 tests could be run with a lower value for the `SECP256K1_TEST_ITERS` environment variable: say, 8. See related discussions in:\r\n- https://github.com/bitcoin-core/secp256k1/issues/1561\r\n- https://github.com/bitcoin-core/secp256k1/pull/1581\r\n\r\ncc @real-or-random ",
          "created_at": "2025-06-24T10:54:55Z"
        },
        {
          "user": "real-or-random",
          "body": "cc @sipa @jonasnick ",
          "created_at": "2025-06-24T20:41:43Z"
        },
        {
          "user": "real-or-random",
          "body": "> Alternatively, libsecp256k1 tests could be run with a lower value for the `SECP256K1_TEST_ITERS` environment variable: say, 8.\r\n\r\nWe reduced the default count to 16 last year. It would be interesting to know how long CI takes for a count of 8 or 4. And if that's not quite satisfying, we could disable some of the static (= not randomized) tests at low iteration counts. (We already do this for the most expensive ones.) \r\n\r\nWe test many many compile configurations (platform, compiler version, libsecp256k1 flags, ...) in our CI, but the good thing about always running the tests here is that they also exercise the exact compile configuration used in Bitcoin Core.",
          "created_at": "2025-06-24T20:59:21Z"
        },
        {
          "user": "willcl-ark",
          "body": "I think if there is concern about configurations then I agree it would make more sense to drop the iterations to 4 or 8 as suggested by @hebasto and @real-or-random ",
          "created_at": "2025-06-25T10:24:14Z"
        },
        {
          "user": "luke-jr",
          "body": "Opposite thought from @l0rinc: disable them *only* for CI, but leave them enabled for normal builds (which may be the only time the tests are ever run on the end user machine)",
          "created_at": "2025-06-26T18:58:34Z"
        },
        {
          "user": "gmaxwell",
          "body": "As an author of that library I am uncomfortable with any usage unguarded by correctness tests.  The software is sensitive to compiler errors (which can be triggered by all sorts of random environmental nonsense) and ought to be tested with the exact compiler environment used.  A single predictable bit error in signing is enough to leak private keys and can happen in ways that still result in valid signatures. (e.g. miscompilation that results in the first byte/bit of the nonce being set to any static value is enough)\r\n\r\nThe tests could be made arbitrarily fast as needed, e.g. even reduction to a collection of a few thousand known response tests for signing would provide a lot of confidence and hardly take any time.\r\n\r\nIs the bitcoin core project consistently running tests on all tested platforms except in CI these days? \r\n\r\nIf it is then getting incidentally tested as part of CI is not as important (but not unimportant, e.g. both for more random tries for data/alignment sensitive bugs or catching a subtly malicious PR that corrupts process memory in order to undermining security).\r\n",
          "created_at": "2025-06-29T00:31:43Z"
        },
        {
          "user": "willcl-ark",
          "body": "> As an author of that library I am uncomfortable with any usage unguarded by correctness tests. The software is sensitive to compiler errors (which can be triggered by all sorts of random environmental nonsense) and ought to be tested with the exact compiler environment used. A single predictable bit error in signing is enough to leak private keys and can happen in ways that still result in valid signatures. (e.g. miscompilation that results in the first byte/bit of the nonce being set to any static value is enough)\r\n\r\nThis is more than enough reason to keep running the tests in every CI run.\r\n\r\n>\r\n> The tests could be made arbitrarily fast as needed, e.g. even reduction to a collection of a few thousand known response tests for signing would provide a lot of confidence and hardly take any time.\r\n\r\nThis could be an interesting approach. FWIW I experimented a little with reducing the iterations as suggested above and it does reduce the runtime quite significantly (e.e. below in the `noverify_tests` from 11s to 4s), but also warns that it begins skipping a few tests as there are not enough iterations:\r\n\r\n```fish\r\nsrc/core/bitcoin on ÓÇ† reduce-secp-iter [$?] via ‚ñ≥ v3.31.6 via üêç v3.13.3 via ‚ùÑÔ∏è  impure (nix-shell-env) took 5s\r\n‚ùØ set -x SECP256K1_TEST_ITERS 4\r\n\r\nsrc/core/bitcoin on ÓÇ† reduce-secp-iter [$?] via ‚ñ≥ v3.31.6 via üêç v3.13.3 via ‚ùÑÔ∏è  impure (nix-shell-env)\r\n‚ùØ time build/src/secp256k1/bin/noverify_tests\r\ntest count = 4\r\nrandom seed = 1cd83c3b42cf05f35e46a96cf63feaa3\r\nSkipping run_sha256_known_output_tests 1000000 (iteration count too low)\r\nSkipping test_ecmult_constants_2bit (iteration count too low)\r\nrandom run = a44101523d760692b01a48540b8bee16\r\nno problems found\r\n\r\n________________________________________________________\r\nExecuted in    4.42 secs    fish           external\r\n   usr time    4.37 secs    4.62 millis    4.36 secs\r\n   sys time    0.05 secs    1.93 millis    0.04 secs\r\n```\r\n\r\n\r\n> \r\n> Is the bitcoin core project consistently running tests on all tested platforms except in CI these days?\r\n> \r\n> If it is then getting incidentally tested as part of CI is not as important (but not unimportant, e.g. both for more random tries for data/alignment sensitive bugs or catching a subtly malicious PR that corrupts process memory in order to undermining security).\r\n\r\nTo my knowledge we have:\r\n\r\n- CI runs on every PR and merge\r\n- Local developer runs\r\n- Various external \"nightly\" CI runs (which may include other platforms) in other repos e.g. https://github.com/hebasto/bitcoin-core-nightly/ and https://github.com/maflcko/b-c-nightly but should perhaps not be relied on too heavily\r\n\r\n-----\r\n\r\nThank you all for feedback. My read now is that the best approach here will be to close this and instead work specicifally on better parallelisation/resource usage of the unit and functional tests in CI to address #32770",
          "created_at": "2025-06-30T09:09:37Z"
        },
        {
          "user": "maflcko",
          "body": "For the guix cross-compiled release binaries, I don't think the secp256 tests are included at all. So testing for compiler errors is currently only done indirectly, when a CI task (or a dev) picks a compiler with a somewhat similar version string. I've opened https://github.com/bitcoin-core/packaging/pull/285 as a draft to actually test the guix-produced release binaries. However, it seems a bit tedious, and it would be easier if the release binaries offered an extended/dev/debug build that includes secp256 tests, as well as the config.ini for the functional tests.",
          "created_at": "2025-06-30T10:14:56Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 7,
    "issues": 0
  }
}