{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:42:16.579767+00:00",
  "date": "2025-12-22",
  "pull_requests": [
    {
      "number": 34141,
      "title": "miniscript: Use Func and Expr when parsing keys, hashes, and locktimes",
      "body": "The miniscript parser currently only looks for the next `)` when parsing key, hash, and locktime expressions. This fails to parse when the expressions contain a nested expression. Currently, this is only possible with `musig()` inside of key expressions. However, this pattern can be generalized to handling hashes and locktimes, so I implemented those too.\r\n\r\nFixes #34076",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-12-22T21:36:58Z",
      "updated_at": "2026-01-15T19:26:41Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34141",
      "labels": [
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34141.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [scgbckbone](https://github.com/bitcoin/bitcoin/pull/34141#issuecomment-3688186299) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31713](https://github.com/bitcoin/bitcoin/pull/31713) (miniscript refactor: Remove unique_ptr-indirection by hodlinator)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T21:37:04Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `TSan`: https://github.com/bitcoin/bitcoin/actions/runs/20444643161/job/58745329801</sub>\n<sub>LLM reason (‚ú® experimental): descriptor_tests failed with Subprocess aborted (CTest exit code 8).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-22T22:11:01Z"
        },
        {
          "user": "achow101",
          "body": "Looks like that was caused by the key expression index being counted incorrectly for musig inside of miniscript, and therefore looking up the wrong key in the cache. Should be fixed now.",
          "created_at": "2025-12-23T21:54:17Z"
        },
        {
          "user": "scgbckbone",
          "body": "tACK https://github.com/bitcoin/bitcoin/pull/34141/commits/2500adcbe7614d5ab34c7ad3463c5b2cb3674643",
          "created_at": "2025-12-23T23:12:39Z"
        },
        {
          "user": "maflcko",
          "body": "The CI fails due to UB:\r\n\r\n```\r\n/cxx_build/include/c++/v1/__iterator/bounded_iter.h:123: libc++ Hardening assertion __current_ != __end_ failed: __bounded_iter::operator*: Attempt to dereference an iterator at the end",
          "created_at": "2025-12-24T08:50:34Z"
        }
      ]
    },
    {
      "number": 34140,
      "title": "Simplicity",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "roconnor-blockstream",
      "created_at": "2025-12-22T19:44:24Z",
      "updated_at": "2025-12-22T19:45:06Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/34140",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34140.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T19:44:34Z"
        }
      ]
    },
    {
      "number": 34139,
      "title": "refactor: Add helper for Taproot control block size check",
      "body": "Add a helper for the Taproot control block size check to improve readability and reduce repetition. We currently have three instances of this check.\r\n\r\nBuild & unit tests succeed on my end.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-22T17:24:36Z",
      "updated_at": "2025-12-27T14:23:38Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34139",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34139.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T17:24:43Z"
        },
        {
          "user": "billymcbip",
          "body": "@rkrux thank you for your feedback. Could you have a look at https://github.com/bitcoin/bitcoin/pull/34142 as well? That'd be a fourth instance of this check.",
          "created_at": "2025-12-23T12:50:29Z"
        },
        {
          "user": "rkrux",
          "body": "> @rkrux thank you for your feedback. Could you have a look at #34142 as well? That'd be a fourth instance of this check.\r\n\r\nBoth these PRs contain similar changes with minor differences, I was initially confused but later got the intent.\r\n\r\nSuggest to keep only 1 PR that contains all the changes, will be easier for the reviewers imho to get the whole context.",
          "created_at": "2025-12-26T08:51:10Z"
        },
        {
          "user": "billymcbip",
          "body": "@rkrux OK.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/34142 now includes all changes proposed in this PR. I will close this PR.",
          "created_at": "2025-12-27T14:23:38Z"
        }
      ]
    },
    {
      "number": 34138,
      "title": "Cluster mempool: more accurate cost model for SFL",
      "body": "Builds on top of #34023, part of #30289.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented as of #32545 and #34023, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on a reference system (Zen 4 based).\r\n\r\nThis is draft because:\r\n* The weights used are outdated, as several non-trivial improvements were made to #32545 and #34023 since.\r\n* I don't know if it is the right middle ground, and it seems good to have some conceptual discussion first:\r\n  * Using benchmarks on a reference system inherently captures some platform specifics, making it possible that the metric is not very accurate on other systems.\r\n  * A benchmark-based metric is nontrivial to maintain.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-22T14:57:53Z",
      "updated_at": "2026-01-15T14:39:12Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/34138",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34138.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34259](https://github.com/bitcoin/bitcoin/pull/34259) (Find minimal chunks in SFL by sipa)\n* [#34257](https://github.com/bitcoin/bitcoin/pull/34257) (txgraph: deterministic optimal transaction order by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T14:57:59Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/20443977146/job/58743290866</sub>\n<sub>LLM reason (‚ú® experimental): Lint check failed due to scripted_diff differences in the patch.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-22T22:24:06Z"
        },
        {
          "user": "gmaxwell",
          "body": "My thoughts: \r\n\r\nIt should use a metric like this, not time, because it would be weird and undesirable for the behavior to change a lot just based on what system you're on or what you're doing with it.  People expect slower computers to have higher cpu utilization and the intended limits are low enough that I think they won't be problematic on even quite slow computers.\r\n\r\nAn operation based metric based on the performance of any specific computer will likely be much more reflective of the real resourced used on *another* kind of computer than some simple iteration count-- so even if something profiled on a single computer doesn't reflect yours it beats keeping the iteration based approach.\r\n\r\nOne possibility would be to benchmark on several modern architectures like zen4, macpro, and graviton... normalize their coefficients for equal time on some corpus, and then average them.   As in the weights for the different measures are just the average of the systems except for some per-system scaling factor of expected average performance difference. (Or in the context of the regression used to fit this, fit a model on the coefficients with Archs-1 additional free scaling factors and then discard the scaling factors)--  e.g.  minimize ((A\\*x+B\\*y+C\\*z+..)+Arch1\\*(A\\*x+B\\*y+C\\*z+..)+Arch2\\*(A\\*x+B\\*y+C\\*z+..)-(Arch0time+Arch1time+Arch2time+...))^2.  This wouldn't reflect the cost on any specific system perfectly but it might give a better estimate overall, across multiple systems.  And my argument of \"A wrong cost is still better than no cost model\" still applies.  The downside is that you'd need to measure multiple systems to calibrate it.\r\n\r\nAn alternative might be to just use the coefficients for whatever popular modern hardware you think is most resource constrained--  better to have the unexpectedly show runs impact the fast computers more.  And at least this approach only requires the extensive profiling on one system.\r\n\r\nAs far as what transactions calibration should be against, a corpus of historical clusters is probably okay.  It would probably make sense to exclude from the corpus easy clusters, e.g. ones with fewer than 10 transactions. You only care if the metric is accurate on times near the limit.  I don't think using artificial cases is that helpful, as the metric will only be accurate 'on average' anyways. \r\n \r\nI don't think the coefficients need to be that well maintained over time except due to future algorithmic optimizations simply because doing *anything* here is better than just iteration counting.  And since it's desirable to behave mostly consistently (so when someone asks why was some suboptimal cluster picked you can just look and see finding it is usually over the limit, etc), you wouldn't want to updated them often -- probably only when advances in typical computer speeds also justify meaningfully increasing the limit overall such that almost all transactions would get as much or more optimization permitted under the new limits.\r\n",
          "created_at": "2025-12-24T19:47:20Z"
        },
        {
          "user": "sipa",
          "body": "> An alternative might be to just use the coefficients for whatever popular modern hardware you think is most resource constrained-- better to have the unexpectedly show runs impact the fast computers more. And at least this approach only requires the extensive profiling on one system.\r\n\r\nFair enough, but an argument can also be made in favor of using metrics tuned for a relatively high-end system, in that those are likely a better predictor for which machines on the network, in the short to medium term future, will be responsible for actual transaction and block propagation. The numbers are such that any node, even running very low-end hardware, will not have trouble *keeping up* with mempool/relay, but from a network perspective, it's a well-connected subset of relatively fast systems that is responsible for relay.\r\n\r\n>  I don't think using artificial cases is that helpful, as the metric will only be accurate 'on average' anyways.\r\n\r\nHmm, that does risk situations where adverserially-constructed transactions are significantly (but still probably not more than a small factor, say 2x-3x) more expensive per cost. I think it makes sense to use as wide a variety of clusters, real and synthetic, to calibrate.",
          "created_at": "2025-12-27T18:45:24Z"
        },
        {
          "user": "gmaxwell",
          "body": "Yeah I was trying to capture 'reflective of the future' in the word \"modern\".  Fair point on the relatively fast systems being the ones that count -- while slow systems are just \"also runs\" and it's sufficient that they just aren't broken.  Fair enough.\r\n\r\n> Hmm, that does risk situations where adverserially-constructed transactions are significantly (but still probably not more than a small factor, say 2x-3x) more expensive per cost.\r\n\r\nA concern I had with synthetics is that with artificially hard clusters the costs might end up distorted by 'hard' transactions tending to trigger more of an operation and having that cost inflated in the regression though that operation itself is actually fast.  It might make sense to have a starting offset based on the number of dependencies or some costs having a multiplier of the number of dependencies in them.\r\n\r\n",
          "created_at": "2025-12-27T19:51:54Z"
        },
        {
          "user": "sipa",
          "body": "> A concern I had with synthetics is that with artificially hard clusters the costs might end up distorted by 'hard' transactions tending to trigger more of an operation and having that cost inflated in the regression though that operation itself is actually fast.\r\n\r\nFWIW, the current PR (although outdated now)'s weights were determined by benchmarking small pieces of code (functions, sometimes individual loop executions) and running linear regression on those. I also tried regression that tried to relate overall linearization time with various linear factors (number of times each function/loop is executed), but it turned out to be far too noisy. The result ended up containing negative factors etc.\r\n\r\nSo I think that when #34023 is in, I will redo the numbers here with the same approach. For every function or non-trivial branch in the algorithm, benchmark it, and gather a histogram of its runtimes, broken down by loop iterations (e.g. in `Activate` broken down by #tx affected, in `PickMergeChunk` broken down by number of chunks visited, ...). Then look at the 90th or 99th percentile of those runtimes, and perform linear regression with just one variable, that iteration count.\r\n\r\nThe exact composition of the training data set shouldn't matter really, except to the extent that it has some variety, and not say all clusters with deps=tx-1 or so.",
          "created_at": "2025-12-30T00:13:20Z"
        }
      ]
    },
    {
      "number": 34137,
      "title": "test: Avoid hard time.sleep(1) in feature_init.py",
      "body": "Using a hard-coded `time.sleep` in the tests is usually confusing and brittle. For example, the one in `break_wait_test`:\r\n\r\n* Is confusing, because it does not explain why it is needed.\r\n* On fast hardware will just lead to a useless delay.\r\n* On slow hardware may lead to an intermittent, and confusing test failure.\r\n\r\nFix all issues by replacing it with the proper condition to wait on.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T13:46:23Z",
      "updated_at": "2026-01-05T12:10:36Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34137",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34137.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/34137#pullrequestreview-3608185315), [Sjors](https://github.com/bitcoin/bitcoin/pull/34137#issuecomment-3688368252), [janb84](https://github.com/bitcoin/bitcoin/pull/34137#pullrequestreview-3610840015) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T13:46:31Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/20433712257/job/58709973844</sub>\n<sub>LLM reason (‚ú® experimental): Lint Python code failed due to unused import (time) in test/functional/feature_init.py, causing lint check to exit with error.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-22T13:54:49Z"
        },
        {
          "user": "Sjors",
          "body": "utACK fa727e3ec984106371eeedb34d7bbbbc3dcce4ff\r\n\r\nThanks, this is easier to read than before: https://github.com/bitcoin/bitcoin/pull/34137#discussion_r2641818893\r\n\r\nIt's also an improvement over `sleep(1)`, because the code specifically says what it's waiting for.",
          "created_at": "2025-12-24T01:41:02Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 30.x in #34192.",
          "created_at": "2026-01-05T12:10:36Z"
        }
      ]
    },
    {
      "number": 34136,
      "title": "test: Allow mempool_updatefromblock.py to run on 32-bit",
      "body": "The number of dropped parent transactions in the `test_max_disconnect_pool_bytes` test was hard-coded to `2`.\r\n\r\nThis happens to work fine on 64-bit for now. However, it seems to fail on 32-bit (https://github.com/bitcoin/bitcoin/issues/34108).\r\n\r\nI don't think we care about the exact number, as long as it is at least `1`.\r\n\r\nSo hard-code `1` for an initial sanity check, and then calculate the exact value at runtime via `len(mempool) // 2`.\r\n\r\n\r\nAlso, enable the functional tests in 32-bit CI, to confirm the regression test.\r\n\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34108",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T10:59:47Z",
      "updated_at": "2026-01-05T14:54:42Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34136",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34136.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34136#issuecomment-3706078502), [instagibbs](https://github.com/bitcoin/bitcoin/pull/34136#issuecomment-3710634731) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T10:59:53Z"
        },
        {
          "user": "bensig",
          "body": "ACK fac5a1b10a\r\n\r\nTested locally - `mempool_updatefromblock.py` passes. ",
          "created_at": "2026-01-02T19:26:04Z"
        },
        {
          "user": "instagibbs",
          "body": "ACK fac5a1b10a6979a7898c5c3555d62b593560772f",
          "created_at": "2026-01-05T14:21:14Z"
        }
      ]
    },
    {
      "number": 34135,
      "title": "rpc: [wallet] Use unsigned type for tx version in sendall",
      "body": "It is confusing to parse the unsigned tx version as a signed type. Also, it makes it harder to use the integer sanitizer.\r\n\r\nCan be tested via:\r\n\r\n* Build with the flags `-DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero`\r\n* Set the existing suppressions: `export UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=0:report_error_type=1\"`\r\n* Start the RPC server, e.g. `./bld-cmake/bin/bitcoin-qt -datadir=/tmp -regtest -server`\r\n* Call the sendall RPC, e.g. `./bld-cmake/bin/bitcoin-cli -datadir=/tmp -regtest -named sendall '[\"bcrt1qlrt3xps4wxpfcjmljrayr2ualczmnfvd4vzdq3\"]' fee_rate=1.234  version=-1`\r\n\r\nBefore:\r\n\r\n```\r\nsrc/wallet/rpc/spend.cpp:1470:42: runtime error: implicit conversion from type 'int' of value -1 (32-bit, signed) to type 'uint32_t' (aka 'unsigned int') changed the value to 4294967295 (32-bit, unsigned)\r\n\r\nInvalid parameter, version out of range(1~3)\r\n```\r\n\r\nAfter:\r\n\r\n```\r\nJSON integer out of range\r\n\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T10:10:57Z",
      "updated_at": "2026-01-06T23:59:04Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34135",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34135.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/34135#pullrequestreview-3611218065), [bensig](https://github.com/bitcoin/bitcoin/pull/34135#issuecomment-3709014293), [theStack](https://github.com/bitcoin/bitcoin/pull/34135#pullrequestreview-3626572709), [achow101](https://github.com/bitcoin/bitcoin/pull/34135#issuecomment-3716739249) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-22T10:11:05Z"
        },
        {
          "user": "bensig",
          "body": "ACK fafbc70d48e1fb42c4ed3da609e5f30c4cc39418\r\n\r\nUsing `decltype(coin_control.m_version)` instead of `int` correctly matches the target type and avoids the signed-to-unsigned conversion warning.",
          "created_at": "2026-01-05T05:42:43Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, the error message could be clearer, but this should be an edge case here and  seems a general issue with `getInt`, so ideally it is done in a follow-up",
          "created_at": "2026-01-06T11:09:24Z"
        },
        {
          "user": "achow101",
          "body": "ACK fafbc70d48e1fb42c4ed3da609e5f30c4cc39418",
          "created_at": "2026-01-06T23:38:05Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 34134,
      "title": "Amount input field truncates value ‚Äì only ‚Äú0‚Äù is visible",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nThe amount input field in the send transaction dialog is too small to display the entered value.\n\nWhen entering an amount, the value is truncated to the point where only a single ‚Äú0‚Äù is visible in the field. This makes the entered amount completely unreadable and prevents proper verification before sending a transaction.\n\nThis is a serious usability issue and may lead to user mistakes. The amount field should be wide enough or dynamically resized to always display the full value.\n\n\n\nBitcoin Core version: 30.0\nOperating system: Windows 11\n\n<img width=\"411\" height=\"105\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5c41ac47-1618-4aad-a947-a3e689fa5007\" />\nThe value in this example is: 0.00022200\n\n### Expected behaviour\n\nhe amount input field should display the full entered value at all times. The user must be able to clearly read and verify the complete amount before sending a transaction, without the value being truncated or hidden.\n\n### Steps to reproduce\n\nOpen send dialog\n\n### Relevant log output\n\nNA\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n30.0\n\n### Operating system and version\n\nWindows 11\n\n### Machine specifications\n\nNA",
      "state": "closed",
      "user": "schnello",
      "created_at": "2025-12-22T08:41:21Z",
      "updated_at": "2025-12-22T14:11:20Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34134",
      "labels": [
        "GUI",
        "Windows"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "This is a duplicate of https://github.com/bitcoin-core/gui/issues/906.\n\nFixed in https://github.com/bitcoin/bitcoin/pull/33906.\n\nAvailable in the v30.1 release.",
          "created_at": "2025-12-22T14:10:50Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 1
  }
}