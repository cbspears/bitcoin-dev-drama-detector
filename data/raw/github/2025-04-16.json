{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:33:19.180770+00:00",
  "date": "2025-04-16",
  "pull_requests": [
    {
      "number": 32290,
      "title": "test: allow all functional tests to be run or skipped with --usecli",
      "body": "Fixes #32264\r\n\r\nI looked into all current failures listed in the issue, as well all tests that are already disabled for the cli with `self.supports_cli = False`. There are several reasons why existing tests fail  with `--usecli` on many systems, the most important ones are:\r\n\r\n- Most common reason is that the test executes a RPC call with a large arg that exceeds `MAX_ARG_STRLEN` of the OS, which is usually 128kb on linux: This is fixed by using `-stdin` for these large calls (idea by 0xB10C)\r\n- they test specifically the rpc interface - nothing to do there except disabling.\r\n- Some functional test submit wrong types to params on purpose to test the error message (which is different when using the cli) - deactivated these specific subtests locally for the cli when there is just one or two of them, deactivated the entire tests when there are more spots\r\n- When python sets `None` for an arg, the cli converts this to 'null' in `arg_to_cli`. This is fine e.g. for boolean args, but doesn't work for strings where it's interpreted as the string 'null'. Bypass this for named args by not including args in case the value is `None` for the cli is used (it's effectively the same as leaving the optional arg out).\r\n-  the `height_or_hash` param used in some RPC needs to be converted to a JSON (effectively adding full quotes).\r\n- Some tests were marked with `self.supports_cli = False` in the past but run fine on master today - enabled those.\r\n\r\nIn total, this PR fixes all tests that fail on master and reduces the number of tests that are deactivated (`self.supports_cli = False`) from 40 to 21.\r\nIt also adds `--usecli` to one CI job (multiprocess, i686, DEBUG) to detect regressions.",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-04-16T20:50:54Z",
      "updated_at": "2025-07-09T17:26:47Z",
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/pull/32290",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32290.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32290#issuecomment-2999413010), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/32290#pullrequestreview-2980079242) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-16T20:50:57Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40687372455</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-16T23:01:01Z"
        },
        {
          "user": "fanquake",
          "body": "If this ends up fixing all issues, should add `--usecli` to atleast one CI, so we catch regressions?",
          "created_at": "2025-04-17T09:02:20Z"
        },
        {
          "user": "mzumsande",
          "body": "> If this ends up fixing all issues, should add --usecli to atleast one CI, so we catch regressions?\r\n\r\nYes - it'd be a bit of  a waste of a CI job if we end up disabling too many of the tests with `self.supports_cli = False` but depending on how many can be fixed (I'm currently still going through all the existing disabled tests) that would make sense to me. ",
          "created_at": "2025-04-17T21:57:59Z"
        },
        {
          "user": "mzumsande",
          "body": "> If this ends up fixing all issues, should add `--usecli` to atleast one CI, so we catch regressions?\r\n\r\nI have added `--usecli` to one CI job now (multiprocess, i686, DEBUG)",
          "created_at": "2025-04-30T21:55:08Z"
        },
        {
          "user": "mzumsande",
          "body": "Also added a commmit to fix the too-large args (https://github.com/bitcoin/bitcoin/pull/32399#issuecomment-2846837427).",
          "created_at": "2025-05-02T19:42:48Z"
        },
        {
          "user": "mzumsande",
          "body": "[7c13240](https://github.com/bitcoin/bitcoin/commit/7c13240d7b9a03b77ad84460e80007063367e05a) to [2bf3f90](https://github.com/bitcoin/bitcoin/commit/2bf3f907ff54efd4fa22930a81269d568e29274e): rebased - as a side effect, the legacy wallet removal made `wallet_labels.py --usecli` work on master, so no longer mentioned here.",
          "created_at": "2025-05-20T18:42:19Z"
        },
        {
          "user": "mzumsande",
          "body": "Converting to draft until I understand the CI failure (which I couldn't reproduce locally so far).",
          "created_at": "2025-06-12T18:24:43Z"
        },
        {
          "user": "fanquake",
          "body": ">  the CI failure\r\n\r\nThe `bitcoin` call seems to be missing the binary argument:\r\n```bash\r\nTestFramework (ERROR): Called Process failed with 'Error: Unknown option: -nonamed\r\n...\r\nsubprocess.CalledProcessError: Command '['bitcoin', '-m', '-nonamed', '-datadir=/ci_container_base/ci/scratch/test_runner/test_runner_â‚¿_ðŸƒ_20250610_161648/feature_fee_estimation_266/node0', '-named', '-stdin']' returned non-zero exit status 1.\r\n```\r\n```bash\r\n./build/bin/bitcoin -m -nonamed        \r\nError: Unknown option: -nonamed\r\nTry './build/bin/bitcoin --help' for more information.\r\n```\r\n\r\ncc @ryanofsky",
          "created_at": "2025-06-13T09:23:38Z"
        },
        {
          "user": "maflcko",
          "body": "> The `bitcoin` call seems to be missing the binary argument:\r\n\r\nYes, but I fail to see why. It clearly picked the bitcoin_cmd, but then forgot to append `[command]`, which is `[\"rpc\"]`:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1f3a5cc918361edfb8e00b0856651a64abe667ed/test/functional/test_framework/test_framework.py#L108\r\n",
          "created_at": "2025-06-13T09:32:10Z"
        },
        {
          "user": "ryanofsky",
          "body": "> Converting to draft until I understand the CI failure (which I couldn't reproduce locally so far).\r\n\r\nNot sure about the error yet but I could reproduce locally by running `BITCOIN_CMD=bitcoin build/test/functional/feature_fee_estimation.py --usecli`",
          "created_at": "2025-06-13T12:32:26Z"
        },
        {
          "user": "ryanofsky",
          "body": "Seems to fix the problem:\r\n\r\n```diff\r\n--- a/test/functional/test_framework/test_node.py\r\n+++ b/test/functional/test_framework/test_node.py\r\n@@ -922,6 +922,7 @@ class TestNodeCLI():\r\n         p_args = self.binaries.rpc_argv() + [f\"-datadir={self.datadir}\"] + self.options\r\n         if named_args:\r\n             p_args += [\"-named\"]\r\n+        base_args = len(p_args)\r\n         if clicommand is not None:\r\n             p_args += [clicommand]\r\n         p_args += pos_args + named_args\r\n@@ -929,13 +930,12 @@ class TestNodeCLI():\r\n         stdin_data = self.input\r\n         if max_arg_size > CLI_MAX_ARG_SIZE:\r\n             self.log.debug(f\"Cli: Command size {max_arg_size} too large, using stdin\")\r\n-            rpc_args = \"\\n\".join([arg for arg in p_args[1:] if not arg.startswith('-')])\r\n+            rpc_args = \"\\n\".join([arg for arg in p_args[base_args:]])\r\n             if stdin_data is not None:\r\n                 stdin_data += \"\\n\" + rpc_args\r\n             else:\r\n                 stdin_data = rpc_args\r\n-            base_args = [arg for arg in p_args if arg.startswith('-')]\r\n-            p_args =[p_args[0]] + base_args + ['-stdin']\r\n+            p_args = p_args[:base_args] + ['-stdin']\r\n \r\n         self.log.debug(\"Running bitcoin-cli {}\".format(p_args[2:]))\r\n         process = subprocess.Popen(p_args, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)\r\n```\r\n",
          "created_at": "2025-06-13T12:49:32Z"
        },
        {
          "user": "mzumsande",
          "body": "Thanks - will try this fix soon. ~~This has nothing to do with multiprocess by the way - it's my bug, I just happened to pick that CI job to enable the `-usecli` run.~~",
          "created_at": "2025-06-13T13:31:01Z"
        },
        {
          "user": "mzumsande",
          "body": "I took @ryanofsky's fix and fixed another silent conflict - I had no idea what was going on (#31375 got merged and conflicted with my previous changes to `send_cli`), so I guess it's good that I randomly chose to enable `--usecli` in the `multiprocess` CI job.",
          "created_at": "2025-06-18T18:29:21Z"
        },
        {
          "user": "mzumsande",
          "body": "[60106f3](https://github.com/bitcoin/bitcoin/commit/60106f32852524498d5d6e958a3bcabdfb06ee1a) to [666016e](https://github.com/bitcoin/bitcoin/commit/666016e56b28b77f798dc85c767b95c1ca0abfae):\r\nAddressed feedback by @maflcko and rebased.",
          "created_at": "2025-06-23T22:08:42Z"
        },
        {
          "user": "maflcko",
          "body": "only change is some nits\r\n\r\nre-ACK 666016e56b28b77f798dc85c767b95c1ca0abfae ðŸ”€\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 666016e56b28b77f798dc85c767b95c1ca0abfae ðŸ”€\r\nHWd4XUY5PezE7oN9IN6P2/iqv4G3zJhbGT19Z6z1RjeD4avNt9t1BOKK+S+9nMnUEO9mN9rC35GsAuq2N2e1BA==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-06-24T08:51:50Z"
        }
      ]
    },
    {
      "number": 32289,
      "title": "doc: Add note for building on macOS (Intel) with CMake â‰¥ 4.0",
      "body": "Due to [changes](https://cmake.org/cmake/help/latest/release/4.0.html#other-changes) in CMake 4.0, building on macOS (Intel) no longer silences warnings from Homebrew-installed packages, such as `boost` or `libevent`.\r\n\r\nThis PR adds a note to the [_macOS Build Guide_](https://github.com/bitcoin/bitcoin/blob/master/doc/build-osx.md) to work around this issue.\r\n\r\nFor technical background, see the following discussions:\r\n- https://gitlab.kitware.com/cmake/cmake/-/issues/19180\r\n- https://gitlab.kitware.com/cmake/cmake/-/merge_requests/10636",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-16T16:23:00Z",
      "updated_at": "2025-07-02T13:35:59Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32289",
      "labels": [
        "Docs",
        "macOS"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32289.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-16T16:23:03Z"
        },
        {
          "user": "fanquake",
          "body": "Not sure. I see this is just copied from the CMake release notes, but it doesn't really explain anything, and it's not clear what warnings that were being supressed no-longer are. Also seems like the warnings are a sideeffect of some other issues, that should probably be fixed *properly*, in some way.",
          "created_at": "2025-04-17T09:22:11Z"
        },
        {
          "user": "hebasto",
          "body": "> ... that should probably be fixed _properly_, in some way.\r\n\r\nI haven't found a way to do it that covers all use cases, is user-friendly, and doesn't introduce excessive complexity.",
          "created_at": "2025-04-17T09:48:14Z"
        },
        {
          "user": "janb84",
          "body": "> > ... that should probably be fixed _properly_, in some way.\r\n> \r\n> I haven't found a way to do it that covers all use cases, is user-friendly, and doesn't introduce excessive complexity.\r\n\r\nMaybe one \"solution\" is not to lean only on homebrew but offer also an alternative package manager  e.g. nix ? (nix is still on cmake 3.31 so not sure what will happen when they are on 4.0 )",
          "created_at": "2025-04-18T08:06:39Z"
        },
        {
          "user": "fanquake",
          "body": "What's the status of this? CMake `4.x` has been available on macOS via brew for > 3 months, and we haven't had any issues reported. I think we could just do nothing here.",
          "created_at": "2025-07-02T12:22:30Z"
        },
        {
          "user": "maflcko",
          "body": "apple will support intel machines for another three years, but this is just a warning, so should be fine to leave as-is?",
          "created_at": "2025-07-02T13:22:42Z"
        },
        {
          "user": "hebasto",
          "body": "The issue has been [fixed](https://cmake.org/cmake/help/latest/release/4.0.html#id2) in CMake 4.0.2.\r\n\r\nClosing.",
          "created_at": "2025-07-02T13:35:59Z"
        }
      ]
    },
    {
      "number": 32288,
      "title": "ci: drop -priority-level from bench in win cross CI",
      "body": "So there's at least one CI sanity checking all benchmarks.\r\n\r\nRelated to #32277.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-16T15:32:26Z",
      "updated_at": "2025-04-17T16:36:40Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32288",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32288.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32288#issuecomment-2812335126), [hebasto](https://github.com/bitcoin/bitcoin/pull/32288#pullrequestreview-2775259752), [mabu44](https://github.com/bitcoin/bitcoin/pull/32288#pullrequestreview-2775301401) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32219](https://github.com/bitcoin/bitcoin/pull/32219) (DRAFT: test: enabling wallet migration functional test on windows by m3dwards)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-16T15:32:30Z"
        },
        {
          "user": "l0rinc",
          "body": "utACK 3f602f056001dc36657f01a938f62ea722f78854 - was thinking of pushing something similar",
          "created_at": "2025-04-16T15:47:36Z"
        },
        {
          "user": "l0rinc",
          "body": "utACK 27f11217ca63e0f8f78f14db139150052dcd9962",
          "created_at": "2025-04-17T09:39:39Z"
        },
        {
          "user": "l0rinc",
          "body": "Seems related: https://github.com/l0rinc/bitcoin/actions/runs/14519683955/job/40737543737?pr=8\r\n> Running with -sanity-check option, output is being suppressed as benchmark results will be useless.\r\nterminate called after throwing an instance of 'std::filesystem::__cxx11::filesystem_error'\r\n  what():  filesystem error: cannot remove all: The process cannot access the file because it is being used by another process [C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\test_common bitcoin\\WalletMigration\\af1d7c4664d64d17a328] [C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\test_common bitcoin\\WalletMigration\\af1d7c4664d64d17a328\\regtest\\wallet.dat]",
          "created_at": "2025-04-17T16:36:39Z"
        }
      ]
    },
    {
      "number": 32287,
      "title": "build: Fix `macdeployqtplus` after switching to Qt 6",
      "body": "Homebrew's Qt 6 package â€” namely `qt` or `qt@6` â€” introduces a few differences that must be properly handled by the `macdeployqtplus` script:\r\n\r\n1. Use of `@rpath` references:\r\n```\r\n% objdump --macho --dylibs-used $(brew --prefix qt@5)/Frameworks/QtGui.framework/QtGui\r\n/usr/local/opt/qt@5/Frameworks/QtGui.framework/QtGui:\r\n\t/usr/local/opt/qt@5/lib/QtGui.framework/Versions/5/QtGui (compatibility version 5.15.0, current version 5.15.16)\r\n\t/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 2575.30.19)\r\n\t/System/Library/Frameworks/Metal.framework/Versions/A/Metal (compatibility version 1.0.0, current version 367.6.0)\r\n\t/usr/local/Cellar/qt@5/5.15.16_1/lib/QtCore.framework/Versions/5/QtCore (compatibility version 5.15.0, current version 5.15.16)\r\n\t/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration (compatibility version 1.0.0, current version 1.0.0)\r\n\t/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit (compatibility version 1.0.0, current version 275.0.0)\r\n\t/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics (compatibility version 64.0.0, current version 1889.2.7)\r\n\t/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 3208.0.0)\r\n\t/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)\r\n\t/System/Library/Frameworks/AGL.framework/Versions/A/AGL (compatibility version 1.0.0, current version 1.0.0)\r\n\t/usr/local/opt/libpng/lib/libpng16.16.dylib (compatibility version 64.0.0, current version 64.0.0)\r\n\t/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.12)\r\n\t/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices (compatibility version 1.0.0, current version 65.0.0)\r\n\t/usr/local/opt/md4c/lib/libmd4c.0.dylib (compatibility version 0.0.0, current version 0.5.2)\r\n\t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1800.105.0)\r\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1351.0.0)\r\n\t/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 3208.0.0)\r\n\t/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText (compatibility version 1.0.0, current version 844.2.0)\r\n\t/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)\r\n% objdump --macho --dylibs-used $(brew --prefix qt@6)/Frameworks/QtGui.framework/QtGui\r\n/usr/local/opt/qt/Frameworks/QtGui.framework/QtGui:\r\n\t/usr/local/opt/qt/lib/QtGui.framework/Versions/A/QtGui (compatibility version 6.0.0, current version 6.9.0)\r\n\t/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 2575.30.19)\r\n\t/System/Library/Frameworks/Carbon.framework/Versions/A/Carbon (compatibility version 2.0.0, current version 170.0.0)\r\n\t/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)\r\n\t/System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO (compatibility version 1.0.0, current version 1.0.0)\r\n\t/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 3208.0.0)\r\n\t/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics (compatibility version 64.0.0, current version 1889.2.7)\r\n\t/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText (compatibility version 1.0.0, current version 844.2.0)\r\n\t/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 3208.0.0)\r\n\t/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore (compatibility version 1.2.0, current version 1.11.0)\r\n\t/System/Library/Frameworks/Metal.framework/Versions/A/Metal (compatibility version 1.0.0, current version 367.6.0)\r\n\t/usr/local/opt/glib/lib/libglib-2.0.0.dylib (compatibility version 8401.0.0, current version 8401.0.0)\r\n\t@rpath/QtDBus.framework/Versions/A/QtDBus (compatibility version 6.0.0, current version 6.9.0)\r\n\t/System/Library/Frameworks/AGL.framework/Versions/A/AGL (compatibility version 1.0.0, current version 1.0.0)\r\n\t/usr/local/opt/libpng/lib/libpng16.16.dylib (compatibility version 64.0.0, current version 64.0.0)\r\n\t/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.12)\r\n\t/usr/local/opt/harfbuzz/lib/libharfbuzz.0.dylib (compatibility version 61100.0.0, current version 61100.0.0)\r\n\t/usr/local/opt/md4c/lib/libmd4c.0.dylib (compatibility version 0.0.0, current version 0.5.2)\r\n\t/usr/local/opt/freetype/lib/libfreetype.6.dylib (compatibility version 27.0.0, current version 27.2.0)\r\n\t/usr/local/opt/glib/lib/libgthread-2.0.0.dylib (compatibility version 8401.0.0, current version 8401.0.0)\r\n\t@rpath/QtCore.framework/Versions/A/QtCore (compatibility version 6.0.0, current version 6.9.0)\r\n\t/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit (compatibility version 1.0.0, current version 275.0.0)\r\n\t/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration (compatibility version 1.0.0, current version 1.0.0)\r\n\t/System/Library/Frameworks/UniformTypeIdentifiers.framework/Versions/A/UniformTypeIdentifiers (compatibility version 1.0.0, current version 709.0.0)\r\n\t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1800.105.0)\r\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1351.0.0)\r\n\t/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices (compatibility version 1.0.0, current version 1226.0.0)\r\n\t/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)\r\n```\r\n\r\n2. Different directory layout:\r\n```\r\n% ls -l $(brew --prefix qt@5)/         \r\ntotal 544\r\ndrwxr-xr-x   79 hebasto  admin    2528 13 Nov 06:22 Frameworks\r\n-rw-r--r--    1 hebasto  admin    7533 16 Apr 09:09 INSTALL_RECEIPT.json\r\n-rw-r--r--    1 hebasto  admin   22961 13 Nov 06:22 LICENSE.FDL\r\n-rw-r--r--    1 hebasto  admin   36363 13 Nov 06:22 LICENSE.GPL3-EXCEPT\r\n-rw-r--r--    1 hebasto  admin   15351 13 Nov 06:22 LICENSE.GPLv2\r\n-rw-r--r--    1 hebasto  admin   35641 13 Nov 06:22 LICENSE.GPLv3\r\n-rw-r--r--    1 hebasto  admin   26828 13 Nov 06:22 LICENSE.LGPLv21\r\n-rw-r--r--    1 hebasto  admin    8174 13 Nov 06:22 LICENSE.LGPLv3\r\n-rw-r--r--    1 hebasto  admin  106262 13 Nov 06:22 LICENSE.QT-LICENSE-AGREEMENT\r\n-rw-r--r--    1 hebasto  admin    3842 13 Nov 06:22 README\r\ndrwxr-xr-x   57 hebasto  admin    1824 16 Apr 09:09 bin\r\ndrwxr-xr-x    4 hebasto  admin     128 13 Nov 06:22 doc\r\ndrwxr-xr-x   95 hebasto  admin    3040 13 Nov 06:22 include\r\ndrwxr-xr-x  119 hebasto  admin    3808 16 Apr 09:09 lib\r\ndrwxr-xr-x    8 hebasto  admin     256 13 Nov 06:22 libexec\r\ndrwxr-xr-x   79 hebasto  admin    2528 16 Apr 09:09 mkspecs\r\ndrwxr-xr-x   15 hebasto  admin     480 13 Nov 06:22 phrasebooks\r\ndrwxr-xr-x   31 hebasto  admin     992 13 Nov 06:22 plugins\r\ndrwxr-xr-x   28 hebasto  admin     896 13 Nov 06:22 qml\r\n-rw-r--r--    1 hebasto  admin    6952 16 Apr 09:09 sbom.spdx.json\r\ndrwxr-xr-x    3 hebasto  admin      96 13 Nov 06:22 share\r\ndrwxr-xr-x  347 hebasto  admin   11104 13 Nov 06:22 translations\r\n% ls -l $(brew --prefix qt@6)/share/qt/\r\ntotal 0\r\ndrwxr-xr-x    4 hebasto  admin   128 30 Mar 09:49 doc\r\ndrwxr-xr-x   35 hebasto  admin  1120 16 Apr 09:16 libexec\r\ndrwxr-xr-x  167 hebasto  admin  5344 30 Mar 09:49 metatypes\r\ndrwxr-xr-x   70 hebasto  admin  2240 16 Apr 09:16 mkspecs\r\ndrwxr-xr-x  178 hebasto  admin  5696 30 Mar 09:49 modules\r\ndrwxr-xr-x   15 hebasto  admin   480 30 Mar 09:49 phrasebooks\r\ndrwxr-xr-x   31 hebasto  admin   992 30 Mar 09:49 plugins\r\ndrwxr-xr-x   34 hebasto  admin  1088 30 Mar 09:49 qml\r\ndrwxr-xr-x   45 hebasto  admin  1440 30 Mar 09:49 sbom\r\ndrwxr-xr-x  285 hebasto  admin  9120 30 Mar 09:49 translations\r\n```\r\n\r\nThis PR addresses both issues and additionally adds a `deploy` target to the native macOS CI job to prevent any similar recessions in the future.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32267.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-16T12:39:33Z",
      "updated_at": "2025-05-15T06:38:54Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32287",
      "labels": [
        "macOS",
        "Build system",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32287.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32287#pullrequestreview-2819054059) |\n| Stale ACK | [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/32287#pullrequestreview-2780171994) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-16T12:39:36Z"
        }
      ]
    },
    {
      "number": 32286,
      "title": "test: Handle empty string returned by CLI as None in RPC tests",
      "body": "Partially Fixes https://github.com/bitcoin/bitcoin/issues/32264\r\n\r\n\r\nSome tests are failing when `bitcoin-cli` returns an empty string. This change treats an empty response as `None`. See https://github.com/bitcoin/bitcoin/issues/32264#issuecomment-2807616694\r\n\r\nThis fixes the error for:\r\n- feature_bip68_sequence.py\r\n- feature_nulldummy.py\r\n- feature_signet.py\r\n- mining_mainnet.py\r\n- rpc_scanblocks.py\r\n- rpc_scantxoutset.py\r\n- wallet_descriptor.py --descriptors",
      "state": "closed",
      "user": "BrandonOdiwuor",
      "created_at": "2025-04-16T11:26:28Z",
      "updated_at": "2025-04-17T11:49:07Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32286",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32286.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32286#issuecomment-2809326296), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32286#pullrequestreview-2773073850), [mzumsande](https://github.com/bitcoin/bitcoin/pull/32286#pullrequestreview-2773825801), [achow101](https://github.com/bitcoin/bitcoin/pull/32286#issuecomment-2811062273) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-16T11:26:31Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK a4041c77f0e20d004524868e70ff12508832c9eb\r\n\r\nI haven't tested this, but it makes sense to recover an empty string as json-none for legacy RPCs. Obviously, this could lead to errors when an empty string is returned for real, but this should never happen: I checked that all unwrapped json-strings returned are never empty (txid, block hash, hex encodings, addresses, ...). I haven't checked getblocktemplate rejection strings, but this seems fine either way, given that it is only the test suite.\r\n\r\nFor new RPCs, they are recommended to return json dicts, always. So this won't be an issue going forward.",
          "created_at": "2025-04-16T11:46:34Z"
        },
        {
          "user": "achow101",
          "body": "ACK a4041c77f0e20d004524868e70ff12508832c9eb",
          "created_at": "2025-04-16T23:07:07Z"
        },
        {
          "user": "fanquake",
          "body": "Backported in #32292.",
          "created_at": "2025-04-17T11:49:07Z"
        }
      ]
    },
    {
      "number": 32285,
      "title": "Use undo data in ConnectBlock",
      "body": "",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-04-16T10:38:48Z",
      "updated_at": "2025-04-16T10:39:03Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32285",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32285.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter\n\n<details><summary>Possible typos and grammar issues (âœ¨ LLM generated, experimental)</summary>\n\n- In the comment within SpendBlock, the phrase \"is remined on an alternate fork with a duplicate coinbase\" contains a typo (\"remined\"), which impedes comprehension.\n\n</details>\n",
          "created_at": "2025-04-16T10:38:51Z"
        }
      ]
    },
    {
      "number": 32282,
      "title": "torcontrol: Fix addrOnion outdated comment",
      "body": "`m_randomize_credentials` is outdated name, remove it.\r\nRef: https://github.com/bitcoin/bitcoin/pull/32176#discussion_r2044977356\r\n",
      "state": "closed",
      "user": "eval-exec",
      "created_at": "2025-04-16T05:18:02Z",
      "updated_at": "2025-04-18T22:05:18Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32282",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32282.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/32282#pullrequestreview-2775950787), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32282#pullrequestreview-2776615727), [jonatack](https://github.com/bitcoin/bitcoin/pull/32282#pullrequestreview-2776775370), [achow101](https://github.com/bitcoin/bitcoin/pull/32282#issuecomment-2816265097) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-16T05:18:05Z"
        },
        {
          "user": "achow101",
          "body": "ACK bcaa23a2b7090c355f7b048ad8cae719c23dea43",
          "created_at": "2025-04-18T22:04:02Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32284,
      "title": "Open Alias support?",
      "body": "### Please describe the feature you'd like to see added.\n\nhttps://openalias.org/\n\n\n### Is your feature related to a problem, if so please describe it.\n\nAddress are long, domains are designed to solve this very same issue. Other BTC wallets support it.\n\n### Describe the solution you'd like\n\nMake address fields interchangeable with domains. If it cant pass a checksum/contains \".\" interpret as an address. \nNext, do a dns lookup and check if the subdomain exists, has a TXT record, then parse it.\n./bitcoin-cli sendtoaddress donate.albassort.com 0.0001\n\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "albassort",
      "created_at": "2025-04-16T06:36:38Z",
      "updated_at": "2025-05-15T18:30:29Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/32284",
      "labels": [
        "Feature",
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "albassort",
          "body": "I could make a PR for if anyone is interested. This is more testing the waters :)",
          "created_at": "2025-04-16T06:37:19Z"
        },
        {
          "user": "maflcko",
          "body": "How is this different from   BIP 353?",
          "created_at": "2025-04-16T07:31:19Z"
        },
        {
          "user": "albassort",
          "body": "> BIP 353\n\nWasn't aware there was a BIP for this. But, this BIP is silly, OpenAlias is an existing open standard built to support BTC and already does in various clients. A new standard is not needed.",
          "created_at": "2025-04-16T07:36:01Z"
        },
        {
          "user": "maflcko",
          "body": "My understanding from reading the BIP pull discussion is that OA (v1) had shortcomings, so OA v2 could possibly be compatible with BIP 353, or vice-versa, but I don't know if anyone is working on that, or if my understanding is still current.",
          "created_at": "2025-04-16T08:22:53Z"
        },
        {
          "user": "laanwj",
          "body": "No concept NACK but FWIW, both BIP 353 and this would be hard to implement within the context of bitcoin core's wallet. Because of build system security we're hesitant to add additional dependencies and doing DNSSEC TXT lookups would definitely need at least one.\n\nWhich does mean that if we cross that bridge, they're similar enough we could pretty easily support both.",
          "created_at": "2025-04-16T10:16:19Z"
        },
        {
          "user": "albassort",
          "body": "> No concept NACK but FWIW, both BIP 353 and this would be hard to implement within the context of bitcoin core's wallet. Because of build system security we're hesitant to add additional dependencies and doing DNSSEC TXT lookups would definitely need at least one.\n> \n> Which does mean that if we cross that bridge, they're similar enough we could pretty easily support both.\n\n\nI don't think this claim holds up given Monero's implementation only has these includes\nhttps://github.com/monero-project/monero/blob/3b01c490953fe92f3c6628fa31d280a4f0490d28/src/common/dns_utils.cpp\n\n```c++\n#include \"common/dns_utils.h\"\n// check local first (in the event of static or in-source compilation of libunbound)\n#include \"misc_language.h\"\n#include \"unbound.h\"\n\n#include <deque>\n#include <set>\n#include <stdlib.h>\n#include \"include_base_utils.h\"\n#include \"common/threadpool.h\"\n#include \"crypto/crypto.h\"\n#include <boost/thread/mutex.hpp>\n#include <boost/algorithm/string/join.hpp>\n#include <boost/optional.hpp>\n#include <boost/utility/string_ref.hpp>\n```\n\nhttps://github.com/monero-project/monero/blob/3b01c490953fe92f3c6628fa31d280a4f0490d28/src/common/dns_utils.cpp#L298\n\nHeres the function which does DNSSEC\n\n",
          "created_at": "2025-04-16T13:34:05Z"
        },
        {
          "user": "pinheadmz",
          "body": "[unbound](https://www.nlnetlabs.nl/projects/unbound/about/) is the dependency here, which monero is relying on for DNSSEC",
          "created_at": "2025-04-16T13:41:59Z"
        },
        {
          "user": "albassort",
          "body": "> [unbound](https://www.nlnetlabs.nl/projects/unbound/about/) is the dependency here, which monero is relying on for DNSSEC\n\nOOPS. Err. Maybe this is a close",
          "created_at": "2025-04-16T13:45:00Z"
        },
        {
          "user": "laanwj",
          "body": "From what i see in debian, libunbound depends on libevent (which we actually already have as a dependency, but would like to get rid of) and OpenSSL (we'd *really* like to avoid this one).",
          "created_at": "2025-04-16T13:46:17Z"
        },
        {
          "user": "maflcko",
          "body": "For the cli, you are probably better off just using a small (existing?) tool, with the benefit that it works on any past and future version of Bitcoin Core:\n\n```\n ./bitcoin-cli sendtoaddress $( ./tool-bla.py donate.example.com ) 0.0001\n```\n\nFor the gui, idk, but it is possible that it already ships with a network stack: https://github.com/bitcoin/bitcoin/blob/cdc32994feadf3f15df3cfac5baae36b4b011462/src/qt/CMakeLists.txt#L223",
          "created_at": "2025-04-16T13:55:39Z"
        },
        {
          "user": "pinheadmz",
          "body": "Closing this as not planned for now, thanks.",
          "created_at": "2025-05-15T18:30:28Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 1
  }
}