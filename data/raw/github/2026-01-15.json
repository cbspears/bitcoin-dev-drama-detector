{
  "source": "github",
  "repo": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T03:59:26.177480+00:00",
  "date_range": {
    "since": "2024-12-11T03:59:26.176889+00:00",
    "until": "2026-01-15T03:59:26.176889+00:00"
  },
  "pull_requests": [
    {
      "id": 1230883419,
      "number": 27052,
      "title": "test: rpc: add last block announcement time to getpeerinfo result",
      "body": "This PR adds `last_block_announcement` to the per-peer `getpeerinfo` RPC result. This is the most recent time that this peer was the first to notify our node of a new block (one that we didn't already know about), or zero if this peer has never been the first to notify us of a new block. This timestamp already exists internally and is used for stale-tip eviction logic; this PR exposes it at the RPC layer.\r\n\r\nThis PR started out as a suggestion for additional test coverage, see https://github.com/bitcoin/bitcoin/pull/26172#issuecomment-1259678260. It turned out that the easiest way to test (already-merged) #26172 is to add this field to `getpeerinfo` and have a functional test verify its value. But it may also be useful to have this result in its own right, similar to that RPC's existing `last_block` field -- it indicates something about the quality of our peers. It allows one to predict which peer will be evicted when the stale tip logic activates. (I'm not sure if that would be useful, but it may be.)\r\n\r\nThe functional test added here fails without #26172, which is the main goal.\r\n\r\nThis PR does not test the actual stale-tip eviction logic; that's difficult to do with a functional test. But it does test the correctness of the timestamp that the eviction logic depends on. #23352 is an attempt to test the eviction logic using a unit test, it's not ready to be merged yet. I think having both kinds of tests would be beneficial.",
      "state": "open",
      "user": "LarryRuane",
      "created_at": "2023-02-06T18:32:56Z",
      "updated_at": "2026-01-15T03:24:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27052",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1514,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1566486194,
      "number": 28690,
      "title": "build: Introduce internal kernel library",
      "body": "This PR introduces a new `libbitcoin_kernel` internal library. It completes the internal library design as laid out in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). Since the `util` library contains a bunch of modules that are not required by the kernel library, a new `kernel_util` library is introduced as well that only consists of the modules required by the kernel library. The external `libbitcoinkernel` library now re-uses the compiled objects from the internal libraries. \r\n\r\nThere is a trade-off to this. Since we don't manually export symbols from the kernel library yet, this would make the library unusable if `REDUCE_EXPORTS=ON`. For now this means that the patch here introduces a separate source file list for the external library that gets populated by the source files of its static dependents.",
      "state": "open",
      "user": "sedited",
      "created_at": "2023-10-20T11:01:03Z",
      "updated_at": "2026-01-15T02:39:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28690",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 906,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167553868,
      "number": 34268,
      "title": "[29.x] backports + final changes for 29.3",
      "body": "Backports:\r\n\r\n- #34227 \r\n- #33723 \r\n- #33475 \r\n- #33268 \r\n\r\nAnd final changes for 29.3rc1",
      "state": "open",
      "user": "glozow",
      "created_at": "2026-01-12T22:47:22Z",
      "updated_at": "2026-01-15T01:36:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34268",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 131,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1389230610,
      "number": 27865,
      "title": "wallet: Track no-longer-spendable TXOs separately",
      "body": "In #27286, the wallet keeps track of all of its transaction outputs, even if they are already spent or are otherwise unspendable. This TXO set is iterated for balance checking and coin selection preparation, which can still be slow for wallets that have had a lot of activity. This PR aims to improve the performance of such wallets by moving UTXOs that are definitely no longer spendable to a different map in the wallet so that far fewer TXOs need to be iterated for the aforementioned functions.\r\n\r\nUnspendable TXOs (not to be confused with Unspent TXOs) are those which have a spending transaction that has been confirmed, or are no longer valid due to reorgs. TXOs that are spent in unconfirmed transactions remain in the primary TXO set, and are filtered out of balance and coin selection as before.\r\n\r\nDepends on #27286",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-06-12T18:40:10Z",
      "updated_at": "2026-01-15T01:22:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27865",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 876,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3174426479,
      "number": 34288,
      "title": "fuzz: Exclude too expensive inputs in miniscript_string target",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/30498\r\n\r\nAccepting \"expensive\" fuzz inputs which have no real use-case is problematic, because it prevents the fuzz engine from spending time on the next useful fuzz input.\r\n\r\nFor example this one will take several seconds (the flamegraph shows the time is spent in minscipt `NoDupCheck`):\r\n\r\n```\r\ncurl -fLO 'https://raw.githubusercontent.com/bitcoin-core/qa-assets/eac1c57614d7823bcd6079814749f72018aea438/fuzz_corpora/miniscript_string/41bae50cffd1741150a1b330d02ab09f46ff8cd1'\r\nFUZZ=miniscript_string /usr/bin/time   ./bld-cmake/bin/fuzz  ./41bae50cffd1741150a1b330d02ab09f46ff8cd1\r\n```\r\n\r\nInspecting the inputs shows that it has many sub frags, so rejecting based on `HasTooManySubFrag` should be sufficient.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-14T17:49:39Z",
      "updated_at": "2026-01-15T00:35:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34288",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 823,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173584131,
      "number": 34284,
      "title": "ipc, test: Add tests for unclean disconnect and thread busy behavior",
      "body": "Upcoming libmultiprocess changes are expected to alter this behavior (https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3749243782), making test coverage useful for documenting current behavior and validating the intended changes.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-01-14T13:46:24Z",
      "updated_at": "2026-01-14T23:54:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34284",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 310,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2275111412,
      "number": 31650,
      "title": "refactor: Avoid copies by using const references or by move-construction",
      "body": "Top level `const` in declarations is problematic for many reasons:\r\n\r\n* It is often a typo, where one wanted to denote a const reference. For example `bool PSBTInputSignedAndVerified(const PartiallySignedTransaction psbt, ...` is missing the `&`. This will create a redundant copy of the value.\r\n* In constructors it prevents move construction.\r\n* It can incorrectly imply some data is const, like in an imaginary example `std::span<int> Shuffle(const std::span<int>);`, where the `int`s are *not* const.\r\n* The compiler ignores the `const` from the declaration in the implementation.\r\n* It isn't used consistently anyway, not even on the same line.\r\n\r\nFix some issues by:\r\n\r\n* Using a const reference to avoid a copy, where read-only of the value is intended. This is only done for values that may be expensive to copy.\r\n* Using move-construction to avoid a copy\r\n* Applying `readability-avoid-const-params-in-decls` via clang-tidy",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-01-13T20:41:34Z",
      "updated_at": "2026-01-14T23:25:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31650",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1005,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2285701879,
      "number": 31682,
      "title": "[IBD] specialize CheckBlock's input & coinbase checks",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n### Context, concerns\r\n\r\nAs noted by Sipa in https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162, this is consensus-critical code (especially since we've had an actual inflation bug related to duplicate checking).\r\nHowever, the changes here are very confined to a single function, easily reviewed, and I have a general preference for avoiding `std::set` when sorted `std::vector` works too as well.\r\n\r\nThe goal of this change is to [make block validation faster](https://github.com/bitcoin/bitcoin/pull/14387#issuecomment-442748969) via a low-risk alternative.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C++ compiler .......................... AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\r\n|            9,585.10 |          104,328.55 |    0.1% |     11.03 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\r\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 2.07x faster `CheckBlockBench`\r\n* 3.4x faster `DuplicateInputs`\r\n* 1.8% faster `ProcessTransactionBench`\r\n\r\n-----\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`\r\n|           56,199.57 |           17,793.73 |    0.1% |      229,263.01 |      178,766.31 |  1.282 |      15,509.97 |    0.5% |     10.91 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\r\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 31% faster `CheckBlockBench`\r\n* 2x faster `DuplicateInputs`\r\n* 0.5% faster `ProcessTransactionBench`\r\n\r\n----\r\n\r\nWhile the point of the change isn't necessarily to speed up IBD, but you can see the measurements at https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2606765689\r\n\r\n----\r\n\r\nRelated PRs: \r\n* https://github.com/bitcoin/bitcoin/pull/14397 - very similar solution, I only found it after pushing the PR (was closed for inactivity)\r\n* https://github.com/bitcoin/bitcoin/pull/14837 - a faster, but a lot more complex alternative (was closed for complexity and inactivity).",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-18T15:03:56Z",
      "updated_at": "2026-01-14T23:25:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31682",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5734,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2584507258,
      "number": 32729,
      "title": "test,refactor: extract script template helpers & widen sigop count coverage",
      "body": "### Summary\r\n\r\nThis PR extracts a set of cheap, inline helpers for recognizing the most common script templates, clarifies the definition of valid op-codes for pre-Taproot scripts, and splits the existing \"deserialize + check-block\" benchmark into three orthogonal micro-benchmarks.  \r\nThe change is behavior-neutral for consensus and policy - every modified call-site performs the same checks as before, just through clearer helper functions.\r\n\r\n### Context\r\n\r\nWhile working on [`GetSigOpCount` optimizations for known script templates](https://github.com/bitcoin/bitcoin/pull/32532) I noticed that feature-test coverage was [thin for this code path](https://maflcko.github.io/b-c-cov/total.coverage/src/script/script.cpp.gcov.html).  \r\nThis PR therefore adds tests for error cases (malformed push-data encodings) and for the expected sigop totals of the various script templates (including edge cases like a sigop after an `OP_RETURN`).\r\n\r\nGiven the difficulty of reviewing the [original optimizations themselves](https://github.com/bitcoin/bitcoin/pull/32532#issuecomment-2950665350), I split all test / benchmark work into this standalone PR.  \r\nThe recent burst of sigops related refactor activity ([#31624](https://github.com/bitcoin/bitcoin/pull/31624), [#32521](https://github.com/bitcoin/bitcoin/pull/32521), [#32533](https://github.com/bitcoin/bitcoin/pull/32533)) underlines the need for extra safety.\r\n\r\nThe refactors here eliminate magic numbers, deduplicate template checks, and lay groundwork for future performance work.\r\n\r\n### Structure\r\n\r\n* **Benchmarks** - first commits separate deserialization+hashing, validation, and sigop counting so each cost can be measured independently.  \r\n* **Template helpers** - tiny, mechanical commits move each script-template check into `script.h`, replace all ad-hoc byte-checks, and add tests where necessary.  \r\n* **Tests** - a full script-test suite covering malformed `PUSHDATA` sequences and the pre-taproot / accurate sigop totals for every standard template.  \r\n* **pre-taproot opcode ceiling** - documents, enforces, and tests that `OP_CHECKSIGADD` > `MAX_OPCODE`.\r\n* **Extra fuzzing** - enabled all possible opcodes in `ConsumeOpcodeType`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-06-11T14:44:28Z",
      "updated_at": "2026-01-14T23:21:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32729",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2276,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2203477250,
      "number": 31382,
      "title": "kernel: Flush in ChainstateManager destructor",
      "body": "This simplifies the shutdown code a bit and reduces the amount of extra logic required in kernel/bitcoinkernel.cpp to tear down the chainman.\r\n\r\nMoving the second flush out of the Shutdown function into the ChainstateManager destructor, should be safe since there should be no new events created after the first flush. Tweak the chainman tests to actually exercise this new tear down behaviour.\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587)",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-11-27T13:18:50Z",
      "updated_at": "2026-01-14T23:14:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31382",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 549,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2961135803,
      "number": 33740,
      "title": "RFC: bench: Add multi thread benchmarking",
      "body": "This adds a rough way to run specific benchmarks with different numbers of worker threads to see how these impact performance. This is useful for me in the batch validation context and for potential refactorings of checkqueue but I am not sure if this is useful in many other contexts so I am leaving this as a RFC draft for now to see if there is any interest in merging something like this.\r\n\r\nExample output:\r\n\r\n```\r\n$ build/bin/bench_bitcoin -filter=ConnectBlockAllSchnorr -min-time=1000 -scale-threads\r\nRunning benchmarks with worker threads from 1 to 15\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|       43,118,187.50 |               23.19 |    0.1% |      0.99 | `ConnectBlockAllSchnorr_1_threads`\r\n|       29,015,444.33 |               34.46 |    0.2% |      1.10 | `ConnectBlockAllSchnorr_2_threads`\r\n|       22,241,437.50 |               44.96 |    0.1% |      1.09 | `ConnectBlockAllSchnorr_3_threads`\r\n|       17,893,361.00 |               55.89 |    0.3% |      1.09 | `ConnectBlockAllSchnorr_4_threads`\r\n|       15,105,819.50 |               66.20 |    0.2% |      1.09 | `ConnectBlockAllSchnorr_5_threads`\r\n|       13,145,510.38 |               76.07 |    0.2% |      1.08 | `ConnectBlockAllSchnorr_6_threads`\r\n|       11,646,614.62 |               85.86 |    0.2% |      1.06 | `ConnectBlockAllSchnorr_7_threads`\r\n|       10,476,425.89 |               95.45 |    0.2% |      1.07 | `ConnectBlockAllSchnorr_8_threads`\r\n|        9,547,125.00 |              104.74 |    0.2% |      1.08 | `ConnectBlockAllSchnorr_9_threads`\r\n|        9,574,246.27 |              104.45 |    0.6% |      1.08 | `ConnectBlockAllSchnorr_10_threads`\r\n|        9,557,633.40 |              104.63 |    1.1% |      1.08 | `ConnectBlockAllSchnorr_11_threads`\r\n|        9,495,175.00 |              105.32 |    0.8% |      1.08 | `ConnectBlockAllSchnorr_12_threads`\r\n|        9,297,012.50 |              107.56 |    0.3% |      1.07 | `ConnectBlockAllSchnorr_13_threads`\r\n|        9,775,795.45 |              102.29 |    0.7% |      1.11 | `ConnectBlockAllSchnorr_14_threads`\r\n|        9,776,140.18 |              102.29 |    0.9% |      1.06 | `ConnectBlockAllSchnorr_15_threads`\r\n```\r\n",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-10-29T23:36:13Z",
      "updated_at": "2026-01-14T23:13:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33740",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2335,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2997112498,
      "number": 33847,
      "title": "kernel: Improve logging API",
      "body": "Simplify kernel logging API and try to connect it to the rest of the kernel API by letting log options be set on `Logger` objects directly and `Logger` objects to be associated with `Context` objects directly. Also drop `logging_disable()` function and avoid having library accumulate log messages in a 1MB buffer by default.\r\n\r\nChanges are intended to make the API a little less surprising and more future proof. Rationale is described in some more detail the commit message.\r\n\r\nThis change is not backwards compatible but I'd expect it to port over pretty smoothly to the language bindings, and offer the same benefits for them as for C/C++ callers.\r\n\r\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-11-10T23:30:46Z",
      "updated_at": "2026-01-14T23:12:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33847",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 683,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3048643652,
      "number": 33954,
      "title": "test: add functional test for outbound connection management",
      "body": "For #29415, vasild added the possibility to have outbound connections made \"naturally\" by the node using addrman entries, by redirecting them via a SOCKS5 proxy to python p2ps or other full nodes, so that the node under test behaves as if it is connected to normal non-local peers from arbitrary networks, while we have full control over the peers.\r\n\r\nI think this feature is really cool and want to suggest to integrate it more prominently into the test framework (\"`auto_outbound_mode`\") in the first commit because it allows to test the code in which the node decides to make connections - in contrast to the existing `add_outbound_p2p_connection` where the functional test intiates the connections.\r\n\r\nThe second commit uses it to add functional test coverage for the following features of outbound connection management:\r\n- extra full outbound connections due to a stale tip (#11560)\r\n- periodic block-relay-only connections (#19858)\r\n- full outbound connection management with respect to networks (#27213)\r\n\r\nThis should work well with the test from #29415 (which would keep its own `destinations_factory` but can call `_create_auto_outbound_listener` to avoid much of code duplication). \r\n\r\nOther possible uses for `auto_outbound_mode` I could think of are more detailed testing of anchors (`feature_anchors.py`), feeler connections, or any other p2p logic that uses the network of peers.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2025-11-26T19:01:42Z",
      "updated_at": "2026-01-14T23:11:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33954",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1456,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149207404,
      "number": 34208,
      "title": "bench: add fluent API for untimed `setup` steps in nanobench",
      "body": "### Context\r\nAs described in https://github.com/martinus/nanobench/issues/130, we have a few benchmarks where we have to reset the state between runs, otherwise the repetitions will do something else than the first iteration.\r\n\r\n### Upstream\r\nI have opened a PR to `nanobench` to introduce an untimed setup phase, see: https://github.com/martinus/nanobench/pull/136\r\nUnfortunately the author has health issues and couldn't contribute to it in the past 2 years.\r\n\r\n### Tests\r\n\r\nTests were only added upstream, would be a bit awkward to wire in `nanobench.h` outside the benchmarking setup:\r\nhttps://github.com/martinus/nanobench/pull/136/changes/58350cfe5912d7e0533ccfcd759eea5d62eb55bb#diff-88160f647ce57661afe7d755fa70a5fa342a2b79d72d3511596878e69ed5cdc3\r\n\r\n### Fix\r\nI have moved the changes here as well and applied it to a few simple benchmarks as demonstration.\r\nWe can revert ones that are controversial and add other ones in follow-ups, this PR is mostly meant to add the `setup` feature.\r\n\r\n### Benchmarks\r\nMost benchmarks show a modest \"speedup\", others a \"slowdown\" - but it's only the effect of the setup that's not measured anymore - and a `run` phase which does the same operation in each epoch iteration (wallet benchmark changes were reverted since for simplicity):\r\n<img width=\"1496\" height=\"882\" alt=\"image\" src=\"https://github.com/user-attachments/assets/34c14565-f3df-41e5-9a86-95b2ca21703a\" />\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:45:35Z",
      "updated_at": "2026-01-14T23:07:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34208",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174906348,
      "number": 34293,
      "title": "Bugfix: net_processing: Restore missing comma between peer and peeraddr in \"receive version message\"",
      "body": "Versions prior to 29.x all included a comma here, and the general format of the message still includes commas between all other fields\r\n",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2026-01-14T20:34:00Z",
      "updated_at": "2026-01-14T23:01:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34293",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 237,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3164120126,
      "number": 34257,
      "title": "txgraph: deterministic optimal transaction order",
      "body": "Part of #30289. Builds on top of #34259. Alternative to #33335; see the discussion there for motivation.\r\n\r\nThis makes the order of transaction in txgraph deterministic (as long as the set of transactions is fixed, and all clusters manage to reach optimal linearization), by introducing tie-break rules in the order of transactions within a chunk, chunk within a cluster, and chunks across clusters.\r\n\r\nThe order of transactions within a chunk becomes:\r\n1. Topology (parents before children)\r\n2. Individual transaction feerate (high to low)\r\n3. Individual transaction weight (small to large)\r\n4. Txid (low to high txid)\r\n(and then fed to `PostLinearize`, which may improve the sub-chunk ordering but introduce *deterministic* violations of 3 and 4)\r\n\r\nThe order of chunks within a cluster becomes:\r\n1. Topology (chunks before their dependent chunks)\r\n2. Chunk feerate (high to low)\r\n3. Chunk weight (small to large)\r\n4. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe order of chunks across clusters becomes:\r\n1. Feerate (high to low)\r\n2. Equal-feerate-chunk-prefix weight (small to large)\r\n3. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe equal-feerate-chunk-prefix weight of a chunk C is defined as the sum of the weights of all chunks in the same cluster as C, with the same feerate as C, up to and including C itself, in linearization order (but excluding such chunks that appear after C). This is a well-defined approximation of sorting chunks from small to large across clusters, while remaining consistent with intra-cluster linearization order.\r\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-11T23:56:09Z",
      "updated_at": "2026-01-14T23:00:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34257",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1619,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3175030867,
      "number": 34294,
      "title": "test: Remove redundant STRICTENC flag from script_tests",
      "body": "Remove the `STRICTENC` flag from hundreds of `script_tests` cases that have nothing to do with signature or pubkey encoding. It's a readability improvement and it makes it easier to find the actual test cases for `STRICTENC` behavior (those are untouched). Also, `STRICTENC` is a policy flag, we should default to consensus flags in `script_tests`.\r\n\r\nThe diff is large but mechanical as I'm only removing `STRICTENC` from flags. That said, if reviewers feel this cleanup is not worthwhile, I am fine dropping it.\r\n\r\n`script_tests` pass on my end.",
      "state": "open",
      "user": "billymcbip",
      "created_at": "2026-01-14T21:21:03Z",
      "updated_at": "2026-01-14T22:55:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34294",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 603,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3164539279,
      "number": 34259,
      "title": "Find minimal chunks in SFL",
      "body": "Part of #30289.\r\n\r\nThis was split off from #34023, because it's not really an optimization but a feature. The feature existed pre-SFL, so this brings SFL to parity in terms of functionality with the old code.\r\n\r\nThe idea is that while optimality - as achieved by SFL before this PR - guarantees a linearization whose feerate diagram is optimal, it may be possible to split chunks into smaller equal-feerate parts. This is desirable because even though it doesn't change the diagram, it provides more flexibility for optimization (binpacking is easier when the pieces are smaller).\r\n\r\nThus, this PR introduces the stronger notion of \"minimality\": optimal chunks, which are also split into their smallest possible pieces. To accomplish that, an additional step in the SFL algorithm is added which aims to split chunks into minimal equal-feerate parts where possible, without introducing circular dependencies between them. It works based on the observation that if an (already otherwise optimal) chunk has a way of being split into two equal-feerate parts, and T is a given transaction in the chunk, then we can find the split in two steps:\r\n* One time, pretend T has $\\epsilon$ higher feerate than it really has. If a split exists with T in the top part, this will find it.\r\n* The other time, pretend T has $\\epsilon$ lower feerate than it really has. If a split exists with T in the bottom part, this will find it.\r\n\r\nSo we try both on each found optimal chunk. If neither works, the chunk is minimal. If one works, recurse into the split chunks to split them further.",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-12T05:17:26Z",
      "updated_at": "2026-01-14T22:55:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34259",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1595,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2410059028,
      "number": 32116,
      "title": "contrib: refactor: dedup deserialization routines in utxo-to-sqlite script",
      "body": "The compact-size/varint/amount deserialization routines already exist in the functional test framework (with the advantage of having proper unit tests executed in CI), so we can just import them from there instead of leaving duplicated code in the repository.",
      "state": "open",
      "user": "theStack",
      "created_at": "2025-03-21T17:10:17Z",
      "updated_at": "2026-01-14T22:53:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32116",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 334,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149999731,
      "number": 34210,
      "title": "bench: Remove -priority-level= option",
      "body": "The option was added in https://github.com/bitcoin/bitcoin/pull/26158, when the project was using an autotools-based build system. However, in the meantime this option is unused:\r\n\r\n* First, commit 27f11217ca63e0f8f78f14db139150052dcd9962 removed the option from one CI task\r\n* Then https://github.com/bitcoin/bitcoin/pull/32310 removed the option from CMakeList.txt, because:\r\n \r\n  * they only run as a sanity check (fastest version)\r\n  * no one otherwise runs them, not even CI\r\n  * issues have been missed due to this\r\n\r\nFinally, after commit 0ad4376a49fae6f705128b326ba92317cb8e0639, I don't see a single reason to keep this option, so remove it.\r\n\r\nAlso, there is a commit to turn a silent ignore of duplicate bench names into an error.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-06T16:43:15Z",
      "updated_at": "2026-01-14T22:49:17Z",
      "merged_at": "2026-01-14T22:49:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34210",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 779,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3175286711,
      "number": 34295,
      "title": "test: Improve STRICTENC/DERSIG unit tests",
      "body": "488550a74f67877e4c09aabeb97505bacbffb76c: Fix a test that isn't implemented as intended. The idea is to test execution order by providing a signature that would cause script failure when parsed. An empty signature does not cause script failure in `CHECKMULTISIG`. Use `OP_1` for the second signature instead of `OP_0`.\r\n\r\n63ff7c4158a46ff5d726a576e3ac1f384e6cc2b7: Copy existing `STRICTENC` tests and change the flag to `DERSIG`. `DERSIG` is a consensus flag (unlike `STRICTENC`), so it'd be good to have dedicated test cases.\r\n\r\n`script_tests` pass on my end.",
      "state": "open",
      "user": "billymcbip",
      "created_at": "2026-01-14T22:46:49Z",
      "updated_at": "2026-01-14T22:47:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34295",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 601,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2519262912,
      "number": 32497,
      "title": "merkle: pre‑reserve leaves to prevent reallocs with odd vtx count",
      "body": "#### Summary\r\n\r\n`ComputeMerkleRoot` [duplicates the last hash](https://github.com/bitcoin/bitcoin/blob/39b6c139bd6be33699af781f1d71f6fed303d468/src/consensus/merkle.cpp#L54-L56) when the input size is odd. If the caller provides a `std::vector` whose capacity equals its size, that extra `push_back` forces a reallocation, doubling its capacity (causing peak memory usage of 3x the necessary size).\r\n\r\nThis affects roughly half of the created blocks (those with odd transaction counts), causing unnecessary memory fragmentation during every block validation.\r\n\r\n#### Fix\r\n\r\n* Pre-reserves vector capacity to account for the odd-count duplication using `(size + 1) & ~1ULL`.\r\n    * This syntax produces [optimal assembly](https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2553107836) across x86/ARM and 32/64-bit platforms for GCC & Clang.\r\n* Eliminates default construction of `uint256` objects that are immediately overwritten by switching from `resize` to `reserve` + `push_back`.\r\n\r\n#### Memory Impact\r\n\r\n[Memory profiling](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3563724551) shows **50% reduction in peak allocation** (576KB → 288KB) and elimination of reallocation overhead.\r\n\r\n#### Validation\r\n\r\nThe benchmark was updated to use an odd leaf count to demonstrate the real-world scenario where the reallocation occurs.\r\n\r\nA full `-reindex-chainstate` up to block **896 408** ran without triggering the asserts.\r\n\r\n<details>\r\n<summary>Validation asserts</summary>\r\n\r\nTemporary asserts (not included in this PR) confirm that `push_back` never reallocates and that the coinbase witness hash remains null:\r\n```cpp\r\nif (hashes.size() & 1) {\r\n    assert(hashes.size() < hashes.capacity()); // TODO remove\r\n    hashes.push_back(hashes.back());\r\n}\r\n\r\nleaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even\r\nleaves.emplace_back();\r\nassert(leaves.back().IsNull()); // TODO remove\r\n```\r\n\r\n</details>\r\n\r\n#### Benchmark Performance\r\n\r\nWhile the main purpose is to improve predictability, the reduced memory operations also improve hashing throughput slightly.\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-14T13:01:42Z",
      "updated_at": "2026-01-14T22:40:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32497",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2169,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3139411374,
      "number": 34186,
      "title": "test: use dynamic port allocation in proxy tests",
      "body": "Use `port=0` for dynamic port allocation in test framework components to avoid intermittent \"address already in use\" errors when running tests concurrently or when ports are stuck in TIME_WAIT state. Example: https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2634509304\r\n\r\nChanges:\r\n\r\n  - Update `socks5.py` and `p2p.py` to support dynamic port allocation\r\n  - Convert `feature_proxy.py` and `feature_anchors.py` to use `port=0`",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-12-31T17:03:39Z",
      "updated_at": "2026-01-14T22:40:20Z",
      "merged_at": "2026-01-14T22:40:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34186",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 485,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2961054510,
      "number": 33738,
      "title": "log: avoid collecting `GetSerializeSize` data when compact block logging is disabled",
      "body": "### Context\r\n\r\nThe new accounting options introduced in https://github.com/bitcoin/bitcoin/pull/32582 can be quite heavy, and are not needed when debug logging is disabled.\r\n\r\n### Problem\r\n`PartiallyDownloadedBlock::FillBlock()` and `PeerManagerImpl::SendBlockTransactions()` accumulate transaction sizes for debug logging by calling `ComputeTotalSize()` in loops, which invokes expensive `GetSerializeSize()` serializations.\r\nThe block header hash is also only computed for the debug log.\r\n\r\n### Fixes\r\n\r\nGuard the size and hash calculations with `LogAcceptCategory()` checks so the serialization and hashing work only occurs when compact block debug logging is enabled.\r\n\r\nAlso modernized the surrounding code a bit since the change is quite trivial.\r\n\r\n### Reproducer\r\n\r\nYou can test the change by starting an up-to-date `bitcoind` node with `-debug=cmpctblock` and observing compact block log lines such as:\r\n\r\n> [cmpctblock] Successfully reconstructed block 00000000000000000001061eaa6c0fe79258e7f79606e67ac495765cb121a520 with 1 txn prefilled, 3122 txn from mempool (incl at least 3 from extra pool) and 641 txn (352126 bytes) requested\r\n\r\n<details>\r\n<summary>Test patch</summary>\r\n\r\n```patch\r\ndiff --git a/src/blockencodings.cpp b/src/blockencodings.cpp\r\nindex 58620c93cc..f16eb38fa5 100644\r\n--- a/src/blockencodings.cpp\r\n+++ b/src/blockencodings.cpp\r\n@@ -186,6 +186,7 @@ bool PartiallyDownloadedBlock::IsTxAvailable(size_t index) const\r\n\r\n ReadStatus PartiallyDownloadedBlock::FillBlock(CBlock& block, const std::vector<CTransactionRef>& vtx_missing, bool segwit_active)\r\n {\r\n+    LogInfo(\"PartiallyDownloadedBlock::FillBlock called\");\r\n     if (header.IsNull()) return READ_STATUS_INVALID;\r\n\r\n     block = header;\r\n@@ -218,6 +219,7 @@ ReadStatus PartiallyDownloadedBlock::FillBlock(CBlock& block, const std::vector<\r\n     }\r\n\r\n     if (LogAcceptCategory(BCLog::CMPCTBLOCK, BCLog::Level::Debug)) {\r\n+        LogInfo(\"debug log enabled\");\r\n         const uint256 hash{block.GetHash()}; // avoid cleared header\r\n         uint32_t tx_missing_size{0};\r\n         for (const auto& tx : vtx_missing) tx_missing_size += tx->ComputeTotalSize(); // avoid cleared txn_available\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 5600c8d389..c081825f77 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2470,6 +2470,7 @@ uint32_t PeerManagerImpl::GetFetchFlags(const Peer& peer) const\r\n\r\n void PeerManagerImpl::SendBlockTransactions(CNode& pfrom, Peer& peer, const CBlock& block, const BlockTransactionsRequest& req)\r\n {\r\n+    LogInfo(\"PeerManagerImpl::SendBlockTransactions called\");\r\n     BlockTransactions resp(req);\r\n     for (size_t i = 0; i < req.indexes.size(); i++) {\r\n         if (req.indexes[i] >= block.vtx.size()) {\r\n@@ -2480,6 +2481,7 @@ void PeerManagerImpl::SendBlockTransactions(CNode& pfrom, Peer& peer, const CBlo\r\n     }\r\n\r\n     if (LogAcceptCategory(BCLog::CMPCTBLOCK, BCLog::Level::Debug)) {\r\n+        LogInfo(\"debug log enabled\");\r\n         uint32_t tx_requested_size{0};\r\n         for (const auto i : req.indexes) tx_requested_size += block.vtx[i]->ComputeTotalSize();\r\n         LogDebug(BCLog::CMPCTBLOCK, \"Peer %d sent us a GETBLOCKTXN for block %s, sending a BLOCKTXN with %u txns. (%u bytes)\\n\", pfrom.GetId(), block.GetHash().ToString(), resp.txn.size(), tx_requested_size);\r\n```\r\n\r\n</details>\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-29T22:57:43Z",
      "updated_at": "2026-01-14T22:38:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33738",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3120160595,
      "number": 34132,
      "title": "refactor: inline `CCoinsViewErrorCatcher` into `CCoinsViewDB`",
      "body": "### Problem\r\n\r\nThe current coins database read-error handling adds unnecessary complexity to the critical path:\r\n\r\n- `CCoinsViewErrorCatcher` sits between the cache and database views, wrapping every read operation with a generic error handler\r\n- `ExecuteBackedWrapper` adds another function call layer with lambda captures on each database read\r\n-  Uses `std::vector<std::function<void()>>` for callbacks when there's only ever one callback registered\r\n-  The error callback is set after database initialization rather than during construction (requiring a `cs_main` lock)\r\n\r\nThis adds unnecessary stack depth and bookkeeping overhead on every coins database read operation (`GetCoin`). Also note that `CCoinsViewDB::HaveCoin` isn't even called from production code as far as I can tell.\r\n\r\n### Context\r\n\r\nThis is part of ongoing coins caching cleanup efforts like #34124, #33866, #33018, and #33512.\r\n\r\n### Fix\r\n\r\nThis PR collapses the `CCoinsViewErrorCatcher` layer entirely and moves error handling directly into `CCoinsViewDB`:\r\n\r\n- Remove `ExecuteBackedWrapper` and `CCoinsViewErrorCatcher`, placing try-catch blocks directly in `CCoinsViewDB::GetCoin` and `CCoinsViewDB::HaveCoin`\r\n- Replace `std::vector<std::function<void()>>` with a single `std::function<void()>` member, initialized in the constructor\r\n- The read error callback is now passed to `Chainstate::InitCoinsDB` and forwarded to `CCoinsViewDB` constructor\r\n\r\nA new test is also added to reproduce the behavior in case of database corruption. It's added as a first commit to demonstrate that the behavior stays unchanged.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T22:56:45Z",
      "updated_at": "2026-01-14T22:34:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34132",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1653,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2956878299,
      "number": 33728,
      "title": "test: Add bitcoin-chainstate test for assumeutxo functionality",
      "body": "This PR adds functional test coverage for the bitcoin-chainstate tool loading a datadir initialized with an assumeutxo snapshot.\r\n\r\nThe PR also includes:\r\n- Fix for assertion crash in `ChainstateManager::AddChainstate()` when `prev_chainstate` has no initialized mempool (required for the test to pass)\r\n- `-regtest` flag support for bitcoin-chainstate to enable the testing\r\n\r\nThis work started while experimenting with the bitcoin-chainstate tool and how the kernel API (#30595) behaved when loading a datadir containing assumeutxo data, during the time that PR was still under review. sedited suggested opening a PR to add this test coverage.",
      "state": "closed",
      "user": "stringintech",
      "created_at": "2025-10-28T21:44:26Z",
      "updated_at": "2026-01-14T22:30:57Z",
      "merged_at": "2026-01-14T22:30:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33728",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 708,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3128861568,
      "number": 34146,
      "title": "p2p: send first addr self-announcement in separate message 🎄",
      "body": "This makes sure the initial address self-announcement a node sends to a peer happends in a separate P2P message. This has benefits for both inbound and outbound connections:\r\n\r\nFor inbound connections from a peer to us, previously, we might send the self-announcement along with our response to a GETADDR request. However, the self-announcement might replace an address from the GETADDR response. This isn't clean.\r\n\r\nFor outbound connections from us to a peer, previously, it could have happend that we send the self-announcement along with other addresses. Since shortly after connection open, the peer might only have one rate-limiting token for us, and the addresses are shuffeld on arrival, it's possible that the self-announcement gets rate-limited. However, note that these rate-limitings seem to be rare in practice.\r\n\r\nThis is inspired by and based on https://github.com/bitcoin/bitcoin/pull/33699#issuecomment-3462287763. The discussion there should be helpful for reviewers. ",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-24T15:38:31Z",
      "updated_at": "2026-01-14T22:16:50Z",
      "merged_at": "2026-01-14T22:16:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34146",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1047,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3150717332,
      "number": 34213,
      "title": "net: do not read/dump anchors if network is not active",
      "body": "We currently save 2 block-relay-only (anchor) connections when stopping a node and connect to them right after starting it. However, if you start a node with network disabled (setting -networkactive=0 or disabling using the RPC), it will read the anchors, obviously will not be able to connect to them and then, when stopping the node, considering it will have 0 block-relay-only connections, it will save 0 anchors, basically deleting the previous ones. With this PR, we will only read and write the anchors if the network is active. It will avoid losing the anchors when using the node without network activity and also avoid unecessary actions (like reading the anchors even knowing we have no network activity).",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2026-01-06T21:26:09Z",
      "updated_at": "2026-01-14T22:11:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34213",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 770,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3136708013,
      "number": 34181,
      "title": "refactor: [p2p] Make ProcessMessage private again, Use references when non-null",
      "body": "There is a single unit test, which calls the internal `ProcessMessage` function. This is problematic, because it makes future changes harder, since they will need to carry over this public internal interface each time.\r\n\r\nAlso, there is a mixed use of pointers and references in p2p code, where just based on context, a pointer may sometimes assumed to be null, or non-null. This is confusing when reading the code, or making or reading future changes.\r\n\r\nFix both issues in a series of commits, to:\r\n\r\n* refactor the single unit test to call higher-level functions\r\n* Make `ProcessMessage` private again\r\n* Use references instead of implicit non-null pointers, mostly in a scripted-diff",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-30T12:31:30Z",
      "updated_at": "2026-01-14T21:39:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34181",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 767,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3155796504,
      "number": 34230,
      "title": "fuzz: Reject too large descriptor leaf sizes in scriptpubkeyman target",
      "body": "Accepting \"expensive\" fuzz inputs which have no real use-case is problematic, because it prevents the fuzz engine from spending time on the next useful fuzz input.\r\n\r\nAlso, this may lead to problems, where the fuzz target can not be run at all on some platforms. See https://github.com/bitcoin/bitcoin/issues/34110.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34110 by rejecting those useless and expensive inputs (via the third commit)\r\n\r\nCan be tested by running the input and checking the time before and after the changes here:\r\n\r\n```\r\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/scriptpubkeyman/1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5'\r\nFUZZ=scriptpubkeyman time ./bld-cmake/bin/fuzz ./1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5\r\n```\r\n\r\nAlso, the second commit fixes https://github.com/bitcoin/bitcoin/issues/31066.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-08T11:23:25Z",
      "updated_at": "2026-01-14T21:35:44Z",
      "merged_at": "2026-01-13T23:28:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34230",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 964,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2309959380,
      "number": 31774,
      "title": "crypto: Use secure_allocator for `AES256_ctx`",
      "body": "Fixes #31744 \r\n\r\nReuse `secure_allocator` for `AES256_ctx` in the aes 256 encrypters and decrypters and the `iv` of `AES256CBC` encrypters and decrypters. These classes are relevant to `CCrypter`, used for encrypting wallets, and my understanding is that if an attacker knows some or all of the contents of these data structures (`AES256_ctx` & `iv`) they might be able to decrypt a user's wallet.\r\n\r\n Presently the `secure_allocator` tries to protect sensitive data with `mlock()` on POSIX systems and `VirtualLock()` on Windows to prevent memory being paged to disk, and by zero'ing out memory contents on deallocation with `memory_cleanse()` which is similar to `OPENSSL_cleanse()` by scaring compilers away from optimizing `memset` calls on non-Windows systems, and using `SecureZeroMemory()` on Windows.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-01-31T20:10:56Z",
      "updated_at": "2026-01-14T21:01:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31774",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 854,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3139279316,
      "number": 34185,
      "title": "test: fix `feature_pruning` when built without wallet",
      "body": "Fixes #34175\r\n\r\nIn `feature_pruning`, the`wallet_test` doesn't require any specific wallet functionality and this test is important for one of next ones (`test_scanblocks_pruned`). The reason is that it synchronizes the node 5 and, without this sync, `test_scanblocks_pruned` will fail since we expect `scanblocks` to fail due to `Block not available (pruned data)` and it doesn't happen without this sync.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-12-31T15:14:05Z",
      "updated_at": "2026-01-14T20:58:59Z",
      "merged_at": "2026-01-14T20:58:58Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34185",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999849822,
      "number": 33856,
      "title": "kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState",
      "body": "## Motivation\r\n\r\nThis PR refactors `ProcessNewBlockHeaders()` to return `BlockValidationState` by value instead of using out-parameters or boolean returns. This follows the pattern established in #31981 (commit 74690f4) which refactored `TestBlockValidity()` in a similar manner.\r\n\r\n### Current Issues\r\n **ProcessNewBlockHeaders()**: Uses an out-parameter `BlockValidationState& state`, making the API less intuitive.\r\n\r\nAs noted by @theCharlatan in #33822 [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508065115) and can be a fix for that too:\r\n> One thing that could be considered here is returning the BlockValidationState directly instead of having an in/out param. To safely do that I think we'd need to refactor ProcessNewBlockHeaders though, similarly to what was done in 74690f4.\r\n\r\nThe changes are split into two commits, see individual commit message for more info.",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-11T17:23:59Z",
      "updated_at": "2026-01-14T20:44:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33856",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 981,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3169361001,
      "number": 34271,
      "title": "net_processing: make m_tx_for_private_broadcast optional",
      "body": "Make `PeerManagerImpl::m_tx_for_private_broadcast` optional because it is needed for in private broadcast mode (`-privatebroadcast=1`).\r\n\r\nA followup to #29415, requested in:\r\nhttps://github.com/bitcoin/bitcoin/pull/29415#discussion_r2620864832\r\nhttps://github.com/bitcoin/bitcoin/pull/29415/files#r2620864832",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-01-13T11:32:27Z",
      "updated_at": "2026-01-14T20:35:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34271",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 366,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154286083,
      "number": 34225,
      "title": "refactor, key: move `CreateMuSig2{Nonce,PartialSig}` functions to `musig.{h,cpp}` module",
      "body": "This PR is a follow-up of #29675, see https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2265077463. It moves all MuSig2 functions that currently live in `CKey` and call secp256k1 musig module API functions (i.e. `secp256k1_musig_...`) to the `musig.{h,cpp}` module, as this seems to be a better place. One small drawback of doing this is that the `secp256k1_context_signing` object needs to be accessed from the outside; this is currently solved by changing the linkage from `static` to `extern` to expose the symbol globally [1]. Happy to add an access function if that is preferred instead. \r\n\r\nAs the patch is mostly move-only, it can be best reviewed via the git option `--color-moved=dimmed-zebra`\r\n\r\n[1] note that the same approach is used in the Silent Payments sending PR #28201, though having a TODO comment added, see https://github.com/bitcoin/bitcoin/pull/28201/commits/a4ebd7da5aaaa567fa9c613666513341f2aea241#diff-e5cbd40011e760f175b82d7ec44ad512bdb3d9108068b660642204da9c9187b1R25",
      "state": "open",
      "user": "theStack",
      "created_at": "2026-01-07T23:45:38Z",
      "updated_at": "2026-01-14T20:34:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34225",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1092,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3174819934,
      "number": 34292,
      "title": "Add functional test for getnetworkinfo RPC command",
      "body": "This PR adds a minimal functional test for the getnetworkinfo RPC command.\r\nThe test checks that the fields version, subversion, and connections are returned by the node.\r\nCI will run this test on Linux automatically.\r\n\r\n",
      "state": "closed",
      "user": "Niharikajakkula",
      "created_at": "2026-01-14T20:02:41Z",
      "updated_at": "2026-01-14T20:03:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34292",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 272,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174813910,
      "number": 34291,
      "title": "Add functional test for getnetworkinfo RPC command",
      "body": "This PR adds a minimal functional test for getnetworkinfo RPC command. Test will be run by CI.\r\n",
      "state": "closed",
      "user": "Niharikajakkula",
      "created_at": "2026-01-14T20:00:10Z",
      "updated_at": "2026-01-14T20:00:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34291",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 147,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2391882324,
      "number": 32061,
      "title": "Replace libevent with our own HTTP and socket-handling implementation",
      "body": "This is a major component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194), by replacing the HTTP server used for RPC and REST with one implemented entirely within the Bitcoin Core codebase. The new `HTTPServer` class runs its own I/O thread, handling socket connections with code based on #30988, but tailored specifically for HTTP.\r\n\r\nSome functional tests were added in #32408 to cover libevent behaviors that remain consistent with this branch. \r\n\r\nCommit strategy:\r\n- Implement a few helper functions for strings, timestamps, etc needed by HTTP protocol\r\n- Isolate the existing libevent-based HTTP server in a namespace `http_libevent`\r\n- Implement HTTP in a new namespace `http_bitcoin` (classes like `HTTPRequest`, `HTTPClient`, etc...)\r\n- Switch bitcoind from the libevent server to the new server\r\n- Clean up (delete `http_libevent`)\r\n\r\nI am currently seeing about a 10% speed up in the functional tests on my own arm/macos machine.\r\n\r\n## Integration testing:\r\n\r\nI am testing the new HTTP server by forking projects that integrate with bitcoin via HTTP and running their integration tests with bitcoind built from this branch (on Github actions). I will continue adding integrations over time, and re-running these CI tests as this branch gets rebased:\r\n\r\n- [NodeJS `rpc-bitcoin`](https://github.com/pinheadmz/rpc-bitcoin/pull/1)\r\n- [electrs](https://github.com/pinheadmz/electrs/pull/1)\r\n- [lnd](https://github.com/pinheadmz/lnd/pull/1)\r\n- [eclair](https://github.com/pinheadmz/eclair/pull/1)\r\n- [corepc](https://github.com/pinheadmz/corepc/pull/1)\r\n- [bitcoinjs-lib](https://github.com/pinheadmz/bitcoinjs-lib/pull/1)",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2025-03-13T19:32:14Z",
      "updated_at": "2026-01-14T19:58:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32061",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174802498,
      "number": 34290,
      "title": "Add functional test for getnetworkinfo RPC command",
      "body": "This PR adds a functional test for getnetworkinfo RPC command to ensure basic fields are present.\r\n",
      "state": "closed",
      "user": "Niharikajakkula",
      "created_at": "2026-01-14T19:55:47Z",
      "updated_at": "2026-01-14T19:56:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34290",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 150,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174797474,
      "number": 34289,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Niharikajakkula",
      "created_at": "2026-01-14T19:54:25Z",
      "updated_at": "2026-01-14T19:54:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34289",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2588407950,
      "number": 32740,
      "title": "refactor: Header sync optimisations & simplifications",
      "body": "This is a partial* revival of #25968\r\n\r\nIt contains a list of most-unrelated simplifications and optimizations to the code merged in #25717:\r\n\r\n- Avoid an IsAncestorOfBestHeaderOrTip call: Just don't call this function when it won't have any effect.\r\n- Compute work from headers without CBlockIndex: Avoid the need to construct a CBlockIndex object just to compute work for a header, when its nBits value suffices for that. Also use some Spans where possible.\r\n- Remove useless CBlock::GetBlockHeader: There is no need for a function to convert a CBlock to a CBlockHeader, as it's a child class of it.\r\n\r\nIt also contains the following code cleanups, which were suggested by reviewers in #25968:\r\n- Remove redundant parameter from CheckHeadersPoW: No need to pass consensusParams, as CheckHeadersPow already has access to m_chainparams.GetConsensus()\r\n- Remove unused parameter in ReportHeadersPresync\r\n- Use initializer list in CompressedHeader, also make GetFullHeader const\r\n- Use reference for chain_start in HeadersSyncState: chain_start can never be null, so it's better to pass it as a reference rather than a raw pointer\r\n\r\n*I decided to leave out three commits that were in #25968 (4e7ac7b94d04e056e9994ed1c8273c52b7b23931, ab52fb4e95aa2732d1a1391331ea01362e035984, 7f1cf440ca1a9c86085716745ca64d3ac26957c0), since they're a bit more involved, and I'm a new contributor. If this PR gets merged, I'll comment under #25968 to note that these three commits are still up for grabs :)\r\n",
      "state": "closed",
      "user": "danielabrozzoni",
      "created_at": "2025-06-12T20:20:06Z",
      "updated_at": "2026-01-14T19:38:45Z",
      "merged_at": "2026-01-14T19:38:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32740",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1544,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174053537,
      "number": 34286,
      "title": "test: verify node state after restart in assumeutxo",
      "body": "## Summary\n\nThis PR replaces the TODO comment in `wallet_assumeutxo.py` (line 242) with actual test assertions that verify node and wallet behavior after a restart during assumeutxo background sync.\n\n## Changes\n\nThe new tests verify:\n- Two chainstates exist (background validation not complete)\n- Background chainstate is still at `START_HEIGHT`\n- Snapshot chainstate has synced to at least `PAUSE_HEIGHT`\n- Wallets cannot be loaded after restart (expected behavior)\n- Wallet backup from before snapshot height cannot be restored\n\n## Motivation\n\nDuring implementation, I discovered that **wallets cannot be loaded after a node restart during assumeutxo background sync**. This is expected behavior because:\n- The wallet loading code checks if required blocks are available for rescanning\n- During assumeutxo background sync, blocks before the snapshot are not available\n- This applies to all wallets, including watch-only wallets created at the snapshot height\n\nThis is a valuable test addition because it documents this expected behavior and ensures it doesn't regress. Users should be aware that if they restart their node during assumeutxo background sync, they won't be able to load their wallets until the background sync completes.\n\n## Related\n\nrefs #28648\n\nAddresses the TODO comment that was originally added as part of the assumeutxo wallet test implementation.",
      "state": "open",
      "user": "yashbhutwala",
      "created_at": "2026-01-14T15:55:59Z",
      "updated_at": "2026-01-14T19:37:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34286",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1422,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3154093541,
      "number": 34223,
      "title": "[28.x] Backport wallets directory deletion fixes",
      "body": "Backports #34222 to 28.x",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-01-07T22:03:05Z",
      "updated_at": "2026-01-14T19:37:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34223",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 73,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2138649533,
      "number": 31132,
      "title": "validation: fetch block inputs on parallel threads 3x faster IBD",
      "body": "_Parts of this PR are isolated in independent smaller PRs to ease review:_\r\n\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34164_\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34165_\r\n\r\n---\r\n\r\nThis PR parallelizes fetching all input prevouts of a block during block connection, achieving over 3x faster IBD performance in some scenarios[^1][^2][^3][^4][^5].\r\n\r\n### Problem\r\n\r\nCurrently, when fetching inputs in `ConnectBlock`, each input is fetched from the cache sequentially. A cache miss requires a round trip to the disk database to fetch the outpoint and insert it into the cache. Since the database is read-only during `ConnectBlock`, we can fetch all inputs of a block in parallel on multiple threads while connecting.\r\n\r\n### Solution\r\n\r\nWe introduce a new `CoinsViewCacheAsync` `CCoinsViewCache` subclass that manages worker threads to fetch block inputs in parallel. The block is passed to the `CoinsViewCacheAsync` view before entering `ConnectBlock`, which kicks off the worker threads to begin fetching the inputs. The view is then passed to `ConnectBlock` since it provides the same API as `CCoinsViewCache`. The cache returns fetched coins as they become available via the overridden `FetchCoin` method. If not available yet, the main thread also fetches coins as it waits.\r\n\r\n### Implementation Details\r\n\r\nThe `CoinsViewCacheAsync` implements a lock-free MPSC (Multiple Producer, Single Consumer) queue design:\r\n\r\n- **Work Distribution**: Collects all input prevouts into a queue and uses a barrier to start all worker threads simultaneously\r\n- **Synchronization**: Worker threads use an atomic counter to claim which inputs to fetch, and each input has an atomic flag to signal completion to the main thread\r\n- **Main Thread Processing**: The main thread waits for inputs in order and moves their `Coin` into the `cacheCoins` map as they become available.\r\n- **Work Stealing**: If the main thread catches up to the workers, it assists with fetching to maximize parallelism\r\n- **Completion**: All threads synchronize on a barrier via a `Reset` method, which ensures all threads are parked before proceeding\r\n\r\n### Safety and Correctness\r\n\r\n- The `CoinsViewCacheAsync` works on a block that has not been fully validated, but it does not interfere or modify any of the validation during `ConnectBlock`\r\n- It simply fetches inputs in parallel, which must be fetched before a transaction is validated anyways\r\n- **Invalid blocks**: If an invalid block is mined, the temporary cache is reset without being flushed. This is an improvement over the current behavior, where existing inputs are inserted into the main `CoinsTip()` cache when pulled through for an invalid block\r\n\r\n### Performance\r\n\r\nBenchmarks show over 3x faster IBD performance in a cloud environment with network connected storage[^1], 3x faster IBD for an M4 Mac and up to 46% faster with directly connected storage[^2][^3][^4][^5]. The parallelization of expensive disk lookups provides significant speedup.\r\n\r\n[Flamegraphs show how the execution is changed](https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3617315125).\r\n\r\n### Credits\r\n\r\nInspired by [this comment](https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638553680).\r\n\r\nResolves https://github.com/bitcoin/bitcoin/issues/34121.\r\n\r\n[^1]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806\r\n[^2]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3515011880\r\n[^3]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3463894000\r\n[^4]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3347436866\r\n[^5]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3488760623",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2024-10-22T14:40:28Z",
      "updated_at": "2026-01-14T19:23:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31132",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3751,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174345401,
      "number": 34287,
      "title": "[RFC] test: integrate secp256k1lab as subtree and use it for low-level EC ops",
      "body": "This PR adds [secp256k1lab](https://github.com/secp256k1lab/secp256k1lab) as a subtree and uses it for low-level secp256k1 field and group arithmetic (i.e. replacing the contents of secp256k1.py) as a first step, primarily for demonstration purposes. Keeping it as a draft right now, to assess if there is conceptual support. The goal would be to keep the test framework code maintained here to Bitcoin Core specific parts and develop secp256k1-specific parts (e.g. MuSig, Silent Payments, FROST etc., to name a few upcoming ones) in secp256k1lab. I'm not sure if that's a clear win from a maintenance perspective (it could e.g. add friction, having to depend on and coordinate with secp256k1lab maintainers), but I'm curious to hear opinions. Suggested e.g. in https://github.com/bitcoin/bitcoin/pull/32642#pullrequestreview-2881144268.\r\n\r\nAlso, there are still some problems and open questions:\r\n* CI for \"Windows native\" job is failing (didn't check in detail yet, but I assume the secp256k1lab folder is not found due to failing Path.resolve() symlink resolution, i.e. the library is searched within the build folder)\r\n* BIP340 signing/verification can't be fully replaced yet (the test framework's Schnorr signing in `key.py`uses special testing parameters like `flip_p` and `flip_r` that aren't available in secp256k1lab)\r\n* Where to place the subtree? Originally I added it in `test_framework/crypto` but moved it up directly to `test`, for not having to add a linter mypy exception, as it only targets `test/functional/*`; maybe adding the subtree to a new folder like `test/libs` would be better for clarity",
      "state": "open",
      "user": "theStack",
      "created_at": "2026-01-14T17:27:37Z",
      "updated_at": "2026-01-14T19:13:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34287",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1694,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2426922942,
      "number": 32162,
      "title": "depends: Switch from multilib to platform-specific toolchains",
      "body": "Using the multilib GCC toolchain, as currently documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/4c1906a500cacab385b09e780b54271b0addaf4b/depends/README.md), has several issues, such as:\r\n\r\n1. The [`g++-multilib`](https://packages.ubuntu.com/noble/g++-multilib) package conflicts with platform-specific cross-compiler packages. This means it is not possible to cross compile for `i686` and other platforms using the same set of installed packages.\r\n\r\n2. The [`g++-multilib`](https://packages.ubuntu.com/noble/g++-multilib) package is not available for `arm64`:\r\n```sh\r\n$ sudo apt install g++-multilib\r\nReading package lists... Done\r\nBuilding dependency tree... Done\r\nReading state information... Done\r\nE: Unable to locate package g++-multilib\r\n```\r\n\r\n3. Managing the multilib GCC toolchain requires additional code in both depends and Guix scripts.\r\n\r\nThis PR addresses all the issues mentioned above by switching from multilib to platform-specific toolchains.\r\n\r\nAlso see https://github.com/bitcoin/bitcoin/pull/22456.\r\n\r\n---\r\n\r\nHere are examples of building for different scenarions:\r\n\r\n- Linux, `x86_64` or `arm64`, building with depends natively:\r\n```sh\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build --toolchain depends/$(./depends/config.sub $(./depends/config.guess))/toolchain.cmake\r\n$ cmake --build build -j $(nproc)\r\n```\r\n\r\n- Linux, `x86_64` or `arm64`, cross compiling for `i686-pc-linux-gnu`:\r\n```sh\r\n$ sudo apt install g++-i686-linux-gnu binutils-i686-linux-gnu\r\n$ export HOST=i686-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n\r\n- Linux, `x86_64`, cross compiling for `arm64`:\r\n```sh\r\n$ sudo apt install g++-aarch64-linux-gnu binutils-aarch64-linux-gnu\r\n$ export HOST=aarch64-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n\r\n- Linux, `arm64`, cross compiling for `x86_64`:\r\n```sh\r\n$ sudo apt install g++-x86-64-linux-gnu binutils-x86-64-linux-gnu\r\n$ export HOST=x86_64-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-03-29T13:34:59Z",
      "updated_at": "2026-01-14T19:08:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32162",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2364,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3086363450,
      "number": 34036,
      "title": "contrib: update macOS SDK to Xcode-26.1.1-17B100",
      "body": "Would close #34034.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-12-09T16:45:55Z",
      "updated_at": "2026-01-14T18:55:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34036",
      "labels": [
        "Scripts and tools",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 68,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167650906,
      "number": 34269,
      "title": "wallet: disallow creating new or restoring to an unnamed (default) wallet",
      "body": "We've been moving in the direction that all wallets must have a name. Therefore, we shouldn't allow creating new unnamed wallets. `createwallet`, `restorewallet`, and the wallet tool's `create` and `createfromdump` all now require the user to provide a non-empty wallet name when creating/restoring a wallet.\r\n\r\nThe GUI is already enforcing this, but we were not enforcing it for RPCs or in the underlying `CreateWallet` and `RestoreWallet` functions.\r\n\r\nWallet migration does still need to be able to restore unnamed wallets, so there is a new argument to `RestoreWallet` to explicitly allow that behavior for migration only.",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-01-12T23:39:06Z",
      "updated_at": "2026-01-14T18:52:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34269",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 700,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3170621319,
      "number": 34276,
      "title": "Remove empty caption from user interface (noui, gui)",
      "body": "Currently, the user interface (noui, gui) has a caption for each message. However, the caption has many issues:\r\n\r\n* It is always hard-coded to the empty string.\r\n* This is confusing and tedious when reading or maintaining the code.\r\n* It is redundant, because `noui` will ignore the caption and set the logging prefix (error, warning, info) based on the `style`.\r\n* The gui does prefer to set the title based on the caption, but since it the caption is always empty, the fallback will always be used.\r\n\r\nFix all issues by removing it.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-13T17:34:40Z",
      "updated_at": "2026-01-14T18:41:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34276",
      "labels": [
        "Utils/log/libs",
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 588,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2461160143,
      "number": 32278,
      "title": "doc: better document NetEventsInterface and the deletion of \"CNode\"s",
      "body": "Document the requirements around the `NetEventsInterface`'s methods and the lifetime of `CNode` objects in `CConnman::m_nodes`.",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-04-15T16:06:05Z",
      "updated_at": "2026-01-14T18:34:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32278",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 196,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2466171613,
      "number": 32297,
      "title": "bitcoin-cli: Add -ipcconnect option",
      "body": "This implements an idea from sipa in https://github.com/bitcoin/bitcoin/issues/28722#issuecomment-2807026958 to allow `bitcoin-cli` to connect to the node via IPC instead of TCP, if the ENABLE_IPC cmake option is enabled and the node has been started with `-ipcbind`.\r\n\r\nThis feature can be tested with:\r\n\r\n```\r\nbuild/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\r\nbuild/bin/bitcoin-cli -regtest -ipcconnect=unix -getinfo\r\n```\r\n\r\nThe -ipconnect parameter can also be omitted, since this change also makes `bitcoin-cli` prefer IPC over HTTP by default, and falling back to HTTP if an IPC connection can't be established.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-17T13:55:32Z",
      "updated_at": "2026-01-14T18:21:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32297",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 772,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2063125967,
      "number": 30861,
      "title": "build: Enhance Ccache performance across worktrees and build trees",
      "body": "To maximize performance, it is essential to follow the [recommendations](https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#cache-compilations-with-ccache) in the Productivity Notes: set the `base_dir` Ccache configuration option or use the `CCACHE_BASEDIR` environment variable:\r\n```\r\n$ export CCACHE_BASEDIR=$HOME\r\n```\r\n\r\nHere are examples of usage on Ubuntu 24.04:\r\n\r\n1. Across different worktrees:\r\n```\r\n$ export CCACHE_DIR=$(mktemp -d)\r\n$ git worktree add ../wt_1 4d3f360e2af94f4ed46dc0943196d548da82003e\r\n$ pushd ../wt_1\r\n$ cmake -B build -DWITH_CCACHE=ON\r\n$ cmake --build build -t bitcoind -j $(nproc)\r\n$ popd\r\n$ git worktree add ../wt_2 4d3f360e2af94f4ed46dc0943196d548da82003e\r\n$ pushd ../wt_2\r\n$ cmake -B build -DWITH_CCACHE=ON\r\n$ ccache --zero-stats\r\n$ cmake --build build -t bitcoind -j $(nproc)\r\n$ popd\r\n$ ccache --show-stats\r\nCacheable calls:    302 / 302 (100.0%)\r\n  Hits:             302 / 302 (100.0%)\r\n    Direct:         302 / 302 (100.0%)\r\n    Preprocessed:     0 / 302 ( 0.00%)\r\n  Misses:             0 / 302 ( 0.00%)\r\nLocal storage:\r\n  Cache size (GiB): 0.2 / 5.0 ( 3.31%)\r\n  Hits:             302 / 302 (100.0%)\r\n  Misses:             0 / 302 ( 0.00%)\r\n```\r\n\r\n2. Across different build trees:\r\n```\r\n$ export CCACHE_DIR=$(mktemp -d)\r\n$ cmake -B build_1 -DWITH_CCACHE=ON\r\n$ cmake --build build_1 -t bitcoind -j $(nproc)\r\n$ cmake -B build_2 -DWITH_CCACHE=ON\r\n$ ccache --zero-stats\r\n$ cmake --build build_2 -t bitcoind -j $(nproc)\r\n$ ccache --show-stats\r\nCacheable calls:    302 / 302 (100.0%)\r\n  Hits:             302 / 302 (100.0%)\r\n    Direct:         302 / 302 (100.0%)\r\n    Preprocessed:     0 / 302 ( 0.00%)\r\n  Misses:             0 / 302 ( 0.00%)\r\nLocal storage:\r\n  Cache size (GiB): 0.2 / 5.0 ( 3.31%)\r\n  Hits:             302 / 302 (100.0%)\r\n  Misses:             0 / 302 ( 0.00%)\r\n```\r\n\r\nThis PR addresses this [comment](https://github.com/bitcoin/bitcoin/pull/30811#issuecomment-2331096969):\r\n> However, ccache does _not_ hit across two different build dirs, compiling the same commit.\r\n\r\n---\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31771.\r\n\r\nForm https://github.com/bitcoin/bitcoin/actions/runs/13215680798/job/36894673006:\r\n```\r\n...\r\nTreat compiler warnings as errors ..... ON\r\nUse ccache for compiling .............. Built-in ccache support for the 'Visual Studio 17 2022' generator is not available.\r\n\r\n\r\n-- Configuring done (300.1s)\r\n-- Generating done (1.2s)\r\n-- Build files have been written to: D:/a/bitcoin/bitcoin/build\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-09-10T11:56:54Z",
      "updated_at": "2026-01-14T18:10:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30861",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2558,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3057433137,
      "number": 33977,
      "title": "script: Remove dead code from OP_CHECKMULTISIG",
      "body": "The stack size check before the dummy element check in OP_CHECKMULTISIG is redundant. The stack is previously validated to have least *i* elements (where *i* is number of pubkeys + number of signatures + 3), and then *i* - 1 elements are popped off the stack, leaving at least one element still in.\r\n\r\nThe redundant check was added in #3843 (commit 6380180821917c22ecfd89128ee60aae6f4cac33). There it's easy to see why it's redundant – it's inserted into a code path where another `popstack` would previously follow.\r\n\r\nNote the missing code coverage: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html#L1200",
      "state": "open",
      "user": "vostrnad",
      "created_at": "2025-12-01T02:29:46Z",
      "updated_at": "2026-01-14T17:50:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33977",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 690,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2501800868,
      "number": 32427,
      "title": "(RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store",
      "body": "Opening this PR mostly to get concept/approach feedback.\r\n\r\nThis is motivated by the kernel library, where the internal usage of leveldb is a limiting factor to its future use cases. Specifically it is not possible to share leveldb databases between two processes. A notable use-case for the kernel library is accessing and analyzing existing block data. Currently this can only be done by first shutting down the node writing this data. Moving away from leveldb opens the door towards doing this in parallel. A flat file based approach was chosen, since the requirements for persistence here are fairly simple (no deletion, constant-size entries). The change also offers better performance by making node startup faster, and has a smaller on-disk footprint, though this is negligible in the grand scheme of things.\r\n\r\nThe BlockTreeStore introduces a new data format for storing block indexes and headers on disk. The class is very similar to the existing CBlockTreeDB, which stores the same data in a leveldb database. Unlike CBlockTreeDB, the data stored through the BlockTreeStore is directly serialized and written to flat .dat files. The storage schema introduced\r\nis simple. It relies on the assumption that no entry is ever deleted and that no duplicate entries are written. These assumptions hold for the current users of CBlockTreeDB.\r\n\r\nA write ahead ahead log and boolean flags as file existence checks ensure write atomicity. Every data entry is also given a crc32c checksum to detect data corruption.\r\n\r\nThe change also opens the door towards getting rid of having to reindex the block tree due to corruption (though switching from pruned -> un-pruned still requires extra logic). This would simplify a lot of kernel/validation code, as can be seen in this [commit](https://github.com/TheCharlatan/bitcoin/commit/bfb2709e1d116d4e613601c3f0140f099530159d#diff-28f178018e05634ee3f8ddce3f4e0cec334ae69915cecf92be8299c749d8d470). The implementation here should be fairly robust against corruption (no parallel read/writes, no background compaction).\r\n\r\nAn alternative to this pull request, that could allow the same kernel feature, would be closing and opening the leveldb database only when reading and writing. This might incur a (negligible) performance penalty, but more importantly requires careful consideration of how to handle any contentions when opening, which might have complex side effects due to our current locking mode. It would also be possible to introduce an existing database with the required features for just the block tree, but that would introduce reliance on a new dependency and come with its own tradeoffs. For these reasons I chose this approach.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-05-06T14:27:59Z",
      "updated_at": "2026-01-14T17:31:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32427",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2759,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3169448484,
      "number": 34272,
      "title": "psbt: Fix `PSBTInputSignedAndVerified` bounds `assert`",
      "body": "This PR fixes an off-by-one in a debug assertion in `PSBTInputSignedAndVerified`.\r\nThe function indexes `psbt.inputs[input_index]`, so the assertion must not allow indexing at `psbt.inputs.size()`.\r\n\r\nFound during review: https://github.com/bitcoin/bitcoin/pull/31650#discussion_r2685892867\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-13T12:01:13Z",
      "updated_at": "2026-01-14T17:27:05Z",
      "merged_at": "2026-01-14T00:24:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34272",
      "labels": [
        "Refactoring",
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 347,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163213750,
      "number": 34252,
      "title": "doc: add 433 (Pay to Anchor) to bips.md",
      "body": "See PR https://github.com/bitcoin/bips/pull/1982 (merged recently) and #30352 (first released in v28.0).",
      "state": "closed",
      "user": "theStack",
      "created_at": "2026-01-11T13:16:55Z",
      "updated_at": "2026-01-14T17:26:53Z",
      "merged_at": "2026-01-11T22:44:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34252",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 144,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3128323880,
      "number": 34145,
      "title": "test: Add unit test for OP_NUMEQUALVERIFY",
      "body": "Add coverage for the error branch of `OP_NUMEQUALVERIFY`: https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/src/script/interpreter.cpp#L997\r\n\r\nNote the code coverage miss: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html (around line 997)\r\n\r\nI ran: `cmake -B build -DENABLE_WALLET=OFF && cmake --build build -j 8 && ctest --test-dir build -j 8`",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-24T10:47:53Z",
      "updated_at": "2026-01-14T17:23:50Z",
      "merged_at": "2026-01-14T16:16:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34145",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 454,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2882266509,
      "number": 33522,
      "title": "guix: use LIEF 0.17.1",
      "body": "Update LIEF in Guix & the CI to 0.17.1: https://lief.re/doc/stable/changelog.html#october-25th-2025.\r\n\r\nGuix Build:\r\n```bash\r\n64adb8b9b944ef3de68dbe0d8baa45f688b0d3fa0914448ac331a5339575d697  guix-build-98a6d95a0a0a/output/aarch64-linux-gnu/SHA256SUMS.part\r\n704f85c222bfb6bd80f2253d5b9892451f932162377c1ecf7288457ad6c15aba  guix-build-98a6d95a0a0a/output/aarch64-linux-gnu/bitcoin-98a6d95a0a0a-aarch64-linux-gnu-debug.tar.gz\r\n6ab1b8070f3c7addeaee76780cdba27b7ff4c65f6b6fc53402e3863cb94abf77  guix-build-98a6d95a0a0a/output/aarch64-linux-gnu/bitcoin-98a6d95a0a0a-aarch64-linux-gnu.tar.gz\r\n5a8a30b6ea069f61d2f1373217a654f0f8883cd0c291d92837c85259e9552317  guix-build-98a6d95a0a0a/output/arm-linux-gnueabihf/SHA256SUMS.part\r\ncc771236cbd4a013e27a30ea215ea153bbb919862356358431c7aff3789ed745  guix-build-98a6d95a0a0a/output/arm-linux-gnueabihf/bitcoin-98a6d95a0a0a-arm-linux-gnueabihf-debug.tar.gz\r\n1cc32c3d361dc3fd53241c9a5749b27640186310cc74f1646f7c39f2326f4d6b  guix-build-98a6d95a0a0a/output/arm-linux-gnueabihf/bitcoin-98a6d95a0a0a-arm-linux-gnueabihf.tar.gz\r\n765ad83372fde56601c69d582da0e88e6b957e03738c2349a586dc69472a8e80  guix-build-98a6d95a0a0a/output/arm64-apple-darwin/SHA256SUMS.part\r\n4f60db487fa6b53e4876878be0849a207b1a4ccfc31a49a0a2b12c275f15d5db  guix-build-98a6d95a0a0a/output/arm64-apple-darwin/bitcoin-98a6d95a0a0a-arm64-apple-darwin-codesigning.tar.gz\r\n274cd2843ae6518c9ebc4d82e6f1e9038c1057fb923125cc484b88502f0653cc  guix-build-98a6d95a0a0a/output/arm64-apple-darwin/bitcoin-98a6d95a0a0a-arm64-apple-darwin-unsigned.tar.gz\r\nf83f12bb83cbdac89dd5d82ed9888f382506f24e0c5c5d8afaa69ac002a7820c  guix-build-98a6d95a0a0a/output/arm64-apple-darwin/bitcoin-98a6d95a0a0a-arm64-apple-darwin-unsigned.zip\r\n29c30dfc1192cafb34313921aa9329c77358914b1ab5ea6c572afeeb3a0cf791  guix-build-98a6d95a0a0a/output/dist-archive/bitcoin-98a6d95a0a0a.tar.gz\r\nd8b3d18093607cf7e54557d6701b612aea320b12f4c5750278ea8e9df98e84e8  guix-build-98a6d95a0a0a/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n5cafe7a3232a25721bbd6e137327e8885cbc2dde0ad31149210be35ee63940c3  guix-build-98a6d95a0a0a/output/powerpc64-linux-gnu/bitcoin-98a6d95a0a0a-powerpc64-linux-gnu-debug.tar.gz\r\n02adb5302d4ec684e68a18de50f86c7ad7209953c293813b2366eb237290556a  guix-build-98a6d95a0a0a/output/powerpc64-linux-gnu/bitcoin-98a6d95a0a0a-powerpc64-linux-gnu.tar.gz\r\nd1d8a3a48f244095c94c03d541bea04a424b9b419fd46f924309d5a3960a4b9b  guix-build-98a6d95a0a0a/output/riscv64-linux-gnu/SHA256SUMS.part\r\nb94bb2d5ac5cc4d4e39086185d6195caba061a2a2cd783bcefadde3686f011de  guix-build-98a6d95a0a0a/output/riscv64-linux-gnu/bitcoin-98a6d95a0a0a-riscv64-linux-gnu-debug.tar.gz\r\nb372f4fab761e8a2fd3bcf65a53ca3780ba31295fe4e06118ed6c4157cf3b79f  guix-build-98a6d95a0a0a/output/riscv64-linux-gnu/bitcoin-98a6d95a0a0a-riscv64-linux-gnu.tar.gz\r\nb13b8cda5240d0b77acc41c1d313d8935af419179f6e960f574a402812efd73f  guix-build-98a6d95a0a0a/output/x86_64-apple-darwin/SHA256SUMS.part\r\nf093b5db8aefa0d2f5fa9121fdf61679cd3abe0709c888e260f0193c6377ba27  guix-build-98a6d95a0a0a/output/x86_64-apple-darwin/bitcoin-98a6d95a0a0a-x86_64-apple-darwin-codesigning.tar.gz\r\n7cf5b518b4bf11da7f865c72d356869d338054ac450e3d67c8e557d1055b556f  guix-build-98a6d95a0a0a/output/x86_64-apple-darwin/bitcoin-98a6d95a0a0a-x86_64-apple-darwin-unsigned.tar.gz\r\n69e9d0e2b75439ba687bc387002cf9b8d9e634dd1d99d74c0d2105853751214a  guix-build-98a6d95a0a0a/output/x86_64-apple-darwin/bitcoin-98a6d95a0a0a-x86_64-apple-darwin-unsigned.zip\r\n80d12585a20c593c25b389be03abf62c4a7aa64f82a192250e0d7134b8d42ee2  guix-build-98a6d95a0a0a/output/x86_64-linux-gnu/SHA256SUMS.part\r\n18d84260035542953cba39299a6f6a022ff8a652739f9fd4207f0ca8bdeed703  guix-build-98a6d95a0a0a/output/x86_64-linux-gnu/bitcoin-98a6d95a0a0a-x86_64-linux-gnu-debug.tar.gz\r\n32c5fff612ea33ce9b3a79641ba6e228713b6fe546dd1db7c4580b0798282466  guix-build-98a6d95a0a0a/output/x86_64-linux-gnu/bitcoin-98a6d95a0a0a-x86_64-linux-gnu.tar.gz\r\nf1a8d8d8c8271c7c462ff1150c47986a9b55adc701037a178eb065242e3be90f  guix-build-98a6d95a0a0a/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n1959bd2e96784c71f53750a40bc0e2f90c7fe05d3bf3b4090e22b4830763ac00  guix-build-98a6d95a0a0a/output/x86_64-w64-mingw32/bitcoin-98a6d95a0a0a-win64-codesigning.tar.gz\r\n4f299e92122829810d9e75901d689682455a2500329483381524115ef4dc8c99  guix-build-98a6d95a0a0a/output/x86_64-w64-mingw32/bitcoin-98a6d95a0a0a-win64-debug.zip\r\na6864c11dadcdbc91fabec44f6c3fc17928df7c65ee8360254e4a530ce4ba344  guix-build-98a6d95a0a0a/output/x86_64-w64-mingw32/bitcoin-98a6d95a0a0a-win64-setup-unsigned.exe\r\ne5628bbed9444fe1d490688fd993ce65d9af67d584f5371fef0f92f1cc2375ed  guix-build-98a6d95a0a0a/output/x86_64-w64-mingw32/bitcoin-98a6d95a0a0a-win64-unsigned.zip\r\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-10-02T15:57:55Z",
      "updated_at": "2026-01-14T17:16:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33522",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4696,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3084582953,
      "number": 34032,
      "title": "util: Add some more Unexpected and Expected methods",
      "body": "Reviewers requested more member functions In https://github.com/bitcoin/bitcoin/pull/34006.\r\n\r\nThey are currently unused, but bring the port closer to the original `std::expected` implementation:\r\n\r\n* Make `Expected::value()` throw when no value exists\r\n* Add `Unexpected::error()` methods\r\n* Add `Expected<void, E>` specialization\r\n* Add `Expected::value()&&` and `Expected::error()&&` methods\r\n* Add `Expected::swap()`\r\n\r\nAlso, include a tiny tidy fixup:\r\n\r\n* tidy: Set `AllowCastToVoid` in the `bugprone-unused-return-value` check",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-09T08:01:34Z",
      "updated_at": "2026-01-14T17:03:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34032",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 585,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173931844,
      "number": 34285,
      "title": "ci: Install `pyzmq` for functional tests on Windows",
      "body": "This PR enables `interface_zmq.py` on Windows by installing the required `pyzmq` package.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-14T15:23:08Z",
      "updated_at": "2026-01-14T17:02:31Z",
      "merged_at": "2026-01-14T16:52:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34285",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 141,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2498563333,
      "number": 32420,
      "title": "miner: drop dummy extraNonce in coinbase scriptSig for templates requested via IPC",
      "body": "Our miner code adds `OP_0` as a dummy `extraNonce` to the coinbase `scriptSig`. This has been in place since v0.1.0 and removing it entirely would trigger the `bad-cb-length` consensus error on test networks for blocks 1 through 16 (`OP1` through `OP_16`).\r\n\r\nPreviously the coinbase transaction generated by our miner code was not used downstream, because the `getblocktemplate` RPC excludes it. Since the Mining IPC interface was introduced in #30200 we do expose this dummy coinbase transaction. In Stratum v2 several parts of it are communicated downstream, including the `scriptSig`.\r\n\r\nThis PR adds a `include_dummy_extranonce` option which is `false` by default, but for the time being all test code opts in to it. This avoids churning hardcoded block and transaction hashes.\r\n\r\nThe effect of having the default `false` for IPC callers is that we remove the dummy `extraNonce` from the coinbase `scriptSig` in block templates requested that way. This limits the `scriptSig` to what is essential for consensus (BIP34) and removes the need for external mining software to remove the dummy, or even ignore the `scriptSig` we provide and generate it some other way. This could cause problems if a future soft fork requires additional data to be committed here.\r\n\r\n`test/functional/interface_ipc.py` is expanded to verify the new IPC behavior.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-05-05T12:01:31Z",
      "updated_at": "2026-01-14T16:56:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32420",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1428,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3172818667,
      "number": 34279,
      "title": "test: Fail on self-check warnings in test_runner.py",
      "body": "I don't see a reason to start running the tests, if the test_runner detects warnings during the self-check.\r\n\r\nUsually, this will just lead to a possibly confusing test failure after some wasted time anyway.\r\n\r\nSo just fail fast before even running any tests.\r\n\r\nIf there was a reason to ignore the warnings, a new option could trivially be added:\r\n\r\n```py\r\n    parser.add_argument(\"--ignore-self-check-warnings\", dest=\"ignore_warnings\", default=False, action=\"store_true\",\r\n                        help=\"Ignore test runner warnings about self-checks before running the tests\")\r\n```\r\n\r\nHowever, I don't see the need.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-14T09:50:09Z",
      "updated_at": "2026-01-14T16:42:17Z",
      "merged_at": "2026-01-14T16:28:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34279",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 668,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2543342215,
      "number": 32617,
      "title": "[Draft/POC] Add secp256k1-based HPKE (Hybrid Public Key Encryption) For Payjoin v2",
      "body": "This PR introduces an implementation of Hybrid Public Key Encryption (HPKE) using a secp256k1-based Diffie-Hellman KEM (per RFC 9180 and \"secp256k1-based DHKEM for HPKE\" specification). It provides the core cryptographic component needed to enable the Payjoin v2 protocol.\r\n\r\nThis is an exploratory PR intended to kickstart discussion on adding Payjoin v2 support to Bitcoin Core – feedback and reviews are very welcome.\r\n\r\nPayjoin v2 makes use of a protocol called Oblivious HTTP (OHTTP) to strip client-identifying metadata from the request. This protocol use a binary-encoded HTTP message encapsulated through HPKE.\r\n\r\nThe core implementation is contained in the new files `src/dhkem_secp256k1.h` and `src/dhkem_secp256k1.cpp`:\r\n\r\n* Full HPKE Modes: All four HPKE modes are supported – `Base`, `PSK`, `Auth`, and `AuthPSK`.\r\n* Secp256k1 DHKEM: Uses secp256k1 for Diffie-Hellman key exchange. The `Encap()` and `Decap()` functions perform the base mode KEM (ephemeral ECDH using the receiver’s public key), while `AuthEncap()` and `AuthDecap()` extend this to authenticated mode (including the sender’s static key in the shared secret derivation). Internally, the shared secret is derived as specified by HPKE using HKDF (SHA256) extraction and expansion.\r\n* Key Schedule & Nonce Derivation: After KEM, the implementation runs the HPKE key schedule to derive the `encryption key`, `base nonce`, and `exporter secret`. It follows RFC 9180 §7.1, hashing the `info` and `psk_id` contexts and deriving the AEAD key and nonce. Per-message nonces are computed by XOR-ing the base nonce with a message sequence number as specified in RFC 9180 §5.2.\r\n* AEAD Encryption (ChaCha20-Poly1305): The HPKE context uses `ChaCha20-Poly1305` as the authenticated encryption scheme. The code provides `Seal()` and `Open()` functions to encrypt and decrypt data using the derived context key and a given nonce. It uses Bitcoin Core’s existing ChaCha20Poly1305 implementation.\r\n\r\nThe test file validates all the functions mentioned above: Encapsulation/Decapsulation, Encryption/Decryption, Nonce and Key Schedule Logic. This uses the PDK (Payjoin Dev Kit) test vectors. The tests also show how to use the HPKE functions.\r\n\r\nThis implementation only uses HKDF-SHA256 as Key Derivation Functions and ChaCha20-Poly1305 as AEAD, since these already exist in the Bitcoin Core codebase. It does not support other KDFs (such as HKDF-SHA384 and HKDF-SHA512) or other AEADs (such as AES-128-GCM and AES-256-GCM).\r\n\r\nTo run the tests:\r\n`build/bin/test_bitcoin --log_level=all --run_test=dhkem_secp256k1_tests`",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-05-26T08:04:21Z",
      "updated_at": "2026-01-14T16:38:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32617",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2664,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 991865101,
      "number": 25573,
      "title": "guix: produce a `-static-pie` bitcoind",
      "body": "Use Guix to produce a `-static-pie` bitcoind using GCC 14.3.0 and glibc 2.42. Using glibc for static builds, would be less of a leap compared to switching to musl libc (POC in #23203).\r\n\r\n[`-static-pie`](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)\r\n> Produce a static position independent executable on targets that support it.\r\nA static position independent executable is similar to a static executable,\r\nbut can be loaded at any address without a dynamic linker.\r\n\r\n```bash\r\n# file bitcoind\r\n\tELF 64-bit LSB pie executable, x86-64, version 1 (GNU/Linux), static-pie linked, for GNU/Linux 3.2.0, stripped\r\n\r\n# ldd bitcoind\r\n\tstatically linked\r\n```\r\n\r\n`x86_64-linux-gnu` size comparison:\r\nmaster (a7e80676104b5c90c5b5e3bfab815d55a9061052) `bitcoind` is `15.35` megabytes.\r\nThis PR (597b5296d3adc693001ce39626fe32b9545eb604) `bitcoind` is `17.45` megabytes.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2022-07-08T16:49:48Z",
      "updated_at": "2026-01-14T16:34:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25573",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 905,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3160679481,
      "number": 34243,
      "title": "doc: validation: fix `PackageMempoolChecks` incorrect comment",
      "body": "This is a simple PR that fixes the incorrect description of what is done in `PackageMempoolChecks`\r\n    \r\n>  // Enforce package mempool ancestor/descendant limits (distinct from individual\r\n> // ancestor/descendant limits done in PreChecks) and run Package RBF checks.\r\n    \r\nAfter cluster mempool, we no longer enforce ancestor/descendant limits in both `PreChecks` and  `PackageMempoolChecks`; instead, cluster limit is enforced in `PackageMempoolChecks`.\r\n This PR fixes the incorrect comment  by;\r\n   - Making it clear why it is necessary to have two calls of  `CheckMempoolPolicyLimts` in both `PackageMempoolChecks` and after in `AcceptMultipleTransactionsInternal` by executing `PackageMempoolChecks` only during package RBF only. No need to jump into the next subroutine when there is no conflict. \r\n   - Renames `PackageMempoolChecks` to `PackageRBFChecks`; the method name is self-explanatory now, hence no need for a description comment.",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2026-01-09T19:25:31Z",
      "updated_at": "2026-01-14T16:31:20Z",
      "merged_at": "2026-01-14T16:31:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34243",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1010,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3167372056,
      "number": 34267,
      "title": "net: avoid unconditional `privatebroadcast` logging (+ warn for debug logs)",
      "body": "### Motivation\r\nThe recently merged [private broadcast](https://github.com/bitcoin/bitcoin/pull/29415) is a privacy feature, and users may share `debug.log` with support.\r\nUnconditional `LogInfo()` messages that mention private broadcast and/or include (w)txids can leak sensitive context (e.g. which transactions a user originated).\r\n\r\nFollow up to [#29415 (comment)](https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2637012294)\r\n\r\n### Changes\r\n* Move private-broadcast event logs from `LogInfo()` to `LogDebug(BCLog::PRIVBROADCAST, ...)`, so they are only emitted when `-debug=privatebroadcast` was explicitly provided.\r\n* Remove hardcoded `\"[privatebroadcast]\"` log-string prefixes (category logging already adds the prefix).\r\n* Keep warning at the default log level for startup failures.\r\n* Add an init log (not a warning since that would require excessive test framework updates) when any `-debug` categories are enabled that additional logs may contain privacy-sensitive information and should not be shared publicly.\r\n* Update a related startup arg (`-logips`) to clarify that clarify that non-debug logs can also contain IP addresses.\r\n\r\n### Reproducer\r\nThe new warning can be checked with:\r\n```bash\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 | grep 'Debug logging is enabled' | wc -l\r\n       0\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 -debug | grep 'Debug logging is enabled' | wc  -l\r\n       1\r\n```\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-12T21:25:29Z",
      "updated_at": "2026-01-14T16:30:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34267",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1565,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3132300728,
      "number": 34158,
      "title": "torcontrol: Remove libevent usage",
      "body": "This is part of the effort to remove the libevent dependency from our code base: https://github.com/bitcoin/bitcoin/issues/31194\r\n\r\nThere is a dependency on #32061 but it only really needs one commit which is cherry-picked here in first position (add `LineReader`). I hope that a first chunk of that PR can be sliced off and reviewed independently so this PR here is not blocked by it.\r\n\r\nThe current approach tries to reuse existing code and follows roughly similar design decisions. It replaces the libevent-based async I/O with blocking I/O utilizing the existing `Sock` and `CThreadInterrupt`. The controller runs in a dedicated thread.\r\n\r\nThere are some optional code modernizations thrown in made along the way (namings, constexpr etc.). These are not strictly necessary but make the end result with the new code more consistent.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-27T14:20:31Z",
      "updated_at": "2026-01-14T16:16:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34158",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 869,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2598874149,
      "number": 32764,
      "title": "guix: Build for macOS using Clang only",
      "body": "This PR makes macOS builds Clang-only by switching the build compiler in depends to `clang` + `libc++`.\r\n\r\nSee: https://github.com/bitcoin/bitcoin/issues/30206.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-06-17T13:39:41Z",
      "updated_at": "2026-01-14T15:41:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32764",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 199,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173535621,
      "number": 34282,
      "title": "qa: Fix Windows logging bug",
      "body": "The regex `(.*)` was capturing `\\r` from subprocess output on Windows, causing the closing parenthesis in logs to wrap to the next line.\r\n\r\nFor [example](https://github.com/hebasto/bitcoin/actions/runs/20993438084/job/60350204808):\r\n```\r\n208/454 - feature_bip68_sequence.py passed, Duration: 10 s\r\n209/454 - rpc_bind.py --ipv4 skipped (not on a Linux system\r\n)\r\n210/454 - rpc_bind.py --ipv6 skipped (not on a Linux system\r\n)\r\n211/454 - rpc_packages.py passed, Duration: 8 s\r\n212/454 - rpc_bind.py --nonloopback skipped (not on a Linux system\r\n)\r\n213/454 - p2p_feefilter.py passed, Duration: 4 s\r\n```\r\n\r\nStripping whitespace from the regex match fixes the formatting. [See](https://github.com/hebasto/bitcoin/actions/runs/20993564177/job/60350024373):\r\n```\r\n208/454 - feature_bip68_sequence.py passed, Duration: 9 s\r\n209/454 - rpc_bind.py --ipv4 skipped (not on a Linux system)\r\n210/454 - rpc_bind.py --ipv6 skipped (not on a Linux system)\r\n211/454 - rpc_bind.py --nonloopback skipped (not on a Linux system)\r\n212/454 - rpc_packages.py passed, Duration: 7 s\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-14T13:29:56Z",
      "updated_at": "2026-01-14T15:39:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34282",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1089,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3160483005,
      "number": 34242,
      "title": "Prepare string and net utils for future HTTP operations",
      "body": "This is a component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194). It is the first six commits of #32061 and provides a string-parsing utility (`LineReader`) that is also consumed by #34158.\r\n\r\nThese are the functions that are added / updated for HTTP and Torcontrol:\r\n\r\n- `GetBindAddress()`: Given a socket, provides the bound address as a CService. Currently used by p2p but moved from `net` to `netbase` so other modules can call it.\r\n- `ToIntegral()`: Already used to parse numbers from strings, added new argument `base = 10` so it can also be used to parse hexadecimal integers. HTTP chunked transfer-encoding uses hex-encoded integers to specify payload size: https://datatracker.ietf.org/doc/html/rfc7230.html#section-4.1\r\n- `AsciiCaseInsensitive` comparators: Needed to store HTTP headers in an `unordered_map`. Headers are key-value pairs that are parsed with case-insensitive keys: https://httpwg.org/specs/rfc9110.html#rfc.section.5.1\r\n- `FormatRFC1123DateTime()`: The required datetime format for HTTP headers (e.g. `Fri, 31 May 2024 19:18:04 GMT`)\r\n- `LineReader`: Fields in HTTP requests are newline-terminated. This struct is given an input buffer and provides methods to read lines as strings.\r\n",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2026-01-09T18:11:27Z",
      "updated_at": "2026-01-14T15:38:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34242",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1325,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2647773300,
      "number": 32895,
      "title": "wallet: Prepare for future upgrades by recording versions of last client to open and decrypt",
      "body": "When a wallet is automatically upgraded, we always do so in a way that allows the user to load their wallet in an older version. When the user loads their wallet into an upgraded version again, the wallet may not perform the automatic upgrade and end up with upgraded and non-upgraded material in the wallet.\r\n\r\nIf we write some information about the last client to open the wallet, we would be able to detect these upgrade-downgrade-upgrade situations and perform another upgrade if so. However, in order for this to work, we need to have implemented writing such information into versions prior to the ones which introduce new automatic upgrades.\r\n\r\nWe are already writing the CLIENT_VERSION into all wallets in a \"version\" record, although this record is not updated in the same way across all previous versions. Since v24.0, we are always updating the record when the client version differs, but prior to that, the record would only be updated when the client version is newer. Even so, we can use this record to store the last client version.\r\n\r\nThe first commit decouples the written client version from the node version. This aids in development of new features. The version is entirely decoupled from previous versions by requiring all versions to have bit 30 set, and the initial version being `0 | (1 << 30)`. The versions just need to be at least 299900, and forcing bit 30 to be set was an easy way to achieve this.\r\n\r\nHowever, using version numbers is not as flexible as feature flags, so the second commit introduces the concept of Wallet Client Features. These flags are distinct from the existing Wallet Feature Flags since they are conceptually different. These are written in a separate record, and the wallet client version is incremented to `(1 << 0) | (1 << 30)`.\r\n\r\nLastly, since some upgrades may need private keys and can only occur after the wallet is decrypted, the third commit also adds a last decrypted features flags record to record the features of the last client to decrypt the wallet.\r\n\r\nThe result is that we will now be able to detect a downgrade down to v24.0 and be able to implement in parallel multiple features that require automatic upgrades.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-07T20:13:08Z",
      "updated_at": "2026-01-14T15:33:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32895",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2662308871,
      "number": 32958,
      "title": "wallet/refactor: change PSBTError to PSBTResult and remove std::optional<common::PSBTResult> and return common::PSBTResult",
      "body": "### Description\r\nThis is a follow-up to https://github.com/bitcoin/bitcoin/pull/31622#discussion_r2092030045 and https://github.com/bitcoin/bitcoin/pull/31622#discussion_r2092035407\r\n\r\n### What this changes\r\n- Updates `PSBTError` to `PSBTResult`\r\nbecause we now have `PSBTResult::OK`\r\n\r\n- Updates `PSBTErrorString` to `PSBTResultString`\r\n\r\n- Updates `RPCErrorFromPSBTError` to `RPCErrorFromPSBTResult`\r\n\r\n- Removes `std::optional<common::PSBTResult>` and instead returns just `common::PSBTResult`\r\nreplacing when we return `null` with `PSBTResult::OK`\r\n    \r\n    ",
      "state": "open",
      "user": "kevkevinpal",
      "created_at": "2025-07-13T14:06:28Z",
      "updated_at": "2026-01-14T15:30:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32958",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 686,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2677577590,
      "number": 33008,
      "title": "wallet: support bip388 policy with external signer",
      "body": "External signers such as Ledger, BitBox02 and Jade, when used with multisig, use [BIP388](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki) to display (and constrain) descriptor policies to their users.\r\n\r\nAt least in the case of Ledger (no others so far, see https://github.com/bitcoin/bitcoin/pull/33008#issuecomment-3165080503) this requires us to hold on to an hmac, which proves to the device that the user previously reviewed and approved it.\r\n\r\nThis PR adds a new RPC call `registerpolicy` which converts our descriptor(s) into a BIP388 policy (_partially implemented_), calls a new HWI method `register` (_implemented_) and stores the resulting HMAC (_implemented_).\r\n\r\nWhen signing a transaction using HWI's `signtx` it passes the HMAC along with the PSBT (_TODO_).\r\n\r\nFor convenience the HMAC can be retrieved via `getwalletinfo` (_implemented_). This is useful for scenario's where we can't (yet) complete a transaction via HWI calls.\r\n\r\nNote that the HMAC itself is not specified in BIP388 and may be different for different hardware vendors. So we'll store and echo any hex string the device gives us.\r\n\r\nAn alternative approach to directly supporting BIP388 policies would be to pass the involved descriptors to HWI and have it figure out how to derive a policy.\r\n\r\nTesting:\r\n- make a multisig wallet with a Ledger or other [supported device](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki#reference-implementation)\r\n  - try https://github.com/Sjors/bitcoin/pull/91 if you're feeling adventurous, it includes this PR\r\n- install https://github.com/bitcoin-core/HWI/pull/791 HWI branch\r\n- call `bitcoin rpc registerpolicy`\r\n- call `bitcoin rpc getwalletinfo` to see the hmac\r\n\r\nTODO:\r\n- [ ] derive policy using `Descriptor` class instead regex madness, implement all constraints\r\n- [ ] pass hmac along when signing\r\n\r\nDepends on:\r\n- [ ] HWI `register` command: https://github.com/bitcoin-core/HWI/pull/791\r\n- [ ] HWI optional `--hmac` argument for `signtx` (if set, bypass the current auto-registration workaround)\r\n\r\nPotential followups:\r\n- pass hmac along when displaying an address. This provides some extra assurance to the user. See https://github.com/bitcoin-core/HWI/pull/647\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-18T15:31:45Z",
      "updated_at": "2026-01-14T15:21:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33008",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 877751403,
      "number": 24539,
      "title": "Add a \"tx output spender\" index",
      "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\nWe use a composite key with 2 parts (suggested by @romanz): hash(spent outpoint) and tx position, with an empty value. Average composite key size is 15 bytes.\r\n\r\nThe spending tx can optionally be returned by `gettxspendingprevout` (even it `-txindex is not set`).",
      "state": "open",
      "user": "sstone",
      "created_at": "2022-03-11T19:32:41Z",
      "updated_at": "2026-01-14T15:20:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24539",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 958,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3118113953,
      "number": 34117,
      "title": "net: reduce log level for PCP/NAT-PMP NOT_AUTHORIZED failures",
      "body": "Users running Bitcoin Core on home networks with routers that don't support PCP (Port Control Protocol) or NAT-PMP port mapping receive frequent warning-level log messages every few minutes:\r\n\r\n  \"pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\"\r\n\r\nThis is expected behavior for many consumer routers that have PCP disabled by default, not an actionable error. The repeated warnings create unnecessary log noise.\r\n\r\nThis change:\r\n- Adds explicit constants for NOT_AUTHORIZED result code (value 2) for both NAT-PMP and PCP protocols\r\n- Downgrades NOT_AUTHORIZED failures from LogWarning to LogDebug since this is an expected condition on many networks\r\n- Keeps LogWarning for other failure types that may indicate actual configuration or network issues\r\n\r\nThe NOT_AUTHORIZED message will still be visible when running with -debug=net for users who need to troubleshoot port mapping issues.\r\n\r\nFixes #34114\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "ANAVHEOBA",
      "created_at": "2025-12-19T16:35:45Z",
      "updated_at": "2026-01-14T15:11:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34117",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3040,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3113678434,
      "number": 34100,
      "title": "doc: Use multipath descriptors in descriptors.md and linked test",
      "body": "Updates documentation and `wallet_miniscript_decaying_multisig_descriptor_psbt.py` to use single multipath descriptors with `<0;1>` syntax instead of separate external/internal descriptors.\n\n## Changes\n- **doc/descriptors.md**: Update examples (lines 70-71) to use `/<0;1>/*` multipath syntax\n- **doc/descriptors.md**: Update Basic Multisig Example instructions (line 179) to use single multipath descriptor\n- **test/functional/wallet_miniscript_decaying_multisig_descriptor_psbt.py**: Refactor to use single multipath descriptor pattern matching `wallet_multisig_descriptor_psbt.py`\n\n## Implementation\n- `_get_xpub()` now extracts external descriptor and converts to multipath format\n- `create_multisig()` imports single descriptor that expands to receive and change addresses\n- Removed fake checksums from documentation examples\n- Added clear comments documenting multipath convention\n\nFixes #34086",
      "state": "open",
      "user": "anuragchvn-blip",
      "created_at": "2025-12-18T12:59:17Z",
      "updated_at": "2026-01-14T15:08:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34100",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 965,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173345068,
      "number": 34281,
      "title": "build: Temporarily remove confusing and brittle `-fdebug-prefix-map`",
      "body": "The compiler option `-fdebug-prefix-map` is unconditionally set by the build system. This is problematic for many reasons:\r\n\r\n* Users and devs have no easy way to disable it without modifying the build system source code\r\n* The mapping is broken since the cmake migration, and requires manual fixups such as https://github.com/bitcoin/bitcoin/issues/31204 or https://github.com/bitcoin/bitcoin/issues/31957\r\n\r\nFix all issues by temporarily removing it.\r\n\r\nThough, the option is kept for the guix build, so that no change in behavior is observed for the release binaries.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31957\r\nFixes https://github.com/bitcoin/bitcoin/issues/31204\r\n\r\n\r\nThe option can be added back in the future, if there is any need to. Though, adding it back should ideally work out of the box, or at least provide easy workarounds for all commonly used tooling.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-14T12:31:05Z",
      "updated_at": "2026-01-14T15:05:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34281",
      "labels": [
        "Build system",
        "DrahtBot Guix build requested"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 952,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2683376326,
      "number": 33034,
      "title": "wallet: Store transactions in a separate sqlite table",
      "body": "The wallet uses SQLite as a key-value store even though SQLite is a powerful relational database engine. This causes us numerous headaches due to the need to serialize multiple fields together, and since record read from the database during loading can come in any order.\r\n\r\nNotably, for transactions, if we were able to load them in the transaction order assigned by the wallet, PRs like #27865 would be a bit simpler and easier to reason about.\r\n\r\nThis PR makes it possible for us to do that by storing transactions in a separate table. This table has a column for each field in `CWalletTx`, which lets us use a SQL statement like `SELECT * FROM transactions ORDER BY pos` which guarantees us the order in which the transactions are loaded into the wallet.\r\n\r\nThe eventual goal is to use SQLite as a relational database with tables that store our keys and other metadata that can reference each other so that the wallet doesn't just use the database as a storage mechanism. But that is still a work in progress.\r\n\r\nThis PR makes use of the last client opened features introduced in #32895 to determine when the old record style needs to be upgraded to the new transactions table. This should give us sufficient upgrade-downgrade-upgrade handling to not lose any funds.\r\n\r\nDepends on #32763, #32895, #32985, #33031, #33032, #33033",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:52:54Z",
      "updated_at": "2026-01-14T15:03:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33034",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1385,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3054115118,
      "number": 33965,
      "title": "mining: fix -blockreservedweight shadows IPC option",
      "body": "Also enforce `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients.\r\n\r\nThe `-blockreservedweight` startup option should only affect RPC code, because IPC clients (currently) do not have a way to signal their intent to use the node default (the `BlockCreateOptions` struct defaults merely document a recommendation for client software).\r\n\r\nBefore this PR however, if the user set `-blockreservedweight` then `ApplyArgsManOptions` would cause the `block_reserved_weight` option passed by IPC clients to be ignored. _Users who don't set this value were not affected._\r\n\r\nFix this by making BlockCreateOptions::block_reserved_weight an\r\nstd::optional.\r\n\r\nInternal interface users, such as the RPC call sites, don't set a\r\nvalue so -blockreservedweight is used. Whereas IPC clients do set\r\na value which is no longer ignored.\r\n\r\nTest coverage is added, with a preliminary commit that refactors the `create_block_template` and `wait_next_template` helpers.\r\n\r\n`mining_basic.py` already ensured `-blockreservedweight` is enforced by mining RPC methods. The second commit adds coverage for Mining interface IPC clients. It also verifies that `-blockreservedweight` has no effect on them.\r\n\r\nThe third commit enforces `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients. Previously lower values were quietly clamped.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T13:38:33Z",
      "updated_at": "2026-01-14T14:59:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33965",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1349,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2713577873,
      "number": 33117,
      "title": "Interfaces: Expose UTXO Snapshot Loading and Add Progress Notifications",
      "body": "# Add UTXO Snapshot Loading Interface and Progress Notifications\r\n\r\nThis PR implements a complete interface for loading UTXO snapshots through the GUI, including progress notifications to provide user feedback during the loading process.\r\n\r\n---\r\n\r\n## Changes\r\n\r\n### Commit 1: `interfaces: expose UTXO snapshot loading in node interface`\r\n\r\n- Added a new virtual method `loadSnapshot` to the node interface for loading UTXO snapshots.\r\n- Updated the implementation in `interfaces.cpp` to activate the snapshot using the provided file and metadata.\r\n- This change enhances the user's ability to load UTXO snapshots through the GUI.\r\n\r\n### Commit 2: `notifications: Implement snapshot load progress notifications`\r\n\r\n- Added a new signal `SnapshotLoadProgress` for snapshot load progress in the UI interface.\r\n- Updated the notifications interface to include a method for reporting snapshot loading progress.\r\n- Enhanced the `ChainstateManager` to report progress during snapshot loading.\r\n- Implemented the necessary handler in the kernel notifications to relay progress updates.\r\n- This change improves user feedback during the snapshot loading process.\r\n\r\n### Commit 3: `rpc: refactor loadtxoutset to use snapshot interface`\r\n\r\n- Updated the loadtxoutset RPC to call the new snapshot interface instead of directly working with chainstate internals.\r\n- Added getMetadata and getActivationResult methods to the snapshot interface to provide parity with the legacy RPC.\r\n- Improves modularity by consolidating snapshot handling through the interface layer.\r\n\r\n---\r\n\r\n## Technical Details\r\n\r\nThe implementation includes:\r\n\r\n- **UI Interface Enhancement**\r\n  Added `SnapshotLoadProgress` signal to `CClientUIInterface` with corresponding signal declaration and implementation.\r\n\r\n- **Node Interface**\r\n  Added `loadSnapshot` virtual method to the node interface with implementation in `interfaces.cpp`.\r\n\r\n- **Progress Notifications**\r\n  Implemented `snapshotLoadProgress` method in `KernelNotifications` class to relay progress updates to the UI.\r\n\r\n- **Base Interface**\r\n  Added `snapshotLoadProgress` virtual method to the kernel notifications interface.\r\n\r\n---\r\n\r\n## Benefits\r\n\r\n- **User Experience**\r\n  Provides real-time feedback during UTXO snapshot loading operations.\r\n\r\n- **GUI Integration**\r\n  Enables loading UTXO snapshots directly through the Bitcoin Core GUI.\r\n\r\n- **Progress Tracking**\r\n  Users can monitor the progress of snapshot loading operations.\r\n\r\n- **Consistent Interface**\r\n  Follows the existing pattern for progress notifications in the codebase.\r\n\r\n## Testing\r\n\r\n- **Daemon** build and launch `bitcoind` then with `bitcoin-cli` load a snapshot using:\r\n```bash\r\n./bitcoin-cli -rpcclienttimeout=0 -signet loadtxoutset /path/to/utxo-snapsshot.dat\r\n```\r\n- **QT Widgets**: build and run [this](https://github.com/bitcoin-core/gui/pull/870) draft PR in legacy gui repo \r\n- **QML** version: for a modern look build and run [this](https://github.com/bitcoin-core/gui-qml/pull/488) PR in the newly updated gui-qml repo \r\n",
      "state": "open",
      "user": "D33r-Gee",
      "created_at": "2025-08-01T15:31:46Z",
      "updated_at": "2026-01-14T14:52:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33117",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3107,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3160080067,
      "number": 34240,
      "title": "ci: Run feature_unsupported_utxo_db.py on Windows",
      "body": "The feature_unsupported_utxo_db.py test is skipped on Windows, because the ancient exe used in the test does not support UTF-8.\r\n\r\nOne way to fix this could be to rework the test_runner to supply an ASCII temp dir. However, this is tedious and probably not worth it for a test that is close to being deleted: The test only checks that a `-reindex-chainstate` is sufficient, but at this point, it seems fine to accept users having to go through a full `-reindex`, or even full re-download.\r\n\r\nI am not deleting it just yet, because it is still minimally useful: E.g. https://github.com/bitcoin/bitcoin/pull/31674#issuecomment-2599106040. Though, I think the next time an issue pops up with this test, it can be considered for deletion.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-09T15:45:36Z",
      "updated_at": "2026-01-14T14:26:48Z",
      "merged_at": "2026-01-14T12:08:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34240",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 784,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2837615883,
      "number": 33421,
      "title": "node: add  `BlockTemplateCache`",
      "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify the maximum age in `MillisecondsDouble`:\r\n- If a matching template exists in the cache and hasn't exceeded the age limit, the cached version is returned (if multiple exist, the most recent one is returned).\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted. This is usually checked after each insertion.\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\nWhen `test_block_validity` is set to `true` in the block creation options, any cached template that hasn't been validated will be checked before being returned. We also then update the cached block validity to indicate it has been checked.\r\n\r\nThis PR also removes an unused `node/context.h` import from miner to prevent a potential circular dependency during exposing the block template cache to the node context.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-17T18:47:09Z",
      "updated_at": "2026-01-14T13:56:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33421",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1494,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3059986313,
      "number": 33986,
      "title": "doc: improvements to doc/descriptors.md",
      "body": "This brings doc/descriptors.md up to date:\r\n* Stop trying to exhaustively list all RPCs that involve descriptors. They're used everywhere.\r\n* Stop trying to give the history of descriptor support, we have release notes for that.\r\n* Mention that wallets are now built around descriptors (especially with legacy wallets gone).\r\n* Mention `musig()` KEY expressions in the specification part.\r\n* Reference the relevant output descriptor BIPs in the text.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-01T16:25:09Z",
      "updated_at": "2026-01-14T13:54:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33986",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 490,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3170618932,
      "number": 34274,
      "title": "doc: clarify tr(KEY) output key tweaking and reference BIP-386",
      "body": "## Summary\n\nThe documentation for `tr(KEY)` descriptors in `doc/descriptors.md` was incomplete - it only mentioned that KEY is used as the \"internal key\" without explaining that the actual output key is computed by tweaking.\n\nThis PR clarifies that:\n- The specified KEY is used as the internal key\n- The actual output key is computed by tweaking the internal key with the merkle root (or empty string) per BIP-341\n- Links to BIP-386 for the full Taproot descriptor specification\n\nThis addresses the confusion described in #30279 where users might expect `tr(KEY)` to use KEY directly as the output key.\n\n## Changes\n\n- Updated `doc/descriptors.md` line 89 to include BIP-341 and BIP-386 references\n\nFixes #30279",
      "state": "closed",
      "user": "EricGrill",
      "created_at": "2026-01-13T17:33:43Z",
      "updated_at": "2026-01-14T13:48:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34274",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 773,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173543618,
      "number": 34283,
      "title": "[30.x] More backports",
      "body": "Backports:\r\n* #34272\r\n* #34252",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-14T13:32:45Z",
      "updated_at": "2026-01-14T13:33:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34283",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 52,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2902093523,
      "number": 33593,
      "title": "guix: Use UCRT runtime for Windows release binaries",
      "body": "This PR:\r\n1. Switches Windows release binaries to UCRT.\r\n2. Update docs.\r\n3. Drops MSVCRT workarounds.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/30210.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-10-09T21:46:43Z",
      "updated_at": "2026-01-14T13:21:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33593",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3118009680,
      "number": 34116,
      "title": "cmake: Fix debugging info",
      "body": "https://github.com/bitcoin/bitcoin/pull/30811 was intended to address https://github.com/bitcoin/bitcoin/issues/30799. However, it introduced several unforeseen consequences, including https://github.com/bitcoin/bitcoin/issues/31957 and https://github.com/bitcoin/bitcoin/issues/31204.\r\n\r\nThis PR takes an alternative approach to resolving https://github.com/bitcoin/bitcoin/pull/30799 and reverts https://github.com/bitcoin/bitcoin/pull/30811.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-19T15:57:19Z",
      "updated_at": "2026-01-14T13:17:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34116",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 470,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2318382567,
      "number": 31807,
      "title": "kernel: Avoid duplicating symbols in the kernel and downstream users",
      "body": "The possibility of this happening came up in the discussion here: https://github.com/bitcoin/bitcoin/pull/31158#issuecomment-2635223309, and it turned that we already had a case of it in our code.\r\n\r\ntl;dr: Certain symbols when defined in headers may end up existing in both the shared lib and the application using it, leading to subtle bugs. More info can be found [here](https://www.mail-archive.com/cfe-commits@lists.llvm.org/msg503669.html).\r\n\r\nThe solution is generally to avoid defining static/inline vars in headers if they aren't meant to be shared with downstream kernel users.\r\n\r\nClang has recently added a warning for this (see link above), so this PR enables that too. It adds a new place to specify warnings which only apply to the kernel. In this case, it's warnings that only apply to shared libs. But I can also imagine wanting to enable more aggressive warnings for the kernel than the rest of the code.\r\n\r\nThe warning is only enabled by clang 21 (which is not yet released), and only useful when our [kernel symbol visibility hack](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/CMakeLists.txt#L100) is disabled, which we can't do yet. So it's mostly a placeholder for the future. In the meantime it can be used manually by building clang from git and disabling our hack, which I've done, and can confirm that after this change there are no more warnings.",
      "state": "open",
      "user": "theuni",
      "created_at": "2025-02-05T19:32:42Z",
      "updated_at": "2026-01-14T13:12:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31807",
      "labels": [
        "Build system",
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1454,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3113555305,
      "number": 34099,
      "title": "test: Improve code coverage for pubkey checks",
      "body": "Cover these branches in `IsCompressedOrUncompressedPubKey` and `IsCompressedPubKey`:\r\n- `Non-canonical public key: invalid length for uncompressed key`\r\n- `Non-canonical public key: invalid length for compressed key`\r\n- `Non-canonical public key: invalid prefix for compressed key`\r\n\r\nSee the missed branches here: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html\r\n\r\n`script_tests` succeed on my end.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-18T12:25:49Z",
      "updated_at": "2026-01-14T13:05:46Z",
      "merged_at": "2026-01-13T23:24:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34099",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 483,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2930696206,
      "number": 33663,
      "title": "net: Filter addrman during address selection via AddrPolicy to avoid underfill",
      "body": "This PR introduces `AddrMan::AddrPolicy`, a predicate that allows callers to\r\nexclude addresses during selection. The policy returns true to skip a given\r\nentry and is evaluated while holding `AddrMan::cs`.\r\n\r\nThe mechanism is used in `CConnman::GetAddressesUnsafe()` to filter out\r\nbanned and discouraged peers during address selection instead of removing\r\nthem afterward. This prevents P2P responses (`GETADDR`) and RPCs (`getnodeaddresses)` from\r\nreturning fewer results than requested when large portions of the address space are filtered.\r\n\r\nAdditional improvements:\r\n- Logs the number of filtered entries for diagnostics\r\n- Avoids redundant filtering passes in higher-level callers\r\n- Keeps locking behavior unchanged (the policy runs under `AddrMan::cs`)\r\n\r\n**Testing**\r\n- Repro: ban or discourage a large set of addresses, then call\r\n  `getnodeaddresses 1`,  previously underfilled.\r\n- After this change, the RPC returns up to the requested count as expected.\r\n\r\nNo behavior change for unaffected callers.\r\n",
      "state": "open",
      "user": "waketraindev",
      "created_at": "2025-10-20T18:03:51Z",
      "updated_at": "2026-01-14T12:58:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33663",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1094,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3161681681,
      "number": 34247,
      "title": "security: harden CI actions and subprocess calls",
      "body": "Harden several CI and deployment scripts against potential injection vectors.\n\n### Changes\n\n- **.github/actions/configure-docker/action.yml**: Migrated direct `github` context interpolation to intermediate environment variables to prevent potential script injection from untrusted context data.\n- **contrib/macdeploy/macdeployqtplus**: Refactored the `codesign` subprocess call to use `shell=False` and list-based arguments. Fixed several linting issues (E401, F841).\n- **contrib/verify-binaries/verify.py**:\n    - Replaced `wget` with `urllib.request` for file retrieval, enforcing HTTP(S) protocols to mitigate potential LFI risks.\n    - Fixed a bug in `verify_with_gpg` where an empty string was passed to the `--output` argument when no output file was specified.\n    - Removed unused imports and cleaned up code.\n- **contrib/verify-binaries/test.py**: Updated `run_verify` to execute via `shell=False`.\n\nThese changes reduce the attack surface for command injection in automated environments and local deployment scripts while improving code quality and reliability.",
      "state": "open",
      "user": "RinZ27",
      "created_at": "2026-01-10T07:33:15Z",
      "updated_at": "2026-01-14T12:59:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34247",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1120,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3125987114,
      "number": 34142,
      "title": "policy: Check Taproot control block size correctly in `IsWitnessStandard`",
      "body": "I'd like to improve the Taproot [control size check](https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/src/policy/policy.cpp#L321) in `IsWitnessStandard`. Rather than just checking emptiness, we should perform all three checks implemented in `VerifyTaprootControlBlockSize` (see below). This way we can invalidate the transaction earlier when it's clear that the control size is incompatible with consensus rules (saving compute).\r\n\r\nOld checks:\r\n-  `control.size() > 0`\r\n\r\nNew checks:\r\n- `control.size() >= TAPROOT_CONTROL_BASE_SIZE`\r\n- `control.size() <= TAPROOT_CONTROL_MAX_SIZE`\r\n- `(control.size() - TAPROOT_CONTROL_BASE_SIZE) % TAPROOT_CONTROL_NODE_SIZE == 0`\r\n\r\nFor example, a single byte control block wouldn't be empty, but it would be invalid because it's shorter than `TAPROOT_CONTROL_BASE_SIZE` (33). `IsWitnessStandard` should return false in that case.\r\n\r\nThis PR also adds a helper function for the control block size check to reduce repetition and to improve readability of the (rather heavy) functions that call it. We have four instances of the same check.\r\n\r\nI ran:\r\n`cmake -B build -DENABLE_WALLET=OFF && cmake --build build -j 8 && ctest --test-dir build -j 8`\r\n\r\nLooking forward to your feedback.",
      "state": "open",
      "user": "billymcbip",
      "created_at": "2025-12-23T12:43:00Z",
      "updated_at": "2026-01-14T12:53:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34142",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1323,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2999254279,
      "number": 33854,
      "title": "fix assumevalid is ignored during reindex",
      "body": "During a reindex, the assumevalid setting may be ignored if the chainwork of the best header is below `minimumchainwork`. This happens when the previous IBD was stopped before connecting enough blocks to reach the required `minimumchainwork`. The assumevalid block will also be missing from the block index because the assumevalid block is set to match the `minimumchainwork`. See [Issue #31494](https://github.com/bitcoin/bitcoin/issues/31494).\r\n\r\nAs a result, `reindex` can take significantly longer to complete than necessary.\r\n\r\nThis PR addresses the issue by modifying reindex behaviour: if the chainwork of the `best_header` is below `minimumchainwork`, the node skips the `ActivateBestChain()` step and proceeds directly to synchronisation.\r\n\r\nThis PR takes a different approach from [PR #31615](https://github.com/bitcoin/bitcoin/pull/31615) to keep the validation path for `reindex` the same as the regular IBD validation path.\r\n\r\nDevelopers benchmarking IBD with `-reindex` may find this behaviour undesirable. In such cases, it’s recommended to use `-reindex-chainstate` instead or ensure that the available blocks have sufficient chainwork.\r\n\r\n`libbitcoinkernel` exposes the `ImportBlocks` function and expects `reindex` to connect blocks, so an attempt was made to preserve the existing behaviour for `libbitcoinkernel`.",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-11-11T14:21:14Z",
      "updated_at": "2026-01-14T12:06:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33854",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3169202433,
      "number": 34270,
      "title": "[28.x] Backports",
      "body": "Backports:\r\n* #33723\r\n* #34227",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-13T10:41:53Z",
      "updated_at": "2026-01-14T12:01:00Z",
      "merged_at": "2026-01-14T12:00:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34270",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 47,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3034182041,
      "number": 33922,
      "title": "mining: add getMemoryLoad() and track template non-mempool memory footprint",
      "body": "Implements a way to track the memory footprint of all non-mempool transactions that are still being referenced by block templates, see discussion in  #33899. It does not impose a limit.\r\n\r\nIPC clients can query this footprint (total, across all clients) using the `getMemoryLoad()` IPC method. Its client-side usage is demonstrated here:\r\n- https://github.com/stratum-mining/sv2-tp/pull/63\r\n\r\nAdditionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client drops references to them, or calls the template destroy method, or disconnects. The destroy method is called automatically by clients using [libmultiprocess](https://github.com/bitcoin-core/libmultiprocess), as [sv2-tp](https://github.com/stratum-mining/sv2-tp) does. In the Python tests it also happens when references are destroyed or go out of scope.\r\n\r\nThe PR starts with preparation refactor commits:\r\n\r\n1. Tweaks `interface_ipc.py` so `destroy()` calls happen in an order that's useful to later demonstrate memory management\r\n2. Change `std::unique_ptr<BlockTemplate> block_template` from a `static` defined in `rpc/mining.cpp` to `NodeContext`. This prevents a crash when we switch to a non-trivial destructor later (which uses `m_node`).\r\n\r\nThen the main commits:\r\n\r\n3. Add `template_tx_refs` to `NodeContext` to track how many templates contain any given transaction. This map is updated by the `BlockTemplate` constructor and destructor.\r\n4. Add `GetTemplateMemoryUsage()` which loops over this map and sums up the memory footprint for transactions outside the mempool\r\n5. Expose this information to IPC clients via `getMemoryLoad()` and add test coverage\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-21T15:34:14Z",
      "updated_at": "2026-01-14T11:18:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33922",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1801,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3054407979,
      "number": 33966,
      "title": "refactor: disentangle miner startup defaults from runtime options",
      "body": "The interaction between node startup options like `-blockreservedweight` and runtime options, especially those passed via IPC, is confusing.\r\n\r\nThey're combined in `BlockAssembler::Options`, which this PR gets rid of in favour of two distinct structs:\r\n\r\n1. `BlockCreateOptions`: used by interface clients. As before, IPC clients have access to a safe / sane subset, whereas RPC and test code can use all fields.\r\n2. `MiningArgs`: these are set once during node startup\r\n\r\nBoth structs have a member for the maximum block height, which is not a problem since they're different structs. The one on `MiningArgs` (`block_max_weight`) matches `-maxblockheight` and is left alone. The one on `BlockCreateOptions` (`block_max_weight`) is an optional, it's set by `ApplyMiningDefaults` only if empty. \r\n\r\nThis all happens in the last commit and requires some preparation to keep things easy to review.\r\n\r\nWe get rid of `BlockAssembler::Options` but this is used in many tests. Since large churn is inevitable, we might as well switch all tests, bench and fuzzers over to the Mining interface. The first (non-base) commit does that, dramatically reducing direct use of `BlockAssembler`. Two exceptions are documented in the commit message. Because `test_block_validity` wasn't available via the interface and the block_assemble benchmark needs it, it's moved from `BlockAssembler::Options` to `BlockCreateOptions` (still not exposed via IPC).\r\n\r\nWe need access to mining related defaults and structs from both the miner and node initialization code. To avoid having to pull in all of `BlockAssembler` for the latter, the second commit introduces `node/mining.h` and moves constants and structs there from `src/node/types.h` (`BlockCreateOptions`, `BlockWaitOptions`, `BlockCheckOptions`) and `src/node/miner.h` (`DEFAULT_PRINT_MODIFIED_FEE`).\r\n\r\nI considered also moving `DEFAULT_BLOCK_MAX_WEIGHT`, `DEFAULT_BLOCK_RESERVED_WEIGHT`, `MINIMUM_BLOCK_RESERVED_WEIGHT` and `DEFAULT_BLOCK_MIN_TX_FEE` there from `policy.h`, since they are distinct from relay policy and not needed by the kernel. But this seems more appropriate for a follow-up and requires additional discussion.\r\n\r\nThe meat and potatoes of this PR is split between the three last commits for easier review:\r\n\r\n1. Adds `node/mining_args.{h,cpp}` and move the options checking out of `init.cpp`, without adding storage\r\n2. Add `block_max_weight` to `BlockCreateOptions` as explained above\r\n3. Introduce the `MiningArgs` struct, add it to the `NodeContext`, expand `mining_args.cpp` to store it, pass it to `BlockAssembler`, etc.\r\n\r\nI kept variable renaming and other formatting changes to a minimum to ease review with `--color-moved=dimmed-zebra`.\r\n\r\nThis PR builds on the bug fix in:\r\n- [ ] #33965\r\n\r\nOnce that is merged, this PR should not change behaviour.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T15:42:31Z",
      "updated_at": "2026-01-14T11:17:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33966",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2878,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3070554287,
      "number": 34004,
      "title": "Implementation of SwiftSync",
      "body": "Link to the original protocol writeup found [here](https://gist.github.com/RubenSomsen/a61a37d14182ccd78760e477c78133cd). See the [Delving Bitcoin post](https://delvingbitcoin.org/t/swiftsync-speeding-up-ibd-with-pre-generated-hints-poc/1562) for initial works and discussion.\r\n\r\n# Motivation\r\n\r\nWhile many coins are available in cache when spent, every cache miss requires a trip to the disk. Memory can be scarce for single board machines, so cache misses are expected to be far more frequent. A trip to disk is all-the-more severe on low end hardware, so any minimization of disk interactions can speed up initial block download for limited resource devices. One such example may be a block template provider serving a home miner.\r\n\r\n# Intuition\r\n\r\nThe vast majority of coins created are later spent. The cost of this observation is many coins will be written to disk, only to be removed later. The SwiftSync protocol alleviates the problem by recording what coins have been added and removed with a small, in-memory aggregate. This allows for the removal of intermediate coin states until SwiftSync has completed. The state of the aggregate is verified at a predetermined chain height, and IBD continues as usual thereafter.\r\n\r\nFor any chain height, we know `all outputs - all inputs = UTXO set`, which is equivalently `all outputs - UTXO set = all inputs`. The goal is to verify the set `all outputs - UTXO set` is equal to `all inputs`. Addition and subtraction modulo a field offers a way to do so. For any set, if we add all elements of the set and subtract them, regardless of ordering, we will arrive at zero. In the current implementation, the set elements being compared are hashed outpoints.\r\n\r\nThe SwiftSync protocol is comprised of two structures. First, the aggregate that will record the state of what outpoints have been added (created) or subtracted (spent). Next, notice that the UTXO set must be reported in order to verify `all outputs - UTXO set = all inputs`. SwiftSync introduces a hints file, which may be provided to the client at startup. This hints file is nothing more than a pointer to each unspent output by recording the block height and the indexes that will remain unspent. By using this file, a client may omit outpoints that will be in the UTXO set when updating the aggregate. Note this file is not trusted. If a malicious actor provides a faulty UTXO set, the set comparison above will fail, and the client may begin a reindex.\r\n# Implementation\r\n\r\n## Aggregate\r\n\r\nThe hash aggregate takes outpoints, hashes them with a salted hasher, and updates 4, 64-bit limbs with wrapping modulo arithmetic. The choice of 4, 64-bit limbs with no carries between limbs was made to: 1. minimize code complexity within the aggregate 2. conform to existing APIs, namely `uint256`. After adding and subtracting some arbitrary list of outpoints, we may poll if the sets were equivalent with `IsZero`.\r\n## Hintsfile\r\n\r\nThe hints file is a map of block height to the indexes of the outputs in that block that _will_ be in the UTXO set. To construct this file for a particular UTXO set state, each block must be read and queried to find the outputs in that block that remain unspent. Because this is a read-only operation, this may be done on parallel threads in the future. To allow for parallelization, the hints file contains a \"contents\" section, which denotes the height and corresponding file position to find the hints for that block.\r\n\r\nTo save space when representing the indexes that remain unspent in a block, an easy choice is to take the difference between the last coin that was unspent and the next one in the block. AFICT this is a version of run-length-encoding. These indexes are encoded using `compactSize` to further save space, the run-lengths should normally fit into at least 16 bits, often 8 bits.\r\n## Parameter Interaction\r\n\r\nA side effect of omitting intermediate UTXO states while performing IBD is the \"undo data\" cannot be derived. There are already configurations that do not have full undo data history, namely pruned nodes. To avoid additional complexity in this PR, this version of accelerated IBD is only made available to pruned nodes, as the undo data would have been removed regardless of the this setting.\r\n\r\nOther parameter interactions, not yet implemented:\r\n- `assumeutxo`: Startup should fail if both are configured. A hints file will have no effect, as the UTXO set is already present.\r\n- `assumevalid`: A natural choice is to only allow SwiftSync when using `assumevalid`, and to only allow a hints file that commits to the `assumevalid` block. Similar to `assumeutxo`, a hash of the hints file may be committed to in the binary, which would be resistant to griefing attacks.\r\n# Testing [Linux example]\r\n\r\nIn your `bitcoin` directory, download the hints from the test server:\r\n\r\n```bash\r\ncurl -o signet.hints http://utxohints.store/hints/signet\r\n```\r\n\r\nVerify the hash of the file:\r\n\r\n```bash\r\necho \"2b625392ecb2adba2b5f9d7b00c8f3a8adca0d3c  signet.hints\" | sha1sum --check -\r\n```\r\n\r\nBuild the branch:\r\n\r\n```bash\r\ncmake -B build && cmake --build build -j $(nproc)\r\n```\r\n\r\nRemove existing chain state:\r\n\r\n```bash\r\nrm -rf ~/.bitcoin/signet/\r\n```\r\n\r\nProvide the file at startup:\r\n\r\n```bash\r\n./build/bin/bitcoind --chain=signet --utxohints=./signet.hints --prune=550\r\n```\r\n\r\n#### Other networks:\r\n- ~Testnet4: endpoint `http://utxohints.store/hints/testnet4`, expected checksum `7acbb25b651ffc5ebc59c46fd065a510c149f00e  testnet4.hints`~\r\n\r\n# Open Questions\r\n\r\n- Given the outcome of SwiftSync is pass/fail, and there is no use of intermediate states, should blocks be persisted to disk at all during the protocol?\r\n- To what degree should a hints file be committed to in the binary. No commitment allows for a server to provide hints for an arbitrary height, providing a convenience for the client, but opens up the possibility of a grief attack. Of course the server risks losing reputation for serving faulty files.\r\n\r\n# Future Iteration\r\n\r\nThis is the first iteration of the SwiftSync proposal, however more optimizations may be made. Namely, because set elements may be added or subtracted from the aggregate in any order, blocks may be downloaded in parallel from multiple peers. If you are interested in benchmarking the performance of a fully-parallel version, see the [Rust implementation](https://github.com/2140-dev/swiftsync).\r\n",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2025-12-04T09:50:39Z",
      "updated_at": "2026-01-14T11:16:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34004",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 6426,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3160217990,
      "number": 34241,
      "title": "test: Check that interrupt results in EXIT_SUCCESS",
      "body": "This is a test for https://github.com/bitcoin/bitcoin/pull/34224. The test can be tested by reverting that pull request and observing the test failure.\r\n\r\n\r\nAlso, includes a small test cleanup/refactor.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-09T16:30:25Z",
      "updated_at": "2026-01-14T11:11:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34241",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 253,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3088060609,
      "number": 34038,
      "title": "logging: API improvements",
      "body": "A few changes:\r\n\r\n * Provide `STDLOCK(m_cs)` instead of `StdLockGuard g(m_cs)` for the logging mutexes, so that we can get better warnings from clang if annotations have been missed\r\n * Allow writing `LogInfo(BCLog::NO_RATE_LIMIT, \"log message\")` to avoid rate limiting, rather than having to supply a false argument to `LogPrintLevel_(...)`\r\n * Replace the `-loglevel` parameter with a new `-trace` parameter that works the same as `-debug`\r\n * Change the `logging` RPC to allow enabling trace debugging, and to differentiate trace vs debug levels\r\n ",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-10T05:56:20Z",
      "updated_at": "2026-01-14T10:56:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34038",
      "labels": [
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 577,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1571888838,
      "number": 28724,
      "title": "wallet: Cleanup accidental encryption keys in watchonly wallets",
      "body": "An earlier version allowed users to create watchonly wallets (wallets without private keys) that were \"encrypted\". Such wallets would have a stored encryption keys, but nothing would actually be encrypted with them. This can cause unexpected behavior such as https://github.com/bitcoin-core/gui/issues/772.\r\n\r\nWe can detect such wallets as they will have the disable private keys flag set, no encrypted keys, and encryption keys. For such wallets, we can remove those encryption keys thereby avoiding any issues that may result from this unexpected situation.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2023-10-24T23:02:08Z",
      "updated_at": "2026-01-14T10:53:41Z",
      "merged_at": "2025-01-10T15:30:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28724",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 623,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2268130280,
      "number": 31625,
      "title": "miner: always treat SegWit as active",
      "body": "The `getblocktemplate` RPC would check if SegWit has activated yet at the tip. This has been the case for more than seven years.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-01-09T11:16:37Z",
      "updated_at": "2026-01-14T10:53:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31625",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 165,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1829527835,
      "number": 29904,
      "title": "refactor: Use our own implementation of urlDecode",
      "body": "Fixes #29654 (as a side-effect)\r\n\r\nRemoving dependencies is a general goal of the project and the xz backdoor has been an additional wake up call recently. Libevent shows many of the same symptoms, few maintainers and slow releases. While libevent can not be removed completely over night we should start removing it’s usage where it's possible, ideally with the end goal to removing it completely.\r\n\r\nThis is a pretty easy win in that direction. The [`evhttp_uridecode` function from libevent](https://github.com/libevent/libevent/blob/e0a4574ba2cbcdb64bb2b593e72be7f7f4010746/http.c#L3542) we were using in `urlDecode` could be easily emulated in fewer LOC. This also ports the [applicable test vectors over from libevent](https://github.com/libevent/libevent/blob/master/test/regress_http.c#L3430).",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2024-04-18T13:06:19Z",
      "updated_at": "2026-01-14T10:53:40Z",
      "merged_at": "2024-04-25T17:06:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29904",
      "labels": [
        "Refactoring",
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 851,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2269062036,
      "number": 31630,
      "title": "doc: Archive 28.1 release notes",
      "body": "",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-01-09T19:05:44Z",
      "updated_at": "2026-01-14T10:53:39Z",
      "merged_at": "2025-01-14T21:06:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31630",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 32,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3102178109,
      "number": 34075,
      "title": "fees: Introduce Mempool Based Fee Estimation to reduce overestimation",
      "body": "This PR is another attempt to fix #27995 using a better approach.\r\n\r\nFor background and motivation, see #27995 and the discussion in the Delving Bitcoin post [Mempool Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\r\nThis PR is currently limited to using the mempool only to lower what is recommended by the Block Policy Estimator.\r\nAccurate and safe fee estimation using the mempool is challenging. There are open questions about how to prevent mempool games that are theoretically possible for miners [(a variant of the Finney attack)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6)\r\n\r\nThis is one of the reasons I opted to use the mempool only to lower the Block Policy Estimator, which itself is not gameable, and therefore this mechanism is not susceptible to this attack.\r\n\r\nThe underlying assumption here is that, with the current tools and work done to make RBF and CPFP feasible and guarantee (TRUC transaction relay, ephemeral anchors, cluster size 2 package rbf), it is safer to underestimate rather than overestimate.\r\nWe now assume it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that.\r\n\r\nAnother open question when using the mempool for fee estimation is how to account for incoming transaction inflow.\r\n[Bitcoin Augur](https://github.com/block/bitcoin-augur) does this by using past inflow plus a constant expected inflow to predict future inflow. I find this unconvincing for fee estimation and potentially prone to more overestimation, as past conditions are not always representative of the future. See my [review of the Augur fee rate estimator and open questions](https://github.com/block/bitcoin-augur/issues/3).\r\n\r\nThis PR uses a much simpler approach based on current user behavior, similar to the widely used method employed by mempool.space: looking at the top block of the mempool and selecting a percentile feerate depending on whether the user is economical or conservative.\r\n\r\nEmpirical data from both myself and Clara Shikhelman shows that the 75th percentile feerate for economical users and the 50th percentile feerate for conservative users provide positive confirmation guarantees, hence this is what is used in this PR.\r\n\r\nParallel research by René Pickhardt and his student suggests that using the [average fee per byte of the block template performs well](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12).\r\n\r\nAll of these are constants that can be adjusted, there is parallel work exploring these constants and running benchmarks across fee estimators to find a sweet spot.\r\n\r\nSee also work in LND, the [LND Budget Sweeper](https://delvingbitcoin.org/t/lnds-deadline-aware-budget-sweeper/1512), which applies this idea successfully. Their approach is to estimate fees initially with bitcoind, then increment gradually as the confirmation deadline approaches, using a fixed fee budget.\r\n\r\nHistorical data indicates that by doing only the approach in this PR, we are able to [reduce overestimation quite significantly (~29%)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8).\r\n\r\nThis is particularly useful in scenarios where the Block Policy Estimator recommends a high feerate while the mempool is empty.\r\n<img width=\"1800\" height=\"1090\" alt=\"56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" src=\"https://github.com/user-attachments/assets/c035c40c-8ece-42a7-b290-d29f1ac9bf4d\" />\r\n\r\nAs seen in the image above, there is only one remaining unfixed case: when there is a sudden inflow of transactions and the feerate rises, the Block Policy Estimator takes time to reflect this. In that case, users will continue to see a low feerate estimate until it slowly updates. From the historical data linked above, [this occurs about ~26% of the time](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8)).\r\n\r\nOverall, we observe a **73% success rate with 0% overestimation, and 26% underestimation** with this approach.\r\n\r\nThis PR also includes refactors that enable this work. Rather than splitting the PR and implementing changes incrementally, I opted for an end-to-end implementation:\r\n\r\n### 1. Refactors\r\n\r\n* Separation of feerate format from the fee estimate mode enumerator (separation of concerns, as they are semantically distinct)\r\n* Move logging after fee estimation estimateSmartFee from the wallet to the Block Policy Estimator internal method (also separation of concerns and avoiding leaking fee estimator internals). This change also comes with updating `createTransactionInternal` to log only the fee and its source (fee estimator, fallback fee, etc.), which is more appropriate.\r\n* Separate the fee estimate mode enum from the fee source enumerator (separation of concerns, as they are semantically distinct). This introduces a minor breaking change: the wallet RPCs now return fee *source* instead of fee *reason*, which is more accurate. Let me know if we prefer to keep the field name unchanged while returning the fee source.\r\n* Move the `StringForReason` enum from `common` to the Block Policy Estimator (also separation of concerns)\r\n* Various test file updates and renames for improved accuracy\r\n* Update Block Policy Estimator unit tests to be independent of the mempool and the validation interface\r\n\r\n### 2. Introduce Mempool-Based Fee Estimator and Fee Estimator Manager\r\n\r\n* Introduce a new abstract fee estimator base class that all fee estimators must implement\r\n\r\n* Introduce `FeeRateEstimateResult` as the response type, containing metadata and avoiding the use of out-parameters. This is easily extensible and makes future changes less invasive, as method signatures do not need to change.\r\n\r\n* Add `FeeEstimatorType` enum to identify different fee estimators\r\n\r\n* Make `CBlockPolicyEstimator` derive from the new fee estimator base class\r\n\r\n* Add `FeeRateEstimatorManager`, responsible for managing all fee estimators\r\n\r\n* Update the node context to store a `unique_ptr` to `FeeRateEstimatorManager` instead of `CBlockPolicyEstimator`\r\n\r\n* Update `CBlockPolicyEstimator` to no longer subscribe directly to the validation interface; instead, `FeeRateEstimatorManager` subscribes and forwards relevant notifications\r\n\r\n* Add a percentile calculation function that takes the chunk feerates of a block template and returns feerate percentiles; this can also be reused by the `getblockstats` RPC\r\n\r\n* Add a mempool fee estimator that generates a block template when called, calculates a percentile feerate, and returns the 75th percentile for economical mode or the 50th percentile for conservative mode\r\n\r\n* Add caching to the mempool estimator so that new estimates are generated only every 7 seconds, assuming enough [transactions have propagated](https://bitcoin.stackexchange.com/questions/125776/how-long-does-it-take-for-a-transaction-to-propagate-through-the-network/125777#125777) to make a meaningful difference.\r\n  This heuristic will likely be replaced by requesting block templates via the general-purpose block template cache proposed here: [https://github.com/bitcoin/bitcoin/issues/33389](https://github.com/bitcoin/bitcoin/issues/33389)\r\n\r\n* Update `MempoolTransactionRemovedForBlock` to return the actual block transactions as well\r\n\r\n* Track the weight of block transactions and evicted transactions after each block connection\r\n  This data is tracked for the last 6 mined blocks. A mempool feerate estimate is returned only when the average ratio of mempool transaction weight evicted due to `BLOCK` reasons to block transaction weight is greater than 75%. This heuristic provides rough confidence that the node’s mempool matches that of the majority of the hashrate. The 75% threshold is arbitrary and can be adjusted.\r\n\r\nThere is a caveat when transactions in the local mempool are consistently not mined by the network, as described in #27995 (e.g., due to filtering).\r\nAccounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself (see #33510). Handling this again within fee estimation would be redundant.\r\n\r\n* Persist statistics for the 6 most recent blocks to disk during periodic flushes and shutdown, so this data is available after restarts\r\n* Expose this data to users when running `estimatesmartfee` with verbosity > 2\r\n\r\n<details>\r\n<summary>see example output</summary>\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n```\r\n\r\n```\r\n{\r\n  \"feerate\": 0.00002133,\r\n  \"errors\": [],\r\n  \"blocks\": 2,\r\n  \"mempool_health_statistics\": [\r\n    {\r\n      \"block_height\": 927953,\r\n      \"block_weight\": 3991729,\r\n      \"mempool_txs_weight\": 3942409,\r\n      \"ratio\": 0.987644451815241\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-12-15T11:53:35Z",
      "updated_at": "2026-01-14T10:39:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34075",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 8927,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2388629186,
      "number": 32043,
      "title": "[IBD] Tracking PR for speeding up Initial Block Download",
      "body": "During the last Core Dev meeting, it was proposed to create a tracking PR aggregating the individual IBD optimizations - to illustrate how these changes contribute to the broader performance improvement efforts.\r\n\r\n## Summary: **>20%** full IBD speedup\r\nWe don't have many low-hanging fruits anymore, but big speed improvements can also be achieved by many small, focused changes.\r\nMany optimization opportunities are hiding in consensus critical code - this tracking PR provides justification for why those should also be considered.\r\nThe unmerged changes here collectively achieve a **>20%** speedup for full IBD (measured by multiple real runs until 886'000 blocks using 5GiB in-memory cache): from **8.59 hours** on master to **7.25 hours** for the PR.\r\n\r\nAnyone can (and is encouraged to) reproduce the results by following this guide: https://gist.github.com/l0rinc/83d2bdfce378ad7396610095ceb7bed5\r\n\r\n## Related issues:\r\n* https://github.com/bitcoin/bitcoin/issues/32832\r\n* https://github.com/bitcoin/bitcoin/issues/31494\r\n\r\n## PRs included here (in review priority order):\r\n* [x] https://github.com/bitcoin/bitcoin/pull/31490\r\n* [x] https://github.com/bitcoin/bitcoin/pull/31551\r\n* [x] https://github.com/bitcoin/bitcoin/pull/32487\r\n* [x] https://github.com/bitcoin/bitcoin/pull/31144\r\n* [x] https://github.com/bitcoin/bitcoin/pull/32827\r\n* [x] https://github.com/bitcoin/bitcoin/pull/32279\r\n* [x] https://github.com/bitcoin/bitcoin/pull/31645\r\n* [x] https://github.com/bitcoin/bitcoin/pull/33602\r\n* [x] https://github.com/bitcoin/bitcoin/pull/30442\r\n* [ ] https://github.com/bitcoin/bitcoin/pull/32497\r\n* [ ] https://github.com/bitcoin/bitcoin/pull/31132\r\n* [ ] https://github.com/bitcoin/bitcoin/pull/31682\r\n* [ ] https://github.com/bitcoin/bitcoin/pull/31868\r\n\r\n## Changing trends\r\nThe UTXO count and average block size have drastically increased in the past few years, providing a better overall picture of how Bitcoin behaves under real load.\r\n[<img width=\"500\" alt=\"image\" src=\"https://github.com/user-attachments/assets/d257b864-d9de-4f9d-b61b-acc6835f384f\" />](https://www.blockchain.com/explorer/charts/avg-block-size)\r\nProfiling IBD, given these circumstances, revealed many new optimization opportunities.\r\n\r\n## Similar efforts in the past years\r\n\r\nThere were many efforts to make sure Bitcoin Core remains performant in light of these new trends, a few recent notable examples include:\r\n* https://github.com/bitcoin/bitcoin/pull/25325 - use specialized pool allocator for in-memory cache (~21% faster IBD)\r\n* https://github.com/bitcoin/bitcoin/pull/28358 - allow the full UTXO set to fit into memory\r\n* https://github.com/bitcoin/bitcoin/pull/28280#issuecomment-2273368482 - fine-grained in-memory cache eviction for pruned nodes (~30% IBD speedup on pruned nodes)\r\n* https://github.com/bitcoin/bitcoin/pull/30039#issuecomment-2397229720 - reduce LevelDB writes, compactions and open files (~30% faster IBD for small in-memory cache)\r\n* https://github.com/bitcoin/bitcoin/pull/31490, https://github.com/bitcoin/bitcoin/pull/30849, https://github.com/bitcoin/bitcoin/pull/30906 - refactors derisking/enabling follow-up optimizations\r\n* https://github.com/bitcoin/bitcoin/pull/30326 - favor the happy path for cache misses (~2% IBD speedup)\r\n* https://github.com/bitcoin/bitcoin/pull/30884 - Windows regression fix\r\n\r\n## Reliable macro benchmarks\r\n\r\nThe measurements here were done on a high-end Intel i9-9900K CPU (8 cores/16 threads, 3.6GHz base, 5.0GHz boost), 64GB RAM, and a RAID configuration with multiple NVMe drives (total ~1.4TB fast storage), a dedicated Hetzner Auction box running latest Ubuntu. Sometimes a lower-end i7 was used with an HDD for comparison.\r\n\r\nTo make sure the setup reflected a real user's experience, we ran multiple full IBDs per commit (connecting to real nodes), until block 886'000 with a 5GiB in-memory cache where hyperfine was used to measure the final time (assuming normal distribution, stabilizing the final result via statistical methods), producing reliable results even when individual measurements varied (when hyperfine indicated that the measurements were all over the place we reran the whole benchmark).\r\nTo reduce the instability of headers synchronization and peer acquisition, we first started `bitcoind` until block 1, followed by the actual benchmarks until block 886'000.\r\n\r\nThe top 2 PRs (https://github.com/bitcoin/bitcoin/pull/31551 and https://github.com/bitcoin/bitcoin/pull/31144) were measured together by multiple people with different settings (and varying results):\r\n* @andrewtoth in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2585403343 - 9% speedup with GCC\r\n* @hodlinator in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2588220255 - 11.9% speedup with GCC\r\n* @mlori in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2664077362 - 12% faster with GCC\r\n* @Sjors in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2575279833 - 3% speedup with Clang\r\n\r\nAlso note that there is a separate effort to [add a reliable macro-benchmarking suite](https://github.com/bitcoin/bitcoin/pull/31996) to track the performance of the most critical usecases end-to-end (including IBD, compact blocks, UTXO iteration) - still WIP, not yet used here.\r\n\r\n## Current changes (in order of importance, reviews and reproducers are welcome):\r\n\r\nPlotting the performance of the blocks from the produced `debug.log` files (taken from the last run for each commit - can differ slightly from the normalized average shown below) visualizing the effect of each commit:\r\n\r\n<details>\r\n<summary>debug.log visualizer</summary>\r\n\r\n```python\r\nimport os\r\nimport sys\r\nimport re\r\nfrom datetime import datetime\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\n\r\ndef process_log_files_and_plot(log_dir, output_file=\"block_height_progress.png\"):\r\n    if not os.path.exists(log_dir) or not os.path.isdir(log_dir):\r\n        print(f\"Error: '{log_dir}' is not a valid directory\", file=sys.stderr)\r\n        return\r\n\r\n    debug_files = [f for f in os.listdir(log_dir) if\r\n                   f.startswith('debug-') and os.path.isfile(os.path.join(log_dir, f))]\r\n    if not debug_files:\r\n        print(f\"Warning: No debug files found in '{log_dir}'\", file=sys.stderr)\r\n        return\r\n\r\n    height_pattern = re.compile(r'UpdateTip:.*height=(\\d+)')\r\n    results = {}\r\n\r\n    for filename in debug_files:\r\n        filepath = os.path.join(log_dir, filename)\r\n        print(f\"Processing {filename}...\", file=sys.stderr)\r\n\r\n        update_tips = []\r\n        first_timestamp = None\r\n        line_count = tip_count = 0\r\n        found_shutdown_done = False\r\n\r\n        try:\r\n            with open(filepath, 'r', errors='ignore') as file:\r\n                for line_number, line in enumerate(file, 1):\r\n                    line_count += 1\r\n                    if line_count % 100000 == 0:\r\n                        print(f\"  Processed {line_count} lines, found {tip_count} UpdateTips...\", file=sys.stderr)\r\n\r\n                    if not found_shutdown_done:\r\n                        if \"Shutdown: done\" in line:\r\n                            found_shutdown_done = True\r\n                            print(f\"  Found 'Shutdown: done' at line {line_number}, starting to record\",\r\n                                  file=sys.stderr)\r\n                        continue\r\n\r\n                    if len(line) < 20 or \"UpdateTip:\" not in line:\r\n                        continue\r\n\r\n                    try:\r\n                        timestamp = datetime.strptime(line[:20], \"%Y-%m-%dT%H:%M:%SZ\")\r\n                        height_match = height_pattern.search(line)\r\n                        if not height_match:\r\n                            continue\r\n\r\n                        height = int(height_match.group(1))\r\n                        if first_timestamp is None:\r\n                            first_timestamp = timestamp\r\n\r\n                        update_tips.append((int((timestamp - first_timestamp).total_seconds()), height))\r\n                        tip_count += 1\r\n                    except ValueError:\r\n                        continue\r\n        except Exception as e:\r\n            print(f\"Error processing {filename}: {e}\", file=sys.stderr)\r\n            continue\r\n\r\n        print(f\"Finished processing {filename}: {line_count} lines, {tip_count} UpdateTips\", file=sys.stderr)\r\n\r\n        if update_tips:\r\n            time_dict = {}\r\n            for time, height in update_tips:\r\n                time_dict[time] = height\r\n            results[filename[6:14]] = sorted(time_dict.items())\r\n\r\n    if not results:\r\n        print(\"No valid data found in any files.\", file=sys.stderr)\r\n        return\r\n\r\n    print(f\"Creating plots with data from {len(results)} files\", file=sys.stderr)\r\n\r\n    sorted_results = []\r\n    for name, pairs in results.items():\r\n        if pairs:\r\n            sorted_results.append((name, pairs[-1][0] / 3600, pairs))\r\n\r\n    sorted_results.sort(key=lambda x: x[1], reverse=True)\r\n    colors = plt.cm.tab10(np.linspace(0, 1, len(sorted_results)))\r\n\r\n    # Plot 1: Height vs Time\r\n    plt.figure(figsize=(12, 8))\r\n\r\n    final_points = []\r\n    for idx, (name, last_time, pairs) in enumerate(sorted_results):\r\n        times = [t / 3600 for t, _ in pairs]\r\n        heights = [h for _, h in pairs]\r\n        plt.plot(heights, times, label=f\"{name} ({last_time:.2f}h)\", color=colors[idx], linewidth=1)\r\n        if pairs:\r\n            final_points.append((last_time, pairs[-1][1], colors[idx]))\r\n\r\n    for time, height, color in final_points:\r\n        plt.axhline(y=time, color=color, linestyle='--', alpha=0.3)\r\n        plt.axvline(x=height, color=color, linestyle='--', alpha=0.3)\r\n\r\n    plt.title('Sync Time by Block Height')\r\n    plt.xlabel('Block Height')\r\n    plt.ylabel('Elapsed Time (hours)')\r\n    plt.grid(True, linestyle='--', alpha=0.7)\r\n    plt.legend(loc='center left')\r\n    plt.tight_layout()\r\n\r\n    plt.savefig(output_file.replace('.png', '_reversed.png'), dpi=300)\r\n\r\n    # Plot 2: Performance Ratio by Time\r\n    if len(sorted_results) > 1:\r\n        plt.figure(figsize=(12, 8))\r\n\r\n        baseline = sorted_results[0]\r\n        baseline_time_by_height = {h: t for t, h in baseline[2]}\r\n\r\n        for idx, (name, _, pairs) in enumerate(sorted_results[1:], 1):\r\n            time_by_height = {h: t for t, h in pairs}\r\n\r\n            common_heights = [h for h in baseline_time_by_height.keys()\r\n                              if h >= 400000 and h in time_by_height]\r\n            common_heights.sort()\r\n\r\n            ratios = []\r\n            base_times = []\r\n\r\n            for h in common_heights:\r\n                base_t = baseline_time_by_height[h]\r\n                result_t = time_by_height[h]\r\n\r\n                if result_t > 0:\r\n                    ratios.append(base_t / result_t)\r\n                    base_times.append(base_t / 3600)\r\n\r\n            plt.plot(base_times, ratios,\r\n                     label=f\"{name} vs {baseline[0]}\",\r\n                     color=colors[idx], linewidth=1)\r\n\r\n        plt.axhline(y=1, color='gray', linestyle='--', alpha=0.7)\r\n\r\n        plt.title('Performance Improvement Over Time (Higher is Better)')\r\n        plt.xlabel('Baseline Elapsed Time (hours)')\r\n        plt.ylabel('Speedup Ratio (baseline_time / commit_time)')\r\n        plt.grid(True, linestyle='--', alpha=0.7)\r\n        plt.legend(loc='best')\r\n        plt.tight_layout()\r\n\r\n        plt.savefig(output_file.replace('.png', '_time_ratio.png'), dpi=300)\r\n\r\n    with open(output_file.replace('.png', '.csv'), 'w') as f:\r\n        for name, _, pairs in sorted_results:\r\n            f.write(f\"{name},{','.join(f'{t}:{h}' for t, h in pairs)}\\n\")\r\n\r\n    plt.show()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    log_dir = sys.argv[1] if len(sys.argv) > 1 else \".\"\r\n    output_file = sys.argv[2] if len(sys.argv) > 2 else \"block_height_progress.png\"\r\n    process_log_files_and_plot(log_dir, output_file)\r\n\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/a43b43da-209c-4736-b1ef-d4d57f838d74\" />\r\n\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/2d43d867-0c9e-4daf-9d47-bd1148c48b55\" />\r\n\r\n\r\n### Baseline\r\nBase commit was 88debb3e42.\r\n\r\n<details>\r\n<summary>8.59 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=88debb3e4297ef4ebc8966ffe599359bc7b231d0 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     30932.610 s ± 156.891 s    [User: 58248.505 s, System: 2142.974 s]\r\n  Range (min … max):   30821.671 s … 31043.549 s    2 runs\r\n  ```\r\n\r\n</details>\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31551\r\n\r\n<details>\r\n<summary>7.91 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=6a8ce46e32dae2ffef2a73d2314ca33a2039186e ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     28501.588 s ± 119.886 s    [User: 56419.060 s, System: 1833.126 s]\r\n  Range (min … max):   28416.815 s … 28586.361 s    2 runs\r\n```\r\n\r\nWe can serialize the blocks and undos to any `Stream` which implements the appropriate read/write methods.\r\n`AutoFile` is one of these, writing the results \"directly\" to disk (through the OS file cache). Batching these in memory first and reading/writing these to disk is measurably faster (likely because of fewer native fread calls or less locking, as [observed](https://github.com/bitcoin/bitcoin/pull/28226#issuecomment-1666842501) by @martinus in a similar change).\r\n\r\nDifferential flame graphs indicate that the before/after speed change is because of fewer `AutoFile` reads and writes:\r\n![writes](https://github.com/user-attachments/assets/c5e45ddf-3a94-4c5b-999a-94a139d5776d)\r\n![reads](https://github.com/user-attachments/assets/f11982ea-f2dc-4fc6-afce-faa132724658)\r\n</details>\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31144\r\n\r\n<details>\r\n<summary>7.60 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=c5cc54d10187c9cb3a6cba8cc10f652b4f882e2a ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     27394.210 s ± 565.877 s    [User: 54902.315 s, System: 1891.951 s]\r\n  Range (min … max):   26994.075 s … 27794.346 s    2 runs\r\n```\r\n</details>\r\n\r\nCurrent block obfuscations are done byte-by-byte, this PR batches them to 64 bit primitives to speed up obfuscating bigger memory batches.\r\nThis is especially relevant after https://github.com/bitcoin/bitcoin/pull/31551 where we end up with bigger obfuscatable chunks.\r\n\r\n![obfuscation calls during IBD without batching](https://github.com/user-attachments/assets/b521e3fc-f8cd-42d8-9068-a9b23f65b45b)\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31645\r\n\r\n<details>\r\n<summary>7.50 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=9b4be912d20222b3b275ef056c1494a15ccde3f5 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     27019.086 s ± 112.340 s    [User: 54927.344 s, System: 1652.376 s]\r\n  Range (min … max):   26939.649 s … 27098.522 s    2 runs\r\n```\r\n\r\n</details>\r\n\r\nWhen the in-memory UTXO set is [flushed](https://github.com/bitcoin/bitcoin/blob/master/src/txdb.cpp#L130-L133) to LevelDB (after IBD or AssumeUTXO load), it does so in batches to manage memory usage during the flush.\r\nWhile a hidden [-dbbatchsize](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L490) config option exists to modify this value, this PR introduces dynamic calculation of the batch size based on the -dbcache setting. By using larger batches when more memory is available (i.e., higher -dbcache), we can reduce the overhead from numerous small writes, minimize constant overhead per batch, improve I/O efficiency (especially on HDDs), and potentially allow LevelDB to optimize writes more effectively (e.g. by sorting the keys before write).\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/0a99e32e-6a9b-481e-a08a-7216c82fe722\" />\r\n\r\nNote that this PR mainly optimizes a critical section of IBD (memory to disk dump) - even if the effect on overall speed is modest:\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/8b56674b-b3e3-43cf-a19b-574e66948e72\" />\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/ce56cfba-a59f-4360-a6d7-2cc3e74959a3\" />\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e346414c-b009-47c5-92ff-a264b1e2c6c4\" />\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4db30a70-1ca9-401c-8c9c-2ddecd0d7516\" />\r\n\r\n-----\r\n\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31868\r\n\r\n<details>\r\n<summary>7.41 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=817d7ac0767a3984295aa3cf6c961dcc5f29d571 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26711.460 s ± 244.118 s    [User: 54654.348 s, System: 1652.087 s]\r\n  Range (min … max):   26538.843 s … 26884.077 s    2 runs\r\n```\r\n</details>\r\n\r\nThe commits merge similar (de)serialization methods, and separates them internally with if constexpr - similarly to how it has been https://github.com/bitcoin/bitcoin/pull/28203. This enabled further SizeComputer optimizations as well.\r\n\r\nOther than these, since single byte writes are used very often (used for every (u)int8_t or std::byte or bool and for every VarInt's first byte which is also needed for every (pre)Vector), it makes sense to avoid unnecessary generalized serialization infrastructure.\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31682\r\n\r\n<details>\r\n<summary>7.31 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=182745cec4c0baf2f3c8cff2f74f847eac3c4330 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26326.867 s ± 45.887 s    [User: 54367.156 s, System: 1619.348 s]\r\n  Range (min … max):   26294.420 s … 26359.314 s    2 runs\r\n```\r\n</details>\r\n\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/30442\r\n\r\n<details>\r\n<summary>7.25 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=47d377bd0bb88dae6b34553a7789400170e0ccf6 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26084.429 s ± 473.611 s    [User: 54310.780 s, System: 1815.967 s]\r\n  Range (min … max):   25749.536 s … 26419.323 s    2 runs\r\n```\r\n\r\n</details>\r\n\r\nThe in-memory representation of the UTXO set uses [(salted) SipHash](https://github.com/bitcoin/bitcoin/blob/master/src/coins.h#L226) for avoiding key collision attacks.\r\n\r\nHashing a `uint256` key is done so often that a specialized optimization was extracted to [SipHashUint256Extra](https://github.com/bitcoin/bitcoin/blob/master/src/crypto/siphash.cpp#L135). The constant salting operations were already extracted in the [general case](https://github.com/bitcoin/bitcoin/blob/master/src/crypto/siphash.cpp#L20-L23), this PR adjusts the main specialization similarly.\r\n\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/32279\r\n\r\nThe current `prevector` size of 28 bytes (chosen to fill the `sizeof(CScript)` aligned size) was introduced in 2015 (https://github.com/bitcoin/bitcoin/pull/6914) before SegWit and TapRoot.\r\nHowever, the increasingly common P2WSH and P2TR scripts are both 34 bytes, and are forced to use heap (re)allocation rather than efficient inline storage.\r\n\r\nThe core trade-off of this change is to eliminate heap allocations for common 29-36 byte scripts at the cost of increasing the base memory footprint of all `CScript` objects by 8 bytes (while still respecting peak memory usage defined by -dbcache).\r\n\r\n![image](https://github.com/user-attachments/assets/284ce2ab-32b8-4c85-9ada-11aae0e2ff39)\r\n\r\n-----\r\n\r\n## Other similar efforts waiting for reviews or revives (not included in this tracking PR):\r\n* https://github.com/bitcoin/bitcoin/pull/30611 - for very big in-memory caches make sure we still flush to disk regularly (no significant IBD speed change)\r\n* https://github.com/bitcoin/bitcoin/pull/28945 - was meant to preallocate the memory of recreated caches (~6% IBD speedup for small caches)\r\n* https://github.com/bitcoin/bitcoin/pull/31102 - was meant to try to evict entries selectively instead of dropping the whole cache when full\r\n* https://github.com/bitcoin/bitcoin/pull/32128 - draft PR showcasing a few other possible caching speedups\r\n\r\n-----\r\n\r\nThis PR is meant to stay in draft (not meant to be merged directly), to continually change based on comments received here and in the PRs.\r\nComments, reproducers and high-level discussions are welcome here - code reviews should rather be done in the individual PRs.\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-03-12T16:20:16Z",
      "updated_at": "2026-01-14T10:24:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32043",
      "labels": [
        "P2P",
        "Block storage",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 3,
        "positive_keywords": 3,
        "text_length": 21580,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3116637069,
      "number": 34109,
      "title": "refactor: Use uint64_t over size_t for serialize corruption check in fees.dat",
      "body": "Serialization should not behave differently on different architectures. See also the related commit 3789215f73466606eb111714f596a2a5e9bb1933.\r\n\r\nHowever, on fees.dat file corruption, 32-bit builds may run into an unsigned integer overflow and report the wrong corruption reason, or may even silently continue after the corruption.\r\n\r\nThis is a bit hard to reproduce, because 32-bit platforms are rare and most of them don't support running the unsigned integer overflow sanitizer. So the possible options to reproduce are:\r\n\r\n* Run on armhf and manually annotate the code to detect the overflow\r\n* Run on i386 with the integer sanitizer (possibly via `podman run -it --rm --platform linux/i386 'debian:trixie'`)\r\n* Run the integer sanitizer on any 64-bit platform and manually replace type in the affected line by `uint32_t`\r\n\r\nAfterwards, the steps to reproduce are:\r\n\r\n```\r\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y\r\n\r\ncmake -B ./bld-cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero --preset=dev-mode\r\n\r\ncmake --build ./bld-cmake --parallel  $(nproc)\r\n\r\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/policy_estimator_io/607473137013139e3676e30ec4b29639e673fa9b'\r\n\r\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=policy_estimator_io ./bld-cmake/bin/fuzz ./607473137013139e3676e30ec4b29639e673fa9b \r\n```\r\n\r\nThe output will be something like:\r\n\r\n```\r\n/b-c/src/policy/fees/block_policy_estimator.cpp:448:25: runtime error: unsigned integer overflow: 346685954 * 219 cannot be represented in type 'unsigned int'\r\n    #0 0x5b0b1bbe in TxConfirmStats::Read(AutoFile&, unsigned int) /b-c/bld-cmake/src/./policy/fees/block_policy_estimator.cpp:448:25\r\n    #1 0x5b0b7d3f in CBlockPolicyEstimator::Read(AutoFile&) /b-c/bld-cmake/src/./policy/fees/block_policy_estimator.cpp:1037:29\r\n    #2 0x592a9783 in policy_estimator_io_fuzz_target(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/./test/fuzz/policy_estimator_io.cpp:32:32\r\n    #3 0x5896ba8e in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\r\n    #4 0x5896b8eb in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\r\n    #5 0x5896b44b in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\r\n    #6 0x59845c95 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\r\n    #7 0x5983a0da in test_one_input(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\r\n    #8 0x5983cb80 in main /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:271:13\r\n    #9 0xf75aecc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\r\n    #10 0xf75aed87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\r\n    #11 0x58932db6 in _start (/b-c/bld-cmake/bin/fuzz+0x235ddb6) (BuildId: 7d8d83a77923f14e99c0de64acbc5f5bfc2cce9b)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /b-c/src/policy/fees/block_policy_estimator.cpp:448:25 \r\n```\r\n\r\nNote: This is marked a \"refactor\", because the code change does not affect 64-bit builds, and on the still remaining rare 32-bit builds today it is extremely unlikely to happen in production.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T07:18:48Z",
      "updated_at": "2026-01-14T09:26:13Z",
      "merged_at": "2026-01-14T09:18:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34109",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4956,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3135104327,
      "number": 34176,
      "title": "wallet: improve error msg when db directory is not writable",
      "body": "Make wallet creation and load fail with a clear error when the db directory isn’t writable.\r\n\r\n#### 1) For Wallet Creation\r\n\r\nBefore: creating a wallet would return a generic error:\r\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\r\n\r\nAfter: creating a wallet returns:\r\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\r\n\r\n#### 2) For Wallet Loading\r\n\r\nWe currently allow the load of wallets located on non-writable directories. This is problematic\r\nbecause the node crashes on any subsequent write; generating a block is enough to trigger it.\r\nCan be verified just by running the following test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\n\r\n\r\nAlso, to check directory writability, this creates a tmp file rather than relying on the\r\n`permissions()` functions, since perms bits alone may not reliably reflect actual writability\r\nin some systems.\r\n\r\nTesting Note:\r\nPushed the tests in separate commits so they can be cherry-picked on master for comparison.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-12-29T19:44:56Z",
      "updated_at": "2026-01-14T09:25:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34176",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1137,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2976587253,
      "number": 33775,
      "title": "guix: use GCC 14.3.0 over 13.3.0",
      "body": "Switching to using GCC 14.x for release builds has come up multiple times recently. It will eventually be needed for #25573, and could also be useful for #30210.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-04T13:12:58Z",
      "updated_at": "2026-01-14T08:51:18Z",
      "merged_at": "2026-01-13T23:34:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33775",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 194,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1719386983,
      "number": 29415,
      "title": "Broadcast own transactions only via short-lived Tor or I2P connections",
      "body": "_Parts of this PR are isolated in independent smaller PRs to ease review:_\r\n\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/29420_\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/33454_\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/33567_\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/33793_\r\n\r\n---\r\n\r\nTo improve privacy, broadcast locally submitted transactions (from the `sendrawtransaction` RPC) to the P2P network only via Tor or I2P short-lived connections, or to IPv4/IPv6 peers but through the Tor network.\r\n\r\n* Introduce a new connection type for private broadcast of transactions with the following properties:\r\n  * started whenever there are local transactions to be sent\r\n  * opened to Tor or I2P peers or IPv4/IPv6 via the Tor proxy\r\n  * opened regardless of max connections limits\r\n  * after handshake is completed one local transaction is pushed to the peer, `PING` is sent and after receiving `PONG` the connection is closed\r\n  * ignore all incoming messages after handshake is completed (except `PONG`)\r\n\r\n* Broadcast transactions submitted via `sendrawtransaction` using this new mechanism, to a few peers. Keep doing this until we receive back this transaction from one of our ordinary peers (this takes about 1 second on mainnet).\r\n\r\n* The transaction is stored in peerman and does not enter the mempool.\r\n\r\n* Once we get an `INV` from one of our ordinary peers, then the normal flow executes: we request the transaction with `GETDATA`, receive it with a `TX` message, put it in our mempool and broadcast it to all our existent connections (as if we see it for the first time).\r\n\r\n* After we receive the full transaction as a `TX` message, in reply to our `GETDATA` request, only then consider the transaction has propagated through the network and remove it from the storage in peerman, ending the private broadcast attempts.\r\n\r\nThe messages exchange should look like this:\r\n\r\n```\r\ntx-sender >--- connect -------> tx-recipient\r\ntx-sender >--- VERSION -------> tx-recipient (dummy VERSION with no revealing data)\r\ntx-sender <--- VERSION -------< tx-recipient\r\ntx-sender <--- WTXIDRELAY ----< tx-recipient (maybe)\r\ntx-sender <--- SENDADDRV2 ----< tx-recipient (maybe)\r\ntx-sender <--- SENDTXRCNCL ---< tx-recipient (maybe)\r\ntx-sender <--- VERACK --------< tx-recipient\r\ntx-sender >--- VERACK --------> tx-recipient\r\ntx-sender >--- INV/TX --------> tx-recipient\r\ntx-sender <--- GETDATA/TX ----< tx-recipient\r\ntx-sender >--- TX ------------> tx-recipient\r\ntx-sender >--- PING ----------> tx-recipient\r\ntx-sender <--- PONG ----------< tx-recipient\r\ntx-sender disconnects\r\n```\r\n\r\nWhenever a new transaction is received from `sendrawtransaction` RPC, the node will send it to a few (`NUM_PRIVATE_BROADCAST_PER_TX`) recipients right away. If after some time we still have not heard anything about the transaction from the network, then it will be sent to 1 more peer (see `PeerManagerImpl::ReattemptPrivateBroadcast()`).\r\n\r\nA few considerations:\r\n* The short-lived private broadcast connections are very cheap and fast wrt network traffic. It is expected that some of those peers could blackhole the transaction. Just one honest/proper peer is enough for successful propagation.\r\n* The peers that receive the transaction could deduce that this is initial transaction broadcast from the transaction originator. This is ok, they can't identify the sender.\r\n\r\n---\r\n\r\n<details>\r\n<summary>How to test this?</summary>\r\n\r\nThank you, @stratospher and @andrewtoth!\r\n\r\nStart `bitcoind` with `-privatebroadcast=1 -debug=privatebroadcast`.\r\n\r\nCreate a wallet and get a new address, go to the Signet faucet and request some coins to that address:\r\n```bash\r\nbuild/bin/bitcoin-cli -chain=\"signet\" createwallet test\r\nbuild/bin/bitcoin-cli -chain=\"signet\" getnewaddress\r\n```\r\n\r\nGet a new address for the test transaction recipient:\r\n```bash\r\nbuild/bin/bitcoin-cli -chain=\"signet\" loadwallet test\r\nnew_address=$(build/bin/bitcoin-cli -chain=\"signet\" getnewaddress)\r\n```\r\n\r\nCreate the transaction:\r\n```bash\r\n# Option 1: `createrawtransaction` and `signrawtransactionwithwallet`:\r\n\r\ntxid=$(build/bin/bitcoin-cli -chain=\"signet\" listunspent | jq -r '.[0] | .txid')\r\nvout=$(build/bin/bitcoin-cli -chain=\"signet\" listunspent | jq -r '.[0] | .vout')\r\necho \"txid: $txid\"\r\necho \"vout: $vout\"\r\n\r\ntx=$(build/bin/bitcoin-cli -chain=\"signet\" createrawtransaction \"[{\\\"txid\\\": \\\"$txid\\\", \\\"vout\\\": $vout}]\" \"[{\\\"$new_address\\\": 0.00001000}]\" 0 false)\r\necho \"tx: $tx\"\r\n\r\nsigned_tx=$(build/bin/bitcoin-cli -chain=\"signet\" signrawtransactionwithwallet \"$tx\" | jq -r '.hex')\r\necho \"signed_tx: $signed_tx\"\r\n\r\n# OR Option 2: `walletcreatefundedpsbt` and `walletprocesspsbt`:\r\n# This makes it not have to worry about inputs and also automatically sends back change to the wallet.\r\n# Start `bitcoind` with `-fallbackfee=0.00003000` for instance for 3 sat/vbyte fee.\r\n\r\npsbt=$(build/bin/bitcoin-cli -chain=\"signet\" walletcreatefundedpsbt \"[]\" \"[{\\\"$new_address\\\": 0.00001000}]\" | jq -r '.psbt')\r\necho \"psbt: $psbt\"\r\n\r\nsigned_tx=$(build/bin/bitcoin-cli -chain=\"signet\" walletprocesspsbt \"$psbt\" | jq -r '.hex')\r\necho \"signed_tx: $signed_tx\"\r\n```\r\n\r\nFinally, send the transaction:\r\n```bash\r\nraw_tx=$(build/bin/bitcoin-cli -chain=\"signet\" sendrawtransaction \"$signed_tx\")\r\necho \"raw_tx: $raw_tx\"\r\n```\r\n\r\n</details>\r\n\r\n---\r\n\r\n<details>\r\n<summary>High-level explanation of the commits</summary>\r\n\r\n* New logging category and config option to enable private broadcast\r\n  * `log: introduce a new category for private broadcast`\r\n  * `init: introduce a new option to enable/disable private broadcast`\r\n\r\n* Implement the private broadcast connection handling on the `CConnman` side:\r\n  * `net: introduce a new connection type for private broadcast`\r\n  * `net: implement opening PRIVATE_BROADCAST connections`\r\n\r\n* Prepare `BroadcastTransaction()` for private broadcast requests:\r\n  * `net_processing: rename RelayTransaction to better describe what it does`\r\n  * `node: extend node::TxBroadcast with a 3rd option`\r\n  * `net_processing: store transactions for private broadcast in PeerManager`\r\n\r\n* Implement the private broadcast connection handling on the `PeerManager` side:\r\n  * `net_processing: reorder the code that handles the VERSION message`\r\n  * `net_processing: move the debug log about receiving VERSION earlier`\r\n  * `net_processing: modernize PushNodeVersion()`\r\n  * `net_processing: move a debug check in VERACK processing earlier`\r\n  * `net_processing: handle ConnectionType::PRIVATE_BROADCAST connections`\r\n  * `net_processing: stop private broadcast of a transaction after round-trip`\r\n  * `net_processing: retry private broadcast`\r\n\r\n* Engage the new functionality from `sendrawtransaction`:\r\n  * `rpc: use private broadcast from sendrawtransaction RPC if -privatebroadcast is ON`\r\n\r\n* New tests:\r\n  * `test: add functional test for private broadcast`\r\n  * `test: add unit test for the private broadcast storage`\r\n\r\n</details>\r\n\r\n---\r\n\r\n**This PR would resolve the following issues:**\r\nhttps://github.com/bitcoin/bitcoin/issues/3828 Clients leak IPs if they are recipients of a transaction\r\nhttps://github.com/bitcoin/bitcoin/issues/14692 Can't configure bitocoind to only send tx via Tor but receive clearnet transactions\r\nhttps://github.com/bitcoin/bitcoin/issues/19042 Tor-only transaction broadcast onlynet=onion alternative\r\nhttps://github.com/bitcoin/bitcoin/issues/24557 Option for receive events with all networks, but send transactions and/or blocks only with anonymous network[s]?\r\nhttps://github.com/bitcoin/bitcoin/issues/25450 Ability to broadcast wallet transactions only via dedicated oneshot Tor connections\r\nhttps://github.com/bitcoin/bitcoin/issues/32235 Tor: TX circuit isolation\r\n\r\n**Issues that are related, but (maybe?) not to be resolved by this PR:**\r\nhttps://github.com/bitcoin/bitcoin/issues/21876 Broadcast a transaction to specific nodes\r\nhttps://github.com/bitcoin/bitcoin/issues/28636 new RPC: sendrawtransactiontopeer\r\n\r\n---\r\n\r\nFurther extensions:\r\n* Have the wallet do the private broadcast as well, https://github.com/bitcoin/bitcoin/issues/11887 would have to be resolved.\r\n* Have the `submitpackage` RPC do the private broadcast as well, [draft diff in the comment below](https://github.com/bitcoin/bitcoin/pull/29415#pullrequestreview-2972293733), thanks ismaelsadeeq!\r\n* Add some stats via RPC, so that the user can better monitor what is going on during and after the broadcast. Currently this can be done via the debug log, but that is not convenient.\r\n* Make the private broadcast storage, currently in peerman, persistent over node restarts.\r\n* Add (optional) random delay before starting to broadcast the transaction in order to avoid correlating unrelated transactions based on the time when they were broadcast. Suggested independently of this PR [here](https://github.com/bitcoin/bitcoin/issues/30471).\r\n* Consider periodically sending transactions that did not originate from the node as decoy, discussed [here](https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2035414972).\r\n* Consider waiting for peer's FEEFILTER message and if the transaction that was sent to the peer is below that threshold, then assume the peer is going to drop it. Then use this knowledge to retry more aggressively with another peer, instead of the current 10 min. See [comment below](https://github.com/bitcoin/bitcoin/pull/29415#issuecomment-3258611648).\r\n* It may make sense to be able to override the default policy -- eg so submitrawtransaction can go straight to the mempool and relay, even if txs are normally privately relayed. See [comment below](https://github.com/bitcoin/bitcoin/pull/29415#issuecomment-3427086681).\r\n* As a side effect we have a new metric available - the time it takes for a transaction to reach a random node in the network (from the point of view of the private broadcast recipient the tx originator is a random node somewhere in the network). This can be useful for monitoring, unrelated to privacy characteristics of this feature.\r\n\r\n---\r\n\r\n_A previous incarnation of this can be found at https://github.com/bitcoin/bitcoin/pull/27509. It puts the transaction in the mempool and (tries to) hide it from the outside observers. This turned out to be too error prone or maybe even impossible._\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2024-02-09T13:39:10Z",
      "updated_at": "2026-01-14T08:17:44Z",
      "merged_at": "2026-01-12T20:02:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29415",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 10312,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3164894382,
      "number": 34260,
      "title": "contrib: Remove unused functions",
      "body": "* `remove_files` is unused since 5668c6473a01528ac7d66b325b18b1cd2bd93063\r\n* `download_lines_with_urllib` is unused since it was introduced in 37c9fb7a59a3179b90ed1deaebaabb539976504b\r\n* `determine_wellknown_cmd` is unused since 76c090145e9bb64fe4ef6a663723dd0e9028ed10",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-12T08:14:07Z",
      "updated_at": "2026-01-14T07:22:09Z",
      "merged_at": "2026-01-13T23:36:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34260",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 302,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3170627073,
      "number": 34277,
      "title": "rpc: validate transactions in combinerawtransaction are variants",
      "body": "## Summary\n\nThis PR adds validation to ensure all transactions passed to `combinerawtransaction` are actually variants of the same transaction (same inputs and outputs, differing only in signatures).\n\n**Problem:** Previously, passing distinct/unrelated transactions would silently use the first transaction as the base and ignore the structure of others, producing confusing results without any error.\n\n**Solution:** Add explicit validation that checks:\n- All transactions have the same number of inputs\n- All transactions have the same number of outputs  \n- All inputs spend the same outpoints\n- All outputs have the same amounts and scriptPubKeys\n\nNow it throws a clear `RPC_INVALID_PARAMETER` error explaining that all transactions must be variants of the same transaction.\n\nFixes #25980\n\n## Test plan\n\n1. Create two different raw transactions with different inputs/outputs\n2. Call `combinerawtransaction` with both\n3. Verify it now returns an error like: `TX 1 has X inputs, but TX 0 has Y inputs. All transactions must be variants of the same transaction.`\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)",
      "state": "closed",
      "user": "EricGrill",
      "created_at": "2026-01-13T17:36:55Z",
      "updated_at": "2026-01-14T07:06:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34277",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1190,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078106843,
      "number": 34023,
      "title": "Optimized SFL cluster linearization",
      "body": "Follow-up to #32545, part of #30289.\r\n\r\nThis contains many of the optimizations that were originally part of #32545 itself.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-06T20:21:44Z",
      "updated_at": "2026-01-14T06:28:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34023",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 159,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3170621269,
      "number": 34275,
      "title": "doc: add Linux installation instructions for pre-built binaries",
      "body": "## Summary\n\nAdds installation instructions for running pre-built Bitcoin Core binaries on Linux systems. The current documentation lacks guidance for Linux users, unlike Windows and macOS which have self-explanatory installers.\n\n## Problem\n\nThe pre-built binaries don't work out of the box on many Linux distributions because they require xcb libraries that aren't installed by default:\n- `libxcb-xinerama0`\n- `libxcb-cursor0`\n\nUsers encounter errors like \"missing required library\" when trying to run `bitcoin-qt`.\n\n## Changes\n\nAdded to `doc/README.md`:\n- Instructions for installing required libraries on Ubuntu/Debian, Fedora, and Arch Linux\n- Optional system-wide installation command\n- Link to the bitcoin.org full node guide for more details\n\n## References\n\n- https://www.reddit.com/r/BitcoinBeginners/comments/14m8f9q/missing_required_library_to_run_core_on_ubuntu/\n- https://bitcoin.stackexchange.com/questions/122646/libxcb-xinerama0-library-required-by-bitcoin-qt\n\nFixes #32097",
      "state": "closed",
      "user": "EricGrill",
      "created_at": "2026-01-13T17:34:39Z",
      "updated_at": "2026-01-14T05:52:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34275",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1051,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3170631798,
      "number": 34278,
      "title": "devtools: check build options in gen-manpages.py",
      "body": "## Summary\n\nThis PR adds validation to `gen-manpages.py` that checks `test/config.ini` for required build components, as suggested by @laanwj in the issue discussion.\n\n**Problem:** Man pages generated from builds with disabled features (wallet, ZMQ) will be missing documentation for those options, leading to incomplete committed documentation.\n\n**Solution:** The script now checks for:\n- `ENABLE_WALLET` - for wallet-specific options (-wallet, -disablewallet, etc.)\n- `ENABLE_ZMQ` - for ZMQ notification options (-zmqpubhashtx, etc.)\n\nIf components are missing, it prints a warning explaining which options won't be documented and advises not to commit the generated man pages.\n\nExample warning output:\n```\nWARNING: Build is missing components needed for complete man page documentation:\n  - ENABLE_WALLET: wallet-specific options (e.g., -wallet, -disablewallet)\n  - ENABLE_ZMQ: ZMQ notification options (e.g., -zmqpubhashtx)\nMan pages generated from this build should NOT be committed.\nTo generate complete man pages, rebuild with all features enabled.\n```\n\n**Note:** The original issue also mentions `HAVE_SYSTEM` for alertnotify, but this is typically always available on standard builds (checked via cmake introspection for std::system or ::_wsystem). If needed, this could be added by parsing `bitcoin-config.h`, but that would be more complex.\n\nFixes #17506\n\n## Test plan\n\n1. Build Bitcoin Core with wallet disabled: `cmake -B build -DWITH_WALLET=OFF`\n2. Run `contrib/devtools/gen-manpages.py`\n3. Verify warning appears about missing ENABLE_WALLET component\n4. Build with all features enabled and verify no warnings\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)",
      "state": "closed",
      "user": "EricGrill",
      "created_at": "2026-01-13T17:38:45Z",
      "updated_at": "2026-01-14T05:52:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34278",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1736,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1587218477,
      "number": 28792,
      "title": "build: Embedded ASMap [3/3]: Build binary dump header file",
      "body": "Depends on https://github.com/bitcoin/bitcoin/pull/33878. This is the third in a tripled of PRs that implement the necessary changes for embedding of asmap data into the binary. This last part add the initial asmap data, implements the build changes and adds further documentation.\r\n\r\nCurrently an asmap file needs to be acquired by there user from some location or the user needs to generate one themselves. Then they need to move the file to the right place in datadir or pass the path to the file as `-asmap=PATH` in order to use the asmap feature. The change here allows for builds to embed asmap data into the bitcoind binary which makes it possible to use the feature without handling of the asmap file by the user. If the user starts bitcoind with `-asmap` the embedded data will be used for bucketing of nodes.\r\n\r\nThe data lives in the repository at `src/node/data/ip_asn.dat` and can be replaced with a new version at any time. The idea is that the data should be updated with every release. By default the data at that location is embedded into the binary but there is also a build option to prevent this (`-DWITH_EMBEDDED_ASMAP=OFF`). In this case the original behavior of the `-asmap` option is maintained.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2023-11-04T22:13:31Z",
      "updated_at": "2026-01-14T04:05:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28792",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168265902,
      "number": 31252,
      "title": "rpc: print P2WSH and P2SH redem Script in (get/decode)rawtransaction",
      "body": "This PR is motivated by https://github.com/bitcoin/bitcoin/issues/27391.\r\nAnd inspired by a previous PR https://github.com/bitcoin/bitcoin/pull/8849 that proposed something similar. \r\n\r\nThis is an example with a real mainnet transaction (3-5 multisig) and using ``decoderawtransaction`` (also works for ``getrawtransaction 'txid' 2``).\r\n\r\nVerbosity must be set to 2.\r\n\r\n```json\r\n$ bitcoin-cli getrawtransaction 44f5ab666cb9dccef69120fe5b51757a647c1f96882931a9faa0b2b5781ddfd2 2 000000000000000000018fa64b5e32335f7d3ac14b9e5553db20f2909c902c34\r\n{\r\n  \"in_active_chain\": true,\r\n  \"txid\": \"44f5ab666cb9dccef69120fe5b51757a647c1f96882931a9faa0b2b5781ddfd2\",\r\n  \"hash\": \"53836d2a4fb1e14356eac69fe1dad8be5dfd9a1b8101bc8aeb04ea2a320aa398\",\r\n  \"version\": 1,\r\n  \"size\": 382,\r\n  \"vsize\": 192,\r\n  \"weight\": 766,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n    {\r\n      \"txid\": \"d15236206fbe06d6f38505656a2006a9a5a1ddf189a2647750091fd218d59581\",\r\n      \"vout\": 2,\r\n      \"scriptSig\": {\r\n        \"asm\": \"\",\r\n        \"hex\": \"\"\r\n      },\r\n      \"txinwitness\": [\r\n        \"\",\r\n        \"304402204d91eb67d798d071278ea0570973f3488d60c3ec98a611856f6a813b2e35df3202200bb36403ebd2dcc96b236efaf07db4f1da26b1031fc854548634ff44a340dc6601\",\r\n        \"3044022046abaa75082c2d1cdef57f8ef59a0046729220eabe2c2a229d1d592b89ccf1b0022028954703f13d836b1b77acd1eb72639a7a918d756fdd3ddef1d42a28567403ed01\",\r\n        \"522102f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7210333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f2103be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e753ae\"\r\n      ],\r\n      \"witnessScript\": {\r\n        \"asm\": \"2 02f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7 0333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f 03be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e7 3 OP_CHECKMULTISIG\",\r\n        \"desc\": \"multi(2,02f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7,0333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f,03be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e7)#sll5t8hh\",\r\n        \"type\": \"multisig\"\r\n      },\r\n      \"prevout\": {\r\n        ... bla bla bla prev output info ...\r\n        }\r\n      },\r\n      \"sequence\": 4294967293\r\n    }\r\n  ],\r\n  \"vout\": [ ... bla bla bla outputs ...  ],\r\n  \"fee\": 0.00000594,\r\n  \"hex\": \"010000000001018195d518d21f09507764a289f1dda1a5a906206a650585f3d606be6f203652d10200000000fdffffff025b730500000000001976a914381d46badae879d1c6037a03da52074e3914812c88ac38088000000000002200205ab691555ede8432ed7765585edb1c9b285532daf639e3e5ccd4843ff3b04cdf040047304402204d91eb67d798d071278ea0570973f3488d60c3ec98a611856f6a813b2e35df3202200bb36403ebd2dcc96b236efaf07db4f1da26b1031fc854548634ff44a340dc6601473044022046abaa75082c2d1cdef57f8ef59a0046729220eabe2c2a229d1d592b89ccf1b0022028954703f13d836b1b77acd1eb72639a7a918d756fdd3ddef1d42a28567403ed0169522102f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7210333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f2103be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e753ae00000000\",\r\n  \"blockhash\": \"000000000000000000018fa64b5e32335f7d3ac14b9e5553db20f2909c902c34\",\r\n  \"confirmations\": 1,\r\n  \"time\": 1746727602,\r\n  \"blocktime\": 1746727602\r\n}\r\n\r\n```",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2024-11-07T20:39:24Z",
      "updated_at": "2026-01-14T03:09:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31252",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3342,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2511642895,
      "number": 32468,
      "title": "rpc: generateblock to allow multiple outputs",
      "body": "## Generatetomany\r\n\r\nFirst approach was to create a `generatetomany` rpc call. That approach can be seen here https://github.com/polespinasa/bitcoin/pull/3\r\n\r\n## Generateblock\r\nModifies `generateblock` to allow a user to set multiple outputs in the coinbase transaction. If an empty set is provided, the block will be empty. If no set of transactions is provided, the block will mine the mempool. If a set of transactions is provided only that set of txs will be mined.\r\n\r\n```\r\n$./bitcoin-cli -rpcport=18443 generateblock bcrt1qw6qkj8wtw5hraxwxjp08m4aymkntms3yhqyacj\r\n{\r\n  \"hash\": \"7359a3ed7af0f18f4016e6cb29193bd787a2452c584781135c585d5204b9ec5b\"\r\n}\r\n\r\n$ ./bitcoin-cli -rpcport=18443 generateblock '[\"bcrt1qal6p633hvwz2yp5mav0qy7u2az8gkn2xywnj6v\", \"bcrt1qvr3qgyhw6y0e0zj97v0j5yc40xtpea4wqj0g43\"]'\r\n{\r\n  \"hash\": \"6db028454b26d6667dd6df45be2772844121fb44f86433f6bbfbafa429974684\"\r\n}\r\n\r\n$ ./bitcoin-cli -rpcport=18443 generateblock '[\"bcrt1qal6p633hvwz2yp5mav0qy7u2az8gkn2xywnj6v\", \"bcrt1qvr3qgyhw6y0e0zj97v0j5yc40xtpea4wqj0g43\"]' []\r\n\r\n{\r\n  \"hash\": \"33e2ddc52546ddb0edf28bef5b295ee8fbd487b8aca19c97018467e2477877df\"\r\n}\r\n\r\n```\r\n\r\n### Motivation\r\nhttps://x.com/SuperTestnet/status/1921220086645342550\r\n\r\nCitating @supertestnet \r\n> When mining a block on regtest, the command \"generatetoaddress\" is available if you want to send the entire coinbase to 1 address. Let's add generatetomany in case you want to split up the coinbase among multiple addresses, similar to how the \"sendtoaddress\" and \"sendmany\" commands both exist and let you send money to (1) one address or (2) multiple addresses. The generatetomany command would be particularly useful for simulating protocols that send money to multiple recipients directly from a coinbase, as several pools do now, like ocean and braidpool.\r\n\r\n### Notes\r\n- ~Needs release note~\r\n- ~Changes on `generateblock` are not backwards compatible as now it takes an array of outputs instead a single output. This should not be critical as it is a test RPC.~ ",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-05-10T17:34:29Z",
      "updated_at": "2026-01-14T01:09:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32468",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2041,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3161130502,
      "number": 34244,
      "title": "test: Prevent loop from running out of utxos in bip68 test",
      "body": "This tries to fix #34205\r\n\r\nI stared at the test code quite a bit and initially suspected some `MiniWallet` internals to be the issue but I think that was the wrong direction and there is simply a very small chance that the loop in `test_sequence_lock_confirmed_inputs` runs out of available utxos: We are starting out with 200-250 utxos and run the loop 400 times. If a transaction is accepted it could have up to 10 inputs but it always has only one output, so the pool is depleting in this case. And it's actually even worse because the output produced is not recognized as spendable by the `MiniWallet` because it is not using the correct output script. However, only a small fraction of transactions are actually accepted, which is why this issue almost never occurs. I did some extra printing and usually we end up with >100 utxos still available by the end of the test. But there is a small chance that too many transactions are accepted and then we can run out of utxos.\r\n\r\nI considered two fixes: The first was a break at the beginning of the loop `if available_utxos == 0: break`, this would work fine but I went with the second option: Simply creating the output with the correct output script so that `MiniWallet` recognizes it as spendable. This minimal replentishment of available utxos ensures that at worst we should get a few 1 input, 1 ouput transactions by the end but we should never run out of available utxos. I didn't look back in history but I suspect that this is how it was intended before `MiniWallet` introduced.\r\n\r\nAlso moves the `random` import in the same function to the top of the file.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2026-01-09T23:08:10Z",
      "updated_at": "2026-01-13T23:30:08Z",
      "merged_at": "2026-01-13T23:30:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34244",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1678,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3154145737,
      "number": 34224,
      "title": "init: Return EXIT_SUCCESS on interrupt",
      "body": "Reported by dergoegge on irc.\r\n\r\nAn interrupt does not create a failure exit code during normal operation. This should also be the case when interrupt is triggered during initialization. However a failure exit code is currently returned if an interrupt occurs during init. Fix this by making `AppInitMain` return true instead of false on interrupt, which further up the call stack currently sets the `EXIT_FAILURE` code. Also add a check for the interrupt condition during GUI startup. Returning `EXIT_SUCCESS` seems to be the usual behaviour for daemons, see the discussion on IRC for this: https://www.erisian.com.au/bitcoin-core-dev/log-2026-01-08.html#l-146 .\r\n\r\nBest reviewed with `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-01-07T22:24:55Z",
      "updated_at": "2026-01-13T23:23:28Z",
      "merged_at": "2026-01-13T23:23:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34224",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 788,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3161267008,
      "number": 34246,
      "title": "verify-commits: Allow specific commits to allow sha1",
      "body": "Allow specific commits to not require the sha1 check.\r\n\r\nFixes the CI for aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9 which uses SHA1 somewhere in the key's self signatures.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-10T00:29:36Z",
      "updated_at": "2026-01-13T23:02:44Z",
      "merged_at": "2026-01-13T23:02:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34246",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 223,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134156084,
      "number": 34168,
      "title": "qa: Require `--exclude` for each excluded test",
      "body": "This PR allows a long `--exclude ...` argument in the `test/functional/test_runner.py` invocation to be split across multiple lines, with optional per-line explanatory comments. I found this useful for the CI scripts in https://github.com/hebasto/bitcoin-core-nightly.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-29T11:02:05Z",
      "updated_at": "2026-01-13T22:42:30Z",
      "merged_at": "2026-01-13T22:41:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34168",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 315,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3124280596,
      "number": 34141,
      "title": "miniscript: Use Func and Expr when parsing keys, hashes, and locktimes",
      "body": "The miniscript parser currently only looks for the next `)` when parsing key, hash, and locktime expressions. This fails to parse when the expressions contain a nested expression. Currently, this is only possible with `musig()` inside of key expressions. However, this pattern can be generalized to handling hashes and locktimes, so I implemented those too.\r\n\r\nFixes #34076",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-12-22T21:36:58Z",
      "updated_at": "2026-01-13T21:23:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34141",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163940035,
      "number": 34256,
      "title": "test: support `get_bind_addrs` and `feature_bind_extra` on macOS",
      "body": "### Problem\r\n\r\nSome functional tests are shown as skipped when running on macOS because `test_framework/netutil.py` only implemented the Linux-specific logic for checking which TCP sockets a node is listening on.\r\n\r\n### Fix\r\n\r\nAdd macOS implementations in `test/functional/test_framework/netutil.py` so tests can query:\r\n\r\n* which TCP sockets a node is listening on (`get_bind_addrs()`, via `lsof`)\r\n* a non-loopback interface address (`all_interfaces()`, via `ifconfig`)\r\n\r\nThen enable the previously Linux-only tests by switching to a shared platform guard.\r\n\r\n### Commands\r\n<details>\r\n<summary><code>get_bind_addrs()</code> (<code>lsof</code> + regex)</summary>\r\n\r\n> Command used\r\n```bash\r\nlsof -nP -a -p <pid> -iTCP -sTCP:LISTEN -Ftn\r\n```\r\n\r\n> Flags\r\n\r\n- -n: no hostname resolution\r\n- -P: no service/port-name resolution\r\n- -a: AND all conditions\r\n- -p <pid>: filter by process ID\r\n- -iTCP: TCP sockets only\r\n- -sTCP:LISTEN: listening sockets only\r\n- -Ftn: machine-readable output (fields: type t, name n)\r\n\r\n> Regex parser\r\n\r\n```regex\r\nt(IPv[46])\\nn(\\*|\\[.+?]|[^:]+):(\\d+)\r\n```\r\n> Captured groups\r\n\r\n- group 1: IPv4 / IPv6 (used to disambiguate *)\r\n- group 2: host (*, [::1], 127.0.0.1, …)\r\n- group 3: port\r\n</details>\r\n\r\n<details>\r\n<summary><code>all_interfaces()</code> (<code>ifconfig</code> + regex)</summary>\r\n\r\n> Command used\r\n\r\n```bash\r\nifconfig -au\r\n```\r\n\r\n> Regex parsing\r\n\r\nInterface blocks:\r\n```regex\r\n(?m)^(?P<iface>\\S+):(?P<block>[^\\n]*(?:\\n[ \\t]+[^\\n]*)*)\r\n```\r\n\r\nIPv4 extraction within each block:\r\n```regex\r\ninet (\\S+)\r\n```\r\n</details>\r\n\r\n### Notes\r\n\r\nThe only remaining platform skips on macOS are the USDT/BPF tracing tests (interface_usdt_*.py).\r\n\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-11T21:42:11Z",
      "updated_at": "2026-01-13T20:05:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34256",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1738,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3039837291,
      "number": 33936,
      "title": "mining: pass missing context to createNewBlock() and checkBlock()",
      "body": "Adding a `context` parameter ensures that these methods are run in their own thread and don't block other calls.\r\n\r\nFor `createNewBlock()` this is not expected to have much impact, because block template creation is fast.\r\n\r\nFor `checkBlock()` this ensures that if we receive a slow to validate block from an untrusted origin (the IPC connection itself is assumed to trusted), it will not block the IPC server. But since validation itself blocks `cs_main` this is also not a huge performance win.\r\n\r\nThis is a breaking change both ways:\r\n- clients must use the updated capnp file\r\n- updated clients can't call these methods on an unupgraded node\r\n\r\n---\r\n\r\nBecause it's a breaking change, but not really important, this PR is marked pending some other more important breaking change. See #33777.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-24T12:36:43Z",
      "updated_at": "2026-01-13T19:54:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33936",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 860,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3107664562,
      "number": 34083,
      "title": "Add initial vectorized chacha20 implementation for 2-3x speedup",
      "body": "Exploit modern simd to calculate 2/4/6/8/16 states at a time depending on the size of the input.\r\n\r\nThis demonstrates a 2x speedup on x86-64 and 3x for arm+neon. Platforms which require runtime detection (avx2/avx512) improve performance even further, and will come as a follow-up.\r\n\r\nRather than hand-writing assembly or using arch-specific intrinsics, this is written using compiler built-ins understood by gcc and clang.\r\n\r\nIn practice (at least on x86_64 and armv8), the compilers are able to produce assembly that's not much worse than hand-written.\r\n\r\nThis means that every architecture can benefit from its own vectorized instructions without having to write/maintain an implementation for each one. But because each will vary in ability to exploit the parallelism, we allow (via ifdefs) each architecture to opt-out of some or all multi-state calculation at compile-time..\r\n\r\nHere, as a starting point, x86-64 and arm+neon have been defined based on local benchmarks.\r\n\r\nLocal profiling revealed that chacha20 accounts for a substantial amount of the network thread's time. It's not clear to me if speeding up chacha20 will improve network performance/latency, but it will definitely make it more efficient.\r\n\r\nThis is part 1 of a series of PR's for chacha20. I think it makes sense to take a look at the generic implementation and tune the architecture-specific defines for parallel blocks before adding the runtime-dependent platforms.\r\n\r\nMy WIP branch which includes avx2/avx512 can be seen here: https://github.com/theuni/bitcoin/commits/chacha20-vectorized/\r\n\r\nI've been hacking on this for quite a while, trying every imaginable tweak and comparing lots of resulting asm/ir. I'm happy to answer any questions about any choices made which aren't immediately obvious.\r\n\r\nEdit: some more impl details:\r\n\r\nI wrestled with gcc/clang a good bit, tweaking something and comparing the generated code output. A few things I found, which may explain some of the decisions I made:\r\n\r\n- gcc really wanted to inline some of the helpers, which comes at a very substantial performance cost due to register clobbering (and with avx2, `vzeroupper`). Hence, all helpers are decorated with `ALWAYS_INLINE`.\r\n- gcc/clang do well with the vec256 loads/stores with minimal fussing. Though loading each element with `[]` is clumsy and verbose, it avoids compiler-specific layout assumptions. Other things I tried (which produced the same asm):\r\n  - casting directly to `using unaligned_vec256 __attribute__((aligned (1))) = vec256`\r\n  - memcpy into ^^\r\n  - clang's `__builtin_masked_load`\r\n- Loop unrolling was hit-or-miss without `#pragma GCC unroll n`, and I tried to avoid macros for loops, hence the awkward recursive inline template loops. But in practice, I see those unrolled 100% of the time.\r\n- I used `std::get` in the helpers for some extra compile-time safety (this actually pointed out some off-by-one's that would've been annoying to track down)\r\n- I avoided using any lambdas or classes for fear of compilers missing obvious optimizations\r\n- All `vec256` are passed by reference to avoid an annoying clang warning about returning a vector changing the abi (this is specific to x86 when not compiling with `-avx`). Even though our functions are all inlined, I didn't see any harm in making that adjustment.",
      "state": "open",
      "user": "theuni",
      "created_at": "2025-12-16T20:42:37Z",
      "updated_at": "2026-01-13T19:34:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34083",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 3375,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3166250753,
      "number": 34264,
      "title": "fuzz: Extend `spend` coverage",
      "body": "Make the `wallet/spend` fuzz target stateful and extend coverage for several missing methods.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2026-01-12T15:12:26Z",
      "updated_at": "2026-01-13T17:45:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34264",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 123,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2955799270,
      "number": 33723,
      "title": "chainparams: remove dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us",
      "body": "The DNS seed `dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us.` is not returning a representative sample of bitcoin nodes. It currently returns nothing later than 28.1.0, breaching the policy.\r\n\r\nThis PR removes that seed from the list of DNS seeds\r\n\r\n### Rationale\r\n\r\nThe [policy for seeds](https://github.com/bitcoin/bitcoin/blob/master/doc/dnsseed-policy.md) includes this:\r\n\r\n> The DNS seed results must consist exclusively of fairly selected and functioning Bitcoin nodes from the public network\r\n\r\nA number of comments below, in response to this PR, include apparent breaches of this policy: [1](https://github.com/bitcoin/bitcoin/pull/33723#issuecomment-3458071231) [2](https://github.com/bitcoin/bitcoin/pull/33723#issuecomment-3457655364), [3](https://github.com/bitcoin/bitcoin/pull/33723#issuecomment-3457712557), in particular the first linked comment ([1](https://github.com/bitcoin/bitcoin/pull/33723#issuecomment-3458071231)) comparing the distribution at this seed to other seeds. This seed is not including anything later than 28.2.0, breaching this policy.\r\n\r\nTo ensure the policy is followed, and the seeds include a representative sample of Bitcoin nodes, this PR removes this seed from the list\r\n\r\n### Data\r\n\r\nI ran this:\r\n```\r\n# Get some ip address from that seed:\r\n# Repeated multiple times, to get many different IPs:\r\ndig +short dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us >> dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us\r\n# For each distinct ip gathered from the seed, get basic info about the node, including it's User Agent string:\r\ncat dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us | sort -u | while read ip; do echo ===; echo $ip; nmap -p 8333 --script bitcoin-info \"$ip\"; done > seed_versions.txt\r\n```\r\n\r\nand then summarized the agents with `egrep 'User Agent' seed_versions.txt  | sort | uniq -c` and got:\r\n```\r\n      1   User Agent: /Satoshi:22.0.0/\r\n      1   User Agent: /Satoshi:22.1.0/\r\n      5   User Agent: /Satoshi:24.0.1/\r\n      1   User Agent: /Satoshi:25.1.0/\r\n     30  User Agent: /Satoshi:27.0.0/\r\n      1   User Agent: /Satoshi:27.1.0/\r\n      1   User Agent: /Satoshi:27.1.0/Knots:20240801/\r\n      1   User Agent: /Satoshi:28.0.0/\r\n      7   User Agent: /Satoshi:28.1.0/\r\n      2   User Agent: /Satoshi:28.1.0/Knots:20250305/\r\n\r\n```",
      "state": "closed",
      "user": "SatsAndSports",
      "created_at": "2025-10-28T15:53:59Z",
      "updated_at": "2026-01-13T17:11:15Z",
      "merged_at": "2025-12-04T16:44:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33723",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2334,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154448671,
      "number": 34227,
      "title": "guix: Fix `osslsigncode` tests",
      "body": "This PR aims to improve the experience for Guix builders when creating new Guix profiles after 2025. In particular, it should be helpful for those who are new to building with Guix.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34220.\r\n\r\nOther possible alternatives to consider include:\r\n1. Applying a workaround as suggested [here](https://github.com/bitcoin/bitcoin/issues/34220#issuecomment-3718991398).\r\n\r\n2. Updating the package as suggested [here](https://github.com/bitcoin/bitcoin/issues/34220#issuecomment-3719022287).\r\n\r\n3. Disabling tests as suggested [here](https://github.com/bitcoin/bitcoin/issues/34220#issuecomment-3719538660).",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-08T01:41:56Z",
      "updated_at": "2026-01-13T17:11:03Z",
      "merged_at": "2026-01-09T11:11:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34227",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 679,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3166772862,
      "number": 34265,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Niharikajakkula",
      "created_at": "2026-01-12T17:51:56Z",
      "updated_at": "2026-01-13T15:47:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34265",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2988877111,
      "number": 33819,
      "title": "mining: getCoinbase() returns struct instead of raw tx",
      "body": "The first commit renames `getCoinbaseTx()` to `getCoinbaseRawTx()` to reflect that it returns a serialised transaction. This does not impact IPC clients, because they do not use the function name.\r\n\r\nThe second commit then introduces a replacement `getCoinbase()` that provides a struct with everything clients need to construct a coinbase. This avoids clients having to parse and manipulate our dummy transaction.\r\n\r\nDeprecate but don't remove `getCoinbaseRawTx()`, `getCoinbaseCommitment()` and `getWitnessCommitmentIndex()`.\r\n\r\nAfter this change we can drop these deprecated methods, which in turn would allow us to clear the dummy transaction from the `getBlock()` result. But that is left for a followup to keep this PR focussed. See https://github.com/Sjors/bitcoin/pull/106 for an approach.\r\n\r\nExpand the `interface_ipc.py` functional test to document its usage.\r\n\r\nCan be tested using:\r\n- https://github.com/stratum-mining/sv2-tp/pull/59",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-07T14:30:41Z",
      "updated_at": "2026-01-13T15:19:19Z",
      "merged_at": "2026-01-13T13:02:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33819",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1000,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2982372791,
      "number": 33795,
      "title": "test: Ignore error message give from python because of PYTHON_GIL",
      "body": "### Description\r\nI was able to reproduce this issue https://github.com/bitcoin/bitcoin/issues/33582\r\nWe should ignore the warning message if `PYTHON_GIL` is not set, instead of the test being abruptly stopped\r\n\r\n### When `PYTHON_GIL` is `0` or `1` or not set\r\n```\r\nPYTHON_GIL=1 ./build_dev_mode/test/functional/test_runner.py interface_ipc.py\r\nor \r\nPYTHON_GIL=0 ./build_dev_mode/test/functional/test_runner.py interface_ipc.py\r\nor\r\n./build_dev_mode/test/functional/test_runner.py interface_ipc.py\r\n\r\nTemporary test directory at /tmp/test_runner_₿_🏃_20251105_180523\r\nWARNING! There is already a bitcoind process running on this system. Tests may fail unexpectedly due to resource contention!\r\nRemaining jobs: [interface_ipc.py]\r\n1/1 - interface_ipc.py passed, Duration: 13 s\r\n\r\nTEST             | STATUS    | DURATION\r\n\r\ninterface_ipc.py | ✓ Passed  | 13 s\r\n\r\nALL              | ✓ Passed  | 13 s (accumulated)\r\nRuntime: 13 s\r\n```",
      "state": "open",
      "user": "kevkevinpal",
      "created_at": "2025-11-05T23:13:29Z",
      "updated_at": "2026-01-13T13:17:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33795",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 994,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3138438378,
      "number": 34184,
      "title": "mining: add cooldown to createNewBlock() immediately after IBD",
      "body": "At startup `isInitialBlockDownload()` stops returning true once there’s less than a day of blocks left to sync. Connected mining clients will receive a flood of new templates as these last blocks are connected.\r\n\r\nFix this by briefly pausing block template creation while the best header chain is ahead of the tip. If no tip update happens for one second, we stop waiting.\r\n\r\nIt's not safe to keep waiting, because a malicious miner could announce a header and delay revealing the block, causing all other miners using this software to stall.\r\n\r\nThe cooldown only applies to `createNewBlock()`, which is typically called once per connected client; `waitNext()` remains unchanged.\r\n\r\nFixes #33994\r\n\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-31T05:17:32Z",
      "updated_at": "2026-01-13T13:12:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34184",
      "labels": [
        "Mining",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 762,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3152436690,
      "number": 34219,
      "title": "psbt: validate pubkeys in MuSig2 pubnonce/partial sig deserialization",
      "body": "The previous fix for invalid MuSig2 pubkeys (bitcoin/bitcoin#34010) only\r\naddressed the PSBT_IN_MUSIG2_PARTICIPANT_PUBKEYS field. However, the\r\nPSBT_IN_MUSIG2_PUB_NONCE and PSBT_IN_MUSIG2_PARTIAL_SIG fields also\r\ndeserialize pubkeys without validation, which could lead to crashes when\r\ninvalid pubkeys are processed.\r\n\r\nThis commit adds validation to the DeserializeMuSig2ParticipantDataIdentifier\r\nfunction to ensure all pubkeys in MuSig2 pubnonce and partial signature\r\nfields are fully valid elliptic curve points.\r\n\r\nThe fix:\r\n- Validates both aggregate and participant pubkeys in MuSig2 pubnonce and\r\n  partial signature deserialization\r\n- Throws std::ios_base::failure with descriptive error messages for invalid\r\n  pubkeys\r\n- Prevents potential crashes from invalid elliptic curve points\r\n- Maintains backward compatibility for valid PSBTs\r\n\r\nThis completes the fix for issues [#33999](https://github.com/bitcoin/bitcoin/issues/33999) and [#34201](https://github.com/bitcoin/bitcoin/issues/34201).",
      "state": "open",
      "user": "tboy1337",
      "created_at": "2026-01-07T12:41:30Z",
      "updated_at": "2026-01-13T13:10:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34219",
      "labels": [
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1075,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2571509113,
      "number": 32685,
      "title": "wallet: Allow read-only database access for info and dump commands",
      "body": "## Problem\r\n\r\nFixes #29559\r\n\r\nThe `bitcoin-wallet info` and `bitcoin-wallet dump` commands currently fail when wallet files are write-protected, throwing \"Database opened in readonly mode but read-write permissions are needed\" errors. This prevents users from safely inspecting write-protected wallet files, which is important for:\r\n\r\n- Security-conscious setups where wallets are stored on read-only filesystems\r\n- Forensic analysis of wallet files without risk of modification\r\n- Backup verification without accidentally corrupting wallet data\r\n- Compliance with principle of least privilege (read-only operations should only require read access)\r\n\r\n## Solution\r\n\r\nThis PR adds comprehensive read-only database support to enable `bitcoin-wallet info` and `dump` commands to work with write-protected wallet files.\r\n\r\n### Key Changes\r\n\r\n**Database Layer (`src/wallet/db.h`, `src/wallet/sqlite.h`, `src/wallet/sqlite.cpp`)**\r\n- Add `read_only` boolean option to `DatabaseOptions` structure  \r\n- Add `IsReadOnly()` virtual method to `WalletDatabase` interface\r\n- Modify `SQLiteDatabase` to properly handle read-only mode:\r\n  - Use `SQLITE_OPEN_READONLY` flag when `read_only=true`\r\n  - Skip write operations (pragma settings, table creation) in read-only mode\r\n  - Maintain full read capability for queries and data retrieval\r\n\r\n**Wallet Tool (`src/wallet/wallettool.cpp`)**\r\n- Update `bitcoin-wallet info` command to use `options.read_only = true`\r\n- Update `bitcoin-wallet dump` command to use `options.read_only = true`\r\n\r\n**Wallet Loading (`src/wallet/walletdb.cpp`)**\r\n- Enhance `LoadWallet()` to detect read-only mode via `database.IsReadOnly()`\r\n- Skip version updates and other write operations when in read-only mode\r\n- Prevent \"Wallet corrupted\" errors during read-only access\r\n\r\n**Legacy Support (`src/wallet/migrate.h`)**\r\n- Add `IsReadOnly()` method to `BerkeleyRODatabase` for consistency\r\n\r\n## Testing\r\n\r\nThe implementation has been thoroughly tested:\r\n\r\n### Manual Testing\r\n- ✅ Created test wallets and made them read-only (`chmod 444`)\r\n- ✅ Verified `bitcoin-wallet info` works with read-only files\r\n- ✅ Verified `bitcoin-wallet dump` works with read-only files\r\n- ✅ Confirmed identical output between read-write and read-only access\r\n- ✅ Verified normal read-write operations remain unaffected\r\n\r\n### Unit Tests\r\nAll existing wallet tests continue to pass, confirming no regression in normal wallet operations.\r\n\r\n### Safety Verification\r\n- File permissions are respected (no writes attempted on read-only files)\r\n- Data integrity maintained (read-only access produces identical results)\r\n- Backwards compatibility preserved (existing workflows unaffected)\r\n\r\n## Security Considerations\r\n\r\nThis change **improves** security by:\r\n- Enabling inspection of wallet files without write access (principle of least privilege)\r\n- Preventing accidental wallet corruption during read-only operations\r\n- Supporting secure forensic analysis workflows\r\n- Reducing attack surface for read-only operations\r\n\r\nThe implementation is conservative and safe:\r\n- Only affects explicitly read-only operations (`info` and `dump` commands)\r\n- No changes to consensus or validation logic\r\n- No impact on normal wallet operations\r\n- Uses SQLite's built-in read-only mode for safety\r\n\r\n## Backwards Compatibility\r\n\r\nFull backwards compatibility is maintained:\r\n- Existing wallet operations work identically\r\n- No API changes for normal use cases  \r\n- No changes to wallet file formats\r\n- No impact on other Bitcoin Core components\r\n\r\n## Related Work\r\n\r\nThis builds upon existing read-only database patterns in Bitcoin Core, particularly the `BerkeleyRODatabase` class used for wallet migration scenarios. \r\n\r\n#28116 ",
      "state": "open",
      "user": "PeterWrighten",
      "created_at": "2025-06-05T20:36:09Z",
      "updated_at": "2026-01-13T13:01:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32685",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 3773,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1276577083,
      "number": 27260,
      "title": "Enhanced error messages for invalid network prefix during address parsing.",
      "body": "# Improve Address Decoding Error Messages\r\n\r\n## Issue\r\n\r\n`DecodeDestination` does not properly handle errors when a user inputs a valid address for the wrong network (e.g., a testnet address while running the client on mainnet).\r\n\r\nThe previous error messages were misleading. For example, \"Invalid or unsupported Segwit (Bech32) or Base58 encoding\" was displayed for a valid Bech32 address on a different network. This occurred because the `is_bech32` variable only checked if the prefix matched the current network's HRP. If it didn't match, the code would fall through to Base58 decoding logic regardless of whether the string was actually a valid Bech32 address.\r\n\r\n## Solution\r\n\r\n### Implementation Approach\r\n\r\n1. **Decode first, then validate**: Instead of checking the prefix before decoding, we now decode the string using `bech32::Decode(str)` upfront. This takes minimal CPU cycles and is acceptable since address validation is not a frequent operation.\r\n\r\n2. **Gather decoding information**: After Bech32 decoding, we also attempt `DecodeBase58` (with a length of 100) and `DecodeBase58Check`. This provides enough information to properly diagnose errors.\r\n\r\n3. **Provide network-aware error messages**: When an address has an invalid prefix, the error message now includes the expected network values.\r\n\r\n### Changes Made\r\n\r\n#### 1. Add Base58 Encoded Prefixes to ChainParams (`src/kernel/chainparams.cpp`, `src/kernel/chainparams.h`)\r\n\r\n#### 2. Refactor Address Decoding Logic (`src/key_io.cpp`)\r\n\r\n- Decode Bech32 upfront using `bech32::Decode(str)` instead of checking prefix first\r\n- Use structured bindings for cleaner code: `auto [bech32_encoding, bech32_hrp, bech32_chars] = bech32::Decode(str)`\r\n- Improved error handling flow with clearer branching\r\n\r\n#### 3. Improved Error Messages\r\n\r\n| Scenario | Previous Error | New Error |\r\n|----------|---------------|-----------|\r\n| Base58 address with wrong prefix | \"Invalid or unsupported Base58-encoded address.\" | \"Invalid Base58 address. Expected prefix 3, or 1\" |\r\n| Bech32 address with wrong HRP | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid or unsupported prefix for Segwit (Bech32) address (expected bc, got tb)\" |\r\n| Invalid Base58 checksum | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid checksum or length of Base58 address (P2PKH or P2SH)\" |\r\n| Ambiguous invalid address | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Address is not valid Base58 or Bech32\" |\r\n| Bech32 with checksum error | N/A | \"Bech32 address decoded with error: Invalid Bech32 checksum\" |\r\n\r\n#### 4. Test Updates\r\n\r\n- Added `test/functional/data/rpc_validateaddress.json` with comprehensive test vectors for both mainnet and signet\r\n- Updated `test/functional/rpc_validateaddress.py` to use data-driven testing across multiple networks\r\n- Updated `test/functional/rpc_invalid_address_message.py` with new error message expectations\r\n\r\n### Consistency Improvements\r\n\r\n- Removed inconsistent periods at the end of some error messages\r\n- Changed \"Bech32 v0\" to \"SegWit v0\" for clarity\r\n\r\n## Reference\r\n\r\n- Issue: #26290\r\n",
      "state": "open",
      "user": "portlandhodl",
      "created_at": "2023-03-15T10:17:16Z",
      "updated_at": "2026-01-13T12:55:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27260",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 3213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 112846431,
      "number": 10102,
      "title": "Multiprocess bitcoin",
      "body": "<!-- begin based-on -->\n**This is based on #29409.** The non-base commits are:\n\n- [`93f471464dd` test: Increase feature_block.py and feature_taproot.py timeouts](https://github.com/bitcoin/bitcoin/pull/10102/commits/93f471464dda67bf59ec474979e5e04989616ff2)\n- [`9c2f8ce25b2` test: Fix multiprocess test for unclean shutdown on kill](https://github.com/bitcoin/bitcoin/pull/10102/commits/9c2f8ce25b263eddcd5e33986626e98d5f391430)\n- [`3582e4a12a3` util: Add util::Result workaround to be compatible with libmultiprocess](https://github.com/bitcoin/bitcoin/pull/10102/commits/3582e4a12a341376e0fcb1d67cda5cc510bb1ae9)\n- [`f1d2d87c6d8` multiprocess: Add capnp serialization code for bitcoin types](https://github.com/bitcoin/bitcoin/pull/10102/commits/f1d2d87c6d87c58749f0f2fb100e184a3ab11303)\n- [`65e4390dcaa` interfaces, refactor: Change WalletLoader::restoreWallet parameter order](https://github.com/bitcoin/bitcoin/pull/10102/commits/65e4390dcaa23ab347a832e3f1ff130650efd2be)\n- [`0e436699c59` multiprocess: Add capnp wrapper for Wallet interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/0e436699c59b537a5948389613dacb5c68fc2872)\n- [`0381cc5dc99` multiprocess: Add capnp wrapper for Node interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/0381cc5dc999795aa1f5bcb77e8d429a9f5221e6)\n- [`88f3246ae7f` multiprocess: Make bitcoin-gui spawn a bitcoin-node process](https://github.com/bitcoin/bitcoin/pull/10102/commits/88f3246ae7f2c0cf79c3f22ba002967dda7a0b16)\n- [`aebc163451b` multiprocess: Make bitcoin-node spawn a bitcoin-wallet process](https://github.com/bitcoin/bitcoin/pull/10102/commits/aebc163451bc8c5fa8cbbcc66b553e17e06e1d82)\n- [`c5b9fe54c9c` multiprocess: Add debug.log .wallet/.gui suffixes](https://github.com/bitcoin/bitcoin/pull/10102/commits/c5b9fe54c9cc367b81487f5c9a4574243e33e7f8)\n- [`a73f70fac8d` doc: Multiprocess misc doc and comment updates](https://github.com/bitcoin/bitcoin/pull/10102/commits/a73f70fac8d396a8d719cafe10853390c53f687b)\n- [`2503f57e93c` combine_logs: Handle multiprocess wallet log files](https://github.com/bitcoin/bitcoin/pull/10102/commits/2503f57e93c32158f837e1c9f0dc9f1061b84346)<!-- end -->\n\n---\n\nThis PR adds an `--enable-multiprocess` configure option which builds new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables with relevant functionality isolated into different processes. See [doc/design/multiprocess.md](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md) for usage details and future plans.\n\nThe change is implemented by adding a new [`Init`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/init.h) interface that spawns new wallet and node subprocesses that can be controlled over a [socketpair](http://man7.org/linux/man-pages/man2/socketpair.2.html) by calling [`Node`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/node.h), [`Wallet`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/wallet.h), and [`ChainClient`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/chain.h) methods. When running with split processes, you can see the IPC messages going back and forth in `-debug=1` output. Followup PR's #19460 and #19461 add `-ipcbind` and `-ipcconnect` options that allow more flexibility in how processes are connected.\n\nThe IPC protocol used is Cap'n Proto, but this could be swapped out for another protocol. Cap'n Proto types and libraries are only accessed in the [src/ipc/capnp/](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/src/ipc/capnp) directory, and not in any public headers or other parts of bitcoin code.\n\nSlides from a presentation describing this change are available on [google drive](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit). Demo code used in the presentation was from an older version this PR (tag [ipc.21](https://github.com/ryanofsky/bitcoin/releases/tag/pr%2Fipc.21), [commits](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21)).\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2017-03-27T21:48:26Z",
      "updated_at": "2026-01-13T12:51:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/10102",
      "labels": [
        "GUI",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4142,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 445592053,
      "number": 19460,
      "title": "multiprocess: Add bitcoin-wallet -ipcconnect option",
      "body": "<!-- begin based-on -->\n**This is based on #29409 + #10102.** The non-base commits are:\n\n- [`5124e765ad6` multiprocess: Add bitcoin-wallet -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19460/commits/5124e765ad63cfa8e6ae2dec27d427e4f9012018)<!-- end -->\n\n---\n\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-wallet` and an `-ipcbind` option to `bitcoin-node` (both enabled by default in multiprocess builds) so bitcoin node will listen on a `<datadir>/sockets/node.sock` unix socket, and `bitcoin-wallet` will connect to it.\n\nThe idea is that `bitcoin-wallet` can be extended in the future to have some online functionality. For example, there could be a `bitcoin-wallet sync` command that will update balances and sync latest transactions to an unloaded wallet, or a `bitcoin-wallet serve` subcommand that loads a wallet and serves RPC requests, or a `bitcoin-wallet shell` subcommand that allows running RPC methods interactively like the GUI console, or just general support for `bitcoin-wallet <rpc method> <rpc params>` invocations suggested https://github.com/bitcoin/bitcoin/pull/13926#issuecomment-455187379.\n\nThis PR is small and doesn't do much. The only visible change is that `bitcoin-wallet` now checks whether a node socket exists on startup and prints \"Connected to IPC address\" if it can connect it it.\n\nThe default `bitcoin-wallet` connect option is `-ipcconnect=auto`, which connects if possible as described above, and proceeds offline if not possible. Other supported options are `-noipcconnect` to disable ipc, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\n\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2020-07-07T18:53:19Z",
      "updated_at": "2026-01-13T12:31:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19460",
      "labels": [
        "Wallet",
        "Build system",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2117,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 445595297,
      "number": 19461,
      "title": "multiprocess: Add bitcoin-gui -ipcconnect option",
      "body": "<!-- begin based-on -->\n**This is based on #29409 + #10102 + #19460.** The non-base commits are:\n\n- [`86eb8268426` multiprocess: Add bitcoin-gui -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19461/commits/86eb826842691ed52057a1aada702a5c1eb7c262)<!-- end -->\n\n---\n\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-gui` that connects the GUI to an existing `bitcoin-node` process already running in the background instead of spawning a new `bitcoin-node` process. This allows the GUI to be started and stopped independently of the node. By default with this change, `bitcoin-gui` will check if a `<datadir>/sockets/node.sock` socket exists and try to connect to that. If that doesn't work, it will spawn a new node process and start up the same way it did before this PR.\n\nThe default `bitcoin-gui` connect option is `-ipcconnect=auto`, which tries to connect if possible as described above, and spawns a new `bitcoin-node` process if not possible. Other supported options are `-noipcconnect` to never connect to an existing node and always spawn a new one, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\n\nWith this PR, basic functionality works and gui instances can connect and disconnect from a running node. But there are rough edges: If a gui process doesn't shut down cleanly, the node can see unhandled IpcExceptions, and if node command line options are passed to `bitcoin-gui` and `bitcoin-gui` connects to an exiting bitcoin-node process instead of spawning a new one, the node options will be silently ignored. \n\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2020-07-07T19:00:11Z",
      "updated_at": "2026-01-13T12:28:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19461",
      "labels": [
        "GUI",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2057,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1004149182,
      "number": 25665,
      "title": "refactor: Add util::Result failure types and ability to merge result values",
      "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/0263614685582fed2290494f5233dbe038fc350c) as an initial application. Followup PRs [#25722](https://github.com/bitcoin/bitcoin/pull/25722) and [#29700](https://github.com/bitcoin/bitcoin/pull/29700) use it more broadly to return errors and warnings from wallet and kernel functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations. See [design notes](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/util::Result-design-notes).\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Comparison with `std::expected`\r\n\r\nCurrently, the `util::Result` class is useful for error reporting—returning translated, user-facing error strings—but not as useful for error handling, where callers need structured failure information to decide how to proceed. By contrast, `std::expected` / `util::Expected` (#34005, #34006) is good for error handling but less helpful for reporting. This PR closes the gap between the two classes.\r\n\r\nWith this PR, `std::expected` remains a good choice for lower-level functions or simple functions that fail in only a few well-defined ways. Meanwhile,\r\n\r\n- `Result` becomes a better choice for operations that can fail in many different ways—loading a wallet, connecting a block, etc.—where callers may want complete error traces, not just low-level errors without context or high-level errors without detail. (Followup [#25722](https://github.com/bitcoin/bitcoin/pull/25722) applies this to wallet-loading functions.) \r\n- `Result` can also be more useful than `expected` when merging status information from multiple calls. (Followup [#29700](https://github.com/bitcoin/bitcoin/pull/29700) uses this to reliably propagate flush and fatal-error status from validation code that can internally trigger flushes or shutdowns.)\r\n- `Result` may also be a better choice than `std::expected` when returning pointer values. (Followup [#26022](https://github.com/bitcoin/bitcoin/pull/26022) adds a `ResultPtr` specialization that avoids double dereferencing.) \r\n- `Result` can be more efficient than `std::expected` when failures are rare but failure objects are large, since failure values are heap-allocated.\r\n\r\nThis PR effectively makes `Result` a superset of `expected`, making the representations compatible and allowing them to be used together.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-21T12:46:09Z",
      "updated_at": "2026-01-13T12:17:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25665",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4045,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167302998,
      "number": 34266,
      "title": "release note: cpfp carveout removed in 31.0",
      "body": "Seems it was overlooked for release notes, so let's add something",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2026-01-12T20:56:46Z",
      "updated_at": "2026-01-13T12:11:29Z",
      "merged_at": "2026-01-12T23:12:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34266",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 109,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163366332,
      "number": 34253,
      "title": "validation: cache tip recency for lock-free `IsInitialBlockDownload()`",
      "body": "### Context\r\nThis PR is a follow-up to the stale #32885.\r\n\r\n### Problem\r\n`ChainstateManager::IsInitialBlockDownload()` currently acquires `cs_main` internally, even though most existing call sites already hold the lock. This becomes relevant for proposals like #34054, which would call `IsInitialBlockDownload()` from the scheduler thread without holding `cs_main`, potentially introducing lock contention.\r\n\r\n### Fix\r\nMake `ChainstateManager::IsInitialBlockDownload()` lock-free by caching its result in a single atomic `m_cached_is_ibd` (true while in IBD, latched to false on exit).\r\nMove the IBD exit checks out of `IsInitialBlockDownload()` (reader-side) into a new `ChainstateManager::UpdateIBDStatus()` (writer-side, called under cs_main).\r\n\r\nCall UpdateIBDStatus() at strategic points where IBD exit conditions may change, after active chain tip updates in `ConnectTip()`, `DisconnectTip()`, and `LoadChainTip()`, and after `ImportBlocks()` returns.\r\n\r\nWith this, `IsInitialBlockDownload()` becomes a lock-free atomic read, avoiding internal `cs_main` acquisition on hot paths.\r\n\r\n### Testing and Benchmarks\r\nThis isn't strictly an optimization - though some usecases might benefit from it -, so rather as a sanity check I ran a reindex-chainstate and an AssumeUTXO load (without background validation).\r\n\r\n<details>\r\n<summary>assumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"595504a43209bead162da54a204df7d140a25f0e 63e822b637f67242e3689adedc0155b34100e651\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-910000.dat\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor DBCACHE in 4500; do \\\r\n  (echo \"assumeutxo load | 910000 blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\";) &&\\\r\n  hyperfine \\\r\n  --sort command \\\r\n  --runs 3 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$DBCACHE-$CC-$(date +%s).json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall -9 bitcoind 2>/dev/null; rm -rf $DATA_DIR/blocks $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git clean -fxd; git reset --hard {COMMIT} && \\\r\n             cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo && ninja -C build bitcoind bitcoin-cli -j2 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 20 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 20\" \\\r\n   --conclude \"build/bin/bitcoin-cli -datadir=$DATA_DIR stop || true; killall bitcoind || true; sleep 10; \\\r\n               echo '{COMMIT} | dbcache=$DBCACHE | chainstate: $(find $DATA_DIR/chainstate_snapshot -type f 2>/dev/null | wc -l) files, $(du -sb $DATA_DIR/chainstate_snapshot 2>/dev/null | cut -f1) bytes' >> $DATA_DIR/debug.log; \\\r\n               cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log\" \\\r\n    \"COMPILER=$CC DBCACHE=$DBCACHE ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n595504a432 Merge bitcoin/bitcoin#34236: Add sedited to trusted-keys\r\n63e822b637 validation: make `IsInitialBlockDownload()` lock-free\r\n\r\nassumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n  Time (mean ± σ):     418.452 s ±  0.461 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   418.070 s … 418.964 s    3 runs\r\n \r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n  Time (mean ± σ):     415.994 s ±  0.294 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   415.788 s … 416.330 s    3 runs\r\n \r\nRelative speed comparison\r\n        1.01 ±  0.00  COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n        1.00          COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>2026-01-12 | reindex-chainstate | 931139 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD</summary>\r\n\r\n```\r\nfor DBCACHE in 4500; do \\                                                                                                                           \r\n  COMMITS=\"595504a43209bead162da54a204df7d140a25f0e 63e822b637f67242e3689adedc0155b34100e651\"; \\\r\n  STOP=931139; CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | SSD\"; echo \"\") &&\\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind -j1 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20; rm -f $DATA_DIR/debug.log\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n\r\n595504a432 Merge bitcoin/bitcoin#34236: Add sedited to trusted-keys\r\n63e822b637 validation: make `IsInitialBlockDownload()` lock-free\r\n\r\n2026-01-12 | reindex-chainstate | 931139 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n  Time (abs ≡):        17187.310 s               [User: 33104.415 s, System: 937.548 s]\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n  Time (abs ≡):        17240.300 s               [User: 33164.803 s, System: 976.485 s]\r\n \r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-11T15:15:32Z",
      "updated_at": "2026-01-13T12:10:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34253",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 8695,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1939750059,
      "number": 30341,
      "title": "Permit Combiner to strip bip32_deriv information",
      "body": "Closes: #30294\r\n\r\nLooking for approach (N)ACK.\r\n\r\nPreviously setting the `bip32derivs` flag to false with the `walletprocesspsbt` RPC correctly does not include `bip32_derivs` for inputs in the PSBT, but does include `bip32_derivs` for outputs.\r\n\r\nUser may want to actively strip all bip32 derivation paths from a PSBT for privacy reasons however. It may make sense to do this after signing your inputs and outputs during a manual coinjoin as demonstrated in the [BIP174 example](https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#manual-coinjoin-workflow).\r\n\r\nTo me, this makes more sense to include in the [`Combiner`](https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#combiner) PSBT role. It's then separated from signing done by the `Signers`. \r\n\r\nTherefore add functionality to `combinepsbt` permitting stripping of **all** `bip32_derivation` paths found in all provided psbts' inputs and outputs.\r\n\r\nAs this RPC can be called with a single PSBT, it can be used to strip derivation paths from a PSBT with any number of participants.\r\n",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2024-06-26T11:01:47Z",
      "updated_at": "2026-01-13T11:17:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30341",
      "labels": [
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1113,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2076876366,
      "number": 30918,
      "title": "fuzz: Add check in `p2p_headers_presync` that chain work never exceeds minimum work",
      "body": "A followup to https://github.com/bitcoin/bitcoin/pull/30661\r\n\r\nThe added assertion just makes sure that the fuzz test is working as intended. If we're sure that the total work of the test chain is never more than minimum chain work, then we can be sure that the later assertion failure would actually mean that a bug in the headers presync logic was found.\r\n\r\nThis PR also addresses:\r\nhttps://github.com/bitcoin/bitcoin/pull/30661#discussion_r1746614616\r\nhttps://github.com/bitcoin/bitcoin/pull/30661#discussion_r1764943665\r\nhttps://github.com/bitcoin/bitcoin/pull/30661#discussion_r1764961991\r\n",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-09-17T17:21:12Z",
      "updated_at": "2026-01-13T10:53:17Z",
      "merged_at": "2024-09-20T18:35:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30918",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 679,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1715098924,
      "number": 29396,
      "title": "rpc: getdescriptorinfo also returns normalized descriptor",
      "body": "This pull request introduces enhancements to the getdescriptorinfo RPC command, specifically by incorporating the functionality to return the `normalized_descriptor` alongside the original `descriptor` information. This improvement addresses the need for a standardized format that facilitates the use of descriptors in public key operations, especially important for scenarios requiring the derivation of addresses without access to private keys.\r\n\r\nRelated issue: https://github.com/bitcoin/bitcoin/issues/29320",
      "state": "closed",
      "user": "leo-aa88",
      "created_at": "2024-02-07T07:41:51Z",
      "updated_at": "2026-01-13T10:53:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29396",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 571,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2106109102,
      "number": 31028,
      "title": "fuzz: Add fuzz-only build mode option for targets",
      "body": "Addresses https://github.com/bitcoin/bitcoin/issues/30950.\r\n\r\nAny targets that require BUILD_ON_FUZZING=ON (currently only `p2p_headers_presync`) to work properly can now set `require_build_for_fuzzing` as an option. If BUILD_FOR_FUZZING is not on and you try to run a target that has this option, then there's a message printed upon exit.\r\n\r\nWith this change, the CI will be able to run the fuzz test runner without any timeouts/failures.\r\n\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-10-03T17:55:51Z",
      "updated_at": "2026-01-13T10:53:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31028",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 499,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2243261746,
      "number": 31537,
      "title": "qa: Limit `-maxconnections` in tests",
      "body": "On systems such as NetBSD, the `bitcoind` typically prints the following warning:\r\n```\r\nWarning: Reducing -maxconnections from 125 to 96, because of system limitations.\r\n```\r\n\r\nThis breaks the functional test framework (see https://github.com/bitcoin/bitcoin/issues/23968).\r\n\r\nThis PR limits the `-maxconnections` to mitigate the issue and enable functional tests on NetBSD.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/23968.\r\n\r\nHere is CI log from the [`bitcoin-core-nightly`](https://github.com/hebasto/bitcoin-core-nightly) repository: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12415868523/job/34663207030",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-18T23:27:38Z",
      "updated_at": "2026-01-13T10:53:15Z",
      "merged_at": "2024-12-30T19:34:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31537",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 671,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2161111715,
      "number": 31213,
      "title": "fuzz: Fix difficulty target generation in `p2p_headers_presync`",
      "body": "In the `p2p_headers_presync` fuzz target, this assertion failed:\r\n```\r\n assert(total_work < chainman.MinimumChainWork());\r\n ```\r\nInput that triggered the failure: [p2ppresync_crash.txt](https://github.com/user-attachments/files/17620203/p2ppresync_crash.txt)\r\n\r\nThe test previously used `ConsumeIntegralInRange` to generate header difficulty targets within a hardcoded range. The fuzzer found specific values in that range that correspond to very low thresholds due to how [`SetCompact`][setcompact-link] works. The total work of a long enough test chain ended up exceeding `MinimumChainWork`.\r\n\r\nFix this by adding a new `ConsumeArithUInt256InRange` helper function and use it in the fuzz test to generate target values within the originally intended range. The target is then converted to an `nBits` value using `GetCompact()`.\r\n\r\nFor some more context, see https://github.com/bitcoin/bitcoin/pull/30918.\r\n\r\n[setcompact-link]: https://github.com/bitcoin/bitcoin/blob/6463117a29294f6ddc9fafecfd1e9023956cc41b/src/arith_uint256.h#L251-L271",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-11-04T15:00:05Z",
      "updated_at": "2026-01-13T10:53:15Z",
      "merged_at": "2024-11-20T11:46:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31213",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1103,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2261853195,
      "number": 31611,
      "title": "doc: upgrade license to 2025.",
      "body": "",
      "state": "closed",
      "user": "kehiy",
      "created_at": "2025-01-06T12:24:13Z",
      "updated_at": "2026-01-13T10:53:14Z",
      "merged_at": "2025-01-10T11:03:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31611",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 30,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2783139679,
      "number": 33268,
      "title": "wallet: Identify transactions spending 0-value outputs, and add tests for anchor outputs in a wallet",
      "body": "One of the ways that the wallet would determine if a transaction was sent from the wallet was by checking if the total amount being spent by a transaction from outputs known to the wallet was greater than 0. This has worked fine until recently since there was no reason for 0-value outputs to be created. However, with ephemeral dust and P2A, it is possible to create standard 0-value outputs, and the wallet was not correctly identifying the spends of such outputs. This PR updates `IsFromMe` to only check whether the wallet knows any of the inputs, rather than checking the debit amount of a transaction.\r\n\r\nAdditionally, a new functional test is added to test for this case, as well as a few other anchor output related scenarios. This also revealed a bug in `sendall` which would cause an assertion error when trying to spend all of the outputs in a wallet that has anchor outputs.\r\n\r\nFixes #33265 ",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-08-28T22:28:48Z",
      "updated_at": "2026-01-13T09:44:45Z",
      "merged_at": "2025-09-12T13:42:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33268",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1004,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2857448557,
      "number": 33475,
      "title": "bugfix: miner: fix `addPackageTxs` unsigned integer overflow",
      "body": "This PR fixes an unsigned integer overflow in the `addPackageTxs` method of the `BlockAssembler`.\r\n\r\nThe overflow is a rare edge case that might occur on master when a miner reserves 2000 WU and wants to create an block to be empty.\r\n\r\ni.e, by starting with `-blockmaxweight=2000`, `-blockreservedweight=2000`, or just `blockmaxweight=2000`, and then calling the mining interface `createNewBlock` with `blockReservedWeight` set to `2000`.\r\n\r\nInstead of bailing out after going through transactions equivalent to `MAX_CONSECUTIVE_FAILURES`, the loop never breaks until all mempool transactions are visited.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/33421#issuecomment-3324859282\r\n\r\nThe fix avoids the overflow by using addition instead adding `BLOCK_FULL_ENOUGH_WEIGHT_DELTA` to the block weight and comparing it with `m_options.nBlockMaxWeight`.\r\n\r\nAnother alternative that preserves the same structure is to use `static_cast`. See https://github.com/bitcoin/bitcoin/pull/33421/commits/c9530cf35d351628eea4992c66fc1df548d1b580.\r\n\r\nThis fix can be tested by cherry-picking the commits from #33421 without the static cast fix and running:\r\n\r\n```bash\r\necho \"AQAAAAAAA\r\nAAnJycnAAAAAAAAAAAAAAAAAA\" | base64 --decode > miner.crash\r\n\r\nFUZZ=block_template_cache ./build_fuzz/bin/fuzz miner.crash\r\n```\r\n\r\n\r\n---\r\n\r\nThis is part of a larger inconsistency in how size/weight is represented in the codebase. It may be worth defining a dedicated type for size/weight.\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-24T15:41:18Z",
      "updated_at": "2026-01-13T09:44:37Z",
      "merged_at": "2025-09-25T12:18:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33475",
      "labels": [
        "Bug"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1521,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2417478258,
      "number": 32138,
      "title": "wallet, rpc: remove settxfee and paytxfee",
      "body": "**Summary**\r\n\r\nThis PR removes the settxfee RPC and paytxfee setting (Bitcoin Core 31.0).\r\nThese two features were deprecated in https://github.com/bitcoin/bitcoin/pull/31278.",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-03-25T18:30:56Z",
      "updated_at": "2026-01-13T09:38:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32138",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3150016853,
      "number": 34211,
      "title": "build: Alt restore cross-compilation for Android",
      "body": "# build, qt, doc: Add Android GUI support and APK packaging\r\n\r\nThis PR restores cross-compilation for Android (previously removed in #30049 and proposed in #32262) and extends it to support the Bitcoin-Qt GUI and Android Application Package (APK) generation.\r\n\r\nUnlike #32262, which focused on restoring the base cross-compilation, this PR provides a complete path to a functional Android application. It achieves this by updating the `depends` system to handle Android-specific requirements (shared Qt libraries, JNI support), integrating `androiddeployqt` into the CMake build system, and providing a standard Android entry point.\r\n\r\n### Alternatives\r\nThis PR is offered as an alternative to #32262. It incorporates and builds upon the `depends` fixes introduced there while adding the necessary components for a full GUI application and automated APK packaging.\r\n\r\n### Key Changes (mostly from #32262)\r\n- **build**: Restored and updated Android cross-compilation support in the `depends` system. This includes handling Android ABIs and mapping them to Bitcoin Core's `HOST` triples.\r\n- **build**: Added APK generation support via a new `apk_package` CMake target. This target automates the generation of `deploy.json` and the execution of `androiddeployqt` to produce ready-to-install `.apk` files.\r\n- **qt**: Added Android-specific GUI configurations, including a Java entry point (`BitcoinQtActivity.java`), high-resolution icons, and a manifest template.\r\n- **doc**: Added `doc/build-android.md` with detailed instructions for setting up the Android SDK/NDK and building the GUI.\r\n- **util**: Added a deduction guide for `util::Overloaded` to ensure compatibility with modern Android C++ toolchains.\r\n- **depends**: Applied several patches to Qt to fix JNI static linking issues and duplicate symbols encountered during Android builds.\r\n\r\n### Testing\r\nThe changes have been tested on Ubuntu 22.04 targeting `x86_64-linux-android` (API level 34) with NDK r26b and Qt 6.7.3. The resulting APK has been verified to install and run correctly on an Android emulator (see screenshot at the bottom).\r\nAlso it has been tested on a real devices with Android 13 (API level 33) for both abis `arm64-v8a` (aarch64) and `armv7a`.\r\n\r\n**Build Example:**\r\n```bash\r\n# Set environment\r\nexport ANDROID_SDK_ROOT=/path/to/Android/Sdk\r\nexport ANDROID_NDK_ROOT=$ANDROID_SDK_ROOT/ndk/26.1.10909125\r\n\r\n# Build dependencies\r\ngmake -C depends HOST=x86_64-linux-android ANDROID_SDK=$ANDROID_SDK_ROOT ANDROID_NDK=$ANDROID_NDK_ROOT ANDROID_API_LEVEL=34 NO_IPC=1  -j$(nproc)\r\n\r\n# Configure and build APK\r\ncmake -G Ninja -B build --toolchain depends/x86_64-linux-android/toolchain.cmake \\\r\n      -DBUILD_GUI=ON -DANDROID_API_LEVEL=34  -j$(nproc)\r\ncmake --build build --target apk_package  -j$(nproc)\r\n```\r\n\r\n### Note for Reviewers\r\n- Android does not support the system-wide IPC mechanisms used by Bitcoin Core's multiprocess support, so `NO_IPC=1` is currently required.\r\n- CI integration for the Android build is not included in this PR and will be addressed in a follow-up task if deemed necessary.\r\n\r\n### Emulator Screenshot\r\n<details>\r\n  <summary>Click to expand</summary>\r\n  \r\n<img width=\"968\" height=\"2187\" alt=\"Screenshot 2026-01-06 082824\" src=\"https://github.com/user-attachments/assets/9d7b0130-b624-4817-adf4-f5825c8e4c9d\" />\r\n\r\n</details>\r\n\r\n",
      "state": "open",
      "user": "D33r-Gee",
      "created_at": "2026-01-06T16:48:55Z",
      "updated_at": "2026-01-13T09:33:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34211",
      "labels": [
        "Build system",
        "Android"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 3378,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2471245988,
      "number": 32317,
      "title": "kernel: Separate UTXO set access from validation functions",
      "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API (as done [here](https://github.com/sedited/bitcoin/commit/09e05493010119fc60d310d3e7ffc388de441f9a#diff-f638e65d9278276b2a6ac42ffbbd26d079c3dba752feed5038a25a1ee565d320R947))",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-04-21T13:15:46Z",
      "updated_at": "2026-01-13T09:08:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32317",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1886,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3162249228,
      "number": 34249,
      "title": "doc: archive v30.2 release notes",
      "body": "Archive v30.2 release notes.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-10T16:15:36Z",
      "updated_at": "2026-01-13T08:44:53Z",
      "merged_at": "2026-01-12T23:37:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34249",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 61,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2550873429,
      "number": 32636,
      "title": "Split `CWallet::Create()` into `CreateNew` and `LoadExisting`",
      "body": "This PR is mostly a refactor which splits out logic used for creating wallets and for loading wallets, both of which are presently contained in `CWallet::Create()` into `CWallet::CreateNew()` and `CWallet::LoadExisting()`\r\n\r\nThe real win of this PR is that `CWallet::Create()` uses a very bad heuristic for trying to guess whether or not it is supposed to be creating a new wallet or loading an existing wallet:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/370c59261269fd9043674e0f4fd782a89e724473/src/wallet/wallet.cpp#L2882-L2885\r\n\r\nThis heuristic assumes that wallets with no `ScriptPubKeyMans` are being created, which sounds reasonable, but as demonstrated in #32112 and #32111, this can happen when the user tries to load a wallet file that is corrupted, both issues are fixed by this PR and any other misbehavior for wallet files which succeeded the broken heuristic's sniff test for new wallets.\r\n\r\nIt was already the case that every caller of `CWallet::Create()` knows whether it is creating a wallet or loading one, so we can avoid replacing this bad heuristic with another one, and just shift the burden to the caller.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-29T00:37:09Z",
      "updated_at": "2026-01-13T08:16:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32636",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1189,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2635595853,
      "number": 32857,
      "title": "wallet: allow skipping script paths",
      "body": "While testing MuSig2 integration in #29675 I ran into a Ledger bug https://github.com/LedgerHQ/app-bitcoin-new/issues/329 that was triggered because we signed for a script path in addition to the key path. The bug itself will be fixed, but it seems useful in general to be able to skip script path signing.\r\n\r\nFor example, you may have a 2-of-2 musig() descriptor with some sort of fallback after coins are N blocks old. For both on chain privacy and fee reasons, you don't want to use this path unless absolutely necessary. But our wallet can't know if our co-signer still has their key, so we sign the script path at all times. This could lead to accidental broadcast.\r\n\r\nThis PR introduces a `keypath_only` option (default `false` for now) to:\r\n- the `send` RPC \r\n- the `walletprocesspsbt` RPC.\r\n\r\nThe resulting PSBT won't include `taproot_script_path_sigs`. It does still have `taproot_bip32_derivs` and `musig2_participant_pubkeys`.\r\n\r\nThe `wallet_taproot.py` tests are expanded to cover this behavior.\r\n\r\nIt can also be tested with https://github.com/Sjors/bitcoin/pull/91 and a slightly modified [Moosig](https://github.com/LedgerHQ/moosig). See https://github.com/LedgerHQ/app-bitcoin-new/issues/329 for the rough steps.\r\n\r\nBased on:\r\n- [ ] #32876\r\n\r\nTODO:\r\n- [ ] maybe refactor `MutableTransactionSignatureCreator`\r\n- [ ] add test coverage for `send`\r\n\r\nPotential followups:\r\n- make this default for `musig()` (after #29675)",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-02T14:13:31Z",
      "updated_at": "2026-01-13T07:30:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32857",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1469,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2641394506,
      "number": 32876,
      "title": "refactor: use options struct for signing and PSBT operations",
      "body": "Replace the `sign`, `finalize` , `bip32derivs` and `sighash_type` arguments that are passed to `FillPSBT()` and `SignPSBTInput()` with a `PSBTFillOptions` struct.\r\n\r\n```cpp\r\nstruct PSBTFillOptions {\r\n    bool sign{true};\r\n    std::optional<int> sighash_type{std::nullopt};\r\n    bool finalize{true};\r\n    bool bip32_derivs{true};\r\n};\r\n```\r\n\r\nAdditionally this PR introduces:\r\n\r\n```cpp\r\nstruct SignOptions {\r\n    int sighash_type{SIGHASH_DEFAULT};\r\n};\r\n```\r\n\r\nThis is used by `SignTransaction` and the `MutableTransactionSignatureCreator` constructor.\r\n\r\nThese changes make it easier to add additional options later without large code churn, such as `avoid_script_path` proposed in #32857. It also makes the use of default boolean options safer compared to positional arguments that can easily get mixed up.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-04T12:40:44Z",
      "updated_at": "2026-01-13T07:20:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32876",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 866,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1512762627,
      "number": 28463,
      "title": "p2p: Increase inbound capacity for block-relay only connections",
      "body": "This is joint work with amitiuttarwar.\r\n\r\nSee issue #28462 for a broader discussion on increasing the number of block-relay-only connections independent of this particular implementation proposal.\r\n\r\nWe suggest to increase the number of inbound slots allocated to block-relay-only peers by increasing the default maximum connections from 125 to 200, with 50% of inbound slots accessible for tx-relaying peers.\r\nThis is a prerequisite for being able to increase the default number of outgoing block-relay-only peers later, because the current inbound capacity of the network is not sufficient.\r\nIn order to account for incoming tx-relaying peers separately from incoming block-relay peers, changes to the inbound eviction logic are necessary.\r\n\r\nSee the next post in this thread for a more detailed explanation and motivation of the changes.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2023-09-12T20:36:39Z",
      "updated_at": "2026-01-13T07:01:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28463",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 904,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2678738082,
      "number": 33014,
      "title": "rpc: Fix internal bug in descriptorprocesspsbt when encountering invalid signatures",
      "body": "Fixes #32849\r\nThe descriptorprocesspsbt RPC was crashing with an internal bug assertion when processing PSBTs with invalid signatures (like invalid Schnorr signatures with SIGHASH_SINGLE | ANYONECANPAY flags). Instead of returning a helpful error message, it would just crash.\r\nThis change replaces the CHECK_NONFATAL call with proper error handling that catches the failure and returns a JSONRPCError with a clear message to the user.\r\nTested with Bitcoin Core v29.0.0 using the exact PSBT from the issue report. The fix now returns proper error messages instead of crashing.",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-07-19T05:15:00Z",
      "updated_at": "2026-01-13T06:56:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33014",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 660,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3123216401,
      "number": 34138,
      "title": "Cluster mempool: more accurate cost model for SFL",
      "body": "Builds on top of #34023, part of #30289.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented as of #32545 and #34023, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on a reference system (Zen 4 based).\r\n\r\nThis is draft because:\r\n* The weights used are outdated, as several non-trivial improvements were made to #32545 and #34023 since.\r\n* I don't know if it is the right middle ground, and it seems good to have some conceptual discussion first:\r\n  * Using benchmarks on a reference system inherently captures some platform specifics, making it possible that the metric is not very accurate on other systems.\r\n  * A benchmark-based metric is nontrivial to maintain.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-22T14:57:53Z",
      "updated_at": "2026-01-13T04:33:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34138",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2320,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119599294,
      "number": 34124,
      "title": "refactor: make `CCoinsView` a purely virtual abstract base class",
      "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\n\r\nThis is part of ongoing coins caching cleanup efforts such as #34132, #33866, #33018, and #33512.\r\n\r\n### Fix\r\n\r\nThis PR makes `CCoinsView` a pure abstract interface and introduces an explicit noop implementation, in tiny incremental steps to ease review:\r\n\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and dummy backends\r\n* Replace all direct `CCoinsView` instantiations with `CCoinsViewEmpty`\r\n* Incrementally make all `CCoinsView` methods pure virtual (`GetCoin`, `GetBestBlock`, `BatchWrite`, `EstimateSize`, `Cursor`, `GetHeadBlocks`, `HaveCoin`)\r\n* Remove the legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real database-backed view and `CCoinsViewEmpty`\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T08:47:33Z",
      "updated_at": "2026-01-13T01:14:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34124",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1289,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3154075548,
      "number": 34222,
      "title": "[29.x] Backport wallets directory deletion fixes",
      "body": "Backports:\r\n* #34215 \r\n* #34156\r\n* #34226 \r\n* 2 required commits from #31423\r\n\r\nNote that this backport is unclean and several changes have to be made to most commits to accommodate BDB and the differences in migration cleanup behavior.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-07T21:54:36Z",
      "updated_at": "2026-01-13T00:43:48Z",
      "merged_at": "2026-01-12T19:02:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34222",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 285,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2991771825,
      "number": 33828,
      "title": "Check required interfaces before generating manpages",
      "body": "Guard manpage generation by reading CMakeCache.txt and exiting if HAVE_SYSTEM, ENABLE_WALLET, or WITH_ZMQ are off, and provide a short hint so contributors rebuild with the right flags instead of committing incomplete manpages.\r\n\r\nFixes #17506 \r\n\r\nOverride by exporting SKIP_BUILD_OPTIONS_CHECK=1 if you really need a custom-fit manpage (see bitcoin/bitcoin#29457 (comment)).",
      "state": "open",
      "user": "151henry151",
      "created_at": "2025-11-08T20:50:34Z",
      "updated_at": "2026-01-13T00:30:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33828",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 428,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3159715494,
      "number": 34238,
      "title": "wallet: remove erroneous-on-reorg Assume()",
      "body": "Resolves https://github.com/bitcoin/bitcoin/issues/34206\r\n\r\nI'm not certain the test is worth keeping, but included it for now to show minimal example that crashes without fix. Can be removed.",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2026-01-09T13:43:27Z",
      "updated_at": "2026-01-13T00:10:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34238",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 235,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3087630130,
      "number": 34037,
      "title": "wallet, doc: clarify the coin selection filters that enforce cluster count",
      "body": "Followup to #33629.\r\n\r\nFix misleading docs and variable names. Namely, `getTransactionAncestry` returns the cluster count, not max descendant count of ancestor set (not worth reimplementing as it is merely a heuristic). No behavior changes - I don’t think much needs to be changed for the first release containing cluster mempool. \r\n\r\nCurrent `CoinEligibilityFilter`s enforce a maximum ancestor count (summed across all outputs, potentially overestimating) and max descendant count across ancestors of the output.\r\n\r\nSince #33629, these filters have started using cluster count instead of max desc count across ancestors. The change isn’t dangerous, as the cluster count bounds descendant count as well. Currently, the wallet is essentially enforcing a mixture of both limits - this is good while we are transitioning. Note that the cluster count enforced is 25, not 64, since it's grabbing the node's descendant count limit. While it is not an apples-to-apples comparison, a cluster count limit of 25 helps us avoid busting legacy descendant limits (which will be common on the network for a while).\r\n\r\nPotential things for the future, out of scope for this PR:\r\n- When we get rid of the ancestor/descendant config options, `getPackageLimits` can probably be replaced with hard-coded values.\r\n- Change the `OutputGroup`s to track the actual cluster count that results from spending these outputs and merging their clusters.\r\n- Loosen from 25 after that policy is no longer common.\r\n- Clean up `getPackageLimits`.",
      "state": "open",
      "user": "glozow",
      "created_at": "2025-12-10T01:28:11Z",
      "updated_at": "2026-01-12T22:48:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34037",
      "labels": [
        "Docs",
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1588,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 578665495,
      "number": 21283,
      "title": "Implement BIP 370 PSBTv2",
      "body": "BIP 370 PSBTv2 introduces several new fields and different invariants for PSBT. This PR implements those new fields and restructures the PSBT implementation to match PSBTv2 but still remain compatible with PSBTv0.",
      "state": "open",
      "user": "achow101",
      "created_at": "2021-02-23T18:29:20Z",
      "updated_at": "2026-01-12T22:07:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/21283",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 238,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1685623460,
      "number": 29278,
      "title": "Wallet:  Add `maxfeerate` wallet startup option",
      "body": "This PR fixes #29220\r\n\r\n- The PR adds a wallet `-maxfeerate` startup option, as the upper limit of wallet transactions fee rate.\r\n\r\n- This fixes the ambiguity of using `maxtxfee` value to check the upper limit of transactions fee rate.\r\n\r\n-  Wallet will not create a transaction with fee rate above `maxfeerate` value. And you can not set wallet fee rate with `settxfee` RPC above `maxfeerate` value.\r\n\r\n- This PR adds a functional test that ensure the behavior is enforced.\r\n \r\n\r\n\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2024-01-18T22:23:49Z",
      "updated_at": "2026-01-12T22:05:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29278",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2493655301,
      "number": 32394,
      "title": "net: make m_nodes_mutex non-recursive",
      "body": "The only case of a recursive lock was a nested `ForNode()` call to trim\r\nthe size of `lNodesAnnouncingHeaderAndIDs` to `<= 3`. This need not be\r\nnested, so take it out.\r\n\r\nBefore:\r\n```\r\nfornode(newnode)\r\n    if (size >= 3)\r\n        fornode(front) handle removal of front\r\n        pop front\r\n    push back newnode\r\n```\r\n\r\nAfter:\r\n```\r\nfornode(newnode)\r\n    push back newnode\r\nif (size > 3)\r\n    fornode(front) handle removal of front\r\n    pop front\r\n```\r\n\r\n`lNodesAnnouncingHeaderAndIDs` is protected by `cs_main` which is locked\r\nduring the entire operation.\r\n\r\nPartially resolves: https://github.com/bitcoin/bitcoin/issues/19303\r\n\r\n---\r\n\r\n_This PR included https://github.com/bitcoin/bitcoin/pull/32326 (first 3 commits in this PR). That PR was merged first, so the size of this was reduced._",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-05-01T12:04:32Z",
      "updated_at": "2026-01-12T22:00:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32394",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 831,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2797425845,
      "number": 33300,
      "title": "fuzz: compact block harness",
      "body": "Posting up to get feedback, there are some design flaws with the approach in this PR. Coverage is [here](https://crypt-iq.github.io/fuzz_coverage_reports/cmpctblock-aflpp-inputs-09182025/) (look in `src/blockencodings.cpp`, relevant compact block bits in `src/net_processing.cpp`).\r\n\r\nThis harness can make (in)valid blocks, reconstruct blocks with in-mempool txns, mark peers as HB, and has high stability in AFL++ (~98-99%).\r\n\r\nThe main downside is that there are filesystem operations. In the `.init` function `initialize_cmpctblock`, a chain of 200 blocks is created. Each fuzzing iteration then copies this statically-named, \"cached\" data directory to a temporary directory that gets deleted at the end of the iteration. If each fuzzing iteration instead mines its own chain, the execs/s slows down to a crawl (~0.5/s or less, which would also make CI runs really slow).",
      "state": "open",
      "user": "Crypt-iQ",
      "created_at": "2025-09-03T22:33:44Z",
      "updated_at": "2026-01-12T21:54:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33300",
      "labels": [
        "Tests",
        "Needs rebase",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 903,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3163535277,
      "number": 34254,
      "title": "validation: Prevent duplicate logging and looping in invalid block handling",
      "body": "`InvalidChainFound()` is called from 3 spots:\r\n1. from `InvalidBlockFound()`\r\n2. from `ActivateBestChain()`, with the highest connectable block of the chain\r\nas an arg (after having called `InvalidBlockFound()` already for the block that failed in `ConnectTip()`)\r\n3. from `InvalidateBlock()` (rpc-only)\r\n\r\nMost of the logic in `InvalidChainFound()` is not required for 2) and 3):\r\nIn `ActivateBestChain()`, the previous call to `InvalidChainFound()` before via `InvalidBlockFound` did the flag updates, best header calculation and logging, so only `m_best_invalid` could need additional updating.\r\nIn `InvalidateBlock()` (which doesn't call `InvalidBlockFound()`), we do most of the accounting manually.\r\n\r\nTherefore move of all logic but the `m_best_invalid` update into `InvalidBlockFound()`, avoiding duplicate logging and unnecessary work (the loops over the block index in `SetBlockFailureFlags()` and `RecalculateBestHeader()`\r\nwere done twice before).\r\n\r\nThe second commit renames `InvalidChainFound` to `UpdateBestInvalid` to adjust to its remaining role.\r\n\r\nThis addresses past discussions about repeated work in `InvalidateBlock()` (https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2135717500) and `ActivateBestChain()` (https://github.com/bitcoin/bitcoin/pull/31533#discussion_r2607189790)",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-11T16:59:21Z",
      "updated_at": "2026-01-12T21:48:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34254",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096669232,
      "number": 34059,
      "title": "refactor: Use NodeClock::time_point for m_addr_token_timestamp",
      "body": "It is a bit confusing to have some code use the deprecated `GetTime`, which returns a duration and not a time point, and other code to use `NodeClock` time points.\r\n\r\nFix one place `m_addr_token_timestamp` to use `NodeClock::time_point`.\r\n\r\nAlso:\r\n\r\n* Extract a `ProcessAddrs` helper, similar to the other `Process*()` helpers, to cut down the `ProcessMessage` with a massive scope.\r\n* Rename the confusing `current_a_time` to `now_seconds`. (The `a` in this context refers to the removed \"adjusted\" time, see commit fadd8b2676f6d68ec87189871461c9a6a6aa3cac, which removed adjusted time here)\r\n* Clean-up a test, to make `ProcessMessage` private again. Also, change pointers to references to avoid the mental and literal overhead of (redundantly) checking for nullptr every time.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-12T14:15:29Z",
      "updated_at": "2026-01-12T21:47:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34059",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 842,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2469558646,
      "number": 32310,
      "title": "test: Run all benchmarks in the sanity check",
      "body": "It is unclear why not all benchmarks are run, given that:\r\n\r\n* they only run as a sanity check (fastest version)\r\n* no one otherwise runs them, not even CI\r\n* issues have been missed due to this",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-19T11:58:03Z",
      "updated_at": "2026-01-12T20:59:34Z",
      "merged_at": "2025-04-23T09:16:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32310",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 239,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2514517572,
      "number": 32473,
      "title": "Introduce per-txin sighash midstate cache for legacy/p2sh/segwitv0 scripts",
      "body": "This introduces a per-txin cache for sighash midstate computation to the script interpreter for legacy (bare), P2SH, P2WSH, and (as collateral effect, but not actually useful) P2WPKH. This reduces the impact of certain types of quadratic hashing attacks that use standard transactions. It is not known to improve the situation for attacks involving non-standard transaction attacks.\r\n\r\nThe cache works by remembering for each of the 6 sighash modes a `(scriptCode, midstate)` tuple, which gives a midstate `CSHA256` object right before the appending of the sighash type itself (to permit all 256, rather than just the 6 ones that match the modes). The midstate is only reused if the `scriptCode` matches. This works because - within a single input - only the sighash type and the `scriptCode` affect the actual sighash used.\r\n\r\nThe PR implements two different approaches:\r\n* The initial commits introduce the caching effect always, for both consensus and relay relation validation. Despite being primarily intended for improving the situation for standard transactions only, I chose this approach as the code paths are already largely common between the two, and this approach I believe involves fewer code changes than a more targetted approach, and furthermore, it should not hurt (it may even help common multisig cases slightly). \r\n* The final commit changes the behavior to only using the cache for non-consensus script validation. I'm open to feedback about whether adding this commit is worth it.\r\n\r\nFunctional tests are included that construct contrived cases with many sighash types (standard and non-standard ones) and `OP_CODESEPARATOR`s in all script types (including P2TR, which isn't modified by this PR).",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-05-12T17:49:17Z",
      "updated_at": "2026-01-12T20:16:47Z",
      "merged_at": "2025-08-11T09:26:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32473",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 1794,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2978476932,
      "number": 33788,
      "title": "[29.x] Backport fixes for CVE-2025-46598",
      "body": "",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2025-11-05T01:31:52Z",
      "updated_at": "2026-01-12T19:41:30Z",
      "merged_at": "2026-01-12T19:41:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33788",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 41,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2629873861,
      "number": 32840,
      "title": "test: Enhance GetTxSigOpCost tests for coinbase transactions",
      "body": "Added assertions to the GetTxSigOpCost test cases to verify that the witness of a coinbase transaction is not considered in the signature operation cost calculations.\r\n\r\nUsing spendingTx.vin[0].prevout.SetNull() we create a coinbase transaction that evaluates to true for IsCoinbase(). Doing this to transactions (spendingTx in this case) that evaluate to a non-zero sigop output, we more concretely test that the witness of a coinbase transaction is not taken into account for SigOp maths.\r\n\r\n------\r\n\r\nIn my experimentation in mining software (mostly Stratum v2) I encountered the SigOps budget and began exploring the considerations as it applies to coinbase transactions. It was unclear how commitment-type addresses for coinbase were handled compared to bare script when it came to SigOp calculation. Upon further investigation, I saw that the test suite could have added vectors that clearly demonstrate that the witness for a coinbase transaction is not considered for `GetTransactionSigOpCost`. \r\n\r\nAdding these tests makes it more clear for someone in the future how SigOp maths work while exploring the intersection of SigOps and coinbase transactions.",
      "state": "closed",
      "user": "average-gary",
      "created_at": "2025-06-30T19:04:18Z",
      "updated_at": "2026-01-12T15:29:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32840",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1223,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2748998057,
      "number": 33199,
      "title": "fees: enable `CBlockPolicyEstimator` return sub 1 sat/vb fee rate estimates",
      "body": "This is a simple PR that updates the block policy estimator’s `MIN_BUCKET_FEERATE` constant to be identical to the policy `DEFAULT_MIN_RELAY_TX_FEE`. \r\nIt also enables the fee estimator to record transactions with a fee rate up to the `DEFAULT_MIN_RELAY_TX_FEE` in its stats, which effectively allows the estimator to return sub-1 sat/vB fee rate estimates.\r\n\r\nThe change is correct because the estimator creates buckets of fee rates from\r\n`MIN_BUCKET_FEERATE`,\r\n`MIN_BUCKET_FEERATE` + `FEE_SPACING`,\r\n`MIN_BUCKET_FEERATE` + `2 * FEE_SPACING`,\r\n… up to `MAX_BUCKET_FEERATE`.\r\n\r\nThis means it will record sub-1 sat/vB fee rates in the buckets and may return them as a fee rate estimate when that bucket is the lowest one with sufficient transactions for a given target.\r\n\r\nTying `MIN_BUCKET_FEERATE` to `DEFAULT_MIN_RELAY_TX_FEE` also makes it dynamic, so we don’t need to update the fee estimator when the `minrelaytxfee` default is adjusted in the future.\r\n\r\nFor the mempool fee rate estimator in #31664, no update is needed since it uses the block assembler and because the node can see sub-1 sat/vB transactions, it can generate block templates with those and therefore return a fee rate estimate accordingly.\r\n\r\n---\r\n\r\nWhile touching this part of the fee estimator code, this PR got rid of the dummy value persisted in the file",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-08-15T15:15:26Z",
      "updated_at": "2026-01-12T14:49:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33199",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2212829726,
      "number": 31410,
      "title": "qa: Fix `wallet_multiwallet.py`",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/31409.\r\n\r\nThe first commit prevents possible false positives by ensuring that each condition potentially causing the \"Error scanning\" log message is tested separately.\r\n\r\nThe second commit disables a problematic check on Windows.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-03T13:37:11Z",
      "updated_at": "2026-01-12T12:54:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31410",
      "labels": [
        "Wallet",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 309,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2806431312,
      "number": 33335,
      "title": "txgraph: randomize order of same-feerate distinct-cluster transactions",
      "body": "Part of #30289.\r\n\r\nBefore, the implicit ordering of transactions in a TxGraph's main graph is sorted by:\r\n- feerate, high to low\r\n- `Cluster`, low to high `m_sequence`\r\n- linearization order within clusters\r\n\r\nHowever, since `m_sequence` values are assigned deterministically and predictably, the ordering of same-feerate distinct-Cluster transactions can reveal something about the order they were inserted into `TxGraph`.\r\n\r\nIn #28676, this ordering (through `TxGraph::CompareMainOrder`) is used to decide the order of to-be-announced transactions. These should not expose information about insertion order.\r\n\r\nTo deal with this, do not compare the `m_sequence` values directly, but hash them with a fixed but random key first. In case this yields a collision (which needs ~192000 clusters to have a probability of 10^-9 of existing), fall back to comparing the `m_sequence` values directly.\r\n\r\nAlternatives: we could instead use the pre-cluster-mempool approach of sorting by wtxid in case of ties, which is equally non-revealing, and deterministic. I find it cleaner to have a randomized internal total ordering rather than needing a partial ordering within `TxGraph` that needs to be complemented by tie-breaking logic inside the mempool, however, and I don't think the determinism is that valuable.\r\n\r\nFor context: https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328804847\r\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-09-07T23:43:53Z",
      "updated_at": "2026-01-12T12:49:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33335",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1462,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1274356024,
      "number": 27253,
      "title": "httpserver, rest: improving URI validation",
      "body": "This PR contains an isolated enhancement of the segfault bugfix https://github.com/bitcoin/bitcoin/pull/27468 (already merged), improving the way we handle the URI validation, which will be performed only once instead of on each query parameter of a rest service endpoint.",
      "state": "closed",
      "user": "pablomartin4btc",
      "created_at": "2023-03-14T04:22:04Z",
      "updated_at": "2026-01-12T10:52:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27253",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 315,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1871355106,
      "number": 30111,
      "title": "locks: introduce mutex for tx download, flush rejection filters once per tip change",
      "body": "See #27463 for full project tracking.\r\n\r\nThis contains the first few commits of #30110, which require some thinking about thread safety in review.\r\n- Introduce a new `m_tx_download_mutex` which guards the transaction download data structures including `m_txrequest`, the rolling bloom filters, and `m_orphanage`. Later this should become the mutex guarding `TxDownloadManager`.\r\n  - `m_txrequest` doesn't need to be guarded using `cs_main` anymore\r\n  - `m_recent_confirmed_transactions` doesn't need its own lock anymore\r\n  - `m_orphanage` doesn't need its own lock anymore\r\n- Adds a new `ValidationInterface` event, `ActiveTipChanged`, which is a synchronous callback whenever the tip of the active chainstate changes.\r\n- Flush `m_recent_rejects` and `m_recent_rejects_reconsiderable` on `ActiveTipChanged` just once instead of checking the tip every time `AlreadyHaveTx` is called. This should speed up calls to that function (no longer comparing a block hash each time) and removes the need to lock `cs_main` every time it is called.\r\n\r\nMotivation:\r\n- These data structures need synchronization. While we are holding `m_tx_download_mutex`, these should hold:\r\n  - a tx hash in `m_txrequest` is not also in `m_orphanage`\r\n  - a tx hash in `m_txrequest` is not also in `m_recent_rejects` or `m_recent_confirmed_transactions`\r\n  - In the future, orphan resolution tracking should also be synchronized. If a tx has an entry in the orphan resolution tracker, it is also in `m_orphanage`, and not in `m_txrequest`, etc.\r\n- Currently, `cs_main` is used to e.g. sync accesses to `m_txrequest`. We should not broaden the scope of things it locks.\r\n- Currently, we need to know the current chainstate every time we call `AlreadyHaveTx` so we can decide whether we should update it. Every call compares the current tip hash with `hashRecentRejectsChainTip`. It is more efficient to have a validation interface callback that updates the rejection filters whenever the chain tip changes.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2024-05-15T14:16:19Z",
      "updated_at": "2026-01-12T10:52:49Z",
      "merged_at": "2024-07-24T08:30:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30111",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2061,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3095820892,
      "number": 34054,
      "title": "net processing: Add ibd check before processing block for txdownloadman",
      "body": "Calculating the rolling bloom filters for the txorphanage takes some CPU time from the scheduler thread. This can be observed for example in [this flamegraph](https://bitcoin-dev-tools.github.io/benchcoin/results/pr-172/20066462508/mainnet-default-instrumented-base-flamegraph.svg?x=920203898521&y=780), where handling the filter takes about 2.6% of total time (and most of the scheduler thread's time). \r\n\r\nDuring ibd the entries in the tx download bloom filter are just continuously rolled over and aren't consumed, since no mempool entries are created by incoming transactions from peers during ibd. The mempool does accept transactions via RPC, or the wallet at the time, however these don't interact with the orphanage and the txdownloadman, because adding anything to those is guarded by IsInitialBlockDownload() checks as well.\r\n\r\nWe're usually latching ibd to false a few blocks before catching up to the tip, so this should also not significantly degrade the performance of the filter once fully caught up.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-12-12T09:06:28Z",
      "updated_at": "2026-01-12T10:46:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34054",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1087,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2680204348,
      "number": 33026,
      "title": "test, refactor: Embedded ASMap [1/3]: Selected minor preparatory work",
      "body": "This contains some commits from #28792 that can be easily reviewed and merged independently. I hope splitting this change off can make this part move a bit faster and reduce frequency of needed rebases for #28792.\r\n\r\nThe commits in order:\r\n- Add additional unit test vectors to the asmap interpreter (written by sipa). This helps to ensure that the further refactors in #28792 don't change behavior. \r\n- Modernizes the logging in `util/asmap.cpp`, I added this while touching the rest of the file all over anyway.\r\n- Adds an `AutoFile::size` helper function with some additional test coverage in a separate commit",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-07-20T21:55:35Z",
      "updated_at": "2026-01-12T10:06:30Z",
      "merged_at": "2025-11-19T09:28:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33026",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 683,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2644452947,
      "number": 32885,
      "title": "Cache m_cached_finished_ibd where SetTip is called.",
      "body": "As IsInitialBlockDownload latches to false only once the Tip is sufficiently\r\nadvanced there is no need to check the Tip everytime IsIBD is called.\r\n\r\nBy caching this in advance we can avoid extra work and more importantly a lock.\r\n\r\n",
      "state": "closed",
      "user": "pstratem",
      "created_at": "2025-07-06T09:29:26Z",
      "updated_at": "2026-01-12T09:58:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32885",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 286,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2281150274,
      "number": 31668,
      "title": "Added rescan option for import descriptors",
      "body": "Fix related to issue: https://github.com/bitcoin/bitcoin/issues/31263\r\n",
      "state": "open",
      "user": "saikiran57",
      "created_at": "2025-01-16T08:11:27Z",
      "updated_at": "2026-01-12T09:10:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31668",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 114,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2546204820,
      "number": 32624,
      "title": "fuzz: wallet: add target for `MigrateToDescriptor`",
      "body": "This PR adds fuzz coverage for the scriptpubkeyman migration (`MigrateToDescriptor`). Note that it's a test for the migration of the scriptpubkey manager, not for the whole migration process as tried in #29694, because:\r\n1) The wallet migration deals with DBs which is expensive for fuzzing (was getting around 3 exec/s);\r\n2) Mocking would require lots of refactors.\r\n\r\nThis target loads keys, HDChain (even inactive ones), watch only and might add tons of different scripts, then calls `MigrateToDescriptor`. It does not play with encrypted stuff because it would make the target super slow. Also, after the migration there are some assertions that would work as a regression test for https://github.com/bitcoin/bitcoin/pull/31452, for example.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2025-05-27T11:34:05Z",
      "updated_at": "2026-01-12T05:59:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32624",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 796,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3164231275,
      "number": 34258,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "sadeeqrabiu",
      "created_at": "2026-01-12T01:23:28Z",
      "updated_at": "2026-01-12T01:23:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34258",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149157644,
      "number": 34207,
      "title": "coins/refactor: enforce `GetCoin()` returns only unspent coins",
      "body": "### Summary \r\n`::GetCoin()` is an interface for querying the UTXO set, so production implementations should only ever return unspent coins. Tests should mimic this to provide useful feedback.\r\n\r\n### Context\r\nThis PR is split out from #33018 to keep that PR focused on removing the `FRESH-but-not-DIRTY` cache state.\r\n\r\n### Changes:\r\n* Add a fail-fast assertion that `CCoinsViewDB::GetCoin()` never returns a spent coin.\r\n* Align unit tests and fuzz simulations with the production `GetCoin()` contract by never returning spent coins.\r\n* Replace the unreachable “spent coin returned by parent” handling in `CCoinsViewCache::FetchCoin()` with `Assert(!coin.IsSpent())`, drop outdated `spent+FRESH` docs, and tighten `SanityCheck()` invariants.\r\n\r\nBehavior is unchanged, it just aligns our tests to exercise valid states.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:24:58Z",
      "updated_at": "2026-01-11T20:34:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34207",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 881,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2242801623,
      "number": 31533,
      "title": "fuzz: Add fuzz target for block index tree and related validation events",
      "body": "This adds a fuzz target for the block index and various events in validation that interact with it.\r\n\r\nIt can create arbitrary tree-like structure of block indexes, simulating (so far) the following events:\r\n- Adding a header\r\n- Receiving the full block (may be valid or not)\r\n- `ActivateBestChain()` - Reorging the chain to a new chain tip (possibly encountering invalid blocks on the way)\r\n- Pruning a block in the best chain\r\n- Receiving a previously pruned block again (`getblockfrompeer`)\r\n\r\nIt might be interesting / possible to extend this to more events, such as dealing with more than one chainstate (assumeutxo).\r\n\r\nThe test skips all actual validation of header/ block / transaction data by just simulating the outcome, and also doesn't interact with the data directory.\r\nThe main goal is to ensure the integrity of the block index tree in all fuzzed constellations, by calling `CheckBlockIndex()` at the end of each iteration.\r\n\r\nCompared to #29158 this approach has a more limited scope (by skipping all actual validation), but it is fast - it doesn't do a full init sequence on each iteration, but \"cleans up\" after itself by resetting the global validation state after each iteration.",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2024-12-18T17:53:26Z",
      "updated_at": "2026-01-11T17:10:37Z",
      "merged_at": "2025-12-18T15:26:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31533",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1272,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2594396603,
      "number": 32757,
      "title": "net: Fix Discover() not running when using -bind=0.0.0.0:port",
      "body": "  This PR fixes two related issues with address discovery when using explicit bind addresses in Bitcoin Core:\r\n\r\n  -  #31293\r\n  -  #31336\r\n\r\nWhen using `-bind=0.0.0.0:port` (or `-bind=::`), the `Discover()` function was not being executed because the code only checked the `bind_on_any` flag. This led to two problems:\r\n- The node would not discover its own local addresses if an explicit \"any\" bind was used.\r\n- The functional test `feature_bind_port_discover.py` would fail, as it expects local addresses to be discovered in these cases.\r\n\r\nThis PR:\r\n1. Checks both `bind_on_any` and any bind addresses using `IsBindAny()`\r\n   Ensures `Discover()` runs when binding to 0.0.0.0 or ::, even if specified explicitly.\r\n2. Ensures correct address discovery\r\n   The node will now discover its own addresses when using explicit \"any\" binds, matching user expectations and fixing the test.\r\n3. Maintains backward compatibility\r\n   The semantic meaning of `bind_on_any` is preserved as defined in `net.h`:  \r\n   > \"True if the user did not specify -bind= or -whitebind= and thus we should bind on 0.0.0.0 (IPv4) and :: (IPv6)\"\r\n4. Updates the test to use dynamic ports\r\n   The functional test `feature_bind_port_discover.py` is updated to use dynamic ports instead of hardcoded ones, improving reliability.\r\n\r\nHow this PR Differs from #31492\r\n\r\n- Preserves the semantic meaning of `bind_on_any` (see `net.h`).\r\n- Uses a simpler approach: checks `IsBindAny()` on bind addresses, without modifying `GetListenPort()`.\r\n- Avoids code duplication with `DefaultOnionServiceTarget()`.\r\n\r\nReferences\r\n\r\n- Implementation follows the approach proposed in my [review comment on #31492](https://github.com/bitcoin/bitcoin/pull/31492#issuecomment-2941773645).\r\n\r\nCloses #31293\r\n\r\nThe #31336 has the overall test failure and requires both this PR and #33362 to be fully resolved.\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-06-16T04:28:44Z",
      "updated_at": "2026-01-11T14:02:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32757",
      "labels": [
        "P2P",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1922,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2703168235,
      "number": 33085,
      "title": "doc: gen-manpages.py should check build options",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/17506. Second attempt after PR: https://github.com/bitcoin/bitcoin/pull/29457 (closed)\r\n\r\nThis PR fixes the `gen-manpages.py` script to check the build options and exit when there are missing components. It also adds an option to `--skip-build-options-check`\r\n\r\nThe PR also addresses the issues raised on PR: https://github.com/bitcoin/bitcoin/pull/29457:\r\n    - https://github.com/bitcoin/bitcoin/pull/29457#discussion_r1836669430 - the default behaviors is fail\r\n    - https://github.com/bitcoin/bitcoin/pull/29457#issuecomment-1955225976 - by adding  `--skip-build-options-check`\r\n    - https://github.com/bitcoin/bitcoin/pull/29457#pullrequestreview-2433974717 - The PR uses `builddir/src/bitcoin-build-config.h` to check for `HAVE_SYSTEM` option and `builddir/test/config.ini` for the rest as they are only available there respectively",
      "state": "closed",
      "user": "BrandonOdiwuor",
      "created_at": "2025-07-29T07:59:13Z",
      "updated_at": "2026-01-11T12:48:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33085",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 936,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2272063945,
      "number": 31642,
      "title": "Comment coypright date update",
      "body": "doc: updated comments in line 1 from: \r\n\r\n// Copyright (c) 2012-2022 The Bitcoin Core developers \r\nto \r\n// Copyright (c) 2012-2025 The Bitcoin Core developers\r\n\r\n\r\nPR was for comment update only so no testing was performed.",
      "state": "closed",
      "user": "satscoffee",
      "created_at": "2025-01-11T14:29:04Z",
      "updated_at": "2026-01-11T10:52:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31642",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 253,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2902028046,
      "number": 33592,
      "title": "contrib: remove deprecated --deep signing from macdeployqtplus",
      "body": "**Description**\r\nRemoved the deprecated --deep flag from codesign in macdeployqtplus and replaced it with an explicit recursive signing process for all binaries, frameworks, and plugins.\r\nFixes #32486 \r\n\r\n<img width=\"624\" height=\"370\" alt=\"Screenshot 2025-10-10 at 2 36 16 AM\" src=\"https://github.com/user-attachments/assets/6329b67e-e400-4d8d-947c-25bceab4cb55\" />\r\n\r\n\r\n**Steps To Reproduce**\r\nN/A since not a bug only deprecating an arg\r\n\r\n**Steps To Test**\r\n- Set up the app normally.\r\n- Signing would be logged\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "amishhaa",
      "created_at": "2025-10-09T21:11:13Z",
      "updated_at": "2026-01-11T02:14:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33592",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2641,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3133212525,
      "number": 34165,
      "title": "coins: don't mutate main cache when connecting block",
      "body": "This is a slightly modified version of the second commit of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nWhen accessing coins via the `CCoinsViewCache`, the const methods like `GetCoin` actually mutate `cacheCoins` internally to cache entries when they are pulled from the backing db. This is generally a performance improvement for single threaded access patterns, but it precludes us from accessing entries in a `CCoinsViewCache` from multiple threads without a lock.\r\n\r\nAnother aspect is that when we add an ephemeral `CCoinsViewCache` view backed by the main cache for use in `ConnectBlock()`, we will insert entries into the main cache even if the block is determined to be invalid. This is not the biggest concern, since an invalid block requires proof-of-work. But, an attacker could craft multiple invalid blocks to fill the main cache. This would make us `Flush` the cache more often than necessary. Obviously this would be very expensive to do on mainnet.\r\n\r\nIntroduce `CoinsViewCacheNonMutating`, a `CCoinsViewCache` subclass that reads coins without mutating the underlying cache via `FetchCoin()`.\r\n\r\nAdd `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\r\n\r\nThis is the foundation for async input fetching, where worker threads must not mutate shared state.\r\n",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:32:34Z",
      "updated_at": "2026-01-11T00:53:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34165",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1723,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3155329691,
      "number": 34228,
      "title": "depends: Unset `SOURCE_DATE_EPOCH` in `gen_id` script",
      "body": "When performing Guix builds for `{x86_64,arm64}-apple-darwin` hosts across different commits, all packages in `depends` are rebuilt even if there are no changes in either the  `depends` or `contrib/guix` subdirectories.\r\n\r\nThis occurs because the `SOURCE_DATE_EPOCH` environment variable enables Clang's `-source-date-epoch` option, which then appears in the output of `clang -v -E -xc -o /dev/null - < /dev/null`. For example:\r\n```\r\n$ SOURCE_DATE_EPOCH=1767855465 clang -v -E -xc++ -o /dev/null - < /dev/null\r\nclang version 21.1.7 (Fedora 21.1.7-1.fc43)\r\nTarget: x86_64-redhat-linux-gnu\r\nThread model: posix\r\nInstalledDir: /usr/bin\r\nConfiguration file: /etc/clang/x86_64-redhat-linux-gnu-clang.cfg\r\nSystem configuration file directory: /etc/clang/\r\nFound candidate GCC installation: /usr/bin/../lib/gcc/x86_64-redhat-linux/14\r\nFound candidate GCC installation: /usr/bin/../lib/gcc/x86_64-redhat-linux/15\r\nSelected GCC installation: /usr/bin/../lib/gcc/x86_64-redhat-linux/15\r\nCandidate multilib: .;@m64\r\nCandidate multilib: 32;@m32\r\nSelected multilib: .;@m64\r\n (in-process)\r\n \"/usr/bin/clang-21\" -cc1 -triple x86_64-redhat-linux-gnu -E -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name - -mrelocation-model static -mframe-pointer=all -fmath-errno -ffp-contract=on -fno-rounding-math -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -tune-cpu generic -debugger-tuning=gdb -fdebug-compilation-dir=/home/hebasto -v -fcoverage-compilation-dir=/home/hebasto -resource-dir /usr/bin/../lib/clang/21 -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15 -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15/x86_64-redhat-linux -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15/backward -internal-isystem /usr/bin/../lib/clang/21/include -internal-isystem /usr/local/include -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../x86_64-redhat-linux/include -internal-externc-isystem /include -internal-externc-isystem /usr/include -source-date-epoch 1767855465 -fdeprecated-macro -ferror-limit 19 -fmessage-length=180 -fgnuc-version=4.2.1 -fskip-odr-check-in-gmf -fcxx-exceptions -fexceptions -fcolor-diagnostics -faddrsig -D__GCC_HAVE_DWARF2_CFI_ASM=1 -o /dev/null -x c++ -\r\nclang -cc1 version 21.1.7 based upon LLVM 21.1.7 default target x86_64-redhat-linux-gnu\r\nignoring nonexistent directory \"/usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../x86_64-redhat-linux/include\"\r\nignoring nonexistent directory \"/include\"\r\n#include \"...\" search starts here:\r\n#include <...> search starts here:\r\n /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15\r\n /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15/x86_64-redhat-linux\r\n /usr/bin/../lib/gcc/x86_64-redhat-linux/15/../../../../include/c++/15/backward\r\n /usr/bin/../lib/clang/21/include\r\n /usr/local/include\r\n /usr/include\r\nEnd of search list.\r\n```\r\n\r\nAs a result, each package id differs between builds, which causes the script to treat the toolchain as changed and triggers unnecessary rebuilds.\r\n\r\nThis PR resolves this issue by unsetting `SOURCE_DATE_EPOCH` in a subshell before collecting toolchain details.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-08T08:35:38Z",
      "updated_at": "2026-01-11T00:11:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34228",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3333,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3161187473,
      "number": 34245,
      "title": "verify-commits: temporarily allow sha1 signatures for merge commits",
      "body": "This is to unbreak CI after a merge commit (aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9) with a signature indirectly involving SHA1 was pushed to master.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2026-01-09T23:37:35Z",
      "updated_at": "2026-01-10T15:33:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34245",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 218,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2723329689,
      "number": 33140,
      "title": "test: Avoid shutdown race in NetworkThread",
      "body": "Locally, I am seeing rare intermittent exceptions in the network thread:\r\n\r\n```\r\nstderr:\r\nException in thread NetworkThread:\r\nTraceback (most recent call last):\r\nFile \"/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\nself.run()\r\nFile \"./test/functional/test_framework/p2p.py\", line 744, in run\r\nself.network_event_loop.run_forever()\r\nFile \"/python3.10/asyncio/base_events.py\", line 603, in run_forever\r\nself._run_once()\r\nFile \"/python3.10/asyncio/base_events.py\", line 1871, in _run_once\r\nevent_list = self._selector.select(timeout)\r\nAttributeError: 'NoneType' object has no attribute 'select'\r\n```\r\n\r\nI can reproduce this intermittently via `while ./bld-cmake/test/functional/test_runner.py $(for i in {1..400}; do echo -n \"tool_rpcauth \"; done)  -j 400 ; do true ; done`.\r\n\r\nI suspect this is a race where the shutdown starts the close of the network thread while it is starting.\r\n\r\nA different exception showing this race can be reproduced via:\r\n\r\n```diff\r\ndiff --git a/test/functional/test_framework/p2p.py b/test/functional/test_framework/p2p.py\r\nindex 610aa4ccca..64561e157c 100755\r\n--- a/test/functional/test_framework/p2p.py\r\n+++ b/test/functional/test_framework/p2p.py\r\n@@ -741,6 +741,7 @@ class NetworkThread(threading.Thread):\r\n \r\n     def run(self):\r\n         \"\"\"Start the network thread.\"\"\"\r\n+        import time;time.sleep(.1)\r\n         self.network_event_loop.run_forever()\r\n \r\n     def close(self, *, timeout=10):\r\n```\r\n\r\nIt is trivial to reproduce via any test (e.g. `./bld-cmake/test/functional/tool_rpcauth.py`) and shows a similar traceback to the one above:\r\n\r\n```\r\nException in thread NetworkThread:\r\nTraceback (most recent call last):\r\n  File \"/python3.10/threading.py\", line 1016, in _bootstrap_inner\r\n    self.run()\r\n  File \"./test/functional/test_framework/p2p.py\", line 745, in run\r\n    self.network_event_loop.run_forever()\r\n  File \"/python3.10/asyncio/base_events.py\", line 591, in run_forever\r\n    self._check_closed()\r\n  File \"/python3.10/asyncio/base_events.py\", line 515, in _check_closed\r\n    raise RuntimeError('Event loop is closed')\r\nRuntimeError: Event loop is closed\r\n```\r\n\r\nSo fix the second runtime error in hope of fixing the first one as well.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-08-06T07:25:51Z",
      "updated_at": "2026-01-10T15:29:11Z",
      "merged_at": "2025-12-03T10:42:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33140",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2239,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2281949992,
      "number": 31672,
      "title": "rpc: add cpu_load to getpeerinfo",
      "body": "Add a new field `cpu_load` to the output of `getpeerinfo` RPC.\r\n\r\nIt represents the CPU time spent by the message handling thread for the given peer, weighted for the duration of the connection. That is, for example, if two peers are equally demanding and one is connected longer than the other, then they will have the same `cpu_load` number.\r\n\r\n---\r\n\r\nMonitoring CPU usage is useful on its own. Also related to https://github.com/bitcoin/bitcoin/issues/31033.\r\n\r\n---\r\n\r\nThis PR uses `clock_gettime()` (POSIX) and `GetThreadTimes()` (Windows). An alternative to those, should this be explored are: `getrusage()` (POSIX) and `QueryThreadCycleTime()` (Windows, but it counts CPU cycles).",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-01-16T14:02:03Z",
      "updated_at": "2026-01-10T14:10:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31672",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 719,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2864932636,
      "number": 33483,
      "title": "CMake: Add dynamic test discovery",
      "body": "Instead of parsing the test names from the source code at configure time, query the list of tests from the test executables at testing time.\r\n\r\nThis should be upstreamed to CMake: https://gitlab.kitware.com/cmake/cmake/-/issues/26920\r\n\r\nLeft to do: The `test_bitcoin-qt` executable should be fixed to support the `-function` option documented here: https://doc.qt.io/qt-6/qtest-overview.html#testing-options so that its test cases can be discovered as well.",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-26T17:21:02Z",
      "updated_at": "2026-01-10T13:57:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33483",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 491,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2219834086,
      "number": 31435,
      "title": "lint: Move assertion linter into lint runner",
      "body": "On failure, this makes the output more consistent with the other linters. Each failure will be marked with an '⚠️ ' emoji and explanation, making it easier to spot.\r\n\r\nAlso, add --line-number to the filesystem linter.\r\n\r\nAlso, add newlines after each failing check, to visually separate different failures from each other.\r\n\r\nCan be reviewed with:\r\n`--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-06T11:26:56Z",
      "updated_at": "2026-01-10T10:52:05Z",
      "merged_at": "2025-01-06T13:35:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31435",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 456,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2227385347,
      "number": 31464,
      "title": "util: Add missing types in make_secure_unique",
      "body": "The return type of `std::forward` depends on the template type, and can not be recovered from the args. Attempting to do so will result in a compile failure. For example, `make_secure_unique<std::string>(std::string{});` does not compile on current master, but does with this pull.\r\n\r\nAnother example would be `make_secure_unique<std::pair<std::string, std::unique_ptr<int>>>(std::string{}, std::make_unique<int>(21));`",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-10T20:50:17Z",
      "updated_at": "2026-01-10T10:52:04Z",
      "merged_at": "2025-01-06T15:19:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31464",
      "labels": [
        "Refactoring",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 465,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2227177918,
      "number": 31462,
      "title": "test: raise explicit error if any of the needed release binaries is missing",
      "body": "If the `releases` directory exists, but still only a subset of the necessary previous release binaries are available, the test fails by throwing an exception (sometimes leading to follow-up exceptions like `AssertionError: [node 0] Error: no RPC connection`) and printing out a stack trace, which can be confusing and at a first glance suggests that the node crashed or some alike.\r\nImprove this by checking and printing out *all* of the missing release binaries and failing with an explicit error in this case. Also add an info on how to download previous releases binaries. Noticed while testing #30328.\r\n\r\nCan be tested by e.g.\r\n\r\n```\r\n$ rm -rf ./releases\r\n$ ./test/get_previous_releases.py -b\r\n$ rm -rf ./releases/v28.0/\r\n$ ./build/test/functional/wallet_migration.py\r\n```\r\n\r\n\r\nmaster:\r\n<details>\r\n<summary>Long test fail output</summary>\r\n\r\n```\r\n...\r\n2024-12-10T18:48:54.067000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 590, in start_nodes\r\n    node.start(extra_args[i], *args, **kwargs)\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_node.py\", line 257, in start\r\n    self.process = subprocess.Popen(self.args + extra_args, env=subp_env, stdout=stdout, stderr=stderr, cwd=cwd, **kwargs)\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 971, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 1863, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/thestack/bitcoin/releases/v28.0/bin/bitcoind'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 315, in setup\r\n    self.setup_network()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 409, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/thestack/bitcoin/./build/test/functional/wallet_migration.py\", line 54, in setup_nodes\r\n    self.start_nodes()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 595, in start_nodes\r\n    self.stop_nodes()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 610, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_node.py\", line 396, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_node.py\", line 215, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\nAssertionError: [node 0] Error: no RPC connection\r\n2024-12-10T18:48:54.118000Z TestFramework (INFO): Stopping nodes\r\nTraceback (most recent call last):\r\n  File \"/home/thestack/bitcoin/./build/test/functional/wallet_migration.py\", line 1097, in <module>\r\n    WalletMigrationTest(__file__).main()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 159, in main\r\n    exit_code = self.shutdown()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 331, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 610, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_node.py\", line 396, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_node.py\", line 215, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\nAssertionError: [node 0] Error: no RPC connection\r\n[node 0] Cleaning up leftover process\r\n...\r\n```\r\n</details>\r\n\r\nPR:\r\n```\r\n...\r\n2025-01-01T20:26:27.999000Z TestFramework (INFO): PRNG seed is: 4570383538468804512\r\n2025-01-01T20:26:28.000000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_lz66_zcu\r\n2025-01-01T20:26:28.003000Z TestFramework (ERROR): Binary not found: /home/thestack/bitcoin/releases/v28.0/bin/bitcoind\r\n2025-01-01T20:26:28.003000Z TestFramework (ERROR): Binary not found: /home/thestack/bitcoin/releases/v28.0/bin/bitcoin-cli\r\n2025-01-01T20:26:28.003000Z TestFramework (INFO): Previous releases binaries can be downloaded via `test/get_previous_releases.py -b`.\r\n2025-01-01T20:26:28.003000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 315, in setup\r\n    self.setup_network()\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 409, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/thestack/bitcoin/./build/test/functional/wallet_migration.py\", line 50, in setup_nodes\r\n    self.add_nodes(self.num_nodes, versions=[\r\n  File \"/home/thestack/bitcoin/test/functional/test_framework/test_framework.py\", line 537, in add_nodes\r\n    raise AssertionError(\"At least one release binary is missing\")\r\nAssertionError: At least one release binary is missing\r\n2025-01-01T20:26:28.061000Z TestFramework (INFO): Stopping nodes\r\n...\r\n```\r\n",
      "state": "closed",
      "user": "theStack",
      "created_at": "2024-12-10T18:53:09Z",
      "updated_at": "2026-01-10T10:52:04Z",
      "merged_at": "2025-01-09T23:22:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31462",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 5737,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2261541298,
      "number": 31608,
      "title": "doc: Clarify min macOS and Xcode version",
      "body": "Two minor doc fixups:\r\n\r\n* Clarify that `macOS 13.0+` means `macOS 13+`, indicating that on any major version, only the latest security release is supported.\r\n* Clarify that the Xcode version was selected based on the minimum required macOS version and the minimum required clang version.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-06T09:09:45Z",
      "updated_at": "2026-01-10T10:52:03Z",
      "merged_at": "2025-01-10T13:53:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31608",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 329,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2247133227,
      "number": 31549,
      "title": "fuzz: Abort if system time is called without mock time being set",
      "body": "This PR expands the `CheckGlobals` utility that was introduced in https://github.com/bitcoin/bitcoin/pull/31486 and should help with fuzz stability (https://github.com/bitcoin/bitcoin/issues/29018).\r\n\r\nSystem time shouldn't be used when running a fuzz test, as it is likely to introduce instability (non-determinism). This PR identifies and fixes the targets that were calling system time without setting mock time at the start of an iteration. \r\n\r\nRemoving`SetMockTime()` from any one of these targets should result in a crash and a message describing the issue.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-12-20T17:59:58Z",
      "updated_at": "2026-01-10T10:52:03Z",
      "merged_at": "2025-01-10T00:31:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31549",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 628,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2262069992,
      "number": 31612,
      "title": "ci: build msan's libc++ with _LIBCPP_ABI_BOUNDED_*",
      "body": "For the task `MSan, depends (Cirrus CI)` we build a custom libc++ for which we already use `-DLIBCXX_HARDENING_MODE=debug`. Compile it also with `_LIBCPP_ABI_BOUNDED_*` to enable further checks.\r\n\r\nDocs at: https://libcxx.llvm.org/Hardening.html#abi-options",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-01-06T14:34:25Z",
      "updated_at": "2026-01-10T10:52:02Z",
      "merged_at": "2025-01-10T13:48:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31612",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 308,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2261691858,
      "number": 31609,
      "title": "test: importdescriptors is not available for non-descriptor wallets",
      "body": "This PR adds test coverage for the error thrown when trying to import descriptors into a non-descriptor wallet.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-01-06T10:40:28Z",
      "updated_at": "2026-01-10T10:52:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31609",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 179,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2264218016,
      "number": 31617,
      "title": "build, test: Build `db_tests.cpp` regardless of `USE_BDB`",
      "body": "When the building of `db_tests.cpp` was made conditional on `USE_BDB` in commit a58b719cf75e2d97205ec260bcff0d4780fe4fb8, all `db_tests` were indeed specific to BDB wallets.\r\n\r\nHowever, the tests have since been [extended](https://github.com/bitcoin/bitcoin/commit/ba616b932cb9e9adb7eb9f1826caa62ce422a22d) to include SQLite wallets as well.\r\n\r\nOn the master branch @ 433412fd8478923dfdb20044f74c5d1e19fa8dd8, tests specific to SQLite wallets are not built and run if configured with `WITH_BDB=OFF` (the default option).\r\n\r\nThis PR resolves this issue by guarding BDB-specific code in `db_tests.cpp` and ensuring this source file is compiled regardless of the `WITH_BDB` option.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-07T16:06:22Z",
      "updated_at": "2026-01-10T10:52:01Z",
      "merged_at": "2025-01-09T23:46:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31617",
      "labels": [
        "Wallet",
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 736,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2268440409,
      "number": 31627,
      "title": "depends: Fix spacing issue",
      "body": "This PR resolves an issue where a missing space caused the value of the `build_AR` variable to be concatenated with the \"NM=\" string. This resulted in subsequent calls to `${AR}` and `${NM}` failing.\r\n\r\nHere is a diff for the `make -C depends print-build_id DEBUG=1` output:\r\n```diff\r\n@@ -110,50 +110,18 @@\r\n CXX_STANDARD=c++20\r\n END CXX\r\n BEGIN AR\r\n-ar: invalid option -- '='\r\n-Usage: ar [emulation options] [-]{dmpqrstx}[abcDfilMNoOPsSTuvV] [--plugin <name>] [member-name] [count] archive-file file...\r\n-       ar -M [<mri-script]\r\n- commands:\r\n-  d            - delete file(s) from the archive\r\n-  m[ab]        - move file(s) in the archive\r\n-  p            - print file(s) found in the archive\r\n-  q[f]         - quick append file(s) to the archive\r\n-  r[ab][f][u]  - replace existing or insert new file(s) into the archive\r\n-  s            - act as ranlib\r\n-  t[O][v]      - display contents of the archive\r\n-  x[o]         - extract file(s) from the archive\r\n- command specific modifiers:\r\n-  [a]          - put file(s) after [member-name]\r\n-  [b]          - put file(s) before [member-name] (same as [i])\r\n-  [D]          - use zero for timestamps and uids/gids (default)\r\n-  [U]          - use actual timestamps and uids/gids\r\n-  [N]          - use instance [count] of name\r\n-  [f]          - truncate inserted file names\r\n-  [P]          - use full path names when matching\r\n-  [o]          - preserve original dates\r\n-  [O]          - display offsets of files in the archive\r\n-  [u]          - only replace files that are newer than current archive contents\r\n- generic modifiers:\r\n-  [c]          - do not warn if the library had to be created\r\n-  [s]          - create an archive index (cf. ranlib)\r\n-  [l <text> ]  - specify the dependencies of this library\r\n-  [S]          - do not build a symbol table\r\n-  [T]          - deprecated, use --thin instead\r\n-  [v]          - be verbose\r\n-  [V]          - display the version number\r\n-  @<file>      - read options from <file>\r\n-  --target=BFDNAME - specify the target object format as BFDNAME\r\n-  --output=DIRNAME - specify the output directory for extraction operations\r\n-  --record-libdeps=<text> - specify the dependencies of this library\r\n-  --thin       - make a thin archive\r\n- optional:\r\n-  --plugin <p> - load the specified plugin\r\n- emulation options: \r\n-  No emulation specific options\r\n-ar: supported targets: elf64-x86-64 elf32-i386 elf32-iamcu elf32-x86-64 pei-i386 pe-x86-64 pei-x86-64 elf64-little elf64-big elf32-little elf32-big elf64-littleaarch64 elf64-bigaarch64 elf32-littleaarch64 elf32-bigaarch64 elf32-littlearm elf32-bigarm pei-aarch64-little pe-aarch64-little elf64-alpha ecoff-littlealpha elf32-littlearm-fdpic elf32-bigarm-fdpic elf32-hppa-linux elf32-hppa elf64-ia64-little elf64-ia64-big pei-ia64 elf64-loongarch elf32-loongarch pei-loongarch64 elf32-m32r-linux elf32-m32rle-linux elf32-m68k elf32-tradbigmips elf32-tradlittlemips ecoff-bigmips ecoff-littlemips elf32-ntradbigmips elf64-tradbigmips elf32-ntradlittlemips elf64-tradlittlemips elf32-powerpc aixcoff-rs6000 elf32-powerpcle ppcboot elf64-powerpc elf64-powerpcle aixcoff64-rs6000 aix5coff64-rs6000 elf64-littleriscv elf32-littleriscv elf32-bigriscv elf64-bigriscv pei-riscv64-little elf32-s390 elf64-s390 elf32-sh-linux elf32-shbig-linux elf32-sh-fdpic elf32-shbig-fdpic elf32-sparc elf64-sparc pe-bigobj-x86-64 pe-i386 pdb srec symbolsrec verilog tekhex binary ihex plugin\r\n+GNU ar (GNU Binutils for Ubuntu) 2.42\r\n+Copyright (C) 2024 Free Software Foundation, Inc.\r\n+This program is free software; you may redistribute it under the terms of\r\n+the GNU General Public License version 3 or (at your option) any later version.\r\n+This program has absolutely no warranty.\r\n END AR\r\n BEGIN NM\r\n-bash: line 1: --version: command not found\r\n+GNU nm (GNU Binutils for Ubuntu) 2.42\r\n+Copyright (C) 2024 Free Software Foundation, Inc.\r\n+This program is free software; you may redistribute it under the terms of\r\n+the GNU General Public License version 3 or (at your option) any later version.\r\n+This program has absolutely no warranty.\r\n END NM\r\n BEGIN RANLIB\r\n GNU ranlib (GNU Binutils for Ubuntu) 2.42\r\n@@ -321,5 +289,5 @@\r\n NO_HARDEN=\r\n END NO_HARDEN\r\n END ALL\r\n-build_id=b7effe2aa166e73f6d2587fb4805ea1cca4d3f1e5c3aae2cfd59c592816b05e3\r\n+build_id=4173a5f75182c792550652e621f6b4a68cc27c8909385580d4efc7bc7a769f51\r\n make: Leaving directory '/home/hebasto/git/bitcoin/depends'\r\n```\r\n\r\nIt was accidentally introduced in https://github.com/bitcoin/bitcoin/pull/29249.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-09T13:42:19Z",
      "updated_at": "2026-01-10T10:52:00Z",
      "merged_at": "2025-01-10T11:17:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31627",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4535,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2267606501,
      "number": 31623,
      "title": "tracing: Rename the `MIN` macro to `_TRACEPOINT_TEST_MIN` in log_raw_p2p_msgs",
      "body": "Inspired by: 00c1dbd26ddb816e5541c5724397015a92a3d06b (#31419)\r\n\r\nUnless there's a reason we *don't* want the same change here...?",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2025-01-09T06:44:12Z",
      "updated_at": "2026-01-10T10:52:00Z",
      "merged_at": "2025-01-10T11:23:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31623",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 208,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2270676965,
      "number": 31636,
      "title": "fix: grammatical errors",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "crStiv",
      "created_at": "2025-01-10T15:01:33Z",
      "updated_at": "2026-01-10T10:51:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31636",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2086,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2269915817,
      "number": 31632,
      "title": "fix: Optimized Performance Update bloom.cpp",
      "body": "I made several optimizations to the Bloom filter code to enhance its performance and readability:\r\n\r\n- Removed redundant calculations by precomputing frequently used values.\r\n- Added early exits in loops to avoid unnecessary iterations.\r\n- Retained efficient bitwise operations for setting and checking bits.\r\n- Improved memory resizing for the `CRollingBloomFilter` by using bit shifts.\r\n- Simplified conditionals in the `IsRelevantAndUpdate` method for better clarity.\r\n- Improved comments to better explain the logic.\r\n",
      "state": "closed",
      "user": "barajeel",
      "created_at": "2025-01-10T07:56:54Z",
      "updated_at": "2026-01-10T10:51:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31632",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 566,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3157178334,
      "number": 34236,
      "title": "Add sedited to trusted-keys",
      "body": "As discussed on irc: https://www.erisian.com.au/bitcoin-core-dev/log-2026-01-08.html#l-286",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-01-08T19:11:51Z",
      "updated_at": "2026-01-10T05:17:23Z",
      "merged_at": "2026-01-09T11:35:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34236",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 118,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2687844196,
      "number": 33043,
      "title": "[POC] wallet: Enable non-electronic (paper-based) wallet backup with codex32",
      "body": "This PR introduces support for exporting and restoring wallet seeds using the [codex32](https://github.com/BlockstreamResearch/codex32) format, enabling non-electronic (paper-based) wallet backups.\r\n\r\nTo accomplish this, the patch ports the `codex32.{c,h}` implementation from Core Lightning to C++, integrating it with Bitcoin Core's libraries. Corresponding unit tests for codex32 encoding and decoding are also included.\r\n\r\nBecause Bitcoin Core wallets currently do not store the seed material by default, this PR adds support for doing so, along with a new wallet flag to explicitly indicate when this feature is enabled.\r\n\r\nTwo new RPCs are introduced:\r\n\r\n`exposesecret`: exports the wallet seed in codex32 format.\r\n\r\n`recoverwalletfromseed`: restores a wallet from a codex32-encoded seed.\r\n\r\nA functional test included in the last commit demonstrates the full backup and restore flow. Currently, only the default derivation path is supported.\r\n\r\nThis PR is intended as a proposal for feedback—to assess whether this functionality is desirable, and to explore how it might evolve further.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-07-23T07:36:29Z",
      "updated_at": "2026-01-10T02:01:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33043",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1170,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2840997073,
      "number": 33428,
      "title": "depends: Boost 1.90.0",
      "body": "Update [Boost to 1.90.0](https://www.boost.org/releases/1.90.0.beta1/) in depends.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-18T16:48:41Z",
      "updated_at": "2026-01-09T23:35:32Z",
      "merged_at": "2026-01-09T22:24:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33428",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 104,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3159964758,
      "number": 34239,
      "title": "depends: Hash included makefiles in package checksums",
      "body": "This PR fixes an issue where modifications in included files (e.g. `packages/qt_details.mk`) do not trigger a rebuild of the parent packages (`native_qt` and `qt`).\r\n\r\nThis addresses an oversight in 248613eb3ee034bf143821a51635e697dc114e6c from https://github.com/bitcoin/bitcoin/pull/30997.\r\n\r\n### Reproduction\r\n\r\nOn master (@ 595504a43209bead162da54a204df7d140a25f0e), modifying the included makefile does not change the build ID:\r\n```\r\n$ cd depends\r\n$ gmake print-qt_build_id HOST=x86_64-w64-mingw32\r\nqt_build_id=b2ce790473c\r\n$ gmake print-native_qt_build_id HOST=x86_64-w64-mingw32\r\nnative_qt_build_id=70e1e5164c5\r\n$ echo \"\" >> packages/qt_details.mk\r\n$ gmake print-qt_build_id HOST=x86_64-w64-mingw32\r\nqt_build_id=b2ce790473c\r\n$ gmake print-native_qt_build_id HOST=x86_64-w64-mingw32\r\nnative_qt_build_id=70e1e5164c5\r\n```\r\n\r\n### With this patch\r\n\r\nThe checksum calculation now parses `include` directives and adds those files to the hash. The IDs now update correctly:\r\n```\r\n$ cd depends\r\n$ gmake print-qt_build_id HOST=x86_64-w64-mingw32\r\nqt_build_id=9a6ebf79cb3\r\n$ gmake print-native_qt_build_id HOST=x86_64-w64-mingw32\r\nnative_qt_build_id=6ad78a3f644\r\n$ echo \"\" >> packages/qt_details.mk\r\n$ gmake print-qt_build_id HOST=x86_64-w64-mingw32\r\nqt_build_id=ca820665c52\r\n$ gmake print-native_qt_build_id HOST=x86_64-w64-mingw32\r\nnative_qt_build_id=082e4cb2364\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-09T15:07:06Z",
      "updated_at": "2026-01-09T16:36:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34239",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1419,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2743753242,
      "number": 33186,
      "title": "wallet, test: Ancient Wallet Migration from v0.14.3 (no-HD and Single Chain)",
      "body": "This PR adds test coverage for migrating legacy Bitcoin Core wallets from v0.14.3 (released in 2017) to the descriptor wallet format. The test validates that users can safely upgrade their wallets while preserving all funds, transaction history, and addresses.\r\n\r\nThis test was originally developed on top of #32977, as it was requested in reviews.\r\nHowever, since it also increases test coverage, it can be merged independently.\r\n\r\nThe test covers two wallet migration scenarios:\r\n\r\n* Non-HD Wallet Migration - Tests migration of non-HD wallets (created with `-usehd=0`)\r\n* Single Chain HD Wallet Migration - Tests migration of HD wallets from v0.14.3 (`VERSION_HD_BASE`)\r\n\r\nThe node v0.14.3 cannot be synced because it doesn't have the `syncwithvalidationinterfacequeue` RPC implemented (required by `test_framework.py`), so the solution is to copy the `block` folder to the modern node and start it with `-reindex-chainstate`. Because of this additional complexity, this testing is best managed in a separate file rather than in the existing migration test files.\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-08-13T18:50:30Z",
      "updated_at": "2026-01-09T16:32:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33186",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1147,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3141522772,
      "number": 34188,
      "title": "test: Add multiple transactions and error handling tests for getreceivedbyaddress",
      "body": "This PR adds comprehensive functional test coverage for the `getreceivedbyaddress` RPC method.\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-01-02T05:56:38Z",
      "updated_at": "2026-01-09T16:31:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34188",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 178,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3156512426,
      "number": 34233,
      "title": "test: fix Windows CI failures in wallet_multiwallet and old binary tests (ancient wallets)",
      "body": "Currently, the `wallet_multiwallet.py` and `feature_unsupported_utxo_db.py` functional tests are disabled on CI because they rely on legacy wallet binaries that do not correctly handle Unicode paths. \r\n\r\nThis is tracked as a `TODO` in `.github/workflows/ci.yml`. The limitation also blocks efforts to expand ancient wallet test coverage (e.g. bitcoin/bitcoin#33186).\r\n\r\nThis PR restores functional test coverage on Windows CI by addressing two root causes:\r\n\r\n1. **Skip Windows-incompatible tests in `wallet_multiwallet`**: Several test cases depend on Unix-specific filesystem behavior that is not supported on Windows:\r\n     - Directory permission tests using chmod (Windows ignores `os.chmod(path, 0)`)\r\n     - Recursive directory symlink tests (unsupported by listwalletdir)\r\n     - File symlink detection tests (Windows handles file symlinks differently)\r\n\r\n  2. **Use ASCII-only tmpdir for old binary tests**: When running tests against previous releases (`feature_unsupported_utxo_db`, `wallet_multiwallet`) on Windows, an ASCII-only temporary directory name (`test_runner_btc_run_`) is used instead of `test_runner_₿_🏃_`. This avoids failures caused by older binaries lacking proper Unicode path support.",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2026-01-08T15:17:11Z",
      "updated_at": "2026-01-09T16:26:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34233",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1303,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3155631940,
      "number": 34229,
      "title": "[30.2] Backports & Final",
      "body": "Backports:\r\n* #34221\r\n* #34226\r\n* #34227",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-08T10:25:29Z",
      "updated_at": "2026-01-09T14:05:06Z",
      "merged_at": "2026-01-09T14:05:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34229",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 65,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3132941994,
      "number": 34161,
      "title": "refactor: Avoid UB from `std::distance` with `nullptr` in `PoolAllocator`",
      "body": "### Problem\r\n\r\nCalling `std::distance(nullptr, nullptr)` is undefined behavior per the C++ standard [iterator.requirements.general](https://eel.is/c++draft/iterator.requirements.general#7):\r\n> Iterators can also have singular values that are not associated with any sequence. Results of most expressions are undefined for singular values.\r\n\r\nNull pointers are singular iterators not associated with any sequence, so they cannot form a valid range required by [std::distance](https://eel.is/c++draft/iterator.operations#4):\r\n> Preconditions: last is reachable from first\r\n\r\nWhile [expr.add#5.1](https://eel.is/c++draft/expr.add#5.1) defines pointer subtraction for null pointers:\r\n> If P and Q both evaluate to null pointer values, the value is 0\r\n\r\nThis applies to direct pointer arithmetic (`nullptr - nullptr`), not to `std::distance`, which has additional preconditions requiring non-singular iterators.\r\n\r\n### Fix\r\n\r\nChecked for `nullptr` before calling `std::distance` to avoid this undefined behavior.\r\nThis check only affects the very first call, after which the pointers are initialized.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-28T13:01:04Z",
      "updated_at": "2026-01-09T13:55:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34161",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1169,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3156642178,
      "number": 34235,
      "title": "miniminer: stop assuming ancestor fees >= self fees",
      "body": "These assertions exist to detect double-deducting values when we update descendants. However, negative fees are possible with `prioritisetransaction` so it doesn't make sense to check this.\r\n\r\nLeave the check for sizes because those are never negative.\r\n\r\nFixes #34234\r\n",
      "state": "closed",
      "user": "glozow",
      "created_at": "2026-01-08T15:58:17Z",
      "updated_at": "2026-01-09T11:24:08Z",
      "merged_at": "2026-01-09T11:24:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34235",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 322,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1305116489,
      "number": 27433,
      "title": "getblocktemplate improvements for segwit and sigops",
      "body": "This adds the following commits:\r\n\r\n1. remove unnecessary check for whether SegWit is active\r\n2. drop no longer relevant warning about missing sigops field \r\n3. warn that CheckBlock() underestimates sigops\r\n4. ~mark `default_witness_commitment` result field as not optional~ (_Update 2024-01-09: incorrect, dropped_)\r\n\r\nBased on #26201, because it touches and adds a relevant test to `getblocktemplate`. I can unrebase and pick the test if that PR doesn't make it.\r\n\r\n---\r\nEarlier description, just historical context now.\r\n\r\n**Sigops**\r\n\r\nTwo recent F2Pool blocks violated the sigops limit. Both by 3.\r\n\r\nI suspect they were not using `getblocktemplate`. If you look at the [template](https://miningpool.observer/template-and-block/00000000000000000004e0ec4f27bd3347381e8e19ed98d7f918e8c1c292ae97) right before the valid block at the same height, which was produced two minutes later, you'll see that it matches the block with 3 small transactions difference. In other words, the valid block producer likely did use `getblocktemplate` around the same time and did not experience an issue.\r\n\r\nIt's also clear by looking at [Mempool.Space](https://mempool.space/block/00000000000000000004e0ec4f27bd3347381e8e19ed98d7f918e8c1c292ae97) that the valid block excluded many large bare multisig transactions. Those transactions paid more than enough in fees to be included, but we would have excluded them due to running out of sigops.\r\n\r\nAs can be seen in `BlockAssembler::addPackageTxs` and `TestPackage` we simply don't add a package to the block if it doesn't fit the remaining weight or sigops. Custom block construction software might not do that. I initially though they might have forgotten to check SegWit related sigops, but that seems unlikely given that they were only off by 3 in both blocks.\r\n\r\nI suspect their mistake was to not count the number of sigops in the coinbase: it pays to legacy P2PKH which uses 4 sigops. Our code reserves 400 sigops for the coinbase, so would not have caused this.\r\n\r\n---\r\n_Update 2024-01-09: I dropped the extra debug fields mentioned here_\r\n\r\nAnyway, while checking our code I added a few extra fields to the block statistics of~ `getblocktemplate`:\r\n\r\n* `sigops`: total sigops for the block excluding the coinbase\r\n* `coinbase_reserved_sigops`: how many sigops we reserve for the coinbase (400)\r\n* `weightlimit`\r\n* `coinbase_reserved_weight`\r\n\r\n~I added a belt and suspenders check for the sigops limit in the RPC code.~ (_update 2024-01-09: dropped_) Note that we already check it when adding packages to a block _and_ in `TestBlockValidity`.\r\n\r\n**Segwit**\r\n\r\n~I also removed the need to set `{\"rules\": \"!segwit\"}`, the generation of pre-segwit blocks, and the test code that checks activation.~ _update 2023-08-18: commit removed_",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2023-04-06T18:18:37Z",
      "updated_at": "2026-01-09T10:51:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27433",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 2826,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2190211056,
      "number": 31335,
      "title": "macOS: swap docs & CI from pkg-config to pkgconf",
      "body": "Migrate the macOS build docs and CI from `pkg-config` to `pkgconf`. As the former now just redirects to the later.\r\n\r\nUpstream is currently mass-migrating its formula. i.e https://github.com/Homebrew/homebrew-core/pull/198317.\r\n\r\nFixes #31334.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-20T15:19:53Z",
      "updated_at": "2026-01-09T10:51:33Z",
      "merged_at": "2024-11-21T13:37:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31335",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 292,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154398787,
      "number": 34226,
      "title": "wallet: test: Relative wallet failed migration cleanup",
      "body": "Prior to https://github.com/bitcoin/bitcoin/pull/34156, an issue existed where if migration of a wallet with a relative pathname failed, the relatively specified path where the legacy wallet is would be deleted. This issue predates #32273, because the relative pathnames get stacked together, e.g. \"../../\", the copy conflict bug that caused migration to abort early instead of getting far enough to attempt clean-up that was fixed in #32273 is avoided.\r\n\r\nThis is a functional test demonstrating that we handle failed migration clean-up correctly for relatively-named wallets. To see the issue, you can backport this test onto 29.x: https://github.com/davidgumberg/bitcoin/tree/2026-01-07-rel-migration-test-backport\r\n\r\nI've also added an absolute path failed migration cleanup test. WRT this and #34156, absolute paths exhibit similar behavior to unnamed wallets. Because of the name-conflict bug prior to #32273 an absolute-path migration would fail no matter what because migration would attempt to copy a file to a destination that already exists. But after #32273, absolute-path migration gets past there, and if it fails for some other reason, the same behavior that's fixed in #34156 occurs where the directory containing the wallet file is deleted.",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2026-01-08T01:01:49Z",
      "updated_at": "2026-01-09T10:13:08Z",
      "merged_at": "2026-01-09T10:02:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34226",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1312,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2513877394,
      "number": 32471,
      "title": "wallet/rpc: fix listdescriptors RPC fails to return descriptors with private key information when wallet contains descriptors missing any key",
      "body": "_TLDR:\r\nCurrently, `listdescriptors [private=true]` will fail for a non-watch-only wallet if any descriptor has a missing private key(e.g `tr()`, `multi()`, etc.). This PR changes that while making sure `listdescriptors [private=true]` still fails if there no private keys. Closes #32078_ \r\n\r\nIn non-watch-only wallets, it's possible to import descriptors as long as at least one private key is included. It's important that users can still view these descriptors when they need to create a backup—even if some private keys are missing ([#32078 (comment)](https://github.com/bitcoin/bitcoin/issues/32078#issuecomment-2781428475)). This change makes it possible to do so.\r\n\r\nThis change also helps prevent `listdescriptors true` from failing completely, because one descriptor is missing some private keys.\r\n\r\n### Notes\r\n- The new behaviour is applied to all descriptors including miniscript descriptors\r\n- `listdescriptors true` still fails for watch-only wallets to preserve existing behaviour https://github.com/bitcoin/bitcoin/pull/24361#discussion_r920801352\r\n- Wallet migration logic previously used `Descriptor::ToPrivateString()` to determine which descriptor was watchonly. This means that modifying the `ToPrivateString()` behaviour caused descriptors that were previously recognized as \"watchonly\" to be \"non-watchonly\". **In order to keep the scope of this PR limited to the RPC behaviour, this PR uses a different method to determine `watchonly` descriptors for the purpose of wallet migration.** A follow-up PR can be opened to update migration logic to exclude descriptors with some private keys from the `watchonly` migration wallet. \r\n\r\n### Relevant PRs\r\nhttps://github.com/bitcoin/bitcoin/pull/24361\r\nhttps://github.com/bitcoin/bitcoin/pull/32186\r\n\r\n### Testing\r\nFunctional tests were added to test the new behaviour\r\n\r\nEDIT\r\n**`listdescriptors [private=true]` will still fail when there are no private keys because non-watchonly wallets must have private keys and calling `listdescriptors [private=true]` for watchonly wallet returns an error**",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-05-12T13:26:20Z",
      "updated_at": "2026-01-09T08:35:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32471",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2204,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3149923145,
      "number": 34209,
      "title": "[30.x]: Final backports & 30.2rc1",
      "body": "Backports:\r\n* #34156\r\n* #34215",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-06T16:18:12Z",
      "updated_at": "2026-01-08T20:32:29Z",
      "merged_at": "2026-01-07T15:45:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34209",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 64,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3133089501,
      "number": 34162,
      "title": "net: Avoid undershooting in GetAddressesUnsafe",
      "body": "This is demonstrating an alternative approach to #33663. The author didn't seem to like by suggestion so I am putting it here to be considered by reviewers. I personally prefer this approach due to it's simplicity.\r\n\r\n`GetAddressesUnsafe` filters banned and discouraged addresses if those exist. If addresses are filtered the returned list of addresses can be shorter than originally requested because the list isn't backfilled with more valid addresses. These results end up in `GETADDR` responses as well as the `getnodeaddresses` RPC.\r\n\r\nFix this by requesting all available addresses and filter them, then only trim them to the requested `max_addresses` afterwards. Also adds a functional test which checks the new behavior via `getnodeaddresses` RPC.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-28T17:01:53Z",
      "updated_at": "2026-01-08T20:08:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34162",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 802,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1640676570,
      "number": 29060,
      "title": "Policy: Report debug message why inputs are non standard",
      "body": "This PR is another attempt at  #13525.\r\n\r\nTransactions that fail `PreChecks` Validation due to non-standard inputs now  returns invalid validation state`TxValidationResult::TX_INPUTS_NOT_STANDARD` along with a debug error message.\r\n\r\nPreviously, the debug error message for non-standard inputs do not specify why the inputs were considered non-standard. \r\nInstead, the same error string, `bad-txns-nonstandard-inputs`, used for all types of non-standard input scriptSigs.\r\n\r\nThis PR updates the `AreInputsStandard`  to include the reason why inputs are non-standard in the debug message.\r\nThis improves the `Precheck` debug message to be more descriptive.\r\n\r\nFurthermore, I have addressed all remaining comments from #13525 in this PR.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2023-12-12T13:16:05Z",
      "updated_at": "2026-01-08T16:57:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29060",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 794,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2540887489,
      "number": 32604,
      "title": "log: Mitigate disk filling attacks by rate limiting LogPrintf, LogInfo, LogWarning, LogError",
      "body": "This revives the work done by dergoegge in https://github.com/bitcoin/bitcoin/pull/21603. The approach is similar — this PR uses `std::source_location` under the hood now that we can use c++20 features. It also resets the rate limiting statistics via the `CScheduler`. The logging functions have also changed slightly since that PR was opened, so work has been done to preserve the intent of the original rate limiting change. I have tried to give commit attribution where possible.\r\n\r\n**Approach:**\r\nEach source code location is given an hourly logging quota of 1MiB of logging per hour. Logging is only dropped from source locations that exceed the quota.\r\n- Only logging to disk is rate limited. Logging to console is not rate limited.\r\n- Printing with the category argument is not rate limited.\r\n- `UpdateTip: new best=[…]` is logged without rate limiting. High log volume is expected for that source location during IBD.\r\n- When logging is restarted a tally of how many bytes were dropped is printed.\r\n- All logs will be prefixed with [*] if there is at least one source location that is currently being suppressed.\r\n\r\nI've repurposed the old logging rpc mentioned in #21603 in another branch for testing [here](https://github.com/Crypt-iQ/bitcoin/tree/log_ratelimiting_05192025_rpc). This can be used to log from source locations and test out the new changes in logging behavior. Note that the `setmocktime` RPC needs to be used to set the mock time past the current clock time to reset the logging messages.\r\n\r\nExample usage:\r\n```\r\nbitcoin-cli -regtest excessivelog 1 1048500 # log just under 1MiB\r\nbitcoin-cli -regtest excessivelog 1 100 # this should get the total amount logged above 1MiB\r\n                                        # and the rate limiting logic should kick in\r\nbitcoin-cli -regtest excessivelog 2 1048500\r\nbitcoin-cli -regtest excessivelog 2 100 # trigger rate limiting from another location\r\nbitcoin-cli -regtest mockscheduler 3600 # fast-forward the scheduler\r\nbitcoin-cli -regtest excessivelog 1 100 # this should trigger logging to resume and will log the source locations that were reset\r\n```\r\n\r\nExample output:\r\n```\r\n2025-07-02T22:03:56Z [warning] Excessive logging detected from rpc/node.cpp:142 (RPCHelpMan excessivelog()): >1048576 bytes logged during the last time window of 3600s. Suppressing logging to disk from this source location until time window resets. Console logging unaffected. Last log entry.\r\n[*] 2025-07-02T22:03:56Z aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\n2025-07-02T22:04:58Z (mocktime: 2262-04-11T23:47:15Z) Restarting logging from rpc/node.cpp:142 (RPCHelpMan excessivelog()): 121 bytes were dropped during the last 3600s.\r\n2025-07-02T22:04:58Z (mocktime: 2262-04-11T23:47:15Z) Restarting logging from rpc/node.cpp:139 (RPCHelpMan excessivelog()): 121 bytes were dropped during the last 3600s.\r\n```",
      "state": "closed",
      "user": "Crypt-iQ",
      "created_at": "2025-05-23T20:48:49Z",
      "updated_at": "2026-01-08T16:01:44Z",
      "merged_at": "2025-07-09T18:44:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32604",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3006,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2986611773,
      "number": 33810,
      "title": "ci: Add IWYU job",
      "body": "This PR separates the IWYU checks into its own CI job to provide faster feedback to developers. No other changes are made to the treatment of IWYU warnings. The existing “tidy” CI job will no longer run IWYU.\r\n\r\nSee also the discussion of https://github.com/bitcoin/bitcoin/pull/33779, specifically this [comment](https://github.com/bitcoin/bitcoin/pull/33779#issuecomment-3491515263):\r\n> Maybe a better approach would be to run the enforced sections in a separate, faster job? Some of the linters are already a bit annoying to invoke locally, so I usually just run the lint job. Doing the same for the includes seems fine to me.\r\n\r\nBased on ideas from https://github.com/bitcoin/bitcoin/pull/32953.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-06T23:27:52Z",
      "updated_at": "2026-01-08T14:44:51Z",
      "merged_at": "2025-12-22T17:39:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33810",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 716,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2505488483,
      "number": 32442,
      "title": "doc: guix: Troubleshooting zdiff3 issue and uninstalling.",
      "body": "Add a note about guix issues with git `merge.conflictstyle` being set to `zdiff3`, and add information about how to uninstall for users of `guix-install.sh`",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-07T21:13:22Z",
      "updated_at": "2026-01-08T14:04:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32442",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 214,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 341661607,
      "number": 17493,
      "title": "util: Forbid ambiguous multiple assignments in config file",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580.** The non-base commits are:\n\n- [`92a38cc44c1f` util: Forbid ambiguous multiple assignments in config file](https://github.com/bitcoin/bitcoin/pull/17493/commits/92a38cc44c1f1276d7a0bf513a442d95bf380126)\n- [`20119c310f4e` test: Extend util_ArgsMerge test to check for \"Multiple values specified\" errors](https://github.com/bitcoin/bitcoin/pull/17493/commits/20119c310f4e280488c310427e1fa58f7056e81a)<!-- end -->\n\n---\n\nEnable error \"Multiple values specified for -setting in same section of config file.\", for ALLOW_ANY settings that don't specify ALLOW_LIST.\n\nInstead of silently ignoring settings, this change makes it an error to provide an ambiguous config file that provides assigns multiple values to a single-value setting. Change includes release notes.\n\nPart of the motivation for this change is to improve usability and prevent settings that look valid from being silently ignored. Another motivation is to be able to remove confusing \"reverse precedence\" logic in #17581",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-15T22:11:44Z",
      "updated_at": "2026-01-08T13:51:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17493",
      "labels": [
        "Refactoring",
        "Utils/log/libs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1098,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 344943058,
      "number": 17580,
      "title": "refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags",
      "body": "<!-- begin based-on -->\n**This is based on #16545.** The non-base commits are:\n\n- [`63611e626d1d` common: Add support for combining ArgsManager flags](https://github.com/bitcoin/bitcoin/pull/17580/commits/63611e626d1df47110f25abb1996a1e1fdf1f1b3)\n- [`ad4215b6232a` scripted-diff: Add ALLOW_LIST flag to arguments retrieved with GetArgs](https://github.com/bitcoin/bitcoin/pull/17580/commits/ad4215b6232a6686ba5320745de361da540a3343)\n- [`4a50a44383ab` refactor: Fix more ALLOW_LIST arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/4a50a44383abb73d880eaa014a694ae7bf997fb6)\n- [`e9675b2e490c` Always reject empty -blockfilterindex=\"\" arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/e9675b2e490c697f02a6ee7a0738af986e73b640)\n- [`b10a597029f7` refactor: Stop calling GetArg/IsArgSet on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17580/commits/b10a597029f7562503a840c6b42172d290dd796c)\n- [`b03447e135e5` refactor: Always enforce ALLOW_LIST in CheckArgFlags](https://github.com/bitcoin/bitcoin/pull/17580/commits/b03447e135e56d9ecc4cc1db0da3bfea81098fae)<!-- end -->\n\n---\n\nExcept for two `rpcauth` and `blockfilterindex` fixes (update: rpcauth fix was merged separately in #30401) this PR does not change any behavior outside of tests. It is just supposed to enforce internal consistency and prevent bugs by ensuring that list arguments are always retrieved with GetArgs() and non-list arguments are always retrieved with GetArg(). Followup PRs could use the ALLOW_LIST flags for better documentation and error checking in the future. For example, #17493 builds on this to disallow conflicting config values. \n\nThis change was originally made as part of #17493",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:05:39Z",
      "updated_at": "2026-01-08T13:48:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17580",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1769,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 344944113,
      "number": 17581,
      "title": "refactor: Remove settings merge reverse precedence code",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580 + #17493.** The non-base commits are:\n\n- [`cf96858dfbfa` refactor: Remove settings merge reverse precedence code](https://github.com/bitcoin/bitcoin/pull/17581/commits/cf96858dfbfa708c46179503ad45ab8c96714bf2)<!-- end -->\n\n---\n\nThis has no effect on behavior because as of https://github.com/bitcoin/bitcoin/pull/17493 it's not possible to specify multiple values for single value settings in the config file.\n\nThis change implements one of the settings simplifications listed in #17508",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:17:13Z",
      "updated_at": "2026-01-08T13:45:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17581",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 601,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 355780577,
      "number": 17783,
      "title": "common: Disallow calling IsArgSet() on ALLOW_LIST options",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580.** The non-base commits are:\n\n- [`38a9cd538884` common: Disallow calling IsArgSet() on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17783/commits/38a9cd5388846e91cef49782c2050b0a8d14a85b)<!-- end -->\n\n---\n\nDisallow calling IsArgSet() function on ALLOW_LIST options. Code that uses IsArgSet() with list options is confusing and leads to bugs when IsArgSet() returns true, but GetArgs() returns an empty list, so the option is considered enabled even though it is empty. This led to a number of bugs which are fixed in #30529",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-12-20T15:36:53Z",
      "updated_at": "2026-01-08T13:42:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17783",
      "labels": [
        "Utils/log/libs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 655,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154046113,
      "number": 34221,
      "title": "test: migration, avoid backup name mismatch in default_wallet_failure",
      "body": "This is a possible test failure, pushing it in case the CI starts complaining.\r\nThe change affects only test code; no cpp logic is involved.\r\n\r\nThe `test_default_wallet_failure` migration test calls the function\r\n`migrate_and_get_rpc()`, which sets the mock time internally. But, at the\r\nsame time, the test already caches the mock time value, to later use it\r\nin the backup existence check.\r\nSetting the mock time twice can lead to a name mismatch during the\r\nmentioned check (diff timestamp == diff backup names), which could\r\ncause the test to fail.\r\n\r\nThe fix is very simple, just need to call the migration RPC directly.\r\nSince the test expects the migration to fail, `migrate_and_get_rpc()` is\r\nunnecessary here. I'm surprised the CI hasn't complained about this yet.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2026-01-07T21:41:20Z",
      "updated_at": "2026-01-08T13:17:01Z",
      "merged_at": "2026-01-08T10:12:11Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34221",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 843,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1717651443,
      "number": 29409,
      "title": "multiprocess: Add capnp wrapper for Chain interface",
      "body": "Changes making it possible to call `interface::Chain` over a socket.\r\n\r\nNote: The changes in this PR allow a `bitcoin-node` process to be controlled over a socket. The socket can either be an UNIX socket created by specifying the `-ipcbind` option, or it can be a socketpair created by a controlling process and passed to `bitcoin-node` via the `-ipcfd=<n>` with a file descriptor number. This PR is a dependency of #10102 which allows the wallet code to run in a separate process and use the `Chain` interface.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-02-08T13:54:40Z",
      "updated_at": "2026-01-08T12:41:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29409",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 675,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3155828995,
      "number": 34231,
      "title": "consensus: Fix potential null pointer crash in CalculateSequenceLocks",
      "body": "This PR fixes a potential null pointer dereference crash in the `CalculateSequenceLocks` function when processing time-based sequence locks with invalid input heights.\r\n\r\n### Problem\r\nThe `CalculateSequenceLocks` function in `src/consensus/tx_verify.cpp` was using `Assert(block.GetAncestor(std::max(nCoinHeight - 1, 0)))->GetMedianTimePast()` which could return a null pointer when the ancestor block doesn't exist (e.g., when input height is greater than current block height), leading to a crash when attempting to dereference it.\r\n\r\n### Solution\r\nModified the code to safely check if the ancestor block exists before attempting to access its median time past. When the ancestor lookup fails, the time-based sequence lock calculation is skipped for that input, preventing the crash while maintaining correct behavior.\r\n\r\n### Changes\r\n- **src/consensus/tx_verify.cpp**: Added null pointer check in `CalculateSequenceLocks` before accessing ancestor block for time-based sequence locks\r\n- **src/test/transaction_tests.cpp**: Added comprehensive unit tests covering edge cases for invalid heights, valid heights, and empty transactions\r\n- **test/functional/feature_bip68_sequence.py**: Added functional regression test to verify the fix works in real transaction processing\r\n\r\n### Testing\r\nThe fix includes:\r\n- Unit tests for `CalculateSequenceLocks` with invalid input heights (regression test)\r\n- Unit tests for normal operation with valid heights  \r\n- Unit tests for edge cases like empty transactions\r\n- Functional test that creates and processes a transaction with time-based sequence locks to ensure no crash occurs\r\n\r\nAll tests pass and the change maintains backward compatibility while preventing the crash scenario.",
      "state": "closed",
      "user": "tboy1337",
      "created_at": "2026-01-08T11:35:52Z",
      "updated_at": "2026-01-08T12:32:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34231",
      "labels": [
        "Consensus",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1794,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1953405839,
      "number": 30391,
      "title": "BlockAssembler: return selected packages virtual size and fee",
      "body": "This PR enables `BlockAssembler` to add all selected packages' fee and virtual size to a vector, and then return the vector as a member of `CBlockTemplate` struct.\r\n\r\nThis PR is the first step in the https://github.com/bitcoin/bitcoin/issues/30392 project.\r\n\r\nThe packages' vsize and fee are used in #30157 to select a percentile fee rate of the top block in the mempool.\r\n\r\n\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2024-07-04T11:04:11Z",
      "updated_at": "2026-01-08T10:50:59Z",
      "merged_at": "2025-01-08T18:01:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30391",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 439,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3150991170,
      "number": 34215,
      "title": "wallettool: fix unnamed createfromdump failure walletsdir deletion",
      "body": "As pointed out in https://github.com/bitcoin/bitcoin/pull/34156#issuecomment-3716728670, it is possible for `createfromdump` to also accidentally delete the entire wallets directory if the wallet name is the empty string and the dumpfile contains a checksum error.\r\n\r\nThis is also fixed by removing the files created by only removing the directory for named wallets, and avoiding the use of `fs::remove_all`.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-07T00:15:45Z",
      "updated_at": "2026-01-08T10:27:55Z",
      "merged_at": "2026-01-07T14:32:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34215",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2901201712,
      "number": 33585,
      "title": "cmake: Use builtin support for .manifest files",
      "body": "Remove some redundant logic from the CMake code:\r\n\r\n* The `WIN32_EXECUTABLE` target property only has an effect when building for `WIN32`. Checking `WIN32` is redundant.\r\n* CMake has builtin support for `.rc` and `.manifest` files. Both may be added to sources unconditionally. They only have an effect when building for `WIN32`.\r\n",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-10-09T15:44:53Z",
      "updated_at": "2026-01-08T06:19:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33585",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 378,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2934151848,
      "number": 33671,
      "title": "wallet: Add separate balance info for non-mempool wallet txs",
      "body": "Changes `getbalances` to report the sum of txos spent by transactions that aren't confirmed nor in the mempool (eg due to being part of too long a mempool chain, or spending non-standard outputs, or having a datacarrier output that exceeds `-datacarriersize`, etc). Those values are added to the trusted/untrusted_pending/immature/used fields as appropriate (where previously they were skipped), and subtracted from the new nonmempool field, so that the sum of all fields remains the same.\r\n\r\nFor example:\r\n\r\n```\r\n$ bitcoin-cli -regtest getbalances\r\n{\r\n  \"mine\": {\r\n    \"trusted\": 6049.99999220,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 3200.00000780,\r\n    \"nonmempool\": -100.00000000\r\n  },\r\n  \"lastprocessedblock\": {\r\n    \"hash\": \"3ab4582226d5e8ad76438db48d76e822c31bce2cdbc7ba82a5d974a277515d0d\",\r\n    \"height\": 221\r\n  }\r\n}\r\n```\r\n\r\nCloses #11887",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-10-21T16:59:13Z",
      "updated_at": "2026-01-08T05:49:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33671",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 922,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3142897675,
      "number": 34193,
      "title": "wallet: make migration more robust against failures",
      "body": "This is just me finding a few more edge cases after #34156 and #34176\r\n\r\nThe goal of the PR is to handle failures in a controlled way. Just so the process can automatically restore the original wallet without requiring user manual intervention.\r\n\r\nThe covered cases are:\r\n\r\n1. During `DoMigration()`: There are methods that can throw exceptions and abruptly abort the process. \r\nInstead of crashing (GUI) or returning a generic exception, we now will catch and return the error gracefully. This lets the process restore the original wallet automatically.\r\n\r\n2. Trying to migrate a wallet in a read-only directory throws a filesystem exception and skips cleanup.\r\n Now the process will fail gracefully with a clear error msg, and automatically restore the original wallet.\r\n\r\n3. Any failure during `MigrateToSQLite` requires user manual intervention. \r\nNow the original wallet db will remain untouched, and only be updated once the sqlite db creation fully succeeds.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-01-02T20:59:40Z",
      "updated_at": "2026-01-08T03:56:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34193",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1017,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3143827627,
      "number": 34198,
      "title": "wallet: fix ancient wallets migration",
      "body": "We currently fail migration if the wallet does not contain the best block locator.\r\nThis is a problem for wallets created before https://github.com/bitcoin/bitcoin/pull/152, which are not storing such record.\r\n\r\nMissing this record is not an error. it simply means the wallet will scan the chain prior\r\nto finish migration.\r\n\r\nNote:\r\nOriginally I wrote the test using a BDB library (`bsddb3`) but I wasn't happy with the\r\nnew dependency, and ended up zeroing the record length manually. I'm not sure this\r\nwill work on every platform. If it doesn't, we can just just drop the test as this can be\r\ntested manually on any ancient wallet too.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-01-03T20:03:34Z",
      "updated_at": "2026-01-08T01:54:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34198",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 677,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134270217,
      "number": 34170,
      "title": "fuzz: Extend `scriptpubkeyman` coverage",
      "body": "Add fuzzing coverage for several missing `DescriptorScriptPubKeyMan` methods.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2025-12-29T12:04:50Z",
      "updated_at": "2026-01-07T23:36:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34170",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 117,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2927705886,
      "number": 33657,
      "title": "rest: allow reading partial block data from storage",
      "body": "It allows fetching specific transactions using an external index, following https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3267485313 and will be used by https://github.com/romanz/bindex (allowing much more efficient encoding).\r\n\r\nCurrently, electrs and other indexers map between an address/scripthash to the list of the relevant transactions.\r\n\r\nHowever, in order to fetch those transactions from bitcoind, electrs relies on reading the whole block and post-filtering for a specific transaction[^1]. \r\nOther indexers use a `txindex` to fetch a transaction using its txid [^2][^3][^4]. This approach has significant storage and CPU overhead, since the `txid` is a pseudo-random 32-byte value. Also, mainnet `txindex` takes ~60GB today.\r\n\r\nThis PR is adding support for using the transaction's position within its block to be able to fetch it directly using [REST API](https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md), using the following HTTP request:\r\n\r\n```\r\nGET /rest/blockpart/BLOCKHASH.bin?offset=OFFSET&size=SIZE\r\n```\r\n\r\n- The offsets' index can be encoded much more efficiently ([~1.3GB today](https://github.com/romanz/bindex-rs/pull/66#issuecomment-3508476436)).\r\n\r\n- Address history query performance can be tested on mainnet using [1BitcoinEaterAddressDontSendf59kuE](https://mempool.space/address/1BitcoinEaterAddressDontSendf59kuE) - assuming warm OS block cache, [it takes <1s to fetch 5200 txs, i.e. <0.2ms per tx](https://github.com/romanz/bindex-rs/pull/66#issuecomment-3508476436) with [bindex](https://github.com/romanz/bindex-rs).\r\n\r\n- Only binary and hex response formats are supported.\r\n\r\n[^1]: https://github.com/romanz/electrs/blob/master/doc/schema.md\r\n[^2]: https://github.com/Blockstream/electrs/blob/new-index/doc/schema.md#txstore\r\n[^3]: https://github.com/spesmilo/electrumx/blob/master/docs/HOWTO.rst#prerequisites\r\n[^4]: https://github.com/cculianu/Fulcrum/blob/master/README.md#requirements\r\n\r\n",
      "state": "closed",
      "user": "romanz",
      "created_at": "2025-10-19T11:08:00Z",
      "updated_at": "2026-01-07T19:06:06Z",
      "merged_at": "2025-12-12T13:22:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33657",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2012,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2456159359,
      "number": 32262,
      "title": "build: Restore cross-compilation for Android",
      "body": "This PR restores cross-compilation for Android, which was temporarily removed in https://github.com/bitcoin/bitcoin/pull/30049.\r\n\r\nMarking as a draft for now, as CI integration still needs to be added.\r\n\r\n---\r\n\r\n**Note for Reviewers:**\r\n\r\n1. Qt does not officially support static linking for Android. See:\r\n - https://bugreports.qt.io/browse/QTBUG-36097\r\n - https://bugreports.qt.io/browse/QTBUG-102326\r\n\r\nAs a result, two patches have been applied:\r\n- [`qt/fix_android_jni_static.patch`](https://github.com/bitcoin/bitcoin/blob/fec1a7029a9404bef5b1d7ea2173f69d78143e8c/depends/patches/qt/fix_android_jni_static.patch), which is essentially the same as the one introduced in https://github.com/bitcoin/bitcoin/pull/16110.\r\n- [`qt/fix_android_duplicate_symbol.patch`](https://github.com/bitcoin/bitcoin/blob/fec1a7029a9404bef5b1d7ea2173f69d78143e8c/depends/patches/qt/fix_android_duplicate_symbol.patch), which is a new addition.\r\n\r\n2. For testing, please refer to the [Android Build Guide](https://github.com/bitcoin/bitcoin/blob/fec1a7029a9404bef5b1d7ea2173f69d78143e8c/doc/build-android.md).\r\n\r\n---\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/32254.\r\n\r\nAlso see https://github.com/bitcoin/bitcoin/issues/29360.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-13T16:48:25Z",
      "updated_at": "2026-01-07T17:27:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32262",
      "labels": [
        "Build system",
        "Android"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1265,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3150725158,
      "number": 34214,
      "title": "policy: restore 80-byte default for datacarriersize",
      "body": "Restore the historical default of 80 bytes (83 with OP_RETURN + pushdata overhead) for -datacarriersize, while preserving the ability for node operators to configure any limit they prefer.\r\n\r\nThis is not a hard cap - users can still set -datacarriersize=100000 (or any value) to allow larger OP_RETURN outputs. The change only affects the default behavior when no explicit configuration is provided.\r\n\r\nRationale:\r\n- The unlimited default introduced in #32406 remains controversial\r\n- ~20% of nodes run Bitcoin Knots which maintains the 80-byte default\r\n- Inscriptions have no economic incentive to move to OP_RETURN since witness data is ~4x cheaper due to the segwit discount\r\n- Restoring the default provides a middle ground while respecting node operator choice\r\n\r\nTest changes add explicit -datacarriersize=100000 to tests that require large OP_RETURN outputs for transaction padding.",
      "state": "closed",
      "user": "bensig",
      "created_at": "2026-01-06T21:29:16Z",
      "updated_at": "2026-01-07T16:47:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34214",
      "labels": [
        "TX fees and policy",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 941,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3131890251,
      "number": 34156,
      "title": "wallet: fix unnamed legacy wallet migration failure",
      "body": "Minimal fix for #34128.\r\n\r\nThe issue occurs during the migration of a legacy unnamed wallet\r\n(the legacy \"default\" wallet). When the migration fails, the cleanup\r\nlogic is triggered to roll back the state, which involves erasing the\r\nnewly created descriptor wallets directories. Normally, this only\r\naffects the parent directories of named wallets, since they each\r\nreside in their own directories. However, because the unnamed\r\nwallet resides directly in the top-level `/wallets/` folder, this\r\nlogic accidentally deletes the main directory.\r\n\r\nThe fix ensures that only the wallet.dat file of the unnamed wallet\r\nis touched and restored, preserving the wallet in BDB format and\r\nleaving the main `/wallets/` directory intact.\r\n\r\n#### Story Line:\r\n#32273 fixed a different set of issues and, in doing so, uncovered\r\nthis one.\r\nBefore the mentioned PR, backups were stored in the same directory\r\nas the wallet.dat file. On a migration failure, the backup was then\r\ncopied to the top-level `/wallets/` directory. For the unnamed legacy\r\nwallet, the wallet directory is the `/wallets/` directory, so the source\r\nand destination paths were identical. As a result, we threw early in the\r\n`fs::copy_file` call ([here](https://github.com/bitcoin/bitcoin/blob/29.x/src/wallet/wallet.cpp#L4572)) because the file already existed, as we\r\nwere trying to copy the file onto itself. This caused the cleanup logic\r\nto abort early on and never reach the removal line.\r\n\r\n\r\n#### Testing Notes:\r\nCherry-pick the test commit on top of master and run it. You will\r\nsee the failure and realize the reason by reading the test code.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2025-12-27T04:08:33Z",
      "updated_at": "2026-01-07T15:27:32Z",
      "merged_at": "2026-01-07T11:09:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34156",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1664,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2582853972,
      "number": 32724,
      "title": "Musig2 tests",
      "body": "Built on https://github.com/bitcoin/bitcoin/pull/31244\r\n\r\nThis PR adds explicit tests for Bitcoin Core's MuSig2 interface.\r\n\r\nAny issues in musig2.{cpp,h} will likely also be caught by the descriptor tests, but having more detailed tests for the MuSig2 class itself improves test reporting/coverage.\r\n\r\nIt uses BIP 328 test vectors.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-06-11T02:08:39Z",
      "updated_at": "2026-01-07T12:42:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32724",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 345,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2258408513,
      "number": 31595,
      "title": "qa: Ensure consistent use of decimals instead of floats",
      "body": "On NetBSD, with newer Python versions 3.12.8 and 3.13.1, many functional tests fail due to `float` numbers internal representation.\r\n\r\nA typical error looks as follows:\r\n```\r\n$ python3.12 ./build/test/functional/feature_assumeutxo.py\r\n...\r\n2025-01-02T20:43:01.865000Z TestFramework (INFO): Submit a spending transaction for a snapshot chainstate coin to the mempool\r\n2025-01-02T20:43:01.889000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_assumeutxo.py\", line 563, in run_test\r\n    raw_tx = n1.createrawtransaction([prevout], {getnewdestination()[2]: 24.99})\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 146, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: Invalid amount (-3)\r\n2025-01-02T20:43:01.954000Z TestFramework (INFO): Stopping nodes\r\n...\r\n```\r\n\r\nRunning the same test with `--tracerpc`:\r\n```\r\n$ python3.12 ./build/test/functional/feature_assumeutxo.py --tracerpc\r\n...\r\n-2269-> createrawtransaction [[{\"txid\": \"7935c5e149f7206122dfc8de0db6e5b2484923650b94ed56b8612609b896e021\", \"vout\": 0, \"scriptPubKey\": \"76a9142b4569203694fc997e13f2c0a1383b9e16c77a0d88ac\"}], {\"bcrt1pehl52uxx4ndz844j2xkasc3kqesyfmjhfukx42wdte2u5elzxhgqf9nnkt\": 24.989999999999998}]\r\n<-- [0.013652] {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-3,\"message\":\"Invalid amount\"},\"id\":2269}\r\n\r\n2025-01-03T08:17:42.532000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_assumeutxo.py\", line 563, in run_test\r\n    raw_tx = n1.createrawtransaction([prevout], {getnewdestination()[2]: 24.99})\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 146, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: Invalid amount (-3)\r\n2025-01-03T08:17:42.588000Z TestFramework (INFO): Stopping nodes\r\n...\r\n```\r\n\r\nThis PR fixes this issue by consistent use of `Decimal` numbers.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-02T20:50:39Z",
      "updated_at": "2026-01-07T10:50:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31595",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3087,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2258555434,
      "number": 31596,
      "title": "doc: Clarify comments about endianness after #30526",
      "body": "This is a documentation-only change following up on suggestions made in the #30526 review.\r\n\r\nMotivation for this change is that I was recently reviewing #31583, which reminded me how confusing the arithmetic blob code was and made me want to write better comments.\r\n",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-01-02T23:39:07Z",
      "updated_at": "2026-01-07T10:50:31Z",
      "merged_at": "2025-01-06T23:53:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31596",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 319,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3151728637,
      "number": 34218,
      "title": "test: Fix Python compatibility issues in test framework",
      "body": "This PR addresses cross-platform compatibility issues in the Bitcoin Core test framework:\r\n\r\n### Changes\r\n- **Windows compatibility**: Add proper error handling for `os.geteuid()` in `skip_if_no_bpf_permissions()` method, which doesn't exist on Windows systems\r\n- **Consistent return behavior**: Fix inconsistent return statements in `inspect_sqlite_db()` method to ensure proper error handling when sqlite3 is unavailable\r\n\r\n### Testing\r\n- Verified the test framework compiles successfully on both Windows and Unix-like systems\r\n- Confirmed pylint score improved from 6.67/10 to 6.75/10\r\n- No impact on existing test functionality\r\n\r\n### Motivation\r\nThese fixes ensure the test framework works correctly across all supported platforms (Windows, macOS, Linux) and improve error handling robustness.",
      "state": "closed",
      "user": "tboy1337",
      "created_at": "2026-01-07T08:16:57Z",
      "updated_at": "2026-01-07T10:41:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34218",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 854,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3151727009,
      "number": 34217,
      "title": "contrib: Fix Python issues in makeseeds.py",
      "body": "This PR addresses several code quality issues in the `contrib/seeds/makeseeds.py` script:\r\n\r\n### Changes\r\n- **Remove unused variable**: Eliminate unused `i` variable in the `filterbyasn` function enumeration\r\n- **Simplify control flow**: Remove unnecessary `else` clause after `return` statement in `parseline` function\r\n- **Fix file encoding**: Add explicit UTF-8 encoding specification to file operations for better cross-platform compatibility\r\n- **Correct type annotation**: Fix incorrect type annotation for `asn_count` dictionary that was causing type checking errors\r\n\r\n### Testing\r\n- Verified the script compiles successfully after changes\r\n- Confirmed pylint score improved from 8.59/10 to 8.78/10\r\n- No functional changes to the seed generation logic\r\n\r\n### Motivation\r\nThese changes improve code maintainability and fix compatibility issues without altering the core functionality of the seed generation process.",
      "state": "closed",
      "user": "tboy1337",
      "created_at": "2026-01-07T08:16:21Z",
      "updated_at": "2026-01-07T10:41:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34217",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 966,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2527184806,
      "number": 32554,
      "title": "bench: replace embedded raw block with configurable block generator",
      "body": "### Problem\r\n\r\nThe [hardcoded benchmark block 413567](https://mempool.space/block/413567) has several issues:\r\n- embeds 1.1MB of binary data in the repository\r\n- mined in 2016, predates SegWit v0, Taproot, and modern script types\r\n- benchmarks cannot test different transaction patterns or script mixes\r\n- updating to a newer block (e.g., [#32457](https://github.com/bitcoin/bitcoin/pull/32457)) would still add binary bloat and would remain inflexible\r\n\r\n### Fix\r\n\r\nAdded configurable `bench/block_generator.{h,cpp}` that builds fully valid blocks at runtime providing blocks or raw serialized stream.\r\n\r\nNote that `HexStrBench` was simplified to work with random data - it doesn't need to be block-related.\r\n\r\n---\r\n\r\nThis supersedes #32457 by eliminating the need for any hardcoded block data while enabling flexible benchmark scenarios.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-18T21:39:14Z",
      "updated_at": "2026-01-07T04:04:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32554",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 907,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2679273445,
      "number": 33018,
      "title": "coins: remove SetFresh method from CCoinsCacheEntry",
      "body": "There is plenty of test code that exercises the code path for FRESH-but-not-DIRTY coins in CCoinsViewCache. However, we can see there is only one place in production code where we call `SetFresh` that is not preceded by `SetDirty`. This is in `CCoinsViewCache::FetchCoin` and we can see that this is called if the coin retrieved from `base->GetCoin` is spent. The `base` in this case can be another `CCoinsViewCache` or a `CCoinsViewDB`. In `CCoinsViewCache::GetCoin` we can see that we do not return spent coins, and in `CCoinsViewDB` we don't ever store spent coins so there are none to return.\r\n\r\nThus, we can safely remove this dead code, and now we can see that there are never any calls to `SetFresh` not preceded by `SetDirty`. This PR removes this dead code and replaces `SetFresh` by passing a `fresh` boolean flag to `SetDirty`. This simplifies the logic of `CCoinsViewCache` and lets us remove test cases checking for FRESH-but-not-DIRTY coins. It removes the possibility of FRESH-but-not-DIRTY coins being called from any code path, so we can eliminate this state entirely and reduce the cognitive load of having to consider it.\r\n\r\nThis is pulled out from https://github.com/bitcoin/bitcoin/pull/30673 to make the change simpler.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-07-19T19:21:35Z",
      "updated_at": "2026-01-07T02:36:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33018",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1293,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2876629729,
      "number": 33512,
      "title": "coins: use number of dirty cache entries in flush warnings/logs",
      "body": "Revival of https://github.com/bitcoin/bitcoin/pull/31703 with all outstanding review feedback addressed.\r\n\r\n<details>\r\n<summary>Changes compared to the original</summary>\r\n\r\n* `EmplaceCoinInternalDANGER` is also fuzz tested now\r\n* Warning and logging moved from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite`, ensuring `AssumeUTXO` snapshot writes also display progress warnings\r\n* Removed the redundant changed counter in `BatchWrite` since we now track `dirty_count` directly\r\n* All instances use `dirty_count` (not num_dirty) and parameter alignment is corrected\r\n\r\n</details>\r\n\r\n----\r\n\r\n> Since #28280 and #28233, the percentage of dirty entries in the cache when a flush happens may in practice be far from 100%. The log output, the decision to warn about a large flush (#31534), and the disk-full detection, however always use the entire size of the cache.\r\n>\r\n> Fix this by keeping track of the number of dirty entries in `CCoinsViewCache`, and using that number. We've dropped the usage of `DynamicMemoryUsage` as it's the wrong metric, even before the non-wiping flushes were introduced (if everything is dirty, memory usage is correlated with, but not the same as, the amount of disk space written or used). They could be improved by keeping track of proper write size estimates in a follow-up, but here we're just using a fixed 48 bytes per entry estimate.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-01T02:24:51Z",
      "updated_at": "2026-01-07T00:55:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33512",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 1433,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3122391939,
      "number": 34135,
      "title": "rpc: [wallet] Use unsigned type for tx version in sendall",
      "body": "It is confusing to parse the unsigned tx version as a signed type. Also, it makes it harder to use the integer sanitizer.\r\n\r\nCan be tested via:\r\n\r\n* Build with the flags `-DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero`\r\n* Set the existing suppressions: `export UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=0:report_error_type=1\"`\r\n* Start the RPC server, e.g. `./bld-cmake/bin/bitcoin-qt -datadir=/tmp -regtest -server`\r\n* Call the sendall RPC, e.g. `./bld-cmake/bin/bitcoin-cli -datadir=/tmp -regtest -named sendall '[\"bcrt1qlrt3xps4wxpfcjmljrayr2ualczmnfvd4vzdq3\"]' fee_rate=1.234  version=-1`\r\n\r\nBefore:\r\n\r\n```\r\nsrc/wallet/rpc/spend.cpp:1470:42: runtime error: implicit conversion from type 'int' of value -1 (32-bit, signed) to type 'uint32_t' (aka 'unsigned int') changed the value to 4294967295 (32-bit, unsigned)\r\n\r\nInvalid parameter, version out of range(1~3)\r\n```\r\n\r\nAfter:\r\n\r\n```\r\nJSON integer out of range\r\n\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T10:10:57Z",
      "updated_at": "2026-01-06T23:59:04Z",
      "merged_at": "2026-01-06T23:59:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34135",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1098,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3037988791,
      "number": 33929,
      "title": "test: Remove `system_tests/run_command` runtime dependencies",
      "body": "`system_tests` currently rely on `cat`, `echo`, `false` and `sh` being available in `PATH` at runtime.\r\n\r\nThis PR:\r\n1. Removes these dependencies.\r\n2. Reduces the number of platform-specific code paths.\r\n\r\nThe change is primarily motivated by my work on maintaining the [`bitcoin-core`](https://packages.guix.gnu.org/packages/bitcoin-core) package in Guix. It enables the removal of the existing `bash` and `coreutils` native inputs, which in turn makes it possible to drop the implicit dependency on `qtbase@5` (see https://codeberg.org/guix/guix/pulls/4386#issuecomment-8613333).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-23T23:03:10Z",
      "updated_at": "2026-01-06T19:41:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33929",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 642,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3150427919,
      "number": 34212,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "BitcoinMechanic",
      "created_at": "2026-01-06T19:26:08Z",
      "updated_at": "2026-01-06T19:26:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34212",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3068399395,
      "number": 34001,
      "title": "test: fix test_limit_enforcement_package",
      "body": "The current test has a couple issues:\r\n\r\n1) the parent_tx_good is regenerating the exact same transaction that is already in the cluster, so it's resulting in no replacements on submission\r\n2) once fixed, the additional fee needs to be allocated to the parent transaction in the package, not the child. If the RBF fees are allocated to the child, this triggers the package RBF logic, which requires no in-mempool ancestors to be present.\r\n\r\nFix the bug and add a few assertions to protect against regressions.\r\n\r\n",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2025-12-03T18:00:12Z",
      "updated_at": "2026-01-06T18:48:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34001",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 554,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1655695603,
      "number": 29136,
      "title": "wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor",
      "body": "It is sometimes useful for the wallet to have keys that it can sign with but are not (initially) involved in any scripts, e.g. for setting up a multisig. Ryanofsky [suggested](https://github.com/bitcoin/bitcoin/pull/26728#issuecomment-1867721948) A `unused(KEY)` descriptor which allows for a key to be specified, but produces no scripts. These can be imported into the wallet, and subsequently retrieved with `gethdkeys`. Additionally, `listdescriptors` will output these descriptors so that they can be easily backed up.\r\n\r\nIn order to make it easier for people to add HD keys to their wallet, and to generate a new one if they want to rotate their descriptors, an `addhdkey` RPC is also added. Without arguments, it will generate a new HD key and add it to the wallet via a `unused(KEY)` descriptor. If provided a private key, it will construct the descriptor and add it to the wallet.\r\n\r\nSee also: https://github.com/bitcoin/bitcoin/pull/26728#issuecomment-1866961865\r\n\r\nBased on #29130 as `gethdkeys` is useful for testing this.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-12-22T23:40:15Z",
      "updated_at": "2026-01-06T15:56:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29136",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1117,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3107754676,
      "number": 34085,
      "title": "cluster mempool: exploit SFL properties in txgraph",
      "body": "Part of #30289, follow-up to #32545.\r\n\r\nThis gets rid of `FixLinearization()` by integrating the functionality into `Linearize()`, and makes txgraph exploit that (by delaying fixing of clusters until their first re-linearization). It also reduces (but does not eliminate) the number of calls to `PostLinearize`, as the SFL linearization effectively performs something very similar to postlinearization when loading in an existing linearization already.",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-12-16T21:21:15Z",
      "updated_at": "2026-01-06T15:51:51Z",
      "merged_at": "2026-01-06T15:51:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34085",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 503,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2723544087,
      "number": 33142,
      "title": "test: Run bench sanity checks in parallel with functional tests",
      "body": "The ctest target `bench_sanity_check` has many issues:\r\n\r\n* With sanitizers enabled, it is one of the slowest targets, often taking several minutes. See https://github.com/bitcoin/bitcoin/issues/32770#issuecomment-2984264066.\r\n* There is no insight from ctest into how long each individual sanity check takes.\r\n* On a timeout, or OOM issue, there is no insight into which sub-bench failed. The failure will generally just look like `75/153 Test   #9: bench_sanity_check ...................***Failed  770.84 sec    out of memory`\r\n* Places that can't use ctest (like the Windows-cross CI task) have to explicitly run it, or risk forgetting to run it.\r\n* All benchmarks are run sequentially, when they could run in parallel instead.\r\n\r\nBoth issues can lead to CI timeouts and leave CPU unused during testing.\r\n\r\nFix all issues by running it as part of the functional tests instead. This is similar to the rpcauth tests (https://github.com/bitcoin/bitcoin/pull/32881) and util tests [bitcoin-tx, and bitcoin-util] (https://github.com/bitcoin/bitcoin/pull/32697).",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-08-06T08:30:16Z",
      "updated_at": "2026-01-06T14:03:00Z",
      "merged_at": "2026-01-05T23:48:11Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33142",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1123,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2607107167,
      "number": 32784,
      "title": "wallet: derivehdkey RPC to get xpub at arbitrary path",
      "body": "Given a (blank) wallet with an `unused(KEY)` descriptor, `derivehdkey \"m/87h/0h/0h\"` gets the xpub or xpriv at any given path.\r\n\r\nThis is particularly useful for multisig setup where it's not desirable to use our default derivations (e.g. 44h).\r\n\r\nI updated the multisig tutorial and the functional test.\r\n\r\nBased on:\r\n- #29136",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-06-20T11:04:39Z",
      "updated_at": "2026-01-06T12:09:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32784",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 381,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2637847621,
      "number": 32861,
      "title": "Have createwalletdescriptor auto-detect an unused(KEY)",
      "body": "The `createwalletdescriptor` was introduced in #29130 to let users add a `tr()` descriptor to an existing SegWit wallet. The new `addhdkey` method from #29136 introduces a new potential workflow: start from a blank wallet, generate an HD and then add only the descriptors you need, e.g.:\r\n\r\n```sh\r\nbitcoin rpc createwallet TaprootMaxi blank=true\r\nbitcoin rpc addhdkey\r\nbitcoin rpc createwalletdescriptor bech32m\r\n```\r\n\r\nBefore this PR the last line would fail, requiring the user to call `gethdkeys` and copy-paste the xpub.\r\n\r\nThis PR makes `createwalletdescriptor` a bit smarter so it just finds the `unused(KEY)` generated by `hdkey` and uses that.\r\n\r\nIf multiple `unused(KEY)` descriptors are present the user still has to pick one.\r\n\r\nA potential followup is to make our [multisig tutorial](https://github.com/bitcoin/bitcoin/blob/master/doc/multisig-tutorial.md) slightly safer to use. Rather than creating a full wallet, the instruction could be changed to start with a blank wallet and only generate the default legacy descriptor. This avoids accidental use of single sig `p2sh-segwit` and `bech32` addresses.\r\n\r\n(I might do that in #32784, which introduces some other improvements to the tutorial. The situation is still not great; ideally the `importdescriptors` RPC is enhanced to detect when an `xpub` is a child of an hd key and then treats it as if an xpriv was imported.)\r\n\r\nBuilds on #29136.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-03T08:55:40Z",
      "updated_at": "2026-01-06T11:57:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32861",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1462,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3146612873,
      "number": 34203,
      "title": "doc: p2p: replace last remaining \"command\" terminology with \"message type\"",
      "body": "This small PR is (presumably) the final one in a long series of replacing the confusing \"command\" terminology with \"message type\" when referring to the header field of P2P messages, see #18533, #18937, #24078, #24141 and #31163.\r\n\r\nThe instances were found manually via `$ git grep -i command`, hope I didn't miss any.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2026-01-05T15:21:23Z",
      "updated_at": "2026-01-06T11:02:07Z",
      "merged_at": "2026-01-06T09:45:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34203",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 393,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2242119371,
      "number": 31526,
      "title": "doc: Install `net/py-pyzmq` port on FreeBSD for `interface_zmq.py`",
      "body": "On FreeBSD, Python's `zmq` module is provided as a separate port.\r\n\r\nThis PR updates the FreeBSD Build Guide to include this port, enabling the `interface_zmq.py` functional test.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-18T12:21:43Z",
      "updated_at": "2026-01-06T10:50:09Z",
      "merged_at": "2025-01-06T11:36:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31526",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 246,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2248097483,
      "number": 31552,
      "title": "depends: Update capnproto to 1.1.0",
      "body": "This change fixes compilation on NetBSD with GCC 14:\r\n\r\n```\r\n$ gmake -C depends capnp MULTIPROCESS=1 CC=/usr/pkg/gcc14/bin/gcc CXX=/usr/pkg/gcc14/bin/g++\r\ngmake: Entering directory '/home/hebasto/dev/bitcoin/depends'\r\n<snip>\r\nIn file included from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/memory.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/exception.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async-prelude.h:27,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async-io.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async-io-unix.c++:35:\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async-io-unix.c++: In lambda function:\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/src/kj/async-io-unix.c++:1243:24: error: 'AI_V4MAPPED' was not declared in this scope\r\n 1243 |       hints.ai_flags = AI_V4MAPPED | AI_ADDRCONFIG;\r\n      |                        ^~~~~~~~~~~\r\ngmake[3]: *** [src/kj/CMakeFiles/kj-async.dir/build.make:146: src/kj/CMakeFiles/kj-async.dir/async-io-unix.c++.o] Error 1\r\ngmake[2]: *** [CMakeFiles/Makefile2:203: src/kj/CMakeFiles/kj-async.dir/all] Error 2\r\ngmake[1]: *** [Makefile:136: all] Error 2\r\ngmake[1]: Leaving directory '/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5'\r\ngmake: *** [funcs.mk:302: /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-ffdefffd9f5/./.stamp_built] Error 2\r\ngmake: Leaving directory '/home/hebasto/dev/bitcoin/depends'\r\n```\r\n\r\nSee: https://github.com/capnproto/capnproto/commit/ccaa1f87c1c8cc289a088e9c508323c51bd638cf.\r\n\r\nHowever, the other changes between [`v1.0.2`](https://github.com/capnproto/capnproto/releases/tag/v1.0.2) and [`v1.1.0`](https://github.com/capnproto/capnproto/releases/tag/v1.1.0) require a sanity check.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-21T17:53:41Z",
      "updated_at": "2026-01-06T10:50:08Z",
      "merged_at": "2025-01-06T11:31:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31552",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2431,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2245375723,
      "number": 31542,
      "title": "test: Embed univalue json tests in binary",
      "body": "All other benchmarks and tests have their data embedded, except for the univalue json tests.\r\n\r\nThis is not only confusing, but also problematic, when the test binary is moved to a different system for testing, because one has to put the test files in the source dir that was used at compile-time.\r\n\r\nFix all issues by embedding them. Also, re-enable a disabled test. Also, fix an issue in the GenerateHeaderFromJson.cmake.\r\n\r\nRequested in https://github.com/bitcoin/bitcoin/pull/31434/files#r1876000910",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-19T19:36:28Z",
      "updated_at": "2026-01-06T10:50:08Z",
      "merged_at": "2025-01-03T18:58:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31542",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 545,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2256036125,
      "number": 31584,
      "title": "txmempool: fix typos in comments",
      "body": "Fixed typos identified by codespell lint in CI.",
      "state": "closed",
      "user": "starius",
      "created_at": "2024-12-31T03:07:29Z",
      "updated_at": "2026-01-06T10:50:07Z",
      "merged_at": "2025-01-06T11:11:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31584",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 80,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2257834738,
      "number": 31592,
      "title": "ci: Run functional tests in msan task",
      "body": "Now that the CI machines have a bit more CPU, it seems good to run the functional tests as well under msan. (Also, bump the llvm minor version)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-02T12:48:19Z",
      "updated_at": "2026-01-06T10:50:06Z",
      "merged_at": "2025-01-06T10:22:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31592",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 181,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2256307846,
      "number": 31586,
      "title": "doc: Update NetBSD Build Guide",
      "body": "This PR:\r\n\r\n1. Updates the documented NetBSD version.\r\n\r\n2. Adds the optional ZeroMQ package to align the guide with other *BSD systems.\r\n\r\n3. Updates the Python version to meet the minimum requirement specified in https://github.com/bitcoin/bitcoin/pull/30527.\r\n\r\n4. Suggests to Install [`net/py-zmq`](https://ftp.netbsd.org/pub/pkgsrc/current/pkgsrc/net/py-zmq/index.html) package to enable the `interface_zmq.py` functional test.\r\n\r\n5. Fix a formatting issue.\r\n\r\nSee also the recent NetBSD nightly build at https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12554769828/job/35003929261.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-31T10:19:44Z",
      "updated_at": "2026-01-06T10:50:06Z",
      "merged_at": "2025-01-06T10:36:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31586",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 630,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2258931368,
      "number": 31597,
      "title": "ci: Switch to latest macOS and Windows images",
      "body": "This PR updates the macOS and Windows images to their latest versions, in line with our usual practice.\r\n\r\nAdditionally, the Xcode version has been updated to 16.2.\r\n\r\nFor more details regarding these images, please refer to:\r\n- https://github.com/actions/runner-images/issues/10686\r\n- https://github.com/actions/runner-images/issues/11228",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-03T09:04:05Z",
      "updated_at": "2026-01-06T10:50:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31597",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 385,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2260795657,
      "number": 31605,
      "title": "doc: upgrade bitcoin core license to 2025.",
      "body": "",
      "state": "closed",
      "user": "kehiy",
      "created_at": "2025-01-05T15:52:53Z",
      "updated_at": "2026-01-06T10:50:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31605",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 43,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2260536164,
      "number": 31604,
      "title": "test: fix typo in mempool_ephemeral_dust",
      "body": "The `test_node_restart` test in `test/functional/mempool_ephemeral_dust.py` has a repetition in the comment.",
      "state": "closed",
      "user": "epysqyli",
      "created_at": "2025-01-04T21:55:24Z",
      "updated_at": "2026-01-06T10:50:04Z",
      "merged_at": "2025-01-06T10:22:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31604",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 149,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3146719694,
      "number": 34204,
      "title": "test: fix intermittent failure in p2p_addr_selfannouncement",
      "body": "Due to the mocktime being bumped before the expected time is updated, it could happen that the self-announcement is send with an newer timestamp than what we expect. To fix this, update the expected time before we bump the mocktime.\r\n\r\ncloses #34159\r\n\r\n",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2026-01-05T15:56:37Z",
      "updated_at": "2026-01-06T09:38:19Z",
      "merged_at": "2026-01-06T09:38:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34204",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 313,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3113336746,
      "number": 34098,
      "title": "test: [move-only] Move lint functions into modules",
      "body": "The single, large `main.rs` file is fine, but at some point it becomes harder to read.\r\n\r\nSo reduce the size by pulling functions out into modules.\r\n\r\nThis can be reviewed with the git option: `--color-moved=dimmed-zebra`",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-18T11:21:05Z",
      "updated_at": "2026-01-06T06:30:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34098",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 272,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1487286408,
      "number": 28333,
      "title": "wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively",
      "body": "Instead of constructing ScriptPubKeyMans with no data, and then loading data as we find it, we should gather everything first and then load it all on construction. If there actually is no data and we want to setup generation, then that should also occur in a constructor rather than afterwards.\r\n\r\nThis change is only applied to DescriptorScriptPubKeyMan and ExternalSignerScriptPubKeyMan, and should be done for any ScriptPubKeyMans added in the future. I don't think it's really worth it to do this for LegacyScriptPubKeyMan since it would make loading performance worse (or cause layer violations) and it's (supposed to be) going away soon.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-08-24T02:55:39Z",
      "updated_at": "2026-01-06T01:23:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28333",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3074095468,
      "number": 34010,
      "title": "psbt: detect invalid MuSig2 pubkeys in deserialization",
      "body": "Throw error while deserializing PSBT if invalid pubkeys are passed\r\nas a MuSig2 aggregate or participant.\r\n\r\nShould fix #33999 & #34201 by throwing error at the very start while decoding\r\n an invalid PSBT that should subsequently not allow the MuSig2\r\nsigning operation to take place, thereby avoiding the crash.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-12-05T06:49:45Z",
      "updated_at": "2026-01-05T23:22:51Z",
      "merged_at": "2026-01-05T22:56:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34010",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 367,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3143757463,
      "number": 34197,
      "title": "rpc, net: deprecate `startingheight` field of `getpeerinfo` RPC",
      "body": "This PR deprecates the \"startingheight\" result field of the `getpeerinfo` RPC, following the discussion in #33990.\r\n\r\nRationale: the reported starting height of a peer in the VERSION message is untrusted, and it doesn't seem to be useful anymore (after #20624), so deprecating the corresponding field seems reasonable. After that, it can be removed, along with the `m_starting_height` field of the Peer / CNodeStats structs, as it is sufficient to show the reported height only once at connection in the debug log.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2026-01-03T18:30:18Z",
      "updated_at": "2026-01-05T23:19:09Z",
      "merged_at": "2026-01-05T23:18:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34197",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 578,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2517768893,
      "number": 32489,
      "title": "wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet",
      "body": "Currently, if a user wants to use an airgapped setup, they need to manually create the watchonly wallet that will live on the online node by importing the public descriptors. This PR introduces `exportwatchonlywallet` which will create a wallet file with the public descriptors to avoid exposing the specific internals to the user. Additionally, this RPC will copy any existing labels, transactions, and wallet flags. This ensures that the exported watchonly wallet is almost entirely a copy of the original wallet but without private keys.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-05-13T22:22:00Z",
      "updated_at": "2026-01-05T22:16:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32489",
      "labels": [
        "Wallet",
        "Review club"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 622,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133196135,
      "number": 34164,
      "title": "validation: add reusable coins view for ConnectBlock",
      "body": "This is the first commit of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nAdd a `Reset()` method to `CCoinsViewCache` that clears `cacheCoins`, `cachedCoinsUsage`, and `hashBlock` without flushing to the `base` view. This allows efficiently reusing a cache instance across multiple blocks.\r\n\r\nIntroduce `m_connect_block_view` as a persistent cache layer for `ConnectBlock`, avoiding repeated memory allocations. On block validation failure, `Reset()` discards uncommitted changes without affecting the main cache.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:05:04Z",
      "updated_at": "2026-01-05T22:06:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34164",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 659,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018324242,
      "number": 33889,
      "title": "guix: update per-host disk-space estimates in build gate",
      "body": "Today, the build gates are obsolete. I found this out after seeing someone flag this on a commit setting `-static-libgcc`. Note that the Linux builds came in at the expected amount of disk space utilization, so I did not touch the values for them.\r\n\r\nThis PR aims to readjust the build gate disk space per-host estimates for darwin and mingw based on some testing I did locally in my build VM.\r\n\r\nDetails:\r\n(Copied from https://github.com/kevkevinpal/bitcoin/issues/200):\r\n\r\nI ran `HOSTS=\"x86_64-w64-mingw32\" ./contrib/guix/guix-build`\r\n\r\nAfter (+10 GiB):\r\n```\r\nFilesystem     1G-blocks  Used Available Use% Mounted on\r\n/dev/sda5           512G   98G      393G  20% /gnu/store\r\n```\r\n\r\nThese numbers makes this change seem reasonable (1.5x safety factor):\r\n```\r\n-        *mingw*)  required_KiB=7600000 ;;\r\n+        *mingw*)  required_KiB=15728640 ;;\r\n```\r\n\r\n---\r\n\r\nThen I ran `HOSTS=\"aarch64-linux-gnu\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+6 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  104G  387G  22% /gnu/store\r\n```\r\n\r\n---\r\n\r\nThen I setup the SDK for macOS. This established a new *before* snapshot of disk use:\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  116G  375G  24% /gnu/store\r\n```\r\n\r\nThen I ran `HOSTS=\"x86_64-apple-darwin\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+5 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  121G  370G  25% /gnu/store\r\n```\r\n\r\nIMO, this is grounds for updating this (5 GiB * 1.5x safety factor):\r\n```\r\n-        *darwin*) required_KiB=440000 ;;\r\n+        *darwin*) required_KiB=8388608 ;;\r\n```\r\n",
      "state": "open",
      "user": "djkazic",
      "created_at": "2025-11-17T17:21:07Z",
      "updated_at": "2026-01-05T21:42:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33889",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1692,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2995568520,
      "number": 33841,
      "title": "cmake: Switch to `minisketch` upstream build system",
      "body": "This PR:\r\n1. Switches to `minisketch`'s own build system script.\r\n\r\n2. Does not change behaviour, except for printing \"minisketch configure summary\" in the build configuration output.\r\n\r\nFellow reviewers might also be interested in the discussion that took place in https://github.com/bitcoin/bitcoin/pull/32856.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-10T14:38:12Z",
      "updated_at": "2026-01-05T21:38:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33841",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 364,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3137731077,
      "number": 34183,
      "title": "doc: fix double-word typos in comments",
      "body": "Spotted a few duplicated words while reading through the code:\r\n\r\n1. \"the the\" in mempool_stress.cpp\r\n2. \"to to\" in txgraph.cpp\r\n3. \"for for\" in cluster_linearize.h\r\n4. \"that that\" in txrequest.h\r\n5. \"in in\" in test/fuzz/txgraph.cpp",
      "state": "closed",
      "user": "bensig",
      "created_at": "2025-12-30T20:17:46Z",
      "updated_at": "2026-01-05T18:46:08Z",
      "merged_at": "2025-12-31T11:10:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34183",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 271,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3142321710,
      "number": 34192,
      "title": "[30.x] Backports",
      "body": "Backports:\r\n* #33511\r\n* #33950\r\n* #34091\r\n* #34107\r\n* #34137\r\n* #34174\r\n* #34182",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-02T15:24:11Z",
      "updated_at": "2026-01-05T17:27:30Z",
      "merged_at": "2026-01-05T17:27:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34192",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 97,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3011716796,
      "number": 33874,
      "title": "wallet: refactor ProcessDescriptorImport",
      "body": "\r\n\r\nFixes: https://github.com/bitcoin/bitcoin/issues/33655\r\n\r\nCurrently, we validate and import descriptors in the same loop. If any descriptor fails validation, an error is added to the response array, but the complete response (including that error) is only returned to  after a rescan completes—potentially wasting significant time when validation error could have been caught immediately.\r\n\r\nThis PR separates validation from processing: validate all descriptors first, and process in the second loop\r\n\r\n",
      "state": "open",
      "user": "naiyoma",
      "created_at": "2025-11-14T18:15:03Z",
      "updated_at": "2026-01-05T16:55:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33874",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 549,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3122542443,
      "number": 34136,
      "title": "test: Allow mempool_updatefromblock.py to run on 32-bit",
      "body": "The number of dropped parent transactions in the `test_max_disconnect_pool_bytes` test was hard-coded to `2`.\r\n\r\nThis happens to work fine on 64-bit for now. However, it seems to fail on 32-bit (https://github.com/bitcoin/bitcoin/issues/34108).\r\n\r\nI don't think we care about the exact number, as long as it is at least `1`.\r\n\r\nSo hard-code `1` for an initial sanity check, and then calculate the exact value at runtime via `len(mempool) // 2`.\r\n\r\n\r\nAlso, enable the functional tests in 32-bit CI, to confirm the regression test.\r\n\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34108",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T10:59:47Z",
      "updated_at": "2026-01-05T14:54:42Z",
      "merged_at": "2026-01-05T14:51:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34136",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 644,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2818039408,
      "number": 33362,
      "title": "Run feature_bind_port_(discover|externalip).py in CI",
      "body": "This PR includes https://github.com/bitcoin/bitcoin/pull/32757 (first two commits here).\r\n\r\nThen, on top of that:\r\n\r\n`feature_bind_port_discover.py` and `feature_bind_port_externalip.py` require a routable address on the machine to run. Since that was not predictably available on CI, those tests required a manual setting up of IP addresses (e.g. using `ifconfig`) and then running the tests with a command line option telling them that the addresses are set up. The tests were not run in CI and [got rot](https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2497792487).\r\n\r\nChange that to auto-detect, from the tests, whether the needed IP addresses are present and if yes, run the test, otherwise skip it. Also change the CI to configure the needed addresses when running the functional tests. This way the tests will be run regularly on CI.\r\n\r\nFixes: https://github.com/bitcoin/bitcoin/issues/31293\r\nFixes: https://github.com/bitcoin/bitcoin/issues/31336\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-09-11T07:50:42Z",
      "updated_at": "2026-01-05T14:47:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33362",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1021,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3115212137,
      "number": 34107,
      "title": "build: Update minimum required Boost version",
      "body": "Building with Boost 1.73.0 has been [broken](https://github.com/bitcoin/bitcoin/pull/34095#pullrequestreview-3594758109) since https://github.com/bitcoin/bitcoin/pull/31122 was merged.\r\n\r\nThis PR updates the minimum required Boost version to 1.74.0.\r\n\r\nAccording to https://repology.org/project/boost/versions,  none of the major distros are affected by this change.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-18T20:42:54Z",
      "updated_at": "2026-01-05T12:23:04Z",
      "merged_at": "2025-12-19T15:24:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34107",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 411,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134944319,
      "number": 34174,
      "title": "doc: update copyright year to 2026",
      "body": "Bump in the places that need bumping.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-29T18:05:37Z",
      "updated_at": "2026-01-05T12:12:19Z",
      "merged_at": "2025-12-31T13:17:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34174",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 72,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3048000346,
      "number": 33950,
      "title": "guix: reduce allowed exported symbols",
      "body": "Need to double-check, but pretty sure this is atleast partly from #33181.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-26T15:23:30Z",
      "updated_at": "2026-01-05T12:11:47Z",
      "merged_at": "2025-12-08T09:40:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33950",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 111,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110382055,
      "number": 34091,
      "title": "fuzz: doc: remove any mention to `address_deserialize_v2`",
      "body": "We don't have `address_deserialize_v2` target anymore since fac81affb527132945773a5315bd27fec61ec52f (we used to have `address_deserialize_v1_notime`, `address_deserialize_v1_withtime` and `address_deserialize_v2` but now we only have a single `address_deserialize` target) so it removes any mention to it.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-12-17T15:16:17Z",
      "updated_at": "2026-01-05T12:11:30Z",
      "merged_at": "2025-12-18T11:35:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34091",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 364,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3137697192,
      "number": 34182,
      "title": "doc: Update OpenBSD Build Guide",
      "body": "[OpenBSD 7.8](https://www.openbsd.org/78.html) ships LLVM/Clang 19.1.7, which satisfies the recently [updated](https://github.com/bitcoin/bitcoin/pull/33555) minimum requirement.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-30T20:03:01Z",
      "updated_at": "2026-01-05T12:10:43Z",
      "merged_at": "2025-12-31T11:15:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34182",
      "labels": [
        "Docs",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 210,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3123003145,
      "number": 34137,
      "title": "test: Avoid hard time.sleep(1) in feature_init.py",
      "body": "Using a hard-coded `time.sleep` in the tests is usually confusing and brittle. For example, the one in `break_wait_test`:\r\n\r\n* Is confusing, because it does not explain why it is needed.\r\n* On fast hardware will just lead to a useless delay.\r\n* On slow hardware may lead to an intermittent, and confusing test failure.\r\n\r\nFix all issues by replacing it with the proper condition to wait on.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-22T13:46:23Z",
      "updated_at": "2026-01-05T12:10:36Z",
      "merged_at": "2025-12-27T16:07:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34137",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 440,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2875738266,
      "number": 33511,
      "title": "init: Fix Ctrl-C shutdown hangs during wait calls",
      "body": "Signal `m_tip_block_cv` when Ctrl-C is pressed or `SIGTERM` is received, the same way it is currently signaled when the `stop` RPC is called. This lets RPC calls like `waitforblockheight` and IPC calls like `waitTipChanged` be interrupted, instead of waiting for their original timeouts and delaying shutdown.\r\n\r\nThis issue was reported by plebhash in #33463. These hangs have been present since #30409. A similar bug was also fixed previously in Qt in #18452 and this PR simplifies that fix.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-09-30T19:14:54Z",
      "updated_at": "2026-01-05T12:10:21Z",
      "merged_at": "2025-11-12T15:17:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33511",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 542,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3130738647,
      "number": 34154,
      "title": "test: Enable ruff E713 lint",
      "body": "Membership tests of the form `not item in stuff` may be confusing, because they could be read as `(not item) in stuff`, which is different.\r\n\r\nSo enable the ruff E713 lint, which should also help to avoid having to go through review cycles for this.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-26T07:26:13Z",
      "updated_at": "2026-01-05T11:00:27Z",
      "merged_at": "2026-01-04T16:22:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34154",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2937452835,
      "number": 33680,
      "title": "validation: do not wipe utxo cache for stats/scans/snapshots",
      "body": "Revival of https://github.com/bitcoin/bitcoin/pull/30610#issuecomment-3432564955 with the remaining comments applied on top\r\n\r\n> Since #28280, the cost of a non-wiping sync of the UTXO cache is only proportional to the number of dirty entries, rather than proportional to the size of the entire cache. Because of that, there is no reason to perform a wiping flush in case the contents of the cache is still useful.\r\n> \r\n> Split the `FlushStateMode::ALWAYS` mode into a FORCE_SYNC (non-wiping) and a FORCE_FLUSH (wiping), and then use the former in `scantxoutset`, `gettxoutsetinfo`, snapshot creation.\r\n\r\n(slightly updated after #30214)",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-22T14:46:09Z",
      "updated_at": "2026-01-05T09:18:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33680",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 697,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1947531552,
      "number": 30370,
      "title": "sync: improve CCoinsViewCache ReallocateCache - 2nd try",
      "body": "Rebased and reopened #28945\r\n\r\nOriginal description:\r\n\r\n> TL;DR: this change improves sync time on my PC by ~6%.\r\n> \r\n> While syncing when the CCoinsViewCache gets full it is flushed to disk and then memory is freed. Depending on available cache size, this happens several times. This PR removes the unnecessary reallocations for temporary CCoinsViewCache and reserves the cacheCoins's bucket array to its previous size.\r\n> \r\n> I benchmarked the change on an AMD Ryzen 9 7950X with this command:\r\n> \r\n> ```shell\r\n> hyperfine \\\r\n> --show-output --parameter-list commit b5a271334ca81a6adcb1c608d85c83621a9eae47,ceeb71816512642e92a110b2cf5d2549d090fe78 \\\r\n> --setup 'git checkout {commit} && make -j$(nproc) src/bitcoind' \\\r\n> --prepare 'sync; sudo /sbin/sysctl vm.drop_caches=3' \\\r\n> -M 3 './src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000'\r\n> ```\r\n> \r\n> Where [b5a2713](https://github.com/bitcoin/bitcoin/commit/b5a271334ca81a6adcb1c608d85c83621a9eae47) is mergebase, and [ceeb718](https://github.com/bitcoin/bitcoin/commit/ceeb71816512642e92a110b2cf5d2549d090fe78) this PR.\r\n> \r\n> Which runs `./src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000` 3 times and compares both commits, giving this result:\r\n> \r\n> ```\r\n> Benchmark 1: ./src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (commit = b5a271334ca81a6adcb1c608d85c83621a9eae47)\r\n>   Time (mean ± σ):     2815.648 s ± 70.720 s    [User: 2639.959 s, System: 640.051 s]\r\n>   Range (min … max):   2736.616 s … 2872.964 s    3 runs\r\n> \r\n> Benchmark 2: ./src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (commit = ceeb71816512642e92a110b2cf5d2549d090fe78)\r\n>   Time (mean ± σ):     2661.520 s ± 23.205 s    [User: 2473.010 s, System: 624.040 s]\r\n>   Range (min … max):   2635.816 s … 2680.926 s    3 runs\r\n> \r\n> Summary\r\n>   ./src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (commit = ceeb71816512642e92a110b2cf5d2549d090fe78) ran\r\n>     1.06 ± 0.03 times faster than ./src/bitcoind -dbcache=500 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (commit = b5a271334ca81a6adcb1c608d85c83621a9eae47)\r\n> ```",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2024-07-01T14:45:56Z",
      "updated_at": "2026-01-05T08:43:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30370",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2297,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133250641,
      "number": 34167,
      "title": "tests: add concise docstrings in chain_tiebreaks",
      "body": "Added concise docstrings for test_chain_split_in_memory and test_chain_split_from_disk",
      "state": "closed",
      "user": "Olly60",
      "created_at": "2025-12-28T21:45:25Z",
      "updated_at": "2026-01-05T08:25:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34167",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 135,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134164367,
      "number": 34169,
      "title": "fuzz: change fuzz runner test_runner.py to be cwd independent",
      "body": "Dear Maintainers,\r\n\r\nWhile using `test_runner.py` that runs fuzz tests and produces coverage results I encountered the following error.\r\n\r\nIf not running the script from the project root directory the `git grep --function-context [...]` does not return the same output which results in the following Python error:\r\n\r\n```\r\n../../src/protocol.h-', '../../../src/protocol.h-/** nServices flags */']\r\nTraceback (most recent call last):\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 405, in <module>\r\n    main()\r\n    ~~~~^^\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 173, in main\r\n    return generate_corpus(\r\n        fuzz_pool=fuzz_pool,\r\n    ...<3 lines>...\r\n        targets=test_list_selection,\r\n    )\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 249, in generate_corpus\r\n    targets = transform_process_message_target(targets, Path(src_dir))\r\n  File \"/path/to/build_libfuzzer/test/fuzz/./test_runner.py\", line 218, in transform_process_message_target\r\n    assert len(lines)\r\n           ~~~^^^^^^^\r\nAssertionError\r\n```\r\n\r\nThe script is not able to retrieve lines as the filter applied is:\r\n\r\n```python\r\nlines = [l.split(\"::\", 1)[1].split(\",\")[0].lower() for l in lines if l.startswith(\"src/protocol.h-    NetMsgType::\")]\r\n```\r\n\r\nWhich when running from the root directory returns:\r\n```\r\n[snip]\r\nsrc/protocol.h-    NetMsgType::VERSION,\r\n[snip]\r\n```\r\nbut returns a relative path to CWD when run from other directories e.g:\r\n```\r\n../../../src/protocol.h-    NetMsgType::VERSION,\r\n```\r\n\r\nThis is very unfortunate as the script rightfully read the `config.ini` relatively to itself and go fetch `BUILDDIR` and `SRCDIR`  variables to obtain absolute paths.\r\n\r\n\r\nOptions are:\r\n* enforce running the script from *bitcoin/* directory  (and thus explicitly mentioning it in the doc)\r\n* make the script independent from where it is being run\r\n\r\nI chose the second option as it was fairly easy to make the script independent from where it is being run.\r\n",
      "state": "closed",
      "user": "RobinDavid",
      "created_at": "2025-12-29T11:06:27Z",
      "updated_at": "2026-01-05T08:22:46Z",
      "merged_at": "2026-01-02T11:03:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34169",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2096,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1778607753,
      "number": 29675,
      "title": "wallet: Be able to receive and spend inputs involving MuSig2 aggregate keys",
      "body": "This PR implements MuSig2 signing so that the wallet can receive and spend from imported `musig(0` descriptors.\r\n\r\nThe libsecp musig module is enabled so that it can be used for all of the MuSig2 cryptography.\r\n\r\nSecnonces are handled in a separate class which holds the libsecp secnonce object in a `secure_unique_ptr`. Since secnonces must not be used, this class has no serialization and will only live in memory. A restart of the software will require a restart of the MuSig2 signing process.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-03-18T22:32:37Z",
      "updated_at": "2026-01-05T08:11:23Z",
      "merged_at": "2025-10-14T20:26:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29675",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 572,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1966370491,
      "number": 30437,
      "title": "ipc: add bitcoin-mine test program",
      "body": "Add [`bitcoin-mine`](https://github.com/ryanofsky/bitcoin/blob/pr/mine/src/bitcoin-mine.cpp#L20-L37) executable to test connecting to the `bitcoin-node` process over a unix socket and calling [`interface::Mining`](https://github.com/ryanofsky/bitcoin/blob/pr/mine/src/interfaces/mining.h) methods.\r\n\r\nThis is useful as discussed in https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-2222418506 to work on getting mining code working in an external process.\r\n\r\nThis PR initially supported spawning a new `bitcoin-node` process if a connection could not be established with an existing process, but it was dropped to simplify the code. A branch building on this PR and adding that support is\r\n[pr/mine-detach](https://github.com/ryanofsky/bitcoin/commits/pr/mine-detach).\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-07-12T10:37:28Z",
      "updated_at": "2026-01-05T05:17:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30437",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 924,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2371642800,
      "number": 31989,
      "title": "BIP-119 (OP_CHECKTEMPLATEVERIFY) (regtest only)",
      "body": "This implements [BIP-119  (`OP_CHECKTEMPLATEVERIFY`)](https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki), but only specifies a regtest deployment. There is no effective policy change, since the `SCRIPT_VERIFY_*` flags (as used) result in the same NOP-like behavior.\r\n\r\nThis change can be composed with other opcode specifications (e.g. [`CSFS`](https://bitcoinops.org/en/topics/op_checksigfromstack/), [`CAT`](https://bitcoinops.org/en/topics/op_cat/)) and bundled into the same deployment (yet to be specified).\r\n\r\nI encourage more general, conceptual discussion to happen on [Delving Bitcoin](https://delvingbitcoin.org/) and not on this pull request.\r\n\r\nSome related discussion on Delving Bitcoin here:\r\n- https://delvingbitcoin.org/t/ctv-csfs-can-we-reach-consensus-on-a-first-step-towards-covenants/\r\n\r\nSee also:\r\n- https://bitcoinops.org/en/topics/op_checktemplateverify/\r\n- https://utxos.org/",
      "state": "open",
      "user": "jamesob",
      "created_at": "2025-03-04T19:08:36Z",
      "updated_at": "2026-01-05T01:24:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31989",
      "labels": [
        "Consensus",
        "Needs rebase",
        "Needs Conceptual Review"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 960,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2989452954,
      "number": 33822,
      "title": "kernel: Add block header support and validation",
      "body": "Adds a new `btck_BlockHeader` type and associated functions to create, access, and validate block headers. Block headers will have their own type (`btck_BlockHeader`) that can be created from raw data, copied, and queried for all the standard header fields (hash, prev hash, timestamp, bits, version, nonce). We can also extract headers from full blocks or block tree entries.\r\n\r\nThe first commit here refactors `BlockValidationState` to use Handle/View pattern so external code can own them, which is required for the header processing in the API.\r\n\r\n #### New Block Header API\r\n\r\n  - **`btck_BlockHeader` type**: Opaque handle for block headers\r\n  - **Header methods**:\r\n    - `btck_block_header_create()`: Create header from 80-byte serialized data\r\n    - `btck_block_header_copy()`: Copy block headers\r\n    - `btck_block_header_destroy()`: Destroy header object\r\n    - `btck_block_header_get_hash()`: Calculate block hash\r\n    - `btck_block_header_get_prev_hash()`: Get previous block hash\r\n    - `btck_block_header_get_timestamp()`: Get block timestamp\r\n    - `btck_block_header_get_bits()`: Get difficulty target (compact format)\r\n    - `btck_block_header_get_version()`: Get block version\r\n    - `btck_block_header_get_nonce()`: Get proof-of-work nonce\r\n    \r\n    - `btck_block_get_header()`: Extract header from a full block\r\n    - `btck_block_tree_entry_get_block_header()`: Get header associated with a block tree entry\r\n  \r\n  - **Header Processing Methods:**\r\n    - **`btck_chainstate_manager_process_block_header()`**: Validates and processes a block header without requiring the full block. This performs proof-of-work verification, timestamp validation, and updates the internal chain state.\r\n    - **`btck_chainstate_manager_get_best_entry()`**: Returns the block tree entry with the most cumulative proof-of-work.\r\n\r\nWhy `btck_chainstate_manager_get_best_entry()` is included alongside header validation? Just as we have logic to get the tip for block validation (so you can request more blocks extending your best from your peers), we need the equivalent for header validation. To make header validation worthwhile, knowing what the best current header is seems useful—it tells you what headers to request next from peers.\r\n\r\n\r\n\r\n  ### Testing\r\n\r\n  Added tests in `test_kernel.cpp` that cover creating headers from raw data, extracting all header fields, and processing headers through the chainstate manager.\r\n  \r\n  CC @TheCharlatan ",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-07T17:16:01Z",
      "updated_at": "2026-01-04T16:49:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33822",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2499,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3013940276,
      "number": 33878,
      "title": "refactor, docs: Embedded ASMap [2/3]: Refactor asmap internals and add documentation",
      "body": "This is a second slice carved out of #28792. It contains the following changes that are crucial for the embedding of asmap data which is added the following PR in the series (probably this will remain in #28792).\r\n\r\nThe changes are:\r\n- Modernizes and simplifies the asmap code by operating on `std::byte` instead of bits\r\n- Unifies asmap version calculation and naming (previously it was called version and checksum interchangeably)\r\n- Operate on a `span` rather than a vector in the asmap internal to prevent holding the asmap data in memory twice\r\n- Add more extensive documentation to the asmap implementation\r\n- Unify asmap casing in implemetation function names\r\n\r\nThe first three commits were already part of #28792, the others are new.\r\n\r\nThe documentation commit came out of feedback gathered at the latest CoreDev. The primary input for the documentation was the documentation that already existed in the Python implementation (`contrib/asmap/asmap.py`) but there are several other comments as well. Please note: I have also asked several LLMs to provide suggestions on how to explain pieces of the implementation and better demonstrate how the parts work together. I have copied bits and pieces that I liked but everything has been edited further by me and obviously all mistakes here are my own. ",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-15T20:50:29Z",
      "updated_at": "2026-01-04T10:02:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33878",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1392,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2241852668,
      "number": 31524,
      "title": "refactor: Allow std::byte in (Read/Write)(LE/BE)",
      "body": "Starting with C++17, `std::byte` is often (not always) a better choice over `uint8_t` for new code.\r\n\r\nHowever, the existing codebase discourages the use of `std::byte`, when helpers such as `ReadLE32` are used. This is because calling code will be cluttered with byte-casts.\r\n\r\nFix it by allowing `std::byte` pointers in `ReadLE32` (and friends).",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-18T10:09:07Z",
      "updated_at": "2026-01-04T08:43:30Z",
      "merged_at": "2025-01-03T14:29:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31524",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 396,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2293116283,
      "number": 31713,
      "title": "miniscript refactor: Remove unique_ptr-indirection",
      "body": "Removes one level of unnecessary indirection, which was a change that originally [aided in finding one issue](https://github.com/bitcoin/bitcoin/pull/30866#pullrequestreview-2434704657) in #30866. Simplifies the code one step further than 09a1875ad8cddeb17c19af34b8282d37fed0937e belonging to aforementioned PR.\r\n\r\nAlso adds test which verifies resistance to stack overflow when it comes to `~Node()` and `Node::Clone()`.\r\n\r\nNo observed difference when running benchmarks: ExpandDescriptor/WalletIsMineDescriptors/WalletIsMineMigratedDescriptors/WalletLoadingDescriptors.\r\n\r\nFollowup to #30866.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-22T21:16:33Z",
      "updated_at": "2026-01-04T04:53:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31713",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 645,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3144079277,
      "number": 34199,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "rajeshd101",
      "created_at": "2026-01-04T04:42:14Z",
      "updated_at": "2026-01-04T04:42:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34199",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110306931,
      "number": 34090,
      "title": "net: Fix `-Wmissing-braces`",
      "body": "On some non-POSIX platforms, Clang emits `-Wmissing-braces` warnings for the `IN6ADDR_ANY_INIT` and `IN6ADDR_LOOPBACK_INIT` macros. For example, on OpenIndiana / illumos:\r\n```\r\n$ uname -srv\r\nSunOS 5.11 illumos-325e0fc8bb\r\n$ clang --version\r\nclang version 21.1.7 (https://github.com/OpenIndiana/oi-userland.git 36a81bf5e5d307d4e85893422600678d46328010)\r\nTarget: x86_64-pc-solaris2.11\r\nThread model: posix\r\nInstalledDir: /usr/clang/21/bin\r\n$ cmake -B build -DCMAKE_GENERATOR=Ninja -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ -DENABLE_IPC=OFF -DAPPEND_CXXFLAGS='-Wno-unused-command-line-argument'\r\n$ cmake --build build\r\n[284/573] Building CXX object src/CMakeFiles/bitcoin_node.dir/net.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/net.cpp:3309:42: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n 3309 |         const CService ipv6_any{in6_addr(IN6ADDR_ANY_INIT), GetListenPort()}; // ::\r\n      |                                          ^~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:479:32: note: expanded from macro 'IN6ADDR_ANY_INIT'\r\n  479 | #define IN6ADDR_ANY_INIT            {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  480 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  481 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  482 |                                         0, 0, 0, 0 }\r\n      |                                         ~~~~~~~~~~\r\n1 warning generated.\r\n[467/573] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/i2p_tests.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/test/i2p_tests.cpp:116:34: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  116 |     const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), /*port=*/7656};\r\n      |                                  ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/i2p_tests.cpp:159:38: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  159 |         const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), /*port=*/7656};\r\n      |                                      ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n2 warnings generated.\r\n[483/573] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/netbase_tests.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:505:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  505 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:510:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  510 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0x00f1 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:515:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  515 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0xf1f2 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n3 warnings generated.\r\n[573/573] Linking CXX executable bin/test_bitcoin\r\n```\r\n\r\nThe same issue is observed on Windows. For further details, see https://github.com/bitcoin/bitcoin/pull/31507.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-17T14:53:51Z",
      "updated_at": "2026-01-04T00:01:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34090",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6596,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3119768347,
      "number": 34125,
      "title": "validation: reuse `should_empty` check for chainstate flush",
      "body": "Minor follow-up to https://github.com/bitcoin/bitcoin/pull/33866\r\n\r\nReuse the `should_empty` predicate for both the write decision and for selecting `CoinsTip().Flush()` vs `CoinsTip().Sync()`.\r\nThis is a pure refactor, no behavior is changed.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T12:14:47Z",
      "updated_at": "2026-01-03T20:15:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34125",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 303,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2294479432,
      "number": 31723,
      "title": "qa: Facilitate debugging bitcoind inside functional tests",
      "body": "Facilitates debugging specific instances of bitcoind *in the context of Python tests, inside of an editor/IDE/debugger*.\r\n\r\nMakes bitcoind spin during startup, waiting for a debugger to be attached, so that breakpoints during process init can be debugged.\r\n\r\n### Example usage\r\n\r\n1. Generate build files with `-DENABLE_WAIT_FOR_DEBUGGER=ON` & build.\r\n   \r\n   ```\r\n   cmake -B build -DCMAKE_BUILD_TYPE=Debug -DENABLE_WAIT_FOR_DEBUGGER=ON && cmake --build build -j$(nproc)\r\n   ```\r\n\r\n2. Set breakpoints in the C++ code in your editor/IDE/debugger.\r\n\r\n3. Start a Python functional test with a debugger command such as:\r\n   - LLDB inside an already started Tmux pane (append ` -o continue` to the LLDB args to have the debugger continue automatically):\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"tmux split-window -h lldb -p \\$PID\\$\"\r\n     ```\r\n   - Sublime Text Debugger, allows a running session to attach:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"subl --command \\\"debugger {\\\\\\\"action\\\\\\\": \\\\\\\"start\\\\\\\", \\\\\\\"configuration\\\\\\\": {\\\\\\\"name\\\\\\\": \\\\\\\"foo\\\\\\\", \\\\\\\"type\\\\\\\": \\\\\\\"lldb\\\\\\\", \\\\\\\"request\\\\\\\": \\\\\\\"attach\\\\\\\", \\\\\\\"program\\\\\\\": \\\\\\\"dummyprogram\\\\\\\", \\\\\\\"pid\\\\\\\": \\\\\\\"\\$PID\\$\\\\\\\"}}\\\"\"\r\n     ```\r\n   - Don't specify `--debug_cmd ...\\$PID\\$...`, instead have the test framework log which bitcoind PID you should manually attach to:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2\r\n     ```\r\n\r\n5. Experience how debugger hits breakpoints as the functional test executes RPCs.\r\n\r\nUsing `-debug_runs <RUN_INDEX>` often requires doing a dry-run of a functional test with `-ldebug` and examining the log to see which run index is the one we want to debug:\r\n```\r\n2025-...Z TestFramework.node0 (DEBUG): bitcoind started (run #1, node #0), waiting for RPC to come up\r\n``` \r\n\r\n### Alternative usage\r\n\r\nTweak functional test code to specify `wait_for_debugger` when (re)starting a node:\r\n\r\n```diff\r\n-        self.restart_node(0)\r\n+        self.restart_node(0, wait_for_debugger=True)\r\n```\r\nWhile it can be messy to modify files while moving between commits, and cumbersome inside of loops, it might be more straightforward than `-debug_runs <RUN_INDEX>` in a given case.\r\n\r\n### *Needed before merge*\r\n\r\n- [ ] Testing on Mac to confirm -waitfordebugger on the C++ side behaves as expected.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-23T13:18:06Z",
      "updated_at": "2026-01-03T19:30:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31723",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3061429531,
      "number": 33990,
      "title": "test: p2p: check that peer's announced starting height is remembered",
      "body": "Note that the announced starting height of a peer is neither verified nor used in any other logic, so reporting a bogus value [1] as done in the test doesn't have any consequences on the connection -- it's only used for inspection via the `getpeerinfo` RPC and in some debug messages (see also e.g. https://github.com/bitcoin-dot-org/Bitcoin.org/issues/1387#issuecomment-252934859). Admittedly this is not terribly important, but I'd still think having test coverage for this simple reporting functionality is better than not having it.\r\n\r\n[1] any signed 32-bit integer is fine, i.e. in the range [-2^31,2^31-1]",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-12-02T00:25:02Z",
      "updated_at": "2026-01-03T18:35:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33990",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 680,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2237045890,
      "number": 31507,
      "title": "build: Use clang-cl to build on Windows natively",
      "body": "Building on Windows using Clang instead of the MS compiler may be beneficial, considering the issues with the latter, as outlined in https://github.com/bitcoin/bitcoin/issues/31456:\r\n\r\n>    * non-optimized codegen: [build: remove need to test for endianness #29852 (comment)](https://github.com/bitcoin/bitcoin/pull/29852#issuecomment-2049803970)\r\n> \r\n>    * compile failure: [MSVC 17.12.0 internal compiler error  #31303](https://github.com/bitcoin/bitcoin/issues/31303)\r\n> \r\n>    * legal, but brittle stdlib: [util: Drop boost posix_time in ParseISO8601DateTime #31391 (comment)](https://github.com/bitcoin/bitcoin/pull/31391#issuecomment-2510762011)\r\n> \r\n>    * unspecified issue: [refactor: Check translatable format strings at compile-time #31061 (comment)](https://github.com/bitcoin/bitcoin/pull/31061#issuecomment-2531244463)\r\n\r\nAdditionally, MSVC does not [support](https://learn.microsoft.com/en-us/cpp/assembler/inline/inline-assembler) inline assembly on the ARM and x64 processors.\r\n\r\nSo this PR:\r\n1. Closes https://github.com/bitcoin/bitcoin/issues/31456 (and addresses https://github.com/bitcoin/bitcoin/issues/14118).\r\n2. Could be an alternative to https://github.com/bitcoin/bitcoin/pull/24773.\r\n\r\n---\r\n\r\nAdditionally, clang-cl:\r\n1. Produces binaries with [better](https://github.com/bitcoin-core/secp256k1/pull/1681) performance. For example:\r\n\r\n| MSVC, block/s | clang-cl, block/s | benchmark |\r\n|--------------:|------------------:|:----------|\r\n|          7.40 |             11.52 | `ConnectBlockAllEcdsa`\r\n|          7.32 |             11.81 | `ConnectBlockAllSchnorr`\r\n|          7.38 |             11.45 | `ConnectBlockMixedEcdsaSchnorr`\r\n|         91.86 |            143.12 | `DeserializeAndCheckBlockTest`\r\n|        121.46 |            189.04 | `DeserializeBlockTest`\r\n\r\n2. Builds faster on the CI:\r\n    - [MSVC](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575846787) - 20m 35s\r\n    - [clang-cl](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575849680) - 12m 43s\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-12-16T10:58:38Z",
      "updated_at": "2026-01-03T17:16:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31507",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2081,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2091884190,
      "number": 30972,
      "title": "Wallet: \"listreceivedby*\" fix",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/16159, \r\n\r\nThis PR builds on https://github.com/bitcoin/bitcoin/pull/25973, fixing `listreceivedby*` RPCs by filtering out `send` addresses using `IsMine` (see https://github.com/bitcoin/bitcoin/pull/25973#discussion_r1269477246). It also breaks down the `listreceivedby` tests into subtests and adds a test to verify 'listreceivedby*' does not return `send` addresses",
      "state": "open",
      "user": "BrandonOdiwuor",
      "created_at": "2024-09-25T16:59:35Z",
      "updated_at": "2026-01-03T14:23:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30972",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 446,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3099557642,
      "number": 34074,
      "title": "A few followups after introducing `/rest/blockpart/` endpoint",
      "body": "The commits below should resolve a few leftovers from #33657.",
      "state": "closed",
      "user": "romanz",
      "created_at": "2025-12-14T09:26:20Z",
      "updated_at": "2026-01-03T13:58:39Z",
      "merged_at": "2025-12-17T15:09:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34074",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 123,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2597079174,
      "number": 32763,
      "title": "wallet: Replace CWalletTx::mapValue and vOrderForm with explicit class members",
      "body": "`mapValue` and `vOrderForm` are opaque data structures that contain transaction metadata. It is hard to determine what actual data each field contains, and they can ostensibly be misused where metadata is added in the future without developers realizing that such metadata exists.\r\n\r\nIt's much clearer to have all of that metadata live in their own explicit member variables within `CWalletTx`. This PR implements that change.\r\n\r\nSince the serialization format of `CWalletTx` depends on `mapValue` and `vOrderForm`, the serialization remains unchanged, so when serializing these new members, they need to be shoved/extracted from a temporary `mapValue` or `vOrderForm`.\r\n\r\nThis does end up breaking forwards compatibility as unknown fields in `mapValue` and `vOrderForm` are stripped out if the record is rewritten. However, I don't expect that we would continue to use these fields for future metadata, so I think that risk is low.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-06-16T22:37:34Z",
      "updated_at": "2026-01-03T11:39:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32763",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1011,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2712708880,
      "number": 33112,
      "title": "wallet: relax external_signer flag constraints",
      "body": "The `external_signer` indicates that an external signer device may be called via [HWI](https://github.com/bitcoin-core/HWI) or [equivalent](https://github.com/bitcoin/bitcoin/blob/master/doc/external-signer.md#signer-api) application.\r\n\r\nWhen it was initially introduced some additional constraints were placed on wallets with this flag: it had to be a descriptor wallet and watch-only. Also the flag could not be added or removed later.\r\n\r\nThe constraints aren't a problem for the main supported and documented use case of connecting a single hardware wallet and using it just like a normal single sig Bitcoin Core wallet.\r\n\r\nBut they get in the way of more advanced constructions, which are becoming increasingly practical especially once MuSig2 support lands with #29675. See https://github.com/Sjors/bitcoin/pull/91 and https://github.com/bitcoin-core/HWI/pull/794 for a collection of changes on top of that which facilitate MuSig2 with a hardware wallet. And see #24861.\r\n\r\nThis pull requests drops the following constraints:\r\n\r\n- `disable_private_keys` is no longer mandatory (but still default)\r\n- `external_signer` flag is now mutable\r\n\r\nAdditionally it does the following:\r\n\r\n- make the `blank` option for `createwallet` consistent with regular wallets by _not_ importing keys from the connected signer\r\n- avoid going through `createTransaction` for external signers (otherwise the GUI breaks)\r\n- update `external-signer.md` mainly to use named arguments and point out a GUI setting\r\n\r\n\r\nThis should no noticeable effect on the default single sig use case described above.\r\n\r\n \r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-08-01T10:11:18Z",
      "updated_at": "2026-01-03T10:34:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33112",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1841534940,
      "number": 29963,
      "title": "depends: Do not consider `CC` environment variable for detecting system",
      "body": "On the master branch @ 3c88eac28e8984893746caebb313dc3b2fca90db, consider the following commands in the `depends` subdirectory:\r\n```sh\r\n$ make print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=x86_64-pc-linux-gnu\r\n$ make print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```\r\nThe printed variable values are expected.\r\n\r\nHowever, switching the `CC` variable context from Makefile to the shell environment breaks expectations:\r\n```sh\r\n$ CC=\"clang -m32\" make print-build HOST=i686-pc-linux-gnu\r\nbuild=i686-pc-linux-gnu\r\n$ CC=\"clang -m32\" make print-host HOST=i686-pc-linux-gnu\r\nhost=i686-pc-linux-gnu\r\n```\r\n\r\nThis PR fixes this issue.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-04-25T19:01:29Z",
      "updated_at": "2026-01-03T10:05:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29963",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 737,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1444608179,
      "number": 28121,
      "title": "include verbose \"reject-details\" field in testmempoolaccept response",
      "body": "Adds a new field `reject-details` in `testmempoolaccept` responses to include `m_debug_message` from `ValidationState`. This string is the complete error message thrown by the mempool in response to `sendrawtransaction`.\r\n\r\nThe extra verbosity is helpful to consumers of `testmempoolaccept`, which is sort of a debug tool anyway. \r\n\r\nexample:\r\n> \r\n> {\r\n>   \"txid\": \"07d7a59a7bdad4c3a5070659ea04147c9b755ad9e173c52b6a38e017abf0f5b8\",\r\n>   \"wtxid\": \"5dc243b1b92ee2f5a43134eb3e23449be03d1abb3d7f3c03c836ed0f13c50185\",\r\n>   \"allowed\": false,\r\n>   \"reject-reason\": \"insufficient fee\",\r\n>   \"reject-details\": \"insufficient fee, rejecting replacement 07d7a59a7bdad4c3a5070659ea04147c9b755ad9e173c52b6a38e017abf0f5b8; new feerate 0.00300000 BTC/kvB <= old feerate 0.00300000 BTC/kvB\"\r\n> }\r\n",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2023-07-21T14:47:06Z",
      "updated_at": "2026-01-03T08:43:11Z",
      "merged_at": "2025-01-03T12:04:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28121",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 851,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2229363677,
      "number": 31468,
      "title": "test: Avoid intermittent error in assert_equal(pruneheight_new, 248)",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/31446\r\n\r\nThe test uses the P2P network to sync blocks, which has no inherent guarantee that the blocks are sent and received in the right order, assuming the headers are received first.\r\n\r\nThis can mean that the first block file is flushed with block at height 249 and block at height 248 is added to the second file. In the log it looks like: `Leaving block file 0: CBlockFileInfo(blocks=249, size=65319, heights=0...249, time=2011-02-02...2024-12-03) (onto 1) (height 248)`. The test assumes that the height of the last pruned block in the first file is 248, expecting it to look like: `Leaving block file 0: CBlockFileInfo(blocks=249, size=65319, heights=0...248, time=2011-02-02...2024-12-09) (onto 1) (height 249) `.\r\n\r\nFix the issue by using a linear dumb sync.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-11T15:57:09Z",
      "updated_at": "2026-01-03T08:43:10Z",
      "merged_at": "2024-12-30T19:28:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31468",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 884,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2210379550,
      "number": 31403,
      "title": "test: Call generate RPCs through test framework only",
      "body": "The generate RPCs are special in that they should only be called by the test framework itself. This way, they will call the sync function on the nodes, which can avoid intermittent test issues. Also, when the sync is disabled, it will happen explicitly by setting the `sync_fun`.\r\n\r\nApply this rule here, so that all generate calls are written consistently.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-02T13:33:31Z",
      "updated_at": "2026-01-03T08:43:10Z",
      "merged_at": "2024-12-30T19:19:15Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31403",
      "labels": [
        "Refactoring",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 410,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2244444917,
      "number": 31540,
      "title": "refactor: std::span compat fixes",
      "body": "The `std::span` type is already used in some parts of the codebase, and in most contexts can implicitly convert to and from `Span`. However, the two types are not identical in behavior and trying to use one over the other can result in compile failures in some contexts.\r\n\r\nFix all those issues by allowing either `Span` or `std::span` in any part of the codebase.\r\n\r\nAll of the changes are also required for the scripted-diff to replace `Span` with `std::span` in https://github.com/bitcoin/bitcoin/pull/31519",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-19T12:57:18Z",
      "updated_at": "2026-01-03T08:43:09Z",
      "merged_at": "2024-12-30T19:06:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31540",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 543,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231368834,
      "number": 31481,
      "title": "fuzz: Faster leak check when generating corpus",
      "body": "Currently, when running the fuzz targets under asan, leak detection may be expensive when global memory is involved on every iteration. For example when `SeedRandomStateForTest(SeedRand::ZEROS)` is called on every iteration.\r\n\r\nFix it by disabling leak check on every iteration, but still do it at the end.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-12T10:55:29Z",
      "updated_at": "2026-01-03T08:43:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31481",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 353,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2246728421,
      "number": 31547,
      "title": "build: Use character literals for generated json headers to avoid narrowing",
      "body": "Use character literals instead of integer hex values (i.e. `'\\x5b','\\x0a', ...` instead of `0x5b, 0x0a, ...`) for generated JSON headers for tests.\r\nThis avoids C++11 narrowing warnings in a more concise way than using explicit char casts.\r\n\r\nExtra whitespace is also removed between elements for brevity.\r\n\r\nSplit out of https://github.com/bitcoin/bitcoin/pull/31542#discussion_r1893781576",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-12-20T13:39:23Z",
      "updated_at": "2026-01-03T08:43:08Z",
      "merged_at": "2025-01-03T18:58:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31547",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 466,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2251061229,
      "number": 31563,
      "title": "rpc: Extend scope of validation mutex in generateblock",
      "body": "The mutex (required by TestBlockValidity) must be held after creating the block, until TestBlockValidity is called. Otherwise, it is possible that the chain advances in the meantime and leads to a crash in TestBlockValidity: `Assertion failed: pindexPrev && pindexPrev == chainstate.m_chain.Tip() (validation.cpp: TestBlockValidity: 4338)`\r\n\r\nFixes #31562",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-24T14:48:56Z",
      "updated_at": "2026-01-03T08:43:07Z",
      "merged_at": "2024-12-30T19:49:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31563",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 410,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2256616763,
      "number": 31587,
      "title": "Enhance fee estimation logic and improve error handling in TxConfirmS…",
      "body": "- Added reserve calls in TxConfirmStats constructor to avoid multiple reallocations for txCtAvg and m_feerate_avg vectors.\r\n- Added a check in resizeInMemoryCounters to ensure newbuckets is greater than 0, throwing an invalid_argument exception if not.\r\n- Improved error handling in Record method by adding a check to throw an out_of_range exception if blocksToConfirm exceeds the maximum tracked periods.\r\n- Fixed the missing parenthesis and completed the logic in the Read method to ensure proper sanity checks and resizing of in-memory counters.\r\n- These changes enhance the robustness and performance of the fee estimation logic in the Bitcoin Core codebase.",
      "state": "closed",
      "user": "Gudnessuche",
      "created_at": "2024-12-31T17:23:12Z",
      "updated_at": "2026-01-03T08:43:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31587",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 733,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2255712880,
      "number": 31582,
      "title": "[28.x] Finalize 28.1",
      "body": "",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-12-30T17:58:42Z",
      "updated_at": "2026-01-03T08:43:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31582",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 21,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2259255457,
      "number": 31598,
      "title": "#31403 follow-up",
      "body": "#31403 follow-up, see [comment](https://github.com/bitcoin/bitcoin/pull/31403#pullrequestreview-2498806354)\r\n\r\n- Rename `invalid_call` parameter to `called_by_framework` in `generateblock`, `generatetoaddress` and `generatetodescriptor` mining methods to better express its intended usage. \r\n- Add explicit assertion message clarifying that these functions should only be called by TestFramework itself to maintain proper node synchronization.",
      "state": "closed",
      "user": "yuvicc",
      "created_at": "2025-01-03T13:25:46Z",
      "updated_at": "2026-01-03T08:43:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31598",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3091431534,
      "number": 34049,
      "title": "rpc: Disallow captures in RPCMethodImpl",
      "body": "When defining `RPCHelpMan` objects, we usually return a lambda, and mostly we define those via `[&](...) { ... }` which explicitly captures any parameters or local variables by reference. If we were to actually use any of those captures (we don't), we would invoke undefined behaviour. So instead, convert all the `[&]` to `[]` to avoid capturing, and as part of `RPCHelpMan` check that the function we provide is convertible to a bare function pointer, so that any attempts to capture anything (even if it's by-copy, which is safe) results in an error.\r\n\r\nWhile we're at it, rename `RPCHelpMan` to `RPCMethod`, reflecting it's greater responsibility since #19386.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-11T03:25:25Z",
      "updated_at": "2026-01-03T05:59:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34049",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683353492,
      "number": 33033,
      "title": "wallet, sqlite: Encapsulate SQLite statements in a RAII class",
      "body": "SQLite statements are C objects which can be long lived, so having them be initialized in a constructor, and cleanup everything in a destructor, makes the sqlite code cleaner and easier to read. This also lets us have the various functions needed to interact with sqlite statements be member functions.\r\n\r\nThis will be particularly useful in future work which makes use of more complicated SQL statements.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:43:08Z",
      "updated_at": "2026-01-03T04:31:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33033",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 467,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3004394579,
      "number": 33866,
      "title": "refactor: Let CCoinsViewCache::BatchWrite return void",
      "body": "CCoinsViewCache::BatchWrite always returns true if called from a backed cache, so just return void instead. Also return void from ::Sync and ::Flush.\r\n   \r\nThis allows for dropping a FatalError condition and simplifying some dead error handling code a bit.\r\n\r\nSince we now no longer exercise the \"error path\" when returning from `CCoinsView::BatchWrite`, make the method clear the cache instead. This should only be exercised by tests and not change production behaviour. This might slightly improve the coins_view fuzz test's ability to generate better coverage.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-11-12T21:42:34Z",
      "updated_at": "2026-01-03T00:49:38Z",
      "merged_at": "2026-01-03T00:49:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33866",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 617,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2829858173,
      "number": 33392,
      "title": "wallet, rpc: add UTXO set check and incremental rescan to importdescriptors",
      "body": "Fixes [#28898](https://github.com/bitcoin/bitcoin/issues/28898)\r\n\r\nWhen importing descriptors, users may accidentally provide an incorrect birthdate (timestamp). This can cause the wallet to miss relevant historical transactions, leading to incorrect or incomplete balances. Currently, the wallet only relies on rescans starting from the provided timestamp.\r\n\r\nThis PR extends the importdescriptors RPC with a new optional argument:\r\n`scan_utxoset` (bool, default=false):\r\nIf enabled, the wallet will compare its calculated trusted balance against UTXO set balance (by generating the `scriptpukeys` of the wallet and comparing it with the chains UTXO set `scriptpubkeys` to get the accurate balance belonging to the wallet and comparing it with the wallet trusted balance).\r\n\r\nIf the balances match, import continues as normal.\r\nIf a discrepancy is detected, the wallet will attempt incremental rescans in chunks of recent blocks until the missing history is found. If the wallet is pruned, incremental rescans will not go earlier than the prune boundary.\r\n\r\nAdditional information is returned in the RPC response under an `\"info\" ` object when `scan_utxoset` is used, such as:\r\n`utxo_check`: whether the UTXO set matched the wallet balance\r\n`scanned_chunks:` number of incremental rescan chunks attempted\r\n`scanned_blocks`: approximate number of blocks scanned during incremental rescans\r\n\r\nThis helps detect and fix balance mismatches caused by wrong descriptor timestamps.\r\n\r\nA big thanks to **fjahr** for suggesting this approach [comment](https://github.com/bitcoin/bitcoin/pull/33392#issuecomment-3300319224)\r\n",
      "state": "open",
      "user": "musaHaruna",
      "created_at": "2025-09-15T16:17:12Z",
      "updated_at": "2026-01-03T00:19:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33392",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1692,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2720995794,
      "number": 33135,
      "title": "wallet: warn against accidental unsafe older() import",
      "body": "[BIP 379](https://github.com/bitcoin/bips/blob/master/bip-0379.md) ([Miniscript](https://bitcoin.sipa.be/miniscript/)) allows relative height and time locks that have no consensus meaning in [BIP 68](https://github.com/bitcoin/bips/blob/master/bip-0068.mediawiki) (relative timelocks) / [BIP 112](https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki) (`CHECKSEQUENCEVERIFY`). This is (ab)used by some protocols, e.g. [by Lightning to encode extra data](https://delvingbitcoin.org/t/exploring-extended-relative-timelocks/1818/23), but is unsafe when used unintentionally: `older(65536)` is equivalent to `older(1)`.\r\n\r\nThis PR emits a warning when `importdescriptors` contains such a descriptor.\r\n\r\nThe first commit makes `SEQUENCE_LOCKTIME` flags reusable by other tests.\r\n\r\nThe main commit adds the `ForEachNode` helper to `miniscript.h` which is then used in the `MiniscriptDescriptor` constructor to check for `Fragment::OLDER` with unsafe values. These are stored in `m_warnings`, which the RPC code then collects via `Warnings()`.\r\n\r\nIt adds both a unit and functional test.\r\n\r\n---\r\n\r\nA previous version of this PR prevented the import, unless the user opted in with an `unsafe` flag. It also used string parsing in the RPC code.\r\n\r\n---\r\n\r\nBased on:\r\n- [x] https://github.com/bitcoin/bitcoin/pull/33914",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-08-05T12:00:42Z",
      "updated_at": "2026-01-03T00:16:05Z",
      "merged_at": "2026-01-03T00:16:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33135",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1371,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2486358825,
      "number": 32367,
      "title": "cmake: Check user-defined `APPEND_*FLAGS` variables early",
      "body": "For the purpose of checks performed by the build system, we strive to handle user-defined `APPEND_*FLAGS` in the same way as flags provided by other standard means. In particular, they are considered when the `try_compile()` command is used.\r\n\r\nHowever, these flags are not considered during `enable_language()` command invocation due to design limitations, which might cause issues, such as https://github.com/bitcoin/bitcoin/issues/32323.\r\n\r\nThis PR addresses the issue by introducing an additional compiler check that does consider the user-defined `APPEND_*FLAGS`.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32323:\r\n```\r\n$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init\"\r\n-- The CXX compiler identification is GNU 14.2.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Failed\r\nCMake Error at cmake/module/EnableLanguage.cmake:42 (message):\r\n  The CXX compiler is not able to compile a simple test program.\r\n\r\n  Check that the \"APPEND_*FLAGS\" variables are set correctly.\r\n\r\n\r\n\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:71 (bitcoincore_enable_language)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nhebasto@TS-P340:~/dev/bitcoin$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init=zero\"\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Success\r\n...\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-04-28T16:35:27Z",
      "updated_at": "2026-01-03T00:13:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32367",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1636,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2680024170,
      "number": 33023,
      "title": "test: Add functional tests for blockreconstructionextratxn and extra pool (compactblocks)",
      "body": "This tests the -blockreconstructionextratxn parameter and extra pool memory (ring buffer) behavior used specifically for compact block reconstruction. The \"extra transaction pool\" stores transactions that were rejected from the mempool for policy reasons (dust, low fees, non-standard scripts), txs replaced via rbf, etc…\r\n\r\nThere is no test coverage for this. (no unit tests either as the code being tested - in PeerManagerImpl - isn't publicly accessible in the net_processing.h file)\r\n\r\nThe code being tested is in src/net_processing.cpp - look for vExtraTxnForCompact, AddToCompactExtraTransactions and -blockreconstructionextratxn start arg.\r\n\r\nThis tests\r\n\r\nPolicy-rejected transactions are stored in the extra pool: Transactions rejected for being dust, having low fees, or using non-standard scripts are kept in the extra pool\r\nPool capacity limits work correctly: Tests various pool sizes. Default is 100.\r\nEviction behavior: When the extra pool is full, the oldest transactions are evicted (FIFO)\r\nWraparound behavior: The extra pool correctly wraps around when adding new transactions\r\nCompact block reconstruction: These extra transactions are actually used during block reconstruction\r\n\r\nUses policy rejected transactions to populate the extra pool for tests.\r\n\r\n(Updated 08/29/25: rebased to currrent master and fixed tests to accommodate new low-fee rate policy)",
      "state": "open",
      "user": "bigshiny90",
      "created_at": "2025-07-20T16:40:28Z",
      "updated_at": "2026-01-02T23:49:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33023",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1467,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977401488,
      "number": 33779,
      "title": "ci, iwyu: Fix warnings in `src/kernel` and treat them as errors",
      "body": "Now seems like a good time to update the includes in `src/kernel`.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-04T17:03:05Z",
      "updated_at": "2026-01-02T23:25:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33779",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 130,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3104076541,
      "number": 34079,
      "title": "kernel: Remove non-kernel module includes",
      "body": "Found these while attempting to isolate the kernel library sources into their own repository. There still is no mechanism for preventing including headers into the kernel library that don't belong to kernel modules, but it is also fairly straight forward to correct manually for now. However, the changes here might be incomplete.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-12-15T21:30:55Z",
      "updated_at": "2026-01-02T23:21:40Z",
      "merged_at": "2025-12-22T14:07:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34079",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 372,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2224317475,
      "number": 31449,
      "title": "coins,refactor: Reduce `getblockstats` RPC UTXO overhead estimation",
      "body": "The [`getblockstats` RPC](https://github.com/bitcoin/bitcoin/pull/10757) currently overestimates UTXO overhead by treating the `fCoinBase` bitfield as an additional `bool` in `PER_UTXO_OVERHEAD`.\r\nHowever, `fCoinBase` and `nHeight` are stored as bitfields and effectively packed into a single 32-bit value; counting an extra bool in the overhead calculation is unnecessary.\r\n\r\nThis PR introduces the following changes across three commits:\r\n* Store `fCoinBase` as a bool bitfield to reduce implicit conversions at call sites.\r\n* Use a consistent height/coinbase packing style across Coin serialization, undo serialization, and coinstats hashing (casting `nHeight` to `uint32_t` before shifting to avoid signed-promotion UB).\r\n* Adjust UTXO overhead estimation to match the actual Coin layout and update the related tests accordingly.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2024-12-09T17:36:50Z",
      "updated_at": "2026-01-02T22:52:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31449",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 901,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3136120149,
      "number": 34179,
      "title": "refactor: Enable transparent lookup for setBlockIndexCandidates to remove const_cast",
      "body": "### Rationale\r\n\r\nThis PR improves code safety by removing a `const_cast` in `src/validation.cpp`.\r\n\r\nCurrently, `setBlockIndexCandidates` stores mutable `CBlockIndex*`. However, validation logic (like `CVerifyDB`) often holds `const CBlockIndex*`. Previously, checking for existence in the set required casting away constness. While currently benign, this bypasses compiler safety checks and could mask accidental modifications in future refactors.\r\n\r\n### Description\r\n\r\n1.  **Enable Heterogeneous Lookup:** Added `using is_transparent = void;` to `CBlockIndexWorkComparator` in `src/node/blockstorage.h`. This allows the `std::set` to natively accept `const CBlockIndex*` for lookup (utilizing C++14 heterogeneous lookup).\r\n2.  **Remove Cast:** Removed the now unnecessary `const_cast<CBlockIndex*>` in `src/validation.cpp`, allowing the compiler to strictly enforce const-correctness.\r\n\r\n### Notes\r\n\r\n- **Refactoring only:** No behavioral change.\r\n- **Verification:** `validation_tests` and `blockmanager_tests` pass.",
      "state": "open",
      "user": "joaonevess",
      "created_at": "2025-12-30T07:40:16Z",
      "updated_at": "2026-01-02T19:08:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34179",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1104,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1780312050,
      "number": 29678,
      "title": "Bugfix: Correct first-run free space checks",
      "body": "It's not clear what `m_assumed_*_size` are actually set based on, but historically it was in GB, not GiB, and that's still used in the GUI which is more user-facing.\r\n\r\nCould just as easily change the GUI if GiB is preferred.",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2024-03-19T16:36:10Z",
      "updated_at": "2026-01-02T17:02:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29678",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 269,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3142315688,
      "number": 34191,
      "title": "doc: archive release notes for v30.1",
      "body": "(fixing the `.x` typo)",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-02T15:20:09Z",
      "updated_at": "2026-01-02T16:11:42Z",
      "merged_at": "2026-01-02T16:11:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34191",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 59,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2847377749,
      "number": 33451,
      "title": "doc: Add `INSTALL.md` to Linux release tarballs",
      "body": "Closes https://github.com/bitcoin/bitcoin/issues/32097:\r\n> Better I think would be to add instructions for the most popular desktop distros.\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-09-21T19:32:43Z",
      "updated_at": "2026-01-02T15:24:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33451",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 190,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3129357859,
      "number": 34149,
      "title": "test: add comprehensive bech32 unit tests based on BIP-173 :christmas_tree:",
      "body": "## Description\r\n\r\nThis PR improves unit test coverage for the bech32 encoding implementation by adding 9 new test cases based on the BIP-173 specification.\r\n\r\n### Motivation\r\n\r\nThe existing bech32 tests cover the standard test vectors from BIP-173/350 but don't extensively test edge cases and error detection properties. Since bech32 is used for SegWit and Taproot addresses, comprehensive testing is important to catch potential regressions.\r\n\r\n### Changes\r\n\r\nNew test cases added to `src/test/bech32_tests.cpp`:\r\n\r\n| Test | Description |\r\n|------|-------------|\r\n| `bech32_charset_encoding` | Verifies all 32 valid characters encode and decode correctly |\r\n| `bech32_roundtrip_encoding` | Tests encode/decode round-trip for data sizes 0-40 bytes |\r\n| `bech32_length_limits` | Tests the 90-character maximum length boundary |\r\n| `bech32_hrp_limits` | Tests HRP edge cases: minimum length, boundary ASCII chars (33, 126), separator in HRP |\r\n| `bech32_single_error_detection` | Verifies single-character errors are detected at every position |\r\n| `bech32_transposition_detection` | Verifies adjacent character transpositions are detected |\r\n| `bech32_multiple_error_detection` | Tests guaranteed detection of 2, 3, and 4 errors |\r\n| `bech32_case_sensitivity` | Tests uppercase, lowercase, and mixed case handling per BIP-173 |\r\n| `bech32_checksum_properties` | Verifies checksum is exactly 6 characters and deterministic |\r\n\r\nThese tests cover the following BIP-173 specification requirements:\r\n- Character set validation (32-character alphabet)\r\n- Maximum length enforcement (90 characters)\r\n- Error detection guarantees (up to 4 errors)\r\n- Case sensitivity rules (reject mixed case)\r\n- Checksum properties (6-character BCH code)\r\n\r\n### References\r\n\r\n- [BIP-173: Base32 address format for native v0-16 witness outputs](https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki)\r\n- [BIP-350: Bech32m format for v1+ witness addresses](https://github.com/bitcoin/bips/blob/master/bip-0350.mediawiki)\r\n\r\n---\r\n\r\n## PR Checklist\r\n\r\n- [x] Tests pass locally: `ctest --test-dir build -R bech32`\r\n- [x] Code follows existing style in `bech32_tests.cpp`\r\n- [x] Comments reference BIP-173 sections where applicable\r\n- [x] No new dependencies introduced",
      "state": "closed",
      "user": "bitcoinbrisbane",
      "created_at": "2025-12-25T00:48:47Z",
      "updated_at": "2026-01-02T14:37:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34149",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 2324,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3107312391,
      "number": 34081,
      "title": "build: Fix source paths for debugging in CMake",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale or clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\nWith the build workflow change from Autotools to CMake, the debug information became incorrect due to outdated file path remapping (#31204). This issue comes from a workaround that was needed in the previous build system (#21885 problem, which was addressed in #20353 and later again on #22409. ).\r\n\r\nThis PR attempts to resolve the problem by correcting the file path remapping for the new out-of-source build.\r\n\r\nI have tested the fix both in the terminal using GDB and in VS Code using LLDB\r\n\r\nAfter my changes, I tested by running `gdb`:\r\n```\r\ncmake -DCMAKE_BUILD_TYPE=Debug -B build \r\ncmake --build build -j \"$(($(nproc)/2+1))\"\r\n\r\ngdb  build/bin/bitcoind\r\nbreak init.cpp:1848\r\nrun  -regtest \r\n      Thread 1 \"bitcoind\" hit Breakpoint 1, AppInitMain (node=..., tip_info=0x0) at ./init.cpp:1848\r\n       1848        if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\r\n```\r\nAnd also with `lldb` and vscode using the following `.vscode/launch.json`:\r\n```\r\n{\r\n\"version\": \"0.2.0\",\r\n\"configurations\": [\r\n\t{\r\n\t\"type\": \"lldb\",\r\n\t\"request\": \"launch\",\r\n\t\"name\": \"Debug\",\r\n\t\"program\": \"${workspaceFolder}/build/bin/bitcoind\",\r\n\t\"args\": [\r\n\t\t\"-regtest\"\r\n\t],\r\n\t\"cwd\": \"${workspaceFolder}\",\r\n\t}\r\n]\r\n}\r\n```\r\n## Alternatives\r\nIf this PR is not considered, I have two alternative proposals:\r\n- Update the doc to remove the text indicating the user must debug from the root of the project\r\n- PR #https://github.com/bitcoin/bitcoin/pull/32205 Update the doc indicating they must use  `set substitute-path path/to/build/src /path/to/project/root/src`\r\n\r\n",
      "state": "closed",
      "user": "arejula27",
      "created_at": "2025-12-16T18:20:47Z",
      "updated_at": "2026-01-02T14:13:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34081",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 3646,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3118781384,
      "number": 34122,
      "title": "script: Default script_verify_flags comparisons",
      "body": "Replace the manual operator== and friend operator<=> in src/script/verify_flags.h with a defaulted member operator<=>.\r\n\r\nThis reduces boilerplate while preserving the existing semantics (m_value comparison) and continues to provide ==, <, >, <=, and >= via the compiler-generated comparison operators.\r\n\r\n**Note**: This is a small refactor, but it removes duplicated comparison logic and reduces the chance of == and <=> diverging in future edits. If that’s not considered worthwhile, I can close/drop it.",
      "state": "open",
      "user": "Brotcrunsher",
      "created_at": "2025-12-19T20:50:34Z",
      "updated_at": "2026-01-02T11:59:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34122",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 554,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3135175143,
      "number": 34177,
      "title": "policy/refactor: remove constant parameter from `IsWellFormedPackage`",
      "body": "`IsWellFormedPackage()` already claims: \"parents must appear before children.\" In practice the `require_sorted` argument was always passed as `true`, making the false-path dead code. It was introduced that way from the beginning in https://github.com/bitcoin/bitcoin/pull/28758/files#diff-f30090b30c9489972ee3f1181c302cf3a484bb890bade0fd7c9ca92ea8d347f6R79.\r\n\r\nRemove the unused parameter, updating callers/tests.\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-29T20:27:30Z",
      "updated_at": "2026-01-02T10:26:27Z",
      "merged_at": "2026-01-02T10:25:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34177",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 485,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2784259944,
      "number": 33270,
      "title": "stabilize translations by reverting old ids by text content",
      "body": "### Summary\r\n\r\nRegenerating the Qt translation template (`src/qt/locale/bitcoin_en.xlf`) previously used sequential `_msg<N>` IDs. When strings moved within the sorted message list, IDs shifted, creating large diffs and making translation platforms treat unchanged strings as new.\r\n\r\nThis PR switches XLF `<trans-unit id=...>` values to stable IDs derived from a SHA256 hash of the message context and source text.\r\n\r\n### Details\r\n\r\nAs mentioned in https://github.com/bitcoin/bitcoin/pull/33224#issuecomment-3234820665, any change that moves a translatable string within the sorted messages can renumber subsequent entries when IDs are sequential.\r\n\r\nSome English texts can appear in multiple places (e.g. “Clear”) with different meanings depending on the Qt context. To avoid collisions, the hash includes the `<group resname=...>` context.\r\n\r\n### Fix\r\n\r\nThe `translate` target already runs `contrib/devtools/stabilize_xlf_ids.py`. Instead of trying to preserve/renumber `_msg<N>` IDs by matching old/new units, the script now rewrites every `<trans-unit id>` to:\r\n\r\n- `sha256(resname + \"\\0\" + source-text)` (hex)\r\n- keeping the existing plural `[N]` suffix for plural forms\r\n\r\nThe script also checks for duplicate IDs and aborts if any are detected.\r\n\r\nNote: this is a one-time mass change from `_msg<N>` IDs to hashes; after that, rerunning `translate` on an unchanged tree should not churn IDs.\r\n\r\nWith this PR applied, IDs become stable hashes so ordering changes no longer cause renumbering churn.\r\n\r\n### Reproducer\r\n\r\nYou can test the replacer by changing any translatable text:\r\n```patch\r\ndiff --git a/src/qt/bitcoingui.cpp b/src/qt/bitcoingui.cpp\r\n--- a/src/qt/bitcoingui.cpp\t(revision a38b8cf788922174538161cda81ce28f2ac462ec)\r\n+++ b/src/qt/bitcoingui.cpp\t(date 1767310724675)\r\n@@ -258,7 +258,7 @@\r\n     connect(modalOverlay, &ModalOverlay::triggered, tabGroup, &QActionGroup::setEnabled);\r\n \r\n     overviewAction = new QAction(platformStyle->SingleColorIcon(\":/icons/overview\"), tr(\"&Overview\"), this);\r\n-    overviewAction->setStatusTip(tr(\"Show general overview of wallet\"));\r\n+    overviewAction->setStatusTip(tr(\"Show general overview of Wallet\"));\r\n     overviewAction->setToolTip(overviewAction->statusTip());\r\n     overviewAction->setCheckable(true);\r\n     overviewAction->setShortcut(QKeySequence(QStringLiteral(\"Alt+1\")));\r\n```\r\nand regenerating the translations\r\n```bash\r\ncmake --preset dev-mode -DWITH_USDT=OFF && cmake --build build_dev_mode --target translate\r\n```\r\nYou will notice that the new text moved to a different place with a different hash, but all other messages retained their IDs.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-08-29T09:23:56Z",
      "updated_at": "2026-01-01T23:41:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33270",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2676,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2253393080,
      "number": 31572,
      "title": "refactor: Remove redundant edge case in fee rate rounding logic",
      "body": "Positive fractional fee rates are already rounded away from zero, so the first half of this if-statement is unnecessary:\r\n\r\n```\r\nif (nFee == 0 && nSize != 0) {\r\n    if (nSatoshisPerK > 0) nFee = CAmount(1);\r\n    if (nSatoshisPerK < 0) nFee = CAmount(-1);\r\n}\r\n```\r\n\r\nAddresses #31558. This fix improves code readability.",
      "state": "closed",
      "user": "jaeheonshim",
      "created_at": "2024-12-27T13:14:52Z",
      "updated_at": "2025-12-31T12:41:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31572",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 383,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3136536474,
      "number": 34180,
      "title": "bench: add `SIGABRT` handler to show failed bench name",
      "body": "### Problem\r\nWhen a benchmark triggers an assertion failure or abort deeper down the stack, the output provides no indication of which benchmark failed.\r\n\r\n### Reproducer\r\nTo reproduce, inject a failure outside the benchmarks:\r\n```patch\r\ndiff --git a/src/streams.h b/src/streams.h\r\n--- a/src/streams.h\t(revision aa2eebdb1e8182394d44fd9719e316ea52926cab)\r\n+++ b/src/streams.h\t(date 1767091264182)\r\n@@ -179,6 +179,7 @@\r\n\r\n     bool Rewind(std::optional<size_type> n = std::nullopt)\r\n     {\r\n+        Assert(false);\r\n         // Total rewind if no size is passed\r\n         if (!n) {\r\n             m_read_pos = 0;\r\n```\r\n\r\nand run with a filter matching multiple benchmarks:\r\n```bash\r\nrm -rfd build && cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_BENCH=ON && cmake --build build -j$(nproc) && ./build/bin/bench_bitcoin -filter='DeserializeAndCheckBlockTest|DeserializeBlockTest|PrevectorDeserialize' -sanity-check\r\n```\r\n\r\nBefore - the outputs provide no indication which benchmark failed:\r\n```bash\r\nstreams.h:182 bool DataStream::Rewind(std::optional<size_type>): Assertion `false' failed.\r\nzsh: abort      ./build/bin/bench_bitcoin  -sanity-check\r\n```\r\n\r\n### Fix\r\nThis PR adds a `SIGABRT` signal handler that prints the currently running benchmark's name before re-raising the signal. The name only appears on failure, not before each benchmark starts, keeping normal output clean.\r\n\r\nAfter - the benchmark name is logged, and the signal re-raised:\r\n```bash\r\nstreams.h:182 bool DataStream::Rewind(std::optional<size_type>): Assertion `false' failed.\r\nBenchmark failed: DeserializeAndCheckBlockTest.\r\nzsh: abort      ./build/bin/bench_bitcoin  -sanity-check\r\n```\r\n\r\n### Considerations\r\nWorks in both debug and release builds since it doesn't rely on stack traces (which would require debug symbols).",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-30T11:11:51Z",
      "updated_at": "2025-12-31T12:14:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34180",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1854,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2893662859,
      "number": 33562,
      "title": "DRAFT: add a freebsd job using systemlibs",
      "body": "Re #33438\r\n\r\nTest a basic freebsd job in this repo using cirrus runners to get some info on how long a run will take on Cirrus Runners.\r\n\r\nA run on GHA (free) runners is clocking in at around 50 - 60 minutes: https://github.com/willcl-ark/bitcoin/actions/runs/18309856374/job/52135663056 \r\n\r\nThis will need permitting of the `vmactions/freebsd-vm@v1` action in this repo. This action seems well-maintained/used, including by [`rustup`](https://github.com/rust-lang/rustup/blob/061cf7830a61eaefaddddb8454232186d26fd2d1/ci/actions-templates/freebsd-builds-template.yaml#L19), python [`psutil`](https://github.com/giampaolo/psutil/blob/0217662c7e3381612e1a15181b02fe3d06894272/.github/workflows/bsd.yml#L19) and a few other notable repos.\r\n\r\nThis job could alternatively be run as a nightly job (but in this repo, rather than elsewhere), but that does not seem to address:\r\n\r\n> BSDs are being tested in nightly repos, but merging code here, just to have it reported as broken after the fact, which then requires more changes to fix, isn't ideal. Issues should be caught in this repo, before merging.\r\n\r\nInspiration taken from https://github.com/hebasto/bitcoin-core-nightly/blob/main/.github/workflows/freebsd.yml",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-10-07T11:35:43Z",
      "updated_at": "2025-12-31T11:28:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33562",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1252,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134634832,
      "number": 34172,
      "title": "Fix intermittent issue in p2p_1p1c_network.py",
      "body": "Resolves https://github.com/bitcoin/bitcoin/issues/33318 in a minimal fashion. Given that the orphan transactions aren't being persisted anymore, I'm not that specific case offers much coverage, but kept it around for now to get rid of the timeouts at least.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-12-29T15:17:04Z",
      "updated_at": "2025-12-31T11:27:02Z",
      "merged_at": "2025-12-31T11:27:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34172",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 304,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3113878991,
      "number": 34102,
      "title": "depends: capnp 1.3.0",
      "body": "Update capnp in depends to `1.3.0`.\r\n\r\nChanges: https://github.com/capnproto/capnproto/compare/release-1.2.0...release-1.3.0.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-18T13:57:11Z",
      "updated_at": "2025-12-31T11:12:56Z",
      "merged_at": "2025-12-30T23:52:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34102",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 146,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2005623544,
      "number": 30595,
      "title": "kernel: Introduce C header API",
      "body": "This is a first attempt at introducing a C header for the libbitcoinkernel library that may be used by external applications for interfacing with Bitcoin Core's validation logic. It currently is limited to operations on blocks. This is a conscious choice, since it already offers a lot of powerful functionality, but sits just on the cusp of still being reviewable scope-wise while giving some pointers on how the rest of the API could look like.\r\n\r\nThe current design was informed by the development of some tools using the C header:\r\n\r\n* A re-implementation (part of this pull request) of [bitcoin-chainstate](https://github.com/bitcoin/bitcoin/blob/master/src/bitcoin-chainstate.cpp).\r\n* A re-implementation of the python [block linearize](https://github.com/bitcoin/bitcoin/tree/master/contrib/linearize) scripts: https://github.com/TheCharlatan/bitcoin/tree/kernelLinearize \r\n* A silent payment scanner: https://github.com/josibake/silent-payments-scanner\r\n* An electrs index builder: https://github.com/josibake/electrs/commits/electrs-kernel-integration\r\n* A rust bitcoin node: https://github.com/TheCharlatan/kernel-node\r\n* A reindexer: https://github.com/TheCharlatan/bitcoin/tree/kernelApi_Reindexer\r\n\r\nThe library has also been used by other developers already:\r\n\r\n* A historical block analysis tool: https://github.com/ismaelsadeeq/mining-analysis\r\n* A swiftsync hints generator: https://github.com/theStack/swiftsync-hints-gen\r\n* Fast script validation in floresta: https://github.com/vinteumorg/Floresta/pull/456\r\n* A swiftsync node implementation: https://github.com/2140-dev/swiftsync/tree/master/node\r\n\r\nNext to the C++ header also made available in this pull request, bindings for other languages are available here: \r\n\r\n* Rust: https://github.com/TheCharlatan/rust-bitcoinkernel\r\n* Python: https://github.com/stickies-v/py-bitcoinkernel \r\n* Go: https://github.com/stringintech/go-bitcoinkernel\r\n* Java: https://github.com/yuvicc/java-bitcoinkernel\r\n\r\nThe rust bindings include unit and fuzz tests for the API.\r\n\r\nThe header currently exposes logic for enabling the following functionality:\r\n* Feature-parity with the now deprecated libbitcoin-consensus\r\n* Optimized sha256 implementations that were not available to previous users of libbitcoin-consensus thanks to a static kernel context\r\n* Full support for logging as well as control over categories and severity\r\n* Feature parity with the existing experimental bitcoin-chainstate\r\n* Traversing the block index as well as using block index entries for reading block and undo data.\r\n* Running the chainstate in memory\r\n* Reindexing (both full and chainstate-only)\r\n* Interrupting long-running functions\r\n\r\nThe pull request introduces a new kernel-only test binary that purely relies on the kernel C header and the C++ standard library. This is intentionally done to show its capabilities without relying on other code inside the project. This may be relaxed to include some of the existing utilities, or even be merged into the existing test suite.\r\n\r\nThe complete docs for the API as well as some usage examples are hosted on [thecharlatan.ch/kernel-docs](https://thecharlatan.ch/kernel-docs/index.html). The docs are generated from the following repository (which also holds the examples): [github.com/TheCharlatan/kernel-docs](https://github.com/TheCharlatan/kernel-docs).\r\n\r\n#### How can I review this PR?\r\n\r\nScrutinize the commit messages, run the tests, write your own little applications using the library, let your favorite code sanitizer loose on it, hook it up to your fuzzing infrastructure, profile the difference between the existing bitcoin-chainstate and the bitcoin-chainstate introduced here, be nitty on the documentation, police the C interface, opine on your own API design philosophy.\r\n\r\nTo get a feeling for the API, read through the tests, or one of the examples.\r\n\r\nTo configure this PR for making the shared library and the bitcoin-chainstate and test_kernel utilities available:\r\n```\r\ncmake -B build -DBUILD_KERNEL_LIB=ON -DBUILD_UTIL_CHAINSTATE=ON\r\n```\r\n\r\nOnce compiled the library is part of the build artifacts that can be installed with:\r\n```\r\ncmake --install build\r\n```\r\n\r\n#### Why a C header (and not a C++ header)\r\n\r\n* Shipping a shared library with a C++ header is hard, because of name mangling and an unstable ABI.\r\n* Mature and well-supported tooling for integrating C exists for nearly every popular language.\r\n* C offers a reasonably stable ABI\r\n\r\nAlso see https://github.com/bitcoin/bitcoin/pull/30595#issuecomment-2285719575.\r\n\r\n#### What about versioning?\r\n\r\nThe header and library are still experimental and I would expect this to remain so for some time, so best not to worry about versioning yet.\r\n\r\n#### Potential future additions\r\n\r\nIn future, the C header could be expanded to support (some of these have been roughly implemented):\r\n\r\n* Handling transactions, block headers, coins cache, utxo set, meta data, and the mempool\r\n* Adapters for an abstract coins store\r\n* Adapters for an abstract block store\r\n* Adapters for an abstract block tree store\r\n* Allocators and buffers for more efficient memory usage\r\n* An \"[io-less](https://sans-io.readthedocs.io/how-to-sans-io.html)\" interface\r\n* Hooks for an external mempool, or external policy rules\r\n\r\n#### Current drawbacks\r\n\r\n* For external applications to read the block index of an existing Bitcoin Core node, Bitcoin Core needs to shut down first, since leveldb does not support reading across multiple processes. Other than migrating away from leveldb, there does not seem to be a solution for this problem. Such a migration is implemented in #32427.\r\n* The fatal error handling through the notifications is awkward. This is partly improved through #29642.\r\n* Handling shared pointers in the interfaces is unfortunate. They make ownership and freeing of the resources fuzzy and poison the interfaces with additional types and complexity. However, they seem to be an artifact of the current code that interfaces with the validation engine. The validation engine itself does not seem to make extensive use of these shared pointers.\r\n* If multiple instances of the same type of objects are used, there is no mechanism for distinguishing the log messages produced by each of them. A potential solution is #30342.\r\n* The background leveldb compaction thread may not finish in time leading to a non-clean exit. There seems to be nothing we can do about this, outside of patching leveldb.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-08-06T09:18:27Z",
      "updated_at": "2025-12-30T22:22:11Z",
      "merged_at": "2025-11-04T15:38:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30595",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6484,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2418138719,
      "number": 32143,
      "title": "Fix 11-year-old mis-categorized error code in OP_IF evaluation",
      "body": "This was introduced by commit ab9edbd6b6eb3efbca11f16fa467c3c0ef905708.\r\n\r\nIt appears the original author may have gotten tired and pasted the wrong error code into this 1 place. Every other situation where the value stack lacks the required number of arguments for the op-code, SCRIPT_ERR_INVALID_STACK_OPERATION is reported. Not so here.  \r\n\r\nThis commit fixes the situation.\r\n\r\nEDIT: Note this turns out to be a dupe of the abandoned #30359 .  \r\n",
      "state": "open",
      "user": "cculianu",
      "created_at": "2025-03-26T01:46:27Z",
      "updated_at": "2025-12-30T17:44:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32143",
      "labels": [
        "Validation",
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 512,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2968581457,
      "number": 33759,
      "title": "Fix BIP143 standardness rules for CHECKMULTISIG",
      "body": "From https://github.com/bitcoin/bips/blob/master/bip-0143.mediawiki#restrictions-on-public-key-type\r\n\r\n> As a default policy, only compressed public keys are accepted in P2WPKH and\r\n> P2WSH. Each public key passed to a sigop inside version 0 witness program must\r\n> be a compressed key: the first byte MUST be either 0x02 or 0x03, and the size\r\n> MUST be 33 bytes. Transactions that break this rule will not be relayed or mined\r\n> by default.\r\n\r\nPR #8499 's implemenation is insufficent to meet BIP143's requirements as it only checks those pubkeys processed by CHECKMULTISIG, whereas BIP143 requires that every public key passed to the CHECKMULTISIG be validated.\r\n\r\nNote: these restrictions are policy only and not consensus rules.\r\n",
      "state": "open",
      "user": "roconnor-blockstream",
      "created_at": "2025-11-01T01:54:02Z",
      "updated_at": "2025-12-30T17:02:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33759",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 783,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2919092278,
      "number": 33637,
      "title": "refactor: optimize block index comparisons (1.4-6.8x faster)",
      "body": "### Context\r\nThe comparator is often called either directly or for the sorting of [setBlockIndexCandidates](https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L637), a red-black tree-set containing valid block headers where the comparator is invoked extensively.\r\nBesided the sorted set usages, the comparator is used directly in `Chainstate` in `FindMostWorkChain`, `PruneBlockIndexCandidates`, `ActivateBestChain` and `InvalidateBlock`; and in `ChainstateManager` in `LoadBlockIndex`, `CheckBlockIndex`, `ActivateSnapshot` and `PopulateAndValidateSnapshot`.\r\n\r\nIt was profiled during the investigation of https://github.com/bitcoin/bitcoin/issues/33618#issuecomment-3402229976. \r\n\r\n### Testing\r\nTo ensure the optimized implementations are both fast and correct, the first commit adds a dedicated benchmark to measure `CBlockIndexWorkComparator` performance, and the second commit adds randomized tests comparing the new implementation with the original one.\r\n\r\n### Results\r\n\r\n> GCC 15.0.1:\r\n\r\n* `CBlockIndexWorkComparator`: 100,772,511 cmp/s → 656,674,205 cmp/s = 6.51x faster\r\n* `CheckBlockIndex`: 9,091 ops/s → 14,765 ops/s = 1.62x faster\r\n\r\n> Clang 22.0.0:\r\n\r\n* `CBlockIndexWorkComparator`: 100,451,893 cmp/s → 683,414,234 cmp/s = 6.8x faster\r\n* `CheckBlockIndex`: 10,322 ops/s → 14,376 ops/s = 1.39x faster\r\n\r\nSee https://corecheck.dev/bitcoin/bitcoin/pulls/33637 for the CI's `CheckBlockIndex` performance.\r\n\r\n<details>\r\n<summary>gcc and clang measurements</summary>\r\n\r\n> Compiler: gcc 15.0.1\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.92 |      100,772,511.62 |    0.0% |           63.98 |           35.64 |  1.795 |          14.17 |    1.9% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          109,996.46 |            9,091.20 |    0.2% |    1,014,421.11 |      394,979.29 |  2.568 |     313,025.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.48 |      154,439,491.66 |    0.0% |           31.01 |           23.25 |  1.334 |           7.16 |    3.8% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          105,754.86 |            9,455.83 |    0.1% |      913,130.11 |      379,588.20 |  2.406 |     276,692.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.37 |      156,990,488.06 |    0.0% |           28.85 |           22.87 |  1.261 |           8.61 |    3.2% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           83,803.10 |           11,932.73 |    0.0% |      743,565.09 |      300,824.84 |  2.472 |     232,646.08 |    0.0% |      5.56 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.52 |      656,674,205.98 |    0.0% |           13.18 |            5.47 |  2.410 |           3.06 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           67,726.84 |           14,765.19 |    0.2% |      585,826.07 |      243,155.90 |  2.409 |     181,920.07 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n> Compiler: clang 22.0.0\r\n\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.96 |      100,451,893.46 |    0.0% |           61.28 |           35.75 |  1.714 |          13.62 |    2.1% |      5.52 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           96,878.70 |           10,322.19 |    0.1% |      802,827.10 |      347,679.01 |  2.309 |     234,823.10 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.13 |      163,183,693.10 |    0.0% |           25.74 |           22.01 |  1.170 |           6.10 |    4.6% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           86,307.94 |           11,586.42 |    1.2% |      646,229.09 |      309,785.33 |  2.086 |     195,119.09 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.36 |      157,330,900.16 |    1.0% |           26.20 |           22.61 |  1.159 |           6.55 |    4.4% |      5.53 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           75,031.66 |           13,327.71 |    1.0% |      650,604.15 |      266,934.04 |  2.437 |     149,967.14 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.46 |      683,414,234.14 |    0.0% |           16.12 |            5.25 |  3.067 |           4.02 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           69,559.70 |           14,376.14 |    0.1% |      559,208.07 |      249,654.28 |  2.240 |     132,342.07 |    0.0% |      5.51 | `CheckBlockIndex`\r\n\r\n</details>\r\n\r\n### Reproducer\r\n\r\nRun the equivalence tests with:\r\n```bash\r\ncmake -B build && cmake --build build && ./build/bin/test_bitcoin --run_test=arith_uint256_tests,blockchain_tests\r\n```\r\n\r\nEach commit shows how it changes the relevant benchmarks.\r\n\r\n<details>\r\n<summary>Benchmark script</summary>\r\n\r\n```bash\r\nfor compiler in gcc clang; do \\\r\n  if [ \"$compiler\" = \"gcc\" ]; then CC=gcc; CXX=g++; COMP_VER=$(gcc -dumpfullversion); \\\r\n  else CC=clang; CXX=clang++; COMP_VER=$(clang -dumpversion); fi && \\\r\n  echo \"> Compiler: $compiler $COMP_VER\" && \\\r\n  for commit in b60450fae83970daa9dc2da0706bf126a2f41515 e2e02177ba6f7fac34eda9696dad2e8ecd44e6cd 85b74b01de7e914d07630138eaa78f09a083b85b deb58eea2fdd2712a28aa6b81417087426b19f5b; do \\\r\n    git fetch origin $commit >/dev/null 2>&1 && git checkout $commit >/dev/null 2>&1 && git log -1 --pretty='%h %s' && \\\r\n    rm -rf build && \\\r\n    cmake -B build -DBUILD_BENCH=ON -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX >/dev/null 2>&1 && \\\r\n    cmake --build build -j$(nproc) >/dev/null 2>&1 && \\\r\n    for i in 1; do \\\r\n      build/bin/bench_bitcoin -filter='CBlockIndexWorkComparator|CheckBlockIndex' -min-time=5000; \\\r\n    done; \\\r\n  done; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\nNote: something similar was already started in https://github.com/bitcoin/bitcoin/pull/33334, but this is a broader optimization that doesn't use the same technique: added as coauthor regardless.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-16T01:54:31Z",
      "updated_at": "2025-12-30T15:27:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33637",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11203,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2182611991,
      "number": 31298,
      "title": "rpc: combinerawtransaction now rejects unmergeable transactions",
      "body": "Previously, combinerawtransaction would silently return the first tx when asked to combine unrelated txs. Now, it will check tx mergeability and throws a descriptive error if tx cannot be merged.\r\n\r\nfixes  #25980",
      "state": "open",
      "user": "adamandrews1",
      "created_at": "2024-11-15T21:24:12Z",
      "updated_at": "2025-12-30T13:10:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31298",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 276,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1223555165,
      "number": 27006,
      "title": "reduce cs_main scope, guard block index 'nFile' under a local mutex",
      "body": "By not having to lock `cs_main` every time we try to access block\r\nposition on disk, we can avoid slowing down concurrent tasks due\r\nto threads waiting for the global lock to be released.\r\n\r\nAlso, solves a edge case race inside `ReadBlockFromDisk` where\r\nwe obtain the file position locking `cs_main` and then try to access\r\nthe file without it (the file could no longer exist if pruning occurred\r\njust in-between these two actions).\r\n\r\nContext from where this comes from #26966.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2023-01-31T16:10:54Z",
      "updated_at": "2025-12-30T12:41:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27006",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 547,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168103524,
      "number": 31251,
      "title": "test: report detailed msg during utf8 response decoding error",
      "body": "Useful for debugging issues such https://github.com/bitcoin/bitcoin/pull/31241#issuecomment-2462816933.\r\n\r\nPrints the entire response content instead of printing only the position of the byte it can't be decoded.\r\n\r\nThe diff between the error messages can be seen by running the `wallet_migration.py` functional test with the following patch applied:\r\n```\r\ndiff --git a/src/wallet/rpc/wallet.cpp b/src/wallet/rpc/wallet.cpp\r\n--- a/src/wallet/rpc/wallet.cpp\t(revision d65918c5da52c7d5035b4151dee9ffb2e94d4761)\r\n+++ b/src/wallet/rpc/wallet.cpp\t(date 1731005254673)\r\n@@ -801,7 +801,7 @@\r\n             }\r\n \r\n             UniValue r{UniValue::VOBJ};\r\n-            r.pushKV(\"wallet_name\", res->wallet_name);\r\n+            r.pushKV(\"wallet_name\", \"\\xc3\\x28\");\r\n             if (res->watchonly_wallet) {\r\n                 r.pushKV(\"watchonly_name\", res->watchonly_wallet->GetName());\r\n             }\r\n```",
      "state": "closed",
      "user": "furszy",
      "created_at": "2024-11-07T19:06:00Z",
      "updated_at": "2025-12-30T12:41:29Z",
      "merged_at": "2024-12-30T19:13:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31251",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 958,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2242559336,
      "number": 31531,
      "title": "rpc: Add signet_challenge field to getblockchaininfo and getmininginfo",
      "body": "Signet challenges are currently only available via `getblocktemplate` RPC.\r\n`getblockchaininfo` and `getmininginfo` both provide inadequate information to distinguish signets. Since these are the RPCs used to determine the current network, they should also provide the signet challenge for signets.\r\n\r\nTest coverage is included in `test/functional/feature_signet.py`.",
      "state": "closed",
      "user": "A-Manning",
      "created_at": "2024-12-18T15:42:19Z",
      "updated_at": "2025-12-30T12:41:27Z",
      "merged_at": "2024-12-30T18:31:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31531",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 438,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2234799478,
      "number": 31497,
      "title": "Remove unused variable assignment",
      "body": "The variable is conditionally assigned toward the end of the loop and not used after.  It's then set back to its default value at the beginning of the loop.",
      "state": "closed",
      "user": "yancyribbens",
      "created_at": "2024-12-14T03:01:58Z",
      "updated_at": "2025-12-30T12:41:27Z",
      "merged_at": "2024-12-30T18:22:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31497",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 190,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2249466897,
      "number": 31555,
      "title": "descriptor: remove unreachable verification for `pkh`",
      "body": "This PR removes an unreachable verification in the `ParseScript` function. It returns an error if `pkh` is not being used at top level, sh, wsh or tr. However, any usage of `pkh` without these contexts will not reach this verification but other ones like \"invalid keys\" (e.g. `wpkh(pkh(L4gM1FBdyHNpkzsFh9ipnofLhpZRp2mwobpeULy1a6dBTvw8Ywtd))`).",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-12-23T12:43:12Z",
      "updated_at": "2025-12-30T12:41:26Z",
      "merged_at": "2024-12-30T21:40:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31555",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 397,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2252623004,
      "number": 31570,
      "title": "test: descriptor: fix test for `MaxSatisfactionWeight`",
      "body": "To get the maximum size of a satisfaction for a descriptor with no max sig, the parameter `use_max_sig` should be false.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-12-26T17:23:32Z",
      "updated_at": "2025-12-30T12:41:25Z",
      "merged_at": "2024-12-30T20:04:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31570",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 175,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2250060411,
      "number": 31556,
      "title": "validation: Send correct notification during snapshot completion",
      "body": "After AssumeUtxo background sync is completed in a `ActivateBestChain()` call, the `GetRole()` function called with `BlockConnected()` returns `ChainstateRole::NORMAL` instead of `ChainstateRole::BACKGROUND` for this chainstate.\r\nThis would make the wallet (which ignores `BlockConnected` notifications for the background chainstate) process it, change `m_last_block_processed_height` to the (ancient) snapshot height, and display an incorrect balance.\r\n\r\nFix this by caching the chainstate role before calling `ActivateBestChainStep()`.\r\nAlso contains a test for this situation that fails on master.\r\n\r\nFixes #31546",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2024-12-23T20:16:28Z",
      "updated_at": "2025-12-30T12:41:25Z",
      "merged_at": "2024-12-30T19:40:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31556",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 681,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3117013636,
      "number": 34112,
      "title": "rpc: [mempool] Remove erroneous Univalue integral casts",
      "body": "Casting without reason can only be confusing (because it is not needed), or wrong (because it does the wrong thing).\r\n\r\nFor example, the added test that adds a positive chunk prioritization will fail:\r\n\r\n```\r\nAssertionError: not(-1.94936096 == 41.000312)\r\n```\r\n\r\nFix all issues by removing the erroneous casts, and by adding a test to check against regressions.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T09:48:42Z",
      "updated_at": "2025-12-30T12:16:33Z",
      "merged_at": "2025-12-29T15:16:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34112",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 417,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096470479,
      "number": 34057,
      "title": "test: add tests for cluster chunks",
      "body": "Add tests for cluster chunks, including:\r\n    - GetWorstMainChunk() tests, which picks the worst chunk from txgraph.\r\n    - GetCurrentChunk(), which returns chunks in linearization order after calling it iteratively.\r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-12-12T13:04:16Z",
      "updated_at": "2025-12-30T09:59:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34057",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 253,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3023781832,
      "number": 33908,
      "title": "kernel: add context‑free block validation API (`btck_check_block_context_free`) with POW/Merkle flags",
      "body": "This PR exposes Bitcoin Core’s context‑free block checks to library users via a new C API entry point, `btck_check_block_context_free`. \r\n\r\nCallers can validate a block’s structure (size/weight, coinbase rules, per‑tx context‑free checks) and optionally re‑run Proof‑of‑Work and Merkle‑root verification without touching chainstate, the block index, or the UTXO set. \r\n\r\nRationale\r\nClients embedding the kernel need a pure block sanity check without requiring node state or disk writes (candidate block validation, for example). This API offers that surface in a single call, with optional PoW/Merkle toggles to avoid redundant work when the header has already been validated or when Merkle verification is deferred.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-18T23:37:30Z",
      "updated_at": "2025-12-29T21:28:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33908",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3118157541,
      "number": 34119,
      "title": "contrib: remove `copyright_header.py`",
      "body": "After #34084, our copyright headers shouldn't need \"managing\"; so remove the Python script.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-19T16:51:56Z",
      "updated_at": "2025-12-29T17:48:50Z",
      "merged_at": "2025-12-29T15:03:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34119",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 129,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133235017,
      "number": 34166,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Olly60",
      "created_at": "2025-12-28T21:13:49Z",
      "updated_at": "2025-12-29T17:44:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34166",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3134706682,
      "number": 34173,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "jummon-koshai",
      "created_at": "2025-12-29T15:54:47Z",
      "updated_at": "2025-12-29T17:44:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34173",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1720888287,
      "number": 29418,
      "title": "rpc: provide per message stats for global traffic via new RPC 'getnetmsgstats'",
      "body": "Introduce a new RPC, `getnetmsgstats` to retrieve traffic bytes and count of messages possibly broken down by:\r\n* direction (sent or received)\r\n* network (ipv4, tor, etc)\r\n* connection type (outbound-full-relay, block-relay-only, etc)\r\n* message type (verack, ping, etc)\r\n\r\nImplements: https://github.com/bitcoin/bitcoin/issues/26337 Add per message stats to getnettotals rpc\r\n\r\n---\r\n\r\nExamples:\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"bytes\": 5392756,\r\n  \"count\": 32683\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"sendcmpct\": {\r\n    \"bytes\": 975,\r\n    \"count\": 31\r\n  },\r\n  \"sendaddrv2\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"headers\": {\r\n    \"bytes\": 1786,\r\n    \"count\": 28\r\n  },\r\n  \"feefilter\": {\r\n    \"bytes\": 816,\r\n    \"count\": 27\r\n  },\r\n  \"version\": {\r\n    \"bytes\": 4843,\r\n    \"count\": 37\r\n  },\r\n  \"ping\": {\r\n    \"bytes\": 1104,\r\n    \"count\": 36\r\n  },\r\n  \"getaddr\": {\r\n    \"bytes\": 384,\r\n    \"count\": 13\r\n  },\r\n  \"block\": {\r\n    \"bytes\": 5128467,\r\n    \"count\": 20365\r\n  },\r\n  \"getheaders\": {\r\n    \"bytes\": 29436,\r\n    \"count\": 28\r\n  },\r\n  \"pong\": {\r\n    \"bytes\": 1040,\r\n    \"count\": 34\r\n  },\r\n  \"getdata\": {\r\n    \"bytes\": 1218925,\r\n    \"count\": 20008\r\n  },\r\n  \"sendheaders\": {\r\n    \"bytes\": 447,\r\n    \"count\": 16\r\n  },\r\n  \"wtxidrelay\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"addrv2\": {\r\n    \"bytes\": 301161,\r\n    \"count\": 25\r\n  },\r\n  \"verack\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"i2p\": {\r\n    \"bytes\": 1311861,\r\n    \"count\": 8226\r\n  },\r\n  \"onion\": {\r\n    \"bytes\": 3932760,\r\n    \"count\": 24272\r\n  },\r\n  \"ipv6\": {\r\n    \"bytes\": 631265,\r\n    \"count\": 3362\r\n  },\r\n  \"ipv4\": {\r\n    \"bytes\": 1300106,\r\n    \"count\": 7773\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats</summary>\r\n\r\n```\r\n{\r\n  \"recv\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 309,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 408,\r\n          \"count\": 3\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 432950,\r\n          \"count\": 1794\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 68508,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 478479,\r\n          \"count\": 1896\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 195,\r\n          \"count\": 6\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 527,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 639,\r\n          \"count\": 5\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 1465688,\r\n          \"count\": 5957\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 120693,\r\n          \"count\": 9\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 412,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 138074,\r\n          \"count\": 583\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 93436,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 252,\r\n          \"count\": 2\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 313988,\r\n          \"count\": 1255\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 40,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"sent\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 66,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 105382,\r\n          \"count\": 1789\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 127,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 115932,\r\n          \"count\": 1884\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 162,\r\n          \"count\": 5\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 122,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 771,\r\n          \"count\": 6\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 221,\r\n          \"count\": 7\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 363478,\r\n          \"count\": 5932\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 231,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 88,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 35492,\r\n          \"count\": 584\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 254,\r\n          \"count\": 2\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 508,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 76531,\r\n          \"count\": 1231\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n---\r\n\r\nPrevious incarnations of this:\r\nhttps://github.com/bitcoin/bitcoin/pull/27534 rpc: add 'getnetmsgstats', new rpc to view network message statistics (Thank you, @satsie!)\r\nhttps://github.com/bitcoin/bitcoin/pull/28926 rpc: add 'getnetmsgstats' RPC (Thank you, @willcl-ark!)",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-02-11T09:32:51Z",
      "updated_at": "2025-12-29T16:30:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29418",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 13564,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3134449965,
      "number": 34171,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "fridokus",
      "created_at": "2025-12-29T13:42:33Z",
      "updated_at": "2025-12-29T13:53:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34171",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1997108260,
      "number": 30563,
      "title": "fuzz: improve `scriptpubkeyman` target",
      "body": "Fixes #30541\r\n\r\nThis PR aims to improve `scriptpubkeyman` target to avoid timeouts. The input provided in #30541 takes too much time to run because it basically calls only `MarkUnusedAddresses` (300 times * number of spks). The following changes were made to improve it:\r\n\r\n- Reduce keypool size.\r\n- When calling `MarkUnusedAddresses`, do it with one of the spks per iteration.\r\n- Remove the specific `AddDescriptorKey` call since it is already covered with `AddWalletDescriptor`.\r\n- Limit number of iterations to a reasonable value.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-07-31T20:17:32Z",
      "updated_at": "2025-12-29T13:36:45Z",
      "merged_at": "2024-08-12T18:50:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30563",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 572,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1540943768,
      "number": 28578,
      "title": "fuzz: add target for `DescriptorScriptPubKeyMan`",
      "body": "This PR adds fuzz target for `DescriptorScriptPubKeyMan`. Also, moves `MockedDescriptorConverter` to `fuzz/util/descriptor` to be used here and in `descriptor` target.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2023-10-04T01:03:23Z",
      "updated_at": "2025-12-29T13:29:27Z",
      "merged_at": "2023-11-23T17:34:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28578",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 216,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3102296934,
      "number": 34077,
      "title": "refactor: Use an enum for `Autofile::seek` wrapper",
      "body": "The `int origin` argument of the `seek` method has no meaning to those without domain specific knowledge as to how `FILE` works. The only way for a caller to understand what this is doing is to enter the method body. This enum makes it clear as to what the `origin` argument represents at the expense of the Unix-specific options, which were unused anyway.",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2025-12-15T12:26:08Z",
      "updated_at": "2025-12-29T11:15:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34077",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3132523891,
      "number": 34160,
      "title": "policy: Remove stale rationale paragraph",
      "body": "It belonged to the note removed in #33892",
      "state": "closed",
      "user": "flack",
      "created_at": "2025-12-27T21:34:22Z",
      "updated_at": "2025-12-29T10:54:54Z",
      "merged_at": "2025-12-29T10:54:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34160",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 82,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3117199025,
      "number": 34113,
      "title": "refactor: [rpc] Remove confusing and brittle integral casts",
      "body": "When constructing an UniValue from integral values, historically (long ago), in some cases casts where needed. With the current UniValue constructor, only very few are actually needed.\r\n\r\nKeeping the unused casts around is:\r\n\r\n* confusing, because code readers do not understand why they are needed\r\n* brittle, because some may copy them into new places, where they will lead to hard-to-find logic bugs, such as the ones fixed in pull https://github.com/bitcoin/bitcoin/pull/34112\r\n\r\nSo fix all issues by removing them, except for a few cases, where casting was required:\r\n* `ret.pushKV(\"coinbase\", static_cast<bool>(coin->fCoinBase));`, or\r\n* `static_cast<std::underlying_type_t<decltype(info.nServices)>>(info.nServices)`.\r\n\r\nThis hardening refactor does not fix any bugs and does not change any behavior.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T10:46:36Z",
      "updated_at": "2025-12-29T10:14:33Z",
      "merged_at": "2025-12-27T16:35:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34113",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 867,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2940741002,
      "number": 33689,
      "title": "http: replace WorkQueue and single threads handling for ThreadPool",
      "body": "This has been a recent discovery; the general thread pool class created for #26966, cleanly \r\nintegrates into the HTTP server. It simplifies init, shutdown and requests execution logic.\r\nReplacing code that was never unit tested for code that is properly unit and fuzz tested.\r\nAlthough our functional test framework extensively uses this RPC interface (that’s how\r\nwe’ve been ensuring its correct behavior so far - which is not the best).\r\n\r\nThis clearly separates the responsibilities:\r\nThe HTTP server now focuses solely on receiving and dispatching requests, while ThreadPool handles\r\nconcurrency, queuing, and execution.\r\n\r\nThis will also allows us to experiment with further performance improvements at the task queuing and\r\nexecution level, such as a lock-free structure or task prioritization or any other implementation detail\r\nlike coroutines in the future, without having to deal with HTTP code that lives on a different layer.\r\n\r\nNote:\r\nThe rationale behind introducing the ThreadPool first is to be able to easily cherry-pick it across different\r\nworking paths. Some of the ones that are benefited from it are #26966 for the parallelization of the indexes\r\ninitial sync, #31132 for the parallelization of the inputs fetching procedure, #32061 for the libevent replacement,\r\nthe kernel API #30595 (https://github.com/bitcoin/bitcoin/pull/30595#discussion_r2413702370) to avoid blocking validation among others use cases not publicly available.\r\n\r\nNote 2:\r\nI could have created a wrapper around the existing code and replaced the `WorkQueue` in a subsequent\r\ncommit, but it didn’t seem worth the extra commits and review effort. The `ThreadPool` implements\r\nessentially the same functionality in a more modern and cleaner way.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-10-23T14:36:44Z",
      "updated_at": "2025-12-29T05:18:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33689",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2971018954,
      "number": 33765,
      "title": "doc: update interface, --stdin flag, `signtx` (#31005)",
      "body": "Updates to documentation for External Signer.\r\n\r\n- Added mention that `signtransaction` command is no longer primary mechanism.\r\n- Document inter-process communication via `--stdin` flag followed with stdin-content.\r\n- Document `signtx` command followed by Base64-encoded PSBT.\r\n\r\nBest to squash commits when ready to merge.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2025-11-02T23:24:59Z",
      "updated_at": "2025-12-29T05:08:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33765",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 379,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1768952247,
      "number": 29642,
      "title": "kernel: Handle fatal errors through return values",
      "body": "Based on #25665.\r\n\r\nCurrently functions issuing fatal errors call the `fatalError` notification method to issue a shutdown procedure. This makes it hard for higher level functions to figure out if an error deeper in the call stack occurred. For users of the kernel it might also be difficult to assert which function call issued a fatal error if they are being run concurrently. If the kernel would eventually be used by external users, getting fatal error information through a callback instead of function return values would also be cumbersome and limiting. Unit, bench, and fuzz tests currently don't have a way to effectively test against fatal errors.\r\n\r\nThis patch set is an attempt to make fatal error handling in the kernel code more transparent. Fatal errors are now passed up the call stack through `util::Result<T, FatalError>` failure values. A previous attempt at this by theuni always immediately returned failure values if a function call returned a failure. However, this is not always desirable (see discussion [here](https://github.com/bitcoin/bitcoin/pull/27866#discussion_r1256378064)). Sometimes, further operations can still be completed even if a fatal error was issued. The solution to this is that these \"ignored\" errors are still moved through `util::Result`'s error string values with its `.MoveMessages` method, even while a failure value in the result is not present.\r\n\r\nNext to some smaller behavior changes, the most significant change is that the issuing of a shutdown procedure is delayed until a potential fatal error is handled as opposed to immediately when it is first encountered. Another effect is that potential fatal errors are now asserted in the bench, fuzz and unit tests. Some of the currently not immediately returned fatal errors need some further scrutiny. These are marked with a `TODO (fatal error)` comment and could be tackled in a later PR.\r\n\r\nTo validate this approach a new clang-tidy check is introduced. It implements the following checks:\r\n\r\n1. If a function calls another function with a `util::Result<T, FatalCondition>` return type, its return type has to be `util::Result<T, FatalCondition>` too, or it has to handle the value returned by the function with one of `CheckFatal`, `HandleFatalError`,\r\n`UnwrapFatalError`, or `CheckFatalFailure`.\r\n2. In functions returning a `util::Result<T, FatalCondition>` a call to a function returning a `util::Result<T, FatalCondition>` needs to propagate the value by either:\r\n   - Returning it immediately\r\n   - Assigning it immediately to an existing result with `.MoveMessages()` or `.Set()`\r\n   - Eventually passing it as an argument to a `.MoveMessages()`\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587) and is a step towards stage 2, creating a more refined kernel API.",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-03-12T21:34:45Z",
      "updated_at": "2025-12-29T01:21:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29642",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2886,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1071188902,
      "number": 26201,
      "title": "Remove Taproot activation height",
      "body": "Drop `DEPLOYMENT_TAPROOT` from `consensus.vDeployments`.\r\n\r\nNow that the commit (https://github.com/bitcoin/bitcoin/commit/7c08d81e119570792648fe95bbacddbb1d5f9ae2) which changes taproot to be enforced for all blocks is included in v24.0, it seems a good time to remove no longer needed non-consensus code.\r\n\r\nClarify what is considered a `BuriedDeployment`.\r\n\r\nWe drop taproot from `getdeploymentinfo` RPC, rather than mark it as `buried`, because this is not a buried deployment in the sense of [BIP 90](https://github.com/bitcoin/bips/blob/master/bip-0090.mediawiki). This is because the activation height has been completely removed from the code, rather than hard coded.\r\n\r\nSee discussion in #24737 and #26162.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2022-09-29T11:16:54Z",
      "updated_at": "2025-12-28T17:03:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26201",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 748,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3127249876,
      "number": 34143,
      "title": "build: Switch to \"versioned\" install layout for `boost` package and add missed `Boost::headers`",
      "body": "It is difficult for the build system to enforce adding the Boost headers include directory only for targets that actually need it. In CMake this is handled via the [`Boost::headers`](https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/cmake/module/AddBoostIfNeeded.cmake#L10-L17) target. However, the issue is not specific to CMake.\r\n\r\nThe underlying problem is that any dependency of a given build target brings its own include directories, which often coincide with include paths used by Boost. As a result, dependencies such as `libevent` or `sqlite` can mask the fact that a target is missing an explicit dependency on `Boost::headers`.\r\n\r\nWhile we cannot influence the installation layout of system packages, we _can_ control the layout of packages built by the depends build subsystem.\r\n\r\nThis PR therefore changes the layout of the `boost` package in depends from a \"system\" layout to a \"versioned\" one. The Boost include directory becomes more specific by incorporating the `boost-<version>` component in its path.\r\n\r\nApplying this change alone to the master branch exposes a latent [bug](https://github.com/hebasto/bitcoin/actions/runs/20471980938) in the build system. This bug is potentially dangerous because, when building with depends, Boost headers from the system include directory may be used instead of the headers provided by depends, as the compiler may implicitly search system include paths.\r\n\r\nThe exposed bug is addressed in the first commit of this PR.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-23T22:17:29Z",
      "updated_at": "2025-12-28T15:21:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34143",
      "labels": [
        "Bug",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1602,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2254145287,
      "number": 31578,
      "title": "fix: typos fix in README.md",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Jorah-M",
      "created_at": "2024-12-28T13:31:08Z",
      "updated_at": "2025-12-28T12:40:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31578",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2090,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2253671985,
      "number": 31575,
      "title": "Fix memory issue during chainstate initialization on 2GB box",
      "body": "Fixes #31573\n\nReduce memory usage during chainstate initialization on low-memory systems.\n\n* **src/txdb.h**\n  - Reduce the default `dbcache` value to 100 MiB.\n* **src/validation.h**\n  - Add a function to adjust `dbcache` to 100 MiB if the system has less than 4GB of RAM.\n* **doc/reduce-memory.md**\n  - Update the documentation to reflect the new default `dbcache` value.\n  - Add information about the memory check for systems with less than 4GB of RAM.\n\n",
      "state": "closed",
      "user": "SecondPort",
      "created_at": "2024-12-27T18:58:24Z",
      "updated_at": "2025-12-28T12:40:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31575",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 516,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018916770,
      "number": 33892,
      "title": "policy: allow <minrelay txns in package context if paid for by cpfp",
      "body": "Prior to cluster mempool, a policy was in place that\r\ndisallowed non-TRUC transactions from being\r\nTX_RECONSIDERABLE in a package setting if it was below\r\nminrelay. This was meant to simplify reasoning about mempool\r\ntrimming requirements with non-trivial transaction\r\ntopologies in the mempool. This is no longer a concern\r\npost-cluster mempool, so this is relaxed.\r\n    \r\nIn effect, this makes 0-value parent transactions relayable\r\nthrough the network without the TRUC restrictions and\r\nthus the anti-pinning protections.\r\n",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-11-17T20:24:01Z",
      "updated_at": "2025-12-27T21:34:41Z",
      "merged_at": "2025-12-27T16:13:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33892",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 594,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2613678472,
      "number": 32800,
      "title": "rpc: Distinguish between vsize and sigop adjusted mempool vsize",
      "body": "### Motivation and Problem\r\n\r\n`CTxMemPoolEntry::GetTxSize()` returns the larger of two values: the BIP 141 virtual size (vsize) and the \"sigop-adjusted size.\" This sigop-adjusted size is used by mempool validation and mining algorithms as a safeguard to prevent overfilling blocks with transactions that approach both the weight and signature operation (sigop) limits in a way that could exploit block space efficiency.\r\n\r\nIn the current implementation, the sigop-adjusted size is reported as the \"vsize\" in RPCs that provide mempool transaction data, such as `getmempoolentry`, `getrawmempool`, `testmempoolaccept`, and `submitpackage`. However, the documentation for these RPCs typically describes this value simply as the \"virtual transaction size as defined in BIP 141,\" without acknowledging the sigop adjustment. Since the reported size may differ from the pure BIP 141 definition, this confuses people as in this [tweet](https://x.com/mononautical/status/1646166180145577990?s=20), discrepancy can be misleading, as the reported size may differ from the pure BIP 141 definition.\r\n\r\n### Proposed Solution\r\nTo resolve this, all mempool-related RPCs now return two separate fields:\r\n\r\n**vsize:** the sigop-adjusted size, i.e. max(BIP 141 vsize, sigop-adjusted size), which reflects the value previously returned under the vsize label and continues to drive mempool acceptance and block template scoring.\r\n\r\n**vsize_bip141:** the pure BIP 141 virtual size, strictly `ceil(weight/4)`, matching the consensus definition and now reported separately for clarity.\r\n\r\nThis preserves the behavior for clients that depend on the mempool policy size being reported as vsize while making the consensus size explicitly accessible under vsize_bip141.\r\n\r\nAdditionally, this PR updates the relevant RPC help text to clearly document the distinction between these two sizes, and adds supporting documentation `doc/policy/feerates-and-vsize.md` to better explain fee rates, virtual size calculations, sigop adjustments, and the mempool policy heuristics.\r\n\r\nA new field, **sigopsize**, has also been added to the getrawtransaction RPC result when input information (transaction is in the mempool) is available. This field explicitly reports the sigop-adjusted size as calculated by `ceil(sigop cost * bytes_per_sigop / WITNESS_SCALE_FACTOR)`. Exposing this value provides users with more precise insight into how the transaction’s sigops impact its effective size for policy and fee estimation.\r\n\r\nNote: This picks up work from the closed [#27591](https://github.com/bitcoin/bitcoin/pull/27591)\r\nFixes [#32775](https://github.com/bitcoin/bitcoin/issues/32775)",
      "state": "open",
      "user": "musaHaruna",
      "created_at": "2025-06-24T06:13:34Z",
      "updated_at": "2025-12-27T17:51:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32800",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2710,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2961253969,
      "number": 33741,
      "title": "rpc: Optionally print feerates in sat/vb",
      "body": "Part of https://github.com/bitcoin/bitcoin/issues/32093\r\n\r\nReturning feerates in BTC/kvB it can be very burdensome and is not good practice, as the most widely adopted units are sat/vB. This PR aims to show a PoC of how we could migrate to sat/vb in a backwards compatible manner.\r\n\r\nThe RPC affectd by this PR are `getmempoolinfo`, `getnetworkinfo`, `getwalletinfo`, `estimatesmartfee` and `estimaterawfee`.\r\n\r\nBecause of sub 1sat/vB environment we cannot rely on GetFee() because it internally uses FeeFrac EvaluateFee() function which rounds the values to always return an int. If the `feerate < 1` then it will be rounded to 1 or 0.\r\n\r\nFor more context or discuss how to migrate also arguments please refer to the open issue https://github.com/bitcoin/bitcoin/issues/32093.",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-10-30T00:39:41Z",
      "updated_at": "2025-12-27T17:45:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33741",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 818,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2982459951,
      "number": 33796,
      "title": "kernel: Expose `CheckTransaction` consensus validation function",
      "body": "This PR exposes the consensus-level `CheckTransaction` function through the libbitcoinkernel C API and adds a corresponding C++ wrapper.\r\n\r\nCurrently, libkernel only provided script-level validation via `btck_script_pubkey_verify` and `ScriptPubkeyApi<>::Verify`. \r\n\r\nAFAIK there was no way to perform context-free consensus checks on a transaction’s structure (e.g., coinbase rules, money-range, duplicate inputs).\r\n\r\nThis change introduces a new API:\r\n\r\n```c\r\nint btck_check_transaction(const btck_Transaction* tx, btck_TxValidationState** out_state);\r\n```\r\n\r\nand a C++ convenience wrapper:\r\n\r\n```cpp\r\nstd::pair<bool, TxValidationState> btck::CheckTransaction(const Transaction& tx);\r\n```\r\n\r\nBoth follow the ownership and error-handling conventions established in `bitcoinkernel.h`.\r\n\r\nThe test suite is extended with cases covering:\r\n* coinbase scriptSig length bounds\r\n* empty vin / vout detection\r\n* negative or out-of-range output values\r\n* duplicate inputs\r\n* null prevouts in non-coinbase transactions\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-05T23:59:50Z",
      "updated_at": "2025-12-27T17:44:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33796",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1077,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3044102097,
      "number": 33943,
      "title": "kernel: don't use assert to handle invalid user input",
      "body": "Crashing with `assert` for invalid user input is problematic for a library, e.g. this is impossible for FFI users to recover from, forcing them to re-implement the error handling logic client-side. See e.g. the [go](https://github.com/stringintech/go-bitcoinkernel/blob/88105c69b32c48919a45bb07fc05ca2c79d2728b/kernel/script_pubkey.go#L91-L102) and [.net](https://github.com/janb84/BitcoinKernel.NET/blob/4ba1ff802fe9a3b7c0af0012e6fdc33e5bc4f961/src/BitcoinKernel.Core/ScriptVerification/ScriptVerifier.cs#L38-L56) bindings, or the discussion in https://github.com/stringintech/kernel-bindings-tests/issues/5.\r\n\r\nThis PR changes behaviour by:\r\n- updating `btck_script_pubkey_verify` to return `-1` for invalid/malformed requests, `0` for invalid scripts, and `1` for valid scripts. Previously, the program would crash for the `-1` cases.\r\n- updating 5 getters to return `nullptr` when the request index is out of bounds. Previously, the program would crash in these cases.\r\n\r\nThe wrapper is updated to throw `std::runtime_error` or `std::out_of_bounds` errors, and the tests are also updated.\r\n\r\nBy not crashing, we can properly test for these edge cases in [`kernel-bindings-tests`](https://github.com/stringintech/kernel-bindings-tests) to ensure that wrappers are handling them properly, as opposed to e.g. not differentiating between `0` and `-1`, which a naive (incorrect) implementation could do.\r\n\r\nNote: I'm not sure why `btck_ScriptVerifyStatus_ERROR_INVALID_FLAGS_COMBINATION` and `btck_ScriptVerifyStatus_ERROR_SPENT_OUTPUTS_REQUIRED` are currently handled as `INVALID_SCRIPT`, in my view they should probably be `INVALID_REQUEST` (which means `btck_ScriptVerifyStatus` becomes meaningless in its current form), but I've not implemented that yet as I'm not 100% sure. Happy to update that here, or can also be done in a separate pull later.",
      "state": "open",
      "user": "stickies-v",
      "created_at": "2025-11-25T15:24:13Z",
      "updated_at": "2025-12-27T17:42:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33943",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1905,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3129084238,
      "number": 34147,
      "title": "scripted-diff: refactor: wallet: Delete duplicate IsCrypted()",
      "body": "This function is a duplicate of `HasEncryptionKeys()`.\r\n",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2025-12-24T19:11:54Z",
      "updated_at": "2025-12-27T16:30:03Z",
      "merged_at": "2025-12-27T16:30:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34147",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 118,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018831137,
      "number": 33891,
      "title": "kernel: Expose reusable `PrecomputedTransactionData` in script validation",
      "body": "This PR exposes a reusable `PrecomputedTransactionData` object in script validation using libkernel.\r\n\r\nCurrently, libkernel computes `PrecomputedTransactionData` each time `btck_script_pubkey_verify` is called, exposing clients to quadratic hashing when validating a transaction with multiple inputs. By externalizing `PrecomputedTransactionData` and making it reusable, libkernel can eliminate this attack vector.\r\n\r\nI discussed this problem in [this issue](https://github.com/TheCharlatan/rust-bitcoinkernel/issues/46). The design of this PR is inspired by @sedited's comments.\r\n\r\nThe PR introduces three new APIs for managing the `btck_PrecomputedTransactionData` object:\r\n```c\r\n/**\r\n * @brief Create precomputed transaction data for script verification.\r\n *\r\n * @param[in] tx_to             Non-null.\r\n * @param[in] spent_outputs     Nullable for non-taproot verification. Points to an array of\r\n *                              outputs spent by the transaction.\r\n * @param[in] spent_outputs_len Length of the spent_outputs array.\r\n * @return                      The precomputed data, or null on error.\r\n */\r\nbtck_PrecomputedTransactionData* btck_precomputed_transaction_data_create(\r\n    const btck_Transaction* tx_to,\r\n    const btck_TransactionOutput** spent_outputs, size_t spent_outputs_len) BITCOINKERNEL_ARG_NONNULL(1);\r\n\r\n/**\r\n * @brief Copy precomputed transaction data.\r\n *\r\n * @param[in] precomputed_txdata  Non-null.\r\n * @return                      The copied precomputed transaction data.\r\n */\r\nbtck_PrecomputedTransactionData* btck_precomputed_transaction_data_copy(\r\n    const btck_PrecomputedTransactionData* precomputed_txdata) BITCOINKERNEL_ARG_NONNULL(1);\r\n\r\n/**\r\n * Destroy the precomputed transaction data.\r\n */\r\nvoid btck_precomputed_transaction_data_destroy(btck_PrecomputedTransactionData* precomputed_txdata);\r\n```\r\n\r\nThe PR also modifies `btck_script_pubkey_verify` so that it accepts `precomputed_txdata` instead of `spent_outputs`:\r\n```c\r\n/**\r\n * @brief Verify if the input at input_index of tx_to spends the script pubkey\r\n * under the constraints specified by flags. If the\r\n * `btck_ScriptVerificationFlags_WITNESS` flag is set in the flags bitfield, the\r\n * amount parameter is used. If the taproot flag is set, the precomputed data\r\n * must contain the spent outputs.\r\n *\r\n * @param[in] script_pubkey      Non-null, script pubkey to be spent.\r\n * @param[in] amount             Amount of the script pubkey's associated output. May be zero if\r\n *                               the witness flag is not set.\r\n * @param[in] tx_to              Non-null, transaction spending the script_pubkey.\r\n * @param[in] precomputed_txdata Nullable if the taproot flag is not set. Otherwise, precomputed data\r\n *                               for tx_to with the spent outputs must be provided.\r\n * @param[in] input_index        Index of the input in tx_to spending the script_pubkey.\r\n * @param[in] flags              Bitfield of btck_ScriptVerificationFlags controlling validation constraints.\r\n * @param[out] status            Nullable, will be set to an error code if the operation fails, or OK otherwise.\r\n * @return                       1 if the script is valid, 0 otherwise.\r\n */\r\nint btck_script_pubkey_verify(\r\n    const btck_ScriptPubkey* script_pubkey,\r\n    int64_t amount,\r\n    const btck_Transaction* tx_to,\r\n    const btck_PrecomputedTransactionData* precomputed_txdata,\r\n    unsigned int input_index,\r\n    btck_ScriptVerificationFlags flags,\r\n    btck_ScriptVerifyStatus* status) BITCOINKERNEL_ARG_NONNULL(1, 3);\r\n```\r\n\r\nAs before, an error is thrown if the taproot flag is set and `spent_outputs` is not provided in `precomputed_txdata` (or `precomputed_txdata` is null). For simple single-input non-taproot verification, `precomputed_txdata` may be null, and the kernel will construct the precomputed data on-the-fly.\r\n\r\nBoth the C++ wrapper and the test suite are updated with the new API. Tests cover both `precomputed_txdata` reuse and nullability.\r\n\r\nAppreciate feedback on this concept / approach!",
      "state": "closed",
      "user": "joshdoman",
      "created_at": "2025-11-17T19:58:36Z",
      "updated_at": "2025-12-27T16:20:49Z",
      "merged_at": "2025-12-27T16:20:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33891",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4114,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2672081911,
      "number": 32997,
      "title": "index: Deduplicate HashKey / HeightKey handling",
      "body": "The logic for `DBHashKey` / `DBHeightKey` handling and lookup of entries is shared by `coinstatsindex` and `blockfilterindex`, leading to many lines of duplicated code. De-duplicate this by moving the logic to `index/db_key.h` (using templates for the index-specific `DBVal`).",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-07-16T22:09:44Z",
      "updated_at": "2025-12-27T16:18:39Z",
      "merged_at": "2025-12-27T16:18:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32997",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 324,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3123653803,
      "number": 34139,
      "title": "refactor: Add helper for Taproot control block size check",
      "body": "Add a helper for the Taproot control block size check to improve readability and reduce repetition. We currently have three instances of this check.\r\n\r\nBuild & unit tests succeed on my end.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-22T17:24:36Z",
      "updated_at": "2025-12-27T14:23:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34139",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 247,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3132283948,
      "number": 34157,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "andaluzcoin",
      "created_at": "2025-12-27T13:50:34Z",
      "updated_at": "2025-12-27T13:56:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34157",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1527429748,
      "number": 28521,
      "title": "net, net_processing: additional and consistent disconnect logging",
      "body": "While debugging unexpected disconnections, possibly related to #28331, I found some additional [net] logging to be useful.\r\n\r\nAll cases where we disconnect now come with a log message that has the word `disconnecting`:\r\n\r\n* all calls to `CloseSocketDisconnect()` log `disconnecting peer=…`\r\n* wherever we set `pnode->fDisconnect = true;`\r\n* for all `InactivityCheck` cases (which in turn sets `fDisconnect`)\r\n* replaces \"dropping\" with \"disconnecting\" in `Network not active, dropping peer=…`\r\n\r\nA few exceptions are listed here: https://github.com/bitcoin/bitcoin/pull/28521#discussion_r1890824361\r\n\r\nI changed `CloseSocketDisconnect()` to no longer log `disconnecting`, and instead have all the call sites do so.\r\n\r\nThis PR introduces two helper functions on `CNode`: `DisconnectMsg` and `LogIP`. The second and third commit use these helpers in `net_processing.cpp` so these disconnect messages are more consistent now (e.g. some didn't log the IP). No new messages are added there though.\r\n\r\nThe `LogIP()` helper is rarely used outside of a disconnect event, but it's available for future use.\r\n\r\nAny `LogPrint` this PR touches is replaced with `LogDebug` (superseded by #30750), and every `LogPrintf ` with `LogInfo`.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2023-09-23T14:22:16Z",
      "updated_at": "2025-12-27T12:40:14Z",
      "merged_at": "2024-12-27T14:09:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28521",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1288,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2253669792,
      "number": 31574,
      "title": "Fix memory issue during chainstate initialization on 2GB box",
      "body": "Fixes #31573",
      "state": "closed",
      "user": "SecondPort",
      "created_at": "2024-12-27T18:54:43Z",
      "updated_at": "2025-12-27T12:40:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31574",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 73,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2253745557,
      "number": 31577,
      "title": "fuzz: fuzz `max_ret_len` for `DecodeBase58`/`DecodeBase58Check`",
      "body": "`DecodeBase58` and `DecodeBase58Check` are fuzzed with a fixed value for `max_ret_len` (100). However, different values are used for this parameter depending on the usage (see key_io and unit tests).\r\n",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-12-27T21:02:05Z",
      "updated_at": "2025-12-27T12:40:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31577",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 265,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2252514595,
      "number": 31569,
      "title": "fix: typos in documentation files",
      "body": "This pull request contains changes to improve clarity, correctness and structure.\r\n\r\n**Description correction:**\r\nCorrected `block chain` to `blockchain` x2\r\nCorrected `OLD_CMAKE_REQURED_FLAGS` to `OLD_CMAKE_REQUIRED_FLAGS` x4\r\n\r\nPlease review the changes and let me know if any additional changes are needed.\r\n\r\n",
      "state": "closed",
      "user": "vtjl10",
      "created_at": "2024-12-26T14:54:11Z",
      "updated_at": "2025-12-26T12:39:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31569",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 347,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3130380080,
      "number": 34153,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "DjWhit89",
      "created_at": "2025-12-26T00:38:27Z",
      "updated_at": "2025-12-26T00:38:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34153",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3130378096,
      "number": 34152,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "DjWhit89",
      "created_at": "2025-12-26T00:34:22Z",
      "updated_at": "2025-12-26T00:34:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34152",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3130370833,
      "number": 34151,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "DjWhit89",
      "created_at": "2025-12-26T00:20:00Z",
      "updated_at": "2025-12-26T00:20:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34151",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2251304373,
      "number": 31567,
      "title": "test: add unit tests for SigningResultString function",
      "body": "This PR introduces new unit tests for the `SigningResultString` function located in the file [src/common/signmessage.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/common/signmessage.cpp).\r\n\r\n#### **Motivation**:\r\nPrior to this PR, the `SigningResultString` function had no test coverage. This update adds the necessary test cases to ensure that the function behaves as expected.\r\n\r\n#### **Changes**:\r\n- Added unit tests to cover all the cases in the switch statement within the `SigningResultString` function.\r\n- Ensured that each valid `SigningResult` enum value is tested for the expected output string:\r\n  - `SigningResult::OK`\r\n  - `SigningResult::PRIVATE_KEY_NOT_AVAILABLE`\r\n  - `SigningResult::SIGNING_FAILED`\r\n- Placed the new tests in the file location that matches the context of other related tests, ensuring consistency in test organization.\r\n\r\n#### **Suggested Follow-Up**:\r\nThe current implementation of the function includes an `assert(false)` for invalid enum values, as there is no `default` case in the switch statement. Since modifying the original function is not within the scope of this PR, perhaps someone with more C++ experience could explore writing a test to verify the behavior of the `assert` and the compiler warnings referenced in the comment:\r\n\r\n> // no default case, so the compiler can warn about missing cases",
      "state": "closed",
      "user": "lucasbalieiro",
      "created_at": "2024-12-24T21:19:11Z",
      "updated_at": "2025-12-25T12:37:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31567",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2251274507,
      "number": 31566,
      "title": "[WIP] test: add unit tests for SigningResultString function",
      "body": "This PR introduces new unit tests for the `SigningResultString` function located in the file [src/common/signmessage.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/common/signmessage.cpp).\r\n\r\n#### **Motivation**:\r\nPrior to this PR, the `SigningResultString` function had no test coverage. This update adds the necessary test cases to ensure that the function behaves as expected.\r\n\r\n#### **Changes**:\r\n- Added unit tests to cover all the cases in the switch statement within the `SigningResultString` function.\r\n- Ensured that each valid `SigningResult` enum value is tested for the expected output string:\r\n  - `SigningResult::OK`\r\n  - `SigningResult::PRIVATE_KEY_NOT_AVAILABLE`\r\n  - `SigningResult::SIGNING_FAILED`\r\n- Placed the new tests in the file location that matches the context of other related tests, ensuring consistency in test organization.\r\n\r\n#### **Suggested Follow-Up**:\r\nThe current implementation of the function includes an `assert(false)` for invalid enum values, as there is no `default` case in the switch statement. Since modifying the original function is not within the scope of this PR, perhaps someone with more C++ experience could explore writing a test to verify the behavior of the `assert` and the compiler warnings referenced in the comment:\r\n> // no default case, so the compiler can warn about missing cases\r\n",
      "state": "closed",
      "user": "lucasbalieiro",
      "created_at": "2024-12-24T20:39:09Z",
      "updated_at": "2025-12-25T12:37:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31566",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1413,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217053399,
      "number": 31425,
      "title": "RFC: Riscv bare metal CI job",
      "body": "This adds a CI job for building the static consensus library and linking it to an executable. It uses newlib-cygwin as a C library for the final linking step. This ensure compatibility with this target going forward and can serve as a starting point for enabling bare metal builds for the entire kernel library. This would have also caught the error fixed in #31365.",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-12-05T08:30:01Z",
      "updated_at": "2025-12-25T04:21:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31425",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3129356978,
      "number": 34148,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "bitcoinbrisbane",
      "created_at": "2025-12-25T00:46:34Z",
      "updated_at": "2025-12-25T00:47:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34148",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2945443298,
      "number": 33699,
      "title": "p2p: reduce false-positives in addr rate-limiting",
      "body": "Start the rate-limiter with 5 tokens instead of 1 token.\r\n\r\n---\r\n\r\nOn some occasions, a peer will send us addresses a few seconds after the connection is established. As peers start with token=1 and only get an additional token only every 10 seconds, some of these addresses might be rate-limited. The following log snippet contains an example:\r\n\r\n```\r\n04:12:02 [net] Added connection to [redacted] peer=1234\r\n...\r\n04:12:03 [net] Received addr: 1 addresses (1 processed, 0 rate-limited) from peer=1234\r\n04:12:34 [net] Received addr: 4 addresses (3 processed, 1 rate-limited) from peer=1234\r\n04:13:09 [net] Received addr: 2 addresses (2 processed, 0 rate-limited) from peer=1234\r\n```\r\n\r\nThe peer starts with token=1 and uses one for its self-announcement at 04:12:03. Until the next addr message arrives at 04:12:34, it re-gains 3 tokens and uses them, however, the fourth address in this addr message is rate-limited. At 04:13:09, the peer has token=3 and uses 2.\r\n\r\nThis change gives peers token=5 to start with. To choose this value, I looked at the address relay of freshly connected peers. The data was sampled from the debug.logs from different nodes. It appears, that only very few peers require more than 5 initial tokens.\r\n\r\n<img width=\"1172\" height=\"838\" alt=\"image\" src=\"https://github.com/user-attachments/assets/19fbe866-c604-4508-889c-d9600990726e\" />\r\n\r\n\r\nBy increasing the initial tokens to 5, someone could connect, send 5 addresses, disconnect, and repeat to spam the node with addresses. Previously, the same was possible but only one address was processed. I don't think this is a problem anymore since #30568.\r\n\r\n",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-10-24T17:10:10Z",
      "updated_at": "2025-12-24T15:39:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33699",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1683,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2434974783,
      "number": 32205,
      "title": "doc: update .lldbinit configuration for cmake builds to see source code in debugger",
      "body": "Closes https://github.com/bitcoin/bitcoin/issues/31204\r\n\r\nTo reproduce:\r\n\r\n1. build bitcoin with `-DCMAKE_BUILD_TYPE=Debug`\r\n2. run with lldb, add a breakpoint and trigger it (with a second local bitcoind peer, for example):\r\n    - `lldb buld/bin/bitcoind`\r\n    - `(lldb) b ProcessMessage`\r\n    - `(lldb) r -regtest`\r\nOutput will probably look like this:\r\n```\r\nProcess 6764 stopped\r\n* thread #34, name = 'b-msghand', stop reason = breakpoint 1.1\r\n    frame #0: 0x00000001003380c0 bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(this=0x000000013e80e400, pfrom=0x000000013c70a830, interruptMsgProc=0x000000013d009d40) at net_processing.cpp:4933:5\r\n\r\n```\r\n\r\nTo fix (following the doc in this PR)\r\nCreate or append to `~/.lldbinit` in your $HOME directory, using absolute paths. (My example)\r\n\r\n```\r\nsettings set target.source-map /Users/matthewzipkin/Desktop/work/bitcoin/build/src /Users/matthewzipkin/Desktop/work/bitcoin/src\r\n```\r\n\r\nImproved output:\r\n```\r\nProcess 6811 stopped\r\n* thread #34, name = 'b-msghand', stop reason = breakpoint 1.1\r\n    frame #0: 0x00000001003380c0 bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(this=0x000000011c808800, pfrom=0x0000000104004080, interruptMsgProc=0x000000011d009140) at net_processing.cpp:4933:5\r\n   4930\r\n   4931 bool PeerManagerImpl::ProcessMessages(CNode* pfrom, std::atomic<bool>& interruptMsgProc)\r\n   4932 {\r\n-> 4933     AssertLockNotHeld(m_tx_download_mutex);\r\n   4934     AssertLockHeld(g_msgproc_mutex);\r\n   4935\r\n   4936     PeerRef peer = GetPeerRef(pfrom->GetId());\r\n\r\n```",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-04-02T18:43:57Z",
      "updated_at": "2025-12-24T11:44:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32205",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1646,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3056547139,
      "number": 33974,
      "title": "cmake: Check dependencies after build option interaction",
      "body": "At present, `CMakeLists.txt` interleaves configuration-option handling with dependency discovery. As a result, unnecessary checks may be performed. For example:\r\n```\r\n$ cmake -B build --preset dev-mode -DBUILD_FOR_FUZZING=ON\r\n<snip>\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"2.3.0\")\r\n-- Found ZeroMQ: /usr/lib64 (found suitable version \"4.3.5\", minimum required is \"4.0.0\")\r\n-- Performing Test HAVE_USDT_H\r\n-- Performing Test HAVE_USDT_H - Success\r\n-- Found USDT: /usr/include\r\n-- Found QRencode: /usr/lib64/libqrencode.so (found version \"4.1.1\")\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\r\n-- Found Threads: TRUE\r\n-- Performing Test HAVE_STDATOMIC\r\n-- Performing Test HAVE_STDATOMIC - Success\r\n-- Found WrapAtomic: TRUE\r\n-- Found OpenGL: /usr/lib64/libOpenGL.so\r\n-- Found WrapOpenGL: TRUE\r\n-- Found WrapVulkanHeaders: /usr/include\r\n-- Found Qt: /usr/lib64/cmake/Qt6 (found suitable version \"6.10.1\", minimum required is \"6.2\")\r\nCMake Warning at CMakeLists.txt:206 (message):\r\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\r\n  BUILD_FUZZ_BINARY=ON.\r\n\r\n<snip>\r\n```\r\n\r\nThis PR restructures the code to ensure that all dependencies are checked only after the final build option interaction.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-30T15:50:06Z",
      "updated_at": "2025-12-24T05:45:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33974",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3127535695,
      "number": 34144,
      "title": "refactor: use static_cast and add Doxygen to BlockTreeDB",
      "body": "## Summary\n\n- Replace C-style casts `(unsigned)` with `static_cast<unsigned>()` in `FindFilesToPruneManual()` and `FindFilesToPrune()` for compliance with coding standards\n- Add Doxygen documentation to all `BlockTreeDB` public methods\n\n## Test plan\n\n- [x] Build completes successfully\n- [ ] CI passes\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)",
      "state": "closed",
      "user": "Rob1Ham",
      "created_at": "2025-12-24T03:03:08Z",
      "updated_at": "2025-12-24T03:03:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34144",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 422,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2133803316,
      "number": 31117,
      "title": "miner: Reorg Testnet4 minimum difficulty blocks",
      "body": "Note: This is just a proof of concept put here for discussion/feedback/brainstorming/improvement. I am not sure if we want to merge this into core at all since it can be dealt with externally as well. But this was the simplest way for me to make it work and it's probably also simpler for many miners to run this branch rather than another external software.\r\n\r\n### Context\r\n\r\nTestnet4 fixes block storms but it kept the minimum-difficulty exception in place. The rationale was that this would be the only way developers could still get their non-standard transactions into the blockchain. However, probably due to the public discussion of this feature, this has attracted the attention of people whose motivation might be A) grab as many testnet coins as possible or B) to annoy developers. There are currently one or more actors who just max out the min-difficulty exception as much as possible and as quickly as possible, see https://mempool.space/testnet4. There are always several min-difficulty blocks appearing instantly after a normal difficulty mined block.\r\n\r\nThere are several implications to this:\r\n- Developers can not get their non-standard transactions into the blockchain using the min-exception blocks, unless they put in significant effort to outrace the spammers\r\n- The actual difficulty is artificially raised\r\n- Less coins are going to faucets (though this is a very minor issue)\r\n\r\n### Solution\r\n\r\nThe solution to this problem was already briefly discussed in the original pull request for Testnet4: The min-difficulty blocks can all be easily re-orged by a single block with the actual difficulty. The code here implements this functionality within the `getblocktemplate` RPC. All blocks with min-difficulty (including forks) are temporarily marked invalid while the template is created. The blocks are only temporarily marked invalid since another miner might find an actual difficulty block on top of the min-difficulty blocks and we don't want to create a fork in the chain in that case.\r\n\r\nWe do want to keep the transactions from the blocks and include them in the block template. That should work with this solution via the orphan pool but I haven't done extensive testing on this yet. In reality it seems like there are several transactions in these min-difficulty blocks with a minimum block height and these can not be included in the re-org block (except the ones that are in the first one). However, given that these transactions appear in almost every block it might just be self-transfers created by the spammer.\r\n\r\n### Mining Pool\r\n\r\nThe follow-up to this would be to run a public (solo) pool with this enabled so that we can get some more hash rate behind this without requiring any effort on the side of those with hash rate and demotivate the spammers.\r\n\r\n### Acknowledgement\r\n\r\nI worked on this at Bitcoin++ in Berlin a week ago together with Emzy and Sjors. Together we were able to demo a pool running a previous version of this PR and connected a miner to it. That pool isn't public yet though.\r\n\r\n### Demo\r\n\r\nHere are some log outputs showing how first the orphan blocks are invalidated and then the actual chain is rolled back. Then, after the template was constructed, the blocks are reconsidered.\r\n\r\n<details><summary>Logs</summary>\r\n\r\n```\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=00000000004967e9a55121ced9a1b5df2bbf794edef6eaeca56985180dca178a  height=50944  log2_work=71.373305  date=2024-10-19T13:58:13Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=000000000097f5f8174415729790d2d83b90af466564ddf416247a050681caee  height=50947  log2_work=71.373305  date=2024-10-19T14:58:16Z\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=00000000002663fc47b4f47626296cc2d3118320581c4ff0eaa6317812bffdb2  height=50945  log2_work=71.373305  date=2024-10-19T14:18:14Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=000000000097f5f8174415729790d2d83b90af466564ddf416247a050681caee  height=50947  log2_work=71.373305  date=2024-10-19T14:58:16Z\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=000000000062e7e0743d4e97085a1696c7352096ea53e58daad468fc8995f397  height=50946  log2_work=71.373305  date=2024-10-19T14:38:15Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=000000000097f5f8174415729790d2d83b90af466564ddf416247a050681caee  height=50947  log2_work=71.373305  date=2024-10-19T14:58:16Z\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000638927100cc5578d750a9fcb763020fdab55bf27ba39ba26a57000 height=50946 version=0x2840e000 log2_work=71.373305 tx=862937 date='2024-10-19T14:38:15Z' progress=1.000000 cache=0.6MiB(2838txo)\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=000000000097f5f8174415729790d2d83b90af466564ddf416247a050681caee  height=50947  log2_work=71.373305  date=2024-10-19T14:58:16Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=0000000000638927100cc5578d750a9fcb763020fdab55bf27ba39ba26a57000  height=50946  log2_work=71.373305  date=2024-10-19T14:38:15Z\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000d35f958ad057b68c5822990b8b91325f6e549a2386b578e231a8b0 height=50945 version=0x27b82000 log2_work=71.373305 tx=862933 date='2024-10-19T14:18:14Z' progress=1.000000 cache=0.6MiB(2834txo)\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=0000000000638927100cc5578d750a9fcb763020fdab55bf27ba39ba26a57000  height=50946  log2_work=71.373305  date=2024-10-19T14:38:15Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=0000000000d35f958ad057b68c5822990b8b91325f6e549a2386b578e231a8b0  height=50945  log2_work=71.373305  date=2024-10-19T14:18:14Z\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000c0704c802da78900f465ea3eaeba55719b76c88bc9f2a43bacb58c height=50944 version=0x22de4000 log2_work=71.373305 tx=862930 date='2024-10-19T13:58:13Z' progress=1.000000 cache=0.6MiB(2832txo)\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=0000000000d35f958ad057b68c5822990b8b91325f6e549a2386b578e231a8b0  height=50945  log2_work=71.373305  date=2024-10-19T14:18:14Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=0000000000c0704c802da78900f465ea3eaeba55719b76c88bc9f2a43bacb58c  height=50944  log2_work=71.373305  date=2024-10-19T13:58:13Z\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000f6f9d3588bbc15a2bd5da43c4470301b4361104a9781e530830bfb height=50943 version=0x224c4000 log2_work=71.373305 tx=862929 date='2024-10-19T13:38:12Z' progress=1.000000 cache=0.6MiB(2832txo)\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=0000000000c0704c802da78900f465ea3eaeba55719b76c88bc9f2a43bacb58c  height=50944  log2_work=71.373305  date=2024-10-19T13:58:13Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=0000000000f6f9d3588bbc15a2bd5da43c4470301b4361104a9781e530830bfb  height=50943  log2_work=71.373305  date=2024-10-19T13:38:12Z\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000000005a8ae7897cfd4a0a9f1f45c89bf9f4dc090d7074b2b7a4586 height=50942 version=0x20000000 log2_work=71.373305 tx=862928 date='2024-10-19T13:18:11Z' progress=1.000000 cache=0.6MiB(2832txo)\r\n2024-10-19T13:14:29Z InvalidChainFound: invalid block=0000000000f6f9d3588bbc15a2bd5da43c4470301b4361104a9781e530830bfb  height=50943  log2_work=71.373305  date=2024-10-19T13:38:12Z\r\n2024-10-19T13:14:29Z InvalidChainFound:  current best=0000000000000005a8ae7897cfd4a0a9f1f45c89bf9f4dc090d7074b2b7a4586  height=50942  log2_work=71.373305  date=2024-10-19T13:18:11Z\r\n2024-10-19T13:14:29Z CreateNewBlock(): block weight: 14069 txs: 18 fees: 35293 sigops 412\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000f6f9d3588bbc15a2bd5da43c4470301b4361104a9781e530830bfb height=50943 version=0x224c4000 log2_work=71.373305 tx=862929 date='2024-10-19T13:38:12Z' progress=1.000000 cache=0.6MiB(2832txo)\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000c0704c802da78900f465ea3eaeba55719b76c88bc9f2a43bacb58c height=50944 version=0x22de4000 log2_work=71.373305 tx=862930 date='2024-10-19T13:58:13Z' progress=1.000000 cache=0.6MiB(2832txo)\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000d35f958ad057b68c5822990b8b91325f6e549a2386b578e231a8b0 height=50945 version=0x27b82000 log2_work=71.373305 tx=862933 date='2024-10-19T14:18:14Z' progress=1.000000 cache=0.6MiB(2834txo)\r\n2024-10-19T13:14:29Z UpdateTip: new best=0000000000638927100cc5578d750a9fcb763020fdab55bf27ba39ba26a57000 height=50946 version=0x2840e000 log2_work=71.373305 tx=862937 date='2024-10-19T14:38:15Z' progress=1.000000 cache=0.6MiB(2838txo)\r\n2024-10-19T13:14:29Z UpdateTip: new best=000000000097f5f8174415729790d2d83b90af466564ddf416247a050681caee height=50947 version=0x25f34000 log2_work=71.373305 tx=862947 date='2024-10-19T14:58:16Z' progress=1.000000 cache=0.6MiB(2853txo)\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "fjahr",
      "created_at": "2024-10-19T16:40:27Z",
      "updated_at": "2025-12-24T01:16:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31117",
      "labels": [
        "Mining",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 8727,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3079464109,
      "number": 34028,
      "title": "p2p: saturate LocalServiceInfo::nScore to prevent overflow",
      "body": "This prevents signed integer overflow in `LocalServiceInfo::nScore` by saturating at `std::numeric_limits<int>::max()` in `SeenLocal()`.\r\n\r\nThe `nScore` field could overflow from `INT_MAX` to `INT_MIN` when incremented during version handshakes, causing undefined behavior.\r\n\r\nI implemented saturation in `SeenLocal()` to cap `nScore` at `std::numeric_limits<int>::max()` instead of allowing overflow. This prevents undefined behavior while maintaining memory efficiency - after 2 billion connections, the matter is settled.\r\n\r\n- Added test case `LocalAddress_nScore_Overflow` that verifies saturation behavior\r\n- Test confirms `nScore` remains at max value after multiple `SeenLocal()` calls\r\n\r\nFixes #24049",
      "state": "open",
      "user": "codeabysss",
      "created_at": "2025-12-07T20:08:41Z",
      "updated_at": "2025-12-23T22:58:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34028",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 767,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683340623,
      "number": 33032,
      "title": "wallet, test: Replace MockableDatabase with in-memory SQLiteDatabase",
      "body": "`MockableDatabase` was introduced for the tests to avoid tying non-database tests to a particular database type. However, since the only database type now is sqlite, and because the mockable behavior is no longer used by the tests, we can replace usage of the `MockabeDatabase` with a SQLite database that lives only in memory.\r\n\r\nThis is particularly useful for future work that has the wallet make use of SQLite's capabilities more, which are less conducive to having a separate mock database implementation.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:36:32Z",
      "updated_at": "2025-12-23T22:41:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33032",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 579,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3114050841,
      "number": 34103,
      "title": "cmake: Add missed `Boost::headers`",
      "body": "On Fedora 43:\r\n```\r\n$ gmake -C depends NO_LIBEVENT=1 NO_QT=1 NO_ZMQ=1 NO_WALLET=1 NO_USDT=1 NO_IPC=1\r\n$ cmake -B build -DBoost_ROOT=depends/x86_64-pc-linux-gnu --preset dev-mode\r\n<snip>\r\n[363/1092] Building CXX object src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o\r\nFAILED: [code=1] src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o \r\n/usr/bin/ccache /usr/lib64/ccache/c++ -DKJ_USE_FIBERS -I/home/hebasto/dev/bitcoin/build/src -I/home/hebasto/dev/bitcoin/src -I/home/hebasto/dev/bitcoin/build/src/ipc -I/home/hebasto/dev/bitcoin/src/ipc/libmultiprocess/include -I/home/hebasto/dev/bitcoin/build/src/ipc/libmultiprocess/include -I/home/hebasto/dev/bitcoin/src/univalue/include -O2 -g -std=c++20 -fPIC -pthread -fno-extended-identifiers -fdebug-prefix-map=/home/hebasto/dev/bitcoin/src=. -fmacro-prefix-map=/home/hebasto/dev/bitcoin/src=. -fstack-reuse=none -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wleading-whitespace=spaces -Wtrailing-whitespace=any -Wno-unused-parameter -MD -MT src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o -MF src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o.d -o src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o -c /home/hebasto/dev/bitcoin/src/ipc/capnp/mining.cpp \r\nIn file included from /home/hebasto/dev/bitcoin/src/node/miner.h:13,\r\n                 from /home/hebasto/dev/bitcoin/src/ipc/capnp/mining-types.h:12,\r\n                 from /home/hebasto/dev/bitcoin/src/ipc/capnp/mining.cpp:5:\r\n/home/hebasto/dev/bitcoin/src/txmempool.h:28:10: fatal error: boost/multi_index/hashed_index.hpp: No such file or directory\r\n   28 | #include <boost/multi_index/hashed_index.hpp>\r\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n<snip>\r\n```\r\n\r\nThis PR fixes the issue.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-18T14:44:31Z",
      "updated_at": "2025-12-23T22:17:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34103",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2102,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2173924864,
      "number": 31275,
      "title": "doc: corrected lockunspent rpc quoting",
      "body": "bitcoin-cli help lockunspent RPC example shows:\r\n\r\n```\r\nAs a JSON-RPC call\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, \"[{\\\"txid\\\":\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\",\\\"vout\\\":1}]\"]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\nIncluding quotes around the transactions argument. Using the RPC in this way fails:\r\n\r\n```\r\ncurl --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, \"[{\\\"txid\\\":\\\"6f244af8e2162138369fc736a673f85ead59ad88fb5a1edd6e03f81b33c537b0\\\",\\\"vout\\\":1}]\"]}' -H 'content-type: text/plain;' http://127.0.0.1:18443/wallet/locktest\r\n\r\n{\"result\":null,\"error\":{\"code\":-3,\"message\":\"Expected type array, got string\"},\"id\":\"curltest\"}\r\n```\r\n\r\nThis change corrects the documentation to remove the additional quotes so the example works as intended:\r\n\r\n```\r\ncurl --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"lockunspent\", \"params\": [false, [{\"txid\":\"6f244af8e2162138369fc736a673f85ead59ad88fb5a1edd6e03f81b33c537b0\",\"vout\":0}]]}' -H 'content-type: text/plain;' http://127.0.0.1:18443/wallet/locktest\r\n\r\n{\"result\":true,\"error\":null,\"id\":\"curltest\"}\r\n```",
      "state": "open",
      "user": "Talej",
      "created_at": "2024-11-12T02:44:48Z",
      "updated_at": "2025-12-23T22:17:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31275",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1285,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2668970573,
      "number": 32985,
      "title": "wallet: Always rewrite tx records during migration",
      "body": "Since loading a wallet may change some parts of tx records (e.g. adding nOrderPos), we should rewrite the records instead of copying them so that the automatic upgrade does not need to be performed again when the wallet is loaded.\r\n\r\nThis is useful for future PRs I'm working on where we need to be sure about what data exists in a tx record in descriptor wallets.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-16T00:01:46Z",
      "updated_at": "2025-12-23T18:39:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32985",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 415,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1588144092,
      "number": 28802,
      "title": "ArgsManager: support subcommand-specific options",
      "body": "Adds the ability to link particular options to one or more subcommands, and uses this feature in `bitcoin-wallet`. Separates out the help information for subcommand-specific options (duplicating it if an option applies to multiple subcommands), and provides a function for checking if some options have been specified that only apply to different subcommands.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2023-11-06T09:00:47Z",
      "updated_at": "2025-12-23T17:12:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28802",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 408,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2229497206,
      "number": 31469,
      "title": "[28.x] 28.1rc2 backports",
      "body": "Backports:\r\n\r\n* #31223\r\n* #31448\r\n* #31431\r\n* #31419",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-12-11T17:02:03Z",
      "updated_at": "2025-12-23T12:33:31Z",
      "merged_at": "2024-12-17T18:06:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31469",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 77,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2660448790,
      "number": 32951,
      "title": "build: Explicitly set Qt's `AUTO{MOC,RCC,UIC}` property per target",
      "body": "The codebase, which is compiled, consists of both files in the source tree and additional files generated during the build process.  These generated files include headers such as `bitcoin-build-config.h`, headers generated for tests and benchmarks from data files, and files produced by Qt's tools, such as `moc`, `rcc` and `uic`.\r\n\r\nWhen using Makefile or Ninja generators, CMake 3.31 and later provides a [convenient](https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2991861497) builtin build target `codegen`, which builds ~all~ generated files. For example:\r\n```\r\n$ cmake -B build -DCMAKE_GENERATOR=\"Ninja\"\r\n$ cmake --build build --target codegen\r\n```\r\nor\r\n```\r\n$ cmake -B build -DCMAKE_GENERATOR=\"Unix Makefiles\"\r\n$ cmake --build build --target codegen\r\n```\r\n\r\nHowever, when building with `-DBUILD_GUI=ON`, setting the `CMAKE_{AUTOMOC,RCC,UIC}` variables globally introduces undesired dependencies for Makefiles generators, resulting in building dependencies directly unrelated to the generated files.\r\n\r\nThis PR resolves that issue. The first commit refactors the build system by factoring out the main library from the `test_bitcoin-qt` executable, just as is already done for `bitcoinqt` and `bitcoin-qt`, and prepares the ground for the second commit.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-07-11T22:21:22Z",
      "updated_at": "2025-12-23T07:20:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32951",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1337,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3116862846,
      "number": 34111,
      "title": "fuzz: Improve the fuzz target for `CCrypter`",
      "body": "Add the following improvements to the fuzz target for `CCrypter`:\r\n\r\n- Add roundtrip assertions: Add verification logic by decrypting the resulting ciphertext from a successful call to `Encrypt()` or `EncryptSecret()` and verifying that the output matches the original plaintext.\r\n\r\n- Cover untested methods: Extend the target to explicitly test `CCrypter::SetKey()` and `DecryptSecret()`.",
      "state": "closed",
      "user": "Chand-ra",
      "created_at": "2025-12-19T08:53:10Z",
      "updated_at": "2025-12-23T06:47:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34111",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 434,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2918962844,
      "number": 33636,
      "title": "wallet: Expand MuSig test coverage and follow-ups",
      "body": "This is a follow-up to #29675 and primarily adds test coverage for some of the most prominent failure cases in the last commit. \r\n\r\nThe following commits address a few left-over nit comments that didn't make it in before merge.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-10-16T00:02:51Z",
      "updated_at": "2025-12-23T01:15:04Z",
      "merged_at": "2025-12-23T01:15:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33636",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 11135929,
      "number": 3476,
      "title": "Added ability to set config parameters through environment variables",
      "body": "The environment is parsed for variables starting with BITCOIN_, and\nthe remaining portion of the name becomes the argument name, with\nthe value set to the portion after the = sign, e.g.,\n\nBITCOIN_DATADIR=FOO is equivalent to -datadir=FOO\n\nThe environment is parsed before the command line, allowing the\ncommand line to take precedence over the environment.\n\nThere is a whitelist in util.cpp that only allows specified environment\nvariables to be used this way; currently, this is set to just -datadir\nand -conf.\n\nSigned-off-by: Johnathan Corgan johnathan@corganlabs.com\n",
      "state": "closed",
      "user": "jmcorgan",
      "created_at": "2013-12-30T08:01:41Z",
      "updated_at": "2025-12-23T00:04:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/3476",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 639,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2956077006,
      "number": 33725,
      "title": "ci, iwyu: Treat warnings as errors for `src/init` and `src/policy`",
      "body": "This PR continues the work from bitcoin/bitcoin#31308 by extending the treatment of IWYU warnings as errors to the `src/init` and `src/policy` directories.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-10-28T17:12:52Z",
      "updated_at": "2025-12-22T23:23:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33725",
      "labels": [
        "Refactoring",
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 222,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2587656237,
      "number": 32737,
      "title": "rpc, doc: clarify the response of listtransactions RPC",
      "body": "I noticed this behaviour while perf testing PR #27286 and it was not something that I expected, updating the doc to make it present in the RPCHelp command.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-06-12T14:53:46Z",
      "updated_at": "2025-12-22T23:12:19Z",
      "merged_at": "2025-12-22T23:12:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32737",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 210,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3088541607,
      "number": 34039,
      "title": "test: address self-announcement",
      "body": "Test that a node sends a self-announcement with its external IP to in- and outbound peers after connection open and again sometime later.\r\n\r\nSince the code for the test is mostly the same for addr and addrv2 messages, I opted to add a new test file instead of having duplicate code in `p2p_addr_relay.py` and `p2p_addrv2_relay.py`.\r\n",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-10T09:09:56Z",
      "updated_at": "2025-12-22T22:39:17Z",
      "merged_at": "2025-12-22T22:39:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34039",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 365,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3124014809,
      "number": 34140,
      "title": "Simplicity",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "roconnor-blockstream",
      "created_at": "2025-12-22T19:44:24Z",
      "updated_at": "2025-12-22T19:45:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34140",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2073,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2976578427,
      "number": 33774,
      "title": "cmake: Move IPC tests to `ipc/test`",
      "body": "This PR follows up on https://github.com/bitcoin/bitcoin/pull/33445 and:\r\n1. Organizes the IPC tests in the same way as the wallet tests.\r\n2. Removes no longer needed `src/test/.clang-tidy.in`.\r\n\r\nSee the previous discussion:\r\n- https://github.com/bitcoin/bitcoin/pull/33445#discussion_r2379651340\r\n- https://github.com/bitcoin/bitcoin/pull/33445#pullrequestreview-3411868329\r\n\r\nAdditionally, the locality of the `bitcoin_ipc_test` build target description has been improved.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-04T13:10:04Z",
      "updated_at": "2025-12-22T17:45:30Z",
      "merged_at": "2025-12-04T13:52:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33774",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 511,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2812998776,
      "number": 33353,
      "title": "log: show reindex progress in `ImportBlocks`",
      "body": "### Summary\r\n\r\nWhen triggering a reindex, users have no indication of progress.\r\n\r\n### Fix\r\n\r\nThis patch precomputes the total number of block files so progress can be shown.\r\nInstead of only displaying which block file is being processed, it now shows the percent complete.\r\n\r\n### Reproducer + expected results\r\n\r\n```bash\r\ncmake -B build -DCMAKE_BUILD_TYPE=Release && make -C build -j && ./build/bin/bitcoind -datadir=demo -reindex\r\n```\r\n\r\nBefore, the block files were shown one-by-one, there's no way to see how much work is left:\r\n```\r\nReindexing block file blk00000.dat...\r\nLoaded 119920 blocks from external file in 1228ms\r\nReindexing block file blk00001.dat...\r\nLoaded 10671 blocks from external file in 284ms\r\nReindexing block file blk00002.dat...\r\nLoaded 5459 blocks from external file in 263ms\r\nReindexing block file blk00003.dat...\r\nLoaded 5595 blocks from external file in 267ms\r\n```\r\n\r\nAfter the change we add a percentage:\r\n```\r\nReindexing block file blk00000.dat (0% complete)...\r\nLoaded 119920 blocks from external file in 1255ms\r\nReindexing block file blk00001.dat (1% complete)...\r\nLoaded 10671 blocks from external file in 303ms\r\nReindexing block file blk00002.dat (2% complete)...\r\nLoaded 5459 blocks from external file in 278ms\r\nReindexing block file blk00003.dat (3% complete)...\r\nLoaded 5595 blocks from external file in 285ms\r\n```",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-09-09T19:08:37Z",
      "updated_at": "2025-12-22T16:12:21Z",
      "merged_at": "2025-12-22T16:12:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33353",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1398,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2654058897,
      "number": 32929,
      "title": "qa: Clarify assert_start_raises_init_error output",
      "body": "Raising a new exception from within a Python `except`-block, as `assert_start_raises_init_error()` does, causes the interpreter to generate extra error output which is unnecessary in this case.\r\n\r\n<details><summary>Example output before & after this PR</summary>\r\n\r\nBefore:\r\n```\r\n2025-07-08T20:05:48.407001Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 686, in assert_start_raises_init_error\r\n    ret = self.process.wait(timeout=self.rpc_timeout)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/nix/store/fqm9bqqlmaqqr02qbalm1bazp810qfiw-python3-3.12.9/lib/python3.12/subprocess.py\", line 1266, in wait\r\n    return self._wait(timeout=timeout)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/nix/store/fqm9bqqlmaqqr02qbalm1bazp810qfiw-python3-3.12.9/lib/python3.12/subprocess.py\", line 2053, in _wait\r\n    raise TimeoutExpired(self.args, timeout)\r\nsubprocess.TimeoutExpired: Command '['/home/hodlinator/bitcoin/build/bin/bitcoind', '-datadir=/tmp/bitcoin_func_test_v96lkcq8/eb2665c7/node0', '-logtimemicros', '-debug', '-debugexclude=libevent', '-debugexclude=leveldb', '-debugexclude=rand', '-uacomment=testnode0', '-disablewallet', '-logthreadnames', '-logsourcelocations', '-loglevel=trace', '-v2transport=0']' timed out after 3 seconds\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 186, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 358, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/bitcoin/build/test/functional/feature_framework_startup_failures.py\", line 151, in setup_network\r\n    self.nodes[0].assert_start_raises_init_error()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 716, in assert_start_raises_init_error\r\n    self._raise_assertion_error(assert_msg)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 196, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] bitcoind should have exited within 3s with an error\r\n```\r\nAfter:\r\n```\r\n2025-07-08T20:09:15.330589Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 186, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 358, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/bitcoin/build/test/functional/feature_framework_startup_failures.py\", line 151, in setup_network\r\n    self.nodes[0].assert_start_raises_init_error()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 720, in assert_start_raises_init_error\r\n    self._raise_assertion_error(assert_msg)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 196, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] bitcoind should have exited within 3s with an error (cmd: ['/home/hodlinator/bitcoin/build/bin/bitcoind', '-datadir=/tmp/bitcoin_func_test_v96lkcq8/eb2665c7/node0', '-logtimemicros', '-debug', '-debugexclude=libevent', '-debugexclude=leveldb', '-debugexclude=rand', '-uacomment=testnode0', '-disablewallet', '-logthreadnames', '-logsourcelocations', '-loglevel=trace', '-v2transport=0'])\r\n```\r\n\r\n</details>\r\n\r\n---\r\n\r\nCan be tested on this PR by:\r\n1. Execute test containing new test case:\r\n    ```shell\r\n    build/test/functional/feature_framework_startup_failures.py -ldebug > after.log\r\n    ```\r\n2. Drop first commit which contains the fix.\r\n3. Re-run test:\r\n    ```shell\r\n    build/test/functional/feature_framework_startup_failures.py -ldebug > before.log\r\n    ```\r\n4. Diff logs, focusing on `TestInitErrorTimeout OUTPUT` sections.\r\n\r\n---\r\n\r\nFound while testing #32835 using the suggested method (https://github.com/bitcoin/bitcoin/pull/32835#issue-3188748624) which triggered expected timeouts, but with the extra error noise.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-07-09T21:39:14Z",
      "updated_at": "2025-12-22T15:10:14Z",
      "merged_at": "2025-12-22T15:10:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32929",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 4307,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2224413643,
      "number": 31450,
      "title": "guix: disable gcov in base-linux-gcc",
      "body": "In a `x86_64-linux-gnu` build, this drops:\r\n```bash\r\nx86_64-linux-gnu/bin/x86_64-linux-gnu-gcov\r\nx86_64-linux-gnu/bin/x86_64-linux-gnu-gcov-dump\r\nx86_64-linux-gnu/bin/x86_64-linux-gnu-gcov-tool\r\nx86_64-linux-gnu/lib/gcc/x86_64-linux-gnu/12.4.0: libgcov.a\r\n```\r\n\r\nFor mingw-w64-gcc, `--disable-gcov` is currently passed for this target in Guix, due to issues with mingw-w64, see\r\nhttps://github.com/fanquake/guix/blob/8bed031e58c9cf895d243790e7c80808b0075de7/gnu/packages/gcc.scm#L99-L102. However we'll add it in any case, in case it's re-enabled in future, when the underlying issues are fixed.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-09T18:21:39Z",
      "updated_at": "2025-12-22T12:33:10Z",
      "merged_at": "2024-12-11T09:46:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31450",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 632,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2696299919,
      "number": 33067,
      "title": "test: refactor mempool_accept_wtxid",
      "body": "This PR improves `mempool_accept_wtxid.py` by using a pre-mined chain instead of generating new blocks, switching to MiniWallet to avoid RPC calls for signing transactions, replacing class `ValidWitnessMalleatedTx `with `valid_witness_malleate_tx() `  function, and simplifying the code by using txid.hex directly.\r\n\r\n\r\n",
      "state": "open",
      "user": "naiyoma",
      "created_at": "2025-07-26T00:34:36Z",
      "updated_at": "2025-12-22T12:13:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33067",
      "labels": [
        "Refactoring",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 356,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2776641246,
      "number": 33259,
      "title": "rpc, logging: add backgroundvalidation to getblockchaininfo",
      "body": "`getblockchaininfo` returns `verificationprogress=1` and `initialblockdownload=false` even if there's background validation.\r\nThis PR adds information about background validation to rpc `getblockchaininfo` in a similar way to `validationprogress` does.\r\n\r\nIf assume utxo was used the output of a \"sync\" node performing background validation:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756933740,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": true,\r\n  \"background\": {\r\n    \"snapshotheight\": 880000,\r\n    \"blocks\": 527589,\r\n    \"bestblockhash\": \"0000000000000000002326308420fa5ccd28a9155217f4d1896ab443d84148fa\",\r\n    \"mediantime\": 1529076654,\r\n    \"chainwork\": \"0000000000000000000000000000000000000000020c92fab9e5e1d8ed2d8dbc\",\r\n    \"verificationprogress\": 0.2815790617966284\r\n  },\r\n  \"chainwork\": \"0000000000000000000000000000000000000000df97866c410b0302954919d2\",\r\n  \"size_on_disk\": 61198817285,\r\n\r\n...\r\n```\r\n\r\nIf assume utxo was not used the progress is hidden and background validation is set to false:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756245700,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": false,\r\n  \"chainwork\": \"00000000000000000000000000000000000000000000000000000656d6bb052b\",\r\n  \"size_on_disk\": 3964972194,\r\n...\r\n```\r\n\r\nThe PR also updates the way we estimate the verification progress returning a 100% on the snapshot block and not on the tip as we will stop doing background validation when reaching it.\r\n",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-08-26T23:02:29Z",
      "updated_at": "2025-12-22T09:52:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33259",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1639,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3107738387,
      "number": 34084,
      "title": "scripted-diff: [doc] Unify stale copyright headers",
      "body": "Historically, the upper year range in file headers was bumped manually\r\nor with a script.\r\n\r\nThis has many issues:\r\n\r\n* The script is causing churn. See for example commit 306ccd4, or\r\n  drive-by first-time contributions bumping them one-by-one. (A few from\r\n  this year: https://github.com/bitcoin/bitcoin/pull/32008,\r\n  https://github.com/bitcoin/bitcoin/pull/31642,\r\n  https://github.com/bitcoin/bitcoin/pull/32963, ...)\r\n* Some, or likely most, upper year values were wrong. Reasons for \r\n  incorrect dates could be code moves, cherry-picks, or simply bugs in\r\n  the script.\r\n* The upper range is not needed for anything.\r\n* Anyone who wants to find the initial file creation date, or file\r\n  history, can use `git log` or `git blame` to get more accurate\r\n  results.\r\n* Many places are already using the `-present` suffix, with the meaning\r\n  that the upper range is omitted.\r\n\r\nTo fix all issues, this bumps the upper range of the copyright headers\r\nto `-present`.\r\n\r\nFurther notes:\r\n\r\n* Obviously, the yearly 4-line bump commit for the build system (c.f.\r\n  b537a2c02a9921235d1ecf8c3c7dc1836ec68131) is fine and will remain.\r\n* For new code, the date range can be fully omitted, as it is done\r\n  already by some developers. Obviously, developers are free to pick\r\n  whatever style they want. One can list the commits for each style.\r\n* For example, to list all commits that use `-present`:\r\n  `git log --format='%an (%ae) [%h: %s]' -S 'present The Bitcoin'`.\r\n* Alternatively, to list all commits that use no range at all:\r\n  `git log --format='%an (%ae) [%h: %s]' -S '(c) The Bitcoin'`.\r\n\r\n<!--\r\n* The lower range can be wrong as well, so it could be omitted as well,\r\n  but this is left for a follow-up. A previous attempt was in\r\n  https://github.com/bitcoin/bitcoin/pull/26817.\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-16T21:13:54Z",
      "updated_at": "2025-12-22T08:57:50Z",
      "merged_at": "2025-12-19T16:58:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34084",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1841,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119957251,
      "number": 34127,
      "title": "iwyu: Add `pragma: always_keep` to `bitcoin-build-config.h`",
      "body": "Rather than use `// IWYU pragma: keep` with every `#include <bitcoin-build-config.h>`, apply a dedicated [`always_keep`](https://github.com/include-what-you-use/include-what-you-use/blob/clang_21/docs/IWYUPragmas.md#iwyu-pragma-always_keep) pragma to the `bitcoin-build-config.h` header itself.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-20T17:25:39Z",
      "updated_at": "2025-12-21T17:36:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34127",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 354,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3022278484,
      "number": 33902,
      "title": "doc: Document compiler configuration for native depends packages",
      "body": "Fixes: #33859\r\n\r\nPreviously one had to read the Makefile (and various *.mk configuration\r\nfiles) to see how to correctly override CC and CXX when building native\r\ndepends packages.\r\n\r\nDetail this in README.md to make it clearer.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2025-11-18T15:23:18Z",
      "updated_at": "2025-12-21T15:26:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33902",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 293,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2682445239,
      "number": 33029,
      "title": "net: make m_mempool optional in PeerManager",
      "body": "This PR is a continuation of →https://github.com/bitcoin/bitcoin/pull/22850, to make m_mempool an optional pointer in PeerManager instead of a reference.\r\n\r\n some benefits, as mentioned here:https://github.com/bitcoin/bitcoin/pull/26247#issue-1396302764 are:\r\n\r\n1. m_mempool is already a pointer in other parts like:\r\nIn Chainstate:[ https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L532](https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L532)\r\nIn BlockAssembler:[ https://github.com/bitcoin/bitcoin/blob/master/src/node/miner.h#L168](https://github.com/bitcoin/bitcoin/blob/master/src/node/miner.h#L168)\r\nSo adding this to PeerManager improves consistency.\r\n2. Having m_mempool as a pointer also makes it easier to test scenarios where the mempool is not required.\r\n3. I'm not sure if `-nomempool` is still being considered, but if it is, then this pointer approach would be a necessary prerequisite.\r\n\r\nThere was a suggestion here ->  https://github.com/bitcoin/bitcoin/pull/26247#issuecomment-1271599738 to refactor/introduce helper functions like `RejectIncomingTxs` that would return `m_mempoo`l, but I’m not entirely sure about this approach.this wouldn't be ideal since in some call sites like` PushNodeVersion` and `NetMsgType::SENDTXRCNCL`, mempool isn’t needed at all.\r\n\r\nI'd like to continue working on this, and I'm looking for feedback on whether this is still relevant and which approach to go with. Should I follow the suggestion to add helper functions that return the m_mempool pointer, or should I stick with checking if m_mempool is null, or perhaps consider a different approach altogether?\r\n",
      "state": "open",
      "user": "naiyoma",
      "created_at": "2025-07-21T16:08:15Z",
      "updated_at": "2025-12-21T00:30:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33029",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1686,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3111653733,
      "number": 34095,
      "title": "refactor: enable `readability-container-contains` clang-tidy rule",
      "body": "Replace the last few instances of `.count() != 0` and `.count() == 0` and bare `count()` patterns with the more expressive C++20 `.contains()` method:\r\n\r\n* `std::set<std::string>` in `getblocktemplate` RPC;\r\n* `std::map<std::string, ...>` in `transaction_tests`;\r\n* other bare `std::unordered_set` and `std::map` count calls.\r\n\r\nAlso fixes https://github.com/bitcoin/bitcoin/issues/34101 by reverting `boost::multi_index::contains` calls not available in our minimum supported version.\r\n\r\nWith no remaining violations, enable the `readability-container-contains` clang-tidy check to prevent future regressions.\r\n\r\nFollow-up to https://github.com/bitcoin/bitcoin/pull/33192",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-17T22:51:22Z",
      "updated_at": "2025-12-20T23:00:45Z",
      "merged_at": "2025-12-19T15:55:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34095",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 738,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119837621,
      "number": 34126,
      "title": "index: Add ScriptTypeIndex to track script type statistics per block",
      "body": "This PR adds a new optional index (`ScriptTypeIndex`) that traks statistics about script types for each block. The index maintains both the count and total value (in satoshis) of outputs for each script type per block.\r\n\r\nTracking script type statistics enables analysis of Bitcoin's UTXO set composition over time, (for example we can see addoption trends for: P2PKH, P2SH, SegWit, Taproot) and value distribution across script types.\r\n\r\n## Implementation\r\n\r\n- New `ScriptTypeIndex` class extending `BaseIndex`\r\n- Tracks all standard script types: NONSTANDARD, P2PK, P2PKH, P2SH, MULTISIG, NULL_DATA, P2WPKH, P2WSH, P2TR\r\n- For each script type, tracks both output count and total sats locked\r\n- Disabled by default, enabled with `-scripttypeindex` flag\r\n\r\n## RPC Interface\r\n\r\nAdds new RPC method `getscripttypestats <blockhash>` that returns nested objects with `count` and `value` for each script type:\r\n```\r\n{\r\n  \"nonstandard\": {\"count\": 0, \"value\": 0},\r\n  \"p2pk\": {\"count\": 1, \"value\": 5000000000},\r\n  \"p2pkh\": {\"count\": 5, \"value\": 25000000000},\r\n  ...\r\n}\r\n```\r\n\r\n## Testing\r\n\r\nUnit tests included in `src/test/scripttypeindex_tests.cpp`:\r\n- Basic initial sync test\r\n- Test with multiple script types (P2PKH, P2SH, MULTISIG, NULL_DATA, P2WPKH, P2WSH, P2TR)\r\n\r\n\r\n### Example output:\r\n<img width=\"1305\" height=\"677\" alt=\"image\" src=\"https://github.com/user-attachments/assets/bc7df617-50e0-4f47-a394-127a8370c231\" />\r\n",
      "state": "closed",
      "user": "zkokelj",
      "created_at": "2025-12-20T14:09:46Z",
      "updated_at": "2025-12-20T14:11:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34126",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1491,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2756065507,
      "number": 33215,
      "title": "Fix compatibility with `-debuglogfile` command-line option",
      "body": "This PR avoids hardcoding the \"debug.log\" filename, ensuring compatibility with custom filenames provided via the `-debuglogfile` command-line option.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-08-19T10:59:57Z",
      "updated_at": "2025-12-20T12:34:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33215",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 209,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2188264818,
      "number": 31325,
      "title": "Make m_tip_block std::optional",
      "body": "Suggested in https://github.com/bitcoin/bitcoin/pull/31297#discussion_r1844244309",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-11-19T19:05:22Z",
      "updated_at": "2025-12-20T12:32:26Z",
      "merged_at": "2024-12-19T15:05:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31325",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 112,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1769879350,
      "number": 29645,
      "title": "doc: update release-process.md",
      "body": "While doing various release process things for the first time, I noticed some of our docs are outdated and/or confusing.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2024-03-13T11:29:09Z",
      "updated_at": "2025-12-20T12:32:26Z",
      "merged_at": "2024-05-01T00:17:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29645",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 151,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2242321371,
      "number": 31529,
      "title": "guix: latest 2.31 glibc",
      "body": "An additional commit has been backported to the 2.31 branch:\r\nhttps://sourceware.org/git/?p=glibc.git;a=shortlog;h=refs/heads/release/2.31/master.\r\n\r\nPass `--disable-timezone-tools`: removes `var/profiles/x86_64-linux-gnu/sbin/zdump`.\r\nPass `--disable-profile`: profiling is disabled by default, but make that explicit.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-18T13:56:57Z",
      "updated_at": "2025-12-20T12:32:25Z",
      "merged_at": "2024-12-20T15:19:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31529",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 343,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2201754037,
      "number": 31377,
      "title": "ci: allow passing extra args to docker build with CI_IMAGE_BUILD_EXTRA_ARGS",
      "body": "By setting `CI_IMAGE_BUILD_EXTRA_ARGS`, a CI runner can influence the docker build of the CI container image. This allows to, for example, pass `--cache-to` and `--cache-from` to the build, which is useful for ephemeral, self-hosted CI runners.\r\n",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2024-11-26T19:21:32Z",
      "updated_at": "2025-12-20T12:32:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31377",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 322,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2242994211,
      "number": 31535,
      "title": "doc: Install `py3-zmq` port on OpenBSD for `interface_zmq.py`",
      "body": "On OpenBSD, Python's `zmq` module is provided as a separate [port](https://www.ports.to/path/net/py-zmq,python3.html).\r\n\r\nThis PR updates the OpenBSD Build Guide to include this port, enabling the `interface_zmq.py` functional test.\r\n\r\nAlso updates the documented OpenBSD version.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-18T19:50:32Z",
      "updated_at": "2025-12-20T12:32:24Z",
      "merged_at": "2024-12-20T15:17:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31535",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 342,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2245634179,
      "number": 31544,
      "title": "cmake: Remove unused `BUILD_TESTING` variable from \"dev-mode\" preset",
      "body": "On the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd:\r\n```\r\n$ cmake -B build --preset dev-mode -DWITH_MULTIPROCESS=OFF\r\n<snip>\r\n-- Configuring done (12.0s)\r\n-- Generating done (0.1s)\r\nCMake Warning:\r\n  Manually-specified variables were not used by the project:\r\n\r\n    BUILD_TESTING\r\n\r\n\r\n-- Build files have been written to: /home/hebasto/git/bitcoin/build\r\n```\r\n\r\nThis PR resolves the issue.\r\n\r\nThe removed `BUILD_TESTING` variable is a part of the [`CTest`](https://cmake.org/cmake/help/latest/module/CTest.html) module, which we do not include in the project.\r\n",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-19T22:29:37Z",
      "updated_at": "2025-12-20T12:32:23Z",
      "merged_at": "2024-12-20T15:15:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31544",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 643,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119340528,
      "number": 34123,
      "title": "doc: Clarify CMake test runner workflow in README",
      "body": "This PR updates `test/README.md` to recommend running `test_runner.py` from the `build/` directory when using CMake.\r\n\r\nRunning from the source directory (e.g., `./test/functional/test_runner.py`) fails on fresh builds because `config.ini` is located in the build directory. Using the build directory path leverages the symlinks correctly and ensures the configuration is found without needing manual flags.\r\n\r\nContext: Supersedes #34073 based on feedback from @maflcko.",
      "state": "closed",
      "user": "YG01110",
      "created_at": "2025-12-20T02:47:05Z",
      "updated_at": "2025-12-20T11:47:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34123",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 520,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2925411752,
      "number": 33646,
      "title": "log: check fclose() results and report safely in logging.cpp",
      "body": "`fclose()` can report write errors (for example if the disk is full or the filesystem has a problem). Right now, some `fclose()` calls in `src/logging.cpp` ignore the return value. This means errors might go unnoticed and log lines could be lost without warning.\r\n\r\n## What this PR does:\r\n- Add a small helper that prints `fclose()` errors to `stderr` (with path and errno).\r\n- In shutdown: close `m_fileout` safely and report errors.\r\n- In reopen: open the new file, swap it in, close the old one, and report errors if closing fails.\r\n- In shrink/rotate: check all `fclose(file)` calls and report failures.\r\n\r\nNo other behavior changes. Normal logging, rotation, and console output remain unchanged.",
      "state": "open",
      "user": "cedwies",
      "created_at": "2025-10-17T19:06:08Z",
      "updated_at": "2025-12-20T10:54:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33646",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 761,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2908274346,
      "number": 33604,
      "title": "p2p: Allow block downloads from peers without snapshot block after assumeutxo validation",
      "body": "Currently, after assumeutxo background validation finishes, the node continues to skip peers that don't have the snapshot block in their best chain until restart. This unnecessarily excludes peers from block downloads even though the background sync has completed and undo data is available.\r\n\r\nThe restriction persists because `m_chainman.CurrentChainstate().SnapshotBase()` continues to return the snapshot base block until restart, even after validation completes. Added `m_chainman.CurrentChainstate().m_assumeutxo == Assumeutxo::UNVALIDATED` check to only apply the peer restriction while background validation is ongoing. \r\n\r\nAlso added test coverage in `feature_assumeutxo.py` that verifies peers without the snapshot block can be used for block downloads after background validation completes. The test fails without this fix.",
      "state": "open",
      "user": "stringintech",
      "created_at": "2025-10-12T20:36:02Z",
      "updated_at": "2025-12-19T16:11:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33604",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 923,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2958741609,
      "number": 33732,
      "title": "ci: Call docker exec from Python script to fix word splitting",
      "body": "The remaining `ci/test/02_run_container.sh` is fine, but has a bunch of shellcheck SC2086 word splitting violations.\r\n\r\nThis is fine currently, because the only place that needed them had additional escaping, and all other commands happened to split fine on spaces.\r\n\r\nHowever, this may change in the future. So fix it now, by rewriting it in Python, which is recommended in the dev notes.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-10-29T12:13:02Z",
      "updated_at": "2025-12-19T16:11:09Z",
      "merged_at": "2025-12-19T15:40:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33732",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 451,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110851566,
      "number": 34093,
      "title": "netif: fix compilation warning in QueryDefaultGatewayImpl()",
      "body": "```\r\nsrc/common/netif.cpp:137:51: error: comparison of integers of different signs: 'int64_t' (aka 'long') and 'unsigned long' [-Werror,-Wsign-compare]\r\n  137 |         for (nlmsghdr* hdr = (nlmsghdr*)response; NLMSG_OK(hdr, recv_result); hdr = NLMSG_NEXT(hdr, recv_result)) {\r\n      |                                                   ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netlink/netlink.h:220:31: note: expanded from macro 'NLMSG_OK'\r\n  220 | #define NLMSG_OK(_hdr, _len)            NL_ITEM_OK(_hdr, _len, NLMSG_HDRLEN, _NLMSG_LEN)\r\n      |                                         ^                ~~~~  ~~~~~~~~~~~~\r\n/usr/include/netlink/netlink.h:203:10: note: expanded from macro 'NL_ITEM_OK'\r\n  203 |         ((_len) >= _hlen && _LEN_M(_ptr) >= _hlen && _LEN_M(_ptr) <= (_len))\r\n      |           ~~~~  ^  ~~~~~\r\n1 error generated.\r\n```\r\n\r\nHappens on FreeBSD 15.0, with the default compiler (Clang 19).\r\n\r\nOn FreeBSD 14, `/usr/include/netlink/netlink.h` contains:\r\n```\r\n #define NLMSG_HDRLEN                    ((int)sizeof(struct nlmsghdr))\r\n```\r\n\r\nOn FreeBSD 15, `/usr/include/netlink/netlink.h` contains:\r\n```\r\n #define NLMSG_HDRLEN                    (sizeof(struct nlmsghdr))\r\n```\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-12-17T17:45:19Z",
      "updated_at": "2025-12-19T15:42:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34093",
      "labels": [
        "Needs backport (30.x)"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3321,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3117950498,
      "number": 34115,
      "title": "doc: Use multi-path descriptors in descriptors.md and linked tests",
      "body": "This PR updates the documentation and functional test to use multi-path descriptor syntax `/<0;1>/*` instead of separate external/internal descriptors, making examples more concise and aligned with modern descriptor usage.\r\nfixes #34086\r\n## Changes\r\n\r\n### Documentation (`doc/descriptors.md`)\r\n- Updated `sortedmulti` example to use `/<0;1>/*` syntax for both receiving and change addresses\r\n- Updated `thresh` (miniscript) example to use `/<0;1>/*` syntax\r\n- Updated descriptor checksums to match the new syntax\r\n- Updated explanation text to use `(/0)` and `(/1)` notation for clarity\r\n\r\n### Test (`test/functional/wallet_miniscript_decaying_multisig_descriptor_psbt.py`)\r\n- Modified to import a single multi-path descriptor instead of two separate descriptors\r\n- Updated `_get_xpub()` to strip trailing derivation paths for multi-path usage\r\n- Updated `create_multisig()` to construct and import multi-path descriptors\r\n- Added `descsum_create()` import to preserve `<0;1>` syntax (using `getdescriptorinfo()` would collapse it to a single path)\r\n- Added `range` parameter `[0, 1000]` for proper address generation\r\n\r\n## Rationale\r\nMulti-path descriptors with `<0;1>` syntax are more concise and easier to use than managing separate external and internal descriptors. When a descriptor contains exactly two elements in the multi-path specifier, Bitcoin Core automatically imports the second as an internal (change) descriptor.\r\n\r\nThe key technical fix in the test was using `descsum_create()` instead of `getdescriptorinfo()` to add the checksum, because `getdescriptorinfo()` expands multi-path descriptors and only returns the first path, preventing the multi-path syntax from being preserved during import.\r\n\r\n\r\n\r\n## Testing\r\n\r\nThe functional test `wallet_miniscript_decaying_multisig_descriptor_psbt.py` now passes successfully with the multi-path descriptor properly expanding to both receiving (`/0/*`) and change (`/1/*`) descriptors during import.\r\n\r\n```bash\r\npython3 [wallet_miniscript_decaying_multisig_descriptor_psbt.py](http://_vscodecontentref_/0)\r\n# Tests successful\r\n",
      "state": "closed",
      "user": "ritoban23",
      "created_at": "2025-12-19T15:32:24Z",
      "updated_at": "2025-12-19T15:33:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34115",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2153,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3114490270,
      "number": 34106,
      "title": "doc: add missing copyright headers",
      "body": "Takes care of some queries from #34084.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-18T17:00:19Z",
      "updated_at": "2025-12-19T15:18:47Z",
      "merged_at": "2025-12-19T15:18:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34106",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 74,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2526397126,
      "number": 32545,
      "title": "Replace cluster linearization algorithm with SFL",
      "body": "Part of cluster mempool: #30289.\r\n\r\nThis replaces the cluster linearization algorithm introduced in #30126 and #30286 (a combination of LIMO with candidate-set search), with a completely different algorithm: [spanning-forest linearization](https://delvingbitcoin.org/t/spanning-forest-cluster-linearization/1419/1), which appears to have much better performance for hard clusters. See [this post](https://delvingbitcoin.org/t/how-to-linearize-your-cluster/303/68) for a comparison between various linearization algorithms, and [this post](https://delvingbitcoin.org/t/how-to-linearize-your-cluster/303/73) for benchmarks comparing them. Replaying historical mempool data on it shows that it can effectively linearize every observed cluster up to 64 transactions optimally within tens of microseconds, though pathological examples can be created which take longer.\r\n\r\nThe algorithm is effectively a very specialized version of the [simplex algorithm](https://en.wikipedia.org/wiki/Simplex_algorithm) to the problem of finding high-feerate topological subsets of clusters, but modified to find all consecutive such subsets concurrently rather than just the first one. See the post above for how it is related.\r\n\r\nIt represents the cluster as partitioned into a set of chunks, each with a spanning tree of its internal dependencies connecting the transactions. Randomized improvements are made by selecting dependencies to add and remove to these spanning trees, merging and splitting chunks, until no more improvements are possible, or a computation budget is reached. Like simplex, it does not necessarily make progress in every step, and thus has no upper bound on its runtime to find optimal, but randomization makes long runtimes very unlikely, and additionally makes it hard to adversarially construct clusters in which the algorithm reliably makes bad choices.\r\n\r\n",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-05-17T23:24:56Z",
      "updated_at": "2025-12-19T15:14:54Z",
      "merged_at": "2025-12-19T15:14:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32545",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1917,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1651212304,
      "number": 29119,
      "title": "refactor: Use std::span over Span",
      "body": "`std::span` allows static extents, which is a nice benefit over just `Span`.\r\n\r\nHowever, the interface of the two isn't identical and requires some more changes than just defining an alias. This is my current draft to *compile* with `std::span`. This should be the minimal changes required to get a green CI, but the changes may not be ideal, so this remains a draft.\r\n\r\nAlso, this requires and is based on #29071.\r\n\r\nIn the meantime, changes that make sense on their own, can be split up.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2023-12-19T23:36:52Z",
      "updated_at": "2025-12-19T12:31:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29119",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 523,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2207019486,
      "number": 31393,
      "title": "refactor: Move GuessVerificationProgress into ChainstateManager",
      "body": "Currently the function is standalone, which means any passed-in data like `TxData` or the block pointer needs to be taken from the `ChainstateManager` and passed in. This is currently verbose and may become even more verbose if the function is reworked in the future. As the function can not be called without a `ChainstateManager` in production code anyway, make it a member function on the class.\r\n\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-29T09:40:30Z",
      "updated_at": "2025-12-19T12:31:34Z",
      "merged_at": "2024-12-18T18:58:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31393",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 466,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2241584203,
      "number": 31520,
      "title": "#31318 followups",
      "body": "#31318 followups\r\n\r\nDrops an extraneous bracket and fixes a typo.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-12-18T07:58:33Z",
      "updated_at": "2025-12-19T12:31:33Z",
      "merged_at": "2024-12-18T20:41:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31520",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 82,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2233747830,
      "number": 31486,
      "title": "fuzz: Abort when using global PRNG without re-seed",
      "body": "This is the first step toward improving fuzz stability and determinism (https://github.com/bitcoin/bitcoin/issues/29018).\r\n\r\nA fuzz target using the global test-only PRNG will now abort if the seed is re-used across fuzz inputs.\r\n\r\nAlso, temporarily add `SeedRandomStateForTest(SeedRand::ZEROS)` to all affected fuzz targets. This may slow down the libfuzzer leak detector, but it will disable itself after some time, or it can be disabled explicitly with `-detect_leaks=0`.\r\n\r\nIn a follow-up, each affected fuzz target can be stripped of the global random use and a local `RandomMixin` (or similar) can be added instead.\r\n\r\n(Can be tested by removing any one of the re-seed calls and observing a fuzz abort)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-13T12:38:50Z",
      "updated_at": "2025-12-19T12:31:33Z",
      "merged_at": "2024-12-17T17:55:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31486",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 759,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2243808077,
      "number": 31538,
      "title": "doc: fix 404 URL",
      "body": "\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n\r\n\r\nThe link has expired, replace it with the latest address.",
      "state": "closed",
      "user": "goodfirm",
      "created_at": "2024-12-19T08:10:33Z",
      "updated_at": "2025-12-19T12:31:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31538",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1857,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3076189471,
      "number": 34020,
      "title": "mining: add getTransactions(ByWitnessID) IPC methods",
      "body": "For Stratum v2 custom job declaration to be bandwidth efficient, the pool can request[^0] only the transactions that it doesn't know about.\r\n\r\nThe spec doesn't specify how this is achieved, but one method is to call the `getrawtransaction` RPC on each transaction id listed in [DeclareMiningJob](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol?query=DeclareMiningJob#644-declareminingjob-client-server) (or a subset if the pool software maintains a cache). Using RPC is inefficient, made worse by the need to make multiple calls. It also doesn't support queuing by witness id (yet, see #34013).\r\n\r\nThis PR introduces two new IPC methods:\r\n\r\n- `getTransactions()`: takes a list of `Txid`'s\r\n- `getTransactionsByWitnessID()`: : takes a list of `Wtxid`'s\r\n\r\nBoth return a list of serialised transactions. An empty element is returned for transactions that were not found.\r\n\r\nThe `Txid` variant, just like its RPC counterpart, takes advantage of `-txindex` if enabled. The `Wtxid` variant can't do that unless we add a `-witnesstxindex`, but at least sv2 has no use for that.\r\n\r\nThe RPC additionally allows providing a `block_hash` hint. I haven't implemented that here because I don't have a need or it. It can always be added later.\r\n\r\nI thought about having a single (or overloaded) `getTransactions()` that works with both `Txid` and `Wtxid`, but I prefer that clients are intentional about which one they want.\r\n\r\nA unit and functional test cover the new functionality.\r\n\r\nSv2 probably only needs `getTransactionsByWitnessID()`, but it's easy enough to just add both.\r\n\r\nTODO:\r\n- [ ] figure out https://github.com/bitcoin-core/libmultiprocess/issues/235 (this PR is draft pending that, subtree linter failure is expected)\r\n\r\n[^0]: there's two reasons the pool requests these transactions: to approve the template and to broadcast the block if a solution is found (the miner will also broadcast via their template provider). See also https://github.com/stratum-mining/sv2-spec/issues/170",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-05T19:13:47Z",
      "updated_at": "2025-12-19T12:06:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34020",
      "labels": [
        "Mining",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2062,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2349932670,
      "number": 31929,
      "title": "http: Make server shutdown more robust",
      "body": "- Log HTTP request pointers to be able to discover which one is stuck.\r\n- Instead of hanging indefinitely, use timeouts and abort when HTTP connections take unreasonably long to close.\r\n- Ensure we always free libevent HTTP.\r\n\r\nShould help debug #31894.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-02-21T15:32:53Z",
      "updated_at": "2025-12-19T08:55:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31929",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 292,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3099551985,
      "number": 34073,
      "title": "doc: Add CMake config note to functional test README",
      "body": "The current documentation does not specify how to run `test_runner.py` directly when using the new CMake build system. Attempting to run it without flags leads to a `FileNotFoundError: config.ini`.\r\n\r\nThis PR adds a note to `test/README.md` explaining that users must point to `build/test/config.ini` using the `--configfile` flag when running tests from the source root.",
      "state": "closed",
      "user": "YG01110",
      "created_at": "2025-12-14T09:20:43Z",
      "updated_at": "2025-12-19T08:54:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34073",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 424,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3068971351,
      "number": 34003,
      "title": "test: interface_ipc.py minor fixes and cleanup",
      "body": "This PR cleans up the `interface_ipc.py` test, fixing broken checks, fixing missing await calls, removing to_dict calls, renaming variables, reducing `.result` accesses, and giving template objects explicit lifetimes. More details are in the commit messages.\r\n\r\nThe first commit changes a lot of indentation so is easiest to review ignoring whitespace.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-12-03T21:23:36Z",
      "updated_at": "2025-12-19T07:51:12Z",
      "merged_at": "2025-12-16T14:05:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34003",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 399,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078943144,
      "number": 34026,
      "title": "fuzz: Add tests for `CCoinControl` methods",
      "body": "The `ccoincontrol` fuzzer misses tests for a number of `CCoinControl` operations. Add them.\r\n\r\nWhile at it, improve the oracle for the existing tests.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2025-12-07T08:54:32Z",
      "updated_at": "2025-12-19T06:16:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34026",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 193,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2887599768,
      "number": 33540,
      "title": "argsman, cli: GNU-style command-line option parsing (allows options after non-option arguments)",
      "body": "This PR simplifies the argument parsing logic and resolves practical issues for `bitcoin-cli` and similar binaries (e.g. `bitcoin-wallet`) making their usage more consistent and predictable, enabling valid patterns such as mixing commands with wallet- or RPC-specific options—without relying on argument ordering quirks.\r\n\r\n<details>\r\n<summary>What's changed in ArgsManager that allows the above.</summary>\r\n\r\n- Previously, `ArgsManager` stopped interpreting options once a non-option argument was encountered (non-GNU parsing). For example:\r\n\r\n        bitcoind -a -b param -c\r\n\r\n  would ignore `-c` because it followed the non-option argument `param`. In some cases '-c' is interpreted as an argument for 'param', producing unexpected behavior (eg empty arrays for listtransactions command).\r\n\r\n- This PR changes the behavior so that options following non-option argument are recognized and processed (GNU parsing). This is needed for workflows for tools like CLI where command arguments may be followed by wallet- or RPC-specific\r\noptions, e.g.:\r\n\r\n        bitcoin-cli -rpcwallet=\"\" listtransactions -rpcwallet=mywallet\r\n    \r\n        bitcoin-cli getaddressinfo <address> -rpcwallet=mywallet\r\n\r\n- (other binaries could also benefit from this change,  e.g. `bitcoin-wallet`)\r\n\r\n        bitcoin-wallet create -wallet=newname\r\n\r\n- Invalid options passed after non-options will be treated as RPC arguments that begin with a `-` character (so no\r\nbehavioural change against `master`), e.g.:\r\n\r\n        bitcoin-cli -regtest -datadir=/tmp/btc createwallet -mywallet\r\n        {\r\n            \"name\": \"-mywallet\"\r\n        }\r\n\r\n</details>\r\n\r\n<details><summary>Before and after outputs running RPC commands from <code>CLI</code>/ <code>bitcoin-cli</code>.</summary><ul>\r\n     <li><details><summary>wallet commands using <code>CLI</code>:</summary><ul> \r\n           <li><details><summary><code>getaddressinfo</code></summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc getaddressinfo bcrt1qrnz5xlcwz5d85n3fag6v0vc4lryjc90jhqtpsh -rpcwallet=nonExistent\r\nerror message:\r\ngetaddressinfo \"address\"\r\n...\r\n```\r\n</li>\r\n           <li>after\r\n\r\n```\r\n./build/bin/bitcoin-cli -regtest -datadir=/tmp/btc getaddressinfo bcrt1qrnz5xlcwz5d85n3fag6v0vc4lryjc90jhqtpsh -rpcwallet=nonExistent\r\nerror code: -18\r\nerror message:\r\nRequested wallet does not exist or is not loaded\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n           <li><details><summary><code>listtransactions</code></summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=nonExistent\r\n[\r\n]\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n\r\n```\r\n./build/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=nonExistent\r\nerror code: -18\r\nerror message:\r\nRequested wallet does not exist or is not loaded\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n           <li><details><summary>any command that needs an option to be specifed, it can be added at the end directly instead of before the command</summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions\r\nerror code: -19\r\nerror message:\r\nMultiple wallets are loaded. Please select which wallet to use by requesting the RPC through the /wallet/<walletname> URI path. Or for the CLI, specify the \"-rpcwallet=<walletname>\" option before the command (run \"bitcoin-cli -h\" for help or \"bitcoin-cli listwallets\" to see which wallets are currently loaded).\r\n```\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=\"\"\r\nerror code: -19\r\nerror message:\r\nMultiple wallets are loaded. Please select which wallet to use by requesting the RPC through the /wallet/<walletname> URI path. Or for the CLI, specify the \"-rpcwallet=<walletname>\" option before the command (run \"bitcoin-cli -h\" for help or \"bitcoin-cli listwallets\" to see which wallets are currently loaded).\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n```\r\n/build/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=\"\"\r\n[\r\n  {\r\n    \"address\": \"bcrt1q5pqkrlfrp9rvsg43sxxagrees7r7ul6uyskhs4\",\r\n    \"parent_descs\": [\r\n      \"wpkh([76a11ab0/84h/1h/0h]tpubDCDCuyC1Rtm1weZ5kfBYtdchcmqa2t8db7M68wsPHbWhUrYnzFTrHu7ufVVRydt3FdWQy8iNmKbZYbgpWWcEKPAj896x53UbS6i2xRD1qct/0/*)#kuff3m9t\"\r\n    ],\r\n    \"category\": \"immature\",\r\n    \"amount\": 50.00000000,\r\n    \"label\": \"\",\r\n...\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n     </ul></details></li>\r\n     <li><details><summary>other binaries could benefit from it, e.g. <code>bitcoin-wallet:</code></summary><ul> \r\n           <li><details><summary><code>create</code> command</summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create\r\nWallet name must be provided when creating a new wallet.\r\n```\r\n_(`-wallet` option has to be passed before the `create` command in order to work)_\r\n```\r\n./build_master/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create -wallet=newWalletName\r\nError: Additional arguments provided (-wallet=newWalletName). Methods do not take arguments. Please refer to `-help`.\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n```\r\n./build/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create -wallet=newWallet\r\nTopping up keypool...\r\nWallet info\r\n===========\r\nName: newWallet\r\nFormat: sqlite\r\nDescriptors: yes\r\nEncrypted: no\r\nHD (hd seed available): yes\r\nKeypool Size: 8000\r\nTransactions: 0\r\nAddress Book: 0\r\n```\r\n</li>\r\n           </ul></details></li>\r\n     </ul></details></li>\r\n     </ul> <!-- End -->\r\n</details>\r\n\r\n-<ins>_**Notes**_</ins>:\r\n\r\n- <ins>Backwards compatibility</ins>:\r\nThis PR is backward compatible in the sense that it allows new valid invocations that were previously rejected (failed or somehow ignored).\r\nIn `master`, any valid option following a command is treated as a positional argument. This can lead to unexpected RPC errors or help messages due to mismatched argument types. With this PR, those cases are parsed as proper options when applicable.\r\n\r\n- `bitcoin-cli` continues to accept RPC arguments that begin with a `-` character as currently in `master` (check `createwallet` example in _\"What's change in ArgsManager\"_ section above).\r\n\r\n- `bitcoin-cli` could distinguish between options that begin with single and double dashes, and treat options after the RPC method name that begin with double dashes as RPC named parameters (check example in 4th [commit](https://github.com/bitcoin/bitcoin/pull/33540/commits/a101bbb61fdf5563337334d63a10432432ee3625) message body).\r\n\r\n- Refactored both `ArgsManager::ProcessOptionKey` (new function added in this PR) and `ArgsManager::ParseParameters` in separated commits making the code clearer and the PR much easier to follow and review.",
      "state": "open",
      "user": "pablomartin4btc",
      "created_at": "2025-10-04T22:43:06Z",
      "updated_at": "2025-12-19T04:11:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33540",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 6987,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2872412884,
      "number": 33506,
      "title": "test: sock: Enable socket pair tests on Windows",
      "body": "Some `class Sock`  tests were previously disabled because Windows lacks [`socketpair(2)`](https://man7.org/linux/man-pages/man2/socketpair.2.html). This PR adds a `CreateSocketPair()` helper which creates a sender socket and receiver socket with a TCP connection, enabling these test cases for Windows.\r\n\r\nThis change is generally an improvement, but is also broken out of a [branch](github.com/davidgumberg/bitcoin/tree/2025-09-02-0xB10C-prefill-rebase) that does compact block prefilling up to the available bytes in the connection's current TCP window (see [delving post](https://delvingbitcoin.org/t/stats-on-compact-block-reconstructions/1052/34)). \r\n\r\nCreating connected socket pairs is useful for added tests in that branch that validate querying the current TCP window state, and without this change those tests don't run on Windows.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-09-29T23:40:15Z",
      "updated_at": "2025-12-19T00:37:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33506",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 889,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3090939336,
      "number": 34048,
      "title": "refactor: inline constant `f_obfuscate = false` parameter",
      "body": "Split out of https://github.com/bitcoin/bitcoin/pull/33324 since it makes sense on its own.\r\n\r\nCurrently the parameter is only called with a single constant parameter, it doesn't make sense to needlessly obfuscate the constructor (pun intended).",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-10T22:26:07Z",
      "updated_at": "2025-12-18T22:23:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34048",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 303,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 304070624,
      "number": 16545,
      "title": "refactor: Implement missing error checking for ArgsManager flags",
      "body": "Trigger startup errors if bitcoin is configured with bad setting values according to flags. Also raise internal errors if settings are registered and retrieved with inconsistent flags.\n\nThis change has no effect on behavior because the new ArgsManager flags added here are not used outside of tests yet.\n\nIt'll probably be easier to start applying type checking flags to _new_ options than _existing_ options. But for examples of how type checking flags can make sense applied to existing options, see the new [example_options unit test](https://github.com/ryanofsky/bitcoin/blob/pr/argcheck/src/test/argsman_tests.cpp#L27) added in this PR.\n\n---\n\nFollowups:\n\n- Support for flag combinations is possible and is added in commit c919f51c044f0e80ecd301f9c9d396ddff2331ba ([branch](https://github.com/ryanofsky/bitcoin/commits/pr/argcomb))\n- ALLOW_LIST flags are added and enforced in [#17580](https://github.com/bitcoin/bitcoin/pull/17580)\n- Bad IsArgSet usages with ALLOW_LIST are removed in [#30529](https://github.com/bitcoin/bitcoin/pull/30529) and prevented in [#17783](https://github.com/bitcoin/bitcoin/pull/17783)\n- Confusing and ignored multiple assignments in config files are disallowed in [#17493](https://github.com/bitcoin/bitcoin/pull/17493)\n- Confusing reverse-precedence settings merging code is removed in [#17581](https://github.com/bitcoin/bitcoin/pull/17581)\n- Type flags added in this PR implement runtime part of a change to add more compile-time checking in [#22978](https://github.com/bitcoin/bitcoin/pull/22978)\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-08-04T14:13:12Z",
      "updated_at": "2025-12-18T21:14:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/16545",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1600,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1220771563,
      "number": 26988,
      "title": "cli: rework -addrinfo cli to use addresses which aren’t filtered for quality/recency",
      "body": "Rework of `-addrinfo` CLI is done using `getaddrmaninfo` RPC proposed in https://github.com/bitcoin/bitcoin/pull/27511. This would be useful for users who want to know the total number of addresses the node knows about and can make connections to. \r\n\r\nCurrently, `-addrinfo` returns total number of addresses the node knows about after filtering them for quality + recency using [`isTerrible`](https://github.com/bitcoin/bitcoin/blob/4b51290f719559b8506425177f7758abe66fe2c3/src/addrman.cpp#L808). However `isTerrible`addresses [don't matter](https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1147725684) when selecting outbound peers to connect to. Total number of addresses the node knows about could be higher than what `-addrinfo` currently displays. See https://github.com/bitcoin/bitcoin/pull/24370.",
      "state": "open",
      "user": "stratospher",
      "created_at": "2023-01-29T21:25:28Z",
      "updated_at": "2025-12-18T20:41:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26988",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 898,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940584116,
      "number": 30343,
      "title": "wallet, logging: Replace WalletLogPrintf() with LogInfo()",
      "body": "Make new logging macros `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` compatible with wallet code and drop custom WalletLogPrintf() function. The new logging macros introduced in #28318 weren't previously useful in wallet code because wallet code prefixes most log messages with the wallet names to be be able to distinguish log output from multiple wallets. Fix this by introducing a new `WalletLogSource` class inheriting from `BCLog::Source` which can include the wallet name in log messages.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256.** The non-base commits are:\n\n- [`ca18d19407d0` wallet, logging: Replace WalletLogPrintf() with LogInfo()](https://github.com/bitcoin/bitcoin/pull/30343/commits/ca18d19407d052b34acefeaac61f49b85c8f5678)\n- [`b7e59129cf17` wallet, logging: Switch LogInfo to LogWarning/LogError](https://github.com/bitcoin/bitcoin/pull/30343/commits/b7e59129cf17284703ede936d963aed69251bfb8)\n- [`74bb399dfa1f` wallet, logging: Switch LogInfo to LogError in AddWalletDescriptor](https://github.com/bitcoin/bitcoin/pull/30343/commits/74bb399dfa1f0823f26fc3bfa7917f5f4fa36668)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:57:15Z",
      "updated_at": "2025-12-18T19:30:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30343",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1204,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2086428775,
      "number": 30951,
      "title": "net: option to disallow v1 connection on ipv4 and ipv6 peers",
      "body": "resolves #29618.\r\n\r\nThis PR adds a config flag option `-v2onlyclearnet` which disallows outbound v1 connections on ipv4 and ipv6 networks since they're unencrypted. outbound v1 connections are still possible from tor/i2p/cjdns peers since they're encrypted networks.\r\n\r\n- v1 outbound connections to peers are not attempted\r\n- v1 reconnections are not attempted (if peer is falsely advertised as v2 peer and we attempt a v2 connection but it fails, we do not attempt a v1 reconnection when `-v2onlyclearnet` is switched on)\r\n\r\nCurrently 70% of reachable nodes in network supporting v2 (according to https://21.ninja/reachable-nodes/node-service-share/ and https://bitnodes.io/nodes). Also found 81% of addresses supporting v2 in the addrman of nodes I checked - personal node and the nodes in [peer.observer](https://peer.observer/addrman/alice). (You can use [this branch ](https://github.com/stratospher/bitcoin/commits/addrinfo_service_display/)to check the % of v2 addresses in a node's addrman.)",
      "state": "open",
      "user": "stratospher",
      "created_at": "2024-09-23T12:23:48Z",
      "updated_at": "2025-12-18T19:17:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30951",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1060,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2368554207,
      "number": 31974,
      "title": "Drop testnet3",
      "body": "Testnet3 was deprecated in v28 with the introduction of testnet4. It will be dropped in v30 _or later_, please discuss in #31975.\r\n\r\nThere is no more `[test]` network section. The user is expected to set testnet4 explicitly, which should make future rotation of testnets easier.\r\n\r\nIf a `[test]` or `[testnet3]` section is present in `bitcoin.conf` a warning is issued:\r\n\r\n```\r\nWarning: .../bitcoin.conf:18 Section [test] is not recognized.\r\n```\r\n\r\nStarting with `-testnet3` will be greeted with an error message:\r\n\r\n```\r\nError: Testnet3 was dropped in version 30.0. Consider using '-testnet4' instead.\r\n```\r\n\r\nThis also prevents a fallback to mainnet.\r\n\r\nStarting with `-test` was already not possible with testnet3.\r\n\r\nReview hints:\r\n- make a (Windows) Guix build and test the (un)installer\r\n\r\nGuix hashes:\r\n\r\n```\r\n(todo)\r\n```",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-03T16:22:11Z",
      "updated_at": "2025-12-18T18:05:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31974",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 842,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1362172353,
      "number": 27731,
      "title": "Prevent file descriptor exhaustion from too many RPC calls",
      "body": "Fixes #11368\r\n\r\nThis requires libevent 2.2.1 which so far was only [released in alpha](https://github.com/libevent/libevent/releases/tag/release-2.2.1-alpha).\r\n\r\nFor more context see specifically https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-632717903, this uses the feature mentioned there as libevent#592.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2023-05-23T23:20:19Z",
      "updated_at": "2025-12-18T16:36:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27731",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 381,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110557512,
      "number": 34092,
      "title": "[30.x] Finalise v30.1",
      "body": "Finalise `v30.1`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-17T16:08:03Z",
      "updated_at": "2025-12-18T15:55:14Z",
      "merged_at": "2025-12-18T15:55:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34092",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 39,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3114141269,
      "number": 34105,
      "title": "kernel: revert accidentally removed copyright header",
      "body": "Accidentally removed in #30595.\r\nThe author mentioned it was likely a bad rebase.\r\n\r\nSee:\r\nhttps://github.com/bitcoin/bitcoin/commit/7990463b1059ba5fc4ebe37fd1105a9e168ae20d?diff=split#diff-04e685224f1ac5bfd91d47d8d7528a2e44f94fab5535d4b6b5af79b5a13aeb93L1-L12\r\n\r\nFound while reviewing https://github.com/bitcoin/bitcoin/pull/34084#issuecomment-3670396535",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-18T15:07:52Z",
      "updated_at": "2025-12-18T15:32:30Z",
      "merged_at": "2025-12-18T15:16:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34105",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 408,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078355807,
      "number": 34025,
      "title": "net: Waste less time in socket handling",
      "body": "Cuts out some wasted time in net socket handling. First, only calculates the current time once every 50ms, rather than once for each peer, which given we only care about second-level precision seems more than adequate. Second, caches the value of the `-capturemessages` setting in `CConnman` rather than re-evaluating it every time we invoke `PushMessaage`.",
      "state": "closed",
      "user": "ajtowns",
      "created_at": "2025-12-06T22:44:20Z",
      "updated_at": "2025-12-18T15:09:26Z",
      "merged_at": "2025-12-12T10:50:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34025",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 397,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2194781763,
      "number": 31349,
      "title": "ci: detect outbound internet traffic generated while running tests",
      "body": "Prevent generating outbound traffic on a non-loopback interface during tests.\r\n\r\n* Fix `node_init_tests/init_test`\r\n* Change CI to catch new regressions, including DNS traffic. DNS traffic is detected because some VMs have configured a non-loopback DNS server, `[1111:1111::1]:53`. This is achieved by running `tcpdump` during tests and inspecting its output after the tests. Add `--cap-add NET_RAW` to docker to be able to run `tcpdump`.\r\n\r\nResolves https://github.com/bitcoin/bitcoin/issues/31339\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-11-22T13:58:43Z",
      "updated_at": "2025-12-18T14:48:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31349",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 567,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2803909911,
      "number": 33324,
      "title": "blocks: add `-reobfuscate-blocks` argument to enable (de)obfuscating existing blocks",
      "body": "### Context\r\n\r\nRecent discussions highlighted that many nodes which synced before Bitcoin Core v28 have their block and undo files stored effectively in the clear (zero XOR key). This patch adds a simple, resumable maintenance tool to obfuscate previously raw block files, rotate an existing key to a fresh random one, or de-obfuscate (set key to zero) if consciously chosen, all without requiring resync. The operation can be cancelled and restarted safely.\r\n\r\n### Implementation\r\n\r\nThe new startup option `-reobfuscate-blocks[=VALUE]` accepts either 16 hex characters as an exact 8-byte XOR key (little-endian in-memory layout) or a boolean to generate a random 64-bit key. e.g. `-reobfuscate-blocks=0000000000000000` sets the key to zero, effectively removing obfuscation.\r\n\r\nIf we detect unobfuscated blocks at start time we suggest this new option in a warning.\r\n\r\nAt startup, we iterate over all undo and block files (grouping the block and undo files for more uniform iteration), read them with the old XOR key and write them back with the new key (`<name>.reobfuscated`). The implementation actually combines the two keys and reads directly into the new obfuscated version to only do a single iteration over the data. This works if the original blocks aren't obfuscated or if the new blocks aren't or if both are.\r\nAfter successful write, we immediately delete the old file. Once all files are staged, we rename them back and atomically swap `xor.dat.reobfuscated` → `xor.dat` and continue operation.\r\n\r\nWe log the old and new keys and print progress roughly per-percent as files complete (i.e. max 100 progress logs).\r\n\r\n### Constraints\r\n\r\n* Re-obfuscation resumes automatically (detected via `xor.dat.reobfuscated`) even without the flag. In worst-case a crash should only force us to redo previous work.\r\n* Single-threaded, processing one file at a time to keep code simple and avoid complexity of interleaving renames and key swaps across threads.\r\n* Fast in practice with sequential read/modify/write per blockfile - after recent obfuscation vectorization, this path is very quick.\r\n\r\n### Reproducer\r\n\r\n```bash\r\ncmake -B build -DENABLE_IPC=ON -DBUILD_GUI=ON\r\ncmake --build build -j$(nproc)\r\n# command line\r\n./build/bin/bitcoind -reobfuscate-blocks -stopatheight=1\r\n# same with GUI\r\n./build/bin/bitcoin-qt -reobfuscate-blocks -stopatheight=1\r\n```\r\n\r\n### Single-threaded Performance\r\n\r\n cpu                 | hdd/ssd | block count | size    | files  | time (min) | blocks/min \r\n---------------------|---------|-------------|---------|--------|------------|------------\r\n Apple M4 Max laptop | SSD     | ~909k       | ~707 GB | 9,982  | 8.4        | 146,613    \r\n Intel Core i9       | SSD     | ~909k       | ~725 GB | 10,238 | 23.1       | 39,351     \r\n Raspberry Pi 5      | SSD     | ~914k       | ~728 GB | 10,276 | 72.78      | 12,558     \r\n Intel Core i7       | HDD     | ~909k       | ~720 GB | 10,156 | 208.7      | 4,356      \r\n Raspberry Pi 4B     | HDD     | ~915k       | ~730 GB | 10,304 | 1467       | 624        \r\n\r\n----\r\n\r\nSimilar work:\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/32451\r\n* https://github.com/andrewtoth/blocks-xor\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-09-05T23:51:29Z",
      "updated_at": "2025-12-18T14:17:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33324",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3246,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2809021284,
      "number": 33343,
      "title": "help: enrich help text for `-loadblock`",
      "body": "`-loadblock` doesn't support XOR-ed files, mention it in its help text to avoid troubles for users.",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-09-08T17:41:11Z",
      "updated_at": "2025-12-18T14:11:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33343",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 139,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3109342736,
      "number": 34088,
      "title": "log: Use `__func__` for -logsourcelocations",
      "body": "The `-logsourcelocations` option was recently changed to print the full function signature, as a side-effect of moving toward `std::source_location` internally.\r\n\r\nThis is fine, but at least for me, it makes debugging functional test failures harder, because the log is just so massively verbose, with questionable benefit.\r\n\r\nI think the historically used file name, line number, and plain `__func__` name are more than sufficient for `-logsourcelocations`.\r\n\r\nSo switch back to using that.\r\n\r\n\r\nFor reference, a verbose log may look like:\r\n\r\n```\r\n...\r\nnode0 2025-12-17T07:28:37.528146Z [init] [checkqueue.h:147] [CCheckQueue<T, R>::CCheckQueue(unsigned int, int) [with T = CScriptCheck; R = std::pair<ScriptError_t, std::__cxx11::basic_string<char> >]] Script verificatio\r\nn uses 1 additional threads\r\n...\r\n```\r\n\r\nI don't think there is value in printing stuff, like the (anon) namespace, the class template args, or the functionn (template) args. The following should be more than sufficient:\r\n\r\n```\r\n...\r\nnode0 2025-12-17T09:45:57.017122Z [init] [checkqueue.h:147] [CCheckQueue] Script verification uses 1 additional threads \r\n...",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-17T09:49:01Z",
      "updated_at": "2025-12-18T13:21:30Z",
      "merged_at": "2025-12-18T12:17:25Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34088",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1178,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1681972231,
      "number": 29256,
      "title": "log, refactor: Allow log macros to accept context arguments",
      "body": "Allow `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` macros to accept context arguments to provide more information in log messages and more control over logging to callers.\r\n\r\nThis functionality is used in followup PRs:\r\n\r\n- [#30342](https://github.com/bitcoin/bitcoin/pull/30342) - To let libbitcoinkernel send output to specfic `BCLog::Logger` instances instead of a global instance, so output can be disambiguated and applications can have more control over logging.\r\n\r\n- [#30343](https://github.com/bitcoin/bitcoin/pull/30343) - To replace custom `WalletLogPrintf` calls with standard logging calls that automatically include wallet names and don't log everything at info level.\r\n\r\nThis PR does not change behavior of current log prints or require them to be updated. It includes tests and documentation covering the new functionality.\r\n\r\n---\r\n\r\nNote: Originally this PR also removed some restrictions around passing category constants to log macros to try to make them more consistent, but these changes were too controversial and have been dropped.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-01-16T22:09:35Z",
      "updated_at": "2025-12-18T13:02:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29256",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096473886,
      "number": 34058,
      "title": "test: Improve code coverage for pubkey checks",
      "body": "Cover these branches in `IsCompressedOrUncompressedPubKey` and `IsCompressedPubKey`:\r\n- `Non-canonical public key: invalid length for uncompressed key`\r\n- `Non-canonical public key: invalid length for compressed key`\r\n- `Non-canonical public key: invalid prefix for compressed key`\r\n\r\nSee the missed branches here: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html\r\n\r\n`script_tests` succeed on my end.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-12T13:05:32Z",
      "updated_at": "2025-12-18T12:36:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34058",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 483,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2076268739,
      "number": 30915,
      "title": "ci: Use `ninja` to build in macOS native CI job",
      "body": "This PR addresses [this](https://github.com/bitcoin/bitcoin/pull/30911#issuecomment-2354922939) comment:\r\n> I wonder if one CI task should be using Ninja (and cmake >= 3.27), if it isn't too hard to implement. Otherwise this config will remain untested and errors may sneak in to the master branch, only being detected after merge.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-09-17T12:13:56Z",
      "updated_at": "2025-12-18T12:31:08Z",
      "merged_at": "2024-09-18T09:16:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30915",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 379,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1885542044,
      "number": 30164,
      "title": "ci: Add FreeBSD GitHub Actions job",
      "body": "This PR add FreeBSD CI job based on https://github.com/vmactions.\r\n\r\nOther *BSD OSes are also available.\r\n\r\nIMPORTANT. The `vmactions/*` needs to be added to the \"Actions permissions\" section of the repository settings.\r\n\r\nA CI job example in my personal repo -- https://github.com/hebasto/bitcoin/actions/runs/9215593397/job/25354268473.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-05-23T22:19:10Z",
      "updated_at": "2025-12-18T12:31:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30164",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 373,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2185477269,
      "number": 31318,
      "title": "Drop script_pub_key arg from createNewBlock",
      "body": "Providing a script for the coinbase transaction is only done in test code and for (unoptimized) CPU solo mining.\r\n\r\nProduction miners use the `getblocktemplate` RPC which omits the coinbase transaction entirely from its block template, leaving it to external (pool) software to construct it.\r\n\r\nThis commit removes the `script_pub_key argument` from `createNewBlock()` in the Mining interface.\r\n\r\nA coinbase script can still be passed via `BlockCreateOptions` instead. Tests are modified to do so.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-11-18T15:31:37Z",
      "updated_at": "2025-12-18T12:31:07Z",
      "merged_at": "2024-12-17T16:50:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31318",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 541,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2219806898,
      "number": 31434,
      "title": "test, univalue: Specify path to tests instead of hardcoding",
      "body": "This change is required to pass cross builds on to a different machine after the build.\r\n\r\nFor tests managed by CTest, the new `UNIVALUE_JSON_TEST_SRC` environment variable is set automatically. For other cases, it must be set manually. If not set, it defaults to the current working directory.\r\n\r\nSee for example https://github.com/bitcoin/bitcoin/pull/31176, but this PR will also allow someone to implement it outside this repo.\r\n\r\nAlso see: https://github.com/bitcoin/bitcoin/pull/31176#discussion_r1871722532.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-06T11:16:13Z",
      "updated_at": "2025-12-18T12:31:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31434",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 574,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2233978684,
      "number": 31493,
      "title": "refactor: Use immediate lambda to work around GCC bug 117966",
      "body": "Currently the libstdc++ debug mode can only be used with version 11, or 15 (and later), due to https://gcc.gnu.org/bugzilla/show_bug.cgi?id=117966\r\n\r\nThis seems restrictive.\r\n\r\nAdd a temporary workaround for now, which makes the global (temporary) `std::span` local to a lambda.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-13T14:46:20Z",
      "updated_at": "2025-12-18T12:31:05Z",
      "merged_at": "2024-12-17T18:32:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31493",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 339,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2233863519,
      "number": 31489,
      "title": "fuzz: Fix test_runner error reporting",
      "body": "The error reporting is confusing, because right now it prints:\r\n\r\nhttps://cirrus-ci.com/task/4846031060336640?logs=ci#L4931\r\n\r\n```\r\n...\r\nTraceback (most recent call last):\r\n  File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/fuzz/test_runner.py\", line 411, in <module>\r\n    main()\r\n  File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/fuzz/test_runner.py\", line 199, in main\r\n    run_once(\r\n  File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/fuzz/test_runner.py\", line 376, in run_once\r\n    assert len(done_stat) == 1\r\n           ^^^^^^^^^^^^^^^^^^^\r\nAssertionError\r\n```\r\n\r\nThis is harmless, but confusing.\r\n\r\nFix it by collecting statistics only when the program has not aborted. (Can be reviewed with `--color-moved=dimmed-zebra`)\r\n\r\nAlso, reword the error message to align it with error messages in other test_runners in this repo.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-13T13:42:31Z",
      "updated_at": "2025-12-18T12:31:05Z",
      "merged_at": "2024-12-17T11:08:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31489",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 923,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2239537659,
      "number": 31517,
      "title": "Correct spelling and grammar improvements",
      "body": "1. **Spelling Corrections**:\r\n\r\n  - `useable` → `usable` (Correct spelling of the word)\r\n   - `expensive_calulation` → `expensive_calculation` (The word \"calulation\" is incorrectly spelled, and the correct spelling is \"calculation\" from the verb \"to calculate\")\r\n\r\n2. **Grammar Improvement**:\r\n\r\n- `be at conflict` → `be in conflict` (The preposition \"at\" is replaced with \"in\" because the correct expression is \"to be in conflict with,\" which always uses the preposition \"in\")\r\n",
      "state": "closed",
      "user": "savvar9991",
      "created_at": "2024-12-17T12:26:15Z",
      "updated_at": "2025-12-18T12:31:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31517",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 521,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2241863910,
      "number": 31525,
      "title": "Correct typo in \"OLD_CMAKE_REQURED_FLAGS\"",
      "body": "### Fixed typo in the text:\r\n-Updated all instances of `OLD_CMAKE_REQURED_FLAGS` to `OLD_CMAKE_REQUIRED_FLAGS`\r\n",
      "state": "closed",
      "user": "savvar9991",
      "created_at": "2024-12-18T10:14:55Z",
      "updated_at": "2025-12-18T12:31:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31525",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 154,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2241704037,
      "number": 31523,
      "title": "docs: Improve wording in benchmarking Update benchmarking.md",
      "body": "The term \"unlatching\" used in the benchmarking documentation is not appropriate in the given context. It has been replaced with \"**disabling**,\" which better reflects the intended meaning of turning off log printers and lock analysis.\r\n\r\nThe updated sentence now reads:  \r\n> \"...by disabling log printers and lock analysis.\"\r\n",
      "state": "closed",
      "user": "barajeel",
      "created_at": "2024-12-18T09:00:51Z",
      "updated_at": "2025-12-18T12:31:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31523",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 387,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2242334874,
      "number": 31530,
      "title": "doc: correct comment",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "jjjike2021",
      "created_at": "2024-12-18T14:01:38Z",
      "updated_at": "2025-12-18T12:31:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31530",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2083,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2242285500,
      "number": 31528,
      "title": "doc: emphasize that `Assume` always evaluates",
      "body": "We've been surprised multiple times by `Assume` doing heavy computations in `release`:\r\n* https://github.com/bitcoin/bitcoin/issues/31178#issuecomment-2448867990\r\n* https://github.com/bitcoin/bitcoin/pull/31490#discussion_r1887765453\r\n\r\nSince `Assume` is a macro, it could have been written differently to avoid parameter evaluation (similarly to `LogDebug`, which doesn't evaluate the parameters).\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-12-18T13:40:10Z",
      "updated_at": "2025-12-18T12:31:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31528",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 446,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3111519934,
      "number": 34094,
      "title": "ci: bump actions/checkout version to v6",
      "body": "Updated actions/checkout from v5 to v6 in ci.yml workflow ",
      "state": "closed",
      "user": "Dahka2321",
      "created_at": "2025-12-17T21:42:14Z",
      "updated_at": "2025-12-18T12:20:30Z",
      "merged_at": "2025-12-18T12:20:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34094",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 98,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3012165503,
      "number": 33875,
      "title": "qa: Account for unset errno in ConnectionResetError",
      "body": "The lack of errno can cause unclear and long log output.\r\n\r\nIssue can be triggered by:\r\n\r\n```diff\r\n--- a/src/httpserver.cpp\r\n+++ b/src/httpserver.cpp\r\n@@ -263,6 +263,7 @@ std::string RequestMethodString(HTTPRequest::RequestMethod m)\r\n /** HTTP request callback */\r\n static void http_request_cb(struct evhttp_request* req, void* arg)\r\n {\r\n+    throw std::runtime_error{\"Hello\"};\r\n     evhttp_connection* conn{evhttp_request_get_connection(req)};\r\n     // Track active requests\r\n     {\r\n```\r\nand running a functional test such as *test/functional/feature_abortnode.py*.\r\n\r\n`http.client.RemoteDisconnected` not specifying `errno` to `ConnectionResetError`-ctor: https://github.com/python/cpython/blob/ce4b0ede16aea62ee7b1e02df7e1538102a356da/Lib/http/client.py#L1556C9-L1556C29\r\n\r\n<details><summary>Before/after log examples</summary>\r\n\r\n\r\n#### Log before\r\n```\r\n2025-11-14T20:53:05.272804Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 138, in main\r\n    self.setup()\r\n    ~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 268, in setup\r\n    self.setup_network()\r\n    ~~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/./build/test/functional/feature_abortnode.py\", line 21, in setup_network\r\n    self.setup_nodes()\r\n    ~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 381, in setup_nodes\r\n    self.start_nodes()\r\n    ~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 527, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_node.py\", line 326, in wait_for_rpc_connection\r\n    rpc.getblockcount()\r\n    ~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/authproxy.py\", line 111, in _request\r\n    return self._get_response()\r\n           ~~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/authproxy.py\", line 174, in _get_response\r\n    http_response = self.__conn.getresponse()\r\n  File \"/nix/store/62fdlzq1x1ak2lsxp4ij7ip5k9nia3hc-python3-3.13.7/lib/python3.13/http/client.py\", line 1430, in getresponse\r\n    response.begin()\r\n    ~~~~~~~~~~~~~~^^\r\n  File \"/nix/store/62fdlzq1x1ak2lsxp4ij7ip5k9nia3hc-python3-3.13.7/lib/python3.13/http/client.py\", line 331, in begin\r\n    version, status, reason = self._read_status()\r\n                              ~~~~~~~~~~~~~~~~~^^\r\n  File \"/nix/store/62fdlzq1x1ak2lsxp4ij7ip5k9nia3hc-python3-3.13.7/lib/python3.13/http/client.py\", line 300, in _read_status\r\n    raise RemoteDisconnected(\"Remote end closed connection without\"\r\n                             \" response\")\r\nhttp.client.RemoteDisconnected: Remote end closed connection without response\r\n```\r\n\r\n#### Log after\r\n\r\n```\r\n2025-11-14T20:48:10.552126Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 138, in main\r\n    self.setup()\r\n    ~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 268, in setup\r\n    self.setup_network()\r\n    ~~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/./build/test/functional/feature_abortnode.py\", line 21, in setup_network\r\n    self.setup_nodes()\r\n    ~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 381, in setup_nodes\r\n    self.start_nodes()\r\n    ~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_framework.py\", line 527, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/home/hodlinator/bc/3/test/functional/test_framework/test_node.py\", line 316, in wait_for_rpc_connection\r\n    raise FailedToStartError(self._node_msg(\r\n        f'bitcoind exited with status {self.process.returncode} during initialization. {str_error}'))\r\ntest_framework.test_node.FailedToStartError: [node 0] bitcoind exited with status -6 during initialization. terminate called after throwing an instance of 'std::runtime_error'\r\n  what():  Hello\r\n************************\r\n```\r\nNote how even the C++ exception message is now included.\r\n\r\n</details>",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-11-14T21:10:09Z",
      "updated_at": "2025-12-18T11:46:20Z",
      "merged_at": "2025-12-18T11:46:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33875",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4907,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2170572223,
      "number": 31260,
      "title": "scripted-diff: Type-safe settings retrieval",
      "body": "This PR changes the way settings are registered and retrieved to provide more compile-time safety. Currently settings are [registered](https://github.com/ryanofsky/bitcoin/blob/03cff2c1421e5db59963eba1a845ef5dd318c275/src/init.cpp#L504) and [retrieved](https://github.com/ryanofsky/bitcoin/blob/03cff2c1421e5db59963eba1a845ef5dd318c275/src/init.cpp#L173) like:\n\n```c++\n// Register setting\nargsman.AddArg(\"-pid=<file>\", strprintf(\"Specify pid file. Relative paths will be prefixed by a net-specific datadir location. (default: %s)\", BITCOIN_PID_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n\n// Retrieve setting\nargs.GetPathArg(\"-pid\", BITCOIN_PID_FILENAME)\n```\n\nBut this is not ideal because nothing checks that setting names are spelled correctly, or that default values (`BITCOIN_PID_FILENAME`) are used consistently in the help string and retrieval sites, or that settings are retrieved with consistent types (bool, int, string, path, or list). This PR addresses these issues by adding setting [declarations](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init_settings.h#L267-L270) which allow settings to be [registered](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init.cpp#L484) and [retrieved](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init.cpp#L164C38-L164C59) like:\n\n```c++\n// Declare setting\nusing PidSetting = common::Setting<\n    \"-pid=<file>\", fs::path, {.legacy = true},\n    \"Specify pid file. Relative paths will be prefixed by a net-specific datadir location. (default: %s)\">\n    ::DefaultFn<[] { return BITCOIN_PID_FILENAME; }>;\n\n// Register setting\nPidSetting::Register(argsman);\n\n// Retrieve setting\nPidSetting::Get(args)\n```\n\n---\n\n#### Suggestions for review\n\nAll the real changes in this PR are in the last scripted-diff commit:\n\n- [scripted-diff: Replace AddArgs / GetArgs calls with Setting Register / Get calls](https://github.com/bitcoin/bitcoin/pull/31260/commits/fc2591a35b0640adc0df686b0f8bed5f50ada9ce)\n\nIf you take a few minutes to look at the changes applied in this scripted-diff commit, you'll understand everything this PR is doing. A good place to start looking around in this commit is the generated [`src/init_settings.h`](https://github.com/ryanofsky/bitcoin/blob/pr/scripty/src/init_settings.h) file which declares the settings that get registered in [src/init.cpp](https://github.com/ryanofsky/bitcoin/blob/pr/scripty/src/init.cpp). Then you can look at the surrounding diffs and see they are just replacing `AddArg` and `GetArg` calls.\n\nThe other notable commit is second commit, which implements the `Setting` class:\n\n- [common: Add Setting class to support typed Settings](https://github.com/bitcoin/bitcoin/pull/31260/commits/e1f016180746db0eebc2c2e1e0786f0cc5da8a43)\n\nThe other commits do minor things like moving code or updating linters. The python script that implements the scripted diff is a temporary artifact that gets deleted. The python script is complicated because it does things like parsing c++ code to extract help strings, and figuring out the right types to declare settings with so code compiles. But the entire scope of the script is to (1) generate Setting type definitions, (2) add #includes, and (3) replace `AddArg()` calls with `Register()` calls and `GetArg()` calls with `Get()` calls. So there is not much the script can actually do wrong without triggering build and test failures.\n\n---\n\n#### Extensions\n\nThis PR only adds the ability to declare individual settings with built-in types. It doesn't provide any new runtime behavior, but a branch in issue #22978 extends the `Setting` class implemented here to support runtime setting validation, additional types like `std::variant`, additional conversion options, custom types, custom validation, and groups of settings declared as options structs.\n\nThis change is mostly orthogonal to #16545. #16545 only provides runtime type checking while this PR only provides compile-time checking with no new runtime behavior. But this change does allow a nicer way of declaring types in #16545, using c++ types like `int` instead of flags like `ALLOW_INT`, or`std::vector<std::string>` instead of `ALLOW_STRING | ALLOW_LIST`.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-11-08T22:34:46Z",
      "updated_at": "2025-12-18T03:59:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31260",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 4326,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2588566198,
      "number": 32741,
      "title": "rpc: Add optional peer_ids param to filter getpeerinfo",
      "body": "Adds an optional `peer_ids` parameter to `getpeerinfo` to filter results by peer IDs.\r\n\r\nThis is useful when using bitcoin-cli or the console to inspect specific peers referenced in debug.log.",
      "state": "open",
      "user": "waketraindev",
      "created_at": "2025-06-12T21:51:05Z",
      "updated_at": "2025-12-18T00:47:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32741",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 247,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1181482615,
      "number": 26781,
      "title": "Release `LockData::dd_mutex` before calling `*_detected` functions",
      "body": "Both `double_lock_detected()` and `potential_deadlock_detected()` functions call `LogPrintf()` which in turn implies locking of the `Logger::m_cs` mutex. To avoid a deadlock, the latter must not have the `Mutex` type (see https://github.com/bitcoin/bitcoin/pull/16112).\r\n\r\nWith this PR the mentioned restriction has been lifted, and it is possible now to use our regular `Mutex` type for the `Logger::m_cs` mutex instead of a dedicated `StdMutex` type (not introducing that change here, as its diff is much bigger than a few lines, and the currently proposed diff seems valuable by itself).\r\n\r\n**Note for reviewers:** Make sure the code is configured and built with `CPPFLAGS=-DDEBUG_LOCKORDER`.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2022-12-31T15:38:49Z",
      "updated_at": "2025-12-17T22:02:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26781",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 762,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2334713712,
      "number": 31860,
      "title": "init: Take lock on blocks directory in BlockManager ctor",
      "body": "This ensures consistent directory locking for users of the kernel library by disallowing mistakenly creating multiple BlockManagers that might write into the same block or undo files.\r\n\r\nThe change here makes `LockDirectory` more strict: It now returns an error even if it is called again on the same directory from the same process. However from the description in https://github.com/bitcoin/bitcoin/pull/12422 , where this feature was introduced, it is not immediately clear what its usage was at the time. Supporting multiple wallets in the same directory is mentioned there, but it is not said why that might be a desirable feature.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-02-13T20:49:22Z",
      "updated_at": "2025-12-17T21:57:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31860",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 693,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2747824355,
      "number": 33192,
      "title": "refactor: unify container presence checks",
      "body": "### Summary\r\nInstead of counting occurrences in sets and maps, the C++20 `::contains` method expresses the intent unambiguously and can return early on first encounter.\r\n\r\n### Context\r\nApplied clang‑tidy's [readability‑container‑contains](https://clang.llvm.org/extra/clang-tidy/checks/readability/container-contains.html) check, though many cases required manual changes since tidy couldn't fix them automatically.\r\n\r\n### Changes\r\nThe changes made here were:\r\n\r\n| From                   | To               |\r\n|------------------------|------------------|\r\n| `m.find(k) == m.end()` | `!m.contains(k)` |\r\n| `m.find(k) != m.end()` | `m.contains(k)`  |\r\n| `m.count(k)`           | `m.contains(k)`  |\r\n| `!m.count(k)`          | `!m.contains(k)` |\r\n| `m.count(k) == 0`      | `!m.contains(k)` |\r\n| `m.count(k) != 1`      | `!m.contains(k)` |\r\n| `m.count(k) == 1`      | `m.contains(k)`  |\r\n| `m.count(k) < 1`       | `!m.contains(k)`  |\r\n| `m.count(k) > 0`       | `m.contains(k)`  |\r\n| `m.count(k) != 0`      | `m.contains(k)`  |\r\n\r\n> Note that `== 1`/`!= 1`/`< 1` only apply to simple [maps](https://en.cppreference.com/w/cpp/container/map/contains)/[sets](https://en.cppreference.com/w/cpp/container/set/contains) and had to be changed manually.\r\n\r\nThere are many other cases that could have been changed, but we've reverted most of those to reduce conflict with other open PRs.\r\n\r\n-----\r\n\r\n<details>\r\n<summary>clang-tidy command on Mac</summary>\r\n\r\n```bash\r\nrm -rfd build && \\\r\ncmake -B build \\\r\n  -DCMAKE_C_COMPILER=\"$(brew --prefix llvm)/bin/clang\" \\\r\n  -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm)/bin/clang++\" \\\r\n  -DCMAKE_OSX_SYSROOT=\"$(xcrun --show-sdk-path)\" \\\r\n  -DCMAKE_C_FLAGS=\"-target arm64-apple-macos11\" \\\r\n  -DCMAKE_CXX_FLAGS=\"-target arm64-apple-macos11\" \\\r\n  -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_BENCH=ON -DBUILD_FUZZ_BINARY=ON -DBUILD_FOR_FUZZING=ON\r\n\r\n \"$(brew --prefix llvm)/bin/run-clang-tidy\" -quiet -p build -j$(nproc) -checks='-*,readability-container-contains' | grep -v 'clang-tidy'\r\n```\r\n\r\n</details>\r\n\r\nNote: this is a take 2 of https://github.com/bitcoin/bitcoin/pull/33094 with fewer contentious changes.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-08-15T02:29:09Z",
      "updated_at": "2025-12-18T13:21:55Z",
      "merged_at": "2025-12-17T21:17:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33192",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 2180,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3095708145,
      "number": 34053,
      "title": "lint: Remove confusing, redundant, and brittle lint-spelling",
      "body": "`codespell` was a fun experiment. However, it has many issues, when used in this project:\r\n\r\n* The number of false-positives and true-positives are in the same ballpark. There are also many false-negatives, so the overall net-benefit is questionable.\r\n* There is often confusion around spelling errors leading to a failing CI (they do not, which was intended).\r\n* LLMs released this year are capable to detect typos with less false-positives and less false-negatives, so the `codespell` integration is a bit redundant in that sense.\r\n\r\nFix all issues by removing it.\r\n\r\nGoing forward, anyone is free to continue to use `codespell`, or any LLM, or any other tool, locally. Also, DrahtBot has the LLM typo linter integrated in the summary comment. I think the options are plenty, and are more than sufficient for now.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-12T08:22:34Z",
      "updated_at": "2025-12-17T18:19:35Z",
      "merged_at": "2025-12-17T17:19:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34053",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 876,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2843893251,
      "number": 33436,
      "title": "ci: run s390x job",
      "body": "How fast does this run? (`-md`).",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-19T13:40:38Z",
      "updated_at": "2025-12-17T18:02:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33436",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 50,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3055672917,
      "number": 33968,
      "title": "ci: remove `doc/release-notes.md` from lint-spelling.py",
      "body": "`/doc/release-notes/` is ignored, but during release branch-off, the latest release is copied to `doc/release-notes.md`. This means that CI runs based off of the branch off point (e.g., for backport dev) will fail CI if there are spelling errors, or if there are e.g. contributors names that resemble spelling errors (not a hypothetical example).",
      "state": "closed",
      "user": "JeremyRubin",
      "created_at": "2025-11-29T14:44:26Z",
      "updated_at": "2025-12-17T17:17:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33968",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 402,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3097086333,
      "number": 34063,
      "title": "Make `transaction_indentifier` hex string constructor evaluated at comptime",
      "body": "Suggested by l0rinc as a comment in #34004.\r\n\r\nThere are tests that utilize `FromHex` that will only fail during runtime if malformed. Adds a compile time constructor that can be caught by LSPs.",
      "state": "closed",
      "user": "rustaceanrob",
      "created_at": "2025-12-12T16:25:31Z",
      "updated_at": "2025-12-17T17:16:36Z",
      "merged_at": "2025-12-17T17:16:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34063",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 270,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3089659264,
      "number": 34042,
      "title": "doc: clarify libbitcoinkernel usage in libraries design",
      "body": "The libraries design document was out of sync with the current bitcoinkernel implementation and its consumers. It claimed that libbitcoin_node links against libbitcoin_kernel and that the kernel library only depends on consensus, crypto, and util, which is not true for the current CMake targets.",
      "state": "open",
      "user": "Galoretka",
      "created_at": "2025-12-10T14:52:26Z",
      "updated_at": "2025-12-17T17:07:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34042",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 352,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3022564635,
      "number": 33904,
      "title": "rest: add interface for gettxspendingprevout rpc",
      "body": "This creates a REST interface for the `gettxspendingprevout` RPC, it also includes functional tests and updates to the REST docs\r\n\r\nThis is part of https://github.com/bitcoin/bitcoin/issues/33808 but would still need  [@sstone’s](https://github.com/sstone) PR https://github.com/bitcoin/bitcoin/pull/24539, but that can be left as a follow-up for when it is merged.\r\n\r\nIf it is prefered to open a PR after https://github.com/bitcoin/bitcoin/pull/24539 I can close this and reopen after its merged ",
      "state": "open",
      "user": "kevkevinpal",
      "created_at": "2025-11-18T16:37:00Z",
      "updated_at": "2025-12-17T16:59:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33904",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 546,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3105371668,
      "number": 34080,
      "title": "ci: Pin native tests on cross-builds to same commit",
      "body": "After commit 13809b867ad980a12f886316b18bb2d3d2848ac2, the native tests may check out a different commit than the cross-build task that produced the artefacts they run on.\r\n\r\nObviously, this may lead to test failures.\r\n\r\nFix it, by first determining a fixed commit, to be used for both the build and the native tests.\r\n\r\nAn alternative could be to fully or partially revert 13809b867ad980a12f886316b18bb2d3d2848ac2, but that comes again with the downsides making it harder to detect silent merge conflicts by re-running CI, or clearing unrelated and fixed intermittent test issues by re-running CI. Then, the only alternative would be to close and re-open the pull request.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-16T08:08:37Z",
      "updated_at": "2025-12-17T15:17:53Z",
      "merged_at": "2025-12-17T15:16:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34080",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110148768,
      "number": 34089,
      "title": "contrib: asmap-tool.py - Don't write binary to TTY",
      "body": "Verify that we wouldn't be writing encoded asmap binary data directly to the TTY since it is the default but makes no sense. (Having stdout as default does make sense when piping to other applications however).\r\n\r\nFound while exploring the ASMap data pipeline (https://github.com/asmap/asmap-data/pull/38#pullrequestreview-3547352533) from Kartograf into Bitcoin Core.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-12-17T14:04:38Z",
      "updated_at": "2025-12-17T15:16:35Z",
      "merged_at": "2025-12-17T15:16:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34089",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 419,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2156825834,
      "number": 31197,
      "title": "refactor: mining interface 30955 followups",
      "body": "This PR implements the refactors suggested in https://github.com/bitcoin/bitcoin/pull/30955#pullrequestreview-2354931253.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-10-31T18:07:14Z",
      "updated_at": "2025-12-17T12:30:32Z",
      "merged_at": "2024-12-17T17:32:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31197",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 164,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2218025492,
      "number": 31431,
      "title": "util: use explicit cast in MultiIntBitSet::Fill()",
      "body": "The current code does not have a bug, but is implicitly casting -1 to 65535 and the sanitizer has no way to know whether we intend that or not.\r\n\r\n```\r\nFUZZ=bitset src/test/fuzz/fuzz /tmp/fuz\r\n\r\nerror: implicit conversion from type 'int' of value -1 (32-bit, signed)\r\nto type 'value_type' (aka 'unsigned short') changed the value to 65535\r\n(16-bit, unsigned)\r\n\r\nBase64: Qv7bX/8=\r\n```\r\n\r\nhttps://api.cirrus-ci.com/v1/task/5685829642747904/logs/ci.log\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2024-12-05T16:01:21Z",
      "updated_at": "2025-12-17T12:30:31Z",
      "merged_at": "2024-12-06T10:00:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31431",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 501,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2226530411,
      "number": 31458,
      "title": "build: use `-mbig-obj` for Windows debug builds",
      "body": "Windows cross builds using `-O0` (`-DCMAKE_BUILD_TYPE=Debug`) currently fail to compile, as some objects have too many sections. As a convenience, add `-mbig-obj` to our compile flags when using the `Debug` build type, so that if someone tries to build this way, it will work.\r\n\r\nThis would also be needed if we switched the depends flags to -O0. (maybe in #29796).\r\n\r\n`-mbig-obj`\r\n\r\n> On PE/COFF target this option forces the use of big object\r\n> file format, which allows more than 32768 sections.\r\n\r\nCloses #28109. Seems unlikely that we are going to break up the relevant object files, and the main issue is still the inclusion of Boost.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-10T14:06:07Z",
      "updated_at": "2025-12-17T12:30:30Z",
      "merged_at": "2024-12-17T11:03:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31458",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 689,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2235020696,
      "number": 31498,
      "title": "depends: Ignore prefix directory on OpenBSD",
      "body": "On OpenBSD, the prefix directory is named as follows:\r\n```\r\n$ gmake --no-print-directory -C depends print-x86_64_openbsd_prefix\r\nx86_64_openbsd_prefix=/home/hebasto/dev/bitcoin/depends/amd64-unknown-openbsd7.6\r\n```\r\n\r\nThis name does not match any pattern in `depends/.gitignore`.\r\n\r\nThis PR resolves this issue.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-14T10:00:11Z",
      "updated_at": "2025-12-17T12:30:29Z",
      "merged_at": "2024-12-17T10:46:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31498",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 355,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2239125595,
      "number": 31513,
      "title": "Fix spelling and formatting issues",
      "body": "### Description:\r\nThis pull request addresses the following changes:\r\n\r\n1. Corrected the spelling of \"useable\" to \"usable\".\r\n2. Changed \"summarising\" to the American English spelling \"summarizing\".\r\n3. Updated \"addresstype\" to \"address type\" for clarity and consistency.\r\n\r\n### Changes:\r\n- `useable` → `usable`\r\n- `summarising` → `summarizing`\r\n- `addresstype` → `address type`",
      "state": "closed",
      "user": "savvar9991",
      "created_at": "2024-12-17T09:12:45Z",
      "updated_at": "2025-12-17T12:30:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31513",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 412,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2235856966,
      "number": 31503,
      "title": "cmake: Link `bitcoin_consensus` as a library",
      "body": "The [`TARGET_OBJECTS`](https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html#genex:TARGET_OBJECTS) generator expression was introduced in the staging branch when we aimed to build the libbitcoinconsensus shared library. However, `bitcoin_consensus` is a `STATIC` library, not an `OBJECT` library.\r\n\r\nThis change updates the build system to link `bitcoin_consensus` normally to `test_bitcoin`, resolving [linking issues](https://github.com/bitcoin/bitcoin/issues/31456#issuecomment-2538798107) when building with clang-cl.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-15T15:42:53Z",
      "updated_at": "2025-12-17T12:30:28Z",
      "merged_at": "2024-12-17T10:52:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31503",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 590,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2240169729,
      "number": 31518,
      "title": "Fix",
      "body": "# Fix: Replaced identity check, improved string slicing logic, and corrected typos\r\n\r\n## What was changed\r\n1. **Removed redundant identity check** in `asmap.py` where the `None` comparison was always True.\r\n2. **Replaced string slicing** with `startswith` for better readability and performance in `asmap-tool.py`.\r\n3. **Corrected typos** in comments to improve clarity and professionalism.\r\n\r\n## Why these changes were made\r\n- **Removing the redundant identity check** eliminates unnecessary logic and improves code reliability.\r\n- **Using `startswith`** instead of string slicing adheres to Python best practices, making the code more efficient and easier to understand.\r\n- **Fixing typos** enhances the overall quality and professionalism of the codebase.\r\n\r\n## Additional Notes\r\n- These changes focus on improving code maintainability, readability, and adhering to Python conventions without altering functionality.\r\n\r\n",
      "state": "closed",
      "user": "romashka-btc",
      "created_at": "2024-12-17T17:01:44Z",
      "updated_at": "2025-12-17T12:30:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31518",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 927,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2239505052,
      "number": 31516,
      "title": "Update build-osx.md",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "savvar9991",
      "created_at": "2024-12-17T12:10:34Z",
      "updated_at": "2025-12-17T12:30:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31516",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2082,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2272618048,
      "number": 31644,
      "title": "leveldb: show non-default options during init",
      "body": "To help with to debugging and traceability (in alignment with displaying other non-default args such as `Command-line arg: dbcache=\"10000\"`) we can extend the LevelDB opening log with an additional debug message for the used non-default settings.\r\n\r\nTo avoid showing booleans as e.g. `create_if_missing=1`, I've added a local `ToString` lambda for `bool`.\r\nI wanted to use `util::Join` at the end, but couldn't find any way that I liked.\r\n\r\nExample output after the change:\r\n```bash\r\n2025-10-15T02:39:45Z Opened LevelDB successfully\r\n2025-10-15T02:39:45Z [leveldb] startup options: options.compression=NoCompression, options.create_if_missing=true, options.max_file_size=33554432, options.paranoid_checks=true, options.write_buffer_size=524288, readoptions.fill_cache=false, readoptions.verify_checksums=true, writeoptions.sync=true\r\n```",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-12T17:30:54Z",
      "updated_at": "2025-12-17T10:54:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31644",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 883,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3090774381,
      "number": 34047,
      "title": "cmake: Add fail pattern to `try_append_cxx_flags`",
      "body": "This PR addresses scenarios where the build environment, such as OSS-Fuzz, provides the `-Wno-error=unknown-warning-option` flag, which undermines our use of `-Werror` when checking compiler flags.\r\n\r\nTo reproduce the issue on the master branch @ c1f0a89d9caeb62a0a5f3462b454746941e626e6:\r\n```\r\n$ env CXX=clang++ CC=clang CXXFLAGS=\"-Wno-error=unknown-warning-option\" cmake -B build 2>&1 | grep WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES - Success\r\n```\r\n\r\nThis output shows that the `-Wduplicated-branches` flag is incorrectly treated as recognised by the compiler.\r\n\r\nNoticed while working on the [migration](https://github.com/google/oss-fuzz/pull/14457) to Ubuntu 24.04 in OSS-Fuzz.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-10T21:14:51Z",
      "updated_at": "2025-12-16T22:35:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34047",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 822,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1010047865,
      "number": 25722,
      "title": "refactor: Use util::Result class for wallet loading",
      "body": "<!-- begin based-on -->\n**This is based on #25665 + #26022.** The non-base commits are:\n\n- [`9151b903bfe7` Add temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/9151b903bfe7282511a1fc3895d2fc129899ffa2)\n- [`6fc7c310918f` refactor: Use util::Result class in wallet/sqlite](https://github.com/bitcoin/bitcoin/pull/25722/commits/6fc7c310918fa249cf27259a077b6a1d5917a013)\n- [`1323422c5ff8` refactor: Use util::Result class in wallet/migrate](https://github.com/bitcoin/bitcoin/pull/25722/commits/1323422c5ff88c1537c86cdc0fa50f1e10320c8c)\n- [`3973473d60be` refactor: Use util::Result class in wallet::MakeDatabase](https://github.com/bitcoin/bitcoin/pull/25722/commits/3973473d60bef7fd4715433865783b1754408a1f)\n- [`6440e70fafd6` refactor: Use util::Result class in wallet/dump](https://github.com/bitcoin/bitcoin/pull/25722/commits/6440e70fafd6bf8b84774df21a541e0d6235f29e)\n- [`d7f3b0ec3284` refactor: Use util::Result class in wallet/wallettool](https://github.com/bitcoin/bitcoin/pull/25722/commits/d7f3b0ec3284c5a5093d81b8b0d7c74217d2d23a)\n- [`bccb6682eb72` refactor: Use util::Result class in wallet/wallet](https://github.com/bitcoin/bitcoin/pull/25722/commits/bccb6682eb7224ddf5f1affc16686eed4d925724)\n- [`7aa597acc363` refactor: Use util::Result class in wallet/load](https://github.com/bitcoin/bitcoin/pull/25722/commits/7aa597acc3635adb5698d0cd19351fb3aa3f2767)\n- [`8fb85857a4ad` refactor: Use util::Result class in wallet/rpc](https://github.com/bitcoin/bitcoin/pull/25722/commits/8fb85857a4ad1758a16c9ab990562c0591cffa0a)\n- [`40fde9a6a71b` refactor: Use util::Result class in wallet/interfaces](https://github.com/bitcoin/bitcoin/pull/25722/commits/40fde9a6a71b50bd69e72c8b1b8e6bf5eb2d8c16)\n- [`07a929c35a56` refactor: Use util::Result class in wallet/test](https://github.com/bitcoin/bitcoin/pull/25722/commits/07a929c35a56b62912ecafe5dabb6659c0085119)\n- [`329fa7ad4df5` Drop temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/329fa7ad4df59bddc2b7a7d6ca9401043329ce7e)\n- [`2c7996d7c398` scripted-diff: replace wallet DatabaseStatus with DatabaseError](https://github.com/bitcoin/bitcoin/pull/25722/commits/2c7996d7c398b0927008a1903aad786d81c3e949)<!-- end -->\n\n---\n\nWallet loading functions up and down the stack have lots of error and warning parameters, and return error information in different ways. This PR makes them uniformly return `util::Result`, without changing behavior.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-27T19:26:58Z",
      "updated_at": "2025-12-16T20:48:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25722",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2568,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1047758233,
      "number": 26022,
      "title": "Add util::ResultPtr class",
      "body": "<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`4096f327421b` Add util::ResultPtr class](https://github.com/bitcoin/bitcoin/pull/26022/commits/4096f327421bb67731bc1d8789af1e6f107dd89a)\n- [`cf734e5b4778` Use ResultPtr<unique_ptr> instead of Result<unique_ptr>](https://github.com/bitcoin/bitcoin/pull/26022/commits/cf734e5b4778bbcbe01276f97d57e3941581535b)<!-- end -->\n\n---\n\nThe `util::ResultPtr` class is a wrapper for `util::Result` providing syntax sugar to make it less awkward to use with returned pointers. Instead of needing to be deferenced twice with `**result` or `(*result)->member`, it only needs to be dereferenced once with `*result` or `result->member`. Also when it is used in a boolean context, instead of evaluating to true when there is no error and the pointer is null, it evaluates to false so it is straightforward to determine whether the result points to something.\n\nThis PR is only partial a solution to #26004 because while it makes it easier to check for null pointer values, it does not make it impossible to return a null pointer value inside a successful result. It would be possible to enforce that successful results always contain non-null pointers by using a `not_null` type (https://github.com/bitcoin/bitcoin/issues/24423) in combination with `ResultPtr`, though.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-09-06T15:57:14Z",
      "updated_at": "2025-12-16T20:45:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26022",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1360,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1785565107,
      "number": 29700,
      "title": "kernel, refactor: return error status on all fatal errors",
      "body": "Return util::Result objects from all functions that can trigger fatal errors.\n\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\n\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\n\n---\n\n<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`fdf8ae6ffa5a` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/fdf8ae6ffa5a3836aa4195b362f753d877e6fd1b)\n- [`f4d6cabac5a7` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/f4d6cabac5a7d8f83d51a068c3e313e64d7a6611)\n- [`36833bd474d0` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/36833bd474d07b7e6073d5512464638f8f6e6ff6)\n- [`6371e7f268be` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/6371e7f268bef60fca35216a264ce19236b3f298)\n- [`b1cae2ab0900` refactor, validation: Switch to result.Update](https://github.com/bitcoin/bitcoin/pull/29700/commits/b1cae2ab09000f275925922559e74dd238ae397c)\n- [`1d6ea5fb6a67` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/1d6ea5fb6a679c6082e5a75a62b56cef8b639934)\n- [`dbd3b6f98aa8` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/dbd3b6f98aa8cd46a3edecad4a634ee28a6057e5)\n- [`23f96272f406` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/23f96272f4060fc93456565bad8ecb82e33be1cb)\n- [`3b73dd085169` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/3b73dd085169396c43ada282603ff0b0fce1e8e5)\n- [`99095011af22` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/99095011af228d5500731916fe6d085ec119a494)\n- [`495eb44f8a86` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/495eb44f8a86a2e46cdfc6965671f4f176fa2910)\n- [`54da9b8f4cdc` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/54da9b8f4cdc736c6b45afe6feefd6f685f94392)\n- [`001c7b2e8406` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/001c7b2e8406b4cbcd31f0c5afea5008582b03ac)\n- [`15fa85163f32` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/15fa85163f324d50f6365b1865c320c974bcc3ee)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-03-21T23:11:56Z",
      "updated_at": "2025-12-16T19:26:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29700",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3518,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3107464532,
      "number": 34082,
      "title": "doc: clarify description of Bitcoin Core",
      "body": "This PR slightly clarifies the description of Bitcoin Core to better explain\r\nits role in independently validating blocks and transactions.\r\n",
      "state": "closed",
      "user": "gitty-prakhar",
      "created_at": "2025-12-16T19:22:05Z",
      "updated_at": "2025-12-16T19:25:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34082",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 182,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1898129875,
      "number": 30214,
      "title": "refactor: Improve assumeutxo state representation",
      "body": "This PR contains the first part of #28608, which tries to make assumeutxo code more maintainable, and improve it by not locking `cs_main` for a long time when the snapshot block is connected, and by deleting the snapshot validation chainstate when it is no longer used, instead of waiting until the next restart.\r\n\r\nThe changes in this PR are just refactoring. They make `Chainstate` objects self-contained, so for example, it is possible to determine what blocks to connect to a chainstate without querying `ChainstateManager`, and to determine whether a Chainstate is validated without basing it on inferences like `&cs != &ActiveChainstate()` or `GetAll().size() == 1`.\r\n\r\nThe PR also tries to make assumeutxo terminology less confusing, using \"current chainstate\" to refer to the chainstate targeting the current network tip, and \"historical chainstate\" to refer to the chainstate downloading old blocks and validating the assumeutxo snapshot. It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2024-05-31T14:53:10Z",
      "updated_at": "2025-12-16T19:12:26Z",
      "merged_at": "2025-12-16T14:03:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30214",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1176,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940576733,
      "number": 30342,
      "title": "kernel, logging: Pass Logger instances to kernel objects",
      "body": "Pass `Logger` instances to `BlockManager`, `CCoinsViewDB`, `CDBWrapper`, `Chainstate`, `ChainstateManager`, `CoinsViews`, and `CTxMemPool` classes so libbitcoinkernel applications and tests have the option to control where log output goes instead of having all output sent to the global logger.\n\nThis PR is an alternative to #30338. It is more limited because it only changes kernel code while leaving other parts of the codebase alone. It also takes the opportunity to migrate legacy LogPrint / LogPrintf calls to the new log macros introduced in #28318.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256 + #33847.** The non-base commits are:\n\n- [`becff44872d1` refactor: Pass Logger instances to kernel objects](https://github.com/bitcoin/bitcoin/pull/30342/commits/becff44872d18d2d338c5e8ce6f90296ce273b34)\n- [`4332dcb2562a` refactor: Log kernel output to local log instances](https://github.com/bitcoin/bitcoin/pull/30342/commits/4332dcb2562a3b71e21e61e0f4c89b58ace45ec1)\n- [`bca1934842a9` refactor: Pass Logger instance to CTxMemPool](https://github.com/bitcoin/bitcoin/pull/30342/commits/bca1934842a962ce6b1029fae1b80ffa30bae1f0)\n- [`97be3ef0b623` kernel: Drop global Logger instance](https://github.com/bitcoin/bitcoin/pull/30342/commits/97be3ef0b6239a9e674be3d8c70f99ec5fe5b8eb)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:52:24Z",
      "updated_at": "2025-12-16T19:05:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30342",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1361,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3092707522,
      "number": 34050,
      "title": "fuzz: exercise `ComputeMerkleRoot` without `mutated` parameter",
      "body": "The `mutated` parameter in `ComputeMerkleRoot` unlocks a different path that was always exercised in the fuzz test.\r\nAdjusted to be fuzzer to pass `nullptr` as well to make sure that path is also tested: https://github.com/bitcoin/bitcoin/blob/24ed820d4f0d8f7fa2f69e1909c2d98f809d2f94/src/consensus/merkle.cpp#L49-L53\r\n\r\nFollow-up to https://github.com/bitcoin/bitcoin/pull/33805#discussion_r2589073735",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-11T11:50:32Z",
      "updated_at": "2025-12-16T16:49:46Z",
      "merged_at": "2025-12-16T14:26:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34050",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 465,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2630267512,
      "number": 32843,
      "title": "doc: invalid block handling followups",
      "body": "Some follow-ups from #31405:\r\n\r\n- make it clearer that all block indexes with a `CBlockIndexWorkComparator` score at least as good as the tip (and no others) are expected in `setBlockIndexCandidates`.\r\nPeople think of `nChainWork` when the term `work` is used and not of the (slightly arbitrary) `CBlockIndexWorkComparator` tiebreaker rules, which makes the current documentation imprecise  ( https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2075937910 )\r\n- add a comment that `nChainWork`, not `CBlockIndexWorkComparator` is used for `m_best_header` (https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2138368441)",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2025-06-30T22:10:44Z",
      "updated_at": "2025-12-16T15:37:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32843",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 668,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2659421742,
      "number": 32950,
      "title": "validation: remove BLOCK_FAILED_CHILD",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32173\r\n\r\neven though we have a distinction between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` in the codebase,\r\nwe don't use it for anything. Whenever we check for BlockStatus, we use `BLOCK_FAILED_MASK` which encompasses both of them.\r\n\r\nSince there is no functional difference between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` and it's added\r\ncode complexity to correctly categorise them (ex: https://github.com/bitcoin/bitcoin/pull/31405#discussion_r1914366243, https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-565506585), we could just remove it.\r\n\r\nLooking for conceptual feedback on whether it's better to improve handling of `BLOCK_FAILED_CHILD` in the codebase or remove `BLOCK_FAILED_CHILD`.\r\n\r\nOf less relevance, but it would also fix a `reconsiderblock` crash that could happen in the situation mentioned in https://github.com/bitcoin/bitcoin/issues/32173#issuecomment-2767030982\r\n\r\nSimilar attempt in the past in https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-568073859",
      "state": "open",
      "user": "stratospher",
      "created_at": "2025-07-11T15:04:52Z",
      "updated_at": "2025-12-16T15:36:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32950",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1096,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2663459083,
      "number": 32966,
      "title": "Silent Payments: Receiving",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. Status and tracking for the project is managed in https://github.com/bitcoin/bitcoin/issues/28536\r\nThis PR is based on https://github.com/bitcoin/bitcoin/pull/28201 and will remain in draft until https://github.com/bitcoin/bitcoin/pull/28201 is merged.\r\n\r\nThis PR:\r\n- Adds a Silent Payments descriptor implemenation\r\n- Adds a `SilentPaymentsDescriptorScriptPubKeyMan` Impl that is a subclass of `DescriptorScriptPubKeyMan`\r\n- Implements Silent Payments scanning for the wallet\r\n- Updates sending logic to use `silent-payments` destination for change when sending to `silent-payments` destination\r\n- Adds unit and functional tests for silent payments-related functionality\r\n\r\n**Follow-ups**\r\n- Silent Payments Label functionality is incomplete in this PR and will be added as a follow-up PR.\r\n",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-07-14T08:30:35Z",
      "updated_at": "2025-12-16T15:36:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32966",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 885,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2988484584,
      "number": 33817,
      "title": "validation: reduce persisted UTXO set size by prioritizing positive lookups (RFC)",
      "body": "*draft to gather comments and conceptual reviews*\r\n\r\n-----\r\n\r\n### Context\r\n\r\nBIP30 prevents duplicate transaction IDs by checking whether outputs already exist in the UTXO set before adding them.\r\nLevelDB's `FilterPolicy` stores a per-table probabilistic filter to optimize for negative lookups.\r\n\r\nAfter the first ~230k blocks (BIP30/BIP34 windows), validation does not deliberately probe the UTXO set for missing entries (missing coins imply invalid transactions).\r\nBloom filters therefore slow the common case (present-key lookups) while bloating the on-disk tables.\r\n\r\n### History\r\n\r\nBloom filters were introduced in the Ultraprune PR (#1677) without explicit documentation of their purpose.\r\n\r\n### Fix\r\n\r\nFor blocks prior to the `assumevalid` anchor, we already skip script verification, relying on accumulated proof of work. Skipping BIP30 for those deeply buried blocks is consistent with assumevalid's purpose (especially after the recent [checkpoint](https://github.com/bitcoin/bitcoin/pull/31649) removal).\r\n\r\nRemoving the `LevelDB` bloom filters slightly speeds up present-key workloads (~11% faster `AssumeUTXO` load) and reduces the on-disk chainstate size by ~2% because filter blocks are not stored.\r\n\r\n### Disclaimer\r\n\r\nNodes syncing from genesis with `-assumevalid=0` still perform full BIP30 validation, which may be a few seconds slower.\r\nChecks beyond 1,983,701 remain enforced regardless of `fScriptChecks`.\r\n\r\n### Performance\r\n\r\nPerformance change is best demonstrated by an `AssumeUTXO` loading - since this change was mostly motivated by UTXO set size and memory reduction.\r\n\r\n`AssumeUTXO` loads with default dbcache show ~11% faster bootstrapping.\r\n\r\n<details>\r\n<summary>11%, 8% and 1% faster assumeutxo load | 880000 blocks | dbcache 450/4500/45000 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD</summary>\r\n\r\n```\r\nCOMMITS=\"745eb053a41c487cc10f20644c65dc8455cf8974 5cb93dad7c06db82642169d8f7d07442d215f49c\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-880000.dat\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor DBCACHE in 450 4500 45000; do \\\r\n  (echo \"assumeutxo load | 880000 blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') |\r\n$(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\";) &&\\\r\n  hyperfine \\\r\n  --sort command \\\r\n  --runs 5 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$DBCACHE-$CC-$(date +%s).json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -rf $DATA_DIR/blocks $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n             cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind bitcoin-cli -j2 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 20 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 20\" \\\r\n   --conclude \"build/bin/bitcoin-cli -datadir=$DATA_DIR stop || true; killall bitcoind || true; sleep 10; \\\r\n               echo '{COMMIT} | dbcache=$DBCACHE | chainstate: $(find $DATA_DIR/chainstate_snapshot -type f 2>/dev/null | wc -l) files, $(du -sb $DATA_DIR/chainstate_snapshot 2>/dev/null | cut -f1) bytes' >> $DATA_DIR/debug.log; \\\r\n               cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log\" \\\r\n    \"COMPILER=$CC DBCACHE=$DBCACHE ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n745eb053a4 Merge bitcoin-core/gui#901: Add createwallet, createwalletdescriptor, and migratewallet to history filter\r\n5cb93dad7c leveldb: remove bloom filters from leveldb\r\n\r\nBenchmark 1: COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean ± σ):     696.452 s ± 57.904 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min … max):   655.482 s … 797.623 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean ± σ):     628.999 s ± 37.939 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min … max):   596.216 s … 673.440 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.11 ±  0.11  COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\nassumeutxo load | 880000 blocks | dbcache 4500 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean ± σ):     674.430 s ± 37.704 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   642.483 s … 734.178 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean ± σ):     622.827 s ± 16.068 s    [User: 0.001 s, System: 0.002 s]\r\n  Range (min … max):   610.489 s … 650.770 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.08 ±  0.07  COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\nassumeutxo load | 880000 blocks | dbcache 45000 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD\r\nBenchmark 1: COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean ± σ):     484.569 s ± 16.260 s    [User: 0.001 s, System: 0.002 s]\r\n  Range (min … max):   469.979 s … 507.771 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean ± σ):     482.040 s ± 12.817 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min … max):   465.205 s … 500.719 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.01 ±  0.04  COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"1477\" height=\"802\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e1c7720b-59f3-4dda-80fd-f7eeb1066f41\" />\r\n(note: image will be moved to a comment later)\r\n\r\nFor reference, here is how the change affects `reindex-chainstate` per 100k block chunk:\r\n<img width=\"4500\" height=\"3000\" alt=\"block_chunk_comparison\" src=\"https://github.com/user-attachments/assets/b51b9224-ad4f-4f5d-899d-df3d32c75d69\" />\r\n(note: image will be moved to a comment later)\r\n\r\n### Persisted Size\r\n\r\nUTXO set size depends on LevelDB compaction scheduling. To stability stabilize measurements, we have instrumented the code to compact after every block connect to see the exact effect of the bloom filters on number of LevelDB files and their total sizes.  This is for on-disk size measurement only, not for performance.\r\n\r\n<details>\r\n<summary>compact after each block connection for stable size</summary>\r\n\r\n> log index directory stats for every update tip\r\n```patch\r\nFrom 3e5414c6ef6f4cefbb0ad49d3c164823850e42b2 Mon Sep 17 00:00:00 2001\r\nFrom: =?UTF-8?q?L=C5=91rinc?= <pap.lorinc@gmail.com>\r\nDate: Wed, 29 Oct 2025 08:53:07 +0100\r\nSubject: [PATCH] log index directory stats for every update tip\r\n\r\n---\r\n src/validation.cpp | 33 +++++++++++++++++++++++++++++++--\r\n 1 file changed, 31 insertions(+), 2 deletions(-)\r\n\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex af523b06d74e4..cc68023b1e7dc 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -68,11 +68,13 @@\r\n #include <cassert>\r\n #include <chrono>\r\n #include <deque>\r\n+#include <filesystem>\r\n #include <numeric>\r\n #include <optional>\r\n #include <ranges>\r\n #include <span>\r\n #include <string>\r\n+#include <thread>\r\n #include <tuple>\r\n #include <utility>\r\n\r\n@@ -2942,6 +2944,27 @@ void Chainstate::PruneAndFlush()\r\n     }\r\n }\r\n\r\n+static std::pair<size_t, size_t> GetDirectoryStats(const fs::path& dir_path)\r\n+{\r\n+    assert(fs::exists(dir_path) && fs::is_directory(dir_path));\r\n+    for (int attempts{0}; attempts < 100; ++attempts) {\r\n+        try {\r\n+            size_t file_count{0}, total_bytes{0};\r\n+            for (const auto& entry : fs::recursive_directory_iterator(dir_path)) {\r\n+                if (entry.is_regular_file()) {\r\n+                    ++file_count;\r\n+                    total_bytes += entry.file_size();\r\n+                }\r\n+            }\r\n+            return {file_count, total_bytes};\r\n+        } catch (const fs::filesystem_error&) {\r\n+            // can fail during compaction\r\n+            std::this_thread::sleep_for(std::chrono::seconds(5));\r\n+        }\r\n+    }\r\n+    std::terminate();\r\n+}\r\n+\r\n static void UpdateTipLog(\r\n     const ChainstateManager& chainman,\r\n     const CCoinsViewCache& coins_tip,\r\n@@ -2953,8 +2976,12 @@ static void UpdateTipLog(\r\n\r\n     AssertLockHeld(::cs_main);\r\n\r\n-    // Disable rate limiting in LogPrintLevel_ so this source location may log during IBD.\r\n-    LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false, \"%s%s: new best=%s height=%d version=0x%08x log2_work=%f tx=%lu date='%s' progress=%f cache=%.1fMiB(%utxo)%s\\n\",\r\n+    const fs::path datadir{\"/mnt/my_storage/BitcoinData\"}; // TODO shouldn't be hard-coded\r\n+    auto [chainstate_files, chainstate_bytes] = GetDirectoryStats(datadir / \"chainstate\");\r\n+    auto [index_files, index_bytes] = GetDirectoryStats(datadir / \"blocks\" / \"index\");\r\n+\r\n+    LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false,\r\n+                   \"%s%s: new best=%s height=%d version=0x%08x log2_work=%f tx=%lu date='%s' progress=%f cache=%.1fMiB(%utxo) chainstate=%zu files/%zu bytes index=%zu files/%zu bytes%s\\n\",\r\n                    prefix, func_name,\r\n                    tip->GetBlockHash().ToString(), tip->nHeight, tip->nVersion,\r\n                    log(tip->nChainWork.getdouble()) / log(2.0), tip->m_chain_tx_count,\r\n@@ -2962,6 +2989,8 @@ static void UpdateTipLog(\r\n                    chainman.GuessVerificationProgress(tip),\r\n                    coins_tip.DynamicMemoryUsage() * (1.0 / (1 << 20)),\r\n                    coins_tip.GetCacheSize(),\r\n+                   chainstate_files, chainstate_bytes,\r\n+                   index_files, index_bytes,\r\n                    !warning_messages.empty() ? strprintf(\" warning='%s'\", warning_messages) : \"\");\r\n }\r\n\r\n ```\r\n\r\n```patch\r\nFrom 76d866de450e30bd60edddd221a64266fb6488da Mon Sep 17 00:00:00 2001\r\nFrom: =?UTF-8?q?L=C5=91rinc?= <pap.lorinc@gmail.com>\r\nDate: Tue, 4 Nov 2025 18:07:59 +0100\r\nSubject: [PATCH] compact after each block connection\r\n\r\n---\r\n src/dbwrapper.cpp  | 7 ++++++-\r\n src/dbwrapper.h    | 2 ++\r\n src/txdb.h         | 1 +\r\n src/validation.cpp | 2 ++\r\n 4 files changed, 11 insertions(+), 1 deletion(-)\r\n\r\ndiff --git a/src/dbwrapper.cpp b/src/dbwrapper.cpp\r\nindex fe5f9cb0893d7..8e2be54f35fd3 100644\r\n--- a/src/dbwrapper.cpp\r\n+++ b/src/dbwrapper.cpp\r\n@@ -245,7 +245,7 @@ CDBWrapper::CDBWrapper(const DBParams& params)\r\n\r\n     if (params.options.force_compact) {\r\n         LogInfo(\"Starting database compaction of %s\", fs::PathToString(params.path));\r\n-        DBContext().pdb->CompactRange(nullptr, nullptr);\r\n+        CompactFull();\r\n         LogInfo(\"Finished database compaction of %s\", fs::PathToString(params.path));\r\n     }\r\n\r\n@@ -348,6 +348,11 @@ bool CDBWrapper::IsEmpty()\r\n     return !(it->Valid());\r\n }\r\n\r\n+void CDBWrapper::CompactFull()\r\n+{\r\n+    DBContext().pdb->CompactRange(nullptr, nullptr);\r\n+}\r\n+\r\n struct CDBIterator::IteratorImpl {\r\n     const std::unique_ptr<leveldb::Iterator> iter;\r\n\r\ndiff --git a/src/dbwrapper.h b/src/dbwrapper.h\r\nindex b9b98bd96ade3..8aba4feb08e6c 100644\r\n--- a/src/dbwrapper.h\r\n+++ b/src/dbwrapper.h\r\n@@ -284,6 +284,8 @@ class CDBWrapper\r\n         ssKey2 << key_end;\r\n         return EstimateSizeImpl(ssKey1, ssKey2);\r\n     }\r\n+\r\n+    void CompactFull();\r\n };\r\n\r\n #endif // BITCOIN_DBWRAPPER_H\r\ndiff --git a/src/txdb.h b/src/txdb.h\r\nindex ea0cf9d77e596..394993fa5264a 100644\r\n--- a/src/txdb.h\r\n+++ b/src/txdb.h\r\n@@ -56,6 +56,7 @@ class CCoinsViewDB final : public CCoinsView\r\n\r\n     //! @returns filesystem path to on-disk storage or std::nullopt if in memory.\r\n     std::optional<fs::path> StoragePath() { return m_db->StoragePath(); }\r\n+    void CompactFull() const { m_db->CompactFull(); }\r\n };\r\n\r\n #endif // BITCOIN_TXDB_H\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex cc68023b1e7dc..b6e796d539357 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -3027,6 +3027,8 @@ void Chainstate::UpdateTip(const CBlockIndex* pindexNew)\r\n             }\r\n         }\r\n     }\r\n+    m_blockman.m_block_tree_db->CompactFull();\r\n+    this->CoinsDB().CompactFull();\r\n     UpdateTipLog(m_chainman, coins_tip, pindexNew, __func__, \"\",\r\n                  util::Join(warning_messages, Untranslated(\", \")).original);\r\n }\r\n```\r\n\r\n</details>\r\n\r\nRunning a before/after `reindex-chainstate` and plotting the on-disk size of the chainstate index for every block shows that the PR reduces the UTXO index by roughly 222MB (2%).\r\n\r\n<details>\r\n<summary>instrumented benchmark patch</summary>\r\n\r\n```\r\nCOMMITS=\"76d866de450e30bd60edddd221a64266fb6488da fd69291daff5cee0763023203a24d52cd7aab183\"; \\\r\nSTOP=921129; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n(echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 1 \\\r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n  --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n76d866de45 compact after each block connection\r\nfd69291daf leveldb: remove bloom filters from leveldb\r\n\r\nreindex-chainstate | 921129 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 76d866de450e30bd60edddd221a64266fb6488da)\r\n  Time (abs ≡):        56611.911 s               [User: 45475.199 s, System: 5006.131 s]\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = fd69291daff5cee0763023203a24d52cd7aab183)\r\n  Time (abs ≡):        53522.995 s               [User: 41015.776 s, System: 4894.659 s]\r\n\r\nRelative speed comparison\r\n        1.06          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 76d866de450e30bd60edddd221a64266fb6488da)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = fd69291daff5cee0763023203a24d52cd7aab183)\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"4500\" height=\"3600\" alt=\"chainstate_growth\" src=\"https://github.com/user-attachments/assets/e3196d2c-0155-463a-a7e5-db42b6fe0844\" />\r\n(note: image will be moved to a comment later)\r\n\r\n### Full validation\r\n\r\nTo help with reproducibility, the first commit introduces a slight regression to demonstrate the need for the second commit.\r\n\r\nWith BIP30 checks still active and without LevelDB bloom filters, the first 230k blocks validate ~7% slower.\r\n<details>\r\n<summary>7% slower reindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"2b9c3511986bb2f55310dd5fe7b6367fcc63e44e 166d35713cf61986bb4b37283cb8b001ad013771\"; STOP=230000; DBCACHE=450; CC=gcc; CXX=g++; BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && (echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&hyperfine   --sort command   --runs 2   --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\"   --parameter-list COMMIT ${COMMITS// /,}   --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\"   --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\"   \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n2b9c351198 Merge bitcoin/bitcoin#33768: refactor: remove dead branches in `SingletonClusterImpl`\r\n166d35713c leveldb: remove bloom filters from leveldb\r\n\r\nreindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n  Time (mean ± σ):     170.615 s ±  0.468 s    [User: 186.278 s, System: 10.035 s]\r\n  Range (min … max):   170.285 s … 170.946 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 166d35713cf61986bb4b37283cb8b001ad013771)\r\n  Time (mean ± σ):     181.904 s ±  0.534 s    [User: 196.567 s, System: 10.482 s]\r\n  Range (min … max):   181.526 s … 182.281 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n        1.07 ±  0.00  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 166d35713cf61986bb4b37283cb8b001ad013771)\r\n```\r\n\r\n</details>\r\n\r\nWith BIP30 buried behind assumevalid and without LevelDB bloom filters, the first 230k blocks validate ~33% faster.\r\n\r\n<details>\r\n<summary>33% faster reindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"2b9c3511986bb2f55310dd5fe7b6367fcc63e44e 060a83df97a84e39a44a7f4a8ea27512d2e7b008\"; \\\r\nSTOP=230000; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n(echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2\r\n | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $\r\nBASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n  --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/deb\r\nug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n2b9c351198 Merge bitcoin/bitcoin#33768: refactor: remove dead branches in `SingletonClusterImpl`\r\n060a83df97 validation: bury bip30 checks behind assumevalid\r\n\r\nreindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n  Time (mean ± σ):     170.827 s ±  0.718 s    [User: 186.351 s, System: 10.223 s]\r\n  Range (min … max):   170.319 s … 171.334 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 060a83df97a84e39a44a7f4a8ea27512d2e7b008)\r\n  Time (mean ± σ):     128.569 s ±  0.168 s    [User: 143.057 s, System: 10.436 s]\r\n  Range (min … max):   128.449 s … 128.688 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.33 ±  0.01  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 060a83df97a84e39a44a7f4a8ea27512d2e7b008)\r\n```\r\n\r\n</details>\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-11-07T12:43:23Z",
      "updated_at": "2025-12-16T15:28:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33817",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 26036,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096823806,
      "number": 34060,
      "title": "test: fix race condition in p2p_v2_misbehaving.py peerid assertion",
      "body": "Remove the hard-coded peer id from the debug message in `p2p_v2_misbehaving.py`.\r\n\r\nasyncio's non-deterministic task scheduling might cause [peer2](https://github.com/bitcoin/bitcoin/blob/938d7aacabd0bb3784bb3e529b1ed06bb2891864/test/functional/p2p_v2_misbehaving.py#L181)'s connection to happen before [peer1](https://github.com/bitcoin/bitcoin/blob/938d7aacabd0bb3784bb3e529b1ed06bb2891864/test/functional/p2p_v2_misbehaving.py#L179)'s. since we test that peer2 [remains connected](https://github.com/bitcoin/bitcoin/blob/938d7aacabd0bb3784bb3e529b1ed06bb2891864/test/functional/p2p_v2_misbehaving.py#L182), any disconnection must originate from peer1, making the specific peer id not necessary for test correctness. so we can remove the hard coded peer id from the expected debug log message.\r\n\r\nFixes #34035.",
      "state": "closed",
      "user": "stratospher",
      "created_at": "2025-12-12T15:05:48Z",
      "updated_at": "2025-12-16T13:56:01Z",
      "merged_at": "2025-12-16T13:56:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34060",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 879,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2237582918,
      "number": 31508,
      "title": "Fix typos and improve consistency in documentation",
      "body": "This pull request addresses several typographical errors and ensures consistency in terminology across the Bitcoin Core documentation.\r\n\r\n#### Changes include:\r\n- Replacing \"block chain\" with the correct term \"blockchain\" in multiple documentation files.\r\n- Correcting the article usage from \"a\" to \"an\" where necessary, specifically before \"XP\".\r\n- Minor grammatical improvements, such as adding \"an\" instead of \"a\" in contexts where the following word starts with a vowel sound.\r\n\r\n#### Affected files:\r\n- `doc/JSON-RPC-interface.md`\r\n- `doc/REST-interface.md`\r\n- `doc/release-notes/release-notes-0.13.2.md`\r\n- `doc/release-notes/release-notes-0.12.1.md`\r\n- `doc/release-notes/release-notes-0.6.3.md`\r\n- `doc/release-notes/release-notes-0.8.0.md`\r\n- `doc/release-notes/release-notes-0.9.2.md`\r\n\r\nThese changes help maintain the clarity and professionalism of the Bitcoin Core documentation, ensuring more accurate and consistent terminology throughout.\r\n",
      "state": "closed",
      "user": "Dimitrolito",
      "created_at": "2024-12-16T15:07:03Z",
      "updated_at": "2025-12-16T12:30:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31508",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1007,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2235356460,
      "number": 31501,
      "title": "Fix Broken Link in bitcoinconsensus.h Documentation",
      "body": "### Motivation\r\n\r\nThe `bitcoinconsensus.h` file contained a broken link to the Bitcoin Core GitHub repository. This outdated link (`https://github.com/bitcoin/bitcoin/blob/0.10/src/script/bitcoinconsensus.h`) led to a non-functional page. To improve the documentation's accuracy and usability, the link was updated to a valid URL (`https://github.com/bitcoin/bitcoin/blob/v0.10.0/src/script/bitcoinconsensus.h`).\r\n\r\n### How This Improves Bitcoin Core\r\n\r\nThis change improves the developer experience by ensuring that the documentation provides accurate and functional links, preventing confusion or misdirection when navigating the repository.\r\n\r\n### Testing\r\n\r\nThis change was verified manually:\r\n- The new URL was tested to confirm it resolves correctly to the intended file.\r\n- No further code changes were made, and the documentation update does not impact runtime or functionality.\r\n\r\n### Additional Notes\r\n\r\n- This is a minor documentation fix, so no new unit tests or functional tests are required.\r\n- The change does not introduce new dependencies or alter existing functionality.\r\n",
      "state": "closed",
      "user": "futreall",
      "created_at": "2024-12-14T20:27:33Z",
      "updated_at": "2025-12-16T12:30:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31501",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2237793110,
      "number": 31510,
      "title": "test: fix TestShell initialization for cmake build directory",
      "body": "The cmake build system creates a `build/` directory and writes `config.ini` there, along with a tree of symlinks to `test_framework` and all the individual test files. This symlink breaks the fix in https://github.com/bitcoin/bitcoin/pull/30714 which resolved those symlinks, causing the `TestShell` to initialize in the original test directory, where `config.ini` does not exist.\r\n\r\nThe fix in this patch is simply not to resolve the symlinks, so `TestShell` uses:\r\n\r\n- `/path/to/bitcoin/build/test/config.ini`\r\n- `/path/to/bitcoin/build/test/cache`\r\n\r\nNote that any arguments like `configfile` and `cachedir` that are passed to `setup()` will be **too late to work around the issue** since the constructor `TestShell()` is invoked with a file path first and that path determines config file and cache location.\r\n\r\nTest script:\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n\r\n# USAGE: shell.py /path/to/bitcoin/repo\r\n\r\nfrom pathlib import Path\r\nimport sys\r\nREPO = Path(sys.argv.pop())\r\nsys.path.insert(0, f\"{REPO / 'build' / 'test' / 'functional'}\")\r\nfrom test_framework.test_shell import TestShell\r\n\r\nTestShell().setup(num_nodes=1, setup_clean_chain=True)\r\nTestShell().shutdown()\r\n```\r\n\r\nFails on master:\r\n\r\n```\r\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/matthewzipkin/Desktop/work/bitcoin/test/config.ini'\r\n```\r\n",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2024-12-16T16:37:22Z",
      "updated_at": "2025-12-16T12:30:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31510",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1390,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2929620815,
      "number": 33661,
      "title": "test: Add test on skip heights in CBlockIndex",
      "body": "The skip height values, used by `CBlockIndex::BuildSkip()` and `GetSkipHeight` are not tested and not well documented. (noticed while reviewing #33515, recently merged).\r\n\r\nThe motivation is to document the skip value computation through a test.\r\n\r\nThe first commit adds a test for the properties of the distribution of skip values, namely that they have non-uniform distribution: most values are small but there are some large ones as well.\r\n\r\nThe second commit adds low-level tests to the `GetSkipHeight()` internal method. The tests are low level, thus of limited value, and the commit also touches the non-test code minimally (to make the method accessible). Therefore this commit has lower priority.\r\n",
      "state": "open",
      "user": "optout21",
      "created_at": "2025-10-20T12:08:37Z",
      "updated_at": "2025-12-16T11:14:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33661",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3094089767,
      "number": 34051,
      "title": "log: Remove brittle and confusing LogPrintLevel",
      "body": "`LogPrintLevel` has many issues:\r\n\r\n* It encourages to log several levels in one source location. This is problematic, because all levels (even warnings and errors) will be rate limited equally for the same location.\r\n* Its warning and error logs are specially formatted compared to all other warning and error logs in the codebase, making them harder to spot (both in the debug log and in the code).\r\n* It is verbose to type and read.\r\n* It is confusing, because the majority of code uses the `Log$LEVEL(...)` macros. Having less ways to achieve the same makes the code more consistent and easier to review.\r\n\r\nFix all issues by removing it",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-11T19:08:46Z",
      "updated_at": "2025-12-16T08:20:57Z",
      "merged_at": "2025-12-14T12:30:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34051",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 689,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2798650755,
      "number": 33303,
      "title": "ci: Checkout latest merged pulls",
      "body": "Currently, the `actions/checkout@v5` checks out pull requests merged against master, which is what we want.\r\n\r\nHowever, it checks out ancient/stale merge commits on a re-run. This is documented (https://docs.github.com/en/actions/how-tos/manage-workflow-runs/re-run-workflows-and-jobs):\r\n\r\n>  Re-run workflows [...] will also use the same GITHUB_SHA (commit SHA) and GITHUB_REF (git ref) of the original event that triggered the workflow run.\r\n\r\nFor example:\r\n\r\n* https://github.com/bitcoin/bitcoin/actions/runs/17458152407/job/49579638898?pr=29641#step:9:914 compiles with IPC=ON, even though latest master is at ed2ff3c63d83e275b0785a695fa4db38870abf1a\r\n* https://github.com/bitcoin/bitcoin/pull/32989#issuecomment-3133536724 (example explained in comment)\r\n\r\nThis is problematic, because:\r\n\r\n* Unrelated CI failures and intermittent issues, which are fixed or worked around in latest master can not be cleaned by re-running the task. The author has to actively go out and (force-)push the branch, invalidating review.\r\n* It is odd to have a recent CI run, but it uses code and config from the past.\r\n* Detecting silent merge conflicts by re-running the CI task is impossible.\r\n\r\nFix all issues by checking out the latest merged state of the pull request. The behavior is unchanged for non-pull-request actions. This patch changes the \"re-run\" default behaviour. Forcing it to use the new state instead of running the old state again.\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-09-04T09:25:51Z",
      "updated_at": "2025-12-16T08:11:36Z",
      "merged_at": "2025-09-09T09:16:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33303",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1471,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1884409624,
      "number": 30157,
      "title": "Fee Estimation via Fee rate Forecasters",
      "body": "This PR is the complete implementation of #30392 it aim to improve Bitcoin Core Fee Estimation by:\r\n\r\n- **Reducing Overestimation**: Address and mitigate the overestimation issues present in the current `BlockPolicyEstimator`. This issue has been documented and acknowledged by various sources:\r\n  - [See Delving bitcoin posts](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8?u=ismaelsadeeq)\r\n  - [Rene-pickhard Research](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12?u=ismaelsadeeq)\r\n- **Mempool Awareness**: Enable the fee estimator to be aware of the mempool state, allowing it to react faster and more accurately to rapidly changing fee market conditions, when targeting very short timeframes.\r\n- **Empowering Node Users**: Allow node users to be self-sovereign by using their node's estimates, reducing reliance on third-party fee estimations.\r\n- **Simplifying Strategy Integration**: Simplify the process of adding new fee estimation strategies in the future.\r\n\r\nThe detailed design document for this PR can be found [here](https://gist.github.com/ismaelsadeeq/bcfa6b1216eef10076665551d9885722). \r\n\r\nPlease note that the design is subject to change as we refine the approach.\r\n\r\n---\r\n\r\nThis is a collaborative effort with @willcl-ark and incorporates insights from other contributors.",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2024-05-23T11:44:09Z",
      "updated_at": "2025-12-16T00:33:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30157",
      "labels": [
        "TX fees and policy",
        "Needs Conceptual Review"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1397,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2609011180,
      "number": 32791,
      "title": "checkqueue: implement a new scriptcheck worker pool with atomic variables",
      "body": "    TL;DR\r\n    This patchset proposes a new design of scriptcheck worker pool with\r\n    atomic variables to leverage more cpu resource on a machine which the\r\n    current mutex version cannot. Achieve about 45% boost in performance.\r\n    \r\n    Main Idea:\r\n    \r\n    The current version of worker pool use mutex to do the synchronization\r\n    between worker threads, which makes the performance downgrade after\r\n    worker_threads_num >= 14. One root cause is the high contention on the\r\n    queue's mutex among worker threads. Workers repeatedly sleep and be woken\r\n    up in short time, leading to heavy context switching.\r\n    The idea is to use atomic variables to protect the queue, workers\r\n    acquire it and increase it with a batch_size(a small number). This\r\n    significantly reduces context switching.\r\n    \r\n    Implementation\r\n    \r\n    To implement it, below changes are made:(enabled in atomic mode)\r\n    - atomic<int> nNext is used to indicate the next available indice in the\r\n      queue\r\n    - atomic<int> nTodo2 is used to indicate the number of tasks left\r\n    - nBatchSize is the batch size of tasks everytime a worker consumes\r\n      it should be small to keep workload balance among workers\r\n    - m_mutex is still used, to protect m_result and conditional vars\r\n    - fAtomic to indicate which mode is enabled\r\n    - about the queue:\r\n    \r\n      - the queue is used as queue, not stacks any more\r\n      - the queue is 'add only', which means only adding tasks to it, don't\r\n        remove used tasks.\r\n    \r\n        the above two are a must to make this idea achievable, and the\r\n        second sacrifices space\r\n    \r\n      - start the workers only after all the tasks have been added to the\r\n        queue\r\n    \r\n        this is a trade-off to make the implementaion simple, a worker can\r\n        compare nNext + nBatchSize to queue.size() to find if there are\r\n        tasks undone in the queue, otherwise another atomic<int> tail is\r\n        needed, and race condition may exist in this way (need more\r\n        investigation). From my test, it's not 100% to say this is a\r\n        'trade-off' since it also brings something good, pros && cons:\r\n        - pros:\r\n            1. no contention among producer and consumers when adding tasks\r\n               to the queue\r\n            2. the adding period is very short compared to the verification\r\n               period\r\n        - cons:\r\n            1. the workers start later\r\n    \r\n    For details, please refer to the worker handler code\r\n    \r\n    Tests:\r\n    \r\n    - Numbers\r\n      - For blocks/s numbers\r\n        `./build/bin/bench_bitcoin --filter=ConnectBlockMixedEcdsaSchnor`\r\n      - For cpu usage numbers\r\n        `NANOBENCH_ENDLESS=ConnectBlockAllEcdsa ./build/bin/bench_bitcoin --filter=ConnectBlockAllEcdsa`\r\n    \r\n      - Some data is missing because the machine was billed by time, and there wasn't\r\n        enough time to complete all measurements.\r\n      - Some cells contain a range instead of a single value due to high fluctuations\r\n      - The numbers represent the average of multiple test runs.\r\n    \r\n               |     mutex verion       |   atomic version\r\n    nr_workers | blocks/s  | cpu usage  | blocks/s  | cpu usage2\r\n    -----------|-----------|------------|-----------|-------------\r\n    0          | 4.22      | 100%       | 4.2       | 100%\r\n    1          | 8.23      | 198%       | 8         | 191.3%\r\n    2          | 12.08     | 293.7%     | 11.6      | 276%\r\n    3          | 16        | 386.7%     | 14.9      | 354.5%\r\n    4          | 19.8      | 476.3%     |           |\r\n    5          | 23.12     | 565.4%     |           |\r\n    6          | 27.3      | 654%       | 23        | 560%\r\n    7          | 28.5      | 738%       |           |\r\n    8          | 33.8      | 809%       |           |\r\n    9          | 33.5      | 868%       | 28.5      | 730%\r\n    10         | 37.4      | 910%       | 30.5      | 777%\r\n    11         | 33~40     | 880%~928%  | 32        | 825%\r\n    12         | 22~39     | 860%~925%  | 32.5      | 830%\r\n    13         | 27.8~37   | 700%~913%  | 34.8      | 928%\r\n    15         | 24.8~38.9 | 640%~719%  | 38        | 1000%\r\n    19         | 18~23     | 370%~510%  | 41        | 1161%\r\n    22         | 7~18      | 270%~400%  |           |\r\n    25         | 6.4       | 260%       | 46        | 1400%\r\n    30         | 5         | 270%       | 49        | 1560%\r\n    60         | 5         | 280%       | 50~58     | 2100%\r\n    \r\n    - Env:\r\n     A virtual machine on cloud\r\n       Architecture:          x86_64\r\n       CPU op-mode(s):        32-bit, 64-bit\r\n       Address sizes:         46 bits physical, 48 bits virtual\r\n       Byte Order:            Little Endian\r\n       CPU(s):                64\r\n       On-line CPU(s) list:   0-63\r\n       Vendor ID:             GenuineIntel\r\n       Model name:            Intel Xeon Processor (Cascadelake)\r\n       CPU family:            6\r\n       Model:                 85\r\n       Thread(s) per core:    2\r\n       Core(s) per socket:    16\r\n       Socket(s):             2\r\n       Stepping:              6\r\n       BogoMIPS:              5985.93\r\n     Virtualization features:\r\n       Hypervisor vendor:     KVM\r\n       Virtualization type:   full\r\n     Caches (sum of all):\r\n       L1d:                   2 MiB (64 instances)\r\n       L1i:                   2 MiB (64 instances)\r\n       L2:                    128 MiB (32 instances)\r\n       L3:                    32 MiB (2 instances)\r\n     NUMA:\r\n       NUMA node(s):          2\r\n       NUMA node0 CPU(s):     0-31\r\n       NUMA node1 CPU(s):     32-63\r\n    \r\n    Signed-off-by: Hao Xu <hao.xu@linux.dev>\r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-06-21T12:58:58Z",
      "updated_at": "2025-12-16T00:31:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32791",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5728,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2280235009,
      "number": 31664,
      "title": "Fees:  add Fee rate Forecaster Manager",
      "body": "- This PR implements the core component of #30392, introducing a new fee rate forecasting module. \r\nThe primary addition is a `ForecasterManager` that coordinates multiple forecasting strategies to be able to provide better transaction fee rate predictions.\r\n\r\n\r\n### Key Changes  \r\n\r\n1. **Addition of Fee Rate Forecasting Utility Structures**  \r\n   - `Forecaster` abstract class, serving as the base class for all fee rate forecasters.\r\n   - `ForecastResult` (the response from a `Forecaster`) with all metadata.  \r\n   - `ForecastType` enum, identify and distinguish forecasters.    \r\n\r\n2. **Introduce `FeeRateForecasterManager` class**  \r\n   - Adds the `FeeRateForecasterManager` class, responsible for managing all fee rate forecasters, including `CBlockPolicyEstimator`, which is now a forecaster.  \r\n   - Updates the node context to hold a unique pointer to `FeeRateForecasterManager` instead of `CBlockPolicyEstimator`.  \r\n   - Changes `CBlockPolicyEstimator` instance from `unique_ptr` to a `shared_pointer`, allowing it to be registered in the validation interface without requiring explicit unregistration during shutdown (current master behaviour). Registering for `CBlockPolicyEstimator` flushes also get a `shared_pointer`.  \r\n   - Exposes a raw pointer of `CBlockPolicyEstimator` through `FeeRateForecasterManager` for compatibility with `estimateSmartFee`, friends, and node interfaces.  \r\n   -   Modifies `CBlockPolicyEstimator` to inherit from the `Forecaster` class and implement the pure abstract classes\r\n\r\n3. **Introduce `MempoolForecaster` class**  \r\n   - Adds the `MempoolForecaster`, which forecast the fee rate required for a transaction to confirm as soon as possible. It generates a block template and returns the 75th and 50th percentile fee rates  as low-priority and high-priority fee rate forecasts.  \r\n   - Implements caching for the last fee rate forecast, using a 30-second rate limit to avoid frequent block generation via the block assembler.\r\n\r\n\r\nThe `FeeRateForecasterManager` now includes a method `ForecastFeeRateFromForecasters`. This method polls forecasts from all registered forecasters and returns the lowest value. This behavior aligns with discussions and research outlined in [this post](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703).  But the primary aim of the `FeeRateForecasterManager` is to be able to perform sanity checks and potentially apply heuristics to determine the most appropriate fee rate forecast from polled forecasters, for now it just return the lowest.\r\n\r\nThis PR also add unit tests for the classes.\r\n\r\n\r\n\r\nIn Draft because it depends on #33218\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-01-15T21:42:52Z",
      "updated_at": "2025-12-15T23:08:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31664",
      "labels": [
        "TX fees and policy",
        "Review club"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2686,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2491389764,
      "number": 32387,
      "title": "ipc: add windows support",
      "body": "\n<!-- begin based-on -->\n**This is based on https://github.com/bitcoin-core/libmultiprocess/pull/231.** The non-base commits are:\n\n- [`3d0737720ae6` ipc: add windows support](https://github.com/bitcoin/bitcoin/pull/32387/commits/3d0737720ae6bbd2c3eb4382e41fa49dd3d727d9)<!-- end -->\n\nThese changes make IPC features work on windows, resolving https://github.com/bitcoin-core/libmultiprocess/issues/53 and https://github.com/bitcoin-core/libmultiprocess/issues/114\n\nPR is a draft since this is less of a priority compared to other multiprocess PR's (see tracking issue #28722). Also it would probably make sense to split this up into separate commits. But the code is working and clean, and this could be reviewed and tested.\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-30T12:43:38Z",
      "updated_at": "2025-12-15T21:31:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32387",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 857,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3077476296,
      "number": 34022,
      "title": "validation: Remove min_pow_checked arg in ProcessNewBlockHeaders",
      "body": "It is always set to true, since its introduction in ed6cddd98e32263fc116a4380af6d66da20da990. It is supposed to \"...ensure that all call-sites which might cause a new header to be accepted into memory have to grapple with the question of whether the header is safe to accept, or needs further validation\". I think it has surpassed its usefulness at this point for this function. Headers presync is a well-established concept, and developers imitate existing call sites, without necessarily considering its nested implication, calling its usefulness into question. The path also lacks unit and fuzz tests.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-12-06T12:20:30Z",
      "updated_at": "2025-12-15T20:28:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34022",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 669,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3090768654,
      "number": 34046,
      "title": "bench: run `FindByte` across block-sized buffer",
      "body": "The benchmark was updated to start from different file positions and iterate with a stride of ~32kb to exercise a few \"random\" places.\r\n\r\nFound while reviewing https://github.com/bitcoin/bitcoin/pull/34044\r\n\r\nNote: this PR started off as making `FindByte` more realistic, but based on https://github.com/bitcoin/bitcoin/pull/34044#issuecomment-3651042162 I decided to remove it, and after https://github.com/bitcoin/bitcoin/pull/34046#issuecomment-3651776469 it was reverted to its original state",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-10T21:12:11Z",
      "updated_at": "2025-12-15T18:06:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34046",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 544,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1678271840,
      "number": 29247,
      "title": "CAT in Tapscript (BIP-347)",
      "body": "# CAT in Tapscript\r\n\r\nThis PR provides the necessary code to enable the opcode OP\\_CAT in Tapscript as specified in [BIP-347: OP\\_CAT in Tapscript](https://github.com/bitcoin/bips/blob/master/bip-0347.mediawiki) and [BIN-2024-0001](https://github.com/bitcoin-inquisition/binana/blob/master/2024/BIN-2024-0001.md),\r\n\r\n**Important:** This PR *does not* include miner activation functionality. This means that merging this PR into bitcoin-core will not make OP\\_CAT functional in Bitcoin.\r\nIf this PR is merged it is *not* a signal of community consensus around activating CAT nor be read as a portent about the activation process or timeline.\r\nThe PR is not a stand-in for consensus around such decisions.\r\n\r\nThis PR includes:\r\n\r\n- An implementation of the Tapscript opcode OP\\_CAT along with the flags `SCRIPT_VERIFY_OP_CAT` and `SCRIPT_VERIFY_DISCOURAGE_OP_CAT`.\r\n- Integration and unit tests which ensure that our CAT  implementation works as expected. This includes ensuring that CAT never uses more that 520 bytes of stack memory. A full description of what these tests cover is given below.\r\n- An improvement to `src/test/script_tests.cpp` JSON script format enabling the rapid creation of new Tapscript unit tests.\r\n\r\n## Activation on Bitcoin-inquisition (signet)\r\n\r\n[Bitcoin-inquisition PR 37](https://github.com/bitcoin-inquisition/bitcoin/pull/39) which contained our implementation of OP\\_CAT [was merged into bitcoin-inquisition (signet) on Apr 25 2024](https://github.com/bitcoin-inquisition/bitcoin/pull/39), released as [bitcoin-inquisition release 25.2 on Apr 26 2024.](https://github.com/bitcoin-inquisition/bitcoin/releases/tag/v25.2-inq) and activated in bitcoin-inquisition Apr 30 2024. The bitcoin-inquisition PR was reviewed in the PR review club [(transcript of discussion)](https://bitcoincore.reviews/bitcoin-inquisition-39). Since Apr 30 2024 there have been many OP\\_CAT transactions created and spent on signet.\r\n\r\nThe code merged into bitcoin-inquisition differs from this PR, as we have removed the consensus logic which was used to activate it on signet.\r\n\r\n## OP\\_CAT Tapscript Implementation\r\n\r\nWe implement OP\\_CAT as a new Tapscript op code by redefining the opcode OP\\_SUCCESS126 (126 in decimal and 0x7e in hexadecimal). This is the same opcode value used by the original OP_CAT.\r\n\r\nWhen evaluated, the OP\\_CAT instruction:\r\n\r\n1. Pops the top two values off the stack,\r\n2. concatenates the popped values together in stack order,\r\n3. and then pushes the concatenated value on the top of the stack.\r\n\r\nOP\\_CAT fails if there are fewer than two values on the stack or if a concatenated value would have a combined size greater than the maximum script element size of 520 bytes.\r\n\r\nSee [BIP 347](https://github.com/bitcoin/bips/blob/master/bip-0347.mediawiki) for a deeper description.\r\n\r\n### Errors thrown\r\n\r\nIf evaluated OP\\_CAT can throw the following errors:\r\n\r\n- If at time of evaluation the stack has fewer than two elements we throw the error: `SCRIPT_ERR_INVALID_STACK_OPERATION`\r\n- If at time of evaluation the top two stack elements have a combined size greater than `MAX_SCRIPT_ELEMENT_SIZE` (520 bytes) we throw the error: `SCRIPT_ERR_PUSH_SIZE`.\r\n\r\n### Script verification flags\r\n\r\nWhile this PR does not contain any miner signaling and activation logic and can not activate OP\\_CAT, it does contain two flags which future activation logic could set to control activation of OP\\_CAT.\r\n\r\n- `SCRIPT_VERIFY_OP_CAT` IF a bitcoin node has this set to true, then it treat OP\\_CAT enabled for Tapscript. That is, OP\\_SUCCESS126 will be redefining to OP\\_CAT in Tapscript. If this was set to true at the consensus level this would cause a soft fork.\r\n\r\n`SCRIPT_VERIFY_DISCOURAGE_OP_CAT` When set to true, a node receiving any Tapscript transaction containing the opcode OP\\_CAT or OP\\_SUCCESS126 will reject the transaction throwing the error `SCRIPT_ERR_DISCOURAGE_OP_CAT` but not banning the node which relayed the transaction. This prevents nodes from relaying transactions with OP\\_CAT. This  is equivalent to the behavior of `SCRIPT_ERR_DISCOURAGE_OP_CAT = true` when `SCRIPT_VERIFY_OP_CAT = false` as OP\\_CAT is an OP\\_SUCCESS (OP\\_SUCCESS126).\r\n\r\nThis is how these two flags are intended to be used to ensure a smooth soft fork.\r\n\r\n| Stage | `SCRIPT_VERIFY OP_CAT` | `SCRIPT_VERIFY DISCOURAGE_OP_CAT` | Status |\r\n| --- | --- | --- | --- |\r\n| **1.Default** | False | True | This does not represent any change in behavior of the bitcoin-core node. |\r\n| **2.Upgrading** | True | True | OP\\_CAT is activating. |\r\n| **3.Upgraded** | True | False | It is clear that OP\\_CAT has been activated and the network has been upgraded. |\r\n\r\nThe flag `SCRIPT_ERR_DISCOURAGE_OP_CAT` provides a window of time for the network to fully activate, before nodes will relay or accept transactions containing OP\\_CAT in their mem pools.\r\n\r\n## Tests\r\n\r\nThis PR contains a suite of script tests to ensure that OP\\_CAT functions as expected. In the JSON script tests (`script_tests.json`), we test:\r\n\r\n- That if OP\\_CAT is not activated that there are no changes to bitcoin consensus.\r\n- That regardless of the activation or non-activation of OP\\_CAT in Tapscript, pre-Tapscript scripts, i.e. Bitcoin scripts, have no changes in behavior.\r\n- That OP\\_CAT when evaluated throws the expected error when there are less than two elements on the stack.\r\n- That OP\\_CAT when evaluated in a variety of circumstances and edge cases, successfully concatenates elements of the stack. This includes:\r\n  - multiple calls to OP\\_CAT in a row,\r\n  - evaluating OP\\_CAT inside of a IF conditional,\r\n  - evaluating OP\\_CAT on zero size stack elements, random and large stack elements,\r\n  - evaluating OP\\_CAT on values being moved to and from the alt stack,\r\n  - and checking that when evaluated OP\\_CAT concatenates the elements in the expected order.\r\n\r\nAll of these tests are designed to cover the happy path of OP\\_CAT, the various errors which OP\\_CAT can throw and all the corner cases between those two outcomes.\r\n\r\nAdditionally we include three tests outside of the JSON script tests.\r\n\r\n- `cat_simple` and `cat_empty_stack` are designed to test OP\\_CAT outside of the JSON serialization regime. Ensure that we catch bugs that we might miss in the JSON script tests due to a bug introduced at the JSON serialization layer.\r\n- `cat_dup_test` enumerates all stack element sizes from 1 to 522 bytes and then enumerates up to 10 repetitions of `OP\\_DUP OP\\_CAT`. It then tests if the stack element would exceed 520 bytes and if so did OP\\_CAT throw the error `SCRIPT_ERR_PUSH_SIZE`. This allows us to be certain that OP\\_CAT will not introduce any `OP\\_DUP OP\\_CAT` memory exhaustion attacks.\r\n\r\n### Better Tapscript tests in JSON script tests\r\n\r\nWhile writing these JSON script tests (`script_tests.json`) we ran into the following problem. The JSON script tests are simple and easy to write for pre-Tapscript scripts, but adding or changing a Tapscript test requires substantial work per test.\r\nConsider the following pre-tapscript test:\r\n\r\n```json\r\n[\"'aa' 'bb'\", \"CAT 0x4c 0x02 0xaabb EQUAL\", \"P2SH,STRICTENC\", \"DISABLED_OPCODE\", \"CAT disabled\"]\r\n```\r\n\r\nwhereas a Tapscript test for the same script (annotated with comments for better readability) would look like:\r\n\r\n```json\r\n[\r\n    [\r\n        \"aa\",\r\n        \"bb\",\r\n        \"7e4c02aabb87\", // output script\r\n        \"c0d6889cb081036e0faefa3a35157ad71086b123b2b144b649798b494c300a961d\", // control block\r\n        0.00000001\r\n    ],\r\n    \"\",\r\n    \"0x51 0x20 0x15048ed3a65748549c27b671936987093cf73a4c9cb18522a74fb9553060ca99\", // Tapscript output\r\n    \"P2SH,WITNESS,TAPROOT\",\r\n    \"OK\",\r\n    \"TAPSCRIPT CATs aa and bb together and checks if EQUAL to aabb\"\r\n]\r\n```\r\n\r\nComputing the Tapscript output, such as `0x51 0x20 0x15048ed3a65748549c27b671936987093cf73a4c9cb18522a74fb9553060ca99`, requires writing custom code and running it for each test. The same is true for the Tapscript control block, such as `c0d6889cb081036e0faefa3a35157ad71086b123b2b144b649798b494c300a961d`. If a test is changed or updated new outputs and control blocks must be computed. The complexity of doing this is likely the reason that no one has added any Tapscript tests to JSON script tests until this PR.\r\n\r\nIn this PR we address this issue by adding the following improvements to JSON script tests:\r\n\r\n- Adding simple macros (`\"#SCRIPT#` and `#CONTROLBLOCK#`) that allow the script test parser to automatically generate and inject a valid Tapscript output and control block to be computed automatically from the JSON script.\r\n- Allowing Tapscript scripts to use the human readable strings like pre-script scripts by marking the location of the script in the witness stack using `#SCRIPT#`. This transforms the unreadable script `7e4c02aabb87` into `#SCRIPT# CAT 0x4c 0x02 0xaabb EQUAL`.\r\n\r\nThis results in the following JSON script test which is far easier to write and easier to read.\r\n\r\n```json\r\n[\r\n    [\r\n        \"aa\",\r\n        \"bb\",\r\n        \"#SCRIPT# CAT\",\r\n        \"#CONTROLBLOCK#\",\r\n        0.00000001\r\n    ],\r\n    \"\",\r\n    \"0x51 0x20 #TAPROOTOUTPUT#\",\r\n    \"P2SH,WITNESS,TAPROOT,OP_CAT\",\r\n    \"OK\",\r\n    \"TAPSCRIPT Test of OP_CAT flag by calling CAT on two elements. TAPSCRIPT_OP_CAT flag is set so CAT is executed.\"\r\n],\r\n```\r\n  \r\n",
      "state": "open",
      "user": "arminsabouri",
      "created_at": "2024-01-14T22:40:42Z",
      "updated_at": "2025-12-15T17:15:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29247",
      "labels": [
        "Consensus",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 4,
        "positive_keywords": 1,
        "text_length": 9301,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2949481055,
      "number": 33711,
      "title": "transaction: Adding script witness to ToString for CTxIn",
      "body": "When debugging and trying to print the details of a `CTxIn` using the `ToString`, we get the `scriptSig`, but would also help to get the witness. ",
      "state": "open",
      "user": "Ataraxia009",
      "created_at": "2025-10-27T05:19:54Z",
      "updated_at": "2025-12-15T16:17:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33711",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 203,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2914847026,
      "number": 33629,
      "title": "Cluster mempool",
      "body": "[Reopening #28676 here as a new PR, because GitHub is slow to load the page making it hard to scroll through and see comments.  Also, that PR was originally opened with a prototype implementation which has changed significantly with the introduction of `TxGraph`.]\r\n\r\nThis is an implementation of the [cluster mempool proposal](https://delvingbitcoin.org/t/an-overview-of-the-cluster-mempool-proposal/393).\r\n\r\nThis branch implements the following observable behavior changes:\r\n\r\n - Maintains a partitioning of the mempool into connected clusters (via the `txgraph` class), which are limited in vsize to 101 kvB by default, and limited in count to 64 by default.\r\n - Each cluster is sorted (\"linearized\") to try to optimize for selecting highest-feerate-subsets of a cluster first\r\n - Transaction selection for mining is updated to use the cluster linearizations, selecting highest feerate \"chunks\" first for inclusion in a block template.\r\n - Mempool eviction is updated to use the cluster linearizations, selecting lowest feerate \"chunks\" first for removal.\r\n - The RBF rules are updated to: (a) drop the requirement that no new inputs are introduced; (b) change the feerate requirement to instead check that the feerate diagram of the mempool will strictly improve; (c) replace the direct conflicts limit with a directly-conflicting-clusters limit.\r\n - The CPFP carveout rule is eliminated (it doesn't make sense in a cluster-limited mempool)\r\n - The ancestor and descendant limits are no longer enforced.\r\n - New cluster count/cluster vsize limits are now enforced instead.\r\n - Transaction relay now uses chunk feerate comparisons to determine the order that newly received transactions are announced to peers.\r\n\r\nAdditionally, the cached ancestor and descendant data are dropped from the mempool, along with the multi_index indices that were maintained to sort the mempool by ancestor and descendant feerates. For compatibility (eg with wallet behavior or RPCs exposing this), this information is now calculated dynamically instead.",
      "state": "closed",
      "user": "sdaftuar",
      "created_at": "2025-10-14T19:50:07Z",
      "updated_at": "2025-12-15T15:34:02Z",
      "merged_at": "2025-11-25T10:36:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33629",
      "labels": [
        "TX fees and policy",
        "Validation",
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2052,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2760232844,
      "number": 33228,
      "title": "util: Address various issues in AllocateFileRange",
      "body": "Fixes several bugs in AllocateFileRange.\r\n\r\nNot a real fix for #33128, but a workaround for the issue.\r\n\r\nPotentially might fix #28552 too, but I don't have a way to reproduce that. (After digging into Apple's XNU code, it looks too buggy to try to use `F_PREALLOCATE` at all IMO; for reference: [XNU kernel code](https://github.com/apple-oss-distributions/xnu/blob/e3723e1f17661b24996789d8afc084c0c3303b26/bsd/kern/kern_descrip.c#L3289) and [HFS driver code](https://github.com/apple-oss-distributions/hfs/blob/a4bba3ecca6d79d997caf27c9a388eb1c8edcd08/core/hfs_readwrite.c#L4390) - notice the truncation risk from comparing to block-allocated size rather than file size and reachable code paths the comments assume to be dead code)",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2025-08-20T15:35:51Z",
      "updated_at": "2025-12-15T14:09:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33228",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 782,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3090204382,
      "number": 34044,
      "title": "streams: replace `std::find` with `memchr` (5x improvement)",
      "body": "## Summary\r\n\r\nThis PR optimizes the `FindByte` method by using `memchr` instead of `std::find`. This takes advantage of the underlying optimizations that come with `memchr`, primarily vectorized chunked reads. While `std::find` is more standard and modern, it is suboptimal for iterating single bytes as they're iterated 1 by 1 instead of exploiting SIMD.\r\n\r\nOne could argue that this is not a concern of Bitcoin Core but rather of libc++ mantainers, but since it shows 5x improvement in existing benchmarks, I think it's worth including.\r\n\r\n## Benchmarks\r\n\r\n<details>\r\n\r\n```shell\r\nsecp256k1 configure summary\r\n===========================\r\nBuild artifacts:\r\n  library type ........................ Static\r\nOptional modules:\r\n  ECDH ................................ OFF\r\n  ECDSA pubkey recovery ............... ON\r\n  extrakeys ........................... ON\r\n  schnorrsig .......................... ON\r\n  musig ............................... ON\r\n  ElligatorSwift ...................... ON\r\nParameters:\r\n  ecmult window size .................. 15\r\n  ecmult gen table size ............... 86 KiB\r\nOptional features:\r\n  assembly ............................ x86_64\r\n  external callbacks .................. OFF\r\nOptional binaries:\r\n  benchmark ........................... OFF\r\n  noverify_tests ...................... OFF\r\n  tests ............................... OFF\r\n  exhaustive tests .................... OFF\r\n  ctime_tests ......................... OFF\r\n  examples ............................ OFF\r\n\r\nCross compiling ....................... FALSE\r\nAPI visibility attributes ............. ON\r\nValgrind .............................. ON\r\nPreprocessor defined macros ........... ECMULT_WINDOW_SIZE=15 COMB_BLOCKS=43 COMB_TEETH=6 USE_ASM_X86_64=1 VALGRIND\r\nC compiler ............................ GNU 13.3.0, /usr/bin/cc\r\nCFLAGS ................................ \r\nCompile options ....................... -Wall -pedantic -Wcast-align -Wcast-align=strict -Wextra -Wnested-externs -Wno-long-long -Wno-overlength-strings -Wno-unused-function -Wshadow -Wstrict-prototypes -Wundef\r\nBuild type:\r\n - CMAKE_BUILD_TYPE ................... Release\r\n - CFLAGS ............................. -O2 -g \r\n - LDFLAGS for executables ............ \r\n - LDFLAGS for shared libraries ....... \r\n\r\n\r\n\r\nConfigure summary\r\n=================\r\nExecutables:\r\n  bitcoin ............................. OFF\r\n  bitcoind ............................ ON\r\n  bitcoin-node (multiprocess) ......... ON\r\n  bitcoin-qt (GUI) .................... OFF\r\n  bitcoin-gui (GUI, multiprocess) ..... OFF\r\n  bitcoin-cli ......................... OFF\r\n  bitcoin-tx .......................... OFF\r\n  bitcoin-util ........................ OFF\r\n  bitcoin-wallet ...................... OFF\r\n  bitcoin-chainstate (experimental) ... OFF\r\n  libbitcoinkernel (experimental) ..... OFF\r\n  kernel-test (experimental) .......... OFF\r\nOptional features:\r\n  wallet support ...................... OFF\r\n  external signer ..................... OFF\r\n  ZeroMQ .............................. OFF\r\n  IPC ................................. ON\r\n  USDT tracing ........................ OFF\r\n  QR code (GUI) ....................... OFF\r\n  DBus (GUI) .......................... OFF\r\nTests:\r\n  test_bitcoin ........................ OFF\r\n  test_bitcoin-qt ..................... OFF\r\n  bench_bitcoin ....................... OFF\r\n  fuzz binary ......................... OFF\r\n\r\nCross compiling ....................... FALSE\r\nC++ compiler .......................... GNU 13.3.0, /usr/bin/c++\r\nCMAKE_BUILD_TYPE ...................... Release\r\nPreprocessor defined macros ........... \r\nC++ compiler flags .................... -O2 -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/home/claudio/Desktop/bitcoinknots/src=. -fmacro-prefix-map=/home/claudio/Desktop/bitcoinknots/src=. -fstack-reuse=none -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter\r\nLinker flags .......................... -O2 -fstack-reuse=none -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\r\n\r\n```\r\n</details>\r\n\r\n```shell\r\ntaskset -c 1 ./bin/bench_bitcoin -filter=\"(FindByte|LoadExternalBlockFile)\" --min-time=10000\r\n```\r\n\r\n> Before:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.20 |       18,796,833.40 |    0.0% |     11.00 | `FindByte`\r\n|       22,499,431.11 |               44.45 |    0.2% |     10.90 | `LoadExternalBlockFile`\r\n\r\n> After:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               10.38 |       96,365,031.03 |    0.0% |     10.99 | `FindByte`\r\n|       22,128,903.67 |               45.19 |    0.3% |     10.96 | `LoadExternalBlockFile`\r\n\r\n\r\nI've also ran a **reindex benchmark** up to block 300'000 and it shows a slight improvement of ~1.2%\r\n\r\n<details>\r\n\r\n```Dockerfile\r\nCMD [\"hyperfine\", \\\r\n    \"--runs\", \"3\", \\\r\n    \"--setup\", \"pyperf system tune; bitcoind -datadir=. -stopatheight=1 || true\", \\\r\n    \"--prepare\", \"rm -rf chainstate/\", \\\r\n    \"--cleanup\", \"pyperf system reset\", \\\r\n    \"bitcoind -datadir=. -listen=0 -dnsseed=0 -fixedseeds=0 -printtoconsole=0 -blocksonly=1 -reindex -stopatheight=300000 -dbcache=4096\"]\r\n```\r\n\r\n</details>\r\n\r\n> before:\r\n\r\n```shell\r\n  Time (mean ± σ): 2097.363 s ± 18.306 s    [User: 5859.220 s, System: 62.772 s]\r\n  Range (min … max): 2079.740 s … 2116.283 s    3 runs\r\n```\r\n\r\n> after:\r\n\r\n```shell\r\n  Time (mean ± σ): 2072.158 s ± 29.275 s    [User: 5857.330 s, System: 63.515 s]\r\n  Range (min … max): 2046.102 s … 2103.836 s    3 runs\r\n```\r\n",
      "state": "closed",
      "user": "Raimo33",
      "created_at": "2025-12-10T17:34:23Z",
      "updated_at": "2025-12-15T09:00:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34044",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6113,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2232213040,
      "number": 31484,
      "title": "depends: update capnproto to 1.0.2",
      "body": "This fixes compilation on FreeBSD:\r\n```bash\r\n-- Build files have been written to: /tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4\r\nBuilding native_capnp...\r\ngmake[1]: Entering directory '/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4'\r\n[ 1%] Building CXX object src/kj/CMakeFiles/kj.dir/array.c++.o\r\n[ 2%] Building CXX object src/kj/CMakeFiles/kj.dir/cidr.c++.o\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:112:71: error: member access into incomplete type 'const struct sockaddr_in6'\r\notherBits = reinterpret_cast<const struct sockaddr_in6*>(addr)->sin6_addr.s6_addr;\r\n^\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:112:51: note: forward declaration of 'sockaddr_in6'\r\notherBits = reinterpret_cast<const struct sockaddr_in6*>(addr)->sin6_addr.s6_addr;\r\n^\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:123:63: error: member access into incomplete type 'const struct sockaddr_in'\r\n&reinterpret_cast<const struct sockaddr_in*>(addr)->sin_addr.s_addr);\r\n^\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:123:44: note: forward declaration of 'sockaddr_in'\r\n&reinterpret_cast<const struct sockaddr_in*>(addr)->sin_addr.s_addr);\r\n^\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:133:69: error: member access into incomplete type 'const struct sockaddr_in6'\r\notherBits = reinterpret_cast<const struct sockaddr_in6*>(addr)->sin6_addr.s6_addr;\r\n^\r\n/tmp/cirrus-ci-build/bitcoin-core/depends/work/build/x86_64-unknown-freebsd14.0/native_capnp/1.0.1-867405dd2c4/src/kj/cidr.c++:133:49: note: forward declaration of 'sockaddr_in6'\r\notherBits = reinterpret_cast<const struct sockaddr_in6*>(addr)->sin6_addr.s6_addr;\r\n^\r\n3 errors generated.\r\n```\r\n\r\nSee: https://github.com/capnproto/capnproto/commit/1c19c362b4733023dc38042481a21c22502ed593.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-12T17:25:14Z",
      "updated_at": "2025-12-14T12:29:13Z",
      "merged_at": "2024-12-13T10:47:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31484",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2297,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2226728297,
      "number": 31461,
      "title": "depends: add `-g` to *BSD_debug flags",
      "body": "To match the other HOST_debug_flags. Pulled out of #29796.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-10T15:24:39Z",
      "updated_at": "2025-12-14T12:29:13Z",
      "merged_at": "2024-12-12T10:11:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31461",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 96,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2234644951,
      "number": 31496,
      "title": "refactor: Make CCoinsCacheEntry::Flags enum private",
      "body": "Follow-up to #30906 which made it possible by removing external usage of the enum.\r\n\r\nMove-only change, reviewable using:\r\n`--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-12-13T22:34:18Z",
      "updated_at": "2025-12-14T12:29:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31496",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 237,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096882858,
      "number": 34061,
      "title": "fuzz: Fix bugs in `clusterlin_postlinearize_tree` target",
      "body": "Addresses two issues in the `clusterlin_postlinearize_tree` target:\r\n\r\n1. The loop iteration while creating tree dependency graphs was incorrect.\r\n2. We were accidentally passing in `post_linearization` to `PostLinearize` instead of the copy we just made, resulting in an ineffective check.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2025-12-12T15:25:37Z",
      "updated_at": "2025-12-14T12:16:35Z",
      "merged_at": "2025-12-14T12:16:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34061",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 347,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1935933587,
      "number": 30328,
      "title": "wallet: Remove IsMine from migration code",
      "body": "The legacy wallet `IsMine` code will be removed with the legacy wallet, but is still partially needed for migration. Instead of using `IsMine` directly in migration, equivalent checks are performed by migration.\r\n\r\nBuilds on #26596 ",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-06-24T16:40:47Z",
      "updated_at": "2025-12-13T12:28:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30328",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 274,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2072708954,
      "number": 30906,
      "title": "refactor: prohibit direct flags access in CCoinsCacheEntry and remove invalid tests",
      "body": "Similarly to https://github.com/bitcoin/bitcoin/pull/30849, this cleanup is intended to de-risk https://github.com/bitcoin/bitcoin/pull/30673#discussion_r1739909068 by simplifying the coin cache public interface.\r\n\r\n`CCoinsCacheEntry` provided general access to its internal flags state, even though, in reality, it could only be `clean`, `fresh`, `dirty`, or `fresh|dirty` (in the follow-up, we will remove `fresh` without `dirty`).\r\n\r\nOnce it was marked as `dirty`, we couldn’t set the state back to clean with `AddFlags(0)`—tests explicitly checked against that.\r\n\r\nThis PR refines the public interface to make this distinction clearer and to make invalid behavior impossible, rather than just checked by tests. We don't need extensive access to the internals of `CCoinsCacheEntry`, as many tests were simply validating invalid combinations in this way.\r\n\r\nThe last few commits contain significant test refactorings to make `coins_tests` easier to change in follow-ups.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-09-15T13:39:38Z",
      "updated_at": "2025-12-13T12:28:30Z",
      "merged_at": "2024-12-04T19:09:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30906",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1056,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2224680931,
      "number": 31452,
      "title": "wallet: Migrate non-HD keys to combo() descriptor",
      "body": "Non-HD keys do not have an HD seed ID associated with them, so if this value is the null value (all 0s), then we should not perform any seed ID comparison that would result in excluding the keys from combo() migration.\r\n\r\nThis changes the migration of non-HD wallets (or blank wallets with imported private keys) to make a single combo() descriptors for the non-HD/imported keys, rather than pk(), pkh(), sh(wpkh()), and wpkh() descriptors for the keys.\r\n\r\nImplements https://github.com/bitcoin/bitcoin/pull/31374#discussion_r1876650074",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-12-09T20:31:19Z",
      "updated_at": "2025-12-13T12:28:28Z",
      "merged_at": "2024-12-13T10:43:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31452",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 586,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2215779383,
      "number": 31420,
      "title": "test: implements helper functions for unit conversion",
      "body": "Add `sat_to_btc`, `btc_to_sat` utility functions to test framework and refactors all manual conversion on tests to use it;\r\n\r\nCloses #31345 ",
      "state": "closed",
      "user": "wfzyx",
      "created_at": "2024-12-04T16:55:29Z",
      "updated_at": "2025-12-13T12:28:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31420",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 194,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231309481,
      "number": 31480,
      "title": "refactor: Fix \"modernize-use-starts-ends-with\" clang-tidy warning",
      "body": "This PR is a follow-up to #31306 and fixes the \"modernize-use-starts-ends-with\" warning in the multiprocess code (see https://github.com/bitcoin/bitcoin/pull/30975#issuecomment-2527008761).\r\n\r\nFixes https://github.com/chaincodelabs/libmultiprocess/issues/124.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-12T10:27:52Z",
      "updated_at": "2025-12-13T12:28:27Z",
      "merged_at": "2024-12-12T22:13:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31480",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 325,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231053874,
      "number": 31477,
      "title": "ci: Bump centos gcc to 12",
      "body": "Currently the centos stream9 CI task is using gcc-11. This is fine, because this is also the minimum supported.\r\n\r\nHowever:\r\n\r\n* There is already a CI task that is checking the minimum supported version: https://github.com/bitcoin/bitcoin/blob/62bd61de110b057cbfd6e31e4d0b727d93119c72/ci/test/00_setup_env_native_previous_releases.sh#L11-L12\r\n* The CI log is a bit useless, because it is mostly just `#warning _FORTIFY_SOURCE > 2 is treated like 2 on this platform [-Werror=cpp]`. This makes it harder to spot real warnings, such as https://github.com/bitcoin/bitcoin/issues/31476\r\n\r\nFix both issues by using gcc-12.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-12T08:32:20Z",
      "updated_at": "2025-12-13T12:28:27Z",
      "merged_at": "2024-12-13T10:48:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31477",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 642,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3049721564,
      "number": 33959,
      "title": "test: use ForkGenerator to deduplicate reorg test code",
      "body": "Deduplicate reorg test code by introducing `ForkGenerator` utility class in `blocktools.py`.\r\n\r\n### Changes\r\n  - Add `ForkGenerator` class with `prepare_fork()` / `trigger_reorg()` / `reset()` methods\r\n  - Removes duplicated `trigger_reorg()` methods across tests\r\n  - Update mempool tests to use the new utility\r\n  \r\nFor now I am keeping it as draft as we need to address other tests to eliminate use of `invalidate_block` for reorg scenario. Also, optional args for non-empty forks to test mix-and-match cases of transactions re-entering mempool as suggested by instagibbs in https://github.com/bitcoin/bitcoin/pull/32587#issuecomment-3549356286.",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-27T05:49:29Z",
      "updated_at": "2025-12-13T11:05:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33959",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 703,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2696877363,
      "number": 33070,
      "title": "doc/zmq: fix unix socket path example",
      "body": "Following https://github.com/bitcoin/bitcoin/blob/75a5c8258ec5309fe506438aa3815608430b53d6/doc/release-notes/release-notes-28.0.md?plain=1#L105\r\n",
      "state": "closed",
      "user": "romanz",
      "created_at": "2025-07-26T10:59:14Z",
      "updated_at": "2025-12-12T15:53:17Z",
      "merged_at": "2025-07-28T09:18:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33070",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 183,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2956421896,
      "number": 33727,
      "title": "zmq: Log bind error at Error level, abort startup on init error",
      "body": "Fixes #33715",
      "state": "open",
      "user": "isrod",
      "created_at": "2025-10-28T18:59:03Z",
      "updated_at": "2025-12-12T15:25:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33727",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 76,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1643875165,
      "number": 29077,
      "title": "build: Require libc++-16 or later",
      "body": "I am not familiar with macOS, but given that https://github.com/bitcoin/bitcoin/pull/28622 prescribes a minimum of libc++-16 for macOS, doing the same on Linux could make sense?\r\n\r\nThis is needed for stuff:\r\n\r\n* `std::ranges::equal`, see https://github.com/bitcoin/bitcoin/pull/29071\r\n* `std::source_location`, see https://github.com/bitcoin/bitcoin/pull/28999#issuecomment-1851949647\r\n\r\nI don't think anyone is using `-stdlib=libc++` on Linux, except for the CI and OSS-Fuzz?\r\n\r\nThe minimum required clang version remains at `clang++-15`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2023-12-14T09:50:59Z",
      "updated_at": "2025-12-12T12:27:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29077",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 573,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231066735,
      "number": 31478,
      "title": "docs: remove repetitive words",
      "body": "remove repetitive words",
      "state": "closed",
      "user": "RiceChuan",
      "created_at": "2024-12-12T08:37:58Z",
      "updated_at": "2025-12-12T12:27:44Z",
      "merged_at": "2024-12-12T10:06:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31478",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 53,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2183761887,
      "number": 31306,
      "title": "ci: Update Clang in \"tidy\" job",
      "body": "This PR switches to the latest [IWYU 0.23](https://github.com/include-what-you-use/include-what-you-use/releases/tag/0.23), which is compatible with Clang 19.\r\n\r\nNew \"bugprone-use-after-move\" and \"modernize-use-starts-ends-with\" warnings that emerged have been addressed.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-17T16:25:02Z",
      "updated_at": "2025-12-12T12:27:44Z",
      "merged_at": "2024-12-08T16:30:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31306",
      "labels": [
        "Refactoring",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 302,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231196227,
      "number": 31479,
      "title": "lint: Disable signature output in git log",
      "body": "Necessary for users that have signature output enabled by default, since the script would stumble on them and error out.\r\n\r\n---\r\n\r\n### Testing setup\r\n\r\nSet local repo config to show signatures in log by default, simulating a user having that setting turned on globally.\r\n```\r\n₿ git config set log.showSignature true\r\n```\r\n### Command under test\r\n\r\n```\r\n₿ ( cd ./test/lint/test_runner/ && COMMIT_RANGE='HEAD^..HEAD' cargo run )\r\n```\r\n#### Before\r\n```\r\n...\r\nfatal: invalid object name 'gpg'.\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/lint/lint-git-commit-check.py\", line 52, in <module>\r\n    main()\r\n  File \"/home/hodlinator/bitcoin/test/lint/lint-git-commit-check.py\", line 42, in main\r\n    commit_info = check_output([\"git\", \"log\", \"--format=%B\", \"-n\", \"1\", hash], text=True, encoding=\"utf8\").splitlines()\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/nix/store/wfbjq35kxs6x83c3ncpfxdyl5gbhdx4h-python3-3.12.6/lib/python3.12/subprocess.py\", line 466, in check_output\r\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/nix/store/wfbjq35kxs6x83c3ncpfxdyl5gbhdx4h-python3-3.12.6/lib/python3.12/subprocess.py\", line 571, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['git', 'log', '--format=%B', '-n', '1', 'gpg: Signature made ons 11 dec 2024 10:46:34 CET']' returned non-zero exit status 128.\r\n^---- ⚠️ Failure generated from lint-git-commit-check.py\r\n...\r\n```\r\n#### After\r\n\r\n(No failure generated by *lint-git-commit-check.py*).",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-12-12T09:33:56Z",
      "updated_at": "2025-12-12T12:27:43Z",
      "merged_at": "2024-12-12T11:12:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31479",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1729,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2584873116,
      "number": 32730,
      "title": "p2p: avoid traversing blocks (twice) during IBD",
      "body": "Context:\r\nEvery time a block is connected, a `BlockConnected()` event is appended to the validation interface queue. This queue is consumed sequentially by a single worker thread. To avoid excessive memory usage, the queue is limited to 10 events at a time, and we stop processing new blocks until the queued events are handled.\r\n\r\nIssue:\r\nWithin the `PeerManager::BlockConnected()` listener, we traverse the block twice inside the transaction download manager — despite not needing to handle orphans or transaction requests during IBD.\r\n\r\nExtra info about the changes:\r\nThe new arg added to `BlockConnected()` in the first commit is primarily meant to avoid locking `cs_main` on the\r\nlistener side (to avoid calling `IsInitialBlockDownload()` there).\r\nAnother way of implementing this could be to add a bool field `enabled` to the `TxDownloadManager` class that is only\r\nset to true when we are out of IBD, so that we don't have to include a new arg inside the block connection event.\r\nThis is open for discussion. Could try implementing this second approach too.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2025-06-11T16:54:40Z",
      "updated_at": "2025-12-12T10:42:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32730",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1112,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2175010768,
      "number": 31278,
      "title": "wallet, rpc: deprecate settxfee and paytxfee",
      "body": "**Summary**\r\n\r\nThis PR deprecates the settxfee RPC and paytxfee setting, marking it for removal in Bitcoin Core 31.0.\r\n\r\n**Motivation**\r\n\r\nThe PR was initially motivated by https://github.com/bitcoin/bitcoin/issues/31088. The intention was to create a new function `settxfeerate` to allow users to set a static fee rate in `sat/vB` instead of `btc/kvB`.\r\n\r\nThe `settxfee` RPC allows users to set a static fee rate for all transactions created by the wallet. However, in a dynamic fee environment, this can lead to poor fee choices, either overpaying when the mempool is empty or underpaying when congestion is high. The preferred approach is to rely on fee estimation, which is designed to adapt to network conditions, and is the one by default. Same argument apply for `paytxfee` setting.\r\n\r\nDuring discussion the consensus was that static fee settings are a footgun and that users should instead specify the fee rate per transaction if they don't want to rely on the fee estimation. Given this, rather than introducing a `settxfeerate` alternative, this PR goes towards removing `settxfee` and `paytxfee` entirely.\r\n\r\n**Key Changes**\r\n\r\n`settxfee` and `paytxfee` is now deprecated and will be removed in Bitcoin Core 31.0.\r\nUsers should rely on fee estimation or explicitly specify a fee rate when constructing transactions.\r\n\r\n**Impact on Users**\r\n\r\nIf users currently use settxfee or paytxfee, they should transition to specifying fees per transaction.\r\nNo immediate breakage in 30.0 (must use `-deprecatedrpc=settxfee`), but `settxfee` and `paytxfee` will be removed in 31.0.\r\n\r\n**Alternative Approaches Considered**\r\n\r\nA settxfeerate alternative (using sat/vB) was initially proposed but ultimately rejected in favor of deprecating static fee setting entirely.\r\n\r\n**Notes for removal**\r\n- When removing paytxfee we should also update txconfirmtarget startup option help text.\r\n- Get back the comment from `rpc_deprecated.py` test. [+info](https://github.com/bitcoin/bitcoin/pull/31278#discussion_r1998876768)",
      "state": "closed",
      "user": "polespinasa",
      "created_at": "2024-11-12T14:19:24Z",
      "updated_at": "2025-12-11T20:32:43Z",
      "merged_at": "2025-03-24T17:40:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31278",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2059,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2496849559,
      "number": 32414,
      "title": "validation: periodically flush dbcache during reindex-chainstate",
      "body": "After #30611 we periodically do a non-erasing flush of the dbcache to disk roughly every hour during IBD.\r\nThe intention was to also do this periodic flush during reindex-chainstate, so we would not risk losing progress during a system failure when reindexing with a high dbcache value.\r\n\r\nIt was discovered that reindex-chainstate does not perform a PERIODIC flush until it has already reached the tip. Since reindexing to tip usually happens within 24 hours, this behaviour was unnoticed with the previous periodic flush interval. Note that reindex-chainstate still does IF_NEEDED flushes during `ConnectBlock`, so this also would not be noticed when running with a lower dbcache value.\r\n\r\nThis patch moves the PERIODIC flush from after the outer loop in `ActivateBestChain` to inside the outer loop after we release `cs_main`. This will periodically flush during IBD, reindex-chainstate, and steady state.",
      "state": "closed",
      "user": "andrewtoth",
      "created_at": "2025-05-03T12:55:59Z",
      "updated_at": "2025-12-11T19:56:26Z",
      "merged_at": "2025-12-11T19:56:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32414",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 973,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3084931136,
      "number": 34033,
      "title": "scripted-diff: Unify error and warning log formatting",
      "body": "Errors and warnings should normally not happen. However, if they do happen, it is easier to spot them, if they are all logged in the same format via `LogError` or `LogWarning`.\r\n\r\nSo do that with a scripted-diff.\r\n\r\nThis is a minimal behavior change and unifies the log output from:\r\n\r\n    [net:error] Something bad happened\r\n    [net:warning] Something problematic happened\r\n\r\nto either\r\n\r\n    [error] Something bad happened\r\n    [warning] Something problematic happened\r\n\r\nor, when `-loglevelalways=1` is enabled:\r\n\r\n    [all:error] Something bad happened\r\n    [all:warning] Something problematic happened\r\n\r\nSuch a behavior change is desired, because all warning and error logs are written in the same style in the source code and they are logged in the same format for log consumers.\r\n\r\nRemoving the category should be harmless, because warning and error messages should be descriptive and unique anyway.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-09T09:55:54Z",
      "updated_at": "2025-12-11T19:09:59Z",
      "merged_at": "2025-12-11T17:00:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34033",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 962,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2883202440,
      "number": 33528,
      "title": "wallet: don't consider unconfirmed TRUC coins with ancestors",
      "body": "Addresses https://github.com/bitcoin/bitcoin/issues/33368#issuecomment-3319935660\r\n\r\nThere is not an explicit check that the to-be-created wallet transaction would be within the {TRUC, normal} ancestor limits. This means that the wallet may create a transaction that violates these limits, but fail to broadcast it in `CommitTransaction`.\r\n\r\nThis appears to be expected behavior for the normal ancestor limits (and any other situation in which the wallet creates a tx that was rejected by mempool) and AFAIK the transaction will be rebroadcast at some point after the ancestors confirm.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1ed00a0d39d5190d8ad88a0dd705a09b56d987aa/test/functional/wallet_basic.py#L502-L506\r\n\r\nIt's a bit complex to address this for the normal ancestor limit, and probably unrealistic for the wallet to check all possible mempool policies in coin selection, but it's quite trivial for TRUC: just skip any unconfirmed UTXOs that have any ancestors. I think it would be much more helpful to the user to say there are insufficient funds.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2025-10-02T22:10:02Z",
      "updated_at": "2025-12-11T18:21:06Z",
      "merged_at": "2025-12-04T09:47:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33528",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1117,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1871961574,
      "number": 30116,
      "title": "p2p: Fill reconciliation sets (Erlay) attempt 2",
      "body": "This is a re-attempt of https://github.com/bitcoin/bitcoin/pull/28765\r\n\r\nThe new approach differs from the previous in how peers are selected for fanout:\r\n\r\nFor Erlay-enabled peers, fanout targets are chosen for each transaction individually. Once the fanout target is reached, the transaction is reconciled with the rest of our peers. Whether a peer is selected for fanout depends on factors like peer type (inbound or outbound), how the transaction was received (via fanout or reconciliation), and how many of our peers are already aware of it.\r\n\r\nFor outbound peers:\r\nIf the transaction was received through fanout (or we originated it), we set a fanout rate threshold `OUTBOUND_FANOUT_THRESHOLD{4}`. As long as the transaction has been announced to (or received from) fewer than this number of peers, we continue faning out based on the order in which peers' Poisson timers go off.\r\n\r\nIf the transaction was received via reconciliation, we simply reconcile it with the rest of our peers.\r\n\r\nFor inbound peers:\r\nWe select a subset of inbound peers as fanout targets and send all transactions to them within a set time interval. Once the interval ends, the selection is randomly rotated.\r\n\r\nThis approach helps scale the transaction fanout rate for outbound peers by approximating how widely a transaction has already been propagated. For inbound peers, we use a random selection strategy to prevent them from easily exploiting our heuristic.\r\n\r\nYou may notice 398078a8a92725f33ac28107f8fa045e02b2c5bd is not currently being used. It is likely to be dropped and brought back in a follow-up. Currently, we are picking Erlay fanout targets independently of whether we already have other non-erlay peers (which are always fanout). We may want to scale the selection based on non-Erlay connections, but I think that can be addressed on it's own PR.\r\n\r\nErlay Project Tracking: https://github.com/bitcoin/bitcoin/issues/30249",
      "state": "open",
      "user": "sr-gi",
      "created_at": "2024-05-15T20:01:38Z",
      "updated_at": "2025-12-11T17:38:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30116",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1969,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 479958088,
      "number": 19873,
      "title": "Flush dbcache early if system is under memory pressure",
      "body": "No point forcing memory to get pushed out to swap just to cache db changes when we can write the db changes out instead\r\n\r\n~~Chasing Concept ACKs and opinions on approach taken~~ (no longer draft)\r\n\r\nOne eventual goal might be to (on systems where this is supported) allow dbcache to be unlimited.",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2020-09-04T18:29:11Z",
      "updated_at": "2025-12-11T16:57:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19873",
      "labels": [
        "Windows",
        "Linux/Unix",
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 352,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3090466471,
      "number": 34045,
      "title": "test: Log IP of download server in get_previous_releases.py",
      "body": "In order to help debug issues with previous release downloads from our web server, we need to know which IP the downloader connected to.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-12-10T19:10:17Z",
      "updated_at": "2025-12-11T16:36:16Z",
      "merged_at": "2025-12-11T16:36:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34045",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 196,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2081994615,
      "number": 30933,
      "title": "test: Prove+document ConstevalFormatString/tinyformat parity",
      "body": "Clarifies and puts the extent of parity under test.\r\n\r\nBroken out from #30546 based on https://github.com/bitcoin/bitcoin/pull/30546#discussion_r1755013263 and https://github.com/bitcoin/bitcoin/pull/30546#discussion_r1756495304.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-09-19T22:11:01Z",
      "updated_at": "2025-12-11T12:26:58Z",
      "merged_at": "2024-12-11T03:05:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30933",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 290,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2193357922,
      "number": 31343,
      "title": "test: avoid internet traffic in rpc_net.py",
      "body": "In order to avoid connecting to the internet in the functional test `rpc_net.py`, specify a non-working proxy (parameter `-proxy=127.0.0.1:1`, same approach as in #31142) for the nodes.  There is at least one known instance where this is currently happening on master where a connection attempt to a public IP is made (see also the discussion in #31339):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/17834bd1976df7a2ff6c2f5f05a59ae3fd3f6875/test/functional/rpc_net.py#L253\r\n\r\nCan be tested by running\r\n```\r\n$ sudo tcpdump -i eth0 host 11.22.33.44\r\n```\r\nboth on master and the PR branch and verifying that no packets appear in the tcpdump in the latter anymore.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2024-11-21T22:14:42Z",
      "updated_at": "2025-12-11T12:26:57Z",
      "merged_at": "2024-12-11T02:00:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31343",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 701,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2212201794,
      "number": 31408,
      "title": "test: Avoid logging error when logging error",
      "body": "Currently a logging error in the form of `--- Logging error ---` happens when an error is logged in the `_on_data` helper.\r\n\r\nFix it by properly logging the error.\r\n\r\nAlso, treat pylint errors as errors, to avoid this problem in the future.\r\n\r\nCan be tested by running `p2p_addrv2_relay.py` with the following example diff:\r\n\r\n```diff\r\ndiff --git a/test/functional/test_framework/p2p.py b/test/functional/test_framework/p2p.py\r\nindex 523e1bd068..0f1eb29d13 100755\r\n--- a/test/functional/test_framework/p2p.py\r\n+++ b/test/functional/test_framework/p2p.py\r\n@@ -137,7 +137,7 @@ MESSAGEMAP = {\r\n     b\"notfound\": msg_notfound,\r\n     b\"ping\": msg_ping,\r\n     b\"pong\": msg_pong,\r\n-    b\"sendaddrv2\": msg_sendaddrv2,\r\n+    #b\"sendaddrv2\": msg_sendaddrv2,\r\n     b\"sendcmpct\": msg_sendcmpct,\r\n     b\"sendheaders\": msg_sendheaders,\r\n     b\"sendtxrcncl\": msg_sendtxrcncl,",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-03T08:46:15Z",
      "updated_at": "2025-12-11T12:26:56Z",
      "merged_at": "2024-12-05T17:17:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31408",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 905,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2205673828,
      "number": 31391,
      "title": "util: Drop boost posix_time in ParseISO8601DateTime",
      "body": "`boost::posix_time` in `ParseISO8601DateTime` has many issues:\r\n\r\n* It parses random strings that are clearly invalid and returns a time value for them, see [1] below.\r\n* None of the separators `-`, or `:`, or `T`, or `Z` are validated.\r\n* It may crash when running under a hardened C++ library, see https://github.com/bitcoin/bitcoin/issues/28917.\r\n* It has been unmaintained for years, so reporting or fixing any issues will most likely be useless.\r\n* It pulls in a third-party dependency, when the functionality is already included in vanilla C++20.\r\n\r\nFix all issues by replacing it with a simple helper function written in C++20.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/28917.\r\n\r\n[1] The following patch passes on current master:\r\n\r\n```diff\r\ndiff --git a/src/wallet/test/rpc_util_tests.cpp b/src/wallet/test/rpc_util_tests.cpp\r\nindex 32f6f5ab46..c1c94c7116 100644\r\n--- a/src/wallet/test/rpc_util_tests.cpp\r\n+++ b/src/wallet/test/rpc_util_tests.cpp\r\n@@ -12,6 +12,14 @@ BOOST_AUTO_TEST_SUITE(wallet_util_tests)\r\n \r\n BOOST_AUTO_TEST_CASE(util_ParseISO8601DateTime)\r\n {\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"964296\"), 242118028800);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"244622\"), 15023836800);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"+INfINITy\"), 9223372036854);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"7000802 01\"), 158734166400);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"7469-2 +INfINITy\"), 9223372036854);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"maXimum-datE-time\"), 253402300799);\r\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"577737     114maXimum-datE-time\"), 253402300799);\r\n+\r\n     BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"1970-01-01T00:00:00Z\"), 0);\r\n     BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"1960-01-01T00:00:00Z\"), 0);\r\n     BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"2000-01-01T00:00:01Z\"), 946684801);\r\n```",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-28T12:45:22Z",
      "updated_at": "2025-12-11T12:26:56Z",
      "merged_at": "2024-12-04T11:21:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31391",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1922,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217887819,
      "number": 31429,
      "title": "cmake: Support user-defined C++ standard",
      "body": "This PR introduces a native CMake's way to test newer C++ standards.\r\n\r\nAlso see: https://github.com/bitcoin/bitcoin/pull/30735.\r\n\r\nTo configure builds with newer standards, run:\r\n```\r\n$ cmake -B build -DCMAKE_CXX_STANDARD=23\r\n# or\r\n$ cmake -B build -DCMAKE_CXX_STANDARD=26  # Requires CMake 3.25 or newer.\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-05T15:02:38Z",
      "updated_at": "2025-12-11T12:26:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31429",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 352,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2983823947,
      "number": 33805,
      "title": "merkle: migrate `path` arg to reference and drop unused args",
      "body": "### Summary\r\nSimplifies merkle tree computation by removing dead code found through coverage analysis (following up on #33768 and #33786).\r\n\r\n### History\r\n\r\n#### BlockWitnessMerkleRoot\r\nOriginal `MerkleComputation` was added in https://github.com/bitcoin/bitcoin/commit/ee60e5625bf8a11c8e5509b9cea8b6465056c448#diff-706988c23877f8a557484053887f932b2cafb3b5998b50497ce7ff8118ac85a3R131 where it was called for either `&hash, mutated` or `position, &ret` args.\r\nIn https://github.com/bitcoin/bitcoin/commit/1f0e7ca09c9d7c5787c218156fa5096a1bdf2ea8#diff-706988c23877f8a557484053887f932b2cafb3b5998b50497ce7ff8118ac85a3L135-L165 the first usage was inlined in `ComputeMerkleRoot`, leaving the `proot` and , `pmutated` values unused in `MerkleComputation`.\r\nLater in https://github.com/bitcoin/bitcoin/commit/4defdfab94504018f822dc34a313ad26cedc8255 the method was moved to test and in https://github.com/bitcoin/bitcoin/commit/63d6ad7c89cd682f6e779968c4861ea085058356#diff-706988c23877f8a557484053887f932b2cafb3b5998b50497ce7ff8118ac85a3R87-R95 was restored to the code, though with unused parameters again.\r\n\r\n#### BlockWitnessMerkleRoot\r\n`BlockWitnessMerkleRoot` was introduced in https://github.com/bitcoin/bitcoin/commit/8b49040854be2e26b66366aeae1cba4716f93d93 where it was already called with `NULL` https://github.com/bitcoin/bitcoin/commit/8b49040854be2e26b66366aeae1cba4716f93d93#diff-34d21af3c614ea3cee120df276c9c4ae95053830d7f1d3deaf009a4625409ad2R3509 or an unused dummy https://github.com/bitcoin/bitcoin/commit/8b49040854be2e26b66366aeae1cba4716f93d93#diff-34d21af3c614ea3cee120df276c9c4ae95053830d7f1d3deaf009a4625409ad2R3598-R3599 for the `mutated` parameter.\r\n\r\n### Fixes\r\n\r\n#### BlockWitnessMerkleRoot\r\n- Converts `path` parameter from pointer to reference (always non-null at call site)\r\n- Removes `proot` and `pmutated` parameters (always `nullptr` at call site)\r\n\r\n#### BlockWitnessMerkleRoot\r\n- Removes unused `mutated` output parameter (always passed as `nullptr`)\r\n\r\nThe change is a refactor that shouldn't introduce *any* behavioral change, only remove dead code, leftovers from previous refactors.\r\n\r\n### Coverage proof\r\nhttps://maflcko.github.io/b-c-cov/total.coverage/src/consensus/merkle.cpp.gcov.html",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-06T09:15:54Z",
      "updated_at": "2025-12-11T11:50:54Z",
      "merged_at": "2025-12-10T23:29:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33805",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2287,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3089216108,
      "number": 34040,
      "title": "test: Detect truncated download in get_previous_releases.py",
      "body": "Without this, and end-of-stream is not detected and will just lead to an immediate exit, instead of a re-try.\r\n\r\nE.g. https://github.com/bitcoin/bitcoin/actions/runs/20089133013/job/57633839315?pr=34038#step:12:201:\r\n\r\n```\r\n...\r\nDownloading: [##--------------------------------------] 5.4%\r\nDownloading: [##--------------------------------------] 5.4%\r\nDownloading: [##--------------------------------------] 5.5%\r\nDownloading: [##--------------------------------------] 5.6%\r\nChecksum dd02eab18f9154604e38135ef3f98fd310ba3c748074aeb83a71118cd2cd1367 did not match\r\nError: Process completed with exit code 1.\r\n```\r\n\r\nAlso, remove the `0` fallback value, because if the fallback was ever hit, the program would fail anyway with `division by zero` error.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-10T12:39:28Z",
      "updated_at": "2025-12-11T10:15:36Z",
      "merged_at": "2025-12-10T16:41:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34040",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 812,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1966860576,
      "number": 30442,
      "title": "precalculate SipHash constant salt XORs",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n\r\nThe in-memory representation of the UTXO set uses (salted) [SipHash](https://github.com/bitcoin/bitcoin/blob/master/src/coins.h#L226) to avoid key collision attacks.\r\n\r\nHashing `uint256` keys is performed frequently throughout the codebase. Previously, specialized optimizations existed as standalone functions (`SipHashUint256` and `SipHashUint256Extra`), but the constant salting operations (C0-C3 XOR with keys) were recomputed on every call.\r\n\r\nThis PR introduces `PresaltedSipHasher`, a class that caches the initial SipHash state (v0-v3 after XORing constants with keys), eliminating redundant constant computations when hashing multiple values with the same keys. The optimization is applied uniformly across:\r\n- All `Salted*Hasher` classes (`SaltedUint256Hasher`, `SaltedTxidHasher`, `SaltedWtxidHasher`, `SaltedOutpointHasher`)\r\n- `CBlockHeaderAndShortTxIDs` for compact block short ID computation\r\n\r\n### Details\r\n\r\nThe change replaces the standalone `SipHashUint256` and `SipHashUint256Extra` functions with `PresaltedSipHasher` class methods that cache the constant-salted state. This is particularly beneficial for hash map operations where the same salt is used repeatedly (as suggested by Sipa in https://github.com/bitcoin/bitcoin/pull/30442#issuecomment-2628994530).\r\n\r\n`CSipHasher` behavior remains unchanged; only the specialized `uint256` paths and callers now reuse the cached state instead of recomputing it.\r\n\r\n### Measurements\r\n\r\nBenchmarks were run using local `SaltedOutpointHasherBench_*` microbenchmarks (not included in this PR) that exercise `SaltedOutpointHasher` in realistic `std::unordered_set` scenarios.\r\n\r\n<details>\r\n<summary>Benchmarks</summary>\r\n\r\n```C++\r\ndiff --git a/src/bench/crypto_hash.cpp b/src/bench/crypto_hash.cpp\r\n--- a/src/bench/crypto_hash.cpp\t(revision 9b1a7c3e8dd78d97fbf47c2d056d043b05969176)\r\n+++ b/src/bench/crypto_hash.cpp\t(revision e1b4f056b3097e7e34b0eda31f57826d81c9d810)\r\n@@ -2,7 +2,6 @@\r\n // Distributed under the MIT software license, see the accompanying\r\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n\r\n-\r\n #include <bench/bench.h>\r\n #include <crypto/muhash.h>\r\n #include <crypto/ripemd160.h>\r\n@@ -12,9 +11,11 @@\r\n #include <crypto/sha512.h>\r\n #include <crypto/siphash.h>\r\n #include <random.h>\r\n-#include <span.h>\r\n #include <tinyformat.h>\r\n #include <uint256.h>\r\n+#include <primitives/transaction.h>\r\n+#include <util/hasher.h>\r\n+#include <unordered_set>\r\n\r\n #include <cstdint>\r\n #include <vector>\r\n@@ -205,6 +206,98 @@\r\n     });\r\n }\r\n\r\n+static void SaltedOutpointHasherBench_hash(benchmark::Bench& bench)\r\n+{\r\n+    FastRandomContext rng{/*fDeterministic=*/true};\r\n+    constexpr size_t size{1000};\r\n+\r\n+    std::vector<COutPoint> outpoints(size);\r\n+    for (auto& outpoint : outpoints) {\r\n+        outpoint = {Txid::FromUint256(rng.rand256()), rng.rand32()};\r\n+    }\r\n+\r\n+    const SaltedOutpointHasher hasher;\r\n+    bench.batch(size).run([&] {\r\n+        size_t result{0};\r\n+        for (const auto& outpoint : outpoints) {\r\n+            result ^= hasher(outpoint);\r\n+        }\r\n+        ankerl::nanobench::doNotOptimizeAway(result);\r\n+    });\r\n+}\r\n+\r\n+static void SaltedOutpointHasherBench_match(benchmark::Bench& bench)\r\n+{\r\n+    FastRandomContext rng{/*fDeterministic=*/true};\r\n+    constexpr size_t size{1000};\r\n+\r\n+    std::unordered_set<COutPoint, SaltedOutpointHasher> values;\r\n+    std::vector<COutPoint> value_vector;\r\n+    values.reserve(size);\r\n+    value_vector.reserve(size);\r\n+\r\n+    for (size_t i{0}; i < size; ++i) {\r\n+        COutPoint outpoint{Txid::FromUint256(rng.rand256()), rng.rand32()};\r\n+        values.emplace(outpoint);\r\n+        value_vector.push_back(outpoint);\r\n+        assert(values.contains(outpoint));\r\n+    }\r\n+\r\n+    bench.batch(size).run([&] {\r\n+        bool result{true};\r\n+        for (const auto& outpoint : value_vector) {\r\n+            result ^= values.contains(outpoint);\r\n+        }\r\n+        ankerl::nanobench::doNotOptimizeAway(result);\r\n+    });\r\n+}\r\n+\r\n+static void SaltedOutpointHasherBench_mismatch(benchmark::Bench& bench)\r\n+{\r\n+    FastRandomContext rng{/*fDeterministic=*/true};\r\n+    constexpr size_t size{1000};\r\n+\r\n+    std::unordered_set<COutPoint, SaltedOutpointHasher> values;\r\n+    std::vector<COutPoint> missing_value_vector;\r\n+    values.reserve(size);\r\n+    missing_value_vector.reserve(size);\r\n+\r\n+    for (size_t i{0}; i < size; ++i) {\r\n+        values.emplace(Txid::FromUint256(rng.rand256()), rng.rand32());\r\n+        COutPoint missing_outpoint{Txid::FromUint256(rng.rand256()), rng.rand32()};\r\n+        missing_value_vector.push_back(missing_outpoint);\r\n+        assert(!values.contains(missing_outpoint));\r\n+    }\r\n+\r\n+    bench.batch(size).run([&] {\r\n+        bool result{false};\r\n+        for (const auto& outpoint : missing_value_vector) {\r\n+            result ^= values.contains(outpoint);\r\n+        }\r\n+        ankerl::nanobench::doNotOptimizeAway(result);\r\n+    });\r\n+}\r\n+\r\n+static void SaltedOutpointHasherBench_create_set(benchmark::Bench& bench)\r\n+{\r\n+    FastRandomContext rng{/*fDeterministic=*/true};\r\n+    constexpr size_t size{1000};\r\n+\r\n+    std::vector<COutPoint> outpoints(size);\r\n+    for (auto& outpoint : outpoints) {\r\n+        outpoint = {Txid::FromUint256(rng.rand256()), rng.rand32()};\r\n+    }\r\n+\r\n+    bench.batch(size).run([&] {\r\n+        std::unordered_set<COutPoint, SaltedOutpointHasher> set;\r\n+        set.reserve(size);\r\n+        for (const auto& outpoint : outpoints) {\r\n+            set.emplace(outpoint);\r\n+        }\r\n+        ankerl::nanobench::doNotOptimizeAway(set.size());\r\n+    });\r\n+}\r\n+\r\n static void MuHash(benchmark::Bench& bench)\r\n {\r\n     MuHash3072 acc;\r\n@@ -276,6 +369,10 @@\r\n BENCHMARK(SHA256_32b_AVX2, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(SHA256_32b_SHANI, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(SipHash_32b, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(SaltedOutpointHasherBench_hash, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(SaltedOutpointHasherBench_match, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(SaltedOutpointHasherBench_mismatch, benchmark::PriorityLevel::HIGH);\r\n+BENCHMARK(SaltedOutpointHasherBench_create_set, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(SHA256D64_1024_STANDARD, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(SHA256D64_1024_SSE4, benchmark::PriorityLevel::HIGH);\r\n BENCHMARK(SHA256D64_1024_AVX2, benchmark::PriorityLevel::HIGH);\r\n\r\n```\r\n\r\n</details>\r\n\r\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/bin/bench_bitcoin -filter='SaltedOutpointHasherBench' -min-time=10000\r\n\r\n> Before:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               58.60 |       17,065,922.04 |    0.3% |     11.02 | `SaltedOutpointHasherBench_create_set`\r\n|               11.97 |       83,576,684.83 |    0.1% |     11.01 | `SaltedOutpointHasherBench_hash`\r\n|               14.50 |       68,985,850.12 |    0.3% |     10.96 | `SaltedOutpointHasherBench_match`\r\n|               13.90 |       71,942,033.47 |    0.4% |     11.03 | `SaltedOutpointHasherBench_mismatch`\r\n\r\n> After:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               57.27 |       17,462,299.19 |    0.1% |     11.02 | `SaltedOutpointHasherBench_create_set`\r\n|               11.24 |       88,997,888.48 |    0.3% |     11.04 | `SaltedOutpointHasherBench_hash`\r\n|               13.91 |       71,902,014.20 |    0.2% |     11.01 | `SaltedOutpointHasherBench_match`\r\n|               13.29 |       75,230,390.31 |    0.1% |     11.00 | `SaltedOutpointHasherBench_mismatch`\r\n\r\ncompared to master:\r\n```python\r\ncreate_set - 17,462,299.19 / 17,065,922.04 - 2.3% faster\r\nhash       - 88,997,888.48 / 83,576,684.83 - 6.4% faster\r\nmatch      - 71,902,014.20 / 68,985,850.12 - 4.2% faster\r\nmismatch   - 75,230,390.31 / 71,942,033.47 - 4.5% faster\r\n```\r\n\r\n> C++ compiler .......................... GNU 13.3.0\r\n\r\n> Before:\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|              136.76 |        7,312,133.16 |    0.0% |        1,086.67 |          491.12 |  2.213 |         119.54 |    1.1% |     11.01 | `SaltedOutpointHasherBench_create_set`\r\n|               23.82 |       41,978,882.62 |    0.0% |          252.01 |           85.57 |  2.945 |           4.00 |    0.0% |     11.00 | `SaltedOutpointHasherBench_hash`\r\n|               60.42 |       16,549,695.42 |    0.1% |          460.51 |          217.04 |  2.122 |          21.00 |    1.4% |     10.99 | `SaltedOutpointHasherBench_match`\r\n|               78.66 |       12,713,595.35 |    0.1% |          555.59 |          282.52 |  1.967 |          20.19 |    2.2% |     10.74 | `SaltedOutpointHasherBench_mismatch`\r\n\r\n> After:\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|              135.38 |        7,386,349.49 |    0.0% |        1,078.19 |          486.16 |  2.218 |         119.56 |    1.1% |     11.00 | `SaltedOutpointHasherBench_create_set`\r\n|               23.67 |       42,254,558.08 |    0.0% |          247.01 |           85.01 |  2.906 |           4.00 |    0.0% |     11.00 | `SaltedOutpointHasherBench_hash`\r\n|               58.95 |       16,962,220.14 |    0.1% |          446.55 |          211.74 |  2.109 |          20.86 |    1.4% |     11.01 | `SaltedOutpointHasherBench_match`\r\n|               76.98 |       12,991,047.69 |    0.1% |          548.93 |          276.50 |  1.985 |          20.25 |    2.3% |     10.72 | `SaltedOutpointHasherBench_mismatch`\r\n\r\n```python\r\ncompared to master:\r\ncreate_set -  7,386,349.49 / 7,312,133.16  - 1.0% faster\r\nhash       - 42,254,558.08 / 41,978,882.62 - 0.6% faster\r\nmatch      - 16,962,220.14 / 16,549,695.42 - 2.4% faster\r\nmismatch   - 12,991,047.69 / 12,713,595.35 - 2.1% faster\r\n```\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-07-12T15:01:37Z",
      "updated_at": "2025-12-10T23:22:46Z",
      "merged_at": "2025-12-10T23:22:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30442",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 10606,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2908139789,
      "number": 33602,
      "title": "[IBD] coins: reduce lookups in dbcache layer propagation",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n\r\nPreviously, when the parent coins cache had no entry and the child did, `BatchWrite` performed a find followed by `try_emplace`, which resulted in multiple `SipHash` computations and bucket traversals on the common insert path.\r\nOn a different path, these caches were recreated needlessly for every block connection.\r\n\r\n### Fix for double fetch \r\n\r\nThis change uses a single leading `try_emplace` and branches on the returned `inserted` flag. In the `FRESH && SPENT` case (not used in production, only exercised by tests), we erase the just-inserted placeholder (which is constant time with no rehash anyway). Semantics are unchanged for all valid parent/child state combinations.\r\n\r\nThis change is a minimal version of [bitcoin/bitcoin@`723c49b` (#32128)](https://github.com/bitcoin/bitcoin/pull/32128/commits/723c49b63bb10da843fbb6efc6928dca415cc47f) and draws simplification ideas [bitcoin/bitcoin@`ae76ec7` (#30673)](https://github.com/bitcoin/bitcoin/pull/30673/commits/ae76ec7bcff0a08a61f294882a71e46d177b009f) and https://github.com/bitcoin/bitcoin/pull/30326.\r\n\r\n### Fix for temporary cache recreation\r\n\r\nRelated to parent cache propagation, the second commit makes it possible to avoid destructuring-recreating-destructuring of these short-live parent caches created for each new block.\r\nA few temporary `CCoinsViewCache`'s are destructed right after the `Flush()`, therefore it is not necessary to call `ReallocateCache` to recreate them right before they're killed anyway.\r\n\r\nThis change was based on a subset of https://github.com/bitcoin/bitcoin/pull/28945, the original authors and relevant commenters were added as coauthors to this version.\r\n\r\n-----\r\n\r\nReindex-chainstate indicates ~1% speedup.\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```python\r\nCOMMITS=\"647cdb4f7e8041affed887e2325ee03a91078bb1 0b0c3293ffd75afb27dadc0b28426b40132a8c6b\"; \\                       \r\nSTOP=909090; DBCACHE=4500; \\                                                                                                                                                     \r\nCC=gcc; CXX=g++; \\                                                                      \r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\                                                                                        \r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nhyperfine \\                                                                             \r\n  --sort command \\                                                                      \r\n  --runs 2 \\                                                                            \r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\                                             \r\n  --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n  --cleanup \"cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\                                                                                                   \r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n647cdb4f7e Merge bitcoin/bitcoin#33311: net: Quiet down logging when router doesn't support natpmp/pcp\r\n0b0c3293ff validation: don't reallocate cache for short-lived CCoinsViewCache                                                                                                    \r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=909090 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 647cdb4f7e8041affed887e2325ee03a91078bb1)\r\n  Time (mean ± σ):     16233.508 s ±  9.501 s    [User: 19064.578 s, System: 951.672 s]                                                                                          \r\n  Range (min … max):   16226.790 s … 16240.226 s    2 runs                                                                                                                       \r\n                                                                                        \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=909090 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0b0c3293ffd75afb27dadc0b28426b40132a8c6b)\r\n  Time (mean ± σ):     16039.626 s ± 17.284 s    [User: 18870.130 s, System: 950.722 s]\r\n  Range (min … max):   16027.405 s … 16051.848 s    2 runs\r\n  \r\nRelative speed comparison\r\n        1.01 ±  0.00  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=909090 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 647cdb4f7e8041affed887e2325ee03a91078bb1)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=909090 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0b0c3293ffd75afb27dadc0b28426b40132a8c6b)\r\n```\r\n\r\n</details>\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-10-12T18:32:08Z",
      "updated_at": "2025-12-10T23:11:40Z",
      "merged_at": "2025-12-10T23:02:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33602",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5697,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3051758805,
      "number": 33962,
      "title": "refactor: replace manual promise with SyncWithValidationInterfaceQueue",
      "body": "`BroadcastTransaction()` now waits for validation callbacks using the built-in `validation_signals>SyncWithValidationInterfaceQueue()` instead of creating a local `std::promise` and scheduling a lambda. This removes an unnecessary allocation and uses the canonical API.",
      "state": "open",
      "user": "ANtutov",
      "created_at": "2025-11-27T16:12:32Z",
      "updated_at": "2025-12-10T17:35:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33962",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 340,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3081703530,
      "number": 34031,
      "title": "net: Remove \"tor\" as a network specification",
      "body": "\"tor\" as a network specification was deprecated in 60dc8e4208 in favor of \"onion\" \r\nand this commit removes it and updates the relevant test.\r\n\r\nPreviously #16029. This has been warning as being deprecated since `v0.17.0`.\r\n\r\nThis PR only removes the already deprecated usage of tor as a network specification, the use of tor throughout the codebase, is not deprecated.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-08T13:41:27Z",
      "updated_at": "2025-12-10T17:27:20Z",
      "merged_at": "2025-12-10T11:51:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34031",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 414,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3089915616,
      "number": 34043,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "th30neee",
      "created_at": "2025-12-10T16:01:27Z",
      "updated_at": "2025-12-10T16:01:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34043",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3051606973,
      "number": 33961,
      "title": "script: Add a separate ScriptError for empty pubkeys encountered in Tapscript",
      "body": "We currently have two callsites for `SCRIPT_ERR_PUBKEYTYPE`:\r\n- A pre-tapscript policy error behind the `SCRIPT_VERIFY_STRICTENC` flag: https://github.com/bitcoin/bitcoin/blob/4de26b111f4d9b116d0d4930f8bbd69889b3cf75/src/script/interpreter.cpp#L220\r\n- A [consensus error](https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki?plain=1#L93) in Tapscript: https://github.com/bitcoin/bitcoin/blob/4de26b111f4d9b116d0d4930f8bbd69889b3cf75/src/script/interpreter.cpp#L368\r\n\r\nIt would be good for readability and testability to have separate errors for both cases, as they are quite distinct (policy vs. consensus, format vs. emptiness).\r\n\r\n**This PR adds `SCRIPT_ERR_TAPSCRIPT_EMPTY_PUBKEY` for the consensus error path.**\r\n\r\nThis change would make our error handling more consistent. We have more granular errors for other pubkey error paths already: `SCRIPT_ERR_WITNESS_PUBKEYTYPE`,  `SCRIPT_ERR_DISCOURAGE_UPGRADABLE_PUBKEYTYPE`. We also have separate errors for MINIMAL_IF: `SCRIPT_ERR_MINIMALIF` for the policy error pre-tapscript, and `SCRIPT_ERR_TAPSCRIPT_MINIMALIF` for the consensus error post-tapscript.\r\n\r\nTests:\r\n\r\nAdded a test case to `script_tests` and ran `build/bin/test_bitcoin --run_test=script_tests --log_level=success`.\r\n```\r\ntest/script_tests.cpp:144: info: check '[[\"aa\",\"#SCRIPT# 0 CHECKSIG\",\"#CONTROLBLOCK#\",0.00000001],\"\",\"0x51 0x20 #TAPROOTOUTPUT#\",\"P2SH,WITNESS,TAPROOT\",\"TAPSCRIPT_EMPTY_PUBKEY\",\"TAPSCRIPT: OP_CHECKSIG with empty pubkey must fail\"] (with flags 165d5d)' has passed\r\n...\r\n```\r\n\r\nRan `DIR_UNIT_TEST_DATA=\"$(pwd)/../qa-assets/unit_test_data\" build/bin/test_bitcoin --run_test=script_assets_tests --log_level=success`.\r\n\r\nUpdated `feature_taproot.py` and ran `build/test/functional/feature_taproot.py`.\r\n\r\nLooking forward to your feedback.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-11-27T15:30:47Z",
      "updated_at": "2025-12-10T15:59:45Z",
      "merged_at": "2025-12-09T16:01:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33961",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1861,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1844209806,
      "number": 29982,
      "title": "test: Fix intermittent issue in wallet_backwards_compatibility.py",
      "body": "When creating and replacing a transaction using `bumpfee`, an async update is sent in the form of the `TransactionAddedToMempool` and `TransactionRemovedFromMempool` signals. When `wallet_backwards_compatibility.py` creates `tx3_id` this way and replaces it with `tx4_id`, the `abandontransaction` rpc is called right after. In some cases the `TransactionAddedToMempool` and `TransactionRemovedFromMempool` is handled after the transaction is abandoned in the wallet, and overwrites the transaction's `abandoned` flag. This PR forces the signals to get handled before `abandontransaction` is called by invoking `self.sync_mempools` which calls `syncwithvalidationinterfacequeue` on every node's rpc connection.\r\n\r\nThis will mitigate the immediate inconsistency observed with the abandontransaction call, but the potential race conditions between the signals and wallet operations may also be useful to note in a separate issue (if it's okay to not address it in this one).\r\n\r\nFixes #29806 ",
      "state": "closed",
      "user": "Randy808",
      "created_at": "2024-04-28T04:24:19Z",
      "updated_at": "2025-12-10T12:26:04Z",
      "merged_at": "2024-12-10T21:29:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29982",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1055,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1756360981,
      "number": 29564,
      "title": "wallet: clarify FundTransaction signature",
      "body": "Follow up for #28560 ([comment](https://github.com/bitcoin/bitcoin/pull/28560#discussion_r1432869408))\r\n\r\nPass `vector<CTxIn>` instead of `CMutableTransaction` through parameters. Pass `locktime` and `nVersion` as part of `CoinControl` object.",
      "state": "closed",
      "user": "S3RK",
      "created_at": "2024-03-05T09:01:20Z",
      "updated_at": "2025-12-10T12:26:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29564",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 285,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2839326033,
      "number": 33423,
      "title": "qa: Improvements to debug_assert_log + busy_wait_for_debug_log",
      "body": "* Remove incorrect docstring in `busy_wait_for_debug_log()`.\r\n* Replace nerfed regex searches with `X in Y` expressions.\r\n* Only compute the log string to be printed on failure *when we actually fail* instead of every 0.05s.\r\n* As we find each needle (expected message) in the haystack (log output), stop searching for it. **If we fail and time out, we will only complain about the needles (expected messages) we didn't find. On master we also include found needles, which is less helpful.**\r\n\r\nFound while developing a new test case in https://github.com/bitcoin/bitcoin/pull/33336#discussion_r2351892330",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-09-18T08:39:52Z",
      "updated_at": "2025-12-10T11:41:05Z",
      "merged_at": "2025-12-10T11:41:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33423",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 668,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3072367756,
      "number": 34008,
      "title": "log: don't rate-limit \"new peer\" with -debug=net",
      "body": "Previously, when `debug=net` is enabled, we log \"New [..] peer connected\" for new inbound peers with `LogInfo`. However, `LogInfo` will get rate-limited since https://github.com/bitcoin/bitcoin/pull/32604. When we specifically turn on `debug=net`, we don't want these log messages to be rate-limited.\r\n\r\nTo fix this, use `LogDebug(BCLog::NET, ...)` for potentially high-rate inbound connections. Otherwise use `LogInfo`. This means we don't rate-limit the messages for inbound peers when `debug=net` is turned on but will rate-limit if we created outbound at a high rate as these are logged via `LogInfo`.\r\n\r\nThe new log messages look similar to:\r\n```\r\n2025-12-08T00:00:00Z [net] New inbound peer connected: transport=v2 version=70016 blocks=0 peer=1\r\n2025-12-08T00:00:00Z New outbound-full-relay peer connected: transport=v2 version=70016 blocks=281738 peer=5\r\n```\r\n\r\n--\r\n\r\nI ran into this message getting rate-limited on one of my monitoring nodes with `-logsourcelocations=1`: With logsourcelocations, one of these lines is about 338 chars (or 338 bytes) long. We rate-limit after more than 1048576 bytes per hour, which results in about 3100 in- and outbound connections per hour. With evicted and instantly reconnecting connections from an entity like LinkingLion, this can be reached fairly quickly.",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-04T17:51:16Z",
      "updated_at": "2025-12-10T08:25:20Z",
      "merged_at": "2025-12-09T19:16:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34008",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1354,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2747517302,
      "number": 33191,
      "title": "net: Provide block templates to peers on request",
      "body": "Implements the sending side of `SENDTEMPLATE`, `GETTEMPLATE`, `TEMPLATE` message scheme for sharing block templates with peers via compact block encoding/reconstruction.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-08-14T22:33:27Z",
      "updated_at": "2025-12-09T23:39:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33191",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 218,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3003195750,
      "number": 33861,
      "title": "build: Bump VS minimum supported version to 18.0",
      "body": "The new [VS 18.0](https://learn.microsoft.com/en-us/visualstudio/releases/2026/release-notes) release includes numerous bug fixes.\r\n\r\nDrafted pending Visual Studio 2026 [availability](https://github.com/actions/runner-images/issues/13291) in GHA.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-12T15:09:54Z",
      "updated_at": "2025-12-09T19:38:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33861",
      "labels": [
        "Refactoring",
        "Windows",
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 295,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2892022543,
      "number": 33553,
      "title": "validation: Improve warnings in case of chain corruption",
      "body": "In case of corruption that leads to a block being marked as invalid that is seen as valid by the rest of the network, the user currently doesn't receive good error messages, but will often be stuck in an endless headers-sync loop with no explanation (#26391).\r\n\r\nThis PR improves warnings in two ways:\r\n- When we receive a header that is already saved in our disk, but invalid, add a warning. This will happen repeatedly during the headerssync loop (see https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-1291765534 on how to trigger it artificially).\r\n- Removes the IBD check from `CheckForkWarningConditions` and adds a call to the function during init (`LoadChainTip()`). The existing check was added in https://github.com/bitcoin/bitcoin/commit/55ed3f14751206fc87f0cbf8cb4e223efacef338 a long time ago when we had more sophisticated fork detection that could lead to false positives during IBD, but that  logic was removed in https://github.com/bitcoin/bitcoin/commit/fa62304c9760f0de9838e56150008816e7a9bacb so that I don't see a reason to suppress the warning anymore.\r\n\r\nFixes #26391 (We'll still do the endless looping, trying to find a peer with a headers that we can use, but will now repeatedly log warnings while doing so).\r\n",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-10-06T21:49:22Z",
      "updated_at": "2025-12-09T18:30:31Z",
      "merged_at": "2025-12-09T16:28:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33553",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1304,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2322841020,
      "number": 31823,
      "title": "tests: Add witness commitment if we have a witness transaction in `FullBlockTest.update_block()`",
      "body": "This is useful for test cases where we want to test logic invalid blocks that contain witness transactions. If we don't add the witness commitment as per [BIP141](https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#user-content-Commitment_structure), blocks will be rejected with the error [`Block mutated`](https://github.com/bitcoin/bitcoin/blob/fb0ada982a73687520c43b8fde480fa5d456f3e1/src/validation.cpp#L4180).\r\n\r\nThis change was needed in https://github.com/ajtowns/bitcoin/pull/13 which is a soft fork proposal to disallow 64 byte transactions. We want to test that 64 byte transactions serialized without the witness are invalid. If we do not have this change, we cannot directly test the logic that rejects 64 byte transactions.\r\n\r\nI decided to PR this upstream as many soft fork proposals may not see the light of day, but this functionality seems strictly additive to the test framework.",
      "state": "closed",
      "user": "Christewart",
      "created_at": "2025-02-07T18:05:39Z",
      "updated_at": "2025-12-09T16:11:22Z",
      "merged_at": "2025-12-09T16:11:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31823",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 1006,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3025117108,
      "number": 33909,
      "title": "doc, ci: Make the max number of commits tested explicit",
      "body": "Gives less of a false sense of security.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-11-19T09:45:23Z",
      "updated_at": "2025-12-09T15:52:05Z",
      "merged_at": "2025-12-09T15:52:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33909",
      "labels": [
        "Docs",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 96,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3062178914,
      "number": 33993,
      "title": "init: point out -stopatheight may be imprecise",
      "body": "`-stopatheight` is used to stop running bitcoind after reaching a given height. However, this feature is imprecise since some blocks can still be processed during the shutdown.\r\n\r\nThere are some previous discussions around it in https://github.com/bitcoin/bitcoin/pull/13713, https://github.com/bitcoin/bitcoin/pull/13490 and https://github.com/bitcoin/bitcoin/issues/13477. However, I'm not sure if it will get fixed since it's undesirable to burden the validation code further with this and we can bypass this behavior by using `invalidateblock` to wind back. Anyway, since at this moment its behavior is imprecise I think worth mentioning it in documentation.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-12-02T06:27:29Z",
      "updated_at": "2025-12-09T15:40:03Z",
      "merged_at": "2025-12-09T15:40:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33993",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 709,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2972802898,
      "number": 33771,
      "title": "refactor: C++20 operators",
      "body": "Remove all `operator!=` definitions and provide `operator<=>` as a replacement where all relational comparison operators were defined before.\r\n\r\nThe compiler is able to deduce missing comparison operators from `operator!=` and `operator<=>`. The compiler provided operators have the following advantages:\r\n\r\n1. less code\r\n2. guaranteed consistency\r\n\r\nRefactoring that changes the implementation, or replaces it with `= default` is left for a separate PR.",
      "state": "closed",
      "user": "purpleKarrot",
      "created_at": "2025-11-03T13:49:08Z",
      "updated_at": "2025-12-09T12:37:57Z",
      "merged_at": "2025-12-08T16:46:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33771",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 480,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3048243605,
      "number": 33952,
      "title": "depends: update freetype and document remaining `bitcoin-qt` runtime libs",
      "body": "Update freetype to `2.11.1`.\r\nUpdating fontconfig (currently `2.12.6`) to `2.13.1` requires what looks like a hard dep on gperf; leaving that as-is for now.\r\nDocument expectations in `symbol-check.py`.\r\nCloses #29977 (changes are based on discussion there).",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-26T16:41:50Z",
      "updated_at": "2025-12-09T11:40:25Z",
      "merged_at": "2025-12-08T10:10:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33952",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2913608082,
      "number": 33623,
      "title": "doc: document capnproto and libmultiprocess deps in 29.x",
      "body": "Closes: #33576\r\n\r\nThese dependencies are both undocumented, and libmultiprocess has a relatively special requirement in that v6.0 and later are known to not work with v29.x of Bitcoin Core due to https://github.com/bitcoin-core/libmultiprocess/pull/160",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-10-14T13:09:15Z",
      "updated_at": "2025-12-09T10:36:19Z",
      "merged_at": "2025-12-09T10:36:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33623",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 309,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3075653790,
      "number": 34018,
      "title": "log: exempt all category-specific logs from ratelimiting when running with debug",
      "body": "Previously, running with `-debug=<category>` would exempt the debug and trace log messages in that category from rate limiting, but not the info/warning/error category-specific messages (which are rare). This is unintuitive and unnecessary.\r\n\r\nWhen users run with `-debug`, we already assume they are power users and that they will have significantly higher log volumes, so there is no real benefit from suppressing info log messages in that category.\r\n\r\nFix this by applying ratelimiting exceptions from `-debug=<category>` to all logs in that category.\r\n\r\nAlso updates `net_processing` to log new peer connections with `NET` category. This way, when running with `-debug=net`, the log message (which can be frequent) will not get ratelimited when the user explicitly opts into getting higher log volumes for net.\r\n\r\nIntroduces slight behaviour change by prefixing the log message with [net:info].\r\n\r\nAlternative to #34008",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-12-05T15:53:43Z",
      "updated_at": "2025-12-09T09:59:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34018",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1004,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3071647442,
      "number": 34006,
      "title": "Add util::Expected (std::expected)",
      "body": "Some low-level code could benefit from being able to use `std::expected` from C++23:\r\n\r\n* Currently, some code is using `std::optional<E>` to denote an optional error. This is fine, but a bit confusing, because `std::optional` is normally used for values, not errors. Using `std::expected<void, E>` is clearer.\r\n* Currently, some code is using `std::variant<V, E>` to denote either a value or an error. This is fine, but a bit verbose, because `std::variant` requires a visitor or get_if/holds_alternative instead of a simple call of the `operator bool` for `std::expected`.\r\n\r\nIn theory, `util::Result` could be taught to behave similar to `std::expected` (see https://github.com/bitcoin/bitcoin/pull/34005). However, it is unclear if this is the right approach:\r\n\r\n* `util::Result` is mostly meant for higher level code, where errors come with translated error messages.\r\n* `std::expected` is mostly meant for lower level code, where errors could be an enum, or any other type.\r\n* https://github.com/bitcoin/bitcoin/pull/25665 aims to minimize the memory footprint of the error by wrapping it in a unique_ptr internally. `std::expected` requires the value and error to be \"nested within it\" (https://cplusplus.github.io/LWG/issue4141). So from a memory-layout perspective, the two are not compatible.\r\n* `std::expected` also comes with `std::unexpected`, which also does not map cleanly to `util::Result`.\r\n\r\nSo just add a minimal drop-in port of `std::expected`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-04T14:36:17Z",
      "updated_at": "2025-12-09T08:29:33Z",
      "merged_at": "2025-12-09T01:12:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34006",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1500,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2732065267,
      "number": 33160,
      "title": "bench: Add more realistic Coin Selection Bench",
      "body": "First draft for a Coin Selection Benchmark that doesn’t just test a worst case of one of the algorithms but tries to select inputs for a variety of different targets.",
      "state": "open",
      "user": "murchandamus",
      "created_at": "2025-08-09T02:17:59Z",
      "updated_at": "2025-12-09T02:33:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33160",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2799580389,
      "number": 33306,
      "title": "index: Force database compaction in coinstatsindex",
      "body": "This PR forces full database compaction on coinstatsindex every 10,000 blocks. This does not seem to come with any considerable performance impact, though I did not test on many different systems.\r\n\r\nMotivation: Currently, coinstatsindex ends up using a lot of 55kb files if this is not the case. This is likely related to very fast writes occurring during sync but so far I could not pin down where exactly the difference in behavior is coming from. It seems to be a LevelDB internal thing though, since I can not make out any difference in configuration between coinstatsindex and the other indexes.\r\n\r\nThis was first reported here: https://github.com/bitcoin/bitcoin/pull/30469#issuecomment-3235597424",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-09-04T13:56:22Z",
      "updated_at": "2025-12-09T02:22:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33306",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 755,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2972930823,
      "number": 33772,
      "title": "prevector: simplify implementation of comparison operators and match behavior of `std::vector`",
      "body": "The reduced amount of code reduces maintenance. Providing `prevector::operator<=>` allows classes that are implemented in terms of `prevector` to use the compiler provided `operator<=>`.\r\n\r\nHowever, **there is a breaking change**!\r\n\r\nThe old implementation claims to be a drop-in replacement for `std::vector`. However, the implementation for `operator<` is different when comparing two vectors of different length, as can be presented with the following code:\r\n\r\n```cpp\r\nint main()\r\n{\r\n    auto const v12 = std::vector{1, 2};\r\n    auto const v3 = std::vector{3};\r\n\r\n    auto const pv12 = prevector<4, int>(v12.begin(), v12.end());\r\n    auto const pv3 = prevector<4, int>(v3.begin(), v3.end());\r\n\r\n    assert((v12 < v3) == (pv12 < pv3));\r\n}\r\n```\r\n\r\nWith the old implementation of `prevector`, the assertion fails. With my change, it passes.\r\nI ask the reviewers to confirm whether this change in behavior is acceptable or not.",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-11-03T14:23:43Z",
      "updated_at": "2025-12-08T17:44:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33772",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1021,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2947151628,
      "number": 33702,
      "title": "contrib: Remove brittle, confusing and redundant UTF8 encoding from Python IO",
      "body": "Historically, there was an attempt via `test/lint/lint-python-utf8-encoding.py` to enforce explicit UTF8 in every Python IO statement (`open`, `subprocess`, ...). However, the lint check has many problems:\r\n\r\n* The check is incomplete and many IO statements lack the explicit UTF8 specification.\r\n* It was added at a time when some systems were not UTF8 by default.\r\n* The check is brittle, as it depends on a fragile regex.\r\n\r\nIn theory, now that the minimum Python version is 3.10 (since commit 2123c94448ed142e78942421c597a1f264859c48), the check could be replaced by `PYTHONWARNDEFAULTENCODING=1` from https://docs.python.org/3/whatsnew/3.10.html#optional-encodingwarning-and-encoding-locale-option. However, this comes with many other problems:\r\n\r\n* All our Python scripts already assume and require UTF8 to be set externally. On almost all modern systems, this is already the default. Some Windows versions do not have UTF8 by default and require `PYTHONUTF8=1` to be set for the tests to run already today (with or without the changes in this pull). Also, the CI and many other Bash scripts force UTF8 via `LC_ALL`. Finally, Python 3.15 will likely enable UTF8 on *all* systems by default, per https://peps.python.org/pep-0686/#abstract.\r\n* So adding UTF8 to every single IO call is redundant, verbose, and confusing, given that it is the expected default.\r\n\r\nSo fix all issues, by:\r\n\r\n* Removing the `test/lint/lint-python-utf8-encoding.py` check.\r\n* Removing the encoding on the individual IO calls.\r\n* Clarifying the existing docs around the existing UTF8 requirement and assumption.\r\n\r\nObviously, every IO call is still free to specify UTF8 or any other encoding explicitly, if there is a documented need for it in the future.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-10-25T10:07:52Z",
      "updated_at": "2025-12-08T13:48:50Z",
      "merged_at": "2025-12-03T09:54:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33702",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1815,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 279163499,
      "number": 16029,
      "title": "netbase: Remove \"tor\" as a network specification",
      "body": "```\r\n\"tor\" as a network specification was deprecated in 60dc8e4208 in favor\r\nof \"onion\" and this commit removes it and updates the relevant test.\r\n```",
      "state": "closed",
      "user": "dongcarl",
      "created_at": "2019-05-15T15:59:05Z",
      "updated_at": "2025-12-08T13:42:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/16029",
      "labels": [
        "Tests",
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 199,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2218784581,
      "number": 31433,
      "title": "test: #31212 follow up (spelling, refactor)",
      "body": "- Fixes typo caught by spelling linter (https://github.com/bitcoin/bitcoin/runs/33979284676).\r\n- Minor but nice refactoring of *combine_logs.py* change that was suggested late: https://github.com/bitcoin/bitcoin/pull/31212#discussion_r1869307947",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-12-05T23:08:31Z",
      "updated_at": "2025-12-08T12:24:40Z",
      "merged_at": "2024-12-08T16:33:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31433",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 289,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2390971713,
      "number": 32058,
      "title": "test: get rid of redundant TODO tag",
      "body": "The `FEE` parameter in `test/functional/feature_dbcrash.py::generate_small_transaction()` is not a fee rate, but an absolute fee. Hence, it doesn't make sense to replace it with node relay based fee calculation. Get rid of the TODO comment suggesting otherwise.",
      "state": "closed",
      "user": "Chand-ra",
      "created_at": "2025-03-13T13:28:11Z",
      "updated_at": "2025-12-08T07:34:19Z",
      "merged_at": "2025-03-28T02:08:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32058",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 297,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3080174654,
      "number": 34029,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Osptium-Invincible",
      "created_at": "2025-12-08T05:41:01Z",
      "updated_at": "2025-12-08T05:41:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34029",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2143873100,
      "number": 31149,
      "title": "tinyformat: enforce compile-time checks for format string literals",
      "body": "_Carved out of #30928 - this PR doesn't include the controversial change of suppressing `tinyformat::format_error` throwing behaviour, and just adds enforcement of compile-time checks for format string literals._\r\n\r\nReduce unexpected run-time crashes from string formatting by enforcing compile-time format string checks for most* `tfm::format` and `strprintf` usage.\r\n\r\nThis PR should introduce no behaviour change.\r\nThe main changes are:\r\n- remove the `const std::string&` `tfm::format` overload since it's not necessary. Usage of this overload is removed by one of:\r\n  - replacing string concatenation in the format string with just an extra parameter\r\n  - using the `bilingual_str` overload\r\n  - using the new `tfm::format_raw` functions (only for tinyformat implementation or tests)\r\n- rename the non-compile-time-validated `tfm::format` overloads to `tfm::format_raw`, so existing callsites by default use the safer `util::ConstevalFormatString` `tfm::format` overloads. Callsites that for some reason don't pass the compile-time checks (such as in `bitcoin-cli.cpp`) can use `tfm::format_raw`.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/31149#discussion_r1816650254 for an example on how this PR can prevent a run-time error for a small format string mistake.\r\n\r\n_* See #31061 for `bilingual_str format(const bilingual_str& fmt, const Args&... args)` compile-time checks._",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2024-10-24T14:32:07Z",
      "updated_at": "2025-12-07T12:24:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31149",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1450,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1768842403,
      "number": 29641,
      "title": "scripted-diff: Use LogInfo over LogPrintf",
      "body": "`LogPrintf` has many issues:\r\n\r\n* It does not mention the log severity (info).\r\n* It is a deprecated alias for `LogInfo`, according to the dev notes.\r\n* It wastes review cycles, because reviewers sometimes point out that it is deprecated.\r\n* It makes the code inconsistent, when both versions of the alias are used.\r\n\r\nFix all issues by removing the deprecated alias.\r\n\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-03-12T20:21:40Z",
      "updated_at": "2025-12-07T12:01:37Z",
      "merged_at": "2025-12-06T13:47:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29641",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 419,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078974102,
      "number": 34027,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "ryslan25500-cloud",
      "created_at": "2025-12-07T09:45:48Z",
      "updated_at": "2025-12-07T09:55:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34027",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078291073,
      "number": 34024,
      "title": "rpc: Reject distinct transactions in combinerawtransaction",
      "body": "Previously, combinerawtransaction silently processed only the first transaction when given unrelated transactions as input, ignoring the rest. This could be confusing and lead to unexpected behavior.\r\n\r\nThis change adds validation to ensure all transactions passed to combinerawtransaction have the same base structure (same inputs and outputs), throwing RPC_INVALID_PARAMETER if they differ.\r\n\r\nFixes #25980\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "mossein",
      "created_at": "2025-12-06T22:17:25Z",
      "updated_at": "2025-12-06T22:24:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34024",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2533,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2698741395,
      "number": 33072,
      "title": "[p2p] Fix signed integer overflow in LocalServiceInfo::nScore",
      "body": "## Problem\r\nThe `nScore` field in `LocalServiceInfo` struct was defined as `int` (32-bit signed integer), which could overflow from `INT_MAX` (2,147,483,647) to `INT_MIN` (-2,147,483,648) when incremented by `SeenLocal()` during version handshakes. This is undefined behavior in C++ and could affect address selection logic.\r\n\r\n## Solution\r\nImplement saturation in `SeenLocal()` to cap `nScore` at `std::numeric_limits<int>::max()` instead of allowing overflow. This prevents undefined behavior while maintaining memory efficiency and logical correctness - after 2 billion connections, the matter is settled.\r\n\r\n## Testing\r\n- Added test case `LocalAddress_nScore_Overflow` that verifies saturation behavior\r\n- Test passes, confirming the fix works as expected\r\n- Backward compatible - no breaking changes\r\n\r\n## Impact\r\n- Prevents undefined behavior from integer overflow\r\n- Maintains memory efficiency (keeps `int` instead of `int64_t`)\r\n- Logically correct - no need for values beyond 2 billion\r\n\r\nFixes #24049\r\n",
      "state": "closed",
      "user": "b-l-u-e",
      "created_at": "2025-07-28T01:33:57Z",
      "updated_at": "2025-12-06T20:07:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33072",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1075,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1814496897,
      "number": 29838,
      "title": "Feature: Use different datadirs for different signets",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/27494\r\n\r\nWhen the `-signetchallenge` argument is provided, the hash-160 of the challenge is appended to the data directory name. This ensures that each signet has its own distinct data directory, following the naming convention `signet_XXXXXXX`.\r\n\r\nNote:\r\nThe behaviour of the default signet remains unchanged\r\n\r\n### Update:\r\n\r\nWhen the `-signetchallenge` argument is provided, `the first 8 characters of the hash-160 of the challenge` are appended to the data directory name. This ensures that each signet has its own distinct data directory, following the naming convention `signet_XXXXXXX`.\r\n\r\n",
      "state": "open",
      "user": "BrandonOdiwuor",
      "created_at": "2024-04-09T16:25:32Z",
      "updated_at": "2025-12-06T15:35:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29838",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 699,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2980902571,
      "number": 33792,
      "title": "net_processing: reorder the code that handles the VERSION message",
      "body": "Change the order in which code snippets are executed as a result of receiving the `VERSION` message. Move the snippets that do `MakeAndPushMessage()` near the end. This makes it easier to interrupt the execution when no messages should be sent as a response to the `VERSION` messages, in private broadcast connections.\r\n\r\nThis is a non-functional change.\r\n\r\n---\r\n\r\nThis is part of [#29415 Broadcast own transactions only via short-lived Tor or I2P connections](https://github.com/bitcoin/bitcoin/pull/29415). Putting it in its own PR to reduce the size of #29415 and because it does not depend on the other commits from there.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-11-05T15:01:13Z",
      "updated_at": "2025-12-06T13:52:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33792",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 692,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2894220927,
      "number": 33565,
      "title": "net_processing: rename RelayTransaction to better describe what it does",
      "body": "Rename `PeerManager::RelayTransaction()` to\r\n`PeerManager::InitiateTxBroadcastToAll()`. The transaction is not relayed when the method returns. It is only scheduled for broadcasting at a later time. Also, there will be another method which only schedules for broadcast to Tor or I2P peers.\r\n\r\n---\r\n\r\nThis is part of [#29415 Broadcast own transactions only via short-lived Tor or I2P connections](https://github.com/bitcoin/bitcoin/pull/29415). Putting it in its own PR to reduce the size of #29415 and because it does not depend on the other commits from there.\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-10-07T14:30:21Z",
      "updated_at": "2025-12-06T13:51:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33565",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3075611485,
      "number": 34017,
      "title": "fuzz: Add a test case for `ParseByteUnits()`",
      "body": "`ParseByteUnits()` is the only parsing function in `strencodings.cpp` lacking a fuzz test. Add a test case to check the function against arbitrary strings and randomized `default_multiplier`.",
      "state": "closed",
      "user": "Chand-ra",
      "created_at": "2025-12-05T15:39:26Z",
      "updated_at": "2025-12-06T13:41:19Z",
      "merged_at": "2025-12-06T13:41:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34017",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 236,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1725528875,
      "number": 29432,
      "title": "Stratum v2 Template Provider (take 3)",
      "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. Compared to #28983 it introduces EllSwift in the handshake and fixes various bugs. I used that opportunity to change the branch name, which makes testing against [SRI](https://github.com/stratum-mining/stratum) slightly easier. There's no conceptual discussion on #28983 so it can be ignored by reviewers.\r\n\r\nSee [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/sv2/doc/stratum-v2.md) for a brief description of Stratum v2 and the role of Bitcoin Core in that system..\r\n\r\nThere's roughly four layers:\r\n\r\n1. Noise encryption #29346\r\n2. Messages and transport layer #30315\r\n3. Sv2Connman https://github.com/Sjors/bitcoin/pull/50\r\n4. The Template Provider https://github.com/Sjors/bitcoin/pull/49\r\n5. Starting the Template Provider from init, and misc stuff (this PR)\r\n\r\n## What to test and review?\r\n\r\nSee the [testing guide](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md#testing-guide) for various ways to test this PR. This branch is actively used by (testnet) pools, so it should be ready for high level review.\r\n\r\nI split this PR into separate pull requests for easier review. Feedback on each of them is welcome, even if they're stacked on another one.\r\n\r\n- [ ] #29346\r\n- [ ] #30315\r\n- [ ] https://github.com/Sjors/bitcoin/pull/50\r\n  - [ ] https://github.com/bitcoin/bitcoin/pull/30205\r\n- [ ] https://github.com/Sjors/bitcoin/pull/49 \r\n- [ ] #29295\r\n\r\nEven if we abandon the approach here in favor of a sidecar (see experimental below), it is useful to review the above changes. They are fully reusable as demonstrated in https://github.com/Sjors/bitcoin/pull/48. And until we actually ship something else, the above is being used by people, including on (very limited) mainnet.\r\n\r\nThe pull requests below enable a sidecar approach:\r\n\r\n- [x] #30509\r\n- [x] #30510\r\n- [x] #30409\r\n- [x] #30440\r\n- [x] #30955\r\n- [ ] #31003\r\n\r\nThese are needed with any approach:\r\n\r\n- [ ] Custom signet mining improvement: #29032\r\n\r\nExploratory / experimental:\r\n\r\n- [ ] https://github.com/Sjors/bitcoin/pull/47\r\n- [ ] https://github.com/Sjors/bitcoin/pull/48 (\"sidecar\" alternative approach using IPC)\r\n\r\nRelated useful:\r\n\r\n- [x] #29775 (most active sv2 testing is on testnet4)\r\n- [x] #30209\r\n\r\n## Contributing\r\n\r\nIf you want to help out with any of the issues below, please open a PR to my fork. I will then squash your commits into my own where needed. \r\n\r\n## Things left todo\r\n\r\n### Networking\r\n\r\n- [ ] add `-sv2allowip`\r\n- [ ] optional `-sv2cert`\r\n- [ ] limit number of connected clients\r\n\r\n### Template generation and updating\r\n\r\n- [ ] group templates with the same `coinbase_tx_additional_output_size`\r\n\r\n### Misc\r\n\r\n\r\n## Potential followups\r\n\r\n- [ ] implement Noise protocol and mock client in Python, add functional tests (based on `test/sv2_template_provider_tests.cpp`)\r\n- [ ] leverage cluster mempool for quicker push updates (see https://github.com/Sjors/bitcoin/pull/52)\r\n- [ ] https://github.com/Sjors/bitcoin/pull/54",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-02-14T11:34:49Z",
      "updated_at": "2025-12-06T12:23:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29432",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3167,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2164677203,
      "number": 31231,
      "title": "cmake: Fix `IF_CHECK_PASSED` option handling",
      "body": "`IF_CHECK_PASSED` is a multi-value keyword, resulting in a list value. Convert it to a string before applying any `string()` command.\r\n\r\nSplit from https://github.com/bitcoin/bitcoin/pull/30861.\r\n\r\nNo current CMake code is affected by this bug.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-06T09:01:56Z",
      "updated_at": "2025-12-06T12:23:48Z",
      "merged_at": "2024-12-06T10:16:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31231",
      "labels": [
        "Bug",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 289,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2119587212,
      "number": 31072,
      "title": "refactor: Clean up messy strformat and bilingual_str usages",
      "body": "This PR cleans up string formatting in the codebase so other PRs adding compile time checking can be simpler and easier to review (specifically #30928, #31061, #31074, and #31149).\r\n\r\nCurrently these PRs are hard to review because in addition to changing formatting APIs, they have to update callers that are using the API's in unusual ways. Clean up these callers now so later PRs can be simpler. Specifically:\r\n\r\n- Use string literals instead of `std::string` format strings to enable more compile-time checking.\r\n- Avoid using untranslated bilingual strings as format strings. Use originals so they can by checked at compile time.\r\n- Favor `Untranslated(strprintf(...))` over `strprintf(Untranslated(...), ...)` for consistency and to prevent translated and untranslated strings from being unintentionally combined.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2024-10-11T12:19:46Z",
      "updated_at": "2025-12-06T12:23:48Z",
      "merged_at": "2024-12-06T11:38:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31072",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 878,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2215280083,
      "number": 31417,
      "title": "test: Avoid F541 (f-string without any placeholders)",
      "body": "An extra `f` string-prefix is mostly harmless, but could be confusing or hint to a mistake where a format argument was forgotten.\r\n\r\nTry to avoid the confusion and mistakes by applying the `F541` linter rule.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-04T13:34:48Z",
      "updated_at": "2025-12-06T12:23:47Z",
      "merged_at": "2024-12-06T10:27:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31417",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 261,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2211404326,
      "number": 31406,
      "title": "test: fix `test_invalid_tx_in_compactblock` in `p2p_compactblocks`",
      "body": "`test_invalid_tx_in_compactblock` tests that we don't get disconnected if we relay a compact block with valid header, but invalid transactions. \r\n\r\nIn this test, after sending the block with invalid transactions, this test checks two things: the tip in the receiver node did not advance and the sender did not get disconnected. However, even if the block contains only valid transactions, the tip would not advance because the receiver does not have all transactions to reconstruct the valid and would request them back. This PR fixes it by sending all the transactions.\r\n\r\nAlso, comparing block hash (int) using `is not` can lead to subtle bugs, this PR fixes it by replacing it to `!=`.\r\n\r\n--------------\r\n\r\nCan be tested by applying:\r\n```diff\r\ndiff --git a/test/functional/p2p_compactblocks.py b/test/functional/p2p_compactblocks.py\r\nindex 274ef9532c..419153a32f 100755\r\n--- a/test/functional/p2p_compactblocks.py\r\n+++ b/test/functional/p2p_compactblocks.py\r\n@@ -723,11 +723,8 @@ class CompactBlocksTest(BitcoinTestFramework):\r\n         utxo = self.utxos[0]\r\n \r\n         block = self.build_block_with_transactions(node, utxo, 5)\r\n-        del block.vtx[3]\r\n         block.hashMerkleRoot = block.calc_merkle_root()\r\n         # Drop the coinbase witness but include the witness commitment.\r\n-        add_witness_commitment(block)\r\n-        block.vtx[0].wit.vtxinwit = []\r\n         block.solve()\r\n \r\n         # Make sure node has the transactions to reconstruct the block\r\n```\r\n\r\n\r\n",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-12-02T21:54:10Z",
      "updated_at": "2025-12-06T12:23:47Z",
      "merged_at": "2024-12-06T11:30:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31406",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1549,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3000857097,
      "number": 33858,
      "title": "test: add unit test coverage for the empty leaves path in MerkleComputation",
      "body": "As noted in [#32243 (comment)](https://github.com/bitcoin/bitcoin/pull/32243#issuecomment-2988854482), the early return inside `MerkleComputation` when `leaves.size() == 0` was only exercised by fuzz tests.\r\n\r\nThe existing `merkle_test_empty_block` calls `BlockMerkleRoot`, which uses `ComputeMerkleRoot`, but does not exercise the `TransactionMerklePath` → `ComputeMerklePath` → `MerkleComputation` code path.  \r\n\r\nCoverage before adding test:\r\n<img width=\"2459\" height=\"66\" alt=\"before\" src=\"https://github.com/user-attachments/assets/ca94015a-d7c2-4281-ac60-13b22f177b67\" />\r\n\r\nCoverage after adding test:\r\n<img width=\"2459\" height=\"66\" alt=\"after\" src=\"https://github.com/user-attachments/assets/b1d4e1bb-af72-46ab-8898-f18db39dd2fb\" />\r\n",
      "state": "closed",
      "user": "frankomosh",
      "created_at": "2025-11-12T00:08:37Z",
      "updated_at": "2025-12-06T09:48:23Z",
      "merged_at": "2025-12-05T13:05:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33858",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2670706297,
      "number": 32993,
      "title": "fuzz: wallet: add target for tx scanning",
      "body": "Tracking issue (#29901)\r\n\r\nThis PR adds a fuzz target for wallet tx scanning (`ScanForWalletTransactions`). Unfortunately, it's not a regression test for the issue #31474 since it would require a more complex scenario/async operations.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2025-07-16T13:15:08Z",
      "updated_at": "2025-12-06T09:20:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32993",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 276,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3057053138,
      "number": 33975,
      "title": "depends, doc: Add `tcl` as build dependency for `sqlite` package",
      "body": "Since https://github.com/bitcoin/bitcoin/pull/32655, the `sqlite` package has relied on a native C compiler being incidentally available on the system under the default names. However, this is not always the case. For example, on Ubuntu 24.04:\r\n```\r\n$ gmake -C depends sqlite CC=gcc-14 CXX=g++-14\r\ngmake: Entering directory '/bitcoin/depends'\r\nConfiguring sqlite...\r\nNo installed jimsh or tclsh, building local bootstrap jimsh0\r\nNo working C compiler found. Tried cc and gcc.\r\ngmake: *** [funcs.mk:344: /bitcoin/depends/x86_64-pc-linux-gnu/.sqlite_stamp_configured] Error 1\r\ngmake: Leaving directory '/bitcoin/depends'\r\n```\r\n\r\nAdding the `tcl` package as an explicit build dependency, as is [done](https://github.com/fanquake/bitcoin/blob/f6acbef1084e34f126bf530df99e4ef6a11c38e8/contrib/guix/manifest.scm#L552) in the Guix script, avoids this behaviour and improves robustness.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T22:26:38Z",
      "updated_at": "2025-12-05T17:29:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33975",
      "labels": [
        "Docs",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 943,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3063877399,
      "number": 33995,
      "title": "depends: Propagate native C compiler to `sqlite` package",
      "body": "This PR:\r\n\r\n1. Ensures that autosetup can build the local bootstrap `jimsh0` when neither `jimsh` nor `tclsh` is available on the system.\r\n\r\n2. Removes the `tcl` package from the Guix manifest.\r\n\r\nThis is an alternative to https://github.com/bitcoin/bitcoin/pull/33975.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-02T14:50:16Z",
      "updated_at": "2025-12-05T17:28:59Z",
      "merged_at": "2025-12-05T17:24:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33995",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 326,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3040059658,
      "number": 33939,
      "title": "contrib: Count entry differences in asmap-tool diff summary",
      "body": "Currently the output of `asmap-tool.py diff` returns the total number of addresses that has changed at the end of the list.\r\n\r\nExample output currently:\r\n\r\n```\r\n2602:feda:c0::/48 AS1029 # was AS43126\r\n2604:7c00:100::/40 AS29802 # was AS40244\r\n# 0 IPv4 addresses changed; 79552154633921058212365205504 (2^96.01) IPv6 addresses changed\r\n```\r\n\r\nThis is good indicator but in case of a longer list I would like the number of changed entries as well, since that is an easier number to parse and for debugging of certain issues also the more relevant value. This PR adds the count of changed entries to this summary output at the end. There as also a bit more structure so it's easier to parse as well.\r\n\r\nExample new output:\r\n\r\n```\r\n2602:feda:c0::/48 AS1029 # was AS43126\r\n2604:7c00:100::/40 AS29802 # was AS40244\r\n# Summary\r\nIPv4: 0 entries with 0 addresses changed\r\nIPv6: 12 entries with 79552154633921058212365205504 (2^96.01) addresses changed\r\n```",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-11-24T13:39:36Z",
      "updated_at": "2025-12-05T15:27:07Z",
      "merged_at": "2025-12-05T15:27:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33939",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1007,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3067095408,
      "number": 33997,
      "title": "[30.x] Backports & 30.1rc1",
      "body": "Backports:\r\n* #32009\r\n* #33528\r\n* #33723\r\n* #33996\r\n\r\nPrior `30.x` backports in #33609.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-03T11:34:01Z",
      "updated_at": "2025-12-05T15:01:25Z",
      "merged_at": "2025-12-05T14:49:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33997",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 114,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3048922839,
      "number": 33956,
      "title": "net: fix use-after-free with v2->v1 reconnection logic",
      "body": "`CConnman::Stop()` resets `semOutbound`, yet `m_reconnections` is not cleared in `Stop`. Each `ReconnectionInfo` contains a `grant` member that points to the memory that `semOutbound` pointed to and `~CConnman` will attempt to access the grant field (memory that was already freed) when destroying `m_reconnections`. Fix this by calling `m_reconnections.clear()` in `CConnman::Stop()` and add appropriate annotations.\r\n\r\nI was able to reproduce the original issue https://github.com/bitcoin/bitcoin/issues/33615 with the following diff by randomly stopping my node while it was attempting to reconnect (and verified that this patch fixes the issue, at least in my ~40-50 runs):\r\n<details>\r\n<summary> diff </summary>\r\n\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex ef1c63044a..9c1d161d8b 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -1918,8 +1918,8 @@ void CConnman::DisconnectNodes()\r\n     {\r\n         LOCK(m_nodes_mutex);\r\n \r\n-        const bool network_active{fNetworkActive};\r\n-        if (!network_active) {\r\n+//        const bool network_active{fNetworkActive};\r\n+//        if (!network_active) {\r\n             // Disconnect any connected nodes\r\n             for (CNode* pnode : m_nodes) {\r\n                 if (!pnode->fDisconnect) {\r\n@@ -1927,7 +1927,7 @@ void CConnman::DisconnectNodes()\r\n                     pnode->fDisconnect = true;\r\n                 }\r\n             }\r\n-        }\r\n+//        }\r\n \r\n         // Disconnect unused nodes\r\n         std::vector<CNode*> nodes_copy = m_nodes;\r\n@@ -1941,7 +1941,7 @@ void CConnman::DisconnectNodes()\r\n                 // Add to reconnection list if appropriate. We don't reconnect right here, because\r\n                 // the creation of a connection is a blocking operation (up to several seconds),\r\n                 // and we don't want to hold up the socket handler thread for that long.\r\n-                if (network_active && pnode->m_transport->ShouldReconnectV1()) {\r\n+                if (true) {\r\n                     reconnections_to_add.push_back({\r\n                         .addr_connect = pnode->addr,\r\n                         .grant = std::move(pnode->grantOutbound),\r\n```\r\n</details>\r\n\r\nI'm curious to see if others can reproduce as well.",
      "state": "closed",
      "user": "Crypt-iQ",
      "created_at": "2025-11-26T21:03:03Z",
      "updated_at": "2025-12-05T14:37:57Z",
      "merged_at": "2025-12-05T10:23:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33956",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2041952643,
      "number": 30735,
      "title": "ci: Use C++23 in one task",
      "body": "There are no plans to switch to C++23 anytime soon in the next couple of years. The only place right now that is known to benefit is `src/compat/byteswap.h`.\r\n\r\nHowever, it is still useful to test with the option, because deprecated, removed or changed language features, as well as compiler changes that are guarded by the language version will be tested and developers can learn about them upfront.\r\n\r\nAlso includes a minor doc fixup commit.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-08-28T13:23:11Z",
      "updated_at": "2025-12-05T12:23:12Z",
      "merged_at": "2024-08-29T09:54:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30735",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 469,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2213188175,
      "number": 31414,
      "title": "test: orphan parent is re-requested from 2nd peer",
      "body": "Small test which I couldn't find coverage for.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2024-12-03T16:19:00Z",
      "updated_at": "2025-12-05T12:23:11Z",
      "merged_at": "2024-12-05T12:49:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31414",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 96,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168052125,
      "number": 31248,
      "title": "test: Rework wallet_migration.py to use previous releases",
      "body": "This PR reworks wallet_migration.py to use previous releases to produce legacy wallets for testing so that the test will continue to work once legacy wallets are removed.\r\n\r\nSplit from #28710",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-07T18:32:07Z",
      "updated_at": "2025-12-05T12:23:11Z",
      "merged_at": "2024-12-05T20:47:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31248",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 249,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217427885,
      "number": 31427,
      "title": "lint: bump MLC to v0.19.0",
      "body": "Fixes: #31044\r\n\r\nThis MLC update includes a change which will ignore files being ignored by git, and help avoid false-positives when linting in this repo.",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2024-12-05T11:27:09Z",
      "updated_at": "2025-12-05T12:23:10Z",
      "merged_at": "2024-12-05T16:34:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31427",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 180,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3071546926,
      "number": 34005,
      "title": "util: generalize `util::Result` to support custom errors",
      "body": "### Context\r\n\r\nWhile reviewing https://github.com/bitcoin/bitcoin/pull/33657 it became clear we don’t have a good value-or-error wrapper, similar in spirit to `std::expected<T, E>` in C++23.\r\n\r\n### Problem\r\n\r\nThe `util::Result` helper currently stores a `std::variant<bilingual_str, T>` and is effectively only usable for high-level code that needs to propagate user-facing error strings.\r\nLow-level code that wants typed error codes instead of strings still has to expose raw `std::variant` (or roll custom structs).\r\n\r\n### Fix\r\n\r\nGeneralize `util::Result` to take a second template parameter `E` for the error type, and store `std::variant<E, T>` internally. \r\nThe default `E` remains `bilingual_str`, so existing uses of `Result<T>` and `util::Error{...}` behave exactly as before and `ErrorString(Result<T>)` continues to work.\r\n\r\n\r\n[New code](https://github.com/l0rinc/bitcoin/pull/61/commits/536f93df79975f50781072301947cafa4640b606#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR1762-R1766) can now use typed errors and avoid the awkward `std::variant` getter, e.g.:\r\n```C++\r\nif (auto ret{chainman->m_blockman.ReadRawBlock(WITH_LOCK(cs_main, return index.GetBlockPos()))}) {\r\n    block = std::move(*ret);\r\n    return true;\r\n}\r\nreturn false;\r\n```",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-04T14:06:20Z",
      "updated_at": "2025-12-05T12:12:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34005",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1332,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3036518773,
      "number": 33924,
      "title": "qa: Remove no longer needed `feature_dirsymlinks.py`",
      "body": "This PR follows up on https://github.com/bitcoin/bitcoin/pull/33842, which removed (1) the [unused `create_directories` workaround](https://github.com/bitcoin/bitcoin/pull/33842/commits/fa9dacdbde7dc18d134019bdad24f47e4dea1dda) and (2) the corresponding [unit test](https://github.com/bitcoin/bitcoin/pull/33842/commits/fa3854e43295f71f5dad8557dd621f0f799b0ee0), but left the related functional test in place. The latter is now being removed.\r\n\r\nFor historical context, see:\r\n- https://github.com/bitcoin/bitcoin/pull/24338\r\n- https://github.com/bitcoin/bitcoin/pull/33842",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-22T15:56:30Z",
      "updated_at": "2025-12-05T11:50:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33924",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 625,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2095252001,
      "number": 30988,
      "title": "Split CConnman",
      "body": "Currently `CConnman` is a mixture of:\r\n* low level socket handling, e.g. send, recv, poll, bind, listen, connect, and\r\n* higher level logic that is specific to the Bitcoin P2P protocol, e.g. V1/V2 transport, choosing which address to connect to, if we manage to connect mark the address good in `AddrMan`, maintaining the number of inbound and outbound connections, banning of peers, interacting with `PeerManager`.\r\n\r\n---\r\n\r\nThis PR splits the socket handling into a new class which makes the code more modular and reusable. Having more modular and reusable code is a good thing on its own, even if the code is not reused. Stratum V2 and libevent-less RPC/HTTP server could benefit from this, but it makes sense on its own, even without those projects.\r\n\r\n---\r\n\r\nThe socket operations are driven by the new class `SockMan` which informs the higher level via provided methods when e.g. new data arrives on the socket or a new connection is accepted. For this, `SockMan` provides some non-virtual methods to start it rolling and then it calls pure virtual methods which are implemented by the higher level (e.g. `CConnman`) on certain events, for example \"got this new data on this node's socket\".\r\n\r\nThe interface of `SockMan` is:\r\n\r\n```cpp\r\n/**\r\n * A socket manager class which handles socket operations.\r\n * To use this class, inherit from it and implement the pure virtual methods.\r\n * Handled operations:\r\n * - binding and listening on sockets\r\n * - starting of necessary threads to process socket operations\r\n * - accepting incoming connections\r\n * - making outbound connections\r\n * - closing connections\r\n * - waiting for IO readiness on sockets and doing send/recv accordingly\r\n */\r\nclass SockMan\r\n{\r\npublic:\r\n\r\n    //\r\n    // Non-virtual functions, to be reused by children classes.\r\n    //\r\n\r\n    /**\r\n     * Bind to a new address:port, start listening and add the listen socket to `m_listen`.\r\n     * Should be called before `StartSocketsThreads()`.\r\n     * @param[in] to Where to bind.\r\n     * @param[out] err_msg Error string if an error occurs.\r\n     * @retval true Success.\r\n     * @retval false Failure, `err_msg` will be set.\r\n     */\r\n    bool BindAndStartListening(const CService& to, bilingual_str& err_msg);\r\n\r\n    /**\r\n     * Start the necessary threads for sockets IO.\r\n     */\r\n    void StartSocketsThreads(const Options& options);\r\n\r\n    /**\r\n     * Join (wait for) the threads started by `StartSocketsThreads()` to exit.\r\n     */\r\n    void JoinSocketsThreads();\r\n\r\n    /**\r\n     * Make an outbound connection, save the socket internally and return a newly generated connection id.\r\n     * @param[in] to The address to connect to, either as CService or a host as string and port as\r\n     * an integer, if the later is used, then `proxy` must be valid.\r\n     * @param[in] is_important If true, then log failures with higher severity.\r\n     * @param[in] proxy Proxy to connect through, if set.\r\n     * @param[out] proxy_failed If `proxy` is valid and the connection failed because of the\r\n     * proxy, then it will be set to true.\r\n     * @param[out] me If the connection was successful then this is set to the address on the\r\n     * local side of the socket.\r\n     * @return Newly generated id, or std::nullopt if the operation fails.\r\n     */\r\n    std::optional<SockMan::Id> ConnectAndMakeId(const std::variant<CService, StringHostIntPort>& to,\r\n                                                bool is_important,\r\n                                                std::optional<Proxy> proxy,\r\n                                                bool& proxy_failed,\r\n                                                CService& me)\r\n        EXCLUSIVE_LOCKS_REQUIRED(!m_connected_mutex, !m_unused_i2p_sessions_mutex);\r\n\r\n    /**\r\n     * Destroy a given connection by closing its socket and release resources occupied by it.\r\n     * @param[in] id Connection to destroy.\r\n     * @return Whether the connection existed and its socket was closed by this call.\r\n     */\r\n    bool CloseConnection(Id id)\r\n        EXCLUSIVE_LOCKS_REQUIRED(!m_connected_mutex);\r\n\r\n    /**\r\n     * Try to send some data over the given connection.\r\n     * @param[in] id Identifier of the connection.\r\n     * @param[in] data The data to send, it might happen that only a prefix of this is sent.\r\n     * @param[in] will_send_more Used as an optimization if the caller knows that they will\r\n     * be sending more data soon after this call.\r\n     * @param[out] errmsg If <0 is returned then this will contain a human readable message\r\n     * explaining the error.\r\n     * @retval >=0 The number of bytes actually sent.\r\n     * @retval <0 A permanent error has occurred.\r\n     */\r\n    ssize_t SendBytes(Id id,\r\n                      std::span<const unsigned char> data,\r\n                      bool will_send_more,\r\n                      std::string& errmsg) const\r\n        EXCLUSIVE_LOCKS_REQUIRED(!m_connected_mutex);\r\n\r\n    /**\r\n     * Stop listening by closing all listening sockets.\r\n     */\r\n    void StopListening();\r\n\r\n    //\r\n    // Pure virtual functions must be implemented by children classes.\r\n    //\r\n\r\n    /**\r\n     * Be notified when a new connection has been accepted.\r\n     * @param[in] id Id of the newly accepted connection.\r\n     * @param[in] me The address and port at our side of the connection.\r\n     * @param[in] them The address and port at the peer's side of the connection.\r\n     * @retval true The new connection was accepted at the higher level.\r\n     * @retval false The connection was refused at the higher level, so the\r\n     * associated socket and id should be discarded by `SockMan`.\r\n     */\r\n    virtual bool EventNewConnectionAccepted(Id id,\r\n                                            const CService& me,\r\n                                            const CService& them) = 0;\r\n\r\n    /**\r\n     * Called when the socket is ready to send data and `ShouldTryToSend()` has\r\n     * returned true. This is where the higher level code serializes its messages\r\n     * and calls `SockMan::SendBytes()`.\r\n     * @param[in] id Id of the connection whose socket is ready to send.\r\n     * @param[out] cancel_recv Should always be set upon return and if it is true,\r\n     * then the next attempt to receive data from that connection will be omitted.\r\n     */\r\n    virtual void EventReadyToSend(Id id, bool& cancel_recv) = 0;\r\n\r\n    /**\r\n     * Called when new data has been received.\r\n     * @param[in] id Connection for which the data arrived.\r\n     * @param[in] data Received data.\r\n     */\r\n    virtual void EventGotData(Id id, std::span<const uint8_t> data) = 0;\r\n\r\n    /**\r\n     * Called when the remote peer has sent an EOF on the socket. This is a graceful\r\n     * close of their writing side, we can still send and they will receive, if it\r\n     * makes sense at the application level.\r\n     * @param[in] id Connection whose socket got EOF.\r\n     */\r\n    virtual void EventGotEOF(Id id) = 0;\r\n\r\n    /**\r\n     * Called when we get an irrecoverable error trying to read from a socket.\r\n     * @param[in] id Connection whose socket got an error.\r\n     * @param[in] errmsg Message describing the error.\r\n     */\r\n    virtual void EventGotPermanentReadError(Id id, const std::string& errmsg) = 0;\r\n};\r\n```\r\n\r\nResolves: https://github.com/bitcoin/bitcoin/issues/30694\r\n\r\n---\r\n\r\nReview hint: this PR moves some code around, so reviewers may find this helpful: `git show --color-moved --color-moved-ws=allow-indentation-change`.",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-09-27T07:57:10Z",
      "updated_at": "2025-12-05T11:46:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30988",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 7452,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2378191350,
      "number": 32015,
      "title": "net: replace manual reference counting of CNode with shared_ptr",
      "body": "Before this change the code used to count references to `CNode` objects manually via `CNode::nRefCount`. Unneeded `CNode`s were scheduled for deletion by putting them in `CConnman::m_nodes_disconnected` and were deleted after their reference count reached zero. Deleting consists of calling `PeerManager::FinalizeNode()` and destroying the `CNode` object.\r\n\r\nReplace this scheme with `std::shared_ptr`. This simplifies the code and removes:\r\n`CNode::nRefCount`\r\n`CNode::GetRefCount()`\r\n`CNode::AddRef()`\r\n`CNode::Release()`\r\n`CConnman::m_nodes_disconnected`\r\n`CConnman::NodesSnapshot`\r\n\r\nNow creating a snapshot of `CConnman::m_nodes` is done by simply copying it (under the mutex).\r\n\r\nCall `PeerManager::FinalizeNode()` from the destructor of `CNode`, which is called when the reference count reaches 0.\r\n\r\nThis removes brittle code and replaces it by a code from the standard library which is more robust. All the below are possible with the manual reference counting and not possible with `shared_ptr`:\r\n* Use an object without adding a reference to it\r\n* Add too many references to an object, mismatch the add/remove by having more \"add\"\r\n* Forget to reduce the reference count, mismatch the add/remove by having less \"remove\"\r\n* Go with negative reference count by mistakenly having too many \"remove\"\r\n* Destroy an object while there are references to it\r\n\r\nThere is zero learning curve for the average C++ programmer who knows how `shared_ptr` works. Not so much with the manual reference counting because one has to learn about `AddRef()`, `Release()`, check and maintain where are they called and their relationship with `m_nodes_disconnected`.\r\n\r\n---\r\n\r\nThis has some history in https://github.com/bitcoin/bitcoin/pull/28222 and https://github.com/bitcoin/bitcoin/pull/10738. See below https://github.com/bitcoin/bitcoin/pull/32015#issuecomment-2717384152 and https://github.com/bitcoin/bitcoin/pull/32015#issuecomment-2717860925.\r\n\r\n---\r\n\r\nPossible followup: change `ProcessMessages()` and `SendMessages()` to take `CNode&`: https://github.com/bitcoin/bitcoin/pull/32015#discussion_r2088731770",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-03-07T09:53:01Z",
      "updated_at": "2025-12-05T10:44:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32015",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2167,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3050377130,
      "number": 33960,
      "title": "log: Use more severe log level (warn/err) where appropriate",
      "body": "Logging supports severity levels above info via the legacy `LogPrintf`. So use the more appropriate `LogError` or `LogWarning`, where it applies.\r\n\r\nThis has a few small benefits:\r\n\r\n* It often allows to remove the manual and literal \"error: \", \"Warning:\", ... prefixes. Instead the uniform log level formatting is used.\r\n* It is easier to grep or glance for more severe logs, which indicate some kind of alert.\r\n* `LogPrintf` didn't indicate any severity level, but it is an alias for `LogInfo`. So having the log level explicitly spelled out makes it easier to read the code.\r\n* Also, remove the redundant trailing `\\n` newline, while touching.\r\n* Also, remove the `__func__` formatting in the log string, which is redundant with `-logsourcelocations`. Instead, use a unique log string for each location.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-27T10:05:12Z",
      "updated_at": "2025-12-05T10:33:39Z",
      "merged_at": "2025-12-02T13:35:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33960",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 866,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3074350605,
      "number": 34011,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Pro2x9",
      "created_at": "2025-12-05T08:44:50Z",
      "updated_at": "2025-12-05T08:45:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34011",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3055744772,
      "number": 33969,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "th30neee",
      "created_at": "2025-11-29T16:50:24Z",
      "updated_at": "2025-12-05T05:56:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33969",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3072205548,
      "number": 34007,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "wnqqnw19",
      "created_at": "2025-12-04T17:11:29Z",
      "updated_at": "2025-12-04T17:12:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34007",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2911002547,
      "number": 33616,
      "title": "policy: don't CheckEphemeralSpends on reorg",
      "body": "Similar reasoning to https://github.com/bitcoin/bitcoin/pull/33504\r\n\r\nDuring a deeper reorg it's possible that a long sequence of dust-having transactions that are connected in a linear fashion. On reorg, this could cause each subsequent \"generation\" to be rejected. These rejected transactions may contain a large amount of competitive fees via normal means.\r\n\r\nPreCheck based `PreCheckEphemeralSpends` is left in place because we wouldn't have relayed them prior to the reorg.",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2025-10-13T17:37:23Z",
      "updated_at": "2025-12-04T16:10:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33616",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 522,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1815639680,
      "number": 29843,
      "title": "policy: Allow non-standard scripts with -acceptnonstdtxn=1 (test nets only)",
      "body": "This PR changes `-acceptnonstdtxn=1` so that it also skips the `non-mandatory` script checks, allowing txs that (eg) use OP_NOPx or OP_SUCCESS into the mempool. This remains only available on test nets.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2024-04-10T09:08:35Z",
      "updated_at": "2025-12-04T16:03:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29843",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 278,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1967039545,
      "number": 30445,
      "title": "test: addrman: tried 3 times and never a success so `isTerrible=true`",
      "body": "This PR adds test coverage for the following verification:\r\n```cpp\r\nif (TicksSinceEpoch<std::chrono::seconds>(m_last_success) == 0 && nAttempts >= ADDRMAN_RETRIES) { // tried N times and never a success\r\n    return true;\r\n}\r\n```\r\n\r\nIf we've tried an address for 3 or more times and were unsuccessful, this address should be pointed out as \"terrible\".\r\n\r\n-------\r\n\r\nYou can test this by applying:\r\n```diff\r\ndiff --git a/src/addrman.cpp b/src/addrman.cpp\r\nindex 054a9bee32..93a9521b59 100644\r\n--- a/src/addrman.cpp\r\n+++ b/src/addrman.cpp\r\n@@ -81,7 +81,7 @@ bool AddrInfo::IsTerrible(NodeSeconds now) const\r\n     }\r\n \r\n     if (TicksSinceEpoch<std::chrono::seconds>(m_last_success) == 0 && nAttempts >= ADDRMAN_RETRIES) { // tried N times and never a success\r\n-        return true;\r\n+        return false;\r\n     }\r\n```",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-07-12T17:11:37Z",
      "updated_at": "2025-12-04T12:22:46Z",
      "merged_at": "2024-12-04T20:35:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30445",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 885,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2182198249,
      "number": 31295,
      "title": "refactor: Prepare compile-time check of bilingual format strings",
      "body": "The changes are required for https://github.com/bitcoin/bitcoin/pull/31061, however they also make sense on their own. For example, they are fixing up an `inline namespace`, which lead to compile errors otherwise (can be tested by observing the compile error after reverting the changes to `src/util/strencodings.h`). Also, a unit test comment is fixed.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-15T16:37:43Z",
      "updated_at": "2025-12-04T12:22:45Z",
      "merged_at": "2024-12-04T16:16:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31295",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 418,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2128219041,
      "number": 31104,
      "title": "[28.x] Backports & 28.1rc1",
      "body": "Backports:\r\n* #30568\r\n* #31007\r\n* #31013\r\n* #31016\r\n* #31035\r\n* #31166\r\n\r\nContains:\r\n* A commit to do the same as #31307.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-10-16T15:52:03Z",
      "updated_at": "2025-12-04T12:22:45Z",
      "merged_at": "2024-12-04T13:36:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31104",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 148,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2212848213,
      "number": 31411,
      "title": "cmake: use python from venv if available",
      "body": "When running targets that depend on a python, such as:\r\n\r\n```bash\r\ncmake --build . --target test-security-check\r\ncmake --build . --target check-symbols\r\ncmake --build . --target check-security\r\n```\r\n\r\n... it can be tricky to configure cmake to use a python venv. This change checks for the `$VIRTUAL_ENV` env var and uses python from there using the following logic:\r\n\r\n- First check if $VIRTUAL_ENV is set. If it is, use the python binary from this venv.\r\n- Fall back to system python otherwise.",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2024-12-03T13:46:01Z",
      "updated_at": "2025-12-04T12:22:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31411",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 537,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2196126736,
      "number": 31356,
      "title": "Add and use `satToBtc` and `btcToSat` util functions",
      "body": "Introduce utility functions `satToBtc` and `btcToSat` to simplify and standardize conversions between satoshis and bitcoins in functional tests\r\n\r\n#closes #31345\r\n\r\nThis PR implements the solution proposed in the issue. The goal is to simplify conversions between satoshis and bitcoins in the functional tests by using utility functions. For example, code like `fee_rate=Decimal(feerate * 1000) / COIN` could become `fee_rate=satToBtc(feerate * 1000)` in the proposed solution.\r\n\r\nAn additional benefit of satToBtc() is that it ensures the use of Decimal.\r\n\r\nThis issue was briefly mentioned in [this discussion](https://github.com/bitcoin/bitcoin/pull/30079#discussion_r1602965411), where the conversion `Decimal(value) / COIN` was noted to be repetitive.\r\n\r\nWhile some may prefer to continue using the `/ COIN` and `* COIN` conversions, I don’t have a strong preference either way. I’d like to hear your opinions and, if needed, implement the approach that works best.",
      "state": "closed",
      "user": "andremralves",
      "created_at": "2024-11-23T07:13:34Z",
      "updated_at": "2025-12-04T12:22:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31356",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1023,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2532604905,
      "number": 32575,
      "title": "refactor: Split multithreaded case out of CheckInputScripts",
      "body": "This topic has been motivated by my work on batch validation and a related conversation just happened here: https://github.com/bitcoin/bitcoin/pull/32467#discussion_r2098305199 \r\n\r\n`CheckInputScripts` currently only does what its name implies if there is no multithreading usage for validation. If there are worker threads available the function instead only creates the checks and puts them into a vector. Aside from some shared pre-checks the multithreaded code path is much simpler compared to the rest. This dual use makes the function hard to grasp and its naming confusing. So this PR is splitting the single thread case from the multithread. This results in more LOC but the result is much clearer.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-05-20T20:52:49Z",
      "updated_at": "2025-12-04T12:07:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32575",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 765,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 712967024,
      "number": 22708,
      "title": "build, qt: Add Wayland support for Linux builds with depends",
      "body": "This PR adds the [QtWayland](https://doc.qt.io/qt-5/wayland-and-qt.html) module into the `qt` package in depends.\r\n\r\nThis change allows to build release binaries for Linux systems that can run natively—as a Wayland client—on modern desktops with Wayland compositors.\r\n\r\nCloses #19950.\r\n\r\n---\r\n\r\nThe diff for Qt \"Configure summary\" in depends:\r\n```diff\r\n@@ -85,11 +85,11 @@\r\n     MarkdownReader ....................... yes\r\n       Using system libmd4c ............... no\r\n     MarkdownWriter ....................... no\r\n-  EGL .................................... no\r\n+  EGL .................................... yes\r\n   OpenVG ................................. no\r\n   OpenGL:\r\n     Desktop OpenGL ....................... no\r\n-    OpenGL ES 2.0 ........................ no\r\n+    OpenGL ES 2.0 ........................ yes\r\n     OpenGL ES 3.0 ........................ no\r\n     OpenGL ES 3.1 ........................ no\r\n     OpenGL ES 3.2 ........................ no\r\n@@ -157,6 +157,24 @@\r\n   WinRT Runner Tool ...................... no\r\n Qt Tools:\r\n   QDoc ................................... no\r\n+Qt Wayland Drivers:\r\n+  EGL .................................... yes\r\n+  Raspberry Pi ........................... no\r\n+  XComposite EGL ......................... no\r\n+  XComposite GLX ......................... no\r\n+  DRM EGL ................................ no\r\n+  libhybris EGL .......................... no\r\n+  Linux dma-buf server buffer integration . no\r\n+  Vulkan-based server buffer integration . no\r\n+  Shm emulation server buffer integration . no\r\n+Qt Wayland Client Shell Integrations:\r\n+  xdg-shell .............................. yes\r\n+  xdg-shell unstable v5 (deprecated) ..... no\r\n+  xdg-shell unstable v6 .................. no\r\n+  ivi-shell .............................. no\r\n+  wl-shell (deprecated) .................. no\r\n+Qt Wayland Client ........................ yes\r\n+Qt Wayland Compositor .................... no\r\n \r\n Note: Also available for Linux: linux-clang linux-icc\r\n \r\n```\r\n\r\n---\r\n\r\nHere is an excerpt from the log on Ubuntu 22.04 + GNOME:\r\n```\r\n$ QT_QPA_PLATFORM=wayland ./src/qt/bitcoin-qt -printtoconsole\r\nWarning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use QT_QPA_PLATFORM=wayland to run on Wayland anyway.\r\n2022-04-04T11:11:26Z Bitcoin Core version v23.99.0-8ffd5cae0b8a (release build)\r\n2022-04-04T11:11:26Z Qt 5.15.3 (static), plugin=wayland (static)\r\n2022-04-04T11:11:26Z Static plugins:\r\n2022-04-04T11:11:26Z  QXcbIntegrationPlugin, version 331520\r\n2022-04-04T11:11:26Z  QWaylandIntegrationPlugin, version 331520\r\n2022-04-04T11:11:26Z  QWaylandEglClientBufferPlugin, version 331520\r\n2022-04-04T11:11:26Z  QWaylandBradientDecorationPlugin, version 331520\r\n2022-04-04T11:11:26Z  QWaylandXdgShellIntegrationPlugin, version 331520\r\n2022-04-04T11:11:26Z Style: fusion / QFusionStyle\r\n2022-04-04T11:11:26Z System: Ubuntu Jammy Jellyfish (development branch), x86_64-little_endian-lp64\r\n2022-04-04T11:11:26Z Screen: eDP-1 1920x1080, pixel ratio=1.0\r\n...\r\n```\r\n\r\n---\r\n\r\nPlease note that for the simplicity sake [Wayland 1.19.0](https://lists.freedesktop.org/archives/wayland-devel/2021-January/041692.html) has been used as in [Wayland 1.20.0](https://lists.freedesktop.org/archives/wayland-devel/2021-December/042064.html):\r\n> - The autotools build system has been dropped. Meson has replaced it.\r\n\r\n---\r\n\r\n#### Notes about new runtime dependencies\r\n\r\nWayland compositor infrastructure:\r\n- libwayland-client.so.0 -- client library, e.g., [libwayland-client0](https://packages.ubuntu.com/jammy/libwayland-client0)\r\n- libwayland-cursor.so.0 -- cursor library, e.g., [libwayland-cursor0](https://packages.ubuntu.com/jammy/libwayland-cursor0)\r\n- libwayland-egl.so.1 -- EGL library, e.g., [libwayland-egl1](https://packages.ubuntu.com/jammy/libwayland-egl1)\r\n\r\nVendor neutral GL dispatch libraries:\r\n- libEGL.so.1 -- [EGL](https://en.wikipedia.org/wiki/EGL_(API)) support, e.g., [libegl1](https://packages.ubuntu.com/jammy/libegl1)\r\n- libGLESv2.so.2 -- [GLESv2](https://en.wikipedia.org/wiki/OpenGL_ES) support, e.g., [libgles2](https://packages.ubuntu.com/jammy/libgles2)\r\n\r\nhttps://ubuntu.com/security/cves and https://security-tracker.debian.org/tracker/ have no records about the packages mentioned above.\r\n\r\nMore details:\r\n- [`qtwayland/README`](https://code.qt.io/cgit/qt/qtwayland.git/tree/README?h=5.15)\r\n- [Wayland FAQ - Why does Wayland use EGL?](https://wayland.freedesktop.org/faq.html#heading_toc_j_12)\r\n- [What does EGL do in the Wayland stack](https://ppaalanen.blogspot.com/2012/03/what-does-egl-do-in-wayland-stack.html)",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2021-08-15T16:44:47Z",
      "updated_at": "2025-12-04T11:32:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/22708",
      "labels": [
        "Linux/Unix",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4623,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2987315933,
      "number": 33813,
      "title": "init: Changing the rpcbind argument being ignored to a pop up warning",
      "body": "When we ignore a users explicit request to an `rpcbind`, i think it warrants for a warning instead of a debug log.",
      "state": "closed",
      "user": "Ataraxia009",
      "created_at": "2025-11-07T06:02:12Z",
      "updated_at": "2025-12-04T05:08:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33813",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 184,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2912944374,
      "number": 33621,
      "title": "contrib: Fix gen-manpages.py to check build options",
      "body": "# Fix gen-manpages.py to check build options\r\n\r\nFixes #17506\r\n\r\n## Problem\r\nThe `gen-manpages.py` script generates UNIX manual pages based on the `--help` output from binaries. The options documented vary based on build system settings, but the manual pages checked into the repository should document as many options as possible.\r\n\r\n## Solution\r\nThis PR adds comprehensive build option detection to ensure all available options are documented in the generated manpages.\r\n\r\n## Changes Made\r\n- **Added build option detection** for all required components:\r\n  - `HAVE_SYSTEM` - for `-alertnotify` and other notifications\r\n  - `ENABLE_WALLET` - for wallet specific arguments  \r\n  - `USE_UPNP` - for UPnP arguments\r\n  - `ENABLE_ZMQ` - for ZMQ arguments\r\n  - Additional important build options (`ENABLE_CLI`, `ENABLE_BITCOIN_UTIL`, etc.)\r\n\r\n- **Added `--skip-build-options-check`** flag to bypass validation when needed\r\n- **Improved error handling** with clear messages when components are missing\r\n- **Fixed grammar** in error messages (\"Aborting generation of...\" instead of \"Aborting generating...\")\r\n\r\n## Technical Details\r\n- Checks `HAVE_SYSTEM` from `builddir/src/bitcoin-build-config.h`\r\n- Checks other options from `builddir/test/config.ini` \r\n- Provides clear error messages listing missing components\r\n- Users can rebuild with `./configure --enable-wallet --enable-zmq --with-upnp --enable-external-signer` to enable all options\r\n\r\n## Testing\r\n- Script now prevents generation of incomplete man pages\r\n- Clear error messages guide users to enable missing components\r\n- `--skip-build-options-check` allows bypassing validation when needed\r\n\r\n## Acknowledgments\r\nThis work builds upon the initial implementation by @BrandonOdiwuor in PR #33085, with additional improvements and fixes. Thanks to @maflcko for the feedback and suggestions.\r\n\r\n## Related PRs\r\n- PR #33085 by @BrandonOdiwuor (initial implementation)",
      "state": "closed",
      "user": "ac12644",
      "created_at": "2025-10-14T09:31:10Z",
      "updated_at": "2025-12-04T04:37:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33621",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1968,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2911621018,
      "number": 33617,
      "title": "contrib: Fix gen-manpages.py to check build options",
      "body": "The gen-manpages.py script was missing critical build option checks,\r\ncausing incomplete man page generation. This commit adds comprehensive\r\nbuild option detection to ensure all available options are documented.\r\n\r\nChanges made:\r\n- Add missing USE_UPNP build option detection (core requirement from #17506)\r\n- Remove unused build options that were listed but not actually used\r\n- Add error handling for missing 'components' section in config.ini\r\n- Improve code structure with proper function organization\r\n\r\nThe script now prevents generation of incomplete man pages by \r\nall required build options and provides clear error messages when\r\ncomponents are missing. Users can use --skip-build-options-check to\r\nbypass this check if needed.\r\n\r\nFixes #17506",
      "state": "closed",
      "user": "ac12644",
      "created_at": "2025-10-13T22:05:51Z",
      "updated_at": "2025-12-04T04:37:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33617",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 806,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2294718578,
      "number": 31725,
      "title": "test: clarify timewarp grace period griefing attack",
      "body": "Adjust the timewarp test to better illustrate the griefing attack discussed here: https://delvingbitcoin.org/t/timewarp-attack-600-second-grace-period/1326/19 \r\n\r\nChanging `MAX_TIMEWARP` to something `> MAX_FUTURE_BLOCK_TIME` in `consensus.h` and `mining_basic.py` will cause the updated test to fail. I'm not proposing such a change here of course. The new test should be useful guidance for pool software developers, for why they really should use `curtime`, or least not ignore `mintime`.\r\n\r\nAdditionally, if the proposal is changed to make `MAX_TIMEWARP >  MAX_FUTURE_BLOCK_TIME` then this test will break, which could be used to demonstrate there's no such griefing attack anymore.\r\n\r\nOriginally part of #31600.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-01-23T15:07:32Z",
      "updated_at": "2025-12-03T14:55:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31725",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 768,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2653141134,
      "number": 32928,
      "title": "test: add logging to mock external signers",
      "body": "Because `stdout` and `stderr` are consumed by the node, the mock external signers can't use them for logging.\r\n\r\nInstead have them print directly into `test_framework.log`, which can then be be retrieved via `combine_logs.py`.\r\n\r\nIn preparation (and addtion) this PR starts with a few refactors:\r\n\r\n- move `mock_signer_path` helpers to `util` and reuse them between `rpc_signer.py` and `wallet_signer.py`\r\n- move the mocks from `test/functional/mocks` to `test/functional`: this is needed to avoid Python import hell in the next commits\r\n- have the mocks take advantage of the `test_framework` by extracting (and reusing) `perform_pre_checks` and `mock_signer_psbt_path` into `util`\r\n- extract the `debug.log` style `Formatter` into `util` so we can use it in the final commit\r\n\r\nOriginally this PR was intended to aid in debugging #32855, which has been solved since.\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-07-09T14:44:23Z",
      "updated_at": "2025-12-03T14:36:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32928",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 913,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999917479,
      "number": 33857,
      "title": "doc: Add `x86_64-w64-mingw32ucrt` triplet to `depends/README.md`",
      "body": "This PR is part of the ongoing effort to migrate to the modern UCRT runtime for cross-compiled Windows binaries, including release builds.\r\n\r\nFor more details about this migration, see:\r\n- https://github.com/bitcoin/bitcoin/issues/30210\r\n- https://github.com/bitcoin/bitcoin/pull/33593\r\n- https://github.com/bitcoin/bitcoin/pull/33764\r\n\r\nCan be tested on the following systems:\r\n-  Debian Trixie x86_64 (requires the [`g++-mingw-w64-ucrt64`](https://packages.debian.org/trixie/g++-mingw-w64-ucrt64) package, as documented).\r\n-  Fedora 42 or 43 (requires the [`ucrt64-gcc-c++`](https://packages.fedoraproject.org/pkgs/mingw-gcc/ucrt64-gcc-c++/) package).\r\n\r\nAlso see related upstream issues:\r\n- https://bugs.launchpad.net/ubuntu/+source/gcc-mingw-w64/+bug/2132114\r\n- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1121403",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-11T17:48:28Z",
      "updated_at": "2025-12-03T13:51:59Z",
      "merged_at": "2025-12-03T13:50:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33857",
      "labels": [
        "Docs",
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 888,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2643522136,
      "number": 32882,
      "title": "index: remove unnecessary locator cleaning in BaseIndex::Init()",
      "body": "Leverage `locator.IsNull()` to simplify `ReadBestBlock()` and remove\r\nunnecessary `SetNull()`.\r\n\r\n    \r\n",
      "state": "closed",
      "user": "HowHsu",
      "created_at": "2025-07-05T16:13:18Z",
      "updated_at": "2025-12-03T13:47:24Z",
      "merged_at": "2025-12-03T13:47:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32882",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 168,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1163186430,
      "number": 26693,
      "title": "build: special instruction check script",
      "body": "Fixes #18603 \r\n\r\nChecks that generated files with special compilation units do not contain disallowed sections. Special instructions and disallowed sections are defined in the script and include `SSE42`, `SSE41`, `AVX`, `AVX2`, `SHANI`, and `.text.startup`, respectively. \r\n\r\nThe script uses `glob` to search and `lief` to parse files. If any disallowed sections are found in a file the script will print an error to `stderr` and exit with a non-zero exit code. Otherwise, the script will exit with a zero exit code indicating success.\r\n\r\nI also have another version on [this branch](https://github.com/bitcoin/bitcoin/compare/master...willcl-ark:bitcoin:18603_si_check_test) which more closely mimics the interface of `symbol-check.py` (accepting a list of files as arguments), along with including a test which can be used to check that the script itself is working, but as it's quite a lot more code overall, I thought this branch might be preferable...",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2022-12-13T15:12:22Z",
      "updated_at": "2025-12-03T12:22:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26693",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 996,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2127355834,
      "number": 31096,
      "title": "Package validation: accept packages of size 1",
      "body": "There's no particular reason to restrict single transaction submissions with submitpackage. This change relaxes the RPC checks as enables the `AcceptPackage` flow to accept packages of a single transaction. \r\n\r\nResolves #31085 \r\n\r\n",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2024-10-16T09:39:21Z",
      "updated_at": "2025-12-03T12:22:18Z",
      "merged_at": "2024-12-03T22:46:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31096",
      "labels": [
        "TX fees and policy",
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 277,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2151266647,
      "number": 31175,
      "title": "rpc: Remove submitblock pre-checks",
      "body": "With the introduction of a mining ipc interface and the potential future introduction of a kernel library API it becomes increasingly important to offer common behaviour between them. An example of this is ProcessNewBlock, which is used by ipc, rpc, net_processing and (potentially) the kernel library. Having divergent behaviour on suggested pre-checks and checks for these functions is confusing to both developers and users and is a maintenance burden.\r\n\r\nThe rpc interface for ProcessNewBlock (submitblock) currently pre-checks if the block has a coinbase transaction and whether it has been processed before. While the current example binary for how to use the kernel library, bitcoin-chainstate, imitates these checks, the other interfaces do not.\r\n\r\nThe coinbase check is repeated again early during ProcessNewBlock. Pre-checking it may also shadow more fundamental problems with a block. In most cases the block header is checked first, before validating the transactions. Checking the coinbase first therefore masks potential issues with the header. Fix this by removing the pre-check.\r\n\r\nSimilary the duplicate checks are repeated early in the contextual checks of ProcessNewBlock. If duplicate blocks are detected much of their validation is skipped. Depending on the constitution of the block, validating the merkle root of the block is part of the more intensive workload when validating a block. This could be an argument for moving the pre-checks into block processing. In net_processing this would have a smaller effect however, since the block mutation check, which also validates the merkle root, is done before.\r\n\r\nTesting spamming a node with valid, but duplicate unrequested blocks seems to exhaust a CPU thread, but does not seem to significantly impact keeping up with the tip. The benefits of adding these checks to net_processing are questionable, especially since there are other ways to trigger the more CPU-intensive checks without submitting a duplicate block. Since these DOS concerns apply even less to the RPC interface, which does not have banning mechanics built in, remove them too.\r\n\r\nFinally, also remove the pre-checks from `bitcoin-chainstate.cpp`.\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587).",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-10-29T11:05:05Z",
      "updated_at": "2025-12-03T12:22:17Z",
      "merged_at": "2024-12-03T22:38:58Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31175",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2332,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2132733974,
      "number": 31112,
      "title": "Improve parallel script validation error debug logging",
      "body": "~~Builds on top of #31097~~ (now merged). Fixes #30960.\r\n\r\nSo far, detailed information about script validation failures is only reported when running with `-par=1`, due to a lack of ability to transfer information from the script validation threads to the validation thread. Fix this by extending the `CCheckQueue` functionality to pass more results through than just success/failure, and use this to report the exact Script error, as well as the transaction input in which it occurred.",
      "state": "closed",
      "user": "sipa",
      "created_at": "2024-10-18T15:41:15Z",
      "updated_at": "2025-12-03T12:22:17Z",
      "merged_at": "2024-12-03T20:22:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31112",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 542,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2177860953,
      "number": 31284,
      "title": "ci: Skip broken Wine64 tests by default",
      "body": "I don't think the unit tests run in Wine after the Windows cross-compilation have ever shown a true positive since the MSVC task was added. However, they are a source of frequent false-positives.\r\n\r\nThus, disable them by default for now. Anyone can still enable them by setting `RUN_UNIT_TESTS=true`.\r\n\r\nA follow-up could run them on real Windows, see https://github.com/bitcoin/bitcoin/pull/31176.\r\n\r\nConceptually there are many other nightly tasks, which rarely find issues and are not run by default, like the valgrind or s390x tasks. So putting the Wine unit tests in the same bucket should be fine.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-13T16:39:36Z",
      "updated_at": "2025-12-03T12:22:16Z",
      "merged_at": "2024-12-03T17:21:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31284",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 643,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2212941092,
      "number": 31412,
      "title": "rpc: Remove deprecated RPC arg names",
      "body": "For compatibility, a single RPC argument may have multiple names. This is largely unused, because legacy code relying on it isn't generally using names arguments anyway. Also, it is confusing to see in existing code (https://github.com/bitcoin/bitcoin/issues/29912#issuecomment-2477250414) and makes writing new RPC code harder.\r\n\r\nFix all issues by removing them.\r\n\r\nIn the future, if such a feature is needed, it would be clearer to implement via `-rpcdeprecated=${rpc_name}_${field_old_name}` to toggle between the field names.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-03T14:26:27Z",
      "updated_at": "2025-12-03T12:22:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31412",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 567,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2184732262,
      "number": 31313,
      "title": "refactor: Clamp worker threads in ChainstateManager constructor",
      "body": "This ensures the options are applied consistently from contexts where they might not pass through the args manager, such as in some tests, or when used through the kernel library.\r\n\r\nThis is similar to the patch applied in 09ef322acc0a88a9e119f74923399598984c68f6, used to make applying the mempool options consistent.\r\n\r\n---\r\n\r\nThis is part of the libbitcoinkernel project https://github.com/bitcoin/bitcoin/issues/27587\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-11-18T09:56:18Z",
      "updated_at": "2025-12-03T12:22:15Z",
      "merged_at": "2024-12-03T23:02:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31313",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 487,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3064122630,
      "number": 33996,
      "title": "contrib: fix manpage generation",
      "body": "0972f5504021b482b27523fd3bcb8036cf6b439c from #33229 broke manpage generation, because the assumption that the last word in the line containing the version number, was the version number, no-longer holds for some binaries. i.e `bitcoind`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-02T15:55:43Z",
      "updated_at": "2025-12-03T11:34:36Z",
      "merged_at": "2025-12-03T11:19:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33996",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 270,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2376731599,
      "number": 32009,
      "title": "contrib: turn off compression of macOS SDK to fix determinism (across distros)",
      "body": "This includes three changes. The first is to more selectively pick files for inclusion into our macOS SDK tarball (skip manpages, binaries etc), which is nice because it redues the size of the tarball (from ~80mb to 20mb), and makes the size increase that happens with the next commit, less-bad.\r\n\r\nThe second change removes compression of the tarball. Starting with Python 3.11, Pythons gzip might delegate to zlib. Depending on the OS, i.e Ubuntu vs Fedora, the underlying zlib implementation might differ, resulting in different output.\r\n\r\nFor now, or until a better solution exists, remove compression. This results in the SDK increasing in size to ~157mb. Which is not unreasonable, to regain determinism (and would be significantly worse without the previous commit).\r\n\r\nSee: https://docs.python.org/3/library/gzip.html#gzip.compress\r\n\r\nThe third renames `gen-sdk` to `gen-sdk.py`, so that it will be linted, along with the rest of our Python files.\r\n\r\nFixes #31873. We could probably also put this into 30.x.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-06T16:23:34Z",
      "updated_at": "2025-12-03T11:34:22Z",
      "merged_at": "2025-11-27T15:03:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32009",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1094,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2743147697,
      "number": 33184,
      "title": "test: Refactor rpc_getblockstats.py to use MiniWallet",
      "body": "Refactors rpc_getblockstats.py to use MiniWallet for transaction creation, removing legacy wallet dependencies and simplifying the test by eliminating data caching.\r\n\r\nFixes #31838",
      "state": "open",
      "user": "enirox001",
      "created_at": "2025-08-13T14:52:22Z",
      "updated_at": "2025-12-03T10:28:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33184",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 234,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1971928542,
      "number": 30455,
      "title": "test: assumeutxo: add missing tests in wallet_assumeutxo.py",
      "body": "Adding tests in `./test/functional/wallet_assumeutxo.py` to cover the following scenario:\r\n- test loading a wallet (backup) on a pruned node",
      "state": "closed",
      "user": "alfonsoromanz",
      "created_at": "2024-07-16T16:11:06Z",
      "updated_at": "2025-12-03T10:09:47Z",
      "merged_at": "2025-12-03T10:09:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30455",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 200,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2901746438,
      "number": 33591,
      "title": "Cluster mempool followups",
      "body": "As suggested in the main cluster mempool PR (https://github.com/bitcoin/bitcoin/pull/28676#pullrequestreview-3177119367), I've pulled out some of the non-essential optimizations and cleanups into this separate PR.  \r\n\r\nWill continue to add more commits here to address non-blocking suggestions/improvements as they come up.",
      "state": "closed",
      "user": "sdaftuar",
      "created_at": "2025-10-09T19:06:39Z",
      "updated_at": "2025-12-02T17:29:49Z",
      "merged_at": "2025-12-02T09:46:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33591",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 349,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2760952474,
      "number": 33229,
      "title": "multiprocess: Don't require bitcoin -m argument when IPC options are used",
      "body": "This change makes the `bitcoin` command respect IPC command line options and _bitcoin.conf_ settings, so IPC listening can be enabled by just running `bitcoin node -ipcbind=unix` or `bitcoin node` with `ipcbind=unix` in the configuration file, and there is no longer a need to specify a multiprocess `-m` option like `bitcoin -m node [...]`\r\n\r\nsipa and theuni in #31802 pointed out that users shouldn't be exposed to multiprocess implementation details just to use IPC features, so current need to specify the `bitcoin -m` option in conjunction with `-ipcbind` could be seen as a design mistake and not just a usage inconvenience.\r\n\r\nThis PR also adds a dedicated functional test for the `bitcoin` wrapper command and to make sure it calls the right binaries and test the new functionality.\r\n\r\n---\r\n\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-08-20T20:08:36Z",
      "updated_at": "2025-12-02T15:56:18Z",
      "merged_at": "2025-09-25T21:36:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33229",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 978,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3059744655,
      "number": 33985,
      "title": "fuzz: gate mempool entry based on weight",
      "body": "The mempool implementation now uses TxGraph with entries using FeePerWeight, not vsize. This means our package_rbf harness will erroneously add more transaction weight than we can support inside of FeeFrac. Gate more aggressively using WITNESS_SCALE_FACTOR.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/33981",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-12-01T15:24:43Z",
      "updated_at": "2025-12-02T15:07:10Z",
      "merged_at": "2025-12-02T15:07:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33985",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 355,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2836114252,
      "number": 33414,
      "title": "tor: enable PoW defenses for automatically created hidden services",
      "body": "Enable [PoW defenses](https://tpo.pages.torproject.net/onion-services/ecosystem/technology/security/pow/) for hidden services that we create via Tor Control using the [`ADD_ONION` command](https://spec.torproject.org/control-spec/commands.html#add_onion).\r\n\r\nThe ability to do that has been added in [tor-0.4.9.2-alpha](https://gitlab.torproject.org/tpo/core/tor/-/commit/02c18044464bfe45f168b55297a785244094cfd5). Previous versions return a syntax error to the `ADD_ONION` command with `PoWDefensesEnabled=1`, so the approach here is to try with PoW and if we get syntax error, then retry without PoW.\r\n\r\nAlso update `doc/tor.md` with a hint on enabling PoW on manually configured Tor hidden services.",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-09-17T10:40:41Z",
      "updated_at": "2025-12-02T14:53:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33414",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 769,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2748843707,
      "number": 33196,
      "title": "docs: clarify RPC credentials security boundary",
      "body": "Explicitly states that RPC credentials grant full administrative access to the node and filesystem resources accessible by bitcoind. Adds a new section in JSON-RPC-interface.md to address issue https://github.com/bitcoin/bitcoin/issues/32274 by documenting that providing RPC credentials to untrusted clients\r\n\r\nreopened #32424\r\n\r\nP.S. I've tried to somehow squash all the commits from the previous pr but accidentally closed the pr and had no idea how to return back, therefore created a new pr, I'm really sorry for the inconvenience ",
      "state": "open",
      "user": "crStiv",
      "created_at": "2025-08-15T13:56:24Z",
      "updated_at": "2025-12-02T13:50:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33196",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 584,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1660385595,
      "number": 29158,
      "title": "PoC: fuzz chainstate and block managers",
      "body": "We don't have a fuzzing harness for our main consensus engine [0]. This PR introduces two new targets which respectively fuzz the `BlockManager` and `ChainstateManager` (process headers, blocks, reorgs and assert some invariants in doing so).\r\n\r\nThere is two main obstacles to achieving this: PoW and io. The blocks and chainstate databases can be stored in memory but blocks still need a valid proof of work and to be stored on disk. Niklas solved the first issue in #28043 by simply introducing a global which makes it possible to mock the PoW check (his commit is cherry-picked here). After considering other approaches, i also used globals to mock disk io.\r\n\r\nI'm interested with this PR in getting feedback on the concept and the approach, but also in suggestions of more invariants to be asserting in the `chainstate` fuzz target.\r\n\r\nRegarding other approaches i tried the most potentially promising was to leverage `ld`'s `--wrap` option to mock the syscalls without having to modify non-test code. But i didn't try too hard to make it work: better to have a demo of what can be achieved first with a more trivial way of mocking filesystem calls. If there is interest in these fuzz targets, i can give this approach another look.\r\n\r\nRegarding efficiency, the chainstate fuzz target is quite slow at the moment but i've at least 2x its performance by rebasing on #28960 and making `CheckBlockIndex` callable externally even if `!ShouldCheckBlockIndex()`. Suggestions for performance improvements welcome too.\r\n\r\n---\r\n\r\n[0] Well there is `utxo_total_supply` but it's very specialized toward exercising a specific past bug.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2023-12-30T10:05:20Z",
      "updated_at": "2025-12-02T12:21:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29158",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1667,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2096148917,
      "number": 30991,
      "title": "test: enable running independent functional test sub-tests",
      "body": "- Some test methods in the functional test framework are independent and do not require any prior context or setup in `run_test`.\r\n- This commit adds a new option for running these specific methods within a test file, allowing them to be executed individually without running the entire test suite.\r\n- Using this option reduces the time you need to wait before the test you are interested in starts executing.\r\n- The functionality added by this PR can be achieved manually by commenting out code, but having a pragmatic option to do this is more convenient.\r\n\r\nNote: Running test methods that require arguments or context will fail.\r\n\r\n**Example Usage**:\r\n```zsh\r\nbuild/test/functional/feature_reindex.py --test_methods continue_reindex_after_shutdown\r\n```\r\n\r\n```zsh\r\nbuild/test/functional/feature_config_args.py --test_methods test_log_buffer test_args_log test_connect_with_seednode\r\n```",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2024-09-27T15:55:28Z",
      "updated_at": "2025-12-02T12:21:52Z",
      "merged_at": "2024-12-02T16:45:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30991",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 948,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1799557685,
      "number": 29775,
      "title": "Testnet4 including PoW difficulty adjustment fix",
      "body": "To supplement the [ongoing conceptual discussion about a testnet reset](https://groups.google.com/g/bitcoindev/c/9bL00vRj7OU/m/9yCPo3uUBwAJ) I have drafted a move to v4 including a fix to the difficulty adjustment mechanism, which was part of the motivation that started the discussion.\r\n\r\nConceptual considerations:\r\n- The conceptual discussion about doing a testnet4 or softforking the fix into testnet3 is outside of the scope of this PR and I would ask reviewers to contribute their opinions on this on the ML instead. However, I am happy to adapt this PR to a softfork change on testnet3 if there is consensus for that instead.\r\n- The difficulty adjustment fix suggested here touches the `CalculateNextWorkRequired` function and uses the same logic used in `GetNextWorkRequired` to find the last previous block that was not mined with difficulty 1 under the exceptionf. An alternative fix briefly mentioned on the mailing list by Jameson Lopp would be to \"restrict the special testnet minimum difficulty rule so that it can't be triggered on the block right before a difficulty retarget\". That would also fix the issue but I find my suggestion here a bit more elegant.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2024-03-31T22:55:22Z",
      "updated_at": "2025-12-02T12:21:52Z",
      "merged_at": "2024-08-07T17:05:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29775",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1222,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2167490993,
      "number": 31240,
      "title": "doc: Fix dead links to mailing list archives",
      "body": "Unfortunately, lists.linuxfoundation.org is no longer hosting any mailing list archives, not just for bitcoin-dev but all the other mailing lists too.\r\n\r\nI'm opening this to discuss how to best approach the fix.\r\n\r\nkanzure suggested in https://github.com/bitcoin/bitcoin/pull/29782#issuecomment-2460974096: \r\n\r\n> Wait and see if they put it back up.\r\n> \r\n> Update those locations in the source code to the proposed new urls like https://gnusha.org/pi/bitcoindev/c3f68b73-84c6-7428-4bf6-b47802141392@mattcorallo.com/ with the Message-ID in the url.\r\n> \r\n> Use https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-February/016697.html style urls to help others fight web/bit rot for similar links on the web.\r\n\r\nThe current PR takes approach 2, update old `lists.linuxfoundation.org` links with `gnusha.org` ones. I'll implement approach 3 if that's the consensus of the community.",
      "state": "closed",
      "user": "edilmedeiros",
      "created_at": "2024-11-07T13:59:30Z",
      "updated_at": "2025-12-02T12:21:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31240",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 955,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2183776794,
      "number": 31307,
      "title": "build: Temporarily disable compiling `fuzz/utxo_snapshot.cpp` with MSVC",
      "body": "This PR suggests a temporary workaround for a compiler bug [introduced](https://github.com/bitcoin/bitcoin/issues/31303) in Visual Studio 2022 version 17.12.\r\n\r\nThis workaround is required to fix the CI until the upstream compiler bug is resolved.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-17T16:57:10Z",
      "updated_at": "2025-12-02T12:21:48Z",
      "merged_at": "2024-11-19T10:38:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31307",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 319,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2196831517,
      "number": 31361,
      "title": "cmake, qt: Use absolute paths for includes in MOC-generated files",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/31145.\r\n\r\nFrom the `moc --help` output:\r\n```\r\n  -p <path>                         Path prefix for included file.\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-24T15:24:38Z",
      "updated_at": "2025-12-02T12:21:47Z",
      "merged_at": "2024-12-02T10:29:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31361",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 231,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2196287062,
      "number": 31357,
      "title": "cmake: Improve build script correctness",
      "body": "When no build targets are specified, it is reasonable to expect the configuration step to succeed and produce a build system that does not build any targets.\r\n\r\nThis PR updates the code to ensure this behaviour:\r\n```\r\n$ cmake -B build -G \"Ninja\" -DBUILD_DAEMON=OFF -DBUILD_CLI=OFF -DBUILD_TX=OFF -DBUILD_UTIL=OFF -DENABLE_WALLET=OFF -DBUILD_TESTS=OFF\r\n$ cmake --build build\r\nninja: no work to do.\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-23T15:38:58Z",
      "updated_at": "2025-12-02T12:21:47Z",
      "merged_at": "2024-12-02T10:52:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31357",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 441,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2204932383,
      "number": 31386,
      "title": "doc: Use more precise anchor links to Xcode SDK extraction",
      "body": "The \"SDK Extraction\" section is what users presumably are looking for when they follow these links.",
      "state": "closed",
      "user": "JeremyRand",
      "created_at": "2024-11-28T05:44:21Z",
      "updated_at": "2025-12-02T12:21:46Z",
      "merged_at": "2024-12-02T13:41:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31386",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 158,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2203503228,
      "number": 31383,
      "title": "test: Add missing node.setmocktime(self.mocktime) to p2p_ibd_stalling.py",
      "body": "This was forgotten by myself in commit fa5b58ea01fac1adb6336b8b6b5217193295c695.\r\n\r\nThis time, there is a diff to test, which fails on current master and passes with this pull request.\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex e503a68382..16438ebd08 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -112,9 +112,9 @@ static_assert(MAX_BLOCKTXN_DEPTH <= MIN_BLOCKS_TO_KEEP, \"MAX_BLOCKTXN_DEPTH too\r\n  *  want to make this a per-peer adaptive value at some point. */\r\n static const unsigned int BLOCK_DOWNLOAD_WINDOW = 1024;\r\n /** Block download timeout base, expressed in multiples of the block interval (i.e. 10 min) */\r\n-static constexpr double BLOCK_DOWNLOAD_TIMEOUT_BASE = 1;\r\n+static constexpr double BLOCK_DOWNLOAD_TIMEOUT_BASE = .05; // 30 sec\r\n /** Additional block download timeout per parallel downloading peer (i.e. 5 min) */\r\n-static constexpr double BLOCK_DOWNLOAD_TIMEOUT_PER_PEER = 0.5;\r\n+static constexpr double BLOCK_DOWNLOAD_TIMEOUT_PER_PEER = 0.;\r\n /** Maximum number of headers to announce when relaying blocks with headers message.*/\r\n static const unsigned int MAX_BLOCKS_TO_ANNOUNCE = 8;\r\n /** Minimum blocks required to signal NODE_NETWORK_LIMITED */\r\ndiff --git a/test/functional/p2p_ibd_stalling.py b/test/functional/p2p_ibd_stalling.py\r\nindex fa07873929..f8cdd8998c 100755\r\n--- a/test/functional/p2p_ibd_stalling.py\r\n+++ b/test/functional/p2p_ibd_stalling.py\r\n@@ -82,6 +82,7 @@ class P2PIBDStallingTest(BitcoinTestFramework):\r\n         # Need to wait until 1023 blocks are received - the magic total bytes number is a workaround in lack of an rpc\r\n         # returning the number of downloaded (but not connected) blocks.\r\n         bytes_recv = 172761 if not self.options.v2transport else 169692\r\n+        time.sleep(31);\r\n         self.wait_until(lambda: self.total_bytes_recv_for_blocks() == bytes_recv)\r\n \r\n         self.all_sync_send_with_ping(peers)\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-27T13:30:58Z",
      "updated_at": "2025-12-02T12:21:46Z",
      "merged_at": "2024-12-02T13:34:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31383",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2014,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2204939041,
      "number": 31387,
      "title": "doc: Use more precise anchor link to codesigning docs",
      "body": "The \"Codesigning\" section is what users presumably are looking for when they follow this link.",
      "state": "closed",
      "user": "JeremyRand",
      "created_at": "2024-11-28T05:50:54Z",
      "updated_at": "2025-12-02T12:21:45Z",
      "merged_at": "2024-12-02T14:10:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31387",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 148,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2208305780,
      "number": 31395,
      "title": "build: Set shared linker flags in toolchain file",
      "body": "These are required when cross-compiling shared libraries such as the kernel library.\r\n\r\nThis was discovered after attempting to cross-compile the kernel library and running into the following error:\r\n```\r\n[100%] Linking CXX shared library libbitcoinkernel.dylib\r\n/usr/bin/ld: unrecognised emulation mode: llvm\r\nSupported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu i386pep i386pe\r\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\r\ngmake[3]: *** [src/kernel/CMakeFiles/bitcoinkernel.dir/build.make:1209: src/kernel/libbitcoinkernel.dylib] Error 1\r\ngmake[2]: *** [CMakeFiles/Makefile2:1175: src/kernel/CMakeFiles/bitcoinkernel.dir/all] Error 2\r\ngmake[1]: *** [CMakeFiles/Makefile2:1182: src/kernel/CMakeFiles/bitcoinkernel.dir/rule] Error 2\r\ngmake: *** [Makefile:569: bitcoinkernel] Error 2\r\n```\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-11-30T10:34:08Z",
      "updated_at": "2025-12-02T12:21:44Z",
      "merged_at": "2024-12-02T12:13:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31395",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 888,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2205579434,
      "number": 31390,
      "title": "Remove `src/config` directory",
      "body": "The `src/config` directory has not been used since the migration to CMake, which disables in-source builds.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-28T11:54:48Z",
      "updated_at": "2025-12-02T12:21:44Z",
      "merged_at": "2024-12-02T10:07:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31390",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 137,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2208859236,
      "number": 31399,
      "title": "ci, macos: Install `pkgconf` Homebrew's package",
      "body": "The updated GHA image [`20241125.556`](https://github.com/actions/runner-images/releases/tag/macos-14-arm64%2F20241125.556) is now fully [deployed](https://github.com/actions/runner-images/blob/main/README.md#available-images), enabling the installation of `pkgconf` as documented in [`doc/build-osx.md`](https://github.com/bitcoin/bitcoin/blob/master/doc/build-osx.md#3-install-required-dependencies).",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-01T11:02:13Z",
      "updated_at": "2025-12-02T12:21:43Z",
      "merged_at": "2024-12-02T10:04:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31399",
      "labels": [
        "macOS",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 450,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2208457773,
      "number": 31396,
      "title": "test: simple reordering to reduce run time",
      "body": "Noticed in #31371 that the position of `mempool_ephemeral_dust` within `BASE_SCRIPTS` was lengthening total test runtime. Instead of moving only that test, looked for others to move to reduce runtime.\r\n\r\nThis is a quick optimization that was found to reduce overall functional test runtime of up to around 20% (depending on jobs and machine characteristics). Since it seems like test ordering could be done in many different ways, with many variables, and bike shedding could creep in, a relatively straightforward approach was taken for now that minimized changes to test_runner.",
      "state": "closed",
      "user": "tdb3",
      "created_at": "2024-11-30T17:35:14Z",
      "updated_at": "2025-12-02T12:21:43Z",
      "merged_at": "2024-12-02T14:09:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31396",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 623,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2209998243,
      "number": 31402,
      "title": "doc: correct libfuzzer-nosan preset flag",
      "body": "`--prefix` is not the correct option for using a preset (it's not an option at all).",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-12-02T10:28:25Z",
      "updated_at": "2025-12-02T12:21:42Z",
      "merged_at": "2024-12-02T10:31:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31402",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 125,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2910525851,
      "number": 33609,
      "title": "[30.x] Backports",
      "body": "Backports:\r\n* #33229\r\n* #33508\r\n* #33517\r\n* #33558\r\n* #33566\r\n* #33580\r\n* #33581\r\n* #33612\r\n* #33630\r\n* #33676\r\n* #33744\r\n* #33826\r\n* #33827\r\n* #33906\r\n* https://github.com/bitcoin-core/gui/pull/899\r\n* https://github.com/bitcoin-core/gui/pull/901",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-13T14:53:51Z",
      "updated_at": "2025-12-02T10:15:34Z",
      "merged_at": "2025-12-02T10:15:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33609",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 263,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1943443355,
      "number": 30354,
      "title": "doc: external-signer, example 'createwallet' RPC call requires eight argument",
      "body": "The eight argument 'true' is necessary to invoke the external signer upon creating the wallet. The parameter defaults to 'false' otherwise.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2024-06-28T01:53:11Z",
      "updated_at": "2025-12-02T04:35:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30354",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3061499807,
      "number": 33991,
      "title": "test: Add comprehensive txindex reorg test coverage",
      "body": "# Add comprehensive txindex reorg test coverage\r\n\r\n## Motivation\r\n\r\nThis PR adds a new functional test `feature_txindex_reorg.py` to improve test coverage for the transaction index (`-txindex`) behavior during chain reorganizations. Currently, while txindex functionality is tested in various scenarios, there is limited coverage specifically focused on its behavior during deep reorgs, concurrent access patterns, and edge cases that could affect reliability.\r\n\r\nThe transaction index is a critical component for applications that need to look up historical transactions without knowing their block location. Ensuring its consistency and reliability during chain reorganizations is essential for:\r\n\r\n- Block explorers and indexing services\r\n- Applications using `getrawtransaction` without blockhash\r\n- Historical transaction analysis tools\r\n- Services relying on transaction lookup performance\r\n\r\n## Changes\r\n\r\nThis PR introduces a single new test file and registers it in the test runner:\r\n\r\n- **`test/functional/feature_txindex_reorg.py`** (new): Comprehensive test suite for txindex reorg scenarios\r\n- **`test/functional/test_runner.py`** (modified): Registers the new test\r\n\r\n## Test Coverage\r\n\r\nThe new test covers five critical scenarios:\r\n\r\n### 1. Txindex Consistency After Deep Reorg\r\n- Creates transactions on the main chain\r\n- Triggers a deep reorganization (10+ blocks)\r\n- Verifies that txindex correctly updates to reflect the new chain state\r\n- Ensures reorged-out transactions are properly handled\r\n\r\n### 2. Transaction Lookups After Reorg\r\n- Tests `getrawtransaction` with and without blockhash parameter\r\n- Validates that transactions remain findable after reorg\r\n- Verifies correct behavior when transactions move to mempool\r\n- Tests node without txindex for comparison\r\n\r\n### 3. Txindex Rebuild After Corruption\r\n- Simulates txindex corruption scenario\r\n- Tests recovery using `-reindex` flag\r\n- Verifies all transactions are correctly re-indexed\r\n- Ensures no data loss during rebuild process\r\n\r\n### 4. Concurrent Txindex Queries During Reorg\r\n- Tests thread-safe concurrent access to txindex\r\n- Performs multiple simultaneous transaction lookups\r\n- Executes blockchain operations while queries are running\r\n- Validates that concurrent access doesn't cause crashes or inconsistencies\r\n\r\n### 5. Txindex with Assumeutxo Scenarios\r\n- Tests txindex behavior in assumeutxo-like scenarios\r\n- Validates transaction lookups across snapshot boundaries\r\n- Ensures txindex works correctly with invalidateblock/reconsiderblock\r\n- Verifies consistency when blocks are invalidated around snapshot points\r\n\r\n## Testing\r\n\r\nThe test has been successfully executed:\r\n\r\n```bash\r\n$ test/functional/test_runner.py feature_txindex_reorg\r\n✓ feature_txindex_reorg.py passed (Duration: 3s)\r\n```\r\n\r\nAll test scenarios pass without errors, and the test follows Bitcoin Core's functional test framework conventions.\r\n\r\n## Code Quality\r\n\r\nThe implementation follows all contributing guidelines:\r\n\r\n- ✅ Follows naming convention (`feature_*.py`)\r\n- ✅ Uses `BitcoinTestFramework` base class\r\n- ✅ Includes comprehensive docstring explaining test purpose\r\n- ✅ Uses proper logging with `self.log.info()`\r\n- ✅ Follows PEP-8 style guidelines\r\n- ✅ Uses f-strings for formatting\r\n- ✅ Includes MIT license header\r\n- ✅ Properly handles node connections and synchronization\r\n- ✅ Uses `sync_txindex()` utility for proper index synchronization\r\n\r\n## Benefits\r\n\r\nThis test provides several benefits:\r\n\r\n1. **Improved Coverage**: Fills gaps in txindex testing, particularly around reorg scenarios\r\n2. **Regression Prevention**: Catches potential bugs in txindex reorg handling\r\n3. **Documentation**: Serves as documentation for expected txindex behavior during reorgs\r\n4. **Confidence**: Increases confidence in txindex reliability for production use\r\n5. **Future-Proofing**: Ensures txindex works correctly with features like assumeutxo\r\n\r\n## Notes\r\n\r\n- The test is designed to be deterministic and should not be flaky\r\n- Runtime is approximately 3 seconds on standard hardware\r\n- No external dependencies required beyond standard test framework\r\n- Test can be run individually or as part of the full test suite\r\n\r\n## Checklist\r\n\r\n- [x] New test added with clear documentation\r\n- [x] Test passes locally\r\n- [x] Test registered in test_runner.py\r\n- [x] Follows code style guidelines\r\n- [x] Commit message follows conventions\r\n- [x] No breaking changes\r\n- [x] Test is deterministic and not flaky\r\n\r\nContribution by Gittensor, learn more at https://gittensor.io/",
      "state": "closed",
      "user": "codomposer",
      "created_at": "2025-12-02T01:04:30Z",
      "updated_at": "2025-12-02T02:25:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33991",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4588,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3061208506,
      "number": 33989,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "AfuroIsCrazy",
      "created_at": "2025-12-01T22:49:21Z",
      "updated_at": "2025-12-01T22:49:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33989",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3060201889,
      "number": 33987,
      "title": "2025 11 self advertise in separate message",
      "body": "wip; PR for CI",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-01T17:23:11Z",
      "updated_at": "2025-12-01T17:24:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33987",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 57,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3059628118,
      "number": 33983,
      "title": "refactor/p2p: Decouple CNode from PeerManagerImpl::MaybeDiscourageAndDisconnect",
      "body": "## Description\r\nRefactor MaybeDiscourageAndDisconnect to accept individual parameters (`has_no_ban`, `is_manual`, `is_local_addr`, `is_inbound_onion`, `peer_addr`) instead of taking a CNode& reference directly.\r\n\r\nThis decouples the function from CNode while preserving all original logic paths and behavior.\r\n\r\nThis change is just a refactor, so no tests were modified\r\n\r\n## Linked issue\r\nThis is a part of #33958.\r\nLet me know if this is not needed and I can close this PR",
      "state": "closed",
      "user": "kevkevinpal",
      "created_at": "2025-12-01T14:56:23Z",
      "updated_at": "2025-12-01T15:40:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33983",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 554,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2097790861,
      "number": 31000,
      "title": "bench: add support for custom data directory",
      "body": "Expands the benchmark framework with the existing `-testdatadir` arg,\r\nenabling the ability to change the benchmark data directory.\r\n\r\nThis is useful for running benchmarks on different storage devices, and\r\nnot just under the OS `/tmp/` directory.\r\n\r\nA good use case is #28574, where we are benchmarking the wallet\r\nmigration process on an HDD.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2024-09-29T21:01:21Z",
      "updated_at": "2025-12-01T12:21:19Z",
      "merged_at": "2024-11-14T00:14:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31000",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 390,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3058396973,
      "number": 33980,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "codomposer",
      "created_at": "2025-12-01T09:13:58Z",
      "updated_at": "2025-12-01T11:20:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33980",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3048256203,
      "number": 33953,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Ataraxia009",
      "created_at": "2025-11-26T16:46:08Z",
      "updated_at": "2025-12-01T11:20:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33953",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3057299530,
      "number": 33976,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "SmartDever02",
      "created_at": "2025-12-01T01:11:24Z",
      "updated_at": "2025-12-01T11:20:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33976",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3057709991,
      "number": 33979,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "codomposer",
      "created_at": "2025-12-01T05:07:57Z",
      "updated_at": "2025-12-01T11:19:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33979",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3056402501,
      "number": 33972,
      "title": "cmake: Make `BUILD_KERNEL_TEST` depend on `BUILD_KERNEL_LIB`",
      "body": "The CMake script in the `test/kernel` subdirectory is already gated by `BUILD_KERNEL_LIB`:https://github.com/bitcoin/bitcoin/blob/f6acbef1084e34f126bf530df99e4ef6a11c38e8/src/CMakeLists.txt#L405-L409\r\n\r\nAs a result, the following configuration summary is misleading:\r\n```\r\n$ cmake -B build -DBUILD_KERNEL_LIB=OFF -DBUILD_KERNEL_TEST=ON\r\n<snip>\r\n  bitcoin-chainstate (experimental) ... OFF\r\n  libbitcoinkernel (experimental) ..... OFF\r\n  kernel-test (experimental) .......... ON\r\n<snip>\r\n```\r\n\r\nThis PR fixes the behaviour by making the `BUILD_KERNEL_TEST` option explicitly depend on `BUILD_KERNEL_LIB`.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T13:45:57Z",
      "updated_at": "2025-12-01T10:41:09Z",
      "merged_at": "2025-12-01T10:37:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33972",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 664,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3056381185,
      "number": 33971,
      "title": "cmake: Set `WITH_ZMQ` to `ON` in Windows presets",
      "body": "The \"zeromq\" feature is already enabled by default in `vcpkg.json`, and there appears to be no reason to omit this configuration option when building on Windows.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T13:13:02Z",
      "updated_at": "2025-12-01T10:02:35Z",
      "merged_at": "2025-12-01T09:58:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33971",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 210,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3057703947,
      "number": 33978,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "codomposer",
      "created_at": "2025-12-01T05:04:27Z",
      "updated_at": "2025-12-01T05:05:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33978",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2925353202,
      "number": 33645,
      "title": "refactor: optimize: avoid allocations in script & policy verification",
      "body": "Currently, some policy and script related methods are inefficiently allocating/reallocating containers where it is completely unnecessary. \r\n\r\nThis PR aims at optimizing policy verifications by reducing redundant heap allocations without losing performance even in worst case scenarios, effectively reducing the overall memory footprint.",
      "state": "open",
      "user": "Raimo33",
      "created_at": "2025-10-17T18:43:21Z",
      "updated_at": "2025-11-30T15:56:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33645",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3055851072,
      "number": 33970,
      "title": "doc: fix typo in MAX_MONEY comment",
      "body": "This PR fixes a small typo for grammar in the MAX_MONEY comment in src/consensus/amount.h.\r\n\r\n* Replace “a(nother)” with “another”.\r\n\r\nNo functional changes; comment-only.\r\n",
      "state": "closed",
      "user": "sunmoonron",
      "created_at": "2025-11-29T20:07:39Z",
      "updated_at": "2025-11-29T21:46:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33970",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 208,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3036657637,
      "number": 33926,
      "title": "Align legacy script policy with P2SH policy in AreInputsStandard",
      "body": "Legacy scripts currently require solvability, while P2SH scripts only check sigop count. This asymmetry causes some non-solvable legacy scripts to be rejected even when they have acceptable sigop counts, while equivalent P2SH scripts would be accepted.\n\nThis change updates AreInputsStandard to check sigop count for legacy scripts instead of requiring solvability, matching P2SH behavior. Non-solvable legacy scripts with sigop counts within the limit are now accepted, consistent with P2SH.\n\nThis implements the approach suggested by roconnor-blockstream in #33882 to address the policy asymmetry between legacy and P2SH script redemption.\n\nThe test suite covers boundary conditions (0, 14, 15, and 16 sigops), different sigop types (CHECKSIG and CHECKMULTISIG), multiple inputs, and regression cases to ensure existing behavior for standard and WITNESS_UNKNOWN scripts is preserved.",
      "state": "closed",
      "user": "151henry151",
      "created_at": "2025-11-22T19:03:51Z",
      "updated_at": "2025-11-29T21:40:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33926",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 950,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1177163236,
      "number": 26749,
      "title": "refactor: Use move semantics instead of custom swap functions",
      "body": "This PR makes code more succinct and readable by using move semantics.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2022-12-24T23:38:58Z",
      "updated_at": "2025-11-29T12:18:49Z",
      "merged_at": "2023-03-22T11:17:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26749",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 132,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2199352467,
      "number": 31371,
      "title": "doc, test: more ephemeral dust follow-ups",
      "body": "This small PR contains ephemeral dust follow-ups mentioned in #30329 that were not tackled in the first follow-up PR #31279:\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1828577696\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1825279952\r\n\r\nHappy to add more if I missed some or anyone has concrete commits to add.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2024-11-25T20:18:23Z",
      "updated_at": "2025-11-29T12:18:48Z",
      "merged_at": "2024-11-29T13:35:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31371",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 385,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2089970300,
      "number": 30964,
      "title": "Disable RBF Rule 2",
      "body": "One of the current RBF acceptance criteria is the prohibition of new unconfirmed inputs in the replacement transaction. That means that all replacement inputs must either be confirmed, or have unconfirmed spends that would get evicted.\r\n\r\nHowever, that limitation is trivially circumvented. If one wanted to spend an unconfirmed UTXO in the replacement transaction, all one would need to do is create a temporary, independent low-fee-rate transaction that spends that input, and then simply add that transaction to the replacement's eviction set. @glozow has documented that [here](https://gist.github.com/glozow/25d9662c52453bd08b4b4b1d3783b9ff) back in early 2022, and I imagine there's other literature out there documenting this same phenomenon.\r\n\r\nOne interesting thing to note with this approach of circumventing rule 2 is that the broadcasting of the temporary transaction and the broadcasting of the actually intended replacement transaction ought to be staggered, lest some nodes see only the final replacement transaction and reject it. I think it's fair to say that that makes the propagation somewhat nondeterministic. Given that any motivated actor can trivially craft such a dummy transaction and then simply wait 30 seconds (maybe less?) before broadcasting the replacement, removing the pretense of rule 2 would reduce network traffic for this scenario.\r\n\r\nIn light of all the work on the cluster mempool that's been ongoing recently, a question for this PR might be: \"why now?\" My answer would be that due to the easy circumvention of rule 2, and it therefore arguably not being a \"real\" rule, removing it is somewhat independent of future, even near-term, mempool policy improvements.\r\n\r\nAll that being said, the basis of this PR might be due to a glaring misunderstanding on my part of how bitcoin works, in which case feel free to close it, and my apologies for the noise.",
      "state": "closed",
      "user": "arik-so",
      "created_at": "2024-09-24T21:01:12Z",
      "updated_at": "2025-11-29T12:18:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30964",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1911,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2970666586,
      "number": 33764,
      "title": "ci: Add Windows + UCRT jobs for cross-compiling and native testing",
      "body": "This PR is part of the ongoing effort to migrate to the modern UCRT runtime for cross-compiled Windows binaries, including release builds.\r\n\r\nFor more details about this migration, see:\r\n- https://github.com/bitcoin/bitcoin/issues/30210\r\n- https://github.com/bitcoin/bitcoin/pull/33593\r\n\r\nMSVCRT-related CI jobs should be removed from the CI framework once the migration to UCRT is complete.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-02T15:31:02Z",
      "updated_at": "2025-11-29T11:51:29Z",
      "merged_at": "2025-11-28T16:42:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33764",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 458,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1972188159,
      "number": 30462,
      "title": "utils: replace boost::date_time usage with c++20 std::chrono",
      "body": "This would be a very straightforward and uncontroversial change if not for the sad state of std lib implementations which implement this functionality.\r\n\r\nAs of now, `std::chrono::parse` and friends (c++20 additions) are only available as of gcc 14 and (unreleased) clang 19.\r\n\r\nFormatting in chrono is quite useful, so I don't think it makes sense to wait years until we require those compilers.\r\n\r\nInstead of waiting around, this PR takes the sledgehammer approach of adding a fully-conformant implementation of the new c++20 chrono features (from the author of `std::chrono` himself). More info available here: https://howardhinnant.github.io/date/date.html\r\n\r\nA convenience header adds the `chrono_parse` namespace, which uses the std lib if possible, and `date.h` otherwise.\r\n\r\nThis allows us to get rid of our last use of `boost::date_time`, and we can begin using more modern c++20-isms as well.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2024-07-16T19:04:55Z",
      "updated_at": "2025-11-28T12:18:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30462",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 963,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2034442282,
      "number": 30705,
      "title": "test: Avoid intermittent block download timeout in p2p_ibd_stalling",
      "body": "Fixes #30704\r\n\r\nThe goal of the test is to check the stalling timeout, not the block download timeout.\r\n\r\nOn extremely slow hardware (for example qemu virtual hardware), downloading the 1023 blocks may take longer than the block download timeout.\r\n\r\nFix it by pinning the time using mocktime, and only advance it when testing the stalling timeout.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-08-23T15:52:37Z",
      "updated_at": "2025-11-28T12:18:16Z",
      "merged_at": "2024-08-27T10:20:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30705",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 415,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2159592206,
      "number": 31206,
      "title": "doc: Use relative hyperlinks in release-process.md",
      "body": "Improves usability with offline clones of the documentation.\r\n\r\nRefs\r\nhttps://github.com/bitcoin/bitcoin/pull/30025#issuecomment-2093081127\r\n",
      "state": "closed",
      "user": "JeremyRand",
      "created_at": "2024-11-03T10:52:02Z",
      "updated_at": "2025-11-28T12:18:15Z",
      "merged_at": "2024-11-05T16:16:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31206",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 192,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3047700644,
      "number": 33949,
      "title": "ubsan: add another suppression for InsecureRandomContext",
      "body": "We've been suppressing this in infra for a little while, it's now appearing elsewhere. i.e\r\nhttps://github.com/willcl-ark/bitcoin/actions/runs/19702968577/job/56443491265#step:9:2738:\r\n```bash\r\nRun bip324_cipher_roundtrip with args ['/home/runner/work/_temp/build/bin/fuzz', '-runs=1', PosixPath('/home/runner/work/_temp/ci/scratch/qa-assets/fuzz_corpora/bip324_cipher_roundtrip')]INFO: Running with entropic power schedule (0xFF, 100).\r\nINFO: Seed: 2138761624\r\nINFO: Loaded 1 modules   (612416 inline 8-bit counters): 612416 [0x55aa0745d458, 0x55aa074f2c98), \r\nINFO: Loaded 1 PC tables (612416 PCs): 612416 [0x55aa074f2c98,0x55aa07e4b098), \r\nINFO:     1479 files found in /home/runner/work/_temp/ci/scratch/qa-assets/fuzz_corpora/bip324_cipher_roundtrip\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 214082 bytes\r\nINFO: seed corpus: files: 1479 min: 1b max: 214082b total: 869543b rss: 112Mb\r\n/home/runner/work/_temp/src/random.h:432:29: runtime error: unsigned integer overflow: 11400714825904921328 * 13787848793156543929 cannot be represented in type 'unsigned long'\r\n    #0 0x55aa041751db in InsecureRandomContext::InsecureRandomContext(unsigned long) (/home/runner/work/_temp/build/bin/fuzz+0x1c181db) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #1 0x55aa041737c4 in bip324_cipher_roundtrip_fuzz_target(std::span<unsigned char const, 18446744073709551615ul>) (/home/runner/work/_temp/build/bin/fuzz+0x1c167c4) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #2 0x55aa04a13ea5 in LLVMFuzzerTestOneInput (/home/runner/work/_temp/build/bin/fuzz+0x24b6ea5) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #3 0x55aa040189ff in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) (/home/runner/work/_temp/build/bin/fuzz+0x1abb9ff) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #4 0x55aa04018009 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool, bool*) (/home/runner/work/_temp/build/bin/fuzz+0x1abb009) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #5 0x55aa04019d72 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/runner/work/_temp/build/bin/fuzz+0x1abcd72) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #6 0x55aa0401a290 in fuzzer::Fuzzer::Loop(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/home/runner/work/_temp/build/bin/fuzz+0x1abd290) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #7 0x55aa04006915 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) (/home/runner/work/_temp/build/bin/fuzz+0x1aa9915) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #8 0x55aa04032cd6 in main (/home/runner/work/_temp/build/bin/fuzz+0x1ad5cd6) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n    #9 0x7f8d6de271c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #10 0x7f8d6de2728a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 274eec488d230825a136fa9c4d85370fed7a0a5e)\r\n    #11 0x55aa03ffaee4 in _start (/home/runner/work/_temp/build/bin/fuzz+0x1a9dee4) (BuildId: 240d4d47bf0144daf13a950328fb39f74c0478d6)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /home/runner/work/_temp/src/random.h:432:29 \r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-26T13:52:32Z",
      "updated_at": "2025-11-28T10:13:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33949",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3461,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2558053628,
      "number": 32655,
      "title": "depends: sqlite 3.50.4; switch to autosetup",
      "body": "Migrate to SQLite `3.50.4` in depends; switching to its new [Autosetup](https://msteveb.github.io/autosetup/) build system.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-06-01T11:37:10Z",
      "updated_at": "2025-11-28T09:43:30Z",
      "merged_at": "2025-11-25T10:49:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32655",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 167,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3052142038,
      "number": 33963,
      "title": "test: tighten `V2TransportTester::SendMessage` bounds for GCC 15.2",
      "body": "### Summary\r\n#33840 adjusted `V2TransportTester::SendMessage` to avoid a `-Warray-bounds` false positive with **GCC 13**, but **GCC 15.2** still warns.\r\n\r\n### Fix\r\n\r\nImplemented the suggestion in https://github.com/bitcoin/bitcoin/pull/33840#pullrequestreview-3447477940:\r\n- take `mtype` as `std::string_view`;\r\n- assert `mtype.size() <= CMessageHeader::MESSAGE_TYPE_SIZE`;\r\n- build `[0x00][12-byte type][payload]` via `std::ranges::copy`.\r\n\r\n### Reproducer\r\n\r\nBefore this change, using GCC 15.2 on a Mac\r\n> rm -rfd build && cmake -B build -DENABLE_IPC=OFF -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ && cmake --build build -j$(nproc)\r\n\r\nproduces:\r\n```bash\r\n[100%] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/__/wallet/test/walletload_tests.cpp.o\r\nIn file included from /opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/array:45,\r\n                 from /opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/span:46,\r\n                 from /Users/lorinc/bitcoin/src/span.h:10,\r\n                 from /Users/lorinc/bitcoin/src/uint256.h:10,\r\n                 from /Users/lorinc/bitcoin/src/consensus/params.h:10,\r\n                 from /Users/lorinc/bitcoin/src/kernel/chainparams.h:9,\r\n                 from /Users/lorinc/bitcoin/src/chainparams.h:9,\r\n                 from /Users/lorinc/bitcoin/src/test/net_tests.cpp:5:\r\nIn function 'constexpr _OutIter std::__copy_move_a2(_InIter, _Sent, _OutIter) [with bool _IsMove = false; _InIter = char*; _Sent = char*; _OutIter = unsigned char*]',\r\n    inlined from 'constexpr _OI std::__copy_move_a1(_II, _II, _OI) [with bool _IsMove = false; _II = char*; _OI = unsigned char*]' at /opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/bits/stl_algobase.h:492:42,\r\n    inlined from 'constexpr _OI std::__copy_move_a(_II, _II, _OI) [with bool _IsMove = false; _II = __gnu_cxx::__normal_iterator<char*, __cxx11::basic_string<char> >; _OI = __gnu_cxx::__normal_iterator<unsigned char*, vector<unsigned char> >]' at /opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/bits/stl_algobase.h:500:31,\r\n    inlined from 'constexpr _OI std::copy(_II, _II, _OI) [with _II = __gnu_cxx::__normal_iterator<char*, __cxx11::basic_string<char> >; _OI = __gnu_cxx::__normal_iterator<unsigned char*, vector<unsigned char> >]' at /opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/bits/stl_algobase.h:642:7,\r\n    inlined from 'void net_tests::{anonymous}::V2TransportTester::SendMessage(std::string, std::span<const unsigned char>)' at /Users/lorinc/bitcoin/src/test/net_tests.cpp:1304:18:\r\n/opt/homebrew/Cellar/gcc/15.2.0/include/c++/15/bits/stl_algobase.h:426:32: warning: 'void* __builtin_memmove(void*, const void*, long unsigned int)' offset [0, 1] is out of the bounds [0, 0] [-Warray-bounds=]\r\n  426 |               __builtin_memmove(_GLIBCXX_TO_ADDR(__result),\r\n      |               ~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  427 |                                 _GLIBCXX_TO_ADDR(__first),\r\n      |                                 ~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  428 |                                 __n * sizeof(*__first));\r\n      |                                 ~~~~~~~~~~~~~~~~~~~~~~~\r\n[100%] Linking CXX executable ../../bin/test_bitcoin\r\n```\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-27T18:49:47Z",
      "updated_at": "2025-11-27T20:31:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33963",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3244,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2878392477,
      "number": 33514,
      "title": "ci: clear out space on CentOS, depends, gui GHA job",
      "body": "Fixes #33293\r\n\r\nClear out space on jobs running on GHA by deleteing unnecessary files.\r\n\r\nRaised in #33293 which pointed to a solution like https://github.com/google/oss-fuzz/commit/b7f04d782277638a67bc44865de445977eed4708 which is adapted slightly here.\r\n\r\nOnly runs when cache provider (runner) is `gha`.\r\n\r\nA run on my fork can be seen here: https://github.com/willcl-ark/bitcoin/actions/runs/19703413734/job/56444984809",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-10-01T14:04:53Z",
      "updated_at": "2025-11-27T18:48:01Z",
      "merged_at": "2025-11-27T14:30:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33514",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3046907787,
      "number": 33947,
      "title": "docs: sync external-signer.md with current external signer flow",
      "body": "Updated external-signer.md to match the current implementation. The signer network selection is passed as --chain rather than --testnet, and transaction signing is performed via stdin using the signtx command with JSON output containing a psbt field or error. Wallet creation for external signers requires external_signer=true with private keys disabled, so the example now uses named arguments. Spending with an external signer goes through the new send/sendall RPCs which build a PSBT, call the signer, and finalize when signatures are sufficient; sendtoaddress is not applicable for such wallets and also returns a plain txid for pk-enabled wallets rather than a complete field. The getdescriptors call is documented with the --account parameter and return shape including receive and internal arrays. Examples for displayaddress and createwallet are corrected, enumeratesigners now shows an optional name field, and references to bitcoin-qt replace the non-existent “bitcoin node” and “bitcoin rpc”.",
      "state": "closed",
      "user": "GarmashAlex",
      "created_at": "2025-11-26T09:45:09Z",
      "updated_at": "2025-11-27T18:40:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33947",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1067,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2995485727,
      "number": 33840,
      "title": " test: [refactor] Use reference over ptr to chainman ",
      "body": "Just some minor test-only refactor commits to fix GCC false positive warnings, along with making the test code easier to read and understand:\r\n\r\n* First change requested in https://github.com/bitcoin/bitcoin/pull/33785#discussion_r2510727269\r\n* Second change requested in commit 3b135a8fc4451c93b3ea50b3f4621e0d19f35daf\r\n\r\nThose changes are required in a bunch of pulls touching the CI system, so merging them allows to drop them in all pulls.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-10T14:16:22Z",
      "updated_at": "2025-11-27T18:33:13Z",
      "merged_at": "2025-11-11T13:51:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33840",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 497,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1464044153,
      "number": 28226,
      "title": "util/blockstorage: Add `TRACE_RAII`, slightly faster -reindex-chainstate with CBufferedFile",
      "body": "TLDR: \r\n* Adds a `TRACE_RAII` macro to easily trace runtime of a code block.\r\n* Switch to `CBufferedFile` in `BlockManager::ReadBlockFromDisk` is slightly faster:\r\n* 9% faster unserialization =>  1.2% faster `-reindex-chainstate`\r\n\r\n---\r\nWhile profiling `-reindex-changestate` I saw lots of `fread()` calls in in `BlockManager::ReadBlockFromDisk`. This replaces the use of `CAutoFile` with `CBufferedFile` with a small buffer, leading to much fewer calls to\r\n`fread()`, which gives a little speedup.\r\n\r\nI measured runtime of the synchronization with the `TRACE_RAII` macro. I ran this command which took about 30 minutes on my PC, with and without CBufferedFile:\r\n\r\n```sh\r\nsync && sudo /sbin/sysctl vm.drop_caches=3 && ~/git/github.com/martinus/bitcoin/src/bitcoind -dbcache=20000 -reindex-chainstate -printtoconsole=0 -stopatheight=500000\r\n```\r\n\r\nThe measured time spent in unserializing blocks are:\r\n* 308.227s `CAutoFile`\r\n* 277.827s `CBufferedFile`\r\n\r\nIt is a bit hard to measure the total effect on `-reindex-chainstate` due to random fluctuations in the benchmark. For somewhat reliable results I've run the benchmark 10 times, using [hyperfine](https://github.com/sharkdp/hyperfine):\r\n\r\n```sh\r\nhyperfine \\                                                                                                                                                                                                                                                                                         --parameter-list commit 0f3a6a74a2889817df0f52e19c37de19c664daac,ce26cb6025c47bb4b3e51a579689635da7ca1f6b \\\r\n--setup 'git checkout {commit} && make -j$(nproc)' \\\r\n--prepare 'sync; sudo /sbin/sysctl vm.drop_caches=3' \\\r\n'./bitcoind -dbcache=20000 -reindex-chainstate -printtoconsole=0 -stopatheight=500000'\r\n```\r\n\r\nThe results are:\r\n\r\n```\r\nBenchmark 1: ./bitcoind -dbcache=20000 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (CAutoFile)\r\n  Time (mean ± σ):     1847.622 s ± 13.448 s    [User: 1702.768 s, System: 54.059 s]\r\n  Range (min … max):   1835.319 s … 1877.065 s    10 runs\r\n\r\nBenchmark 2: ./bitcoind -dbcache=20000 -reindex-chainstate -printtoconsole=0 -stopatheight=500000 (CBufferedFile)\r\n  Time (mean ± σ):     1824.660 s ± 14.394 s    [User: 1679.417 s, System: 53.965 s]\r\n  Range (min … max):   1798.764 s … 1848.940 s    10 runs\r\n```\r\n\r\nSo the 9% improvement in unserializing seems to translate to roughly 1.2% total runtime improvement in `-reindex-chainstate` on my machine.",
      "state": "closed",
      "user": "martinus",
      "created_at": "2023-08-06T05:38:01Z",
      "updated_at": "2025-11-27T12:17:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28226",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2588,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2187972203,
      "number": 31323,
      "title": "guix: swap `moreutils` for just `sponge`",
      "body": "Switch to building the only `moreutils` utility we actually need (`sponge`). This results in having less unused stuff in the Guix environment (i.e all the other `moreutils` utilities), and, the dependency graph is simplified. i.e we no-longer have a dependency on `perl`, `docbook` etc, for this package.\r\n\r\nCurrent `moreutils` dependency graph:\r\n![moreutils](https://github.com/user-attachments/assets/b91a8609-1434-4094-ad12-93332737ef0f)\r\n\r\nIn the Guix env, `chronic`, `combine`, `errno`, `ifdata`, `ifne`, `isutf8`, `lckdo`, `mispipe`, `parallel`, `pee`, `ts`, `vidir`, `vipe` & `zrun` (plus their `*.real` variants) are removed.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-19T16:18:58Z",
      "updated_at": "2025-11-27T12:17:47Z",
      "merged_at": "2024-11-27T10:47:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31323",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 674,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2094632347,
      "number": 30986,
      "title": "contrib: skip missing binaries in gen-manpages",
      "body": "Instead of stopping the execution of gen-manpages.py when a binary is not found, continue generating manpages for the available binaries and skip the missing ones.\r\n\r\nA new argument, `--skip-missing-binaries`, has been added to enable this behavior.\r\n\r\n```sh\r\n➜  bitcoin git:(fix-gen-manpages) ✗ ./contrib/devtools/gen-manpages.py --help\r\nusage: gen-manpages.py [-h] [-s]\r\n\r\noptions:\r\n  -h, --help            show this help message and exit\r\n  -s, --skip-missing-binaries\r\n                        skip generation for binaries that are not found\r\n\r\n```\r\n\r\ncloses #30985\r\n\r\nThis PR also includes an error prompt if no binaries are found in the build path.",
      "state": "closed",
      "user": "andremralves",
      "created_at": "2024-09-26T21:37:58Z",
      "updated_at": "2025-11-27T12:17:47Z",
      "merged_at": "2024-11-27T17:34:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30986",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 700,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2195216660,
      "number": 31352,
      "title": "Add coin-grinder example test",
      "body": "In understanding the coin-grinder algorithm, I find it useful to run the algorithm with the parameters given in the example code.  I thing it would be useful to add to the test-framework.",
      "state": "closed",
      "user": "yancyribbens",
      "created_at": "2024-11-22T17:08:22Z",
      "updated_at": "2025-11-27T12:17:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31352",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2190849766,
      "number": 31337,
      "title": "build: Fix coverage builds",
      "body": "This PR follows up on https://github.com/bitcoin/bitcoin/pull/30811, which inadvertently broke coverage builds:\r\n1. For GCC. See https://github.com/bitcoin/bitcoin/pull/31337#issuecomment-2490598011.\r\n2. For [Clang's source-based code coverage](https://clang.llvm.org/docs/SourceBasedCodeCoverage.html) in the OSS-Fuzz environment due to its use of other options and a third party script. See https://issues.oss-fuzz.com/issues/379122777.\r\n\r\nThe root cause of this regression is that the `-ffile-prefix-map` option implicitly applies:\r\n-  [`-fprofile-prefix-map`](https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#index-fprofile-prefix-map) when using GCC.\r\n- [`-fcoverage-prefix-map`](https://clang.llvm.org/docs/ClangCommandLineReference.html#cmdoption-clang-fcoverage-prefix-map) when using Clang. ~This behaviour is not explicitly documented~ See https://github.com/llvm/llvm-project/commit/994c544c18c86cbdb6536aae5d27ef7e2f592486.\r\n\r\nWith this PR, only the `-fdebug-prefix-map` and `-fmacro-prefix-map` options are applied.\r\n\r\n**Note for reviewers:** Please ensure that https://github.com/bitcoin/bitcoin/issues/30799 is not reintroduced.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-20T21:41:48Z",
      "updated_at": "2025-11-27T12:17:45Z",
      "merged_at": "2024-11-27T14:21:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31337",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1185,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2203348434,
      "number": 31381,
      "title": "Update init.md",
      "body": "###Motivation for the patch:\r\n\r\nThe change corrects a spelling error in the documentation, where \"behaviour\" was mistakenly used instead of the correct American English spelling \"behavior.\" Since Bitcoin Core's official documentation follows American English conventions, this fix ensures consistency and accuracy, making the documentation clearer and more professional for users and developers.",
      "state": "closed",
      "user": "sky-coderay",
      "created_at": "2024-11-27T12:14:43Z",
      "updated_at": "2025-11-27T12:17:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31381",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 410,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2196840210,
      "number": 31362,
      "title": "kernel, refactor: Replace `goto` with RAII in `bitcoin-chainstate`",
      "body": "This PR replaces the [`goto` statement](https://github.com/bitcoin/bitcoin/pull/24304/files#diff-04e685224f1ac5bfd91d47d8d7528a2e44f94fab5535d4b6b5af79b5a13aeb93R91) in `bitcoin-chainstate` by encapsulating resources into a dedicated `Epilogue` class.\r\nI've bumped into it while reviewing [#25722](https://github.com/bitcoin/bitcoin/pull/25722/files#diff-04e685224f1ac5bfd91d47d8d7528a2e44f94fab5535d4b6b5af79b5a13aeb93L132).\r\n\r\nKey Changes:\r\n* Encapsulated `ValidationSignals` and `ChainstateManager` cleanup into an RAII Epilogue class to replace the goto-based cleanup logic.\r\n* Split `bitcoin-chainstate` logic into a header to enable isolated testing and clarity.\r\n* Introduced basic tests to ensure normal execution completes successfully in regtest, and cleanup code is called in both success and failure scenarios.\r\n\r\n---\r\n\r\nHow to test it manually:\r\n* `cmake -B build -DCMAKE_BUILD_TYPE=Debug -DBUILD_UTIL_CHAINSTATE=OFF && cmake --build build -j$(nproc) && ctest --test-dir build -j$(nproc)` - should not contain `bitcoin_chainstate_tests`\r\n* `cmake -B build -DCMAKE_BUILD_TYPE=Debug -DBUILD_UTIL_CHAINSTATE=ON && cmake --build build -j$(nproc) && ctest --test-dir build -j$(nproc)` - should contain a passing `bitcoin_chainstate_tests`\r\n* `cmake -B build -DCMAKE_BUILD_TYPE=Debug -DBUILD_UTIL_CHAINSTATE=ON && cmake --build build -j$(nproc) && ./build/src/bitcoin-chainstate your-bitcoin-datadir` - should work the same as before (needs an extra newline at the end to exit)",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-11-24T15:42:33Z",
      "updated_at": "2025-11-27T12:17:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31362",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1551,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1674846300,
      "number": 29231,
      "title": "logging: Update to new logging API",
      "body": "Updates various logging calls to the new API from #28318. All commits are scripted diffs, so should be easy to update if needed, and also easy to reuse the scripts to update other code if needed when rebasing it after this is merged. Changes all uses of `LogPrintLevel()` where the level is hardcoded, and changes all `LogPrintf` and `LogPrint` uses in init.cpp.",
      "state": "closed",
      "user": "ajtowns",
      "created_at": "2024-01-11T16:01:53Z",
      "updated_at": "2025-11-27T10:10:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29231",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 397,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3048111809,
      "number": 33951,
      "title": "test: check for output to stdout in `TestShell` test",
      "body": "This is a small follow-up PR to the recently added `TestShell` test (#33546), verifying the stdout message \"TestShell is already running!\" when trying to instantiate a second instance.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-11-26T15:55:38Z",
      "updated_at": "2025-11-27T10:05:55Z",
      "merged_at": "2025-11-27T09:27:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33951",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 237,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3029503434,
      "number": 33914,
      "title": "Change Parse descriptor argument to string_view",
      "body": "While investigating a silent merge conflict in #33135 I noticed that #32983 changed the descriptor `Parse` function signature from `const std::string& descriptor` to `std::span<const char> descriptor`.\r\n\r\nCalling that new version of `Parse` with a string literal will trigger a confusing \"Invalid characters in payload\" due to the trailing \"\\0\".\r\n\r\nIt can be worked around by having (the test) wrap string literals in `std::string()`, but that's easy to forget.\r\n\r\nUsing `string_view` is easier and more compact than (as a previous version of this PR did) checking for trailing `\\0`.\r\n\r\nAlso add a test.\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-20T11:32:47Z",
      "updated_at": "2025-11-27T09:53:57Z",
      "merged_at": "2025-11-27T09:53:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33914",
      "labels": [
        "Bug",
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 653,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3048678171,
      "number": 33955,
      "title": "leveldb: correct trailer boundary check in Reader::SkipToInitialBlock",
      "body": "replaces the magic number 6 in the trailer boundary condition with kHeaderSize and corrects an off-by-one by expressing the rule as offset_in_block > kBlockSize - kHeaderSize, which is equivalent to offset_in_block >= kBlockSize - 6. According to \r\nsrc/leveldb/doc/log_format.md:\r\n“A record never starts within the last six bytes of a block” \r\nand when exactly seven bytes remain a record may start (e.g., a zero-length FIRST), so the equal case must be treated as trailer. The writer already uses kHeaderSize to manage trailers, and aligning the reader with kHeaderSize removes a format-coupled magic number and ensures future-proof consistency. Functionally this avoids scanning a block when initial_offset_ is in the last six bytes, matching the documented format; it was previously a minor inefficiency and comment mismatch rather than a correctness issue.",
      "state": "closed",
      "user": "sashass1315",
      "created_at": "2025-11-26T19:13:39Z",
      "updated_at": "2025-11-27T08:03:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33955",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 930,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2537208186,
      "number": 32587,
      "title": "test: Fix reorg patterns in tests to use proper fork-based approach",
      "body": "Updated functional tests to replace direct use of `invalidateblock` with proper fork-based reorg behaviour. The direct invalidation approach bypasses important validation checks and has depth limitations(10 block) that don't match real-world reorg scenarios. For more details see #32531.\r\n\r\nFixes #32531",
      "state": "closed",
      "user": "yuvicc",
      "created_at": "2025-05-22T13:26:44Z",
      "updated_at": "2025-11-27T05:52:10Z",
      "merged_at": "2025-11-26T14:02:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32587",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 371,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2858375622,
      "number": 33477,
      "title": "Rollback for dumptxoutset without invalidating blocks",
      "body": "This is an alternative approach to implement `dumptxoutset` with rollback that was discussed a few times. It does not rely on `invalidateblock` and `reconsiderblock` and instead creates a temporary copy of the coins DB, modifies this copy by rolling back as many blocks as necessary and then creating the dump from this temp copy DB. See also https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1978480989, https://github.com/bitcoin/bitcoin/issues/32817#issuecomment-3012406102 and #29565 discussions.\r\n\r\nThe nice side-effects of this are that forks can not interfere with the rollback and network activity does not have to be suspended. But there are also some downsides when comparing to the current approach: this does require some additional disk space for the copied coins DB and performance is slower (master took 3m 17s vs 9m 16s in my last test with the code here, rolling back ~1500 blocks). However, there is also not much code being added here, network can stay active throughout and performance would stay constant with this approach while it would impact master if there were forks that needed to be invalidated as well (see #33444 for the alternative approach), so this could still be considered a good trade-off.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-09-24T21:15:11Z",
      "updated_at": "2025-11-27T00:21:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33477",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1289,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2835744402,
      "number": 33410,
      "title": "coinstats: avoid unnecessary Coin copy in ApplyHash",
      "body": "Replace local Coin coin = it->second; with const Coin& coin = it->second; when iterating outputs in ApplyHash. The hash serialization path only reads from the Coin, and outputs remains valid for the loop’s duration, so copying is unnecessary. This reduces potential allocations (due to CTxOut/CScript) and improves performance without changing behavior.",
      "state": "closed",
      "user": "sashass1315",
      "created_at": "2025-09-17T08:47:17Z",
      "updated_at": "2025-11-26T19:11:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33410",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 405,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3031568183,
      "number": 33919,
      "title": "ci: Run GUI unit tests in cross-Windows task",
      "body": "Most users of the cross-compiled releases for Windows will most likely pick the GUI, so running the cross-compiled GUI unit tests on a real Windows seems desirable.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-20T21:38:57Z",
      "updated_at": "2025-11-26T17:26:49Z",
      "merged_at": "2025-11-25T12:21:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33919",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 209,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3030042320,
      "number": 33916,
      "title": "fuzz: wallet: add target for `TransactionCanBeBumped`",
      "body": "This PR adds a fuzz target for the `TransactionCanBeBumped` function. This function checks if a transaction can be bumped based on:\r\n\r\n1. Transaction has descendants in the wallet.\r\n2. Transaction has descendants in the mempool.\r\n3. Transaction has been mined.\r\n4. Transaction was already bumped.\r\n5. Transaction has inputs that are not mine.\r\n\r\nThis target will create scenarios to exercise all these cases. For the scenario (2), it has a mocked `CTxMemPool` that has a function to update the descendant state on mempool - this way we can speed up the target by avoiding to interacting with the mempool to really create descedants (e.g. creating blocks to trigger it).\r\n\r\nAlso, the `CheckTransaction` calls are to avoid UB on `SetSpentKeyState` - e.g. by calling it with a transaction without any output.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2025-11-20T14:07:08Z",
      "updated_at": "2025-11-26T17:16:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33916",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 859,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2936556747,
      "number": 33676,
      "title": "interfaces: enable cancelling running `waitNext` calls",
      "body": "This is an attempt to fix #33575 see the issue for background and the usefulness of this feature.\r\n\r\nThis PR uses one of the suggested approaches: adding a new `interruptWaitNext()` method to the mining interface.\r\n\r\nIt introduces a new boolean variable, `m_interrupt_wait`, which is set to `false` when the thread starts waiting. The `interruptWaitNext()` method wakes the thread and sets `m_interrupt_wait` to `true`.\r\nWhenever the thread wakes up, it checks whether the wait was aborted; if so, it simply set ` m_interrupt_wait ` to false and return`nullptr`.\r\n\r\nThis PR also adds a functional test for the new method. The test uses `asyncio` to spawn two tasks and attempts to ensure that the wait is executed before the interrupt by using an event monitor. It adds a 0.1-second buffer to ensure the wait has started executing.\r\nIf that buffer elapses without `waitNext` executing, the test will fail because a transaction is created after the buffer.\r\n\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-10-22T10:14:51Z",
      "updated_at": "2025-11-26T16:50:42Z",
      "merged_at": "2025-11-10T09:56:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33676",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1014,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3039970161,
      "number": 33937,
      "title": "depends: Fix native_capnp to respect build_CC and build_CXX",
      "body": "Fixes #33859\n\nnative_capnp was ignoring CC/CXX environment variables and always using the system default compiler. This caused build failures on systems with older GCC versions when users tried to specify a different compiler.\n\nAdded config_env settings in native_capnp.mk to properly use build_CC and build_CXX variables, following the same pattern used in native_qt.mk.",
      "state": "closed",
      "user": "psam21",
      "created_at": "2025-11-24T13:12:48Z",
      "updated_at": "2025-11-26T15:36:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33937",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 431,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3044780725,
      "number": 33946,
      "title": "interfaces: remove redundant mempool lock in ChainImpl::isInMempool()",
      "body": "This PR removes an unnecessary `LOCK(mempool->cs)` in `ChainImpl::isInMempool()`. The method calls `CTxMemPool::exists()`, which already locks `mempool->cs` internally. Because the mempool mutex is a RecursiveMutex, double-locking was safe but redundant. Dropping the outer lock matches patterns used elsewhere in ChainImpl (e.g. `hasDescendantsInMempool()` and `GetTransactionAncestry()` callers) where mempool read APIs are invoked without an additional lock and rely on the callee’s internal locking. `isRBFOptIn()` remains unchanged since `IsRBFOptIn(tx, pool)` explicitly requires the caller to hold `pool.cs` as indicated by its thread-safety annotation.",
      "state": "closed",
      "user": "Fibonacci747",
      "created_at": "2025-11-25T19:24:08Z",
      "updated_at": "2025-11-26T14:55:44Z",
      "merged_at": "2025-11-26T14:55:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33946",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 730,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2742266553,
      "number": 33181,
      "title": "guix: build for Linux HOSTS with `-static-libgcc`",
      "body": "Build release binaries with `-static-libgcc`.\r\nWould avoid future issues like https://github.com/bitcoin/bitcoin/pull/33178.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-08-13T10:13:10Z",
      "updated_at": "2025-11-26T13:22:55Z",
      "merged_at": "2025-11-11T11:09:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33181",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 174,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3044341071,
      "number": 33945,
      "title": "depends: latest config.guess & config.sub",
      "body": "It's been about a year since these were last updated. \r\nPull in the latest versions.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-25T16:40:33Z",
      "updated_at": "2025-11-26T13:08:01Z",
      "merged_at": "2025-11-26T11:27:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33945",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 126,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2183677874,
      "number": 31305,
      "title": "refactor: Fix remaining clang-tidy performance-inefficient-vector errors",
      "body": "PR inspired by https://github.com/bitcoin/bitcoin/pull/29608#issuecomment-2437847307 (and https://github.com/bitcoin/bitcoin/pull/29458, https://github.com/bitcoin/bitcoin/pull/29606, https://github.com/bitcoin/bitcoin/pull/29607, https://github.com/bitcoin/bitcoin/pull/30093).\r\n\r\nThe `clang-tidy` check can be run via:\r\n```bash\r\ncmake -B build -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_BENCH=ON -DBUILD_FUZZ_BINARY=ON -DBUILD_FOR_FUZZING=ON && cmake --build build -j$(nproc)\r\n\r\nrun-clang-tidy -quiet -p build -j $(nproc) -checks='-*,performance-inefficient-vector-operation' | grep -v 'clang-tidy'\r\n```\r\nwhich revealed 3 tests and 1 prod warning (+ fuzz and benching, found by hebasto).\r\nEven though the tests aren't performance critical, getting rid of these warnings (for which the checks were already enabled via https://github.com/bitcoin/bitcoin/blob/master/src/.clang-tidy#L18, see below), the fix was quite simple.\r\n\r\n<details>\r\n<summary>clang-tidy -list-checks</summary>\r\n\r\n```bash\r\ncd src && clang-tidy -list-checks | grep 'vector'\r\n    performance-inefficient-vector-operation\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Output before the change</summary>\r\n\r\n```\r\nsrc/test/rpc_tests.cpp:434:9: error: 'emplace_back' is called inside a loop; consider pre-allocating the container capacity before the loop [performance-inefficient-vector-operation,-warnings-as-errors]\r\n  433 |     for (int64_t i = 0; i < 100; i++) {\r\n  434 |         feerates.emplace_back(1 ,1);\r\n      |         ^\r\n\r\nsrc/test/checkqueue_tests.cpp:366:13: error: 'emplace_back' is called inside a loop; consider pre-allocating the container capacity before the loop [performance-inefficient-vector-operation,-warnings-as-errors]\r\n  365 |         for (size_t i = 0; i < 3; ++i) {\r\n  366 |             tg.emplace_back(\r\n      |             ^\r\n\r\nsrc/test/cuckoocache_tests.cpp:231:9: error: 'emplace_back' is called inside a loop; consider pre-allocating the container capacity before the loop [performance-inefficient-vector-operation,-warnings-as-errors]\r\n  228 |     for (uint32_t x = 0; x < 3; ++x)\r\n  229 |         /** Each thread is emplaced with x copy-by-value\r\n  230 |         */\r\n  231 |         threads.emplace_back([&, x] {\r\n      |         ^\r\n\r\nsrc/rpc/output_script.cpp:127:17: error: 'push_back' is called inside a loop; consider pre-allocating the container capacity before the loop [performance-inefficient-vector-operation,-warnings-as-errors]\r\n  126 |             for (unsigned int i = 0; i < keys.size(); ++i) {\r\n  127 |                 pubkeys.push_back(HexToPubKey(keys[i].get_str()));\r\n      |                 ^\r\n```\r\n\r\nAnd the fuzz and benchmarks, noticed by hebasto: https://github.com/bitcoin/bitcoin/pull/31305#issuecomment-2483124499\r\n\r\n</details>\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-11-17T13:06:26Z",
      "updated_at": "2025-11-26T12:17:02Z",
      "merged_at": "2024-11-26T19:58:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31305",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2878,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2163262219,
      "number": 31221,
      "title": "ci: Split out native fuzz jobs for macOS and windows (take 2)",
      "body": "Split out two new CI jobs (for native macOS and windows) that run the fuzz tests on the qa-assets input corpora.\r\n\r\nIn both jobs the fuzz binary is built with `-DBUILD_FOR_FUZZING` to enable `Assume` assertions as well as `FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION`.\r\n",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-11-05T14:45:57Z",
      "updated_at": "2025-11-26T12:17:02Z",
      "merged_at": "2024-11-26T18:30:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31221",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 329,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2196915598,
      "number": 31364,
      "title": "refactor: Fix remaining clang-tidy performance-unnecessary-copy-initialization errors",
      "body": "A follow-up of https://github.com/bitcoin/bitcoin/pull/31305.\r\n\r\nThe `clang-tidy` check can be run via:\r\n```bash\r\ncmake -B build -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_BENCH=ON -DBUILD_FUZZ_BINARY=ON -DBUILD_FOR_FUZZING=ON && cmake --build build -j$(nproc)\r\n\r\nrun-clang-tidy -quiet -p build -j $(nproc) -checks='-*,performance-unnecessary-copy-initialization' | grep -v 'clang-tidy'\r\n```\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-11-24T18:39:21Z",
      "updated_at": "2025-11-26T12:17:01Z",
      "merged_at": "2024-11-26T22:00:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31364",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 533,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2198627286,
      "number": 31365,
      "title": "interpreter: Use the same type for SignatureHash in the definition",
      "body": "This was missed during the original PR switching the nHashType argument to int32_t in SignatureHash in bc52cda1f3c007bdf1ed00aa3011e207c7531017.\r\n\r\nThe problem was discovered after running into a linker error when attempting to link this code as a static library using the header as a declaration with a riscv32 bare metal toolchain. The compiler would error with:\r\n```\r\n/opt/riscv-ilp32/lib/gcc/riscv32-unknown-elf/13.2.0/../../../../riscv32-unknown-elf/bin/ld: build_kernel_riscv/src/libbitcoin_consensus.a(interpreter.cpp.o): in function `GenericTransactionSignatureChecker<CTransaction>::CheckECDSASignature(std::vector<unsigned char, std::allocator<unsigned char> > const&, std::vector<unsigned char, std::allocator<unsigned char> > const&, CScript const&, SigVersion) const':\r\n/home/user/bitcoin/build_kernel_riscv/./script/interpreter.cpp:2043:(.text._ZNK34GenericTransactionSignatureCheckerI12CTransactionE19CheckECDSASignatureERKSt6vectorIhSaIhEES6_RK7CScript10SigVersion[_ZNK34GenericTransactionSignatureCheckerI12CTransactionE19CheckECDSASignatureERKSt6vectorIhSaIhEES6_RK7CScript10SigVersion]+0xee): undefined reference to `uint256 SignatureHash<CTransaction>(CScript const&, CTransaction const&, unsigned int, int, long long const&, SigVersion, PrecomputedTransactionData const*)'\r\n```\r\n\r\nWith this patch it is possible to link against the static consensus library and produce a fully static executable.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-11-25T14:42:50Z",
      "updated_at": "2025-11-26T12:17:00Z",
      "merged_at": "2024-11-26T18:45:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31365",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1483,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2591037188,
      "number": 32747,
      "title": "Introduce SockMan (\"lite\"): low-level socket handling for HTTP",
      "body": "Introduces a new low-level socket manager `SockMan` as an abstract class with virtual functions for implementing higher-level networking protocols like HTTP. This is the next step in https://github.com/bitcoin/bitcoin/issues/31194\r\n\r\nThis is a minimal, alternative version of #30988 (\"Split CConnman\") without any changes to working code (P2P is not affected). It adds a stripped-down version of the `SockMan` introduced in that pull request that implements only what is needed for the HTTP server implemented in #32061 (i.e. no I2P stuff and for now, no outbound connection stuff). Exclusions from the original `SockMan` pull request can be checked with:\r\n\r\n```\r\ngit diff vasild/sockman \\\r\nsrc/common/sockman.h \\\r\nsrc/common/sockman.cpp\r\n```\r\n\r\nThe commit order has been flipped quite a bit because the original PR incrementally pulls logic out of `net` wheras this PR builds a new system from the bottom-up. Otherwise I tried to keep all the `SockMan` code in order so reviewers of the original PR would be familiar with it.\r\n\r\nIt also adds unit tests by introducing a `SocketTestingSetup` which mocks network sockets by returning a queue of `DynSock` from `CreateSock()`. HTTP server tests in #32061 will be rebased on this framework as well.\r\n\r\n",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-06-13T18:36:49Z",
      "updated_at": "2025-11-26T11:01:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32747",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1312,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3013501086,
      "number": 33877,
      "title": "kernel: Rename in-memory DB option setters and simplify API",
      "body": "Remove the int parameter from `btck_chainstate_manager_options_*_in_memory` functions and rename them from \"update\" to \"set\". These functions now only set the options to `true` for enabling in-memory mode. This, combined with explicit default initialization of in-memory options to `false` in `ChainstateManagerOptions` constructor, should remove ambiguity about what happens when these functions are not called.",
      "state": "closed",
      "user": "stringintech",
      "created_at": "2025-11-15T13:28:07Z",
      "updated_at": "2025-11-26T10:55:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33877",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 472,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1863560053,
      "number": 30079,
      "title": "Fee Estimation: Ignore all transactions that are CPFP'd",
      "body": "Another attempt at #25380 with an alternate approach\r\n\r\nThis PR updates `CBlockPolicyEstimator` to ignore all transactions that are CPFP'd by some child when a new block is received.\r\nThis fixes the assumption that all transactions are confirmed solely because of their fee rate. \r\nAs some transactions are confirmed due to a CPFP by some child.\r\n\r\nThis approach linearize all transactions removed from the mempool because of the new  block, and only ignore transactions whose mining score is not the same with their the fee rate.\r\n\r\nAll transaction with in-mempool parent are already not tracked for fee estimation, so the child that CPFP'd the parent is also ignored.\r\n\r\nUpon implementing the cluster mempool, we will just track chunks and make the fee estimator package aware.\r\n\r\n\r\nThis PR depends on #33216, which enables the mini-miner to return the package fee rate of linearized transactions.\r\nThat’s why this PR is currently in draft.",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2024-05-10T09:04:16Z",
      "updated_at": "2025-11-26T09:16:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30079",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 998,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2757098119,
      "number": 33216,
      "title": "mini miner: enable `Linearize` return package feerates",
      "body": "This PR adds supports for mini miner to return the package fee rates of the linearized transactions\r\n\r\nThe first step for #30079\r\n\r\nIt is motivated by https://github.com/bitcoin/bitcoin/pull/30079#issuecomment-3191510709",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-08-19T17:07:46Z",
      "updated_at": "2025-11-26T09:13:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33216",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 275,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1917070148,
      "number": 30277,
      "title": "[DO NOT MERGE] Erlay: bandwidth-efficient transaction relay protocol (Full implementation)",
      "body": "Erlay Project Tracking: https://github.com/bitcoin/bitcoin/issues/30249\r\n\r\n---\r\n\r\nThis is a full implementation of Erlay. Its purpose is to check the integrity and correctness of the implementation against changes/additions that may originate from the review process and/or rebases on top of newer functionality.\r\n\r\nThis is not to be merged. Functionality will be spread across multiple smaller PRs to ease the review process.\r\n\r\n---\r\n\r\n## Approach \r\n\r\nThe implementation approach builds on the following assumptions:\r\n\r\n- Fanout (the current relay method) is faster than Erlay, but less bandwidth efficient\r\n- Fanout is optimal if the node we want to announce a certain transaction doesn't know about it (but of course, we don't have that information)\r\n\r\n\r\nThe general approach works as follows:\r\n\r\nReconciliation is used alongside fanout to relay transactions across the network. For Erlay nodes, the relay method will be decided per-transaction, instead of per connection, meaning that Erlay connections will do both fanout and reconciliation depending on the transaction (legacy connections will do only fanout, obviously).\r\n\r\nThe parameters selected for fanout are minimized to maximize the bandwidth saving. The current selected defaults are 4 outbound peers and 10% of inbounds. The relay logic depends on the type of connection and how the transaction has been received:\r\n\r\n- For outbound connections, if the transaction was received via fanout (or originates in us), we fanout until up to N peers know about it. We do this by checking the `m_tx_inventory_known_filter`, so their announcements also count. If the transaction was received via reconciliation, we simply reconcile with the rest of our peers.\r\n- For inbounds, we select 10% of our connections and rotate that selection periodically.\r\n\r\nThe reasoning for this is trying to guess how far the transaction has made it into the network with imperfect information. Knowing that fanout is faster than reconciliation, we want to have a higher fanout rate at the very beginning of the propagation, to get as far as we can, being fully efficient. This can be tied to how many of our peers know about the transaction already. Once the transaction is sufficiently spread, we can just reconcile it with the rest of our peers.\r\nThis does not apply to inbounds, as they are not trusted, and the metric will be easily abused, plus it may be used to leak transaction origin information. For them, we just keep a low fanout rate.\r\n\r\n## Testing and simulating\r\n\r\nThe last two commits of this PR are currently for simulation only. They allow to easily config the inbound/outbound fanout rate without having to recompile the code, and make full reconciliation more efficient.\r\n",
      "state": "open",
      "user": "sr-gi",
      "created_at": "2024-06-12T17:18:05Z",
      "updated_at": "2025-11-26T08:48:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30277",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2818,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3033970567,
      "number": 33921,
      "title": "doc: clarify and cleanup macOS fuzzing notes",
      "body": "* Remove or consolidate macOS notes sprinkled throughout the doc into dedicated section\r\n* Note that support for fuzzing on macOS is not maintained\r\n\r\nCloses #33731",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2025-11-21T14:29:02Z",
      "updated_at": "2025-11-25T17:40:27Z",
      "merged_at": "2025-11-25T16:26:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33921",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 209,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3023656191,
      "number": 33906,
      "title": "depends: Add patch for Windows11Style plugin",
      "body": "This PR fixes https://github.com/bitcoin-core/gui/issues/906:\r\n\r\n<img width=\"561\" height=\"179\" alt=\"image\" src=\"https://github.com/user-attachments/assets/6bb6d12b-91a6-4659-b6eb-be64093ec86d\" />",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-18T22:38:03Z",
      "updated_at": "2025-11-25T17:14:54Z",
      "merged_at": "2025-11-25T17:06:58Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33906",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 240,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3022289272,
      "number": 33903,
      "title": "ci: Remove redundant busybox option",
      "body": "The option was fine, but now that there is a dedicated Alpine Linux task, which uses BusyBox, it seems redundant.\r\n(See: `ci/test/00_setup_env_native_alpine_musl.sh`)\r\n\r\nSo remove the `USE_BUSY_BOX` option, along with the `BINS_SCRATCH_DIR` env var.\r\n\r\nAlso includes two small ci-doc fixups.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-18T15:26:30Z",
      "updated_at": "2025-11-25T16:39:31Z",
      "merged_at": "2025-11-25T16:28:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33903",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 327,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3039429334,
      "number": 33933,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "rejected-l",
      "created_at": "2025-11-24T10:42:30Z",
      "updated_at": "2025-11-25T16:10:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33933",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3039701991,
      "number": 33934,
      "title": "Update GitHub Actions",
      "body": "Updated checkout action to v6 for Node.js 24 support and enhanced credential security.\r\n\r\nv6 - https://github.com/actions/checkout/releases/tag/v6.0.0",
      "state": "closed",
      "user": "wedjob0X",
      "created_at": "2025-11-24T11:53:43Z",
      "updated_at": "2025-11-25T16:10:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33934",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 172,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3044243790,
      "number": 33944,
      "title": "Request: fix typos in \"release-notes-0.18.0.md\" and \"release-notes-0.15.0.1.md\"",
      "body": "Typos Identified:\r\n\r\n1. \"seperate\" → should be \"separate\"\r\n- File: doc/release-notes/release-notes-0.18.0.md\r\n- Line: 909-947 region\r\n- Text: \"#15043 Build fuzz targets into seperate executables (MarcoFalke)\"\r\n- URL: https://github.com/bitcoin/bitcoin/blob/0690514d4f72aac251ee0b876cded9187d42c63e/doc/release-notes/release-notes-0.18.0.md#L909-L947\r\n\r\n2. \"occuring\" → should be \"occurring\"\r\n- File: doc/release-notes/release-notes-0.15.0.1.md\r\n- Line: 1-87 region\r\n- Text: \"This is a minimal patch to avoid this issue from occuring.\"",
      "state": "closed",
      "user": "oxyzenQ",
      "created_at": "2025-11-25T16:09:18Z",
      "updated_at": "2025-11-25T16:09:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33944",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 614,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3003464725,
      "number": 33862,
      "title": "txgraph: drop move assignment operator",
      "body": "This removes the only place where move-assignment of `TxGraph::Ref` is used (in tests), and drops supports for it.\r\n\r\nSuggested in https://github.com/bitcoin/bitcoin/pull/33629#discussion_r2518940184",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-11-12T16:25:12Z",
      "updated_at": "2025-11-25T15:58:51Z",
      "merged_at": "2025-11-25T15:58:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33862",
      "labels": [
        "Refactoring",
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 238,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2496293029,
      "number": 32409,
      "title": "test: Introduce `SUPPRESS_ABORT_MESSAGE` environment variable",
      "body": "This PR adds a way to suppress the abort message box when running `test_bitcoin.exe` and `fuzz.exe` built with the debug runtime library on Windows.\r\n\r\nOtherwise, a failing `assert()` triggers the `abort` routine, which displays a message box and causes a timeout in CI.\r\n\r\nHere are CI jobs for the \"Debug\" configuration:\r\n - on the master branch: https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/14759346479/job/41435857332\r\n - with this PR: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/15038743417/job/42265371841\r\n\r\nAddresses this [comment](https://github.com/bitcoin/bitcoin/issues/32341#issuecomment-2842716175).\r\n\r\nAccording to Microsoft's [docs](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/abort), this behavior is MSCV-specific.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-05-02T19:45:20Z",
      "updated_at": "2025-11-25T15:55:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32409",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 848,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2915249205,
      "number": 33631,
      "title": "init: Split file path handling out of -asmap option",
      "body": "Note: There is an alternative change that leaves the behavior of `-asmap` as is but makes slight improvements and adds better documentation: #33632 Please indicate with your conceptual review which option you prefer, thanks!\r\n\r\nThis change adds a new option `-asmapfile` which allows to set the asmap file, while `-asmap` now is simply a bool option. Also fixes the asmap functional test docs, since then had become out of sync with the actual content of the test.\r\n\r\nThe current handling of `-asmap` is a bit confusing and atypical of our usual options behavior. The `-asmap` option can be used as a boolean which turns on the feature and looks for the file in the default location. But it can be alternatively be used to pass a path to a file which is not in the default location, which also turns on the feature implicitly.\r\n\r\nSee #33386 for further discussion. Closes #33386",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-10-14T22:25:01Z",
      "updated_at": "2025-11-25T13:06:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33631",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 930,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3030442054,
      "number": 33917,
      "title": "clang-format: Set Bitcoin Core IncludeCategories",
      "body": "Replace the default llvm include categories with the ones specific to Bitcoin Core.\r\n\r\nRef: https://releases.llvm.org/17.0.1/tools/clang/docs/ClangFormatStyleOptions.html#includecategories\r\n\r\nAlso, format a file as example. To test this, the diff in src/test needs\r\nto be reverted. Also `IncludeBlocks: Regroup` needs to be set. Then\r\n`clang-format -i src/test/blockchain_tests.cpp` should recreate the\r\ndiff.\r\n\r\n```diff\r\ndiff --git a/src/.clang-format b/src/.clang-format\r\nindex 15335fe9ae..579079095f 100644\r\n--- a/src/.clang-format\r\n+++ b/src/.clang-format\r\n@@ -99,3 +99,3 @@ IfMacros:\r\n   - KJ_IF_MAYBE\r\n-IncludeBlocks:   Preserve\r\n+IncludeBlocks:   Regroup\r\n IncludeCategories:\r\n```\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-20T15:57:25Z",
      "updated_at": "2025-11-25T13:01:21Z",
      "merged_at": "2025-11-25T12:24:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33917",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 738,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999464749,
      "number": 33855,
      "title": "kernel: add btck_block_tree_entry_equals",
      "body": "`BlockTreeEntry` objects are often compared. This happens frequently in our own codebase and seems likely to be the case for clients, too. Users can already work around this by comparing based on block hash (and optionally height as belt-and-suspenders), but I think this should be part of the interface for performance and consistency reasons.\r\n\r\nNote: perhaps this is too ad-hoc, and we should extend this PR to add the operator for more types? `BlockTreeEntry` is the main one I've needed this for in developing `py-bitcoinkernel`, though.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-11-11T15:22:46Z",
      "updated_at": "2025-11-25T12:32:56Z",
      "merged_at": "2025-11-25T12:31:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33855",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 583,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3019193526,
      "number": 33893,
      "title": "test: add `-alertnotify` test for large work invalid chain warning",
      "body": "This PR adds missing test coverage for the `LARGE_WORK_INVALID_CHAIN` fork warning, checked with the `-alertnotify` option:\r\nhttps://github.com/bitcoin/bitcoin/blob/ead849c9f177a3a175a22b35fa864b4b37fb9934/src/validation.cpp#L2033-L2040\r\nFound that this is missing during review of #32587. The test works by first creating a bunch of invalid blocks, that are first announced by headers and then submitted fully in reverse (invalid tip first), in order to set `m_best_invalid` to that value, finally leading to the best chain / invalid chain gap of >= 6 blocks. I'd be curious if there are other (more realistic?) ways to test this. One simple alternative is just to call `invalidateblock` twice (once at the tip, once at the base of the invalid chain). \r\n\r\nNote that the written warning doesn't include the exclamation mark, as it is removed via `SanitizeString` in the `AlertNotify` function.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-11-17T21:57:15Z",
      "updated_at": "2025-11-25T12:31:41Z",
      "merged_at": "2025-11-25T11:45:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33893",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 960,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2755027588,
      "number": 33214,
      "title": "rpc: require integer verbosity; remove boolean 'verbose'",
      "body": "### Summary\r\n\r\nStandardize RPC verbosity to integers only and remove boolean handling for clarity, consistency, and future extensibility.\r\n\r\n### Rationale\r\n\r\n - **Legacy cleanup**: Boolean verbosity has been discouraged/deprecated in docs since 2017 and continues to create tech debt (special-case parsing, inconsistent tests, user confusion).\r\n- **Consistency**: Integers enable multi-level output without overloading a boolean.\r\n\r\n### User-visible changes\r\n- getblock, getrawtransaction, getorphantxs no longer accept booleans.\r\n- Passing true/false now errors with: Verbosity was boolean but only integer allowed.\r\n- Migration: false → 0, true → 1.\r\n\r\n### Code / Docs\r\n- ParseVerbosity(arg, default) now rejects booleans (removed allow_bool).\r\n- Call sites and functional tests updated to use integer levels. \r\n- Developer notes updated; release notes added.\r\n\r\n**Breaking change:** scripts/tools using boolean verbosity must switch to integers.",
      "state": "open",
      "user": "fqlx",
      "created_at": "2025-08-19T02:56:36Z",
      "updated_at": "2025-11-25T12:27:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33214",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 1005,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3030753069,
      "number": 33918,
      "title": "depends: Update Qt download link",
      "body": "Replace the [unreliable](https://github.com/bitcoin/bitcoin/issues/33898#issuecomment-3559092421) https://code.qt.io with the GitHub mirror link.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/33898.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-20T17:23:32Z",
      "updated_at": "2025-11-25T12:22:44Z",
      "merged_at": "2025-11-25T12:22:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33918",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 237,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1741802870,
      "number": 29473,
      "title": "optimization: Speed up Base58 encoding/decoding by 400%/200% via preliminary byte packing",
      "body": "To mitigate the quadratic complexity inherent in the sequential byte division of the Base58 encoding process, this update aggregates characters into groups of 7 and 9, fitting them into 64-bit long integers.\r\nThis refinement utilizes the inherent efficiency of native division and modulo operations on 64-bit architectures, significantly optimizing computational overhead.\r\nThe benchmarks indicate a ~4.4x speedup for `Base58Encode`:\r\n\r\n> make && ./src/bench/bench_bitcoin --filter=Base58Encode --min-time=1000\r\n\r\nbefore:\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               61.00 |       16,393,083.32 |    0.2% |      1.07 | `Base58Encode`\r\n\r\nafter:\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               13.79 |       72,502,616.20 |    0.1% |      1.10 | `Base58Encode`\r\n\r\n------\r\n\r\nThe same was applied to decoding, resulting in a ~2x speedup:\r\n\r\n> make && ./src/bench/bench_bitcoin --filter=Base58Decode --min-time=1000\r\n\r\nbefore:\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               17.41 |       57,429,723.99 |    0.1% |      1.10 | `Base58Decode`\r\n\r\nafter:\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                8.80 |      113,590,754.53 |    0.1% |      1.11 | `Base58Decode`\r\n\r\n-----\r\n\r\nThis also speed up [listunspent](https://github.com/bitcoin/bitcoin/pull/29473#issuecomment-2200977622) by >50%.\r\n\r\n-----\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/29473#issuecomment-2200977622 for additional benchmarks and https://github.com/bitcoin/bitcoin/pull/30035 for additional tests.\r\nI've also tested with with the following temp test (comparing the exact previous impl with the new one for random inputs: https://gist.github.com/paplorinc/96d8e355f6fef10ac79f62d89a6d9f19#file-base58_tests-cpp-L211-L249)",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-02-24T12:52:07Z",
      "updated_at": "2025-11-25T12:16:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29473",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 2298,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2175521330,
      "number": 31279,
      "title": "policy: ephemeral dust followups",
      "body": "Follow-up to https://github.com/bitcoin/bitcoin/pull/30239\r\n\r\nHere are the parent PR's comments that should be addressed by this PR:\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/30239/files#r1834529646\r\nhttps://github.com/bitcoin/bitcoin/pull/30239/files#r1831247308\r\nhttps://github.com/bitcoin/bitcoin/pull/30239/files#r1832622481\r\nhttps://github.com/bitcoin/bitcoin/pull/30239/files#r1831195216\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1835805164\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1835805164\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834639096\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834624976\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834619709\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834610434\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834504436\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834500036\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832985488\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830929809\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832376920\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832755799\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832492686\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832980576\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832784278\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1837989979\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830996993\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830997947\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830012890\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830037288\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1830977092\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832622481\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1834726168\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1832453654\r\nhttps://github.com/bitcoin/bitcoin/pull/30239#discussion_r1848488226",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2024-11-12T18:38:32Z",
      "updated_at": "2025-11-25T12:16:24Z",
      "merged_at": "2024-11-25T18:48:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31279",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2177,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3038945227,
      "number": 33932,
      "title": "ci: Use latest Xcode that the minimum macOS version allows",
      "body": "Changing the CI policy to use the *latest* Xcode (instead of the *earliest*), allowed by the Bitcoin Core minimum supported macOS version, makes sense: While this may require the developer or user to install a later security point-release on macOS, this should generally be fine and it is even expected that users run the latest supported security release of their operating system. Also, in practise, this often doesn't result in a visible change anyway: This specific change from Xcode 16.0 to 16.2 does not change any behavior of the Bitcoin Core CI, because there are no C++-related changes in those point releases.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-24T08:34:18Z",
      "updated_at": "2025-11-25T10:41:49Z",
      "merged_at": "2025-11-25T10:38:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33932",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 678,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2966899263,
      "number": 33755,
      "title": "Relax standardness rules regarding CHECKMULTISIG",
      "body": "In PR #5247, the STRICTENC standardness rules were tightened with regards to CHECKMULTISIG so that unparsable public keys fail the script when they are encountered. The overall purpose here was to disallow the use of confusing hybrid public keys by policy while keeping policy compatible (i.e., strictly stronger) with consensus rules.\r\n\r\nComments in PR #5247 note that \"I don't believe it should affect any system in production\"; however, this belief is/was false. Counterparty was stuffing data blobs into multisig pubkey lists, but these UTXOs were meant to be spendable because, although some pubkeys were unparsable, other keys were parsable, and the UTXOs were meant to be spent by those valid keys.\r\n\r\nBut in tackling the hybrid key issue, PR #5247 disallowed any unparsable keys in multisigs, whether or not they were hybrid, and whether or not the signature was meant to satisfy a hybrid key.\r\n\r\nIn production, Counterparty UTXOs were inadvertently caught up in this standardness rule change and became \"soft confiscated.\"  That is, they were no longer spendable by policy but still recoverable if users are able to somehow bypass standardness by mining their transactions themselves, or getting out-of-band assistance from some other miner.\r\n\r\nI understand that Bitcoin Core never intended to \"soft confiscate\" any UTXOs by policy changes.  This change addresses the problem.\r\n\r\nWith this change, only hybrid formatted keys and empty keys will cause early abort in CHECKMULTISIG operations. Otherwise, failing signature checks revert to their consensus behaviour of testing subsequent public keys.\r\n\r\nCounterparty UTXOs were never intended to make use of hybrid keys and thus shouldn't have any passing signatures using hybrid keys.\r\n",
      "state": "open",
      "user": "roconnor-blockstream",
      "created_at": "2025-10-31T14:02:13Z",
      "updated_at": "2025-11-24T19:11:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33755",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1793,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2932265719,
      "number": 33665,
      "title": "wallet: remove redundant sighash calculation in Musig2 signing flow",
      "body": "In the MuSig2 signing flow, the same sighash ends up being recalculated for all the participant public keys involved in the MuSig aggregate keys. This happens for all the three parts of the signing flow: nonce, partial sig, and aggregate sig.\r\n\r\nThe original intent of this refactor to reduce seeing duplicate code, but it should also help in improving performance of the wallet signing operations.\r\n\r\nThis was highlighted during the review of the MuSig2\r\nsigning PR: https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2382674470\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-10-21T07:17:34Z",
      "updated_at": "2025-11-24T14:21:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33665",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2670,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3040025236,
      "number": 33938,
      "title": "wallet: Validate all descriptors before rescanning in importdescriptors",
      "body": "Fixes #33655\n\nThe importdescriptors RPC was performing expensive blockchain rescans even when descriptor validation failed, wasting time and resources.\n\n## Changes\n\nThis PR separates validation logic into a new ValidateDescriptorImport() function that validates all descriptors before any wallet modifications or rescanning occurs.\n\n## Behavior\n\n- **Before**: ProcessDescriptorImport() validated and imported descriptors one by one, triggering a rescan even if some descriptors were invalid\n- **After**: ValidateDescriptorImport() checks all descriptors first, fails fast on any validation error, and only proceeds to ProcessDescriptorImport() and rescanning if all descriptors are valid\n\n## Benefits\n\n- Fails fast on invalid descriptors without triggering rescan\n- Validates all descriptors upfront before processing any\n- Improves user experience with immediate feedback on validation errors\n- Saves significant time by avoiding unnecessary blockchain rescans\n- Follows the approach suggested by @pinheadmz in the issue discussion",
      "state": "closed",
      "user": "psam21",
      "created_at": "2025-11-24T13:29:49Z",
      "updated_at": "2025-11-24T13:56:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33938",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1104,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3039823971,
      "number": 33935,
      "title": "net: Execute Discover() when bind=0.0.0.0 or :: is set",
      "body": "Fixes #31293\r\n\r\nWhen using `-bind=0.0.0.0:port` or `-bind=[::]:port` (or their `-whitebind` equivalents), the `Discover()` function was not being executed because `bind_on_any` was set to false when explicit bind addresses were provided.\r\n\r\nThis meant that nodes using explicit \"any\" bind addresses would not discover and advertise their own local addresses to peers, even though they were effectively listening on all interfaces.\r\n\r\nThis commit checks if any of the explicitly provided `-bind` or `-whitebind` addresses are \"any\" addresses (0.0.0.0 or ::) and ensures `Discover()` runs in those cases, matching the behavior when no explicit bind is given.",
      "state": "closed",
      "user": "psam21",
      "created_at": "2025-11-24T12:32:21Z",
      "updated_at": "2025-11-24T12:59:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33935",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 711,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2196068053,
      "number": 31354,
      "title": "Update addresstype.cpp",
      "body": "I removed `else` block. Also, I fixed 'return false' in the PUBKEY case. It helps the logic and improves readability.",
      "state": "closed",
      "user": "karurung",
      "created_at": "2024-11-23T05:09:39Z",
      "updated_at": "2025-11-24T12:15:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31354",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 140,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2263728332,
      "number": 31615,
      "title": "validation: ensure assumevalid is always used during reindex",
      "body": "assumevalid may be ignored during reindex for the following reasons:\r\n- the assumevalid block is not in the block index:  this happens when the assumevalid block could not be downloaded before the previous IBD run was interrupted\r\n-  the chainwork of the best header is less than the minimumchainwork: happens if the previous IBD was interrupted before it could connect blocks up to minimumchainwork. See Issue https://github.com/bitcoin/bitcoin/issues/31494\r\n\r\nThis PR fixes this by skipping script verification during reindex if assumevalid is enabled. \r\n\r\nEDIT: While the minimumchainwork is typically set to match the assumevalid block height, users typically adjust the assumevalid block without also adjusting the minimumchainwork; Scenario 2 from the list can occur if the assumevalid block is set to an older block without also reducing the minimumchainwork.",
      "state": "closed",
      "user": "Eunovo",
      "created_at": "2025-01-07T11:52:23Z",
      "updated_at": "2025-11-24T11:23:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31615",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 927,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3029552479,
      "number": 33915,
      "title": "test: Retry download in get_previous_releases.py",
      "body": "Hopefully fixes https://github.com/bitcoin/bitcoin/issues/33913 (intermittent download issues)\r\n\r\nIf not, the diff there to cache the bins can be considered.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-20T11:48:20Z",
      "updated_at": "2025-11-24T09:41:30Z",
      "merged_at": "2025-11-21T21:35:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33915",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 206,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2526186214,
      "number": 32543,
      "title": "kernel: Remove dependency on clientversion",
      "body": "Including a Bitcoin-Core specific version does not make sense if used by external applications.\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-05-17T15:46:36Z",
      "updated_at": "2025-11-24T01:27:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32543",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 140,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2792676188,
      "number": 33282,
      "title": "cmake: fatal error when PIE not supported",
      "body": "This simultaneously avoids silently overriding user preferences while making it harder to accidentally build without PIE support by requiring an explicit setting.\r\n\r\nThis introduces two behaviour changes:\r\n1. a user-defined `CMAKE_POSITION_INDEPENDENT_CODE=OFF` will now be respected by our build system, instead of silently overriding it like before\r\n2. when not explicitly disabled, lack of PIE support will raise a `FATAL_ERROR` instead of a `WARNING`, with a help instruction that this can be overridden with `-DCMAKE_POSITION_INDEPENDENT_CODE=0`\r\n\r\nRemoves a dependency on our custom `configure_warnings` system.\r\n",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-09-02T13:22:43Z",
      "updated_at": "2025-11-23T15:17:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33282",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 661,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2183389417,
      "number": 31300,
      "title": "depends: Update minimum required CMake version",
      "body": "From the CMake 3.31 [Release Notes](https://cmake.org/cmake/help/v3.31/release/3.31.html):\r\n\r\n> Compatibility with versions of CMake older than 3.10 is now deprecated and will be removed from a future version.\r\n\r\nThis PR updates the `cmake_minimum_required` command across all packages in depends to ensure the minimum version is not set below 3.10.\r\n\r\nWithout this change, CMake 3.31 emits a warning:\r\n```\r\n$ make -C depends freetype\r\nmake: Entering directory '/home/hebasto/git/bitcoin/depends'\r\nExtracting freetype...\r\n/home/hebasto/git/bitcoin/depends/sources/freetype-2.11.0.tar.xz: OK\r\nPreprocessing freetype...\r\nConfiguring freetype...\r\nCMake Deprecation Warning at CMakeLists.txt:100 (cmake_minimum_required):\r\n  Compatibility with CMake < 3.10 will be removed from a future version of\r\n  CMake.\r\n\r\n  Update the VERSION argument <min> value or use a ...<max> suffix to tell\r\n  CMake that the project does not need compatibility with older versions.\r\n\r\n\r\n-- The C compiler identification is GNU 13.2.0\r\n< snip >\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-16T22:22:28Z",
      "updated_at": "2025-11-23T12:14:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31300",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1070,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2191964003,
      "number": 31338,
      "title": "test: Deduplicate assert_mempool_contents()",
      "body": "Recently added `mempool_util` implementation probably evolved in parallel with the package RBF one before being submitted as part of ephemeral dust in e2e30e89ba4b9bdbcabaf5b4346610922f0728bb (related comments: https://github.com/bitcoin/bitcoin/pull/30239#discussion_r1825278134, https://github.com/bitcoin/bitcoin/pull/31279#pullrequestreview-2445579323).",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-11-21T11:07:17Z",
      "updated_at": "2025-11-23T12:14:39Z",
      "merged_at": "2024-11-22T00:11:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31338",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 401,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2724614724,
      "number": 33144,
      "title": "build: Set AUTHOR_WARNING on warnings",
      "body": "Now that the cmake setting `-Werror=dev` is set since commit 6a13a6106e3c1ebe95ba6430184d6260a7b942bd for the CI, guix and the dev cmake preset, it could make sense to notify developers about any warnings.\r\n\r\nSo do that with a single `AUTHOR_WARNING`.\r\n\r\nThis can be tested by introducing a bug, like:\r\n\r\n```diff\r\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\r\nindex 6017775fa7..5610e03c66 100644\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -589,7 +589,7 @@ set(Python3_FIND_FRAMEWORK LAST CACHE STRING \"\")\r\n # improves compatibility with Python version managers that use shims.\r\n set(Python3_FIND_UNVERSIONED_NAMES FIRST CACHE STRING \"\")\r\n mark_as_advanced(Python3_FIND_FRAMEWORK Python3_FIND_UNVERSIONED_NAMES)\r\n-find_package(Python3 3.10 COMPONENTS Interpreter)\r\n+find_package(Python3 3.210 COMPONENTS Interpreter)\r\n if(NOT TARGET Python3::Interpreter)\r\n   list(APPEND configure_warnings\r\n     \"Minimum required Python not found.\"\r\n```\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31476.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-08-06T14:27:56Z",
      "updated_at": "2025-11-23T11:28:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33144",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1037,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3036566283,
      "number": 33925,
      "title": "qt: Defer transaction signing until user clicks Send",
      "body": "Fixes #30070\n\nWhen creating an unsigned PSBT from the GUI, the transaction was already signed during preparation, causing legacy inputs to have non-empty scriptSig fields. The PSBT parser then rejects them.\n\nThis defers signing until the user clicks \"Send\" instead of signing during preparation. Fee calculation still works since transactions can be created without signing.\n\nFollows the approach suggested by @achow101 in the issue comments.",
      "state": "closed",
      "user": "151henry151",
      "created_at": "2025-11-22T16:57:43Z",
      "updated_at": "2025-11-22T19:20:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33925",
      "labels": [
        "GUI"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 495,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2182292236,
      "number": 31297,
      "title": "mining: add early return to waitTipChanged()",
      "body": "It's useful to be able to wait for an active chaintip to appear, by calling ` waitTipChanged(uint256::ZERO);`.\r\n\r\nUnfortunately this doesn't work out of the box, because `notifications().m_tip_block` is `ZERO` until a new block arrives.\r\n\r\nAdditionally we need an early return before calling `wait_for`.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-11-15T17:32:34Z",
      "updated_at": "2025-11-22T12:14:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31297",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 348,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2153479805,
      "number": 31182,
      "title": "ci: Place datadirs for tests under tmpfs",
      "body": "This should speed up the tests a bit (see comment below for results).",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-10-30T10:12:20Z",
      "updated_at": "2025-11-22T12:14:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31182",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 110,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3031948596,
      "number": 33920,
      "title": "Export embedded ASMap RPC",
      "body": "This depends on the embedded data PR itself (#28792), until merge this will remain in draft status. All commit but the last one are from there.\r\n\r\nThere has been interest in exporting the embedded data back into a file. This is implemented here with a simple `exportasmap` RPC which provides this functionality. The exported file can be used to verify the data integrity or statistical analysis using e.g. `contrib/asmap-tool.py`.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-20T23:53:36Z",
      "updated_at": "2025-11-22T01:36:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33920",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 456,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2574620275,
      "number": 32696,
      "title": "doc: make `-DWITH_ZMQ=ON` explicit on `build-unix.md`",
      "body": "ZMQ support is not built by default on Linux, and the docs don't make that clear. This PR makes it explicit that the `-DWITH_ZMQ=ON` flag is required to build with ZMQ support on `build-unix.md`.",
      "state": "closed",
      "user": "luisschwab",
      "created_at": "2025-06-06T22:44:36Z",
      "updated_at": "2025-11-21T23:37:02Z",
      "merged_at": "2025-06-10T16:26:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32696",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 249,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2972699691,
      "number": 33770,
      "title": "init: Require explicit -asmap filename",
      "body": "Currently, if `-asmap` is specified without a filename bitcoind tries to load `ip_asn.map` data file.\r\n\r\nThis change now requires `-asmap=ip_asn.map` or another filename to be specified explicitly.\r\n\r\nThe change is intended to make behavior of the option explicit and avoid confusion reported https://github.com/bitcoin/bitcoin/issues/33386 where documentation specifies a default file which is not actually loaded by default. It was originally implemented in\r\nhttps://github.com/bitcoin/bitcoin/pull/33631#issuecomment-3410302383 and various alternatives are discussed there.\r\n",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-11-03T13:17:43Z",
      "updated_at": "2025-11-21T23:28:50Z",
      "merged_at": "2025-11-21T23:28:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33770",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 617,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2793868008,
      "number": 33286,
      "title": "doc: update multisig tutorial to use multipath descriptors",
      "body": "### Summary\r\n\r\nUpdate `doc/multisig-tutorial.md` to use multipath descriptor format  \r\ninstead of separate external/internal descriptors. The tutorial now:\r\n\r\n- extracts a single `xpub_n` per participant\r\n- constructs a multipath `wsh(sortedmulti(...))` descriptor with `<0;1>`  \r\n  change index semantics\r\n- uses `getdescriptorinfo` to compute descriptor checksum\r\n- explains that `importdescriptors` expands the multipath descriptor  \r\n  into internal and external descriptors\r\n- update `/test/functional/wallet_multisig_descriptor_psbt.py` functional test / documentation to use multi-path descriptors\r\n\r\n---\r\n\r\n### Motivation\r\n\r\nA single multipath descriptor is the most convenient pattern for multisig; our documentation should use it.\r\n\r\n---\r\n\r\n### What changed\r\n\r\n- replaced extraction of `external_xpub_n` and `internal_xpub_n` with  \r\n  extraction of a single `xpub_n`\r\n- removed instructions to create and import separate external/internal  \r\n  descriptors\r\n- added instructions to build a multipath `wsh(sortedmulti(...))`  \r\n  descriptor and derive checksum with `getdescriptorinfo`\r\n- checksum field is parsed and appended as the multipath descriptor is not the canonical \"desc\" output\r\n- clarified that `importdescriptors` automatically expands multipath  \r\n  descriptors into internal and external forms\r\n- similar changes to the functional test: wallet_multisig_descriptor_psbt.\r\n\r\n---\r\n\r\n### Testing\r\n\r\nI have run the updated shell snippets and confirmed the multipath descriptor produces the same `listdescriptors` output after importing as the two descriptor method in bitcoin:master.\r\n\r\n---\r\n\r\n### Related issues / PRs\r\n\r\nThis tutorial change references the multipath descriptor\r\nconsolidation (see commit / PR referenced in the change). The commit\r\nmessage points to bitcoin#22838 as the upstream change that enables\r\nthis behavior.\r\n\r\n---\r\n\r\n### Release note (for changelog)\r\n\r\nDocumentation: update multisig tutorial and multisig functional test to use multipath descriptors",
      "state": "closed",
      "user": "BenWestgate",
      "created_at": "2025-09-02T20:28:46Z",
      "updated_at": "2025-11-21T23:06:10Z",
      "merged_at": "2025-11-21T23:06:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33286",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2056,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2724706971,
      "number": 33145,
      "title": "CI: silent merge check",
      "body": "With the upcoming potential migration to cirrus runners (#32989) we need a way to periodically check for a silent merge conflict. Cirrus CI currently does this every week.\r\n\r\nThis is part of a proposal that will look for a label on a PR as a trigger to run the lint and get_previous_releases test. This label could be added manually or better, Drahtbot could periodically add (and remove) this label.\r\n\r\nAn example of this running on a test org: https://github.com/testing-cirrus-runners/bitcoin/actions/runs/16780213204/job/47516540034",
      "state": "open",
      "user": "m3dwards",
      "created_at": "2025-08-06T14:53:08Z",
      "updated_at": "2025-11-21T16:52:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33145",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 559,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2792355663,
      "number": 33278,
      "title": "cmake: make missing Python interpreter behaviour more explicit",
      "body": "We require Python 3.10 for multiple targets, and currently raise a general warning if it is missing, leading to:\r\n1. functional test suite: runtime failure if python missing (as e.g. described in #31476)\r\n2. maintenance targets: targets skipped if python missing\r\n3. macos deploy target: target created, but build fails if python missing\r\n\r\nThis PR:\r\n- adds a `BUILD_FUNCTIONAL_TESTS` option (default `ON`) and raises `FATAL_ERROR` if Python is missing and we're building the functional tests\r\n- raises explicit warnings (in-line, not at the end of the configure summary) for maintenance and macos deploy targets, and skips the macos deploy target instead of letting the build fail\r\n- removes the general missing python warning at the end of the configure summary\r\n- removes a dependency on our custom `configure_warnings` system (but requires further work to be completely removed)\r\n\r\nBehaviour changes:\r\n- `cmake -B build` now throws a `FATAL_ERROR` if minimum Python could not be found (overridden with `cmake -B build -DBUILD_FUNCTIONAL_TESTS=0`)\r\n- `deploy` target no longer created if minimum Python could not be found\r\n- warnings are raised on a usage basis, and no longer generically mentioned at the end of configure\r\n\r\nAlternative to #31669 and partially to #33144 and #32865, partially addresses #31476.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-09-02T11:45:47Z",
      "updated_at": "2025-11-21T15:29:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33278",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1377,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2624129771,
      "number": 32821,
      "title": "rpc: Handle -named argument parsing where '=' character is used",
      "body": "Addresses [comment](https://github.com/bitcoin/bitcoin/pull/31375#discussion_r2091886628) and [this](https://github.com/bitcoin/bitcoin/pull/31375#discussion_r2092039999).\r\n\r\nThe [PR #31375](https://github.com/bitcoin/bitcoin/pull/31375) got merged and enables `-named` by default in the `bitcoin rpc` interface; `bitcoin rpc` corresponds to `bitcoin-cli -named` as it's just a wrapper.  Now, the problem arises when we try to parse the positional paramater which might contain \"=\" character.  This splits the parameter into two parts first, before the \"=\" character, which treats this as the parameter name, but the other half is mostly passed as an empty string. Here, the first part of the string is an unknown parameter name; thus, an error is thrown. These types of errors are only applicable to those RPCs which might contain the `=` character as a parameter. Some examples are `finalizepsbt`, `decodepsbt`, `verifymessage` etc.\r\n\r\nThis is the one example of the error in `finalizepsbt` RPC:\r\n```\r\n./bitcoin-cli -named -regtest finalizepsbt cHNidP8BAJoCAAAAAqvNEjSrzRI0q80SNKvNEjSrzRI0q80SNKvNEjSrzRI0AAAAAAD9////NBLNqzQSzas0Es2rNBLNqzQSzas0Es2rNBLNqzQSzasBAAAAAP3///8CoIYBAAAAAAAWABQVQBGVs/sqFAmC8HZ8O+g1htqivkANAwAAAAAAFgAUir7MzgyzDnRMjdkVa7d+Dwr07jsAAAAAAAAAAAA=\r\nerror code: -8\r\nerror message:\r\nUnknown named parameter cHNidP8BAJoCAAAAAqvNEjSrzRI0q80SNKvNEjSrzRI0q80SNKvNEjSrzRI0AAAAAAD9////NBLNqzQSzas0Es2rNBLNqzQSzas0Es2rNBLNqzQSzasBAAAAAP3///8CoIYBAAAAAAAWABQVQBGVs/sqFAmC8HZ8O+g1htqivkANAwAAAAAAFgAUir7MzgyzDnRMjdkVa7d+Dwr07jsAAAAAAAAAAAA\r\n```\r\nThis PR fixes this by updating the `vRPCConvertParams` table that identifies parameters that need special handling in `-named` parameter mode. The parser now recognises these parameters and handles strings with \"=\" char correctly, preventing them from being incorrectly split as parameter assignments.",
      "state": "closed",
      "user": "zaidmstrr",
      "created_at": "2025-06-27T11:43:16Z",
      "updated_at": "2025-11-21T15:16:57Z",
      "merged_at": "2025-11-18T22:07:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32821",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1924,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1323107430,
      "number": 27509,
      "title": "Relay own transactions only via short-lived Tor or I2P connections",
      "body": "To improve privacy, relay locally submitted transactions (from the wallet or via RPC) to the P2P network only via Tor or I2P short-lived connections.\r\n\r\n* Introduce a new connection type for relaying sensitive data (our own transactions) with the following properties:\r\n  * started whenever there are local unbroadcast transactions to be sent\r\n  * only opened to Tor or I2P peers\r\n  * opened regardless of max connections limits\r\n  * after handshake is completed one local transaction is pushed to the peer and the connection is closed\r\n  * ignore all incoming messages after handshake is completed\r\n\r\n* Relay locally submitted transactions (from the wallet or via RPC) using this new mechanism, to a few Tor or I2P peers.\r\n\r\n* Hide those transactions from `GETDATA` and `MEMPOOL` requests, as if we don't have them.\r\n\r\n* Once we get an `INV` from somebody, request the transaction with `GETDATA`, as if we didn't have it before.\r\n\r\n* After we receive the full transaction as a `TX` message, in reply to our `GETDATA` request, only then consider the transaction has propagated through the network and remove it from the unbroadcast list.\r\n\r\n* `INV` it to others as a result of the `TX` message we get, like what we do with transactions that are not ours.\r\n\r\nThe messages exchange should look like this:\r\n\r\n```\r\ntx-sender >--- connect -------> tx-recipient\r\ntx-sender >--- VERSION -------> tx-recipient\r\ntx-sender <--- VERSION -------< tx-recipient\r\ntx-sender <--- WTXIDRELAY ----< tx-recipient (maybe) \r\ntx-sender <--- SENDADDRV2 ----< tx-recipient (maybe) \r\ntx-sender <--- SENDTXRCNCL ---< tx-recipient (maybe) \r\ntx-sender <--- VERACK --------< tx-recipient\r\ntx-sender >--- VERACK --------> tx-recipient\r\ntx-sender >--- TX ------------> tx-recipient\r\ntx-sender >--- PING ----------> tx-recipient\r\ntx-sender <--- PONG ----------< tx-recipient\r\ntx-sender disconnects\r\n```\r\n\r\nWhenever a new local transaction is received (from the wallet or RPC), the node will send it to 5 (`SENSITIVE_RELAY_NUM_BROADCAST_PER_TX`) recipients right away. If after 10-15 mins we still have not heard anything about the transaction from the network, then it will be sent to 5 more peers (see `PeerManagerImpl::ReattemptInitialBroadcast()`).\r\n\r\nA few considerations:\r\n* The short-lived sensitive relay connections are very cheap and fast wrt network traffic. It is expected that some of those peers will blackhole the transaction. Just one honest/proper peer is enough for successful propagation.\r\n* The peers that receive the transaction could deduce that this is initial transaction broadcast from the transaction originator. This is ok, they can't identify the sender.\r\n\r\nTODO:\r\n* [x] Disable if `-connect` is used or Tor and I2P are not reachable.\r\n* [x] Use I2P transient connections even if listening on I2P.\r\n* [x] Do something with the user-agent string (could reveal identity if it has been personalized) and make sure no identifying information in the `VERSION` message. Done: took the [suggestion below](https://github.com/bitcoin/bitcoin/pull/27509#issuecomment-1517896418).\r\n* [x] Improve the condition when we consider the transaction seen by the network: right now a single INV from somebody suffices (this is still an improvement over `master` which is ok right after pushing the tx to a peer). We could wait for more than one INV, from peers that we have selected (outbound) and that are specifically not the ones we broadcasted to (via short-lived connection). Edit: One `INV` should be enough because after that we broadcast the transaction to everybody we are connected to (like if it is not ours).\r\n* [ ] Idea: start with one connection per transaction (not 5 as it is now), optimistically assuming it will be sufficient. (numbers are examples) After 1 minute, if still not received from the network, try 2 connections, after a few minutes try more. If still unsuccessful after 10 minutes, then fall back to the old mechanism.\r\n\r\nThis is supposed to address:\r\nhttps://github.com/bitcoin/bitcoin/issues/3828\r\nhttps://github.com/bitcoin/bitcoin/issues/14692\r\nhttps://github.com/bitcoin/bitcoin/issues/19042\r\nhttps://github.com/bitcoin/bitcoin/issues/24557\r\nhttps://github.com/bitcoin/bitcoin/issues/25450\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2023-04-21T13:39:19Z",
      "updated_at": "2025-11-21T12:40:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27509",
      "labels": [
        "Brainstorming",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4270,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2184766556,
      "number": 31315,
      "title": "build: Enable -Wbidi-chars=any",
      "body": "I don't see a use-case for UTF-8 bidirectional control characters in this codebase. So disable them for now.\r\n\r\nRef: https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wbidi-chars_003d",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-18T10:07:27Z",
      "updated_at": "2025-11-21T12:14:00Z",
      "merged_at": "2024-11-20T10:55:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31315",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 226,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2179780054,
      "number": 31288,
      "title": "Add destroy to BlockTemplate schema",
      "body": "This ensures that if a client no longer needs a block template, the node can clear its memory as soon as possible.\r\n\r\nA block template may hold on to transactions that are no longer in the mempool, so this can be significant.\r\n\r\nThis has a trivial silent merge conflict with #31283 because it also used the number `@9` (gaps are not allowed). I'll rebase whichever is merged last.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-11-14T13:52:28Z",
      "updated_at": "2025-11-21T12:14:00Z",
      "merged_at": "2024-11-20T15:45:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31288",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 416,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2190069425,
      "number": 31333,
      "title": "fuzz: Implement G_TEST_GET_FULL_NAME",
      "body": "Catching up to bench & unit tests. Makes for more orderly paths for fuzz tests using `BasicTestingSetup`.\r\n\r\n### Before\r\n```\r\n/tmp/test_common bitcoin/0748ae43ef8fa80703bc/regtest/blocks/xor.dat\r\n```\r\n### After\r\n```\r\n/tmp/test_common bitcoin/tx_pool_standard/f18b3744625e0600eb0c/regtest/blocks/xor.dat\r\n```",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-11-20T14:17:31Z",
      "updated_at": "2025-11-21T12:13:59Z",
      "merged_at": "2024-11-21T13:57:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31333",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 344,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2796097514,
      "number": 33292,
      "title": "added qa assets yml",
      "body": "Accidental PR ",
      "state": "closed",
      "user": "m3dwards",
      "created_at": "2025-09-03T14:06:10Z",
      "updated_at": "2025-11-21T10:58:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33292",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 34,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2991337556,
      "number": 33824,
      "title": "ci: Enable experimental kernel stuff in most CI tasks via `dev-mode`",
      "body": "Most of the CI tasks have a long list of stuff that they enable. This makes it hard to see what each CI task is actually running.\r\n\r\nAlso, most of the CI tasks should probably mimic the `dev-mode` CMake preset and run on as much stuff as possible. Usually, changing the `dev-mode` comes with changing those CI tasks as well in the same commit, which is verbose.\r\n\r\nFix both issues, by basing most CI tasks on the `dev-mode`. In the future, this makes it easier to change the `dev-mode` in a single place. If CI tasks explicitly disable something, it will be listed explicitly in them.\r\n\r\nAs a side-effect this will enable the kernel stuff for some CI task that did not have it enabled, which seems desirable.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-08T11:15:49Z",
      "updated_at": "2025-11-21T10:00:45Z",
      "merged_at": "2025-11-20T14:19:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33824",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 777,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999038036,
      "number": 33851,
      "title": "depends: update xcb-util packages to latest versions",
      "body": "Update libxcb and related package versions:\r\n\r\nlibXau 1.0.9 -> 1.0.12\r\nlibxcb 1.14 -> 1.17\r\nlibxcb_util 0.4.0 -> 0.4.1\r\nlibxcb_util_cursor 0.1.5 -> 0.1.6\r\nlibxcb_util_image 0.4.0 -> 0.4.1\r\nlibxcb_util_keysyms 0.4.0 -> 0.4.1\r\nlibxcb_util_render 0.3.9 -> 0.3.10\r\nlibxcb_util_wm 0.4.1 -> 0.4.2\r\nxcb_proto 1.15.2 -> 1.17.0\r\n\r\nThese recently became static in #33537.\r\n\r\nAlso update expat 2.4.8 -> 2.7.3.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-11T13:17:53Z",
      "updated_at": "2025-11-21T07:34:12Z",
      "merged_at": "2025-11-20T15:04:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33851",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 451,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3029191104,
      "number": 33912,
      "title": "clang-format: Set PackConstructorInitializers: CurrentLine",
      "body": "Now that the minimum supported clang version is larger than 14, the `PackConstructorInitializers` setting can be set to `CurrentLine` in the clang-format file. (This option was added in clang 14. Ref: https://releases.llvm.org/17.0.1/tools/clang/docs/ClangFormatStyleOptions.html#packconstructorinitializers)\r\n\r\nThe `CurrentLine` option will either put all constructor initializers on the current line if they fit. Otherwise, it will put each one on its own line.\r\n\r\nThe `CurrentLine` option is desirable over the current `BinPack` option, because:\r\n\r\n* It is what the majority of the codebase is currently using.\r\n* It makes it easier to skim the lines to ensure all fields are properly initialized, without having to parse bin-packed constructor initializers, possibly with nested initializer lists, function calls, or ternary operators.\r\n* It makes diffs smaller when an initializer is added or removed, because only a single line is touched. Otherwise, the whole bin-packed block could re-flow, making the diff harder to parse.\r\n\r\nNote: The previous `BinPack` option allows any formatting, due to the current `ColumnLimit: 0`. I presume developers manually formatted most constructor initializers to be on separate lines? With the new `CurrentLine` setting, one has to only put the first initializer on a separate line, and clang-format will take care of the rest.\r\n\r\nFor example:\r\n\r\n```sh\r\necho 'A::A(O o)\r\n: m_first{o.a, o.b},\r\n  m_second{fun(o)}, m_third{o.c?o.d:o.e} {}' | clang-format --style=file:./src/.clang-format\r\n```\r\n\r\nWill put each on a separate line. Previously, it was left as-is.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-20T10:10:22Z",
      "updated_at": "2025-11-20T22:05:09Z",
      "merged_at": "2025-11-20T21:48:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33912",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1658,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3018186045,
      "number": 33888,
      "title": "ci: Re-enable LINT_CI_SANITY_CHECK_COMMIT_SIG",
      "body": "The sanity check to check the last few merge commit signatures on the main branch was accidentally and silently disabled while moving from the `cirrus-ci.com` platform to the GHA platform.\r\n\r\nSo fix that by re-enabling it.\r\n\r\nAlso, contains a few other lint cleanup commits.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-17T16:41:40Z",
      "updated_at": "2025-11-20T19:46:32Z",
      "merged_at": "2025-11-20T17:30:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33888",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 320,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3017631304,
      "number": 33887,
      "title": "doc: Improve CI docs on env and qemu-user-static",
      "body": "Should at least partially fix #31199",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-11-17T14:08:38Z",
      "updated_at": "2025-11-20T18:48:38Z",
      "merged_at": "2025-11-20T17:22:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33887",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 85,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018379193,
      "number": 33890,
      "title": "mining: add requestedOutputs field, e.g. for merged mining",
      "body": "This adds a `requestedOutputs` field to `BlockCreateOptions` which lets the Mining IPC client request outputs to be added before the consensus mandatory commitments.\r\n\r\nThe main use case is being able to add `OP_RETURN` outputs for merged mining without patching `BlockAssembler::CreateNewBlock()`.\r\n\r\nIt could potentially also be used to make payouts directly from the coinbase, but this is unsafe for any amount above the subsidy (this PR adds checks for that). In general a pool should add payout outputs _after_ obtaining the block template, even a solo pool.\r\n\r\nAlthough it's possible to modify pool software to add merge mining outputs on top of the returned block template (e.g. by intercepting and modifying the Stratum v2 `NewTemplate` message), it may in practice be easier to do this when requesting a template.\r\n\r\nSuggested in https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3539952304.\r\n\r\nBuilds on:\r\n- #33819",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-17T17:41:02Z",
      "updated_at": "2025-11-20T18:43:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33890",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 992,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3022934410,
      "number": 33905,
      "title": "ci: Consistenly only cache on the default branch",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/33685\r\n\r\nThe general idea for caches is to only save them on pushes to the default branch, because the cache is limited in size and time that the only benefit of the cache can be to speed up pull requests against the default branch.\r\n\r\nBackport pull requests to older branches don't benefit from caches, because usually they will be running into a cache miss anyway. Also, they would cause the cache size to overflow and lead to cache misses down the line.\r\n\r\nSo fix it by consistently applying cache saves only on the default branch.\r\n\r\nFor reference, the same is already done for the composite action in this repo: https://github.com/bitcoin/bitcoin/blob/2444488f6ad32dcbbed51a73cd4f59ff3a239e32/.github/actions/save-caches/action.yml#L15",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-18T18:23:26Z",
      "updated_at": "2025-11-20T18:03:29Z",
      "merged_at": "2025-11-20T17:17:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33905",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 837,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3007231234,
      "number": 33870,
      "title": "refactor: remove incorrect lifetimebounds",
      "body": "The [developer-notes say](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#lifetimebound):\r\n\r\n> You can use the attribute by adding a `LIFETIMEBOUND`\r\nannotation defined in `src/attributes.h`; please grep the codebase for examples.\r\n\r\nWhile grepping, I found an incorrect usage of the `LIFETIMEBOUND` annotation on `BlockManager::CheckBlockDataAvailability`. This could be misleading about usage for other greppers. As I was looking, I also noticed a missing `LIFETIMEBOUND` on `BlockManager::GetFirstBlock`. While looking more closely at that method, it should return a reference instead of a pointer. The only reason to return a pointer is if it can be null.",
      "state": "closed",
      "user": "andrewtoth",
      "created_at": "2025-11-13T14:47:52Z",
      "updated_at": "2025-11-20T17:27:50Z",
      "merged_at": "2025-11-20T17:27:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33870",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 723,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2294585515,
      "number": 31724,
      "title": "cmake: Fix `-pthread` flags presentation in summary",
      "body": "This PR removes the raw CMake generator expressions from the summary output.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31482.\r\n\r\nHere are a few examples of the summary:\r\n- on FreeBSD: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12930644678/job/36062648395\r\n- on OpenBSD: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12930647880/job/36062659528\r\n- on NetBSD: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12930651817/job/36062672223\r\n- on OmniOS: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/12930654711/job/36062682690",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-23T14:08:33Z",
      "updated_at": "2025-11-20T17:25:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31724",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 643,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3014024448,
      "number": 33880,
      "title": "test: Fix race condition in IPC interface block progation test",
      "body": "CI failed on this condition here: https://github.com/bitcoin/bitcoin/actions/runs/19395398994/job/55494696022?pr=33878#step:9:3983\r\n\r\nThe check was added not too long ago in https://github.com/bitcoin/bitcoin/pull/33745 and the fix here switches the check to the node which actually produces the block. There are also some comments added to make the checks easier so understand.\r\n\r\nCloses #33884",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-11-15T22:08:17Z",
      "updated_at": "2025-11-20T17:19:32Z",
      "merged_at": "2025-11-20T17:19:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33880",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 458,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2618635549,
      "number": 32813,
      "title": "clang-format: make formatting deterministic for different formatter versions",
      "body": "Updates `.clang-format` file to reflect [latest supported Clang-Format standards](https://releases.llvm.org/16.0.0/tools/clang/docs/ClangFormatStyleOptions.html) while preserving most of the existing formatting behavior.\r\n\r\nNote that [`AfterStruct` brace placement](https://github.com/bitcoin/bitcoin/pull/32414#discussion_r2072678126) was originally aligned here with `AfterClass`, but was reverted by reviewer demand.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-06-25T15:40:19Z",
      "updated_at": "2025-11-20T15:57:45Z",
      "merged_at": "2025-10-24T20:25:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32813",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 496,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3003970228,
      "number": 33865,
      "title": "cmake: Specify Windows plugin path in `test_bitcoin-qt` property",
      "body": "This PR simplifies testing on Windows by removing the need to set the `QT_PLUGIN_PATH` environment variable for different build configurations. For example, the paths might otherwise be:\r\n- `C:/Users/hebasto/dev/bitcoin/build/vcpkg_installed/x64-windows/Qt6/plugins/` for \"Release\"\r\n- `C:/Users/hebasto/dev/bitcoin/build/vcpkg_installed/x64-windows/debug/Qt6/plugins/` for \"Debug\"",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-12T19:10:37Z",
      "updated_at": "2025-11-20T12:47:10Z",
      "merged_at": "2025-11-15T16:20:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33865",
      "labels": [
        "Windows",
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 445,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2042001300,
      "number": 30737,
      "title": "test: Fix RANDOM_CTX_SEED use with parallel tests",
      "body": "To fix the issue with test directories clashing when running in parallel with the env var `RANDOM_CTX_SEED` set, we now mix in the test name.\r\n\r\nIssue was introduced by 97e16f57042cab07e5e73f6bed19feec2006e4f7, and comment for `g_insecure_rand_ctx_temp_path` became invalid with that commit. Make the determinism clear through removing the no longer useful `g_insecure_rand_ctx_temp_path`.\r\n\r\nFixes #30696.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2024-08-28T13:43:58Z",
      "updated_at": "2025-11-20T12:13:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30737",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 456,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2052676447,
      "number": 30811,
      "title": "build: Unify `-logsourcelocations` format",
      "body": "Closes https://github.com/bitcoin/bitcoin/issues/30799:\r\n\r\n```\r\n$ ./build/src/bitcoind -logsourcelocations -asmap=/tmp/no_file 2>&1 | head -1\r\n2024-11-04T11:40:36Z [init/common.cpp:149] [LogPackageVersion] Bitcoin Core version v28.99.0-788c1324f3d8 (release build)\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-09-04T07:02:06Z",
      "updated_at": "2025-11-20T12:13:38Z",
      "merged_at": "2024-11-06T09:58:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30811",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 311,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2134676355,
      "number": 31122,
      "title": "cluster mempool: Implement changeset interface for mempool",
      "body": "part of cluster mempool: #30289 \r\n\r\nIt became clear while working on cluster mempool that it would be helpful for transaction validation if we could consider a full set of proposed changes to the mempool -- consisting of a set of transactions to add, and a set of transactions (ie conflicts) to simultaneously remove -- and perform calculations on what the mempool would look like if the proposed changes were to be applied.  Two specific examples of where we'd like to do this:\r\n\r\n- Determining if ancestor/descendant/TRUC limits would be violated (in the future, cluster limits) if either a single transaction or a package of transactions were to be accepted\r\n- Determining if an RBF would make the mempool \"better\", however that idea is defined, both in the single transaction and package of transaction cases\r\n\r\nIn preparation for cluster mempool, I have pulled this reworking of the mempool interface out of #28676 so it can be reviewed on its own.  I have not re-implemented ancestor/descendant limits to be run through the changeset, since with cluster mempool those limits will be going away, so this seems like wasted effort.  However, I have rebased #28676 on top of this branch so reviewers can see what the new mempool interface could look like in the cluster mempool setting.\r\n\r\nThere are some minor behavior changes here, which I believe are inconsequential:\r\n- In the package validation setting, transactions would be added to the mempool before the `ConsensusScriptChecks()` are run. In theory, `ConsensusScriptChecks()` should always pass if the `PolicyScriptChecks()` have passed and it's just a belt-and-suspenders for us, but if somehow they were to diverge then there could be some small behavior change from adding transactions and then removing them, versus never adding them at all.\r\n- The error reporting on `CheckConflictTopology()` has slightly changed due to no longer distinguishing between direct conflicts and indirect conflicts. I believe this should be entirely inconsequential because there shouldn't be a logical difference between those two ideas from the perspective of this function, but I did have to update some error strings in some tests.\r\n- Because, in a package setting, RBFs now happen as part of the entire package being accepted, the logging has changed slightly because we do not know which transaction specifically evicted a given removed transaction. \r\n  -  Specifically, the \"package hash\" is now used to reference the set of transactions that are being accepted, rather than any single txid. The log message relating to package RBF that happen in the `TXPACKAGES` category has been updated as well to include the package hash, so that it's possible to see which specific set of transactions are being referenced by that package hash.\r\n  - Relatedly, the tracepoint logging in the package rbf case has been updated as well to reference the package hash, rather than a transaction hash.",
      "state": "closed",
      "user": "sdaftuar",
      "created_at": "2024-10-20T17:46:28Z",
      "updated_at": "2025-11-20T12:13:37Z",
      "merged_at": "2024-11-20T12:49:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31122",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2995,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2089406743,
      "number": 30959,
      "title": "[28.x] backports and finalize",
      "body": "* #30952\r\n* #30962 \r\n* Finalize 28.0 (or rc3 if additional backports are needed)",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-09-24T15:41:11Z",
      "updated_at": "2025-11-20T12:13:37Z",
      "merged_at": "2024-10-01T17:30:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30959",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 110,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2174656129,
      "number": 31276,
      "title": "guix: scope pkg-config to Linux only",
      "body": "After #31181, `pkg-config` is no-longer needed for macOS or Windows Guix builds. It's still needed for Linux, as it's used by a Qt subdependency (fontconfig to find freetype). However we should also no-longer need it for Qt itself, when building using depends.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-12T11:21:58Z",
      "updated_at": "2025-11-20T12:13:36Z",
      "merged_at": "2024-11-20T10:53:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31276",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 297,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2185197126,
      "number": 31317,
      "title": "test: Revert to random path element",
      "body": "The randomness in the path element is required to allow a single fuzz test to run in parallel. Previous releases used a uint256 random value, but 10 random bytes should be sufficient as well, while avoiding a `MAX_PATH` violation on Windows.\r\n\r\nThe issue was introduced by myself, by suggesting to use the current time in https://github.com/bitcoin/bitcoin/pull/31000#discussion_r1835351305.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-18T13:27:36Z",
      "updated_at": "2025-11-20T12:13:35Z",
      "merged_at": "2024-11-20T10:11:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31317",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 427,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2189767072,
      "number": 31331,
      "title": "doc: add copyright header to p2p_headers_presync",
      "body": "Add the missing copyright header.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-20T11:49:24Z",
      "updated_at": "2025-11-20T12:13:33Z",
      "merged_at": "2024-11-20T12:02:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31331",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 82,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2188585112,
      "number": 31327,
      "title": "doc: Correct PR Review Club frequency from weekly to monthly",
      "body": "The PR Review Club is mentioned as weekly in the CONTRIBUTING.md file, but it is held monthly as per the official [Bitcoin Core PR Review Club website](https://bitcoincore.reviews/). This PR updates the documentation to just remove the frequency.",
      "state": "closed",
      "user": "GabrieleBocchi",
      "created_at": "2024-11-19T22:46:31Z",
      "updated_at": "2025-11-20T12:13:33Z",
      "merged_at": "2024-11-20T10:58:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31327",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 307,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2668911492,
      "number": 32983,
      "title": "rpc: refactor: use string_view in Arg/MaybeArg",
      "body": "The `RPCHelpMan::{Arg,MaybeArg}` helpers avoid copying (potentially) large strings by returning them as `const std::string*` (`MaybeArg`) or `const std::string&` (`Arg`). For `MaybeArg`, this has the not-so-nice effect that users need to deal with raw pointers, potentially also requiring new functions (e.g. [`EnsureUniqueWalletName` ](https://github.com/bitcoin/bitcoin/pull/32845/commits/d127b25199118756122232d9aafff19f1922869b#diff-d8bfcfbdd5fa7d5c52d38c1fe5eeac9ce5c5a794cdfaf683585140fa70a32374R32)) with raw pointers being implemented.\r\n\r\nThis PR aims to improve on this by returning a trivially copyable `std::string_view` (`Arg`) or `std::optional<std::string_view>` (`MaybeArg`), modernizing the interface without introducing any additional copying overhead. In doing so, it also generalizes whether we return by value or by pointer/reference using `std::is_trivially_copyable_v` instead of defining the types manually.\r\n\r\nIn cases where functions currently take a `const std::string&` and it would be too much work / touching consensus logic to update them (`signmessage.cpp`), a `std::string` copy is made (which was already happening anyway).\r\n\r\nThe last 2 commits increase usage of the `{Arg,MaybeArg}<std::string_view>` helpers, and could be dropped/pruned if anything turns out to be controversial - I just think it's a nice little cleanup.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-07-15T23:23:25Z",
      "updated_at": "2025-11-20T11:37:41Z",
      "merged_at": "2025-10-24T17:34:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32983",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1404,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3004542552,
      "number": 33867,
      "title": "kernel: handle null or empty directories in implementation",
      "body": "An empty path may be represented with a `nullptr`. For example, `std::string_view{}.data()` may return nullptr.\r\n\r\nRemoves the `BITCOINKERNEL_ARG_NONNULL` attribute for `btck_chainstate_manager_options_create` 's `data_directory` parameter, and instead handles such null arguments in the implementation. [Because an empty path is meaningless](https://github.com/bitcoin/bitcoin/pull/33867#discussion_r2523930442), `btck_chainstate_manager_options_create` now treats both null and empty directories as invalid, tightening the interface.\r\n\r\nAlso documents how `BITCOINKERNEL_ARG_NONNULL` should be used.\r\n\r\nFollow-up to https://github.com/bitcoin/bitcoin/pull/33853#pullrequestreview-3454620265\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-11-12T22:43:31Z",
      "updated_at": "2025-11-20T10:44:15Z",
      "merged_at": "2025-11-20T00:22:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33867",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 759,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2336649960,
      "number": 31868,
      "title": "[IBD] specialize block serialization",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n---\r\n\r\nThis PR is drafted until I remeasure everything after the recent merges and I need to find a way to simplify the 1 byte writes more nicely, I don't like all the specializations.\r\n\r\n---\r\n\r\n### Summary\r\n\r\nThis PR contain a few different optimization I found by IBD profiling, and via the newly added block seralization benchmarks. It also takes advantage of the recently merged [`std::span` changes](https://github.com/bitcoin/bitcoin/pull/31519) enabling propagating static extents.\r\n\r\nThe commits merge similar (de)serialization methods, and separates them internally with  `if constexpr` - similarly to how it has been [done here before](https://github.com/bitcoin/bitcoin/pull/28203). This enabled further `SizeComputer` optimizations as well.\r\n\r\n### Context\r\nOther than these, since single byte writes are used very often (used for every `(u)int8_t` or `std::byte` or `bool` and for every `VarInt`'s first byte which is also needed for every `(pre)Vector`), it makes sense to avoid the generalized serialization infrastructure that isn't needed:\r\n* `AutoFile` write doesn't need to allocate 4k buffer for a single byte now;\r\n* `VectorWriter` and `DataStream` avoids memcpy/insert calls;\r\n* `CSHA256::Write` can avoid `memcpy`.\r\n\r\n`DeserializeBlock` is dominated by the hash calculations so the optimizations barely affect it.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C compiler ............................ AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          195,610.62 |            5,112.20 |    0.3% |     11.00 | `SerializeBlock`\r\n|           12,061.83 |           82,906.19 |    0.1% |     11.01 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          174,569.19 |            5,728.39 |    0.6% |     10.89 | `SerializeBlock`\r\n|           10,241.16 |           97,645.21 |    0.0% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~12.% faster\r\n> `SizeComputerBlock` - ~17.7% faster\r\n\r\n-----\r\n\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          867,857.55 |            1,152.26 |    0.0% |    8,015,883.90 |    3,116,099.08 |  2.572 |   1,517,035.87 |    0.5% |     10.81 | `SerializeBlock`\r\n|           30,928.27 |           32,332.88 |    0.0% |      221,683.03 |      111,055.84 |  1.996 |      53,037.03 |    0.8% |     11.03 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          615,000.56 |            1,626.01 |    0.0% |    8,015,883.64 |    2,208,340.88 |  3.630 |   1,517,035.62 |    0.5% |     10.56 | `SerializeBlock`\r\n|           25,676.76 |           38,945.72 |    0.0% |      159,390.03 |       92,202.10 |  1.729 |      42,131.03 |    0.9% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~41.1% faster\r\n> `SizeComputerBlock` - ~20.4% faster\r\n\r\n----\r\n\r\nWhile this wasn't the main motivation for the change, IBD on Ubuntu/GCC on SSD with i9 indicates a 2% speedup as well:\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```bash\r\nCOMMITS=\"05314bde0b06b820225f10c6529b5afae128ff81 1cd94ec2511874ec68b92db34ad7ec7d9534fed1\"; \\\r\nSTOP_HEIGHT=880000; DBCACHE=10000; \\\r\nC_COMPILER=gcc; CXX_COMPILER=g++; \\\r\nhyperfine \\\r\n--export-json \"/mnt/my_storage/ibd-${COMMITS// /-}-${STOP_HEIGHT}-${DBCACHE}-${C_COMPILER}.json\" \\\r\n--runs 3 \\\r\n--parameter-list COMMIT ${COMMITS// /,} \\\r\n--prepare \"killall bitcoind || true; rm -rf /mnt/my_storage/BitcoinData/*; git checkout {COMMIT}; git clean -fxd; git reset --hard; cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF -DCMAKE_C_COMPILER=$C_COMPILER -DCMAKE_CXX_COMPILER=$CXX_COMPILER && cmake --build build -j$(nproc) --target bitcoind && ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=1 -printtoconsole=0 || true\" \\\r\n--cleanup \"cp /mnt/my_storage/BitcoinData/debug.log /mnt/my_storage/logs/debug-{COMMIT}-$(date +%s).log || true\" \\\r\n\"COMPILER=$C_COMPILER COMMIT={COMMIT} ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -prune=550 -printtoconsole=0\"\r\nBenchmark 1: COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33647.918 s ± 508.655 s    [User: 71503.409 s, System: 4404.899 s]\r\n  Range (min … max):   33283.439 s … 34229.026 s    3 runs\r\n \r\nBenchmark 2: COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33062.491 s ± 183.335 s    [User: 71246.532 s, System: 4318.490 s]\r\n  Range (min … max):   32888.211 s … 33253.706 s    3 runs\r\n \r\nSummary\r\n  COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0 ran\r\n    1.02 ± 0.02 times faster than COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-02-14T16:48:23Z",
      "updated_at": "2025-11-20T10:13:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31868",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 6242,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2886589817,
      "number": 33537,
      "title": "guix: build `bitcoin-qt` with static libxcb & utils",
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/33434.\r\nTested on:\r\n* Fedora 42: https://github.com/bitcoin/bitcoin/pull/33537#pullrequestreview-3455373185.\r\n* Ubuntu 24.04: https://github.com/bitcoin/bitcoin/pull/33537#issuecomment-3533276038.\r\n* Debian 13.x: https://github.com/bitcoin/bitcoin/pull/33537#issuecomment-3540923567.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-04T00:39:00Z",
      "updated_at": "2025-11-20T09:45:52Z",
      "merged_at": "2025-11-17T10:32:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33537",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3020429122,
      "number": 33896,
      "title": "clang-format: Set InsertNewlineAtEOF: true",
      "body": "Now that the minimum supported clang version is 17, the `InsertNewlineAtEOF` setting can be set to `true` in the clang-format file. (https://releases.llvm.org/16.0.0/tools/clang/docs/ClangFormatStyleOptions.html#insertnewlineateof)\r\n\r\nThis is in line with the already existing newline linter. Can be tested via:\r\n\r\n```\r\ntruncate --size=-1 src/init.cpp\r\ngit diff\r\n\r\n# Should fail:\r\ncargo run --manifest-path ./test/lint/test_runner/Cargo.toml -- --lint=trailing_newline\r\n\r\n# Restore newline:\r\ngit diff -U0 | ./contrib/devtools/clang-format-diff.py -p1 -i -v\r\n```",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-18T07:49:21Z",
      "updated_at": "2025-11-20T08:18:46Z",
      "merged_at": "2025-11-20T00:23:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33896",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 604,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2910840211,
      "number": 33614,
      "title": "rpc, test: fix \"internal\" label check in importdescriptors and extend test",
      "body": "Fixes a logic issue in `ProcessDescriptorImport()` where descriptors with `\"internal\": false` and a label were incorrectly rejected.\r\nThe check now uses `internal == true` so labels are only disallowed when `internal` is `true`.\r\n\r\nTests updated to cover both cases",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-10-13T16:45:23Z",
      "updated_at": "2025-11-19T23:00:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33614",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 340,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3021885045,
      "number": 33900,
      "title": "net: Decouple `CConnman::GetAddresses` from `CNode`",
      "body": "Decouple `CConnman::GetAddresses` from `CNode` which was used only for getting network_key",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-11-18T13:40:18Z",
      "updated_at": "2025-11-19T22:43:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33900",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2534144808,
      "number": 32577,
      "title": "subprocess: Let shell parse command on non-Windows systems",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32574.\r\n\r\nThe `subprocess::Popen` constructor has two overloads: https://github.com/bitcoin/bitcoin/blob/7763e86afa045910a14ac9b2cd644927a447370b/src/util/subprocess.h#L938-L941\r\n\r\nDuring the migration from Boost.Process in https://github.com/bitcoin/bitcoin/pull/28981, the second was chosen for two reasons: (1) it minimized changes at the call sites, and (2) it [addressed](https://github.com/bitcoin/bitcoin/pull/28981#issuecomment-1837238921) quoting issues on Windows. This approach internally uses the `subprocess::util::split()` function, which currently fails to handle quoted tokens, such as in subshell invocations like `sh -c 'ls; echo'`.\r\n\r\nThis issue was not caught by our tests as they are broken. The last commit fixes the `system_tests/run_command` test. This commit can be applied on top of the master branch to reproduce the existing failure in `subprocess`.\r\n\r\nThe second commit is intended to be upstreamed. However, I'm seeking code review feedback first (please note that the `src/util/subprocess.h` code is C++11 compatible).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-05-21T11:45:24Z",
      "updated_at": "2025-11-19T14:32:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32577",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1156,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1892327682,
      "number": 30186,
      "title": "fuzz: increase `txorphan` harness stability",
      "body": "This moves `nNextSweep` from being a static variable in `LimitOrphans` to being a member of the `TxOrphanage` class. This improves the stability of the `txorphan` fuzz harness, as each orphanage (created every iteration) now has its own value for `nNextSweep`.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-05-28T17:11:40Z",
      "updated_at": "2025-11-19T12:13:00Z",
      "merged_at": "2024-06-03T09:00:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30186",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 304,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1704396472,
      "number": 29357,
      "title": "test: Drop `x` modifier in `fsbridge::fopen` call for MinGW builds",
      "body": "The MinGW-w64 toolchain links executables to the old msvcrt C Runtime Library that does not support the `x` modifier for the [`_wfopen()`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/fopen-wfopen?view=msvc-170) function.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/29014.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-01-31T16:09:21Z",
      "updated_at": "2025-11-19T12:13:00Z",
      "merged_at": "2024-02-26T16:15:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29357",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 367,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1907765698,
      "number": 30239,
      "title": "Ephemeral Dust",
      "body": "A replacement for https://github.com/bitcoin/bitcoin/pull/29001\r\n\r\nNow that we have 1P1C relay, TRUC transactions and sibling eviction, it makes sense to retarget this feature more narrowly by not introducing a new output type, and simple focusing on the feature of allowing temporary dust in the mempool.\r\n\r\nUsers of this can immediately use dust outputs as:\r\n1. Single keyed anchor (can be shared by multiple parties)\r\n2. Single unkeyed anchor, ala P2A\r\n\r\nWhich is useful when the parent transaction cannot have fees for technical or accounting reasons.\r\n\r\nWhat I'm calling \"keyed\" anchors would be used anytime you don't want a third party to be able to run off with the utxo. As a motivating example, in Ark there is the concept of a \"forfeit transaction\" which spends a \"connector output\". The connector output would ideally be 0-value, but you would not want that utxo spend by anyone, because this would cause financial loss for the coordinator of the service: https://arkdev.info/docs/learn/concepts#forfeit-transaction\r\n\r\nNote that this specific use-case likely doesn't work as it involves a tree of dust, but the connector idea in general demonstrates how it could be used.\r\n\r\nAnother related example is connector outputs in BitVM2: https://bitvm.org/bitvm2.html .\r\n\r\nNote that non-TRUC usage will be impractical unless the minrelay requirement on individual transactions are dropped in general, which should happen post-cluster mempool.\r\n\r\nLightning Network intends to use this feature post-29.0 if available: https://github.com/lightning/bolts/issues/1171#issuecomment-2373748582 \r\n\r\nIt's also useful for Ark, ln-symmetry, spacechains, Timeout Trees, and other constructs with large presigned trees or other large-N party smart contracts.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2024-06-06T17:31:44Z",
      "updated_at": "2025-11-19T12:12:59Z",
      "merged_at": "2024-11-13T01:06:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30239",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1765,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1905181366,
      "number": 30230,
      "title": "fuzz: add I2P harness",
      "body": "Addresses https://github.com/bitcoin/bitcoin/issues/28803. This updated harness sets mock time at the beginning of each iteration and deletes the private key file at the end of each iteration. Mock time is used to make the fuzz test more stable, as `GetTime` is called at points in `i2p`. Deleting the private key file ensures that each iteration is independent from the last. Now, a new key is generated in `i2p` every time, so the fuzzer can eventually make progress through the target code.\r\n\r\nRe-working this harness also led me and dergoegge to resolve a couple of issues in `FuzzedSock`, which allows for full coverage of the `i2p` code. Those changes can be seen in https://github.com/bitcoin/bitcoin/pull/30211.\r\n\r\nThe SAM protocol for interacting with I2P requires some specifc inputs so it's best to use a dictionary when running this harness.\r\n\r\n<details>\r\n<summary>I2P dict</summary>\r\n\r\n```\r\n\"HELLO VERSION\"\r\n\"HELLO REPLY RESULT=OK VERSION=\"\r\n\"HELLO REPLY RESULT=NOVERSION\"\r\n\"HELLO REPLY RESULT=I2P_ERROR\"\r\n\"SESSION CREATE\"\r\n\"SESSION STATUS RESULT=OK DESTINATION=\"\r\n\"SESSION STATUS RESULT=DUPLICATED_ID\"\r\n\"SESSION STATUS RESULT=DUPLICATED_DEST\"\r\n\"SESSION STATUS RESULT=INVALID_ID\"\r\n\"SESSION STATUS RESULT=INVALID_KEY\"\r\n\"SESSION STATUS RESULT=I2P_ERROR MESSAGE=\"\r\n\"SESSION ADD\"\r\n\"SESSION REMOVE\"\r\n\"STREAM CONNECT\"\r\n\"STREAM STATUS RESULT=OK\"\r\n\"STREAM STATUS RESULT=INVALID_ID\"\r\n\"STREAM STATUS RESULT=INVALID_KEY\"\r\n\"STREAM STATUS RESULT=CANT_REACH_PEER\"\r\n\"STREAM STATUS RESULT=I2P_ERROR MESSAGE=\"\r\n\"STREAM ACCEPT\"\r\n\"STREAM FORWARD\"\r\n\"DATAGRAM SEND\"\r\n\"RAW SEND\"\r\n\"DEST GENERATE\"\r\n\"DEST REPLY PUB= PRIV=\"\r\n\"DEST REPLY RESULT=I2P_ERROR\"\r\n\"NAMING LOOKUP\"\r\n\"NAMING REPLY RESULT=OK NAME= VALUE=\"\r\n\"DATAGRAM RECEIVED DESTINATION= SIZE=\"\r\n\"RAW RECEIVED SIZE=\"\r\n\"NAMING REPLY RESULT=INVALID_KEY NAME=\"\r\n\"NAMING REPLY RESULT=KEY_NOT_FOUND NAME=\"\r\n\"MIN\"\r\n\"MAX\"\r\n\"STYLE\"\r\n\"ID\"\r\n\"SILENT\"\r\n\"DESTINATION\"\r\n\"NAME\"\r\n\"SIGNATURE_TYPE\"\r\n\"CRYPTO_TYPE\"\r\n\"SIZE\"\r\n\"HOST\"\r\n\"PORT\"\r\n\"FROM_PORT\"\r\n\"TRANSIENT\"\r\n\"STREAM\"\r\n\"DATAGRAM\"\r\n\"RAW\"\r\n\"MASTER\"\r\n\"true\"\r\n\"false\"\r\n```\r\n\r\n</details>\r\n\r\nI'll add this dict to qa-assets later on.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-06-05T13:41:53Z",
      "updated_at": "2025-11-19T12:12:59Z",
      "merged_at": "2024-06-12T17:00:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30230",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2131,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2050304793,
      "number": 30794,
      "title": "interpreter: use int32_t instead of int type for risczero compile",
      "body": "When compile bitcoin by the toolchain(`riscv32-unknown-elf-g++`) from risc0 , the compiler argument is `-march=rv32i, -mabi=ilp32`, which will get the error which due to not serialize the value of type int .\r\n\r\n```\r\nblockbody-guest:   cargo:warning=In file included from depend/bitcoin/src/hash.h:14,\r\nblockbody-guest:   cargo:warning=                 from depend/bitcoin/src/script/interpreter.h:9,\r\nblockbody-guest:   cargo:warning=                 from depend/bitcoin/src/script/interpreter.cpp:6:\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/serialize.h: In instantiation of 'void Serialize(Stream&, const T&) [with Stream = HashWriter; T = int]':\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/hash.h:144:20:   required from 'HashWriter& HashWriter::operator<<(const T&) [with T = int]'\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/script/interpreter.cpp:1613:12:   required from 'uint256 SignatureHash(const CScript&, const T&, unsigned int, int, const CAmount&, SigVersion, const PrecomputedTransactionData*) [with T = CTransaction; CAmount = long long int]'\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/script/interpreter.cpp:1664:36:   required from 'bool GenericTransactionSignatureChecker<T>::CheckECDSASignature(const std::vector<unsigned char>&, const std::vector<unsigned char>&, const CScript&, SigVersion) const [with T = CTransaction]'\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/script/interpreter.cpp:1785:16:   required from here\r\nblockbody-guest:   cargo:warning=depend/bitcoin/src/serialize.h:776:7: error: request for member 'Serialize' in 'a', which is of non-class type 'const int'\r\nblockbody-guest:   cargo:warning=  776 |     a.Serialize(os);\r\n```\r\n\r\n--------------\r\n\r\n### Reason\r\n\r\n\"The toolchain from RISC Zero defines int and int32_t as different types, although they have the same width. This means that `src/compat/assumptions.h` compiles fine; however, the templated serialization code cannot accept values of type int. Fix the compilation on RISC Zero by serializing int32_t instead of int values.\r\n\r\nThis patch will explicitly use the `int32_t` type instead of `int` to avoid errors when compiling with the risc0 toolchain. Additionally, this patch will not change any behavior on platforms where compilation was previously successful.\r\n\r\nFixes #30747\r\n\r\n",
      "state": "closed",
      "user": "ludete",
      "created_at": "2024-09-03T02:40:56Z",
      "updated_at": "2025-11-19T12:12:58Z",
      "merged_at": "2024-09-20T17:43:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30794",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2183506468,
      "number": 31302,
      "title": "refactor: spanify DecodeBits, use constexpr std::array instead of vector",
      "body": "Should generally prefer using std::span over const std::vector&, and generally should use constexpr std::array instead of the const std::vector as used here. This allows the interface to be more flexible (thought the value is low here) and allows it to be more constexpr.\r\n\r\nBrief investigation was made into spanifing other interfaces in this file; however, the usage of the specialization std::vector<bool> made that incompatible with trivial spanification",
      "state": "closed",
      "user": "PastaPastaPasta",
      "created_at": "2024-11-17T06:43:23Z",
      "updated_at": "2025-11-19T12:12:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31302",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2069615815,
      "number": 30893,
      "title": "test: Introduce ensure_for helper",
      "body": "A repeating pattern in the functional tests is that the test sleeps for a while to ensure that a certain condition is still true after some amount of time has elapsed. Most recently a new case of this was added in #30807. This PR here introduces an `ensure` helper to streamline this functionality.\r\n\r\nSome approach considerations:\r\n- It is possible to construct this by reusing `wait_until` and wrapping it in `try` internally. However, the logger output of the failing wait would still be printed which seems irritating. So I opted for simplified but similar internals to `wait_until`.\r\n- This implementation starts for a failure in the condition right away which has the nice side-effect that it might give feedback on a failure earlier than is currently the case. However, in some cases, it may be expected that the condition may still be false at the beginning and then turns true until time has run out, something that would work when the test sleeps without checking in a loop. I decided against this design (and even against adding it as an option) because such a test design seems like it would be racy either way.\r\n- I have also been going back and forth on naming. To me `ensure` works well but I am also not a native speaker, happy consider a different name if others don't think it's clear enough.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2024-09-12T21:42:18Z",
      "updated_at": "2025-11-19T12:12:57Z",
      "merged_at": "2024-11-19T18:56:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30893",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1344,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2187528476,
      "number": 31322,
      "title": "Typo Update bitcoin-conf.md",
      "body": "This pull request corrects a minor but important typographical error in the documentation. In the section discussing the placement of comments in the `bitcoin.conf` configuration file, the word **\"preferable\"** was used incorrectly. The correct word in this context is **\"preferred\"**.\r\n\r\n- **Before:** \"Comments may appear in two ways: on their own on an otherwise empty line (_preferable_);\"\r\n- **After:** \"Comments may appear in two ways: on their own on an otherwise empty line (_preferred_);\"\r\n\r\nThis change ensures that the language is precise and clear. \"Preferred\" is the more appropriate word to describe something that is favored or recommended, which aligns with the intended meaning. The fix enhances readability and professionalism in the documentation.",
      "state": "closed",
      "user": "defitricks",
      "created_at": "2024-11-19T12:59:32Z",
      "updated_at": "2025-11-19T12:12:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31322",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 794,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 820849548,
      "number": 24058,
      "title": "BIP-322 basic support",
      "body": "This PR enables support for [BIP-322](https://github.com/bitcoin/bips/blob/master/bip-0322.mediawiki), the sign/verify message upgrade.\r\n\r\nFixes #10542.\r\n\r\nThis PR is greatly simplified and is supposed to have one or more follow-up PRs to complete functionality.\r\n\r\nIn this PR:\r\n* signing using single key (any type)\r\n* verifying any signed message (auto-detects BIP-322 vs legacy)\r\n\r\nMissing features/limitations:\r\n* proof of funds (i.e. additional inputs) support\r\n* multisig or other custom address type support (I need feedback on how to do this; I assume some psbt thing would be good?)\r\n* (RPC) format is restricted to SIMPLE mode now; it may eventually be LEGACY, SIMPLE, or FULL. (In some cases, it will use FULL format but this is not selectable yet.)\r\n* timelock support\r\n",
      "state": "closed",
      "user": "kallewoof",
      "created_at": "2022-01-13T12:30:29Z",
      "updated_at": "2025-11-18T23:40:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24058",
      "labels": [
        "GUI",
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 804,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3023663778,
      "number": 33907,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "andradepsa",
      "created_at": "2025-11-18T22:41:44Z",
      "updated_at": "2025-11-18T22:42:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33907",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2297177148,
      "number": 31734,
      "title": "miniscript: account for all `StringType` variants in `Miniscriptdescriptor::ToString()`",
      "body": "In `MiniscriptDescriptor::ToStringHelper()` only the `StringType::Private` variant of the `type` argument was handled. This PR implements serializing w/ all variants of `StringType` & add a functional test for the descriptor triggering the related issue.\r\n\r\nCloses #31694: previously when calling `listdescriptors` RPC on a wallet containing a taproot descriptor w/ a (miniscript) taptree, origins of internal key & taptree were serialized w/ differents hardened derivation markers: \r\n - origin of the internal key were serialized w/ `StringType::Normalized` type (using `h` as marker) \r\n - origins of taptree keys were serialized w/ `StringType::Private` type (using `'` as marker)\r\n \r\nNote: Origins in segwit (`wsh()`) miniscript descriptors were also serialized w/ `StringType::Private` type (`'` marker) and are now serialized w/ `StringType::Normalized` type (`h` marker).\r\n",
      "state": "closed",
      "user": "pythcoiner",
      "created_at": "2025-01-24T16:52:40Z",
      "updated_at": "2025-11-18T22:32:15Z",
      "merged_at": "2025-11-18T22:32:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31734",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 967,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2178023265,
      "number": 31285,
      "title": "guix: remove `util-linux`",
      "body": "`hexdump` was used for the tests, until CMake. This package is no-longer needed to complete a Guix build (or needed in the CI). `util-linux` has been in the manifest since Guix was first introduced (3e80ec3ea9691c7c89173de922a113e643fe976b).\r\n\r\nGuix build:\r\n```bash\r\nb681575760a0d19445a17d0d54f50a65d705923caee3a7cd7502e6611950dc11  guix-build-4d668549825c/output/aarch64-linux-gnu/SHA256SUMS.part\r\n7af1420fedd8b4d10df650e92840287106dd74c289b6ef6fd2fd039387824647  guix-build-4d668549825c/output/aarch64-linux-gnu/bitcoin-4d668549825c-aarch64-linux-gnu-debug.tar.gz\r\nbd6520732b5c7805002a3227fe2d16f56a77453d913f5204e5be869aaf4a9534  guix-build-4d668549825c/output/aarch64-linux-gnu/bitcoin-4d668549825c-aarch64-linux-gnu.tar.gz\r\n83230468eb9289d294f7bdbb9b410cb7473a2e4dd1463097559dc0752f53cbc0  guix-build-4d668549825c/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nb4d79380642763428b7ca79a66c5920797864b163759081be5369631b4c33c73  guix-build-4d668549825c/output/arm-linux-gnueabihf/bitcoin-4d668549825c-arm-linux-gnueabihf-debug.tar.gz\r\n65d0c3888ca98dc9c7a1d6c25c9d6bc66ca6435c1fb42178ef8794dfa3b40255  guix-build-4d668549825c/output/arm-linux-gnueabihf/bitcoin-4d668549825c-arm-linux-gnueabihf.tar.gz\r\n17d6297ddd9a94913987c596715e66cff0d91d726d06cca2eeb8f3c94056e8db  guix-build-4d668549825c/output/arm64-apple-darwin/SHA256SUMS.part\r\n02faa61796d88b3cff69feeddc50bc579195da3676e5daace2ffc2332f3cbc1a  guix-build-4d668549825c/output/arm64-apple-darwin/bitcoin-4d668549825c-arm64-apple-darwin-unsigned.tar.gz\r\n0e02ef1418f56f67c472dc785041c1988637e509e77337d2a6eeb69b0c4cd844  guix-build-4d668549825c/output/arm64-apple-darwin/bitcoin-4d668549825c-arm64-apple-darwin-unsigned.zip\r\nd4320588db28f4f98b5de4c2e725e02b2f5f1379e376e534f1e4509928d187d4  guix-build-4d668549825c/output/arm64-apple-darwin/bitcoin-4d668549825c-arm64-apple-darwin.tar.gz\r\n7aa217a438fb97f0438ed1d8478cbeb52fd974fac94cbe7cf6c780231e17d8d6  guix-build-4d668549825c/output/dist-archive/bitcoin-4d668549825c.tar.gz\r\n157f1b597eee99ee64722ec28a2770d6fea84bbd711f83ad22ab2bb6b44f15fc  guix-build-4d668549825c/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n60569cdafcf802648c44d2c55758fc5cd2c00d4c37c0f31d9da95e8472438c57  guix-build-4d668549825c/output/powerpc64-linux-gnu/bitcoin-4d668549825c-powerpc64-linux-gnu-debug.tar.gz\r\n5e1581caf3404ffcb1b061d518465f584faf543e3da69b1b116f8a70368455d8  guix-build-4d668549825c/output/powerpc64-linux-gnu/bitcoin-4d668549825c-powerpc64-linux-gnu.tar.gz\r\ndb62e80ca99b163d62fc4d473f87de56d97da52dd37ec5043aaaaf4cf96bde25  guix-build-4d668549825c/output/riscv64-linux-gnu/SHA256SUMS.part\r\n47905dd06466f5c197689f9e02d417f959904762321f6dc70e3bf2cc9a2fc04d  guix-build-4d668549825c/output/riscv64-linux-gnu/bitcoin-4d668549825c-riscv64-linux-gnu-debug.tar.gz\r\n558b9ff6aff7b1a49f7bbba81d57025192aca532e7ee6b90b61a36bba0bfd342  guix-build-4d668549825c/output/riscv64-linux-gnu/bitcoin-4d668549825c-riscv64-linux-gnu.tar.gz\r\na946b5d730fa12f6e388db31e2e4b5de2c48653f16613146fb848ce9cdee8b81  guix-build-4d668549825c/output/x86_64-apple-darwin/SHA256SUMS.part\r\n6d0bfd4443507fe46422b099a2e92e28024c800a37d43539382ac0d8cb00f45d  guix-build-4d668549825c/output/x86_64-apple-darwin/bitcoin-4d668549825c-x86_64-apple-darwin-unsigned.tar.gz\r\n06ef2f4df72377b9f2bb872d624fdcbf391470e4694b85295eb529d90e37ff62  guix-build-4d668549825c/output/x86_64-apple-darwin/bitcoin-4d668549825c-x86_64-apple-darwin-unsigned.zip\r\nbc9fe0032d6f5e9d9576ddb9ea5333bb1d0741731dfa4da4ef1b3daf7dd9241d  guix-build-4d668549825c/output/x86_64-apple-darwin/bitcoin-4d668549825c-x86_64-apple-darwin.tar.gz\r\n4668e50be850961409a4ade5bb7522cc2366e9ab31542247243fa8473d100cb1  guix-build-4d668549825c/output/x86_64-linux-gnu/SHA256SUMS.part\r\n63662bbd98f8d71346ab24b956cb27a1aa03a48825e7c965ced0338024cc97e8  guix-build-4d668549825c/output/x86_64-linux-gnu/bitcoin-4d668549825c-x86_64-linux-gnu-debug.tar.gz\r\n514a726a2bae3944de8e1dbb606bade4f129f01477d5c607fb5e489b22792462  guix-build-4d668549825c/output/x86_64-linux-gnu/bitcoin-4d668549825c-x86_64-linux-gnu.tar.gz\r\n365a33f3046c680a399d9dabeaca589dd7918642c79f0c33205a724084ff5c1c  guix-build-4d668549825c/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n306c6425c1cebaf9dae65853bc3035d478e7670c333616270d63c4ffd08ec724  guix-build-4d668549825c/output/x86_64-w64-mingw32/bitcoin-4d668549825c-win64-debug.zip\r\n817fff3665f49a9eda4e7929e95c645172f6f0432410f4a0319638ce80a50771  guix-build-4d668549825c/output/x86_64-w64-mingw32/bitcoin-4d668549825c-win64-setup-unsigned.exe\r\nf06e3a88a19b29dbad03e1667183eb295a2e6a6e6f69bcdd6f53c7ee4d777a7d  guix-build-4d668549825c/output/x86_64-w64-mingw32/bitcoin-4d668549825c-win64-unsigned.tar.gz\r\nec1c6fc83198e7e9e1871f1ac25ac49c519a2dab11bb09e1a7153161cb284b79  guix-build-4d668549825c/output/x86_64-w64-mingw32/bitcoin-4d668549825c-win64.zip\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-13T17:55:00Z",
      "updated_at": "2025-11-18T12:12:17Z",
      "merged_at": "2024-11-14T18:29:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31285",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4805,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2184613928,
      "number": 31311,
      "title": "Simplify constructor in fuzz test to help msvc compiler frontend parser.",
      "body": "Resolves #31303.\r\n",
      "state": "closed",
      "user": "sipsorcery",
      "created_at": "2024-11-18T09:00:43Z",
      "updated_at": "2025-11-18T12:12:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31311",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 91,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2180598951,
      "number": 31291,
      "title": "test: group executed tests within the same directory",
      "body": "Solving https://github.com/bitcoin/bitcoin/pull/31000#discussion_r1836348991.\r\n\r\nModifies the default datadir path for unit/bench/fuzz tests, grouping\r\nall tests within a single directory labeled by the current timestamp.\r\n\r\nReplicating the functional test framework behavior.\r\n\r\nDirectory structure update:\r\nBefore: ```tmp/test_common bitcoin/test_name/current_time```\r\nAfter: ```tmp/test_common bitcoin/current_time/test_name```",
      "state": "closed",
      "user": "furszy",
      "created_at": "2024-11-14T21:12:48Z",
      "updated_at": "2025-11-18T12:12:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31291",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 483,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2184625920,
      "number": 31312,
      "title": "test: run functional tests from ctest",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/18816\r\n\r\nThis PR enables functional tests to be included in the ctest suite when the ENABLE_FUNCTIONAL_TESTS flag is set to ON during the CMake configuration.\r\n\r\ni.e\r\n```\r\ncmake -B build -DENABLE_FUNCTIONAL_TESTS=ON\r\ncmake --build build\r\nctest --test-dir build\r\n```",
      "state": "closed",
      "user": "BrandonOdiwuor",
      "created_at": "2024-11-18T09:06:53Z",
      "updated_at": "2025-11-18T12:12:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31312",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 351,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2184761809,
      "number": 31314,
      "title": "nomerge: test malicious bidi char",
      "body": "",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-18T10:05:54Z",
      "updated_at": "2025-11-18T12:12:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31314",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 34,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3019214350,
      "number": 33894,
      "title": "net: Remove unused `local_socket_bytes` variable in `CConnman::GetAddresses()`",
      "body": "The local_socket_bytes variable was never used. Removed it to clean up dead code.",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-11-17T22:04:42Z",
      "updated_at": "2025-11-18T11:50:00Z",
      "merged_at": "2025-11-18T09:30:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33894",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 160,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2910617459,
      "number": 33611,
      "title": "[29.x] Backports",
      "body": "Backports:\r\n* #33508\r\n* #33581\r\n* #33612",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-13T15:24:10Z",
      "updated_at": "2025-11-18T11:37:14Z",
      "merged_at": "2025-11-18T11:35:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33611",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 57,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3007838396,
      "number": 33872,
      "title": "init: completely remove `-maxorphantx` option",
      "body": "This is a small follow-up for #32941 (commit 1384dbaf6d0bfcdb05f97e1e3cb3d5e498bee505), removing the `-maxorphantx` option completely, now that v30 has been released. If removing it for v31 is seen as controversial/premature (I personally don't think it is), the merge can be delayed for a future release.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-11-13T18:00:16Z",
      "updated_at": "2025-11-18T02:21:52Z",
      "merged_at": "2025-11-18T02:17:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33872",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 351,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2498522849,
      "number": 32419,
      "title": "psbt: clarify PSBT, PSBTInput, PSBTOutput unserialization flows",
      "body": "The unserialization flows of the PSBT types work based on few underlying assumptions of functions from `serialize.h` & `stream.h` that takes some to understand when read the first time.\r\n\r\nAdd few comments that highlight these assumptions hopefully making it easier to grasp. Also, mention key/value format types as per BIP 174.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-05-05T11:41:46Z",
      "updated_at": "2025-11-17T22:08:44Z",
      "merged_at": "2025-11-17T22:08:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32419",
      "labels": [
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 392,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3005993558,
      "number": 33869,
      "title": "refactor: Avoid -W*-whitespace in git archive",
      "body": "Otherwise, compilation with GCC-15+ will warn about it:\r\n\r\n```\r\nsrc/clientversion.cpp:33:79: error: trailing whitespace [-Werror=trailing-whitespace=]\r\n   33 | //! git will put \"#define GIT_COMMIT_ID ...\" on the next line inside archives.\r\n```\r\n\r\nFollow-up to https://github.com/bitcoin/bitcoin/pull/32482#issuecomment-3522280482\r\n\r\nCan be tested via `git archive --output=/tmp/a.tar HEAD`",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-13T08:41:11Z",
      "updated_at": "2025-11-17T20:28:39Z",
      "merged_at": "2025-11-17T11:36:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33869",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 435,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3017294655,
      "number": 33886,
      "title": "test: Remove tests violating hardened std::span",
      "body": "Also, add a test for creating a CScript from an empty byte vector.\r\n\r\nTo test: `rm -rf ./bld-cmake && cmake -B ./bld-cmake  -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++;-stdlib=libc++;-D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_DEBUG' -DBUILD_GUI=OFF -DBUILD_FUZZ_BINARY=OFF -DBUILD_BENCH=OFF -DBUILD_KERNEL_LIB=ON -DENABLE_WALLET=OFF -DENABLE_IPC=OFF && cmake --build ./bld-cmake --parallel $( nproc ) && valgrind --tool=none ./bld-cmake/bin/test_kernel --catch_system_error=no`\r\n\r\nBefore:\r\n\r\n```\r\n/cxx_build/include/c++/v1/span:451: libc++ Hardening assertion __count == 0 || std::to_address(__first) != nullptr failed: passed nullptr with non-zero length in span's constructor (iterator, len)\r\n```\r\n\r\nAfter: (Passes)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-17T12:23:21Z",
      "updated_at": "2025-11-17T14:07:14Z",
      "merged_at": "2025-11-17T14:00:11Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33886",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 783,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2976640841,
      "number": 33776,
      "title": "ci: Lint follow-ups",
      "body": "This contains a few follow-ups to https://github.com/bitcoin/bitcoin/pull/33744:\r\n\r\n* Rewrite the actions Bash snippet to Python. I've confirmed it still works in https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/19067932430 (scroll down).\r\n* Add a lint-build retry to avoid issues such as https://github.com/bitcoin/bitcoin/issues/33640 for the lint task as well.\r\n* Finally, run the `debug_pull_request_number_str` annotation on all checks, to ensure they are present even when GitHub deletes annotations on a re-run. For example, the initial attempt https://github.com/bitcoin/bitcoin/actions/runs/19041534107/attempts/1?pr=33772 has the annotations, and the lint re-run has them removed: https://github.com/bitcoin/bitcoin/actions/runs/19041534107?pr=33772",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-04T13:30:36Z",
      "updated_at": "2025-11-17T13:05:20Z",
      "merged_at": "2025-11-17T12:35:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33776",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 791,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2965956843,
      "number": 33752,
      "title": "rest: Query predecessor headers using negative count param",
      "body": "There is currently no mechanism by which to batch-query headers from tip, backwards towards genesis.\r\nThis PR extends the REST Blockheaders API to support batch-querying predecessor headers, by providing a negative count parameter.",
      "state": "open",
      "user": "A-Manning",
      "created_at": "2025-10-31T09:11:11Z",
      "updated_at": "2025-11-17T13:02:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33752",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 290,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2999072640,
      "number": 33853,
      "title": "kernel: Allow null arguments for serialized data",
      "body": "An empty span constructed from an empty vector may have a null data pointer depending on the implementation. Remove the BITCOINKERNEL_ARG_NONNULL requirement for these arguments and instead handle such null arguments in the implementation.\r\n\r\nAlso cherry-picked from #33845 to show that CI task passing now.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-11-11T13:28:53Z",
      "updated_at": "2025-11-17T12:25:38Z",
      "merged_at": "2025-11-12T14:16:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33853",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 356,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 714292148,
      "number": 22729,
      "title": "Make it possible to disable Tor binds and abort startup on bind failure",
      "body": "Make it possible to disable the Tor binding on `127.0.0.1:8334` and stop startup if any P2P bind fails instead of \"if all P2P binds fail\".\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/22726\r\nFixes https://github.com/bitcoin/bitcoin/issues/22727",
      "state": "closed",
      "user": "vasild",
      "created_at": "2021-08-17T14:16:34Z",
      "updated_at": "2025-11-17T12:11:46Z",
      "merged_at": "2024-07-16T20:27:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/22729",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 322,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2065110476,
      "number": 30868,
      "title": "refactor: add clang-tidy `modernize-use-starts-ends-with` check",
      "body": "",
      "state": "closed",
      "user": "romanz",
      "created_at": "2024-09-11T04:11:00Z",
      "updated_at": "2025-11-17T12:11:45Z",
      "merged_at": "2024-09-16T19:47:11Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30868",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 64,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2769336209,
      "number": 33247,
      "title": "build: Remove CMAKE_SKIP_BUILD_RPATH and SKIP_BUILD_RPATH settings",
      "body": "Remove CMAKE_SKIP_BUILD_RPATH and SKIP_BUILD_RPATH settings that are no longer needed after reordering the Guix build script to perform binary checks after installation.\n\nThis PR also removes the unused CMake maintenance targets (`check-security` and `check-symbols`) and updates the Guix security checks to include binaries in the `libexec/` directory (added in PR #31679).",
      "state": "closed",
      "user": "151henry151",
      "created_at": "2025-08-23T22:35:38Z",
      "updated_at": "2025-11-17T11:00:09Z",
      "merged_at": "2025-11-17T11:00:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33247",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 441,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3013488288,
      "number": 33876,
      "title": "doc: Update NetBSD Build Guide",
      "body": "The `py310-zmq` binary package is not available by default on NetBSD 10.1. It has been updated to `py313-zmq`, and the `python310` package is updated accordingly.\r\n\r\nSee: https://ftp.netbsd.org/pub/pkgsrc/current/pkgsrc/index-all.html.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-15T13:13:21Z",
      "updated_at": "2025-11-17T10:32:44Z",
      "merged_at": "2025-11-17T10:23:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33876",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 266,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3014139883,
      "number": 33881,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "snailcoinpow",
      "created_at": "2025-11-15T23:44:00Z",
      "updated_at": "2025-11-17T10:12:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33881",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1706640974,
      "number": 29365,
      "title": "Extend signetchallenge to set target block spacing",
      "body": "Inspired by https://github.com/bitcoin/bitcoin/pull/27446, this PR implements the proposal detailed in the comment https://github.com/bitcoin/bitcoin/pull/27446#issuecomment-1516600820.\r\n\r\n## Rationale\r\n\r\nIntroduce the ability to configure a custom target time between blocks in a custom Bitcoin signet network. This enhancement enables users to create a signet that is more conducive to testing. The change enhances the flexibility of signet, rendering it more versatile for various testing scenarios. For instance, I am currently working on setting up a signet with a 30-second block time. However, this caused numerous difficulty adjustments, resulting in an inconsistent network state. Regtest isn't a viable alternative for me in this context since we prefer defaults to utilize our custom signet when configured, without impeding local regtest development.\r\n\r\n## Implementation\r\n\r\nIf the challenge format is `OP_RETURN PUSHDATA<params> PUSHDATA<actual challenge>`, the actual challenge from the second data push is used as the signet challenge, and the parameters from the first push are used to configure the network. Otherwise the challenge is used as is.\r\n\r\nUnder the previous rules, such a signet challenge would always evaluate to `false`, suggesting that it is likely not in use by anyone. Updating bitcoind to a version that includes this change will not cause any disruptions — existing signet challenges will retain their original meaning without alteration.\r\n\r\nThe only parameter currently available is \"target_spacing\" (default 600 seconds). To set it, place `0x01<target_spacing as uint64_t, little endian>` in the params. Empty params are also valid. If other network parameters are added in the future, they should use `0x02<option 2 value>`, `0x03<option 3 value>`, etc., following the protobuf style.\r\n\r\nTwo public functions were added to `chainparams.h`:\r\n  - `ParseWrappedSignetChallenge`: Extracts signet params and signet challenge from a wrapped signet challenge.\r\n  - `ParseSignetParams`: Parses `<params>` bytes of the first data push.\r\n\r\nFunction `ReadSigNetArgs` calls `ParseWrappedSignetChallenge` and `ParseSignetParams` to implement the new meaning of signetchallenge.\r\n\r\nThe description of the flag `-signetchallenge` was updated to reflect the changes.\r\n\r\nA new unit tests file, `chainparams_tests.cpp`, was added, containing tests for `ParseWrappedSignetChallenge` and `ParseSignetParams`.\r\n\r\nThe test `signet_parse_tests` from the file `validation_tests.cpp` was modified to ensure proper understanding of the new logic.\r\n\r\nIn the functional test `feature_signet.py`, a test case was added with the value of `-signetchallenge` set to the wrapped challenge, setting spacing to 30 seconds and having the actual challenge `OP_TRUE`.\r\n\r\nThe Signet miner was updated, introducing a new option `--target-spacing` with a default of 600 seconds. It must be set to the value used by the network.\r\n\r\n## Example\r\n\r\nI tested this PR against [Mutinynet](https://blog.mutinywallet.com/mutinynet/), a signet running on a custom fork of Bitcoin Core, implementing 30s target spacing. I successfully synchronized the blockchain using the following config:\r\n\r\n```\r\nsignet=1\r\n[signet]\r\nsignetchallenge=6a4c09011e000000000000004c25512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\naddnode=45.79.52.207:38333\r\ndnsseed=0\r\n```\r\n\r\nThe content of this wrapped challenge:\r\n\r\n```\r\n6a OP_RETURN\r\n4c OP_PUSHDATA1\r\n09 (length of signet params = 9)\r\n011e00000000000000 (signet params: 0x01, pow_target_spacing=30)\r\n4c OP_PUSHDATA1\r\n25 (length of challenge = 37)\r\n512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\n(original Mutinynet challenge)\r\n```",
      "state": "open",
      "user": "starius",
      "created_at": "2024-02-01T16:36:21Z",
      "updated_at": "2025-11-16T21:59:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29365",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3758,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2148939281,
      "number": 31171,
      "title": "depends: Specify CMake generator explicitly",
      "body": "Building packages in depends implies using GNU Make. However, this assumption can be wrong in environments where the [`CMAKE_GENERATOR`](https://cmake.org/cmake/help/latest/envvar/CMAKE_GENERATOR.html) variable is set.\r\n\r\nThis change explicitly makes CMake use the \"Unix Makefiles\" generator.\r\n\r\nCan be tested as follows:\r\n```\r\n$ env CMAKE_GENERATOR=Ninja make -C depends\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-10-28T11:29:29Z",
      "updated_at": "2025-11-16T12:11:13Z",
      "merged_at": "2024-11-07T17:12:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31171",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 420,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2172435106,
      "number": 31267,
      "title": "refactor: Drop deprecated space in operator\"\"_mst",
      "body": "The space is deprecated according to https://en.cppreference.com/w/cpp/language/user_literal#Literal_operators and compilers will start to warn about this. For example, GCC-15 should warn when compiling under C++23, according to https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html#index-Wdeprecated-literal-operator and Clang-20 will do so by default, according to https://clang.llvm.org/docs/DiagnosticsReference.html#wdeprecated-literal-operator.\r\n\r\nFix it by removing the unused and deprecated space.\r\n\r\nAlso, fix the iwyu include list, while touching the module.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-11T10:10:52Z",
      "updated_at": "2025-11-16T12:11:12Z",
      "merged_at": "2024-11-11T14:21:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31267",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 632,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2153106016,
      "number": 31181,
      "title": "cmake: Revamp `FindLibevent` module",
      "body": "This PR generalizes the use of `find_package` / `pkg_check_modules`, prioritizing the former.\r\n\r\nAddresses https://github.com/bitcoin/bitcoin/pull/30903#issuecomment-2444700876:\r\n> We should also follow up with refactoring the libevent module, to more generically use CMake/pkg-config, rather than restricting the CMake usage to `vcpkg`. At that point, we'd likely be able to dump pkg-config for the depends path entirely.\r\n\r\nSimilar to https://github.com/bitcoin/bitcoin/pull/30903.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-10-30T07:02:00Z",
      "updated_at": "2025-11-16T12:11:12Z",
      "merged_at": "2024-11-11T15:32:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31181",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 519,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1596011554,
      "number": 28843,
      "title": "[refactor] Cleanup BlockAssembler mempool usage",
      "body": "The `addPackageTxs` method of the `BlockAssembler` currently has access to two mempool variables, as an argument and as a member. Clean this up and clarify that they both are the same mempool instance by removing the argument and instead only using the member variable in the method.\r\n\r\nThis was noticed in this PR review: https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898164322.\r\n\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2023-11-10T11:06:22Z",
      "updated_at": "2025-11-15T12:10:36Z",
      "merged_at": "2024-11-14T21:30:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28843",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 443,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2179535993,
      "number": 31287,
      "title": "refactor: Avoid std::string format strings",
      "body": "This changes some unchecked `std::string` format strings to use string literals, which are `consteval` checked at compile-time.\r\n\r\nSplit out, because it is used in several pull requests.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-14T11:47:09Z",
      "updated_at": "2025-11-15T12:10:35Z",
      "merged_at": "2024-11-15T14:53:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31287",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 229,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1978283629,
      "number": 30487,
      "title": "ci: skip Github CI on branch pushes for forks",
      "body": "When a contributor maintains a fork of the repo, any pull request they make to their own fork, or to the main repository, will trigger two CI runs one for the branch push and one for the pull request.\r\n\r\nAfter this PR when `SKIP_BRANCH_PUSH` is set, pushes made to git branches inside fork repositories will no longer trigger CI runs, unless the git branches are associated with PRs in the fork repository, or the main repository.\r\n\r\nThe same behaviour was added for Cirrus in e9bfbb5414ab14ca14d8edcfdf77f28c9ed67c33.\r\n\r\nNote to maintainers: `SKIP_BRANCH_PUSH=true` needs to be set for the GUI repo to maintain existing behaviour.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-07-19T15:39:08Z",
      "updated_at": "2025-11-15T12:10:35Z",
      "merged_at": "2024-11-14T21:45:15Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30487",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 677,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2871075711,
      "number": 33498,
      "title": "p2p: Mitigate GETADDR fingerprinting by setting address timestamps to a fixed value",
      "body": " When a node is connected to multiple networks (e.g., clearnet and Tor), it keeps separate ADDR response caches for each network. These are refreshed about once per day (randomized between 21 and 27 hours). See →[ https://github.com/bitcoin/bitcoin/blob/master/src/net.cpp#L3519](https://github.com/bitcoin/bitcoin/blob/master/src/net.cpp#L3519)\r\nThis is an example of a dual-homed node’s addrman response, with separate caches:\r\n\r\n_IPv4 response:_\r\n```\r\n{102.130.242.11:8333 : 1741100851}\r\n{119.17.151.161:8333 : 1739825443}\r\n{ubeirqalc4vj54baszpatvctpohn62hzj7vfnbncy6upa6vywvgewrad.onion:8333 : 1739825443}\r\n\r\n```\r\n_Tor response:_\r\n```\r\n{102.130.242.11:8333 : 1741100851}\r\n{94.23.167.176:8333 : 1740895525}\r\n{ubeirqalc4vj54baszpatvctpohn62hzj7vfnbncy6upa6vywvgewrad.onion:8333 : 1739825443}\r\n\r\n```\r\nCurrently, there's a fingerprinting attack that exploits responses to GETADDR messages. An attacker can collect responses from supposedly different nodes and compare the timestamps. By looking at overlaps in responses, they can correlate Tor and clearnet identities — effectively linking them back to the same node.\r\nMore details on this attack here:[ https://delvingbitcoin.org/t/fingerprinting-nodes-via-addr-requests/1786](https://delvingbitcoin.org/t/fingerprinting-nodes-via-addr-requests/1786)\r\n\r\nThis PR mitigates the attack by setting the timestamps in different caches to a fixed value in the past (10.5 ± 2.5 days), preventing correlation through timestamps.\r\nAfter the change, timestamps in each cache are now uniform, but differ between caches:\r\n\r\n_IPv4 response:_\r\n```\r\n{102.130.242.11:8333 : 1757964675}\r\n{119.17.151.161:8333 : 1757964675}\r\n{ubeirqalc4vj54baszpatvctpohn62hzj7vfnbncy6upa6vywvgewrad.onion:8333 : 1757964675}\r\n\r\n```\r\n_Tor response:_\r\n```\r\n{102.130.242.11:8333 : 1757878277}\r\n{119.17.151.161:8333 : 1757878277}\r\n{ubeirqalc4vj54baszpatvctpohn62hzj7vfnbncy6upa6vywvgewrad.onion:8333 : 1757878277}\r\n```\r\n\r\nWe initially considered setting the timestamps to 0, since they would eventually be updated and saved. However, this isn’t compatible with btcd (see details here → https://github.com/btcsuite/btcd/issues/2411 ). \r\nThis is still a work in progress — we’re continuing to test and are open to trying other solutions as well.\r\n\r\nThis is joint work with @danielabrozzoni",
      "state": "open",
      "user": "naiyoma",
      "created_at": "2025-09-29T15:21:00Z",
      "updated_at": "2025-11-14T13:26:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33498",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2382,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3003051402,
      "number": 33860,
      "title": "depends: drop Qt patches",
      "body": "Drop one patch that was already unused, and one that compilation succeeds without.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-12T14:30:02Z",
      "updated_at": "2025-11-14T12:51:14Z",
      "merged_at": "2025-11-14T09:52:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33860",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 107,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1700291038,
      "number": 29346,
      "title": "Stratum v2 Noise Protocol",
      "body": "Parent PR #29432. Followed by #30315.\r\n\r\nThis is the first part of the Stratum v2 Template Provider change that can be a standalone pull request.\r\n\r\nIt introduces a CMake build flag `-DWITH_SV2` that is `OFF` by default (but `ON` for CI).\r\n\r\nThe Noise Protocol Framework is defined here: https://noiseprotocol.org/noise.html\r\n\r\nIt's quite similar to BIP324. The main differences are explained here, including why Stratum v2 can't use BIP234 (yet): https://delvingbitcoin.org/t/stratum-v2-noise-protocol-bip324-nuggets/413\r\n\r\nThe implementation is based on revision 38, 2018-07-11 (most recent at the time of writing).\r\n\r\nThe Stratum v2 spec defines the specific choice of ciphers: https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md\r\n\r\nThis protocol has been implemented in the Stratum Reference Implementation (SRI, using [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)). https://github.com/stratum-mining/stratum\r\n\r\nIt has also been (independently) implemented in BraiinsOS. This part is currently not open source, and it's behind on some recent changes.\r\n\r\nThe classes in `sv2_noise.h` attempt to stay close to the paper, whereas the test and fuzzer code borrow heavily from BIP324.\r\n\r\nIt's ready for review, but not for merge:\r\n\r\n1. The parent PR may need more conceptual review (and perhaps the entire spec, but that would really slow things down)\r\n2. We could decide to not support Noise encryption at all and require users to install separate software for that. Code review of this PR could help inform that decision.\r\n\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-01-29T16:14:50Z",
      "updated_at": "2025-11-14T12:09:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29346",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1592,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1942440253,
      "number": 30349,
      "title": "benchmark: Improve SipHash_32b accuracy to avoid potential optimization issues",
      "body": "This PR stems from the discussions in https://github.com/bitcoin/bitcoin/pull/30317#discussion_r1649187336\r\n\r\nThe previous benchmark for `SipHash` was slightly less accurate in representing real-world usage and allowed for potential compiler optimizations that could invalidate the benchmark.\r\nThis change aims to ensure the benchmark produces more realistic results.\r\n\r\nBy modifying the initial values and only incrementing the bytes of `val`, the benchmark should reflects a more typical usage patterns - and prevent the compiler from optimizing away the calculations.\r\n\r\n-------\r\n\r\nOn my M1 processor the benchmark's speed changed significantly (but the CI seems to produce the same result as before):\r\n\r\n> cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_BENCH=ON && cmake --build build -j10 &&\r\n./build/src/bench/bench_bitcoin --filter=SipHash_32b --min-time=1000\r\n\r\nBefore:\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               35.15 |       28,445,856.66 |    0.2% |      1.10 | `SipHash_32b`\r\n\r\nAfter (note that only the benchmark changed):\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               22.05 |       45,350,886.64 |    0.3% |      1.10 | `SipHash_32b`\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-06-27T14:05:32Z",
      "updated_at": "2025-11-14T12:09:55Z",
      "merged_at": "2024-11-14T21:36:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30349",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1494,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2150352880,
      "number": 31174,
      "title": "tinyformat: Add compile-time checking for literal format strings",
      "body": "Add compile-time checking for literal format strings passed to `strprintf` and `tfm::format` to make sure the right number of format arguments are passed.\r\n\r\nThere is still no compile-time checking if non-literal `std::string` or `bilingual_str` format strings are passed, but this is improved in other PRs:\r\n\r\n- [#31061](https://github.com/bitcoin/bitcoin/pull/31061) implements compile-time checking for translated strings\r\n- [#31072](https://github.com/bitcoin/bitcoin/pull/31072) increases compile-time checking by using literal strings as format strings, instead of `std::string` and `bilingual_str`\r\n- [#31149](https://github.com/bitcoin/bitcoin/pull/31149) may drop the `std::string`  overload for `strprintf` to [require](https://github.com/bitcoin/bitcoin/pull/31149#issuecomment-2444579999) compile-time checking",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2024-10-28T23:56:27Z",
      "updated_at": "2025-11-14T12:09:53Z",
      "merged_at": "2024-11-14T10:18:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31174",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 887,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2099761040,
      "number": 31003,
      "title": "Add waitFeesChanged() to Mining interface",
      "body": "The Stratum v2 protocol allows pushing out templates as fees in the mempool increase. This interface lets us know when it's time to do so.\r\n\r\nI split the implementation into two parts because I'm not sure if we should include the second commit now, or wait until cluster mempool #30289 is merged.\r\n\r\nThe first commit contains a mock implementation very similiar to how longpolling in `getblocktemplate` works. It calls `getTransactionsUpdated` once per second. This returns `true` anytime a transaction is added to the mempool, even if it has no impact on fees in the best block.\r\n\r\nThe second commit creates a new block template so it can actually measure the fees. It's slightly faster `getNewBlock()` because it skips verification.\r\n\r\nOn my 2019 Intel MacBook Pro it takes about 20ms to generate a block template. The `waitFeesChanged()` waits 1 second between each `CreateNewBlock` call so as to not burden the node too much. But on (very) low end hardware this may still be problematic.\r\n\r\nThe second commit does not change the interface, so it could be left out if people prefer that. I'm not sure what performance increase to expect from cluster mempool.\r\n\r\nThe interface intentionally does not return the resulting template, so that the implementation can be optimized further. Downside is that the caller needs to do another `getNewBlock()`.\r\n\r\nThe changes here can use to make longpolling `getblocktemplate` more efficient, by only returning the RPC call when template fees actually increased. However this PR does not touch that RPC code.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-09-30T18:15:40Z",
      "updated_at": "2025-11-14T12:09:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31003",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1591,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2163837210,
      "number": 31225,
      "title": "doc: Fix grammatical errors in multisig-tutorial.md",
      "body": "This pull request fixes grammatical errors in the `multisig-tutorial.md` document.",
      "state": "closed",
      "user": "secp512k2",
      "created_at": "2024-11-05T20:14:04Z",
      "updated_at": "2025-11-14T12:09:52Z",
      "merged_at": "2024-11-14T10:26:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31225",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 134,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2172675660,
      "number": 31269,
      "title": "validation: Remove RECENT_CONSENSUS_CHANGE validation result",
      "body": "The *_RECENT_CONSENSUS_CHANGE variants in the validation result enumerations were always unused. They seem to have been kept around speculatively for a soft fork after segwit, however they were never used for taproot either. This points at them not having a clear purpose. Based on the original pull requests' comments their usage was never entirely clear:\r\nhttps://github.com/bitcoin/bitcoin/pull/11639#issuecomment-370234133 https://github.com/bitcoin/bitcoin/pull/15141#discussion_r271039747\r\n\r\nSince they are part of the validation interface and need to be exposed by the kernel library keeping them around may also be confusing to future users of the library.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-11-11T12:04:03Z",
      "updated_at": "2025-11-14T12:09:51Z",
      "merged_at": "2024-11-14T09:43:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31269",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3003718338,
      "number": 33864,
      "title": "scripted-diff: fix leftover references to `policy/fees.h`",
      "body": "Fixes #33863\r\n\r\nryanofsky wrote \r\n> I still see some references to the src/policy/fees.h file removed by this PR:\r\n\r\n```\r\n$ git grep -n policy/fees.h\r\nsrc/wallet/rpc/spend.cpp:206: * @param[in]     conf_target       UniValue integer; confirmation target in blocks, values between 1 and 1008 are valid per policy/fees.h;\r\ntest/functional/rpc_estimatefee.py:39:        # max value of 1008 per src/policy/fees.h\r\ntest/functional/rpc_psbt.py:604:                assert_raises_rpc_error(-8, \"Invalid conf_target, must be between 1 and 1008\",  # max value of 1008 per src/policy/fees.h\r\ntest/functional/wallet_basic.py:337:            assert_raises_rpc_error(-8, \"Invalid conf_target, must be between 1 and 1008\",  # max value of 1008 per src/policy/fees.h\r\ntest/functional/wallet_fundrawtransaction.py:851:                assert_raises_rpc_error(-8, \"Invalid conf_target, must be between 1 and 1008\",  # max value of 1008 per src/policy/fees.h\r\ntest/functional/wallet_send.py:315:                expect_error=(-8, \"Invalid conf_target, must be between 1 and 1008\"))  # max value of 1008 per src/policy/fees.h\r\n```\r\n\r\nThis is fixed in this PR by running a script that searches for what he greps and replaces it with the right reference.\r\n\r\n```\r\ngit grep -l \"policy\\/fees\\.h\" | xargs sed -i \"s/policy\\/fees.h/policy\\/fees\\/block_policy_estimator.h/g\"\r\n```\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-11-12T17:43:59Z",
      "updated_at": "2025-11-14T10:30:12Z",
      "merged_at": "2025-11-13T09:49:03Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33864",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1408,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977997075,
      "number": 33785,
      "title": "util: Allow `Assert` (et al.) in contexts without __func__",
      "body": "Without this, compile warnings could be hit about `__func__` being only valid inside functions.\r\n\r\n```\r\nwarning: predefined identifier is only valid inside function [-Wpredefined-identifier-outside-function] note: expanded from macro Assert\r\n  115 | #define Assert(val) inline_assertion_check<true>(val, __FILE__, __LINE__, __func__, #val)\r\n      |                                                                           ^\r\n```\r\n\r\nRef https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2486258473\r\n\r\n\r\nThis also introduces a slight behaviour change, because `std::source_location::function_name` usually includes the entire function signature instead of just the name.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-04T21:04:28Z",
      "updated_at": "2025-11-14T04:00:32Z",
      "merged_at": "2025-11-10T11:56:15Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33785",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 736,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2165801954,
      "number": 31235,
      "title": "addrman: cap the `max_pct` to not exceed the maximum number of addresses",
      "body": "Fixes #31234\r\n\r\nThis PR fixes a bad alloc issue in `GetAddresses` by capping the value `max_pct`. In practice, values greater than 100 should be treated as 100 since it's the percentage of addresses to return. Also, it limites the value `max_pct` in connman target to exercise values between 0 and 100.  ",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-11-06T18:07:23Z",
      "updated_at": "2025-11-13T12:09:21Z",
      "merged_at": "2024-11-13T12:13:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31235",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 377,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2165851251,
      "number": 31237,
      "title": "doc: Add missing 'blank=true' option in offline-signing-tutorial.md",
      "body": "Issue:\r\n\r\nThe text mentions that the `createwallet` command should use the options `disable_private_keys=true, blank=true`, but the provided command only includes `disable_private_keys=true`, missing the `blank=true` option.\r\n\r\nCorrection:\r\n\r\nAdded `blank=true` to the command to match the options described in the text.\r\n\r\nExplanation:\r\n\r\nThe `blank=true` option is necessary to create a blank wallet. Including this option ensures the command matches the options specified in the text.",
      "state": "closed",
      "user": "secp512k2",
      "created_at": "2024-11-06T18:37:35Z",
      "updated_at": "2025-11-13T12:09:20Z",
      "merged_at": "2024-11-11T14:13:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31237",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 555,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2174984044,
      "number": 31277,
      "title": "doc: mention `descriptorprocesspsbt` in psbt.md",
      "body": "Noticed that the `descriptorprocesspsbt` RPC call is currently not documented anywhere.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2024-11-12T14:07:00Z",
      "updated_at": "2025-11-13T12:09:19Z",
      "merged_at": "2024-11-13T09:26:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31277",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 135,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2170563998,
      "number": 31259,
      "title": "doc: Fix missing comma in JSON example in REST-interface.md",
      "body": "This pull request addresses a minor issues in the REST-interface.md documentation:\r\n\r\nMissing Comma in JSON Example: In the \"Query UTXO set\" section, a missing comma after the \"desc\" field in the JSON example has been added to ensure valid JSON syntax.",
      "state": "closed",
      "user": "secp512k2",
      "created_at": "2024-11-08T22:24:34Z",
      "updated_at": "2025-11-13T12:09:19Z",
      "merged_at": "2024-11-11T11:24:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31259",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 312,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3005440810,
      "number": 33868,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "asyncmind0",
      "created_at": "2025-11-13T05:26:04Z",
      "updated_at": "2025-11-13T05:57:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33868",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2540992851,
      "number": 32606,
      "title": "p2p: Drop unsolicited CMPCTBLOCK from non-HB peer",
      "body": "Processing unsolicited `CMPCTBLOCK`'s from a peer that has not been marked high bandwidth is not well-specified behavior in BIP-0152, in fact the BIP seems to imply that it is not permitted:\r\n\r\n> \"[...] method is not useful for compact blocks because `cmpctblock` blocks can be sent unsolicitedly in high-bandwidth mode\"\r\n\r\nSee https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki#separate-version-for-segregated-witness\r\n\r\nThis partially mitigates a mempool leak described in #28272, making it only possible for peers selected as high bandwidth to discover a node's mempool.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-23T21:58:15Z",
      "updated_at": "2025-11-12T21:58:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32606",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1799118469,
      "number": 29770,
      "title": "index: Check all necessary block data is available before starting to sync",
      "body": "Currently, we check that `BLOCK_HAVE_DATA` is available for all blocks an index needs to sync during startup. However, for `coinstatsindex` and `blockfilterindex` we also need the undo data for these blocks. If that data is missing in the blocks, we are currently still starting to sync each of these indices and then crash later when we encounter the missing data.\r\n\r\nThis PR adds explicit knowledge of which block data is needed for each index and then checks its availability during startup before initializing the sync process on them.\r\n\r\nThis also addresses a few open comments from #29668 in the last commit.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2024-03-30T22:55:19Z",
      "updated_at": "2025-11-12T17:16:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29770",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 689,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2757183632,
      "number": 33218,
      "title": "refactor: rename `fees.{h,cpp}` to `fees/block_policy_estimator.{h,cpp}`",
      "body": "This PR is a simple refactoring that does four things:\r\n\r\n1. Renames `test/policy_fee_tests.cpp` to `test/feerounder_tests.cpp`.\r\n2. Renames `policy/fees.{h,cpp}` to `policy/fees/block_policy_estimator.{h,cpp}`.\r\n3. Renames `policy/fees_args.cpp` to `policy/fees/block_policy_estimator_args.cpp`.\r\n4. Modifies `estimateSmartFee` to return the block height at which the estimate was made by adding a `best_height` unsigned int value to the `FeeCalculation` struct.\r\n\r\n**Motivation**\r\n\r\nIn preparation for adding a new fee estimator, the `fees` directory is created so we can organize code into `block_policy_estimator` and `mempool` because\r\n\r\na) It would be clunky to add more code directly under `fees`.\r\nb) Having `policy/fees.{h,cpp}` and `policy/mempool.{h,cpp}` would also be undesirable. \r\n\r\nTherefore, it makes sense to structure the it as `policy/fees/block_policy_estimator`, `policy/fees/mempool`, etc.\r\nHence test file were also updated accordingly.\r\n\r\nThe current block height is also returned because later in #30157 we log the height at which each estimate is made (at the debug log category of  fee estimation :) ). This feature is particularly useful for empirical data analysis.\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-08-19T17:47:28Z",
      "updated_at": "2025-11-12T16:16:29Z",
      "merged_at": "2025-10-28T15:58:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33218",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1270,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2516937442,
      "number": 32482,
      "title": "build: add `-W*-whitespace`",
      "body": "GCC 15 now has options to turn leading & trailing whitespace into compile failures: https://gcc.gnu.org/gcc-15/changes.html#c-family. Fix the few cases of leading tabs, and trailing whitespace, and then enable `-Wleading-whitespace` and `-Wtrailing-whitespace`.\r\n\r\nWe currently get PRs that are opened with various whitespace, i.e #33822, so turning that into compile-time failure where possible, seems useful, to avoid a CI roundtrip.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T15:13:05Z",
      "updated_at": "2025-11-12T16:12:51Z",
      "merged_at": "2025-11-12T10:53:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32482",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 463,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2962918038,
      "number": 33745,
      "title": "mining: check witness commitment in submitBlock",
      "body": "When an IPC client requests a new block template via the Mining interface, we hold on to its `CBlock`. That way when they call `submitSolution()` we can modify it in place, rather than having to reconstruct the full block like the `submitblock` RPC does.\r\n\r\nBefore this commit however we forgot to invalidate `m_checked_witness_commitment`, which we should since the client brings a new coinbase.\r\n\r\nThis would cause us to accept an invalid chaintip.\r\n\r\nFix this and add a test to confirm that we now reject such a block. As a sanity check, we add a second node to the test and confirm that will accept our mined block.\r\n\r\nAs first noticed in #33374 the IPC code takes the coinbase as provided, unlike the `submitblock` RPC which calls `UpdateUncommittedBlockStructures()` and adds witness commitment to the coinbase if it was missing.\r\n\r\nAlthough that could have been an alternative fix, we instead document that IPC clients are expected to provide the full coinbase including witness commitment.\r\n\r\nPatch to produce the original issue:\r\n\r\n```diff\r\ndiff --git a/src/node/miner.cpp b/src/node/miner.cpp\r\nindex b988e28a3f..28e9048a4d 100644\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -450,15 +450,10 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n     }\r\n     block.nVersion = version;\r\n     block.nTime = timestamp;\r\n     block.nNonce = nonce;\r\n     block.hashMerkleRoot = BlockMerkleRoot(block);\r\n-\r\n-    // Reset cached checks\r\n-    block.m_checked_witness_commitment = false;\r\n-    block.m_checked_merkle_root = false;\r\n-    block.fChecked = false;\r\n }\r\n\r\n std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\r\n                                                       KernelNotifications& kernel_notifications,\r\n                                                       CTxMemPool* mempool,\r\ndiff --git a/test/functional/interface_ipc.py b/test/functional/interface_ipc.py\r\nindex cce56e3294..bf1b7048ab 100755\r\n--- a/test/functional/interface_ipc.py\r\n+++ b/test/functional/interface_ipc.py\r\n@@ -216,22 +216,22 @@ class IPCInterfaceTest(BitcoinTestFramework):\r\n             assert_equal(res.result, True)\r\n\r\n             # The remote template block will be mutated, capture the original:\r\n             remote_block_before = await self.parse_and_deserialize_block(template, ctx)\r\n\r\n-            self.log.debug(\"Submitted coinbase must include witness\")\r\n+            self.log.debug(\"Submitted coinbase with missing witness is accepted\")\r\n             assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\r\n-            assert_equal(res.result, False)\r\n+            assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Even a rejected submitBlock() mutates the template's block\")\r\n             # Can be used by clients to download and inspect the (rejected)\r\n             # reconstructed block.\r\n             remote_block_after = await self.parse_and_deserialize_block(template, ctx)\r\n             assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\r\n\r\n-            self.log.debug(\"Submit again, with the witness\")\r\n+            self.log.debug(\"Submit again, with the witness - does not replace the invalid block\")\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\r\n             assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Block should propagate\")\r\n             assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)\r\n```\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-10-30T12:02:55Z",
      "updated_at": "2025-11-12T15:32:00Z",
      "merged_at": "2025-11-12T15:04:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33745",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3799,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2955801513,
      "number": 33724,
      "title": "refactor: Return uint64_t from GetSerializeSize",
      "body": "Consensus code should arrive at the same conclusion, regardless of the architecture it runs on. Using architecture-specific types such as `size_t` can lead to issues, such as the low-severity [CVE-2025-46597](https://bitcoincore.org/en/2025/10/24/disclose-cve-2025-46597/).\r\n\r\nThe CVE was already worked around, but it may be good to still fix the underlying issue.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/33709 with a few refactors to use explicit fixed-sized integer types in serialization-size related code and concluding with a refactor to return `uint64_t` from `GetSerializeSize`. The refactors should not change any behavior, because the CVE was already worked around.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-10-28T15:54:37Z",
      "updated_at": "2025-11-12T15:28:33Z",
      "merged_at": "2025-11-12T14:48:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33724",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 734,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2527053466,
      "number": 32552,
      "title": "refactor: Remove workaround for resolved MSVC bug",
      "body": "The MSVC bug was [fixed](https://developercommunity.visualstudio.com/t/consteval-conversion-function-fails/1579014) in Visual Studio version 17.11, and the Bitcoin Core project now requires Visual Studio version [17.13](https://github.com/bitcoin/bitcoin/pull/32525) or later.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-18T16:33:51Z",
      "updated_at": "2025-11-12T15:18:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32552",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 326,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2964786214,
      "number": 33750,
      "title": "doc: document fingerprinting risk when operating node on multiple networks",
      "body": "Operating a Bitcoin node across multiple networks poses some fingerprinting risk. [0] Currently, this is not clear from the documentation and may be causing direct harm to users who are unaware of this. \r\n\r\nThe included documentation change indicates this risk factor but also notes that operating a node across multiple networks does provide an important benefit (increases the cost of eclipse and partitioning attacks) and is thus not discouraged outright. \r\n\r\nThe i2p documentation did not include a privacy recommendations section, so that is added as well.\r\n\r\n[0] https://delvingbitcoin.org/t/fingerprinting-nodes-via-addr-requests/1786\r\n",
      "state": "closed",
      "user": "da1sychain",
      "created_at": "2025-10-30T21:55:49Z",
      "updated_at": "2025-11-12T15:00:23Z",
      "merged_at": "2025-11-12T14:38:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33750",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 718,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2998666325,
      "number": 33850,
      "title": "depends: drop qtbase_avoid_native_float16 qt patch",
      "body": "There is no-longer a minimum required / max supported libgcc version, after https://github.com/bitcoin/bitcoin/pull/33181.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-11T11:20:36Z",
      "updated_at": "2025-11-12T14:55:07Z",
      "merged_at": "2025-11-11T17:03:28Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33850",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 173,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2674073273,
      "number": 33003,
      "title": "test: add option to skip large re-org test in feature_block",
      "body": "Fixes #32877 \r\n\r\nThis PR adds a config flag `--skipreorg` which is used to skip the large re-org test. According to corecheck, `feature_block` is our slowest functional test and primarily because of this large re-org test. However, this test might not be useful for the mutation analysis of some files and could be skipped to save a huge amount of time.\r\n\r\n```\r\ntime ./build/test/functional/feature_block.py --skipreorg\r\n./build/test/functional/feature_block.py --skipreorg  11.38s user 0.33s system 37% cpu 31.422 total\r\ntime ./build/test/functional/feature_block.py\r\n./build/test/functional/feature_block.py  25.87s user 3.53s system 56% cpu 52.317 total\r\n```",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-07-17T13:57:12Z",
      "updated_at": "2025-11-12T14:54:19Z",
      "merged_at": "2025-11-12T14:54:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33003",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 721,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2995658116,
      "number": 33842,
      "title": "build: Bump g++ minimum supported version to 12",
      "body": "All supported operating systems that previously came with at least g++-11, also come with at least g++-12, so bumping the minimum should be fine.\r\n\r\nFor reference:\r\n\r\n* https://packages.ubuntu.com/jammy/g++-12\r\n* https://packages.ubuntu.com/noble/g++ (g++-13)\r\n* https://packages.debian.org/bookworm/g++ (g++-12)\r\n* FreeBSD Ports ship a recent GCC\r\n* RHEL-based 8, and 9 ship with g++-14 via appstream (`dnf install gcc-toolset-14` -> `/opt/rh/gcc-toolset-14/`)\r\n* RHEL-based 10 ships with g++ (14 by default)\r\n* OpenSuse Leap and Tumbleweed ship with g++ 15 https://software.opensuse.org/package/gcc15-c++\r\n\r\nObviously, downloading pre-compiled releases or compiling previous release branches is unaffected by this change.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-10T15:03:18Z",
      "updated_at": "2025-11-12T13:17:44Z",
      "merged_at": "2025-11-12T10:49:59Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33842",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 771,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2109092833,
      "number": 31037,
      "title": "test: enhance p2p_orphan_handling",
      "body": "Previously, `p2p_orphan_handling` relied on checking the debug log for orphanage changes.  This updates the tests to reduce debug log checking and add checks using `tx_in_orphanage()` and `getorphantxs` introduced in #30793.",
      "state": "closed",
      "user": "tdb3",
      "created_at": "2024-10-05T17:10:32Z",
      "updated_at": "2025-11-12T12:08:42Z",
      "merged_at": "2024-11-12T17:37:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31037",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 258,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2172929673,
      "number": 31271,
      "title": "doc: correct typos",
      "body": "Includes #31253.\r\nIncludes https://github.com/bitcoin/bitcoin/pull/31239#pullrequestreview-2425008603.\r\nFixes remaining lint output.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-11T14:16:04Z",
      "updated_at": "2025-11-12T12:08:41Z",
      "merged_at": "2024-11-12T09:48:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31271",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 151,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168056834,
      "number": 31249,
      "title": "test: Add combinerawtransaction test to rpc_createmultisig",
      "body": "The only coverage of combinerawtransaction is in a legacy wallet only test. So also use it in rpc_createmultisig so that this RPC remains tested after the legacy wallet is removed.\r\n\r\nSplit from #28710",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-07T18:35:27Z",
      "updated_at": "2025-11-12T12:08:41Z",
      "merged_at": "2024-11-12T10:58:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31249",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 260,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2173134375,
      "number": 31273,
      "title": "ci: Bump valgrind tasks to clang-18",
      "body": "This is the default, see https://packages.ubuntu.com/noble/clang, so likely more widely used. Thus, it seems better to use `clang-18`, instead of `clang-16` in the valgrind CI tasks.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-11T15:57:58Z",
      "updated_at": "2025-11-12T12:08:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31273",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 218,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2591975893,
      "number": 32748,
      "title": "fees: prevent redundant estimates flushes",
      "body": "This PR does two things:\r\n\r\n1. It prevents redundant writes to the `fee_estimates.dat` file when there is no usable data available. For example, during IBD, blocks are still being connected, but unnecessary flushes still occur every hour.\r\n\r\n2. It updates the flushing log to use debug-level logging under the `estimatefee` category. It also ensures the log consistently includes only the full file path.\r\n\r\n\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-06-14T05:53:49Z",
      "updated_at": "2025-11-12T12:08:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32748",
      "labels": [
        "TX fees and policy",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 452,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2946400797,
      "number": 33701,
      "title": "test: add case where `TOTAL_TRIES` is exceeded yet solution remains",
      "body": "Show that `CoinGrider` halts searching when the number of attempts exceeds `TOTAL_TRIES`.  To do so, show that a solution is found, then add one more entry to the same set of inputs.  Since the search orders by `effective_value`, the solution is constructed such that only values with the lowest `effective_value` have the least weight.  Only the lowest weight values will not exceed the `max_selection_weight`. Therefore, `CoinGrinder` will not evaluate all lowest weight solutions together before exceeding `TOTAL_TRIES` since they are last found.\r\n\r\nThis test case was inspired by a similar test for `BnB` currently named `bnb_test`.",
      "state": "open",
      "user": "yancyribbens",
      "created_at": "2025-10-25T00:30:30Z",
      "updated_at": "2025-11-12T11:23:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33701",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2163643091,
      "number": 31223,
      "title": "net, init: derive default onion port if a user specified a -port",
      "body": "This resolves #31133 (setups with multiple local nodes each using a different `-port` no longer working with v28.0, see the issue description for more details) by deriving the default onion listening port to be the value specified by `-port` incremented by 1 (idea by vasild / laanwj).\r\nNote that with this fix, the chosen `-port` values of two local nodes cannot be adjacent, otherwise there will be port collisions again.\r\n\r\nFrom the discussion in the linked issue, this was the most popular option, followed by doing nothing and telling affected users to change their setups to use `-bind` instead of `-port`. But more opinions are certainly welcome!\r\n\r\nI think that if we decide to do something about the problem described in the issue, we should do so soon (in 28.1.), so I opened this PR.\r\nFixes #31133",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2024-11-05T18:01:38Z",
      "updated_at": "2025-11-12T08:44:50Z",
      "merged_at": "2024-12-13T23:56:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31223",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 873,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2732966608,
      "number": 33164,
      "title": "Avoid file overwriting in fallback `AllocateFileRange` implementation",
      "body": "On the master branch, the fallback variant of `AllocateFileRange`, introduced in https://github.com/bitcoin/bitcoin/pull/1677, overwrites the file's content. This causes [issues](https://github.com/bitcoin/bitcoin/issues/33128) on some systems during some \"reindex\" scenarios. Additionally, the recently introduced `feature_reindex_init.py` test is also broken on these systems.\r\n\r\nThe affected systems include: OpenBSD, NetBSD, OmniOS, OpenIndiana.\r\n\r\nThis PR avoids such overwriting.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/33128 and `feature_reindex_init.py` test on [affected systems](https://github.com/hebasto/bitcoin-core-nightly/pull/68).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-08-09T20:38:15Z",
      "updated_at": "2025-11-12T00:42:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33164",
      "labels": [
        "Block storage"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 727,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2430056672,
      "number": 32180,
      "title": "p2p: Advance pindexLastCommonBlock early after connecting blocks",
      "body": "As described in #32179, `pindexLastCommonBlock` is updated later than necessary \r\nin master. \r\nIn case of a linear chain with no forks, it can be moved forward at the beginning of \r\n`FindNextBlocksToDownload`, so that the updated value can be used to better estimate `nWindowEnd`. \r\nThis helps the node to request all blocks from peers within the correct 1024-block-window and avoids peers being incorrectly marked as stallers.\r\n\r\nI also changed `p2p_ibd_stalling.py` to cover the situation after a resolved situation, making sure that no additional peers are marked for stalling.\r\n\r\nFixes #32179\r\n\r\n",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-03-31T22:40:42Z",
      "updated_at": "2025-11-11T14:45:39Z",
      "merged_at": "2025-11-10T16:49:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32180",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 665,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2995949207,
      "number": 33845,
      "title": "ci: Enable experimental kernel stuff in ASan task",
      "body": "Base the task on --preset=dev-mode to ensure maximal coverage and add the following:\r\n\r\n```\r\n   bitcoin-chainstate (experimental) ... ON\r\n   libbitcoinkernel (experimental) ..... ON\r\n   kernel-test (experimental) .......... ON\r\n```\r\n\r\nCurrently a draft to figure out https://github.com/bitcoin/bitcoin/pull/33824#issuecomment-3511082065",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-10T16:27:19Z",
      "updated_at": "2025-11-11T14:37:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33845",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2634988095,
      "number": 32856,
      "title": "Update `minisketch` subtree",
      "body": "This PR updates the `minisketch` subtree to latest upstream, which includes:\r\n    - https://github.com/bitcoin-core/minisketch/pull/75\r\n    - https://github.com/bitcoin-core/minisketch/pull/98",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-07-02T10:17:23Z",
      "updated_at": "2025-11-11T14:17:51Z",
      "merged_at": "2025-11-10T14:06:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32856",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 220,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999064143,
      "number": 33852,
      "title": "test, refactor: Fix `-Warray-bounds` warning",
      "body": "This warning is triggered by GCC 14 when cross-compiling for Windows.\r\n\r\nSplit from https://github.com/bitcoin/bitcoin/pull/33775/ and https://github.com/bitcoin/bitcoin/pull/33764.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-11T13:26:17Z",
      "updated_at": "2025-11-11T13:54:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33852",
      "labels": [
        "Refactoring",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 226,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1044209087,
      "number": 25979,
      "title": "[WIP] wallet: standardize change output detection process",
      "body": "This work aims to define, and implement a base standard mechanism to\r\ndetect individual change outputs.\r\n\r\n### Context\r\n\r\nCurrently, the wallet detects whether an output is change or not based\r\non data stored in the address book.\r\n\r\nThere is no notion of “change outputs”, the wallet detects change scripts.\r\n\r\nConnoting that any address book record modification has implications\r\non all the historical outputs related to that particular destination. Meaning\r\nthat all those outputs can either be change or not. There is no middle-ground\r\ngranular distinction.\r\n\r\n#### How Change Detection Currently Works?\r\n\r\nThe wallet walks-through the transaction outputs, extracts the script\r\ndestination and verify the following two points:\r\n\r\n1) If the destination doesn't exist in the address book, then the script\r\n    is a \"change address\".\r\n   \r\n2) If the destination exists in the address book, but it doesn't have a\r\n     label, then the script is a \"change address\".\r\n\r\n### Motivation\r\n\r\nThere are a good number of problems in the current approach:\r\n\r\n- We make the wallet dependent on an external structure, with separate storage.\r\n   Which has to be updated and maintained along with the wallet state.\r\n\r\n- It cannot be maintained nor recovered across different wallet instances.\r\n   Cannot re-create the, possibly custom, address book data only by importing\r\n   the wallet descriptor string.\r\n\r\n- As the address book is an structure that the user can freely modify, the change\r\n   detection process might differ through different wallets.\r\n \r\n- The current rudimentary assumptions of \"no address book entry\" or \"no label set for the address book entry\"\r\n  to denote that certain script destination is change or not can easily be broken:\r\n  E.g. derive an address from one of the wallet’s external paths manually. Then send coins to it.\r\n  As the receive destination wasn't created inside the wallet, the wallet has no associated address book entry.\r\n  So, the reception is invalidly detected as change (added a test case for it).\r\n\r\n- The wallet can't detect change outputs on more complex scripts such as multi-sig change outputs.\r\n\r\n- The wallet is not able to detect change outputs going to an internal address if the internal address has a label.\r\n  (E.g. the user can manually set a label for the internal address and, doing that, make that all the change\r\n  outputs, in the wallet history, that were sent to the destination are no longer detected as change).\r\n\r\n- There isn’t a way to distinguish the external reception of coins into an internal address. Coins reception on any\r\n   internal address are always detected as change.\r\n\r\n### New Change Detection Mechanism Goals\r\n\r\nAiming to:\r\n\r\n* Define a base mechanism to align different wallet implementations. Preventing each piece of software\r\n  from diverging on the basic change outputs distinction.\r\n\r\n* Detect change outputs on-demand without requiring to maintain an external data structure synced with the\r\n   latest wallet state.\r\n\r\n* Independently, and accurately, detect change outputs regardless data stored in structures that the user\r\n   can freely modify.\r\n\r\n* Granular distinction between change vs non-change outputs that were sent to the same internal address.\r\n  E.g. the reception of coins, from an external source, on internal addresses will not longer be detected\r\n  as change anymore.\r\n\r\n* Expand the change detection to more complex scripts such as a multi-sig protected addresses. (While they\r\n  are added into the wallet on an internal spkm)\r\n\r\n#### Change Output Detection Rules\r\n\r\nA transaction output is change if it fulfills the following points:\r\n\r\n1) At least one of the parent transaction inputs is from the wallet. (If none of them are, then the wallet is receiving coins\r\n    on an internal address).\r\n\r\n2) The script extracted destination is from the wallet and is located in one of the internal script pub key manager.\r\n    (e.g. derived from an internal derivation path)\r\n\r\n#### What about legacy wallets?\r\n\r\nIf the legacy wallet is HD post-split, we have an internal derivation path, so we can follow the same process as\r\ndescriptors wallet. Unless the destination is on the pre-split key pool, in which case, we fallback to the follow-up\r\ncase.\r\n\r\nIf the legacy wallet is pre-split, we continue using the address book as we either have an HD wallet with keys\r\nderived only on the external path, or we are using raw keypool.\r\n\r\n———————————————————————\r\n\r\n#### Extra Note\r\nThis PR, in about 85% at least, is about expanding the current test coverage for the change output detection area.\r\n\r\n#### TO DO (still WIP):\r\n\r\n* [x] Save “internal” flag on non-active descriptors so the wallet can use them on the change detection process.\r\n   (which will fix the currently failing test cases).\r\n* [ ] Re-organize commits so tests always pass.\r\n* [ ] Verify backwards compatibility.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2022-09-01T20:40:07Z",
      "updated_at": "2025-11-11T13:25:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25979",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4924,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 220955427,
      "number": 14425,
      "title": "Net: Do not re-enable Onion network when it was disabled via onlynet",
      "body": "Fixes #13378\r\n\r\nIf set `onlynet=ipv4` or `onlynet=ipv6` (implicating the attempt to disable onion network) without this patch, Bitcoin Core would re-enable onion network (setting onion network to status \"reachable\", when it was initially set to \"unreachable\" (aka \"limited\" in the code). This happened when `proxy` or `onion` parameters where set, or when `listenonion` was set to 1 (which is the default).\r\n\r\nI think, the users initial choice of disabling onion network should be honored instead of quietly being overwritten.\r\n\r\nI have testet with\r\n`onlynet=ipv4`\r\n`onlynet=ipv6`\r\n`onlynet=onion`\r\n(each for itself, no multiple `onlynet` settings)\r\nand without specifying `onlynet`\r\nWith this patch, the node only connects to the specified network (or to all networks in the last test case)",
      "state": "closed",
      "user": "ghost",
      "created_at": "2018-10-07T15:37:31Z",
      "updated_at": "2025-11-11T12:08:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/14425",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 860,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 621199156,
      "number": 21755,
      "title": "Add more info about prefix in error message for invalid address",
      "body": "Add info about valid prefixes from https://en.bitcoin.it/wiki/List_of_address_prefixes\r\n\r\nMentioned about correct prefix for Base58 encoded address and Bech32 address for mainnet and testnet. Regtest and Signet can be ignored because the error message will become too long and both networks are mostly used by devs who are either aware of prefixes or understand errors or know the right place to ask questions if any doubt.\r\n\r\nWe have so many prefixes and networks that ideally such error should just have one link which user can open and check all the information about correct prefixes. Although this can also work for time being.\r\n\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/21741",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-04-22T15:22:00Z",
      "updated_at": "2025-11-11T12:08:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/21755",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 755,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 597560345,
      "number": 21496,
      "title": "fuzz: execute each file in dir without fuzz engine",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/21461\r\n\r\nThis supports whole directory runs of the fuzzing seeds without needing a fuzzing library. A few design decisions that I went with but happy to change: \r\n\r\n1. Very basic multi arg support\r\n    a. Can have 0 args and continue to feed via file input like before\r\n    b. Can have 1 or more args that is a file or directory\r\n    d. Subdirectories are ignored if you pass in a directory (though you can use `dir/*` to include files from subdirectories)\r\n2. Based the file reading off of [util/readwritefile.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/util/readwritefile.cpp#L13) with small changes to make it a buffer instead of a string (could reuse that but turn string to buffer?)\r\n3. The new changes are ignored in the `__AFL_LOOP` path or if built without `DPROVIDE_FUZZ_MAIN_FUNCTION`\r\n\r\n<details>\r\n<summary>Testing instructions</summary>\r\n\r\nTo build without libFuzzer, exclude the sanitizers. IE: \r\n\r\n```\r\nCC=clang CXX=clang++ ./configure BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" --without-gui --with-zmq --enable-fuzz\r\n```\r\n\r\nThat should have the `CPPFLAGS` of `-DPROVIDE_FUZZ_MAIN_FUNCTION` to indicicate it was built with the main function to use instead of the libFuzzer `LLVMFuzzerInitialize` & `LLVMFuzzerTestOneInput` methods.\r\n\r\nTests:\r\n\r\n```bash\r\n# clean and build\r\nmake clean\r\nmake -j \"$(($(nproc)+1))\"\r\n\r\n# get qa-assets if you don't have already\r\ngit clone https://github.com/bitcoin-core/qa-assets\r\n\r\n# existing way to feed 1 at a time, still supported\r\nFUZZ=process_message src/test/fuzz/fuzz < qa-assets/fuzz_seed_corpus/process_message/1258dd51f2a5f3221b33a306279ef7290c5fca6d\r\n\r\n# new with this PR: one at a time\r\nFUZZ=process_message src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/process_message/1258dd51f2a5f3221b33a306279ef7290c5fca6d\r\n\r\n# or multiple files at the same time\r\nFUZZ=process_message src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/process_message/1258dd51f2a5f3221b33a306279ef7290c5fca6d qa-assets/fuzz_seed_corpus/process_message/32230c42df1caa3220a3f95ee8a8d2865731ca3e qa-assets/fuzz_seed_corpus/process_message/90329d105d238ed81452077b4e0287a2040db9e9\r\n\r\n# new with this PR: whole directory at a time\r\nFUZZ=process_message src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/process_message\r\n\r\n# or mix of files and directories at the same time\r\nFUZZ=process_message src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/process_message/1258dd51f2a5f3221b33a306279ef7290c5fca6d qa-assets/fuzz_seed_corpus/process_message/32230c42df1caa3220a3f95ee8a8d2865731ca3e qa-assets/fuzz_seed_corpus/process_message/90329d105d238ed81452077b4e0287a2040db9e9 qa-assets/fuzz_seed_corpus/process_message/\r\n\r\n# new with this PR: wildcard support\r\nFUZZ=process_messages src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/process_messages/* \r\n\r\n# new with this PR: run all seeds in all targets, one target/directory at a time \r\nfor D in qa-assets/fuzz_seed_corpus/*; do [ -d \"${D}\" ] && echo \"${D##*/}\" && FUZZ=\"${D##*/}\" src/test/fuzz/fuzz qa-assets/fuzz_seed_corpus/\"${D##*/}\"; done\r\n```\r\n</details>\r\n\r\nHappy to make any changes and very much welcome code feedback, my c++ a bit rusty and still figuring out the codebase.",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-03-21T20:47:56Z",
      "updated_at": "2025-11-11T12:08:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/21496",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3284,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 772905420,
      "number": 23436,
      "title": "doc: Fix Arch PKGBUILD",
      "body": "- fix Arch PKGBUILD link",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-11-03T23:30:55Z",
      "updated_at": "2025-11-11T12:08:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/23436",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 47,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 727323977,
      "number": 22891,
      "title": "Add fee rate distribution in -getinfo",
      "body": "This PR is on top of https://github.com/bitcoin/bitcoin/pull/21422\r\n\r\nContext: https://github.com/bitcoin/bitcoin/issues/17314#issuecomment-890688519\r\n\r\n### What?\r\n\r\nAdd fee rate distribution information in -getinfo\r\n\r\n### Why?\r\n\r\n1. `-getinfo` has almost everything except a section for mempool and some information which can be helpful while doing transactions or analysis.\r\n2. All PRs trying to add related things in GUI are dead: https://github.com/bitcoin-core/gui/pull/320#issuecomment-912821023. We can try adding basic things in `-getinfo` and see if it helps users. It can be be optional and only work if some argument is used.\r\n3. Fee rate distribution in mempool helps more than any fee estimation because there is nothing to predict. You just need to look at fee rates used by others and bid for block space accordingly.\r\n\r\n### How?\r\n\r\nApproach similar to progress bar which was added in https://github.com/bitcoin/bitcoin/pull/22547\r\n\r\n- Use results from `bitcoin-cli getmempoolinfo \"[1,10,100,200,1000]\"`\r\n- Use dynamic increment for bar in GetFeerateBar() so that it works for different mempool size and all chains.\r\n- Magenta color for mempool section\r\n\r\n\r\n### Testing\r\n\r\n1. Run `bitcoind` (testnet, signet and mainnet)\r\n2. Run command: `watch -c -t -n 1 bitcoin-cli -getinfo -color=always`\r\n3. Check if everything look okay. Press Ctrl+C. Check different edge cases.\r\n\r\n![image](https://github.com/prayank23/bitcoin/raw/gif/mempool-getinfo.gif)",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-09-05T01:59:31Z",
      "updated_at": "2025-11-11T12:08:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/22891",
      "labels": [
        "RPC/REST/ZMQ",
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1499,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 808938657,
      "number": 23850,
      "title": "doc: add security recommendation about *notify config params",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/23412\r\n\r\nFew solutions were suggested in the issue:\r\n\r\n1. notifications.dat\r\n2. not use system() in runCommand()\r\n3. Use a new setting in settings.json file, notifypolicy which is 0 by default (restricted) and can be set to 1 (unrestricted)\r\n\r\nI am not sure if people will agree to make these changes so workaround is to just document the security recommendation. I understand *notify options are helpful for users, projects ,devs etc. however it can be misused in some cases and help attackers as well.",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-12-23T07:36:11Z",
      "updated_at": "2025-11-11T12:08:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/23850",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 612,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 780190205,
      "number": 23510,
      "title": "doc: Fixed dead link in build-unix.md",
      "body": " - Fixed dead link referencing an invalid link",
      "state": "closed",
      "user": "ghost",
      "created_at": "2021-11-14T23:52:56Z",
      "updated_at": "2025-11-11T12:08:16Z",
      "merged_at": "2021-11-15T06:09:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/23510",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 84,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1138101751,
      "number": 26593,
      "title": "tracing: Only prepare tracepoint arguments when actually tracing",
      "body": "Currently, if the tracepoints are compiled (e.g. in depends and release builds), we always prepare the tracepoint arguments regardless of the tracepoints being used or not. We made sure that the argument preparation is as cheap as possible, but we can almost completely eliminate any overhead for users not interested in the tracepoints (the vast majority), by gating the tracepoint argument preparation with an `if(something is attached to this tracepoint)`. To achieve this, we use the optional semaphore feature provided by SystemTap.\r\n\r\nThe first commit simplifies and deduplicates our tracepoint macros from 13 TRACEx macros to a single TRACEPOINT macro. This makes them easier to use and also avoids more duplicate macro definitions in the second commit.\r\n\r\nThe Linux tracing tools I'm aware of (bcc, bpftrace, libbpf, and systemtap) all support the semaphore gating feature. Thus, all existing tracepoints and their argument preparation is gated in the second commit. For details, please refer to the commit messages and the updated documentation in `doc/tracing.md`.\r\n\r\nAlso adding unit tests that include all tracepoint macros to make sure there are no compiler problems with them (e.g. some varadiac extension not supported). \r\n\r\nReviewers might want to check:\r\n- Do the tracepoints still work for you? Do the examples in `contrib/tracing/` run on your system (as bpftrace frequently breaks on every new version, please test master too if it should't work for you)? Do the CI interface tests still pass?\r\n- Is the new documentation clear? \r\n- The `TRACEPOINT_SEMAPHORE(event, context)` macros places global variables in our global namespace. Is this something we strictly want to avoid or maybe move to all `TRACEPOINT_SEMAPHORE`s to a separate .cpp file or even namespace? I like having the `TRACEPOINT_SEMAPHORE()` in same file as the `TRACEPOINT()`, but open for suggestion on alternative approaches. \r\n- Are newly added tracepoints in the unit tests visible when using `readelf -n build/src/test/test_bitcoin`? You can run the new unit tests with `./build/src/test/test_bitcoin --run_test=util_trace_tests* --log_level=all`.\r\n<details><summary>Two of the added unit tests demonstrate that we are only processing the tracepoint arguments when attached by having a test-failure condition in the tracepoint argument preparation. The following bpftrace script can be used to demonstrate that the tests do indeed fail when attached to the tracepoints.</summary>\r\n\r\n`fail_tests.bt`:\r\n\r\n```c\r\n#!/usr/bin/env bpftrace\r\n\r\nusdt:./build/src/test/test_bitcoin:test:check_if_attached {\r\n  printf(\"the 'check_if_attached' test should have failed\\n\");\r\n}\r\n\r\nusdt:./build/src/test/test_bitcoin:test:expensive_section {\r\n  printf(\"the 'expensive_section' test should have failed\\n\");\r\n}\r\n```\r\n\r\nRun the unit tests with `./build/src/test/test_bitcoin` and start `bpftrace fail_tests.bt -p $(pidof test_bitcoin)` in a separate terminal. The unit tests should fail with:\r\n\r\n```\r\nRunning 594 test cases...\r\ntest/util_trace_tests.cpp(31): error: in \"util_trace_tests/test_tracepoint_check_if_attached\": check false has failed\r\ntest/util_trace_tests.cpp(51): error: in \"util_trace_tests/test_tracepoint_manual_tracepoint_active_check\": check false has failed\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n```\r\n\r\n</details>\r\n\r\nThese links might provide more contextual information for reviewers:\r\n- [How SystemTap Userspace Probes Work by eklitzke](https://eklitzke.org/how-sytemtap-userspace-probes-work) (actually an example on Bitcoin Core; mentions that with semaphores \"the overhead for an untraced process is effectively zero.\")\r\n- [libbpf comment on USDT semaphore handling](https://github.com/libbpf/libbpf/blob/1596a09b5de2a50ab8d44218fc29b6d42f886305/src/usdt.c#L83-L92) (can recommend the whole comment for background on how the tracepoints and tracing tools work together)\r\n- https://sourceware.org/systemtap/wiki/UserSpaceProbeImplementation#Semaphore_Handling",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2022-11-28T20:50:26Z",
      "updated_at": "2025-11-11T12:08:15Z",
      "merged_at": "2024-11-11T10:33:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26593",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4059,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 812583988,
      "number": 23931,
      "title": "create bitcoin.conf on first run with template",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/10746 and https://github.com/bitcoin/bitcoin/issues/19641\r\n\r\n### What?\r\n\r\nCreate bitcoin.conf on first run with a template added as comments. Can add/remove things based on feedback.\r\n\r\n### Why?\r\n\r\n`bitcoind` can already create bitcoin.conf if a user runs below command on first startup:\r\n\r\n```\r\nbitcoind -startupnotify=\"touch path/bitcoin.conf\"\r\n```\r\n\r\n`bitcoin-qt` can already create blank bitcoin.conf if a user can find this option after starting Bitcoin Core for the first time:\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/147852412-af3a4025-5920-42c6-be6d-abbbb6dffc52.png)\r\n\r\nThis pull request improves UX when using `bitcoind`.\r\n\r\n### How?\r\n\r\nUsed most of the code from https://github.com/bitcoin/bitcoin/pull/13761/ (will add Alexander Leishman as co-author if I could get the email address)\r\n\r\nTemplate is changed and I have used bitcoin.conf (privacy) template from https://github.com/jlopp/bitcoin-core-config-generator/\r\n",
      "state": "closed",
      "user": "ghost",
      "created_at": "2022-01-01T14:21:25Z",
      "updated_at": "2025-11-11T12:08:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/23931",
      "labels": [
        "Build system",
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1048,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1311275179,
      "number": 27454,
      "title": "doc: remove incorrect line from example",
      "body": "Inputs are always present when using `walletcreatefundedpsbt`",
      "state": "closed",
      "user": "ghost",
      "created_at": "2023-04-12T18:08:03Z",
      "updated_at": "2025-11-11T12:08:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27454",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 101,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2167413793,
      "number": 31239,
      "title": "test: clarify log messages when handling SOCKS5 proxy connections",
      "body": "Clarify log messages when handling SOCKS5 proxy connections.\r\n\r\nSuggested in https://github.com/bitcoin/bitcoin/pull/29420#discussion_r1815521913\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2024-11-07T13:24:08Z",
      "updated_at": "2025-11-11T12:08:13Z",
      "merged_at": "2024-11-11T14:08:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31239",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2147457679,
      "number": 31163,
      "title": "scripted-diff: get rid of remaining \"command\" terminology in protocol.{h,cpp}",
      "body": "The confusing \"command\" terminology for the 12-byte field in the (v1) p2p message header was replaced with the more proper term \"message type\" in other modules already years ago, see eg #18533, #18937, #24078, #24141. This PR does the same for the protocol.{h,cpp} module to complete the replacements. Note that \"GetCommand\" is a method name also used in the `ArgsManager` (there it makes much more sense), so the scripted-diff lists for this replacement the files explicitly, rather than using `$(git grep -l ...)`.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2024-10-26T22:02:36Z",
      "updated_at": "2025-11-11T12:08:13Z",
      "merged_at": "2024-11-11T10:54:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31163",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 594,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168457075,
      "number": 31253,
      "title": "doc: fix typos",
      "body": "There are some typos in the code comments and use this change to update them\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "threewebcode",
      "created_at": "2024-11-07T23:19:00Z",
      "updated_at": "2025-11-11T12:08:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31253",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2157,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2170911419,
      "number": 31264,
      "title": "doc: Fixup bitcoin-wallet manpage chain selection args",
      "body": "The sentence is missing `-testnet4` and `-chain`. Instead of duplicating the full list (and having to keep it in sync), just refer to them as `(test)chain selection arguments`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-09T12:39:38Z",
      "updated_at": "2025-11-11T12:08:11Z",
      "merged_at": "2024-11-11T10:58:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31264",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 231,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2170225593,
      "number": 31257,
      "title": "ci: make ctest stop on failure",
      "body": "Make `ctest` stops when the first failure happens.\r\nWasting less resources and notifying the developer faster when a failure occurs.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2024-11-08T18:12:21Z",
      "updated_at": "2025-11-11T12:08:11Z",
      "merged_at": "2024-11-11T10:49:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31257",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 163,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2989364777,
      "number": 33820,
      "title": "kernel: trim Chain interface",
      "body": "Removes `btck_chain_get_genesis` and `btck_chain_get_tip`. \r\n\r\nThey are trivially replaced with `btck_chain_get_by_height` (as indicated in the updated `bitcoinkernel_wrapper.h`), so I think it makes sense to trim the interface. \r\n\r\nFor `btck_chain_get_tip`: on `master` we don't provide any guarantees that the returned block index still corresponds to the actual tip, so the extra call doesn't seem like a regression to me.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-11-07T16:50:57Z",
      "updated_at": "2025-11-11T11:40:41Z",
      "merged_at": "2025-11-11T09:52:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33820",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 454,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2998530144,
      "number": 33849,
      "title": "Gpt/asmap tests",
      "body": "## Motivation\r\nAdd direct Boost unit tests for the asmap interpreter and validator so regressions in ASN bucketing are caught earlier. Existing coverage relied on indirect behavior through addrman tests; these new cases exercise `Interpret` and `SanityCheckASMap` without large fixtures.\r\n\r\n## Changes\r\n- Introduce `src/test/asmap_tests.cpp` with helpers to synthesize compact asmap programs and five focused tests:\r\n  - verifies match vs default routing\r\n  - rejects tables missing a `RETURN`\r\n  - rejects `DEFAULT` immediately followed by `RETURN`\r\n  - enforces sufficient address-bit budgets\r\n  - rejects over-padded programs\r\n- Register the suite in `src/test/CMakeLists.txt`.\r\n\r\n## Testing\r\n- `cmake -S . -B build -G \"Unix Makefiles\" -DENABLE_IPC=OFF`\r\n- `cmake --build build --target test_bitcoin`\r\n- `build/bin/test_bitcoin --run_test=asmap_tests`",
      "state": "closed",
      "user": "AminMemariani",
      "created_at": "2025-11-11T10:38:03Z",
      "updated_at": "2025-11-11T11:07:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33849",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 870,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2522503555,
      "number": 32517,
      "title": "rpc: add \"ischange: true\" to decoded tx outputs in wallet gettransaction response",
      "body": "This change is motivated by external RBF clients like https://github.com/CardCoins/additive-rbf-batcher/. It saves the user a redundant re-looping of tx outputs, calling `getaddressinfo` on each one, looking for the change output in order to adjust the fee.\r\n\r\nThe field `\"ischange\"` only appears when `gettransaction` is called on a wallet, and is either `true` or not present at all. I chose not to include `ischange: false` because it is confusing to see that on *received* transactions.\r\n\r\nExample of the new field:\r\n\r\n```\r\n    \"vout\": [\r\n      {\r\n        \"value\": 1.00000000,\r\n        \"n\": 0,\r\n        \"scriptPubKey\": {\r\n          \"asm\": \"0 5483235e05c76273b3b50af62519738781aff021\",\r\n          \"desc\": \"addr(bcrt1q2jpjxhs9ca388va4ptmz2xtns7q6lupppkw7wu)#d42g84j6\",\r\n          \"hex\": \"00145483235e05c76273b3b50af62519738781aff021\",\r\n          \"address\": \"bcrt1q2jpjxhs9ca388va4ptmz2xtns7q6lupppkw7wu\",\r\n          \"type\": \"witness_v0_keyhash\"\r\n        }\r\n      },\r\n      {\r\n        \"value\": 198.99859000,\r\n        \"n\": 1,\r\n        \"scriptPubKey\": {\r\n          \"asm\": \"0 870ab1ab58632b05a417d5295f4038500e407592\",\r\n          \"desc\": \"addr(bcrt1qsu9tr26cvv4stfqh65547spc2q8yqavj7fnlju)#tgapemkv\",\r\n          \"hex\": \"0014870ab1ab58632b05a417d5295f4038500e407592\",\r\n          \"address\": \"bcrt1qsu9tr26cvv4stfqh65547spc2q8yqavj7fnlju\",\r\n          \"type\": \"witness_v0_keyhash\"\r\n        },\r\n        \"ischange\": true\r\n      }\r\n    ]\r\n\r\n```",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-05-15T15:40:28Z",
      "updated_at": "2025-11-11T09:21:58Z",
      "merged_at": "2025-11-10T16:58:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32517",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1517,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2845918151,
      "number": 33443,
      "title": "log: reduce excessive \"rolling back/forward\" messages during block replay",
      "body": "### Summary\r\nAfter an incomplete reindex the blocks will need to be replayed.\r\nThis results in excessive `Rolling back` and `Rolling forward` messages which quickly triggers the recently introduced log rate limiter.\r\n\r\nChange the logging strategy to:\r\n- Add single `LogInfo` messages showing the full range being replayed for both rollback and roll forward;\r\n- Log progress at `LogInfo` level only every 10,000 blocks to track the long operations.\r\n\r\n### Reproducer:\r\n* Start a normal ibd, stop after some progress\r\n* Do a reindex, stop before it finishes\r\n* Restart the node normally without specifying the reindex parameter\r\nIt should start rolling the blocks forward.\r\n\r\nBefore this change the excessive logging would show:\r\n```\r\n[*] Rolling forward 000000002f4f55aecfccc911076dc3f73ac0288c83dc1d79db0a026441031d40 (46245)\r\n[*] Rolling forward 0000000017ffcf34c8eac010c529670ba6745ea59cf1edf7b820928e3b40acf6 (46246)\r\n```\r\n\r\nAfter the change it shows:\r\n```\r\nReplaying blocks\r\nRolling forward to 00000000000000001034012d7e4facaf16ca747ea94b8ea66743086cfe298ef8 (326223 to 340991)\r\nRolling forward 00000000000000000faabab19f17c0178c754dbed023e6c871dcaf74159c5f02 (330000)\r\nRolling forward 00000000000000000d9b2508615d569e18f00c034d71474fc44a43af8d4a5003 (340000)\r\n...\r\nRolled forward to 00000000000000001034012d7e4facaf16ca747ea94b8ea66743086cfe298ef8\r\n```\r\n(similarly to rolling back)",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-09-20T05:56:12Z",
      "updated_at": "2025-11-10T17:17:35Z",
      "merged_at": "2025-11-10T16:28:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33443",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1460,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2687266505,
      "number": 33042,
      "title": "refactor: inline constant return values from `dbwrapper` write methods",
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/31144#discussion_r2223587480\r\n\r\n### Summary\r\n`WriteBatch` always returns `true` - the errors are handled by throwing `dbwrapper_error` instead.\r\n\r\n### Context\r\nThis boolean return value of the `Write` methods is confusing because it's inconsistent with `CDBWrapper::Read`, which catches exceptions and returns a boolean to indicate success/failure. It's bad that `Read` returns and `Write` throws - but it's a lot worse that `Write` advertises a return value when it actually communicates errors through exceptions.\r\n\r\n### Solution\r\nThis PR removes the constant return values from write methods and inlines `true` at their call sites. Many upstream methods had boolean return values only because they were propagating these constants - those have been cleaned up as well.\r\n\r\nMethods that returned a constant `true` value that now return `void`:\r\n- `CDBWrapper::WriteBatch`, `CDBWrapper::Write`, `CDBWrapper::Erase`\r\n- `TxIndex::DB::WriteTxs`\r\n- `BlockTreeDB::WriteReindexing`, `BlockTreeDB::WriteBatchSync`, `BlockTreeDB::WriteFlag`\r\n- `BlockManager::WriteBlockIndexDB`\r\n\r\n### Note\r\n`CCoinsView::BatchWrite` (and transitively `CCoinsViewCache::Flush` & `CCoinsViewCache::Sync`) were intentionally not changed here. While all implementations return `true`, the base `CCoinsView::BatchWrite` returns `false`. Changing this would cause `coins_view` tests to fail with:\r\n> terminating due to uncaught exception of type std::logic_error: Not all unspent flagged entries were cleared\r\n\r\nWe can fix that in a follow-up PR.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-07-23T02:14:48Z",
      "updated_at": "2025-11-10T17:17:05Z",
      "merged_at": "2025-11-10T17:16:08Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33042",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1637,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2995704771,
      "number": 33843,
      "title": "test: add tests for private broadcast",
      "body": "This PR contains https://github.com/bitcoin/bitcoin/pull/29415 + two more commits that add functional and fuzz tests.\r\n\r\nPutting those in a separate PR not to burden the main one, since the tests are extensive:\r\ncode: `1036 insertions(+), 91 deletions(-)`\r\ntests: `548 insertions(+), 5 deletions(-)`\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-11-10T15:15:19Z",
      "updated_at": "2025-11-10T15:46:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33843",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 339,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2885428088,
      "number": 33536,
      "title": "doc: reference fuzz coverage steps in quick-start",
      "body": "Adds a single comment in the libFuzzer quick-start that links to the Developer Notes coverage section. No build flags are changed or shown.",
      "state": "closed",
      "user": "frankomosh",
      "created_at": "2025-10-03T15:57:31Z",
      "updated_at": "2025-11-10T15:07:21Z",
      "merged_at": "2025-11-10T10:14:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33536",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 189,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1859416450,
      "number": 30059,
      "title": "Add option dbfilesize to control LevelDB target (\"max\") file size",
      "body": "Debug option to control LevelDB file sizes. Since LevelDB seems to always overshoot, \"max\" didn't seem fitting.\r\n\r\nIntended to be followed up with a change to the default in a rebased #30039",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2024-05-08T04:06:11Z",
      "updated_at": "2025-11-10T14:53:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30059",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 256,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2842232934,
      "number": 33433,
      "title": "test: rpc_bind: Skip nonloopback test if no such address is found",
      "body": "Without this, I get:\r\n\r\n```\r\n2025-09-19T03:14:05.157000Z TestFramework (INFO): PRNG seed is: 3218602557639511064\r\n2025-09-19T03:14:05.158000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin-test/a\r\n2025-09-19T03:14:05.158000Z TestFramework (INFO): Check for ipv6\r\n2025-09-19T03:14:05.158000Z TestFramework (INFO): Check for non-loopback interface\r\n2025-09-19T03:14:05.158000Z TestFramework (INFO): Bind test for []\r\n2025-09-19T03:14:05.516000Z TestFramework (INFO): Bind test for []\r\n2025-09-19T03:14:05.871000Z TestFramework (INFO): Bind test for ['[::1]']\r\n2025-09-19T03:14:06.227000Z TestFramework (INFO): Bind test for ['127.0.0.1', '[::1]']\r\n2025-09-19T03:14:06.583000Z TestFramework (INFO): Using interface None for testing\r\n2025-09-19T03:14:06.583000Z TestFramework (INFO): Bind test for [None]\r\n2025-09-19T03:14:06.583000Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/Bitcoin/bitcoin/workingtree/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n    ~~~~~~~~~~~~~^^\r\n  File \"/Bitcoin/bitcoin/workingtree/test/functional/rpc_bind.py\", line 126, in run_test\r\n    self._run_nonloopback_tests()\r\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\r\n  File \"/Bitcoin/bitcoin/workingtree/test/functional/rpc_bind.py\", line 157, in _run_nonloopback_tests\r\n    self.run_bind_test([self.non_loopback_ip], self.non_loopback_ip, [self.non_loopback_ip],\r\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        [(self.non_loopback_ip, self.defaultport)])\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Bitcoin/bitcoin/workingtree/test/functional/rpc_bind.py\", line 38, in run_bind_test\r\n    expected = [(addr_to_hex(addr), port) for (addr, port) in expected]\r\n                 ~~~~~~~~~~~^^^^^^\r\n  File \"/Bitcoin/bitcoin/workingtree/test/functional/test_framework/netutil.py\", line 132, in addr_to_hex\r\n    if '.' in addr: # IPv4\r\n       ^^^^^^^^^^^\r\nTypeError: argument of type 'NoneType' is not iterable\r\n```",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2025-09-19T03:15:27Z",
      "updated_at": "2025-11-10T14:52:32Z",
      "merged_at": "2025-11-10T14:52:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33433",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2117,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2991356993,
      "number": 33825,
      "title": "refactor: Add missing include in bitcoinkernel_wrapper.h",
      "body": "Otherwise, the compilation may fail with:\r\n\r\n\r\n```\r\n/home/admin/actions-runner/_work/_temp/src/kernel/bitcoinkernel_wrapper.h:271:14: error: no type named 'exception_ptr' in namespace 'std'; did you mean 'exception'?\r\n  271 |         std::exception_ptr exception;\r\n      |         ~~~~~^~~~~~~~~~~~~\r\n      |              exception\r\n/cxx_build/include/c++/v1/__exception/exception.h:72:33: note: 'exception' declared here\r\n   72 | class _LIBCPP_EXPORTED_FROM_ABI exception {\r\n      |                                 ^\r\nIn file included from /home/admin/actions-runner/_work/_temp/src/bitcoin-chainstate.cpp:1:\r\n/home/admin/actions-runner/_work/_temp/src/kernel/bitcoinkernel_wrapper.h:284:35: error: no member named 'current_exception' in namespace 'std'\r\n  284 |             data.exception = std::current_exception();\r\n      |                                   ^~~~~~~~~~~~~~~~~\r\n/home/admin/actions-runner/_work/_temp/src/kernel/bitcoinkernel_wrapper.h:290:14: error: no member named 'rethrow_exception' in namespace 'std'\r\n  290 |         std::rethrow_exception(user_data.exception);\r\n      |              ^~~~~~~~~~~~~~~~~\r\n/home/admin/actions-runner/_work/_temp/src/kernel/bitcoinkernel_wrapper.h:273:65: error: no viable conversion from 'std::nullptr_t' to 'std::exception'\r\n  273 |     UserData user_data = UserData{.bytes = &bytes, .exception = nullptr};\r\n      |                                                                 ^~~~~~~\r\n/home/admin/actions-runner/_work/_temp/src/kernel/bitcoinkernel_wrapper.h:733:16: note: in instantiation of function template specialization 'btck::write_bytes<btck_Block>' requested here\r\n  733 |         return write_bytes(get(), btck_block_to_bytes);\r\n      |                ^\r\n/cxx_build/include/c++/v1/__exception/exception.h:75:25: note: candidate constructor not viable: no known conversion from 'std::nullptr_t' to 'const exception &' for 1st argument\r\n   75 |   _LIBCPP_HIDE_FROM_ABI exception(const exception&) _NOEXCEPT            = default;\r\n      |                         ^         ~~~~~~~~~~~~~~~~\r\n4 errors generated.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-08T11:33:11Z",
      "updated_at": "2025-11-10T14:06:10Z",
      "merged_at": "2025-11-08T14:45:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33825",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2134,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2991092261,
      "number": 33823,
      "title": "ci: Use cmake --preset=dev-mode in test-each-commit task",
      "body": "Using the preset should reduce the bloat and need to maintain several places to list the same cmake cache variables.\r\n\r\nThe only difference should be that `bitcoin-chainstate (experimental)` will be enabled, which seems fast and in line with the goal of the CI task.\r\n\r\n* Before: https://github.com/bitcoin/bitcoin/actions/runs/19174075826/job/54814118651#step:8:315\r\n* After: (this pull) https://github.com/bitcoin/bitcoin/actions/runs/19190748069/job/54864837086#step:7:324\r\n\r\n```diff\r\n   bitcoin-tx .......................... ON\r\n   bitcoin-util ........................ ON\r\n   bitcoin-wallet ...................... ON\r\n-  bitcoin-chainstate (experimental) ... OFF\r\n+  bitcoin-chainstate (experimental) ... ON\r\n   libbitcoinkernel (experimental) ..... ON\r\n   kernel-test (experimental) .......... ON\r\n Optional features:\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-08T08:37:47Z",
      "updated_at": "2025-11-10T13:28:20Z",
      "merged_at": "2025-11-10T10:09:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33823",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 882,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2991696495,
      "number": 33827,
      "title": "doc: Correct `pkgin` command usage on NetBSD",
      "body": "When using `pkgin` on NetBSD, the `install` command must be specified.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-08T19:10:43Z",
      "updated_at": "2025-11-10T11:15:00Z",
      "merged_at": "2025-11-10T10:29:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33827",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 115,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2991594693,
      "number": 33826,
      "title": "scripted-diff: Remove obsolete comment",
      "body": "The removed comment become obsolete after bitcoin/bitcoin#32697 and bitcoin/bitcoin#32881.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-08T16:48:39Z",
      "updated_at": "2025-11-10T11:14:36Z",
      "merged_at": "2025-11-10T10:59:58Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33826",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 129,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2989411320,
      "number": 33821,
      "title": "guix: build glibc with `--enable-static-pie`",
      "body": "From the glibc `2.27` release notes:\r\n\r\n> Major new features:\r\n> The GNU C Library can now be compiled with support for building static\r\n> PIE executables (See --enable-static-pie in INSTALL).\r\n> These static PIE executables are like static executables but can be\r\n> loaded at any address and provide additional security hardening benefits\r\n> at the cost of some memory and performance.  When the library is built with\r\n> --enable-static-pic the resulting libc.a is usable with GCC 8 and above to\r\n> create static PIE executables using the GCC option '-static-pie'. This\r\n> feature is currently supported on i386, x86_64 and x32 with binutils\r\n> 2.29 or later, and on aarch64 with binutils 2.30 or later.\r\n\r\nNote that from glibc 2.35 onwards, this option is replaced with a `--disable-*` variant, as glibc started defaulting to this behaviour.\r\n\r\nThis not give us `-static-pie` release binaries, that requires further changes, see #25573. This change makes it easier to experiment with the current release glibc, by being able to just use `-static-pie`, and not rebuild the toolchain.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-07T17:04:00Z",
      "updated_at": "2025-11-10T10:32:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33821",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1129,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992933239,
      "number": 33836,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "777genius",
      "created_at": "2025-11-09T18:16:42Z",
      "updated_at": "2025-11-10T09:38:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33836",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992932158,
      "number": 33835,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "777genius",
      "created_at": "2025-11-09T18:15:04Z",
      "updated_at": "2025-11-10T09:38:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33835",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992931557,
      "number": 33834,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "777genius",
      "created_at": "2025-11-09T18:14:09Z",
      "updated_at": "2025-11-10T09:38:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33834",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992898518,
      "number": 33833,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "777genius",
      "created_at": "2025-11-09T17:36:00Z",
      "updated_at": "2025-11-10T09:38:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33833",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992863693,
      "number": 33832,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "777genius",
      "created_at": "2025-11-09T17:04:02Z",
      "updated_at": "2025-11-10T09:38:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33832",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2913595315,
      "number": 33622,
      "title": "docs: add doc comment for SRD selection algorithm",
      "body": "The params documentation is missing `change_fee` and the description is lacking recent changes.",
      "state": "open",
      "user": "yancyribbens",
      "created_at": "2025-10-14T13:05:59Z",
      "updated_at": "2025-11-09T12:45:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33622",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 145,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2156833270,
      "number": 31198,
      "title": "init: warn, don't error, when '-upnp' is set",
      "body": "It prevented the GUI from starting when its settings.json had the -upnp option set. This also doesn't prevent the node from running, so this error didn't need to be fatal.\r\n\r\nThanks to Sjors for bringing attention to what i broke and to Maflcko for suggesting a simple short term fix.\r\n\r\nFixes https://github.com/bitcoin-core/gui/issues/843.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2024-10-31T18:10:38Z",
      "updated_at": "2025-11-09T12:07:21Z",
      "merged_at": "2024-11-01T21:15:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31198",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2170742927,
      "number": 31261,
      "title": "doc: Clarify GUI Compilation Instructions for Qt Libraries in build-n…",
      "body": "This PR updates build-netbsd.md to improve clarity regarding the installation of Qt libraries for GUI compilation.\r\n\r\nThis small change enhances clarity for developers by ensuring that instructions for Qt installation and the GUI build option are more explicit, especially for those less familiar with the process on NetBSD.",
      "state": "closed",
      "user": "secp512k2",
      "created_at": "2024-11-09T03:49:19Z",
      "updated_at": "2025-11-09T12:07:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31261",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992165669,
      "number": 33830,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "lancemitchell157-maker",
      "created_at": "2025-11-09T03:12:01Z",
      "updated_at": "2025-11-09T10:16:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33830",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2992167905,
      "number": 33831,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "lancemitchell157-maker",
      "created_at": "2025-11-09T03:16:57Z",
      "updated_at": "2025-11-09T10:16:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33831",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1461246047,
      "number": 28209,
      "title": "fuzz: a target for the block index database",
      "body": "This introduces a small fuzz target for `CBlockTreeDB` which asserts a few invariants by using an in-memory LevelDb.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2023-08-03T10:50:36Z",
      "updated_at": "2025-11-08T12:07:01Z",
      "merged_at": "2024-08-12T20:07:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28209",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 160,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1594490491,
      "number": 28832,
      "title": "fuzz: rule-out too deep derivation paths in descriptor parsing targets",
      "body": "This fixes the `mocked_descriptor_parse` timeout reported in #28812 and direct the targets more toward what they are intended to fuzz: the descriptor syntax.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2023-11-09T14:08:45Z",
      "updated_at": "2025-11-08T12:07:00Z",
      "merged_at": "2024-01-04T23:10:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28832",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 228,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2169792478,
      "number": 31256,
      "title": "feature: RPC show decompiled P2SH redeemScript and P2WSH witnessScript",
      "body": "Closes #27391\r\n\r\nAdd support for displaying the (decompiled) P2SH redeemScript and P2WSH \r\nwitnessScript when calling `getrawtransaction and getblock....2.`\r\n\r\n\r\nI used this [guide](https://naiyoma.github.io/) to create transactions and below are outputs from p2sh/p2wsh , getrawtransaction and getblock 2 on regtest \r\n```\r\nbitcoin-cli -regtest getrawtransaction $TXID 1 | jq -r '.vin[].redeemScript.asm                                                     \r\n\r\n2 0332df518c53eba135966d45b350e7a9bbf9844ff76178f7434812ea277a006ee7 02380145a5ab10584c43e324946f1e655d41d873a35a01b1c18f2d95150d4f253d 03da394f90dc7c340583ecd3ffb18e219e369134e27a87c9f2eeb121d52e249c49 3 OP_CHECKMULTISIG\r\n\r\n```\r\n```\r\n bitcoin-cli getblock 5b9438aef225b1924603a390a6cebff661379ff9f23715ba200670f3fa2fc100 2 | jq -r '.tx[].vin[].redeemScript.asm'\r\nnull\r\n2 0332df518c53eba135966d45b350e7a9bbf9844ff76178f7434812ea277a006ee7 02380145a5ab10584c43e324946f1e655d41d873a35a01b1c18f2d95150d4f253d 03da394f90dc7c340583ecd3ffb18e219e369134e27a87c9f2eeb121d52e249c49 3 OP_CHECKMULTISIG\r\n\r\n```\r\n```\r\n bitcoin-cli getrawtransaction 804dcb275503d0fbdf1b44725437e4b3e30f7d537e05ab4931c7e5de41a6992c true | jq -r '.vin[].witnessScript.asm'\r\n-5183226 0 5 OP_UNKNOWN OP_LSHIFT OP_UNKNOWN OP_INVERT OP_RIGHT OP_2MUL OP_IFDUP OP_UNKNOWN OP_UNKNOWN OP_LESSTHAN [error]\r\n\r\n```\r\n```\r\nbitcoin-cli getblock 38bca65f708b9bd4b110a1c9a9595c1b85d80383e49e2266bbe277bd72d8d0b4 2 | jq -r '.tx[].vin[].witnessScript.asm'\r\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\r\n-5183226 0 5 OP_UNKNOWN OP_LSHIFT OP_UNKNOWN OP_INVERT OP_RIGHT OP_2MUL OP_IFDUP OP_UNKNOWN OP_UNKNOWN OP_LESSTHAN [error]\r\n\r\n```\r\n",
      "state": "closed",
      "user": "naiyoma",
      "created_at": "2024-11-08T14:34:36Z",
      "updated_at": "2025-11-08T12:06:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31256",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1734,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2169281069,
      "number": 31255,
      "title": "contrib: correct default build path in man pages",
      "body": "The `gen-manpages.py` script is unable to find\r\nthe executables because it tries to search in\r\n`/bitcoin/src` when no custom `BUILDDIR` is set.\r\nWith the new build process in place, the default\r\nbuild dir is now set to `/bitcoin/build`.\r\n\r\nPrior to this change, the script stopped with a\r\n`not found or not an executable` error. Now it\r\ngenerates the man pages without needing to\r\nexplicitly set `BUILDDIR` variable.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2024-11-08T10:16:08Z",
      "updated_at": "2025-11-08T12:06:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31255",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2531,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 828540335,
      "number": 24123,
      "title": "guix: Pointer Authentication and Branch Target Identification for aarch64 Linux",
      "body": "Arm Pointer Authentication (PAC) is a method of hardening code from Return Oriented Programming (ROP) attacks. It uses a tag in a pointer to sign and verify pointers. Branch Target Identification (BTI) is another code hardening method, where the branch/jump target is identified with a special landing pad instruction. Outside of some system support in glibc+kernel, packages gain the additional hardening by compiling with the `-mbranch-protection=flag` available in recent versions of GCC. In particular [-mbranch-protection=standard](https://gcc.gnu.org/onlinedocs/gcc-9.1.0/gcc/AArch64-Options.html) enables both BTI and PAC, with backwards compatible to `armv8.0` code sequences that activate on `v8.3` (PAC) & `v8.5` (BTI) enabled Arm machines. ([taken from Fedora](https://fedoraproject.org/wiki/Changes/Aarch64_PointerAuthentication)). \r\n\r\nCreation of a BTI enabled binary also requires that everything being linked in be BTI enabled. This means you currently cannot, for example, cross-compile using a Ubuntu based aarch64 toolchain, if you're wanting to use this feature. This can be shown using `-Wl,z,force-bti`, which will emit warnings for linked objects that are not BTI enabled (this is used in configure to detect when to disable using the flags). i.e:\r\n```cpp\r\nint main() { return 0; }\r\n```\r\n\r\n```bash\r\n# aarch64-linux-gnu-g++ (Ubuntu 13.2.0-23ubuntu4) 13.2.0\r\naarch64-linux-gnu-g++ test.cpp -mbranch-protection=standard -Wl,-z,force-bti\r\n/usr/lib/gcc-cross/aarch64-linux-gnu/13/../../../../aarch64-linux-gnu/bin/ld: /usr/lib/gcc-cross/aarch64-linux-gnu/13/../../../../aarch64-linux-gnu/lib/../lib/Scrt1.o: warning: BTI turned on by -z force-bti when all inputs do not have BTI in NOTE section.\r\n```\r\n\r\nCloses #19075.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2022-01-21T13:43:03Z",
      "updated_at": "2025-11-07T21:53:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24123",
      "labels": [
        "Linux/Unix",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1815,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2602754583,
      "number": 32773,
      "title": "cmake: Create subdirectories in build tree in advance",
      "body": "While reviewing https://github.com/bitcoin/bitcoin/pull/32697, I noticed that symlink creation fails when the target subdirectory does not exist. In such cases, `file(CREATE_LINK ... COPY_ON_ERROR SYMBOLIC)` falls back to copying, which implicitly creates the required path. As a result, a single file is copied instead of symlinked for subdirectories in `test/functional`. \r\n\r\nThis PR ensures that necessary subdirectories are created in advance, so that subsequent symlink creation does not fail due to missing paths.\r\n\r\nFor example:\r\n- on the master branch:\r\n```\r\n$ cmake -B build\r\n$ ls -l build/test/functional/mocks/\r\ntotal 8\r\n-rwxrwxr-x 1 hebasto hebasto 2683 Jul  3 14:11 invalid_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto   64 Jul  3 14:11 multi_signers.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/multi_signers.py\r\nlrwxrwxrwx 1 hebasto hebasto   60 Jul  3 14:11 no_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/no_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto   57 Jul  3 14:11 signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/signer.py\r\n```\r\n- with this PR:\r\n```\r\n$ cmake -B build\r\n$ ls -l build/test/functional/mocks/\r\ntotal 4\r\nlrwxrwxrwx 1 hebasto hebasto 65 Jul  3 13:51 invalid_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/invalid_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto 64 Jul  3 13:51 multi_signers.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/multi_signers.py\r\nlrwxrwxrwx 1 hebasto hebasto 60 Jul  3 13:51 no_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/no_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto 57 Jul  3 13:51 signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/signer.py\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-06-18T19:52:41Z",
      "updated_at": "2025-11-07T17:22:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32773",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1728,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2988488555,
      "number": 33818,
      "title": "ci: Extend tidy job to cover kernel code",
      "body": "",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-07T12:44:46Z",
      "updated_at": "2025-11-07T15:31:57Z",
      "merged_at": "2025-11-07T15:28:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33818",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 41,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2979468966,
      "number": 33789,
      "title": "doc: add cmake help option in Windows build docs",
      "body": "Follow-up to #33088.\r\n\r\nAdds `cmake -B build -LH` documentation to Windows build guides, similar to Unix build documentation.\r\n\r\nBased on the suggestion and example provided by stickies-v in #33088, with minor adjustment to match existing indented code block format in `build-windows.md`.\r\n\r\nTested for:\r\n- WSL Ubuntu with mingw-w64 cross-compilation  \r\n- Windows 11 with Visual Studio 2022 (MSVC)",
      "state": "closed",
      "user": "frankomosh",
      "created_at": "2025-11-05T08:28:39Z",
      "updated_at": "2025-11-07T14:19:24Z",
      "merged_at": "2025-11-07T11:05:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33789",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 446,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2507676519,
      "number": 32450,
      "title": "randomenv: remove some `/proc/` accesses",
      "body": "Any env data we try and gather is on a best-effort basis, however in this instance, for multiple users, it's just producing spam. This could probably be solved with further snap/apparmor configuration, however given that no-one is actively working on snap packaging, we could instead drop this source of env data.\r\n\r\nCloses https://github.com/bitcoin-core/packaging/issues/115.\r\nAlso in https://github.com/bitcoin-core/packaging/issues/217.\r\n\r\nHappy to close this if someone opens an alternative PR (in https://github.com/bitcoin-core/packaging) fixing the Snap AppArmor configuration.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-08T17:20:57Z",
      "updated_at": "2025-11-07T12:51:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32450",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 626,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2977311704,
      "number": 33778,
      "title": "depends: add zeromq patch to fix mingw CMake file install location",
      "body": "Currently the zeromq CMake files for mingw are installed to `x86_64-w64-mingw32/CMake`, when they should be in `x86_64-w64-mingw32/lib/cmake`, so take the patch from upstream that puts them in the right place. Noticed this while looking at other depends changes, that might cleanup / remove dirs.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-04T16:37:18Z",
      "updated_at": "2025-11-07T12:49:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33778",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 363,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2978089433,
      "number": 33786,
      "title": "script: remove dead code in `CountWitnessSigOps`",
      "body": "Found while reviewing #32840\r\n\r\nThe `nullptr` witness path was dead in normal code paths: replacing it with reference enables us deleting unreachable logic.\r\n\r\nCode coverage proof:\r\nhttps://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html#L2135",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-04T21:53:12Z",
      "updated_at": "2025-11-07T12:47:30Z",
      "merged_at": "2025-11-07T12:46:52Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33786",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 322,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1720986775,
      "number": 29420,
      "title": "test: extend the SOCKS5 Python proxy to actually connect to a destination",
      "body": "If requested, make the SOCKS5 Python proxy redirect connections to a set of given destinations. Actually act as a real proxy, connecting the client to a destination, except that the destination is not what the client asked for.\r\n\r\nThis would enable us to \"connect\" to Tor addresses from the functional tests.\r\n\r\nPlus a few other minor improvements in the test framework as individual commits.\r\n\r\n---\r\n\r\nThese changes are part of https://github.com/bitcoin/bitcoin/pull/29415 but they make sense on their own and would be good to have them, regardless of the fate of #29415. Also, if this is merged, that would reduce the size of #29415, thus the current standalone PR.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2024-02-11T15:30:32Z",
      "updated_at": "2025-11-07T12:06:34Z",
      "merged_at": "2024-10-29T19:32:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29420",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 742,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1801225875,
      "number": 29782,
      "title": "doc: Update the developer mailing list address.",
      "body": "The developer mailing list was migrated to Google Groups in February 2024 as announced in https://groups.google.com/g/bitcoindev/c/aewBuV6k-LI.\r\n\r\nIn this patch, I decided to add a link to the [archives maintained by the Linux Foundation](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/) as linked in the [old mailing list page](https://lists.linuxfoundation.org/mailman/listinfo/bitcoin-dev).\r\n\r\nA reasonable alternative would be link to the [new archives](https://gnusha.org/pi/bitcoindev/) linked in the [migration announcement message](https://groups.google.com/g/bitcoindev/c/aewBuV6k-LI). I'm not sure about the status of the archive migration, probably the old archives are more comprehensive to this date.\r\n",
      "state": "closed",
      "user": "edilmedeiros",
      "created_at": "2024-04-01T21:21:21Z",
      "updated_at": "2025-11-07T12:06:33Z",
      "merged_at": "2024-04-03T08:45:15Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29782",
      "labels": [
        "Docs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 772,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1999641111,
      "number": 30570,
      "title": "[tests] New fuzz target wallet_rpc",
      "body": "This change adds a new fuzz target `wallet_rpc`,\r\nthis change was suggested in https://github.com/bitcoin/bitcoin/issues/29901\r\n\r\nThis change use some of the functionality of the fuzz target `rpc` to also target the wallet rpc's",
      "state": "closed",
      "user": "kevkevinpal",
      "created_at": "2024-08-01T23:42:27Z",
      "updated_at": "2025-11-07T12:06:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30570",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 263,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2147617019,
      "number": 31164,
      "title": "net: Use actual memory size in receive buffer accounting",
      "body": "Add a method `CNetMessage::GetMemoryUsage` and use this for accounting of the size of the process receive queue instead of the raw message size (like we already do for the send buffer and `CSerializedNetMsg`).\r\n\r\nThis ensures that allocation and deserialization overhead is better taken into account. \r\n\r\nOn average, this counts about ~100 extra bytes per packet on x86_64:\r\n```\r\n2024-10-27T09:50:12Z [net] 24 bytes -> 112 bytes\r\n2024-10-27T10:36:37Z [net] 61 bytes -> 176 bytes\r\n2024-10-27T10:36:38Z [net] 1285 bytes -> 1392 bytes\r\n2024-10-27T09:50:21Z [net] 43057 bytes -> 43168 bytes\r\n```",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2024-10-27T09:09:36Z",
      "updated_at": "2025-11-07T12:06:30Z",
      "merged_at": "2024-11-06T21:01:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31164",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 648,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2166055518,
      "number": 31238,
      "title": "fuzz: Limit wallet_notifications iterations",
      "body": "I don't think the fuzz target has ever found a real issue. The closest being https://github.com/bitcoin/bitcoin/pull/25869\r\n\r\nIt is also, by far, the slowest fuzz target. For example, looking at https://cirrus-ci.com/task/5533338067271680?logs=ci#L3974, it takes more than one hour:\r\n\r\n```\r\nRun wallet_notifications with args ['/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz', '-runs=1', PosixPath('/ci_container_base/ci/scratch/qa-assets/fuzz_corpora/wallet_notifications')]INFO: Running with entropic power schedule (0xFF, 100).\r\nINFO: Seed: 1096115652\r\nINFO: Loaded 1 modules   (625824 inline 8-bit counters): 625824 [0x5628396d9138, 0x562839771dd8), \r\nINFO: Loaded 1 PC tables (625824 PCs): 625824 [0x562839771dd8,0x56283a0fe7d8), \r\nINFO:     1287 files found in /ci_container_base/ci/scratch/qa-assets/fuzz_corpora/wallet_notifications\r\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 1047827 bytes\r\nINFO: seed corpus: files: 1287 min: 1b max: 1047827b total: 11616898b rss: 172Mb\r\n#16\tpulse  cov: 14328 ft: 25341 corp: 14/239b exec/s: 5 rss: 204Mb\r\n#64\tpulse  cov: 19179 ft: 58412 corp: 61/3587b exec/s: 5 rss: 320Mb\r\n#128\tpulse  cov: 19692 ft: 85738 corp: 125/16Kb exec/s: 3 rss: 544Mb\r\n#256\tpulse  cov: 19923 ft: 107490 corp: 253/72Kb exec/s: 2 rss: 556Mb\r\n#512\tpulse  cov: 20107 ft: 124704 corp: 509/330Kb exec/s: 2 rss: 590Mb\r\nSlowest unit: 10 s:\r\nartifact_prefix='./'; Test unit written to ./slow-unit-9fa5f7d7e4afa1626622ef1b3c70a7563eecf11d\r\n#1024\tpulse  cov: 20360 ft: 136324 corp: 1009/2488Kb exec/s: 0 rss: 726Mb\r\nSlowest unit: 23 s:\r\nartifact_prefix='./'; Test unit written to ./slow-unit-5d99a20de2c2b6bedb0cbaf0ba3743ae3ba13c7c\r\nSlowest unit: 26 s:\r\nartifact_prefix='./'; Test unit written to ./slow-unit-8889ecb61bdc0650355e0d0d27c012f3239d07a4\r\nSlowest unit: 42 s:\r\nartifact_prefix='./'; Test unit written to ./slow-unit-d16c084282ac1a85fcdc43c48e49836b08446686\r\n#1289\tINITED cov: 20409 ft: 138281 corp: 1245/10323Kb exec/s: 0 rss: 880Mb\r\n#1289\tDONE   cov: 20409 ft: 138281 corp: 1245/10323Kb lim: 1047827 exec/s: 0 rss: 880Mb\r\nDone 1289 runs in 3813 second(s)\r\n```\r\n\r\nLooking at the flame graphs, it looks like the slow runs spend most of their time in the Knapsack solver. This seems reasonable, because it may run 1000 inner Knapsack iterations 200 times. So reduce the fuzz iterations from 200 to 20 to avoid fuzz timeouts and wasted resources.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-11-06T20:48:16Z",
      "updated_at": "2025-11-07T12:06:29Z",
      "merged_at": "2024-11-07T10:27:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31238",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 2472,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2156184021,
      "number": 31190,
      "title": "TxDownloadManager followups",
      "body": "Addresses some remaining followups from #30110:\r\n- https://github.com/bitcoin/bitcoin/pull/30110#discussion_r1818893833\r\n- https://github.com/bitcoin/bitcoin/pull/30110#discussion_r1819638959\r\n- https://github.com/bitcoin/bitcoin/pull/30110#discussion_r1819634235",
      "state": "closed",
      "user": "glozow",
      "created_at": "2024-10-31T12:46:10Z",
      "updated_at": "2025-11-07T12:06:29Z",
      "merged_at": "2024-11-07T17:30:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31190",
      "labels": [
        "Docs",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 291,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2168023320,
      "number": 31245,
      "title": "wallet: Sign transactions containing MuSig2 inputs",
      "body": "Implements all of the signing logic for transactions containing MuSig2 inputs.\r\n\r\nNote that this is not actually usable as the session data for MuSig2 is not stored. That will require the PSBT fields from #29675\r\n\r\nDepends on #31242, #31243, and #31244\r\n\r\nSplit from #29675",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-07T18:12:26Z",
      "updated_at": "2025-11-07T12:06:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31245",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 324,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977609046,
      "number": 33782,
      "title": "test: remove obsolete `get_{key,multisig}` helpers from wallet_util.py",
      "body": "This small cleanup PR is a late follow-up to #31250 (commit c847dee1488a294c9a9632a00ba1134b21e41947). These helpers are unused and wouldn't work anymore, as they call a legacy wallet RPC (`dumpprivkey`). They were only ever used for testing the `importmulti` RPC, which also doesn't exist anymore. Functional tests that need to create key pairs and derive various output script types from them can use `get_generate_key` (introduced in #16528, commit f193ea889ddb53d9a5c47647966681d525e38368) instead, without involving the node.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-11-04T18:06:23Z",
      "updated_at": "2025-11-07T11:53:12Z",
      "merged_at": "2025-11-07T11:46:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33782",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 601,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2980959339,
      "number": 33793,
      "title": "test: move create_malleated_version() to messages.py for reuse",
      "body": "Move `create_malleated_version()` from `p2p_orphan_handling.py` to `test_framework/messages.py` so that it can be reused by other tests.\r\n\r\n---\r\n\r\nThis is part of [#29415 Broadcast own transactions only via short-lived Tor or I2P connections](https://github.com/bitcoin/bitcoin/pull/29415). Putting it in its own PR to reduce the size of #29415 and because it does not depend on the other commits from there.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-11-05T15:14:45Z",
      "updated_at": "2025-11-07T11:20:01Z",
      "merged_at": "2025-11-07T11:17:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33793",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 471,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2409072477,
      "number": 32109,
      "title": "fuzz: avoid returning non-conforming results from FuzzedSock::GetSockName()",
      "body": "It would be a bug in `getsockname(2)` if it returns a result that is smaller than the returned socket address family. For example, if it indicates that the result is less than `sizeof(sockaddr_in6)` and sets `sa_family` equal to `AF_INET6` in the output.\r\n\r\nIn other words, the `name->sa_family` in the output should be consistent with the returned `*name_len`.\r\n\r\nThe current code could fail to do that if:\r\n* the caller provides `sockaddr_in6` and an input value of `*name_len=28`\r\n* `ConsumeRandomLengthByteVector()` returns a vector of `20` bytes. Then the code would only set the first `20` bytes in `name`.\r\n* `name->sa_family` from the fuzz data ends up being `AF_INET6`.\r\n\r\nTo produce consistent `*name_len` and `name->sa_family`, return one of `AF_INET`, `AF_INET6` or `AF_UNIX` for family with the corresponding `*name_len`.\r\n\r\nFor reference:\r\n```\r\nsizeof(sockaddr) = 16\r\nsizeof(sockaddr_in) = 16\r\nsizeof(sockaddr_in6) = 28\r\nsizeof(sockaddr_un) = 110 on Linux, 106 on FreeBSD (unix socket)\r\nsizeof(sockaddr_storage) = 128\r\n```\r\n\r\nhttps://www.man7.org/linux/man-pages/man3/sockaddr.3type.html\r\n",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-03-21T10:06:20Z",
      "updated_at": "2025-11-07T11:17:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32109",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1179,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2972334103,
      "number": 33768,
      "title": "refactor: remove dead branches in `SingletonClusterImpl`",
      "body": "Found during review: [cluster mempool: control/optimize TxGraph memory usage](https://github.com/bitcoin/bitcoin/pull/33157#discussion_r2423058928)\r\n\r\n### Fixes\r\n`SplitAll()` always calls `ApplyRemovals()` first, for a singleton, it empties the cluster, therefore any `SingletonClusterImpl` passed to `Split()` must be empty.\r\n\r\n`TxGraphImpl::ApplyDependencies()` first merges each dependency group and asserts the group has at least one dependency. Since `parent` != `child`, `TxGraphImpl::Merge()` upgrades the merge target to `GenericClusterImpl`, therefore the `ApplyDependencies()` is never dispatched to `SingletonClusterImpl`.\r\n\r\n### Coverage proof:\r\n* https://maflcko.github.io/b-c-cov/fuzz.coverage/src/txgraph.cpp.gcov.html#L1446\r\n* https://storage.googleapis.com/oss-fuzz-coverage/bitcoin-core/reports/20251103/linux/src/bitcoin-core/src/txgraph.cpp.html#L1446",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-03T11:20:28Z",
      "updated_at": "2025-11-07T10:11:31Z",
      "merged_at": "2025-11-07T10:10:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33768",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 928,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2986752023,
      "number": 33811,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "OGbencox",
      "created_at": "2025-11-07T00:57:58Z",
      "updated_at": "2025-11-07T07:44:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33811",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2825267198,
      "number": 33384,
      "title": "descriptor: fix comments in descriptor.cpp::DescriptorImpl",
      "body": "`P2TR` was missing in `m_pubkey_args` description and it was a typo in `doc/descriptors.md`\r\n",
      "state": "open",
      "user": "pythcoiner",
      "created_at": "2025-09-13T12:40:07Z",
      "updated_at": "2025-11-06T15:06:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33384",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 152,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2984670775,
      "number": 33807,
      "title": "qt: Comment out sensitive commands in history to prevent re-execution",
      "body": "Prefix filtered commands with \"#\" before adding them to the RPC console history.\r\n\r\nConsole lines starting with \"#\" are ignored by the executor, preventing accidental re-execution of filtered sensitive commands when recalled from history.\r\n\r\nAlso adds a noop signal to handle ignored commands cleanly and documents comment behavior in the console help text (`help-console`).",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-11-06T13:24:45Z",
      "updated_at": "2025-11-06T13:27:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33807",
      "labels": [
        "GUI"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1752882129,
      "number": 29536,
      "title": "fuzz: fuzz connman with non-empty addrman + ASMap",
      "body": "### Motivation\r\n\r\nCurrently, we fuzz connman with an addrman from `NodeContext`. However, \r\nfuzzing connman with only empty addrman might not be effective, especially\r\nfor functions like `GetAddresses` and other ones that plays with addrman. Also,\r\nwe do not fuzz connman with ASMap, what would be good for functions that need\r\n`GetGroup`, or even for addrman. Without it, I do not see how effective would be\r\n fuzzing `ASMapHealthCheck`, for example.\r\n\r\n### Changes\r\n\r\n- Move `AddrManDeterministic` and `ConsumeNetGroupManager` to util.\r\n- Use `ConsumeNetGroupManager` in connman target to construct a netgroupmanager\r\nand use it for `ConnmanTestMsg`.\r\n- Use `AddrManDeterministic` in connman target to create an addrman. It does\r\n not slow down as \"filling\" the addrman (e.g. with `FillAddrman`).\r\n- Add coverage for `ASMapHealthCheck`.\r\n",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-03-02T09:18:58Z",
      "updated_at": "2025-11-06T12:06:06Z",
      "merged_at": "2024-10-25T14:19:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29536",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 890,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2014733984,
      "number": 30634,
      "title": "ci: Use clang-19 from apt.llvm.org",
      "body": "A new clang version generally comes with bugfixes, new sanitizer features, deprecations, as well as new features.\r\n\r\nUpgrade the sanitizer tasks to use the new version.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-08-12T10:34:29Z",
      "updated_at": "2025-11-06T12:06:03Z",
      "merged_at": "2024-11-06T09:43:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30634",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 203,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2156252913,
      "number": 31192,
      "title": "depends, doc: List packages required to build `qt` package separately",
      "body": "Suggested in https://github.com/bitcoin/bitcoin/pull/30997#discussion_r1791789613:\r\n> There's probably enough GUI-only stuff here, i.e `bison`, `ninja-build`, `python3`, `xz-utils`, that this could be moved to it's own `#### Gui` section.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-10-31T13:20:58Z",
      "updated_at": "2025-11-06T12:06:02Z",
      "merged_at": "2024-11-05T16:13:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31192",
      "labels": [
        "Docs",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 308,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2149415246,
      "number": 31173,
      "title": "cmake: Add `FindQRencode` module and enable `libqrencode` package for MSVC",
      "body": "This PR introduces the `FindQRencode` CMake module, following the official CMake [guidelines](https://cmake.org/cmake/help/latest/manual/cmake-developer.7.html#find-modules) for managing [upstream libraries](https://github.com/fukuchi/libqrencode) that lack a config file package. This module enhances flexibility in locating the `libqrencode` library by making the use of `pkg-config` optional.\r\n\r\nWith this update, `libqrencode` can be detected on systems where either `pkg-config` or the `libqrencode.pc` file is unavailable, such as Windows environments using the vcpkg package manager. However, if `libqrencode.pc` is available, it remains beneficial as the only direct source of the library's version information.\r\n\r\nAdditionally, the `libqrencode` vcpkg package is enabled for MSVC builds.\r\n\r\nHere is a diff for configuration output on Ubuntu 24.10:\r\n```diff\r\n -- Detecting CXX compile features - done\r\n -- Found SQLite3: /usr/include (found suitable version \"3.46.1\", minimum required is \"3.7.17\")\r\n -- Found PkgConfig: /usr/bin/pkg-config (found version \"1.8.1\")\r\n--- Checking for module 'libqrencode'\r\n---   Found libqrencode, version 4.1.1\r\n+-- Found QRencode: /usr/lib/x86_64-linux-gnu/libqrencode.so (found version \"4.1.1\")\r\n -- Found Qt: /usr/lib/x86_64-linux-gnu/cmake/Qt5 (found suitable version \"5.15.15\", minimum required is \"5.11.3\")\r\n -- Performing Test CXX_SUPPORTS__WERROR\r\n -- Performing Test CXX_SUPPORTS__WERROR - Success\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-10-28T15:01:47Z",
      "updated_at": "2025-11-06T12:06:02Z",
      "merged_at": "2024-11-06T12:11:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31173",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1526,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2161679113,
      "number": 31216,
      "title": "Update secp256k1 subtree to v0.6.0",
      "body": "v0.6.0 was just released, main change is that it has the musig module which #29675 needs.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-04T20:02:29Z",
      "updated_at": "2025-11-06T12:06:01Z",
      "merged_at": "2024-11-06T11:15:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31216",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 124,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2163633782,
      "number": 31222,
      "title": "tests: Handle BDB dynamic pagesize",
      "body": "BDB may choose to use a pagesize other than 4096. As such, the parser should use the pagesize given by the BDB file.\r\n\r\nFixes  #31210",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-05T17:55:23Z",
      "updated_at": "2025-11-06T12:06:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31222",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 168,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2164952505,
      "number": 31232,
      "title": "ci: `add second_deadlock_stack=1` to TSAN options",
      "body": "This is mentioned in the developer notes, but isn't present in `TSAN_OPTIONS`, resulting in:\r\n```bash\r\nWARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=60508)\r\n  Cycle in lock order graph: M0 (0xffff98e02208) => M1 (0xffff98e0cbe8) => M2 (0xffff98e0cd98) => M0\r\n<snip>\r\n\r\n  Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message\r\n```\r\n\r\nAdd it, for (potentially) more informative output, when failures occur. Checked that adding does output more information.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-06T11:15:08Z",
      "updated_at": "2025-11-06T12:05:59Z",
      "merged_at": "2024-11-06T15:04:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31232",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 564,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2982596203,
      "number": 33800,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "amitsingh881024-ctrl",
      "created_at": "2025-11-06T01:14:57Z",
      "updated_at": "2025-11-06T01:44:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33800",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977949474,
      "number": 33783,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Mystique85",
      "created_at": "2025-11-04T20:41:12Z",
      "updated_at": "2025-11-06T01:43:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33783",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2980415423,
      "number": 33790,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Ahfaz001",
      "created_at": "2025-11-05T13:00:24Z",
      "updated_at": "2025-11-06T01:43:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33790",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2064,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2933706037,
      "number": 33669,
      "title": "Add libbitcoinkernel example files",
      "body": "Many Bitcoin-related libraries (such as libsecp256k1 and other Bitcoin Rust crates) include an examples/ folder that demonstrates proper library usage.\r\n\r\nThese examples are especially valuable because they help users learn by example and reduce the need to consult external documentation.\r\n\r\nThis PR proposes adopting the same approach for libbitcoinkernel.\r\n\r\nFor now, I’ve added two examples for the C library (not the C++ wrapper) to gather feedback. If the approach is well-received, I can add more examples within this PR.\r\n\r\nBuilt on top of https://github.com/bitcoin/bitcoin/pull/30595",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-10-21T14:44:17Z",
      "updated_at": "2025-11-06T00:00:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33669",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 628,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2655840693,
      "number": 32939,
      "title": "refactor: avoid double hashing in `SourceLocationHasher`",
      "body": "Feeds the file name string directly into the hasher instead of pre-hashing it first. The resulting hash changes of course, but that doesn't affect us since it's only stored in-memory.\r\n\r\nFixes: https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188644325\r\n\r\nA few other related nits were also addressed here:\r\n* Comment was redundant, `CSipHasher` is used in other hashers all over the codebase\r\n* `static_cast<size_t>` skewed the whole method, changed to shorter functional-style cast\r\n* `struct` formatting is aligned with `class` formatting - see https://github.com/bitcoin/bitcoin/pull/32813",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-07-10T12:46:55Z",
      "updated_at": "2025-11-05T17:35:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32939",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 660,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2980724194,
      "number": 33791,
      "title": "kernel: Use enumeration type for flags argument",
      "body": "Just a small followup from https://github.com/bitcoin/bitcoin/pull/30595#issuecomment-3485634089. ",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-11-05T14:17:15Z",
      "updated_at": "2025-11-05T15:04:57Z",
      "merged_at": "2025-11-05T15:04:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33791",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 146,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2119853046,
      "number": 31073,
      "title": "ci: Split out native fuzz jobs for macOS and windows",
      "body": "Split out two new CI jobs (for native macOS and windows) that run the fuzz tests on the qa-assets input corpora.\r\n\r\nIn both jobs the `fuzz` binary is built with `-DBUILD_FOR_FUZZING` to enable `Assume` assertions as well as `FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION`.",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-10-11T14:51:09Z",
      "updated_at": "2025-11-05T12:05:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31073",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 320,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2154593769,
      "number": 31186,
      "title": "msvc: Update vcpkg manifest",
      "body": "This PR updates the vcpkg manifest baseline from the [2023.08.09 Release ](https://github.com/microsoft/vcpkg/releases/tag/2023.08.09) to the [2024.09.30 Release](https://github.com/microsoft/vcpkg/releases/tag/2024.09.30), with the following package changes:\r\n- `boost`: 1.82.0#2 --> 1.85.0#1,2\r\n- `qt5`: 5.15.10#5 -> 5.15.15\r\n- `sqlite3`: 3.42.0#1 --> 3.46.1\r\n- `zeromq`: 2023-06-20#1 --> 4.3.5#2\r\n\r\nThe previous update was made in https://github.com/bitcoin/bitcoin/pull/28938.\r\n\r\nFor additional minor improvements, please refer to the commit messages.\r\n",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-10-30T17:42:51Z",
      "updated_at": "2025-11-05T12:05:32Z",
      "merged_at": "2024-11-05T16:26:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31186",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 585,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2158143865,
      "number": 31203,
      "title": "fuzz: fix `implicit-integer-sign-change` in wallet_create_transaction",
      "body": "This PR limites the value of `m_confirm_target` to avoid `implicit-integer-sign-change`: \r\n```\r\n/ci_container_base/src/wallet/fees.cpp:58:58: runtime error: implicit conversion from type 'unsigned int' of value 4294967292 (32-bit, unsigned) to type 'int' changed the value to -4 (32-bit, signed)\r\n    #0 0x55b6fd26c021 in wallet::GetMinimumFeeRate(wallet::CWallet const&, wallet::CCoinControl const&, FeeCalculation*) ci/scratch/build-x86_64-pc-linux-gnu/src/wallet/./src/wallet/fees.cpp:58:58\r\n    #1 0x55b6fd3ef5ca in wallet::CreateTransactionInternal(wallet::CWallet&, std::vector<wallet::CRecipient, std::allocator<wallet::CRecipient>> const&, std::optional<unsigned int>, wallet::CCoinControl const&, bool) ci/scratch/build-x86_64-pc-linux-gnu/src/wallet/./src/wallet/spend.cpp:1101:49\r\n    #2 0x55b6fd3ebea5 in wallet::CreateTransaction(wallet::CWallet&, std::vector<wallet::CRecipient, std::allocator<wallet::CRecipient>> const&, std::optional<unsigned int>, wallet::CCoinControl const&, bool) ci/scratch/build-x86_64-pc-linux-gnu/src/wallet/./src/wallet/spend.cpp:1382:16\r\n    #3 0x55b6fccbc154 in wallet::(anonymous namespace)::wallet_create_transaction_fuzz_target(std::span<unsigned char const, 18446744073709551615ul>) ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/./src/wallet/test/fuzz/spend.cpp:99:11\r\n    #4 0x55b6fccda45d in std::function<void (std::span<unsigned char const, 18446744073709551615ul>)>::operator()(std::span<unsigned char const, 18446744073709551615ul>) const /usr/bin/../lib/gcc/x86_64-linux-gnu/13/../../../../include/c++/13/bits/std_function.h:591:9\r\n    #5 0x55b6fccda45d in LLVMFuzzerTestOneInput ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/util/./src/test/fuzz/fuzz.cpp:211:5\r\n    #6 0x55b6fc368484 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c8a484) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #7 0x55b6fc367b79 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool, bool*) (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c89b79) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #8 0x55b6fc369796 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c8b796) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #9 0x55b6fc369ca7 in fuzzer::Fuzzer::Loop(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c8bca7) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #10 0x55b6fc35719f in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c7919f) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #11 0x55b6fc381826 in main (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1ca3826) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n    #12 0x7f934c6661c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 6d64b17fbac799e68da7ebd9985ddf9b5cb375e6)\r\n    #13 0x7f934c66628a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 6d64b17fbac799e68da7ebd9985ddf9b5cb375e6)\r\n    #14 0x55b6fc34c184 in _start (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0x1c6e184) (BuildId: d11f8692b05f02b5a14b6e7579598b426e3144c5)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: implicit-integer-sign-change /ci_container_base/src/wallet/fees.cpp:58:58 \r\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\r\n0x2e,0x1,0xb0,0xb8,0x0,0xff,0xff,0xff,0xff,0x60,0x14,0x22,0xff,0xff,0xff,0xff,0xff,0xfd,0xff,0xff,0xff,0xff,0xff,0x7e,0xf9,0x41,0x8,0x2b,0x17,0x58,0xb,0x17,0xfc,0xff,0xff,0xff,0xff,0xff,0xff,0x7e,0xf9,0x41,0x8,0x2b,0x17,0x58,0xb,\r\n.\\001\\260\\270\\000\\377\\377\\377\\377`\\024\\\"\\377\\377\\377\\377\\377\\375\\377\\377\\377\\377\\377~\\371A\\010+\\027X\\013\\027\\374\\377\\377\\377\\377\\377\\377~\\371A\\010+\\027X\\013\r\nartifact_prefix='./'; Test unit written to ./crash-5627f57ffba7568a500f8379f62c3338978b43f2\r\nBase64: LgGwuAD/////YBQi///////9//////9++UEIKxdYCxf8////////fvlBCCsXWAs=\r\n```\r\n\r\n",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2024-11-01T14:15:00Z",
      "updated_at": "2025-11-05T12:05:31Z",
      "merged_at": "2024-11-01T15:40:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31203",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 4414,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2156213851,
      "number": 31191,
      "title": "build: Make G_FUZZING constexpr, require -DBUILD_FOR_FUZZING=ON to fuzz",
      "body": "`g_fuzzing` is used inside `Assume` at runtime, causing significant overhead in hot paths. See https://github.com/bitcoin/bitcoin/issues/31178\r\n\r\nOne could simply remove the `g_fuzzing` check from the `Assume`, but this would make fuzzing a bit less useful. Also, it would be unclear if `g_fuzzing` adds a runtime overhead in other code paths today or in the future.\r\n\r\nFix all issues by making `G_FUZZING` equal to the build option `BUILD_FOR_FUZZING`, and for consistency in fuzzing, require it to be set when executing any fuzz target.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31178\r\n\r\nTemporarily this drops fuzzing from two CI tasks, but they can be re-added in a follow-up with something like https://github.com/bitcoin/bitcoin/pull/31073",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-10-31T13:00:35Z",
      "updated_at": "2025-11-05T12:05:31Z",
      "merged_at": "2024-11-05T11:05:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31191",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 826,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2162199377,
      "number": 31220,
      "title": "doc: Fix word order in developer-notes.md",
      "body": "This pull request fixes a word order error in developer-notes.md.",
      "state": "closed",
      "user": "secp512k2",
      "created_at": "2024-11-05T04:06:20Z",
      "updated_at": "2025-11-05T12:05:30Z",
      "merged_at": "2024-11-05T16:14:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31220",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 107,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2978389370,
      "number": 33787,
      "title": "build: Upgrade depends to Qt6",
      "body": "Upgrades the depends system to build Qt 6.7.3, preparing the codebase for Qt6 compatibility.\r\n\r\n## Changes\r\n\r\n- Add Qt6 (6.7.3) package definitions and patches\r\n- Update Qt build configuration to support both Qt5 and Qt6\r\n- Add automatic Qt version detection in depends toolchain\r\n- Add libxcb_util_cursor package for Qt6 Linux builds\r\n- Remove obsolete Qt5-specific patches\r\n- Add initial `wintaskbar` infrastructure for Qt6 compatibility, which is covered in https://github.com/bitcoinknots/bitcoin/pull/215\r\n\r\n## Details\r\n\r\nThis PR modernizes the Qt dependency infrastructure without changing application behavior. The Qt6 upgrade provides:\r\n- Long-term Qt support (Qt5 reaches end-of-life in 2025)\r\n- Better compatibility with modern platforms\r\n- Foundation for future Qt6-specific features",
      "state": "closed",
      "user": "kwsantiago",
      "created_at": "2025-11-05T00:51:50Z",
      "updated_at": "2025-11-05T11:39:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33787",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 824,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2977958174,
      "number": 33784,
      "title": ".",
      "body": "Refactor and clean up the SHA256 x86 SHANI implementation to improve code safety, readability, and consistency without any functional or behavioral changes.\r\n\r\nMotivation\r\n\r\nThis patch improves long-term maintainability and compiler compatibility of the SHANI-optimized SHA256 implementation used in Bitcoin Core.\r\nIt replaces C-style casts with reinterpret_cast to enforce type safety, ensures consistent use of static ALWAYS_INLINE linkage for internal helper functions, and converts static constants to constexpr for guaranteed compile-time initialization.\r\n\r\nBenefits\r\n\r\nImproves type safety and avoids undefined behavior across compilers.\r\n\r\nMakes the code consistent with modern C++ conventions used elsewhere in the crypto module.\r\n\r\nEnsures that constants are resolved at compile time, reducing startup cost.\r\n\r\nNo changes to hashing logic or results — verified against existing SHA256 test vectors.\r\n\r\nTesting\r\n\r\nAll SHA256 and SHA256D64 test vectors in src/test/crypto_tests.cpp were re-run.\r\nResults are bit-for-bit identical with the pre-refactor implementation.\r\n\r\nScope\r\n\r\nThis PR is limited to code cleanup and refactor only.\r\nNo logic, algorithm, or performance behavior has been altered.",
      "state": "closed",
      "user": "Mystique85",
      "created_at": "2025-11-04T20:45:29Z",
      "updated_at": "2025-11-05T11:39:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33784",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1206,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2250366940,
      "number": 31560,
      "title": "rpc: allow writing UTXO set to a named pipe, introduce dump_to_sqlite.sh script",
      "body": "This PR slightly modifies the `dumptxoutset` RPC to allow writing the UTXO set dump into a [named pipe](https://askubuntu.com/a/449192), so that the output data can be consumed by another process, see #31373. Taking use of this with the utxo-to-sqlite.py tool (introduced in #27432), creating an UTXO set in SQLite3 format is possible on the fly and becomes a one-liner with a newly introduced script `dump_to_sqlite.sh`. E.g. for signet:\r\n```\r\n$ ./contrib/utxo-tools/dump_to_sqlite.sh \"./build/src/bitcoin-cli -signet\" ~/utxos.sqlite3\r\nUTXO Snapshot for Signet at block hash 000000ddc3b251483cf1ebb23e2750ba..., contains 5705634 coins\r\n1048576 coins converted [18.38%], 4.474s passed since start\r\n2097152 coins converted [36.76%], 8.793s passed since start\r\n3145728 coins converted [55.13%], 13.146s passed since start\r\n4194304 coins converted [73.51%], 17.478s passed since start\r\n5242880 coins converted [91.89%], 21.832s passed since start\r\n{\r\n  \"coins_written\": 5705634,\r\n  \"base_hash\": \"000000ddc3b251483cf1ebb23e2750ba2490701d0c547241b247a9beb85498d0\",\r\n  \"base_height\": 227678,\r\n  \"path\": \"/tmp/tmp.MFHEVqetv0/utxos.fifo\",\r\n  \"txoutset_hash\": \"f29e524c999487cbd0cfca5201dce67c2c5e5c5eb115c63ad48c2239f23eea4c\",\r\n  \"nchaintx\": 8272649\r\n}\r\nTOTAL: 5705634 coins written to /home/thestack/utxos.sqlite3, snapshot height is 227678.\r\n```\r\nNote that the `dumptxoutset` RPC calculates an UTXO set hash as a first step before any data is emitted, so especially on mainnet it takes quite a while until the conversion starts and something is happening visibly.\r\n\r\nThe new script is quite minimal and PoC-y at this point, there are some potential improvement ideas:\r\n- better error handling (e.g. detect if bitcoin-cli exists, clean up tmpdir if bitcoin-cli execution fails etc.)\r\n- allow to pass through the rollback option (now we always dump at the current height, i.e. \"latest\" parameter)",
      "state": "open",
      "user": "theStack",
      "created_at": "2024-12-24T02:42:27Z",
      "updated_at": "2025-11-05T11:32:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31560",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1968,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2517097231,
      "number": 32484,
      "title": "[28.x] build: suppress `-Wunterminated-string-initialization` in secp256k1",
      "body": "Suppress `-Wunterminated-string-initialization` warnings from GCC 15, like:\r\n```bash\r\nIn file included from src/secp256k1.c:830:\r\nsrc/modules/schnorrsig/main_impl.h:48:46: warning: initializer-string for array of 'unsigned char' truncates NUL terminator but destination lacks 'nonstring' attribute (14 chars into 13 available) [-Wunterminated-string-initialization]\r\n   48 | static const unsigned char bip340_algo[13] = \"BIP0340/nonce\";\r\n      |                                              ^~~~~~~~~~~~~~~\r\nIn file included from src/tests_exhaustive.c:28:\r\nsrc/testrand_impl.h: In function ‘testrand_seed’:\r\nsrc/testrand_impl.h:21:45: warning: initializer-string for array of ‘unsigned char’ truncates NUL terminator but destination lacks ‘nonstring’ attribute (20 chars into 19 available) [-Wunterminated-string-initialization]\r\n   21 |     static const unsigned char PREFIX[19] = \"secp256k1 test init\";\r\n      |                                             ^~~~~~~~~~~~~~~~~~~~~\r\nsrc/modules/ellswift/tests_impl.h:411:53: warning: initializer-string for array of ‘unsigned char’ truncates NUL terminator but destination lacks ‘nonstring’ attribute (27 chars into 26 available) [-Wunterminated-string-initialization]\r\n  411 |         static const unsigned char bip324_tag[26] = \"bip324_ellswift_xonly_ecdh\";\r\n      |                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n```\r\n\r\nThis was fixed upstream in https://github.com/bitcoin-core/secp256k1/pull/1583, so only relevant for `28.x` and later. The code is fine, but the warnings may break builds under `-Werror`, leave users wondering if there is a real issue etc.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T16:18:38Z",
      "updated_at": "2025-11-05T10:39:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32484",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1721,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2742188325,
      "number": 33180,
      "title": "ASAN: turn on more not-enabled-by-default options",
      "body": "`strict_string_checks=1`:\r\n> If true, check that string arguments are properly null-terminated.\r\n\r\n`detect_invalid_pointer_pairs=2`:\r\n> If non-zero, try to detect operations like <, <=, >, >= and - on invalid pointer pairs (e.g. when pointers belong to different objects).\r\n\r\nSee https://github.com/google/sanitizers/wiki/AddressSanitizerFlags.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-08-13T09:48:44Z",
      "updated_at": "2025-11-05T10:39:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33180",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 394,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977550533,
      "number": 33781,
      "title": "clang-tidy: Remove no longer needed NOLINT",
      "body": "From https://github.com/bitcoin/bitcoin/pull/33714/files#r2491476516:\r\n> Actually, the `NOLINT` was fixed and can be removed? You've confirmed that it is undeclared on the listed platforms, so it can't be hit by `readability-redundant-declaration`",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-04T17:47:43Z",
      "updated_at": "2025-11-05T10:13:50Z",
      "merged_at": "2025-11-05T10:06:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33781",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 290,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2977500650,
      "number": 33780,
      "title": "guix: disable libsanitizer in Linux GCC build",
      "body": "This causes issues when building against newer glibcs (i.e 2.42), and isn't needed in any case.\r\n\r\n```bash\r\n../../../../gcc-14.3.0/libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cpp:483:31: error: invalid application of ‘sizeof’ to incomplete type ‘__sanitizer::termio’\r\n  483 |   unsigned struct_termio_sz = sizeof(struct termio);\r\n      |                               ^~~~~~~~~~~~~~~~~~~~~\r\n```\r\n\r\nExtracted from #25573.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-04T17:33:04Z",
      "updated_at": "2025-11-05T09:56:40Z",
      "merged_at": "2025-11-05T09:56:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33780",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 484,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2951780878,
      "number": 33714,
      "title": "random: scope environ extern to macOS, BSDs and Illumos",
      "body": "These platforms fail to compile with it removed.\r\nmacOS: #33675\r\nBSDs / Illumos: https://github.com/hebasto/bitcoin-core-nightly/pull/79.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-27T16:38:49Z",
      "updated_at": "2025-11-04T17:48:50Z",
      "merged_at": "2025-11-04T15:10:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33714",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 193,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2661268700,
      "number": 32953,
      "title": "[POC] ci: Skip compilation when running static code analysis",
      "body": "This PR is a proof of concept for using a compilation database with static analysis tools such as clang-tidy or IWYU. The idea was suggested in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2935293250:\r\n> Shouldn't this be excluded in the tidy CI task as well?\r\n\r\nAdditionally, this PR makes use of the `codegen` target, following the suggestion in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2991861497:\r\n> It does seem nice to be able to run clang-tidy on generated files... Maybe more ideally there could be ...  target like `make --build build -t codegen` that only runs code generation steps and doesn't compile the sources.\r\n\r\nA few tasks remain to be addressed. Here's the current TODO list:\r\n- [ ] Implement the `codegen` target for CMake versions older than 3.31.\r\n- [ ] Handle files generated by the `mpgen` tool.\r\n- [ ] Handle files generated by Qt tools.\r\n- [ ] Enable `RUN_CHECK_DEPS=true` elsewhere.\r\n\r\nWhile https://github.com/bitcoin/bitcoin/issues/31965 is still under discussion, it may make sense to move this CI job to GHA to provide quicker feedback.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-07-12T12:51:19Z",
      "updated_at": "2025-11-04T17:37:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32953",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1160,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2849782359,
      "number": 33455,
      "title": "CPack",
      "body": "The goal is to build all packages (both archives and installers) from a single configuration in CMake.\r\n\r\n### Packaging Instruction\r\n\r\nGet a list of supported CPack generators for your platform with:\r\n\r\n```sh\r\ncpack --help\r\n```\r\n\r\nRun `cpack` from the build directory after a successful build to select multiple package generators:\r\n\r\n```sh\r\ncmake --build .\r\ncpack -G '7Z;NSIS64'\r\n```\r\n\r\nOr build the `package` and/or `package_source` targets:\r\n\r\n```sh\r\ncmake --build . --target package\r\ncmake --build . --target package_source\r\n```\r\n\r\nTODO:\r\n\r\n- [ ] Windows start menu entries\r\n- [ ] Option to launch after install\r\n- [ ] Component descriptions / dependencies / groups\r\n- [ ] Auxiliary files (readme, config)\r\n\r\n<img width=\"732\" height=\"560\" alt=\"Screenshot 2025-10-14 at 17 35 47\" src=\"https://github.com/user-attachments/assets/6f7dbe57-78d8-435f-b4e0-0508a1ac3832\" />\r\n",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-22T14:28:28Z",
      "updated_at": "2025-11-04T17:32:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33455",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 879,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2689257148,
      "number": 33045,
      "title": "depends: disable variables, rules and suffixes.",
      "body": "This picks up #22126. Previously, this was more complicated to do, as depends packages (upnp, natpmp) used the rules being disabled. Those packages have since been removed.\r\n\r\nWhen there is no rule to build a target in the makefile, make looks for a builtin rule. When `-r` is specified make no longer performs this lookup.\r\n\r\nE.g. the following in an excerpt from `make -d` output. Here, make looks for a rule to build `all`.\r\n```bash\r\nConsidering target file 'all'.\r\n File 'all' does not exist.\r\n Looking for an implicit rule for 'all'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.o'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.c'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.cc'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.C'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.cpp'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.p'.\r\n Trying pattern rule with stem 'all'.\r\n Trying implicit prerequisite 'all.f'.\r\n...\r\n```\r\nMany more lines like this are omitted.\r\n\r\nBecause this build system does not use make builtin rules or suffixes, there is no benefit in having builtin rules enabled.\r\n\r\nThere are 2 benefits in having builtin rules disabled.\r\n\r\n1. Improves performance by eliminating redundant lookups.\r\n2. Simplifies troubleshooting by reducing the output of make `-d` or make `-p`.\r\n\r\nAlso see: https://www.gnu.org/software/make/manual/make.html#index-_002d_002dno_002dbuiltin_002drules.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-07-23T15:24:48Z",
      "updated_at": "2025-11-04T16:08:58Z",
      "merged_at": "2025-11-04T15:02:00Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33045",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1625,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2914415786,
      "number": 33626,
      "title": "ci: run native fuzz with MSAN job",
      "body": "I think this job should exist in this repo (not just qa-assets), if the alternative is double-handling changes to the interpreter. #32998 made changes which were then re-changed in #33600, to work around a false positive.\r\n\r\nThe unchached runtime of this job with `-lg` is `~32m`, with `-md` it's `~43m`.\r\n\r\nTimeout is set to 150m, as the slow GHA runners were close to hitting a 120m limit.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-14T16:57:56Z",
      "updated_at": "2025-11-04T13:58:29Z",
      "merged_at": "2025-11-04T13:58:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33626",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 425,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2024329542,
      "number": 30670,
      "title": "doc: Extend developer-notes with file-name-only debugging fix",
      "body": "Split out of https://github.com/bitcoin/bitcoin/pull/30454#discussion_r1714285678\r\n\r\nWhile testing the new `cmake` build with [CLion](https://youtrack.jetbrains.com/issue/CPP-15850/Debugger-doesnt-stop-on-breakpoints-in-case-of-fdebug-prefix-map#focus=Comments-27-4926356.0-0), I noticed that the tests don't always stop at the set breakpoints, so I've updated the `developer-notes.md`, hoping it will be useful for others experiencing the same.\r\n\r\nAdded links to  gdb and lldb documentations.\r\n\r\nAssumed a default directory (similarly to https://github.com/hebasto/bitcoin/pull/328/files#diff-4d2a64ce14cb8b971dbba9455421b04ae7ed0c489c66d983664be5632b0de4a3R19) to make the commands more realistic.\r\n\r\nExtended the possible debugging fixes with `file-name-only` option.\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-08-18T10:36:33Z",
      "updated_at": "2025-11-04T12:05:03Z",
      "merged_at": "2024-11-04T20:54:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30670",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 834,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2106658215,
      "number": 31030,
      "title": "test: use context managers and add file existence checks in feature_fee_estimation.py",
      "body": "update feature_fee_estimation.py test script to improve resource management and exception safety:\r\n\r\nUse context managers for file operations: Replaced all instances of file handling using \"open()\" with \"with open()\" statements to ensure files are properly closed after their operations, even if exceptions occur.\r\n\r\nAdd file existence checks: Before performing file operations like os.utime() and os.remove(), added checks using os.path.exists() to prevent errors when files are missing.\r\n\r\n\r\n",
      "state": "closed",
      "user": "AgusR7",
      "created_at": "2024-10-04T02:24:16Z",
      "updated_at": "2025-11-04T12:05:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31030",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 580,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2081457380,
      "number": 30930,
      "title": "netinfo: add peer services column and outbound-only option",
      "body": "Been using this since May 2023.\r\n\r\n- add a peer services column (considered displaying the p2p_v2 flag as \"p\" or \"2\"; proposing \"2\" here for continuity with the \"v\" column, but \"p\" is fine for me as well)\r\n- clarify in the help that \"relaytxes\" and \"addr_relay_enabled\" are from getpeerinfo\r\n- hoist (and rename) the max level constant to use in top-level help, to avoid overlooking to update the top-level help if the value of the constant changes (as caught by Larry Ruane in review below)\r\n- add an optional \"outonly\" (or \"o\") argument for an outbound-only peer list, as suggested by Vasil Dimov in his review below. Several people have requested this, to keep the output within screen limits when running netinfo as a live dashboard (i.e. with `watch`) on a node with many peers. While doing this, also permit passing \"h\" for the help in addition to \"help\".",
      "state": "closed",
      "user": "jonatack",
      "created_at": "2024-09-19T16:33:34Z",
      "updated_at": "2025-11-04T12:05:02Z",
      "merged_at": "2024-11-04T20:51:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30930",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 920,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2159566876,
      "number": 31205,
      "title": "Improve lockunspent validation for vout",
      "body": "This PR adds a check for the vout value passed during the `lockunspent` RPC call. The code verifies if a floating-point number is provided and returns a descriptive error message.\r\n\r\nThe primary goal of this change is to enhance the user experience by providing clear feedback on invalid parameters. Currently, when a floating-point value is passed for the `vout`, it results in a vague \"JSON integer out of range\" error. This message is not descriptive and can lead to user confusion. By implementing this check, users will immediately understand that `vout` must be strictly an integer.",
      "state": "closed",
      "user": "Abdulkbk",
      "created_at": "2024-11-03T09:24:51Z",
      "updated_at": "2025-11-04T12:05:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31205",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 628,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2160666413,
      "number": 31208,
      "title": "doc: archive release notes for v27.2",
      "body": "Archive `v27.2`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-04T11:21:13Z",
      "updated_at": "2025-11-04T12:05:00Z",
      "merged_at": "2024-11-04T12:20:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31208",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 53,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2161237173,
      "number": 31214,
      "title": "guix: Do not set `C{PLUS}_INCLUDE_PATH` variables for Darwin builds",
      "body": "When cross-building for macOS, the `C{PLUS}_INCLUDE_PATH` environment variables modify the default include directories for both native GCC and cross Clang compilers, which is overkill and undesirable for the latter.\r\n\r\nThis change avoids setting the `C{PLUS}_INCLUDE_PATH` environment variables and instead sets the required `-isystem` flags for the native compiler explicitly.\r\n\r\nAdditionally, this PR helps avoid non-trivial [patching](https://github.com/bitcoin/bitcoin/blob/add3067e766db6f6732836f2c3191a627583c18a/depends/patches/qt/guard_headers_properly.patch) of Qt 6.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-11-04T15:58:46Z",
      "updated_at": "2025-11-04T12:04:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31214",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 644,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2962596322,
      "number": 33744,
      "title": "ci: Fix lint runner selection (and docker cache)",
      "body": "Fixes: #33735\r\n\r\nCorrect runner type selection for the lint job.\r\n\r\nThis was erroneously left-out during refactor of the runner selection mechanism in #33302 causing the lint job to run on GH hosts (and therefore not be able to acces local cirrus caches).",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2025-10-30T10:38:58Z",
      "updated_at": "2025-11-04T11:43:45Z",
      "merged_at": "2025-11-04T11:37:32Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33744",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 304,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2897815763,
      "number": 33574,
      "title": "doc: update Guix INSTALL.md",
      "body": "It's somewhat annoying that Guix is falling out of being packaged by distros. For some more context, see https://lwn.net/Articles/1035491/.\r\n> However, it is likely that the [Guix](https://guix.gnu.org/en/) package manager will soon be removed from the repositories for Debian 13 and Debian 12 (\"bookworm\", also called oldstable).\r\n\r\nThis seems to be happening. You can't `apt install guix` using the current release of Debian. https://packages.debian.org/search?keywords=guix. Guix is not going to be included in next release of Ubuntu (`25.10`): https://packages.ubuntu.com/search?keywords=guix.\r\n\r\nLooking at https://aur.archlinux.org/packages/guix, comments over the last few months seem to indicate that the build is broken.\r\n\r\nA 1.5.0 release is planned for sometime in January 2026: https://codeberg.org/guix/release-planning/wiki/release-1.5.0-project/. So hopefully the situation is going to improve in future.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-08T15:05:36Z",
      "updated_at": "2025-11-04T11:35:42Z",
      "merged_at": "2025-11-04T11:34:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33574",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 947,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2846370112,
      "number": 33445,
      "title": "ci: Update Clang in \"tidy\" job",
      "body": "This PR:\r\n\r\n1. Updates to [IWYU 0.25](https://github.com/include-what-you-use/include-what-you-use/releases/tag/0.25), which is compatible with Clang 21.\r\n\r\n2. Fixes new \"modernize-use-default-member-init\" warnings. The warning in `interpreter.cpp` is a [false positive](https://github.com/llvm/llvm-project/issues/160394), so it has been suppressed.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-09-20T16:13:30Z",
      "updated_at": "2025-11-04T11:22:57Z",
      "merged_at": "2025-11-04T10:16:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33445",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 381,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2466869048,
      "number": 32301,
      "title": "test: cover invalid codesep positions for signature in taproot",
      "body": "There is some basic coverage, but I felt like adding some boundary conditions where the only issue is the codesep value would be nice.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-04-17T20:18:23Z",
      "updated_at": "2025-11-04T09:57:05Z",
      "merged_at": "2025-11-04T09:57:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32301",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 197,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2825556259,
      "number": 33385,
      "title": "contrib: Add bash completion for new bitcoin command",
      "body": "Adds a bash completion script for the new bitcoin command-line tool (introduced in #31375), which unifies the main Bitcoin Core executables under a single interface. This feature improves usability, reduces errors, and makes the command-line tools more easily discoverable for users working in a Linux bash environment.\r\n\r\nThe completion script dynamically lists available commands and options by parsing `bitcoin --help` and `bitcoin help`. It also incorporates the existing bash completions for `bitcoind`, `bitcoin-cli`, and `bitcoin-tx`, depending on the argument provided (`node`, `rpc`, or `tx`). This ensures that all relevant completions are available seamlessly through a single interface without modifying core functionality.\r\n\r\n**Key points:**\r\n- Improves developer and user experience on the command line.\r\n- Does not modify or replace existing functionality.\r\n- Placed under `contrib/` for easy installation by users and distributions.",
      "state": "open",
      "user": "caesrcd",
      "created_at": "2025-09-13T15:34:35Z",
      "updated_at": "2025-11-04T08:54:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33385",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1001,
        "has_nack": false,
        "has_ack": false
      }
    }
  ],
  "issues": [
    {
      "id": 3322502078,
      "number": 33188,
      "title": "asan: GCC warning about use-after-free",
      "body": "GCC is warning about use-after-free in the recently added ASAN unpoisoning:\n```bash\n# gcc (GCC) 15.2.1 20250808 (Red Hat 15.2.1-1)\n# cmake -B build -DSANITIZERS=address\nIn file included from /root/bitcoin/src/util/check.h:131,\n                 from /root/bitcoin/src/random.h:13,\n                 from /root/bitcoin/src/test/util/random.h:9,\n                 from /root/bitcoin/src/test/util/setup_common.h:19,\n                 from /root/bitcoin/src/test/util/setup_common.cpp:5:\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘std::pair<CMutableTransaction, long int> TestChain100Setup::CreateValidTransaction(const std::vector<std::shared_ptr<const CTransaction> >&, const std::vector<COutPoint>&, int, const std::vector<CKey>&, const std::vector<CTxOut>&, const std::optional<CFeeRate>&, const std::optional<unsigned int>&)’ at /root/bitcoin/src/test/util/setup_common.cpp:486:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /root/bitcoin/src/memusage.h:10,\n                 from /root/bitcoin/src/core_memusage.h:10,\n                 from /root/bitcoin/src/kernel/mempool_entry.h:10,\n                 from /root/bitcoin/src/test/util/setup_common.cpp:18:\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘std::pair<CMutableTransaction, long int> TestChain100Setup::CreateValidTransaction(const std::vector<std::shared_ptr<const CTransaction> >&, const std::vector<COutPoint>&, int, const std::vector<CKey>&, const std::vector<CTxOut>&, const std::optional<CFeeRate>&, const std::optional<unsigned int>&)’ at /root/bitcoin/src/test/util/setup_common.cpp:486:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n<snip>\nIn file included from /root/bitcoin/src/util/check.h:131,\n                 from /root/bitcoin/src/random.h:13,\n                 from /root/bitcoin/src/test/util/random.h:9,\n                 from /root/bitcoin/src/test/util/setup_common.h:19,\n                 from /root/bitcoin/src/test/transaction_tests.cpp:7:\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /root/bitcoin/src/memusage.h:10,\n                 from /root/bitcoin/src/core_memusage.h:10,\n                 from /root/bitcoin/src/coins.h:10,\n                 from /root/bitcoin/src/script/sign.h:10,\n                 from /root/bitcoin/src/test/transaction_tests.cpp:23:\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::max_standard_legacy_sigops::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1150:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::spends_witness_prog::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1305:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::test_Get::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:450:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::test_IsStandard::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1055:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\ncc @dergoegge ",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-08-14T14:45:19Z",
      "updated_at": "2026-01-14T21:58:43Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33188",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3245138164,
          "user": "dergoegge",
          "body": "This is a false positive. If someone is using gcc with asan we could move `ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);` above the `delete` call to avoid this warning (I suspect).",
          "created_at": "2025-09-02T12:34:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 190,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 9531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3768084891,
      "number": 34175,
      "title": "qa: `feature_pruning.py` fails when built `ENABLE_WALLET=OFF`",
      "body": "Below are the steps to reproduce the bug:\n```\n$ cmake -B build -DENABLE_WALLET=OFF\n$ cmake --build build\n$ ./build/test/functional/feature_pruning.py --tmpdir $(pwd)/tmp\n2025-12-29T18:31:27.385714Z TestFramework (INFO): PRNG seed is: 6842027149269818275\n2025-12-29T18:31:27.386337Z TestFramework (INFO): Initializing test directory /home/hebasto/dev/bitcoin/tmp\n2025-12-29T18:31:28.135416Z TestFramework (INFO): Warning! This test requires 4GB of disk space\n2025-12-29T18:31:28.135533Z TestFramework (INFO): Mining a big blockchain of 995 blocks\n2025-12-29T18:31:49.087269Z TestFramework (INFO): Check that we haven't started pruning yet because we're below PruneAfterHeight\n2025-12-29T18:31:49.087331Z TestFramework (INFO): Success\n2025-12-29T18:31:49.087425Z TestFramework (INFO): Though we're already using more than 550MiB, current usage: 592.1861515045166\n2025-12-29T18:31:49.087446Z TestFramework (INFO): Mining 25 more blocks should cause the first block file to be pruned\n2025-12-29T18:31:49.917042Z TestFramework (INFO): Success\n2025-12-29T18:31:49.917238Z TestFramework (INFO): Usage should be below target: 480.3139057159424\n2025-12-29T18:31:49.917265Z TestFramework (INFO): Check that we'll exceed disk space target if we have a very high stale block rate\n2025-12-29T18:31:49.917287Z TestFramework (INFO): Mine 24 (stale) blocks on Node 1, followed by 25 (main chain) block reorg from Node 0, for 12 rounds\n2025-12-29T18:32:23.946016Z TestFramework (INFO): Usage can be over target because of high stale rate: 640.085205078125\n2025-12-29T18:32:23.947212Z TestFramework (INFO): Check that we can survive a 288 block reorg still\n2025-12-29T18:32:23.947673Z TestFramework (INFO): Current block height: 1320\n2025-12-29T18:32:23.948098Z TestFramework (INFO): Invalidating block 170863767faea392ccf9ff5b962cc758ebe9991b2562af2f3aa044c321d175e2 at height 1033\n2025-12-29T18:32:24.322179Z TestFramework (INFO): New best height: 1032\n2025-12-29T18:32:24.429004Z TestFramework (INFO): Generating new longer chain of 300 more blocks\n2025-12-29T18:32:24.562884Z TestFramework (INFO): Reconnect nodes\n2025-12-29T18:32:25.769411Z TestFramework (INFO): Verify height on node 2: 1332\n2025-12-29T18:32:25.769654Z TestFramework (INFO): Usage possibly still high because of stale blocks in block files: 640.085205078125\n2025-12-29T18:32:25.769682Z TestFramework (INFO): Mine 220 more large blocks so we have requisite history\n2025-12-29T18:32:32.175362Z TestFramework (INFO): Usage should be below target: 448.4003086090088\n2025-12-29T18:32:32.175530Z TestFramework (INFO): Test that we can rerequest a block we previously pruned if needed for a reorg\n2025-12-29T18:32:33.817865Z TestFramework (INFO): Will need to redownload block 1033\n2025-12-29T18:32:33.938875Z TestFramework (INFO): Rewind node 0 to prev main chain to mine longer chain to trigger redownload. Blocks needed: 233\n2025-12-29T18:32:35.807399Z TestFramework (INFO): Verify node 2 reorged back to the main chain, some blocks of which it had to redownload\n2025-12-29T18:32:38.244340Z TestFramework (INFO): Test manual pruning with block indices\n2025-12-29T18:32:39.327901Z TestFramework (INFO): Success\n2025-12-29T18:32:39.327948Z TestFramework (INFO): Test manual pruning with timestamps\n2025-12-29T18:32:40.410622Z TestFramework (INFO): Success\n2025-12-29T18:32:40.410722Z TestFramework (INFO): Test invalid pruning command line options\n2025-12-29T18:32:40.580461Z TestFramework (INFO): Test scanblocks can not return pruned data\n2025-12-29T18:32:40.583664Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 481, in run_test\n    self.test_scanblocks_pruned()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 496, in test_scanblocks_pruned\n    assert_raises_rpc_error(-1, \"Block not available (pruned data)\", node.scanblocks,\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        \"start\", [{\"desc\": f\"raw({false_positive_spk.hex()})\"}], 0, 0, \"basic\", {\"filter_false_positives\": True})\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: No exception raised\n2025-12-29T18:32:40.636711Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-29T18:32:40.636826Z TestFramework (WARNING): Not cleaning up dir /home/hebasto/dev/bitcoin/tmp\n2025-12-29T18:32:40.636857Z TestFramework (ERROR): Test failed. Test logging available at /home/hebasto/dev/bitcoin/tmp/test_framework.log\n2025-12-29T18:32:40.636939Z TestFramework (ERROR): \n2025-12-29T18:32:40.637012Z TestFramework (ERROR): Hint: Call /home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/home/hebasto/dev/bitcoin/tmp' to consolidate all logs\n2025-12-29T18:32:40.637031Z TestFramework (ERROR): \n2025-12-29T18:32:40.637048Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-29T18:32:40.637086Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-29T18:32:40.637103Z TestFramework (ERROR): \n[node 5] Cleaning up leftover process\n[node 4] Cleaning up leftover process\n[node 3] Cleaning up leftover process\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n```\n\nThe combined log appears to be too large to upload to GitHub.\n\nThis was initially observed on NetBSD and was later reproduced on Fedora 43.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-29T18:46:08Z",
      "updated_at": "2026-01-14T20:58:57Z",
      "closed_at": "2026-01-14T20:58:57Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34175",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3700577726,
          "user": "brunoerg",
          "body": "I was able to reproduce it on macOS 14.3:\n\n```\ncmake -B build_no_wallet -DENABLE_IPC=OFF -DENABLE_WALLET=OFF && cmake --build build_no_wallet -j 10 && ./build_no_wallet/test/functional/feature_pruning.py --tmpdir $(pwd)/tmp\n```\n\n```sh\n2025-12-30T21:10:45.025328Z TestFramework (INFO): Test manual pruning with block indices\n2025-12-30T21:10:46.286682Z TestFramework (INFO): Success\n2025-12-30T21:10:46.286738Z TestFramework (INFO): Test manual pruning with timestamps\n2025-12-30T21:10:47.544538Z TestFramework (INFO): Success\n2025-12-30T21:10:47.544656Z TestFramework (INFO): Test invalid pruning command line options\n2025-12-30T21:10:47.686153Z TestFramework (INFO): Test scanblocks can not return pruned data\n2025-12-30T21:10:47.688006Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build_no_wallet/test/functional/feature_pruning.py\", line 481, in run_test\n    self.test_scanblocks_pruned()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build_no_wallet/test/functional/feature_pruning.py\", line 496, in test_scanblocks_pruned\n    assert_raises_rpc_error(-1, \"Block not available (pruned data)\", node.scanblocks,\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        \"start\", [{\"desc\": f\"raw({false_positive_spk.hex()})\"}], 0, 0, \"basic\", {\"filter_false_positives\": True})\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: No exception raised\n2025-12-30T21:10:47.742645Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-30T21:10:47.742746Z TestFramework (WARNING): Not cleaning up dir /Users/brunogarcia/projects/bitcoin-core-dev/tmp\n2025-12-30T21:10:47.742778Z TestFramework (ERROR): Test failed. Test logging available at /Users/brunogarcia/projects/bitcoin-core-dev/tmp/test_framework.log\n2025-12-30T21:10:47.742868Z TestFramework (ERROR):\n2025-12-30T21:10:47.742948Z TestFramework (ERROR): Hint: Call /Users/brunogarcia/projects/bitcoin-core-dev/test/functional/combine_logs.py '/Users/brunogarcia/projects/bitcoin-core-dev/tmp' to consolidate all logs\n2025-12-30T21:10:47.742973Z TestFramework (ERROR):\n2025-12-30T21:10:47.742996Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-30T21:10:47.743040Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-30T21:10:47.743061Z TestFramework (ERROR):\n[node 5] Cleaning up leftover process\n[node 4] Cleaning up leftover process\n[node 3] Cleaning up leftover process\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n```",
          "created_at": "2025-12-30T21:12:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3263,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3700610506,
          "user": "brunoerg",
          "body": "I did not investigate it in depth, but I think we shouldn't test the behavior of `scanblocks` for a pruned node, especially filtering false positives, with the genesis block since it has no undo data. Also, without wallet, the `wallet_test` is skipped so node5 isn't synced with node0 and the prune isn't done?",
          "created_at": "2025-12-30T21:33:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 310,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6076,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3363174902,
      "number": 33266,
      "title": "signet: disk-space-DoS due to low mining difficulty",
      "body": "Due to low mining difficulty on Signet, an attacker can grind all possible nonces of a block header and create valid[^valid], alternative headers for Signet blocks. Since these have the [same chain work](https://github.com/bitcoin/bitcoin/blob/6ca6f3b37b992591726bd13b494369bee3bd6468/src/validation.cpp#L4416) as the tip, the newly mined headers [can](https://github.com/bitcoin/bitcoin/blob/6ca6f3b37b992591726bd13b494369bee3bd6468/src/validation.cpp#L4435) be submitted along with the original block content via an unsolicited `block` P2P message. Nodes that don't prune will store these blocks indefinitely.\n\nWhen initially reported in April 2025, on average 13208298 work (hash attempts) were required to find a valid nonce on the default Signet. Now, after the difficulty on Signet was increased[^signet-difficulty-increased], [recent signet blocks](https://mempool.space/signet/block/00000012e826e2a7bfc888e43b37969c5b8aafa1bcc2b3a389c238d0ef733500) require 209338421 work on average. This results in 2^32 / 13208298 = ~325 valid headers for each block on average in April and 2^32 / 209338421 = ~20 valid headers for each block at the current Signet difficulty. An attacker can use this to fill up the disk of a Signet node.\n\nAssuming 144 Signet blocks per day and assuming a size of 500kB[^signet-blocks-size] per block, the signet disk usage increases by about 72 MB per day. An attack could have resulted in a disk-usage increase of 325 * 72 MB = 23.4 GB per day in April. With the current difficulty, it could result in a disk-usage increase of 20 * 72 MB = 1.44 GB per day.\n\nA modern laptop can grind the full 2^32 nonce space in less than 30 seconds and an attacker only needs to store the nonces to build and publish the alternative blocks. This makes the attack fairly trivial to exploit. \n\nCredit goes to @stwenhao for initially reporting this in a fork-observer [issue]( https://github.com/0xB10C/fork-observer/issues/61). The attack can be detected via `getchaintips` and e.g. tools like fork-observer. The alternative blocks show up as `valid-headers`. No reorg happens as the original block remains the active tip (since it was seen first).\n\n<img width=\"3169\" height=\"954\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/386d2490-f037-4885-a083-dc2bc3803bba\" />\n\nThe attack is possible on all networks that require less than 2^32 work to find blocks. Pruned nodes are not affected as the alternative blocks are removed at some point. I'm opening this issue is to document this somewhere visible. I don't think there's action required for the default Signet at this point since the difficulty has already been increased and the attack is less effective there now. If this becomes a problem again, the best mitigation is probably to further increase the difficulty. Other public signets (e.g. Mutinynet) might want to consider increasing the mining difficulty too.\n\n[^valid]: Signet blocks commit to the header version, prevhash, merkleroot, and timestamp. These can't be changed. Only the nonce can be changed to produce valid, alternative headers. \n[^signet-blocks-size]:  filling Signet blocks with transactions is possible for *free*, but blocks seem to be limited to 1 MWU. Consistently making 500 kB blocks seems to be possible for an attacker \n[^signet-difficulty-increased]: The Signet difficulty was increased at the end of April 2025 in response to a private report.<img width=\"400\" height=\"150\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/15f1888c-3cd7-4409-a4f0-ff5f53fbc0bd\" />\n\n",
      "state": "open",
      "user": "0xB10C",
      "created_at": "2025-08-28T12:38:43Z",
      "updated_at": "2026-01-14T20:54:08Z",
      "closed_at": null,
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/33266",
      "labels": [
        "Bug",
        "Resource usage"
      ],
      "comment_data": [
        {
          "id": 3236886747,
          "user": "jsarenik",
          "body": "Would such blocks mined by anyone even be considered valid on signet since they would not contain any expected valid signature?\n\nOn signet there's an \"Additional consensus requirement that the coinbase witness commitment contains an extended signet commitment, which is a script satisfying the block script (usually a k-of-n multisig)\" (see [bitcoin.it documentation on Signet Differences](https://en.bitcoin.it/wiki/Signet#Differences)). Maybe the in-repo documentation is not clear?",
          "created_at": "2025-08-29T12:31:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 484,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3237765557,
          "user": "0xB10C",
          "body": "> Would such blocks mined by anyone even be considered valid on signet since they would not contain any expected valid signature?\n\nYes. Just the nonce in the block header changes. The signet commitment commits to the header version, prevhash, merkleroot, and timestamp. It does not commit (and can not commit) to the nonce. The underlying block does not change. The commitment remains valid.",
          "created_at": "2025-08-29T17:42:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 391,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3239535357,
          "user": "stwenhao",
          "body": "> It does not commit (and can not commit) to the nonce.\n\nI agree, that it does not commit to the nonce. But if that would be needed, then it could. An example of a situation, where things are signed, but where nonce is included in signed commitment, is what I deployed as a Proof of Work puzzle: https://bitcointalk.org/index.php?topic=5551080.0\n\nOr, a similar case is recently deployed Optional Hourglass: https://bitcointalk.org/index.php?topic=5557305.0\n\nIn that cases, the signature can sign everything (for example, nSequence and nLockTime is signed, and both can be used as nonces during mining). And also, signatures can sign less things, by using different sighashes, for example here: https://mempool.space/tx/8349df0753e80cce322322f1b76789e1d0fd6693aed2f4de4e49576423081ae7\n\nSo, I can imagine a perfectly valid Signet challenge, where the size of the signature will be restricted somehow, where it would use different sighashes, than SIGHASH_ALL, or where miners would grind DER signatures, instead of grinding regular 80-byte block headers.\n\nTo sum up: the current design of Signet allows attacking, by changing nonces into different values. But that attack can be trivially stopped, just by making sure, that for a given signed header, there is only one nonce, meeting a given difficulty (which means always checking all 2^32 nonces for each submitted header).\n\nBut, future signets can use a different model, where they could entirely avoid such problems, and work with much smaller difficulty. Imagine taking this signet challenge:\n```\n1 <pubkeyAlice> <pubkeyBob> 2 OP_CHECKMULTISIG\n```\nAnd turning it into this instead:\n```\nOP_SIZE 61 70 OP_WITHIN OP_VERIFY\nOP_CODESEPARATOR\n1 <pubkeyAlice> <pubkeyBob> 2 OP_CHECKMULTISIG\n```\nOf course, because the Script from signet challenge can change the signed transaction ID, this is incompatible with currently deployed network. However, I can imagine a soft-fork on top of signet, where signatures would be required to be smaller, than they are, and where Proof of Work will be counted, by checking the signature, rather than by checking the hash in the block header. And then, block headers could have even regtest difficulty, if consensus rules would still require grinding something else (that could commit to the block header nonce, and difficulty as well).\n\nEdit: Also, there are many possible trivial fixes. For example, if each nonce will be restricted by consensus rules to be less than 0x00010000, then it could work, and it would be trivial, to check all 2^16 values, instead of 2^32.",
          "created_at": "2025-08-30T20:51:55Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 2550,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3239755243,
          "user": "jsarenik",
          "body": "What about a safety one-liner fix which would not allow new block to have the same blockheader (except nonce) than an already mined block? Such a local-node \"soft-fork\" would be possible even without telling anyone network-wise.\n\nAn attack block could come only _after_ a new unique mined&signed block header was announced.",
          "created_at": "2025-08-31T04:44:16Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 323,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3239765781,
          "user": "stwenhao",
          "body": "> What about a safety one-liner fix which would not allow new block to have the same blockheader (except nonce) than an already mined block?\n\nAs long as you know, which block was propagated first, then you can do that. But note that signet block producers can decide to build things on top of any block, including something, which was grinded by some attacker. If you see two or more blocks with different nonces, at the same height N, then you don't know, what block number N+1 will sign (and also, it can sign all versions, and leave it up to the miners).\n\n> Such a local-node \"soft-fork\" would be possible even without telling anyone network-wise.\n\nYes, but if your node joined the network recently, then you don't know, if the block you heard from someone is the earliest one, that was broadcasted. You only know that, if something was created on top of it. Which means, that there is always a risk to see a single block being reorged, if you pick it wrong.\n\nEdit: Also note, that the default signet challenge is 1-of-2 multisig. Which means, that you can have for example two different nodes, making signatures for two different public keys. Both nodes can be connected to the same network, but they don't have to maintain a direct P2P connection. Which means, that if you have one signet miner, and another signet miner, and there are some attackers in the middle, then they can capture the real block, grind it (also with ASICs, because why not), and share different headers with different nodes.",
          "created_at": "2025-08-31T05:01:35Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 1,
            "text_length": 1503,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3258202695,
          "user": "0xB10C",
          "body": "My impression is that just increasing the difficulty on a public Signet should be enough and would avoid this issue without needing a (signet only) (consensus) code change. It doesn't even need to be difficulty 1 (i.e. 2^32 work) - similar to the default signet only requiring 5% of work at the risk of 19 alternative blocks per tip. The attack is easily detectable and if exploited over a long period of time, the signet admin can further increase the difficulty at any time. Alternatively, publishing new blocks in batches ensures an attacker doesn't have enough time to mine alternatives for each tip.\n\nIt probably needs some documentation though: Either run your public signet with a high enough difficulty or risk being disk-space DoSed by some script kiddy. After all, it's only a test network. \n\nAFAIK, so far nobody else bothered to mine alternative blocks on the default signet and neither on Mutinynet where it is/was trivial to grow the chain by 100GB per day (https://github.com/MutinyWallet/mutiny-net/pull/4).\n\n ",
          "created_at": "2025-09-05T12:36:38Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 1026,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3258376429,
          "user": "stwenhao",
          "body": "> and would avoid this issue without needing a (signet only) (consensus) code change.\n\nYes, but signet-only consensus code change can be beneficial. If your difficulty requires grinding 2^20 hashes, then I think nonce values should be masked, to make sure, that upper bits are set to zero. Then, if the difficulty will increase, the code can automatically raise that barrier, so that the nonce restrictions will be active only for difficulties requiring less than 2^32 hashes.\n\nBecause if you need to grind for example 2^16 hashes, then it is more realistic, if your nonce is also masked with 0x0000ffff. After all, miners constantly check a lot of different block headers, and they tweak version bits, timestamps, or change merkle roots. Restricting the nonce would mimic that behaviour for signets.",
          "created_at": "2025-09-05T13:33:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 800,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3319342245,
          "user": "benthecarman",
          "body": "@stwenhao i don't think restricting the nonce adds any meaningful protection. The attacker can also use the merkle root as a nonce field because they do not need to actually include txs. If you limit the nonces, they can just change the merkle root until they find a block ",
          "created_at": "2025-09-22T14:21:45Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 273,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3319405111,
          "user": "0xB10C",
          "body": "> [@stwenhao](https://github.com/stwenhao) i don't think restricting the nonce adds any meaningful protection. The attacker can also use the merkle root as a nonce field because they do not need to actually include txs. If you limit the nonces, they can just change the merkle root until they find a block\n\nThe signet solution commits to the merkleroot. Changing it will produce invalid Signet blocks:\n\nhttps://github.com/bitcoin/bitcoin/blob/953544d0286ba35dd1b07fe1921c573cba4703cf/src/signet.cpp#L112-L117",
          "created_at": "2025-09-22T14:29:11Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 508,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3674718307,
          "user": "jsarenik",
          "body": "Does this issue relate at all to the fixed CVE-2025-54604 - Disk filling from spoofed self connections in https://github.com/bitcoin/bitcoin/pull/32604 ?\n\nhttps://bitcoincore.org/en/2025/10/24/disclose-cve-2025-54604/",
          "created_at": "2025-12-19T11:32:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 217,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3674774947,
          "user": "maflcko",
          "body": "> Does this issue relate at all to the fixed [CVE-2025-54604](https://github.com/advisories/GHSA-6wcj-m5m4-hw9r) - Disk filling from spoofed self connections in [#32604](https://github.com/bitcoin/bitcoin/pull/32604) ?\n> \n> https://bitcoincore.org/en/2025/10/24/disclose-cve-2025-54604/\n\nI think the two are separate:\n\n* One is about rate limiting all logs, so that the persisted `debug.log` file does not grow in size too fast.\n* This one is about creating and persisting blocks to the `block*.dat` files, and how it can be worked around by a higher difficulty.",
          "created_at": "2025-12-19T11:51:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 562,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3591,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3375787221,
      "number": 33280,
      "title": "use -loadblock to load blk*****.dat files, but the blocks in it are not recognized",
      "body": "The background is I'm trying to measure the performance of connecting real blocks when the needed inputs are not in memory. My first idea is to get some blk*****.dat files with `-stopatheight` and then use `-stopafterblockimport` and `-loadblock` to load these blk files (ConnectBlock() will run when doing this) to see the performance. But I found the blk*****.dat files can not be recognized by the code.\nThough I now found an alternative way `VerifyDB()` can be leveraged to achieve my goal. I'd like still to put the above issue here.\nThe bitcoin core code I use is at HEAD `6ca6f3b37b Merge bitcoin/bitcoin#33241: Update libmultiprocess subtree to fix build issues`\n\n### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\n\n1. I first run bitcoind -prune=1024 -stopatheight=840000 -datadir=empty_dir, then there is some block files in empty_dir/blocks.\n2. Then I copy empty_dir to empty_dir2, run bitcoind -prune=1024 -stopatheight=840050 -datadir=empty_dir2\nCompare two blocks dir, I now have some blk.dat files relects height 840000 to 840050.\n3. At last I copy empty_dir to empty_dir3, and run bitcoind -datadir=empty_dir3 -assumevalid=0 -prune=10240 -stopafterblockimport -networkactive=0 -noconnect -listen=0 -dnsseed=0 -dns=0 -loadblock=blk04241.dat ...... -loadblock=blk04252.dat, the result shows it finds 0 blocks from those files, and I did some test, I found the reason is those files don't have the main Magic bytes f9beb4d9\n\nAnything wrong?\n\n### Expected behaviour\n\nthe blocks from height 840001 to 840050 are loaded from those blk files and connected to the chain.\n\n### Steps to reproduce\n\nsee above\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster\n\n### Operating system and version\n\nubuntu22.04 LTS\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-09-02T12:18:08Z",
      "updated_at": "2026-01-14T20:29:47Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33280",
      "labels": [
        "RPC/REST/ZMQ",
        "Block storage"
      ],
      "comment_data": [
        {
          "id": 3245814664,
          "user": "mzumsande",
          "body": "are the two datadirs using the same xor.dat or was it disabled  (see `-blocksxor`)?  ",
          "created_at": "2025-09-02T15:25:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 85,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3248621270,
          "user": "HowHsu",
          "body": "> are the two datadirs using the same xor.dat or was it disabled (see `-blocksxor`)?\n\nI didn't add `-blocksxor`, but I compared two xor.dat in the two blocks dir (with `vim -b`, shows `<93><80><a5><b4><fb>^_<b3><b8>`), seems they are same. ",
          "created_at": "2025-09-03T10:16:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 240,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3255070665,
          "user": "l0rinc",
          "body": "It also seems to me like a xor mismatch.\nCould you quote the start of the logs for both source and target instance what the obfuscation key values were?\n\n```bash\ncat debug.log | grep 'Using obfuscation key for'\n```",
          "created_at": "2025-09-04T18:38:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 214,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3261918000,
          "user": "HowHsu",
          "body": "Some clarification about my steps below:\n```\n\n1. I first run bitcoind -prune=1024 -stopatheight=840000 -datadir=empty_dir, then there is some block files in empty_dir/blocks.\n2. Then I copy empty_dir to empty_dir2, run bitcoind -prune=1024 -stopatheight=840050 -datadir=empty_dir2\nCompare two blocks dir, I now have some blk.dat files relects height 840000 to 840050.\n3. At last I copy empty_dir to empty_dir3, and run bitcoind -datadir=empty_dir3 -assumevalid=0 -prune=10240 -stopafterblockimport -networkactive=0 -noconnect -listen=0 -dnsseed=0 -dns=0 -loadblock=blk04241.dat ...... -loadblock=blk04252.dat, the result shows it finds 0 blocks from those files, and I did some test, I found the reason is those files don't have the main Magic bytes f9beb4d9\n\n```\n\nI found the reason is the xor key is different in step 2 and step 3. But I do copy the xor.dat when copying empty_dir to empty_dir2 and empty_dir3, and from the code, I saw the blocks/xor.dat is used when there are not only hidden files in the blocks dir. So seems the xor key should be the same since the xor.dat is the initial one.\nI'm still investigating on it.",
          "created_at": "2025-09-06T11:34:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1129,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3262044272,
          "user": "HowHsu",
          "body": "> Some clarification about my steps below:\n> \n> ```\n> \n> 1. I first run bitcoind -prune=1024 -stopatheight=840000 -datadir=empty_dir, then there is some block files in empty_dir/blocks.\n> 2. Then I copy empty_dir to empty_dir2, run bitcoind -prune=1024 -stopatheight=840050 -datadir=empty_dir2\n> Compare two blocks dir, I now have some blk.dat files relects height 840000 to 840050.\n> 3. At last I copy empty_dir to empty_dir3, and run bitcoind -datadir=empty_dir3 -assumevalid=0 -prune=10240 -stopafterblockimport -networkactive=0 -noconnect -listen=0 -dnsseed=0 -dns=0 -loadblock=blk04241.dat ...... -loadblock=blk04252.dat, the result shows it finds 0 blocks from those files, and I did some test, I found the reason is those files don't have the main Magic bytes f9beb4d9\n> ```\n> \n> I found the reason is the xor key is different in step 2 and step 3. But I do copy the xor.dat when copying empty_dir to empty_dir2 and empty_dir3, and from the code, I saw the blocks/xor.dat is used when there are not only hidden files in the blocks dir. So seems the xor key should be the same since the xor.dat is the initial one. I'm still investigating on it.\n\nSorry, . Checked again, the obfuscation key for *.dat files are indded the same one. So it's not the xor issue.\n```\n2025-09-06T11:43:23Z Using obfuscation key for blocksdir *.dat files (/work/pr_test/datatmp/blocks): '9380a5b4fb1fb3b8'                                                      \n\n```",
          "created_at": "2025-09-06T12:20:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1447,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3262056024,
          "user": "HowHsu",
          "body": "Reduced block ranges to only one file, run logs attached below.\n```\nbitcoind -datadir=datatmp -assumevalid=0 -prune=10240 -stopafterblockimport -networkactive=0 -noconnect -listen=0 -dnsseed=0 -dns=0 -loadblock=data840010/blocks/blk04241.dat -loadblock=data840010/blocks/blk04242.dat\n2025-09-06T12:24:44Z Bitcoin Core version v29.99.0-unk (release build)\n2025-09-06T12:24:44Z parameter interaction: -listen=0 -> setting -natpmp=0\n2025-09-06T12:24:44Z parameter interaction: -listen=0 -> setting -discover=0\n2025-09-06T12:24:44Z parameter interaction: -listen=0 -> setting -listenonion=0\n2025-09-06T12:24:44Z parameter interaction: -listen=0 -> setting -i2pacceptincoming=0\n2025-09-06T12:24:44Z Using the 'x86_shani(1way,2way)' SHA256 implementation\n2025-09-06T12:24:44Z Using RdSeed as an additional entropy source\n2025-09-06T12:24:44Z Using RdRand as an additional entropy source\n2025-09-06T12:24:44Z Default data directory /root/.bitcoin\n2025-09-06T12:24:44Z Using data directory /work/pr_test/datatmp\n2025-09-06T12:24:44Z Config file: /work/pr_test/datatmp/bitcoin.conf (not found, skipping)\n2025-09-06T12:24:44Z Command-line arg: assumevalid=\"0\"\n2025-09-06T12:24:44Z Command-line arg: connect=false\n2025-09-06T12:24:44Z Command-line arg: datadir=\"datatmp\"\n2025-09-06T12:24:44Z Command-line arg: dns=\"0\"\n2025-09-06T12:24:44Z Command-line arg: dnsseed=\"0\"\n2025-09-06T12:24:44Z Command-line arg: listen=\"0\"\n2025-09-06T12:24:44Z Command-line arg: loadblock=\"data840010/blocks/blk04241.dat\"\n2025-09-06T12:24:44Z Command-line arg: loadblock=\"data840010/blocks/blk04242.dat\"\n2025-09-06T12:24:44Z Command-line arg: networkactive=\"0\"\n2025-09-06T12:24:44Z Command-line arg: prune=\"10240\"\n2025-09-06T12:24:44Z Command-line arg: stopafterblockimport=\"\"\n2025-09-06T12:24:44Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-09-06T12:24:44Z Warning: relative datadir option 'datatmp' specified, which will be interpreted relative to the current working directory '/work/pr_test'. This is fragile, because if bitcoin is started in the future from a different location, it will be unable to locate the current data files. There could also be data loss if bitcoin is started while in a temporary directory.\n2025-09-06T12:24:44Z scheduler thread start\n2025-09-06T12:24:44Z Binding RPC on address ::1 port 8332\n2025-09-06T12:24:44Z [libevent:warning] getaddrinfo: address family for nodename not supported\n2025-09-06T12:24:44Z Binding RPC on address ::1 port 8332 failed.\n2025-09-06T12:24:44Z Binding RPC on address 127.0.0.1 port 8332\n2025-09-06T12:24:44Z Generated RPC authentication cookie /work/pr_test/datatmp/.cookie\n2025-09-06T12:24:44Z Permissions used for cookie: rw-------\n2025-09-06T12:24:44Z Using random cookie authentication.\n2025-09-06T12:24:44Z Starting HTTP server with 16 worker threads\n2025-09-06T12:24:44Z Using wallet directory /work/pr_test/datatmp\n2025-09-06T12:24:44Z init message: Verifying wallet(s)…\n2025-09-06T12:24:44Z Using /16 prefix for IP bucketing\n2025-09-06T12:24:44Z init message: Loading P2P addresses…\n2025-09-06T12:24:44Z Loaded 31757 addresses from peers.dat  28ms\n2025-09-06T12:24:44Z init message: Loading banlist…\n2025-09-06T12:24:44Z SetNetworkActive: false\n2025-09-06T12:24:44Z Cache configuration:\n2025-09-06T12:24:44Z * Using 2.0 MiB for block index database\n2025-09-06T12:24:44Z * Using 8.0 MiB for chain state database\n2025-09-06T12:24:44Z * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n2025-09-06T12:24:44Z Script verification uses 15 additional threads\n2025-09-06T12:24:44Z Using obfuscation key for blocksdir *.dat files (/work/pr_test/datatmp/blocks): '9380a5b4fb1fb3b8'\n2025-09-06T12:24:44Z Opening LevelDB in /work/pr_test/datatmp/blocks/index\n2025-09-06T12:24:44Z Opened LevelDB successfully\n2025-09-06T12:24:44Z Using obfuscation key for /work/pr_test/datatmp/blocks/index: 0000000000000000\n2025-09-06T12:24:44Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n2025-09-06T12:24:44Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n2025-09-06T12:24:44Z init message: Loading block index…\n2025-09-06T12:24:44Z Validating signatures for all blocks.\n2025-09-06T12:24:44Z Setting nMinimumChainWork=0000000000000000000000000000000000000000b1f3b93b65b16d035a82be84\n2025-09-06T12:24:44Z Prune configured to target 10240 MiB on disk for block and undo files.\n2025-09-06T12:24:46Z Loading block index db: last block file = 4241\n2025-09-06T12:24:46Z Loading block index db: last block file info: CBlockFileInfo(blocks=32, size=57246369, heights=839969...840013, time=2024-04-19...2024-04-20)\n2025-09-06T12:24:46Z Checking all blk files are present...\n2025-09-06T12:24:46Z Loading block index db: Block files have previously been pruned\n2025-09-06T12:24:46Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n2025-09-06T12:24:46Z Opening LevelDB in /work/pr_test/datatmp/chainstate\n2025-09-06T12:24:46Z Opened LevelDB successfully\n2025-09-06T12:24:46Z Using obfuscation key for /work/pr_test/datatmp/chainstate: 2a94feefc21ba0b3\n2025-09-06T12:24:46Z Loaded best chain: hashBestChain=0000000000000000000320283a032748cef8227873ff4872689bf23f1cda83a5 height=840000 date=2024-04-20T00:09:27Z progress=0.801499\n2025-09-06T12:24:46Z init message: Verifying blocks…\n2025-09-06T12:24:46Z Verifying last 6 blocks at level 3\n2025-09-06T12:24:46Z Verification progress: 0%\n2025-09-06T12:24:46Z Verification progress: 16%\n2025-09-06T12:24:46Z Verification progress: 33%\n2025-09-06T12:24:46Z Verification progress: 50%\n2025-09-06T12:24:46Z Verification progress: 66%\n2025-09-06T12:24:46Z Verification progress: 83%\n2025-09-06T12:24:46Z Verification progress: 99%\n2025-09-06T12:24:46Z Verification: No coin database inconsistencies in last 6 blocks (15601 transactions)\n2025-09-06T12:24:46Z Block index and chainstate loaded\n2025-09-06T12:24:46Z init message: Pruning blockstore…\n2025-09-06T12:24:46Z block tree size = 912308\n2025-09-06T12:24:46Z nBestHeight = 840000\n2025-09-06T12:24:46Z init message: Starting network threads…\n2025-09-06T12:24:46Z DNS seeding disabled\n2025-09-06T12:24:46Z initload thread start\n2025-09-06T12:24:46Z init message: Done loading\n2025-09-06T12:24:46Z Reindexing block file blk04241.dat...\n2025-09-06T12:24:46Z msghand thread start\n2025-09-06T12:24:46Z addcon thread start\n2025-09-06T12:24:46Z net thread start\n2025-09-06T12:24:46Z Loaded 0 blocks from external file in 11ms\n2025-09-06T12:24:46Z Reindexing finished\n2025-09-06T12:24:46Z Importing blocks file data840010/blocks/blk04241.dat...\n2025-09-06T12:24:46Z Loaded 0 blocks from external file in 38ms\n2025-09-06T12:24:46Z Importing blocks file data840010/blocks/blk04242.dat...\n2025-09-06T12:24:46Z Loaded 0 blocks from external file in 18ms\ntime spent for ImportBlocks: 0\n2025-09-06T12:24:46Z Stopping after block import\n2025-09-06T12:24:46Z initload thread exit\n2025-09-06T12:24:46Z Shutdown in progress...\n2025-09-06T12:24:46Z net thread exit\n2025-09-06T12:24:46Z addcon thread exit\n2025-09-06T12:24:47Z msghand thread exit\n2025-09-06T12:24:47Z scheduler thread exit\n2025-09-06T12:24:47Z Flushed fee estimates to fee_estimates.dat.\n2025-09-06T12:24:47Z Shutdown done\n\n```",
          "created_at": "2025-09-06T12:27:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 7242,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3263193876,
          "user": "l0rinc",
          "body": "I'm not sure I can follow what versions you're using in the examples and what you're trying to achieve high level - could you please update the title and issue description and start with the zoomed out problem definition for what you're trying to achieve and what you tried and what versions you have used for which operation etc?",
          "created_at": "2025-09-06T20:44:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 330,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3263764977,
          "user": "HowHsu",
          "body": "> I'm not sure I can follow what versions you're using in the examples and what you're trying to achieve high level - could you please update the title and issue description and start with the zoomed out problem definition for what you're trying to achieve and what you tried and what versions you have used for which operation etc?\n\nHey I0rinc, super appreciate it for your review of this issue, I've updated the title and description, let me know if that makes sense or not.",
          "created_at": "2025-09-07T13:07:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 476,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3266992579,
          "user": "mzumsande",
          "body": "I looked at the code, and it appears that `loadblock` currently only works with non-xor'ed block files:  \n[AutoFile file{fsbridge::fopen(path, \"rb\")};](https://github.com/bitcoin/bitcoin/blob/3eea9fd39532eeda648e44de365fc4c9112f6fc6/src/node/blockstorage.cpp#L1253C9-L1254C1) doesn't use an obfuscation key.\n\nI don't know if that was discussed when block obfuscation was added (FYI @maflcko). \n`loadblock` is probably not a feature that is used very much these days, but unless someone wants to add `blocksxor` support to it, this limitation could at least be mentioned in its help text.\n\nA simple workaround for the use case here should be to use `-blocksxor=0` in all datadirs.\n",
          "created_at": "2025-09-08T16:04:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 680,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3267297305,
          "user": "HowHsu",
          "body": "> I looked at the code, and it appears that `loadblock` currently only works with non-xor'ed block files: [AutoFile file{fsbridge::fopen(path, \"rb\")};](https://github.com/bitcoin/bitcoin/blob/3eea9fd39532eeda648e44de365fc4c9112f6fc6/src/node/blockstorage.cpp#L1253C9-L1254C1) doesn't use an obfuscation key.\n> \n> I don't know if that was discussed when block obfuscation was added (FYI [@maflcko](https://github.com/maflcko)). `loadblock` is probably not a feature that is used very much these days, but unless someone wants to add `blocksxor` support to it, this limitation could at least be mentioned in its help text.\n> \n> A simple workaround for the use case here should be to use `-blocksxor=0` in all datadirs.\n\nHi @mzumsande , thanks for troubleshooting this one, I've created a PR to enrich the help text of `-loadblock`: [PR 33343](https://github.com/bitcoin/bitcoin/pull/33343)",
          "created_at": "2025-09-08T17:44:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 887,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3267757875,
          "user": "l0rinc",
          "body": "> A simple workaround for the use case here should be to use -blocksxor=0 in all datadirs.\n\nBut that would only work for a pristine IBD, right? I have opened https://github.com/bitcoin/bitcoin/pull/33324 to be able to change the obfuscation of existing blocks - this should allow you to remove an existing obfuscation after block download.",
          "created_at": "2025-09-08T20:01:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 339,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3268290183,
          "user": "l0rinc",
          "body": "@mzumsande, are you familiar with `/contrib/linearize`? I wasn't, see https://github.com/bitcoin/bitcoin/pull/33343#issuecomment-3268288721",
          "created_at": "2025-09-08T23:00:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 139,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3339296357,
          "user": "maflcko",
          "body": "> I don't know if that was discussed when block obfuscation was added (FYI [@maflcko](https://github.com/maflcko)).\n\nI wasn't aware of a use-case to load raw block files without first linearizing them. As suggested, the workaround here would be `-blocksxor=0` for the node that generates block files to import. You could also hack together a trivial python script to do the xor for you, quickly. (The linearize script may also work, if you omit the unneeded block hashes, but I haven't tried this).",
          "created_at": "2025-09-26T15:47:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 498,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2003,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3776297465,
      "number": 34190,
      "title": "bitcoind shouldn't perform network activity if the option networkactive=0, e.g. [addrman] Selected IP:PORT from tried",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nThere are many logs like the examples below despite networkactive=0:\n1. `2025-12-31T12:24:47Z [addrman] Selected 34.75.109.94:8333 from tried`\n2. `2025-12-31T12:24:47Z [tor] Error connecting to Tor control socket`\n`2025-12-31T12:24:47Z [tor] Not connected to Tor control port 127.0.0.1:9051, retrying in 25.63 s\n`\n3. `2025-12-31T12:28:43Z [net:error] Could not get best interface for default route: Element not found.  (1168)`\n`2025-12-31T12:28:43Z [net] portmap: Could not determine IPv4 default gateway`\n\n\n\n\n### Expected behaviour\n\nThere isn't any network activity and so no such logs.\n\n### Steps to reproduce\n\n1. Start `bitcoind.exe -networkactive=0` \n\n### Relevant log output\n\n[bitcoind_addrman_win.txt](https://github.com/user-attachments/files/24407482/bitcoind_addrman_win.txt)\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv29\n\n### Operating system and version\n\nWindows 11\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "GregTonoski",
      "created_at": "2026-01-02T12:43:54Z",
      "updated_at": "2026-01-14T19:17:00Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34190",
      "labels": [
        "Bug",
        "Needs Conceptual Review"
      ],
      "comment_data": [
        {
          "id": 3743302568,
          "user": "willcl-ark",
          "body": "If you interpret \"networkactive\" to mean \"this program will not perform any network-related activity\" then \"fixing\" this would make sense. However of your interpretation is \"toggle a connection to the bitcoin p2p network\" then the current behaviour seems fine:\n\n- If you have networkactive and toggle it, then all bitcoin p2p connections are dropped\n- Toggle it again to re-enable connections\n\nConfiguring pmp, running the addrman loop and making a connection to the tor control port in _readiness_ for future connections doesn't seem completely untoward, in my opinion.\n\nCurious what others think here though, as giving `torControlThread` and `mapport_thread` knowledge of the state of `networkactive` is pretty easy. I didn't have a look at addrman yet though...\n\nedit: I did end up taking a look at what an implementation for this would look like for mapport and torcontroller here: https://github.com/bitcoin/bitcoin/compare/master...willcl-ark:bitcoin:refs/heads/respect-networkactive\n\nSeems to work ok.",
          "created_at": "2026-01-13T09:51:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1008,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3751188353,
          "user": "davidgumberg",
          "body": ">Configuring pmp, running the addrman loop and making a connection to the tor control port in readiness for future connections doesn't seem completely untoward, in my opinion.\n\nI agree, but I don't think there is much advantage in doing those things when disconnected from the P2P network, no one will be surprised that Bitcoin Core *isn't* doing those things when `networkactive` is set to false. https://github.com/bitcoin/bitcoin/compare/master...willcl-ark:bitcoin:refs/heads/respect-networkactive seems simple enough... ",
          "created_at": "2026-01-14T19:16:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 525,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1210,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2422557514,
      "number": 30498,
      "title": "fuzz: Apply HasTooManySubFrag (et al) to miniscript_string (et al)",
      "body": "Should the check be applied to miniscript_string, for example the `miniscript_string/ae395bdc087e233d7f8e1844d4814b2c00cc9d21` input, as well?\r\n\r\n_Originally posted by @maflcko in https://github.com/bitcoin/bitcoin/issues/30197#issuecomment-2233404249_\r\n            \r\n\r\nSeems useful to at least apply to that fuzz target as well. In theory it could be applied to parse_univalue as well (reverting commit a1b8a917b176ee36961203ccee96457d85102e60).",
      "state": "open",
      "user": "maflcko",
      "created_at": "2024-07-22T10:47:51Z",
      "updated_at": "2026-01-14T17:57:50Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/30498",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3750548386,
          "user": "maflcko",
          "body": "Looks like the `ae395bdc087e233d7f8e1844d4814b2c00cc9d21` input was nuked from git history in the meantime. The current reproducer is:\n\n```\ncurl -fLO 'https://raw.githubusercontent.com/bitcoin-core/qa-assets/eac1c57614d7823bcd6079814749f72018aea438/fuzz_corpora/miniscript_string/41bae50cffd1741150a1b330d02ab09f46ff8cd1'\nFUZZ=miniscript_string perf record -g --call-graph fp  ./bld-cmake/bin/fuzz ./41bae50cffd1741150a1b330d02ab09f46ff8cd1\nhotspot ./perf.data",
          "created_at": "2026-01-14T16:55:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 460,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750886278,
          "user": "maflcko",
          "body": "Fix in https://github.com/bitcoin/bitcoin/pull/34288",
          "created_at": "2026-01-14T17:57:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 52,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 513,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3515047935,
      "number": 33628,
      "title": "Minor Release 29.3",
      "body": "🚧 Milestone: https://github.com/bitcoin/bitcoin/milestone/80\n\nBackports and other changes\n- #33623\n- #33611\n- #34222\n- #33788\n- #34268\n\n\nRC 1\n- [] final changes #34268\n- [] tag\n- [] upload binaries\n- [] announcements\n\n\nSee [release process docs](https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md) for more details. This issue can be used to track status updates. Please feel free to suggest backports in the comments.",
      "state": "open",
      "user": "glozow",
      "created_at": "2025-10-14T18:35:27Z",
      "updated_at": "2026-01-14T17:55:56Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33628",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3750878303,
          "user": "glozow",
          "body": "Reviewers: please take a look at #34268 so we can have an RC1",
          "created_at": "2026-01-14T17:55:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 61,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 456,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3586989882,
      "number": 33777,
      "title": "Mining interface tracking issue",
      "body": "The mining interface is defined in:\n- https://github.com/bitcoin/bitcoin/blob/master/src/interfaces/mining.h\n- https://github.com/bitcoin/bitcoin/blob/master/src/ipc/capnp/mining.capnp\n\nClients that are known to depend on it:\n- https://github.com/stratum-mining/sv2-tp\n- https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2\n\nThe changes below are not breaking, unless mentioned otherwise. Adding new methods or new arguments to existing methods is not a breaking change.\n\n- [ ] #33965 \n  - [ ] #33966\n- [ ] #34184\n- [x] #33819\n- [ ] #32420 \n- [ ] #34020\n- [ ] #33899\n  - [ ] #33922\n- [ ] #33756 \n\nAt this state it's OK to make breaking changes, such as deleting a method or changing its signature. But ideally we should do so once in a major release, collecting a bunch of fixes.\n\n- [ ] low priority breaking change(s): https://github.com/Sjors/bitcoin/pull/106\n  - [ ] #33936\n  - [ ] make non-mandatory coinbase commitment opt-in \n  - [ ] drop `getCoinbaseCommitment()`, `getCoinbaseTx()` and `getWitnessCommitmentIndex()`\n  - [ ] wipe dummy coinbase\n\nMisc related:\n\n- [ ] #30437",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-04T15:05:33Z",
      "updated_at": "2026-01-14T16:55:09Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33777",
      "labels": [
        "Mining",
        "interfaces",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3502947184,
          "user": "Sjors",
          "body": "@ismaelsadeeq I'm thinking about deprecating `getBlock()` in favour of a new `getTransactions()` on `BlockTemplate`. That would allow us to avoid shoehorning block templates into a `CBlock`, which e.g. means we no longer need a dummy coinbase transaction.",
          "created_at": "2025-11-07T14:40:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3503164270,
          "user": "ismaelsadeeq",
          "body": "Why is this important?\nJust because of shorhorning is not convincing imo, copying the txs is the most work which has to be done and then copy the header again.\nPreviously, they could access it with a single call, but after what you propose it will requires two calls.\nAnother downside is that they now have to calculate the block subsidy themselves, whereas previously it was included in the vout value of the first output of the coinbase tx.\n",
          "created_at": "2025-11-07T15:22:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 443,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3503279705,
          "user": "Sjors",
          "body": "> Previously, they could access it with a single call, but after what you propose it will requires two calls.\n\nClients are already expected to call `getHeader()` to get the header. Combined with `getCoinbaseMerklePath()` and `getCoinbase()` they can construct a template without having to download the full block.\n\nIn Stratum v2 clients only call `getBlock()` if the pool wants to inspect their proposed template (see `RequestTransactionData.Success` in sv2-tp). This happens later and currently involves dropping the coinbase from `vtx`.\n\n> Another downside is that they now have to calculate the block subsidy themselves\n\nThe `CoinbaseTemplate` struct proposed in #33819 provides the amount.\n\n> Why is this important?\n\nCurrently it's not, but it does seem better in the long run to only serve clients data they need and not expose implementation details like our dummy coinbase.\n\nI was wondering if it makes #33421 easier, because templates for different sizes could just be spans over the transaction list.\n\nI can also think of a downside: `submitBlock()` currently relies on a ready-to-go `CBlock`.\n\n---\n\nUpdate: `getBlock()` is also used by clients to download a backup / copy of the submitted block, so I decided to just keep it.",
          "created_at": "2025-11-07T15:43:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1235,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3503342616,
          "user": "Sjors",
          "body": "See inline discussion in https://github.com/bitcoin/bitcoin/pull/33819#discussion_r2504009667 about whether we should just go ahead and make breaking changes now, or pile them up until there's a bigger / more important breaking change.\n\nA similar discussion occurred on IRC a few days ago: https://www.erisian.com.au/bitcoin-core-dev/log-2025-11-04.html#l-186",
          "created_at": "2025-11-07T15:54:50Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 359,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3528997008,
          "user": "ryanofsky",
          "body": "Was looking at the IRC discussion and I think a nuance it doesn't address is that there is a difference between breaking compatibility explicitly so clients see an error if they try to call a method that's been changed or removed, and breaking compatibility silently so if a client tries to call a method that's changed or removed, a different method may be called instead or arguments may be interpreted incorrectly.\n\n#### How to break compatibility explicitly\n\nYou can break compatibility explicitly when you follow the rules at https://capnproto.org/language.html#evolving-your-protocol and avoid doing this things like changing field numbers, or break compatibility silently by ignoring these rules. A way to break compatibility explicitly is to bump the field number of a changed method like:\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/src/ipc/capnp/init.capnp\n+++ b/src/ipc/capnp/init.capnp\n@@ -19,5 +19,8 @@ using Mining = import \"mining.capnp\";\n interface Init $Proxy.wrap(\"interfaces::Init\") {\n     construct @0 (threadMap: Proxy.ThreadMap) -> (threadMap :Proxy.ThreadMap);\n     makeEcho @1 (context :Proxy.Context) -> (result :Echo.Echo);\n-    makeMining @2 (context :Proxy.Context) -> (result :Mining.Mining);\n+    makeMining @3 (context :Proxy.Context) -> (result :Mining.Mining);\n+\n+    # DEPRECATED: no longer supported; server returns an error.\n+    makeMiningV2 @2 () -> ();\n }\n--- a/src/interfaces/init.h\n+++ b/src/interfaces/init.h\n@@ -39,6 +39,7 @@ public:\n     virtual Ipc* ipc() { return nullptr; }\n     virtual bool canListenIpc() { return false; }\n     virtual const char* exeName() { return nullptr; }\n+    virtual void makeMiningV2() { throw std::runtime_error(\"Old mining interface (@2) not supported. Please update your client!\"); }\n };\n \n //! Return implementation of Init interface for the node process. If the argv\n```\n\n</p>\n</details>\n\nThis is actually more complicated than I expected because I forgot capnproto forbids gaps between ordinal numbers, and thought that it would automatically generate errors if a method with a missing ordinal was called. This could be simplified a little with a helper annotation like:\n\n```capnp\nmakeMiningV2 @2 () -> () $Proxy.Error(\"Old mining interface (@2) not supported. Please update your client!\");\n```\n\nso no c++ changes would be required.\n\n#### Breaking compatibility in master\n\nIMO, for interfaces like `Chain` (#29409) which are not intended to be called externally it should be ok to break compatibility silently not explicitly in master, and ignore schema evolution rules. But for the mining interface I think it'd be better only break compatibility explicitly even in master to avoid debugging headaches and make errors obvious when older clients are used.\n\nAlso in many cases, like when adding new methods or new parameters with default values, it could be easy to avoid breaking compatibility at all.\n\n#### Source vs binary compatibility\n\nEverything above refers to binary compatibility not source compatibility. It's possible to break source compatibility without breaking binary compatibility by doing things like renaming fields or methods without changing their ordinal numbers and types. Source compatibility should generally be less of a concern since it should result in compile-time errors not runtime errors.",
          "created_at": "2025-11-13T17:48:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3307,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3529071835,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33777#issuecomment-3502947184\n\n> That would allow us to avoid shoehorning block templates into a `CBlock`, which e.g. means we no longer need a dummy coinbase transaction.\n\nIt does seem error-prone to expose the dummy coinbase transaction, because if any clients are relying on it and we make internal changes, they could easily break.\n\nAt some point after getCoinbase() is introduced in #33819, it could make sense to swap `m_block_template->block.vtx[0]` with an empty transaction in the `BlockTemplateImpl` constructor so clients will not rely on it and will switch to using `getCoinbase()` instead",
          "created_at": "2025-11-13T18:08:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 647,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575428504,
          "user": "ryanofsky",
          "body": "@Sjors I'm wondering which mining PRs & issues to focus on since there seem to be a lot open now. Feel free to tag me on any or mention any priorities here. I noticed there seemed to be a lot of these while updating the multiprocess tracking issue #28722 yesterday.\n\nI was also wondering if there are bitcoin or libmultiprocess features I should start working on. Ones I was thinking of were:\n\n- Adding exception types that could be thrown from IPC methods to return capnp [failed / overloaded / unimplemented](https://github.com/capnproto/capnproto/blob/9805af1c367c40d864695a2073e1f9cd8ee3907b/c%2B%2B/src/capnp/rpc.capnp#L1198-L1246) errors to clients.\n- Adding `$Unimplemented` or `$Error` method annotations that could be used in `.capnp` files to make it easier to remove old methods without needing c++ code (mentioned https://github.com/bitcoin/bitcoin/issues/33777#issuecomment-3528997008).\n- Adding an `interfaces::Cancel` c++ parameter that IPC methods could check and register callbacks with to know if the IPC client cancelled the call or disconnected (mentioned #33575).\n\nOther things I was thinking of doing: \n\n- Backporting #33676 \n- Adding a `doc/IPC-interface.md` file similar to `JSON-RPC-interface.md` and `REST-interface.md` files to document things that plebhash has asked about like how to use server threads and `Context` objects and `destroy` methods.",
          "created_at": "2025-11-25T12:31:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1376,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3575819797,
          "user": "Sjors",
          "body": "In terms of interface changes I'd like to focus on #33819 `getCoinbase()`  and #33922 `getMemoryLoad()` which add new functionality. The smaller breaking interface changes can wait until either we have a bigger breaking change or nothing else on our plate.\n\nOn the IPC side I don't really have priorities in mind, so maybe pick what's useful for @plebhash (as a stand-in for others who are both unfamiliar with the Bitcoin Core codebase and using other programming languages to connect).\n\nDocumentation sounds like a very good idea. Another thing that would be useful is if we can automatically bubble up code comments from header files to the capnp definitions. Maybe a little Python script? It shouldn't be (or at least doesn't need to) adding methods and changing signatures, but it could find and update matching documentation. ",
          "created_at": "2025-11-25T14:05:33Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 832,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575893233,
          "user": "plebhash",
          "body": "we're doing a SRI release this week that is planned to include https://github.com/stratum-mining/sv2-apps/pull/59, and it's meant to support v30\n\nbut it will come with two major limitations, namely:\n- the initial iteration of `bitcoin_core_sv2` crate is marked with a bunch of `todo`s that are workarounds for the lack of `interruptWait`, and are being tracked at https://github.com/stratum-mining/sv2-apps/issues/81\n- running it on systems with low RAM for extended periods of time can lead to crashes\n\nwe're going to proceed with the release anyways, while making these points clear on the release notes\n\n---\n\nso on our side, I'd say biggest priorities would be:\n- backporting #33676 so it lands on `v30.1`, which I'm happy to see @ryanofsky already mentioned above, and I also requested here https://github.com/bitcoin/bitcoin/pull/33609#issuecomment-3573215231\n- having a fix for #33940 that ideally also lands on `v30.1`\n\nthat way, we can direct Sv2 adopters to run `v30.1` as soon as it's out, while dropping support to `v30` entirely",
          "created_at": "2025-11-25T14:21:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1040,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3631392182,
          "user": "Sjors",
          "body": "I updated the PR description. Review suggestions:\n- #33965\n- #32420 \n\nBoth would be nice to backport to 30.x though they'll probably miss the v30.1 boat.",
          "created_at": "2025-12-09T10:08:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 153,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3750202100,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33777#issuecomment-3631392182\n\nSince there are a number of PRs open, do you have suggestions about what to review (or work on) next? I'd like to see #33965 merged because of the test improvements, but so far I'm the only reviewer on that.",
          "created_at": "2026-01-14T15:47:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 284,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750249595,
          "user": "ismaelsadeeq",
          "body": "Can you add me to the review list? I will take a look. thanks",
          "created_at": "2026-01-14T15:56:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 61,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750541615,
          "user": "Sjors",
          "body": "@ryanofsky I'd like #33965 as well. Also #32420 has a direct impact on what stratum v2 blocks will look like.",
          "created_at": "2026-01-14T16:55:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 109,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1129,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1941676471,
      "number": 28648,
      "title": "test: Write assumeutxo tests",
      "body": "### Motivation\n\nTests are useful to catch bugs, so they should be written.\n\n### Possible solution\n\nWrite tests, similar to https://github.com/bitcoin/bitcoin/pull/28647\r\n\r\nRefer to the `TODO` comments in `./test/functional/feature_assumeutxo.py`, or to the uncovered lines in the AssumeUtxo code via a coverage report. For example, https://maflcko.github.io/b-c-cov/total.coverage/src/validation.cpp.gcov.html\n\n### Useful Skills\n\n* Compiling Bitcoin Core from source\r\n* Running the C++ unit tests and the Python functional tests\r\n* Basic AssumeUtxo understanding\r\n* Bitcoin Core serialization and test framework understanding\r\n* Python serialization understanding\n\n### Guidance for new contributors\n\nWant to work on this issue?\r\n\r\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2023-10-13T10:24:00Z",
      "updated_at": "2026-01-14T15:59:45Z",
      "closed_at": null,
      "comments": 22,
      "url": "https://github.com/bitcoin/bitcoin/issues/28648",
      "labels": [
        "Wallet",
        "Tests",
        "Consensus",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 3691809271,
          "user": "Edu92337",
          "body": "Hi! I've analyzed the current test coverage and found a gap in RPC error testing.\n\nCurrent coverage:\n- loadtxoutset: ~12 error scenarios covered\n- dumptxoutset: only success cases tested\n\nProposed additions:\n- dumptxoutset error cases: ~6 scenarios (file exists, invalid params, pruned mode, etc.)\n- loadtxoutset additional errors: ~4 scenarios (empty file, permissions, etc.) \n\nWould adding comprehensive RPC error testing be helpful for this issue?\nI can create a PR with these tests.",
          "created_at": "2025-12-25T23:13:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 486,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3691821964,
          "user": "fjahr",
          "body": "> Hi! I've analyzed the current test coverage and found a gap in RPC error testing.\n> \n> Current coverage:\n> \n> * loadtxoutset: ~12 error scenarios covered\n> * dumptxoutset: only success cases tested\n> \n> Proposed additions:\n> \n> * dumptxoutset error cases: ~6 scenarios (file exists, invalid params, pruned mode, etc.)\n> * loadtxoutset additional errors: ~4 scenarios (empty file, permissions, etc.)\n> \n> Would adding comprehensive RPC error testing be helpful for this issue? I can create a PR with these tests.\n\nThese coverage numbers are incorrect. For example there are several error cases tested for `dumptxoutset` in `rpc_dumptxoutset.py`.",
          "created_at": "2025-12-25T23:40:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 646,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3691822737,
          "user": "fjahr",
          "body": "> I think this may be ready for closing since all remaining TODOs have been addressed IMO. There are three remaining PRs that still need to get merged but I think we can expect that nobody will start a new PR based on the TODOs comment anymore.\n> \n> For reference, the remaining PRs are [#30403](https://github.com/bitcoin/bitcoin/pull/30403), [#30320](https://github.com/bitcoin/bitcoin/pull/30320), [#29996](https://github.com/bitcoin/bitcoin/pull/29996). See also [#30403 (comment)](https://github.com/bitcoin/bitcoin/pull/30403#issuecomment-2213758446)\n\n> Or rather, the problem is that the issue here is not specific and so none of the issues can close this issue because it's unclear which will be the last one to get merged. I will recommend in the PRs that they mention the issue here as related to so it's at least clear what is being worked on where.\n\nI still think this issue should either be closed as completed or reworked to be much more specific. But probably the best path forward is to just close this and open issues for the specific cases that are still missing, if there are any.",
          "created_at": "2025-12-25T23:42:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1099,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750265467,
          "user": "yashbhutwala",
          "body": "> I still think this issue should either be closed as completed or reworked to be much more specific. But probably the best path forward is to just close this and open issues for the specific cases that are still missing, if there are any.\n\nI agree this issue should be closed. After reviewing the full history:\n\n**All items from ryanofsky's original test matrix have been addressed:**\n\nTest cases (loading snapshot with):\n- ✅ Invalid hash - covered in `test_invalid_snapshot_scenarios`\n- ✅ Invalid snapshot file - covered in `test_invalid_snapshot_scenarios`\n- ✅ Unknown block reference - covered in `test_invalid_snapshot_scenarios`\n- ✅ Invalid/invalid parent block - covered in `test_snapshot_block_invalidated`\n- ✅ Block not on most-work chain - covered via #30320\n\nStarting states:\n- ✅ Ancestor of snapshot - normal case throughout tests\n- ✅ Not ancestor, less work - covered via #29996\n- ✅ Tip is snapshot block - covered via #30403\n- ✅ Descendant of snapshot - implicitly covered (fails with \"Work does not exceed\")\n- ✅ Not ancestor/descendant, more work - covered via #30320\n\n**The three remaining PRs mentioned have all been merged:** #30403, #30320, #29996\n\n**Remaining minor item:** I've opened #34286 to address the last TODO in `wallet_assumeutxo.py` (line 242), which adds test assertions verifying node state after restart during background sync. This documents an important edge case: wallets cannot be loaded after a node restart during assumeutxo background sync because blocks before the snapshot are unavailable for rescanning.\n\nGiven the original scope has been fully addressed, I think closing this issue makes sense. Any future test coverage improvements can be tracked in more specific issues.",
          "created_at": "2026-01-14T15:59:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 3,
            "text_length": 1717,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 919,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3800461331,
      "number": 34250,
      "title": "crash during IPC cleanup after `interruptWait()` is called",
      "body": "while working on https://github.com/stratum-mining/sv2-apps/pull/177, I'm noticing a new crash\n\nsteps to reproduce:\n- run Bitcoin Core `v30.2` on `mainnet`\n- `git clone https://github.com/plebhash/sv2-apps -b 2026-01-09-bitcoin-core-v30-2`\n- edit `sv2-apps/pool-apps/pool/config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml` so that `unix_socket_path` field points to `node.sock`\n- launch Pool via: `cd sv2-apps/pool-apps/pool; cargo run -- -c config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml`\n- let Pool run for a while\n- kill Pool with ctrl+c\n\nthis does not happen deterministically, so a few attempts of launching then killing Pool might be needed \n\nbut eventually Bitcoin Core crashes with a few different log variations:\n```\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server recv request  #96 BlockTemplate.getCoinbaseMerklePath$Params\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server post request  #96 {bitcoin-node-35006/206817 (from )}\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server send response #96 BlockTemplate.getCoinbaseMerklePath$Results\n2026-01-10T22:48:07Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server recv request  #97 BlockTemplate.waitNext$Params\n2026-01-10T22:48:07Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server post request  #97 {bitcoin-node-35006/206817 (from )}\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages6MiningEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server: socket disconnected.\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2026-01-10T22:48:08Z CreateNewBlock(): block weight: 3998742 txs: 599 fees: 515599 sigops 13307\nlibc++abi: terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument\n[1]    35006 abort      ./bitcoin-30.2/bin/bitcoin -m node -ipcbind=unix -prune=555 -debug=ipc\n```\n\n```\n2026-01-10T22:22:02Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server send response #134 BlockTemplate.getCoinbaseMerklePath$Results\n2026-01-10T22:22:03Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server recv request  #135 BlockTemplate.waitNext$Params\n2026-01-10T22:22:03Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server post request  #135 {bitcoin-node-19528/147843 (from )}\n2026-01-10T22:22:04Z CreateNewBlock(): block weight: 3998510 txs: 4931 fees: 315281 sigops 999\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages6MiningEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server: socket disconnected.\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2026-01-10T22:22:05Z CreateNewBlock(): block weight: 3998649 txs: 4928 fees: 336652 sigops 1030\nAssertion failed: (m_loop), function operator*, file proxy.h, line 59.\n[1]    19528 abort      ./bitcoin-30.2/bin/bitcoin -m node -ipcbind=unix -prune=555 -debug=ipc \n```\n\ncc @ryanofsky @ismaelsadeeq ",
      "state": "open",
      "user": "plebhash",
      "created_at": "2026-01-10T22:51:23Z",
      "updated_at": "2026-01-14T15:59:00Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/34250",
      "labels": [
        "Bug",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3735626399,
          "user": "ismaelsadeeq",
          "body": "I was able to reproduce this with the steps provided by @plebhash reliably.\n\nI attached a debugger and set a breakpoint to identify the issue and determine where the crash occurs on the node side.\n\n\nFrom all my attempts and the crash I noticed, it occurs after the wait has returned, and you CTRL+C.\n\n\nFrom my debugging, it seems the internals of `interruptWait` are not even executing for this to happen.\n\nI attached a debugger and added a breakpoint, but it has not reached. I also log a message that it can be reached it is also not reached.\n\nCommenting all instructions in `interruptWait` also does not prevent the issue\n\n```\n2026-01-11T19:53:55Z [net] received: tx (373 bytes) peer=7\n2026-01-11T19:53:55Z [validation] Enqueuing TransactionAddedToMempool: txid=3fac3d8951ebe1b164ba7ffc7240393ff9cb0da2509f04d577f6b8935b6bdee7 wtxid=9eda298e92ddc4fb16900831a8c40cfadb5bb59b7a369f9025336c57db33e1e9\n2026-01-11T19:53:55Z [mempool] AcceptToMemoryPool: peer=7: accepted 3fac3d8951ebe1b164ba7ffc7240393ff9cb0da2509f04d577f6b8935b6bdee7 (wtxid=9eda298e92ddc4fb16900831a8c40cfadb5bb59b7a369f9025336c57db33e1e9) (poolsz 2194 txn, 119807 kB)\n2026-01-11T19:53:55Z [validation] TransactionAddedToMempool: txid=3fac3d8951ebe1b164ba7ffc7240393ff9cb0da2509f04d577f6b8935b6bdee7 wtxid=9eda298e92ddc4fb16900831a8c40cfadb5bb59b7a369f9025336c57db33e1e9\n2026-01-11T19:53:55Z CreateNewBlock(): block weight: 3998780 txs: 935 fees: 510856 sigops 13846\n2026-01-11T19:53:55Z [bench]     - Sanity checks: 0.89ms [0.03s (0.56ms/blk)]\n2026-01-11T19:53:55Z [bench]     - Fork checks: 0.03ms [0.04s (0.60ms/blk)]\n2026-01-11T19:53:55Z [bench]       - Connect 936 transactions: 6.84ms (0.007ms/tx, 0.001ms/txin) [0.66s (10.84ms/blk)]\n2026-01-11T19:53:55Z [bench]     - Verify 13572 txins: 6.84ms (0.001ms/txin) [0.68s (11.19ms/blk)]\n2026-01-11T19:53:55Z [bench] CreateNewBlock() chunks: 0.53ms, validity: 9.41ms (total 9.94ms)\n2026-01-11T19:53:55Z >>>>>>>>>>>>>>> Wait returned\nbitcoin-node: ipc/libmultiprocess/include/mp/proxy.h:59: EventLoop &mp::EventLoopRef::operator*() const: Assertion `m_loop' failed.\n```\nWill investigate more\n\nTips for reproducing without multiple runs,  do CTRL+C immediately you see \"Mempool fees increased! Sending NewTemplate message.\" from the pool\n\n",
          "created_at": "2026-01-11T20:00:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3739618513,
          "user": "ryanofsky",
          "body": "Thanks for the report @plebhash and thanks for debugging @ismaelsadeeq. Based on the logs provided, I was able to reproduce the crash with a python IPC client. The logs just show a `BlockTemplate.waitNext()` call being sent, followed by a disconnect before there is a `waitNext` response.\n\nThe problem happens when there are fee increases, causing the `BlockTemplate.waitNext()` call to return a pointer to new `BlockTemplate`. Because the pointer is non-null, libmultiprocess tries to create a `ProxyServer<BlockTemplate>` to be able to return the `BlockTemplate` reference back to the IPC client, but IPC connection is already destroyed by this point, so the `ProxyServer` construction fails and causes a crash.\n\nI think it should be straightforward to prevent this crash by having `ProxyServer` constructor (or code which calls it) check to see if the connection is intact before proceeding, and throw an exception and log an error otherwise.\n\nThe problem can also be prevented on the client side by calling `interruptWait` and waiting for `waitNext` reponse before disconnecting. This crash should be preventable on the server side, though, and it is worth doing that. Annotated stack trace is below:\n\n<details><summary>stack trace</summary>\n<p>\n\n```c++\n#4  0x00007ffff72396f7 in __assert_fail () from /nix/store/xx7cm72qy2c0643cm1ipngd87aqwkcdp-glibc-2.40-66/lib/libc.so.6\n#5  0x0000555555e153ec in mp::EventLoopRef::operator* (this=0x7fffe8001dc0) at ./ipc/libmultiprocess/include/mp/proxy.h:59\n\n>   59      EventLoop& operator*() const { assert(m_loop); return *m_loop; }\n\n\n#6  0x0000555556400cd1 in mp::ProxyContext::ProxyContext (this=0x7fff68000f58, connection=0x7fffe8001dc0) at ./ipc/libmultiprocess/src/mp/proxy.cpp:81\n\n>   81  ProxyContext::ProxyContext(Connection* connection) : connection(connection), loop{*connection->m_loop} {}\n\n#7  0x0000555555f9c625 in mp::ProxyServerBase<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>::ProxyServerBase (this=0x7fff68000f40,\n    vtt=0x555556ea8a10 <VTT for mp::ProxyServer<ipc::capnp::messages::BlockTemplate>+16>, impl=std::shared_ptr<interfaces::BlockTemplate> (empty) = {...}, connection=...)\n    at ./ipc/libmultiprocess/include/mp/proxy-io.h:521\n\n   519  template <typename Interface, typename Impl>\n   520  ProxyServerBase<Interface, Impl>::ProxyServerBase(std::shared_ptr<Impl> impl, Connection& connection)\n>  521      : m_impl(std::move(impl)), m_context(&connection)\n   522  {\n   523      assert(m_impl);\n   524  }\n\n#8  0x0000555555f9c546 in mp::ProxyServerCustom<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>::ProxyServerBase (this=0x7fff68000f40,\n    vtt=0x555556ea8a08 <VTT for mp::ProxyServer<ipc::capnp::messages::BlockTemplate>+8>) at ./ipc/libmultiprocess/include/mp/proxy.h:197\n\n   195  struct ProxyServerCustom : public ProxyServerBase<Interface, Impl>\n   196  {\n>  197      using ProxyServerBase<Interface, Impl>::ProxyServerBase;\n   198  };\n\n#9  0x0000555555f9c3db in mp::ProxyServer<ipc::capnp::messages::BlockTemplate>::ProxyServerBase (this=0x7fff68000f40) at capnp/mining.capnp.proxy.h:401\n\n   397  template<>\n   398  struct ProxyServer<ipc::capnp::messages::BlockTemplate> : public ProxyServerCustom<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>\n   399  {\n   400  public:\n>  401      using ProxyServerCustom::ProxyServerCustom;\n   402      ~ProxyServer();\n\n#10 0x0000555555f9c188 in kj::heap<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, std::shared_ptr<interfaces::BlockTemplate>, mp::Connection&> (params=..., params=...)\n    at /nix/store/8xjrdb1y9ng6w6yknzg9h6fkxd3sb824-capnproto-1.2.0/include/kj/memory.h:609\n\n>  609    return Own<T>(new T(kj::fwd<Params>(params)...), _::HeapDisposer<T>::instance);\n\n#11 0x0000555555f9c0cf in mp::MakeProxyServer<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate> (context=..., impl=std::shared_ptr<interfaces::BlockTemplate> (empty) = {...})\n    at ./ipc/libmultiprocess/include/mp/type-interface.h:14\n\n    11  template <typename Interface, typename Impl>\n    12  kj::Own<typename Interface::Server> MakeProxyServer(InvokeContext& context, std::shared_ptr<Impl> impl)\n    13  {\n>   14      return kj::heap<ProxyServer<Interface>>(std::move(impl), context.connection);\n    15  }\n\n#12 0x0000555555f9ba8a in mp::CustomMakeProxyServer<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate> (context=..., impl=...) at ./ipc/libmultiprocess/include/mp/type-interface.h:20\n\n    17  template <typename Interface, typename Impl>\n    18  kj::Own<typename Interface::Server> CustomMakeProxyServer(InvokeContext& context, std::shared_ptr<Impl>&& impl)\n    19  {\n>   20      return MakeProxyServer<Interface, Impl>(context, std::move(impl));\n    21  }\n\n#13 0x00005555560325d8 in CustomBuildField<interfaces::BlockTemplate, std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder>&> (invoke_context=..., value=..., output=..., enable=0x0) at ./ipc/libmultiprocess/include/mp/type-interface.h:33\n\n    31      if (value) {\n    32          using Interface = typename decltype(output.get())::Calls;\n>   33          output.set(CustomMakeProxyServer<Interface, Impl>(invoke_context, std::shared_ptr<Impl>(value.release())));\n    34      }\n\n#14 0x000055555603252d in mp::BuildField<std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, mp::InvokeContext, std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder>&> (context=..., output=..., values=...)\n    at ./ipc/libmultiprocess/include/mp/proxy-types.h:203\n\n   202      if (CustomHasValue(context, values...)) {\n>  203          CustomBuildField(TypeList<LocalTypes...>(), Priority<3>(), context, std::forward<Values>(values)...,\n   204              std::forward<Output>(output));\n   205      }\n\n#15 0x00005555560324b6 in mp::CustomBuildField<std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder> > (invoke_context=..., value=..., output=...)\n    at ./ipc/libmultiprocess/include/mp/type-decay.h:34\n\n>   34      BuildField(TypeList<LocalType>(), invoke_context, output, std::forward<Value>(value));\n\n#16 0x0000555556032339 in mp::BuildField<std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >&&, mp::InvokeContext, std::unique_ptr<interfaces::BlockTemplate, std::default_delete<interfaces::BlockTemplate> >, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder> > (context=..., output=..., values=...)\n    at ./ipc/libmultiprocess/include/mp/proxy-types.h:203\n\n>  203          CustomBuildField(TypeList<LocalTypes...>(), Priority<3>(), context, std::forward<Values>(values)...,\n\n#17 0x0000555556030aa4 in mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >, node::BlockWaitOptions>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >&, mp::TypeList<>, node::BlockWaitOptions&&) const (this=0x7fffe801c1ac,\n    server_context=..., args=...) at ./ipc/libmultiprocess/include/mp/proxy-types.h:474\n\n>  474          BuildField(TypeList<decltype(result)>(), invoke_context, Make<StructField, Accessor>(results),\n   475              std::forward<decltype(result)>(result));\n   476      }\n\n#18 0x00005555560306cf in mp::PassField<mp::Accessor<mp::mining_fields::Options, 17>, node::BlockWaitOptions, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<> >(mp::Priority<0>, mp::TypeList<node::BlockWaitOptions>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >&, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<>&&) (server_context=..., fn=..., args=...)\n    at ./ipc/libmultiprocess/include/mp/proxy-types.h:307\n\n>  307      fn.invoke(server_context, std::forward<Args>(args)..., static_cast<LocalType&&>(*param));\n\n#19 0x000055555602f162 in mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> >::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >, mp::TypeList<node::BlockWaitOptions>>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults> >&, mp::TypeList<node::BlockWaitOptions>) const (this=0x7fffe801c1ac, server_context=...) at ./ipc/libmultiprocess/include/mp/proxy-types.h:539\n#20 0x000055555602ee2a in operator() (this=0x7fffe801c188) at ./ipc/libmultiprocess/include/mp/type-context.h:126\n#21 0x000055555602ec4a in operator() (this=0x7fffe801c180) at /nix/store/8xjrdb1y9ng6w6yknzg9h6fkxd3sb824-capnproto-1.2.0/include/kj/function.h:142\n#22 0x0000555555e38fd1 in kj::Function<void()>::operator() (this=0x7fff797f9878) at /nix/store/8xjrdb1y9ng6w6yknzg9h6fkxd3sb824-capnproto-1.2.0/include/kj/function.h:119\n#23 0x0000555555e38cb7 in mp::Unlock<mp::Lock, kj::Function<void()>&> (lock=..., callback=...) at ./ipc/libmultiprocess/include/mp/util.h:209\n#24 0x0000555556406c56 in mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1}>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1})::{lambda()#1}::operator()() const (this=0x7fff797f98e0) at ./ipc/libmultiprocess/include/mp/proxy-io.h:352\n#25 0x0000555556406b96 in std::condition_variable::wait<mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1}>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1})::{lambda()#1}>(std::unique_lock<std::mutex>&, mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1}>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1})::{lambda()#1}) (this=0x7fff68000e88, __lock=..., __p=...) at /nix/store/kzq78n13l8w24jn8bx4djj79k5j717f1-gcc-14.3.0/include/c++/14.3.0/condition_variable:104\n#26 0x0000555556406ac7 in mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1}>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::{lambda()#1}) (this=0x7fff68000e60,\n    lock=..., pred=...) at ./ipc/libmultiprocess/include/mp/proxy-io.h:343\n#27 0x0000555556406979 in mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const (this=0x7fffe801beb8)\n    at ./ipc/libmultiprocess/src/mp/proxy.cpp:419\n```\n</p>\n</details>",
          "created_at": "2026-01-12T17:15:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 12719,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3740256141,
          "user": "plebhash",
          "body": "> The problem can also be prevented on the client side by calling interruptWait and waiting for waitNext reponse before disconnecting\n\nbut I thought the goal of `interruptWait` was so that we could avoid having to wait for `waitNext` to return?\n\nif we still need to do that, isn't `interruptWait` kinda pointless?",
          "created_at": "2026-01-12T19:56:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 313,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3740299476,
          "user": "ismaelsadeeq",
          "body": "It will return immediately, that's the point.\nYou should not disconnect before the wait is interrupted. \n\nBut as @ryanofsky mentioned, this can also be prevented on the server side. \nI will attempt a fix soon.",
          "created_at": "2026-01-12T20:08:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 209,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3740549806,
          "user": "plebhash",
          "body": "> It will return immediately, that's the point. You should not disconnect before the wait is interrupted.\n\ncool, thanks for the clarification.\n\nI added some extra check to make sure we never disconnect (or more precisely, drop the IPC client objects from memory) before the current `waitNext` is finished.\n\n> But as [@ryanofsky](https://github.com/ryanofsky) mentioned, this can also be prevented on the server side. I will attempt a fix soon.\n\nafter this fix, will it be safe to assume that whenever `interruptWait` returns, `waitNext` has also finished its execution?",
          "created_at": "2026-01-12T21:25:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 569,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3740582453,
          "user": "ryanofsky",
          "body": "> if we still need to do that, isn't `interruptWait` kinda pointless?\n\nYes, from a Cap'n Proto client's perspective `interruptWait` was always pointless, because Cap'n Proto already provides a way to cancel any call: the client can just delete the `Promise<Response>` object returned by the call, and the server will be notified and cancel the request.\n\nBut the C++ mining interface which Cap'n Proto exposes is synchronous, not asynchronous, and doesn't know about about promises or cancellations. By default it will continue executing cancelled requests as if nothing happened.\n\nIn #33575 I suggested a few different ways the c++ server code could be notified about cancellations and stop doing unnecessary work. This was important for waitNext because the work it does currently isn't very cheap: it generates a new block every second and doesn't return until the new block has high enough fees.\n\nOne of the solutions suggested in #33575 was to add an `interruptWait` method. This was approach (2). In longer term I think approach (4) mentioned there supporting Cap'n Proto cancellations would be better, but it would take more thoought and effort to implement. Adding `interruptWait` was just an easy way of making `waitNext` calls interruptible while not having to deal with complexity of handling cancellations more generally.\n\n> It will return immediately, that's the point. You should not disconnect before the wait is interrupted.\n\nThis is probably good advice. For simplicity, bitcoin capnproto interfaces (including the mining interface but also other interfaces in #29409, #10102, #32297) were designed to be used by clients that make blocking, serial calls, and use separate threads if they need things to execute in parallel.\n\nThis works well when client and server code are both blocking and synchronous. It's what allowed #29432 implementing a stratum v2 template provider in C++ to be split up across separate processes and repositories straightforwardly without needing to deal with sockets or I/O.\n\nBut this has worked less well with the rust client which is more asynchronous and strays pretty far outside the calling conventions used by the c++ client. We should be able to have full support for the rust client, but the more it does things differently the more crashes like this that would not be triggered from the c++ client will be exposed.\n\n> But as @ryanofsky mentioned, this can also be prevented on the server side. \n> I will attempt a fix soon.\n\nThanks, I also started working on a fix after posting earlier. The fix involves changing `InvokeContext` `Connection&` reference to a pointer and setting it to null when the connection is destroyed and making the `CustomReadField` function in `type-interface.h` throw an exception if the connection is null. The fix is not trivial since it requires using `Connection::addSyncCleanup` to actually set the connection pointer to null on disconnects, and this is very awkward to do from the `type-context.h` execution thread because the connection could be deleted at any time during that thread, even before execution begins.\n\nYou should definitely feel free to attempt another fix, and maybe there is a simpler one. I'm probably less than halfway done on my fix and planning to finish it tomorrow.",
          "created_at": "2026-01-12T21:35:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3271,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3740593063,
          "user": "ryanofsky",
          "body": "> after this fix, will it be safe to assume that whenever `interruptWait` returns, `waitNext` has also finished its execution?\n\nNo, you can't make that assumption about different calls running on different threads. The only way to know when waitNext has finished executing is when the response promise is fulfilled.\n\n",
          "created_at": "2026-01-12T21:38:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 317,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3740616799,
          "user": "ryanofsky",
          "body": "> I added some extra check to make sure we never disconnect (or more precisely, drop the IPC client objects from memory) before the current `waitNext` is finished.\n\nThis should be a safe workaround. To be specific though, it is harmless to drop the IPC client object before the `waitNext` response is returned. The crash only happens when there is a disconnect.",
          "created_at": "2026-01-12T21:42:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 361,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3745566529,
          "user": "ryanofsky",
          "body": "Update: I implemented a fix in 94b07f57232e72981df6fb399fe21bb93a09b667 ([tag](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-cancel.1)) which prevents the crash and is simpler than the fix I mentioned in my comment yesterday https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3740582453, but I'm not really happy with it. The fix I was working on yesterday tried to detect disconnections specficially and avoid deferencing deleted `Connection` pointers in the case of a method returning an interface pointer after a connection was broken. The new fix is simpler and handles cancellations in general, instead of only detecting disconnects, and just avoids doing any unnecessary work after a cancellation happens. But I found that unless `$allowCancellation` annotations are added to the capnp files, disconnecting during a method call does not actually cancel the call, so the fix doesn't work unless extra `$allowCancellation` baggage is added to interfaces. Will look into this more and see if there may be a better fix, or maybe go back to the first approach.\n\nEDIT: The fix in 94b07f57232e72981df6fb399fe21bb93a09b667 is actually broken in another way, because the \"Aborting cancelled IPC request\" exception it tries to raise to fix the issue is never raised. The reason why the change fixes the crash is just that the $Cxx.allowCancellation annotation for reasons I'm not very clear on causes the onDisconnect handler not to be triggered until after the waitNext method returns, so the crash is avoided. This seems like another downside of the change, because it seems better if the connection can be cleaned up without waiting for pending IPC calls that could take arbitrarily long to finish executing.",
          "created_at": "2026-01-13T17:33:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1723,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3746679001,
          "user": "ryanofsky",
          "body": "Update: A better fix is implemented in ba5270dce21050134be5e22df2ddf4529962c7ea ([tag](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-cancel.2)) which avoids the need to require `$allowCancellation` annotations. It works in basically the same way as the last fix aside from that. Will continue working on this and adding tests, etc",
          "created_at": "2026-01-13T21:37:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 336,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3749243782,
          "user": "ryanofsky",
          "body": "Current plan is to open a combined libmultiprocess PR that addresses this issue and #33923. It will:\n\n- Prevent crashes in response-building code after an unclean disconnect using the approach in ba5270dce21050134be5e22df2ddf4529962c7ea ([tag](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-cancel.2)) . This will prevent the crash reported here when a client calls `waitNext`, disconnects without waiting for the response, and then `waitNext` later returns a block template.\n- Resolve [#33923](https://github.com/bitcoin/bitcoin/issues/33923) and allow an arbitrary number of requests to be sent to the same server thread, getting rid of the \"thread busy\" exception. I think this can be done pretty simply by using branching promises and chaining the requests as they come in.\n\nReason for wanting to combine these is that both change type `type-context.h` a lot and I think having the second change would simplify the first. Am planning to to have the libmultiprocess PR implemented and ready for review this week, and when updating the subtree, merging to master and 30.x branches as discussed in #33439 so the same libmultiprocess version is used both branches and behavior is the same in both.",
          "created_at": "2026-01-14T12:02:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1202,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750262199,
          "user": "ismaelsadeeq",
          "body": "> You should definitely feel free to attempt another fix, and maybe there is a simpler one. I'm probably less than halfway done on my fix and planning to finish it tomorrow.\n\nI have been working on other things over the past few days; I will review your PR when it's up and suck all the information above. Thank you for all the context and updates @ryanofsky .",
          "created_at": "2026-01-14T15:59:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 360,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 5017,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2629170491,
      "number": 31204,
      "title": "Source code mapping for debugger has changed since cmake",
      "body": "developer-notes.md says:\r\n\r\n\r\n>1. Configure source file mapping.\r\n>\r\n>For `gdb` create or append to `.gdbinit` file:\r\n>```\r\n>set substitute-path ./src /path/to/project/root/src\r\n>```\r\n>\r\n>For `lldb` create or append to `.lldbinit` file:\r\n>```\r\n>settings set target.source-map ./src /path/to/project/root/src\r\n>```\r\n\r\nBut I found I needed to create a `.lldbinit` file with these lines:\r\n```\r\nsettings append target.source-map build/src/test/ /Users/matthewzipkin/Desktop/work/bitcoin/\r\nsettings append target.source-map build/src/src/ /Users/matthewzipkin/Desktop/work/bitcoin/src/\r\n```\r\n\r\nHere's an example of lldb's confused guess of source location:\r\n\r\n```\r\n(lldb) image lookup -vn  ProcessMessages\r\n1 match found in /Users/matthewzipkin/Desktop/work/bitcoin/build/src/bitcoind:\r\n...\r\n      LineEntry: [0x00000001003302f4-0x000000010033032c): build/src/src/net_processing.cpp:5373\r\n```\r\n\r\nCould just be fixed by updating developer-notes.md -- would we ever include a `.lldbinit` file in the repo itself? Or am I missing something else.",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2024-11-01T14:37:17Z",
      "updated_at": "2026-01-14T15:37:35Z",
      "closed_at": null,
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/issues/31204",
      "labels": [
        "Docs",
        "Build system",
        "Tests"
      ],
      "comment_data": [
        {
          "id": 2568291604,
          "user": "edilmedeiros",
          "body": "After many hours, I could make it work.\r\n\r\nAdd this to ~/.lldbinit to make it load a local .lldbinit file: `settings set target.load-cwd-lldbinit true`. This is a convenience so that I can keep everything related to Bitcoin Core in its repo.\r\n\r\nIn the Bitcoin Core repo folder, add a .lldbinit file with (mine is located at `/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev`, adjust to your path):\r\n```\r\nsettings set target.source-map /Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/ /Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/src/\r\n```\r\n\r\nCompiled with:\r\n`$ cmake -B build -DBoost_INCLUDE_DIR=/opt/local/libexec/boost/1.87/include -DCMAKE_C_COMPILER=clang-mp-18 -DCMAKE_CXX_COMPILER=clang++-mp-18 -DCMAKE_BUILD_TYPE=Debug -DWITH_CCACHE=OFF`\r\n\r\nIn particular, I suspect that `-fdebug-prefix-map` is not doing it's thing:\r\n```\r\n(lldb) set list target.source-map\r\n  target.source-map -- Source path remappings apply substitutions to the paths of source files, typically\r\n                       needed to debug from a different host than the one that built the target.  The\r\n                       source-map property consists of an array of pairs, the first element is a path prefix,\r\n                       and the second is its replacement.  The syntax is `prefix1 replacement1 prefix2\r\n                       replacement2...`.  The pairs are checked in order, the first prefix that matches is\r\n                       used, and that prefix is substituted with the replacement.  A common pattern is to use\r\n                       source-map in conjunction with the clang -fdebug-prefix-map flag.  In the build, use\r\n                       `-fdebug-prefix-map=/path/to/build_dir=.` to rewrite the host specific build directory\r\n                       to `.`.  Then for debugging, use `settings set target.source-map . /path/to/local_dir`\r\n                       to convert `.` to a valid local path.\r\n```\r\n\r\n```\r\nConfigure summary\r\n=================\r\n…\r\nC++ compiler flags …................. -O0 -ftrapv -g3 -std=c++20 -fPIC -fdebug-prefix-map=/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/src=. -fmacro-prefix-map=/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/src=. …\r\n```\r\n\r\nI would expect it to use paths like `./<file>` for debugging symbols, but it's not the case (note the `LineEntry` field below): \r\n```\r\n$ lldb build/src/bitcoind\r\n(lldb) target create \"build/src/bitcoind\"\r\nCurrent executable set to '/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/bitcoind' (arm64).\r\n\r\n(lldb) image lookup -vn main\r\n1 match found in /Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/bitcoind:\r\n        Address: bitcoind[0x00000001000050f0] (bitcoind.__TEXT.__text + 1680)\r\n        Summary: bitcoind`main at bitcoind.cpp:256\r\n         Module: file = \"/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/bitcoind\", arch = \"arm64\"\r\n    CompileUnit: id = {0x00000000}, file = \"/Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/bitcoind.cpp\", language = \"c++14\"\r\n       Function: id = {0x400000000006a2ee}, name = \"main\", range = [0x00000001000050f0-0x0000000100005398)\r\n       FuncType: id = {0x400000000006a2ee}, byte-size = 0, decl = bitcoind.cpp:255, compiler_type = \"int (int, char **)\"\r\n         Blocks: id = {0x400000000006a2ee}, range = [0x1000050f0-0x100005398)\r\n      LineEntry: [0x00000001000050f0-0x0000000100005128): /Users/jose.edil/2-development/bitcoin/bitcoin-core-dev/build/src/bitcoind.cpp:256\r\n         Symbol: id = {0x00023777}, range = [0x00000001000050f0-0x0000000100005398), name=\"main\"\r\n       Variable: id = {0x400000000006a308}, name = \"argc\", type = \"int\", valid ranges = <block>, location = DW_OP_breg31 WSP+88, decl = bitcoind.cpp:255\r\n       Variable: id = {0x400000000006a317}, name = \"argv\", type = \"char **\", valid ranges = <block>, location = DW_OP_breg31 WSP+80, decl = bitcoind.cpp:255\r\n       Variable: id = {0x400000000006a326}, name = \"node\", type = \"NodeContext\", valid ranges = <block>, location = DW_OP_breg31 WSP+136, decl = bitcoind.cpp:262\r\n       Variable: id = {0x400000000006a336}, name = \"exit_status\", type = \"int\", valid ranges = <block>, location = DW_OP_breg31 WSP+132, decl = bitcoind.cpp:263\r\n       Variable: id = {0x400000000006a346}, name = \"init\", type = \"unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init> >\", valid ranges = <block>, location = DW_OP_breg31 WSP+120, decl = bitcoind.cpp:264\r\n       Variable: id = {0x400000000006a356}, name = \"args\", type = \"ArgsManager &\", valid ranges = <block>, location = DW_OP_breg31 WSP+56, decl = bitcoind.cpp:277\r\n```",
          "created_at": "2025-01-02T19:50:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 4649,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2681660181,
          "user": "rkrux",
          "body": "> But I found I needed to create a .lldbinit file with these lines:\n\n@pinheadmz Has this fixed the mapping in your system permanently? I have not tried this yet and I observe that the source file detection fails because it seems to be generated in a new location everytime I build again like in the below errors.\n\n```\nBreakpoint at /Users/rkrux/projects/bitcoin/src/script/descriptor.cpp:1512 could not be resolved, but a valid location was found at /Users/rkrux/projects/bitcoin/build/src/script/descriptor.cpp:1512\n\nBreakpoint at /Users/rkrux/projects/bitcoin/src/wallet/wallet.cpp:1326 could not be resolved, but a valid location was found at /Users/rkrux/projects/bitcoin/build/src/wallet/wallet/wallet.cpp:1326\n```\n\nI will try this solution.",
          "created_at": "2025-02-25T11:36:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 746,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2682988681,
          "user": "pinheadmz",
          "body": "I'm still tweaking the .lldbinit file actually -- sometimes I'll be debugging with lldb and end up in a new directory I hadn't linked yet like `/fuzz` or something and it'll break again. So I suspect there is a simple catch all solution I just haven't figured it out yet",
          "created_at": "2025-02-25T18:56:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 270,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2700638411,
          "user": "fanquake",
          "body": "It's not clear if this is something that needs to be fixed, (is a regression), or if it's a behaviour change that needs to be documented in some way, (in the developer notes), or something else? cc @hebasto ",
          "created_at": "2025-03-05T11:25:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 207,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2701051806,
          "user": "hodlinator",
          "body": "I find it okay to have to set a mapping for the root directory, but I currently need things like:\n```\n\"/home/hodlinator/b2/build/src/test/util/test/util/\": \"/home/hodlinator/b2/src/test/util/\"\n```\nNote how the subdirectory needs to be repeated for it to work: `test/util/test/util/`\n\nSame thing happened for rkrux [above](https://github.com/bitcoin/bitcoin/issues/31204#issuecomment-2681660181):\n```\n...valid location was found at /Users/rkrux/projects/bitcoin/build/src/wallet/wallet/wallet.cpp\n```",
          "created_at": "2025-03-05T14:07:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 499,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2701137950,
          "user": "hebasto",
          "body": "@hodlinator \n\nMind submitting a PR?",
          "created_at": "2025-03-05T14:40:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 35,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2701167796,
          "user": "hodlinator",
          "body": "Any idea where to start looking for the duplicate subdirectory issue? Where do we get the virtual build/src/ paths to begin with?",
          "created_at": "2025-03-05T14:51:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 129,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2741816753,
          "user": "willcl-ark",
          "body": "This seems to work for me on Linux without any `.lldbinit` file:\n\n```bash\nwill@ubuntu in …/src/core/bitcoin on  master [$] via △ v3.31.6 : 🐍 (core)\n$ just clean build-depends\ndepends build running\ncopying packages: boost libevent qt expat libxcb xcb_proto libXau xproto freetype fontconfig libxkbcommon libxcb_util libxcb_util_render libxcb_util_keysyms libxcb_util_image libxcb_util_wm qrencode bdb sqlite systemtap zeromq\nto: /home/will/src/core/bitcoin/depends/x86_64-pc-linux-gnu\nTo build Bitcoin Core with these packages, pass '--toolchain /home/will/src/core/bitcoin/depends/x86_64-pc-linux-gnu/toolchain.cmake' to the first CMake invocation.\ndepends build complete\nconfigure running\nconfigure complete\nbuild running\nbuild complete\n\nwill@ubuntu in …/src/core/bitcoin on  master [$] via △ v3.31.6 : 🐍 (core) took 2m13s\n$ lldb --version\nlldb version 19.1.7\n\nwill@ubuntu in …/src/core/bitcoin on  master [$] via △ v3.31.6 : 🐍 (core) took 27s\n$ lldb\n(lldb) target create build/bin/bitcoind\nCurrent executable set to '/home/will/src/core/bitcoin/build/bin/bitcoind' (x86_64).\n(lldb) image lookup -vn  ProcessMessages\n1 match found in /home/will/src/core/bitcoin/build/bin/bitcoind:\n        Address: bitcoind[0x00000000004c7d20] (bitcoind.PT_LOAD[1]..text + 1016240)\n        Summary: bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) at net_processing.cpp:4927\n         Module: file = \"/home/will/src/core/bitcoin/build/bin/bitcoind\", arch = \"x86_64\"\n    CompileUnit: id = {0x0000001d}, file = \"/home/will/src/core/bitcoin/src/net_processing.cpp\", language = \"c++14\"\n       Function: id = {0x007eedbb}, name = \"(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\", mangled = \"_ZN12_GLOBAL__N_115PeerManagerImpl15ProcessMessagesEP5CNodeRSt6atomicIbE\", range = [0x00000000004c7d20-0x00000000004c8b17)\n       FuncType: id = {0x007eedbb}, byte-size = 0, decl = net_processing.cpp:495, compiler_type = \"_Bool (class CNode *, struct std::atomic<_Bool> &)\"\n         Blocks: id = {0x007eedbb}, range = [0x004c7d20-0x004c8b17)\n      LineEntry: [0x00000000004c7d20-0x00000000004c7d4f): /home/will/src/core/bitcoin/src/net_processing.cpp:4927\n         Symbol: id = {0x00001b57}, range = [0x00000000004c7d20-0x00000000004c8b17), name=\"(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\", mangled=\"_ZN12_GLOBAL__N_115PeerManagerImpl15ProcessMessagesEP5CNodeRSt6atomicIbE\"\n       Variable: id = {0x007eedf7}, name = \"peer\", type = \"PeerRef\", valid ranges = <block>, location = DW_OP_fbreg +80, decl = net_processing.cpp:4931\n       Variable: id = {0x007eee06}, name = \"poll_result\", type = \"optional<std::pair<CNetMessage, bool> >\", valid ranges = <block>, location = DW_OP_fbreg +288, decl = net_processing.cpp:4962\n\n(lldb)\n```\n\nPerhaps #31161 affected this, or is it a macOS-specific issue? Is it still an issue on current master?\n\n<details>\n<summary>configure log</summary>\n\n```bash\n\nConfiguring secp256k1 subtree...\n\n\nsecp256k1 configure summary\n===========================\nBuild artifacts:\n  library type ........................ Static\nOptional modules:\n  ECDH ................................ OFF\n  ECDSA pubkey recovery ............... ON\n  extrakeys ........................... ON\n  schnorrsig .......................... ON\n  musig ............................... OFF\n  ElligatorSwift ...................... ON\nParameters:\n  ecmult window size .................. 15\n  ecmult gen table size ............... 86 KiB\nOptional features:\n  assembly ............................ x86_64\n  external callbacks .................. OFF\nOptional binaries:\n  benchmark ........................... OFF\n  noverify_tests ...................... ON\n  tests ............................... ON\n  exhaustive tests .................... ON\n  ctime_tests ......................... OFF\n  examples ............................ OFF\n\nCross compiling ....................... FALSE\nValgrind .............................. OFF\nPreprocessor defined macros ........... ENABLE_MODULE_ELLSWIFT=1 ENABLE_MODULE_SCHNORRSIG=1 ENABLE_MODULE_EXTRAKEYS=1 ENABLE_MODULE_RECOVERY=1 ECMULT_WINDOW_SIZE=15 COMB_BLOCKS=43 COMB_TEETH=6 USE_ASM_X86_64=1\nC compiler ............................ Clang 19.1.7, /usr/lib/ccache/clang\nCFLAGS ................................ -pipe -std=c11\nCompile options ....................... -pedantic -Wall -Wcast-align -Wconditional-uninitialized -Wextra -Wnested-externs -Wno-long-long -Wno-overlength-strings -Wno-unused-function -Wreserved-identifier -Wshadow -Wstrict-prototypes -Wundef\nBuild type:\n - CMAKE_BUILD_TYPE ................... RelWithDebInfo\n - CFLAGS ............................. -O2 -O2 -g \n - LDFLAGS for executables ............ \n - LDFLAGS for shared libraries ....... \n\n\n\nConfigure summary\n=================\nExecutables:\n  bitcoind ............................ ON\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... ON\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... ON\n  bitcoin-tx .......................... ON\n  bitcoin-util ........................ ON\n  bitcoin-wallet ...................... ON\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... ON\n   - legacy wallets (Berkeley DB) ..... ON\n  external signer ..................... ON\n  ZeroMQ .............................. ON\n  USDT tracing ........................ ON\n  QR code (GUI) ....................... ON\n  DBus (GUI, Linux only) .............. ON\nTests:\n  test_bitcoin ........................ ON\n  test_bitcoin-qt ..................... ON\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... OFF\n\nCross compiling ....................... FALSE\nC++ compiler .......................... Clang 19.1.7, /usr/lib/ccache/clang++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ........... \nC++ compiler flags .................... -pipe -std=c++20 -O2 -O2 -g -std=c++20 -fPIC -fdebug-prefix-map=/home/will/src/core/bitcoin/src=. -fmacro-prefix-map=/home/will/src/core/bitcoin/src=. -Wall -Wextra -Wgnu -Wformat -Wformat-security -Wvla -Wshadow-field -Wthread-safety -Wloop-analysis -Wredundant-decls -Wunused-member-function -Wdate-time -Wconditional-uninitialized -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wdocumentation -Wself-assign -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection\nLinker flags .......................... -pipe -std=c++20 -O2 -O2 -g -fuse-ld=mold -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nAttempt to harden executables ......... ON\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. ON\n\n\n```\n\n\n</details>",
          "created_at": "2025-03-20T22:36:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 7211,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2742587668,
          "user": "maflcko",
          "body": "> I find it okay to have to set a mapping for the root directory, but I currently need things like:\n> \n> ```\n> \"/home/hodlinator/b2/build/src/test/util/test/util/\": \"/home/hodlinator/b2/src/test/util/\"\n> ```\n> \n> Note how the subdirectory needs to be repeated for it to work: `test/util/test/util/`\n> \n> Same thing happened for rkrux [above](https://github.com/bitcoin/bitcoin/issues/31204#issuecomment-2681660181):\n> \n> ```\n> ...valid location was found at /Users/rkrux/projects/bitcoin/build/src/wallet/wallet/wallet.cpp\n> ```\n\nI am also seeing non-existent folders in https://github.com/bitcoin/bitcoin/issues/31957:\n\n\n```\n  ./bld-c/src/crypto/./src/compat/byteswap.h\n  ./bld-c/src/crypto/./src/crypto/sha256.cpp\n  ./bld-c/src/crypto/./src/crypto/sha512.cpp\n  ./bld-c/src/test/./src/test/crypto_tests.cpp\n  ./bld-c/src/test/./src/test/util_tests.cpp\n  ./bld-c/src/util/./src/random.cpp\n  ./bld-c/src/util/./src/util/string.cpp\n```\n\nWith the steps to reproduce there, it is a cmake regression. I am not sure if `callgrind_annotate` allows mapping, so it may be best to fix this inside the build system itself.",
          "created_at": "2025-03-21T07:44:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1111,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2754215884,
          "user": "hebasto",
          "body": "https://github.com/bitcoin/bitcoin/issues/31204#issuecomment-2741816753:\n\n> This seems to work for me on Linux without any `.lldbinit` file:\n\nI tested v28.1 on Ubuntu 24.04 with GCC 13.3:\n```\n$ ./configure --enable-ccache\n$ make -j $(nproc) src/bitcoind\n$ lldb\n(lldb) version\nlldb version 18.1.3\n(lldb) target create src/bitcoind\nCurrent executable set to '/home/hebasto/dev/bitcoin/src/bitcoind' (x86_64).\n(lldb) settings show target.source-map\ntarget.source-map (path-map) =\n(lldb) image lookup -vn ProcessMessages\n1 match found in /home/hebasto/dev/bitcoin/src/bitcoind:\n        Address: bitcoind[0x00000000001e31e0] (bitcoind.PT_LOAD[1]..text + 1776496)\n        Summary: bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\n         Module: file = \"/home/hebasto/dev/bitcoin/src/bitcoind\", arch = \"x86_64\"\n    CompileUnit: id = {0x00000008}, file = \"src/net_processing.cpp\", language = \"c++14\"\n      LineEntry: [0x00000000001e31e0-0x00000000001e31f1): src/net_processing.cpp:5380:1\n         Symbol: id = {0x000003ed}, range = [0x00000000001e31e0-0x00000000001e3cf0), name=\"(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\", mangled=\"_ZN12_GLOBAL__N_115PeerManagerImpl15ProcessMessagesEP5CNodeRSt6atomicIbE\"\n\n(lldb) settings set target.source-map ./src /home/hebasto/dev/bitcoin/src\n(lldb) settings show target.source-map\ntarget.source-map (path-map) =\n[0] \"src\" -> \"/home/hebasto/dev/bitcoin/src\"\n\n(lldb) image lookup -vn ProcessMessages\n1 match found in /home/hebasto/dev/bitcoin/src/bitcoind:\n        Address: bitcoind[0x00000000001e31e0] (bitcoind.PT_LOAD[1]..text + 1776496)\n        Summary: bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\n         Module: file = \"/home/hebasto/dev/bitcoin/src/bitcoind\", arch = \"x86_64\"\n    CompileUnit: id = {0x00000008}, file = \"src/net_processing.cpp\", language = \"c++14\"\n      LineEntry: [0x00000000001e31e0-0x00000000001e31f1): src/net_processing.cpp:5380:1\n         Symbol: id = {0x000003ed}, range = [0x00000000001e31e0-0x00000000001e3cf0), name=\"(anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&)\", mangled=\"_ZN12_GLOBAL__N_115PeerManagerImpl15ProcessMessagesEP5CNodeRSt6atomicIbE\"\n\n```\n\nSo the guideline for lldb does not work in my build environment, even for the pre-CMake branch.",
          "created_at": "2025-03-26T12:19:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 2387,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2770301026,
          "user": "maflcko",
          "body": "Is this a blocker for 29.0? Seems fine to backport to 29.1, if it is ready later, no?",
          "created_at": "2025-04-01T18:09:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 85,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2773411660,
          "user": "pinheadmz",
          "body": "definitely not a blocker but I think I figured it out: https://github.com/bitcoin/bitcoin/pull/32205",
          "created_at": "2025-04-02T18:44:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 100,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3548048120,
          "user": "maflcko",
          "body": "For reference, inside GDB, the following worked for me:\n\n```\n(gdb) set substitute-path ./ /path/to/project/root/src\n```\n\n*Not* using the (outdated?) gdbinit advice:\n\n```\nset substitute-path ./src /path/to/project/root/src\n```\n\nAs an alternative, i could use debugedit:\n\n```\ndebugedit --base-dir ./ --dest-dir /path/to/project/root/src     bld-cmake/bin/test_kernel",
          "created_at": "2025-11-18T15:06:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 364,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3567837050,
          "user": "hebasto",
          "body": "@pinheadmz \n\nDoes the approach proposed in both https://github.com/bitcoin/bitcoin/issues/31957#issuecomment-3567810672 and https://github.com/bitcoin/bitcoin/issues/31957#issuecomment-3567833333 make any difference to this issue?",
          "created_at": "2025-11-23T11:12:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 230,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3662141240,
          "user": "arejula27",
          "body": "Hi, I proposed an alternative to https://github.com/bitcoin/bitcoin/pull/32205, instead of modifying the doc making each user configure the path, do it dynamically on cmake: https://github.com/bitcoin/bitcoin/pull/34081",
          "created_at": "2025-12-16T19:54:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 219,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3750142297,
          "user": "maflcko",
          "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/34281. Tested on a fresh install of Ubuntu 26.04 LTS:\n\n* Master:\n\n```\n# lldb\n(lldb) version\nlldb version 21.1.7\n(lldb) target create ./bld-c/bin/bitcoind\nCurrent executable set to '/b-c/bld-c/bin/bitcoind' (x86_64).\n(lldb) settings show target.source-map\ntarget.source-map (path-map) =\n(lldb) breakpoint set --name AppInitSanityChecks\nBreakpoint 1: where = bitcoind`AppInitSanityChecks(kernel::Context const&) at init.cpp:1161:1, address = 0x00000000001981c0\n(lldb) run\nerror: Cannot launch '/b-c/bld-c/bin/bitcoind': personality set failed: Function not implemented\n(lldb) settings set target.disable-aslr false\n(lldb) run\nProcess 20302 launched: '/b-c/bld-c/bin/bitcoind' (x86_64)\nProcess 20302 stopped\n* thread #1, name = 'bitcoind', stop reason = breakpoint 1.1\n    frame #0: 0x0000563485dce1c0 bitcoind`AppInitSanityChecks(kernel=0x00005634923d71d0) at init.cpp:1161:1\n(lldb) \n```\n\n* My fix:\n\n```\n# lldb\n(lldb) version\nlldb version 21.1.7\n(lldb) target create ./bld-c/bin/bitcoind\nCurrent executable set to '/b-c-pull-34281/bld-c/bin/bitcoind' (x86_64).\n(lldb) settings show target.source-map\ntarget.source-map (path-map) =\n(lldb) breakpoint set --name AppInitSanityChecks\nBreakpoint 1: where = bitcoind`AppInitSanityChecks(kernel::Context const&) at init.cpp:1161:1, address = 0x00000000001981c0\n(lldb) run\nerror: Cannot launch '/b-c-pull-34281/bld-c/bin/bitcoind': personality set failed: Function not implemented\n(lldb) settings set target.disable-aslr false\n(lldb) run\nProcess 20308 launched: '/b-c-pull-34281/bld-c/bin/bitcoind' (x86_64)\nProcess 20308 stopped\n* thread #1, name = 'bitcoind', stop reason = breakpoint 1.1\n    frame #0: 0x0000564415caf1c0 bitcoind`AppInitSanityChecks(kernel=0x000056443ed4d1d0) at init.cpp:1161:1\n   1158\t}\n   1159\t\n   1160\tbool AppInitSanityChecks(const kernel::Context& kernel)\n-> 1161\t{\n   1162\t    // ********************************************************* Step 4: sanity checks\n   1163\t    auto result{kernel::SanityChecks(kernel)};\n   1164\t    if (!result) {\n(lldb) \n",
          "created_at": "2026-01-14T15:37:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2066,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1094,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3405677599,
      "number": 33363,
      "title": "Early detect non-loopback traffic from unit tests",
      "body": "Tests should not attempt to create network connections over the internet because that has unpredictable timing and outcome. It could also reveal the location (IP address) where somebody is running Bitcoin Core tests, if the target address is very specific, e.g. not `github.com:443`, but `1.2.3.4:8333` for example. See [#31339](https://github.com/bitcoin/bitcoin/issues/31339).\n\nhttps://github.com/bitcoin/bitcoin/pull/31349 is an attempt to detect such cases in CI. In the [discussions](https://github.com/bitcoin/bitcoin/pull/31349#pullrequestreview-3185369594) on that PR a complementary idea came up - to use a mocked socket from unit tests to detect such usage. That could be done in addition if there is support for it and if not too complicated.\n\nI guess, if this is to be done, either `CreateSock()` should be changed from `BasicTestingSetup` to throw right away or return a mocked `Sock` object that has a real underlying socket and throws on attempts to create non-loopback connections.",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-09-11T09:33:22Z",
      "updated_at": "2026-01-14T15:19:07Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33363",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1047,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3410376062,
      "number": 33375,
      "title": "bench: unrealistic ConnectBlock benchmarks",
      "body": "The current `ConnectBlock` benchmarks in `bench/connectblock.cpp` do not reflect realistic mainnet workloads due to three key issues:\n\n#### 1. Unrealistic block composition\n\nEvery benchmarked block is constructed with a highly artificial transaction pattern:\n\n```c\n/*\n * - Each transaction has the same number of inputs and outputs\n * - All Taproot inputs use simple key path spends (no script path spends)\n * - All signatures use SIGHASH_ALL (default sighash)\n * - Each transaction spends all outputs from the previous transaction\n */\n```\n\nThis setup avoids realistic UTXO set fragmentation and script diversity. The benchmark effectively measures validation of a synthetic \"ladder\" of transactions rather than a block resembling mainnet traffic.\n\n#### 2. Unrealistic UTXO cache state\n\nBefore benchmarking, the code creates a block that produces the outputs, then immediately spends them all in the benchmark block. This keeps the entire UTXO set hot in memory (`CoinsTip()`).\n\nIn reality:\n\n* Many UTXO lookups hit LevelDB and require disk access.\n* Cache misses and eviction policies significantly impact block validation cost.\n\n#### 3. Unrealistic repetition\n\nEach benchmark repeatedly validates the same synthetic block:\n\n```cpp\n    const auto& test_block{CreateTestBlock(test_setup, keys, outputs)};\n    bench.unit(\"block\").run([&] {\n        /* ... */\n    });\n```\n\nThere is no variability in transaction graph, script mix, or UTXO evolution across iterations. As a result, the benchmark never exercises cache churn, block-to-block dependency patterns, or realistic workload diversity.\n\n---\n\n### Why this matters\n\nThese issues mean the benchmark results do not reflect real-world `ConnectBlock` performance. Instead, they measure a best-case, memory-only workload on a synthetic block structure.\n",
      "state": "open",
      "user": "Raimo33",
      "created_at": "2025-09-12T12:53:02Z",
      "updated_at": "2026-01-14T15:18:23Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33375",
      "labels": [
        "Validation"
      ],
      "comment_data": [
        {
          "id": 3287201170,
          "user": "davidgumberg",
          "body": "I am [skeptical](https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2655685417) of trying to measure end-to-end performance of Bitcoin Core systems like block connection including LevelDB performance using a microbenchmark suite. In my opinion, these benchmarks work best at measuring the performance of specific components and functions a-la unit tests, and I would not object to adding more scenarios to `ConnectBlock()` that are meant to exercise the performance of certain segments of block connection, but I think to get measurements of realistic scenarios, there is no substitute for just measuring Bitcoin Core nodes doing IBD, of interest might be the benchkit project for measuring IBD's: https://github.com/bitcoin-dev-tools/benchkit.",
          "created_at": "2025-09-13T00:06:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 752,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3288478820,
          "user": "Raimo33",
          "body": "it's not \"a little bit of faithfulness\" that you sacrifice. you're ignoring the cache completely.",
          "created_at": "2025-09-13T14:44:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 97,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3290237829,
          "user": "l0rinc",
          "body": "@Raimo33 if you can provide an alternative that's reasonably simple for a micro-benchmark, I will happily review it.\n\nBut note that I already have a few micro-benchmark improvements in that area where review is needed:\n* https://github.com/bitcoin/bitcoin/pull/32554 - creates a configurable block so that we can measure the composition of the block\n* https://github.com/bitcoin/bitcoin/pull/32729/files#diff-547fa26a77a99ccd77aca7ce1c69c0544666f788d463dc7bff664001f9ff1c88R40 - splits checkblock measurements from serialization\n* https://github.com/bitcoin/bitcoin/pull/31868/files#diff-547fa26a77a99ccd77aca7ce1c69c0544666f788d463dc7bff664001f9ff1c88R24 - adding separate benchmark for serialization size counting\n* https://github.com/bitcoin/bitcoin/pull/31682/files#diff-99f9f77ae4c2d8d3d3b611b8a38ee08b48239dcc30417179b07b1b092b1d9dd6R138 - dedicated transaction processing benchmark",
          "created_at": "2025-09-15T02:11:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 888,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3292198687,
          "user": "HowHsu",
          "body": "I can confirm that this issue is true, during my testing for my PR： [https://github.com/bitcoin/bitcoin/pull/32791](url) .\nTo test ConnectBlock() realistically, I think we can leverage `CVerifyDB::VerifyDB()`, it is called on node init. It mainly replays\nthe latest `-check_blocks` blocks in the best chain when you set `-check_level` to 4. Considering cache state, you have to manually\nset it at the begining (flush it for no-cache case, pre-load entries for cache-hit case, .etc).Surely you have to find a good height range of blocks first.",
          "created_at": "2025-09-15T13:34:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 542,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1843,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3528797348,
      "number": 33655,
      "title": "importdescriptors: check for errors before rescanning",
      "body": "I tried to import two descriptors with labels but one was an internal descriptor. I didn't realize that was not allowed until the entire rescan (for the first descriptor) completed and the return object included  success false with that error message, for the second descriptor.",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2025-10-18T12:49:22Z",
      "updated_at": "2026-01-14T15:17:41Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33655",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3418640920,
          "user": "waketraindev",
          "body": "Reference: #31514, #32376, #33614 ",
          "created_at": "2025-10-18T16:40:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 34,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3490788538,
          "user": "naiyoma",
          "body": "Currently, if there are any validation errors, they're added in the result and returned after a rescan . I think we should validate all descriptors first without modifying the wallet. If any descriptor fails validation, throw an error immediately and abort— no rescan.\nA possible fix for this:\n\n```diff\ndiff --git a/src/wallet/rpc/backup.cpp b/src/wallet/rpc/backup.cpp                                                                                                                      \nindex 4b4e432176..342f27dc13 100644                                                                                                                                                     \n--- a/src/wallet/rpc/backup.cpp                                                                                                                                                         \n+++ b/src/wallet/rpc/backup.cpp                                                                                                                                                         \n@@ -137,7 +137,7 @@ static int64_t GetImportTimestamp(const UniValue& data, int64_t now)                                                                                                \n     throw JSONRPCError(RPC_TYPE_ERROR, \"Missing required timestamp field for key\");                                                                                                    \n }                                                                                                                                                                                      \n                                                                                                                                                                                        \n-static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, const int64_t timestamp) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet)                                     \n+static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, const int64_t timestamp, bool validate_only = false) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet)\n {                                                                                          \n     UniValue warnings(UniValue::VARR);      \n     UniValue result(UniValue::VOBJ);\n@@ -224,8 +224,9 @@ static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, c\n             throw JSONRPCError(RPC_WALLET_ERROR, \"Cannot import private keys to a wallet with private keys disabled\");\n         }\n                                                                                            \n+                                                                                           \n         for (size_t j = 0; j < parsed_descs.size(); ++j) {      \n-            auto parsed_desc = std::move(parsed_descs[j]);                                                                                                                             \n+            const auto& parsed_desc = parsed_descs[j];\n             if (parsed_descs.size() == 2) {\n                 desc_internal = j == 1;\n             } else if (parsed_descs.size() > 2) {\n@@ -259,6 +260,20 @@ static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, c\n                    warnings.push_back(\"Not all private keys provided. Some wallet functionality may return unexpected errors\");\n                }\n             }\n+        }\n+        }\n+        if (validate_only) {\n+            result.pushKV(\"success\", UniValue(true));\n+            PushWarnings(warnings, result);\n+            return result;\n+        }\n+        for (size_t j = 0; j < parsed_descs.size(); ++j) {\n+            auto parsed_desc = std::move(parsed_descs[j]);\n+            bool desc_internal = internal.has_value() && internal.value();\n+            if (parsed_descs.size() == 2) {\n+                desc_internal = j == 1;\n+            } else if (parsed_descs.size() > 2) {\n+                CHECK_NONFATAL(!desc_internal);\n+            }\n  \n             WalletDescriptor w_desc(std::move(parsed_desc), timestamp, range_start, range_end, next_index);\n  \n@@ -379,6 +394,15 @@ RPCHelpMan importdescriptors()\n  \n         CHECK_NONFATAL(pwallet->chain().findBlock(pwallet->GetLastBlockHash(), FoundBlock().time(lowest_timestamp).mtpTime(now)));\n  \n+        for (const UniValue& request : requests.getValues()) {\n+        const int64_t timestamp = std::max(GetImportTimestamp(request, now), minimum_timestamp);\n+        const UniValue result = ProcessDescriptorImport(*pwallet, request, timestamp, /*validate_only=*/true);\n+        // If any validation fails, throw immediately and abort everything\n+        if (!result[\"success\"].get_bool()) {\n+            throw result[\"error\"];\n+        }\n+    }\n+\n         // Get all timestamps and extract the lowest timestamp\n\n\n```\n",
          "created_at": "2025-11-05T11:52:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 4862,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3491424830,
          "user": "pinheadmz",
          "body": "@naiyoma thanks for taking an interest in this and digging in! I think a cleaner approach would be to separate the validation into a separate function entirely, so we validate in a loop first then process in a second loop. It smells better than adding an extra argument and feels more bitcoin-core-y. If you open a PR like that I'll help you get it merged ;-)",
          "created_at": "2025-11-05T14:09:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 359,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3496960469,
          "user": "naiyoma",
          "body": "\n\n\n> ! I think a cleaner approach would be to separate the validation into a separate function entirely, so we validate in a loop first then process in a second loop. It smells better than adding an extra argument and feels more bitcoin-core-y. If you open a PR like that I'll help you get it merged ;-)\n\ngreat, I'll work on this \n\n",
          "created_at": "2025-11-06T12:14:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 332,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 332,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3638031791,
      "number": 33899,
      "title": "Block template memory management (for IPC clients)",
      "body": "## Background\n\nEach time we send an IPC client a new `BlockTemplate`, via `createNewBlock` or `waitNext` on the Mining interface, libmultiprocess ensures that we hold on to its encapsulated `CBlockTemplate`. It's just as if our own code has a shared pointer to it.\n\nWe let go of it when either the client calls the `destroy` method or they disconnect (cc @ryanofsky ??).\n\nThe `CBlockTemplate` in turn contains a `CBlock` which contains pointers to individual transactions. Those transactions were in the mempool at the time the template was created, so initially there's barely any memory overhead. But as time goes by the mempool changes and the template keeps holding on to them.\n\nThis is an important behavior, because at any time the client may call `submitSolution()`. That method only takes the `nVersion`, `nTime`, `nonce` and a coinbase transaction as arguments, so it's up to us to reconstruct the block and broadcast it to our peers.\n\nAdditionally, in scenarios where a miner proposes blocks to the pool, such as pool may request some or all of the transactions for inspection.\n\nAt some point however we need to let go of `CBlockTemplate` references, because otherwise the node runs out of memory.\n\nI think we should leave it up to the client to decide which templates they want us to hold on to. That's because there isn't an obvious best way to do this. For example, we might be sending the client many new templates that build on the same prevhash but have more fees. They may decide to rate limit how many to forward downstream to the miner. Or a miner proxy might do such rate limiting. Mining equipment also needs some time to switch work, so it might send us a solution to a slightly older template.\n\nIn sv2-tp so far I implemented a fairly simple heuristic: 10 seconds after the tip changes, wipe all templates that refer to the previous tip. Additionally it limits the frequency of new templates to once every `-sv2interval` seconds (default 30), though I'm considering dropping that rate limiting in https://github.com/stratum-mining/sv2-tp/issues/60.\n\nThe work-in-progress SRI implementation in https://github.com/stratum-mining/sv2-apps/pull/59 currently wipes templates as soon as the tip updates and has no rate limiting other than by fee delta.\n\n## Memory management implementation\n\nThere are probably different ways we can go about memory management here.\n\nThe most straightforward approach is probably to track the additional memory footprint and bound it to `-maxtemplatepoolsize`. If we default that to 50MB it should be plenty for the block template manager proposed in https://github.com/bitcoin/bitcoin/issues/33758, when it's not used for mining.\n\nThe node could refuse to make new templates when it gets to 80% full and automatically drop the oldest template if it crosses 100%. \n\n## Memory management interface\n\n`createNewBlock` and `waitNext` could throw an exception or return null if the template memory is full. Both are a bit tricky to handle, so maybe they need an additional response status argument to communicate the situation.\n\nWe could also add an additional method to obtain how much memory is used and available. That would allow the Template Provider to pre-empt situations where we refuse to provide it new templates, and worse, where we start dropping them unilaterally.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-18T12:46:17Z",
      "updated_at": "2026-01-14T15:16:51Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/33899",
      "labels": [
        "Mining",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3547497692,
          "user": "Sjors",
          "body": "cc @ryanofsky, @plebhash",
          "created_at": "2025-11-18T12:46:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 24,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3549117345,
          "user": "plebhash",
          "body": "> so maybe they need an additional response status argument to communicate the situation.\n\nindeed this would be essential to make sure we know why `waitNext` failed and what we need to do about it (drop old template instead of assuming something went bad)",
          "created_at": "2025-11-18T18:57:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3549589356,
          "user": "ryanofsky",
          "body": "> The node could refuse to make new templates when it gets to 80% full and automatically drop the oldest template if it crosses 100%.\n\nMakes sense. The way I imagined it working is just that there would be some some configurable limit on how many much memory could be used by block template, and a createNewBlock or waitNext call exceeded that limit they could just throw an exception.\n\nIt shouldn't be necessary to modify the capnp interface to do this since cap'n proto provides a built in [OVERLOADED](https://github.com/capnproto/capnproto/blob/e2881d1d8179c097558718dda4ca9139ea0e1d28/c%2B%2B/src/kj/exception.h#L51-L57) exception that seems pretty appropriate for this case.\n\nAutomatically dropping the oldest templates would also be possible. I'm not sure it would be worth additional complexity on the client and server sides, but you would know better.",
          "created_at": "2025-11-18T21:55:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 861,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3549744583,
          "user": "plebhash",
          "body": "we ran some numbers\n\non client side, we're keeping track of:\n- header: 80 bytes\n- coinbase tx: ~150 bytes (empirically observed)\n- merkle path: worst case ~600 bytes\n\nassuming a rather extreme scenario:\n- max block time ever observed: ~2h\n- ever-increasing mempool leading to ~1 template/s\n\nthis stay below ~10MB of RAM consumption\n\nthis could only be extrapolated if we went into even more extreme scenario of mempool changes leading to sub-second template times, which actually motivated me to introduce some kind of rate-limiting mechanism similar to what @Sjors has on `sv2-tp`\n\n(it's extremely unlikely that mempool would sustain sub-second changes for over 2h, but there's other motivations for rate-limiting as well)\n\nwe briefly considered introducing some constant to start dropping old templates after such limit, but after this analysis I started to feel that's not really necessary, since worst case <10MB of RAM consumption is something we're pretty ok to live with\n\non the server side however, you'd have to keep all txdata as well, so you could easily get into several GB territory on a worst case analysis... so this kind of safety mechanism is probably necessary! and as a consequence, the client will eventually need to start dropping templates when we observe a [`Overloaded`](https://docs.rs/capnp/latest/capnp/enum.ErrorKind.html#variant.Overloaded) error coming from `waitNext` requests",
          "created_at": "2025-11-18T22:46:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1407,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3551580243,
          "user": "Sjors",
          "body": "@plebhash indeed I'm not worried about client-side memory, it's the node that could get into memory trouble if there's a long block interval with lots of mempool churn.\n\n> it's extremely unlikely that mempool would sustain sub-second changes for over 2h\n\nIn the context of templates we only care about about the top of the mempool. For the mempool as a whole there can be dozens of transactions per second, see e.g. #28592.\n\n@ryanofsky how would the node go about tracking the memory footprint of clients? Does libmultiprocess track which templates the client still references and is that something we can access?\n\nOr do we need to collect shared pointers to each template we handed out, and drop them as soon as `use_count() == 1`?\n\nWe'd also want to occasionally measure the non-mempool memory footprint of each template and track the total somewhere.",
          "created_at": "2025-11-19T09:03:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 853,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3553407353,
          "user": "plebhash",
          "body": "we're discussing this on a Sv2 call and @GitGab19 pointed out that whatever default value is set for `-maxtemplatepoolsize` should be a reasonable number\n\nthe main concern is having values that are too low, which would make templates be discarded too soon\n\nwe're not sure what the ideal value should be, but just writing this to bring awareness to this",
          "created_at": "2025-11-19T15:43:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 352,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3553938834,
          "user": "ryanofsky",
          "body": "> [@ryanofsky](https://github.com/ryanofsky) how would the node go about tracking the memory footprint of clients? \n\nThe way I imagined this working is that `MinerImpl` class would have an `size_t m_block_templates_size` member, which the `BlockTemplateImpl` constructor would increment and the destructor would decrement. Then `createNewBlock` and `waitNext` calls could check this and throw an overloaded exception before they do anything if the the size exceeds some cap.\n\nBut I guess a problem with this approach is it does not take into account the fact that transaction references are shared pointers and multiple blocks might not take up very much space if they have a lot of transactions in common. It would be nice if we could ignore this problem and just treat all transactions as unique, but if not, the basic approach here would still be valid. We would just need to replace `size_t` with a more complicated data structure that's aware of transaction counts (like `map<CTransaction*, long>`) and update this in the `BlockTemplateImpl` constructor and destructor.\n\n> Does libmultiprocess track which templates the client still references and is that something we can access?\n\nI believe cap'nproto has a list of objects but don't think it exposes a way to iterate over them. If we do need a list like this, for example to implement your \"automatically drop the oldest template\" idea, we could get one by giving `MinerImpl` a `std::set<BlockTemplateImp*> m_templates` member and adding/removing templates from the set in the `BlockTemplateImpl` constructor/destructor.\n\nI'm not sure if we actually need this list though, and actually want to automatically drop older blocks. If we can get away with simply not creating new blocks when a limit has been reached instead of trying to automatically delete existing blocks, that would seem simpler for both the client and the server.\n\n\n",
          "created_at": "2025-11-19T17:43:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1890,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3554023671,
          "user": "Sjors",
          "body": "> It would be nice if we could ignore this problem and just treat all transactions as unique\n\nIt might be simplest thing to implement and we can improve it later. But for some rough numbers: 4MB per template, one per second for two hours, would be counted as 28GB, even if the actual footprint is a fraction of that. \n\nMaintaining a `map<CTransactionRef, long>)` the way you suggest makes sense. It's also very easy to calculate the memory footprint of that, and seems more efficient than looping over templates (and tracking which transactions are unique). ",
          "created_at": "2025-11-19T18:08:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 558,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3558962920,
          "user": "TheBlueMatt",
          "body": "There was a long back-and-forth in the IRC meeting today on this topic, seemingly there's some very differing thoughts on high-level design for the block template IPC. IMO it makes sense to schedule a live call to discuss this so that we end up on the same page rather than going in circles in text-based communication.",
          "created_at": "2025-11-20T16:27:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 319,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3559484781,
          "user": "ryanofsky",
          "body": "My takeaway from IRC meeting ([log](https://achow101.com/ircmeetings/2025/bitcoin-core-dev.2025-11-20_16_02.log.html)) is that Matt broadly wants core to be more opinionated and make more decisions on behalf of clients, while Sjors is trying to provide a more unopinionated interface. I think there is actually not much tension between these two things because we could implement everything Matt wants without changing the interface. The IRC discussion just looked to me like a debate about which options should exist in the [`BlockWaitOptions`](https://github.com/bitcoin/bitcoin/blob/6b2d17b13220ea69c33b8cab41fe059ff758874c/src/node/types.h#L69-L88) struct vs `bitcoin.conf`, and how aggressive the `createNewBlock` and `waitNext` methods should be about returning `OVERLOADED` to clients.\n\nI think we all want the default `BlockWaitOptions` to be responsive and provide updates quickly without overloading the node, and we should focus on achieving this before spending much time debating which knobs should exist and where they should live.",
          "created_at": "2025-11-20T18:33:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1045,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3563559444,
          "user": "Sjors",
          "body": "> We would just need to replace `size_t` with a more complicated data structure that's aware of transaction counts (like `map<CTransaction*, long>`) and update this in the `BlockTemplateImpl` constructor and destructor.\n\nI implemented this part in #33922.",
          "created_at": "2025-11-21T15:40:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3568788623,
          "user": "plebhash",
          "body": "we are getting reports of out-of-memory crashes on https://github.com/stratum-mining/sv2-apps/pull/59#issuecomment-3568252007\n\ninitially I suspected there could be thread-related issues similar to what I reported on https://github.com/bitcoin/bitcoin/issues/33923, but it turns out it was the VPS running out of it's 2GB available RAM, which only happened after long (12h+) running sessions\n\nso I leveraged [`psrecord`](https://github.com/astrofrog/psrecord) to observe how Bitcoin Core (a14e7b9dee9145920f93eab0254ce92942bd1e5e from `30.x` branch) was consuming RAM across time (connected to `mainnet` for high mempool activity, for about ~1h to have enough chain tip updates)\n\nthis is RAM consumption of Bitcoin Core with the Rust code from https://github.com/stratum-mining/sv2-apps/pull/59 (more specifically SRI Pool at https://github.com/stratum-mining/sv2-apps/pull/59/commits/57576e083e82fb5acd5dbad75e8b4de7158a3d61) connected to it:\n\n<img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/452a8246-9fdb-490c-b1d1-57a51ebb7c92\" />\n\nthere's a clear upwards trend in RAM consumption, which made me wonder if we were doing something wrong on the Rust code\n\nso then I ran it alongside [`sv2-tp`](https://github.com/stratum-mining/sv2-tp) for a comparison:\n\n<img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/edf8fbf0-c05e-43ad-8883-ba76fb43138b\" />\n\nwhich shows a similar upwards trend that never gets throttled down\n\n---\n\nI don't know whether the root cause for this is related to template memory management, but there's a chance it is, so I'm reporting it here rather than opening a new issue",
          "created_at": "2025-11-24T03:19:42Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 1673,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3569959628,
          "user": "Sjors",
          "body": "I'm planning to make similar plots for #33922 (without CPU and ideally with marks to indicate where blocks were found).\n\nIf you're measuring the process memory instead of only the template memory (which #33922 enables), you'll want to hold the mempool itself constant. E.g. by picking some value for `-maxmempool` and waiting for it to fill before starting the measurement. You also want to set `-dbcache` to its minimum, because that's also accuring ",
          "created_at": "2025-11-24T10:20:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 451,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3570523079,
          "user": "Sjors",
          "body": "@plebhash it looks like you found a real bug. Because `BlockTemplate::createNewBlock` doesn't have a context param, it looks like its destroy method is not invoked until sv2-tp disconnects. So the node keeps holding on to templates even though the Template Provider already pruned them.\n\nI'll open a PR to fix that. \n\n---\n\nUpdate: this was due to an unrelated bug in sv2-tp, see  https://github.com/bitcoin/bitcoin/issues/33940 and https://github.com/stratum-mining/sv2-tp/pull/66.",
          "created_at": "2025-11-24T12:20:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 481,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3570541428,
          "user": "plebhash",
          "body": "that's good to know!\n\nbut do we have to explicitly call `destroy` or is it sufficient to drop the reference from memory on the client side?\n\nfrom my understanding of capnp, I believe it should be sufficient to drop it from memory, but on the other hand there must be a reason for `destroy` to exist?",
          "created_at": "2025-11-24T12:25:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 299,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3570785658,
          "user": "Sjors",
          "body": "@plebhash IIUC libmultiprocess does this automatically, but only `sv2-tp` uses that library. So it probably depends on how the rust capnp library is implemented. It might be worth testing how that library behaves out of the box, with and without the fix here. Just look for the `IPC server destroy` messages on the Bitcoin Core side (preferably tested against master).",
          "created_at": "2025-11-24T13:25:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 368,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3570988224,
          "user": "ryanofsky",
          "body": "I created a new issue to track the memory leak in #33940 so this discussion can stay focused higher level issues, but thanks for finding & reporting that",
          "created_at": "2025-11-24T14:13:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 153,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3615719206,
          "user": "plebhash",
          "body": "during some IRL discussions with @ismaelsadeeq and @Shourya742 we brainstormed some potential alternative approach to this\n\ninstead of trying to establish boundaries on how much memory would be consumed with templates, we could simply start from the assumption that any economically rational implementation always aims to be hashing on whatever is the latest (and therefore most profitable) template\n\nwhile the most conservative approach would try to keep as many templates as possible in memory (because there could always be a solution for any of them), this feels a bit unrealistic, because there's no point in hashing an old and outdated template while there's more profitable ones already available\n\nof course, we would need to keep some safety boundaries (perhaps as a time window, or a reasonably sized template buffer/queue) so in case some solution is found exactly at the same time as the latest template is being updated across the mining stack, such block can still be propagated",
          "created_at": "2025-12-05T08:03:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 991,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3372,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3659088225,
      "number": 33940,
      "title": "Memory leak when using IPC mining interface",
      "body": " _Originally posted by @plebhash in [#33899](https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3568788623)_\n\n> we are getting reports of out-of-memory crashes on https://github.com/stratum-mining/sv2-apps/pull/59#issuecomment-3568252007\n> \n> initially I suspected there could be thread-related issues similar to what I reported on https://github.com/bitcoin/bitcoin/issues/33923, but it turns out it was the VPS running out of it's 2GB available RAM, which only happened after long (12h+) running sessions\n> \n> so I leveraged [`psrecord`](https://github.com/astrofrog/psrecord) to observe how Bitcoin Core (a14e7b9dee9145920f93eab0254ce92942bd1e5e from `30.x` branch) was consuming RAM across time (connected to `mainnet` for high mempool activity, for about ~1h to have enough chain tip updates)\n> \n> this is RAM consumption of Bitcoin Core with the Rust code from https://github.com/stratum-mining/sv2-apps/pull/59 (more specifically SRI Pool at https://github.com/stratum-mining/sv2-apps/pull/59/commits/57576e083e82fb5acd5dbad75e8b4de7158a3d61) connected to it:\n> \n> <img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/452a8246-9fdb-490c-b1d1-57a51ebb7c92\" />\n> \n> there's a clear upwards trend in RAM consumption, which made me wonder if we were doing something wrong on the Rust code\n> \n> so then I ran it alongside [`sv2-tp`](https://github.com/stratum-mining/sv2-tp) for a comparison:\n> \n> <img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/edf8fbf0-c05e-43ad-8883-ba76fb43138b\" />\n> \n> which shows a similar upwards trend that never gets throttled down\n> \n> ---\n> \n> I don't know whether the root cause for this is related to template memory management, but there's a chance it is, so I'm reporting it here rather than opening a new issue \n\n _Originally posted by @Sjors in [#33899](https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3569959628)_\n\n> I'm planning to make similar plots for #33922 (without CPU and ideally with marks to indicate where blocks were found).\n> \n> If you're measuring the process memory instead of only the template memory (which #33922 enables), you'll want to hold the mempool itself constant. E.g. by picking some value for `-maxmempool` and waiting for it to fill before starting the measurement. You also want to set `-dbcache` to its minimum, because that's also accuring  \n\n _Originally posted by @Sjors in [#33899](https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570523079)_\n\n> @plebhash it looks like you found a real bug. Because `BlockTemplate::createNewBlock` doesn't have a context param, it looks like its destroy method is not invoked until sv2-tp disconnects. So the node keeps holding on to templates even though the Template Provider already pruned them.\n> \n> I'll open a PR to fix that.  \n\n _Originally posted by @plebhash in [#33899](https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570541428)_\n\n> that's good to know!\n> \n> but do we have to explicitly call `destroy` or is it sufficient to drop the reference from memory on the client side?\n> \n> from my understanding of capnp, I believe it should be sufficient to drop it from memory, but on the other hand there must be a reason for `destroy` to exist? \n\n _Originally posted by @Sjors in [#33899](https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570785658)_\n\n> @plebhash IIUC libmultiprocess does this automatically, but only `sv2-tp` uses that library. So it probably depends on how the rust capnp library is implemented. It might be worth testing how that library behaves out of the box, with and without the fix here. Just look for the `IPC server destroy` messages on the Bitcoin Core side (preferably tested against master). \n\n\n\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-11-24T14:11:12Z",
      "updated_at": "2026-01-14T15:15:34Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/33940",
      "labels": [
        "Bug",
        "Resource usage",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3571010573,
          "user": "Sjors",
          "body": "Turns out I was chasing a ghost. The reason `destroy` wasn't called by sv2-tp was not because of a missing `context` param, but because of an unrelated regression.\n\nSo the memory leak @plebhash is seeing is probably due to not calling destroy.",
          "created_at": "2025-11-24T14:17:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 243,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3571013068,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570523079\n\n> it looks like you found a real bug. Because `BlockTemplate::createNewBlock` doesn't have a context param, it looks like its destroy method is not invoked until sv2-tp disconnects.\n\nI can imagine there's a bug causing the block template not to be freed until the disconnect happens, but I don't think `createNewBlock` method having a context parameter would affect this. Having a context parameter just allows the method to run on an asynchronous thread without blocking the event loop, instead of running on the event loop thread. But which thread the block was created on should not affect how it's destroyed",
          "created_at": "2025-11-24T14:18:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 688,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3571047403,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570541428\n\n> but do we have to explicitly call `destroy` or is it sufficient to drop the reference from memory on the client side?\n> \n> from my understanding of capnp, I believe it should be sufficient to drop it from memory, but on the other hand there must be a reason for `destroy` to exist?\n\nYour understanding is right, I think, but there are a lot of details here and I can imagine there being some bug where just dropping the reference on the client side does not delete the server side object right away. The reason for having an explicit destroy method is to give clients a way to destroy the server side-object and actually wait for it to be destroyed. If clients just drop their references to server side objects, the server side objects will get destroyed, but it will happen asynchronously.",
          "created_at": "2025-11-24T14:24:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 869,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3571209737,
          "user": "plebhash",
          "body": "I ran two sessions with https://github.com/bitcoin/bitcoin/pull/33936 at a3a6861e131120eabf6e2f7ecd15e5ea805c66b2, where the client was our Sv2 Rust code\n\nboth of them had at least one chain tip update, which should trigger templates being flushed from memory (so I'd expect to see a sharp decline in RAM consumption)\n\nin the first one, we're not calling `destroy`:\n\n<img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3e3cb655-8069-4107-8532-bed5455189dd\" />\n\nin the second one, we're calling `destroy` after chain tip updates:\n\n<img width=\"640\" height=\"480\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0c3d84a7-b8ca-4001-8c70-95a16c895f07\" />\n\nI guess this indicates that @Sjors approach on https://github.com/bitcoin/bitcoin/pull/33936 isn't fully fixing the issue yet, which I guess is already known due to this comment https://github.com/bitcoin/bitcoin/pull/33936#issuecomment-3570998560",
          "created_at": "2025-11-24T14:57:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 947,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3571213239,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570541428\n\n> do we have to explicitly call `destroy` or is it sufficient to drop the reference from memory on the client side?\n\nFollowing up on this, it's good practice to call `destroy` methods on objects which have them, to guarantee the objects are destroyed right away instead of asynchronously. This is most important if objects have nontrivial destructors, or if it matters what order objects get destroyed.\n\nBlock templates using a lot of memory in a memory-constrained environment could be another reason to call `destroy` explicitly. But if adding `destroy` calls to the client fixes a memory leak, this does sound like a bug, because memory should be freed soon after references are dropped even without explicit `destroy` calls.\n\nre: https://github.com/bitcoin/bitcoin/issues/33899#issuecomment-3570523079\n\n> its destroy method is not invoked until sv2-tp disconnects\n> \n> The reason `destroy` wasn't called by sv2-tp was not because of a missing `context` param, but because of an unrelated regression.\n\nI was looking into this to remind myself what current behavior is. It actually changed sort of recently, but before the 30.0 release in https://github.com/bitcoin-core/libmultiprocess/commit/949573da84112388f68d1893f55aae0ca7f12d0c from https://github.com/bitcoin-core/libmultiprocess/pull/160. The commit mention there mentions \"this change causes the ProxyServer::m_impl object to be freed shortly after the client is freed, instead of being delayed until the connection is closed.\"\n\nBefore that change, libmultiprocess would only delete server objects if the client explicitly called a `destroy` method, or when the connection was cleaned up. But currently it should delete them immediately even if a `destroy` method is never called. The previous behavior didn't matter very much for libmultiprocoess c++ clients call which `destroy()` internally in their own destructors, but could matter for rust and python clients which don't do that.",
          "created_at": "2025-11-24T14:58:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2024,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3576336813,
          "user": "lucasbalieiro",
          "body": "here are some insights from the experiments I’ve been running over the past few days.\n\nWhen I first reported this issue (https://github.com/stratum-mining/sv2-apps/pull/59#issuecomment-3568252007), my server was also running a few utility tools that I typically use during long test sessions.\n\nTo eliminate the “maybe it’s something else eating the memory” hypothesis, I started a fresh session with **only** the following running:\n\n* `sv2-apps`\n* Bitcoin Core v30 (mainnet)\n* The essential system processes\n  *(no extra utilities, no accessories)*\n\n**Server specs (VPS):**\n\n* 2 vCPUs\n* 2 GB RAM\n* Ubuntu 24.04 LTS\n\n  ```bash\n  Distributor ID: Ubuntu\n  Description:    Ubuntu 24.04 LTS\n  Release:        24.04\n  Codename:       noble\n  ```\n\n---\n\n## Baseline Start\n\nAt startup, with the full SV2 stack running (two apps using IPC), the total memory usage hovered between **800 MB and 1 GB**, with some expected minor spikes.\n\nAfter letting it run overnight, the total VPS RAM usage sat around **1.5 GB**.\n\nDuring that same period:\n\n* Bitcoin Core increased by roughly **160 MB**\n* But the *rest* of the increase could not be explained by Bitcoin Core alone\n* This made me suspect the `sv2-apps` were also growing over time\n* A few hours later, @plebhash confirmed with `psrecord` that the apps were indeed growing as well\n\n<img width=\"2336\" height=\"1420\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/63bc97da-a902-47d1-a89f-595c5d060f1d\" />\n\n---\n\n## Next 8 Hours\n\nOver the next 8 hours, total RAM usage climbed from **1.5 GB → 1.6 GB**.\n\nSince I had a bit of headroom left, I decided to stress things slightly.\n\n---\n\n## Adding More Load\n\nAlongside the already-running apps, I launched **three more pool instances** (also using IPC).\n\nWithin ~3 hours:\n\n* Bitcoin Core’s RAM usage increased (expected because of more IPC traffic, I think)\n* Total RAM climbed to **1.75 GB**\n\nI then shut down the extra pool instances.\n\nHowever:\n\n* **Bitcoin Core did *not* release the memory**\n* Even by the next morning, RAM usage was still between **1.69–1.75 GB**\n* So it seems Bitcoin Core doesn’t reduce its memory footprint after clients disconnect\n\n<img width=\"2268\" height=\"1420\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f1ec3bb7-04b2-4235-b714-3baa0bac41a3\" />\nThe screenshot is half an hour after I closed the extra pool instances.\n\n---\n\n## Final Incident (Today)\n\nSince the VPS was close to running out of RAM again, I repeated the test:\nI spun up one more pool instance using IPC. RAM usage jumped to **~1.82 GB**.\n\nI closed the pool instance and waited to see if memory would drop. It didn’t.\n\nA few hours later, the OS killed Bitcoin Core:\n\n```bash\nTue Nov 25 14:51:01 2025] Out of memory: Killed process 2763434 (bitcoin-node) total-vm:13471820kB, anon-rss:1302224kB, file-rss:2916kB, shmem-rss:0kB, UID:0 pgtables:19496kB oom_score_adj:0\n```\n\nSo at the moment, Bitcoin Core ends up consuming about **1 .3GB** of RAM and never seems to shrink back down.\n\n## Why I’m Reporting This\n\nI’m sharing these observations because they might help narrow down the behavior we’re seeing, both in Bitcoin Core and the SV2 apps.\n\nI’m also willing to run another clean testing session.\nIf you have recommendations for specific instrumentation or profiling tools to run, I can set them up.\nRight now, I avoided using things like `psrecord` during the run so I could rule out secondary tools affecting the memory footprint.",
          "created_at": "2025-11-25T15:50:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3435,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3576959068,
          "user": "Sjors",
          "body": "@lucasbalieiro does Bitcoin Core behave better if you compile the `30.x` branch from source? That's the equivalent of how v30.1 will behave when it comes out. ",
          "created_at": "2025-11-25T18:17:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 159,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3577712972,
          "user": "lucasbalieiro",
          "body": "> [@lucasbalieiro](https://github.com/lucasbalieiro) does Bitcoin Core behave better if you compile the `30.x` branch from source? That's the equivalent of how v30.1 will behave when it comes out.\n\nBuilt Bitcoin Core at commit **a14e7b9dee9145920f93eab0254ce92942bd1e5e**:\n\n```bash\nroot@srv-f20833:~/Projects/bitcoin/build/bin# git log\ncommit a14e7b9dee9145920f93eab0254ce92942bd1e5e (HEAD -> 30.x, origin/30.x)\nMerge: d0f6d9953a ae63cc4bf2\nAuthor: merge-script <fanquake@gmail.com>\nDate:   Thu \n```\nRan the same stress test again (spawning multiple IPC-heavy apps).\n\n**Observed differences:**\n\n* Core feels noticeably more tolerant. Baseline RAM usage is ~100 MB lower. I could spin up more apps simultaneously without Core hitting big spikes, looks like it’s using less memory per connected app.\n* However, after disconnecting the extra pool I used for stress testing, the RAM **doesn’t drop back down** to the original baseline (the level seen when only the SV2 apps + Core were running). It stays elevated, as if it’s still serving several pool apps.\n\nEven when disconnecting all the apps. It does not return to its ~700MB of consumption\n\n<img width=\"1980\" height=\"1362\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4b111e0a-2c2b-4446-b3c4-5dabffa64841\" />\n\n",
          "created_at": "2025-11-25T21:46:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1277,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3578402033,
          "user": "ryanofsky",
          "body": "Thanks the the updates! If I'm understanding correctly, it seems like memory usage increasing 160MB overnight and 100MB over next 8 hours, and this would be pretty consistent with block templates not being freed. I think there are two key unknowns here:\n\n- We don't know whether the client is holding onto the block template references. If it is, then the memory usage going up would be expected and this is client bug, otherwise it is a server bug.\n- We don't know if server is failing to release block templates when the client disconnects. The fact that RSS number does not decrease when the client disconnects suggests that server is failing to release memory, but it's not a reliable indicator, because it only show much memory has been allocated by the OS to the process, but not how much memory is actually in use by the process. When the C library frees memory, it's normal for it to hold onto the pages that were in use and not return them to the OS. It's possible to see how much memory is actually in use using a tool like [heaptrack](https://launchpad.net/ubuntu/+source/heaptrack)\n\nProbably a good next step would be to add log statements to `BlockTemplateImpl` constructor and destructor and write a python test program creating a template, and seeing if the destructor is actually called on sudden disconnect, or when calling the `destroy` method, or when just deleting the reference with `del template; await asyncio.sleep(0)`. This could indicate if there's an obvious problem with the IPC server. It does seem like there is a real leak here, but it's not clear if it this is caused by a bug on the client side or server side.",
          "created_at": "2025-11-26T01:41:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1643,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3580478570,
          "user": "Sjors",
          "body": "The node log messages should contain a `destroy` entry every time the client releases a template. It's probably also a good idea to have the client emit a log message when it discards a template. If the client waits until disconnect you'll see a flood of destroy methods at that point.\n\nIf the latter isn't happening, that could suggest a bug where Bitcoin Core doesn't release the memory after the client disconnects. As suggested by @ryanofsky adding logging to `BlockTemplateImpl` and `~BlockTemplateImpl` should reveal this.",
          "created_at": "2025-11-26T09:44:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 528,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3582775203,
          "user": "plebhash",
          "body": "we merged https://github.com/stratum-mining/sv2-apps/pull/59 so deploying SRI Pool and/or JDC for testing can be done from `main` branch\n\n> The node log messages should contain a destroy entry every time the client releases a template. It's probably also a good idea to have the client emit a log message when it discards a template.\n\nI just did some tests with:\n- Bitcoin Core v30 binary downloaded from official website\n- `mainnet` (for frequent template updates)\n- SRI Pool from commit https://github.com/stratum-mining/sv2-apps/commit/ecf5f258766ac9e08bd8aaaa53b45b1c1bf961d8 (and also `RUST_LOG=debug` for extra verbosity)\n\non Pool logs, after block [`0000000000000000000077e34472247575f4858357541269d56a8df5b429862b`](https://mempool.space/block/0000000000000000000077e34472247575f4858357541269d56a8df5b429862b), we destroyed 84 stale templates:\n```\n2025-11-26T17:25:37.848442Z DEBUG bitcoin_core_sv2: Creating a dedicated thread IPC client for destroy_ipc_client\n2025-11-26T17:25:37.848446Z DEBUG bitcoin_core_sv2: Creating new thread IPC client\n...\n2025-11-26T17:25:37.848727Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 53\n2025-11-26T17:25:37.848961Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 40\n2025-11-26T17:25:37.849116Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 2\n2025-11-26T17:25:37.849244Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 28\n2025-11-26T17:25:37.849361Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 30\n2025-11-26T17:25:37.849469Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 38\n2025-11-26T17:25:37.849572Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 83\n2025-11-26T17:25:37.849681Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 56\n2025-11-26T17:25:37.849784Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 74\n2025-11-26T17:25:37.849892Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 78\n2025-11-26T17:25:37.849985Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 11\n2025-11-26T17:25:37.850105Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 62\n2025-11-26T17:25:37.850412Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 33\n2025-11-26T17:25:37.850624Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 4\n2025-11-26T17:25:37.850733Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 9\n2025-11-26T17:25:37.850827Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 60\n2025-11-26T17:25:37.851049Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 41\n2025-11-26T17:25:37.851254Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 58\n2025-11-26T17:25:37.851392Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 19\n2025-11-26T17:25:37.851487Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 20\n2025-11-26T17:25:37.851582Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 66\n2025-11-26T17:25:37.851836Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 7\n2025-11-26T17:25:37.851976Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 65\n2025-11-26T17:25:37.852159Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 34\n2025-11-26T17:25:37.852310Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 61\n2025-11-26T17:25:37.852428Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 72\n2025-11-26T17:25:37.852529Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 80\n2025-11-26T17:25:37.852681Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 1\n2025-11-26T17:25:37.852807Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 84\n2025-11-26T17:25:37.852913Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 51\n2025-11-26T17:25:37.853050Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 76\n2025-11-26T17:25:37.853141Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 24\n2025-11-26T17:25:37.853236Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 25\n2025-11-26T17:25:37.853330Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 67\n2025-11-26T17:25:37.853433Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 81\n2025-11-26T17:25:37.853538Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 52\n2025-11-26T17:25:37.853635Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 16\n2025-11-26T17:25:37.853744Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 54\n2025-11-26T17:25:37.853838Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 71\n2025-11-26T17:25:37.854109Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 43\n2025-11-26T17:25:37.854312Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 26\n2025-11-26T17:25:37.854399Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 59\n2025-11-26T17:25:37.854538Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 63\n2025-11-26T17:25:37.854842Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 5\n2025-11-26T17:25:37.854982Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 47\n2025-11-26T17:25:37.855140Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 31\n2025-11-26T17:25:37.855235Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 48\n2025-11-26T17:25:37.855347Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 50\n2025-11-26T17:25:37.855592Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 32\n2025-11-26T17:25:37.855800Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 3\n2025-11-26T17:25:37.855927Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 12\n2025-11-26T17:25:37.856130Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 18\n2025-11-26T17:25:37.856264Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 79\n2025-11-26T17:25:37.856481Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 14\n2025-11-26T17:25:37.856598Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 73\n2025-11-26T17:25:37.856811Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 15\n2025-11-26T17:25:37.856966Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 8\n2025-11-26T17:25:37.857177Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 23\n2025-11-26T17:25:37.857442Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 45\n2025-11-26T17:25:37.857652Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 17\n2025-11-26T17:25:37.857810Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 22\n2025-11-26T17:25:37.858028Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 69\n2025-11-26T17:25:37.858241Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 36\n2025-11-26T17:25:37.858478Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 37\n2025-11-26T17:25:37.858753Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 6\n2025-11-26T17:25:37.858937Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 10\n2025-11-26T17:25:37.859114Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 68\n2025-11-26T17:25:37.859342Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 35\n2025-11-26T17:25:37.859488Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 44\n2025-11-26T17:25:37.859668Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 57\n2025-11-26T17:25:37.859808Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 29\n2025-11-26T17:25:37.860018Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 55\n2025-11-26T17:25:37.860223Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 75\n2025-11-26T17:25:37.860526Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 82\n2025-11-26T17:25:37.860771Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 21\n2025-11-26T17:25:37.860934Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 77\n2025-11-26T17:25:37.861091Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 27\n2025-11-26T17:25:37.861339Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 46\n2025-11-26T17:25:37.861568Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 39\n2025-11-26T17:25:37.862058Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 13\n2025-11-26T17:25:37.862436Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 42\n2025-11-26T17:25:37.862732Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 64\n2025-11-26T17:25:37.862947Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 70\n2025-11-26T17:25:37.863187Z DEBUG bitcoin_core_sv2::template_data: Destroying template IPC client: 49\n\n```\n\nall of this come from the execution of [`TemplateData::destroy_ipc_client`](https://github.com/stratum-mining/sv2-apps/blob/ecf5f258766ac9e08bd8aaaa53b45b1c1bf961d8/bitcoin-core-sv2/src/template_data.rs#L51), where we allocate one dedicated server thread, and then destroy each template sequentially\n\nand on Bitcoin Core logs, we also see 84 stale templates being destroyed:\n```\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #356 {bitcoin-node-50907/30921742 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #357 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #357 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #357 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #358 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #358 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #358 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #359 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #359 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #359 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #360 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #360 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #360 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #361 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #361 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #361 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #362 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #362 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #362 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #363 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #363 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #363 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #364 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #364 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #364 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #365 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #365 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #365 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #366 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #366 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #366 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #367 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #367 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #367 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #368 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #368 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #368 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #369 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #369 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #369 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #370 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #370 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #370 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #371 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #371 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #371 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #372 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #372 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #372 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #373 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #373 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #373 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #374 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #374 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #374 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #375 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #375 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #375 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #376 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #376 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #376 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #377 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #377 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #377 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #378 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #378 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #378 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #379 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #379 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #379 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #380 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #380 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #380 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #381 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #381 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #381 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #382 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #382 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #382 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #383 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #383 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #383 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #384 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #384 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #384 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #385 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #385 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #385 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #386 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #386 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #386 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #387 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #387 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #387 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #388 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #388 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #388 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #389 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #389 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #389 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #390 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #390 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #390 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #391 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #391 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #391 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #392 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #392 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #392 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #393 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #393 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #393 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #394 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #394 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #394 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #395 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #395 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #395 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #396 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #396 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #396 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #397 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #397 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #397 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #398 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #398 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #398 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #399 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #399 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #399 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #400 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #400 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #400 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #401 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #401 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #401 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #402 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #402 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #402 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #403 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #403 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #403 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #404 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #404 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #404 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #405 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #405 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #405 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #406 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #406 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #406 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #407 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #407 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #407 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #408 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #408 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #408 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #409 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #409 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #409 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #410 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #410 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #410 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #411 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #411 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #411 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #412 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #412 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #412 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #413 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #413 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #413 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #414 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #414 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #414 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #415 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #415 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #415 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #416 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #416 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #416 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #417 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #417 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #417 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #418 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #418 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #418 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #419 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #419 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #419 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #420 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #420 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #420 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #421 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #421 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #421 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #422 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #422 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #422 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #423 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #423 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #423 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #424 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #424 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #424 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #425 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #425 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #425 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #426 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #426 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #426 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #427 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #427 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #427 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #428 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #428 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #428 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #429 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #429 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #429 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #430 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #430 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #430 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #431 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #431 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #431 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #432 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #432 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #432 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #433 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #433 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #433 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #434 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #434 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #434 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #435 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #435 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #435 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #436 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #436 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #436 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #437 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #437 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #437 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #438 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #438 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #438 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #439 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #439 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #439 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server recv request  #440 BlockTemplate.destroy$Params (context = (thread = <external capability>))\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server post request  #440 {bitcoin-node-50907/30931699 (from )}\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server send response #440 BlockTemplate.destroy$Results ()\n2025-11-26T17:25:37Z [ipc] {bitcoin-node-50907/b-capnp-loop-30920310} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n```",
          "created_at": "2025-11-26T18:52:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 59786,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3604081211,
          "user": "ryanofsky",
          "body": "Following up on https://github.com/bitcoin/bitcoin/issues/33940#issuecomment-3578402033, I added log statements to the `BlockTemplateImpl` constructor and destructor and wrote a python test creating a block template object and calling the destroy method or not (`DESTROY` variable), and deleting the python template variable or not (`DEL` variable). As soon as either of these things were done, I could see the `~BlockTemplateImpl` destructor being called. I could also see the destructor being called just disconnecting regardless of whether these things were done. I tested with current bitcoin master and with the v30.0 tag and saw the same behavior in both.\n\nThis test would seem to indicate that the leak is happening on the rust client side, and that when the bug happens, the client is probably not dropping references to all old templates or calling `destroy` on them, since doing either of these things should be sufficient to free memory on the server. It is possible there is a more subtle bug on the server side, and not a problem on the client, but so far I haven't seen behavior that looks like a problem. The test program looks like:\n\n<details><summary>test-destroy.py</summary>\n<p>\n\n```diff\n#!/usr/bin/env python3\n\nimport asyncio\nfrom pathlib import Path\nimport shutil\nimport capnp\n\nSRC_DIR = \"/home/ryanofsky/work/bitcoin/src\"\nSOCK_PATH = \"/home/ryanofsky/.bitcoin/regtest/node.sock\"\nDESTROY = 1\nDEL = 1\n\nclass IPCInterfaceTest:\n    def main(self):\n        if capnp_bin := shutil.which(\"capnp\"):\n            capnp_dir = Path(capnp_bin).resolve().parent.parent / \"include\"\n        else:\n            capnp_dir = Path(capnp.__path__[0]).parent\n        src_dir = Path(SRC_DIR)\n        mp_dir = src_dir / \"ipc\" / \"libmultiprocess\" / \"include\"\n        imports = [str(mp_dir), str(capnp_dir), str(src_dir)]\n        self.capnp_modules = {\n            \"proxy\": capnp.load(str(mp_dir / \"mp\" / \"proxy.capnp\"), imports=imports),\n            \"init\": capnp.load(str(src_dir / \"ipc\" / \"capnp\" / \"init.capnp\"), imports=imports),\n            \"echo\": capnp.load(str(src_dir / \"ipc\" / \"capnp\" / \"echo.capnp\"), imports=imports),\n            \"mining\": capnp.load(str(src_dir / \"ipc\" / \"capnp\" / \"mining.capnp\"), imports=imports),\n        }\n        print(\"Running mining test\")\n\n        async def async_routine():\n            ctx, init = await self.make_capnp_init_ctx()\n            mining = init.makeMining(ctx)\n            opts = self.capnp_modules['mining'].BlockCreateOptions()\n            opts.useMempool = True\n            opts.blockReservedWeight = 4000\n            opts.coinbaseOutputMaxAdditionalSigops = 0\n            template = await mining.result.createNewBlock(opts)\n            print(\"Created template\")\n            if DESTROY:\n                template.result.destroy(ctx)\n                print(\"Destroyed template\")\n            if DEL:\n                del template\n                await asyncio.sleep(0)\n                print(\"Deleted template\")\n            await asyncio.sleep(1000)\n\n        asyncio.run(capnp.run(async_routine()))\n\n    async def make_capnp_init_ctx(self):\n        connection = await capnp.AsyncIoStream.create_unix_connection(SOCK_PATH)\n        client = capnp.TwoPartyClient(connection)\n        init = client.bootstrap().cast_as(self.capnp_modules['init'].Init)\n        threadmap = init.construct().threadMap\n        thread = threadmap.makeThread(\"pythread\").result\n        ctx = self.capnp_modules['proxy'].Context()\n        ctx.thread = thread\n        return ctx, init\n\nif __name__ == '__main__':\n    IPCInterfaceTest().main()\n```\n</p>\n</details>",
          "created_at": "2025-12-02T21:40:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3577,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3604126370,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33940#issuecomment-3582775203\n\n> after block [`0000000000000000000077e34472247575f4858357541269d56a8df5b429862b`](https://mempool.space/block/0000000000000000000077e34472247575f4858357541269d56a8df5b429862b), we destroyed 84 stale templates:\n> [...]\n> all of this come from the execution of [`TemplateData::destroy_ipc_client`](https://github.com/stratum-mining/sv2-apps/blob/ecf5f258766ac9e08bd8aaaa53b45b1c1bf961d8/bitcoin-core-sv2/src/template_data.rs#L51), where we allocate one dedicated server thread, and then destroy each template sequentially\n\n@plebhash, I'm trying to figure out what these logs mean. One thing I'm not sure about is why exactly the rust client is keeping 84 block template references. Is this because of lack of `interruptWait` method and inability to delete templates before `waitNext()` returns? Or are the references being kept because the blocks might need to be submitted? Or maybe some other reason?\n\nI guess from looking at the rust code, it is currently designed to hold onto all templates and then free them when the tip changes. If so, this seems reasonable and should hopefully not use too much memory since the blocks should contain many of the same transactions. I guess the logs also indicate that rust code is able to trigger blocktemplate deletions on the server side, so this also seems good. If I'm understanding correctly, your logs here seem to show the rust client behaving well and deleting the templates it doesn't need.",
          "created_at": "2025-12-02T21:54:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1516,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3606595757,
          "user": "plebhash",
          "body": "> One thing I'm not sure about is why exactly the rust client is keeping 84 block template references.\n\nWe are conservatively keeping all templates in memory up until a chain tip update, because we could potentially receive a solution to any of them.\n\nThis might change with https://github.com/bitcoin/bitcoin/issues/33899, but the limit will remain something to be configured on Bitcoin Core, and whenever `waitNext` returns `Overloaded` error, we discard the oldest template.\n\n> Is this because of lack of `interruptWait` method and inability to delete templates before `waitNext()` returns?\n\nno, so far I haven't noticed any meaningful limitations around deleting templates being imposed by the lack of `interruptWait`\n\n> I guess from looking at the rust code, it is currently designed to hold onto all templates and then free them when the tip changes.\n\ncorrect.\n\n> If so, this seems reasonable and should hopefully not use too much memory since the blocks should contain many of the same transactions.\n\nwe don't keep transaction data on the client side... whenever it's needed, we fetch it via `getBlock` ad-hoc.\n\n> If I'm understanding correctly, your logs here seem to show the rust client behaving well and deleting the templates it doesn't need.\n\nyes, that's also my understanding... the puzzling thing is that we're still having the memory leaks... so we're either missing some detail on this analysis, or the cause is related to something other than templates",
          "created_at": "2025-12-03T12:18:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1470,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3607454869,
          "user": "ryanofsky",
          "body": "> yes, that's also my understanding... the puzzling thing is that we're still having the memory leaks... so we're either missing some detail on this analysis, or the cause is related to something other than templates\n\nI think at this point we've ruled out the obvious possible causes of leaks, and need to start debugging the issue more directly. \n\nIt would help to have some steps to reproduce. If someone can let me know what code to check out and build, and what commands to run that will show the increasing memory usage over time, that would be great. As long as we can observe it happening we should be able to figure out the cause.",
          "created_at": "2025-12-03T15:37:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 638,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3611006053,
          "user": "plebhash",
          "body": "> If someone can let me know what code to check out and build, and what commands to run that will show the increasing memory usage over time, that would be great.\n\n- launch Bitcoin Core on `mainnet` (for high mempool activity)\n- `git clone https://github.com/stratum-mining/sv2-apps -b v0.1.0`\n- edit `sv2-apps/pool-apps/pool/config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml` to make sure `unix_socket_path` is set correctly\n- `cd sv2-apps/pool-apps/pool; cargo run -- -c config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml`\n\nat this point, you can start monitoring RAM\n\nI used [`psrecord`](https://github.com/astrofrog/psrecord): `psrecord $(pgrep bitcoin-node | head -1) --plot plot.png`\n\nbut it also consumes a lot of RAM itself (so the OS might kill it if your system doesn't have enough and you run it for too long), so maybe there's more sophisticated ways to do this kind of instrumentation",
          "created_at": "2025-12-04T09:09:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 928,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3628241016,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33940#issuecomment-3611006053\n\n>* `git clone https://github.com/stratum-mining/sv2-apps -b v0.1.0`\n\nThanks for the instructions. I've been experimenting with the v0.1.0 pool_sv2 app on regtest with a python script to generate transactions & connect blocks quickly to make a memory leak happen without needing to wait a long time.\n\nSo far, behavior has been mostly as expected, where generating lots of transactions without connecting new blocks causes block templates to accumulate and memory usage to go up, but when a new block is connected, the templates get released by the mining client.\n\nOne thing I saw that was surprising was that if the python client connected blocks too quickly, the mining client seemed to fall behind and only release templates after a delay. Like the mining client would be calling `destroy` method on the template from block height 5000 when block height 5015 was being connected. But pausing the python script would cause the mining client to catch up.\n\nI guess I need to try letting the code run a longer time to see if memory usage will accumulate. But I think a slow & gradual leak could be pretty difficult to debug and fix. So if there's anything that can be done to trigger a leak quickly, it will make this debugging this issue a lot easier.\n\n<details><summary>test/functional/test-generate.py</summary>\n<p>\n\n```python\n#!/usr/bin/env python3\n\nfrom test_framework.authproxy import AuthServiceProxy\nfrom test_framework.address import create_deterministic_address_bcrt1_p2tr_op_true\nfrom test_framework.messages import (\n    CTxOut,\n)\nfrom test_framework.script import (\n    CScript,\n    OP_RETURN,\n)\nfrom test_framework.util import (\n    get_auth_cookie,\n)\nfrom test_framework.wallet import MiniWallet\nfrom random import randbytes\n\nSRC_DIR = \"/home/ryanofsky/work/bitcoin/src\"\nDATADIR = \"/home/ryanofsky/.bitcoin\"\nSOCK_PATH = \"/home/ryanofsky/.bitcoin/regtest/node.sock\"\n\nINIT_BLOCKS = 200\nBLOCKS_TO_MINE = 300\nTXS_PER_BLOCK = 100\nTX_BYTES = 50000\n\ndef main():\n    rpc_u, rpc_p = get_auth_cookie(DATADIR, \"regtest\")\n    host = '127.0.0.1'\n    port = 18443\n    url = \"http://%s:%s@%s:%d\" % (rpc_u, rpc_p, host, int(port))\n    node = AuthServiceProxy(url)\n\n    print(f\"Generating {INIT_BLOCKS} blocks without transactions\")\n    node.generatetoaddress(1, create_deterministic_address_bcrt1_p2tr_op_true()[0])\n\n    print(\"Creating wallet\")\n    wallet = MiniWallet(node)\n\n    print(f\"Generating {BLOCKS_TO_MINE} blocks with transactions\")\n    for i in range(BLOCKS_TO_MINE):\n        bheight = node.getblockcount()\n        bhash = node.getblockhash(bheight)\n        print(f\"block{i} height={bheight} hash={bhash}\")\n        for j in range(TXS_PER_BLOCK):\n            tx = wallet.create_self_transfer(fee_rate=0)[\"tx\"]\n            tx_data = [randbytes(TX_BYTES)]\n            tx.vout.append(CTxOut(nValue=0, scriptPubKey=CScript([OP_RETURN] + tx_data)))\n            tx.vout[0].nValue -= tx.get_vsize()  # simply pay 1sat/vbyte fee\n            txid = wallet.sendrawtransaction(from_node=node, tx_hex=tx.serialize().hex())\n            assert txid == tx.txid_hex\n            print(f\"  {bheight=} {bhash=} {tx.txid_hex=}\")\n            assert tx.txid_hex in node.getrawmempool(True)\n        node.generatetoaddress(1, create_deterministic_address_bcrt1_p2tr_op_true()[0])\n\nif __name__ == '__main__':\n    main()\n```\n</p>\n</details>\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/src/node/interfaces.cpp\n+++ b/src/node/interfaces.cpp\n@@ -858,11 +858,24 @@ class BlockTemplateImpl : public BlockTemplate\n public:\n     explicit BlockTemplateImpl(BlockAssembler::Options assemble_options,\n                                std::unique_ptr<CBlockTemplate> block_template,\n+                               std::atomic<int>& count,\n                                NodeContext& node) : m_assemble_options(std::move(assemble_options)),\n                                                     m_block_template(std::move(block_template)),\n+                                                    m_count(count),\n                                                     m_node(node)\n     {\n         assert(m_block_template);\n+        int c = ++m_count;\n+        uint256 hash{m_block_template->block.hashPrevBlock};\n+        CBlockIndex* block{WITH_LOCK(cs_main, return chainman().m_blockman.LookupBlockIndex(hash))};\n+        LogError(\"==== CONSTRUCT BlockTemplateImpl() ptr=%p count=%i height=%i\", this, c, block ? block->nHeight : -1);\n+    }\n+    ~BlockTemplateImpl() override\n+    {\n+        int c = --m_count;\n+        uint256 hash{m_block_template->block.hashPrevBlock};\n+        CBlockIndex* block{WITH_LOCK(cs_main, return chainman().m_blockman.LookupBlockIndex(hash))};\n+        LogError(\"==== DESTROY BlockTemplateImpl() ptr=%p count=%i height=%i\", this, c, block ? block->nHeight : -1);\n     }\n \n     CBlockHeader getBlockHeader() override\n@@ -914,7 +927,7 @@ public:\n     std::unique_ptr<BlockTemplate> waitNext(BlockWaitOptions options) override\n     {\n         auto new_template = WaitAndCreateNewBlock(chainman(), notifications(), m_node.mempool.get(), m_block_template, options, m_assemble_options, m_interrupt_wait);\n-        if (new_template) return std::make_unique<BlockTemplateImpl>(m_assemble_options, std::move(new_template), m_node);\n+        if (new_template) return std::make_unique<BlockTemplateImpl>(m_assemble_options, std::move(new_template), m_count, m_node);\n         return nullptr;\n     }\n \n@@ -930,6 +943,7 @@ public:\n     bool m_interrupt_wait{false};\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\n+    std::atomic<int>& m_count;\n     NodeContext& m_node;\n };\n \n@@ -965,7 +979,7 @@ public:\n \n         BlockAssembler::Options assemble_options{options};\n         ApplyArgsManOptions(*Assert(m_node.args), assemble_options);\n-        return std::make_unique<BlockTemplateImpl>(assemble_options, BlockAssembler{chainman().ActiveChainstate(), context()->mempool.get(), assemble_options}.CreateNewBlock(), m_node);\n+        return std::make_unique<BlockTemplateImpl>(assemble_options, BlockAssembler{chainman().ActiveChainstate(), context()->mempool.get(), assemble_options}.CreateNewBlock(), m_template_count, m_node);\n     }\n \n     bool checkBlock(const CBlock& block, const node::BlockCheckOptions& options, std::string& reason, std::string& debug) override\n@@ -981,6 +995,7 @@ public:\n     ChainstateManager& chainman() { return *Assert(m_node.chainman); }\n     KernelNotifications& notifications() { return *Assert(m_node.notifications); }\n     NodeContext& m_node;\n+    std::atomic<int> m_template_count{0};\n };\n } // namespace\n } // namespace node\n```\n</p>\n</details>",
          "created_at": "2025-12-08T17:43:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 6761,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3628281213,
          "user": "Sjors",
          "body": "> if the python client connected blocks too quickly, the mining client seemed to fall behind and only release templates after a delay\n\nThere's a hardcoded 10(?) second grace period where the Template Provider (both implementations) hold on to templates after a new tip is connected. It's there for two reasons:\n\n1. Trying to relay the block anyway (requires further node changes, since we currently honour the first-seen rule even when that means \"our\" block loses)\n2. Giving pools a chance to verify the template (via JDS) and award shares (especially in [schemes that reward both hash power and total fees](https://delvingbitcoin.org/t/pplns-with-job-declaration/1099)) \n ",
          "created_at": "2025-12-08T17:50:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 674,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3825,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3723882082,
      "number": 34062,
      "title": "RFC: separate kernel logging infrastructure",
      "body": "tl;dr: kernel logging is cumbersome. I propose we layer logging so we can enable structured logging and a much simplified kernel logging interface without overcomplicating node logging.\n\n## Motivation\n\nThe `bitcoinkernel` library (#27587) [exposes](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L698-L778) functionality to interface with the kernel logging. This includes registering callbacks for log statements, level/category filtering, string formatting options, and more.\n\nKernel logging has a few problems:\n- **P1**: [callbacks](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L304) operate on formatted strings, so users need to parse the string to get the timestamp, category, level, ... based on which options are set. This is cumbersome, brittle, and inefficient.\n- **P2**: the [filtering interface](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L737) is not really intuitive, requiring users to call combinations of `btck_logging_set_level_category` and `btck_logging_enable_category` when they want to produce `debug` or `trace` logs. The level/category system makes sense for node, because it directly controls what gets written to disk and stdout, and there are quite a lot more categories producing logs. Kernel doesn't really need this - users control what happens to the logs, and can do any filtering/manipulation in the callback they provide.\n- **P3**: the node logging infrastructure has quite a bit more functionality than is necessary for a library, including ratelimiting, log formatting, outputting, buffering, ... This introduces unnecessary code and interface complexity.\n- **P4**: it [uses](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.cpp#L237) the global (node) logger, which goes against the otherwise context local (or stateless) design of the `bitcoinkernel` interface.\n\n## Approach\n\nI propose we address problems P1, P2 and P3 by layering the logging infrastructure. Roughly, this would mean:\n1. Implement a minimal `util::log::Logger` class (see [Appendix](#Appendix)) that dispatches structured log entries to registered callbacks. This is a low-level logger that does not perform formatting, rate limiting, or category filtering - it simply dispatches to callbacks.\n2. Refactor `BCLog::Logger` into `BCLog::Sink`, which registers a callback on `util::log::GetLogger()` and handles all node-specific functionality (category filtering, rate limiting, file output, formatting, ...).\n3. Update kernel code to include `util/log.h` instead of `logging.h`. The existing logging macros (`LogInfo`, `LogDebug`, etc.) continue to work unchanged.\n4. Simplify `bitcoinkernel` C API to reflect the simpler `util::log::Logger` interface (structured logging, level-based, ...), we can now completely remove `btck_LoggingOptions`.\n5. Remove `logging.h` and `logging.cpp` from the kernel library completely.\n\n**Note:** I'm leaving problem P4 out of scope for this proposal. I think it already has sufficient merit with a global logger, and I want to keep scope limited. However, I do believe layered logging infrastructure will make implementing P4 easier.\n\n## Balance\n\nThe main benefits and downsides of this approach:\n\n**Benefits:**\n- **B1:** a kernel-native structured logging interface that minimizes complexity and makes for a much more ergonomic interface, enabling structured logging instead of string parsing.\n- **B2:** doesn't complicate node logging purely for the purpose of accommodating diverging requirements for kernel. For example, I suspect projects like #30342 should be much easier with layered kernel logging.\n- **B3:** reduces friction if/when node migrates to use the public `bitcoinkernel` interface by having already completely decoupled logging.\n- ... (what have I missed?)\n\n**Downsides:**\n- **D1:** levels-based filtering has some performance overhead by formatting all (kernel) debug log strings instead of just the subset of categories specified. Note that this _only_ applies when debug is enabled, and that kernel has a lot less logging than node.\n- ... (what have I missed?)\n\n## Scope\n\nI have implemented this approach in https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/kernel-logging-layering. Most of the changes are quite straightforward, including refactoring `BCLog::Logger` to `BCLog::Sink`, adding tests, and adding a `util::log::Logger` interface.\n\n## Appendix\n\n### Interfaces\n#### util::log::Logger\n\n```cpp\nclass Logger\n{\npublic:\n    using Callback = std::function<void(const Entry&)>;\n    using CallbackHandle = std::list<Callback>::iterator;\n\n    //! Register a callback to receive log entries. Returns a handle for unregistration.\n    [[nodiscard]] CallbackHandle RegisterCallback(Callback callback);\n\n    //! Unregister a previously registered callback.\n    void UnregisterCallback(CallbackHandle handle);\n\n    //! Set the minimum log level. Messages below this level are discarded.\n    void SetMinLevel(Level level);\n\n    //! Get the current minimum log level.\n    Level GetMinLevel() const;\n\n    //! Returns true if a message at the given level would be logged.\n    bool WillLog(Level level) const;\n\n    //! Returns true if any callbacks are registered.\n    bool Enabled() const;\n\n    //! Format message and dispatch to all registered callbacks. No-op if minimum log level not met.\n    template <typename... Args>\n    void Log(Level level, uint64_t category, std::source_location loc, bool should_ratelimit,\n             util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args);\n};\n```\n\n#### `bitcoinkernel` C logging interface\n\n```c\ntypedef void (*btck_LogCallback)(void* user_data, const btck_LogEntry* entry);\n\nstruct btck_LogEntry {\n    const char* message;       //!< Log message\n    size_t message_len;        //!< Log message length\n    const char* file_name;     //!< Source file name\n    size_t file_name_len;      //!< Source file name length\n    const char* function_name; //!< Source function name\n    size_t function_name_len;  //!< Source function name length\n    const char* thread_name;   //!< Thread name\n    size_t thread_name_len;    //!< Thread name length\n    int64_t timestamp_ns;      //!< Timestamp in nanoseconds since epoch\n    uint32_t line;             //!< Source line number\n    btck_LogLevel level;       //!< Log level\n    btck_LogCategory category; //!< Log category\n};\n\nBITCOINKERNEL_API void btck_logging_set_min_level(btck_LogLevel level);\n\nBITCOINKERNEL_API btck_LoggingConnection* BITCOINKERNEL_WARN_UNUSED_RESULT btck_logging_connection_create(\n    btck_LogCallback log_callback,\n    void* user_data,\n    btck_DestroyCallback user_data_destroy_callback) BITCOINKERNEL_ARG_NONNULL(1);\n\nBITCOINKERNEL_API void btck_logging_connection_destroy(btck_LoggingConnection* logging_connection);\n```\n",
      "state": "open",
      "user": "stickies-v",
      "created_at": "2025-12-12T15:43:10Z",
      "updated_at": "2026-01-14T15:14:47Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/34062",
      "labels": [
        "Brainstorming",
        "Utils/log/libs"
      ],
      "comment_data": [
        {
          "id": 3647259207,
          "user": "ryanofsky",
          "body": "Nice work. The new interface proposed here and implemented in your branch seem much better than the current interface, and well thought out. I feel like we could pretty easily wire it into the existing Logger class without introducing a new class and new macros though, and without needing to change validation & util code.\n\nI wonder if there may be difficulties doing that I'm not aware of, or if it just seemed easier to start with a clean state in the current branch.\n\nI do think it would preferable to have one Logger class and one set of macros instead of two. I also think using kernel logging functions in util code (only `src/util/fs_helpers.cpp` right now but it seems like usage might expand) would probably not be desirable, since the dependency is supposed  to to the other way with kernel depending on util, not util depending on kernel. Also, the wallet and GUI are supposed to use util but should not depend on the kernel. This could be another reason to want to try improving the `Logger` class instead of replacing it.",
          "created_at": "2025-12-12T16:24:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1035,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3655453308,
          "user": "stickies-v",
          "body": "Thanks for looking into this, @ryanofsky! Upgrading vs separating is indeed the important decision to make here. I initially started wiring it into the existing `Logger` class, but changed my approach when I realized that when `kernel` becomes its own project, they will each need to have their own code anyway. Complicating `node` logging to accommodate kernel's different requirements, to then take it away again, feels like unnecessary friction and code complexity (e.g. plumbing a level-based system on top of a cateogory-level-based system). On the other hand, prematurely optimizing for a future split that may never happen is a risk. _(note: I don't think we're prematurely optimizing, because the kernel logger is so light-weight)_\n\nA different approach that I'm happy to explore, and I think could make more sense than wiring low-level `kernel` into higher-level `node` logging, is to ~move the `kernel::Logger` to `util::Logger`, and have _all_ logging (instead of just `kernel`) go through these structured callbacks. This way, the low-level logging interface is in `util`, and all the opinionated node stuff (i/o, ratelimiting, log formatting, ...) would live in `common`. This would mean node logging fundamentally also becomes level-based (i.e. debug string formatting is all-or-nothing), but I think that's a pretty small price to pay?\n\n> and new macros though, and without needing to change validation\n\nIn the mvp branch, I chose new `KernelLog...` macros just to keep things straightforward, and I'd be open to using macro/compile flag magic to minimize the diff there. However, I think the reality is that logging signatures in kernel code will have to change (for every single callsite) to make it context-aware, so I don't think a new macro name is all that important?\n\n>  I also think using kernel logging functions in util code...\n\nI agree with most of your observations in this paragraph, and kernel macros should not be leaking into util, wallet, GUI. I think the proper solution here is to remove logging from util though. In my view, low-level (i.e. util) code should not be logging at all. I've implemented one way of doing that in https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/util-no-logging. It seems the scope of that change is rather limited, but there are many approaches possible, so that would warrant its own discussion.\n",
          "created_at": "2025-12-15T12:47:12Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 2390,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3660108518,
          "user": "sedited",
          "body": "Thanks for taking charge of this! The C interface you laid out looks really nice too and should be easier to wire against whatever is required.\n\n> hey will each need to have their own code anyway\n\nOne point that might be nice to mention here too is that we are also defining a bunch of categories that the kernel should not have to know about.\n\nReading through your comment, I actually like what you are laying out as an alternative. Maybe a refinement of that idea could be to split the logger into a low-level and high-level implementation. Both can be implemented as global instances for now. The low-level class could take care of formatting, level detection, and providing a unified macro for all users. It can then feed into a higher level class through a callback. For a global logger, this would mean we'd retain a global low level logger, and introduce a global higher-level instance. We only initialize the global callback into the higher level logger when it is actually required by the respective binary, similar to what we do currently with the translations. For the kernel library itself, we can then surface this callback to the user through the API with the interface you are suggesting here.\n\n> This would mean node logging fundamentally also becomes level-based (i.e. debug string formatting is all-or-nothing), but I think that's a pretty small price to pay?\n\nI'm not really following why we can't have a set of categories defined to filter against pre formatting. Are you suggesting this, because we'd ideally want to split off non-kernel categories?",
          "created_at": "2025-12-16T11:40:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1570,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3660272514,
          "user": "stickies-v",
          "body": "> The low-level class could take care of formatting, level detection, and providing a unified macro for all users. It can then feed into a higher level class through a callback.\n\nThat sounds like the new design I'm currently working on. So far, it seems like it'll be a much bigger code diff than the [seperation branch](https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/kernel-logging-separation) (because a _lot_ of `logging.{h,cpp}` code will need to move around, but there should be 1) less duplication and 2) more contained logging logic, so I think overall this might work out nicely.\n\n> I'm not really following why we can't have a set of categories defined to filter against pre formatting. Are you suggesting this, because we'd ideally want to split off non-kernel categories?\n\nCategory filtering to me feels like a high-level (i/o) logging output concern rather than a low-level logging concern. We _could_ make the low-level interface filter based on categories, but that I think would needlessly clutter the interface for users that don't need it (incl kernel), so I'd much rather keep it purely levels-based. So for e.g. `node`, that would mean that if only a single debug category is enabled, all debug logs would be formatted*, but only the one enabled category printed. Unless measurements indicate it really is too much overhead, I think that's not going to be a big deal when you're in debug mode already?\n\n*note: there are 2 formatting steps: 1 the `LogInfo(fmt, args...)` formatting, and then 2) the formatting where we produce a single string containing timestamp, level, msg, ... I'm generally talking about the first step. The second is of course only done when needed.",
          "created_at": "2025-12-16T12:25:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1721,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3667169341,
          "user": "stickies-v",
          "body": "I have implemented a new approach (\"Layering\") in https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/kernel-logging-layering. The Layering approach turned out much less invasive than my initial attempts showed, and now has my preference.\n\nIn a nutshell:\n- we distinguish between a (low-level) logger that produces log statements (`util::log::Logger`) and (higher-level) log sinks (`BCLog::Sink`, `btck_LoggingConnection`) that consume the logs by registering a callback on the logger.\n- the `bitcoinkernel.h` API is ~identical between both versions, as are the `util::log::Logger` and `kernel::Logger` interfaces\n- the total diff is quite small, ~500 lines diff excluding tests, including complete removal of `logging.{h,cpp}` from kernel\n\nConceptually, it's quite similar to the earlier Separation approach, but just organizes the code differently, reducing code churn and duplication.\n\n@ryanofsky I think this addresses your [concerns](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3647259207) about duplicated macros, about util code depending on kernel code, and about minimizing changes to validation and util code. It still introduces a new class, I don't immediately see an elegant way around that that also allows `kernel` to not depend on node logging code. Does that seem like a reasonable enough trade-off to you to warrant opening a PR and discuss the details?\n\nI'll open a PR if/when people are happy about the concept and initial approach, that's probably a better place to discuss code in more depth.\n",
          "created_at": "2025-12-17T21:08:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1559,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3667358790,
          "user": "sedited",
          "body": "> I'll open a PR if/when people are happy about the concept and initial approach, that's probably a better place to discuss code in more depth.\n\nThis newest approach looks good to me. I think some people might still have reservations about unconditionally logging all categories. I tend to agree with your opinion on this though. Once debug logging is activated, expectations on string serialization overhead should be the same, no matter the category selected.",
          "created_at": "2025-12-17T21:54:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 461,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3677360573,
          "user": "ajtowns",
          "body": "> I have implemented this approach in [master...stickies-v:bitcoin:2025-12/kernel-logging-separation](https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/kernel-logging-separation)\n\nGross. Changing all the validation logs prefix the macro with `Kernel` and changing `BCLog::` to `kernel::Category` is not an improvement.\n\n> * **D2:** levels-based filtering has some performance overhead by formatting all (kernel) debug log strings instead of just the subset of categories specified.\n\nThat pretty much destroys the use case of Trace logging which is intended for high-rate logging that's probably not performant enough for regular usage. Which is fine today, because we only do trace logging in the wallet. But being able to do it for mempool analysis/debugging would also be useful.\n\nLikewise for:\n\n> Category filtering to me feels like a high-level (i/o) logging output concern rather than a low-level logging concern.\n\nThat's not the case.\n\nAs far as the problem statements go:\n\n> * **P1**: [callbacks](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L304) operate on formatted strings,\n\nOutside of the kernel, the callbacks are only used in tests, so changing how the callbacks work seems trivial, not justification for a major rework.\n\n>     * **P2**: the [filtering interface](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L737) is not really intuitive, requiring users to call combinations of `btck_logging_set_level_category` and `btck_logging_enable_category` when they want to produce `debug` or `trace` logs.\n\nThat interface isn't a good design even for the node software. #34038 removes it from being exposed to users (via the `-loglevel` config option), so that a [followup](https://github.com/ajtowns/bitcoin/tree/202512-log-atomic) can simplify it further.\n\nAt that point, having `btck_logging_trace(VALIDATION)` or `btck_logging_setlevel(VALIDATION, TRACE)` to enable trace logging for validation at a cost of slower validation, seems fine to me.\n\n> I propose we address problems P1, P2 and P3 by completely separating the kernel logging infrastructure from the node logging infrastructure. Roughly, this would mean:\n> \n>     1. Implement a minimal `kernel::Logger` interface\n\nThis seems exactly backwards to me; I would instead have approached it as \"let's rip out the node specific stuff from logging into node/loghandler, and have it register itself in a similar way to how kernel users will register their log handling code\".",
          "created_at": "2025-12-20T04:20:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2594,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3678397253,
          "user": "ajtowns",
          "body": "> Outside of the kernel, the callbacks are only used in tests, so changing how the callbacks work seems trivial, not justification for a major rework.\n\nFor example, https://github.com/ajtowns/bitcoin/commit/57e6ba1739dff27b78819fbb9594ec88daff609f",
          "created_at": "2025-12-21T03:08:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 247,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3709975961,
          "user": "stickies-v",
          "body": "I have updated the [Issue description](https://github.com/bitcoin/bitcoin/issues/34062#issue-3723882082) to reflect the [new layering approach](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3667169341) that minimizes churn and code duplication, wiring all logging into a low-level `util::log::Logger` addressing review feedback ([1](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3647259207), [2](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3660108518)) \n\n---\n\n@ajtowns thank you for the review, and apologies for the slow response - I was off for a little while. I wish I'd updated the Issue description earlier, because I think a lot of your concerns were already addressed in the new approach. Apologies for not doing that earlier.\n\n> For example, https://github.com/ajtowns/bitcoin/commit/57e6ba1739dff27b78819fbb9594ec88daff609f\n\nStructured callbacks can be done with a much smaller diff indeed, but I think it doesn't address two concerns:\n1) a lot of the `node` logging logic is irrelevant for `kernel` (e.g. non-kernel categories, ratelimiting, string formatting, ...), so keeping `node` logging logic separate would be good\n2) it limits how much we can simplify the `bitcoinkernel` logging interface, forcing the user to do category configuration\n\n> This seems exactly backwards to me; I would instead have approached it as \"let's rip out the node specific stuff from logging into node/loghandler, and have it register itself in a similar way to how kernel users will register their log handling code\".\n\nAgreed, see [an earlier update](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3667169341) (which is now the documented approach in this Issue).\n\n> That pretty much destroys the use case of Trace logging which is intended for high-rate logging that's probably not performant enough for regular usage. Which is fine today, because we only do trace logging in the wallet. But being able to do it for mempool analysis/debugging would also be useful.\n\nMy understanding of your concern is: \"with level-only filtering at the low (`util::log::Logger`) level, enabling `Trace` means paying formatting overhead for all trace logs regardless of category, making high-frequency trace logging impractical.\" Is my understanding correct? I think we'll have to add a LOT more `Trace` logging before that actually becomes a concern. I'm not sure we ever will, but if/when we ever need it, I think that can still be easily addressed later by adding a category filter predicate to `util::log::Logger`? Optimizing for that now seems premature to me? _(Just in case there's any confusion, my suggested approach still uses levels-based filtering to avoid unnecessary log string formatting.)_",
          "created_at": "2026-01-05T11:07:15Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 2743,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 7027,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3741350602,
      "number": 34096,
      "title": "IBD stalls if addnode peer is in IBD",
      "body": "Starting with two fresh nodes `A` and `B`: If you start node `A` and (before node `A` completes IBD) start a second node `B` with `-addnode={address of node A}`, node `B` will stall and not proceed in IBD.\n\n```bash\nmkdir -p /tmp/nodea /tmp/nodeb\n\ncat > /tmp/nodea/bitcoin.conf << EOF\nprune=1000\nbind=127.0.0.1:8333\nEOF\n\ncat > /tmp/nodeb/bitcoin.conf << EOF\nprune=1000\nrpcport=18331\nbind=127.0.0.1:18335\naddnode=127.0.0.1:8333\nEOF\n```\n\nand then start both nodes however you prefer, e.g.\n\n```\nbitcoind -datadir=/tmp/nodea --daemonwait\nbitcoind -datadir=/tmp/nodeb --daemonwait\n```\n\nAnd node `B` will not advance:\n\n```\ntail /tmp/nodeb/debug.log\n```\n\nShutdown node `A` and node `B` comes to life!:\n\n```bash\nbitcoin-cli -datadir=/tmp/nodea stop\ntail /tmp/nodeb/debug.log\n```",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-12-18T03:59:41Z",
      "updated_at": "2026-01-14T15:12:35Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34096",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 806,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2882058716,
      "number": 31957,
      "title": "callgrind_annotate broken after cmake migration?",
      "body": "Steps to reproduce on a fresh install of Ubuntu LTS 24.04:\n\n* Install packages and clone repo: `( export DEBIAN_FRONTEND=noninteractive && apt update && apt install git ccache make build-essential libtool cmake autotools-dev automake pkg-config bsdmainutils python3     libevent-dev libboost-dev  libsqlite3-dev valgrind  -y && git clone https://github.com/bitcoin/bitcoin.git b-c ) && cd b-c`\n* `git checkout 338bc2cd261ba3daf7fb494f8cb4a534762e292c  # cmake migration (allows to test autotools and cmake on the same commit)`\n* Apply a diff to create more function calls in one hotspot (optional):\n\n```diff\ndiff --git a/src/test/util_tests.cpp b/src/test/util_tests.cpp\nindex c2c725d676..704c060749 100644\n--- a/src/test/util_tests.cpp\n+++ b/src/test/util_tests.cpp\n@@ -273,13 +273,15 @@ BOOST_AUTO_TEST_CASE(util_ReplaceAll)\n         ReplaceAll(test, search, substitute);\n         BOOST_CHECK_EQUAL(test, expected);\n     };\n-\n+    int i{10000};\n+while (i-->0){\n     test_replaceall(\"\", \"foo\", original);\n     test_replaceall(original, \"foo\", \"foo\");\n     test_replaceall(\"%s\", \"foo\", \"A test \\\"foo\\\" string 'foo'.\");\n     test_replaceall(\"\\\"\", \"foo\", \"A test foo%sfoo string '%s'.\");\n     test_replaceall(\"'\", \"foo\", \"A test \\\"%s\\\" string foo%sfoo.\");\n }\n+}\n \n BOOST_AUTO_TEST_CASE(util_TrimString)\n {\n```\n\n* Then create two out-of-tree builds, run a test in callgrind, and annotate it:\n* `./autogen.sh && rm -rf ./bld-a && mkdir bld-a && ( cd bld-a && ../configure && make -j$(nproc) )`\n* `rm -rf ./bld-c && cmake -B ./bld-c && cmake --build ./bld-c -j $(nproc)`\n* `valgrind --tool=callgrind --callgrind-out-file=cg-a-%p.out ./bld-a/src/test/test_bitcoin -t util_tests/util_ReplaceAll`\n* `valgrind --tool=callgrind --callgrind-out-file=cg-c-%p.out ./bld-c/src/test/test_bitcoin -t util_tests/util_ReplaceAll`\n* `callgrind_annotate ./cg-a-40328.out`\n* `callgrind_annotate ./cg-c-39984.out`\n\nThe cmake version of the last call will print a warning:\n\n```\n--------------------------------------------------------------------------------\nThe following files chosen for auto-annotation could not be found:\n--------------------------------------------------------------------------------\n  ./bld-c/src/crypto/./src/compat/byteswap.h\n  ./bld-c/src/crypto/./src/crypto/sha256.cpp\n  ./bld-c/src/crypto/./src/crypto/sha512.cpp\n  ./bld-c/src/test/./src/test/crypto_tests.cpp\n  ./bld-c/src/test/./src/test/util_tests.cpp\n  ./bld-c/src/util/./src/random.cpp\n  ./bld-c/src/util/./src/util/string.cpp\n...\n```\n\nIt also seems not possible to fix with `--include=dir`, as the path look a bit odd (non-existing)",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-02-26T15:48:13Z",
      "updated_at": "2026-01-14T14:58:18Z",
      "closed_at": null,
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/31957",
      "labels": [
        "Build system",
        "Tests"
      ],
      "comment_data": [
        {
          "id": 2754463597,
          "user": "hebasto",
          "body": "Are there any requirements for debug info when using the `valgrind --tool=callgrind` + `callgrind_annotate` toolset? Are there any incompatible or unsupported compiler flags?",
          "created_at": "2025-03-26T13:47:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 174,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2754481118,
          "user": "hebasto",
          "body": "I've tested the master branch @ c0b7159de47592c95c6db061de682b4af4058102 with the diff from https://github.com/bitcoin/bitcoin/issues/31957#issue-2882058716 on Ubuntu 24.04:\n```\n$ callgrind_annotate ./cg-c-72381.out\n<snip>\n...\n--------------------------------------------------------------------------------\nThe following files chosen for auto-annotation could not be found:\n--------------------------------------------------------------------------------\n  ./elf/../sysdeps/generic/dl-new-hash.h\n  ./elf/../sysdeps/x86_64/dl-machine.h\n  ./elf/./elf/dl-lookup.c\n  ./elf/./elf/dl-reloc.c\n  ./elf/./elf/do-rel.h\n  ./malloc/./malloc/arena.c\n  ./malloc/./malloc/malloc.c\n  ./string/../sysdeps/x86_64/multiarch/../multiarch/strcmp-sse2.S\n  ./string/../sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S\n  ./string/../sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S\n  ./string/../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S\n  ./string/../sysdeps/x86_64/multiarch/strchr-avx2.S\n\n--------------------------------------------------------------------------------\nIr                   \n--------------------------------------------------------------------------------\n787,159,045 (83.13%)  events annotated\n\n```\n\nUPD. When configured `-DWITH_CCACHE=OFF`:\n```\n--------------------------------------------------------------------------------\nThe following files chosen for auto-annotation could not be found:\n--------------------------------------------------------------------------------\n  ./elf/../sysdeps/generic/dl-new-hash.h\n  ./elf/../sysdeps/x86_64/dl-machine.h\n  ./elf/./elf/dl-lookup.c\n  ./elf/./elf/dl-reloc.c\n  ./elf/./elf/do-rel.h\n  ./malloc/./malloc/arena.c\n  ./malloc/./malloc/malloc.c\n  ./string/../sysdeps/x86_64/multiarch/../multiarch/strcmp-sse2.S\n  ./string/../sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S\n  ./string/../sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S\n  ./string/../sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S\n  ./string/../sysdeps/x86_64/multiarch/strchr-avx2.S\n  build/./compat/byteswap.h\n  build/./crypto/sha256.cpp\n  build/./crypto/sha512.cpp\n  build/./random.cpp\n  build/./test/crypto_tests.cpp\n  build/./test/util_tests.cpp\n  build/./util/string.cpp\n\n--------------------------------------------------------------------------------\n```",
          "created_at": "2025-03-26T13:52:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2287,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2754833699,
          "user": "maflcko",
          "body": "> I've tested the master branch @ [c0b7159](https://github.com/bitcoin/bitcoin/commit/c0b7159de47592c95c6db061de682b4af4058102) with the diff from [#31957 (comment)](https://github.com/bitcoin/bitcoin/issues/31957#issue-2882058716) on Ubuntu 24.04:\n\nI can't reproduce. What are the exact steps to reproduce from a fresh install of the operating system, like in OP?",
          "created_at": "2025-03-26T15:28:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 364,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3548048725,
          "user": "maflcko",
          "body": "Ah, looks like this is related to the prefix-map and the following workaround fixes it:\n\n```diff\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\nindex f264acc..9ed5b46 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -488,12 +488,6 @@ try_append_cxx_flags(\"-fno-extended-identifiers\" TARGET core_interface SKIP_LINK\n # which can cause issues with coverage builds, particularly when using\n # Clang in the OSS-Fuzz environment due to its use of other options\n # and a third party script, or with GCC.\n-try_append_cxx_flags(\"-fdebug-prefix-map=A=B\" TARGET core_interface SKIP_LINK\n-  IF_CHECK_PASSED \"-fdebug-prefix-map=${PROJECT_SOURCE_DIR}/src=.\"\n-)\n-try_append_cxx_flags(\"-fmacro-prefix-map=A=B\" TARGET core_interface SKIP_LINK\n-  IF_CHECK_PASSED \"-fmacro-prefix-map=${PROJECT_SOURCE_DIR}/src=.\"\n-)\n \n # GCC versions 13.2 (and earlier) are subject to a class of bugs, see\n # https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90348 and the meta bug\n",
          "created_at": "2025-11-18T15:07:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 943,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3548070707,
          "user": "maflcko",
          "body": "Maybe the prefix-map can be disabled by default or an option could be added to disable it, or it could be disabled on `-DWITH_CCACHE=NO`, as there is no need for it then?",
          "created_at": "2025-11-18T15:10:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 170,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3567810672,
          "user": "hebasto",
          "body": "> Maybe the prefix-map can be disabled by default or an option could be added to disable it, or it could be disabled on `-DWITH_CCACHE=NO`, as there is no need for it then?\n\nhttps://github.com/bitcoin/bitcoin/commit/788c1324f3d840f7a39b8bc3537dcff26ca0b552 could be considered for reverting. However, doing so would resurface https://github.com/bitcoin/bitcoin/issues/30799.",
          "created_at": "2025-11-23T10:43:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 374,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3567833333,
          "user": "hebasto",
          "body": "> > Maybe the prefix-map can be disabled by default or an option could be added to disable it, or it could be disabled on `-DWITH_CCACHE=NO`, as there is no need for it then?\n> \n> [788c132](https://github.com/bitcoin/bitcoin/commit/788c1324f3d840f7a39b8bc3537dcff26ca0b552) could be considered for reverting. However, doing so would resurface [#30799](https://github.com/bitcoin/bitcoin/issues/30799).\n\nAnd the latter could be addressed using another approach:\n```diff\n--- a/src/logging.cpp\n+++ b/src/logging.cpp\n@@ -410,7 +410,7 @@ void BCLog::Logger::FormatLogStrInPlace(std::string& str, BCLog::LogFlags catego\n     str.insert(0, GetLogPrefix(category, level));\n \n     if (m_log_sourcelocations) {\n-        str.insert(0, strprintf(\"[%s:%d] [%s] \", RemovePrefixView(source_loc.file_name(), \"./\"), source_loc.line(), source_loc.function_name()));\n+        str.insert(0, strprintf(\"[%s:%d] [%s] \", RemovePrefixView(RemovePrefixView(source_loc.file_name(), \"./\"), \"src/\"), source_loc.line(), source_loc.function_name()));\n     }\n \n     if (m_log_threadnames) {\n```",
          "created_at": "2025-11-23T11:08:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1063,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3749961716,
          "user": "maflcko",
          "body": "For reference, the current steps to test on a fresh install of Ubuntu 26.04 LTS:\n\n```\n    1  ( export DEBIAN_FRONTEND=noninteractive && apt update && apt install git ccache make build-essential libtool cmake autotools-dev automake pkg-config bsdmainutils python3     libevent-dev libboost-dev  libsqlite3-dev valgrind  -y && git clone https://github.com/bitcoin/bitcoin.git b-c ) && cd b-c \n    7  git apply /tmp/a  # apply optional patch\n    9  rm -rf ./bld-c && cmake -DENABLE_IPC=OFF -B ./bld-c && cmake --build ./bld-c -j $(nproc) \n   10  valgrind --tool=callgrind --callgrind-out-file=cg-c-%p.out ./bld-c/bin/test_bitcoin -t util_tests/util_ReplaceAll \n   11  callgrind_annotate ./cg-c-19826.out \n```\n\nThis allows testing with and without https://github.com/bitcoin/bitcoin/pull/34281 to confirm it is fixed.",
          "created_at": "2026-01-14T14:58:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 813,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2643,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3747139562,
      "number": 34114,
      "title": "log: frequent `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs as `net:warning`",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nOn my node at home (not a monitoring node), I'm seeing three `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs every five minutes logged as `net:warnings`. I think that's too frequent.\n\n```\n...\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:00:54Z Flushed fee estimates to fee_estimates.dat.\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n...\n```\n\n### Expected behaviour\n\nFewer of the pcp warnings.\n\n### Steps to reproduce\n\nRun a node behind a router that returns NOT_AUTHORIZED for PCP (?)\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv30.0 (via nixpkgs)\n\n### Operating system and version\n\nNixOS\n\n### Machine specifications\n\nMachine is behind a home internet router with PCP disabled by default.  I'm running the node with `txindex=1`, `addnode`, and otherwise default configuration.",
      "state": "open",
      "user": "0xB10C",
      "created_at": "2025-12-19T11:16:06Z",
      "updated_at": "2026-01-14T14:55:09Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34114",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_data": [
        {
          "id": 3674683954,
          "user": "0xB10C",
          "body": "My understanding is that this is a different log message from https://github.com/bitcoin/bitcoin/issues/33301 and https://github.com/bitcoinknots/bitcoin/issues/184. However, I haven't checked if  https://github.com/bitcoin/bitcoin/pull/33311 fixed it too.\n\nedit: It seems related, but is a different log message.\n\nhttps://github.com/bitcoin/bitcoin/blob/516ae5ede44a8a6abc59e90f9d89913e254524f4/src/common/pcp.cpp#L511",
          "created_at": "2025-12-19T11:20:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 419,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3675487892,
          "user": "fanquake",
          "body": "cc @laanwj @willcl-ark ",
          "created_at": "2025-12-19T15:25:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 23,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2929,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3809637019,
      "number": 34273,
      "title": "Importing musig descriptor with identical (private) keys in tapleaf and only musig subderivation different fails",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nBelow is very silly policy, that has two almost identical musig expressions in single tapleaf. Keys inside musig expressions are the same, only musig derivation is different, yielding different resulting keys.\n\n`tr($H,and_v(v:pk(musig($0,$1,$2)/<0;1>/*),pk(musig($0,$1,$2)/<2;3>/*)))`\n\nI have no issues importing descriptor from above policy with only public keys into bitcoin core. Yet when I replace with private keys I'm getting  `is not sane: contains duplicate public keys`\n\n### Expected behaviour\n\nregardless whether descriptor contains private or public keys, it should import without duplicate keys error as musig key expression should be treated as only one key and only that key should be considered for duplicate check\n\n### Steps to reproduce\n\nDescriptor with only public keys that imports no problem:\n```\ntr(tpubD6NzVbkrYhZ4WMCcYXEgDrM1AFATSGmrFyMnA2Dgx1Y551VueaE3iemHhQBxhKWjepG76Cy5QmXv8z4KwN6ARTnZ5hVuShfxL129NVGXZuE/<0;1>/*,and_v(v:pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,[bd6eb0b5/44h/1h/0h]tpubDDZuASpyXjtMrnf1rDDREY1VXt89RNS4ZHU99KSkvUYd7CcuDQMPizr1sBHEXhjDy3qU8sAK2i4vkcgAat84S2w4wMJM8BpJ9dPuQKV1Uqh,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/<0;1>/*),pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,[bd6eb0b5/44h/1h/0h]tpubDDZuASpyXjtMrnf1rDDREY1VXt89RNS4ZHU99KSkvUYd7CcuDQMPizr1sBHEXhjDy3qU8sAK2i4vkcgAat84S2w4wMJM8BpJ9dPuQKV1Uqh,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/<2;3>/*)))\n```\n\nReplace one public key with corresponding private key:\n\n```\n[{'desc': 'tr(tpubD6NzVbkrYhZ4WMCcYXEgDrM1AFATSGmrFyMnA2Dgx1Y551VueaE3iemHhQBxhKWjepG76Cy5QmXv8z4KwN6ARTnZ5hVuShfxL129NVGXZuE/0/*,and_v(v:pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tprv8ZgxMBicQKsPd3QxqYNKLfXHkRYHSayji5qWZDLuSiDAG3S7oyhbV9VRZ4RD35LTYM11aDpvTsovP9mafLAqyCsPpwmAzt6Y6GPr8wNeHNQ/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/0/*),pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tprv8ZgxMBicQKsPd3QxqYNKLfXHkRYHSayji5qWZDLuSiDAG3S7oyhbV9VRZ4RD35LTYM11aDpvTsovP9mafLAqyCsPpwmAzt6Y6GPr8wNeHNQ/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/2/*)))#vqqlj5dt', 'timestamp': 1768321595, 'active': True, 'internal': False, 'range': [0, 100]}, {'desc': 'tr(tpubD6NzVbkrYhZ4WMCcYXEgDrM1AFATSGmrFyMnA2Dgx1Y551VueaE3iemHhQBxhKWjepG76Cy5QmXv8z4KwN6ARTnZ5hVuShfxL129NVGXZuE/1/*,and_v(v:pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tprv8ZgxMBicQKsPd3QxqYNKLfXHkRYHSayji5qWZDLuSiDAG3S7oyhbV9VRZ4RD35LTYM11aDpvTsovP9mafLAqyCsPpwmAzt6Y6GPr8wNeHNQ/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/1/*),pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tprv8ZgxMBicQKsPd3QxqYNKLfXHkRYHSayji5qWZDLuSiDAG3S7oyhbV9VRZ4RD35LTYM11aDpvTsovP9mafLAqyCsPpwmAzt6Y6GPr8wNeHNQ/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/3/*)))#d20d849q', 'timestamp': 1768321595, 'active': True, 'internal': True, 'range': [0, 100]}]\n``` \n\nresults in error:\n\n```\n{'success': False, 'error': {'code': -5, 'message': 'and_v(v:pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tpubD6NzVbkrYhZ4WWSkjC2uk5BQKT4DbvAeHPSHqjPCrz1Z6XgtSNXBfe7HjCVKqpPEnSb2LNxw2KxDeWvM22UPDoYmf7rkbdW1qc8yWJUnpFe/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/0/*),pk(musig([0f056943/86h/1h/0h]tpubDCeEX49avtiXrBTv3JWTtco99Ka499jXdZHBRtm7va2gkMAui11ctZjqNAT9dLVNaEozt2C1kfTM88cnvZCXsWLJN2p4viGvsyGjtKVV7A1,tpubD6NzVbkrYhZ4WWSkjC2uk5BQKT4DbvAeHPSHqjPCrz1Z6XgtSNXBfe7HjCVKqpPEnSb2LNxw2KxDeWvM22UPDoYmf7rkbdW1qc8yWJUnpFe/44h/1h/0h,[18953581/44h/1h/0h]tpubDDJDF4KvHFML8KW4QCstjJaSes1D5uEcEZWTSA3ZpQPTuQTXobVBT7sGkJbLebJ88xrtvWS5fMVMNK1xTSNWNsWWc2tUybdz96HPMKA3LFV)/2/*)) is not sane: contains duplicate public keys'}}\n```\n\nSame error can be seen if one uses `getdescriptorinfo` rpc\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nusing code from PR https://github.com/bitcoin/bitcoin/pull/34141\n\n### Operating system and version\n\nLinux ... 6.14.0-37-generic #37~24.04.1-Ubuntu ... x86_64 x86_64 x86_64 GNU/Linux\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "scgbckbone",
      "created_at": "2026-01-13T16:32:11Z",
      "updated_at": "2026-01-14T14:54:32Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34273",
      "labels": [
        "Wallet",
        "Descriptors"
      ],
      "comment_data": [
        {
          "id": 3746726477,
          "user": "151henry151",
          "body": "If the duplicate key check is examining the individual participant keys rather than the aggregated MuSig keys, then maybe when private keys are involved the aggregation step behaves differently during validation, causing the underlying participant keys to be compared instead. \n\nAlternatively, perhaps the aggregation with private keys isn't properly applying the MuSig derivation paths, resulting in both expressions producing the same aggregate key. \n\nI'd think to look at how duplicate checking handles MuSig expressions when it can't fully resolve the aggregated key. This might be happening when `GetPubKey(0, dummy, dummy)` is called during duplicate checking with an empty `SigningProvider`, which could cause the aggregation to fail or behave differently when private keys are present.",
          "created_at": "2026-01-13T21:50:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 793,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 5507,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3812548980,
      "number": 34280,
      "title": "Coins Cache Cleanup checklist",
      "body": "The coins cache (the `CCoinsView*` stack, `CCoinsViewCache`, and friends) is a correctness and performance critical part of validation, IBD, and assumeutxo.\nOver time it has accumulated subtle invariants and legacy states (for example around cache entry flags, spent coin handling, and error catching), and we have been chipping away at it through focused refactors, bugfixes, tests, and performance work.\n\nThis issue tracks coins-cache-related work with two goals:\n\n* Make the coins cache layering and contracts easier to reason about (fewer implicit assumptions, fewer impossible states in tests).\n* Unlock and de-risk follow-up performance work (especially IBD) by tightening invariants and simplifying hot-path code.\n\nIRC context: https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2026-01-08\n\n## PRs needing review\n\n### Coins cache cleanup and validation refactors\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34165 - add `PeekCoin()` and a non-mutating view so invalid block connects cannot pollute the main cache; prerequisite for multi-threaded input fetching.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34164 - add `CCoinsViewCache::Reset()` and a reusable `m_connect_block_view` cache to reduce allocations and cheaply discard failed connects.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34125 - tiny refactor to keep the `Sync()` vs `Flush()` decision consistent (no behavior change).\n* [ ] https://github.com/bitcoin/bitcoin/pull/34124 - replace implicit no-op behavior with explicit `CCoinsViewEmpty`, tightening the coins-view interface contract.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34132 - simplify DB read error handling and remove wrapper layers on the hot `GetCoin()` path.\n* [ ] https://github.com/bitcoin/bitcoin/pull/31132 - introduce `CoinsViewCacheAsync` to prefetch input coins during `ConnectBlock` (includes reviewable subsets in #34164 and #34165).\n* [ ] https://github.com/bitcoin/bitcoin/pull/34207 - assert production invariants and align unit/fuzz tests to avoid impossible spent-coin states.\n* [ ] https://github.com/bitcoin/bitcoin/pull/33018 - remove the unreachable FRESH-but-not-DIRTY state to simplify cache entry semantics and tests.\n* [ ] https://github.com/bitcoin/bitcoin/pull/33680 - split FORCE_SYNC vs FORCE_FLUSH and keep the cache warm for `scantxoutset`, `gettxoutsetinfo`, and snapshot creation.\n* [ ] https://github.com/bitcoin/bitcoin/pull/33512 - track `dirty_count` so flush progress/warnings reflect actual disk writes after non-wiping flush changes.\n- [ ] https://github.com/bitcoin/bitcoin/pull/33854 - fix assumevalid being ignored during reindex when best header chainwork is below minimumchainwork (see https://github.com/bitcoin/bitcoin/issues/31494).\n* [ ] https://github.com/bitcoin/bitcoin/pull/32317 - move UTXO access/spending out of `ConnectBlock` into `SpendBlock` (kernel API, Utreexo, SwiftSync).\n\n### Adjacent IBD and performance work (related)\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34253 - make IBD checks a lock-free atomic read to reduce `cs_main` contention (enables scheduler-thread IBD gating like #34054).\n* [ ] https://github.com/bitcoin/bitcoin/pull/34054 - skip orphanage filter maintenance during IBD to save scheduler CPU.\n* [ ] https://github.com/bitcoin/bitcoin/pull/32497 - pre-reserve Merkle leaves to prevent reallocs with odd vtx count.\n* [ ] https://github.com/bitcoin/bitcoin/pull/32427 - concept/approach discussion for simplifying node storage backends (kernelization adjacent).\n* [ ] https://github.com/bitcoin/bitcoin/pull/33324 - resumable maintenance tool to (de)obfuscate existing block/undo files without resync.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34083 - SIMD speedups (not coins-specific, but part of broader performance work).\n* [ ] https://github.com/bitcoin/bitcoin/pull/31682 - speed up consensus-critical duplicate-input and related checks (focused change, needs careful review).\n* [ ] https://github.com/bitcoin/bitcoin/pull/31868 - specialize block serialization to reduce generic serialization overhead (draft).\n* [ ] https://github.com/bitcoin/bitcoin/pull/34004 - prototype to reduce disk interactions during IBD by aggregating outpoint adds/spends and using an external hints file.\n\n### Bench and tooling (supporting work)\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/32554 - remove hardcoded 1.1MB benchmark block and enable flexible benchmark scenarios.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34208 - simplify benchmark setup/reset patterns.\n\n## Merged PRs\n\n* https://github.com/bitcoin/bitcoin/pull/33866 - simplify cache flush plumbing by removing an always-true return value (also `Sync()` and `Flush()`).\n* https://github.com/bitcoin/bitcoin/pull/30214 - make `Chainstate` objects more self-contained and clarify assumeutxo terminology (maintainability groundwork).\n* https://github.com/bitcoin/bitcoin/pull/33657 - allow reading partial block data from storage for REST, enabling fetching specific transactions via an external index (useful for tools like bindex).\n* https://github.com/bitcoin/bitcoin/pull/32414 - reduce reindex progress loss risk with large `-dbcache`.\n* https://github.com/bitcoin/bitcoin/pull/30442 - precalculate SipHash constant salt XORs (hot-path hashing micro-optimization).\n* https://github.com/bitcoin/bitcoin/pull/33602 - reduce redundant map lookups/hashes in `BatchWrite`, improving cache flush performance.\n* https://github.com/bitcoin/bitcoin/pull/33042 - shrink wrapper code and clarify call sites (no behavior change).\n* https://github.com/bitcoin/bitcoin/pull/31645 - tune flush batching for better performance on large flushes (still configurable via `-dbbatchsize`).\n* https://github.com/bitcoin/bitcoin/pull/32313 - fix under/over-counting that triggered UBSan overflow and tighten cache accounting correctness.\n* https://github.com/bitcoin/bitcoin/pull/33333 - add a startup warning when configured `-dbcache` exceeds a RAM-based cap to reduce OOM/swapping surprises.\n* https://github.com/bitcoin/bitcoin/pull/33154 - avoid mutating shared state and fix a reported data race in tests.\n* https://github.com/bitcoin/bitcoin/pull/33021 - ensure cache size state transitions remain covered after refactors.\n* https://github.com/bitcoin/bitcoin/pull/32279 - reduce dynamic allocations and improve locality for common script sizes.\n* https://github.com/bitcoin/bitcoin/pull/32827 - avoid needless vtx iteration during IBD.\n* https://github.com/bitcoin/bitcoin/pull/31144 - speed up block/undo obfuscation by batching XOR operations.\n* https://github.com/bitcoin/bitcoin/pull/32638 - make on-disk block reads validate hashes now that header hashing is cheap (pairs with #32487).\n* https://github.com/bitcoin/bitcoin/pull/32487 - reuse header hash for PoW and optional integrity checks, saving CPU per read.\n* https://github.com/bitcoin/bitcoin/pull/30611 - increase periodic flush frequency now that non-wiping flush cost scales with dirty entries.\n* https://github.com/bitcoin/bitcoin/pull/31551 - reduce syscall overhead and enable faster obfuscation during block/undo IO.\n* https://github.com/bitcoin/bitcoin/pull/32185 - use the native `WriteBatch` size estimator for accuracy and maintainability.\n* https://github.com/bitcoin/bitcoin/pull/31490 - reduce redundant serialization work and simplify disk-write code paths.\n* https://github.com/bitcoin/bitcoin/pull/31534 - make long shutdown flushes visible to users.\n* https://github.com/bitcoin/bitcoin/pull/30906 - de-risk coins cache refactors by tightening/cleaning the cache-entry interface.\n* https://github.com/bitcoin/bitcoin/pull/30039 - reduce LevelDB writes/compactions/open files by bumping LevelDB max file size to 32 MiB.\n* https://github.com/bitcoin/bitcoin/pull/31064 - avoid unnecessary coins DB reopen and cache reallocation on startup.\n* https://github.com/bitcoin/bitcoin/pull/30849 - clarify API semantics and align tests with reachable cache states.\n* https://github.com/bitcoin/bitcoin/pull/30884 - cache file position within `AutoFile` (Windows regression fix).\n* https://github.com/bitcoin/bitcoin/pull/28358 - allow the full UTXO set to fit into memory by dropping the `-dbcache` limit.\n* https://github.com/bitcoin/bitcoin/pull/30326 - avoid double lookups by using `try_emplace()`.\n* https://github.com/bitcoin/bitcoin/pull/28280 - keep the coins cache warm across prune flushes for faster block connection.\n* https://github.com/bitcoin/bitcoin/pull/28233 - keep the coins cache warm across periodic flushes.\n* https://github.com/bitcoin/bitcoin/pull/26326 - reduce validation lock contention by moving disk reads out of `cs_main`.\n* https://github.com/bitcoin/bitcoin/pull/26415 - avoid deserializing when serving raw block data (`getblock` verbosity 0, REST bin/hex, ZMQ).\n* https://github.com/bitcoin/bitcoin/pull/25325 - use a pool-based memory resource for the in-memory cache (large IBD speedup at the time).\n\n## Related context and superseded attempts (reference)\n\n  * https://github.com/bitcoin/bitcoin/pull/32043 - [IBD] Tracking PR for speeding up Initial Block Download (draft umbrella PR).\n  * https://github.com/bitcoin/bitcoin/pull/30673 - spent-and-FRESH and non-DIRTY entry cleanup attempt (closed, superseded by follow-ups like #33018 and #34207).\n  * https://github.com/bitcoin/bitcoin/pull/32885 - cache finished-IBD state near `SetTip` (closed; follow-up is https://github.com/bitcoin/bitcoin/pull/34253).\n  * https://github.com/bitcoin/bitcoin/pull/31102 - try to evict clean entries instead of wiping the whole coins cache when full (draft/closed).\n  * https://github.com/bitcoin/bitcoin/pull/28945 - preallocate memory for recreated caches (closed).\n  * https://github.com/bitcoin/bitcoin/pull/32457 - replace benchmark block with a more representative one (draft/closed; superseded by https://github.com/bitcoin/bitcoin/pull/32554).\n  * https://github.com/bitcoin/bitcoin/pull/32128 - exploratory CCoinMap experiments (draft/closed).\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-14T10:23:16Z",
      "updated_at": "2026-01-14T14:52:23Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34280",
      "labels": [
        "Tracking Issue"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 9964,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2891729679,
      "number": 31975,
      "title": "RFC: when to drop testnet3",
      "body": "Testnet3 was deprecated in v28 with the introduction of testnet4. #31974 implements its removal.\n\nDropping it in v30 seems reasonable to me, but let's discuss this here as to not clutter the implementation PR.\n\nNote that v29 (coming soon), which includes testnet3, will be supported for a while. See https://bitcoincore.org/en/lifecycle/\n\n@instagibbs wrote:\n\n> I've said it elsewhere, but I think it deserves a quite long deprecation cycle, along with some data gathering.\n> \n> We don't want services not upgrading for fixes because their test environment would break.\n> \n> e.g., what exchanges with testnet environments have adopted testnet4 (or signet), much less would be ok with removing testnet3?\n> \n> Does btcd support it? LND? Eclaire? CLN? etc.\n> \n> Lots of work to be done here imo.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-03T16:33:23Z",
      "updated_at": "2026-01-14T14:50:48Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31975",
      "labels": [
        "Tests",
        "Needs Conceptual Review"
      ],
      "comment_data": [
        {
          "id": 2695434964,
          "user": "fjahr",
          "body": "I'm guessing we need to weigh the potential pain for those that have built infrastructure on Testnet3 for a while (wallets with lot's of UTXOs for testing elaborate multisig setups, lightning nodes etc.) with the fact that Testnet3 doesn't seem to be usable for anyone according to some commenters. It think a mailing list post is in order and if nobody complains for good reason (not \"I'm rich there\") then I would even be fine with removal in v30. We can also do a Github grep and reach out to open source projects directly that still have it implemented if the ML post doesn't seem sufficient alone.",
          "created_at": "2025-03-03T20:11:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 602,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2711798614,
          "user": "1440000bytes",
          "body": "I think testnet3 and testnet4 should be dropped together when testnet5 is available.\n\nhttps://x.com/0x_orkun/status/1899192195175076144",
          "created_at": "2025-03-10T20:53:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 135,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2713086735,
          "user": "Sjors",
          "body": "@1440000bytes I can't see the X post without an account (or maybe they're still dealing with a DoS). Can you quote it or post a screenshot?\n\nDropping testnet4 without first deprecating it, is not the usual way we do things. It also doesn't really simplify anything, compared to e.g. releasing testnet5, deprecating testnet4 and dropping testnet3 in one release, and then dropping testnet4 in the next release.",
          "created_at": "2025-03-11T08:10:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 409,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2713130600,
          "user": "1440000bytes",
          "body": "This link should work: https://xcancel.com/0x_orkun/status/1899192195175076144",
          "created_at": "2025-03-11T08:26:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 78,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2713211270,
          "user": "Sjors",
          "body": "> At this point, another Bitcoin testnet is becoming unusable for devs, with huge reorgs for months and another likely incoming. \n\n![Image](https://github.com/user-attachments/assets/c2b8f678-8eed-4524-b565-212044e59ef0)\n\nFork Obsever also shows frequent reorgs on testnet4: https://fork.observer/?network=4\n\nHowever they don't look \"huge\" to me, just frequent. It's good if you're trying to write code that robust against reorgs.\n\nTestnet5 is not going to magically fix all problems though. It seems useful to discuss ideas on the bitcoin-dev mailinglist or Delving.\n\n> Signet isn’t an option since we need to test hashrate-related proofs for BitVM, but Testnet4 is becoming more painful to use every day.\n\nYou can run a custom signet with `OP_TRUE` as the challenge and it will behave like a normal proof-of-work chain. See https://en.bitcoin.it/wiki/BIP_0325:\n\n> There is one other acceptable special case: if a block's challenge is e.g. `OP_TRUE` (`0x51`), where an empty solution would result in success, the block is also considered valid if the signet commitment is absent.\n\nSee also #29032.",
          "created_at": "2025-03-11T08:56:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1098,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2724058966,
          "user": "Sjors",
          "body": "Posted on the mailinglist: https://gnusha.org/pi/bitcoindev/9FAA7EEC-BD22-491E-B21B-732AEA15F556@sprovoost.nl/T/#u",
          "created_at": "2025-03-14T09:03:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 114,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2854397425,
          "user": "Sjors",
          "body": "So how long should we wait? \n\nMy mailinglist post didn't result in very passionate pleas for keeping it. And although some projects do still use it, they haven't demonstrated a serious intention to upgrade anytime soon.\n\nShould we perhaps wait for testnet5 to see if that fixes the issues we see on testnet4? I suppose we have enough ports...\n\nOr should I mark #31974 ready for review and just drop testnet3 in v30?",
          "created_at": "2025-05-06T12:29:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 415,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3610987875,
          "user": "jsarenik",
          "body": "Yes. As for me, it would be a clear sign if testnet3 gets dropped.\n\nBut: Testnet4 has many stale blocks currently and most of the mining there seems very different from Bitcoin mainnet, rendering it unusable for anything but experimentation with permissionless mining itself. But fair enough as for app development there is signet.\n\nI think that getting rid of testnet3 may just make any future investigation harder. It was the longest-living testnet so far. See https://github.com/fjahr/test_chain_init/issues/1 which is an example of a short testnet3 blockchain snippet usable still with any Bitcoin Core containing testnet3.",
          "created_at": "2025-12-04T09:04:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 627,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3612877414,
          "user": "instagibbs",
          "body": "I'll steelman an even stronger suggestion: Don't drop testnet3?\n\nWhat is the maintenance burden involved in keeping it around?",
          "created_at": "2025-12-04T15:44:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 126,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3612930147,
          "user": "mzumsande",
          "body": "> I'll steelman an even stronger suggestion: Don't drop testnet3?\n> \n> What is the maintenance burden involved in keeping it around?\n\nI thought the hope was that it would deter scammers/shitcoiners from trying to establish a market for testnet coins when Bitcoin Core doesn't shy away from dropping support for the network.",
          "created_at": "2025-12-04T15:54:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 323,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3615858503,
          "user": "jsarenik",
          "body": "What about asking Wiz to kindly turn off `mempool.space/testnet` which is testnet3 public explorer? Yes, there are many more but this would be a gesture.",
          "created_at": "2025-12-05T08:47:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 153,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3749926484,
          "user": "stwenhao",
          "body": "> Should we perhaps wait for testnet5 to see if that fixes the issues we see on testnet4?\n\nI wonder, if testnet5 will be deployed in the nearest future. 2026-01-01 and 2026-01-08 are already in the past, and nothing happened. Because when it comes to a proposed network with the premine of 10.5 million coins, then signet is pretty much already there. It was deployed in 2020, and it is beyond the first halving. Most coins are owned by developers, and there are faucets, where people can mine signet coins on CPUs.\n\nSo, is there anything, where testnet5 would do a better job, than signet with Proof of Work faucets? It may be worth considering selling some coinbase transactions, or things like that for signet coins (like: you pay 25 sBTC or more, and signet creators will allow you to produce a custom block or something). But in general, if it is only about testing mining, then faucet pretty much covers it.",
          "created_at": "2026-01-14T14:50:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 913,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3680657459,
      "number": 33982,
      "title": "build: `guix` package was removed from debian",
      "body": "Apparently the `guix` debian package was no longer maintained, and was removed from debian recently (see https://lwn.net/Articles/1035491/). Ubuntu and other debian derivatives will likely follow.\n\nThis means we need new setup instructions for guix on debian in `contrib/guix/INSTALL.md`.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2025-12-01T11:58:44Z",
      "updated_at": "2026-01-14T14:34:07Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33982",
      "labels": [
        "Docs",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3596149271,
          "user": "fanquake",
          "body": "Related discussion in #33574.",
          "created_at": "2025-12-01T12:00:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 29,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3596166889,
          "user": "laanwj",
          "body": "Thanks! Strange that i've not noticed before. This was the first time i ran into the issue.\n\nFor most platforms we could refer to the binary installers in https://ftp.gnu.org/gnu/guix/ . \n\nIt's mainly annoying on riscv64, because GUIX doesn't ship their own binaries for that, and debian did.",
          "created_at": "2025-12-01T12:04:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 292,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3596225176,
          "user": "laanwj",
          "body": "> A 1.5.0 release is planned for sometime in January 2026: https://codeberg.org/guix/release-planning/wiki/release-1.5.0-project/. So hopefully the situation is going to improve in future.\n\n\"Wait for 1.5.0\" SGTM, too.\n\nIf it isn't re-added i think it makes sense to remove the mention of the package from the docs completely, as most people are bound to run the newest debian release. The wording of \"various releases\" is a bit vague, more people are likely going to run into this.\n\nSo let's keep this issue open until it's resolved one way or another.",
          "created_at": "2025-12-01T12:15:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 552,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3749844850,
          "user": "fanquake",
          "body": "Guix 1.5.0rc1 is available for testing: https://lists.gnu.org/archive/html/guix-devel/2025-12/msg00182.html.",
          "created_at": "2026-01-14T14:34:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 108,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 334,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3784227504,
      "number": 34205,
      "title": "Intermittent issue in feature_bip68_sequence.py: in test_sequence_lock_confirmed_inputs                                        num_inputs = random.randint(1, min(10, available_utxos)): ValueError: empty range in randint(1, 0)",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/20722345957/job/59492260670?pr=34188#step:14:34425:\n\n```\n...\n node0 2026-01-05T18:28:42.795754Z [httpworker.1] [D:\\a\\bitcoin\\bitcoin\\src\\rpc\\request.cpp:243] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__ \n node0 2026-01-05T18:28:42.796627Z [http] [D:\\a\\bitcoin\\bitcoin\\src\\httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:59122 \n node0 2026-01-05T18:28:42.796705Z [httpworker.0] [D:\\a\\bitcoin\\bitcoin\\src\\rpc\\request.cpp:243] [parse] [rpc] ThreadRPCServer method=getrawtransaction user=__cookie__ \n node0 2026-01-05T18:28:42.797538Z [http] [D:\\a\\bitcoin\\bitcoin\\src\\httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:59122 \n node0 2026-01-05T18:28:42.797608Z [httpworker.1] [D:\\a\\bitcoin\\bitcoin\\src\\rpc\\request.cpp:243] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__ \n node0 2026-01-05T18:28:42.798538Z [http] [D:\\a\\bitcoin\\bitcoin\\src\\httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:59122 \n node0 2026-01-05T18:28:42.798612Z [httpworker.1] [D:\\a\\bitcoin\\bitcoin\\src\\rpc\\request.cpp:243] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__ \n test  2026-01-05T18:28:42.799132Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\feature_bip68_sequence.py\", line 66, in run_test\n                                       self.test_sequence_lock_confirmed_inputs()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\feature_bip68_sequence.py\", line 149, in test_sequence_lock_confirmed_inputs\n                                       num_inputs = random.randint(1, min(10, available_utxos))\n                                     File \"C:\\hostedtoolcache\\windows\\Python\\3.14.2\\x64\\Lib\\random.py\", line 341, in randint\n                                       raise ValueError(f\"empty range in randint({a}, {b})\")\n                                   ValueError: empty range in randint(1, 0)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-06T08:28:42Z",
      "updated_at": "2026-01-13T23:30:07Z",
      "closed_at": "2026-01-13T23:30:07Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34205",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3730905129,
          "user": "fjahr",
          "body": "I have looked and this and suggest a fix here: #34244",
          "created_at": "2026-01-09T23:10:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 53,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2756,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2579172974,
      "number": 31066,
      "title": " scriptpubkeyman fuzz target TopUp is slow (3/N)",
      "body": "Follow-up to https://github.com/bitcoin/bitcoin/issues/30476 and https://github.com/bitcoin/bitcoin/issues/30541:\r\n\r\nFound by OSS-Fuzz: https://issues.oss-fuzz.com/issues/369374541\r\n\r\nProbably a duplicate of, or similarity with https://github.com/bitcoin/bitcoin/issues/30498\r\n\r\nFile: [clusterfuzz-testcase-scriptpubkeyman-6582005385461760.not.txt](https://github.com/user-attachments/files/17330258/clusterfuzz-testcase-scriptpubkeyman-6582005385461760.not.txt)\r\n\r\n\r\n\r\n```\r\n$ FUZZ=scriptpubkeyman perf record -g --call-graph dwarf  ./bld-cmake/src/test/fuzz/fuzz -runs=1 /tmp/clusterfuzz-testcase-scriptpubkeyman-6582005385461760.not.txt\r\n$ hotspot ./perf.data\r\n```\r\n\r\n![Screenshot from 2024-10-10 17-19-24](https://github.com/user-attachments/assets/29918851-b1da-45d2-908f-8264e51a0f53)\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-10-10T15:21:10Z",
      "updated_at": "2026-01-13T23:28:48Z",
      "closed_at": "2026-01-13T23:28:48Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31066",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 840,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3746547140,
      "number": 34110,
      "title": "scriptpubkeyman fuzz target creates Base58 too large; Fails on 32-bit (armhf, ...)",
      "body": "Decoding should not behave differently on different architectures. See also the related commit 3789215f73466606eb111714f596a2a5e9bb1933.\n\nHowever, the `scriptpubkeyman` fuzz target seems to create base58 strings so large that `uint32_t` overflows for calculations in base58.cpp.\n\nThis is a bit hard to reproduce, because 32-bit platforms are rare and most of them don't support running the unsigned integer overflow sanitizer. So the possible options to reproduce are:\n\n* Run on armhf and manually annotate the code to detect the overflow\n* Run on i386 with the integer sanitizer (possibly via `podman run -it --rm --platform linux/i386 'debian:trixie'`)\n* Run the integer sanitizer on any 64-bit platform and manually replace type in the affected line by `uint32_t`\n\nAfterwards, the steps to reproduce are:\n\n```\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y\n\ncmake -B ./bld-cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero --preset=dev-mode\n\ncmake --build ./bld-cmake --parallel  $(nproc)\n\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/scriptpubkeyman/1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5'\n\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=scriptpubkeyman ./bld-cmake/bin/fuzz ./1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5\n```\n\nThe output will be something like:\n\n```\n/b-c/src/base58.cpp:54:28: runtime error: unsigned integer overflow: 8744655 * 733 cannot be represented in type 'size_t' (aka 'unsigned int')\n    #0 0x5985f849 in DecodeBase58(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:54:28\n    #1 0x59860a8b in DecodeBase58Check(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:148:10\n    #2 0x5986093b in DecodeBase58Check(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:168:12\n    #3 0x599c4fc8 in DecodeSecret(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) /b-c/bld-cmake/src/./key_io.cpp:217:9\n    #4 0x59b05478 in (anonymous namespace)::ParsePubkeyInner(unsigned int, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, bool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1789:20\n    #5 0x59af4256 in (anonymous namespace)::ParsePubkey(unsigned int&, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1978:16\n    #6 0x59adc3af in (anonymous namespace)::ParseScript(unsigned int&, std::span<char const, 4294967295u>&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:2148:24\n    #7 0x59adbc65 in Parse(std::basic_string_view<char, std::char_traits<char>>, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&, bool) /b-c/bld-cmake/src/./script/descriptor.cpp:2751:16\n    #8 0x597ad5de in wallet::(anonymous namespace)::CreateWalletDescriptor(FuzzedDataProvider&) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:73:61\n    #9 0x597ac489 in wallet::(anonymous namespace)::scriptpubkeyman_fuzz_target(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:104:22\n    #10 0x58950a8e in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\n    #11 0x589508eb in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\n    #12 0x5895044b in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\n    #13 0x5982ac95 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\n    #14 0x5981f0da in test_one_input(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\n    #15 0x59821b80 in main /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:271:13\n    #16 0xf75a8cc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #17 0xf75a8d87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #18 0x58917db6 in _start (/b-c/bld-cmake/bin/fuzz+0x235ddb6) (BuildId: 7d8d83a77923f14e99c0de64acbc5f5bfc2cce9b)\n\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /b-c/src/base58.cpp:54:28 \n```\n\n\nObviously, it would be trivial to fix this by using the same type on 64-bit and 32-bit:\n\n```diff\n    refactor: Use uint64_t over size_t for multiplications in DecodeBase58\n\ndiff --git a/src/base58.cpp b/src/base58.cpp\nindex 19a5bd3e55..5364b8276b 100644\n--- a/src/base58.cpp\n+++ b/src/base58.cpp\n@@ -51,7 +51,7 @@ static const int8_t mapBase58[256] = {\n         psz++;\n     }\n     // Allocate enough space in big-endian base256 representation.\n-    int size = strlen(psz) * 733 /1000 + 1; // log(58) / log(256), rounded up.\n+    int size(uint64_t{std::strlen(psz)} * 733 / 1000 + 1); // log(58) / log(256), rounded up.\n     std::vector<unsigned char> b256(size);\n     // Process the characters.\n     static_assert(std::size(mapBase58) == 256, \"mapBase58.size() should be 256\"); // guarantee not out of range\n```\n\nHowever, this seems like the wrong fix. A string of size `8744655` seems a bit large and should probably be rejected by the wallet code (if applicable), or by the fuzz target, if the condition is unreachable in  a production wallet.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T08:12:11Z",
      "updated_at": "2026-01-13T23:28:47Z",
      "closed_at": "2026-01-13T23:28:47Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/34110",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3693111393,
          "user": "brunoerg",
          "body": "The `scriptpubkeyman` target creates a wallet based on a descriptor from the input. So it basically creates random descriptors which is leading to create this specific case where it's a `pk()` fragment with a super large content into it. Besides this overflow issue I think these large descriptors are unproductive and makes the target slower, so could we reject large descriptors in the fuzz target?",
          "created_at": "2025-12-26T16:59:03Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 400,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3693129609,
          "user": "maflcko",
          "body": "> could we reject large descriptors in the fuzz target?\n\nYeah, that makes sense. I wonder if there is ever a use-case to expand any immediately following `%ij%kl` in the `GetDescriptor` helper. (Assuming this is what happens here). If no use-case exists, a requirement could be added to have any character in-between.\n\nA hacky one-line diff to achieve that could be:\n\n```diff\ndiff --git a/src/test/fuzz/util/descriptor.cpp b/src/test/fuzz/util/descriptor.cpp\nindex 9e52e990a2..debd6a43fd 100644\n--- a/src/test/fuzz/util/descriptor.cpp\n+++ b/src/test/fuzz/util/descriptor.cpp\n@@ -62,7 +62,7 @@ std::optional<std::string> MockedDescriptorConverter::GetDescriptor(std::string_\n             if (i + 3 >= mocked_desc.size()) return {};\n             if (const auto idx = IdxFromHex(mocked_desc.substr(i + 1, 2))) {\n                 desc += keys_str[*idx];\n-                i += 3;\n+                i += 4;\n             } else {\n                 return {};\n             }\n```\n\nI haven't tried that, and if it works, it will need an explanatory comment.",
          "created_at": "2025-12-26T17:15:40Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 1045,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3696825807,
          "user": "brunoerg",
          "body": ">  I wonder if there is ever a use-case to expand any immediately following %ij%kl in the GetDescriptor helper. (Assuming this is what happens here). If no use-case exists, a requirement could be added to have any character in-between.\n\nI think there is no use-case for expanding it, keys typically need to be separated by something so your suggestion makes sense. Perhaps a comment that explains it could be:\n\n```diff\ndiff --git a/src/test/fuzz/util/descriptor.cpp b/src/test/fuzz/util/descriptor.cpp\nindex 9e52e990a2..7c5e43206a 100644\n--- a/src/test/fuzz/util/descriptor.cpp\n+++ b/src/test/fuzz/util/descriptor.cpp\n@@ -62,7 +62,8 @@ std::optional<std::string> MockedDescriptorConverter::GetDescriptor(std::string_\n             if (i + 3 >= mocked_desc.size()) return {};\n             if (const auto idx = IdxFromHex(mocked_desc.substr(i + 1, 2))) {\n                 desc += keys_str[*idx];\n-                i += 3;\n+               // Consume %ij (3 chars) + 1 separator. Prevents invalid consecutive placeholders like %00%01\n+                i += 4;\n             } else {\n```",
          "created_at": "2025-12-29T15:30:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1078,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3699154823,
          "user": "maflcko",
          "body": "I guess my above diff may not fully fix long strings and requiring a separator like `,` or `)` after any `%ij` may also be needed.",
          "created_at": "2025-12-30T12:08:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 130,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3699221739,
          "user": "brunoerg",
          "body": "I still think we should reject long strings in the target anyway. I think it's maybe the only way to avoid these large descriptors that are improductive and make the target slower.",
          "created_at": "2025-12-30T12:34:25Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 180,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3699289858,
          "user": "maflcko",
          "body": "The rpc target has base58 strings capped at `max_base58_bytes_length{64}`. Not sure if we want to limit all descriptors to this size.\n\nI think to check that each inner fragment string is less than maximum meaningful byte length, could make sense.",
          "created_at": "2025-12-30T12:59:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 246,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3723431782,
          "user": "maflcko",
          "body": "> I think to check that each inner fragment string is less than maximum meaningful byte length, could make sense.\n\nDid that in https://github.com/bitcoin/bitcoin/pull/34230",
          "created_at": "2026-01-08T11:24:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 172,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 7488,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3787451912,
      "number": 34216,
      "title": "V30.1 Release URL Does Not Exist",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nhttps://bitcoincore.org/bin/bitcoin-core-30.1/ URL is invalid.\n\nHomebrew update on Mac fails:\n\n✘ Cask bitcoin-core (30.1)\nError: Download failed on Cask 'bitcoin-core' with message: Download failed: https://bitcoincore.org/bin/bitcoin-core-30.1/bitcoin-30.1-arm64-apple-darwin.zip\n==> Upgrading 1 outdated package:\nbitcoin-core 30.0 -> 30.1\n==> Upgrading bitcoin-core\n==> Purging files for version 30.1 of Cask bitcoin-core\nError: bitcoin-core: Download failed on Cask 'bitcoin-core' with message: Download failed: https://bitcoincore.org/bin/bitcoin-core-30.1/bitcoin-30.1-arm64-apple-darwin.zip\n\n### Expected behaviour\n\nHomebrew update for bitcoin-core should succeed.\n\n### Steps to reproduce\n\nJust run:\n\nbrew update; brew upgrade\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nV30.0\n\n### Operating system and version\n\nMacOS Tahoe 26.1\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "vittvolt",
      "created_at": "2026-01-07T05:51:43Z",
      "updated_at": "2026-01-13T16:03:58Z",
      "closed_at": "2026-01-07T06:23:41Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34216",
      "labels": [],
      "comment_data": [
        {
          "id": 3717491176,
          "user": "achow101",
          "body": "The binaries have been removed from the website due to an issue which can cause wallets to be deleted: https://bitcoincore.org/en/2026/01/05/wallet-migration-bug/",
          "created_at": "2026-01-07T06:23:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 162,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3745150856,
          "user": "fanquake",
          "body": "Just noting that v30.2 is now available, and homebrew & homebrew-cask are now pointing to that version.",
          "created_at": "2026-01-13T16:03:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 103,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1121,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3575888633,
      "number": 33758,
      "title": "BlockTemplate Manager Tracking issue",
      "body": "The main motivation and design rationale are discussed in #33389.\n\nWhat to review\n\n* #33421\n\n### Plan\n\n* [ ] **Introduce the Block Template Cache (Manager) #33421**\n  Implement a cache layer. All newly created block templates should be stored along with their respective configuration options. Client requests for block templates will specify the **maximum age** of the template; that is, how fresh they want the template to be:\n\n  * If a template with matching options exists in the cache and the interval has not elapsed, a cached template is returned.\n  * If no template exists or the interval has elapsed, a new template is generated, stored in the cache, and returned.\n  * After insertion, the oldest template is evicted if the cache exceeds its maximum size.\n    The cache has a configurable maximum size (default: 10).\n    It also subscribes to the validation interface’s `BlockConnected` notification and clears the cache when a new block is connected or disconnected, preventing stale templates from being served.\n    If `test_block_validity` is set to `true` in the block creation options and the cached template found has not yet been validated, it is checked and then returned.\n    This stage will also allow sharing of template metadata built from the mining interface for a fee estimation mechanism that requires building a block template to obtain package fee rates and use them for fee estimation, and vice versa. See the discussion in #33389.\n\n* [ ] Create a block template manager that will own the `BlockTemplateCache`. Block template requests from node components and other block template-related operations will be handled via this cache.\n\n* [ ] Prune `WaitAndCreateNewBlock` and move its implementation to the block template manager under `GetNext`. This method will use the block template cache for decisions to build a block template. This approach is cleaner and should allow reusing the logic in `getblocktemplate`, thereby removing the global state.\n  [https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L776)\n  [https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/rpc/mining.cpp#L859-L861)\n  This will also allow pruning `WaitTipChanged` and exposing information to retrieve the metadata of the last built block template, enabling the removal of additional global state.\n  [https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189](https://github.com/bitcoin/bitcoin/blob/292ea0eb8982faef460c210bd4215d603f487463/src/node/miner.h#L186-L189)\n\n* [ ] **Implement trimming of transactions** in larger block templates to enable reuse when configurations do not match (see the idea here: [https://github.com/bitcoin/bitcoin/issues/33389#issuecomment-3295505510](https://github.com/bitcoin/bitcoin/issues/33389#issuecomment-3295505510))\n  This will allow reusing block templates from `SENDTEMPLATE` for mining and fee estimation, but not vice versa, because `SENDTEMPLATE` builds templates larger than 4 MB.\n\n* [ ] **Introduce a push-based subscription mechanism** that allows clients to subscribe to fee updates for a given block template and receive a new template when the fee threshold is reached or when the tip changes. This is what `waitnext` should use.\n  See the related discussion here:\n  [https://delvingbitcoin.org/t/determining-blocktemplate-fee-increase-using-fee-rate-diagram/2052](https://delvingbitcoin.org/t/determining-blocktemplate-fee-increase-using-fee-rate-diagram/2052)\n  This feature depends on cluster mempool.\n\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-10-31T17:55:33Z",
      "updated_at": "2026-01-13T13:05:44Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33758",
      "labels": [
        "Mining",
        "Tracking Issue"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3846,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3748280410,
      "number": 34121,
      "title": "Syncing takes many days with state of the art hardware now - Reviving bootstrapping as a solution?",
      "body": "### Please describe the feature you'd like to see added.\n\nI run the lightning node SilentBob and recently nuked my Bitcoin chainstate or blocks database while trying to fix my issues with running out of disc space.\n\nResyncing turned out to take many days, even on modern hardware. In fact, I'm still waiting two days later with the estimated time remaining constantly switching between many hours, many days or even many weeks at times (13th gen i7 10 core CPU, super fast NVME 2TB SSD, 16 gig ram, 12 gig reserved for bitcoin... 500 Mbit cable connection).\n\nLuckily @C-Otto saved me by providing me with his blocks and chainstate directories and he mentioned that he might be able to provide the same service to others if there is any demand.\n\nSo I thought I should bring this up here and inquire if there is any interest in reviving bootstrapping again, as it has existed until 2014: https://bitcoin.org/bin/block-chain/README.txt\n",
      "state": "closed",
      "user": "viaj3ro",
      "created_at": "2025-12-19T17:39:02Z",
      "updated_at": "2026-01-13T12:12:59Z",
      "closed_at": "2026-01-13T12:12:59Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/34121",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3676013152,
          "user": "l0rinc",
          "body": "> Resyncing turned out to take many days\n\nDo I understand you correctly that this was a full Initial Block Download (i.e. no prior state locally) or was it a `-reindex` or `-reindex-chainstate`?\n\n> 12 gig reserved for bitcoin\n\nCan you please share the exact configs you have started the node with? Using a dbcache that large can sometimes result in memory swapping which dramatically slows down execution. We found that there's rarely a need to go beyond 3GB dbcache.\n\n> 500 Mbit cable connection\n\nThat should suffice, but if it's over TOR, it can often take days.\n\nLastly, which Core version were you using? Older ones have a low `assumevalid` which forces script (re)validation which can slow down simple devices a lot. Core v30 can do IBD 200% faster than e.g. v25 - make sure you use the latest.\n\nAlso, we're working on parallelizing part of the validation work (block input fetching for example), it should result in another 30-50% speedup, see: https://github.com/bitcoin/bitcoin/pull/31132. Even on simple Umbrel and Raspberry 5 devices we're getting validation speeds of 7-10 hours with that.",
          "created_at": "2025-12-19T18:02:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1100,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676033018,
          "user": "viaj3ro",
          "body": "Initially I tried to just do -reindex on the nodes itself. While setting up a fresh installation on the above mentioned machine as a backup plan. The reindex was so painfully slow (much slower than starting from scratch on the soewhat faster machine) that I gave up on it.\n\nconfig:\nserver=1\ntxindex=1\ndbcache=12048\n\nIt never came even close to using 8 gig of RAM anyway.\n\nclearnet, not TOR. Syncing until 2020 was reasonably fast. slowed down a lot until 2024 and its a crawl since then",
          "created_at": "2025-12-19T18:09:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 486,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3676033395,
          "user": "sipa",
          "body": "> So I thought I should bring this up here and inquire if there is any interest in reviving bootstrapping again, as it has existed until 2014: https://bitcoin.org/bin/block-chain/README.txt\n\nIt won't help you. If synchronization takes days, it's not the downloading that's the bottleneck, but validation. Validating a bootstrap.dat would take just as long. (Unless of course your network connection somehow is that slow, but in that case downloading the bootstrap.dat file will just be as long)\n\nThe bootstrap.dat approach was abandoned because it's generally faster to just sync from the network since Bitcoin Core 0.12, as it downloads and validates in parallel. If you use bootstrap.dat, you need to first download the whole file, and only then validate it.",
          "created_at": "2025-12-19T18:09:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 760,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676046343,
          "user": "viaj3ro",
          "body": "Downloading blocks and chainstate took around 7 hours. The node was starting right away. No need for revalidating.\n\nIt only took another 4h because eclair requires txindex=1 (which @C-Otto doesn't need since he runs LND)\n\nso boostrapping saved me at least 2 days at this point already. potentially many more",
          "created_at": "2025-12-19T18:13:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 307,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676048745,
          "user": "C-Otto",
          "body": "To clarify: I provided the `blocks/` and `chainstate/` directories. I believe that a non-validating approach (like this) isn't in the best interest of the project.",
          "created_at": "2025-12-19T18:14:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 163,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676051515,
          "user": "viaj3ro",
          "body": "wouldn't it be possible to provide it verifiably via checksum / hash?\n",
          "created_at": "2025-12-19T18:15:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 70,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676055510,
          "user": "sipa",
          "body": "If you're copying the `chainstate` directory from someone else, you're not validating history. That will obviously be faster, but isn't comparable to the `bootstrap.dat` method (which still validated the whole history on import).\n\n> wouldn't it be possible to provide it verifiably via checksum / hash?\n\nYes, of course, if you somehow get the checksum from a trusted source. There is ongoing work in the Bitcoin Core project to enable that through the `assumeutxo` project, but it's a very different security tradeoff.",
          "created_at": "2025-12-19T18:17:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 518,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676060280,
          "user": "l0rinc",
          "body": "Can you please try a -reindex-chainstate with -dbcache=3000 instead? It would be useful for us to know why it's so slow for some people...",
          "created_at": "2025-12-19T18:18:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 138,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3676073049,
          "user": "viaj3ro",
          "body": "> Can you please try a -reindex-chainstate with -dbcache=3000 instead? It would be useful for us to know why it's so slow for some people...\n\ncan do, once the fresh bitcoin installation is fully synced. I can't play around with bitcoin on my active lightning node unfortunately. I'm almost certain the large dbcache wasn't causing issues. I was monitoring RAM usage and it never came close to using all\n\nThe new sync stands at 53 hours currently (may 2025) with an estimated 10 hours to 3 days still to go",
          "created_at": "2025-12-19T18:23:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 505,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3679297841,
          "user": "andrewtoth",
          "body": "I recently benchmarked #31132 with network connected storage and it likely solves this problem https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806. The issue is that fetching inputs single threaded with high latency but high throughput storage is unable to utilize any of the throughput.\n\nPlease review or test.",
          "created_at": "2025-12-21T19:01:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 329,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3698245479,
          "user": "Sjors",
          "body": "@viaj3ro you could also try the AssumeUTXO feature (`loadtxoutset`), https://github.com/bitcoin-core/bitcoincore.org/pull/1197 links to a torrent for the most recent snapshot. It doesn't reduce total sync time, but once it's synced to the tip your lightning node should work. ",
          "created_at": "2025-12-30T03:59:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 276,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3743989448,
          "user": "willcl-ark",
          "body": "Closing as unplanned, because as explained above I don't think there are any plans to re-introduce the bootstrap mechanism now that we have things like assumeutxo snapshotting, and other [related performance improvements](https://github.com/bitcoin/bitcoin/issues/34121#issuecomment-3679297841) in the pipeline. Feel free to continue conversation in here after close, if you like :)\n\nAs mentioned above, assumeutxo is still bottlenecked on validation speed, and therefore not comparable to a \"trusted datadir clone\" in terms of \"sync\" performance, but if you do want to try it out and find the torrent files unreliable or slow, I host some of the more recent snapshot files at https://utxo.download/ for direct download.",
          "created_at": "2026-01-13T12:12:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 720,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1032,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3801844950,
      "number": 34255,
      "title": "rpc `dumptxoutset` breaks with default optional value.",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nI was testing `dumptxoutset` and by omitting the `type` field the command just broke even if the field itself claims to be optional.\n\nIn the documentation it says that the default value for `type` is `\" \"` but appears the command is expecting either `rollback` or `latest`.\n\n### Expected behaviour\n\nSince the documentation is already stating the problem itself, this may be a desired behavior ? But why make the field optional if thats not exactly the case ? Why not making the default value for `type` to be `latest` ?\n\n### Steps to reproduce\n\nbitcoin-cli dumtxoutset filename.dat\n\n### Relevant log output\n\n[nix-shell:~]$ sudo bitcoin-cli -rpcclienttimeout=0 dumptxoutset pau.dat\n[sudo] password for jaoleal: \nerror code: -8\nerror message:\nInvalid snapshot type \"\" specified. Please specify \"rollback\" or \"latest\"\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv30.0\n\n### Operating system and version\n\nNixOs 25.11\n\n### Machine specifications\n\nEnough",
      "state": "closed",
      "user": "jaoleal",
      "created_at": "2026-01-11T19:02:27Z",
      "updated_at": "2026-01-13T07:56:17Z",
      "closed_at": "2026-01-12T07:41:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34255",
      "labels": [
        "Docs",
        "RPC/REST/ZMQ",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3737241930,
          "user": "maflcko",
          "body": "It is only optional to specify `type=\"rollback\"`, when `rollback=...` is set. Otherwise, the error is correct:\n\n>  Invalid snapshot type \"\" specified. Please specify \"rollback\" or \"latest\"",
          "created_at": "2026-01-12T07:41:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 188,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3737243929,
          "user": "maflcko",
          "body": "Closing for now, because I think this is clear, but pull requests with suggestions or improvements are welcome, if there are any.",
          "created_at": "2026-01-12T07:42:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 129,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3739498978,
          "user": "jaoleal",
          "body": "Thanks for taking a look at this, \n\n>  but pull requests with suggestions or improvements are welcome, if there are any.\n\nI was expecting to develop some with this issue...\n\nWYT about an adjustment on documentation saying that the field is not optional and changing the default to `latest` ?\n\n> Closing for now, because I think this is clear\n\nIt is not, the documentation is incorrect and induce to broken behavior...  And the default not being accepted makes the field obligatory to be set.",
          "created_at": "2026-01-12T16:47:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 491,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3742626156,
          "user": "maflcko",
          "body": "> WYT about an adjustment on documentation saying that the field is not optional and changing the default to `latest` ?\n\nSeems fine, but then someone will complain that they'll have to call `dumptxoutset \"file.dat\" \"rollback\" rollback={...}` after this breaking change. (Typing `rollback` twice).\n\nI guess the default could be changed to a `DefaultHint`: `\"rollback\" when the rollback option is specified, and \"latest\" otherwise.`\n\nThough, then someone will complain that the default is \"latest\", which is generally not something that someone wants, and they'd prefer if the value was set explicitly.\n\nSo, I guess the default could be changed to a `DefaultHint`: `\"rollback\" when the rollback option is specified, and unset otherwise.` This should make everyone happy? If you agree, you can open a pull request with that.",
          "created_at": "2026-01-13T07:56:17Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 821,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1170,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3629644627,
      "number": 33882,
      "title": "Standardness policy rules for legacy Multisig script is incoherent",
      "body": "Over the years policy surrounding multisig scripts, particularly for legacy multisig scripts, has evolved in a haphazard way with various PRs affecting  legacy multisig script policy without considering the ramifications.\n\nThe current status of legacy multisig script policy is as follows:\n\n* Legacy multisig outputs in transactions can be at most *m*-of-3.  All pubkeys in such outputs must be of the form of a compressed pubkey, or uncompressed pubkey, or a hybrid pubkey.\n* Legacy multisig inputs being redeemed in transaction can be *m*-of-*n* with *m* and *n* 20 or less.  Any public keys processed by OP_CHECKMULTISIG must be compressed or uncompressed pubkeys.  hybrid or other data blobs are only allowed in the unprocessed part of the public key list.\n\nWhile it is acceptable for legacy multisig output creation policy to be stricter than redemption policy, it makes no sense to allow hybrid keys in outputs by policy, but then to disallow them as inputs by policy.\n\nHowever, there are further issues. Legacy multisig policy has evolved over time.  In the beginning when legacy multisig outputs were introduced as standard by BIP 11, \"pubkeys\" were allowed by policy to be any value between 33 and 120 bytes.  Some Bitcoin users have taken advantage of those liberal policies and created legacy multisig script UTXOs that were redeemable by policy at the time they were created, but are no longer redeemable by policy today.  The UTXO 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 from 2014-01-12 is but one example.  @ajtowns's analysis in #33755 suggests there are at least 147,470 such UTXOs that have become *soft-confiscated* over time, meaning that when they were created they were redeemable by policy, but become no longer redeemable by policy and would require direct miner assistance to be spent.\n\nBased on my research, I believe there are 4 tasks that need to be done to make legacy Multisig policy coherent again.\n\n### 1. Ban hybrid keys in legacy outputs\n\nWe should strengthen the rules surrounding creating legacy multisig (and legacy single sig) to ban the use of hybrid keys.  Such keys are nearly irredeemable.  However, we should only strengthen policy around the creating new legacy script outputs without further restricting policy around redeeming legacy script UTXOs.\n\n### 2. Bring legacy script redemption policy in line with P2SH redeem script policy.\n\nP2SH redeem script policy has also evolved over time.  Current policy for P2SH redemption allow any scripts so long as they have a limited number of CHECKSIG related operations.  I see no reason why legacy script should be subject to significantly more stringent constraints than P2SH redeem scripts are.\n\n### 3. Relax `SCRIPT_VERIFY_STRICTENC` policy to only ban hybrid keys.\n\nPR #5247 went unnecessarily overboard in its quest to stomp out uses of hybrid keys and made UTXOs that already existed at the time unspendable.  PR #33755 partially reverts this change so that only hybrid keys are excluded from processing in  CHECKMULTISIG.\n\n### 4. Bring `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` policy in line with BIP 143 requirements.\n\nThis task is technically unrelated to legacy multisig policy, being instead about Segwit V0 multisig policy.  However the policy implemented in Bitcoin Core does not match the policy stated in BIP 143, and they ought to be brought into agreement. Either by implementing the policy correctly (as #33759 does), or by amending BIP 143 to describe the current policy as implemented.\n\nIn particular, both tasks 2 and 3 need to be completed in order to make stuck UTXOs, such as 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 spendable by policy again.\n\nI want to make it clear that UTXOs such as the above are not particularly abusive.  They were simply caught up incidentally in the policy changes of PR #5247, which was only about banning the use of hybrid keys.  4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 has no hybrid nor hybrid looking pubkeys in it.\n\n```\t\nOP_PUSHNUM_1\nOP_PUSHBYTES_33 035bceeb417f25beaa28d133ee7b28faa1e4f5c2f76b8daf12c3fab18261718790\nOP_PUSHBYTES_33 1c434e545250525459000000000000000000000001000000004190ab0000000000\nOP_PUSHNUM_2\nOP_CHECKMULTISIG\n```\n*The script from UTXO 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1*",
      "state": "open",
      "user": "roconnor-blockstream",
      "created_at": "2025-11-16T02:09:46Z",
      "updated_at": "2026-01-13T00:50:47Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33882",
      "labels": [
        "Brainstorming",
        "TX fees and policy"
      ],
      "comment_data": [
        {
          "id": 3537392532,
          "user": "roconnor-blockstream",
          "body": "## How did we get here\n\nI've compiled a list of what I believe are all the relevant PRs related to policy surrounding multisig scripts, listed in chronological order. This work is based on previous work done by @ajtowns \n\n### PR #669; merged 2011-12-20\nThis PR introduces *m*-of-*n* checkmultisig as a solvable script for the first time. Solvability requires *m* and *n* to be at most 16. Per BIP 11, standardness requires solvable MULTISIG tx outputs to be at most *m*-of-3 and *m* to be ~less than~ less than or equal to *n*.\n\nAny data between 33 and 120 bytes is considered a \"pubkey\" for solvability purposes.\n\nThis PR also introduces a new standardness rule requiring redeemed legacy scripts to be solvable. This is done because the solver needs to be run to determine if the UTXO's scriptpubkey being redeemed is an OP_EVAL (later P2SH) script.\n\nBoth legacy scripts redeemed and OP_EVAL/P2SH redeem scripts are required to be solvable at redemption time. Additionally  EVAL/P2SH redeem scripts are required to be standard.\n\nBe aware of the difference between a solvable script and a standard script. Standard scripts are limited to *m*-of-3 multisig, but solvability allows up to 16.  Standardness is stronger than solvability.\n\nBecause the scriptpubkey for legacy UTXOs are now checked for solvability, any subsequent strengthening of standardness rules via `Solver` becomes a vector for soft-confiscation of UTXOs.\n\n\n### PR #769; merged 2012-02-07\nUnexpected stack items are banned using `ScriptSigArgsExpected` counting when redeeming legacy script and P2SH script. This seems to be done to prevent data stuffing in scriptsigs. It is unclear if the data stuffing is a concern or the malleability is a concern. (Later code comments in PR #4365 suggests malleability isn't actually a concern, but PR comments in PR #7387 suggests it was.)\n\nThe relevance here is that `Solver`'s output is now also being used to help count the number of expected stack items. Later `ScriptSigArgsExpected` will be removed.\n\nUnless I'm mistaken, this PR also no longer requires P2SH scripts to be standard and now merely requires them to be solvable.  This enables larger P2SH multisig scripts beyond *m*-of-3. This change seems to be a violation of BIP 16 standardness rules, but it passes without comment.\n\n### PR #1742; merged 2012-10-20\n`CHECKSIG` and `CHECKMULTISIG` operations are modified to check pubkeys to see if they are in canonical form, which must begin with `0x02`, `0x03` or `0x04`, and be of suitable lengths.\n\nAt this point non-canonical pubkey stack items are not yet banned from OP_CHECKMULTISIG. Instead, mempool policy diverges from consensus policy as all non-canonical pubkey stack items immediately count as a signature failure, with OP_CHECKSIG pushing a 0 in these cases and OP_CHECKMULISIG moving to the next pubkey. While non-pubkey would always fail the CHECKSIG anyways, this is a problem for valid hybrid keys where script execution for mempool policy could cause execution to diverge from consensus rule execution.\n\nThis counts as a slight tightening of policy around the redemption (but not creation) of scripts using hybrid keys and applies both to P2SH and legacy scripts.\n\n### PR #3718; merged 2014-02-14\n\nSolvability (and hence standardness) for script is tightened so that for script standardness purposes pubkey data must be between 33 and 65 bytes rather than 33 and 120 bytes.\n\nDue to the fact that solvability rules are checked upon UTXO redemption means that some funds, both P2SH and legacy, could have been soft-confiscated here.\n\n::TODO:: see if any such UTXOs exist.\n\n### PR #4365; merged 2014-06-27;\nP2SH rules are relaxed so non-solvable redeem scripts are allowed if sigop count is less than 15(?). Clean stack not required for redeeming such non-standard P2SH redeem scripts. I don't know why this is considered okay.\n\nThis is the beginning of the divergence of policy between redeeming legacy script and redeeming P2SH script.\n\n### PR #5247; merged 2014-11-21\n\nThe inconsistency between mempool policy execution of script and consensus execution of script is resolved by failing `SCRIPT_VERIFY_STRICTENC` standardness whenever a pubkeys processed by `CHECK*SIG` is non-canonical.\n\nThis accidently causes in-use pre-counterparty-1.0-like legacy multiscript UTXO's to be soft-confiscated. e.g. 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 from 2014-01-12. The effect of soft-confiscating existing UTXO seems to have been inadvertent and wasn't contemplated in this PR.\n\nThis policy only applies to redemption, not creation of outputs. Standardness rules still allow creating transactions with legacy script outputs with non-canonical keys.\n\n### PR #7387; merged 2016-01-22;\nScriptSigArgsExpected is removed since now SCRIPT_VERIFY_CLEANSTACK is robustly checking for a clean stack.\n\nFurther divergence between redeeming legacy script and redeeming P2SH occurs as now as P2SH redeem scripts are themselves no longer checked for solvability. So long as the P2SH redeem scripts have a low enough `GetSigOpCount` they are allowed here. Legacy script redemptions still must be solvable scripts.\n\nIn particular, P2SH multisig redeem scripts with 66-120 byte \"pubkeys\" occurring at the end of their list that may have been soft-confiscated in PR #3718 are now, once again, redeemable.\n\n### PR #8499; merged 2016-10-17;\nFor the new P2WSH script, this PR attempts to implement the policy mandated by BIP 143:\n\n> As a default policy, only compressed public keys are accepted in P2WPKH and\n> P2WSH. Each public key passed to a sigop inside version 0 witness program must\n> be a compressed key: the first byte MUST be either 0x02 or 0x03, and the size\n> MUST be 33 bytes. Transactions that break this rule will not be relayed or mined\n> by default.\n\nHowever, the implementation fails to adhere to the policy written above and only checks that, for P2WSH, the pubkeys processed by CHECKMULTISIG are compressed public key, rather than checking that all keys passed to CHECKMULTISIG are compressed public keys.\n\n### PR #12460; merged 2018-04-04;\nSolvability rules for scripts are tightened to require pubkeys in them to be well-formed, but not-necessarily canonical.\n\nNow the creation of legacy script UTXOs are, by standardness, required to be canonical or hybrid pubkeys.\nIt is still the case that if script evaluation encounters a hybrid pubkey it is a violation of `SCRIPT_VERIFY_STRICTENC` standardness rules to redeem.\n\nHowever because scriptpubkeys still are checked during redemption for solvability for legacy script (but not P2SH script), this PR likely soft-confiscates even more UTXOs.\n\nPre-counterparty-1.0-like legacy multiscript UTXO are now in violation of two redemption rules:  They are neither solvable, and if they were executed the OP_CHECKMULTISIG would fail when trying to process non-canonical keys.\n\n::TODO:: Find examples of UTXOs newly soft-confiscated by this PR.\n\n### EDIT: PR #13194; merged 2018-05-30\nThis PR refactors the Solver.  The solver now fails when *m* > *n* in an *m*-of-*n* multisig.  This is not a soft confiscation because such outputs are (a) unspendable anyways, and (b) were never standard to begin with.\n\n### PR #20867; merged 2021-05-03\n\nThis PR lifts the solvability of *m*-of-*n* multisig up from 16 to 20, *increasing* the types of legacy multisig scripts that are now redeemable.  Transactions creating legacy multisig continue to be limited to 1 ≤ m ≤ n ≤ 3.",
          "created_at": "2025-11-16T02:12:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 7458,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3541949709,
          "user": "ajtowns",
          "body": "> standardness requires solvable MULTISIG tx outputs to be at most _m_-of-3 and _m_ to be less than _n_.\n\nThe requirement is for `m` not to be greater than `n`, as far as I can see? (via both `IsStandard()` and `Solver()`)\n\n> Solvability (and hence standardness) for script is tightened so that for script standardness purposes pubkey data must be between 33 and 65 bytes rather than 33 and 120 bytes.\n> \n> ::TODO:: see if any such UTXOs exist.\n\nI believe there are four utxos that match this for bare multisig (ie, have a pubkey push of more than 65 bytes):\n\n * [f039df74dc453ea138d03ca463bd60ab947a27a5c62002c6e3404ba8222a77cc:3](https://mempool.space/tx/f039df74dc453ea138d03ca463bd60ab947a27a5c62002c6e3404ba8222a77cc) 12000 sats, block 269754\n * [c1836e90b62e0907ba39381c2b86e2cc78a79bfc8dd2c5fdf849e1f3ad2b89df:3](https://mempool.space/tx/c1836e90b62e0907ba39381c2b86e2cc78a79bfc8dd2c5fdf849e1f3ad2b89df) 12000 sats, block 269786\n * [791c0a733fa4815f54119de0a1378e6a27528be3da78a3bc6d9109ea92cf4e75:3](https://mempool.space/tx/791c0a733fa4815f54119de0a1378e6a27528be3da78a3bc6d9109ea92cf4e75) 12000 sats, block 269791\n * [13960ff2e2b37dc3437b1d905973d9b0f8c94a24750d5b8b1b9b71f94a8a1dcd:3](https://mempool.space/tx/13960ff2e2b37dc3437b1d905973d9b0f8c94a24750d5b8b1b9b71f94a8a1dcd) 12000 sats, block 269602\n\nHowever, they're all 1-of-1 with 66 byte keys (that look like two 33 byte compressed keys concatenated?) so are presumably unspendable anyway.\n\n> PR [#12460](https://github.com/bitcoin/bitcoin/pull/12460); merged 2018-04-04;\n> \n> Solvability rules for scripts are tightened to require pubkeys in them to be well-formed, but not-necessarily canonical.\n> \n> ::TODO:: Find examples of UTXOs newly soft-confiscated by this PR.\n\nI believe this means that while we previously allowed spending `1 [data] [pubkey] 2 CHECKMULTISIG` via a signature from `pubkey`, but not `1 [pubkey] [data] 2 CHECKMULTISIG` (because we'd see `data` was not a compressed-or-uncompressed pubkey, and abort), we now would not, because `data` is not a valid-sized-pubkey. (This would fail `AreInputsStandard()` due to `Solver()` failing due to `CPubKey::ValidSize()` being strict)\n\nI think there are 405 utxos that fit that pattern, though they're all very small. The ones with more than 786 sats are:\n\n * [c04ee885ce41068497381633a5d47dcdf5ad1a1e2affd8417aab028334dcb08f:1](https://mempool.space/tx/c04ee885ce41068497381633a5d47dcdf5ad1a1e2affd8417aab028334dcb08f) 7800 sats, block 334012\n * [b66904081cef5cadfd693715e2d0bd622a5726aa410217b9f26bd5bdd92e2231:1](https://mempool.space/tx/b66904081cef5cadfd693715e2d0bd622a5726aa410217b9f26bd5bdd92e2231) 7800 sats, block 346429\n * [a3c66f98eea1f34b81fe4e30215cb04c9c9810207f4119b4154c2fc83e735c9b:1](https://mempool.space/tx/a3c66f98eea1f34b81fe4e30215cb04c9c9810207f4119b4154c2fc83e735c9b) 7800 sats, block 347150\n * [9da063f7aad545b97e3ad5a5b12fdadbe8a7f2ebd39c437cd8a56541a4d8049b:1](https://mempool.space/tx/9da063f7aad545b97e3ad5a5b12fdadbe8a7f2ebd39c437cd8a56541a4d8049b) 7800 sats, block 346429\n * [9336b7e53d30bf4d7d7e8d9bc37a4af13ec48fba46474d682fa34ebd177ef384:1](https://mempool.space/tx/9336b7e53d30bf4d7d7e8d9bc37a4af13ec48fba46474d682fa34ebd177ef384) 7800 sats, block 346421\n * [8f7c4607cdf8867ca04f13de2585cb362b01354d7a05ce8ecbb94060d4d65c6e:1](https://mempool.space/tx/8f7c4607cdf8867ca04f13de2585cb362b01354d7a05ce8ecbb94060d4d65c6e) 7800 sats, block 347143\n * [58c09c0adfe1154023272203b327bae2151a652f62f6533cc76a9a1afc4cc19e:1](https://mempool.space/tx/58c09c0adfe1154023272203b327bae2151a652f62f6533cc76a9a1afc4cc19e) 7800 sats, block 346423\n * [3cd32f8e095162596af58f9ef89833ce3926d4bd18b8faa18bceefd47c3a527c:1](https://mempool.space/tx/3cd32f8e095162596af58f9ef89833ce3926d4bd18b8faa18bceefd47c3a527c) 5460 sats, block 337857\n * [2ecae24a049993142260861d32275d40461936679e9efa9c2504cacd4048914c:1](https://mempool.space/tx/2ecae24a049993142260861d32275d40461936679e9efa9c2504cacd4048914c) 5460 sats, block 338414\n * [90b92bfa1c76d97adde6304ef3aa597f0d8e0901e5bfdecf6f02dc870f32bc9c:1](https://mempool.space/tx/90b92bfa1c76d97adde6304ef3aa597f0d8e0901e5bfdecf6f02dc870f32bc9c) 882 sats, block 334019\n\nHere's a CSV of what I think are all the baremultisigs that aren't just all-compressed-keys (ie every pubkey push is 33 bytes beginning with 02 or 03, m is less than n, n is 1 through 16): [baremult-923997.csv.bz2](http://azure.erisian.com.au/~aj/tmp/baremult-923997.csv.bz2) sha256 is `9951903516def05402ca4a6d8f64773f87e5f6611324e8ee86e44ce2a34982e7`. It's 21M compressed, 76M uncompressed, 266k utxos. spktype is BMU if it just has some uncompressed keys, BMD if it has hybrid/invalid keys, BMSZ if it has keys outside the 33-65 byte range, and BMWEIRD if it didn't parse as expected. Doesn't include anything that didn't match `OP_m ... OP_n OP_CHECKMULTISIG` with 1<=m<=n<=16.\n\nFor interest, looking at all utxos by type (with a little marker for ones that expose pubkeys to quantum attackers):\n\n|type|num utxos|total value|qv|type desc|\n|---|---:|---:|---|---|\n|WPKH|48,099,317|7,054,948.7201_8170||p2wpkh (segwit v0 single sig)|\n|PKH|45,291,937|5,721,757.7725_2479||p2pkh|\n|SH|12,946,965|4,015,214.8756_0840||p2sh|\n|PKU|34,376|1,711,833.0160_1304|:atom:|pay to bare pubkey, uncompressed|\n|WSH|2,421,892|1,254,033.7434_0198||p2wsh (segwit v0 script/multisig)|\n|TR|55,861,027|182,751.7906_9625|:atom:|taproot|\n|PK|10,276|6,536.6290_0123|:atom:|pay to bare pubkey, compressed|\n|UNK|20,752|2,617.5862_4609||weird stuff (eg \"sign with a pubkey that hashes to 0\")|\n|BMC|2,175,608|52.2136_0141|:atom:|bare multisig, compressed keys|\n|BMD|176,159|9.9984_3912|:atom:|bare multisig, data in keys|\n|BMU|89,796|6.9910_7231|:atom:|bare multisig, some uncompressed keys|\n|SWUPG|54,957|0.3051_4917||insecure, future segwit versions|\n|BMWEIRD|42|0.0207_3932||weird things that look like a multisig, generally unspendable|\n|BMSZ|4|0.0004_8000||listed above|\n\nFWIW, all the BMC, BMU, BMD and BMSZ utxos have n in [1,2,3].\n\nThe BMWEIRD ones are mostly 0 or 1 sat stuff, most of which is unspendable anyway; the remaining four are:\n\n * [3482ea1d219120b13f3be49f63fd7079136785dff2bf7487726b640da5876e33:0](https://mempool.space/tx/3482ea1d219120b13f3be49f63fd7079136785dff2bf7487726b640da5876e33) 2023000 sats, block 320071 (NOTIF != 17, unspendable)\n * [2bb7e8720356f79a9005488a529ab12d6f516879b2357224204cb5f2b780fd02:0](https://mempool.space/tx/2bb7e8720356f79a9005488a529ab12d6f516879b2357224204cb5f2b780fd02) 30919 sats, block 272252 (PUSH, DROP, 1-of-1 CMS)\n * [72590fcf0d8021bad77826c5008eaca3541f81d212d55bb7c02ec6a4bf584404:0](https://mempool.space/tx/72590fcf0d8021bad77826c5008eaca3541f81d212d55bb7c02ec6a4bf584404) 10000 sats, block 244029 (3 invalid keys, unspendable)\n * [66747648ef92d78bb36c267c0f444e6df96e44f463a2f92541483fcb8e882b27:1](https://mempool.space/tx/66747648ef92d78bb36c267c0f444e6df96e44f463a2f92541483fcb8e882b27) 10000 sats, block 278495 (checkmultisig but with pubkeyhashes)\n\nSo I believe only the BMD utxos are interesting here (BMC and BMU should already be both spendable and, depending on permitbaremultisig, creatable). \n\nPersonally, my take is that we should:\n * allow spending anything that (a) was previously spendable, (b) doesn't make validation slow, and (c) doesn't prohibit upgrade hooks/similar. ie, we should make it easy to spend bare multisigs with embedded data, or with hybrid pubkeys; but shouldn't change how restricted segwitv0 p2wsh scripts are\n * by default, disallow creating obsolete scriptPubKeys, including both bare multisig and bare un/compressed pubkey\n * if the permitbaremultisig=0 default is overridden, allow creating bare multisig outputs that include hybrid pubkeys or encoded data up to 65 bytes (in particular, so that allowing spending of such outputs involves fewer special cases in the code)",
          "created_at": "2025-11-17T13:54:51Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 1,
            "text_length": 7808,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3542129055,
          "user": "roconnor-blockstream",
          "body": "> The requirement is for m not to be greater than n, as far as I can see? (via both IsStandard() and Solver())\n\nYeah, I meant to say \"less than or equal to\".  However, AFAICT this inequality is only enforced in standardness, not solvability.",
          "created_at": "2025-11-17T14:26:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 241,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3542353380,
          "user": "roconnor-blockstream",
          "body": ">  we should make it easy to spend bare multisigs with embedded data, or with hybrid pubkeys\n\nJust to be clear, we cannot allow hybrid pubkeys to be processed by `CHECKMULTISIG` without undermining the purpose of the hybrid pubkey ban. (However we can allow hybrid pubkeys that are unprocessed by `CHECKMULTISIG`.)\n\nMy understanding of the hybrid pubkey ban is that it is in place in case we wish to, one day, introduce a soft-fork that would allow implementations of Bitcoin Core to use a normal ECDSA validation routine that only succeeds on SEC 1 formatted public keys (i.e. canonical keys).  This requires failing script in  `CHECKSIG` and `CHECKMULTISIG` as soon as a hybrid pubkey is encountered for processing.\n\nI was previously thinking that we could only ban *successful* hybrid pubkey signatures.  In other words, `CHECKSIG` and `CHECKMULTISIG` could process they hybrid pubkey and only fail the script in case the signature was successful. Alas, this would fail to meet the above purpose of the hybrid pubkey ban, for if this rule were to become part of consensus, then consensus implementation would still have to run the ECDSA validation engine on hybrid pubkeys in order to determine if they need to abort the script or not.\n\nThat said we *could* simply abandon our hybrid pubkey policy entirely and give up on this soft-fork.  I'm not advocating this, but it is a possibility.\n\nIt might be worth dividing your BMD category into those with some hybrid pubkeys and those without any hybrid pubkeys.",
          "created_at": "2025-11-17T15:06:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1511,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3542756169,
          "user": "instagibbs",
          "body": "> The requirement is for m not to be greater than n, as far as I can see? (via both IsStandard() and Solver())\n\ncirca e679ec969c8b22c676ebb10bea1038f6c8f13b33 *creation* was constrained to m-of-3",
          "created_at": "2025-11-17T16:22:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 195,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3544844062,
          "user": "ajtowns",
          "body": "> Yeah, I meant to say \"less than or equal to\". However, AFAICT this inequality is only enforced in standardness, not solvability.\n\n`Solver()` calls `MatchMultisig()` which invokes `num_keys = GetScriptNuymber(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG)` which returns nullopt if the CScriptNum isn't minimal and between `required_sigs` and `MAX_PUBKEYS_..`, so I believe it's enforced in both places.\n\n> Just to be clear, we cannot allow hybrid pubkeys to be processed by `CHECKMULTISIG` without undermining the purpose of the hybrid pubkey ban\n\nYes; I don't think a hybrid pubkey ban is worth maintaining. By switching from openssl to libsecp256k1 we've avoided the possibility of new formats being unexpectedly introduced ([ref](https://gnusha.org/pi/bitcoindev/CA+s+GJAc8ZX9ziapULE7KJpJUonTv+sfncw0RGLwu_YPQrM=zw@mail.gmail.com/)), and the validation cost (and data carrying ability if faked) of a hybrid pubkey is essentially the same as that of an uncompressed pubkey which we'll continue to support for spending. So I'm not seeing the value in treating hybrid keys differently from uncompressed keys.\n\nNot intending to strongly advocate that view vs other alternatives at this point; just putting it out there to ensure that if we stick with the current direction, that it's for a good reason, not just because it's the status quo.\n\n> introduce a soft-fork that would allow implementations of Bitcoin ~~Core~~ to use a normal ECDSA validation routine that only succeeds on SEC 1 formatted public keys\n\nWhat we support by consensus matches the (earlier) ANSI X9.62-1998 standard; I don't see why we'd go to the trouble of a soft fork just to switch to a different standard/library. ([ref](https://bitcoin.stackexchange.com/questions/57855/c-secp256k1-what-do-prefixes-0x06-and-0x07-in-an-uncompressed-public-key-signif))\n\n> It might be worth dividing your BMD category into those with some hybrid pubkeys and those without any hybrid pubkeys.\n\nI think there are 384 BMD outputs with a hybrid-ish pubkey (65 bytes beginning with 06/07), but all but one are 1-sat. Here are the 5 most recent such utxos:\n\n * [2ecae24a049993142260861d32275d40461936679e9efa9c2504cacd4048914c:1](https://mempool.space/tx/2ecae24a049993142260861d32275d40461936679e9efa9c2504cacd4048914c) 5460 sats, block 338414 (hybrid pubkey is fake, ending in 112 bits of zeroes)\n * [d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d:9](https://mempool.space/tx/d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d) 1 sats, block 230622\n * [d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d:69](https://mempool.space/tx/d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d) 1 sats, block 230622\n * [d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d:57](https://mempool.space/tx/d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d) 1 sats, block 230622\n * [d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d:47](https://mempool.space/tx/d246f58b59be6595df03c404a6497177564c7b2bf5396596641e59d268b1b40d) 1 sats, block 230622\n\nI think there's five bare hybrid(looking) pubkey utxos:\n\n * [519c79dc444009744e5dec35817d0a7530ba3601aed58ac34837397134177db8:2](https://mempool.space/tx/519c79dc444009744e5dec35817d0a7530ba3601aed58ac34837397134177db8) 2817 sats, block 707034 (looks like a test transaction, with bare compressed and uncompressed variants of the same pubkey having been created and spent)\n * [657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1:34](https://mempool.space/tx/657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1) 1 sats, block 230217\n * [657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1:100](https://mempool.space/tx/657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1) 1 sats, block 230217\n * [657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1:158](https://mempool.space/tx/657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1) 1 sats, block 230217\n * [657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1:360](https://mempool.space/tx/657aecafe66d729d2e2f6f325fcc4acb8501d8f02512d1f5042a36dd1bbd21d1) 1 sats, block 230217\n\nObviously there could be zero to many hybrid pubkeys in either p2pkh or p2sh outputs as well.\n\nPython code:\n\n```python\ndef split_spk(spk):\n    ops = []\n    while len(spk) > 0:\n        if spk[0] <= 75 and len(spk) > spk[0]:\n            ops.append((spk[0], spk[1:spk[0]+1].hex()))\n            spk = spk[spk[0]+1:]\n        elif spk[0] >= 0x51 and spk[0] <= 0x60:\n            ops.append(spk[0] - 0x50)\n            spk = spk[1:]\n        else:\n            ops.append(\"OP_x%02X\" % (spk[0]))\n            spk = spk[1:]\n    return ops\n\ndef find_hybrid(sspk):\n    for a in sspk:\n        if isinstance(a, tuple):\n            l,x = a\n            if l == 65 and x[0] == '0' and x[1] in \"67\": return True\n    return False\n\nx = [a for a in [a.strip().split(\",\") for a in open(\"baremulti-923997.csv\", \"r\").readlines()]][1:] # if you unbz2'ed the datafile above\ny = [tuple(a + [split_spk(bytes.fromhex(a[6]))]) for a in x]\nz = [yy for yy in y if find_hybrid(yy[7])]\n```",
          "created_at": "2025-11-18T03:16:47Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 5169,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3548052465,
          "user": "roconnor-blockstream",
          "body": "> Solver() calls MatchMultisig() which invokes num_keys = GetScriptNuymber(opcode, data, required_sigs, MAX_PUBKEYS_PER_MULTISIG).\n\nThis checking m ≤ n behaviour in the Solver seems to have been added in #13194.  However this wouldn't count as soft-confiscations because multisigs with m > n are presumably unspendable anways.\n\n> What we support by consensus matches the (earlier) ANSI X9.62-1998 standard\n\nAh, I was not aware of this.\n\nI wouldn't object to dropping the hybrid key protections.  I probably wouldn't object even if I didn't know about ANSI X9.62-1998.",
          "created_at": "2025-11-18T15:08:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 567,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3550406321,
          "user": "ajtowns",
          "body": "> This checking m ≤ n behaviour in the Solver seems to have been added in [#13194](https://github.com/bitcoin/bitcoin/pull/13194). However this wouldn't count as soft-confiscations because multisigs with m > n are presumably unspendable anways.\n\nYeah, see https://github.com/bitcoin/bitcoin/blob/4405b78d6059e536c36974088a8ed4d9f0f29898/script.cpp#L745 from the start of git history.\n",
          "created_at": "2025-11-19T02:38:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 384,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3555753329,
          "user": "151henry151",
          "body": "P2SH allows non-solvable redeem scripts with low sigop counts (PR #4365), while legacy scripts still require solvability. This inconsistency is hard to justify, especially since both rely on sigop limits for security.\n\nAligning legacy script redemption with P2SH policy would remove the asymmetry and fix the Counterparty UTXOs without special-casing, while preserving security through existing sigop limits.\n\nIf hybrid key bans are reconsidered (as ajtowns suggested), that could simplify further, but fixing the policy asymmetry seems like the right first step.",
          "created_at": "2025-11-20T04:39:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 563,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559368666,
          "user": "roconnor-blockstream",
          "body": "I agree.  I think my next step would be to PR a change to `AreInputsStandard` to bring P2SH and legacy script policy into alignment.\n\nI'm not quite sure when I'll get to this, so if someone else wants to take a crack at it, I wouldn't be surprised if they can do it better / sooner than me.",
          "created_at": "2025-11-20T18:04:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 290,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3602342513,
          "user": "ajtowns",
          "body": "> P2SH allows non-solvable redeem scripts with low sigop counts (PR https://github.com/bitcoin/bitcoin/pull/4365), while legacy scripts still require solvability. This inconsistency is hard to justify, especially since both rely on sigop limits for security.\n\n> I agree. I think my next step would be to PR a change to `AreInputsStandard` to bring P2SH and legacy script policy into alignment.\n\nI think I disagree with this -- we allow spends of fairly arbitrary p2sh scripts, but limit legacy spends to only a few known templates. That's a good thing because it reserves a lot of space for upgrade hooks, which have been used for p2sh, segwit and taproot.\n\nI think maybe the issue is more that the way we check the templates is to use the Solver(), which is something we also use for the wallet; so when we attempt to clean up the wallet feature set to avoid doing stupid things that waste our users money in fees, that also impacts relay policy. Maybe we should separate out the \"can we parse this\" and \"is this stupid\" parts of Solver?",
          "created_at": "2025-12-02T14:29:44Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 1,
            "text_length": 1038,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602626488,
          "user": "roconnor-blockstream",
          "body": "> I think I disagree with this -- we allow spends of fairly arbitrary p2sh scripts, but limit legacy spends to only a few known templates. That's a good thing because it reserves a lot of space for upgrade hooks, which have been used for p2sh, segwit and taproot.\n\nOne thing I suggested to @151henry151 was to not only limit the number of checksig operations, as P2SH does, but to require at least one checksig operation.  Does that make you more comfortable?",
          "created_at": "2025-12-02T15:31:23Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 1,
            "text_length": 459,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3734042619,
          "user": "151henry151",
          "body": "If I'm not mistaken, my code in commit [1c67900568](https://github.com/151henry151/bitcoin/commit/1c67900568) does indeed limit the number of checksig operations to `MAX_P2SH_SIGOPS` (same limit as P2SH) and require at least one checksig operation. The implementation checks `if (sigop_count == 0 || sigop_count > MAX_P2SH_SIGOPS)` for non-P2SH legacy scripts (see [here](https://github.com/bitcoin/bitcoin/blob/1c67900568344aff642abd577722f9d3fc6c3e4a/src/policy/policy.cpp#L247) and [here](https://github.com/bitcoin/bitcoin/blob/1c67900568344aff642abd577722f9d3fc6c3e4a/src/policy/policy.cpp#L272)), ensuring scripts must have at least 1 sigop and at most 15 sigops, matching P2SH policy.",
          "created_at": "2026-01-11T05:31:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 691,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2286927464,
      "number": 30070,
      "title": "Load PSBT error: Unable to decode PSBT",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\n\"Load PSBT from ...\" from menu, error shows:\r\n`Unable to decode PSBT \r\nUnsigned tx does not have empty scriptSigs and scriptWitnesses.: unspecified iostream_category error`\r\n\r\ndecodepsbt and analyzepsbt show the same error too:\r\n`TX decode failed Unsigned tx does not have empty scriptSigs and scriptWitnesses.: unspecified iostream_category error (code -22)`\r\n\r\n### Expected behaviour\r\n\r\nI expect Load PSBT success.\r\n\r\nAnd same procedure works fine in another wallet of test net. Both wallets are not watch-only\r\n\r\n### Steps to reproduce\r\n\r\nI test PSBT in my wallet today, create a transaction in Bitcoin Core, click \"send\" and \"create unsigned\", then \"Load PSBT from ...\" from menu\r\n\r\nI'm using prune mode for block chain. This address I made tx was obtained by importprivkey, and then covert to Descriptor Wallets by migratewallet.\r\n\r\nI found the [source code](https://github.com/bitcoin/bitcoin/blob/master/src/psbt.h):\r\n\r\n>                  case PSBT_GLOBAL_UNSIGNED_TX:\r\n>                 {\r\n>                     if (!key_lookup.emplace(key).second) {\r\n>                         throw std::ios_base::failure(\"Duplicate Key, unsigned tx already provided\");\r\n>                     } else if (key.size() != 1) {\r\n>                         throw std::ios_base::failure(\"Global unsigned tx key is more than one byte type\");\r\n>                     }\r\n>                     CMutableTransaction mtx;\r\n>                     // Set the stream to serialize with non-witness since this should always be non-witness\r\n>                     UnserializeFromVector(s, TX_NO_WITNESS(mtx));\r\n>                     tx = std::move(mtx);\r\n>                     // Make sure that all scriptSigs and scriptWitnesses are empty\r\n>                     for (const CTxIn& txin : tx->vin) {\r\n>                         if (!txin.scriptSig.empty() || !txin.scriptWitness.IsNull()) {\r\n>      ---->                  throw std::ios_base::failure(\"Unsigned tx does not have empty scriptSigs and scriptWitnesses.\");\r\n>                         }\r\n>                     }\r\n>                     break;\r\n>                 }\r\n\r\n### Relevant log output\r\n\r\nno relevant log.\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nBitcoin Core version v27.0.0\r\n\r\n### Operating system and version\r\n\r\nMacOS 14.4.1\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "open",
      "user": "foolbear",
      "created_at": "2024-05-09T05:34:12Z",
      "updated_at": "2026-01-13T00:46:47Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/30070",
      "labels": [
        "Wallet",
        "PSBT"
      ],
      "comment_data": [
        {
          "id": 3533027320,
          "user": "vasild",
          "body": "I can reproduce this. A cursory debug shows that `txin.scriptWitness` IsNull but `txin.scriptSig` is not empty:\n\nhttps://github.com/bitcoin/bitcoin/blob/e221b2524659d22cc5a2b0d0023254115a7a5622/src/psbt.h#L1253-L1254\n\nA transaction created via the RPC does not exhibit this problem. Only when created from the GUI.",
          "created_at": "2025-11-14T14:20:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 314,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3534886629,
          "user": "151henry151",
          "body": "It looks to me like GUI’s “Create unsigned” path still signs the transaction, so legacy inputs end up with non-empty `scriptSig` and the PSBT parser rejects them. Perhaps we could call `CreateTransaction` with signing disabled or explicitly clear each `scriptSig`/`scriptWitness` before building the PSBT, or maybe it would be better to reuse the RPC PSBT builder so the GUI and RPC share the same logic.\n\nI haven't attempted to reproduce yet, just read through the issue and thinking about possible solutions.",
          "created_at": "2025-11-14T22:21:37Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 510,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3547036442,
          "user": "vasild",
          "body": "Indeed the GUI signs the transaction and the RPC does not. Here is the GUI code path:\n\n```\nSendCoinsDialog::sendButtonClicked()\n  SendCoinsDialog::PrepareSendText()\n    WalletModel::prepareTransaction() // result saved in SendCoinsDialog::m_current_transaction\n      WalletImpl::createTransaction(/*sign=*/!wallet().privateKeysDisabled()) // sign=true\n        CreateTransaction(sign=true)\n```\n\n`walletcreatefundedpsbt` RPC code path:\n```\nFundTransaction()\n  CreateTransaction(sign=false)\n```\n\nWhy is this a problem only when spending from P2SH addresses? `PartiallySignedTransaction::Serialize()` serializes the underlying transaction without a witness: `SerializeToVector(s, TX_NO_WITNESS(*tx));`, so it drops the `scriptWitness` from the inputs, but still includes `scriptSig`.\n\nHere is a q&d patch that fixes the problem by removing `scriptSig`s from the transaction when \"Create Unsigned\" is clicked in the GUI:\n\n```diff\ndiff --git i/src/qt/sendcoinsdialog.cpp w/src/qt/sendcoinsdialog.cpp\nindex 3962dd0887..2ce657df7c 100644\n--- i/src/qt/sendcoinsdialog.cpp\n+++ w/src/qt/sendcoinsdialog.cpp\n@@ -501,12 +501,15 @@ void SendCoinsDialog::sendButtonClicked([[maybe_unused]] bool checked)\n     }\n \n     bool send_failure = false;\n     if (retval == QMessageBox::Save) {\n         // \"Create Unsigned\" clicked\n         CMutableTransaction mtx = CMutableTransaction{*(m_current_transaction->getWtx())};\n+        for (CTxIn& txin : mtx.vin) {\n+            txin.scriptSig.clear();\n+        }\n         PartiallySignedTransaction psbtx(mtx);\n         bool complete = false;\n         // Fill without signing\n         const auto err{model->wallet().fillPSBT(std::nullopt, /*sign=*/false, /*bip32derivs=*/true, /*n_signed=*/nullptr, psbtx, complete)};\n         assert(!complete);\n         assert(!err);\n```\n\nProbably a better solution would be to change `PartiallySignedTransaction::Serialize()` to omit `scriptSig`s just like it omits `scriptWitness`es?\n\n@achow101, @ishaanam?",
          "created_at": "2025-11-18T11:16:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1967,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3549362236,
          "user": "achow101",
          "body": "I think it would be better to have the `prepareTransaction` have a `sign` parameter that is set if \"Create Unsigned\" is selected. Having PSBT silently drop `scriptSigs` (and `scriptWitness`es too) feels like there is the possibility for misuse/unexpected behavior. `PartiallySignedTransaction` probably needs some changes to more strongly enforce its invariants.",
          "created_at": "2025-11-18T20:01:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 362,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3551296046,
          "user": "vasild",
          "body": "`prepareTransaction()` is called before \"Create Unsigned\" is clicked. It seems a bit confusing, there are two \"Send\" buttons.\n\nThe user selects inputs, fills destination address and amount and clicks \"Send\". This is when `SendCoinsDialog::sendButtonClicked()` is called. Then it calls `SendCoinsDialog::PrepareSendText() -> WalletModel::prepareTransaction()`. At this point the transaction is created and signed. I think it must be in order to calculate the fee exactly? Then a dialog is presented \"Do you want to create this transaction?\" which shows the transaction fee and other details and has 3 buttons: \"Send\" (second send button), \"Create Unsigned\" and \"Cancel\".\n\nWhen \"Create Unsigned\" is called, then we create the PSBT from `m_current_transaction` (already signed) and do `fillPSBT()` and `presentPSBT()`.\n\nEdit: Why is the loading of PSBT upset if there are signatures? In other words, why `throw` here:\n\nhttps://github.com/bitcoin/bitcoin/blob/e221b2524659d22cc5a2b0d0023254115a7a5622/src/psbt.h#L1253-L1254\n\nit is \"partially _signed_ bitcoin transaction\" after all, no?",
          "created_at": "2025-11-19T07:57:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1082,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3554041212,
          "user": "achow101",
          "body": "We could instead defer signing of the transaction until after \"Send\" is clicked.\n\n> Edit: Why is the loading of PSBT upset if there are signatures? In other words, why `throw` here:\n\nA (v0) PSBT contains the entire unsigned transaction in its own field, with signatures and scripts placed in the PSBT fields. The transaction must be unsigned in order to make further signing and finalizing possible to reason about generically. Trying to make a PSBT from a transaction that already contained signatures and scripts is rather complicated since parsing out the signatures and scripts is fairly difficult, and impossible to do without knowing the UTXOs. We don't want to drop the scriptSigs or scriptWitnesses since that would be surprising to the user - they already signed but the signatures are lost. So instead we made it a clear error to the user by throwing. All of this was further complicated by the fact that the raw transaction workflow allows for incomplete scriptSigs and scriptWitnesses, and parsing those to figure what was actually signed is a nightmare.",
          "created_at": "2025-11-19T18:12:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1066,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3555230079,
          "user": "151henry151",
          "body": "I've started some work on this. I modified `WalletModel::prepareTransaction` in `src/qt/walletmodel.h` (line 99) and `src/qt/walletmodel.cpp` (line 150) to accept an optional `sign` parameter (defaults to `false`). In lines 206-208 of `walletmodel.cpp`, I changed the logic so it only signs when explicitly requested via this parameter, rather than always signing when private keys are available. Then in `src/qt/sendcoinsdialog.cpp`, I updated the call to `prepareTransaction` on line 293 to pass `sign=false`, and added a new `else` block starting at line 545 that signs the transaction when \"Send\" is clicked (for non-external signer wallets) by creating a PSBT, filling and signing it, then finalizing and extracting the signed transaction before broadcasting. This way, the transaction remains unsigned during preparation (allowing fee calculation and creating truly unsigned PSBTs), and is only signed when the user confirms they want to send.",
          "created_at": "2025-11-20T00:40:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 949,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3741255324,
          "user": "151henry151",
          "body": "@vasild @foolbear either of you want to take a look at [58adbcf](https://github.com/bitcoin-core/gui/pull/915/commits/58adbcf88a02f4f31c930865f83d4b7c0392c4eb) and see if you can verify whether the changes resolve the issue? ",
          "created_at": "2026-01-13T00:46:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 225,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2533,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3629232876,
      "number": 33879,
      "title": "Embedded ASMap data Tracking Issue (Part 2)",
      "body": "The predecessor tracking issue for this topic can be found here: #28794 This was closed since there seemed to be just one main PR left but I am reviving a topic issue for asmap because recently a few PRs have spun out of the main PR and related discussions. Aside from the somewhat tangential changes the main embedding PR is split into a series of three as of now.\n\n- [ ] Embedding implementation series\n  - [x] #33026 \n  - [ ] #33878 \n  - [ ] #28792\n- [ ] Embedding follow-ups\n  - [ ] #33920\n- [x] `-asmap` UX changes (https://github.com/bitcoin/bitcoin/issues/33386)\n  - [x] #33631 \n  - [x] #33632 (alternative approach to above which was abandoned) \n  - [x] #33770 \n\n",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-15T20:54:43Z",
      "updated_at": "2026-01-12T23:12:08Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33879",
      "labels": [
        "Tracking Issue"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 715,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2353376259,
      "number": 30289,
      "title": "Cluster mempool tracking issue",
      "body": "What to review next:\n\n* #34259 \n\n---\n\nPlan:\n* Lowest level: generic utilities:\n  * [x] [#29242 FeeFrac type](https://github.com/bitcoin/bitcoin/pull/29242)\n    * [x] [#30535 Add FeeFrac::EvaluateFee](https://github.com/bitcoin/bitcoin/pull/30535)\n      * [x] [#32240 Fix integer overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32240)\n      * [x] [#32300 Fix different overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32300)\n  * [x] [#30160 BitSet type](https://github.com/bitcoin/bitcoin/pull/30160)\n  * [x] [#30161 VecDeque type](https://github.com/bitcoin/bitcoin/pull/30161)\n* Low level: operations on `DepGraph` type (dependencies/linearizations for a single cluster)\n  * [x] [#30126 Base linearization algorithm](https://github.com/bitcoin/bitcoin/pull/30126)\n    * [x] [#30605 Split tests from tests-of-tests](https://github.com/bitcoin/bitcoin/pull/30605)\n    * [x] [#30857 Extend `DepGraph` functionality](https://github.com/bitcoin/bitcoin/pull/30857)\n  * [x] [#30285 Merging and postprocessing of linearizations](https://github.com/bitcoin/bitcoin/pull/30285)\n  * [x] [#30286 Optimized candidate search](https://github.com/bitcoin/bitcoin/pull/30286)\n  * [x] [#32545 Replace linearization with SFL](https://github.com/bitcoin/bitcoin/pull/32545)\n    * [ ] [#34259 SFL chunk minimization](https://github.com/bitcoin/bitcoin/pull/34259)\n  * [ ] [#34023 SFL optimizations](https://github.com/bitcoin/bitcoin/pull/34023)\n    * [ ] [#34138 SFL cost model](https://github.com/bitcoin/bitcoin/pull/34138)\n* Intermediate level: operations on `TxGraph` type (dependencies/linearizations for the entire mempool)\n  * [x] [#31363 TxGraph basics](https://github.com/bitcoin/bitcoin/pull/31363)\n    * [x] [#32151 TxGraph basics follow-up](https://github.com/bitcoin/bitcoin/pull/32151)\n    * [x] [#32177 TxGraph increase fuzz coverage](https://github.com/bitcoin/bitcoin/pull/32177)\n    * [x] [#32191 Make TxGraph fuzzing more deterministic](https://github.com/bitcoin/bitcoin/pull/32191)\n    * [x] [#33354 Use enum Level instead of bool main_only](https://github.com/bitcoin/bitcoin/pull/33354)\n    * [x] [#33862 Drop support for `TxGraph::Ref` move assignment](https://github.com/bitcoin/bitcoin/pull/33862)\n    * [ ] [#33335 Randomize order of transactions](https://github.com/bitcoin/bitcoin/pull/33335)\n    * [ ] [#34257 Deterministic order of transactions](https://github.com/bitcoin/bitcoin/pull/34257)\n  * [x] [#31444 TxGraph mining/eviction](https://github.com/bitcoin/bitcoin/pull/31444)\n    * [x] [#33469 Use `std::unordered_set` for skipped clusters](https://github.com/bitcoin/bitcoin/pull/33469)\n  * [x] [#31553 TxGraph reorgs](https://github.com/bitcoin/bitcoin/pull/31553)\n  * [x] [#32263 TxGraph work controls](https://github.com/bitcoin/bitcoin/pull/32263)\n  * [x] [#33157 TxGraph memory usage](https://github.com/bitcoin/bitcoin/pull/33157)\n  * [x] [#34085 TxGraph exploiting SFL better](https://github.com/bitcoin/bitcoin/pull/34085)\n* High level: changes to mempool/validation\n  * [x] [#31122 Changesets for mempool](https://github.com/bitcoin/bitcoin/pull/31122)\n  * [x] [#33629 Cluster mempool implementation](https://github.com/bitcoin/bitcoin/pull/33629)\n    * ~~[#28676 Old version](https://github.com/bitcoin/bitcoin/pull/28676)~~\n  * [x] [#33591 Cluster mempool optimizations and cleanups](https://github.com/bitcoin/bitcoin/pull/33591)\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2024-06-14T13:21:36Z",
      "updated_at": "2026-01-12T15:34:13Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/30289",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2539215701,
          "user": "sipa",
          "body": "@summraznboi We are thinking of a cluster size limit of 50 or 64, depending on benchmarks when the full code is done. The limit is set by how fast we can run the basic cluster linearization algorithm (ancestor sort, chunking, post-processing, ...) quickly enough to run it at transaction relay time (taking into account that a single transaction may affect many clusters).",
          "created_at": "2024-12-12T15:04:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 372,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3437,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3804550497,
      "number": 34263,
      "title": "rpc: Assertion '!pindex || pindex->GetBlockHash() == view->GetBestBlock()' failed during `gettxoutsetinfo`",
      "body": "The `CHECK_NONFATAL`  check [here](https://github.com/bitcoin/bitcoin/blob/abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0/src/rpc/blockchain.cpp#L976) may fail when `gettxoutsetinfo` is called.\n\n```\nrpc/blockchain.cpp:976 std::optional<kernel::CCoinsStats> GetUTXOStats(CCoinsView *, node::BlockManager &, kernel::CoinStatsHashType, const std::function<void ()> &, const CBlockIndex *, bool): Assertion `!pindex || pindex->GetBlockHash() == view->GetBestBlock()' failed.\n```\n\nI've not written a test for this, but looking at the code, it seems that there is a race where the coins view's best block gets updated in between [here](https://github.com/bitcoin/bitcoin/blob/abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0/src/rpc/blockchain.cpp#L1054C9-L1054C15) and [here](https://github.com/bitcoin/bitcoin/blob/abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0/src/rpc/blockchain.cpp#L976) (e.g. because a new block is connected), causing the check to fail (resulting in an assertion failure in debug builds).\n\nSee attached debug logs for an example.\n\n[gettxoutsetinfo_check_nonfatal.log](https://github.com/user-attachments/files/24566483/gettxoutsetinfo_check_nonfatal.log)\n\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-12T14:24:58Z",
      "updated_at": "2026-01-12T14:32:48Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34263",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1340,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3804432320,
      "number": 34262,
      "title": "rpc: Assertion 'block_template' failed in `getblocktemplate` (during shutdown or startup)",
      "body": "The `CHECK_NONFATAL`  check [here](https://github.com/bitcoin/bitcoin/blob/abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0/src/rpc/mining.cpp#L875) may fail when `getblocktemplate` is called during shutdown or during startup.\n\n```\nrpc/mining.cpp:875 auto getblocktemplate()::(anonymous class)::operator()(const RPCHelpMan &, const JSONRPCRequest &) const: Assertion `block_template' failed.\n```\n\nSee attached debug logs of two examples.\n\n[getblocktemplate_during_startup.log](https://github.com/user-attachments/files/24565879/getblocktemplate_during_startup.log)\n[getblocktemplate_during_shutdown.log](https://github.com/user-attachments/files/24565880/getblocktemplate_during_shutdown.log)\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-12T13:55:10Z",
      "updated_at": "2026-01-12T14:08:25Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34262",
      "labels": [
        "RPC/REST/ZMQ",
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 854,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3803935809,
      "number": 34261,
      "title": "Block filter index corruption post reorg and unclean shutdown",
      "body": "The block filter index may be left in a corrupted state, preventing the node from restarting (without reindexing), after a series of specific events:\n\n1. Clean shutdown\n2. Restart combined with an immediate reorg of the previously stored best chain tip\n3. Unclean shutdown after reorg takes place (before chainstate flush)\n4. Restart, leading to the following\n\n```\n[        62.579] [               node2] [inf] 2026-01-10T16:58:52Z [all:error] previous block header belongs to unexpected block 44ee2f358de32719802fe11d3985af7a0f9077b90ee5ca16c42f7278a8d89a50; expected 532c10b42179b4f3f5a41f9990108a63bcd7021dd02ba6997f5ff3375d297676\n[        62.579] [               node2] [inf] 2026-01-10T16:58:52Z [all:error] Cannot read last block filter header; index may be corrupted\n```\n\nSee attached debug log for an example of this happening.\n\n[blockfilter_corruption.log](https://github.com/user-attachments/files/24562825/blockfilter_corruption.log)\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-12T11:36:18Z",
      "updated_at": "2026-01-12T13:29:23Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34261",
      "labels": [
        "UTXO Db and Indexes",
        "Data corruption"
      ],
      "comment_data": [
        {
          "id": 3738560389,
          "user": "mzumsande",
          "body": "Looks very similar to https://github.com/bitcoin/bitcoin/issues/33208 / https://github.com/bitcoin/bitcoin/pull/33212#pullrequestreview-3140857089 . I did some work on a fix for that in fall (making sure that we never commit an index ahead of the flushed chainstate) but there were some complications with my approach and I never PR'ed it.",
          "created_at": "2026-01-12T13:29:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 339,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1086,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2782482606,
      "number": 31643,
      "title": "Cannot open assumeUTXO snapshot",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nUsing bitcoind 28.0 I wanted to setup a new full node and load the utxo snapshot from loop.net. I got the following error.\r\n\r\n\r\n\r\n```\r\n$ bitcoin-cli -rpcclienttimeout=0 loadtxoutset   utxo-snapshot-height-840000.dat \r\nRPC password> \r\nerror code: -8\r\nerror message:\r\nCouldn't open file /appdata/bitcoin-01/data/utxo-snapshot-height-840000.dat for reading.\r\n```\r\n\r\n\r\n\r\n\r\n\n\n### Expected behaviour\n\nShould load\n\n### Steps to reproduce\n\nThe file is `rw`. Maybe the download is corrupt, but I have no sha256sum to compare\r\n\r\n`dc4bb43d58d6a25e91eae93eb052d72e3318bd98ec62a5d0c11817cefbba177b  utxo-snapshot-height-840000.dat`\r\n\r\nOr there is something special with my config\r\n\r\n```\r\ndatadir=/appdata/bitcoin-01/data\r\npid=/appdata/bitcoin-01/run/bitcoind.pid\r\ndebuglogfile=/appdata/bitcoin-01/var/log/debug.log\r\ndaemon=1\r\n\r\n# Bitcoin daemon\r\nserver=1\r\ntxindex=1\r\nblockfilterindex=1\r\n\r\n# Network\r\nlisten=1\r\nlistenonion=1\r\nexternalip= someonion\r\n\r\n# Connections\r\nrpcauth=somecredentials \r\nrpcauth=somecredentials\r\nrpcauth=somecredentials\r\nrpcauth=somecredentials\r\nrpcauth=somecredentials\r\nzmqpubrawblock=tcp://0.0.0.0:28332\r\nzmqpubrawtx=tcp://0.0.0.0:28333\r\nwhitelist=download@127.0.0.1          # for Electrs\r\n\r\n# Initial block download optimizations\r\ndbcache=7500\r\nblocksonly=1\r\nmaxmempool=800\r\n\r\n#SPV\r\npeerbloomfilters=1\r\npeerblockfilters=1\r\n\r\n[main]\r\nrpcbind=192.168.2.160\r\nrpcbind=127.0.0.1\r\nrpcallowip=127.0.0.1\r\nrpcallowip=192.168.0.0/16\r\nproxy=127.0.0.1:9050\r\n#bind=127.0.0.1\r\nbind=0.0.0.0\r\n```\r\n\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv28.0.0\n\n### Operating system and version\n\nSMP PVE 5.15.116-1 ------> (debian on proxmox)\n\n### Machine specifications\n\nI increased the RAM to 12G, but it did not help",
      "state": "closed",
      "user": "feelancer21",
      "created_at": "2025-01-12T13:19:39Z",
      "updated_at": "2026-01-12T10:52:49Z",
      "closed_at": "2025-01-12T17:31:32Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31643",
      "labels": [],
      "comment_data": [
        {
          "id": 2585736963,
          "user": "sedited",
          "body": "It looks like the snapshot you are trying to load is not in the data directory. Either move it there, or provide the full path to the file in the command. If you just pass the file name, bitcoin will attempt to load it from its data directory (as indicated by the error message).",
          "created_at": "2025-01-12T13:32:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 279,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2585843653,
          "user": "feelancer21",
          "body": "Thank you.  I did not read the error message correctly. ",
          "created_at": "2025-01-12T17:31:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 56,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1947,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3800721826,
      "number": 34251,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "TraceScamCEO",
      "created_at": "2026-01-11T04:30:22Z",
      "updated_at": "2026-01-11T05:23:14Z",
      "closed_at": "2026-01-11T05:23:13Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34251",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3781160859,
      "number": 34202,
      "title": "Minor Release 30.2",
      "body": "Milestone: https://github.com/bitcoin/bitcoin/milestone/81\n\nBackports and other changes:\n- #34192\n\nRC 1\n- [x] final changes: #34209\n- [x] tag: https://github.com/bitcoin/bitcoin/releases/tag/v30.2rc1\n- [x] upload binaries: https://bitcoincore.org/bin/bitcoin-core-30.2/test.rc1/\n- [x] announcements: https://groups.google.com/g/bitcoindev/c/xv7-TC_oIbc\n\nFinal\n- [x] final changes: #34229\n- [x] tag: https://github.com/bitcoin/bitcoin/releases/tag/v30.2\n- [x] upload binaries: https://bitcoincore.org/bin/bitcoin-core-30.2/\n- [x] announcements: \n\nSee [release process docs](https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md) for more details. This issue can be used to track status updates.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-05T11:29:46Z",
      "updated_at": "2026-01-10T16:37:14Z",
      "closed_at": "2026-01-10T16:37:14Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34202",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3730342699,
          "user": "twofaktor",
          "body": "Link to v30.1:\n\n<img width=\"402\" height=\"81\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/663bc363-26ae-43a4-9084-327e86073f69\" />\n\nIs broken:\n\n<img width=\"1169\" height=\"193\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ee93e4a8-ad15-40d0-a739-724b81190764\" />\n\n<img width=\"516\" height=\"58\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/628365f1-8691-42b3-887a-43aa7d5808e2\" />",
          "created_at": "2026-01-09T19:46:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 421,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3730352849,
          "user": "sipa",
          "body": "@twofaktor https://bitcoincore.org/en/2026/01/05/wallet-migration-bug/",
          "created_at": "2026-01-09T19:48:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 70,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3730370322,
          "user": "twofaktor",
          "body": "> [@twofaktor](https://github.com/twofaktor) https://bitcoincore.org/en/2026/01/05/wallet-migration-bug/\n\nok, then the latest downloadable version is 29.2, until the release of version 30.2, right?",
          "created_at": "2026-01-09T19:53:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 197,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3733142804,
          "user": "fanquake",
          "body": "@twofaktor Binaries for v30.2 are now available: https://bitcoincore.org/bin/bitcoin-core-30.2/. The bitcoincore.org website will be update to reflect this shortly.",
          "created_at": "2026-01-10T16:17:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 164,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3733186030,
          "user": "fanquake",
          "body": "Website has been updated & annoucements sent.",
          "created_at": "2026-01-10T16:37:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 45,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 728,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3799701007,
      "number": 34248,
      "title": "qa: `tool_bench_sanity_check.py --bench=MempoolCheck` failure",
      "body": "On NetBSD 10.1, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20872235098/job/59975888965:\n```\n90/455 - tool_bench_sanity_check.py --bench=MempoolCheck failed, Duration: 26 s\n\nstdout:\n2026-01-10T04:19:37.691064Z TestFramework (INFO): PRNG seed is: 4615966168349338210\n2026-01-10T04:19:37.692250Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260110_041921/tool_bench_sanity_check_363\n2026-01-10T04:19:37.692513Z TestFramework (INFO): Starting: /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/bin/bench_bitcoin -filter=MempoolCheck -sanity-check\nRunning with -sanity-check option, output is being suppressed as benchmark results will be useless.\n2026-01-10T04:19:38.567933Z TestFramework (INFO): Success!\n2026-01-10T04:20:03.637759Z TestFramework.utils (ERROR): wait_until() failed. Predicate: ''''\n        wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n'''\n\n\nstderr:\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/tool_bench_sanity_check.py\", line 41, in <module>\n    BenchSanityCheck(__file__).main()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 154, in main\n    exit_code = self.shutdown()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 281, in shutdown\n    self.network_thread.close()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/p2p.py\", line 749, in close\n    wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/util.py\", line 420, in wait_until_helper_internal\n    raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\nAssertionError: Predicate ''''\n        wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n''' not true after 10.0 seconds\n\n\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-10T13:16:07Z",
      "updated_at": "2026-01-10T15:29:28Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34248",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3733036452,
          "user": "maflcko",
          "body": "Not sure how this could happen. After https://github.com/bitcoin/bitcoin/commit/39ca01525977e5aab078198874f6bf035b552b3b , the test waits for the loop to be running, so a stop should always be called on a running loop and  result in it eventually not running.",
          "created_at": "2026-01-10T15:29:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 259,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2459,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2627141112,
      "number": 31194,
      "title": "Remove libevent as a dependency (HTTP / cli / torcontrol)",
      "body": "Next PRs for review:\n\n- [x] https://github.com/bitcoin/bitcoin/pull/32408\n- [x] https://github.com/bitcoin/bitcoin/pull/32862\n- [x] https://github.com/bitcoin/bitcoin/pull/32747\n- [ ] https://github.com/bitcoin/bitcoin/pull/34242\n- [ ] https://github.com/bitcoin/bitcoin/pull/32061\n- [ ] https://github.com/bitcoin/bitcoin/pull/34158\n\n\n\n## Immediate advantages\n### UNIX domain sockets for JSON-RPC\n- Old feature request: https://github.com/bitcoin/bitcoin/issues/5029\n- UNIX sockets have been added to [ZMQ](https://github.com/bitcoin/bitcoin/pull/27679) and [Tor proxy](https://github.com/bitcoin/bitcoin/pull/27375) already \n- UNIX sockets with libevent [doesn't work](https://github.com/bitcoin/bitcoin/issues/5029#issuecomment-2203469108)\n### Remove a dependency\n- libevent hasn't had a release since 2020\n- [libevent is currently looking for new maintainers](github.com/libevent/libevent/issues/1812), a bit of a red flag\n- The [xz utils backdoor](https://en.wikipedia.org/wiki/XZ_Utils_backdoor) raised some concern among contributors in the [2024/04/18 IRC meeting](https://www.erisian.com.au/bitcoin-core-dev/log-2024-04-18.html#l-198)\n\n## Current libevent usage in the project\nSee [this report](https://gist.github.com/fjahr/c0c339a4b5021ae815d5bcff42e9fc57) by @fjahr. A few of these have already been addressed, like https://github.com/bitcoin/bitcoin/pull/29904\n",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2024-10-31T15:25:23Z",
      "updated_at": "2026-01-09T18:12:32Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/31194",
      "labels": [
        "RPC/REST/ZMQ",
        "P2P"
      ],
      "comment_data": [
        {
          "id": 2561531373,
          "user": "JeremyRubin",
          "body": "approach ack on removing libevent and having it operate over unix socket -- http functionality / REST can be provided via a proxy server.",
          "created_at": "2024-12-25T01:34:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 137,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2584010160,
          "user": "pinheadmz",
          "body": "I found another edge case in libevent regarding URI handling, it does not decode `%XX` characters before parsing.\r\n\r\nThis is in libevent's `evhttp_uri_parse()` which is called by Bitcoin's `GetQueryParameterFromUri()`\r\n\r\nExample, the URI:\r\n`/rest/endpoint/someresource.json%3Fp1%3Dv1%26p2%3D100%25`\r\n decodes to `/rest/endpoint/someresource.json?p1=v1&p2=100%`\r\n\r\nIt will be interpreted by libevent (and therefore bitcoin core, currently) as one long path with no query parameters. \r\n\r\nBoth Python's `urlparse()` and JavaScript's `decodeURIComponent()` will decode the `%XX` characters before parsing and identify the query, with two parameters, as separate from the path",
          "created_at": "2025-01-10T20:24:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 671,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2585885945,
          "user": "pablomartin4btc",
          "body": "I've checked that and I see where the problem is...\r\n\r\nIf you run the following it works correctly (using/ changing `src/test/httpserver_tests.cpp`):\r\n\r\n```\r\n    uri = \"/rest/endpoint/someresource.json?p1=v1%20&p1=v2\";\r\n    BOOST_CHECK_EQUAL(GetQueryParameterFromUri(uri.c_str(), \"p1\").value(), \"v1 \");\r\n```\r\n```\r\n./build/src/test/test_bitcoin --log_level=all --run_test=httpserver_tests\r\n...\r\n./test/httpserver_tests.cpp(52): info: check GetQueryParameterFromUri(uri.c_str(), \"p1\").value() == \"v1 \" has passed\r\n...\r\n```\r\n\r\nSo `evhttp_uri_parse()` works as expected(?) as soon the \"encoded\" char is in the variable's value (e.g. the following won't work: \"/rest/endpoint/someresource.json%3Fp1=v1%20&p1=v2\").\r\n\r\nFor the case where the \"encoded\" chars are among the path, we'd need to run the `evhttp_uridecode()`:\r\n\r\n```\r\n    uri = \"/rest/endpoint/someresource.json%3Fp1%3Dv1%26p2%3D100%2525\";\r\n    char *decoded_path = evhttp_uridecode(uri.c_str(), 0, NULL); // Use c_str() here\r\n    BOOST_REQUIRE(decoded_path != nullptr); // Ensure decoding succeeded\r\n\r\n    std::cout << \"Decoded path: \" << decoded_path << std::endl;\r\n\r\n    // Test query parameter extraction\r\n    BOOST_CHECK_EQUAL(GetQueryParameterFromUri(decoded_path, \"p2\").value(), \"100%\");\r\n\r\n    free(decoded_path); // Don't forget to free the decoded string\r\n```\r\n\r\nBut as you can see the \"encoded\" path should be  \"`/rest/endpoint/someresource.json%3Fp1%3Dv1%26p2%3D100%2525`\" otherwise the libevent parse will fail because as in your example the \"`/rest/endpoint/someresource.json?p1=v1&p2=100%`\" is invalid ([RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986#section-2.1):A % character must always be followed by two valid hexadecimal digits (0–9, A–F, a–f) that represent a byte value in hexadecimal notation). `evhttp_uridecode()` doesn't check if the encoded char is within the path or in the variable's value so perhaps we need to handle this special use case somehow.\r\n",
          "created_at": "2025-01-12T19:20:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1944,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2587470767,
          "user": "pablomartin4btc",
          "body": "btw ACK on dependencies removal.",
          "created_at": "2025-01-13T15:42:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 32,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2587939419,
          "user": "pinheadmz",
          "body": "@pablomartin4btc thanks, I added this test to my branch:\r\n\r\n```cpp\r\n\r\n    // Multiple parameters, some characters encoded\r\n    uri = \"/rest/endpoint/someresource.json?p1=v1%20&p2=100%25\";\r\n    BOOST_CHECK_EQUAL(GetQueryParameterFromUri(uri.c_str(), \"p1\").value(), \"v1 \");\r\n    BOOST_CHECK_EQUAL(GetQueryParameterFromUri(uri.c_str(), \"p2\").value(), \"100%\");\r\n```\r\n\r\nYou're totally right, libevent decodes `%XX` but only after it has parsed the URI. Meaning the special characters `?` `&` and `=` (probably also `#`) can't be encoded the way we're currently using libevent.",
          "created_at": "2025-01-13T18:50:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 571,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3694010096,
          "user": "fjahr",
          "body": "Can add [#34158](https://github.com/bitcoin/bitcoin/pull/34158) to the list :)",
          "created_at": "2025-12-27T14:25:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 78,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3694013583,
          "user": "pinheadmz",
          "body": "> Can add [#34158](https://github.com/bitcoin/bitcoin/pull/34158) to the list :)\n\nadded! awesome! will review.",
          "created_at": "2025-12-27T14:32:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 110,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1432,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3784743931,
      "number": 34206,
      "title": "wallet: Assertion `!wtx.truc_child_in_mempool.has_value()' failed",
      "body": "The following `Assume` in the wallet will fail (triggered through rpc) under certain reorg conditions:\nhttps://github.com/bitcoin/bitcoin/blob/114901c0655d1dea3024a1daa362716c948bbde3/src/wallet/spend.cpp#L413\n\n\n<details>\n\n<summary>Vibe coded functional test patch to demonstrate (`-DABORT_ON_FAILED_ASSUME` is required):</summary>\n\n\n```patch\nFrom 54aea28e6439be5645267f0344a6337d9798ba14 Mon Sep 17 00:00:00 2001\nFrom: dergoegge <n.goeggi@gmail.com>\nDate: Tue, 6 Jan 2026 10:49:02 +0000\nSubject: [PATCH] truc wallet reorg bug\n\n---\n test/functional/mempool_truc.py | 163 +++++++++++++++++++++++++-------\n 1 file changed, 127 insertions(+), 36 deletions(-)\n\ndiff --git a/test/functional/mempool_truc.py b/test/functional/mempool_truc.py\nindex 2586308e4d..a155d57b68 100755\n--- a/test/functional/mempool_truc.py\n+++ b/test/functional/mempool_truc.py\n@@ -47,6 +47,36 @@ class MempoolTRUC(BitcoinTestFramework):\n         self.extra_args = [[]]\n         self.setup_clean_chain = True\n\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def create_tx(self, wallet, inputs, outputs, version, prevtxs=None):\n+        \"\"\"Create a signed transaction using the real wallet.\n+\n+        Args:\n+            wallet: The wallet RPC to use\n+            inputs: List of inputs (empty to let fundrawtransaction pick)\n+            outputs: Dict of address -> amount\n+            version: Transaction version\n+            prevtxs: Optional list of previous transaction info for signing\n+                     unbroadcast transactions. Each entry should have:\n+                     {\"txid\": ..., \"vout\": ..., \"scriptPubKey\": ..., \"amount\": ...}\n+        \"\"\"\n+        raw_tx = wallet.createrawtransaction(inputs=inputs, outputs=outputs, version=version)\n+        if inputs == []:\n+            raw_tx = wallet.fundrawtransaction(raw_tx, {'include_unsafe': True})[\"hex\"]\n+        if prevtxs:\n+            signed_tx = wallet.signrawtransactionwithwallet(raw_tx, prevtxs)\n+        else:\n+            signed_tx = wallet.signrawtransactionwithwallet(raw_tx)\n+        return signed_tx[\"hex\"]\n+\n+    def send_tx(self, wallet, inputs, outputs, version, prevtxs=None):\n+        \"\"\"Create and broadcast a transaction using the real wallet.\"\"\"\n+        tx_hex = self.create_tx(wallet, inputs, outputs, version, prevtxs)\n+        txid = wallet.sendrawtransaction(tx_hex)\n+        return txid\n+\n     def check_mempool(self, txids):\n         \"\"\"Assert exact contents of the node's mempool (by txid).\"\"\"\n         mempool_contents = self.nodes[0].getrawmempool()\n@@ -173,41 +203,102 @@ class MempoolTRUC(BitcoinTestFramework):\n     @cleanup()\n     def test_truc_reorg(self):\n         node = self.nodes[0]\n+        self.log.info(\"Test TRUC transactions survive reorg correctly\")\n+\n+        # Create a wallet for this test\n+        node.createwallet(\"truc_reorg_wallet\")\n+        wallet = node.get_wallet_rpc(\"truc_reorg_wallet\")\n+\n+        # Fund the wallet\n+        funding_addr = wallet.getnewaddress()\n+        self.generatetoaddress(node, 1, funding_addr)\n+        self.generate(node, 100)  # Mature the coinbase\n\n         # Prep for fork\n         fork_blocks = create_empty_fork(node)\n-        self.log.info(\"Test that, during a reorg, TRUC rules are not enforced\")\n         self.check_mempool([])\n\n-        # Testing 2<-3 versions allowed\n-        tx_v2_block = self.wallet.create_self_transfer(version=2)\n+        # tx_chain_1: v2 transaction with 2 outputs\n+        addr1 = wallet.getnewaddress()\n+        addr2 = wallet.getnewaddress()\n+        tx_chain_1_hex = self.create_tx(wallet, [], {addr1: 10, addr2: 10}, version=2)\n+        tx_chain_1_decoded = node.decoderawtransaction(tx_chain_1_hex)\n+        tx_chain_1_txid = tx_chain_1_decoded[\"txid\"]\n+\n+        # Find which vout corresponds to which address and get scriptPubKey info\n+        vout_for_addr1 = None\n+        vout_for_addr2 = None\n+        scriptpubkey_addr1 = None\n+        scriptpubkey_addr2 = None\n+        for vout in tx_chain_1_decoded[\"vout\"]:\n+            if vout[\"scriptPubKey\"].get(\"address\") == addr1:\n+                vout_for_addr1 = vout[\"n\"]\n+                scriptpubkey_addr1 = vout[\"scriptPubKey\"][\"hex\"]\n+            elif vout[\"scriptPubKey\"].get(\"address\") == addr2:\n+                vout_for_addr2 = vout[\"n\"]\n+                scriptpubkey_addr2 = vout[\"scriptPubKey\"][\"hex\"]\n+\n+        # tx_chain_2: v3 transaction spending first output of tx_chain_1\n+        addr3 = wallet.getnewaddress()\n+        prevtxs_chain_2 = [{\n+            \"txid\": tx_chain_1_txid,\n+            \"vout\": vout_for_addr1,\n+            \"scriptPubKey\": scriptpubkey_addr1,\n+            \"amount\": Decimal(\"10\")\n+        }]\n+        tx_chain_2_hex = self.create_tx(\n+            wallet,\n+            [{\"txid\": tx_chain_1_txid, \"vout\": vout_for_addr1}],\n+            {addr3: Decimal(\"9.99999\")},\n+            version=3,\n+            prevtxs=prevtxs_chain_2\n+        )\n+        tx_chain_2_decoded = node.decoderawtransaction(tx_chain_2_hex)\n+        tx_chain_2_txid = tx_chain_2_decoded[\"txid\"]\n+\n+        # Get scriptPubKey for tx_chain_2 output\n+        scriptpubkey_addr3 = tx_chain_2_decoded[\"vout\"][0][\"scriptPubKey\"][\"hex\"]\n+\n+        # tx_chain_3: v3 transaction spending output of tx_chain_2\n+        addr4 = wallet.getnewaddress()\n+        prevtxs_chain_3 = [{\n+            \"txid\": tx_chain_2_txid,\n+            \"vout\": 0,\n+            \"scriptPubKey\": scriptpubkey_addr3,\n+            \"amount\": Decimal(\"9.99999\")\n+        }]\n+        tx_chain_3_hex = self.create_tx(\n+            wallet,\n+            [{\"txid\": tx_chain_2_txid, \"vout\": 0}],\n+            {addr4: Decimal(\"9.99998\")},\n+            version=3,\n+            prevtxs=prevtxs_chain_3\n+        )\n+        tx_chain_3_decoded = node.decoderawtransaction(tx_chain_3_hex)\n+        tx_chain_3_txid = tx_chain_3_decoded[\"txid\"]\n\n-        # Testing 3<-2 versions allowed\n-        tx_v3_block = self.wallet.create_self_transfer(version=3)\n+        tx_to_mine = [tx_chain_1_hex, tx_chain_2_hex, tx_chain_3_hex]\n+        self.generateblock(node, output=\"raw(42)\", transactions=tx_to_mine)\n\n-        # Testing overly-large child size\n-        tx_v3_block2 = self.wallet.create_self_transfer(version=3)\n+        self.check_mempool([])\n\n-        # Also create a linear chain of 3 TRUC transactions that will be directly mined, followed by one v2 in-mempool after block is made\n-        tx_chain_1 = self.wallet.create_self_transfer(version=3)\n-        tx_chain_2 = self.wallet.create_self_transfer(utxo_to_spend=tx_chain_1[\"new_utxo\"], version=3)\n-        tx_chain_3 = self.wallet.create_self_transfer(utxo_to_spend=tx_chain_2[\"new_utxo\"], version=3)\n+        self.trigger_reorg(fork_blocks)\n\n-        tx_to_mine = [tx_v3_block[\"hex\"], tx_v2_block[\"hex\"], tx_v3_block2[\"hex\"], tx_chain_1[\"hex\"], tx_chain_2[\"hex\"], tx_chain_3[\"hex\"]]\n-        self.generateblock(node, output=\"raw(42)\", transactions=tx_to_mine)\n+        self.check_mempool([tx_chain_1_txid, tx_chain_2_txid, tx_chain_3_txid])\n\n-        self.check_mempool([])\n+        # tx_chain_4: v2 transaction funded by the wallet (spending unconfirmed outputs from tx_chain_1)\n+        addr5 = wallet.getnewaddress()\n+        self.log.info(\"Creating tx_chain_4 spending from unconfirmed tx_chain_1\")\n+        tx_chain_4_txid = self.send_tx(\n+            wallet,\n+            [],  # Let fundrawtransaction pick inputs\n+            {addr5: Decimal(\"9.99\")},\n+            version=2\n+        )\n\n-        tx_v2_from_v3 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v3_block[\"new_utxo\"], version=2)\n-        tx_v3_from_v2 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v2_block[\"new_utxo\"], version=3)\n-        tx_v3_child_large = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_v3_block2[\"new_utxo\"], target_vsize=1250, version=3)\n-        assert_greater_than(node.getmempoolentry(tx_v3_child_large[\"txid\"])[\"vsize\"], TRUC_CHILD_MAX_VSIZE)\n-        tx_chain_4 = self.wallet.send_self_transfer(from_node=node, utxo_to_spend=tx_chain_3[\"new_utxo\"], version=2)\n-        self.check_mempool([tx_v2_from_v3[\"txid\"], tx_v3_from_v2[\"txid\"], tx_v3_child_large[\"txid\"], tx_chain_4[\"txid\"]])\n+        self.check_mempool([tx_chain_1_txid, tx_chain_2_txid, tx_chain_3_txid, tx_chain_4_txid])\n\n-        # Reorg should have all block transactions re-accepted, ignoring TRUC enforcement\n-        self.trigger_reorg(fork_blocks)\n-        self.check_mempool([tx_v3_block[\"txid\"], tx_v2_block[\"txid\"], tx_v3_block2[\"txid\"], tx_v2_from_v3[\"txid\"], tx_v3_from_v2[\"txid\"], tx_v3_child_large[\"txid\"], tx_chain_1[\"txid\"], tx_chain_2[\"txid\"], tx_chain_3[\"txid\"], tx_chain_4[\"txid\"]])\n+        wallet.unloadwallet()\n\n     @cleanup(extra_args=[\"-limitclustercount=1\"])\n     def test_nondefault_package_limits(self):\n@@ -658,20 +749,20 @@ class MempoolTRUC(BitcoinTestFramework):\n         node = self.nodes[0]\n         self.wallet = MiniWallet(node)\n         self.generate(self.wallet, 200)\n-        self.test_truc_max_vsize()\n-        self.test_truc_acceptance()\n-        self.test_truc_replacement()\n+        #self.test_truc_max_vsize()\n+        #self.test_truc_acceptance()\n+        #self.test_truc_replacement()\n         self.test_truc_reorg()\n-        self.test_nondefault_package_limits()\n-        self.test_truc_ancestors_package()\n-        self.test_truc_ancestors_package_and_mempool()\n-        self.test_sibling_eviction_package()\n-        self.test_truc_package_inheritance()\n-        self.test_truc_in_testmempoolaccept()\n-        self.test_reorg_2child_rbf()\n-        self.test_truc_sibling_eviction()\n-        self.test_reorg_sibling_eviction_1p2c()\n-        self.test_minrelay_in_package_combos()\n+        #self.test_nondefault_package_limits()\n+        #self.test_truc_ancestors_package()\n+        #self.test_truc_ancestors_package_and_mempool()\n+        #self.test_sibling_eviction_package()\n+        #self.test_truc_package_inheritance()\n+        #self.test_truc_in_testmempoolaccept()\n+        #self.test_reorg_2child_rbf()\n+        #self.test_truc_sibling_eviction()\n+        #self.test_reorg_sibling_eviction_1p2c()\n+        #self.test_minrelay_in_package_combos()\n\n\n if __name__ == \"__main__\":\n--\n2.50.1\n```\n\n</details>\n\nAssertion was added in #32896\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-06T11:02:14Z",
      "updated_at": "2026-01-09T13:45:08Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34206",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3714311520,
          "user": "fanquake",
          "body": "cc @glozow @instagibbs ",
          "created_at": "2026-01-06T11:13:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 23,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3714854363,
          "user": "instagibbs",
          "body": "I'm less familiar with the wallet code these days, but I think an ok response may be to consider the coin not available in this case?",
          "created_at": "2026-01-06T14:13:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 133,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3714858234,
          "user": "ismaelsadeeq",
          "body": "I think I understand the issue. The `Assume` is what's wrong there, and it should be deleted. \n\nA simpler case  could also trigger this:\nBlock 100 - has tx A (non-TRUC)\nBlock 101 - has tx B spending A (TRUC)\nA reorg happens with a new chain at blocks 100, 101, and 102, where in the alternate chain both tx A and tx B are not mined, so they end up in the mempool.\nWhen you try to spend an output of A, we assume that A has no TRUC children. That's correct if a reorg did not happen, but when a reorg happens, that's an incorrect assumption.\nThe correct fix here is to just get rid of the assumption",
          "created_at": "2026-01-06T14:15:01Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 598,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3720255573,
          "user": "glozow",
          "body": ">  The correct fix here is to just get rid of the assumption\n\nAgree removing the assumption seems fine. It's only there to catch simple cases of tracking a child incorrectly; what we really care about is if the wallet incorrectly allows you to spend coins you shouldn't.\n\n> I think an ok response may be to consider the coin not available in this case?\n\nI can't think of a case where something would go wrong, but probably safer to do this?",
          "created_at": "2026-01-07T18:46:08Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 440,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3728972777,
          "user": "instagibbs",
          "body": "I think I changed my mind, we should just ignore it, otherwise on reorg users may get \"stuck\" and being able to CPFP with other utxos will help resolve it cleanly. Opened #34238",
          "created_at": "2026-01-09T13:45:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 177,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 10405,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3796644705,
      "number": 34237,
      "title": "ci: IWYU job giving incorrect suggestions",
      "body": "As pointed out here: https://github.com/bitcoin/bitcoin/pull/33810#discussion_r2672640164:\n> +#include <assert.h>\n\nSuggesting `<assert.h>` is incorrect, and if the dev applied that diff, `clang-tidy` will fail with `modernize-deprecated-headers`.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-09T11:45:31Z",
      "updated_at": "2026-01-09T11:45:38Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34237",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3728577621,
          "user": "fanquake",
          "body": "cc @hebasto ",
          "created_at": "2026-01-09T11:45:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 12,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 288,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3793330317,
      "number": 34234,
      "title": "wallet: `MiniMiner` assertion failures when `prioritisetransaction` creates negative fees",
      "body": "*I hit these assertions in a test running on [Antithesis](https://antithesis.com/).*\n\nVibe coded functional tests to demonstrate: https://github.com/dergoegge/bitcoin/commit/1ccc289193f79b26c66bb958b459ed6e47ca425f.\n\n```\nnode0 stderr node/mini_miner.cpp:213 void node::MiniMiner::DeleteAncestorPackage(const std::set<MockEntryMap::iterator, IteratorComparator> &): Assertion `descendant->second.GetModFeesWithAncestors() >= anc->second.GetModifiedFee()' failed.\nnode0 stderr node/mini_miner.cpp:240 void node::MiniMiner::SanityCheck() const: Assertion `std::all_of(m_entries.begin(), m_entries.end(), [](const auto& entry) { return entry->second.GetSizeWithAncestors() >= entry->second.GetTxSize() && entry->second.GetModFeesWithAncestors() >= entry->second.GetModifiedFee();})' failed.\n```\n\n<details>\n\n<summary>Here's an LLM's explanation for the bug:</summary>\n\n## Root Cause\n\nMiniMiner assumes transaction fees are always non-negative. When `prioritisetransaction` is used to apply large negative fee deltas, this assumption is violated, causing assertion failures.\n\nThe mempool correctly tracks negative modified fees, but MiniMiner's internal invariants break down when ancestor fee sums become negative.\n\n## Symptoms\n\n### 1. SanityCheck Assertion (mini_miner.cpp)\n\n```cpp\nAssert(entry->second.GetModFeesWithAncestors() >= entry->second.GetModifiedFee());\n```\n\n**Triggered when:** An ancestor has a very negative fee that drags the descendant's `ancestor_fees` below its own positive `own_fee`.\n\n**Example:**\n- Parent: fee = -2 BTC (via prioritisetransaction)\n- Child: fee = +141 sats\n- Child's ancestor_fees = -2 BTC + 141 sats ≈ -2 BTC\n- Assertion: -2 BTC >= +141 sats → **FALSE**\n\n### 2. DeleteAncestorPackage Assertion (mini_miner.cpp)\n\n```cpp\nAssert(descendant->second.GetModFeesWithAncestors() >= anc->second.GetModifiedFee());\n```\n\n**Triggered when:** A child has a negative fee such that its `ancestor_fees` is less than its parent's positive fee, while still satisfying SanityCheck.\n\n**Example:**\n- Parent: fee = +1410 sats\n- Child: fee = -705 sats (via prioritisetransaction)\n- Child's ancestor_fees = 1410 + (-705) = +705 sats\n- SanityCheck: 705 >= -705 → **TRUE** (passes)\n- DeleteAncestorPackage: 705 >= 1410 → **FALSE**\n\n## Reproduction\n\nFunctional tests: `test/functional/wallet_miniminer_sanitycheck.py` and `test/functional/wallet_miniminer_deleteancestorpackage.py`\n\nBoth tests:\n1. Create a parent-child transaction chain in the mempool\n2. Use `prioritisetransaction` to make fees negative\n3. Trigger MiniMiner via wallet `sendtoaddress` (which calculates bump fees)\n4. Node crashes on assertion failure\n\n</details>\n\n\n\n\n",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2026-01-08T15:23:53Z",
      "updated_at": "2026-01-09T11:24:07Z",
      "closed_at": "2026-01-09T11:24:07Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34234",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3724400016,
          "user": "instagibbs",
          "body": "Think the bug can be hit since the introduction of this code at 59afcc83548ea67a863dac7b75d000bc8f6a7023 ?\n\n",
          "created_at": "2026-01-08T15:30:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 108,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3724408627,
          "user": "fanquake",
          "body": "cc @glozow @murchandamus ",
          "created_at": "2026-01-08T15:32:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 25,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3724487425,
          "user": "glozow",
          "body": "Asserting `descendant->second.GetModFeesWithAncestors() >= anc->second.GetModifiedFee()` doesn't make sense to me; we shouldn't be doing that. I'll open a PR.\n\nAlso should we should rewrite this to use txgraph.",
          "created_at": "2026-01-08T15:49:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 210,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3724525761,
          "user": "glozow",
          "body": "See #34235",
          "created_at": "2026-01-08T15:59:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 10,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2733,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3788772806,
      "number": 34220,
      "title": "Guix builds fail after 2026",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhile doing a mingw guix build on a clean image, `osslsigncode` fails to build with error\n```\n\\note: keeping build directory `/tmp/guix-build-osslsigncode-2.5.drv-0'\nbuilder for `/gnu/store/7sm633fs4y8n6cgd9lnqkc19ccrbkxr4-osslsigncode-2.5.drv' failed with exit code 1\nbuild of /gnu/store/7sm633fs4y8n6cgd9lnqkc19ccrbkxr4-osslsigncode-2.5.drv failed\nView build log at '/var/log/guix/drvs/7s/m633fs4y8n6cgd9lnqkc19ccrbkxr4-osslsigncode-2.5.drv.gz'.\nnote: keeping build directory `/tmp/guix-build-gcc-13.3.0.tar.xz.drv-0'\nnote: keeping build directory `/tmp/guix-build-binutils-2.38.tar.xz.drv-0'\nguix shell: error: build of `/gnu/store/7sm633fs4y8n6cgd9lnqkc19ccrbkxr4-osslsigncode-2.5.drv' failed\n```\n\nLooking at the logs, you can see that the error is produced by a failed test due to expired cert\n```\nError: Expired CA certificate:\n\tSigner #0:\n\t\tSubject: /C=PL/O=osslsigncode/OU=Certification Authority/CN=Intermediate CA\n\t\tIssuer : /C=PL/O=osslsigncode/OU=Certification Authority/CN=Root CA\n\t\tSerial : 50F083176D60DACA4AEF9E7B1D9521A92C4196D3\n\t\tCertificate expiration date:\n\t\t\tnotBefore : Jan  1 00:00:00 2018 GMT\n\t\t\tnotAfter : Jan  1 00:00:00 2026 GMT\n\n\nX509_verify_cert: certificate verify error: certificate has expired\nSignature CRL verification: failed\nSignature verification: failed\n```\n\nFaking the time to 2025 before the container preparation and then doing a normal build with the right time works normally.\n\n### Expected behaviour\n\nIdeally there should be no timebombs creating guix environments\n\n### Steps to reproduce\n\nTry a guix build from a recently created container, updating the whole time-machine\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv30.1\n\n### Operating system and version\n\nFedora 43\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "psgreco",
      "created_at": "2026-01-07T13:27:01Z",
      "updated_at": "2026-01-09T11:11:46Z",
      "closed_at": "2026-01-09T11:11:46Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34220",
      "labels": [
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3718991398,
          "user": "maflcko",
          "body": "This is a known and documented issue and affects several packages, see https://github.com/bitcoin/bitcoin/blob/master/contrib/guix/INSTALL.md#openssl-111l-and-openssl-111n\n\nI don't think there is much that can be done on the Bitcoin Core side. You'll have to submit a fix upstream.\n\nTo avoid this problem in the future, guix should set the time in one of their CI severs to a date in the future (maybe 5 years), or someone should run a bootstrap build with the time set to the future whenever Bitcoin Core bumps the guix commit.",
          "created_at": "2026-01-07T13:50:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 528,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3719022287,
          "user": "psgreco",
          "body": "Updating `osslsigncode` dep in `manifest.scm` should fix the issue, at least for future releases. I tried to take it to 2.10 but it adds some dependencies, which I didn't like.\nFrom the core perspective, what could also be done is apply a patch with newer certs, which is something I'm gonna try to do as soon as I have time.",
          "created_at": "2026-01-07T13:59:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 325,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3719538660,
          "user": "hebasto",
          "body": "> Updating `osslsigncode` dep in `manifest.scm` should fix the issue, at least for future releases. I tried to take it to 2.10 but it adds some dependencies, which I didn't like. From the core perspective, what could also be done is apply a patch with newer certs, which is something I'm gonna try to do as soon as I have time.\n\nAlternatively, the `osslsigncode` tests could be disabled in `manifest.scm`.",
          "created_at": "2026-01-07T15:51:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 405,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3720670657,
          "user": "psgreco",
          "body": "@hebasto If you're ok with this, I can create a PR for it. Seems to work correctly.\n```diff\ndiff --git a/contrib/guix/manifest.scm b/contrib/guix/manifest.scm\nindex 011ba0defce2..145ef45235b2 100644\n--- a/contrib/guix/manifest.scm\n+++ b/contrib/guix/manifest.scm\n@@ -208,6 +208,8 @@ and abstract ELF, PE and MachO formats.\")\n                (base32\n                 \"1j47vwq4caxfv0xw68kw5yh00qcpbd56d7rq6c483ma3y7s96yyz\"))))\n     (build-system cmake-build-system)\n+    ;; disable running tests due to 2026 cert timebomb\n+    (arguments '(#:tests? #f))\n     (inputs (list openssl))\n     (home-page \"https://github.com/mtrojnar/osslsigncode\")\n     (synopsis \"Authenticode signing and timestamping tool\")\n```",
          "created_at": "2026-01-07T20:33:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 705,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3721543016,
          "user": "hebasto",
          "body": "A patch has been proposed in https://github.com/bitcoin/bitcoin/pull/34227.",
          "created_at": "2026-01-08T01:42:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1996,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2727464388,
      "number": 31447,
      "title": "wallet: wallet_migration.py fails on sqlite-only build",
      "body": "Steps to reproduce:\r\n\r\n* sqlite-only build (the default)\r\n* `./bld-cmake/test/functional/wallet_migration.py`\r\n\r\n```\r\n2024-12-07T04:56:18.691000Z TestFramework (INFO): PRNG seed is: 7532643259753153678\r\n2024-12-07T04:56:18.691000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20241207_042808/wallet_migration_2\r\n2024-12-07T04:56:20.630000Z TestFramework (INFO): Test migration of a basic keys only wallet without balance\r\n2024-12-07T04:56:20.915000Z TestFramework (INFO): Test migration of a basic keys only wallet with a balance\r\n2024-12-07T04:56:26.448000Z TestFramework (INFO): Test backup file can be successfully restored\r\n2024-12-07T04:56:27.024000Z TestFramework (INFO): Test migration of a wallet with balance received on the seed\r\n2024-12-07T04:56:28.270000Z TestFramework (INFO): Test \"nothing to migrate\" when the user tries to migrate a loaded wallet with no legacy data\r\n2024-12-07T04:56:28.271000Z TestFramework (INFO): Test \"nothing to migrate\" when the user tries to migrate an unloaded wallet with no legacy data\r\n2024-12-07T04:56:28.273000Z TestFramework (INFO): Test migration of a wallet with all keys for a multisig\r\n2024-12-07T04:56:28.473000Z TestFramework (INFO): Test migration of a wallet that has some keys in a multisig\r\n2024-12-07T04:56:28.798000Z TestFramework (INFO): Test migration of a wallet with watchonly imports\r\n2024-12-07T04:56:29.107000Z TestFramework (INFO): Test migration of a pure watchonly wallet\r\n2024-12-07T04:56:29.217000Z TestFramework (INFO): Test migration of a pure watchonly wallet with pubkeys in keypool\r\n2024-12-07T04:56:29.326000Z TestFramework (INFO): Test migration of a wallet using old pk() coinbases\r\n2024-12-07T04:56:29.529000Z TestFramework (INFO): Test migration of an encrypted wallet\r\n2024-12-07T04:56:31.123000Z TestFramework (INFO): Check migratewallet errors for nonexistent wallets\r\n2024-12-07T04:56:31.124000Z TestFramework (INFO): Test migration of a wallet that isn't loaded, specified by path\r\n2024-12-07T04:56:31.300000Z TestFramework (INFO): Test migration of the wallet named as the empty string\r\n2024-12-07T04:56:31.450000Z TestFramework (INFO): Test migration of a wallet that is not in a wallet directory\r\n2024-12-07T04:56:31.584000Z TestFramework (INFO): Test migration of address book data\r\n2024-12-07T04:56:35.062000Z TestFramework (INFO): Test migration of watch-only raw p2sh script\r\n2024-12-07T04:56:35.346000Z TestFramework (INFO): Test migration when wallet contains conflicting transactions\r\n2024-12-07T04:56:35.609000Z TestFramework (INFO): Test migration when wallet contains a hybrid pubkey\r\n2024-12-07T04:56:35.829000Z TestFramework (INFO): Test that a failed migration is cleaned up\r\n2024-12-07T04:56:35.968000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/util.py\", line 160, in try_rpc\r\n    fun(*args, **kwds)\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/authproxy.py\", line 146, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: Wallet file verification failed. Failed to open database path '/tmp/test_runner_₿_🏃_20241207_042808/wallet_migration_2/node0/regtest/wallets/failed'. Build does not support Berkeley DB database format.\r\nUnable to restore backup of wallet. (-4)\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/bld-cov/test/functional/wallet_migration.py\", line 1031, in run_test\r\n    self.test_failed_migration_cleanup()\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/bld-cov/test/functional/wallet_migration.py\", line 895, in test_failed_migration_cleanup\r\n    assert_raises_rpc_error(-4, \"Failed to create database\", self.master_node.migratewallet, \"failed\")\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/util.py\", line 151, in assert_raises_rpc_error\r\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/tmp/cirrus-ci-build/bitcoin-core/test/functional/test_framework/util.py\", line 166, in try_rpc\r\n    raise AssertionError(\r\nAssertionError: Expected substring not found in error message:\r\nsubstring: 'Failed to create database'\r\nerror message: 'Wallet file verification failed. Failed to open database path '/tmp/test_runner_₿_🏃_20241207_042808/wallet_migration_2/node0/regtest/wallets/failed'. Build does not support Berkeley DB database format.\r\nUnable to restore backup of wallet.'.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-09T15:35:38Z",
      "updated_at": "2026-01-09T10:51:33Z",
      "closed_at": "2025-01-09T23:33:35Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31447",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5085,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2248695751,
      "number": 29901,
      "title": "Wallet fuzzing tracking issue",
      "body": "The wallet has poor fuzz coverage. Hopefully, some work is being done to improve it. The goal of this issue is to actively track current work and work that needs to be done to improve fuzz coverage for the wallet.\n\n## Open PRs / Ready to review\n\n- [ ] https://github.com/bitcoin/bitcoin/pull/34230\n- [ ] https://github.com/bitcoin/bitcoin/pull/33916\n- [ ] https://github.com/bitcoin/bitcoin/pull/32993\n- [ ] https://github.com/bitcoin/bitcoin/pull/32624\n- [ ] https://github.com/bitcoin/bitcoin/pull/34026\n- [x] https://github.com/bitcoin/bitcoin/pull/31870\n- [x] https://github.com/bitcoin/bitcoin/pull/31806\n- [x] https://github.com/bitcoin/bitcoin/pull/29694\n- [x] https://github.com/bitcoin/bitcoin/pull/29936\n- [x] https://github.com/bitcoin/bitcoin/pull/30134\n- [x] https://github.com/bitcoin/bitcoin/pull/28074\n- [x] https://github.com/bitcoin/bitcoin/pull/32772\n- [x] https://github.com/bitcoin/bitcoin/pull/33210\n\n## Current wallet targets\n\nWe currently have 11 specific targets for wallet, which cover:\n\n- Fees (`wallet/fees.cpp`)\n- Coin selection\n- ScriptPubKeyManager\n- Coin control (`CCoinControl`)\n- ISO8601 parser\n- Wallet BDB parser\n\n## Nice to have\n\n- [ ] More coverage for `CWallet`\n- [ ] Wallet transaction target\n- [ ] Wallet receive target\n- [ ] Wallet RPC\n- [ ] Fee bumper\n- [ ] Speed up the existing targets\n\n## Won't/Can't cover\n\n### Legacy wallet removal\n\nThe goal is to remove legacy wallets and migrate them to descriptor ones. There is an open issue with a proposed timeline for Legacy Wallet and BDB removal (https://github.com/bitcoin/bitcoin/issues/20160). For this reason, we do not aim to increase fuzz coverage for legacy stuff. See that the `scriptpubkeyman` target only uses descriptor ones.\n\nedit: legacy wallet has been removed.\n\n### External signer\n\nI do believe we can't have fuzz coverage for external signer code.\n\n## Performance and determinism\n\nUnfortunately, some aspects of the wallet may affect the fuzzing performance.  E.g.:\n\n- `SetupDescriptorScriptPubKeyMans` (it might also be non-deterministic due to key generation)\n- Wallet encryption\n\n----------------------\n\nAny ideas about it or PRs to add let me know.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2024-04-17T16:15:40Z",
      "updated_at": "2026-01-08T13:09:56Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/29901",
      "labels": [
        "Wallet",
        "Tests",
        "Tracking Issue",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 2551948870,
          "user": "brunoerg",
          "body": "Not sure about performance issues, but a fuzz target to cover https://github.com/bitcoin/bitcoin/issues/31474 would be great?",
          "created_at": "2024-12-18T17:57:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 125,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660948963,
          "user": "brunoerg",
          "body": "> Not sure about performance issues, but a fuzz target to cover [#31474](https://github.com/bitcoin/bitcoin/issues/31474) would be great?\n\nI'm working on it.",
          "created_at": "2025-02-15T14:32:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 157,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3475368672,
          "user": "brunoerg",
          "body": "`wallet_create_transaction` and `scriptpubkeyman` are two targets that I'm taking a look to try to speed them up. I'm getting less than 10 exec/s for both of them on my personal server which is bad. Just added to the \"Nice to have\" section the \"Speed up current targets\". ",
          "created_at": "2025-11-01T01:26:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 272,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559611938,
          "user": "brunoerg",
          "body": "Just added https://github.com/bitcoin/bitcoin/pull/33916 to the review list. This PR adds a fuzz target for the `TransactionCanBeBumped` function from `feebumper`. ",
          "created_at": "2025-11-20T19:05:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 164,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2190,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2940914827,
      "number": 32124,
      "title": "bitcoind crash with corrupt wallet.dat",
      "body": "```\n2025-03-20T00:52:09Z Using SQLite Version 3.38.5\n2025-03-20T00:52:09Z Using wallet w1\n2025-03-20T00:52:09Z init message: Loading wallet…\n2025-03-20T00:52:09Z SQLite Error. Code: 1. Message: no such column: minversion in \"INSERT INTO main VALUES(?, ?)\"\n2025-03-20T00:52:09Z [w1] Releasing wallet w1..\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  SQLiteDatabase: Failed to close database: database is locked\n```\n\nI had observed `bitcoind` crash a few days back while testing it with a corrupt database. I was testing this because sqlite version was recently updated in core.\n\nNot sure if it is relevant to https://github.com/bitcoin/bitcoin/issues/32111. I can't comment in that issue because @dergoegge has blocked me on GitHub.\n\nFeel free to ignore and close the issue if it's unrelated.",
      "state": "open",
      "user": "1440000bytes",
      "created_at": "2025-03-23T04:47:24Z",
      "updated_at": "2026-01-08T12:45:40Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32124",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 2747328830,
          "user": "maflcko",
          "body": "> Not sure if it is relevant to [#32111](https://github.com/bitcoin/bitcoin/issues/32111).\n\n32111 is about migrating (corrupt) bdb wallets (likely obtained from fuzzing), with exact steps to reproduce and the crash being due to `Assertion m_wallet_flags == 0 failed`. Whereas this issue is about loading (?) a corrupt (?) sqlite wallet, without steps to reproduce. Also, it is unclear how the two sqlite errors interact and if the second one is due to another dangling process on the system, or not.\n\nSo my recommendation would be to add exact steps to reproduce, similar to #32111.",
          "created_at": "2025-03-24T08:47:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 582,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2748493704,
          "user": "1440000bytes",
          "body": "Steps to reproduce:\n\n1. Run bitcoind with `bitcoind -regtest`\n2. Create a new wallet which loads on startup with ` bitcoin-cli -regtest -named createwallet wallet_name=w1 load_on_startup=true`\n3. Download sqlite binary: https://www.sqlite.org/download.html\n4. Exit bitcoind\n5. Use arbitrary SQL statements for wallet db with sqlite binary. Use the below SQL statements for the error mentioned in OP.\n    \n    ```\n   $ sqlite3 \"wallet.dat file path\"\n   SQLite version 3.49.1 2025-02-18 13:38:58\n   Enter \".help\" for usage hints.\n   sqlite> CREATE TRIGGER test_trigger BEFORE INSERT ON main\n      ...> BEGIN\n      ...>     UPDATE main SET minversion = 'test' WHERE minversion = minversion;\n      ...> END;\n   sqlite> .exit\n   ```\n6. Restart bitcoind and see the error in logs\n\nNote: I have used v28.0 bitcoin core in this experiment.",
          "created_at": "2025-03-24T15:16:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 831,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2750380771,
          "user": "davidgumberg",
          "body": "This specific crash occurs after an unhandled [exception is thrown](https://github.com/bitcoin/bitcoin/blob/1d281daf8613a3cb7a26759c351ffb34dab0f656/src/wallet/sqlite.cpp#L162-L165) in `SQLiteBatch::SetupSQLStatements()`, when creating a `WalletBatch()` [during](https://github.com/bitcoin/bitcoin/blob/1d281daf8613a3cb7a26759c351ffb34dab0f656/src/wallet/wallet.cpp#L2389) `LoadWallet()`.\n\nIIUC, none of `SQLiteBatch()`'s users, handle errors thrown during batch creation, which seems like an issue to me.",
          "created_at": "2025-03-25T07:50:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 505,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 864,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3792714752,
      "number": 34232,
      "title": "wallet: SetBumpFeeDiscount(const CAmount): Assertion `discount >= 0' failed",
      "body": "*I hit this assertion in a test running on [Antithesis](https://antithesis.com/).*\n\nVibe coded functional test to demonstrate: https://github.com/dergoegge/bitcoin/commit/587e42c3504bed5cb45137cd151f1e80e2314eed. Because this is caused by a race condition, the commit also includes a sleep to reliably trigger the issue.\n\n```\nnode0 stderr bitcoind: wallet/coinselection.cpp:823: void wallet::SelectionResult::SetBumpFeeDiscount(const CAmount): Assertion `discount >= 0' failed.\n```\n\n<details>\n\n<summary>Here's an LLM's explanation for the bug:</summary>\n\n## Bug\n\nAssertion `discount >= 0` fails in `SelectionResult::SetBumpFeeDiscount` (`src/wallet/coinselection.cpp:823`).\n\nFound during Antithesis testing with concurrent transaction creation.\n\n## Root Cause\n\nRace condition between two MiniMiner calculations during coin selection:\n\n1. **Individual bump fees** calculated in `AvailableCoins` (`spend.cpp:517`) via `calculateIndividualBumpFees()` - creates MiniMiner, copies mempool state, releases lock\n2. **Combined bump fee** calculated later in `ChooseSelectionResult` (`spend.cpp:809`) via `calculateCombinedBumpFee()` - creates a *new* MiniMiner with potentially different mempool state\n\nEach MiniMiner constructor acquires `LOCK(mempool.cs)` only for the duration of the constructor (`mini_miner.cpp:26`). The lock is released before the actual fee calculations run.\n\nIf mempool state changes between these two calls (e.g., fee deltas modified via `prioritisetransaction`, new transactions, evictions), the combined calculation can return a higher value than the sum of individual calculations:\n\n```cpp\n// spend.cpp:813-815\nCAmount bump_fee_overestimate = summed_bump_fees - combined_bump_fee.value();\nif (bump_fee_overestimate) {\n    result.SetBumpFeeDiscount(bump_fee_overestimate);  // negative if combined > summed\n}\n```\n</details>\n\n\n\n\n",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-08T12:35:53Z",
      "updated_at": "2026-01-08T12:37:25Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34232",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1924,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3775045982,
      "number": 34187,
      "title": "Intermittent issue in rpc_misc.py:                                    test_framework.authproxy.JSONRPCException: 'echoipc' RPC took longer than 1200.000000 seconds.",
      "body": "Not sure why this hits this long timeout. The logs are https://github.com/bitcoin/bitcoin/actions/runs/20618562716/job/59216177088?pr=33775#step:11:3901:\n\n```\ntest  2025-12-31T12:48:06.476897Z TestFramework (INFO): test echoipc (testing spawned process in multiprocess build) \n node0 2025-12-31T12:48:06.477022Z [http] [httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:50326 \n node0 2025-12-31T12:48:06.477055Z [httpworker.0] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=echoipc user=__cookie__ \n node0 2025-12-31T12:48:06.478285Z [httpworker.0] [ipc/interfaces.cpp:64] [spawnProcess] [ipc] Process bitcoin-node pid 17479 launched \n node0 2025-12-31T12:48:06.478605Z [httpworker.0] [ipc/capnp/protocol.cpp:53] [IpcLogFn] ipc: {bitcoin-node-17465/b-httpworker.0-17468} IPC client first request from current thread, constructing waiter \n node0 2025-12-31T12:48:06.478652Z [capnp-loop] [ipc/capnp/protocol.cpp:50] [IpcLogFn] [ipc] {bitcoin-node-17465/b-httpworker.0-17468} IPC client send Init.construct$Params \n node0 2025-12-31T12:48:06.478677Z [capnp-loop] [ipc/capnp/protocol.cpp:47] [IpcLogFn] [ipc:trace] send data: (threadMap = <external capability>) \n node0 2025-12-31T12:48:50.987744Z [scheduler] [net.cpp:2439] [StartExtraBlockRelayPeers] [net] enabling extra block-relay-only peers \n node0 2025-12-31T12:52:04.064058Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:52:04.064130Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T12:52:42.016032Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:52:42.016107Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (8μs) \n node0 2025-12-31T12:53:06.019385Z [addcon] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:2924 started \n node0 2025-12-31T12:53:06.019463Z [addcon] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:2924 completed (7μs) \n node0 2025-12-31T12:59:30.084915Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:59:30.084991Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:01:13.165088Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:01:13.165160Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:03:05.989149Z [scheduler] [net.cpp:2401] [DumpAddresses] [net] Flushed 0 addresses to peers.dat  1ms \n node0 2025-12-31T13:04:09.110919Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:04:09.110995Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:04:39.009903Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:04:39.009991Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (8μs) \n test  2025-12-31T13:08:06.577668Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 1430, in getresponse\n                                       response.begin()\n                                     File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 292, in _read_status\n                                       line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/socket.py\", line 720, in readinto\n                                       return self._sock.recv_into(b)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^\n                                   TimeoutError: timed out\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                     File \"/home/admin/actions-runner/_work/_temp/build/test/functional/rpc_misc.py\", line 96, in run_test\n                                       assert_equal(node.echoipc(\"hello\"), \"hello\")\n                                                    ^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 176, in _get_response\n                                       raise JSONRPCException({\n                                   test_framework.authproxy.JSONRPCException: 'echoipc' RPC took longer than 1200.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-01T19:00:59Z",
      "updated_at": "2026-01-08T11:58:31Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34187",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3714259196,
          "user": "maflcko",
          "body": "No idea if related, but https://github.com/bitcoin/bitcoin/issues/34014 is also a timeout",
          "created_at": "2026-01-06T10:57:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 89,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3714264319,
          "user": "fanquake",
          "body": "cc @Sjors @ryanofsky ",
          "created_at": "2026-01-06T10:58:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 21,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3723547453,
          "user": "Sjors",
          "body": "https://github.com/bitcoin-core/libmultiprocess/pull/237 probably fixes this",
          "created_at": "2026-01-08T11:58:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 76,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 7241,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3750246491,
      "number": 34128,
      "title": "migrating legacy wallet \"completes\", then removes bitcoin/wallets",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen I start bitcoin-qt, it says I have a legacy wallet and tells me to migrate it. When I do, a message says that the migration is starting and after a time bitcoin-qt abruptly ends. When I start bitcoin-qt again it says that it cannot find the wallet. On investigating, I see that not only is bitcoin/wallet/wallet.dat gone, but so is the directory bitcoin/wallet.\n\nLooking at the log, it appears that the migration is successful, then ... something happens.\n\n### Expected behaviour\n\ncomplete the migration and don't destroy the wallet.\n\n### Steps to reproduce\n\nWith my legacy wallet.dat, use bitcoin-qt to migrate the legacy wallet.\n\n### Relevant log output\n\n2025-12-20T16:59:02Z [default wallet] Last client version = 80500\n2025-12-20T16:59:02Z [default wallet] Legacy Wallet Keys: 104 plaintext, 0 encrypted, 0 w/ metadata, 104 total.\n2025-12-20T16:59:02Z [default wallet] Descriptors: 0, Descriptor Keys: 0 plaintext, 0 encrypted, 0 total.\n2025-12-20T16:59:02Z [default wallet] Wallet completed loading in              17ms\n2025-12-20T16:59:02Z [default wallet] setKeyPool.size() = 0\n2025-12-20T16:59:02Z [default wallet] mapWallet.size() = 14\n2025-12-20T16:59:02Z [default wallet] m_address_book.size() = 4\n2025-12-20T16:59:02Z copied /mnt/bitcoin/wallets/wallet.dat to /mnt/bitcoin/wallets/default_wallet_1766249942.legacy.bak\n2025-12-20T16:59:02Z [default wallet] Migrating wallet storage database from BerkeleyDB to SQLite.\n2025-12-20T16:59:02Z Using SQLite Version 3.50.2\n2025-12-20T16:59:02Z Using wallet /mnt/bitcoin/wallets\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 374182aed2e22c1ef37dd8e5b9fd631242f647ae57f05d8b9556d18db013ee47, type = legacy, internal = false\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = ceff5344334331f96f356b6e01c5271441aef08d6e4ee1581cc21c652f42bc86, type = p2sh-segwit, internal = false\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 155bbeb7f9c67d2d69329fb2a3762c295de656cb81ecda752985e51e8c3c6c79, type = bech32, internal = false\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 1bd0bae9fcd655a7eefabfa486a4aac06d378caaea4fb18fd3ff82e267f33a5c, type = bech32m, internal = false\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 7ecccb708fa526705eae8095ab93eb2818c2046f7bc0f16991ce7290ea359751, type = legacy, internal = true\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 504be46550019ff607ead9e999e4fd08f4c302f7c64275eecadd31189a08d53d, type = p2sh-segwit, internal = true\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = ee394eb8b5666dc08b1ba7d763045043101fead2bf3d2f374a8dceb15efc676c, type = bech32, internal = true\n2025-12-20T16:59:02Z [default wallet] Setting spkMan to active: id = 295830f0bdf428f220030af634792d5c40ded7d2b129fc2d185d31d21992bf77, type = bech32m, internal = true\n2025-12-20T16:59:02Z [default wallet] Wallet migration complete.\n2025-12-20T16:59:02Z [default wallet] Releasing wallet ..\n2025-12-20T16:59:02Z Using SQLite Version 3.50.2\n2025-12-20T16:59:02Z Using wallet /mnt/bitcoin/wallets\n2025-12-20T16:59:02Z init message: Loading wallet…\n2025-12-20T16:59:02Z [default wallet] Last client version = 80500\n2025-12-20T16:59:03Z [default wallet] Descriptors: 112, Descriptor Keys: 1 plaintext, 0 encrypted, 1 total.\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 374182aed2e22c1ef37dd8e5b9fd631242f647ae57f05d8b9556d18db013ee47, type = legacy, internal = false\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = ceff5344334331f96f356b6e01c5271441aef08d6e4ee1581cc21c652f42bc86, type = p2sh-segwit, internal = false\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 155bbeb7f9c67d2d69329fb2a3762c295de656cb81ecda752985e51e8c3c6c79, type = bech32, internal = false\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 1bd0bae9fcd655a7eefabfa486a4aac06d378caaea4fb18fd3ff82e267f33a5c, type = bech32m, internal = false\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 7ecccb708fa526705eae8095ab93eb2818c2046f7bc0f16991ce7290ea359751, type = legacy, internal = true\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 504be46550019ff607ead9e999e4fd08f4c302f7c64275eecadd31189a08d53d, type = p2sh-segwit, internal = true\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = ee394eb8b5666dc08b1ba7d763045043101fead2bf3d2f374a8dceb15efc676c, type = bech32, internal = true\n2025-12-20T16:59:03Z [default wallet] Setting spkMan to active: id = 295830f0bdf428f220030af634792d5c40ded7d2b129fc2d185d31d21992bf77, type = bech32m, internal = true\n2025-12-20T16:59:03Z [default wallet] Wallet completed loading in             509ms\n2025-12-20T16:59:03Z [default wallet] Releasing wallet ..\n\n\n\n\n\n2025-12-20T17:07:16Z Bitcoin Core version v30.0.0 (release build)\n2025-12-20T17:07:16Z Qt 6.10.1 (dynamic), plugin=xcb\n2025-12-20T17:07:16Z No static plugins.\n2025-12-20T17:07:16Z Style: fusion / QFusionStyle\n2025-12-20T17:07:16Z System: Fedora Linux 43 (Workstation Edition), x86_64-little_endian-lp64\n2025-12-20T17:07:16Z Screen: HDMI-0 1920x1080, pixel ratio=1.0\n2025-12-20T17:07:16Z GUI: QFSFileEngine::open: No file name specified\n2025-12-20T17:07:16Z GUI: QFSFileEngine::open: No file name specified\n2025-12-20T17:07:16Z GUI: QFSFileEngine::open: No file name specified\n2025-12-20T17:07:16Z GUI: QFSFileEngine::open: No file name specified\n2025-12-20T17:07:16Z GUI: QFSFileEngine::open: No file name specified\n2025-12-20T17:07:16Z Using the 'sse4(1way);sse41(4way);avx2(8way)' SHA256 implementation\n2025-12-20T17:07:16Z Using RdSeed as an additional entropy source\n2025-12-20T17:07:16Z Using RdRand as an additional entropy source\n2025-12-20T17:07:16Z Default data directory /home/jonathans/.bitcoin\n2025-12-20T17:07:16Z Using data directory /mnt/bitcoin\n2025-12-20T17:07:16Z Config file: /home/jonathans/.bitcoin/bitcoin.conf\n2025-12-20T17:07:16Z Config file arg: datadir=\"/mnt/bitcoin\"\n2025-12-20T17:07:16Z Config file arg: dbcache=\"1024\"\n2025-12-20T17:07:16Z Config file arg: listen=\"1\"\n2025-12-20T17:07:16Z Config file arg: maxconnections=\"40\"\n2025-12-20T17:07:16Z Config file arg: maxmempool=\"300\"\n2025-12-20T17:07:16Z Config file arg: prune=\"550\"\n2025-12-20T17:07:16Z Config file arg: walletdir=\"/mnt/bitcoin/wallets\"\n2025-12-20T17:07:16Z Setting file arg: prune = \"3814\"\n2025-12-20T17:07:16Z Setting file arg: wallet = [\"\"]\n2025-12-20T17:07:16Z Using at most 40 automatic connections (1024 file descriptors available)\n2025-12-20T17:07:16Z scheduler thread start\n2025-12-20T17:07:16Z [error] Specified -walletdir \"/mnt/bitcoin/wallets\" does not exist\n2025-12-20T17:07:29Z Shutdown in progress...\n2025-12-20T17:07:29Z scheduler thread exit\n2025-12-20T17:07:29Z Shutdown done\n2025-12-20T17:07:29Z GUI: QFontDatabase: Must construct a QGuiApplication before accessing QFontDatabase\n\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core version v30.0.0 (release build)\n\n### Operating system and version\n\nFedora Linux 43\n\n### Machine specifications\n\nKernel: 6.17.12-300.fc43.x86_64\nWindowing system: X11\nCPU: Intel i5-10400F CPU @ 2.90 GHz\nMemory: 62.7 GiB\nbroadband Internet",
      "state": "closed",
      "user": "jestory",
      "created_at": "2025-12-20T17:26:58Z",
      "updated_at": "2026-01-07T18:40:26Z",
      "closed_at": "2026-01-07T18:40:26Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/34128",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3678181156,
          "user": "achow101",
          "body": "Are you able to reliably reproduce this issue? I am unable to reproduce the issue both with self compiled and the release binaries.",
          "created_at": "2025-12-20T22:47:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 131,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3678379212,
          "user": "jestory",
          "body": "It is very reliable. I copy my backup wallet.dat to wallets, and when I restart bitcoin-qt, the cycle continues again:\nI select migrate, the migration appears to complete, based on the log information, then bitcoin-qt quits without any error message, and when I look the wallets directory is gone, with everything in it.\n\nI have not been able to migrate the legacy wallet.",
          "created_at": "2025-12-21T02:38:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 372,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3678426957,
          "user": "achow101",
          "body": "Does it happen if you use the release binaries? What about with 29.2?",
          "created_at": "2025-12-21T04:03:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 69,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3678880849,
          "user": "furszy",
          "body": "As it seems you compiled it yourself, could you attach the debugger and tell us where it crashed?\nThat would speed up the bug-hunting process.",
          "created_at": "2025-12-21T15:14:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 142,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3681849201,
          "user": "maflcko",
          "body": "I also can't reproduce this. Do the functional tests pass for you?\n\nI've also written a sketch of a functional test to check this:\n\n```diff\ndiff --git a/test/functional/wallet_migration.py b/test/functional/wallet_migration.py\nindex 89989fbf81..1e9bc18bde 100755\n--- a/test/functional/wallet_migration.py\n+++ b/test/functional/wallet_migration.py\n@@ -698,6 +698,47 @@ class WalletMigrationTest(BitcoinTestFramework):\n         assert (self.master_node.wallets_path / \"plainfile\").is_dir()\n         assert (self.master_node.wallets_path / \"plainfile\" / \"wallet.dat\").is_file()\n \n+    def test_walletdir_direct_file(self):\n+        self.log.info(\"Test migrating a legacy wallet stored as a direct file inside a custom walletdir\")\n+        wallet_name = \"walletdir_direct\"\n+        wallet = self.create_legacy_wallet(wallet_name)\n+        wallet.unloadwallet()\n+\n+        wallets_direct = self.master_node.datadir_path / \"wallets_direct\"\n+        wallets_direct.mkdir(parents=True, exist_ok=True)\n+        shutil.copyfile(\n+            self.old_node.wallets_path / wallet_name / \"wallet.dat\",\n+            wallets_direct / wallet_name,\n+        )\n+        assert (wallets_direct / wallet_name).is_file()\n+\n+        self.restart_node(0, extra_args=[f\"-walletdir={wallets_direct}\"])\n+        self.connect_nodes(0, 1)\n+\n+        mocked_time = int(time.time())\n+        self.master_node.setmocktime(mocked_time)\n+        migrate_res = self.master_node.migratewallet(wallet_name)\n+        self.master_node.setmocktime(0)\n+\n+        assert_equal(migrate_res[\"wallet_name\"], wallet_name)\n+        migrated_wallet = self.master_node.get_wallet_rpc(wallet_name)\n+        info = migrated_wallet.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"format\"], \"sqlite\")\n+\n+        assert (wallets_direct / wallet_name).is_dir()\n+        assert (wallets_direct / wallet_name / \"wallet.dat\").is_file()\n+\n+        self.master_node.unloadwallet(wallet_name, load_on_startup=False)\n+\n+        assert False  # passed until now\n+\n+        self.restart_node(0, extra_args=self.extra_args[0])\n+        self.connect_nodes(0, 1)\n+        if self.default_wallet_name not in self.master_node.listwallets():\n+            self.master_node.loadwallet(self.default_wallet_name)\n+        self.sync_all()\n+\n     def test_addressbook(self):\n         df_wallet = self.master_node.get_wallet_rpc(self.default_wallet_name)\n \n@@ -1562,6 +1603,7 @@ class WalletMigrationTest(BitcoinTestFramework):\n         self.test_wallet_with_path(\"path/that/ends/in/..\")\n         self.test_default_wallet()\n         self.test_direct_file()\n+        self.test_walletdir_direct_file()\n         self.test_addressbook()\n         self.test_migrate_raw_p2sh()\n         self.test_conflict_txs()\n```\n\nIt doesn't fully integrate and pass yet, but the relevant part does pass locally for me.",
          "created_at": "2025-12-22T12:16:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2867,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3690068030,
          "user": "navneettsinghh",
          "body": "Yes — I can reproduce the issue 100% of the time.\n\nSteps I follow:\n\nCopy my known-good legacy wallet.dat into the wallet directory:\n\n/mnt/bitcoin/wallets/\n\n\nLaunch bitcoin-qt.\n\nBitcoin Core prompts for migration.\n\nI click Migrate.\n\nMigration completes according to the log, the new descriptor wallet loads once, and then bitcoin-qt exits abruptly with no GUI error.\n\nWhen restarting bitcoin-qt, the entire wallet directory is gone, not just wallet.dat.\n\nThis cycle repeats consistently.\n\nKey Details Suggesting a Bug\n\nThe log always shows:\n\nWallet migration complete.\nWallet completed loading...\nReleasing wallet ..\n\n\nImmediately followed by multiple Qt errors:\n\nGUI: QFSFileEngine::open: No file name specified\n\n\nAnd on the next startup:\n\n[error] Specified -walletdir \"/mnt/bitcoin/wallets\" does not exist\n\n\nThis confirms the directory was deleted after migration, not before.\n\nEnvironment Information\n\nBitcoin Core: v30.0.0 (compiled from source)\n\nQt version: 6.10.1 (dynamic)\n\nOS: Fedora Linux 43 (X11)\n\nKernel: 6.17.12-300.fc43.x86_64\n\nwalletdir: /mnt/bitcoin/wallets mounted on a secondary disk\n\nHardware: Intel i5-10400F, 62.7 GiB RAM\n\nFilesystem: (same as underlying /mnt/bitcoin mount)\n\nThe migration only fails when the wallet directory is on this mounted path. I have not been able to produce a successful migration under any configuration when using this folder.\n\nWhat Actually Gets Deleted\n\nAfter migration succeeds and the wallet is released, the entire directory /mnt/bitcoin/wallets is missing.\n\nInside Bitcoin Core’s log, earlier I can see the backup is made successfully:\n\ncopied wallet.dat to default_wallet_*.legacy.bak\n\n\nThat backup file also disappears because the directory itself gets removed.",
          "created_at": "2025-12-24T15:12:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1716,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3707590592,
          "user": "mdance",
          "body": "I am experiencing the same issue with a recently source compiled tags/v30.0, upon attempting the migratewallet it blows away everything... wtf\n\nbitcoin-cli -testnet migratewallet ~/.bitcoin/testnet3\nerror code: -4\nerror message:\nWallet loading failed. Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of a pruned node)Backup file does not exist\nUnable to restore backup of wallet.",
          "created_at": "2026-01-04T03:41:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 457,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3707597598,
          "user": "achow101",
          "body": " #34156 has a fix for the deletion issue.",
          "created_at": "2026-01-04T03:55:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 41,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3720219093,
          "user": "furszy",
          "body": "#34156 got merged, this can be closed.",
          "created_at": "2026-01-07T18:37:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 38,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 7450,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3486416458,
      "number": 33547,
      "title": "HeadersSync tracking issue",
      "body": "End Goal: Make the headers sync phase quicker and less prone to fail, while improving implementation and test code.\n\nThe Bitcoin Optech Podcast episode for Newsletter 322 (https://bitcoinops.org/en/podcast/2024/10/01/) among other things prompted the (re)discovery of the possible improvement of caching headers so they only needed to be downloaded once. To avoid adding unnecessary resource demands on nodes, the number of `HeaderSyncState` instances created over time should ideally be made more predictable first (see old comments at https://github.com/bitcoin/bitcoin/pull/25720#discussion_r936707629 & https://github.com/bitcoin/bitcoin/pull/25720#issuecomment-1214656320).\n\n## Issues\n\nNot required, but getting these in first helps make later changes clearer:\n* #32740\n* #32579\n\nCritical path (not yet ready for general review):\n* Heavily WIP: More predictable `HeaderSyncState` creation - https://github.com/hodlinator/bitcoin/tree/2025/08/headerssync_predictability\n* WIP: https://github.com/l0rinc/bitcoin/pull/3\n\nAdjacent:\n* #33553 (ameliorates intermittent issue #26391)\n* #34096",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-10-06T09:37:02Z",
      "updated_at": "2026-01-07T13:52:25Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33547",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3374358704,
          "user": "mzumsande",
          "body": "I opened #33553 to address the problem from https://github.com/bitcoin/bitcoin/issues/26391 .",
          "created_at": "2025-10-06T21:50:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 93,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1117,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2748890083,
      "number": 31536,
      "title": " (bitcoin core warning: unknown new rules activated versionbit 2) ",
      "body": "### Issues, reports or feature requests related to the GUI should be opened directly on the GUI repo\n\n- [X] I still think this issue should be opened here\n\n### Report\n\nHello,\r\n\r\nIam having this issue on my bitcoin core wallet, and cant see my balance anymore. iam in panic. (bitcoin core warning: unknown new rules activated versionbit 2) does anymore know what i can do or i lost all my balance? ",
      "state": "closed",
      "user": "Torabora33",
      "created_at": "2024-12-18T22:47:46Z",
      "updated_at": "2026-01-07T10:50:33Z",
      "closed_at": "2025-01-07T08:31:15Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/31536",
      "labels": [
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 2552454235,
          "user": "achow101",
          "body": "Please provide the details of which version of Bitcoin Core you are running and the operating system that you are using.\r\n\r\nIf you did not delete any files, then it is unlikely that any coins have been lost, they are just not yet visible or the wallet is not loaded.\r\n\r\nFrom the warning, it sounds like your version of Bitcoin Core is outdated. It is also possible that Bitcoin Core has not finished syncing yet and so the balance is not up to date.",
          "created_at": "2024-12-18T23:24:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 449,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2552476889,
          "user": "Torabora33",
          "body": "Iam using MacBook Air and the Bitcoin core wallet version is old one when I download it back in 2014. But I downloaded the newest version and it completed downloading the blockchain and but i still can’t see my balance. Inhale basically now two versions of Bitcoin core wallet in my pc. Both of them load but doesn’t show balance\r\n\r\n\r\n\r\nMet vriendelijke groet,\r\n\r\nOp 19 dec 2024 om 00:24 heeft Ava Chow ***@***.***> het volgende geschreven:\r\n\r\n﻿\r\n\r\nPlease provide the details of which version of Bitcoin Core you are running and the operating system that you are using.\r\n\r\nIf you did not delete any files, then it is unlikely that any coins have been lost, they are just not yet visible or the wallet is not loaded.\r\n\r\nFrom the warning, it sounds like your version of Bitcoin Core is outdated. It is also possible that Bitcoin Core has not finished syncing yet and so the balance is not up to date.\r\n\r\n—\r\nReply to this email directly, view it on GitHub<https://github.com/bitcoin/bitcoin/issues/31536#issuecomment-2552454235>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/BN2AVZTEMNGQZWJVKLSL6JD2GH73HAVCNFSM6AAAAABT3WOEUOVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKNJSGQ2TIMRTGU>.\r\nYou are receiving this because you authored the thread.Message ID: ***@***.***>\r\n",
          "created_at": "2024-12-18T23:47:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1283,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2553033996,
          "user": "maflcko",
          "body": "You'll have to wait for it to sync to the tip and then load the wallet, possibly rescan, if the wallet was unloaded.\r\n\r\n",
          "created_at": "2024-12-19T08:13:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 120,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2555827704,
          "user": "Torabora33",
          "body": "It already finished Sync i restart the pc couple of times but still same warning. is there any video i can watch to do the reindexing my macbook? \r\n\r\ni downloaded the newest version of bitcoin core wallet and run it and it finished sync but no balance showing up there either \r\nonly i don't see the waring to the newest version of bitcoin core wallet showing up.... this is making me kinda dizzy ",
          "created_at": "2024-12-19T21:45:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 396,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2564980074,
          "user": "araujo0608",
          "body": "I'm new to this whole Bitcoin thing. But since it's software, I would look at the log file. Look for errors or warnings related to the wallet or blockchain synchronization.",
          "created_at": "2024-12-30T03:08:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 172,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2568133106,
          "user": "maflcko",
          "body": "> i downloaded the newest version of bitcoin core wallet and run it and it finished sync but no balance showing up there either\r\n\r\nYou may have to rescan, when you load the wallet again, or restore from a backup. Otherwise, the transaction history (and balance) may be missing.",
          "created_at": "2025-01-02T17:38:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 277,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2568133444,
          "user": "maflcko",
          "body": "Usually the issue tracker is used to track technical issues related to the Bitcoin Core code base.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the [Bitcoin StackExchange](https://bitcoin.stackexchange.com) or the `#bitcoin` IRC channel on Libera Chat, or one of the Bitcoin subreddits, or any other place that you feel is well suited.\r\n\r\n ",
          "created_at": "2025-01-02T17:38:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 369,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 464,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1619986699,
      "number": 27242,
      "title": "Building `--with-experimental-kernel-lib` fails on OpenBSD 7.2",
      "body": "### Current behaviour\r\n\r\nBuilding with the `--with-experimental-kernel-lib` configuration option currently leads to linker failures on OpenBSD 7.2. The following compiler/linker/build-tool versions are used:\r\n- clang 13.0.0\r\n- lld 13.0.0\r\n- ccache 4.6.3\r\n- GNU make 4.3\r\n- autoconf 2.71\r\n- automake 1.16.5\r\n\r\n### Expected behaviour\r\n\r\n- Building should succeed\r\n\r\n### Steps to reproduce\r\n\r\n```\r\n$ ./configure --enable-suppress-external-warnings --with-experimental-kernel-lib MAKE=gmake\r\n[ ... ]\r\n$ gmake clean\r\n$ gmake -j8\r\n[ ... ]\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_comparator_t; recompile with -fPIC                  \r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)\r\n>>> referenced by c.cc:87 (leveldb/db/c.cc:87)                                                                                           \r\n>>>               libleveldb_la-c.o:(leveldb_comparator_create) in archive leveldb/.libs/libleveldb.a                                    \r\n                                                                                                                                         \r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_filterpolicy_t; recompile with -fPIC                \r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)        \r\n>>> referenced by c.cc:107 (leveldb/db/c.cc:107) \r\n>>>               libleveldb_la-c.o:(leveldb_filterpolicy_create) in archive leveldb/.libs/libleveldb.a                                  \r\n                                                                    \r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_filterpolicy_t; recompile with -fPIC                \r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)                                                                             \r\n>>> referenced by c.cc:108 (leveldb/db/c.cc:108)                                                                                         \r\n>>>               libleveldb_la-c.o:(leveldb_filterpolicy_create_bloom::Wrapper::~Wrapper()) in archive leveldb/.libs/libleveldb.a       \r\n                                                                                                                                         \r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_filterpolicy_t; recompile with -fPIC                \r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)                                                                             \r\n>>> referenced by c.cc:108 (leveldb/db/c.cc:108)                                                                                         \r\n>>>               libleveldb_la-c.o:(leveldb_filterpolicy_create_bloom::Wrapper::~Wrapper()) in archive leveldb/.libs/libleveldb.a\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_comparator_t; recompile with -fPIC\r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)\r\n>>> referenced by c.cc:88 (leveldb/db/c.cc:88)\r\n>>>               libleveldb_la-c.o:(leveldb_comparator_t::~leveldb_comparator_t()) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_comparator_t; recompile with -fPIC\r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)\r\n>>> referenced by c.cc:88 (leveldb/db/c.cc:88)\r\n>>>               libleveldb_la-c.o:(leveldb_comparator_t::~leveldb_comparator_t()) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_filterpolicy_t; recompile with -fPIC\r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)\r\n>>> referenced by c.cc:108 (leveldb/db/c.cc:108)\r\n>>>               libleveldb_la-c.o:(leveldb_filterpolicy_t::~leveldb_filterpolicy_t()) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for leveldb_filterpolicy_t; recompile with -fPIC\r\n>>> defined in leveldb/.libs/libleveldb.a(libleveldb_la-c.o)\r\n>>> referenced by c.cc:108 (leveldb/db/c.cc:108)\r\n>>>               libleveldb_la-c.o:(leveldb_filterpolicy_t::~leveldb_filterpolicy_t()) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol construction vtable for std::__1::basic_ostream<char, std::__1::char_traits<char> >-in-std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by ostream:165 (/usr/include/c++/v1/ostream:165)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol construction vtable for std::__1::basic_ostream<char, std::__1::char_traits<char> >-in-std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by ostream:165 (/usr/include/c++/v1/ostream:165)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >; recompile with -fPIC\r\nar>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:139 (/usr/include/c++/v1/iosfwd:139)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for std::__1::basic_stringbuf<char, std::__1::char_traits<char>,\r\n std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:133 (/usr/include/c++/v1/iosfwd:133)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol VTT for std::__1::basic_ostringstream<char, std::__1::char_traits<char>\r\n, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:139 (/usr/include/c++/v1/iosfwd:139)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for std::__1::basic_ostringstream<char, std::__1::char_traits<ch\r\nar>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:139 (/usr/include/c++/v1/iosfwd:139)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for std::__1::basic_ostringstream<char, std::__1::char_traits<ch\r\nar>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:139 (/usr/include/c++/v1/iosfwd:139)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: relocation R_X86_64_PC32 cannot be used against symbol vtable for std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >; recompile with -fPIC\r\n>>> defined in .libs/libbitcoinkernel_la-chain.o\r\n>>> referenced by iosfwd:133 (/usr/include/c++/v1/iosfwd:133)\r\n>>>               libleveldb_la-dbformat.o:(leveldb::ParsedInternalKey::DebugString() const) in archive leveldb/.libs/libleveldb.a\r\n\r\nld: error: too many errors emitted, stopping now (use -error-limit=0 to see all errors)\r\nc++: error: linker command failed with exit code 1 (use -v to see invocation)\r\ngmake[2]: *** [Makefile:7030: libbitcoinkernel.la] Error 1\r\ngmake[1]: *** [Makefile:19397: all-recursive] Error 1\r\ngmake: *** [Makefile:814: all-recursive] Error 1\r\n```\r\n\r\n### Relevant log output\r\n\r\nThe ./configure output can be found here: https://pastebin.com/XzrZKe7D\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster branch (commit 40d0b0a524dfe8cc70cc116a6c76a3f834824fe5)\r\n\r\n### Operating system and version\r\n\r\nOpenBSD 7.2 (amd64)\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "theStack",
      "created_at": "2023-03-11T12:17:31Z",
      "updated_at": "2026-01-07T10:50:33Z",
      "closed_at": "2025-01-07T08:30:35Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/27242",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 2573441771,
          "user": "hebasto",
          "body": "I believe this issue is no longer relevant after migrating to CMake.\r\n\r\nOn OpenBSD 7.6, the build completes without any issues:\r\n```\r\n$ cmake -B build -DBUILD_KERNEL_LIB=ON\r\n$ cmake --build build\r\n$ file build/src/kernel/libbitcoinkernel.so \r\nbuild/src/kernel/libbitcoinkernel.so: ELF 64-bit LSB shared object, x86-64, version 1\r\n```",
          "created_at": "2025-01-06T16:16:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 333,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2574675548,
          "user": "maflcko",
          "body": "Closing for now. A new issue can be opened, if this still happens on current master.",
          "created_at": "2025-01-07T08:30:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 84,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 8822,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2760780774,
      "number": 31571,
      "title": "failure in wallet_sendall.py --descriptors",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nWhen I try to run functional tests using `build/test/functional/test_runner.py`, only 1 test gets failed:\r\n\r\n![Screenshot from 2024-12-27 10-45-53](https://github.com/user-attachments/assets/dd54a5a5-e214-4a2d-9359-145f314eddfd)\r\n\r\nerror : \r\n`Temporary test directory at /tmp/test_runner_₿_🏃_20241227_142837\r\nusage: create_cache.py [options]\r\ncreate_cache.py: error: unrecognized arguments: --descriptors\r\nTraceback (most recent call last):\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 954, in <module>\r\n    main()\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 576, in main\r\n    run_tests(\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 629, in run_tests\r\n    subprocess.check_output([sys.executable, tests_dir + 'create_cache.py'] + flags + [\"--tmpdir=%s/cache\" % tmpdir])\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 421, in check_output\r\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 526, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['/usr/bin/python3', '/path/to/bitcoin/build/test/functional/create_cache.py', '--cachedir=/path/to/bitcoin/build/test/cache', '--descriptors', '--configfile=/path/to/bitcoin/build/test/functional/../config.ini', '--tmpdir=/tmp/test_runner_₿_🏃_20241227_142837/cache']' returned non-zero exit status 2.\r\n`\r\n\r\nBut when i run that very test using `build/test/functional/test_runner.py wallet_sendall.py`, it gets passed:\r\n\r\n![Screenshot from 2024-12-27 10-50-39](https://github.com/user-attachments/assets/37d1a1da-7708-4813-8adf-6f573e1a4495)\r\n\r\n\r\n### Expected behaviour\r\n\r\nI expect that 1 test to get passed when I run all the tests in parallel.\r\n\r\n### Steps to reproduce\r\n\r\nI just built using:\r\n\r\n`\r\ncmake -B build \\\r\n    -DBUILD_GUI=OFF \\\r\n    -DWITH_BDB=OFF  \\\r\n    -DBUILD_BENCH=OFF  \\\r\n    -DBUILD_FOR_FUZZING=OFF \\\r\n    -DBUILD_KERNEL_LIB=OFF \\\r\n    -DBUILD_SHARED_LIBS=OFF \\\r\n    -DBUILD_TESTS=OFF \\\r\n    -DBUILD_TX=OFF \\\r\n    -DBUILD_UTIL=OFF \\\r\n    -DBUILD_WALLET_TOOL=OFF\r\n\r\ncmake --build build -j$(nproc)\r\n`\r\n\r\nAnd then ran the functional tests using `build/test/functional/test_runner.py`\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.0\r\n\r\n### Operating system and version\r\n\r\nUbuntu 22.04.5 LTS\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "SwimmingRieux",
      "created_at": "2024-12-27T11:42:47Z",
      "updated_at": "2026-01-07T10:50:32Z",
      "closed_at": "2025-01-07T08:17:11Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31571",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 2568254664,
          "user": "maflcko",
          "body": "Did you run any other command while running the tests?\r\n\r\nDoes it reproduce?\r\n\r\nI can't reproduce with your steps on Ubuntu 22.04: `cmake -B ./bld-cmake -DBUILD_GUI=OFF -DWITH_BDB=OFF -DBUILD_BENCH=OFF -DBUILD_FOR_FUZZING=OFF -DBUILD_KERNEL_LIB=OFF -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=OFF -DBUILD_TX=OFF -DBUILD_UTIL=OFF -DBUILD_WALLET_TOOL=OFF && cmake --build ./bld-cmake --parallel  $(nproc) && ./bld-cmake/test/functional/test_runner.py`",
          "created_at": "2025-01-02T19:18:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 443,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2574106418,
          "user": "brunoerg",
          "body": "I can't reproduce with the provided steps on Ubuntu 22.04 as well. Just tried it on MacOS 14.3 and worked.\r\n\r\n```sh\r\n...\r\nwallet_resendwallettransactions.py --descriptors         | ✓ Passed  | 3 s\r\nwallet_send.py --descriptors                             | ✓ Passed  | 16 s\r\nwallet_sendall.py --descriptors                          | ✓ Passed  | 2 s\r\nwallet_sendmany.py --descriptors                         | ✓ Passed  | 1 s\r\nwallet_signer.py --descriptors                           | ✓ Passed  | 3 s\r\nwallet_signmessagewithaddress.py                         | ✓ Passed  | 1 s\r\nwallet_signrawtransactionwithwallet.py --descriptors     | ✓ Passed  | 2 s\r\nwallet_simulaterawtx.py --descriptors                    | ✓ Passed  | 1 s\r\nwallet_spend_unconfirmed.py                              | ✓ Passed  | 1 s\r\nwallet_startup.py                                        | ✓ Passed  | 2 s\r\nwallet_taproot.py --descriptors                          | ✓ Passed  | 14 s\r\nwallet_timelock.py                                       | ✓ Passed  | 1 s\r\nwallet_transactiontime_rescan.py --descriptors           | ✓ Passed  | 5 s\r\nwallet_txn_clone.py                                      | ✓ Passed  | 1 s\r\nwallet_txn_clone.py --mineblock                          | ✓ Passed  | 4 s\r\nwallet_txn_clone.py --segwit                             | ✓ Passed  | 1 s\r\nwallet_txn_doublespend.py --descriptors                  | ✓ Passed  | 1 s\r\nwallet_txn_doublespend.py --mineblock                    | ✓ Passed  | 3 s\r\n...\r\n```",
          "created_at": "2025-01-06T23:30:56Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 1500,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2574650741,
          "user": "maflcko",
          "body": "Ok, closing for now",
          "created_at": "2025-01-07T08:17:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 19,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2671,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3156815360,
      "number": 32770,
      "title": "Slow unit tests delay functional tests and leave CPU unused",
      "body": "When running the unit and functional tests under a sanitizer (as done in some CI tasks), the CPU usage could be better. Currently, one or two slow running unit tests idle along on a single CPU thread. \n\nCan be seen in this graph, which shows an initial spike during compilation, then the slow unit tests, and finally the functional test CPU usage:\n![Image](https://github.com/user-attachments/assets/66e21580-24d4-474f-9a95-b704f964f4cf)\n\nIt would be nice to somehow fix this. Options are:\n\n* Speed up the unit tests (not sure how easy this is, or if this is possible at all)\n* Run the functional tests along with the ctest-tests in parallel somehow\n* Something else?",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-06-18T13:07:41Z",
      "updated_at": "2026-01-06T14:14:52Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/32770",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 2984171765,
          "user": "willcl-ark",
          "body": "I have noticed similar when investigating tangential Ci changes. It is possible to run more unit tests in parallel, but we still always wait for the slowest test.\n\nIf I recall it’s a secp256 test, and there was perhaps a suggestion to disable it (mostly), or have it run weekly or something?",
          "created_at": "2025-06-18T13:14:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 291,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2984264066,
          "user": "maflcko",
          "body": "Looking at https://github.com/bitcoin/bitcoin/actions/runs/15714959524/job/44282297642#step:6:4481, it seems there are several affected tests:\n\n```\n...\n135/142 Test  #66: net_tests ............................   Passed  243.14 sec\n136/142 Test #139: wallet_tests .........................   Passed  108.31 sec\n137/142 Test #138: wallet_crypto_tests ..................   Passed  116.03 sec\n138/142 Test   #5: secp256k1_noverify_tests .............   Passed  426.46 sec\n139/142 Test #129: coinselector_tests ...................   Passed  268.56 sec\n140/142 Test   #9: bench_sanity_check ...................   Passed  487.70 sec\n141/142 Test  #32: coins_tests ..........................   Passed  559.64 sec\n142/142 Test   #6: secp256k1_tests ......................   Passed  590.82 sec\n```\n\nedit:\n\nTsan:\n\n```\n[20:37:36.776] 136/142 Test  #32: coins_tests ..........................   Passed  122.51 sec\n[20:37:38.388] 137/142 Test  #30: checkqueue_tests .....................   Passed  124.34 sec\n[20:37:46.297] 138/142 Test #139: wallet_tests .........................   Passed   29.87 sec\n[20:38:40.235] 139/142 Test   #9: bench_sanity_check ...................   Passed  193.33 sec\n[20:38:42.459] 140/142 Test #129: coinselector_tests ...................   Passed   98.51 sec\n[20:42:20.591] 141/142 Test   #5: secp256k1_noverify_tests .............   Passed  413.70 sec\n[20:48:11.703] 142/142 Test   #6: secp256k1_tests ......................   Passed  764.81 sec\n```\n\nmsan:\n\n```\n[13:02:32.115] 134/141 Test  #31: coins_tests ..........................   Passed   98.23 sec\n[13:02:40.482] 135/141 Test #138: wallet_tests .........................   Passed   22.38 sec\n[13:02:53.347] 136/141 Test #114: txvalidationcache_tests ..............   Passed   67.72 sec\n[13:03:29.497] 137/141 Test #128: coinselector_tests ...................   Passed   78.19 sec\n[13:03:32.923] 138/141 Test  #29: checkqueue_tests .....................   Passed  163.40 sec\n[13:04:12.828] 139/141 Test   #8: bench_sanity_check ...................   Passed  207.55 sec\n[13:05:08.881] 140/141 Test   #5: secp256k1_noverify_tests .............   Passed  263.61 sec\n[13:08:27.015] 141/141 Test   #6: secp256k1_tests ......................   Passed  461.74 sec\n```",
          "created_at": "2025-06-18T13:38:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2236,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2988442077,
          "user": "willcl-ark",
          "body": "It would be helpful to know when we should run these secp256k1 tests in this repo. I think they are run in the libsecp repo as part of CI based on [`make \"$BUILD\"` defaulting to `make check`](https://github.com/bitcoin-core/secp256k1/blob/95db29b144b7708dc93e90e2c157ec3a67695cef/.github/workflows/ci.yml#L22), but I've not verified too closely.\n\nI am not sure I see any point to re-running them here on every change. What sounds more sensible to me is to build and run them on subtree updates only. I have a demo branch adding such a CI job which I can tidy and open as a PR, if something like this is wanted?\n\nThis perhaps won't \"fix\" this issue entirely, but should make a difference of a few minutes per job on a few of our jobs.",
          "created_at": "2025-06-19T15:08:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 733,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2988536681,
          "user": "maflcko",
          "body": "> I am not sure I see any point to re-running them here on every change. What sounds more sensible to me is to build and run them on subtree updates only. I have a demo branch adding such a CI job which I can tidy and open as a PR, if something like this is wanted?\n\nNo objection from my side.\n\n\n\n> This perhaps won't \"fix\" this issue entirely\n\nI guess the easiest fix would be to call `ctest --test-dir ./bld-cmake --show-only=human` from the functional test runner and then run those listed in separate processes (when an option like `--run-ctest-tests`) is given?",
          "created_at": "2025-06-19T15:43:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 566,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2990489985,
          "user": "willcl-ark",
          "body": "I opened a draft for disabling the secp256 tests by default, running them only on subtree updates.\n\nRegarding running unit tests from the functional tests, the simplest would probably be to run `ctest --test-dir build -j$(nproc)` using a new process from `multiprocessing`, then dump stdout/stderr in the results section and forward on the return code (if non-zero) to the runner.\n\nBut it sounds like you are proposing something more like enumerating all tests and running them singly from the runner using the existing infrastructure?",
          "created_at": "2025-06-20T09:33:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 535,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2990514271,
          "user": "maflcko",
          "body": "yeah, I am not sure if it is fine to double prarallelize (nproc unit tests at the same time with nproc functional tests), but I guess it just means the early launced functional tests will be a bit slower, which should be fine",
          "created_at": "2025-06-20T09:37:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 225,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2990606236,
          "user": "willcl-ark",
          "body": "It appears to work on my machine OK running them both with `nproc` in parallel. In fact on my 16 core machine I can run ctest at `-j16` and `test_runner.py --jobs=20` together without issue.\n\nJust to be clear, would we want the `ctest` output included and integrated in the `test_runner` results section? If so this will I think involve parsing the ctest output (and therefore more code). If we are happy just to run it using multiprocess and dump stdout/err at the end, and record the exit code, the change will be a fair bit smaller (but the output possibly messier!) ",
          "created_at": "2025-06-20T09:55:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 570,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3081928184,
          "user": "ajtowns",
          "body": "cf #32945 maybe?\n\nChanging test_runner.py from python to cmake logic might make running the functional and unit tests in parallel more plausible?",
          "created_at": "2025-07-17T00:23:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 145,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3083727391,
          "user": "maflcko",
          "body": "> cf [#32945](https://github.com/bitcoin/bitcoin/pull/32945) maybe?\n\nCan't hurt, but depending on the sanitizer, it is a different test that is the slowest: https://github.com/bitcoin/bitcoin/issues/32770#issuecomment-2984264066 so the approach would have to be done for other tests as well.\n\nSubmitted https://github.com/bitcoin/bitcoin/pull/33000 for the ci in the meantime.",
          "created_at": "2025-07-17T11:38:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 376,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3158330108,
          "user": "maflcko",
          "body": "`bench_sanity_check` could make sense to split up as well. With sanitizers enabled, it takes several minutes, even on fast hardware. See https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3146639801. So I created https://github.com/bitcoin/bitcoin/pull/33142",
          "created_at": "2025-08-06T08:46:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3158930887,
          "user": "fanquake",
          "body": "`coinselector_tests` is a good candidate for speedup, under Valgrind, it is the slowest after `bench_sanity_check`:\n```bash\n141/144 Test  #78: random_tests .........................   Passed  227.62 sec\n142/144 Test  #30: coins_tests_dbbase ...................   Passed  336.61 sec\n143/144 Test #130: coinselector_tests ...................   Passed  459.29 sec\n144/144 Test   #6: bench_sanity_check ...................   Passed  793.02 sec\n```\n\nSame for `wallet_miniscript.py` in the functional tests. Under Valgrind, it is the slowest test by at least 2x any other test. `tool_signet_miner.py` and `wallet_taproot.py` are also very slow.",
          "created_at": "2025-08-06T09:57:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 638,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3161509474,
          "user": "murchandamus",
          "body": "I started looking into that as it aligns well with one of my projects to migrate the `coinselector_tests` to an updated test suite `coinselection_tests`.",
          "created_at": "2025-08-06T20:30:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 153,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3161801097,
          "user": "murchandamus",
          "body": "In the context of `coinselector_tests` being slow, I found looking at some flamegraphs that much of the time is spent on Knapsack and BnB. I have a [rewrite of BnB](https://github.com/bitcoin/bitcoin/pull/32150) open, that I would expect to improve BnB’s performance (and thus improve this test’s performance, in case someone is interested to review) and I have been prototyping another coin selection algorithm that I hope will bring the last missing piece to obsolete Knapsack (consolidatory behavior at low feerates) for which I have recently refurbished the coin selection simulation framework and have been running some exploratory simulations. The migration of the first part of the `coinselector_tests` to `coinselection_tests`  was recently merged  via #29532, so I hope to get around to opening a PR for the next part soonish.",
          "created_at": "2025-08-06T22:16:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 835,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3302352281,
          "user": "fanquake",
          "body": "> Same for wallet_miniscript.py in the functional tests. Under Valgrind, it is the slowest test by at least 2x any other test. \n\nSeems to be ~4 times slower than the next slowest test: https://github.com/bitcoin/bitcoin/pull/33411#issuecomment-3302327390.",
          "created_at": "2025-09-17T10:27:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3409566092,
          "user": "maflcko",
          "body": "On the general topic, there was commit https://github.com/bitcoin/bitcoin/commit/636b611781154f32c8d7ae8ea301d12b1464c151, so someone could some time in the future check if it helps.",
          "created_at": "2025-10-16T07:33:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 182,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3410924471,
          "user": "furszy",
          "body": "On the libsecp notes, since https://github.com/bitcoin-core/secp256k1/pull/1734 we can parallelize tests. Tagging @hebasto as he had a patch to do it.",
          "created_at": "2025-10-16T13:35:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 150,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3411200053,
          "user": "hebasto",
          "body": "> On the libsecp notes, since [bitcoin-core/secp256k1#1734](https://github.com/bitcoin-core/secp256k1/pull/1734) we can parallelize tests. Tagging [@hebasto](https://github.com/hebasto) as he had a patch to do it.\n\nSee https://github.com/bitcoin-core/secp256k1/pull/1760.",
          "created_at": "2025-10-16T14:30:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 271,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3714857697,
          "user": "maflcko",
          "body": "https://github.com/bitcoin/bitcoin/pull/33142 was merged and the same approach could trivially be used for the unit tests, but there the motivating QA issues listed in the pulls description are less pressing for the unit tests right now, so I'll wait a few months before working on this again. In the meantime, /pull/33483 could be picked up.",
          "created_at": "2026-01-06T14:14:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 342,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 727,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3764874848,
      "number": 34159,
      "title": "ci: failure in p2p_addr_selfannouncement.py",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/20445863729/job/58749036885#step:9:3498:\n```bash\n test  2025-12-22T23:47:48.293698Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:12164: msg_pong(nonce=00000000) \n test  2025-12-22T23:47:48.293794Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:12164: msg_pong(nonce=00000006) \n test  2025-12-22T23:47:48.344658Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/p2p_addr_selfannouncement.py\", line 67, in run_test\n                                       self.self_announcement_test(outbound=False, addrv2=True)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/p2p_addr_selfannouncement.py\", line 135, in self_announcement_test\n                                       assert_equal(addr_receiver.self_announcements_received, last_self_announcements_received + 1)\n                                       ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/util.py\", line 80, in assert_equal\n                                       raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\n                                   AssertionError: not(4 == 5)\n test  2025-12-22T23:47:48.347601Z TestFramework (DEBUG): Closing down network thread \n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-27T15:55:09Z",
      "updated_at": "2026-01-06T09:38:18Z",
      "closed_at": "2026-01-06T09:38:17Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/34159",
      "labels": [],
      "comment_data": [
        {
          "id": 3694307035,
          "user": "0xB10C",
          "body": "Will try to reproduce it. I suspect this is a addr message timestamp issue. Previously, I had something like this:\n\n```python\n  # The tricky part of this test is the timestamp of the self-announcement.\n  # The following helped me to debug timestamp mismatches, so I'm leaving it in for the next one.\n  elif addr.ip == self.expected.ip and addr.port == self.expected.port and addr.nServices == self.expected.nServices:\n      print(f\"Self-announcement timestamp mismatch: got={addr.time} expected={self.expected.time}\")\n```\nto catch them, but dropped it in https://github.com/bitcoin/bitcoin/pull/34039#discussion_r2628081222 ",
          "created_at": "2025-12-27T23:58:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 624,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3694594420,
          "user": "0xB10C",
          "body": "can reproduce with b3fef39: `Self-announcement timestamp mismatch: got=2656803201 expected=2655075201`\n\n```\n2025-12-28T00:54:24.0578490Z 2025-12-28T00:53:21.268810Z TestFramework (INFO): Test that the node does an address self-announcement to inbound connections (addrv1)\n2025-12-28T00:54:24.0682490Z 2025-12-28T00:53:21.269773Z TestFramework (INFO): Check that we get an initial self-announcement when connecting to a node and sending a GETADDR (inbound, addrv1)\n2025-12-28T00:54:24.0783520Z 2025-12-28T00:53:21.733615Z TestFramework (INFO): Check that we get more self-announcements sometime later (inbound, addrv1)\n2025-12-28T00:54:24.0884810Z Self-announcement timestamp mismatch: got=2656803201 expected=2655075201\n2025-12-28T00:54:24.0985270Z 2025-12-28T00:54:23.651301Z TestFramework (ERROR): Unexpected exception\n2025-12-28T00:54:24.1004690Z Traceback (most recent call last):\n2025-12-28T00:54:24.1005350Z   File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/test_framework.py\", line 142, in main\n2025-12-28T00:54:24.1006280Z     self.run_test()\n2025-12-28T00:54:24.1006580Z     ~~~~~~~~~~~~~^^\n2025-12-28T00:54:24.1008060Z   File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/p2p_addr_selfannouncement.py\", line 70, in run_test\n2025-12-28T00:54:24.1008940Z     self.self_announcement_test(outbound=False, addrv2=False)\n2025-12-28T00:54:24.1010810Z     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-12-28T00:54:24.1011690Z   File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/build-aarch64-apple-darwin24.6.0/test/functional/p2p_addr_selfannouncement.py\", line 139, in self_announcement_test\n2025-12-28T00:54:24.1012630Z     assert_equal(addr_receiver.self_announcements_received, last_self_announcements_received + 1)\n2025-12-28T00:54:24.1013240Z     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-12-28T00:54:24.1014500Z   File \"/Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/test_framework/util.py\", line 80, in assert_equal\n2025-12-28T00:54:24.1015240Z     raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\n2025-12-28T00:54:24.1017350Z AssertionError: not(515 == 516)\n2025-12-28T00:54:24.1019860Z 2025-12-28T00:54:23.840132Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-28T00:54:24.1021170Z 2025-12-28T00:54:23.840292Z TestFramework (WARNING): Not cleaning up dir /Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/test_runner/test_runner_₿_🏃_20251228_003917/p2p_addr_selfannouncement_97\n2025-12-28T00:54:24.1025000Z 2025-12-28T00:54:23.840351Z TestFramework (ERROR): Test failed. Test logging available at /Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/test_runner/test_runner_₿_🏃_20251228_003917/p2p_addr_selfannouncement_97/test_framework.log\n2025-12-28T00:54:24.1026100Z 2025-12-28T00:54:23.841833Z TestFramework (ERROR): \n2025-12-28T00:54:24.1027130Z 2025-12-28T00:54:23.842117Z TestFramework (ERROR): Hint: Call /Users/runner/work/bitcoin/bitcoin/repo_archive/test/functional/combine_logs.py '/Users/runner/work/bitcoin/bitcoin/repo_archive/ci/scratch/test_runner/test_runner_₿_🏃_20251228_003917/p2p_addr_selfannouncement_97' to consolidate all logs\n2025-12-28T00:54:24.1028120Z 2025-12-28T00:54:23.842206Z TestFramework (ERROR): \n2025-12-28T00:54:24.1028740Z 2025-12-28T00:54:23.842385Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-28T00:54:24.1029540Z 2025-12-28T00:54:23.843333Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-28T00:54:24.1030030Z 2025-12-28T00:54:23.844562Z TestFramework (ERROR): \n```",
          "created_at": "2025-12-28T09:16:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3887,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3699588015,
          "user": "naiyoma",
          "body": "> can reproduce with [b3fef39](https://github.com/bitcoin/bitcoin/commit/b3fef39e025e72d90684b6e2997fcd984b306508): `Self-announcement timestamp mismatch: got=2656803201 expected=2655075201`\n\nI haven’t been able to reproduce this, Is the time difference btwn `got `and` expected,` consistently 20 day ? \n",
          "created_at": "2025-12-30T14:51:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 304,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3699856593,
          "user": "0xB10C",
          "body": "> > can reproduce with [b3fef39](https://github.com/bitcoin/bitcoin/commit/b3fef39e025e72d90684b6e2997fcd984b306508): `Self-announcement timestamp mismatch: got=2656803201 expected=2655075201`\n> \n> I haven’t been able to reproduce this, Is the time difference btwn `got `and` expected,` consistently 20 day ?\n\nSorry, I didn't link to https://github.com/0xB10C/bitcoin/actions/runs/20546158233 - I'm not seeing the failure locally, just in CI.\n\nI was playing around with it in https://github.com/0xB10C/bitcoin/pull/15, and I think one options is to be less strict about the timestamp similar to:\n\n```patch\n        self.addr_messages_received += 1\n        for addr in message.addrs:\n            self.addresses_received += 1\n-           if addr == self.expected:\n+           if addr.time >= self.expected.time and addr.ip == self.expected.ip and addr.port == self.expected.port and addr.nServices == self.expected.nServices:\n                self.self_announcements_received += 1\n```",
          "created_at": "2025-12-30T16:20:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 980,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3701994621,
          "user": "hebasto",
          "body": "On OmniOS, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20611492118/job/59196832666:\n```\n181/282 - p2p_addr_selfannouncement.py failed, Duration: 1 s\n\nstdout:\n2025-12-31T04:29:42.401827Z TestFramework (INFO): PRNG seed is: 12631707991788085\n2025-12-31T04:29:42.403417Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_042118/p2p_addr_selfannouncement_96\n2025-12-31T04:29:43.082640Z TestFramework (INFO): Test that the node does an address self-announcement to inbound connections (addrv1)\n2025-12-31T04:29:43.087917Z TestFramework (INFO): Check that we get an initial self-announcement when connecting to a node and sending a GETADDR (inbound, addrv1)\n2025-12-31T04:29:43.285933Z TestFramework (INFO): Check that we get more self-announcements sometime later (inbound, addrv1)\n2025-12-31T04:29:43.380398Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_addr_selfannouncement.py\", line 66, in run_test\n    self.self_announcement_test(outbound=False, addrv2=False)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_addr_selfannouncement.py\", line 135, in self_announcement_test\n    assert_equal(addr_receiver.self_announcements_received, last_self_announcements_received + 1)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/util.py\", line 80, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(1 == 2)\n2025-12-31T04:29:43.445243Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-31T04:29:43.445591Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_042118/p2p_addr_selfannouncement_96\n2025-12-31T04:29:43.445763Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_042118/p2p_addr_selfannouncement_96/test_framework.log\n2025-12-31T04:29:43.446523Z TestFramework (ERROR): \n2025-12-31T04:29:43.446782Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_042118/p2p_addr_selfannouncement_96' to consolidate all logs\n2025-12-31T04:29:43.446907Z TestFramework (ERROR): \n2025-12-31T04:29:43.447013Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-31T04:29:43.447489Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-31T04:29:43.447623Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n```",
          "created_at": "2025-12-31T11:09:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3375,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3702130446,
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/20546486544/job/59017686783?pr=34156#step:11:3758",
          "created_at": "2025-12-31T12:37:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 97,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3702132551,
          "user": "naiyoma",
          "body": "> Sorry, I didn't link to https://github.com/0xB10C/bitcoin/actions/runs/20546158233 - I'm not seeing the failure locally, just I\n\nI think this happens when there's a delay between calling `bumpmocktime() `and updating `expected.time`.\n\ntried this locally:\n\n```diff\n+++ b/test/functional/p2p_addr_selfannouncement.py\n@@ -37,11 +37,14 @@ class SelfAnnouncementReceiver(P2PInterface):\n         self.addrv2_test = addrv2\n \n     def handle_addr_message(self, message):\n+        print(f\">>> HANDLE_ADDR_MESSAGE called, expected.time={self.expected.time}\")\n         self.addr_messages_received += 1\n         for addr in message.addrs:\n             self.addresses_received += 1\n             if addr == self.expected:\n                 self.self_announcements_received += 1\n+            elif addr.ip == self.expected.ip and addr.port == self.expected.port and addr.nServices == self.expected.nServices:\n+                print(f\"Self-announcement timestamp mismatch: got={addr.time} expected={self.expected.time}\")\n \n     def on_addrv2(self, message):\n         assert (self.addrv2_test)\n@@ -119,7 +122,7 @@ class AddrSelfAnnouncementTest(BitcoinTestFramework):\n             addr_receiver.send_and_ping(msg_headers([tip_header]))\n \n         self.log.info(f\"Check that we get more self-announcements sometime later ({connection_type}, {addr_version})\")\n-        for _ in range(5):\n+        for _ in range(500):\n             last_self_announcements_received = addr_receiver.self_announcements_received\n             last_addr_messages_received = addr_receiver.addr_messages_received\n             last_addresses_received = addr_receiver.addresses_received\n@@ -128,7 +131,10 @@ class AddrSelfAnnouncementTest(BitcoinTestFramework):\n                 # self-announcements are sent on an exponential distribution with mean interval of 24h.\n                 # Setting the mocktime 20d forward gives a probability of (1 - e^-(480/24)) that\n                 # the event will occur (i.e. this fails once in ~500 million repeats).\n+                print(f\"BEFORE bumpmocktime()\")\n                 self.nodes[0].bumpmocktime(20 * ONE_DAY)\n+                time.sleep(0.1)\n+                print(f\"AFTER bumpmocktime(), before setting expected.time\")\n                 addr_receiver.expected.time = self.nodes[0].mocktime\n\n```\n\n",
          "created_at": "2025-12-31T12:39:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2301,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3702144151,
          "user": "naiyoma",
          "body": "got this with the diff above \n\n```\n2025-12-31T12:39:50.147708Z TestFramework (INFO): Check that we get an initial self-announcement when connecting to a node and sending a GETADDR (inbound, addrv1)\n>>> HANDLE_ADDR_MESSAGE called, expected.time=1767184790\n2025-12-31T12:39:50.304489Z TestFramework (INFO): Check that we get more self-announcements sometime later (inbound, addrv1)\nBEFORE bumpmocktime()\n>>> HANDLE_ADDR_MESSAGE called, expected.time=1767184790\nSelf-announcement timestamp mismatch: got=1768912790 expected=1767184790\nAFTER bumpmocktime(), before setting expected.time\n2025-12-31T12:39:50.459889Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/ubuntu/Projects/bitcoin/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n  File \"/home/ubuntu/Projects/bitcoin/./build/test/functional/p2p_addr_selfannouncement.py\", line 69, in run_test\n    self.self_announcement_test(outbound=False, addrv2=False)\n  File \"/home/ubuntu/Projects/bitcoin/./build/test/functional/p2p_addr_selfannouncement.py\", line 141, in self_announcement_test\n    assert_equal(addr_receiver.self_announcements_received, last_self_announcements_received + 1)\n  File \"/home/ubuntu/Projects/bitcoin/test/functional/test_framework/util.py\", line 80, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(1 == 2)\n```\n",
          "created_at": "2025-12-31T12:47:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1451,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3702211869,
          "user": "naiyoma",
          "body": "> I was playing around with it in [0xB10C#15](https://github.com/0xB10C/bitcoin/pull/15), and I think one options is to be less strict about the timestamp similar to:\n\n>           if addr.time >= self.expected.time and addr.ip == self.expected.ip and addr.port == self.expected.port and addr.nServices == self.expected.nServices:\n\n\nI'm not sure this is always the case. Is it possible that `addr.time <= self.expected.time` could occur ? i think checking ip,port,service is sufficient.",
          "created_at": "2025-12-31T13:27:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 485,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3702328175,
          "user": "hebasto",
          "body": "On NetBSD 9.4, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20619499569/job/59218560248:\n```\n182/282 - p2p_addr_selfannouncement.py failed, Duration: 6 s\n\nstdout:\n2025-12-31T14:10:01.054524Z TestFramework (INFO): PRNG seed is: 279208991052383101\n2025-12-31T14:10:01.060063Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_135038/p2p_addr_selfannouncement_96\n2025-12-31T14:10:03.459488Z TestFramework (INFO): Test that the node does an address self-announcement to inbound connections (addrv1)\n2025-12-31T14:10:03.472186Z TestFramework (INFO): Check that we get an initial self-announcement when connecting to a node and sending a GETADDR (inbound, addrv1)\n2025-12-31T14:10:04.247264Z TestFramework (INFO): Check that we get more self-announcements sometime later (inbound, addrv1)\n2025-12-31T14:10:04.961413Z TestFramework (INFO): Test that the node does an address self-announcement to inbound connections (addrv2)\n2025-12-31T14:10:04.963778Z TestFramework (INFO): Check that we get an initial self-announcement when connecting to a node and sending a GETADDR (inbound, addrv2)\n2025-12-31T14:10:05.115558Z TestFramework (INFO): Check that we get more self-announcements sometime later (inbound, addrv2)\n2025-12-31T14:10:05.739087Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_addr_selfannouncement.py\", line 67, in run_test\n    self.self_announcement_test(outbound=False, addrv2=True)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_addr_selfannouncement.py\", line 135, in self_announcement_test\n    assert_equal(addr_receiver.self_announcements_received, last_self_announcements_received + 1)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/util.py\", line 80, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(5 == 6)\n2025-12-31T14:10:05.745570Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-31T14:10:05.745741Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_135038/p2p_addr_selfannouncement_96\n2025-12-31T14:10:05.745854Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_135038/p2p_addr_selfannouncement_96/test_framework.log\n2025-12-31T14:10:05.746147Z TestFramework (ERROR): \n2025-12-31T14:10:05.746352Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251231_135038/p2p_addr_selfannouncement_96' to consolidate all logs\n2025-12-31T14:10:05.746466Z TestFramework (ERROR): \n2025-12-31T14:10:05.746574Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-31T14:10:05.746787Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-31T14:10:05.746885Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n```",
          "created_at": "2025-12-31T14:46:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3801,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3702389244,
          "user": "0xB10C",
          "body": "> I'm not sure this is always the case. Is it possible that `addr.time <= self.expected.time` could occur ? i think checking ip,port,service is sufficient.\n\nthat would work around the issue, but I think we should have coverage for the self-announcement timestamp being correct(ish). \n\n> I think this happens when there's a delay between calling bumpmocktime() and updating expected.time.\n\nAn earlier version of #34039 didn't use `bumpmocktime()`. We could revert to doing:\n\n```python\nself.mocktime += 20 * ONE_DAY\naddr_receiver.expected.time = self.mocktime\nself.nodes[0].setmocktime(self.mocktime)\naddr_receiver.sync_with_ping()\n```\n\nto make sure the expected timestamp is set before bumping the mocktime.",
          "created_at": "2025-12-31T15:26:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 706,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3705241246,
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/20656499701/job/59310311647#step:9:3863",
          "created_at": "2026-01-02T12:36:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 87,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3705614451,
          "user": "naiyoma",
          "body": "> An earlier version of [#34039](https://github.com/bitcoin/bitcoin/pull/34039) didn't use `bumpmocktime()`. We could revert to doing:\n\n\nYeah, this is certainly a better option",
          "created_at": "2026-01-02T15:43:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 176,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3711022646,
          "user": "0xB10C",
          "body": "> > An earlier version of [#34039](https://github.com/bitcoin/bitcoin/pull/34039) didn't use `bumpmocktime()`. We could revert to doing:\n> \n> Yeah, this is certainly a better option\n\ndoing this in https://github.com/bitcoin/bitcoin/pull/34204",
          "created_at": "2026-01-05T15:57:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 242,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2134,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3780571393,
      "number": 34201,
      "title": "FUZZ=rpc in utxoupdatepsbt Assertion `tweaked' failed  in SignMuSig2",
      "body": "```\n$ echo 'dXR4b3VwZGF0ZXBzYnRcIHBzYnT/AQCjICAgIAMgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAAIP///yAgICAgICAgICAgICAgICAgICAgICAgICAgICD///8gICAgIAAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIP////////8gACAgICADICAgICAgICADICAgICAgICAg\nICAAICAgICAgICAAICAgIAABASsg/yAgICAgICJRICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIhoCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAClAiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICD/ICAgICAgICAgICAgICAgICAgICAgAAAAAAAA7f//ICAgIA==' | base64 --decode > /tmp/crash\n\n\n$ FUZZ=rpc ./bld-cmake/bin/fuzz /tmp/crash\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 2426494106\nINFO: Loaded 1 modules   (402716 inline 8-bit counters): 402716 [0x561fca7217f8, 0x561fca783d14), \nINFO: Loaded 1 PC tables (402716 PCs): 402716 [0x561fca783d18,0x561fcada8ed8), \n./bld-cmake/bin/fuzz: Running 1 inputs 1 time(s) each.\nRunning: /tmp/clusterfuzz-testcase-minimized-rpc-4681957738086400\nscript/sign.cpp:321 bool SignMuSig2(const BaseSignatureCreator &, SignatureData &, const SigningProvider &, std::vector<unsigned char> &, const XOnlyPubKey &, const uint256 *, const uint256 *, SigVersion): Assertion `tweaked' failed.\n```\n\nFound by https://issues.oss-fuzz.com/u/3/issues/473123279?pli=1\n\n_Originally posted by @maflcko in https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2660627131_\n            ",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-05T08:14:04Z",
      "updated_at": "2026-01-06T06:56:07Z",
      "closed_at": "2026-01-06T06:56:06Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34201",
      "labels": [
        "RPC/REST/ZMQ",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3709594724,
          "user": "rkrux",
          "body": "Is this a valid PSBT? I get the following error when I try to decode it.\n\n```zsh\n➜  ~ bitcoincli decodepsbt dXR4b3VwZGF0ZXBzYnRcIHBzYnT/AQCjICAgIAMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIP///yAgICAgICAgICAgICAgICAgICAgICAgICAgICD///8gICAgIAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIP////////8gACAgICADICAgICAgICADICAgICAgICAgICAAICAgICAgICAAICAgIAABASsg/yAgICAgICJRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIhoCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAClAiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICD/ICAgICAgICAgICAgICAgICAgICAgAAAAAAAA7f//ICAgIA==\nerror code: -22\nerror message:\nTX decode failed Invalid PSBT magic bytes: unspecified iostream_category error\n```",
          "created_at": "2026-01-05T09:26:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 822,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709761349,
          "user": "maflcko",
          "body": "This is a fuzz input, if you want the psbt, you can add a `std::cout<<request.params[0].get_str()<<'\\n'; to the rpc. This will give:\n\n\n```\nutxoupdatepsbt cHNidP8BAKMgICAgAyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAg////ICAgICAgICAgICAgICAgICAgICAgICAgICAgIP///yAgICAgACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg/////////yAAICAgIAMgICAgICAgIAMgICAgICAgICAgIAAgICAgICAgIAAgICAgAAEBKyD/ICAgICAgIlEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiGgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACECICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAAAAA=",
          "created_at": "2026-01-05T10:05:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 546,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709781084,
          "user": "rkrux",
          "body": "Oh interesting, thanks for clarifying.",
          "created_at": "2026-01-05T10:10:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 38,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709970608,
          "user": "rkrux",
          "body": "I think what's happening here is that invalid pubkeys are passed as MuSig2 aggregate and participants. I've updated PR #34010 by adding the test case from this issue.\n\nThe decoded PSBT from this input https://github.com/bitcoin/bitcoin/issues/34201#issuecomment-3709761349:\n<details open>\n<summary>decode PSBT on master that doesn't throw error but the above linked PR will</summary>\n\n```zsh\n➜  src git:(master) ✗   bitcoincli decodepsbt cHNidP8BAKMgICAgAyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAg////ICAgICAgICAgICAgICAgICAgICAgICAgICAgIP///yAgICAgACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg/////////yAAICAgIAMgICAgICAgIAMgICAgICAgICAgIAAgICAgICAgIAAgICAgAAEBKyD/ICAgICAgIlEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiGgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACECICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAAAAA=\n{\n  \"tx\": {\n    \"txid\": \"78aa55eafa6998eede2cfbde74e07b971c848d5e087033de9f0c934ed59ad775\",\n    \"hash\": \"78aa55eafa6998eede2cfbde74e07b971c848d5e087033de9f0c934ed59ad775\",\n    \"version\": 538976288,\n    \"size\": 163,\n    \"vsize\": 163,\n    \"weight\": 652,\n    \"locktime\": 538976288,\n    \"vin\": [\n      {\n        \"txid\": \"2020202020202020202020202020202020202020202020202020202020202020\",\n        \"vout\": 538976288,\n        \"scriptSig\": {\n          \"asm\": \"\",\n          \"hex\": \"\"\n        },\n        \"sequence\": 4294967072\n      },\n      {\n        \"txid\": \"20ffffff20202020202020202020202020202020202020202020202020202020\",\n        \"vout\": 538976288,\n        \"scriptSig\": {\n          \"asm\": \"\",\n          \"hex\": \"\"\n        },\n        \"sequence\": 538976288\n      },\n      {\n        \"txid\": \"ffffffff20202020202020202020202020202020202020202020202020202020\",\n        \"vout\": 553648127,\n        \"scriptSig\": {\n          \"asm\": \"\",\n          \"hex\": \"\"\n        },\n        \"sequence\": 538976288\n      }\n    ],\n    \"vout\": [\n      {\n        \"value\": 23148855308.18453536,\n        \"n\": 0,\n        \"scriptPubKey\": {\n          \"asm\": \"[error]\",\n          \"desc\": \"raw(202020)#a84sa0nu\",\n          \"hex\": \"202020\",\n          \"type\": \"nonstandard\"\n        }\n      },\n      {\n        \"value\": 23148855308.18453536,\n        \"n\": 1,\n        \"scriptPubKey\": {\n          \"asm\": \"\",\n          \"desc\": \"raw()#58lrscpx\",\n          \"hex\": \"\",\n          \"type\": \"nonstandard\"\n        }\n      },\n      {\n        \"value\": 23148855308.18453536,\n        \"n\": 2,\n        \"scriptPubKey\": {\n          \"asm\": \"\",\n          \"desc\": \"raw()#58lrscpx\",\n          \"hex\": \"\",\n          \"type\": \"nonstandard\"\n        }\n      }\n    ]\n  },\n  \"global_xpubs\": [\n  ],\n  \"psbt_version\": 0,\n  \"proprietary\": [\n  ],\n  \"unknown\": {\n  },\n  \"inputs\": [\n    {\n      \"witness_utxo\": {\n        \"amount\": 23148855308.18510624,\n        \"scriptPubKey\": {\n          \"asm\": \"1 2020202020202020202020202020202020202020202020202020202020202020\",\n          \"desc\": \"addr(bcrt1pyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqsqm5s4vx)#uxtlp4pp\",\n          \"hex\": \"51202020202020202020202020202020202020202020202020202020202020202020\",\n          \"address\": \"bcrt1pyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqszqgpqyqsqm5s4vx\",\n          \"type\": \"witness_v1_taproot\"\n        }\n      },\n      \"musig2_participant_pubkeys\": [\n        {\n          \"aggregate_pubkey\": \"020000000000000000000000000000000000000000000000000000000000000000\",\n          \"participant_pubkeys\": [\n            \"022020202020202020202020202020202020202020202020202020202020202020\"\n          ]\n        }\n      ]\n    },\n    {\n    },\n    {\n    }\n  ],\n  \"outputs\": [\n    {\n    },\n    {\n    },\n    {\n    }\n  ]\n}\n```\n</details>\n\nAlso, I get \"Access is denied to this issue\" error when I open this link. How can I see this issue?\n> Found by https://issues.oss-fuzz.com/u/3/issues/473123279?pli=1",
          "created_at": "2026-01-05T11:05:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3721,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1565,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3685537028,
      "number": 33994,
      "title": "Mining IPC `createNewBlock` should not return before IBD is over",
      "body": "### Please describe the feature you'd like to see added.\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Is your feature related to a problem, if so please describe it.\n\non SRI [`bitcoin_core_sv2`](https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2) crate, we want to wait for IBD is over as part of the bootstrapping processes\n\ndiscussing with @ismaelsadeeq and @Shourya742 during BTrust dev day, we came to the conclusion that `createNewBlock` shouldn't even return before IBD is over\n\n### Describe the solution you'd like\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Describe any alternatives you've considered\n\n`isInitialBlockDownload` is already available, but it would require us to poll it, which feels a bit backwards with capnproto\n\n### Please leave any additional context\n\nwe're getting reports of crashes when [`sv2-tp`](https://github.com/stratum-mining/sv2-tp) is connected to v30 during IBD\n\nhttps://discord.com/channels/950687892169195530/1179824984592490496/1445351230258937867",
      "state": "open",
      "user": "plebhash",
      "created_at": "2025-12-02T12:10:24Z",
      "updated_at": "2026-01-06T03:05:00Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33994",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3602165226,
          "user": "ismaelsadeeq",
          "body": "@plebhash  It will be nice to get to the root of the issue and see whether it's bitcoin core or from the template provider.\n Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\ncc @Sjors I attempt to reproduce the failure but was not successful yet.\nblocking `createnewblock` from creating template  during ibd is potential solution and would also delegate the responsibility of polling isinitialblockdownload to the node, which is more ideal IMO.\nWe can just make the thread sleeps and wakes up when we are done with ibd and return an empty block.\ncurious to hear what others think.",
          "created_at": "2025-12-02T13:47:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 667,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602376905,
          "user": "Sjors",
          "body": "The problem is that `ChainstateManager::IsInitialBlockDownload()` uses a fairly relaxed heuristic:\n\nhttps://github.com/bitcoin/bitcoin/blob/d0f6d9953a15d7c7111d46dcb76ab2bb18e5dee3/src/validation.cpp#L1998-L2023\n\nSo it latches to `true` when there's still a day worth of blocks left to process.\n\nWe could make this function much more precise by having it consider the most proof-of-work (not invalid) header chain. It would then insist that we have all blocks fully downloaded and verified.\n\nBut that might have impacts in other places in the codebase, potentially causing things to get stuck longer than needed just because we're missing a few recent blocks. So it's probably better to have a new function like `ReallyAtTheTipNow()`.\n\nBoth the `isInitialBlockDownload()` and `createNewBlock()` interface methods could switch to that. It's better for those methods to wait until we're really at the tip, because otherwise we start emitting templates for blocks that are guaranteed to be stale. ",
          "created_at": "2025-12-02T14:37:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 994,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602401780,
          "user": "sipa",
          "body": "You can't use \"active_tip == best_known_block_header\" as condition for mining, because an attacker could mine a block, relay the header, and never relay the block. Sure, very expensive, but if the outcome is shutting down other miners, some joker might try it.\n\nBitcoin nodes are *always* synchronizing, and unless you have very strong evidence to the contrary, you should act as if your active tip is the best block on the chain. If we had evidence of a better block, it would be our best tip instead.\n\n`IsInitialBlockDownload()` is essentially this very conservative check. Only if you're *really* behind it'll say `true`.",
          "created_at": "2025-12-02T14:42:38Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 624,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3602538081,
          "user": "Sjors",
          "body": "Makes sense. We'll have to find another method of preventing a burst of new templates while the node churns through the last day worth of blocks.\n\nThe Template Provider client could simply wait 1 minute at startup if IBD was initially true and changed to false. In practice that only happens after the _node_ restarts (we wouldn't want to waste one minute each time the TP restarts).",
          "created_at": "2025-12-02T15:11:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 383,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602551596,
          "user": "plebhash",
          "body": "> Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\n\nyeah sorry I was in a hurry for the workshop, indeed pasting Discord links is not ideal\n\nthis is what @jbesraa said:\n> I think handling IBD and other initialization aspects is critical when working in production env. \n> As these two services need to set on the same machine you usually deploy them through the same \"task\" and I think they should wait for each other to come fully available until they connect. I did observe issues with core30/tp when it is restarted alongside sv2-tp(this is actually very consistent error that iam still investigating):\n> ```\n> ./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n> ```\n> \n> also sv2-tp seem to be handling initial IBD fine for some period but then something happen:\n> ```\n> 2025-12-02T09:12:18Z [sv2:trace] Waiting to come out of IBD\n> ``` \n> I can see this is printed while core is downloading\n> but then core reach 100%\n> ```\n>    \n> 2025-12-02T09:34:17Z UpdateTip: new best=000000000000000000010925227dbff92c7e5d41d120cec541487f4fcde6d71c height=926118 version=0x2e9ea000 log2_work=95.967332 tx=1278190156 date='2025-12-02T09:33:49Z' progress=1.000000 cache=587.5MiB(4072609txo)\n> ```\n> but I dont see logs from `sv2-tp`\n>\n> ---\n>\n> i think (2) is really just logging and sv2-tp is just working after that but (1) is kinda a problem(might actually be more core problem than sv2-tp)\n\nI think @jbesraa knows how to reproduce it deterministically?",
          "created_at": "2025-12-02T15:14:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1557,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602646676,
          "user": "plebhash",
          "body": "> `IsInitialBlockDownload()` is essentially this very conservative check. Only if you're really behind it'll say true.\n\nhow far behind? are we talking ~2, ~20 or ~200 blocks behind?",
          "created_at": "2025-12-02T15:35:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 181,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3602654786,
          "user": "sipa",
          "body": "> how far behind? are we talking ~2, ~20 or ~200 blocks behind?\n\nA day.",
          "created_at": "2025-12-02T15:37:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 71,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3603140030,
          "user": "jbesraa",
          "body": "> > Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\n> \n> yeah sorry I was in a hurry for the workshop, indeed pasting Discord links is not ideal\n> \n> this is what [@jbesraa](https://github.com/jbesraa) said:\n> \n> > I think handling IBD and other initialization aspects is critical when working in production env.\n> > As these two services need to set on the same machine you usually deploy them through the same \"task\" and I think they should wait for each other to come fully available until they connect. I did observe issues with core30/tp when it is restarted alongside sv2-tp(this is actually very consistent error that iam still investigating):\n> > ```\n> > ./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > also sv2-tp seem to be handling initial IBD fine for some period but then something happen:\n> > ```\n> > 2025-12-02T09:12:18Z [sv2:trace] Waiting to come out of IBD\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > I can see this is printed while core is downloading\n> > but then core reach 100%\n> > ```\n> >    \n> > 2025-12-02T09:34:17Z UpdateTip: new best=000000000000000000010925227dbff92c7e5d41d120cec541487f4fcde6d71c height=926118 version=0x2e9ea000 log2_work=95.967332 tx=1278190156 date='2025-12-02T09:33:49Z' progress=1.000000 cache=587.5MiB(4072609txo)\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > but I dont see logs from `sv2-tp`\n> > \n> > i think (2) is really just logging and sv2-tp is just working after that but (1) is kinda a problem(might actually be more core problem than sv2-tp)\n> \n> I think [@jbesraa](https://github.com/jbesraa) knows how to reproduce it deterministically?\n\nOh hey.\n\nAs mentioned in the original comment, I think there is mainly a problem with (1). \nA bit of info about our setup:\n\nWe run both sv2-tp(by sjors, version 1.0.4) and core 30 via docker on the same (aws)linux EC2 machine. When starting fresh setup, its usually smooth but whenever we need to update a config or something similar and restart the setup, we encounter the following:\n\n`sv2-tp` logs (some data is redacted due to security reasons)\n```\n2025-11-28T13:40:39Z Default data directory\n2025-11-28T13:40:39Z Using data directory \n2025-11-28T13:40:39Z Config file: \n2025-11-28T13:40:39Z Command-line arg: datadir=\n2025-11-28T13:40:39Z Command-line arg: debug=sv2\n2025-11-28T13:40:39Z Command-line arg: ipcconnect=unix:/run/bitcoin/node.sock\n2025-11-28T13:40:39Z Command-line arg: loglevel=\n2025-11-28T13:40:39Z Command-line arg: sv2bind=\n2025-11-28T13:40:39Z Command-line arg: sv2port=\n2025-11-28T13:40:39Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\n2025-11-28T13:40:39Z Using RdSeed as an additional entropy source\n2025-11-28T13:40:39Z Using RdRand as an additional entropy source\n2025-11-28T13:40:39Z [ipc:info] {sv2-tp-1/sv2-tp-1} IPC client first request from current thread, constructing waiter\nConnected to bitcoin-node\n2025-11-28T13:40:39Z [sv2] Reading cached static key from\n2025-11-28T13:40:39Z [sv2:info] Static key: \n2025-11-28T13:40:39Z [sv2:info] Template Provider authority key: \n2025-11-28T13:40:39Z [sv2:trace] Authority key: \n2025-11-28T13:40:39Z [sv2:trace] Certificate hashed data: \n2025-11-28T13:40:39Z [sv2:info] Template Provider listening on \n2025-11-28T13:40:39Z  thread start\n2025-11-28T13:40:39Z sv2 thread start\n2025-11-28T13:40:39Z [ipc:info] {sv2-tp-1/b-sv2-9} IPC client first request from current thread, constructing waiter\n2025-11-28T13:40:39Z [ipc:warning] {sv2-tp-1/b-capnp-loop-7} IPC client: unexpected network disconnect.\n2025-11-28T13:40:39Z [ipc:error] IPC client method call interrupted by disconnect.\n2025-11-28T13:40:39Z \n************************\n************************\nEXCEPTION: N3ipc9ExceptionE       \nEXCEPTION: N3ipc9ExceptionE       \nIPC client method call interrupted by disconnect.       \nIPC client method call interrupted by disconnect.       \nbitcoin in sv2       \nbitcoin in sv2       \nterminate called after throwing an instance of 'ipc::Exception'\n  what():  IPC client method call interrupted by disconnect.\n```\n\n`core-v30` logs (some data is redacted due to security reasons)\n\n```\n2025-11-28T13:40:38Z Bitcoin Core version v30.0 (release build)\n2025-11-28T13:40:38Z parameter interaction: -bind set -> setting -listen=1\n2025-11-28T13:40:38Z Using the 'sse4(1way);sse41(4way);avx2(8way)' SHA256 implementation\n2025-11-28T13:40:39Z Using RdSeed as an additional entropy source\n2025-11-28T13:40:39Z Using RdRand as an additional entropy source\n2025-11-28T13:40:39Z Default data directory\n2025-11-28T13:40:39Z Using data directory \n2025-11-28T13:40:39Z Config file: \n2025-11-28T13:40:39Z Command-line arg: bind=\"0.0.0.0\"\n2025-11-28T13:40:39Z Command-line arg: chain=\"main\"\n2025-11-28T13:40:39Z Command-line arg: datadir=\n2025-11-28T13:40:39Z Command-line arg: ipcbind=\n2025-11-28T13:40:39Z Command-line arg: port=\n2025-11-28T13:40:39Z Command-line arg: printtoconsole=\"\"\n2025-11-28T13:40:39Z Command-line arg: prune=\"1092\"\n2025-11-28T13:40:39Z Command-line arg: rpcbind=\n2025-11-28T13:40:39Z Command-line arg: rpcport=\n2025-11-28T13:40:39Z scheduler thread start\n2025-11-28T13:40:39Z Listening for IPC requests on address \n2025-11-28T13:40:39Z Using wallet directory \n2025-11-28T13:40:39Z init message: Verifying wallet(s)…\n2025-11-28T13:40:39Z Using /16 prefix for IP bucketing\n2025-11-28T13:40:39Z init message: Loading P2P addresses…\n./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n```\n\n",
          "created_at": "2025-12-02T17:14:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 5720,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3603399341,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33994#issuecomment-3602538081\n\n> Makes sense. We'll have to find another method of preventing a burst of new templates while the node churns through the last day worth of blocks.\n\nI think the fact that we have separate `createNewBlock` and `waitNext` to functions to fetch the initial block template and subsequent ones should make this easier to solve, because `createNewBlock` can be conservative and wait to return until after some cooldown period, and `waitNext` can be more responsive and always try to return as quickly as possible. So I think we could just add something like the following to `createNewBlock`\n\n```c++\nconstexpr auto COOLDOWN = 1s;\nwhile (!interrupted && (GetTime() - last_block_connected_time < COOLDOWN) && active_tip != best_known_block_header) {\n    cv.wait_for(lock, COOLDOWN);\n}\n```\n\nChecking `best_known_block_header` would just be an optimization. This wouldn't wait longer than the cooldown period to return after the last block was connected.",
          "created_at": "2025-12-02T18:25:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1021,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3603530038,
          "user": "Sjors",
          "body": "@ryanofsky wrote:\n\n> `GetTime() - last_block_connected_time < COOLDOWN`\n\n@jbesraa:\n\nThat looks nice, and would keep client code simple.\n\n> We run both sv2-tp(by sjors, version 1.0.4)\n\nYou should upgrade to [v1.0.5](https://github.com/stratum-mining/sv2-tp/releases/tag/v1.0.5) :-)\n\n> and core 30\n\nAt this point I think it's better to run the `30.x` branch built from source if you can. It has quite a few IPC related bug fixes. Otherwise you're going to hunt for bugs that have already been fixed. Once v30.1 is out it's fine to switch to a release again.",
          "created_at": "2025-12-02T18:56:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 555,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3701464834,
          "user": "Sjors",
          "body": "Implemented the cooldown functionality in #34184.",
          "created_at": "2025-12-31T05:17:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 49,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3711436335,
          "user": "plebhash",
          "body": "@Sjors do you think this would land on `v30.2` or `v31`?",
          "created_at": "2026-01-05T17:41:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 56,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3712927325,
          "user": "Sjors",
          "body": "@plebhash if enough people review it, v31 is still a few months away.",
          "created_at": "2026-01-06T03:04:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 69,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1126,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3765907820,
      "number": 34163,
      "title": "qa: Framework fails when initiating node from cached chain",
      "body": "Consider the following MRE:\n```\n#!/usr/bin/env python3\n# File: test/functional/MRE.py\n\nfrom test_framework.test_framework import BitcoinTestFramework\n\nclass MRE(BitcoinTestFramework):\n    def set_test_params(self):\n        self.num_nodes = 1\n        self.setup_clean_chain = False  # Test succeeds when True.\n\n    def skip_test_if_missing_module(self):\n        self.skip_if_no_wallet()\n\n    def run_test(self):\n        self.log.info(\"OK\")\n\nif __name__ == '__main__':\n    MRE(__file__).main()\n```\n\nOn OpenIndiana:\n```\n$ $ env CXXFLAGS=\"-pthread\" cmake -B build -DENABLE_IPC=OFF\n$ cmake --build build\n$ python3.14 ./build/test/functional/MRE.py \n2025-12-28T17:43:24.329616Z TestFramework (INFO): PRNG seed is: 2377333319933758475\n2025-12-28T17:43:24.331825Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_f81ll6fk\n2025-12-28T17:43:24.627126Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 138, in main\n    self.setup()\n    ~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 269, in setup\n    self.setup_network()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 360, in setup_network\n    self.setup_nodes()\n    ~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 384, in setup_nodes\n    self.import_deterministic_coinbase_privkeys()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 401, in import_deterministic_coinbase_privkeys\n    self.init_wallet(node=i)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 408, in init_wallet\n    n.createwallet(wallet_name=wallet_name, load_on_startup=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 156, in __call__\n    raise JSONRPCException(response['error'], status)\ntest_framework.authproxy.JSONRPCException: Wallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n (-4)\n2025-12-28T17:43:24.682846Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-28T17:43:24.683153Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_f81ll6fk\n2025-12-28T17:43:24.683377Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_f81ll6fk/test_framework.log\n2025-12-28T17:43:24.684155Z TestFramework (ERROR): \n2025-12-28T17:43:24.684615Z TestFramework (ERROR): Hint: Call /export/home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_f81ll6fk' to consolidate all logs\n2025-12-28T17:43:24.684729Z TestFramework (ERROR): \n2025-12-28T17:43:24.684901Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-28T17:43:24.685270Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-28T17:43:24.685378Z TestFramework (ERROR): \n[node 0] Cleaning up leftover process\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-28T18:45:59Z",
      "updated_at": "2026-01-06T00:04:46Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/34163",
      "labels": [
        "Wallet",
        "Tests",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3696088086,
          "user": "maflcko",
          "body": "I think the difference is where the wallets dir is located with a clean datadir vs a datadir with a chain (reminds me of https://github.com/bitcoin/bitcoin/issues/34128)\n\nIf yes, this may be possible to reproduce outside the test framework.\n\nIs OpenIndiana the only distro that fails?",
          "created_at": "2025-12-29T10:22:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 284,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3696193843,
          "user": "hebasto",
          "body": "> Is OpenIndiana the only distro that fails?\n\nYes, as far I'm aware of. OmniOS, another illumos-based distro, works fine.",
          "created_at": "2025-12-29T11:06:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 121,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3697100259,
          "user": "furszy",
          "body": "I don't think it is related to #34128. It sounds more like a permissions issue. Can try creating a wallet in the /tmp/ dir manually to test it?",
          "created_at": "2025-12-29T17:30:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 143,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3697357735,
          "user": "furszy",
          "body": "@hebasto, run #34176 whenever you get a chance.",
          "created_at": "2025-12-29T19:46:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 47,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3697507193,
          "user": "hebasto",
          "body": "> [@hebasto](https://github.com/hebasto), run [#34176](https://github.com/bitcoin/bitcoin/pull/34176) whenever you get a chance.\n\nThanks @furszy!\n\nBelow is the log of running https://github.com/bitcoin/bitcoin/pull/34176:\n```\n$ git rev-parse HEAD\n68a467799381d6e89f40267fc500b734975b5433\n$ env CXXFLAGS=\"-pthread\" cmake -B build -DENABLE_IPC=OFF\n$ cmake --build build\n$ python3.14 ./build/test/functional/MRE.py\n2025-12-29T19:35:37.016521Z TestFramework (INFO): PRNG seed is: 3863112130535673226\n2025-12-29T19:35:37.017830Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_3_be70q7\n2025-12-29T19:35:37.317178Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 138, in main\n    self.setup()\n    ~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 269, in setup\n    self.setup_network()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 360, in setup_network\n    self.setup_nodes()\n    ~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 384, in setup_nodes\n    self.import_deterministic_coinbase_privkeys()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 401, in import_deterministic_coinbase_privkeys\n    self.init_wallet(node=i)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 408, in init_wallet\n    n.createwallet(wallet_name=wallet_name, load_on_startup=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 156, in __call__\n    raise JSONRPCException(response['error'], status)\ntest_framework.authproxy.JSONRPCException: Wallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n (-4)\n2025-12-29T19:35:37.372890Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-29T19:35:37.373126Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_3_be70q7\n2025-12-29T19:35:37.373353Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_3_be70q7/test_framework.log\n2025-12-29T19:35:37.374043Z TestFramework (ERROR): \n2025-12-29T19:35:37.374478Z TestFramework (ERROR): Hint: Call /export/home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_3_be70q7' to consolidate all logs\n2025-12-29T19:35:37.374601Z TestFramework (ERROR): \n2025-12-29T19:35:37.374783Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-29T19:35:37.375148Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-29T19:35:37.375266Z TestFramework (ERROR): \n[node 0] Cleaning up leftover process\n```\n\nThe combined log follows:\n```\n$ python3.14 /export/home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_3_be70q7'\n test  2025-12-29T19:35:37.016521Z TestFramework (INFO): PRNG seed is: 3863112130535673226 \n test  2025-12-29T19:35:37.016742Z TestFramework (DEBUG): Setting up network thread \n test  2025-12-29T19:35:37.017830Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_3_be70q7 \n test  2025-12-29T19:35:37.018043Z TestFramework (DEBUG): Copy cache directory /export/home/hebasto/dev/bitcoin/build/test/cache/node0 to node 0 \n test  2025-12-29T19:35:37.051574Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \n node0 2025-12-29T19:35:37.067254Z [init] [init/common.cpp:153] [LogPackageVersion] Bitcoin Core version v30.99.0-68a467799381 (release build) \n node0 2025-12-29T19:35:37.067260Z [init] [init.cpp:747] [InitParameterInteraction] parameter interaction: -bind set -> setting -listen=1 \n node0 2025-12-29T19:35:37.067442Z [init] [kernel/context.cpp:20] [operator()] Using the 'x86_shani(1way;2way)' SHA256 implementation \n node0 2025-12-29T19:35:37.168629Z [init] [random.cpp:110] [ReportHardwareRand] Using RdSeed as an additional entropy source \n node0 2025-12-29T19:35:37.168644Z [init] [random.cpp:113] [ReportHardwareRand] Using RdRand as an additional entropy source \n node0 2025-12-29T19:35:37.170733Z [init] [init/common.cpp:121] [StartLogging] Default data directory /export/home/hebasto/.bitcoin \n node0 2025-12-29T19:35:37.170741Z [init] [init/common.cpp:122] [StartLogging] Using data directory /tmp/bitcoin_func_test_3_be70q7/node0/regtest \n node0 2025-12-29T19:35:37.170756Z [init] [init/common.cpp:131] [StartLogging] Config file: /tmp/bitcoin_func_test_3_be70q7/node0/bitcoin.conf \n node0 2025-12-29T19:35:37.170772Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: regtest=\"1\" \n node0 2025-12-29T19:35:37.170781Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] bind=\"127.0.0.1\" \n node0 2025-12-29T19:35:37.170787Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] connect=\"0\" \n node0 2025-12-29T19:35:37.170793Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] discover=\"0\" \n node0 2025-12-29T19:35:37.170799Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] dnsseed=\"0\" \n node0 2025-12-29T19:35:37.170805Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] fallbackfee=\"0.0002\" \n node0 2025-12-29T19:35:37.170810Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] fixedseeds=\"0\" \n node0 2025-12-29T19:35:37.170817Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] keypool=\"1\" \n node0 2025-12-29T19:35:37.170825Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] listenonion=\"0\" \n node0 2025-12-29T19:35:37.170831Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] maxconnections=\"94\" \n node0 2025-12-29T19:35:37.170837Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] natpmp=\"0\" \n node0 2025-12-29T19:35:37.170842Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] par=\"2\" \n node0 2025-12-29T19:35:37.170849Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] peertimeout=\"999999999\" \n node0 2025-12-29T19:35:37.170855Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] port=\"11413\" \n node0 2025-12-29T19:35:37.170861Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] printtoconsole=\"0\" \n node0 2025-12-29T19:35:37.170867Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] rpcdoccheck=\"1\" \n node0 2025-12-29T19:35:37.170873Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] rpcport=\"16413\" \n node0 2025-12-29T19:35:37.170878Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] rpcservertimeout=\"99000\" \n node0 2025-12-29T19:35:37.170885Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] rpcthreads=\"2\" \n node0 2025-12-29T19:35:37.170891Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] server=\"1\" \n node0 2025-12-29T19:35:37.170897Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] shrinkdebugfile=\"0\" \n node0 2025-12-29T19:35:37.170902Z [init] [common/args.cpp:863] [logArgsPrefix] Config file arg: [regtest] unsafesqlitesync=\"1\" \n node0 2025-12-29T19:35:37.170910Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: datadir=\"/tmp/bitcoin_func_test_3_be70q7/node0\" \n node0 2025-12-29T19:35:37.170916Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: debug=\"\" \n node0 2025-12-29T19:35:37.170922Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: debugexclude=\"libevent\" \n node0 2025-12-29T19:35:37.170928Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: debugexclude=\"leveldb\" \n node0 2025-12-29T19:35:37.170933Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: debugexclude=\"rand\" \n node0 2025-12-29T19:35:37.170945Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: loglevel=\"trace\" \n node0 2025-12-29T19:35:37.170951Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: logratelimit=false \n node0 2025-12-29T19:35:37.170957Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: logsourcelocations=\"\" \n node0 2025-12-29T19:35:37.170962Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: logthreadnames=\"\" \n node0 2025-12-29T19:35:37.170969Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: logtimemicros=\"\" \n node0 2025-12-29T19:35:37.170975Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: uacomment=\"testnode0\" \n node0 2025-12-29T19:35:37.170981Z [init] [common/args.cpp:863] [logArgsPrefix] Command-line arg: v2transport=\"0\" \n node0 2025-12-29T19:35:37.171018Z [init] [init.cpp:1414] [AppInitMain] Using at most 94 automatic connections (65536 file descriptors available) \n node0 2025-12-29T19:35:37.171600Z [init] [init.cpp:1454] [AppInitMain] Log rate limiting disabled \n node0 2025-12-29T19:35:37.171642Z [scheduler] [util/thread.cpp:20] [TraceThread] scheduler thread start \n node0 2025-12-29T19:35:37.177124Z [init] [httpserver.cpp:241] [InitHTTPAllowList] [http] Allowing HTTP connections from: 127.0.0.0/8 ::1/128 \n node0 2025-12-29T19:35:37.177357Z [init] [httpserver.cpp:394] [HTTPBindAddresses] Binding RPC on address ::1 port 16413 \n node0 2025-12-29T19:35:37.177537Z [init] [httpserver.cpp:394] [HTTPBindAddresses] Binding RPC on address 127.0.0.1 port 16413 \n node0 2025-12-29T19:35:37.177575Z [init] [httpserver.cpp:477] [InitHTTPServer] [http] Initialized HTTP server \n node0 2025-12-29T19:35:37.177586Z [init] [httpserver.cpp:479] [InitHTTPServer] [http] creating work queue of depth 64 \n node0 2025-12-29T19:35:37.177593Z [init] [rpc/server.cpp:275] [StartRPC] [rpc] Starting RPC \n node0 2025-12-29T19:35:37.177611Z [init] [httprpc.cpp:333] [StartHTTPRPC] [rpc] Starting HTTP RPC server \n node0 2025-12-29T19:35:37.177709Z [init] [rpc/request.cpp:140] [GenerateAuthCookie] Generated RPC authentication cookie /tmp/bitcoin_func_test_3_be70q7/node0/regtest/.cookie \n node0 2025-12-29T19:35:37.177725Z [init] [rpc/request.cpp:141] [GenerateAuthCookie] Permissions used for cookie: rw------- \n node0 2025-12-29T19:35:37.177742Z [init] [httprpc.cpp:265] [InitRPCAuthentication] Using random cookie authentication. \n node0 2025-12-29T19:35:37.177776Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for / (exactmatch 1) \n node0 2025-12-29T19:35:37.177788Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for /wallet/ (exactmatch 0) \n node0 2025-12-29T19:35:37.177797Z [init] [httpserver.cpp:502] [StartHTTPServer] Starting HTTP server with 2 worker threads \n node0 2025-12-29T19:35:37.177917Z [http] [httpserver.cpp:354] [ThreadHTTP] [http] Entering http event loop \n node0 2025-12-29T19:35:37.178037Z [init] [wallet/load.cpp:53] [VerifyWallets] Using wallet directory /tmp/bitcoin_func_test_3_be70q7/node0/regtest \n node0 2025-12-29T19:35:37.178063Z [init] [wallet/walletdb.cpp:69] [LogDBInfo] Using SQLite Version 3.51.1 \n node0 2025-12-29T19:35:37.178111Z [init] [noui.cpp:57] [noui_InitMessage] init message: Verifying wallet(s)… \n node0 2025-12-29T19:35:37.178216Z [init] [init.cpp:1574] [AppInitMain] Using /16 prefix for IP bucketing \n node0 2025-12-29T19:35:37.178223Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading P2P addresses… \n node0 2025-12-29T19:35:37.180357Z [init] [addrdb.cpp:211] [LoadAddrman] Creating peers.dat because the file was not found (\"/tmp/bitcoin_func_test_3_be70q7/node0/regtest/peers.dat\") \n node0 2025-12-29T19:35:37.180575Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading banlist… \n node0 2025-12-29T19:35:37.180592Z [init] [banman.cpp:42] [LoadBanlist] Recreating the banlist database \n node0 2025-12-29T19:35:37.180648Z [init] [banman.cpp:68] [DumpBanlist] [net] Flushed 0 banned node addresses/subnets to disk  0ms \n node0 2025-12-29T19:35:37.180674Z [init] [net.cpp:2434] [SetTryNewOutboundPeer] [net] setting try another outbound peer=false \n node0 2025-12-29T19:35:37.180701Z [init] [net.cpp:3219] [SetNetworkActive] SetNetworkActive: true \n node0 2025-12-29T19:35:37.183146Z [init] [policy/fees/block_policy_estimator.cpp:564] [CBlockPolicyEstimator] /tmp/bitcoin_func_test_3_be70q7/node0/regtest/fee_estimates.dat is not found. Continue anyway. \n node0 2025-12-29T19:35:37.183260Z [init] [init.cpp:1780] [AppInitMain] Cache configuration: \n node0 2025-12-29T19:35:37.183276Z [init] [init.cpp:1781] [AppInitMain] * Using 2.0 MiB for block index database \n node0 2025-12-29T19:35:37.183288Z [init] [init.cpp:1789] [AppInitMain] * Using 8.0 MiB for chain state database \n node0 2025-12-29T19:35:37.183342Z [init] [init.cpp:1300] [InitAndLoadChainstate] * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) \n node0 2025-12-29T19:35:37.183384Z [init] [checkqueue.h:147] [CCheckQueue] Script verification uses 1 additional threads \n node0 2025-12-29T19:35:37.183606Z [init] [node/blockstorage.cpp:1203] [InitBlocksdirXorKey] Using obfuscation key for blocksdir *.dat files (/tmp/bitcoin_func_test_3_be70q7/node0/regtest/blocks): '5d4aa856db94dcfc' \n node0 2025-12-29T19:35:37.183686Z [init] [dbwrapper.cpp:236] [CDBWrapper] Opening LevelDB in /tmp/bitcoin_func_test_3_be70q7/node0/regtest/blocks/index \n node0 2025-12-29T19:35:37.184533Z [init] [dbwrapper.cpp:244] [CDBWrapper] Opened LevelDB successfully \n node0 2025-12-29T19:35:37.184564Z [init] [dbwrapper.cpp:260] [CDBWrapper] Using obfuscation key for /tmp/bitcoin_func_test_3_be70q7/node0/regtest/blocks/index: 0000000000000000 \n node0 2025-12-29T19:35:37.206110Z [init] [script/sigcache.cpp:35] [SignatureCache] Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements \n node0 2025-12-29T19:35:37.227564Z [init] [validation.cpp:2067] [ValidationCache] Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements \n node0 2025-12-29T19:35:37.227582Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading block index… \n node0 2025-12-29T19:35:37.227596Z [init] [node/chainstate.cpp:150] [LoadChainstate] Validating signatures for all blocks. \n node0 2025-12-29T19:35:37.227607Z [init] [node/chainstate.cpp:152] [LoadChainstate] Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000 \n node0 2025-12-29T19:35:37.228053Z [init] [node/blockstorage.cpp:530] [LoadBlockIndexDB] Loading block index db: last block file = 0 \n node0 2025-12-29T19:35:37.228070Z [init] [node/blockstorage.cpp:534] [LoadBlockIndexDB] Loading block index db: last block file info: CBlockFileInfo(blocks=200, size=52530, heights=0...199, time=2011-02-02...2011-02-02) \n node0 2025-12-29T19:35:37.228077Z [init] [node/blockstorage.cpp:545] [LoadBlockIndexDB] Checking all blk files are present... \n node0 2025-12-29T19:35:37.228202Z [init] [node/chainstate.cpp:87] [CompleteChainstateInitialization] Initializing chainstate Chainstate [ibd] @ height -1 (null) \n node0 2025-12-29T19:35:37.228221Z [init] [dbwrapper.cpp:236] [CDBWrapper] Opening LevelDB in /tmp/bitcoin_func_test_3_be70q7/node0/regtest/chainstate \n node0 2025-12-29T19:35:37.228740Z [init] [dbwrapper.cpp:244] [CDBWrapper] Opened LevelDB successfully \n node0 2025-12-29T19:35:37.228765Z [init] [dbwrapper.cpp:260] [CDBWrapper] Using obfuscation key for /tmp/bitcoin_func_test_3_be70q7/node0/regtest/chainstate: 926cb82614cf3a36 \n node0 2025-12-29T19:35:37.228872Z [init] [validation.cpp:4651] [LoadChainTip] Loaded best chain: hashBestChain=30068a561f1d748696d6fe1368b2b9b9f765095cda5b767b291e8bf84caff9f1 height=199 date=2011-02-02T23:17:17Z progress=0.000425 \n node0 2025-12-29T19:35:37.228913Z [init] [noui.cpp:57] [noui_InitMessage] init message: Verifying blocks… \n node0 2025-12-29T19:35:37.228938Z [init] [validation.cpp:4699] [VerifyDB] Verifying last 6 blocks at level 3 \n node0 2025-12-29T19:35:37.228966Z [init] [validation.cpp:4708] [VerifyDB] Verification progress: 0% \n node0 2025-12-29T19:35:37.229357Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 16% \n node0 2025-12-29T19:35:37.229547Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 33% \n node0 2025-12-29T19:35:37.229733Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 50% \n node0 2025-12-29T19:35:37.229926Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 66% \n node0 2025-12-29T19:35:37.230132Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 83% \n node0 2025-12-29T19:35:37.230322Z [init] [validation.cpp:4716] [VerifyDB] Verification progress: 99% \n node0 2025-12-29T19:35:37.230330Z [init] [validation.cpp:4810] [VerifyDB] Verification: No coin database inconsistencies in last 6 blocks (6 transactions) \n node0 2025-12-29T19:35:37.230337Z [init] [init.cpp:1388] [InitAndLoadChainstate] Block index and chainstate loaded \n node0 2025-12-29T19:35:37.230396Z [init] [init.cpp:1888] [AppInitMain] Setting NODE_NETWORK in non-prune mode \n node0 2025-12-29T19:35:37.230464Z [init] [init.cpp:2018] [AppInitMain] block tree size = 200 \n node0 2025-12-29T19:35:37.230470Z [init] [init.cpp:2031] [AppInitMain] nBestHeight = 199 \n node0 2025-12-29T19:35:37.230510Z [initload] [util/thread.cpp:20] [TraceThread] initload thread start \n node0 2025-12-29T19:35:37.230592Z [init] [net.cpp:3192] [BindListenPort] Bound to 127.0.0.1:11413 \n node0 2025-12-29T19:35:37.230615Z [init] [noui.cpp:57] [noui_InitMessage] init message: Starting network threads… \n node0 2025-12-29T19:35:37.230678Z [initload] [node/mempool_persist.cpp:49] [LoadMempool] Failed to open mempool file. Continuing anyway. \n node0 2025-12-29T19:35:37.230710Z [init] [net.cpp:3388] [Start] DNS seeding disabled \n node0 2025-12-29T19:35:37.230825Z [net] [util/thread.cpp:20] [TraceThread] net thread start \n node0 2025-12-29T19:35:37.230889Z [init] [noui.cpp:57] [noui_InitMessage] init message: Done loading \n node0 2025-12-29T19:35:37.230906Z [addcon] [util/thread.cpp:20] [TraceThread] addcon thread start \n node0 2025-12-29T19:35:37.230955Z [msghand] [util/thread.cpp:20] [TraceThread] msghand thread start \n node0 2025-12-29T19:35:37.231022Z [initload] [util/thread.cpp:22] [TraceThread] initload thread exit \n node0 2025-12-29T19:35:37.311596Z [http] [httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:41193 \n node0 2025-12-29T19:35:37.311969Z [httpworker.1] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-12-29T19:35:37.313694Z [http] [httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:41193 \n node0 2025-12-29T19:35:37.313798Z [httpworker.1] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__ \n test  2025-12-29T19:35:37.314579Z TestFramework.node0 (DEBUG): RPC successfully started \n node0 2025-12-29T19:35:37.315136Z [http] [httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:41193 \n node0 2025-12-29T19:35:37.315238Z [httpworker.1] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=createwallet user=__cookie__ \n node0 2025-12-29T19:35:37.316047Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: cannot open file at line 46164 of [281fc0e9af] \n node0 2025-12-29T19:35:37.316066Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: os_unix.c:46164: (0) lstat(/tmp/bitcoin_func_test_3_be70q7/node0/regtest/default_wallet/wallet.dat) - \n node0 2025-12-29T19:35:37.316084Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: cannot open file at line 46239 of [281fc0e9af] \n test  2025-12-29T19:35:37.317178Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 138, in main\n                                       self.setup()\n                                       ~~~~~~~~~~^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 269, in setup\n                                       self.setup_network()\n                                       ~~~~~~~~~~~~~~~~~~^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 360, in setup_network\n                                       self.setup_nodes()\n                                       ~~~~~~~~~~~~~~~~^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 384, in setup_nodes\n                                       self.import_deterministic_coinbase_privkeys()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 401, in import_deterministic_coinbase_privkeys\n                                       self.init_wallet(node=i)\n                                       ~~~~~~~~~~~~~~~~^^^^^^^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 408, in init_wallet\n                                       n.createwallet(wallet_name=wallet_name, load_on_startup=True)\n                                       ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                     File \"/export/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 156, in __call__\n                                       raise JSONRPCException(response['error'], status)\n                                   test_framework.authproxy.JSONRPCException: Wallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n                                    (-4)\n test  2025-12-29T19:35:37.321618Z TestFramework (DEBUG): Closing down network thread \n test  2025-12-29T19:35:37.372890Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2025-12-29T19:35:37.373126Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_3_be70q7 \n test  2025-12-29T19:35:37.373353Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_3_be70q7/test_framework.log \n test  2025-12-29T19:35:37.374043Z TestFramework (ERROR): \n test  2025-12-29T19:35:37.374478Z TestFramework (ERROR): Hint: Call /export/home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_3_be70q7' to consolidate all logs \n test  2025-12-29T19:35:37.374601Z TestFramework (ERROR): \n test  2025-12-29T19:35:37.374783Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2025-12-29T19:35:37.375148Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2025-12-29T19:35:37.375266Z TestFramework (ERROR): \n\n```",
          "created_at": "2025-12-29T20:43:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 24212,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3697512352,
          "user": "hebasto",
          "body": "> I don't think it is related to [#34128](https://github.com/bitcoin/bitcoin/issues/34128). It sounds more like a permissions issue. Can try creating a wallet in the /tmp/ dir manually to test it?\n\nSpecifing any other directory, for example, with `--tmpdir $(pwd)/tmp`, does not help.",
          "created_at": "2025-12-29T20:46:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 284,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3698591093,
          "user": "maflcko",
          "body": "I wonder if you can reproduce this outside of the test framework:\n\n* Start once, to create a datadir\n* Delete empty wallets dir, similar to the test framework: `os.rmdir(cache_path('wallets'))  # Remove empty wallets dir`\n* Start again, and create the wallet, similar to the test framework via the `createwallet` RPC.",
          "created_at": "2025-12-30T07:58:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 317,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3699920517,
          "user": "furszy",
          "body": "> node0 2025-12-29T19:35:37.316047Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: cannot open file at line 46164 of [281fc0e9af] \n node0 2025-12-29T19:35:37.316066Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: os_unix.c:46164: (0) lstat(/tmp/bitcoin_func_test_3_be70q7/node0/regtest/default_wallet/wallet.dat) - \n node0 2025-12-29T19:35:37.316084Z [httpworker.1] [wallet/sqlite.cpp:43] [ErrorLogCallback] [warning] SQLite Error. Code: 14. Message: cannot open file at line 46239 of [281fc0e9af] \n\nPer the logs, sqlite is failing after a `lstat()` call. This seems to be OS specific rather than an issue on our side. OpenIndiana seems to have more advanced access control features, so probably perms behave differently than on other systems.\n\nCould try explicitly setting broader perms on the directory to ensure sqlite can access it. Also, could check perms during the test; add a breakpoint just before calling `createwallet` and check the directory perms manually.",
          "created_at": "2025-12-30T16:48:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1075,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3703543097,
          "user": "hebasto",
          "body": "> I wonder if you can reproduce this outside of the test framework:\n> \n>    * Start once, to create a datadir\n> \n>    * Delete empty wallets dir, similar to the test framework: `os.rmdir(cache_path('wallets'))  # Remove empty wallets dir`\n> \n>    * Start again, and create the wallet, similar to the test framework via the `createwallet` RPC.\n\nI tested this scenario, and it works as expected.",
          "created_at": "2026-01-01T10:59:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 393,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3703927806,
          "user": "hebasto",
          "body": "It appears that `sqlite3_open_v2` fails only when executed in the functional test context. However, I didn't find any filesystem permission violations.",
          "created_at": "2026-01-01T17:27:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 151,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3703940232,
          "user": "maflcko",
          "body": "I wonder if the `            shutil.copytree(cache_node_dir, to_dir)` changes any permissions.\n\n\n\n\n> I tested this scenario, and it works as expected.\n\nDoes it even pass when you run it with the datadir set to the datadir of the previously failing test. I.e. `/tmp/bitcoin_func_test_3_be70q7`.\n\nDoes it pass when you set the datadir to the `cache_node_dir` manually?",
          "created_at": "2026-01-01T17:44:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 366,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3704000717,
          "user": "hebasto",
          "body": "> It appears that `sqlite3_open_v2` fails only when executed in the functional test context. However, I didn't find any filesystem permission violations.\n\nWhen building `sqlite` from source (using the pre-[1db74914706fcfafb22646288458604a4a7b6282](https://github.com/bitcoin/bitcoin/commit/1db74914706fcfafb22646288458604a4a7b6282) branch), the issue disappears, which makes me even more confused. ",
          "created_at": "2026-01-01T18:58:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 398,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3704139748,
          "user": "hebasto",
          "body": "> I wonder if the ` shutil.copytree(cache_node_dir, to_dir)` changes any permissions.\n> \n> > I tested this scenario, and it works as expected.\n> \n> Does it even pass when you run it with the datadir set to the datadir of the previously failing test. I.e. `/tmp/bitcoin_func_test_3_be70q7`.\n\nIt fails:\n```\n$ ./build/bin/bitcoin-cli -regtest -datadir=/tmp/bitcoin_func_test_2ku20ra3/node0 createwallet default_wallet\nerror code: -4\nerror message:\nWallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n\n$ ./build/bin/bitcoin-cli -regtest -datadir=/tmp/bitcoin_func_test_2ku20ra3/node0 createwallet default_wallet_2\nerror code: -4\nerror message:\nWallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n\n```\n\n> Does it pass when you set the datadir to the `cache_node_dir` manually?\n\nIt fails as well:\n```\n$ ./build/bin/bitcoin-cli -regtest -datadir=/export/home/hebasto/dev/bitcoin/build/test/cache/node0 createwallet default_wallet\nerror code: -4\nerror message:\nWallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n\n```",
          "created_at": "2026-01-01T21:46:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1162,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3704208650,
          "user": "hebasto",
          "body": "> > I wonder if you can reproduce this outside of the test framework:\n> > \n> > * Start once, to create a datadir\n> > * Delete empty wallets dir, similar to the test framework: `os.rmdir(cache_path('wallets'))  # Remove empty wallets dir`\n> > * Start again, and create the wallet, similar to the test framework via the `createwallet` RPC.\n> \n> I tested this scenario, and it works as expected.\n\nI found the culprit: the `-bind` option.\n\nBelow are the steps to reproduce the issue:\n```\n$ mkdir $HOME/dd\n$ ./build/bin/bitcoind -regtest -datadir=$HOME/dd -bind=127.0.0.1 -daemon\nBitcoin Core starting\n$ ./build/bin/bitcoin-cli -regtest -datadir=$HOME/dd stop\nBitcoin Core stopping\n$ rm -rf $HOME/dd/regtest/wallets\n$ ./build/bin/bitcoind -regtest -datadir=$HOME/dd -bind=127.0.0.1 -daemon\nBitcoin Core starting\n$ ./build/bin/bitcoin-cli -regtest -datadir=$HOME/dd createwallet default_wallet\nerror code: -4\nerror message:\nWallet file verification failed. SQLiteDatabase: Failed to open database: unable to open database file\n\n$ ./build/bin/bitcoin-cli -regtest -datadir=$HOME/dd stop\nBitcoin Core stopping\n```\n\nThe SQLite package installed on the system is `database/sqlite-3@3.51.1-2025.0.0.0`.",
          "created_at": "2026-01-01T23:01:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 1191,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3671,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3690243752,
      "number": 33999,
      "title": "FUZZ=psbt in musig2, runs into uninitialized read",
      "body": "(found by Murch in https://github.com/bitcoin-core/qa-assets/pull/246)\n\n _Originally posted by @maflcko in https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2585106930_\n\n(needs a hardened libc++, msan, or valgrind)\n\n```\n$ echo 'cHNidP8BAP0+AQIAAAAGy4dxGNHKAQgFPtEAoVgyMqb+N0ghgmdne5OjULYs2sUAAAr/AP3////L\nfnEY0crZmwU+EVahszExpv43SCGCZ2d7k6NQtizaOwADAC4ABHwdAMt+cRjRytmbBT4RVqFYMTGm\n/jdIIYJnZ3uTo1AAOwAsAAC2KwD9////hqbXlTl39C5ZmAtOAI4+zy32vWLVnyQjw7IvQsBa6rYA\nAAcAAP3//zKG/zqgb7JIwmli68xeUjUXVp+c4b/tvc55IsAI4yQAAAAAAAAA/f///8t/0cpxGNmb\nBT4RVqFYMTOm/jdIIXj///8AAAAAgNo7AACAAAD9//3/AiHf9QUAAAAAFgAU9/Ykq9yiCFGnUpsi\nRsS6FFGLkQEAAAAAAAABABYAFEEQliEApQAADCBABv78gsn+/////wAAAAAAAAAAACIagHQAAAAV\nDLQyJycoAHNiKDIDAEIAAEEA/wEABgDI/jdIIYJnZ3uTo1AAOwAsAAC2KwD9////hqbXAY9zeZ10\nc/zcAAEBK2ECEWUrKwAAIlEgcPx0K2ICYgQkKwABAQEBAQsCAgAERUIADwADAAADmSsAAAA=' | base64 --decode > /tmp/crash.bin \n\n\n$ FUZZ=psbt ./bld-cmake/bin/fuzz -runs=1 /tmp/crash.bin \nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 494792800\nINFO: Loaded 1 modules   (385403 inline 8-bit counters): 385403 [0x55c06b279420, 0x55c06b2d759b), \nINFO: Loaded 1 PC tables (385403 PCs): 385403 [0x55c06b2d75a0,0x55c06b8b8d50), \n./bld-cmake/bin/fuzz: Running 1 inputs 1 time(s) each.\nRunning: /tmp/crash.bin\n/usr/bin/../include/c++/v1/span:512: assertion __offset <= size() failed: span<T>::subspan(offset, count): offset out of range\n```\n\nA shorter input:\n\n```\n$ echo 'cHNidP8BADMAAZJuAQAAAAAAAAAAAABMHQD/AAAAAAAAAAAA//////9BAB4AjIwAAAD5////AAAA\n/NwAAQErYQIAAAAAAAAiUSBw/G0rYgJicCsrtgAA2P//+HN0AAIA+f//7gAF++8AACIaCAEAAP8A\ncHNidP8BABMAAiEeAAEXDD4AAAEBAACCpP73IUL8j3+PjNNzYnT/AAAAAAAAlpb/AAAAAAAAAAYE\nAisAAAA=' | base64 --decode > /tmp/crash.bin ",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-03T13:26:36Z",
      "updated_at": "2026-01-05T22:56:50Z",
      "closed_at": "2026-01-05T22:56:50Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33999",
      "labels": [
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3606863179,
          "user": "fanquake",
          "body": "cc @achow101 @fjahr @rkrux ",
          "created_at": "2025-12-03T13:28:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 27,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3612862383,
          "user": "fanquake",
          "body": "https://issues.oss-fuzz.com/issues/465913232.",
          "created_at": "2025-12-04T15:40:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 45,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1768,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3744808529,
      "number": 34108,
      "title": "mempool_updatefromblock.py fails on 32-bit (armhf, ...)",
      "body": "Steps to reproduce:\n\n* armhf metal, or via `podman run -it --rm --platform linux/arm/v7 'debian:trixie'`\n* `export DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y`\n* `rm -rf ./bld-bisect/ && cmake -B ./bld-bisect -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++'  --preset=dev-mode -DBUILD_UTIL_CHAINSTATE=OFF -DBUILD_BENCH=OFF -DBUILD_FUZZ_BINARY=OFF -DBUILD_GUI=OFF -DBUILD_KERNEL_LIB=OFF -DBUILD_TESTS=OFF -DENABLE_WALLET=OFF -DENABLE_IPC=OFF -DWITH_ZMQ=OFF -DWITH_BDB=OFF -DWITH_NATPMP=OFF -DWITH_NATPMPP=OFF -DWITH_MINIUPNPC=OFF -DWITH_MULTIPROCESS=OFF`\n* `cmake --build ./bld-bisect --parallel  $(nproc)  &&  ./bld-bisect/test/functional/mempool_updatefromblock.py --timeout-factor 5`\n\nFirst bad commit is 47894367b583c06c53d568dc4a984d27bac8f742\n\n\n```\n2025-12-18T20:39:45.629000Z TestFramework (INFO): PRNG seed is: 1933782243\n2025-12-18T20:39:45.630000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_b7nlv98l\n2025-12-18T20:39:47.600000Z TestFramework (INFO): Creating 100 transactions...\n2025-12-18T20:39:50.975000Z TestFramework (INFO): The batch of 25 transactions has been accepted into the mempool.\n2025-12-18T20:39:51.183000Z TestFramework (INFO): All of the transactions from the current batch have been mined into a block.\n2025-12-18T20:39:59.928000Z TestFramework (INFO): The batch of 25 transactions has been accepted into the mempool.\n2025-12-18T20:40:00.151000Z TestFramework (INFO): All of the transactions from the current batch have been mined into a block.\n2025-12-18T20:40:14.350000Z TestFramework (INFO): The batch of 25 transactions has been accepted into the mempool.\n2025-12-18T20:40:14.574000Z TestFramework (INFO): All of the transactions from the current batch have been mined into a block.\n2025-12-18T20:40:30.226000Z TestFramework (INFO): The last batch of 25 transactions has been accepted into the mempool.\n2025-12-18T20:40:32.193000Z TestFramework (INFO): All of the recently mined transactions have been re-added into the mempool in 1.9641704559326172 seconds.\n2025-12-18T20:40:32.194000Z TestFramework (INFO): Checking descendants/ancestors properties of all of the in-mempool transactions...\n2025-12-18T20:40:34.347000Z TestFramework (INFO): Creating independent transactions to test MAX_DISCONNECTED_TX_POOL_BYTES limit during reorg\n2025-12-18T20:42:25.872000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/b-c/test/functional/test_framework/test_framework.py\", line 183, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/b-c/./bld-bisect/test/functional/mempool_updatefromblock.py\", line 185, in run_test\n    self.test_max_disconnect_pool_bytes()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/b-c/./bld-bisect/test/functional/mempool_updatefromblock.py\", line 175, in test_max_disconnect_pool_bytes\n    assert_equal(len(mempool), expected_parent_count * 2)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/b-c/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(398 == 396)\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-18T20:52:21Z",
      "updated_at": "2026-01-05T14:51:29Z",
      "closed_at": "2026-01-05T14:51:29Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34108",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3672178157,
          "user": "maflcko",
          "body": "I guess the 32-bit mempool has tighter packing, so accepts more transactions?",
          "created_at": "2025-12-18T20:54:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 77,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3672196029,
          "user": "maflcko",
          "body": "Also related to https://github.com/bitcoin/bitcoin/pull/33724, I wonder if we should just give up on size_t and use u64 consistently everywhere.\n\nAll of this engineering effort doesn't seem worth it just to allow the few armhf users to add a few bytes of more transactions to their mempool.",
          "created_at": "2025-12-18T20:59:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 290,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3672217331,
          "user": "sipa",
          "body": "@maflcko Even without using platform-dependent integer sizes, there will be memory usage differences between 32-bit and 64-bit platforms due to differences in pointer size. Beyond those, malloc overhead and alignments can differ between systems as well.",
          "created_at": "2025-12-18T21:06:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 253,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3681568408,
          "user": "maflcko",
          "body": "That is probably right. Replacing `size_t` with `uint64_t` inside the mempool entry does not change anything here. However, setting `DEBUG=1` in the std lib \"works around\" the issue. So it is likely that the dynamic memory overhead is different.",
          "created_at": "2025-12-22T10:57:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 245,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3610,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3699026991,
      "number": 34015,
      "title": "Minor Release 30.1",
      "body": "🚧 Milestone: https://github.com/bitcoin/bitcoin/milestone/79\n\nBackports and other changes\n- #33609\n- #33997\n\n\nRC 1:\n- [x] final changes: #33997\n- [x] tag: https://github.com/bitcoin/bitcoin/compare/v30.1rc1\n- [x] upload binaries: https://bitcoincore.org/bin/bitcoin-core-30.1/test.rc1/\n\n30.1 Final:\n- [x] final changes: #34092\n- [x] tag: https://github.com/bitcoin/bitcoin/releases/tag/v30.1\n- [x] upload binaries: https://bitcoincore.org/bin/bitcoin-core-30.1/\n- [x] announcements: https://groups.google.com/g/bitcoindev/c/ijlAyY0UFAQ/m/q3lWqhyfBAAJ\n- [x] archive rel notes: #34191\n- [x] GH Release: https://github.com/bitcoin/bitcoin/releases/tag/v30.1\n\nSee [release process docs](https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md) for more details. This issue can be used to track status updates.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-05T13:38:30Z",
      "updated_at": "2026-01-05T11:26:21Z",
      "closed_at": "2026-01-05T11:26:21Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34015",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3617242317,
          "user": "fanquake",
          "body": "`v30.1rc1` tag is available: https://github.com/bitcoin/bitcoin/compare/v30.1rc1.",
          "created_at": "2025-12-05T14:52:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 81,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3702067140,
          "user": "fanquake",
          "body": "v30.1rc1 binaries: https://bitcoincore.org/bin/bitcoin-core-30.1/test.rc1/.",
          "created_at": "2025-12-31T11:58:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3705582428,
          "user": "fanquake",
          "body": "v30.1 binaries: https://bitcoincore.org/bin/bitcoin-core-30.1/.",
          "created_at": "2026-01-02T15:25:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 63,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709988835,
          "user": "fanquake",
          "body": "Website PR: https://github.com/bitcoin-core/bitcoincore.org/pull/1207",
          "created_at": "2026-01-05T11:11:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 69,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 838,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3776199105,
      "number": 34189,
      "title": "qa: Intermittent failure in `interface_zmq.py`",
      "body": "On NetBSD 10.1, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20650397747/job/59294288757:\n```\n83/282 - interface_zmq.py failed, Duration: 24 s\n\nstdout:\n2026-01-02T07:12:07.928049Z TestFramework (INFO): PRNG seed is: 38669556040563964\n2026-01-02T07:12:07.929628Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208\n2026-01-02T07:12:08.575045Z TestFramework (INFO): Running basic test with tcp protocol\n2026-01-02T07:12:09.507193Z TestFramework (INFO): Generate 5 blocks (and 5 coinbase txes)\n2026-01-02T07:12:09.530057Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:10.562029Z TestFramework (INFO): Test the getzmqnotifications RPC\n2026-01-02T07:12:10.564742Z TestFramework (INFO): Running basic test with ipc protocol\n2026-01-02T07:12:11.856205Z TestFramework (INFO): Generate 5 blocks (and 5 coinbase txes)\n2026-01-02T07:12:12.058310Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:13.083968Z TestFramework (INFO): Test the getzmqnotifications RPC\n2026-01-02T07:12:13.086669Z TestFramework (INFO): Testing 'sequence' publisher\n2026-01-02T07:12:14.885021Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:15.908518Z TestFramework (INFO): Testing sequence notifications with mempool sequence values\n2026-01-02T07:12:15.908753Z TestFramework (INFO): Testing RBF notification\n2026-01-02T07:12:18.053138Z TestFramework (INFO): Testing reorg notifications\n2026-01-02T07:12:21.179247Z TestFramework (INFO): Evict mempool transaction by block conflict\n2026-01-02T07:12:21.227439Z TestFramework (INFO): Testing 'mempool sync' usage of sequence notifier\n2026-01-02T07:12:31.964971Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 130, in run_test\n    self.test_reorg()\n    ~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 291, in test_reorg\n    assert_equal(self.nodes[1].getbestblockhash(), hashblock.receive().hex())\n                                                   ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 70, in receive\n    return self._receive_from_publisher_and_check()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 57, in _receive_from_publisher_and_check\n    topic, body, seq = self.socket.recv_multipart()\n                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/usr/pkg/lib/python3.13/site-packages/zmq/sugar/socket.py\", line 799, in recv_multipart\n    parts = [self.recv(flags, copy=copy, track=track)]\n             ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"zmq/backend/cython/_zmq.py\", line 1218, in zmq.backend.cython._zmq.Socket.recv\n  File \"zmq/backend/cython/_zmq.py\", line 1253, in zmq.backend.cython._zmq.Socket.recv\n  File \"zmq/backend/cython/_zmq.py\", line 1413, in zmq.backend.cython._zmq._recv_copy\n  File \"zmq/backend/cython/_zmq.py\", line 1408, in zmq.backend.cython._zmq._recv_copy\n  File \"zmq/backend/cython/_zmq.py\", line 186, in zmq.backend.cython._zmq._check_rc\nzmq.error.Again: Resource temporarily unavailable\n2026-01-02T07:12:32.029675Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2026-01-02T07:12:32.029851Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208\n2026-01-02T07:12:32.029981Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208/test_framework.log\n2026-01-02T07:12:32.030241Z TestFramework (ERROR): \n2026-01-02T07:12:32.030452Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208' to consolidate all logs\n2026-01-02T07:12:32.030546Z TestFramework (ERROR): \n2026-01-02T07:12:32.030632Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2026-01-02T07:12:32.030825Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2026-01-02T07:12:32.030973Z TestFramework (ERROR): \n\n\nstderr:\n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-02T11:43:19Z",
      "updated_at": "2026-01-05T11:22:06Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34189",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5037,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2947965588,
      "number": 32142,
      "title": "Feature Request: testmempoolaccept with an argument to ignore nLocktime/nSequence time-locking",
      "body": "### Please describe the feature you'd like to see added.\n\nExecute `testmempoolaccept` in a way that will ignore the time/block-height validations of the transactions' `nSequence` and `nLocktime`.\n\n### Is your feature related to a problem, if so please describe it.\n\n`testmempoolaccept` is a very useful tool to verify transactions that aren't supposed to be broadcasted immediately - for example, for emergency recovery in case the seed is lost.\n`nLocktime` is also useful in such case, to prevent the recovery transaction from being broadcasted too early. However, after signing a transaction with a future `nLocktime`, I couldn't be sure that it is indeed valid: `testmempoolaccept` considers this transaction as `non-final` because of its future `nLocktime`, without explaining whether it has other problems (i.e. invalid signatures etc.).\n\n### Describe the solution you'd like\n\nA third optional parameter to `testmempoolaccept` (after `rawtxs` and `maxfeerate`) called `ignoretimelocks`, that will be a boolean.\n\n### Describe any alternatives you've considered\n\nI've tried writing code that would parse the transaction and, given the current mempool utxos, verify its scripts. This becomes complicated to implement in multisig and segwit transactions, and doesn't give me the guarantees that I want for such long-term transaction.\n\nAnother suggestion is that `testmempoolaccept` will accumulate all the reasons a transaction is unacceptable, and not exit after the first reason.\n\n### Please leave any additional context\n\n`nSequence` is a bitfield with multiple purposes, like RBF, and possibly other features in the future. My suggestion only regards BIP-68 validations of `nSequence` and not other features.",
      "state": "open",
      "user": "oren-z0",
      "created_at": "2025-03-25T23:07:46Z",
      "updated_at": "2026-01-05T10:32:38Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32142",
      "labels": [
        "Feature",
        "RPC/REST/ZMQ",
        "Mempool"
      ],
      "comment_data": [
        {
          "id": 2755623574,
          "user": "darosior",
          "body": "Have you seen the discussion about this at https://github.com/bitcoin/bitcoin/pull/25434?",
          "created_at": "2025-03-26T20:02:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 89,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2757493641,
          "user": "oren-z0",
          "body": "Thanks @darosior , no I did not see that discussion before (only searched for related issues, not related PRs).\nIn the other discussion, the main use case for the feature  is to simplify the development of L2 layers - which use scripts with pre-known structure.\nIn my use case, I'm building a service that could broadcast future recovery-transactions uploaded by customers, and I want to verify in advance that these transactions could indeed be broadcasted when the time comes (unless, of course, the customer has spent the UTXOs after uploading the recovery-transactions). In this case the transaction could theoretically use any script that the customer wants.\n\nI understand the worry that the code of `testmempoolaccept` will diverge from the code of `sendrawtransaction` and some bug will cause an invalid transaction to appear as accepted by `testmempoolaccept`. A more generic alternative could be that `testmempoolaccept` will collect all the reasons a transaction appears to be invalid, without breaking on the first reason (unless this is a very basic failure like invalid transaction structure, that make the other verifications irrelevant).\n\nTherefore I would like to keep this issue open for debate.",
          "created_at": "2025-03-27T10:15:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1212,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709858505,
          "user": "Sjors",
          "body": "This idea bubbled up again on the mailinglist recently: https://groups.google.com/g/bitcoindev/c/K1NpJp9_BYk/m/6PknOXFPBAAJ\n\nI think it's useful for users to be able to reassure themselves that their pre-signed time/height locked transaction will indeed be valid in the future. RPC methods like `walletcreatefundedpsbt` are able to create such transactions.\n\nI would suggest requiring a specific height / MTP argument, rather ignoring it. That lets you catch accidental timelock mixing.\n\nAn additional place where this might be useful is on an offline signing node, which might not be synced to the tip (though you'll have to sync it eventually if you want to spend change).\n\nI vibe-coded an implementation in https://github.com/Sjors/bitcoin/commits/2026/01/timelock/ but it needs polishing. I don't have time for it now, so consider it up for grabs.",
          "created_at": "2026-01-05T10:32:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 851,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1807,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3748120761,
      "number": 34118,
      "title": "[feature] Scheduled Transaction Broadcast",
      "body": "### Please describe the feature you'd like to see added.\n\n## Overview\n\nIn certain cases the user creating a transaction would like to broadcast it to the bitcoin network delayed, not immediately. It's practical to implement scheduling in the node, as it is a software component designed to be always-on.\n\nWith Scheduled Transaction Broadcast the bitcoin node accepts a transaction for later broadcast, stores it, and broadcasts automatically at the specified target time.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n## Details / Caveats\n\nUses. Delayed transaction broadcast can be useful for/when (among others):\n\n- hiding the real time of transaction creation (with random delay; for non-urgent transactions; typically in the range of few hours -- few days)\n- broadcasting a transaction at a future date\n\nResult, error check. As the actual broadcast happens later, the broadcast result -- success or some error -- is not available at acceptance time. Only parsing checks are done at acceptance time. The client can check the result only by monitoring the bitcoin network. Note: some checks are not possible to be done at acceptance time, as conditions may change (e.g. inputs with timelocks). (Note: it could be possible to offer an API to query for broadcast result, but that's not planned.)\n\nAbsolute time vs. block time. The target time can be specified as an absolute time or a block height.\n\nNo guarantees. Delayed broadcast is best-effort, there is no delivery guarantee.\n\nFee. The transaction fee is contained in the scheduled transaction, and it is not possible to be changed. In case the network fee rate goes up by the time of submission, the fee may be insufficient. CFCP can be used to bump the fee if needed.\n\nRetries. It is possible to specify a number of retries, and a retry period. Then the scehduled broadcast is retried accordingly in case of failure.\n\n\n### Describe any alternatives you've considered\n\nThe following alternatives are identified, though they are outside of the scope of the node software:\n \n- Scheduling implemented in the wallet software. The drawback is that wallets are typically active (running) only for a short period, while there is user interaction. Running in the background may impose some design issues.\n- Implemented in a separate component sitting along the bitcoin node, proxying all RPC API calls, and implementing scheduled (delayed) transaction broadcast.\n\n## Miscellaneous\n\nThis could interfere with the feature \"Broadcast own transactions only via short-lived Tor or I2P connections\" (PR ##29415).\nThis feature could be combined with this feature, to further mask the real transaction creation time, by creating the dedicated sending connection sometimes between the scheduling time and target time (randomized). \n\nAn APIs for cancelling an unsent scheduled TX would be possible to offer as well.\n\n\n### Please leave any additional context\n\n## Implementation Details\n\nScheduled transactions are kept in a separate memory structure, and are persisted to a separate file (for persistence accross restarts). The file is read at startup, and written whenever there is a relevant change to its content, and at shutdown.\n\nA new RPC 'schedulerawtransaction' is proposed, with syntax very similar to 'sendrawtransaction'. However, the transaction is not sent rigth away, but stored for later broadcast.\n\n\n## Status\n\nDelving discussion:\nhttps://delvingbitcoin.org/t/scheduled-delayed-transaction-broadcast/2148\n\nPrototype:\nhttps://github.com/optout21/sched-tx-ptoto/\nhttps://github.com/optout21/bitcoin/tree/sched-tx-proto1\nhttps://github.com/optout21/bitcoin/tree/sched-tx-proto0\n\n## History\n\nJan 5, 2026: Edits w.r.t. to the alternative of implementing in the client; removing speculative fuzzy use case; in response to comments by @ismaelsadeeq .\nDec 19, 2025: Created. ",
      "state": "open",
      "user": "optout21",
      "created_at": "2025-12-19T16:44:42Z",
      "updated_at": "2026-01-05T09:58:57Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34118",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3682099244,
          "user": "ismaelsadeeq",
          "body": "> In certain cases the user creating a transaction would like to broadcast it to the bitcoin network delayed, not immediately. This scheduling can be done on the client side, but it's practical if it's handled by the node.\n\n> there is some precondition that is expected to occur in the future (e.g. occurrence of a transaction), condition that is not possible (or desired) to be expressed in bitcoin scripts.\n\nThese two points are not convincing enough IMO.\n\n1. As you mentioned, this can be easily handled by the client.\n2. The preconditions you mentioned are unclear and a bit speculative.\nThe specific example you gave can still be achieved from the client: we already have mechanisms for clients to query the state of the mempool, via RPC, REST, as well as push-based ZMQ notifications.\n\nSo, conceptually, I’m ~0.  This adds complexity of maintaining an additional pool of scheduled transactions on the node side for a niche use case.",
          "created_at": "2025-12-22T13:28:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 938,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3709736480,
          "user": "optout21",
          "body": "> These two points are not convincing enough IMO.\n\n1. For the client part, if I consider the client-node pair, typically the client is active (running) only for short time, while there is user interaction. The node on the other hand, is designed to run in the background. This is an argument for implementing the delayed broadcast in the node. I will re-word my description to be more explicit on this.\n\n2. Indeed, probably best is to remove the speculative use case altogether from the description.\n\nThanks for the feedback.",
          "created_at": "2026-01-05T09:58:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 525,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3939,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3780118205,
      "number": 34200,
      "title": "Full Blockchain Node pruned without permission",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nrunning 30.1 and just noticed the entire blockchain on ssd went from having the entire 800gb+ synced to only having 6 .dat files after recently updating. bitcoin.conf has not had any prune setting configured.\n\nexcerpts of note from debug log\n\n2026-01-05T03:13:12Z Prune configured to target 953 MiB on disk for block and undo files.\n2026-01-05T03:13:18Z Loading block index db: last block file = 5324\n2026-01-05T03:13:18Z Loading block index db: last block file info: CBlockFileInfo(blocks=89, size=132165834, heights=930862...930950, time=2026-01-04...2026-01-05)\n2026-01-05T03:13:18Z Checking all blk files are present...\n2026-01-05T03:13:18Z Loading block index db: Block files have previously been pruned\n2026-01-05T03:13:20Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n\n2026-01-05T03:13:21Z Block index and chainstate loaded\n2026-01-05T03:13:21Z init message: Pruning blockstore…\n2026-01-05T03:13:21Z block tree size = 930952\n2026-01-05T03:13:21Z nBestHeight = 930950\n\nunusual outputs after connecting another instance of bitcoin gui on another local network computer and directly connecting via 192.168.1.210:8333 which i did use a prune setting on bitcoin.conf as i just wanted to sync the wallet. i first noticed the oddity as it wouldnt sync and did not label the full node it was connecting to as a full relay\n\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-05T03:48:30Z [ipc:info] {bitcoin-node-9205/b-capnp-loop-9209} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n\ni am running a stratum 2 protocol mining pool so could possibly be coming from that but it is operating without any errors. \n\n### Expected behaviour\n\nto not prune the blockchain\n\n### Steps to reproduce\n\nnot sure\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n30.1\n\n### Operating system and version\n\narm linux \n\n### Machine specifications\n\nradxa rock 5b+ armbian debian 13\n\n\nedit- found issue, i opened the gui and entered a prune value. after immediately closing it added the value to the settings.json file and pruned the blockchain after running the daemon via command line. that setting value should not easily prune the blockchain without confirmation. should be more steps in place to prevent that from happening. ",
      "state": "closed",
      "user": "ary111",
      "created_at": "2026-01-05T04:21:48Z",
      "updated_at": "2026-01-05T05:04:41Z",
      "closed_at": "2026-01-05T04:50:12Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34200",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2896,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3778214756,
      "number": 34196,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "mohsinraza1",
      "created_at": "2026-01-03T16:13:36Z",
      "updated_at": "2026-01-03T16:13:45Z",
      "closed_at": "2026-01-03T16:13:42Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34196",
      "labels": [],
      "comment_data": [
        {
          "id": 3707165247,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission is effectively a placeholder with no substantive description, rationale, or actionable details—just a brief greeting and template boilerplate—so it does not represent a legitimate issue or contribution.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2026-01-03T16:13:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 486,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 355940820,
      "number": 14118,
      "title": "Switch to CMake (was: Native build on Windows using Clang)",
      "body": "Bitcoin Core can be built on Windows using Clang natively. Currently only a few projects are using this (Chrome [since march](http://blog.llvm.org/2018/03/clang-is-now-used-to-build-chrome-for.html), Firefox [since yesterday](https://news.ycombinator.com/item?id=17504197)). It'd make building for Window easier. Moreover, I'm sure that it's easier to use than MSYS + MinGW.\r\n\r\nThere's only one obstacle:\r\n\r\n- Autotools does not run on Windows!\r\n\r\nWhat are your opinions on creating a Cmake file? Although the `configure.ac` is not-so-tiny, the review community is really active here. If I get positive feedback about it, I'd be glad to create the first draft of it. In addition, Cmake files are used more often. Wouldn't it be great to give the option for builders to choose between autotools and Cmake?",
      "state": "closed",
      "user": "DesWurstes",
      "created_at": "2018-08-31T11:17:47Z",
      "updated_at": "2026-01-03T15:36:50Z",
      "closed_at": "2020-06-19T21:01:12Z",
      "comments": 23,
      "url": "https://github.com/bitcoin/bitcoin/issues/14118",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3707137972,
          "user": "hebasto",
          "body": "> Bitcoin Core can be built on Windows using Clang natively.\n\nPlease see https://github.com/bitcoin/bitcoin/pull/31507.",
          "created_at": "2026-01-03T15:36:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 119,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 863,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2756824912,
      "number": 31558,
      "title": "Stale code (that has no effect)",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nI am not a C++ programmer. This code looks like it has 4 lines that do nothing.\r\n\r\nIn commit: 0fbaef9676a a call to `std::ceil` was added which makes the following `if` statement do nothing. There is no harm done but it makes the code confusing for non-c++ devs to read.\r\n\r\n```c++\r\nCAmount CFeeRate::GetFee(uint32_t num_bytes) const\r\n{\r\n    const int64_t nSize{num_bytes};\r\n\r\n    // Be explicit that we're converting from a double to int64_t (CAmount) here.\r\n    // We've previously had issues with the silent double->int64_t conversion.\r\n    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\r\n\r\n    if (nFee == 0 && nSize != 0) {\r\n        if (nSatoshisPerK > 0) nFee = CAmount(1);\r\n        if (nSatoshisPerK < 0) nFee = CAmount(-1);\r\n    }\r\n\r\n    return nFee;\r\n}\r\n```\r\n\r\n### Expected behaviour\r\n\r\nThere is no behaviour issue with the current code.\r\n",
      "state": "closed",
      "user": "tcharding",
      "created_at": "2024-12-23T22:59:10Z",
      "updated_at": "2026-01-03T08:43:08Z",
      "closed_at": "2025-01-01T02:47:47Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31558",
      "labels": [
        "TX fees and policy",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 2560408311,
          "user": "tcharding",
          "body": "cc @achow101 ",
          "created_at": "2024-12-23T23:00:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 13,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2560984394,
          "user": "maflcko",
          "body": "Removing the code yields a test failure for negative feerates for me:\r\n\r\n```\r\ntest/amount_tests.cpp(64): error: in \"amount_tests/GetFeeTest\": check feeRate.GetFee(8) == CAmount(-1) has failed [0 != -1]\r\n\r\n*** 1 failure is detected in the test module \"Bitcoin Core Test Suite\"\r\n```\r\n\r\n\r\nI've documented that in fa2da2cb607ba359231fccc9635abe7c8616de56 .\r\n\r\nThough, I find it a bit odd to treat negative and positives feerates differently. So the code should probably still be removed and the ceil should be fixed to always ceil away from zero.\r\n\r\nI haven't checked if such a change is a bugfix or behavior change for `prioritisetransaction`, so it would be good to check that as well.",
          "created_at": "2024-12-24T10:53:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 683,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2563689342,
          "user": "jaeheonshim",
          "body": "With the current unit tests, I don't think ceil away from zero will pass unit tests. The way the logic is currently implemented, negative values are rounded up towards zero unless they are greater than -1, in which case they are instead rounded down towards -1. I'm not sure if this is the intended behavior, but if a fix like this were to be implemented:\r\n\r\n```\r\ndouble value = nSatoshisPerK * nSize / 1000.0;\r\nnFee = static_cast<CAmount>(std::copysign(std::ceil(std::abs(value)), value));\r\n```\r\n\r\nThis test case will fail:\r\n\r\n```\r\nfeeRate = CFeeRate(-123);\r\nBOOST_CHECK_EQUAL(feeRate.GetFee(9), CAmount(-1));\r\n```\r\n\r\nAs -123 * 9 / 1000.0 = -1.107, the old code would round towards 0 to -1, whereas the new code would round away from zero to -2.\n\nJust thought it was worth pointing that out.",
          "created_at": "2024-12-27T13:11:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 792,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2566743551,
          "user": "yancyribbens",
          "body": "Maybe this issue should be closed and a new one started.  The original issue states the code section isn't used, but it pretty clearly is, especially since there's even a test that shows it is.  It is a bit of a mystery what the authors intent was and a code comment might have been nice to explain why if the `ceil` function resulted in zero and the size is not zero, then return -1 if fee_rate is negative or 1 if fee_rate is positive.",
          "created_at": "2024-12-31T22:53:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 437,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2566792854,
          "user": "yancyribbens",
          "body": "Actually, I think the \"stale code\" section is to prevent a fee of zero, and if the fee would be zero, then make it either 1 sat or -1 sat depending of if the fee_rate is positive or negative.",
          "created_at": "2025-01-01T01:33:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 191,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2566794961,
          "user": "jaeheonshim",
          "body": "Right, but I think the question is whether negative fee rates should be rounded away from or towards zero. Also, I'm not sure what kind of scenario a negative fee rate would be used.",
          "created_at": "2025-01-01T01:40:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 182,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2566816739,
          "user": "tcharding",
          "body": "> In commit: https://github.com/bitcoin/bitcoin/commit/0fbaef9676a1dcb84bcf95afd8d994831ab327b6 a call to std::ceil was added which makes the following if statement do nothing.\r\n\r\nOh it seems I can't do integer division. `nFee` will be zero any time `0 < (nSatoshisPerK * nSize) < 1000` \r\n\r\nEDIT: I was confused in the line above, the code in question uses `/ 1000.0` not integer division. Hence I was not being totally retarded when I opened this issue. I was just missing the fact that `nSatoshisPerK` could be negative.\r\n\r\nI have no opinion on the rounding issue and will leave that to others to raise an issue if needed. Excuse the noise.",
          "created_at": "2025-01-01T02:47:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 642,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2567108046,
          "user": "yancyribbens",
          "body": "> Right, but I think the question is whether negative fee rates should be rounded away from or towards zero\r\n\r\n`ceil` rounds towards zero: `ceil(-2.4) = -2.000000`.  Rounding toward zero when negative is correct imo.  Rounding up is done to make sure the fee is adequate instead of falling short.\r\n\r\n> Also, I'm not sure what kind of scenario a negative fee rate would be used.\r\n\r\nGood question.  frameworks like rust-bitcoin use an unsigned int for FeeRate so it can't be negative.",
          "created_at": "2025-01-01T18:42:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 482,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2567132185,
          "user": "tcharding",
          "body": "If I'm not mistaken (again) this line of code can never be hit.\r\n\r\n`if (nSatoshisPerK > 0) nFee = CAmount(1);`",
          "created_at": "2025-01-01T20:13:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 110,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2567140752,
          "user": "sipa",
          "body": "I believe the only way to hit negative feerates is when using the `prioritizetransaction` RPC with a (highly) negative fee_delta argument. I don't know why in this context rounding away from zero (as `CFeeRate` does) would matter. I believe the correct rounding mode depends on the context:\n* In fee estimation context, one always wants to round up (if you need 351.3 sats to hit a desired feerate, you need to pay 352).\n* In mining/mempool context, one wants to round down probably for sorting purposes (or use exact fraction arithmetic).\n\nLonger term, I think `CFeeRate` should be replaced with, or implemented using, `FeeFrac` which uses exact integer arithmetic, and avoids divisions where possible. #30535 adds the ability to evaluate a feerate for a given size, while rounding up or rounding down, giving it feature parity with `CFeeRate`.",
          "created_at": "2025-01-01T20:43:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 845,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2567174219,
          "user": "yancyribbens",
          "body": "> If I'm not mistaken (again) this line of code can never be hit.\r\n\r\nIf the goal is to prevent a fee of zero, it probably should be: `if (nSatoshisPerK == 0) nFee = CAmount(1);`",
          "created_at": "2025-01-01T23:01:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 177,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2567180312,
          "user": "sipa",
          "body": "For context, support for negative feerates in `CFeeRate` was added in #7796.",
          "created_at": "2025-01-01T23:24:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 76,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1025,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2759079774,
      "number": 31568,
      "title": "Single-Glyph Bitcoin Transaction System",
      "body": "### Please describe the feature you'd like to see added.\n\n# Single-Glyph Bitcoin Transaction System\r\n\r\n## 1. Core Concept\r\n\r\nA single glyph would encode an entire Bitcoin transaction, including:\r\n- Transaction ID\r\n- Input/Output addresses\r\n- Amounts\r\n- Signatures\r\n- Timestamp\r\n- Network data\r\n\r\nThink of it like a visual hash that contains all transaction information in a single symbol, but unlike a hash, it's:\r\n- Fully decomposable\r\n- Visually unique\r\n- Instantly verifiable\r\n- Human-distinguishable\r\n\r\n## 2. Glyph Structure\r\n\r\n### 2.1 Visual Components\r\nThe glyph would be structured in layers:\r\n```\r\nOuter Ring: Transaction validation data\r\nMiddle Ring: Address and amount information\r\nInner Core: Core transaction data\r\nVisual Markers: Quick-read indicators\r\n```\r\n\r\n### 2.2 Data Encoding\r\nEach part of the glyph carries specific information:\r\n```\r\nShape Elements: Transaction type\r\nPattern Density: Amount\r\nConnection Lines: Input/Output relationships\r\nColor/Shade (digital): Additional metadata\r\nPosition Markers: Validation points\r\n```\r\n\r\n## 3. Processing System\r\n\r\n### 3.1 Creation Process\r\n1. Transaction Data Collection\r\n   - Gather all transaction components\r\n   - Validate data integrity\r\n   - Create relationship map\r\n\r\n2. Glyph Generation\r\n   - Convert data to visual elements\r\n   - Layer information structurally\r\n   - Add verification markers\r\n\r\n3. Final Assembly\r\n   - Combine all elements\r\n   - Add security features\r\n   - Generate final glyph\r\n\r\n### 3.2 Verification Process\r\n1. Visual Scan\r\n   - Read outer validation markers\r\n   - Verify structural integrity\r\n   - Check security features\r\n\r\n2. Data Extraction\r\n   - Decompose layers\r\n   - Extract transaction information\r\n   - Validate relationships\r\n\r\n3. Network Confirmation\r\n   - Verify against blockchain\r\n   - Confirm authenticity\r\n   - Process transaction\r\n\r\n## 4. Advantages\r\n\r\n### 4.1 Technical Benefits\r\n1. Size Reduction\r\n   - Current transaction: ~250 bytes\r\n   - Glyph transaction: ~40 bytes\r\n   - 84% reduction in size\r\n\r\n2. Processing Speed\r\n   - Single-unit verification\r\n   - Parallel data validation\r\n   - Instant visual confirmation\r\n\r\n3. Network Efficiency\r\n   - Reduced bandwidth needs\r\n   - Faster propagation\r\n   - Lower storage requirements\r\n\r\n### 4.2 User Benefits\r\n1. Visual Verification\r\n   - Easy transaction identification\r\n   - Quick validity checks\r\n   - Intuitive understanding\r\n\r\n2. Security Features\r\n   - Visual tampering evidence\r\n   - Built-in verification\r\n   - Clear authenticity markers\r\n\r\n## 5. Implementation Example\r\n\r\n### 5.1 Transaction Representation\r\nCurrent Bitcoin transaction:\r\n```\r\n{\r\n  txid: (64 characters)\r\n  inputs: [addresses]\r\n  outputs: [addresses]\r\n  amount: value\r\n  signature: (variable)\r\n}\r\n```\r\n\r\nBecomes a single glyph:\r\n```\r\n⊛\r\n```\r\nWhere ⊛ contains all transaction data in its visual structure\r\n\r\n### 5.2 Network Processing\r\n```\r\nTransaction Creation → Glyph Generation → Network Propagation → Visual Verification → Chain Integration\r\n```\r\n\r\n## 6. Real-World Applications\r\n\r\n### 6.1 Transaction Display\r\n- Wallets show transaction glyphs\r\n- Each transaction visually unique\r\n- Amount visible in pattern density\r\n- Status shown in outer ring\r\n\r\n### 6.2 Network Operations\r\n- Nodes exchange glyphs\r\n- Instant visual validation\r\n- Efficient mempool management\r\n- Quick block assembly\r\n\r\n### 6.3 User Interface\r\n- Visual transaction history\r\n- Clear payment verification\r\n- Intuitive amount display\r\n- Easy transaction tracking\r\n\r\n## 7. Security Considerations\r\n\r\n### 7.1 Built-in Security\r\n- Visual hash verification\r\n- Tamper-evident design\r\n- Self-validating structure\r\n- Error detection patterns\r\n\r\n### 7.2 Verification Methods\r\n1. Visual Inspection\r\n   - Pattern integrity\r\n   - Security markers\r\n   - Relationship indicators\r\n\r\n2. Digital Validation\r\n   - Data extraction\r\n   - Cryptographic verification\r\n   - Network confirmation\r\n\r\n## 8. Future Implications\r\n\r\n### 8.1 Scaling Potential\r\n- Massive data compression\r\n- Faster network synchronization\r\n- Better blockchain scalability\r\n- Reduced storage needs\r\n\r\n### 8.2 Advanced Features\r\n- Smart contract visualization\r\n- Multi-signature patterns\r\n- Time-lock indicators\r\n- Amount-based variations\r\n\r\nThe single-glyph system transforms Bitcoin transactions from abstract data into visual, verifiable symbols while maintaining all security and functionality of the original system. This could revolutionize how we interact with and process blockchain transactions.\r\n![bitcoin glyph](https://github.com/user-attachments/assets/4b5ce58a-50cd-4e49-b0d5-aa51f2279a53)\r\n\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\nGlyph like qucode for quicers trasactions while reducing the size of the blockchain and maintaing information and security \n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "Aaronminer1",
      "created_at": "2024-12-25T20:13:57Z",
      "updated_at": "2026-01-03T08:43:07Z",
      "closed_at": "2025-01-02T19:01:44Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31568",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 2568233702,
          "user": "maflcko",
          "body": "Usually the issue tracker is used to track technical issues related to the Bitcoin Core code base.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the [Bitcoin StackExchange](https://bitcoin.stackexchange.com) or the `#bitcoin` IRC channel on Libera Chat, or one of the Bitcoin subreddits, or any other place that you feel is well suited.\r\n\r\nNetwork-wide consensus and/or P2P changes first need to be discussed with the greater ecosystem, for example https://groups.google.com/g/bitcoindev, or https://delvingbitcoin.org/. Also, they need a BIP to be implemented in Bitcoin Core and other software that connects to the bitcoin P2P network.",
          "created_at": "2025-01-02T19:01:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 665,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4964,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3777776495,
      "number": 34194,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "enriquezotniel-lang",
      "created_at": "2026-01-03T06:44:54Z",
      "updated_at": "2026-01-03T06:45:00Z",
      "closed_at": "2026-01-03T06:44:58Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34194",
      "labels": [],
      "comment_data": [
        {
          "id": 3706835656,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The report contains only a brief, context-free title and a one-line body with no actionable details, description of a problem, or relevance to the repository; it appears to be an irrelevant or placeholder submission rather than a legitimate issue or pull request.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2026-01-03T06:44:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 532,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2932453595,
      "number": 32097,
      "title": "Linux download needs installation instructions",
      "body": "Windows has an installer, macOS has the usual drag-me-to-application logic that most GUI users will be familiar with. But for Linux we just give people are bunch of binaries along with a README that lacks any installation instructions.\n\nWorse, it turns out the binaries don't work out of the box on a vanilla Ubuntu system. That's not just because of Wayland, which we don't support yet. Even on X11 it will miss certain libraries.\n\nhttps://www.reddit.com/r/BitcoinBeginners/comments/14m8f9q/missing_required_library_to_run_core_on_ubuntu/\n\nhttps://bitcoin.stackexchange.com/questions/122646/libxcb-xinerama0-library-required-by-bitcoin-qt\n\nThe easiest fix would be to point to https://bitcoin.org/en/full-node#other-linux-gui which at least gives some general instructions.\n\nBetter I think would be to add instructions for the most popular desktop distros.\n\nI think it's fine to assume that daemon users can figure it out for themselves.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-19T16:34:09Z",
      "updated_at": "2026-01-02T15:24:58Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/32097",
      "labels": [
        "Docs"
      ],
      "comment_data": [
        {
          "id": 2738114741,
          "user": "hodlinator",
          "body": "> https://bitcoin.stackexchange.com/questions/122646/libxcb-xinerama0-library-required-by-bitcoin-qt\n\n(This seems to have led to #30061 with the same title).",
          "created_at": "2025-03-19T21:07:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 157,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2739711382,
          "user": "Sjors",
          "body": "That's a useful reference. But the concern there is about security, i.e. the dependency on operating system libraries.\n\nHere I'm just worried about the practically of installing. As linux desktop gets more user friendly, I expect fewer people to know how to figure out which libraries they're missing and how to install them.",
          "created_at": "2025-03-20T09:22:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 325,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3223540909,
          "user": "maflcko",
          "body": "I think this was fixed and can be closed?",
          "created_at": "2025-08-26T10:15:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 41,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3225097225,
          "user": "fanquake",
          "body": "Yea I'm not sure. For master, the binaries still have a `libxcb-cursor` dependency, that may need to be installed. It's not clear if #33238 will work for `29.x`, so that will still have a `libxcb-xinerama` dependency, that may need to be installed, (same for `28.x`). There's a note about `libxcb-cursor0` in build-unix, but that isn't shipped with release binaries, or likely read by anyone who isn't compiling from source, so it seems like any of this could benefit from additional documentation.\n\nThoughts @hebasto?",
          "created_at": "2025-08-26T17:31:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 518,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3225106768,
          "user": "maflcko",
          "body": "> There's a note about `libxcb-cursor0` in build-unix, but that isn't shipped with release binaries, or likely read by anyone who isn't compiling from source, so it seems like any of this could benefit from additional documentation.\n\nI see, so it seems a bit related to https://github.com/bitcoin/bitcoin/issues/32565",
          "created_at": "2025-08-26T17:35:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 317,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3242683980,
          "user": "fanquake",
          "body": "Added this to `30.0`, but this seems to need addressing for all release branches, in some way.",
          "created_at": "2025-09-01T15:05:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 94,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3272601034,
          "user": "BenWestgate",
          "body": "If we added to the tarball:\n```\n./share/applications/bitcoin-qt.desktop\n./share/icons/bitcoin128.png\n./share/mime/packages/x-scheme-handler-bitcoin.xml\n./share/doc/bitcoin-core/README.md\n./share/doc/bitcoin-core/bitcoin.conf\n```\nThen a local install can be performed by:\n`tar xzf bitcoin-29.1-x86_64-linux-gnu.tar.gz --strip-components=1 --directory=$HOME/.local`\nand a system wide install by:\n`sudo tar xzf bitcoin-29.1-x86_64-linux-gnu.tar.gz --strip-components=1 --directory=/usr/local`\n\nWe currently have two files in `./`: `README.md` and `bitcoin.conf` which are in the wrong place for [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/latest/) that must be moved to enable the one line install.\n\n`bitcoin.conf` either belongs in `./share/doc/bitcoin-core/` as documentation or perhaps more preferably generated at start-up and placed in the data_dir (default: `~/.bitcoin`) similar to many other files.",
          "created_at": "2025-09-09T23:29:50Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 946,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3307307680,
          "user": "fanquake",
          "body": "@hebasto can you followup here",
          "created_at": "2025-09-18T12:56:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 30,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3311535425,
          "user": "fanquake",
          "body": "See #33432. \n> Doing sudo apt install libxcb-cursor0 seems to have fixed the issue",
          "created_at": "2025-09-19T09:59:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 82,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3316215206,
          "user": "hebasto",
          "body": "> [@hebasto](https://github.com/hebasto) can you followup here\n\nhttps://github.com/bitcoin/bitcoin/pull/33451.",
          "created_at": "2025-09-21T19:33:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 110,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 985,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1698534450,
      "number": 27587,
      "title": "Bitcoin Kernel Library Project Tracking",
      "body": "#### Project Board for pull requests past and present: https://github.com/orgs/bitcoin/projects/3\n\nThis is the tracking issue for the bitcoin kernel library (`libbitcoinkernel`) project.\n\nThe bitcoin kernel project extracts Bitcoin Core's consensus engine. The kernel part of the name highlights one of the key functional differences from the deprecated libbitcoinconsensus and in fact, most libraries: it is a stateful library that can spawn threads, do caching, do I/O, and many other things that one may not normally expect from a library.\n\n`libbitcoinkernel` could also be used as an internal library for `libbitcoin_node`. The desired library organization is shown in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). This is attempted in #28690. \n\nThe statefulness is necessary for the bitcoin kernel's decidedly incremental approach to extracting our consensus engine. This approach favors:\n\n1. Reusing existing code\n...which allows us to be continually integrated with Bitcoin Core and benefit from our extensive test suite\n\n2. Incremental decoupling instead of building from scratch\n ...which allows us to avoid having to prematurely optimize for a \"perfect\" boundary or API (tends to be highly subjective, non-obvious, may lead to unproductive bike-shedding before any meaningful work gets done)\n\n## Areas with open work\n\n### Developing an API for the library\n\nHeaders installed alongside the library should define a safe and stable interface for its users. Currently a C header provides support for validating scripts and blocks, as well as reading from the block store [bitcoinkernel.h](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/bitcoinkernel.h). This should be expanded over time to provide more features and flexibility to users.\n\nThe headers have bindings in:\n* Python https://github.com/stickies-v/py-bitcoinkernel\n* Rust https://github.com/sedited/rust-bitcoinkernel\n* Go https://github.com/stringintech/go-bitcoinkernel\n* Java https://github.com/yuvicc/bitcoinkernel-jdk\n* C# / dotnet https://github.com/janb84/BitcoinKernel.NET\n\nMore bindings would be desirable for the following categories:\n* Application developers and systems engineers (Swift, Kotlin, Dart, Zig, Haskell, Clojure, Javascript etc.)\n* Data analysis and research (R, Julia etc.)\n* Data queries (e.g. PostgreSQL external data etc)\n\nSome work has also been done for expanding the current API, including:\n* Script debugging: https://github.com/sedited/bitcoin/commits/kernelApi_Script/\n* Header validation: https://github.com/bitcoin/bitcoin/pull/33822\n* Precomputed transaction data handling: https://github.com/bitcoin/bitcoin/pull/33891\n* Context-free block validation: https://github.com/bitcoin/bitcoin/pull/33908\n* Validating blocks without a chainstate: https://github.com/sedited/bitcoin/tree/kernelApi_nochainstate\n* Context free transaction checks: https://github.com/bitcoin/bitcoin/pull/33796\n* Stateful transaction validation: https://github.com/sedited/bitcoin/tree/kernelApiNode\n\nThe current API defined through the C header only has very rudimentary error handling. While it attempts to follow the philosophy that errors arising from unsanitized user input are programming errors, it does surface more concrete information on validation failures, as well as errors that arise from problems with the underlying system. These are referred to as fatal errors. The current Bitcoin Core code does not always surface these fatal errors to the caller. #29642 attempts to surface this error information directly.\n\nIt is also currently not possible to instantiate multiple kernel validation objects and distinguish between their log messages. The library currently only has a global logger. \n\n* A potential solution is #30342\n* There is also an issue for discussion: https://github.com/bitcoin/bitcoin/issues/34062\n\n### Read-only kernel clients\n\nThe kernel library provides the functionality to read Bitcoin Core's data, like blocks, headers, and undo data, directly from disk without additional overhead. External applications like Electrs and Esplora parse block.dat files directly for index building. This is problematic because Bitcoin Core's block storage is internal and provides no guarantees for external consumers. Reading this data directly can give these guarantees, as well as improve performance, since the block store might contain invalid blocks, or blocks from dead forks.\n\nThe current drawback to this approach is that leveldb, which stores the block tree and the chainstate, does not allow for readers in parallel processes. Bitcoin Core therefore has to shutdown before an external process using the kernel library can read its data. A pull request moving the block tree database from leveldb to a simple hand-rolled format, which would allow reading the data in parallel, was opened in https://github.com/bitcoin/bitcoin/pull/32427.\n\nA summary of how the kernel library might be used for reading data is provided [here](https://github.com/alexanderwiederin/bitcoinkernel-blockreader). Applications building on #32427 could validate this architecture as well as provide benchmarks for this approach over using Bitcoin Core's existing interfaces to read block data.\n\n### Context-minimal validation\n\nThe current design of the library includes all the Bitcoin Core specific data storage methods. Alternative clients wishing to validate blocks therefore have to build the chain block-by-block and have to re-use the UTXO model.\n\nHowever there exist projects and proposed alternative data models like utreexo, [swift sync](https://gist.github.com/RubenSomsen/a61a37d14182ccd78760e477c78133cd), [UHS](https://gnusha.org/pi/bitcoindev/CAApLimjfPKDxmiy_SHjuOKbfm6HumFPjc9EFKvw=3NwZO8JcmQ@mail.gmail.com/), and libbitcoin, that do not require a UTXO set for validation, but could still profit from re-using Bitcoin Core's Block validation code. [Floresta](https://github.com/vinteumorg/Floresta), a utreexo implementation, and a project working on swiftsync have voiced strong desire for these features.\n\nThere are a few possible directions to take here, including:\n* Abstracting data readers and writers (e.g. an abstract block store: https://github.com/sedited/bitcoin/tree/blockstoreReaderWriter)\n* Making validation functions require less context (e.g. stop passing the utxo step to validation functions: https://github.com/bitcoin/bitcoin/pull/32317)\n* Reducing the `cs_main` lock scope (e.g. reducing locking during `AcceptBlock` https://github.com/sedited/bitcoin/tree/accept_block_reduce_lock)\n* Exposing more validation functions, like `CheckBlock`, `AcceptBlock`, etc.\n* Validation functions that only use the block tree, but don't persist chainstate and block data\n\nContext-minimal validation might also be interesting for SPV clients, which wish to re-use only a subset of validation.\n\n### `cs_main` split\n\nCurrently the `cs_main` recursive mutex protects not only the bulk of validation-specific mutable state, but also state in net processing. Ideally validation would have its own mutexes, that do not have to be shared with other functionality. Function calls requiring a lock to be held as a pre-condition to ensure consistent state transitions should be consolidated to allow internal locking. This could eventually allow users to process validation tasks and query for data in parallel with less locking contention. It also could allow parallel processing and better prioritization of network messages.\n\nSome draft work towards this goal has been started\n* Splitting the net processing mutex: https://github.com/sedited/bitcoin/tree/net_processing_lock_split\n* Better handling of the last blockfile mutex: https://github.com/sedited/bitcoin/tree/last_blockfile_mutex\n* Separate cuckoocache locks: https://github.com/sedited/bitcoin/tree/lock_cuckoocache\n* Making CChain a copy-on-write data structure: https://github.com/alexanderwiederin/bitcoinkernel-proposals/blob/master/cchain-concurrency.md\n\n### Chainstate / ChainstateManager split\n\nThe Chainstate and ChainstateManager are currently tightly coupled, but need not be. In practice this means working with a single chainstate is often needlessly complicated. A draft split of the two classes has been attempted in https://github.com/sedited/bitcoin/tree/chainmansplit.\n\n### Compile targets for embedded, web assembly, and proof systems\n\nOne step further than context-free validation would be a kernel API that can compile to architectures with reduced capabilities, e.g. no support for threading, file systems, or atomics. Adding these capabilities could allow the library to be used in embedded environments, e.g. as part of a validating lightning signer or SPV wallet. Targetting riscv bare metal, or llvm IR, could allow re-use in ZK proof systems as well as formal specification languages.\n\nEventually the goal here should be to provide a fully \"sans IO\" version of the API.\n\nA PR adding a riscv bare metal CI job as opened in #31425.\n\n### Evicting the mempool / plug-able policy\n\nThe mempool and its policy rules are currently inside the kernel library, but won't be exposed in the initial API version. Ideally the library should not force its users to re-use the existing Bitcoin Core opinionated implementation, but allow them to either define their own mempool or at least define their own policy rules. A rough proof of concept for removing the mempool from the library is implemented in https://github.com/sedited/bitcoin/tree/mempoolout.\n\nThe mempool is currently also the only dependent on boost within the library. Having boost as a dependency makes it a bit harder to build, and makes using the C++ headers in the library directly more annoying.\n\n### Test vectors for the API\n\nThe project should provide test vectors to ensure language bindings around the header APIs are implemented consistently. \n\n### Evicting AssumeUTXO  / AssumeValid\n\nAssumeUTXO/Assumevalid are Bitcoin Core specific approaches to improving IBD speed. It is likely external users of Kernel will not want to be tightly coupled to Bitcoin Core specific processes, e.g., choosing the AssumeUTXO snapshots and assumevalid points. Philosophically, kernel should be as agnostic as possible and not tied to a particular implementation's decisions.\n\n### Isolated kernel repository\n\nEventually Bitcoin Core could itself depend on a standalone kernel repository. Bitcoin Core would likely end up pulling in this project as a subtree. Some open questions around this subject are:\n\n* How would the CI for this repository be set up?\n* How would its own fuzzing and unit test setup look like?\n* What does the release process look like?\n* What is the governance of the project? E.g., is it under Bitcoin Core?\n\nIn many ways, this could be similar to how the libsecp256k1 is maintained in its own repository. Some steps towards this goal have been taken:\n* Adding a dedicated internal kernel library that could be re-used directly by the project: https://github.com/bitcoin/bitcoin/pull/28690\n* Removing the clientversion dependency from the kernel: https://github.com/bitcoin/bitcoin/pull/32543\n* Pruning unwanted headers from the library: https://github.com/bitcoin/bitcoin/pull/34079\n* Remove translation.h usage from the kernel library: https://github.com/sedited/bitcoin/tree/kernel_rm_translation\n* Having a separate kernel repo: https://github.com/sedited/bitcoin-kernel\n\n---\n\n## Action Items\n\n1. If you have any questions, please post them below!\n2. If you have any ideas for the future directions of the project, or want to work on one of the open areas, I'd love to talk about them and support you!\n\n## Project-wide TODOs\n\nThese are suggestions for further cleanup and improvements that came up during review:\n\n* [ ] Various followups for [refactor, kernel: Decouple ArgsManager from blockstorage #27125](https://github.com/bitcoin/bitcoin/pull/27125)\n  * [ ] Martin's request for a follow-up fixing the docstring: https://github.com/bitcoin/bitcoin/pull/27125#discussion_r1190350876\n  \n#### Other various items that arose during review and should be tracked\n* Cory's request for cleaning up the kernel interface functions of pointer and reference types: https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1202937682\n* Marco's request for getting rid of exceptions in the `ArgsManager`: https://github.com/bitcoin/bitcoin/pull/27491#discussion_r1189586654\n* Russell's request for eliminating the BlockNotify signal: https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193904693",
      "state": "open",
      "user": "sedited",
      "created_at": "2023-05-06T08:27:17Z",
      "updated_at": "2026-01-01T21:37:19Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/27587",
      "labels": [
        "Brainstorming",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2814945804,
          "user": "medobrens83",
          "body": "👍👍🏻💯",
          "created_at": "2025-04-18T08:48:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 4,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3065032270,
          "user": "sedited",
          "body": "I re-wrote the tracking issue. It now better reflects all the different areas being worked on and also surfaces a lot of the work I have not opened a pull request for.",
          "created_at": "2025-07-12T10:19:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 167,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3131701221,
          "user": "moonfury-ops",
          "body": "Hello @TheCharlatan \n\nI’m particularly interested in the following areas:\n\nAPI design and language bindings — I’d be happy to contribute or test bindings for additional environments such as JavaScript, Kotlin, or Dart.\nRead-only clients and context-minimal validation — These directions align well with lightweight and alternative Bitcoin client use cases. Abstracting data storage and validation dependencies is a meaningful step toward broader adoption.\nStandalone repository plans — The goal of making the kernel independently usable and testable is compelling. \nI’d be interested in contributing to the CI setup or test framework design if needed.",
          "created_at": "2025-07-29T10:05:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 651,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3216531189,
          "user": "yuvicc",
          "body": "> I’d be happy to contribute or test bindings for additional environments such as JavaScript, Kotlin, or Dart.\n\nI think you can start off with javascript language bindings. See the C API header PR -> https://github.com/bitcoin/bitcoin/pull/30595\n\n",
          "created_at": "2025-08-23T07:28:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 247,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 12550,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3737265193,
      "number": 34086,
      "title": "doc: Use multi-path descriptors in descriptors.md and linked tests.",
      "body": "### Motivation\n\nA single multipath descriptor is the most convenient pattern for multisig; our documentation should use it.\n\nThese files should use multipath descriptors as per https://github.com/bitcoin/bitcoin/commit/2a46e94a1600a4f28e01db23a89f039acaa2c45e and https://github.com/bitcoin/bitcoin/pull/33286:\n\n**Locations:**\n- [ ] [doc/descriptors.md](https://github.com/bitcoin/bitcoin/tree/master/doc/descriptors.md):\n  - [ ] \"Basic Multisig Example\"\n  - [ ] \"Examples\" with this text:\n    > For brevity, the internal \"change\" descriptor accompanying the above external \"receiving\" descriptor is not included here, but it typically differs only in the xpub derivation steps, ending in /1/* for change addresses. \n- [ ] [wallet_miniscript_decaying_multisig_descriptor_psbt.py](https://github.com/bitcoin/bitcoin/tree/master/test/functional/wallet_miniscript_decaying_multisig_descriptor_psbt.py) functional test\n\n### Possible solution\n\nThis only requires familiarity with multi-path descriptor semantics to solve. See [Specifying receiving and change descriptors in one descriptor](https://github.com/bitcoin/bitcoin/blob/master/doc/descriptors.md#specifying-receiving-and-change-descriptors-in-one-descriptor) for how to update `desciptors.md` and #33286's [functional test diff](https://github.com/bitcoin/bitcoin/pull/33286/changes#diff-94f52fa5de899f58d07aca5026545378bc3da616d4927d71435fa0224eda589b) for an approach to solve this issue in the functional test.\n\n\n### Useful Skills\n\n* Understanding of multi-path descriptor semantics\n* Running the Python functional tests\n* Basic Python\n\n### Guidance for new contributors\n\nWant to work on this issue?\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "open",
      "user": "BenWestgate",
      "created_at": "2025-12-17T04:16:29Z",
      "updated_at": "2026-01-01T07:47:33Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34086",
      "labels": [
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 3665495043,
          "user": "ritoban23",
          "body": "@BenWestgate Hi I would like to work on this! will submit a PR soon\n",
          "created_at": "2025-12-17T13:59:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 68,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3700693869,
          "user": "ShirshenduR",
          "body": "@fanquake Is this issue solved or still available?",
          "created_at": "2025-12-30T22:29:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3703379826,
          "user": "BenWestgate",
          "body": "@ShirshenduR the solution in https://github.com/bitcoin/bitcoin/pull/34100 could use additional review.",
          "created_at": "2026-01-01T07:47:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 103,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1885,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3387137862,
      "number": 33318,
      "title": "test: intermittent issue in p2p_1p1c_network.py",
      "body": "Timeout failure in the TSAN job here https://github.com/bitcoin/bitcoin/actions/runs/17489459842/job/49675712585?pr=33317:\n```bash\n2025-09-05T10:51:37.2200865Z \u001b[0;33m node3 2025-09-05T10:51:30.541244Z [httpworker.7] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=getpeerinfo user=__cookie__ \u001b[0m\n2025-09-05T10:51:37.2201033Z \u001b[0;36m test  2025-09-05T10:51:31.542469Z TestFramework (ERROR): Unexpected exception \u001b[0m\n2025-09-05T10:51:37.2201165Z \u001b[0;36m                                   Traceback (most recent call last):\u001b[0m\n2025-09-05T10:51:37.2201494Z \u001b[0;36m                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/test_framework.py\", line 195, in main\u001b[0m\n2025-09-05T10:51:37.2201593Z \u001b[0;36m                                       self.run_test()\u001b[0m\n2025-09-05T10:51:37.2201851Z \u001b[0;36m                                     File \"/home/admin/actions-runner/_work/_temp/build/test/functional/p2p_1p1c_network.py\", line 155, in run_test\u001b[0m\n2025-09-05T10:51:37.2201964Z \u001b[0;36m                                       self.sync_mempools()\u001b[0m\n2025-09-05T10:51:37.2202246Z \u001b[0;36m                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/test_framework.py\", line 811, in sync_mempools\u001b[0m\n2025-09-05T10:51:37.2202421Z \u001b[0;36m                                       raise AssertionError(\"Mempool sync timed out after {}s:{}\".format(\u001b[0m\n2025-09-05T10:51:37.2202566Z \u001b[0;36m                                   AssertionError: Mempool sync timed out after 2400s:\u001b[0m\n2025-09-05T10:51:37.2216842Z \u001b[0;36m                                     {'74c951d3e1bc27437394377a48d6ff7f11b49c1e0bd05e169d54c5138deea7f2', '77708ea74fbffa47e192e5be99b03a72e830f22a8b60d02e262ba8cfbc3e9b47', '233c3760167a81cd6ffccae81bcb650bdbd9c84b72cf87bf329940d2ac97b8ee', '390ec58b4c5b017f557e30ead39f9921b3fec5729b07ff89415c5570275a87dc', 'c8ca64cb3da89905b3ccfc5423d908a17273f90c4893373af9354e61f3bd651c', \n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-05T10:56:58Z",
      "updated_at": "2025-12-31T11:27:02Z",
      "closed_at": "2025-12-31T11:27:02Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/33318",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3391409712,
          "user": "instagibbs",
          "body": "I think I've nailed down what's happening from logs:\n\n1. test peer sends child to node1\n2. node1 has parent resolved normally, it's above minfee\n3. test peer is picked as unique peer to schedule resolution of child during test peer's next \"turn\" in networking thread\n4. node0 advertises child by wtxid (it's ignored currently because it's in orphanage and has no parents, test peer is already the unique reconsideration peer so that's fairly immaterial?)\n5. test peer disconnects before ProcessOrphanTx is called (and we never reconsider the orphan again because all parents are known!)\n6. now any peer can advertise the child again but in this test only node0 can, and it already has, so the transaction never makes it\n\nThe test does the disconnect earlier but from socket closing to clearing of peer state, this race can occur.\n\ndue to https://github.com/bitcoin/bitcoin/pull/31829 node1's orphanage will actually empty out on disconnect, so it's not actually testing much anymore, so that can be cleaned up and I expect the test to work better (especially if you assert the orphanage of each node is in the expected state)\n\nOverall, I think this is a vote in favor of forcing ProcessOrphanTx on disconnect by peer, or having the reconsiderable slot reassigned to a new peer to disallow them from playing similar games. Seems like it only effects \"catch up\" orphanage usage, not 1p1c, and relies on some incredible timing to disrupt it successfully\n\nSome discussion of this DoS strategy here: https://github.com/bitcoin/bitcoin/pull/31829#issuecomment-3001627814",
          "created_at": "2025-10-10T17:31:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1564,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3392126924,
          "user": "glozow",
          "body": "> The test does the disconnect earlier but from socket closing to clearing of peer state, this race can occur.\n\nIf it's a race, then this should go away if we make node3 the one that pre-receives orphans?\n\n\n```diff\n\ndiff --git a/test/functional/p2p_1p1c_network.py b/test/functional/p2p_1p1c_network.py\nindex e4d3b738c19..5567b4e7002 100755\n--- a/test/functional/p2p_1p1c_network.py\n+++ b/test/functional/p2p_1p1c_network.py\n@@ -109,14 +109,14 @@ class PackageRelayTest(BitcoinTestFramework):\n         # Assemble return results\n         packages_to_submit = [package_hex_1, package_hex_2, package_hex_3, package_hex_4]\n         # node0: sender\n-        # node1: pre-received the children (orphan)\n-        # node3: pre-received the parents (too low fee)\n+        # node2: pre-received the parents (too low fee)\n+        # node3: pre-received the children (orphan)\n         # All nodes receive parent_31 ahead of time.\n         txns_to_send = [\n             [],\n-            [child_1, child_2, parent_31, child_3, child_4],\n             [parent_31],\n-            [parent_1, parent_2, parent_31, parent_4]\n+            [parent_1, parent_2, parent_31, parent_4],\n+            [child_1, child_2, parent_31, child_3, child_4]\n         ]\n \n         return packages_to_submit, txns_to_send\n\n```",
          "created_at": "2025-10-10T19:52:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1287,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3397358091,
          "user": "instagibbs",
          "body": "I don't think the pre-received child peer(s) make sense anymore, as we intentionally zero these out of the orphanage when all the announcing peers disconnect.\n\nIf we want to keep this part just to exercise that state space, we could make sure that we wait until all the node's orphan slots are empty via rpc before continuing with the ultimate submitpackage?",
          "created_at": "2025-10-13T12:37:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 358,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3503644320,
          "user": "fanquake",
          "body": "Seen again in https://github.com/bitcoin/bitcoin/actions/runs/19173508101/job/54812101221?pr=33810.",
          "created_at": "2025-11-07T16:53:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 99,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3548640184,
          "user": "instagibbs",
          "body": "I've also discovered that `create_package_2outs` has regressed since we lowered minrelay to 0.1s/vbyte. The `parent_4` now pays for itself rather than needing cppf.\n\nI think it'd be better if we do 0-fee parents to make the test less brittle. I have a branch that I can push along later shortly after cluster mempool and https://github.com/bitcoin/bitcoin/pull/33892 is merged: https://github.com/instagibbs/bitcoin/commits/2025-11-1p1c-test-timeout/\n\nAs per branch I think just making sure the orphanage is actually wiped before doing `submitpackage` would be a minimum viable improvement for now.",
          "created_at": "2025-11-18T16:59:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 598,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3662134774,
          "user": "maflcko",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/20277892656/job/58232592949#step:11:2724",
          "created_at": "2025-12-16T19:51:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 88,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3662176070,
          "user": "instagibbs",
          "body": "Still waiting on https://github.com/bitcoin/bitcoin/pull/33892 which would make it a lot easier to make this test easier to reason about (no filling mempool and dealing with dynamic limits)",
          "created_at": "2025-12-16T20:04:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 189,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2091,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1093048890,
      "number": 23968,
      "title": "test: functional tests fail to start if -maxconnections is reduced",
      "body": "Noticed on NetBSD, but the same issue could happen on any other system. The issue is outputting the `Reducing -maxconnections` warning during startup:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2f37b221d183dfc8136fa71730acb8f218ad0dcb/src/init.cpp#L893-L898\r\n\r\nWhich causes the tests to abort, due to unexpected output:\r\n```bash\r\npython3.9 test/functional/test_runner.py --jobs=3           \r\nTemporary test directory at /tmp/test_runner_₿_🏃_20220104_002803\r\nRunning Unit Tests for Test Framework Modules\r\n..........\r\n----------------------------------------------------------------------\r\nRan 10 tests in 1.310s\r\n\r\nOK\r\nTraceback (most recent call last):\r\n  File \"/home/ec2-user/bitcoin/test/functional/create_cache.py\", line 27, in <module>\r\n    CreateCache().main()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 304, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 555, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_node.py\", line 336, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/coverage.py\", line 49, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/authproxy.py\", line 142, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/authproxy.py\", line 107, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 1279, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 1325, in _send_request\r\n    self.endheaders(body, encode_chunked=encode_chunked)\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 1274, in endheaders\r\n    self._send_output(message_body, encode_chunked=encode_chunked)\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 1034, in _send_output\r\n    self.send(msg)\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 974, in send\r\n    self.connect()\r\n  File \"/usr/pkg/lib/python3.9/http/client.py\", line 945, in connect\r\n    self.sock = self._create_connection(\r\n  File \"/usr/pkg/lib/python3.9/socket.py\", line 844, in create_connection\r\n    raise err\r\n  File \"/usr/pkg/lib/python3.9/socket.py\", line 832, in create_connection\r\n    sock.connect(sa)\r\nConnectionRefusedError: [Errno 61] Connection refused\r\n2022-01-04T00:28:04.864000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20220104_002803/cache\r\n2022-01-04T00:28:05.605000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 287, in setup\r\n    self.setup_chain()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 378, in setup_chain\r\n    self._initialize_chain()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 792, in _initialize_chain\r\n    self.stop_nodes()\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_framework.py\", line 555, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/ec2-user/bitcoin/test/functional/test_framework/test_node.py\", line 350, in stop_node\r\n    raise AssertionError(\"Unexpected stderr {} != {}\".format(stderr, expected_stderr))\r\nAssertionError: Unexpected stderr Warning: Reducing -maxconnections from 125 to 96, because of system limitations. != \r\n2022-01-04T00:28:05.663000Z TestFramework (INFO): Stopping nodes\r\n[node 0] Cleaning up leftover process\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2022-01-04T06:23:39Z",
      "updated_at": "2025-12-30T12:41:31Z",
      "closed_at": "2024-12-30T19:34:29Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/23968",
      "labels": [
        "Tests"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4191,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2119116348,
      "number": 29386,
      "title": "Default rpcthreads value (4) is too small",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nI keep having to increase `rpcthreads` about everywhere I'm using bitcoind because without it it's not very robust/performant.\r\n\r\nPasting verbatim my comment in [bdk that just hit the same issue](https://github.com/bitcoindevkit/bdk/pull/1320#issuecomment-1926231768):\r\n\r\n\r\n> From a perspective of most workloads e.g. asking for blockchain data, `bitcoind` (and `electrs`) acts very much like database software, e.g. posgresql. Postgresql is an [interesting case because it utilizes process-based model](https://tech.slashdot.org/story/23/06/19/1723259/postgresql-reconsiders-its-process-based-model) - meaning it will spawn not just a thread, but a whole process for every client connection - waaay heavier than just a thread.\r\n> \r\n> Even for that heavy model, the recommendations will be [to limit it around around 500](https://cloud.ibm.com/docs/databases-for-postgresql?topic=databases-for-postgresql-managing-connections).\r\n> \r\n> It takes many threads to saturate modern IO device. [Just an example from a yt video I had on hand benchamarking filesystems](https://youtu.be/AhjL1SHku7M?si=ZnSzjDUFpRvorQa5&t=241). Each bar is number of workers. And these are dedicated IO-generating workers, generating heavy load in a tight loop. So in this benchmark, it will take like 4 workers. Possibly one worker is even more threads. But an rpc thread in bitcoind by necessity will be spending lots of time reading things and writing stuff to a tcp connection, doing some checks, re-encodings and what not. To actually get a maximum IO performance there will need to be a lot of them. I'd say 64 per core.\r\n> \r\n> \r\n> On my mostly idle laptop at this very moment there are 2k threads running:\r\n> \r\n> ![image](https://github.com/bitcoindevkit/bdk/assets/9209/94c5301f-ffd8-4d47-bacc-a3943bbe1d8a)\r\n> \r\n> On a modern Linux a thread is just a stack, which due to CoW optimizations will really amount to 1 or 2 pages (4K page size) of physically used memory plus a tiny (1K?) amount to track it all in the kernel.\r\n> \r\n> There's really not much to save on thread counts in a grand scheme of things.\r\n> \r\n> Personally, I like to run as lots and lots of tests in parallel, especially any sort of integration and e2e tests, which tend to have lots of dead time - waiting for stuff (like disk and network IO - latency-bound things). The usual limit to this is the available memory. Additional benefit is also that it tends to expose problems more often, as all operations tend to have more ... timing jitter.\r\n> \r\n> So I'm really surprised that the default in `bitcoind` is 4. That's too little even for an old generation raspberry pi.\r\n\r\nI just [noticed the comment in the code](https://github.com/bitcoin/bitcoin/blob/9eeee7caa3f95ee17a645e12d330261f8e3c2dbf/doc/reduce-memory.md?plain=1#L37C1-L39C15):\r\n\r\n> For each thread a thread stack needs to be allocated. By default on Linux,\r\nthreads take up 8MiB for the thread stack on a 64-bit system, and 4MiB in a\r\n32-bit system.\r\n\r\nOnly 8MiB of Virtual Memory is allocated, which doesn't really mean anything. Due to CoW mechanism, only the parts of stack that are being used will be allocated as Physical Memory which is the one that actually matters.\r\n\r\n\r\n\r\n\n\n### Expected behaviour\n\nNA\n\n### Steps to reproduce\n\nNA\n\n### Relevant log output\n\nNA\n\n### How did you obtain Bitcoin Core\n\nOther\n\n### What version of Bitcoin Core are you using?\n\nna\n\n### Operating system and version\n\nna\n\n### Machine specifications\n\nLinux",
      "state": "closed",
      "user": "dpc",
      "created_at": "2024-02-05T17:45:07Z",
      "updated_at": "2025-12-30T12:41:30Z",
      "closed_at": "2024-12-30T18:45:52Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/29386",
      "labels": [
        "RPC/REST/ZMQ",
        "Resource usage"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3599,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2727444140,
      "number": 31446,
      "title": "Intermittent issue in feature_index_prune.py: assert_equal(pruneheight_new, 248) AssertionError: not(249 == 248)",
      "body": "https://cirrus-ci.com/task/5093097040773120?logs=ci#L2925\r\n\r\n```\r\n[05:55:03.695]  test  2024-12-03T05:55:02.834000Z TestFramework (ERROR): Assertion failed \r\n[05:55:03.695]                                    Traceback (most recent call last):\r\n[05:55:03.695]                                      File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 135, in main\r\n[05:55:03.695]                                        self.run_test()\r\n[05:55:03.695]                                      File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_index_prune.py\", line 77, in run_test\r\n[05:55:03.695]                                        assert_equal(pruneheight_new, 248)\r\n[05:55:03.695]                                      File \"/ci_container_base/test/functional/test_framework/util.py\", line 77, in assert_equal\r\n[05:55:03.695]                                        raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\n[05:55:03.695]                                    AssertionError: not(249 == 248)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-09T15:29:12Z",
      "updated_at": "2025-12-30T12:41:29Z",
      "closed_at": "2024-12-30T19:28:06Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31446",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 2561273816,
          "user": "maflcko",
          "body": "https://cirrus-ci.com/task/6171541521563648?logs=ci#L2939",
          "created_at": "2024-12-24T16:28:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 57,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1213,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2734300130,
      "number": 31473,
      "title": "verification progress dropped 11% on bitcoin core update from 22 to 28",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nPossibly related to #31127 with wrong estimation.\r\n\r\nI had a full node synced for a while then got shut down for a year or so. I started syncing again last week and got to 90% verification progress using Bitcoin Core v22 on Windows 11.\r\n\r\nI shut it down normally and started v28 and found out that sync progress dropped to 79% (although height looks correct). The estimation of 79% seems off by a margin (~810204 / ~874306).\r\n\r\nPrior to starting 28.0, I changed cache size to 3072 from 2000mb. Also enabled listen=1 and natpmp=1 and set rpcthreads to 4\r\n\r\n\r\nBelow is the output from bitcoind\r\n\r\nv22.0\r\n```\r\n2024-12-11T22:32:59Z UpdateTip: new best=0000000000000000000025c009ef7f5a53d83c0f90b7204e6d4d6b8c558c3f46 height=810204 version=0x2161a000 log2_work=94.450625 tx=902076116 date='2023-10-01T21:38:54Z' progress=0.907849 cache=2729.0MiB(19552965txo)\r\n2024-12-11T22:33:08Z addcon thread exit\r\n2024-12-11T22:33:08Z Shutdown: In progress...\r\n2024-12-11T22:33:29Z UpdateTip: new best=0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1 height=810205 version=0x20598000 log2_work=94.450638 tx=902078375 date='2023-10-01T21:51:34Z' progress=0.907851 cache=2729.5MiB(19557179txo)\r\n2024-12-11T22:33:29Z net thread exit\r\n2024-12-11T22:33:29Z opencon thread exit\r\n2024-12-11T22:33:29Z msghand thread exit\r\n2024-12-11T22:33:30Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2024-12-11T22:33:30Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.03s)\r\n2024-12-11T22:33:30Z scheduler thread exit\r\n2024-12-11T22:33:30Z Writing 0 unbroadcast transactions to disk.\r\n2024-12-11T22:33:30Z Dumped mempool: 0s to copy, 0.042118s to dump\r\n2024-12-11T22:33:30Z FlushStateToDisk: write coins cache to disk (19557179 coins, 2862106kB) started\r\n2024-12-11T22:38:21Z FlushStateToDisk: write coins cache to disk (19557179 coins, 2862106kB) completed (290.77s)\r\n2024-12-11T22:38:22Z FlushStateToDisk: write coins cache to disk (0 coins, 249287kB) started\r\n2024-12-11T22:38:22Z FlushStateToDisk: write coins cache to disk (0 coins, 249287kB) completed (0.03s)\r\n2024-12-11T22:38:22Z [btc] Releasing wallet\r\n2024-12-11T22:38:24Z Shutdown: done\r\n```\r\n\r\nv28.0\r\n```\r\n2024-12-11T22:44:56Z Bitcoin Core version v28.0.0 (release build)\r\n2024-12-11T22:44:56Z Script verification uses 7 additional threads\r\n...\r\n2024-12-11T22:45:13Z [Chainstate [ibd] @ height 810205 (0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1)] resized coinsdb cache to 8.0 MiB\r\n2024-12-11T22:45:13Z [Chainstate [ibd] @ height 810205 (0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1)] resized coinstip cache to 3062.0 MiB\r\n2024-12-11T22:45:13Z init message: Verifying blocks…\r\n2024-12-11T22:45:13Z Verifying last 6 blocks at level 3\r\n2024-12-11T22:45:13Z Verification progress: 0%\r\n2024-12-11T22:45:18Z Verification progress: 16%\r\n2024-12-11T22:45:20Z Verification progress: 33%\r\n2024-12-11T22:45:22Z Verification progress: 50%\r\n2024-12-11T22:45:27Z Verification progress: 66%\r\n2024-12-11T22:45:32Z Verification progress: 83%\r\n2024-12-11T22:45:37Z Verification progress: 99%\r\n2024-12-11T22:45:37Z Verification: No coin database inconsistencies in last 6 blocks (13700 transactions)\r\n...\r\n2024-12-11T22:45:38Z block tree size = 874310\r\n2024-12-11T22:45:38Z nBestHeight = 810205\r\n...\r\n2024-12-11T22:46:38Z UpdateTip: new best=0000000000000000000328e424cd9ff6317a8f256f7bc2b5d3aa487e295eb27d height=810206 version=0x2000a000 log2_work=94.450651 tx=902081169 date='2023-10-01T22:03:16Z' progress=0.799296 cache=2.0MiB(13498txo)\r\n...\r\n2024-12-11T23:05:30Z UpdateTip: new best=00000000000000000003c60a6d2e1057f22c6196fd460426edcac61fb6566bc6 height=810257 version=0x31df0000 log2_work=94.451318 tx=902204695 date='2023-10-02T05:46:14Z' progress=0.799400 cache=66.2MiB(471028txo)\r\n2024-12-11T23:05:31Z New outbound-full-relay v1 peer connected: version: 70016, blocks=874317, peer=11\r\n2024-12-11T23:06:43Z UpdateTip: new best=000000000000000000002523bf6b52063643fe2f6fa0044be77b9281f032fa44 height=810258 version=0x2c1a2000 log2_work=94.451331 tx=902206413 date='2023-10-02T05:49:36Z' progress=0.799402 cache=67.0MiB(477299txo)\r\n```\r\n\r\noutput from getblockchaininfo v28\r\n```json\r\n{\r\n  \"chain\": \"main\",\r\n  \"blocks\": 810219,\r\n  \"headers\": 874306,\r\n  \"bestblockhash\": \"00000000000000000001ea4fa4ece42b581f5fdc166f7b38f5c8fa681e4df428\",\r\n  \"difficulty\": 57119871304635.31,\r\n  \"time\": 1696204947,\r\n  \"mediantime\": 1696201662,\r\n  \"verificationprogress\": 0.7993304061924166,\r\n  \"initialblockdownload\": true,\r\n  \"chainwork\": \"00000000000000000000000000000000000000005779f10cf088bda014db5010\",\r\n  \"size_on_disk\": 585465035888,\r\n  \"pruned\": false,\r\n  \"warnings\": [\r\n  ]\r\n}\r\n```\r\n\r\nv22\r\n```json\r\n{\r\n  \"bestblockhash\": \"00000000000000000002a1d92d666379d4dad703f83a65d3fab646ac926059db\",\r\n  \"blocks\": 810129,\r\n  \"chain\": \"main\",\r\n  \"chainwork\": \"00000000000000000000000000000000000000005767ad75997516b2847c0618\",\r\n  \"difficulty\": 57119871304635.31,\r\n  \"headers\": 874306,\r\n  \"initialblockdownload\": true,\r\n  \"mediantime\": 1696145087,\r\n  \"pruned\": false,\r\n  \"size_on_disk\": 585444075524,\r\n  \"softforks\": { \"...\":\"...\" },\r\n  \"verificationprogress\": 0.9077289515209678,\r\n  \"warnings\": \"\"\r\n}\r\n```\r\n\r\n### Expected behaviour\r\n\r\nI'd expect the progress to be the same and reasonable maybe?\r\n\r\n### Steps to reproduce\r\n\r\nupgrade from v22 to v28 using same datadir and run right away\r\n\r\n### Relevant log output\r\n\r\n```log\r\n2024-12-11T22:31:49Z UpdateTip: new best=00000000000000000004ad5b9643b09000d1e468caf79c19492429865b158489 height=810202 version=0x2fffe000 log2_work=94.450599 tx=902071710 date='2023-10-01T21:25:05Z' progress=0.907847 cache=2727.9MiB(19544073txo)\r\n2024-12-11T22:31:54Z UpdateTip: new best=00000000000000000004c503eb1af0f16fe468100db3dae2caf7420f22aaa8a3 height=810203 version=0x2b5a8000 log2_work=94.450612 tx=902074572 date='2023-10-01T21:35:20Z' progress=0.907848 cache=2728.4MiB(19547525txo)\r\n2024-12-11T22:32:59Z UpdateTip: new best=0000000000000000000025c009ef7f5a53d83c0f90b7204e6d4d6b8c558c3f46 height=810204 version=0x2161a000 log2_work=94.450625 tx=902076116 date='2023-10-01T21:38:54Z' progress=0.907849 cache=2729.0MiB(19552965txo)\r\n2024-12-11T22:33:08Z addcon thread exit\r\n2024-12-11T22:33:08Z Shutdown: In progress...\r\n2024-12-11T22:33:29Z UpdateTip: new best=0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1 height=810205 version=0x20598000 log2_work=94.450638 tx=902078375 date='2023-10-01T21:51:34Z' progress=0.907851 cache=2729.5MiB(19557179txo)\r\n2024-12-11T22:33:29Z net thread exit\r\n2024-12-11T22:33:29Z opencon thread exit\r\n2024-12-11T22:33:29Z msghand thread exit\r\n2024-12-11T22:33:30Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2024-12-11T22:33:30Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.03s)\r\n2024-12-11T22:33:30Z scheduler thread exit\r\n2024-12-11T22:33:30Z Writing 0 unbroadcast transactions to disk.\r\n2024-12-11T22:33:30Z Dumped mempool: 0s to copy, 0.042118s to dump\r\n2024-12-11T22:33:30Z FlushStateToDisk: write coins cache to disk (19557179 coins, 2862106kB) started\r\n2024-12-11T22:38:21Z FlushStateToDisk: write coins cache to disk (19557179 coins, 2862106kB) completed (290.77s)\r\n2024-12-11T22:38:22Z FlushStateToDisk: write coins cache to disk (0 coins, 249287kB) started\r\n2024-12-11T22:38:22Z FlushStateToDisk: write coins cache to disk (0 coins, 249287kB) completed (0.03s)\r\n2024-12-11T22:38:22Z [btc] Releasing wallet\r\n2024-12-11T22:38:24Z Shutdown: done\r\n\r\n\r\n\r\n\r\n\r\n2024-12-11T22:44:56Z Bitcoin Core version v28.0.0 (release build)\r\n2024-12-11T22:44:56Z Script verification uses 7 additional threads\r\n2024-12-11T22:44:56Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\n2024-12-11T22:44:57Z Using RdSeed as an additional entropy source\r\n2024-12-11T22:44:57Z Using RdRand as an additional entropy source\r\n2024-12-11T22:44:59Z Default data directory C:\\Users\\_PATH\\AppData\\Local\\Bitcoin\r\n2024-12-11T22:44:59Z Using data directory D:\\_PATH\r\n2024-12-11T22:44:59Z Config file: D:\\_PATH\\bitcoin.conf\r\n2024-12-11T22:44:59Z Config file arg: blockmaxweight=\"4000000\"\r\n2024-12-11T22:44:59Z Config file arg: blockreconstructionextratxn=\"1000\"\r\n2024-12-11T22:44:59Z Config file arg: datadir=\"D:\\\\_PATH\"\r\n2024-12-11T22:44:59Z Config file arg: dbcache=\"3072\"\r\n2024-12-11T22:44:59Z Config file arg: listen=\"1\"\r\n2024-12-11T22:44:59Z Config file arg: maxmempool=\"1000\"\r\n2024-12-11T22:44:59Z Config file arg: maxorphantx=\"1000\"\r\n2024-12-11T22:44:59Z Config file arg: maxsigcachesize=\"100\"\r\n2024-12-11T22:44:59Z Config file arg: natpmp=\"1\"\r\n2024-12-11T22:44:59Z Config file arg: prune=\"0\"\r\n2024-12-11T22:44:59Z Config file arg: rpcallowip=\"192.168.1.0/24\"\r\n2024-12-11T22:44:59Z Config file arg: rpcauth=****\r\n2024-12-11T22:44:59Z Config file arg: rpcbind=\"0.0.0.0\"\r\n2024-12-11T22:44:59Z Config file arg: rpcport=\"8332\"\r\n2024-12-11T22:44:59Z Config file arg: rpcthreads=\"4\"\r\n2024-12-11T22:44:59Z Config file arg: server=\"1\"\r\n2024-12-11T22:44:59Z Config file arg: upnp=\"0\"\r\n2024-12-11T22:44:59Z Setting file arg: wallet = [\"btc\"]\r\n2024-12-11T22:44:59Z Command-line arg: conf=\"bitcoin.conf\"\r\n2024-12-11T22:44:59Z Command-line arg: datadir=\"D:/_PATH\"\r\n2024-12-11T22:44:59Z Using at most 125 automatic connections (2048 file descriptors available)\r\n2024-12-11T22:44:59Z scheduler thread start\r\n2024-12-11T22:44:59Z Binding RPC on address 0.0.0.0 port 8332\r\n2024-12-11T22:44:59Z WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\r\n2024-12-11T22:44:59Z Using random cookie authentication.\r\n2024-12-11T22:44:59Z Generated RPC authentication cookie D:\\_PATH\\.cookie\r\n2024-12-11T22:44:59Z Permissions used for cookie: rw-rw-rw-\r\n2024-12-11T22:44:59Z Using rpcauth authentication.\r\n2024-12-11T22:44:59Z Starting HTTP server with 4 worker threads\r\n2024-12-11T22:44:59Z Using wallet directory D:\\_PATH\r\n2024-12-11T22:44:59Z init message: Verifying wallet(s)…\r\n2024-12-11T22:44:59Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2024-12-11T22:44:59Z Using wallet D:\\_PATH\\btc\\wallet.dat\r\n2024-12-11T22:44:59Z BerkeleyEnvironment::Open: LogDir=D:\\_PATH\\btc\\database ErrorFile=D:\\_PATH\\btc\\db.log\r\n2024-12-11T22:45:00Z Using /16 prefix for IP bucketing\r\n2024-12-11T22:45:00Z init message: Loading P2P addresses…\r\n2024-12-11T22:45:00Z Loaded 70570 addresses from peers.dat  523ms\r\n2024-12-11T22:45:00Z init message: Loading banlist…\r\n2024-12-11T22:45:00Z banlist.dat ignored because it can only be read by Bitcoin Core version 22.x. Remove \"D:\\_PATH\\banlist.dat\" to silence this warning.\r\n2024-12-11T22:45:00Z SetNetworkActive: true\r\n2024-12-11T22:45:00Z Script verification uses 7 additional threads\r\n2024-12-11T22:45:00Z Cache configuration:\r\n2024-12-11T22:45:00Z * Using 2.0 MiB for block index database\r\n2024-12-11T22:45:00Z * Using 8.0 MiB for chain state database\r\n2024-12-11T22:45:00Z * Using 3062.0 MiB for in-memory UTXO set (plus up to 953.7 MiB of unused mempool space)\r\n2024-12-11T22:45:00Z Using obfuscation key for blocksdir *.dat files (D:\\_PATH\\blocks): '0000000000000000'\r\n2024-12-11T22:45:00Z Using 50 MiB out of 50 MiB requested for signature cache, able to store 1638400 elements\r\n2024-12-11T22:45:00Z Using 50 MiB out of 50 MiB requested for script execution cache, able to store 1638400 elements\r\n2024-12-11T22:45:00Z init message: Loading block index…\r\n2024-12-11T22:45:00Z Assuming ancestors of block 000000000000000000011c5890365bdbe5d25b97ce0057589acaef4f1a57263f have valid signatures.\r\n2024-12-11T22:45:00Z Setting nMinimumChainWork=000000000000000000000000000000000000000088e186b70e0862c193ec44d6\r\n2024-12-11T22:45:00Z Opening LevelDB in D:\\_PATH\\blocks\\index\r\n2024-12-11T22:45:01Z Opened LevelDB successfully\r\n2024-12-11T22:45:01Z Using obfuscation key for D:\\_PATH\\blocks\\index: 0000000000000000\r\n2024-12-11T22:45:09Z LoadBlockIndexDB: last block file = 3863\r\n2024-12-11T22:45:10Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=28, size=43132583, heights=809956...810727, time=2023-09-30...2023-10-05)\r\n2024-12-11T22:45:10Z Checking all blk files are present...\r\n2024-12-11T22:45:11Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\r\n2024-12-11T22:45:11Z Opening LevelDB in D:\\_PATH\\chainstate\r\n2024-12-11T22:45:13Z Opened LevelDB successfully\r\n2024-12-11T22:45:13Z Using obfuscation key for D:\\_PATH\\chainstate: fbaa23d084ac0d83\r\n2024-12-11T22:45:13Z Loaded best chain: hashBestChain=0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1 height=810205 date=2023-10-01T21:51:34Z progress=0.799294\r\n2024-12-11T22:45:13Z Opening LevelDB in D:\\_PATH\\chainstate\r\n2024-12-11T22:45:13Z Opened LevelDB successfully\r\n2024-12-11T22:45:13Z Using obfuscation key for D:\\_PATH\\chainstate: fbaa23d084ac0d83\r\n2024-12-11T22:45:13Z [Chainstate [ibd] @ height 810205 (0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1)] resized coinsdb cache to 8.0 MiB\r\n2024-12-11T22:45:13Z [Chainstate [ibd] @ height 810205 (0000000000000000000388fb7927edce65a92fd529855ee0964a132a74943fd1)] resized coinstip cache to 3062.0 MiB\r\n2024-12-11T22:45:13Z init message: Verifying blocks…\r\n2024-12-11T22:45:13Z Verifying last 6 blocks at level 3\r\n2024-12-11T22:45:13Z Verification progress: 0%\r\n2024-12-11T22:45:18Z Verification progress: 16%\r\n2024-12-11T22:45:20Z Verification progress: 33%\r\n2024-12-11T22:45:22Z Verification progress: 50%\r\n2024-12-11T22:45:27Z Verification progress: 66%\r\n2024-12-11T22:45:32Z Verification progress: 83%\r\n2024-12-11T22:45:37Z Verification progress: 99%\r\n2024-12-11T22:45:37Z Verification: No coin database inconsistencies in last 6 blocks (13700 transactions)\r\n2024-12-11T22:45:37Z  block index           36930ms\r\n2024-12-11T22:45:37Z init message: Loading wallet…\r\n2024-12-11T22:45:37Z BerkeleyEnvironment::Open: LogDir=D:\\_PATH\\btc\\database ErrorFile=D:\\_PATH\\btc\\db.log\r\n2024-12-11T22:45:37Z [btc] Wallet file version = 10500, last client version = 220000\r\n2024-12-11T22:45:37Z [btc] Legacy Wallet Keys: 0 plaintext, 2001 encrypted, 2001 w/ metadata, 2001 total.\r\n2024-12-11T22:45:37Z [btc] Descriptors: 0, Descriptor Keys: 0 plaintext, 0 encrypted, 0 total.\r\n2024-12-11T22:45:38Z [btc] Wallet completed loading in             291ms\r\n2024-12-11T22:45:38Z [btc] setKeyPool.size() = 2000\r\n2024-12-11T22:45:38Z [btc] mapWallet.size() = 4\r\n2024-12-11T22:45:38Z [btc] m_address_book.size() = 1\r\n2024-12-11T22:45:38Z Setting NODE_NETWORK on non-prune mode\r\n2024-12-11T22:45:38Z block tree size = 874310\r\n2024-12-11T22:45:38Z nBestHeight = 810205\r\n2024-12-11T22:45:38Z initload thread start\r\n2024-12-11T22:45:38Z mapport thread start\r\n2024-12-11T22:45:38Z torcontrol thread start\r\n2024-12-11T22:45:38Z natpmp: readnatpmpresponseorretry() for public address failed with -5 error.\r\n2024-12-11T22:45:38Z Bound to 127.0.0.1:8334\r\n2024-12-11T22:45:38Z Bound to [::]:8333\r\n2024-12-11T22:45:38Z Bound to 0.0.0.0:8333\r\n2024-12-11T22:45:38Z Loaded 0 addresses from \"anchors.dat\"\r\n2024-12-11T22:45:38Z 0 block-relay-only anchors will be tried for connections.\r\n2024-12-11T22:45:38Z init message: Starting network threads…\r\n2024-12-11T22:45:38Z net thread start\r\n2024-12-11T22:45:38Z opencon thread start\r\n2024-12-11T22:45:38Z dnsseed thread start\r\n2024-12-11T22:45:38Z addcon thread start\r\n2024-12-11T22:45:38Z msghand thread start\r\n2024-12-11T22:45:38Z Waiting 300 seconds before querying DNS seeds.\r\n2024-12-11T22:46:38Z UpdateTip: new best=0000000000000000000328e424cd9ff6317a8f256f7bc2b5d3aa487e295eb27d height=810206 version=0x2000a000 log2_work=94.450651 tx=902081169 date='2023-10-01T22:03:16Z' progress=0.799296 cache=2.0MiB(13498txo)\r\n2024-12-11T22:47:27Z UpdateTip: new best=000000000000000000005bf8f39f891a7ef192cd420aca62e6e4e712f9651345 height=810207 version=0x30b0c000 log2_work=94.450664 tx=902083876 date='2023-10-01T22:15:30Z' progress=0.799299 cache=3.7MiB(26474txo)\r\n2024-12-11T22:50:23Z UpdateTip: new best=00000000000000000003d001eba5cebcc7f518100c565e9b81a8d43abe1a4647 height=810208 version=0x21b18000 log2_work=94.450677 tx=902085395 date='2023-10-01T22:16:33Z' progress=0.799299 cache=5.4MiB(40108txo)\r\n2024-12-11T22:50:33Z UpdateTip: new best=000000000000000000023aa4cd17246fd163f70c76886d0a8a0c95de12064463 height=810209 version=0x31c16000 log2_work=94.450690 tx=902089477 date='2023-10-01T22:26:53Z' progress=0.799303 cache=7.2MiB(50870txo)\r\n2024-12-11T22:50:38Z natpmp: readnatpmpresponseorretry() for public address failed with -5 error.\r\n2024-12-11T22:50:38Z Loading addresses from DNS seed seed.bitcoin.sipa.be.\r\n2024-12-11T22:50:38Z Loading addresses from DNS seed dnsseed.emzy.de.\r\n2024-12-11T22:50:38Z Loading addresses from DNS seed dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us.\r\n2024-12-11T22:50:40Z Waiting 300 seconds before querying DNS seeds.\r\n2024-12-11T22:51:05Z UpdateTip: new best=00000000000000000003bc9f4d0c3ee9506a98af5f998e76a26d0ce738857388 height=810210 version=0x20400000 log2_work=94.450703 tx=902091419 date='2023-10-01T22:34:18Z' progress=0.799304 cache=8.5MiB(61772txo)\r\n2024-12-11T22:51:05Z init message: Done loading\r\n2024-12-11T22:51:18Z UpdateTip: new best=000000000000000000015d7268a3392ee8a1d12df7487ab05a16850db6b55d27 height=810211 version=0x20000000 log2_work=94.450716 tx=902095202 date='2023-10-01T22:41:03Z' progress=0.799307 cache=9.7MiB(70383txo)\r\n2024-12-11T22:51:32Z UpdateTip: new best=00000000000000000001e1f6c8ead46189e4be15a9d4ed23c9c3ab8173592fae height=810212 version=0x29274000 log2_work=94.450729 tx=902097477 date='2023-10-01T22:53:50Z' progress=0.799309 cache=10.7MiB(80259txo)\r\n2024-12-11T22:51:36Z UpdateTip: new best=000000000000000000017157c555d2dbb157fab5fc745a16b08e6738e0c85936 height=810213 version=0x27e4e000 log2_work=94.450742 tx=902101740 date='2023-10-01T22:57:23Z' progress=0.799313 cache=12.6MiB(87659txo)\r\n2024-12-11T22:51:46Z UpdateTip: new best=00000000000000000001d4e8965451fa109b0b7b8526ba2af168f20f0b9a7bcf height=810214 version=0x2c824000 log2_work=94.450755 tx=902104456 date='2023-10-01T23:07:42Z' progress=0.799316 cache=13.7MiB(96410txo)\r\n2024-12-11T22:51:48Z UpdateTip: new best=00000000000000000002e60058b030f8f5c6a73a4d9c303a08996179bda559ed height=810215 version=0x2563e004 log2_work=94.450769 tx=902108886 date='2023-10-01T23:11:09Z' progress=0.799319 cache=14.4MiB(102029txo)\r\n2024-12-11T22:52:04Z UpdateTip: new best=00000000000000000004ec54730438f390b5284524e581feb471639ebe4398f3 height=810216 version=0x20018000 log2_work=94.450782 tx=902111866 date='2023-10-01T23:33:15Z' progress=0.799322 cache=16.2MiB(115993txo)\r\n2024-12-11T22:52:42Z UpdateTip: new best=00000000000000000001617c47276c60dca2c1115ada583ca27df1f98f564f14 height=810217 version=0x20006000 log2_work=94.450795 tx=902114798 date='2023-10-01T23:43:08Z' progress=0.799324 cache=17.3MiB(125921txo)\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.0\r\n\r\n### Operating system and version\r\n\r\nWindows 11 21H2 22000.2538\r\n\r\n### Machine specifications\r\n\r\nProcessor\tIntel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz, 2808 Mhz, 4 Core(s), 8 Logical Processor(s)\r\nTotal Physical Memory\t15.9 GB\r\nTotal Virtual Memory\t22.6 GB\r\nDiskdrive D (NTFS): \r\nHDD Size\t919.41 GB \r\nFree Space\t119.99 GB",
      "state": "closed",
      "user": "wisammechano",
      "created_at": "2024-12-12T00:02:05Z",
      "updated_at": "2025-12-30T12:41:28Z",
      "closed_at": "2024-12-12T09:03:59Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31473",
      "labels": [
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 2537479218,
          "user": "pinheadmz",
          "body": "Sync progress as reported by Bitcoin Core is really only accurate up to the height of the chain at the time of release. The number of transactions in the blockchain at that time are hard coded:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d6b225f1652526cb053ec32c8ff09160d5a759c5/src/kernel/chainparams.cpp#L195-L200\r\n\r\nThese data are updated with every new release:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/28.x/doc/release-process.md#before-branch-off\r\n\r\nAfter the hard-coded height is reached the software can only estimate how many more transactions there are to verify and so the sync progress is only a guess:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d6b225f1652526cb053ec32c8ff09160d5a759c5/src/validation.cpp#L5563-L5586\r\n\r\nUpgrading from v22 to v28 means around three years of data has been included that you did not have before! So the updated node is giving you a much more accurate progress estimation.",
          "created_at": "2024-12-12T00:26:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 916,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2538269411,
          "user": "maflcko",
          "body": "Yes, this is expected.\r\n\r\nClosing for now.\r\n\r\nLeave a comment if there are any follow-up questions.",
          "created_at": "2024-12-12T09:03:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 99,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2564817598,
          "user": "rebroad",
          "body": "> Sync progress as reported by Bitcoin Core is really only accurate up to the height of the chain at the time of release. The number of transactions in the blockchain at that time are hard coded:\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/d6b225f1652526cb053ec32c8ff09160d5a759c5/src/kernel/chainparams.cpp#L195-L200\r\n> \r\n> These data are updated with every new release:\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/28.x/doc/release-process.md#before-branch-off\r\n> \r\n> After the hard-coded height is reached the software can only estimate how many more transactions there are to verify and so the sync progress is only a guess:\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/d6b225f1652526cb053ec32c8ff09160d5a759c5/src/validation.cpp#L5563-L5586\r\n> \r\n> Upgrading from v22 to v28 means around three years of data has been included that you did not have before! So the updated node is giving you a much more accurate progress estimation.\r\n\r\nAre you implying that block production can vary by as much as 11% from predicted rates in 3 years? The consensus algorithm was designed to keep block production at an average of 1 block per 10 minutes. If it achieves this (which I had assumed it did), predictions from 3-year-old versions should still be accurate, assuming those predictions are based on block height/number.",
          "created_at": "2024-12-29T19:20:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1321,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2564873934,
          "user": "pinheadmz",
          "body": "> Are you implying that block production can vary by as much as 11% from predicted rates in 3 years?\r\n\r\nIt's about total number of transactions. Created by humans. Very unpredictable. ",
          "created_at": "2024-12-30T00:05:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 184,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 19421,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2752731737,
      "number": 31546,
      "title": "qa: Intermittent `AssertionError: not(10.00000000 == 340)` in `wallet_assumeutxo.py --descriptors`",
      "body": "https://github.com/hebasto/bitcoin/actions/runs/12431224655/job/34708713770:\r\n```\r\n265/315 - wallet_assumeutxo.py --descriptors failed, Duration: 5 s\r\n\r\nstdout:\r\n2024-12-20T12:54:28.609000Z TestFramework (INFO): PRNG seed is: 187204816715607970\r\n\r\n2024-12-20T12:54:28.641000Z TestFramework (INFO): Initializing test directory D:\\a\\_temp\\test_runner_₿_🏃_20241220_123237\\wallet_assumeutxo_48\r\n\r\n2024-12-20T12:54:30.237000Z TestFramework (INFO): -- Testing assumeutxo\r\n\r\n2024-12-20T12:54:30.237000Z TestFramework (INFO): Creating a UTXO snapshot at height 299\r\n\r\n2024-12-20T12:54:31.490000Z TestFramework (INFO): Loading snapshot into second node from D:\\a\\_temp\\test_runner_₿_🏃_20241220_123237\\wallet_assumeutxo_48\\node0\\regtest\\utxos.dat\r\n\r\n2024-12-20T12:54:31.884000Z TestFramework (INFO): Backup from the snapshot height can be loaded during background sync\r\n\r\n2024-12-20T12:54:31.916000Z TestFramework (INFO): Backup from before the snapshot height can't be loaded during background sync\r\n\r\n2024-12-20T12:54:31.932000Z TestFramework (INFO): Restarting node to stop at height 359\r\n\r\n2024-12-20T12:54:32.812000Z TestFramework (INFO): Restarted node before snapshot validation completed, reloading...\r\n\r\n2024-12-20T12:54:33.193000Z TestFramework (INFO): Ensuring snapshot chain syncs to tip. (399)\r\n\r\n2024-12-20T12:54:33.246000Z TestFramework (INFO): Ensuring background validation completes\r\n\r\n2024-12-20T12:54:33.383000Z TestFramework (INFO): Ensuring wallet can be restored from a backup that was created before the snapshot height\r\n\r\n2024-12-20T12:54:33.421000Z TestFramework (ERROR): Assertion failed\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 135, in main\r\n\r\n    self.run_test()\r\n\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 188, in run_test\r\n\r\n    assert_equal(n1.getbalance(), 340)\r\n\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 77, in assert_equal\r\n\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\n\r\nAssertionError: not(10.00000000 == 340)\r\n\r\n2024-12-20T12:54:33.474000Z TestFramework (INFO): Stopping nodes\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-20T13:19:51Z",
      "updated_at": "2025-12-30T12:41:26Z",
      "closed_at": "2024-12-30T19:40:33Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31546",
      "labels": [
        "Wallet",
        "Windows",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 2557052983,
          "user": "maflcko",
          "body": "Is it reproducible? ",
          "created_at": "2024-12-20T13:48:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 20,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2557299362,
          "user": "hebasto",
          "body": "> Is it reproducible?\r\n\r\nIt seems intermittent.",
          "created_at": "2024-12-20T16:14:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 47,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2557882520,
          "user": "mzumsande",
          "body": "I looked into this (thanks @furszy who helped me understand the wallet part of this) and believe that this is a bug in validation:\r\n\r\nWhen the snapshot block is connected at the end of the background sync, `MaybeCompleteSnapshotValidation` is called  from `ConnectTip()`  (deactivating one chainstate), and the `BlockConnected()` signal for the snapshot height (which logically belongs to the background chainstate) is sent out after this. \r\nSince the background chainstate does no longer exist by this time, the signal will be sent for the active chainstate, and the wallet (which would ignore signals for the background chainstate) will process it and set `m_last_block_processed_height` to the (ancient) snapshot height. As a result, `GetTxDepthInMainChain` is wrong and the wallet will show an incorrect `getbalance` until the next block arrives (which is 10 minutes on average because our tip is synced).\r\n\r\nSo this is not a test-only issue: It would affect any user with an active wallet who syncs with assumeutxo - they could see their balance temporarily vanish right after the background sync completed.\r\nIt can be reproduced non-intermittently with the following diff:\r\n\r\n```diff\r\ndiff --git a/test/functional/wallet_assumeutxo.py b/test/functional/wallet_assumeutxo.py\r\nindex 76cd2097a3..d0c74b123f 100755\r\n--- a/test/functional/wallet_assumeutxo.py\r\n+++ b/test/functional/wallet_assumeutxo.py\r\n@@ -149,6 +149,16 @@ class AssumeutxoTest(BitcoinTestFramework):\r\n         # Balance of w wallet is still still 0 because n1 has not synced yet\r\n         assert_equal(n1.getbalance(), 0)\r\n \r\n+        # Directly sync nodes to display balance bug\r\n+        self.connect_nodes(0, 1);\r\n+        self.wait_until(lambda: len(n1.getchainstates()['chainstates']) == 1)\r\n+        # wrong balance after background sync finished\r\n+        self.wait_until(lambda:(n1.getbalance() == 1))\r\n+        # any next block that arrives will correct the balance\r\n+        self.generate(n1, nblocks=1, sync_fun=self.no_op)\r\n+        self.wait_until(lambda:(n1.getbalance() == 34))\r\n+        exit()\r\n+\r\n         self.log.info(\"Backup from before the snapshot height can't be loaded during background sync\")\r\n         assert_raises_rpc_error(-4, \"Wallet loading failed. Error loading wallet. Wallet requires blocks to be downloaded, and software does not currently support loading wallets while blocks are being downloaded out of order when using assumeutxo snapshots. Wallet should be able to load successfully after node sync reaches height 299\", n1.restorewallet, \"w2\", \"backup_w2.dat\")\r\n```\r\n\r\nThe correct behavior would be to either assign the `BlockConnected()` notification for the snapshot block to the background chainstate, not the active chainstate - or maybe not send it out at all, because arguably the block was already \"connected\" by loading the snapshot earlier.\r\n\r\nI'll open a fix soon.\r\n\r\n",
          "created_at": "2024-12-20T23:34:44Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 2888,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2560250654,
          "user": "mzumsande",
          "body": "See #31556 for a fix.",
          "created_at": "2024-12-23T20:17:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 21,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2312,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3710207618,
      "number": 34034,
      "title": "build: Bump macOS SDK for release builds?",
      "body": "Currently, the macOS SDK Xcode version is set to 15.0 in the guix release builds.\n\nMy understanding is that it should be harmless to bump. Though, it involves a bit of effort to check for determinism. C.f. https://github.com/bitcoin/bitcoin/pull/32009\n\nSo I wonder if it seems appropriate to bump the SDK to the latest version for the next 31.x release, or if it should wait for the 32.x release?\n\nThe main visible benefit would be that `lexicographical_compare_three_way` will be available. C.f. https://github.com/bitcoin/bitcoin/pull/33772#issuecomment-3481100244, and also cc @l0rinc .",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-09T10:24:22Z",
      "updated_at": "2025-12-30T04:03:45Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34034",
      "labels": [
        "Brainstorming",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3698249705,
          "user": "Sjors",
          "body": "I'll take #34036 for a spin.",
          "created_at": "2025-12-30T04:03:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 28,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 631,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3768747006,
      "number": 34178,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "TraceScamCEO",
      "created_at": "2025-12-30T01:49:22Z",
      "updated_at": "2025-12-30T01:49:30Z",
      "closed_at": "2025-12-30T01:49:27Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34178",
      "labels": [],
      "comment_data": [
        {
          "id": 3698025181,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission contains only a generic template with no real feature description and instead posts a cryptocurrency address; it provides no substantive context, problem, or implementation details and appears promotional/irrelevant rather than a legitimate issue or proposal.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-30T01:49:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 543,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3286010421,
      "number": 33128,
      "title": "*BSD, OmniOS: `-reindex` is broken",
      "body": "The `-reindex` option is broken on both the master branch and the 29.x branch (I have not tested older release branches).\n\nConsider the following workflow on OpenBSD 7.7:\n```\n$ rm -rf /home/hebasto/.bitcoin/regtest\n$ ./build/bin/bitcoind -regtest -daemon\nBitcoin Core starting\n$ ./build/bin/bitcoin-cli -regtest createwallet $(date +%Y-%m-%d)\n$ ./build/bin/bitcoin-cli -regtest -generate 200\n$ ./build/bin/bitcoin-cli -regtest getblockcount\n200\n$ ./build/bin/bitcoin-cli -regtest stop\nBitcoin Core stopping\n$ rm -rf /home/hebasto/.bitcoin/regtest/blocks/index\n$ ./build/bin/bitcoind -regtest -daemon\nBitcoin Core starting\n$ tail -6 /home/hebasto/.bitcoin/regtest/debug.log\n2025-08-02T15:02:00Z : Error initializing block database.\nPlease restart with -reindex or -reindex-chainstate to recover.\n2025-08-02T15:02:00Z Shutdown: In progress...\n2025-08-02T15:02:00Z scheduler thread exit\n2025-08-02T15:02:00Z Flushed fee estimates to fee_estimates.dat.\n2025-08-02T15:02:00Z Shutdown: done\n$ rm /home/hebasto/.bitcoin/regtest/debug.log\n$ ./build/bin/bitcoind -regtest -daemon -reindex\nBitcoin Core starting\n$ ./build/bin/bitcoin-cli -regtest getblockcount\n0\n$ cat /home/hebasto/.bitcoin/regtest/debug.log                    \n\n\n\n\n\n2025-08-02T15:13:08Z Bitcoin Core version v29.99.0-75ed673193c5 (release build)\n2025-08-02T15:13:08Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\n2025-08-02T15:13:08Z Using RdSeed as an additional entropy source\n2025-08-02T15:13:08Z Using RdRand as an additional entropy source\n2025-08-02T15:13:08Z Default data directory /home/hebasto/.bitcoin\n2025-08-02T15:13:08Z Using data directory /home/hebasto/.bitcoin/regtest\n2025-08-02T15:13:08Z Config file: /home/hebasto/.bitcoin/bitcoin.conf (not found, skipping)\n2025-08-02T15:13:08Z Command-line arg: daemon=\"\"\n2025-08-02T15:13:08Z Command-line arg: regtest=\"\"\n2025-08-02T15:13:08Z Command-line arg: reindex=\"\"\n2025-08-02T15:13:08Z Using at most 125 automatic connections (512 file descriptors available)\n2025-08-02T15:13:08Z scheduler thread start\n2025-08-02T15:13:08Z Binding RPC on address ::1 port 18443\n2025-08-02T15:13:08Z Binding RPC on address 127.0.0.1 port 18443\n2025-08-02T15:13:08Z Generated RPC authentication cookie /home/hebasto/.bitcoin/regtest/.cookie\n2025-08-02T15:13:08Z Permissions used for cookie: rw-------\n2025-08-02T15:13:08Z Using random cookie authentication.\n2025-08-02T15:13:08Z Starting HTTP server with 16 worker threads\n2025-08-02T15:13:08Z Using wallet directory /home/hebasto/.bitcoin/regtest/wallets\n2025-08-02T15:13:08Z init message: Verifying wallet(s)…\n2025-08-02T15:13:08Z Using /16 prefix for IP bucketing\n2025-08-02T15:13:08Z init message: Loading P2P addresses…\n2025-08-02T15:13:08Z Loaded 0 addresses from peers.dat  0ms\n2025-08-02T15:13:08Z init message: Loading banlist…\n2025-08-02T15:13:08Z SetNetworkActive: true\n2025-08-02T15:13:08Z Cache configuration:\n2025-08-02T15:13:08Z * Using 2.0 MiB for block index database\n2025-08-02T15:13:08Z * Using 8.0 MiB for chain state database\n2025-08-02T15:13:08Z * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n2025-08-02T15:13:08Z Script verification uses 7 additional threads\n2025-08-02T15:13:08Z Using obfuscation key for blocksdir *.dat files (/home/hebasto/.bitcoin/regtest/blocks): '997651b2ed068218'\n2025-08-02T15:13:08Z Wiping LevelDB in /home/hebasto/.bitcoin/regtest/blocks/index\n2025-08-02T15:13:08Z Opening LevelDB in /home/hebasto/.bitcoin/regtest/blocks/index\n2025-08-02T15:13:08Z Opened LevelDB successfully\n2025-08-02T15:13:08Z Using obfuscation key for /home/hebasto/.bitcoin/regtest/blocks/index: 0000000000000000\n2025-08-02T15:13:08Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n2025-08-02T15:13:08Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n2025-08-02T15:13:08Z init message: Loading block index…\n2025-08-02T15:13:08Z Validating signatures for all blocks.\n2025-08-02T15:13:08Z Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000\n2025-08-02T15:13:08Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n2025-08-02T15:13:08Z Wiping LevelDB in /home/hebasto/.bitcoin/regtest/chainstate\n2025-08-02T15:13:08Z Opening LevelDB in /home/hebasto/.bitcoin/regtest/chainstate\n2025-08-02T15:13:08Z Opened LevelDB successfully\n2025-08-02T15:13:08Z Wrote new obfuscation key for /home/hebasto/.bitcoin/regtest/chainstate: cc8a83834d10b91a\n2025-08-02T15:13:08Z Using obfuscation key for /home/hebasto/.bitcoin/regtest/chainstate: cc8a83834d10b91a\n2025-08-02T15:13:08Z init message: Verifying blocks…\n2025-08-02T15:13:08Z Block index and chainstate loaded\n2025-08-02T15:13:08Z Setting NODE_NETWORK on non-prune mode\n2025-08-02T15:13:08Z initload thread start\n2025-08-02T15:13:08Z Reindexing block file blk00000.dat...\n2025-08-02T15:13:08Z UpdateTip: new best=0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206 height=0 version=0x00000001 log2_work=1.000000 tx=1 date='2011-02-02T23:16:42Z' progress=0.000002 cache=0.3MiB(0txo)\n2025-08-02T15:13:08Z block tree size = 1\n2025-08-02T15:13:08Z nBestHeight = 0\n2025-08-02T15:13:08Z mapport thread start\n2025-08-02T15:13:08Z torcontrol thread start\n2025-08-02T15:13:08Z Bound to 127.0.0.1:18445\n2025-08-02T15:13:08Z Bound to [::]:18444\n2025-08-02T15:13:08Z Bound to 0.0.0.0:18444\n2025-08-02T15:13:08Z Loaded 0 addresses from \"anchors.dat\"\n2025-08-02T15:13:08Z 0 block-relay-only anchors will be tried for connections.\n2025-08-02T15:13:08Z init message: Starting network threads…\n2025-08-02T15:13:08Z net thread start\n2025-08-02T15:13:08Z dnsseed thread start\n2025-08-02T15:13:08Z Loading addresses from DNS seed dummySeed.invalid.\n2025-08-02T15:13:08Z addcon thread start\n2025-08-02T15:13:08Z opencon thread start\n2025-08-02T15:13:08Z init message: Done loading\n2025-08-02T15:13:08Z msghand thread start\n2025-08-02T15:13:08Z 0 addresses found from DNS seeds\n2025-08-02T15:13:08Z dnsseed thread exit\n2025-08-02T15:13:08Z Loaded 1 blocks from external file in 38ms\n2025-08-02T15:13:08Z Reindexing finished\n2025-08-02T15:13:08Z Loading 0 mempool transactions from file...\n2025-08-02T15:13:08Z Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\n2025-08-02T15:13:08Z initload thread exit\n$ ./build/bin/bitcoin-cli -regtest stop\nBitcoin Core stopping\n```\n\nDespite the log containing the messages \"Reindexing block file blk00000.dat...\" and \"Reindexing finished\", the `getblockcount` RPC returns 0.\n\nIt appears this issue affects other operating systems as well, as noted in https://github.com/bitcoin/bitcoin/pull/32987#discussion_r2248288321.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-08-02T15:22:03Z",
      "updated_at": "2025-12-29T13:52:09Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33128",
      "labels": [
        "Bug",
        "Block storage"
      ],
      "comment_data": [
        {
          "id": 3146719966,
          "user": "hebasto",
          "body": "Apparently, after the failed run:\n```\n$ rm -rf /home/hebasto/.bitcoin/regtest/blocks/index\n$ ./build/bin/bitcoind -regtest -daemon\nBitcoin Core starting\n$ tail -6 /home/hebasto/.bitcoin/regtest/debug.log\n2025-08-02T15:02:00Z : Error initializing block database.\nPlease restart with -reindex or -reindex-chainstate to recover.\n2025-08-02T15:02:00Z Shutdown: In progress...\n2025-08-02T15:02:00Z scheduler thread exit\n2025-08-02T15:02:00Z Flushed fee estimates to fee_estimates.dat.\n2025-08-02T15:02:00Z Shutdown: done\n```\nthe `blk00000.dat` file contains only the genesis block, which is clearly incorrect behaviour.",
          "created_at": "2025-08-02T20:55:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 614,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3146725108,
          "user": "hebasto",
          "body": "@theStack \n\nCan you confirm the bug?",
          "created_at": "2025-08-02T21:08:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 36,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3148775143,
          "user": "mzumsande",
          "body": "Does this mean that `feature_reindex.py` still succeeds, so that reindex only fails if we delete the `index/` dir like in `feature_reindex_init.py`, but not if we just reindex without corrupting anything?!",
          "created_at": "2025-08-03T23:32:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 205,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3148839416,
          "user": "theStack",
          "body": "> [@theStack](https://github.com/theStack)\n> \n> Can you confirm the bug?\n\nWill test in 1-2 weeks, as I unfortunately don't have access to an OpenBSD machine right now.",
          "created_at": "2025-08-04T00:55:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 167,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3149692620,
          "user": "hebasto",
          "body": "> Does this mean that `feature_reindex.py` still succeeds, so that reindex only fails if we delete the `index/` dir like in `feature_reindex_init.py`, but not if we just reindex without corrupting anything?!\n\nCorrect.",
          "created_at": "2025-08-04T08:51:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 217,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3150231458,
          "user": "maflcko",
          "body": "Would be nice to see a test run with additional logging added to `ChainstateManager::LoadExternalBlockFile` (to the `continue` and `break` statements), and a log showing the size of the blk dat file.",
          "created_at": "2025-08-04T11:30:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 199,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3150347633,
          "user": "hebasto",
          "body": "> ... showing the size of the blk dat file.\n\nYou mean `blkdat.GetPos()`?",
          "created_at": "2025-08-04T12:07:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 72,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3156113524,
          "user": "maflcko",
          "body": "> > ... showing the size of the blk dat file.\n> \n> You mean `blkdat.GetPos()`?\n\nA bit like commit 734737b5930df7cebab83cf0dbe5fd390143f2be",
          "created_at": "2025-08-05T18:08:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 138,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3170648695,
          "user": "hebasto",
          "body": "> > > ... showing the size of the blk dat file.\n> > \n> > \n> > You mean `blkdat.GetPos()`?\n> \n> A bit like commit [734737b](https://github.com/bitcoin/bitcoin/commit/734737b5930df7cebab83cf0dbe5fd390143f2be)\n\nI used [this](https://github.com/hebasto/bitcoin/commits/250809-issue33128.debug.1/) branch for additional logging.\n\nOn OpenBSD, running `./build/bin/bitcoind -regtest -logsourcelocations -daemon -reindex` logs the following:\n```\n2025-08-09T12:33:19Z [init/common.cpp:152] [void init::LogPackageVersion()] Bitcoin Core version v29.99.0-26f02ab3d92d (release build)\n2025-08-09T12:33:19Z [kernel/context.cpp:20] [kernel::Context::Context()] Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\n2025-08-09T12:33:19Z [random.cpp:110] [void (anonymous namespace)::ReportHardwareRand()] Using RdSeed as an additional entropy source\n2025-08-09T12:33:19Z [random.cpp:113] [void (anonymous namespace)::ReportHardwareRand()] Using RdRand as an additional entropy source\n2025-08-09T12:33:19Z [init/common.cpp:120] [bool init::StartLogging(const ArgsManager &)] Default data directory /home/hebasto/.bitcoin\n2025-08-09T12:33:19Z [init/common.cpp:121] [bool init::StartLogging(const ArgsManager &)] Using data directory /home/hebasto/.bitcoin/regtest\n2025-08-09T12:33:19Z [init/common.cpp:135] [bool init::StartLogging(const ArgsManager &)] Config file: /home/hebasto/.bitcoin/bitcoin.conf (not found, skipping)\n2025-08-09T12:33:19Z [common/args.cpp:851] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Command-line arg: daemon=\"\"\n2025-08-09T12:33:19Z [common/args.cpp:851] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Command-line arg: logsourcelocations=\"\"\n2025-08-09T12:33:19Z [common/args.cpp:851] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Command-line arg: regtest=\"\"\n2025-08-09T12:33:19Z [common/args.cpp:851] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Command-line arg: reindex=\"\"\n2025-08-09T12:33:19Z [init.cpp:1369] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] Using at most 125 automatic connections (512 file descriptors available)\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] scheduler thread start\n2025-08-09T12:33:19Z [httpserver.cpp:394] [bool HTTPBindAddresses(struct evhttp *)] Binding RPC on address ::1 port 18443\n2025-08-09T12:33:19Z [httpserver.cpp:394] [bool HTTPBindAddresses(struct evhttp *)] Binding RPC on address 127.0.0.1 port 18443\n2025-08-09T12:33:19Z [rpc/request.cpp:140] [GenerateAuthCookieResult GenerateAuthCookie(const std::optional<fs::perms> &, std::string &, std::string &)] Generated RPC authentication cookie /home/hebasto/.bitcoin/regtest/.cookie\n2025-08-09T12:33:19Z [rpc/request.cpp:141] [GenerateAuthCookieResult GenerateAuthCookie(const std::optional<fs::perms> &, std::string &, std::string &)] Permissions used for cookie: rw-------\n2025-08-09T12:33:19Z [httprpc.cpp:265] [bool InitRPCAuthentication()] Using random cookie authentication.\n2025-08-09T12:33:19Z [httpserver.cpp:504] [void StartHTTPServer()] Starting HTTP server with 16 worker threads\n2025-08-09T12:33:19Z [wallet/load.cpp:53] [bool wallet::VerifyWallets(WalletContext &)] Using wallet directory /home/hebasto/.bitcoin/regtest/wallets\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Verifying wallet(s)…\n2025-08-09T12:33:19Z [init.cpp:1521] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] Using /16 prefix for IP bucketing\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Loading P2P addresses…\n2025-08-09T12:33:19Z [addrdb.cpp:207] [util::Result<std::unique_ptr<AddrMan>> LoadAddrman(const NetGroupManager &, const ArgsManager &)] Loaded 0 addresses from peers.dat  1ms\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Loading banlist…\n2025-08-09T12:33:19Z [net.cpp:3192] [void CConnman::SetNetworkActive(bool)] SetNetworkActive: true\n2025-08-09T12:33:19Z [init.cpp:1722] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] Cache configuration:\n2025-08-09T12:33:19Z [init.cpp:1723] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] * Using 2.0 MiB for block index database\n2025-08-09T12:33:19Z [init.cpp:1731] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] * Using 8.0 MiB for chain state database\n2025-08-09T12:33:19Z [init.cpp:1257] [ChainstateLoadResult InitAndLoadChainstate(NodeContext &, bool, const bool, const kernel::CacheSizes &, const ArgsManager &)] * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n2025-08-09T12:33:19Z [checkqueue.h:147] [CCheckQueue<CScriptCheck, std::pair<ScriptError_t, std::string>>::CCheckQueue(unsigned int, int) [T = CScriptCheck, R = std::pair<ScriptError_t, std::string>]] Script verification uses 7 additional threads\n2025-08-09T12:33:19Z [node/blockstorage.cpp:1176] [Obfuscation node::InitBlocksdirXorKey(const BlockManager::Options &)] Using obfuscation key for blocksdir *.dat files (/home/hebasto/.bitcoin/regtest/blocks): '2ce04306dc84ec9a'\n2025-08-09T12:33:19Z [dbwrapper.cpp:231] [CDBWrapper::CDBWrapper(const DBParams &)] Wiping LevelDB in /home/hebasto/.bitcoin/regtest/blocks/index\n2025-08-09T12:33:19Z [dbwrapper.cpp:236] [CDBWrapper::CDBWrapper(const DBParams &)] Opening LevelDB in /home/hebasto/.bitcoin/regtest/blocks/index\n2025-08-09T12:33:19Z [dbwrapper.cpp:244] [CDBWrapper::CDBWrapper(const DBParams &)] Opened LevelDB successfully\n2025-08-09T12:33:19Z [dbwrapper.cpp:260] [CDBWrapper::CDBWrapper(const DBParams &)] Using obfuscation key for /home/hebasto/.bitcoin/regtest/blocks/index: 0000000000000000\n2025-08-09T12:33:19Z [script/sigcache.cpp:36] [SignatureCache::SignatureCache(const size_t)] Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n2025-08-09T12:33:19Z [validation.cpp:2120] [ValidationCache::ValidationCache(const size_t, const size_t)] Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Loading block index…\n2025-08-09T12:33:19Z [node/chainstate.cpp:150] [ChainstateLoadResult node::LoadChainstate(ChainstateManager &, const CacheSizes &, const ChainstateLoadOptions &)] Validating signatures for all blocks.\n2025-08-09T12:33:19Z [node/chainstate.cpp:152] [ChainstateLoadResult node::LoadChainstate(ChainstateManager &, const CacheSizes &, const ChainstateLoadOptions &)] Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000\n2025-08-09T12:33:19Z [node/chainstate.cpp:87] [ChainstateLoadResult node::CompleteChainstateInitialization(ChainstateManager &, const ChainstateLoadOptions &)] Initializing chainstate Chainstate [ibd] @ height -1 (null)\n2025-08-09T12:33:19Z [dbwrapper.cpp:231] [CDBWrapper::CDBWrapper(const DBParams &)] Wiping LevelDB in /home/hebasto/.bitcoin/regtest/chainstate\n2025-08-09T12:33:19Z [dbwrapper.cpp:236] [CDBWrapper::CDBWrapper(const DBParams &)] Opening LevelDB in /home/hebasto/.bitcoin/regtest/chainstate\n2025-08-09T12:33:19Z [dbwrapper.cpp:244] [CDBWrapper::CDBWrapper(const DBParams &)] Opened LevelDB successfully\n2025-08-09T12:33:19Z [dbwrapper.cpp:258] [CDBWrapper::CDBWrapper(const DBParams &)] Wrote new obfuscation key for /home/hebasto/.bitcoin/regtest/chainstate: 715af8a1f6e7a857\n2025-08-09T12:33:19Z [dbwrapper.cpp:260] [CDBWrapper::CDBWrapper(const DBParams &)] Using obfuscation key for /home/hebasto/.bitcoin/regtest/chainstate: 715af8a1f6e7a857\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Verifying blocks…\n2025-08-09T12:33:19Z [init.cpp:1343] [ChainstateLoadResult InitAndLoadChainstate(NodeContext &, bool, const bool, const kernel::CacheSizes &, const ArgsManager &)] Block index and chainstate loaded\n2025-08-09T12:33:19Z [init.cpp:1830] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] Setting NODE_NETWORK on non-prune mode\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] initload thread start\n2025-08-09T12:33:19Z [node/blockstorage.cpp:1236] [void node::ImportBlocks(ChainstateManager &, std::span<const fs::path>)] Reindexing block file blk00000.dat...\n2025-08-09T12:33:19Z [validation.cpp:2967] [void UpdateTipLog(const ChainstateManager &, const CCoinsViewCache &, const CBlockIndex *, const std::string &, const std::string &, const std::string &)] UpdateTip: new best=0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206 height=0 version=0x00000001 log2_work=1.000000 tx=1 date='2011-02-02T23:16:42Z' progress=0.000002 cache=0.3MiB(0txo)\n2025-08-09T12:33:19Z [init.cpp:1940] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] block tree size = 1\n2025-08-09T12:33:19Z [init.cpp:1953] [bool AppInitMain(NodeContext &, interfaces::BlockAndHeaderTipInfo *)] nBestHeight = 0\n2025-08-09T12:33:19Z [validation.cpp:5173] [void ChainstateManager::LoadExternalBlockFile(AutoFile &, FlatFilePos *, std::multimap<uint256, FlatFilePos> *)] blkdat.size()=20777208\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] mapport thread start\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] torcontrol thread start\n2025-08-09T12:33:19Z [net.cpp:3165] [bool CConnman::BindListenPort(const CService &, bilingual_str &, NetPermissionFlags)] Bound to 127.0.0.1:18445\n2025-08-09T12:33:19Z [net.cpp:3165] [bool CConnman::BindListenPort(const CService &, bilingual_str &, NetPermissionFlags)] Bound to [::]:18444\n2025-08-09T12:33:19Z [net.cpp:3165] [bool CConnman::BindListenPort(const CService &, bilingual_str &, NetPermissionFlags)] Bound to 0.0.0.0:18444\n2025-08-09T12:33:19Z [addrdb.cpp:239] [std::vector<CAddress> ReadAnchors(const fs::path &)] Loaded 0 addresses from \"anchors.dat\"\n2025-08-09T12:33:19Z [net.cpp:3321] [bool CConnman::Start(CScheduler &, const Options &)] 0 block-relay-only anchors will be tried for connections.\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Starting network threads…\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] net thread start\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] msghand thread start\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] addcon thread start\n2025-08-09T12:33:19Z [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Done loading\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] opencon thread start\n2025-08-09T12:33:19Z [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] dnsseed thread start\n2025-08-09T12:33:19Z [net.cpp:2338] [void CConnman::ThreadDNSAddressSeed()] Loading addresses from DNS seed dummySeed.invalid.\n2025-08-09T12:33:19Z [net.cpp:2374] [void CConnman::ThreadDNSAddressSeed()] 0 addresses found from DNS seeds\n2025-08-09T12:33:19Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] dnsseed thread exit\n2025-08-09T12:33:20Z [validation.cpp:5080] [void ChainstateManager::LoadExternalBlockFile(AutoFile &, FlatFilePos *, std::multimap<uint256, FlatFilePos> *)] blkdat.size()=33554432\n2025-08-09T12:33:20Z [validation.cpp:5221] [void ChainstateManager::LoadExternalBlockFile(AutoFile &, FlatFilePos *, std::multimap<uint256, FlatFilePos> *)] Loaded 1 blocks from external file in 41ms\n2025-08-09T12:33:20Z [node/blockstorage.cpp:1246] [void node::ImportBlocks(ChainstateManager &, std::span<const fs::path>)] Reindexing finished\n2025-08-09T12:33:20Z [node/mempool_persist.cpp:77] [bool node::LoadMempool(CTxMemPool &, const fs::path &, Chainstate &, ImportMempoolOptions &&)] Loading 0 mempool transactions from file...\n2025-08-09T12:33:20Z [node/mempool_persist.cpp:149] [bool node::LoadMempool(CTxMemPool &, const fs::path &, Chainstate &, ImportMempoolOptions &&)] Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\n2025-08-09T12:33:20Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] initload thread exit\n2025-08-09T12:33:36Z [torcontrol.cpp:709] [void InterruptTorControl()] tor: Thread interrupt\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] torcontrol thread exit\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] mapport thread exit\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] opencon thread exit\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] addcon thread exit\n2025-08-09T12:33:36Z [init.cpp:287] [void Shutdown(NodeContext &)] Shutdown in progress...\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] net thread exit\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] msghand thread exit\n2025-08-09T12:33:36Z [logging/timer.h:56] [void BCLog::Timer<std::chrono::duration<long long>>::Log(const std::string &) [TimeType = std::chrono::duration<long long>]] DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\n2025-08-09T12:33:36Z [logging/timer.h:56] [void BCLog::Timer<std::chrono::duration<long long>>::Log(const std::string &) [TimeType = std::chrono::duration<long long>]] DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\n2025-08-09T12:33:36Z [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] scheduler thread exit\n2025-08-09T12:33:36Z [node/mempool_persist.cpp:195] [bool node::DumpMempool(const CTxMemPool &, const fs::path &, FopenFn, bool)] Writing 0 mempool transactions to file...\n2025-08-09T12:33:36Z [node/mempool_persist.cpp:205] [bool node::DumpMempool(const CTxMemPool &, const fs::path &, FopenFn, bool)] Writing 0 unbroadcast transactions to file.\n2025-08-09T12:33:36Z [node/mempool_persist.cpp:224] [bool node::DumpMempool(const CTxMemPool &, const fs::path &, FopenFn, bool)] Dumped mempool: 0.000s to copy, 0.001s to dump, 27 bytes dumped to file\n2025-08-09T12:33:36Z [policy/fees.cpp:974] [void CBlockPolicyEstimator::FlushFeeEstimates()] Flushed fee estimates to fee_estimates.dat.\n2025-08-09T12:33:36Z [init.cpp:398] [void Shutdown(NodeContext &)] Shutdown done\n```\n\nThere is not much difference compared with a run on Ubuntu, except that the line `[validation.cpp:5173] [void ChainstateManager::LoadExternalBlockFile(AutoFile &, FlatFilePos *, std::multimap<uint256, FlatFilePos> *)] blkdat.size()=20777208` appears only once in the log.",
          "created_at": "2025-08-09T11:45:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 15635,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3203396013,
          "user": "luke-jr",
          "body": "The root issue here appears to be that `CompleteChainstateInitialization` calls `LoadGenesisBlock` before the chainstate is detected as corrupt, which then clobbers blk00000.dat via `AllocateFileRange` as it (re-)writes the unindexed genesis block to disk.",
          "created_at": "2025-08-20T00:22:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 256,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3206135519,
          "user": "maflcko",
          "body": "Diff to reproduce on Linux:\n\n\n```diff\ndiff --git a/src/util/fs_helpers.cpp b/src/util/fs_helpers.cpp\nindex be7f1ee5a2..ada3280dbc 100644\n--- a/src/util/fs_helpers.cpp\n+++ b/src/util/fs_helpers.cpp\n@@ -200,7 +200,7 @@ void AllocateFileRange(FILE* file, unsigned int offset, unsigned int length)\n     }\n     ftruncate(fileno(file), static_cast<off_t>(offset) + length);\n #else\n-#if defined(HAVE_POSIX_FALLOCATE)\n+#if 0\n     // Version using posix_fallocate\n     off_t nEndPos = (off_t)offset + length;\n     if (0 == posix_fallocate(fileno(file), 0, nEndPos)) return;\n```\n\nThen, `./bld-cmake/test/functional/feature_reindex_init.py` gives `AssertionError: not(0 == 200)`",
          "created_at": "2025-08-20T12:34:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 667,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3672081972,
          "user": "hebasto",
          "body": "It seems FreeBSD 15.0 is also [affected](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20347897719/job/58464788242).\n\ncc @vasild ",
          "created_at": "2025-12-18T20:20:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 144,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3674978244,
          "user": "vasild",
          "body": "> FreeBSD 15.0\n\nAlso FreeBSD 14.x ",
          "created_at": "2025-12-19T12:54:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 34,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6768,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3446942153,
      "number": 33471,
      "title": "Inconsistent CJDNS address handling in Local addresses and AddLocal logs",
      "body": "When running:\n\n```bash\n./build/bin/bitcoind -daemon -server=1 -onion=127.0.0.1:9050 -externalip=<hostname_addr> -listen -cjdnsreachable\n```\n\nonly two Tor addresses appear under _Local addresses_ and no CJDNS addresses in `bitcoin-cli -netinfo 4`. The log also shows two `AddLocal(...)` entries for the onion address, but none for the CJDNS address. However, adding a CJDNS peer via `addnode ... add` works as expected.\n\nIn contrast, running:\n\n```\n./build/bin/bitcoind -daemon -listen -cjdnsreachable\n```\n\nshows one Tor address and one CJDNS address in _Local addresses_. The log also includes one `AddLocal(...)` for the onion address and one for the CJDNS address, and peer addition works normally.\n\nThis seems inconsistent: in the first case, shouldn’t the CJDNS address also appear in _Local addresses_ and be logged with `AddLocal(<cjdns_addr>)`?",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-09-23T23:22:10Z",
      "updated_at": "2025-12-28T17:10:06Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33471",
      "labels": [
        "Bug",
        "Utils/log/libs"
      ],
      "comment_data": [
        {
          "id": 3506148172,
          "user": "big14way",
          "body": "@willcl-ark please assign me this issue i can fix this bug ",
          "created_at": "2025-11-08T08:29:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 59,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3511034888,
          "user": "willcl-ark",
          "body": "@big14way you don't need to be assigned an issue to work on it in this project. Opening a pull request (please read CONTRIBUTING.md frist) and linking it to this issue in the PR description is all that's needed.",
          "created_at": "2025-11-10T11:30:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 211,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3515930062,
          "user": "big14way",
          "body": "@willcl-ark thank you for clarifyingi will look through the CONTRIBUTING.md frist\ni appreciate it",
          "created_at": "2025-11-11T09:49:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 97,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3694863480,
          "user": "pejfat08-rgb",
          "body": "جحخ",
          "created_at": "2025-12-28T16:21:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 923,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3762209208,
      "number": 34150,
      "title": "Windows cross-build: unit test `system_tests/run_command` fails and functional tests cannot start `bitcoind`",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nFollowing `doc/build-windows.md` using WSL + MinGW on Windows, build + install succeed and the GUI runs, but tests fail:\n\n1. The unit test `system_tests/run_command` in `test_bitcoin.exe` fails with an assertion on the expected error message.\n2. Functional tests (`wallet_basic.py` and `--coverage`) fail to start `bitcoind` with `Assertion failed: base.is_absolute(), file ./util/fs.cpp, line 36`.\n\nSo, building and running the GUI works, but the documented unit and functional tests do not pass on this configuration.\n\n\n### Expected behaviour\n\nAfter a successful cross-build using `doc/build-windows.md`, the enabled unit tests (`test_bitcoin`) and basic functional tests (like `wallet_basic.py` and `--coverage`) should run and pass on this supported WSL + MinGW configuration, in line with `src/test/README.md` and `test/functional/README.md`.\n\n\n### Steps to reproduce\n\nAll commands are run inside WSL (Ubuntu). The source tree is **not** under `/mnt/c`, but under the WSL filesystem.\n\n1. Clone and enter the repo:\n```\ngit clone https://github.com/bitcoin/bitcoin.git\ncd bitcoin\n```\n\n2. Build depends (per `doc/build-windows.md`):\n```\ngmake -C depends HOST=x86_64-w64-mingw32\n```\n\n3. Configure and build (per `doc/build-windows.md`):\n```\ncmake -B build --toolchain depends/x86_64-w64-mingw32/toolchain.cmake\ncmake --build build\n```\n\n4. Install to Windows (bitcoind/bitcoin-qt work fine from here):\n```\ncmake --install build --prefix /mnt/c/workspace/bitcoin\n```\n\n5. Build unit tests:\n```\ncmake --build build --target test_bitcoin\n```\n\n6. Run the specific unit test:\n```\ncd ~/bitcoin/build/bin\n./test_bitcoin.exe --run_test=system_tests/run_command --log_level=test_suite\n```\n\n7. Run a functional test and coverage (from repo root):\n```\ncd ~/bitcoin\nbuild/test/functional/test_runner.py wallet_basic.py\nbuild/test/functional/test_runner.py --coverage\n```\n\n### Relevant log output\n\nUnit test failure:\n```\ncd ~/bitcoin/build/bin\n./test_bitcoin.exe --run_test=system_tests/run_command --log_level=test_suite\n```\n\nOutput (trimmed):\n```\nEntering test module \"Bitcoin Core Test Suite\"\n./wallet/test/walletload_tests.cpp(14): Test suite \"walletload_tests\" is skipped because disabled\n... (many test suites skipped because disabled) ...\n./test/testnet4_miner_tests.cpp(30): Test suite \"testnet4_miner_tests\" is skipped because disabled\n./test/system_tests.cpp(17): Entering test suite \"system_tests\"\n./test/system_tests.cpp(21): Entering test case \"run_command\"\n./test/system_tests.cpp(56): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned 1: \\n\", command)) != std::string::npos has failed\n./test/system_tests.cpp(21): Leaving test case \"run_command\"; testing time: 196716us\n./test/system_tests.cpp(17): Leaving test suite \"system_tests\"; testing time: 199262us\n./test/system_ram_tests.cpp(13): Test suite \"system_ram_tests\" is skipped because disabled\n... (more suites skipped) ...\nLeaving test module \"Bitcoin Core Test Suite\"; testing time: 433839us\n\n*** 1 failure is detected in the test module \"Bitcoin Core Test Suite\"\n```\n\nFunctional test failure (wallet_basic.py):\n```\ncd ~/bitcoin\nbuild/test/functional/test_runner.py wallet_basic.py\n```\n\nOutput:\n```\nTemporary test directory at /tmp/test_runner_₿_🏃_20251225_162435\nRemaining jobs: [wallet_basic.py]\n1/1 - wallet_basic.py failed, Duration: 57 s\n\nstdout:\n2025-12-25T16:24:35.518658Z TestFramework (INFO): PRNG seed is: 6050933089769083783\n2025-12-25T16:24:35.520147Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20251225_162435/wallet_basic_0\n2025-12-25T16:25:32.647545Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 138, in main\n    self.setup()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 269, in setup\n    self.setup_network()\n  File \"/home/kelos/bitcoin/build/test/functional/wallet_basic.py\", line 44, in setup_network\n    self.setup_nodes()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 382, in setup_nodes\n    self.start_nodes()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 528, in start_nodes\n    node.wait_for_rpc_connection()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_node.py\", line 316, in wait_for_rpc_connection\n    raise FailedToStartError(self._node_msg(\ntest_framework.test_node.FailedToStartError: [node 0] bitcoind exited with status 3 during initialization. Assertion failed: base.is_absolute(), file ./util/fs.cpp, line 36\n************************\n\n2025-12-25T16:25:32.699370Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-25T16:25:32.699638Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_₿_🏃_20251225_162435/wallet_basic_0\n2025-12-25T16:25:32.699739Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_₿_🏃_20251225_162435/wallet_basic_0/test_framework.log\n2025-12-25T16:25:32.699905Z TestFramework (ERROR):\n2025-12-25T16:25:32.700105Z TestFramework (ERROR): Hint: Call /home/kelos/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_₿_🏃_20251225_162435/wallet_basic_0' to consolidate all logs\n2025-12-25T16:25:32.700184Z TestFramework (ERROR):\n2025-12-25T16:25:32.700424Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-25T16:25:32.700571Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-25T16:25:32.700677Z TestFramework (ERROR):\n\nstderr:\n[node 3] Cleaning up leftover process\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n\nTEST            | STATUS    | DURATION\nwallet_basic.py | ✖ Failed  | 57 s\n\nALL             | ✖ Failed  | 57 s (accumulated)\nRuntime: 57 s\n```\n\nFunctional test failure with --coverage:\n```\ncd ~/bitcoin\nbuild/test/functional/test_runner.py --coverage\n```\n\nOutput:\n```\nTemporary test directory at /tmp/test_runner_₿_🏃_20251225_162532\nInitializing coverage directory at /tmp/coveragemf6gv9tr\n[node 0] Cleaning up leftover process\n2025-12-25T16:25:32.916746Z TestFramework (INFO): PRNG seed is: 332623413216244638\n2025-12-25T16:25:32.917531Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20251225_162532/cache\n2025-12-25T16:25:35.676350Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 138, in main\n    self.setup()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 268, in setup\n    self.setup_chain()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 356, in setup_chain\n    self._initialize_chain()\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 814, in _initialize_chain\n    self.start_node(CACHE_NODE_ID)\n  File \"/home/kelos/bitcoin/test/functional/test_framework/test_framework.py\", line 514, in start_node\n    node.wait_for_rpc_connection()\n  File \"/home/kelos/bitcoin/test/functional/test_node.py\", line 316, in wait_for_rpc_connection\n    raise FailedToStartError(self._node_msg(\ntest_framework.test_node.FailedToStartError: [node 0] bitcoind exited with status 3 during initialization. Assertion failed: base.is_absolute(), file ./util/fs.cpp, line 36\n************************\n\n2025-12-25T16:25:35.729866Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-25T16:25:35.730219Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_₿_🏃_20251225_162532/cache\n2025-12-25T16:25:35.730333Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_₿_🏃_20251225_162532/cache/test_framework.log\n2025-12-25T16:25:35.730631Z TestFramework (ERROR):\n2025-12-25T16:25:35.730888Z TestFramework (ERROR): Hint: Call /home/kelos/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_₿_🏃_20251225_162532/cache' to consolidate all logs\n2025-12-25T16:25:35.731025Z TestFramework (ERROR):\n2025-12-25T16:25:35.731110Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-25T16:25:35.731245Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-25T16:25:35.731393Z TestFramework (ERROR):\n\nTraceback (most recent call last):\n  File \"/home/kelos/bitcoin/build/test/functional/test_runner.py\", line 931, in <module>\n    main()\n  File \"/home/kelos/bitcoin/build/test/functional/test_runner.py\", line 542, in main\n    run_tests(\n  File \"/home/kelos/bitcoin/build/test/functional/test_runner.py\", line 595, in run_tests\n    subprocess.check_output([sys.executable, tests_dir + 'create_cache.py'] + flags + [\"--tmpdir=%s/cache\" % tmpdir])\n  File \"/usr/lib/python3.12/subprocess.py\", line 466, in check_output\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\n  File \"/usr/lib/python3.12/subprocess.py\", line 571, in run\n    raise CalledProcessError(retcode, process.args,\nsubprocess.CalledProcessError: Command '['/usr/bin/python3', '/home/kelos/bitcoin/build/test/functional/create_cache.py', '--cachedir=/home/kelos/bitcoin/build/test/cache', '--configfile=/home/kelos/bitcoin/build/test/functional/../config.ini', '--coveragedir=/tmp/coveragemf6gv9tr', '--tmpdir=/tmp/test_runner_₿_🏃_20251225_162532/cache']' returned non-zero exit status 1.\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@d861c3820528fad2e17a455949bec70b6ba434dcc\n\n### Operating system and version\n\nWindows 10.0.26200.7462 (host), WSL2 with Ubuntu; `wsl.exe --version`: - WSL version: 2.6.2.0 - Kernel version: 6.6.87.2-1 - WSLg version: 1.0.71 - MSRDC version: 1.2.6353 - Direct3D version: 1.611.1-81528511 - DXCore version: 10.0.26100.1-240331-1435.ge-release\n\n### Machine specifications\n\nCPU:\n- 12th Gen Intel Core i5-12500H (x86_64)\n- 8 cores / 16 threads (lscpu)\n- L3 cache: 18 MiB\n\nMemory:\n- 16 GiB RAM total\n- ~11 GiB free, 4 GiB swap (free -h)\n\nDisk:\n- Host C: drive 454 GiB total, 219 GiB free (df -h, /mnt/c)\n- WSL root filesystem on /dev/sdd: 1.0 TiB total, 946 GiB free\n\nDistro inside WSL:\n- Ubuntu 24.04.3 LTS (noble) (lsb_release -a)",
      "state": "closed",
      "user": "DevPatel-11",
      "created_at": "2025-12-25T17:10:55Z",
      "updated_at": "2025-12-27T22:29:38Z",
      "closed_at": "2025-12-26T09:36:38Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/34150",
      "labels": [
        "Windows"
      ],
      "comment_data": [
        {
          "id": 3692311420,
          "user": "maflcko",
          "body": "Not sure what your goal is, but I think you are trying to run a Windows executable inside the WSL env (possibly through Wine?). Is this really what you are doing and what you want to be doing? I think it makes more sense to either:\n\n* Natively compile for Linux inside WSL, and run natively for Linux inside WSL\n* Cross-compile for Windows inside WSL, and run natively outside of WSL in Windows\n* Compile natively on and for Windows, and run natively on Windows",
          "created_at": "2025-12-26T07:08:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 461,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3692341116,
          "user": "DevPatel-11",
          "body": "Thanks for the quick reply!\n\nJust to clarify what I tested:\n- Cross-compile for Windows in WSL using `doc/build-windows.md` (depends + CMake).\n- Installed to `C:\\workspace\\bitcoin` and successfully ran `bitcoin-qt.exe` on Windows.\n- For tests, I stayed in WSL and ran `build/bin/test_bitcoin.exe` and `build/test/functional/test_runner.py`, which then start the cross-built `bitcoind.exe`.\n\nIf running the Windows test binaries from WSL is considered unsupported, I’m happy to switch to:\n- building natively for Linux in WSL and running tests there, or\n- running tests only with Linux binaries for this environment.\n\nIn that case, this issue can be closed as “unsupported configuration”; I mainly wanted to check whether this cross-build + WSL test combination is expected to work or not.\n",
          "created_at": "2025-12-26T07:28:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 789,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3692373539,
          "user": "maflcko",
          "body": "> For tests, I stayed in WSL and ran `build/bin/test_bitcoin.exe` and `build/test/functional/test_runner.py`, which then start the cross-built `bitcoind.exe`.\n\nSo you did that via Wine? For reference, Wine was dropped from the CI config, due to issues: https://github.com/bitcoin/bitcoin/pull/31284#issuecomment-2515273927. \n\n\n\n> If running the Windows test binaries from WSL is considered unsupported, I’m happy to switch to:\n> \n>     * building natively for Linux in WSL and running tests there, or\n> \n>     * running tests only with Linux binaries for this environment.\n> \n> \n> In that case, this issue can be closed as “unsupported configuration”; I mainly wanted to check whether this cross-build + WSL test combination is expected to work or not.\n\nWell, if there is an obvious bug and an obvious fix for an issue, I am happy to review it. However, I don't think the config will ever be added back to the CI matrix, because I don't see a real use-case behind it.",
          "created_at": "2025-12-26T07:43:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 967,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3692396043,
          "user": "DevPatel-11",
          "body": "Thanks for the clarification!\n\nTo answer your question: I did **not** use Wine anywhere. All commands were run directly in WSL:\n\n- Cross-compile for Windows in WSL using `doc/build-windows.md`.\n- Run the resulting `.exe` binaries from WSL by invoking `./build/bin/test_bitcoin.exe` and the functional tests, which then start the cross-built `bitcoind.exe`.\n\nGiven your comment that this configuration (running Windows binaries under WSL, similar to what CI used to do with Wine) is not really supported and won’t be in the CI matrix, I’m fine treating this as an unsupported setup.\n\nMy goal with this issue was mainly to confirm whether this combination is expected to work or not, and share the exact failures I saw in case they point to an obvious bug / simple fix.\n\nIf you think this should be closed, I’m happy for you to close it !",
          "created_at": "2025-12-26T07:52:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 836,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3692535002,
          "user": "maflcko",
          "body": "For reference, i pushed commit https://github.com/maflcko/bitcoin-core-with-ci/commit/c1387e48e12db0ee3efbdf80b91d5267d81c3301 : and it passed: https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/20518628300/job/58950286007#step:7:4867\n\n```diff\ndiff --git a/ci/test/00_setup_env_win64_msvcrt.sh b/ci/test/00_setup_env_win64_msvcrt.sh\nindex 86e0ea9c80..9c72b6fddd 100755\n--- a/ci/test/00_setup_env_win64_msvcrt.sh\n+++ b/ci/test/00_setup_env_win64_msvcrt.sh\n@@ -9,8 +9,9 @@ export LC_ALL=C.UTF-8\n export CONTAINER_NAME=ci_win64_msvcrt\n export CI_IMAGE_NAME_TAG=\"mirror.gcr.io/ubuntu:24.04\"  # Check that https://packages.ubuntu.com/noble/g++-mingw-w64-x86-64-posix (version 13.x, similar to guix) can cross-compile\n export HOST=x86_64-w64-mingw32\n-export PACKAGES=\"g++-mingw-w64-x86-64-posix nsis\"\n-export RUN_UNIT_TESTS=false\n+export DPKG_ADD_ARCH=\"i386\"\n+export PACKAGES=\"nsis g++-mingw-w64-x86-64-posix wine-binfmt wine64 wine32 file\"\n+export RUN_UNIT_TESTS=true\n export RUN_FUNCTIONAL_TESTS=false\n export GOAL=\"deploy\"\n export BITCOIN_CONFIG=\"\\\ndiff --git a/ci/test/03_test_script.sh b/ci/test/03_test_script.sh\nindex d29de80c3e..0b39f205c9 100755\n--- a/ci/test/03_test_script.sh\n+++ b/ci/test/03_test_script.sh\n@@ -157,6 +157,10 @@ if [ -n \"${CI_LIMIT_STACK_SIZE}\" ]; then\n   ulimit -s 512\n fi\n \n+if [[ $HOST = *-mingw32 ]]; then\n+  \"${BASE_ROOT_DIR}/ci/test/wrap-wine.sh\"\n+fi\n+\n if [ -n \"$USE_VALGRIND\" ]; then\n   \"${BASE_ROOT_DIR}/ci/test/wrap-valgrind.sh\"\n fi\ndiff --git a/ci/test/wrap-wine.sh b/ci/test/wrap-wine.sh\nnew file mode 100755\nindex 0000000000..a0d32a93a3\n--- /dev/null\n+++ b/ci/test/wrap-wine.sh\n@@ -0,0 +1,20 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+for b_name in {\"${BASE_OUTDIR}/bin\"/*,src/univalue/{test_json,unitester,object}}.exe; do\n+    # shellcheck disable=SC2044\n+    for b in $(find \"${BASE_ROOT_DIR}\" -executable -type f -name \"$(basename \"$b_name\")\"); do\n+      if (file \"$b\" | grep \"Windows\"); then\n+        echo \"Wrap $b ...\"\n+        mv \"$b\" \"${b}_orig\"\n+        echo '#!/usr/bin/env bash' > \"$b\"\n+        echo \"( wine \\\"${b}_orig\\\" \\\"\\$@\\\" ) || ( sleep 1 && wine \\\"${b}_orig\\\" \\\"\\$@\\\" )\" >> \"$b\"\n+        chmod +x \"$b\"\n+      fi\n+    done\n+done\n",
          "created_at": "2025-12-26T09:16:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2397,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3692537055,
          "user": "maflcko",
          "body": "> My goal with this issue was mainly to confirm whether this combination is expected to work or not, and share the exact failures I saw in case they point to an obvious bug / simple fix.\n> \n> If you think this should be closed, I’m happy for you to close it !\n\nThis is up to you. I can't reproduce the bug and I don't think anyone will work on this issue, so you'll have to create and submit a fix yourself. If not, then maybe this can indeed be closed.\n\nYou may also try https://github.com/bitcoin/bitcoin/pull/33929, if it improves your situation.",
          "created_at": "2025-12-26T09:17:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 549,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3692563523,
          "user": "DevPatel-11",
          "body": "Thanks for the feedback. \nI will try #33929 and see if it helps. I'll close this issue now. Thanks for understanding!\n",
          "created_at": "2025-12-26T09:36:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 118,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3694266223,
          "user": "hebasto",
          "body": ">    * Cross-compile for Windows in WSL using `doc/build-windows.md`.\n> \n>    * Run the resulting `.exe` binaries from WSL by invoking `./build/bin/test_bitcoin.exe` and the functional tests, which then start the cross-built `bitcoind.exe`.\n\nFWIW, when working on Windows, it is worth considering building natively [using clang-cl](https://github.com/bitcoin/bitcoin/pull/31507).",
          "created_at": "2025-12-27T22:29:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 379,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 10732,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2565563161,
      "number": 31032,
      "title": "[Testnet] Insufficient data or no feerate found",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nI encountered an error when attempting to use the estimatesmartfee method.\r\nBut node only return `Insufficient data or no feerate found`\r\n\r\nBelow is the request I sent:\r\n```bash\r\ncurl --data-binary '{\"jsonrpc\": \"1.0\", \"id\":\"curltest\", \"method\": \"estimatesmartfee\", \"params\": [1] }' -H 'content-type: text/plain;' http://localhost:80\r\n```\r\n\n\n### Expected behaviour\n\nExpected output:\r\n```\r\n{\"result\":{\"feerate\":0.00062,\"blocks\":1},\"error\":null,\"id\":\"curltest\"}\r\n```\n\n### Steps to reproduce\n\nStart.sh\r\n```bash\r\nsudo bitcoind -daemon -testnet=1 -server=1 -rest=1 -txindex=1 -listen=1 -port=8333 -rpcport=80 -rpcallowip=0.0.0.0/0 -rpcbind=0.0.0.0\r\n```\r\n\r\n.bitcoin/testnet3 directory\r\n```bash\r\n-rw------- 1 root root      221 Jul 26 08:24 banlist.json\r\n-rw------- 1 root root        7 Oct  4 05:16 bitcoind.pid\r\ndrwx------ 3 root root    36864 Oct  4 01:28 blocks\r\ndrwx------ 2 root root   262144 Oct  4 06:29 chainstate\r\n-rw------- 1 root root 10033247 Oct  4 06:27 debug.log\r\n-rw------- 1 root root   247985 Oct  4 06:16 fee_estimates.dat\r\ndrwx------ 3 root root     4096 Jul 26 08:24 indexes\r\n-rw------- 1 root root   922636 Oct  4 05:16 mempool.dat\r\n-rw------- 1 root root  1962267 Oct  4 06:16 peers.dat\r\n-rw------- 1 root root      193 Oct  4 05:16 settings.json\r\ndrwx------ 2 root root     4096 Jul 26 08:24 wallets\r\n```\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv27.1.0\n\n### Operating system and version\n\nUbuntu 24.04 LTS\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "pilab-gwon",
      "created_at": "2024-10-04T06:30:38Z",
      "updated_at": "2025-12-27T12:40:13Z",
      "closed_at": "2024-12-27T05:17:54Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/31032",
      "labels": [
        "TX fees and policy"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1729,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3743528779,
      "number": 34104,
      "title": "p2p: `seed.bitcoin.sipa.be` is down",
      "body": "```bash\n./check-dnsseeds.py \n* mainnet\nFAIL seed.bitcoin.sipa.be\nOK   dnsseed.bluematt.me (31 results)\nOK   dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us (35 results)\nOK   seed.bitcoin.jonasschnelli.ch (24 results)\n<snip>\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-18T14:58:34Z",
      "updated_at": "2025-12-26T23:33:58Z",
      "closed_at": "2025-12-26T23:33:58Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/34104",
      "labels": [
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3670729702,
          "user": "fanquake",
          "body": "cc @sipa ",
          "created_at": "2025-12-18T14:58:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 9,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670853633,
          "user": "sipa",
          "body": "I don't see anything wrong with it, and `check-dnsseeds.py` works for me.\n\n```\n$ python3 check-dnsseeds.py \n* mainnet\nOK   seed.bitcoin.sipa.be (39 results)\nOK   dnsseed.bluematt.me (31 results)\nOK   dnsseed.bitcoin.dashjr-list-of-p2p-nodes.us (35 results)\nOK   seed.bitcoin.jonasschnelli.ch (37 results)\nOK   seed.btc.petertodd.net (37 results)\nOK   seed.bitcoin.sprovoost.nl (36 results)\nOK   dnsseed.emzy.de (40 results)\nOK   seed.bitcoin.wiz.biz (21 results)\nOK   seed.mainnet.achownodes.xyz (40 results)\n\n* testnet\nOK   testnet-seed.bitcoin.jonasschnelli.ch (23 results)\nOK   seed.tbtc.petertodd.net (37 results)\nOK   testnet-seed.bluematt.me (3 results)\nOK   seed.testnet.bitcoin.sprovoost.nl (34 results)\nOK   seed.testnet.achownodes.xyz (40 results)\n\n* testnet4\nOK   seed.testnet4.bitcoin.sprovoost.nl (34 results)\nOK   seed.testnet4.wiz.biz (22 results)\n\n* signet\nOK   seed.signet.bitcoin.sprovoost.nl (34 results)\nOK   seed.signet.achownodes.xyz (38 results)\n```",
          "created_at": "2025-12-18T15:28:26Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 972,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670863688,
          "user": "fanquake",
          "body": "Could be a local issue.",
          "created_at": "2025-12-18T15:30:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 23,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3693406223,
          "user": "ayeowch",
          "body": "@sipa @fanquake Appears to be down for me too and https://dnschecker.org/#A/seed.bitcoin.sipa.be\n",
          "created_at": "2025-12-26T21:56:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 97,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3693446053,
          "user": "sipa",
          "body": "I confirm it's actually down now, will investigate.",
          "created_at": "2025-12-26T22:48:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 51,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3693477647,
          "user": "sipa",
          "body": "Fixed. Firewall configuration issue.",
          "created_at": "2025-12-26T23:33:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 36,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 259,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3764112808,
      "number": 34155,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "mmsmmsmks-create",
      "created_at": "2025-12-26T23:13:09Z",
      "updated_at": "2025-12-26T23:13:16Z",
      "closed_at": "2025-12-26T23:13:14Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34155",
      "labels": [],
      "comment_data": [
        {
          "id": 3693463242,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission contains no meaningful feature request or discussion — only a short, generic title and an apparent cryptocurrency address with no context. This looks like irrelevant promotional content rather than a legitimate issue or PR.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-26T23:13:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 507,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2661291513,
      "number": 31293,
      "title": "Discover() will not run if listening on any address with an explicit bind=0.0.0.0",
      "body": "### Current behaviour\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/85bcfeea23568053ea09013fb8263fa1511d7123/src/init.cpp#L1890-L1892\r\n\r\n`Discover()` will run only if we are listening on all addresses (`bind_on_any` is `true`). However if `-bind=0.0.0.0:port` is explicitly given, then `bind_on_any` will end up being `false` and thus `Discover()` will not run when it should.\r\n\r\n### Expected behaviour\r\n\r\nDiscover own addresses even if `-bind=0.0.0.0:port` is given.\r\n\r\n### Steps to reproduce\r\n\r\nUse `-bind=0.0.0.0:port`.\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@85bcfeea23568053ea09013fb8263fa1511d7123\r\n\r\n### Operating system and version\r\n\r\nWindows 3.11\r\n\r\n### Background\r\n\r\nSee https://github.com/bitcoin/bitcoin/issues/31133#issuecomment-2477231557",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-11-15T08:54:02Z",
      "updated_at": "2025-12-25T22:57:13Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/31293",
      "labels": [
        "P2P",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 2543442462,
          "user": "tnndbtc",
          "body": "@evgeniytar Thanks for your workaround.  Somehow there is still runtime error on my mac (Sequoia 15.1.1 Chip: Apple M1).  I have followed the fix on https://github.com/bitcoin/bitcoin/pull/31492 (thank you, @andremralves  ), along with your workaround and made the test run.  More details can be found in comments of https://github.com/bitcoin/bitcoin/pull/31492\r\n\r\nI'd like to leave a comment here in case other people on mac hit the same error and would like to find out the solution.",
          "created_at": "2024-12-15T04:23:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 486,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2550345347,
          "user": "tnndbtc",
          "body": "@vasild  After I reviewed @andremralves 's PR: https://github.com/bitcoin/bitcoin/pull/31492/files and ran functional test with log trace kept:\r\nbuild/test/functional/test_runner.py --ihave1111and2222 build/test/functional/feature_bind_port_discover.py --tmpdir /tmp/ --nocleanup\r\n\r\nThe Discover() is invoked for 0.0.0.0:<port>.\r\n\r\nThe fix is in src/init.cpp:\r\n            if (bind_addr.has_value()) {\r\n                **_connOptions.bind_on_any |= bind_addr.value().IsBindAny();_**\r\n                connOptions.vBinds.push_back(bind_addr.value());\r\n\r\nNew functional test added in test/functional/feature_bind_port_discover.py:\r\n        self.bind_to_localhost_only = False\r\n        self.extra_args = [\r\n            ['-discover', f'-port={BIND_PORT}'], # bind on any\r\n            ['-discover', f'-bind={ADDR1}:{BIND_PORT}'],\r\n            **_['-discover', f'-bind=0.0.0.0:{BIND_PORT+1}'],\r\n            ['-discover', f'-bind=[::]:{BIND_PORT+2}'],\r\n            ['-discover', f'-bind=::', f'-port={BIND_PORT+3}'],\r\n            ['-discover', f'-bind=0.0.0.0:{BIND_PORT+4}=onion'],_**\r\n                            \r\n The log trace (/tmp/test_runner_₿_🏃_20241217_234536/feature_bind_port_discover_0/test_framework.log):\r\n 2024-12-18T04:45:38.268000Z TestFramework (INFO): Test that if -bind= is not passed then all addresses are added to localaddresses\r\n2024-12-18T04:45:38.268000Z TestFramework (INFO): Test that if -bind= is passed then only that address is added to localaddresses\r\n**_2024-12-18T04:45:38.269000Z TestFramework (INFO): Test that if -bind=0.0.0.0:port is passed then all addresses are added to localaddresses\r\n2024-12-18T04:45:38.269000Z TestFramework (INFO): Test that if -bind=[::]:port is passed then all addresses are added to localaddresses\r\n2024-12-18T04:45:38.270000Z TestFramework (INFO): Test that if -bind=:: is passed then all addresses are added to localaddresses\r\n2024-12-18T04:45:38.270000Z TestFramework (INFO): Test that if -bind=0.0.0.0:port=onion is passed then all addresses are added to localaddresses_**\r\n\r\nSo, https://github.com/bitcoin/bitcoin/pull/31492 looks like a fix candidate to this issue to me.  \r\n\r\nCC: @evgeniytar , @i-am-yuvi ",
          "created_at": "2024-12-18T05:03:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2170,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 915,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2556460690,
      "number": 31002,
      "title": "rfc: DATUM mining interface requirements",
      "body": "The Mining interface is designed with Stratum v2 in mind, and can likely also be used to incrementally improve Statum \"v1\" applications.\r\n\r\nOcean recently announced [DATUM](https://ocean.xyz/docs/datum). So far it's proprietary and undocumented, but hopefully that changes. It could be a good test for the generality of the Mining interface to see if the DATUM gateway requires any additional methods.\r\n\r\nHere's the current interface:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d812cf11896a2214467b6fa72d7b763bac6077c5/src/interfaces/mining.h#L47-L106\r\n\r\nWhere `createNewBlock` returns:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/d812cf11896a2214467b6fa72d7b763bac6077c5/src/interfaces/mining.h#L30-L45\r\n\r\nAdditionally #30955 proposes to add `getCoinbaseMerklePath()` and `submitSolution()`, and https://github.com/Sjors/bitcoin/pull/52 proposes to add `waitFeesChanged`.\r\n\r\ncc @luke-jr ",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-09-30T12:09:36Z",
      "updated_at": "2025-12-24T12:35:25Z",
      "closed_at": "2024-10-05T17:10:03Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/31002",
      "labels": [
        "Mining"
      ],
      "comment_data": [
        {
          "id": 2540507747,
          "user": "Sjors",
          "body": "From casual reading of the [DATUM Gateway README](https://github.com/OCEAN-xyz/datum_gateway) (since there's still no spec), the Mining interface could be useful in a few places:\r\n\r\n1. No need to tell users to manually set `-blockmaxsize` and `-blockmaxweight`, because `createNewBlock()` can pass a custom coinbase weight reservation through its `BlockCreateOptions` argument. On a related note, https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2530503262 discusses the idea of adding `-maxcoinbaseweight`, and the README suggests Knots will do something similar.\r\n\r\n2. No need to use `-blocknotify` (which launches `datum_gateway` and presumable then calls `getblocktemplate`). Instead `datum_gateway` could run as a deamon and call `waitTipChanged()` and `waitNext()` https://github.com/bitcoin/bitcoin/pull/31283 which return when there's a new block or better fees. Also easier to setup between two machines.\r\n\r\nLooking at the \"Template/Share Requirements for Pooled Mining\" I don't see any blocking issues at first glance.\r\n\r\n> Must include generation transaction outputs provided by the pool in the order provided\r\n\r\n> Must include the primary coinbase tag as provided by the pool\r\n\r\n> Must include the unique identifier provided by the pool\r\n\r\nI'm assuming the `datum_gateway` adds these to the template? (since `getblocktemplate` doesn't include a coinbase transaction)",
          "created_at": "2024-12-13T04:07:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1388,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2558270819,
          "user": "luke-jr",
          "body": "> No need to tell users to manually set -blockmaxsize and -blockmaxweight, because createNewBlock() can pass a custom coinbase weight reservation through its BlockCreateOptions argument.\r\n\r\nSeems like it would be trivial to add this to GBT. The current approach in Knots isn't ideal (since it would override blockmaxsize/weight if the miner intentionally sets them lower).\r\n\r\n> No need to use -blocknotify (which launches datum_gateway and presumable then calls getblocktemplate)\r\n\r\nIt only sends a signal to the already-running DATUM gateway, but yes, it's not ideal to require the additional configuration. GBT does already support longpolling, however, it's just not implemented in DATUM Gateway yet (see https://github.com/OCEAN-xyz/datum_gateway/issues/3)\r\n\r\n> [list of stuff] I'm assuming the datum_gateway adds these to the template?\r\n\r\nYes, it creates the generation transaction.\r\n\r\n>the Mining interface could be useful in a few places:\r\n\r\nSeems like this would be better suited to a PR on the datum_gateway repo.",
          "created_at": "2024-12-21T23:50:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1022,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2560811173,
          "user": "Sjors",
          "body": "> Seems like it would be trivial to add this to GBT.\r\n\r\nAgreed.\r\n\r\n> Seems like this would be better suited to a PR on the datum_gateway repo.\r\n\r\nMy only goal here is to figure out if the Mining interface needs anything for DATUM that it doesn't need for Stratum v2. Whether you actually use it is up to you of course.",
          "created_at": "2024-12-24T08:09:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 318,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 928,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2590117931,
      "number": 31095,
      "title": "HardFork (SLH-DSA)",
      "body": "### Please describe the feature you'd like to see added.\n\n# Hardforking Bitcoin to SLH-DSA\r\n\r\nBitcoin's transition to a post-quantum cryptographic algorithm like SLH-DSA (Stateless Hash-Based Digital Signature Algorithm) would be a significant and complex undertaking. Here's an analysis of the potential process and implications:\r\n\r\n## Motivation for the Transition\r\n\r\nThe primary reason for considering a transition to SLH-DSA would be to protect Bitcoin against potential threats from quantum computers. While quantum computers capable of breaking Bitcoin's current elliptic curve cryptography are not yet a reality, the cryptocurrency community is increasingly aware of the need to prepare for this eventuality.\r\n\r\n## Technical Aspects of the Transition\r\n\r\n### Signature Scheme Replacement\r\n\r\nThe current Bitcoin protocol uses the Elliptic Curve Digital Signature Algorithm (ECDSA) for transaction signatures. Replacing this with SLH-DSA would require substantial changes to the core protocol[1].\r\n\r\n### Key and Signature Sizes\r\n\r\nOne of the main challenges in implementing SLH-DSA for Bitcoin would be dealing with the increased key and signature sizes:\r\n\r\n| Algorithm | Public Key Size | Signature Size |\r\n|-----------|-----------------|----------------|\r\n| ECDSA     | 33 bytes        | 71-73 bytes    |\r\n| SLH-DSA   | 32-64 bytes     | 7,856-49,216 bytes |\r\n\r\nThe significantly larger signature sizes of SLH-DSA would have implications for block size, transaction throughput, and network bandwidth requirements[1].\r\n\r\n### Performance Considerations\r\n\r\nSLH-DSA is known for its strong security properties but comes with performance costs. It has longer signing times compared to ECDSA, which could affect transaction processing speeds[1].\r\n\r\n## Implementation Challenges\r\n\r\n### Consensus Changes\r\n\r\nImplementing SLH-DSA would require a hard fork of the Bitcoin network, as it involves fundamental changes to the consensus rules. This would need widespread agreement among miners, node operators, and users.\r\n\r\n### Backward Compatibility\r\n\r\nThe transition would need to address backward compatibility issues, potentially requiring a period where both ECDSA and SLH-DSA signatures are supported to allow users time to migrate their funds to new addresses.\r\n\r\n### Wallet Software Updates\r\n\r\nAll Bitcoin wallet software would need to be updated to support the new signature scheme, including key generation, signing, and verification processes.\r\n\r\n## Potential Benefits\r\n\r\n### Quantum Resistance\r\n\r\nThe primary benefit would be Bitcoin's resistance to attacks from quantum computers, ensuring the long-term security of the network[1].\r\n\r\n### Conservative Security Approach\r\n\r\nSLH-DSA is considered a conservative choice for post-quantum cryptography, as it relies on the well-studied security of hash functions rather than newer mathematical problems like lattices[1].\r\n\r\n## Potential Drawbacks\r\n\r\n### Increased Resource Requirements\r\n\r\nThe larger signature sizes would increase the storage and bandwidth requirements for running Bitcoin nodes, potentially leading to increased centralization.\r\n\r\n### Transaction Costs\r\n\r\nLarger signatures could result in higher transaction fees, as more blockchain space would be required for each transaction.\r\n\r\n### Complexity\r\n\r\nThe transition process itself would be complex and risky, potentially introducing vulnerabilities if not executed correctly.\r\n\r\n## Conclusion\r\n\r\nWhile transitioning Bitcoin to SLH-DSA is technically possible, it would be a monumental undertaking requiring extensive planning, testing, and community consensus. The cryptocurrency community would need to carefully weigh the long-term security benefits against the short-term disruption and increased resource requirements. As quantum computing advances, this topic is likely to become increasingly relevant in discussions about Bitcoin's future.\r\n\r\nCitations:\r\n[1] We wrote the code, and the code won | Trail of Bits Blog https://blog.trailofbits.com/2024/08/15/we-wrote-the-code-and-the-code-won/\r\n[2] SLotH -- An SLH-DSA/SPHINCS+ Hash-Based Signature Accelerator https://github.com/slh-dsa/sloth\r\n[3] Cryptographic Right Answers: Post Quantum Edition - Latacora https://www.latacora.com/blog/2024/07/29/crypto-right-answers-pq/\r\n\n\n### Is your feature related to a problem, if so please describe it.\n\nhttps://www.csoonline.com/article/3562701/chinese-researchers-break-rsa-encryption-with-a-quantum-computer.html/amp/\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "elapsedluck",
      "created_at": "2024-10-15T22:58:04Z",
      "updated_at": "2025-12-24T12:35:24Z",
      "closed_at": "2024-10-15T23:05:26Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31095",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 2561485150,
          "user": "besoeasy",
          "body": "@elapsedluck good post, but better to create a BIP",
          "created_at": "2024-12-24T23:12:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 3,
        "positive_keywords": 2,
        "text_length": 4629,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3597787434,
      "number": 33809,
      "title": "Cache headers in REST",
      "body": "it would be nice to serve appropriate cache headers in the REST interface so that you can just slap nginx/cloudflare in front of it and have a nice caching proxy. Eg getXbyheight requests would get cached for 5 seconds and getYbyhash requests could get cached for a month/year.",
      "state": "open",
      "user": "TheBlueMatt",
      "created_at": "2025-11-06T21:46:51Z",
      "updated_at": "2025-12-23T22:07:43Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/33809",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3499514023,
          "user": "TheBlueMatt",
          "body": "@achow101  said she'd work on this",
          "created_at": "2025-11-06T21:47:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 34,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3507829348,
          "user": "waketraindev",
          "body": "Cache-Control headers can be easily handled at the nginx layer. Rather than adding this logic directly in Bitcoin REST code, it might make sense to include a sample nginx config under contrib/ with reasonable defaults for REST endpoints.\n\n```\n# Example include: rest-cache.conf\nlocation /rest/block/ {\n    # Cache block lookups by hash for a long time (immutable)\n    if ($uri ~ \"^/rest/block/[0-9a-f]+\\.json$\") {\n        add_header Cache-Control \"public, max-age=31536000, immutable\";\n    }\n\n    # Cache height-based lookups briefly (chain tip changes)\n    if ($uri ~ \"^/rest/block/[0-9]+\\.json$\") {\n        add_header Cache-Control \"public, max-age=5\";\n    }\n}\n```\n\nThis could be included in nginx `server` or `location` blocks to provide sensible defaults without changing the rest implementation itself.\n\nEnd users could then fine tune it as needed, for example adding rate limiting, conditional caching or more advanced cache key logic depending on their deployment setup.\n",
          "created_at": "2025-11-09T09:31:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 978,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3688091049,
          "user": "achow101",
          "body": "> [@achow101](https://github.com/achow101) said she'd work on this\n\nI don't remember saying this, and I have no intention of working on this in the foreseeable future.",
          "created_at": "2025-12-23T22:07:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 167,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 299,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2641825917,
      "number": 31246,
      "title": "MuSig2 Tracking Issue",
      "body": "Current PR to review: #34141\n\n- [x] libsecp:\n  - [x] libsecp module: https://github.com/bitcoin-core/secp256k1/pull/1479\n  - [x] libsecp named structs: https://github.com/bitcoin-core/secp256k1/pull/1628\n  - [x] libsecp subtree update: #31216\n- [x] Refactors\n  - [x] #31242\n  - [x] #31243\n- [x] Non-default sighashes in PSBT: #31622\n- [x] Descriptor:  #31244\n- [x] PSBT: #31247\n- [x] Signing: #29675\n- [x] Followups: #33636\n- [ ] Miniscript and fixes: #34141\n- [ ] PSBT fixes: #34010",
      "state": "open",
      "user": "achow101",
      "created_at": "2024-11-07T18:21:23Z",
      "updated_at": "2025-12-23T22:03:43Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31246",
      "labels": [
        "Wallet",
        "Tracking Issue"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 505,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3724650829,
      "number": 34064,
      "title": "Wallet: gettransaction(txid).details changes after confirmation of RBF replacement",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nFor a replaced transaction (txA), the output of gettransaction(txA, true).details\nchanges after the replacement transaction (txB) is confirmed.\n\nSpecifically, a 'receive' entry present after bumpfee disappears once txB is\nconfirmed, even though the queried txid remains txA.\n\nAfter confirmation, repeated calls are stable.\n\n\n### Expected behaviour\n\nFor a given txid, gettransaction(txid).details should be stable once the\nreplacement transaction has been confirmed, or at minimum should not\nretroactively add or remove details entries in a way that changes accounting\ninterpretation for the same transaction id.\n\n\n### Steps to reproduce\n\n1. Create a transaction (txA) from a descriptor wallet.\n2. Replace txA using bumpfee, creating txB.\n3. Query gettransaction(txA, true) and record details.\n4. Mine blocks to confirm txB.\n5. Query gettransaction(txA, true) again and compare details.\n\nA minimal reproduction package and proof artifacts are attached below.\n\n[x3_mini_package.tar.gz](https://github.com/user-attachments/files/24134210/x3_mini_package.tar.gz)\n\nSHA-256 (x3_mini_package.tar.gz):\n47413632eab190a2c2477b0d2f8128bc956326ae3765d8fbf6b2a9da5046a617\n\n### Relevant log output\n\nNo debug.log output is required; the issue is observable via wallet RPC output.\n\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n27.0\n\n### Operating system and version\n\nUbuntu 22.04 LTS (regtest environment)\n\n### Machine specifications\n\nStandard x86_64 Linux host, SSD storage, regtest environment.",
      "state": "open",
      "user": "husstege-e",
      "created_at": "2025-12-12T19:53:39Z",
      "updated_at": "2025-12-22T21:43:37Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34064",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3684281115,
          "user": "achow101",
          "body": "This is expected behavior. When a transaction becomes conflicted (i.e. a conflict is confirmed in the main chain), we don't want to show any details that might make the user think they have more or less money than they actually do.",
          "created_at": "2025-12-22T21:43:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 231,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1735,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3752841514,
      "number": 34134,
      "title": "Amount input field truncates value – only “0” is visible",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nThe amount input field in the send transaction dialog is too small to display the entered value.\n\nWhen entering an amount, the value is truncated to the point where only a single “0” is visible in the field. This makes the entered amount completely unreadable and prevents proper verification before sending a transaction.\n\nThis is a serious usability issue and may lead to user mistakes. The amount field should be wide enough or dynamically resized to always display the full value.\n\n\n\nBitcoin Core version: 30.0\nOperating system: Windows 11\n\n<img width=\"411\" height=\"105\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5c41ac47-1618-4aad-a947-a3e689fa5007\" />\nThe value in this example is: 0.00022200\n\n### Expected behaviour\n\nhe amount input field should display the full entered value at all times. The user must be able to clearly read and verify the complete amount before sending a transaction, without the value being truncated or hidden.\n\n### Steps to reproduce\n\nOpen send dialog\n\n### Relevant log output\n\nNA\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n30.0\n\n### Operating system and version\n\nWindows 11\n\n### Machine specifications\n\nNA",
      "state": "closed",
      "user": "schnello",
      "created_at": "2025-12-22T08:41:21Z",
      "updated_at": "2025-12-22T14:11:20Z",
      "closed_at": "2025-12-22T14:10:52Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34134",
      "labels": [
        "GUI",
        "Windows"
      ],
      "comment_data": [
        {
          "id": 3682233506,
          "user": "hebasto",
          "body": "This is a duplicate of https://github.com/bitcoin-core/gui/issues/906.\n\nFixed in https://github.com/bitcoin/bitcoin/pull/33906.\n\nAvailable in the v30.1 release.",
          "created_at": "2025-12-22T14:10:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 160,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1385,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3751138716,
      "number": 34133,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Ritahensley",
      "created_at": "2025-12-21T13:19:42Z",
      "updated_at": "2025-12-21T13:19:55Z",
      "closed_at": "2025-12-21T13:19:52Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34133",
      "labels": [],
      "comment_data": [
        {
          "id": 3678790269,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission is an unsolicited promotional testimonial advertising an external recovery/hacking service with contact details, unrelated to the repository's issues. It contains no actionable bug report, feature request, or development context and appears to be promotional/fraudulent content rather than a legitimate contribution.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-21T13:19:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 600,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2739800516,
      "number": 31499,
      "title": "depends: `capnp` package fails to build on NetBSD 10.0",
      "body": "On the master branch @ b042c4f0538c6f9cdf8efbcef552796851e38a85:\r\n- with GCC 12.4.0:\r\n```\r\n$ gmake -C depends capnp MULTIPROCESS=1 CC=/usr/pkg/gcc12/bin/gcc CXX=/usr/pkg/gcc12/bin/g++\r\n<snip>\r\nIn file included from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-93b376fc421/src/kj/async.c++:42:\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-93b376fc421/src/kj/async.h:39:6: error: #error \"Fibers cannot be enabled when exceptions are disabled.\"\r\n   39 |     #error \"Fibers cannot be enabled when exceptions are disabled.\"\r\n      |      ^~~~~\r\ngmake[3]: *** [src/kj/CMakeFiles/kj-async.dir/build.make:76: src/kj/CMakeFiles/kj-async.dir/async.c++.o] Error 1\r\n<snip>\r\n```\r\n- with GCC 14.2.0:\r\n```\r\n$ gmake -C depends capnp MULTIPROCESS=1 CC=/usr/pkg/gcc14/bin/gcc CXX=/usr/pkg/gcc14/bin/g++\r\n<snip>\r\nIn file included from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/memory.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/exception.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async-prelude.h:27,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async-io.h:24,\r\n                 from /home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async-io-unix.c++:35:\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async-io-unix.c++: In lambda function:\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/capnp/1.0.2-b73bfb1607d/src/kj/async-io-unix.c++:1243:24: error: 'AI_V4MAPPED' was not declared in this scope\r\n 1243 |       hints.ai_flags = AI_V4MAPPED | AI_ADDRCONFIG;\r\n      |                        ^~~~~~~~~~~\r\ngmake[3]: *** [src/kj/CMakeFiles/kj-async.dir/build.make:146: src/kj/CMakeFiles/kj-async.dir/async-io-unix.c++.o] Error 1\r\n<snip>\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-14T11:52:19Z",
      "updated_at": "2025-12-20T12:32:25Z",
      "closed_at": "2024-12-20T11:57:32Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31499",
      "labels": [
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 2543073788,
          "user": "hebasto",
          "body": "cc @ryanofsky ",
          "created_at": "2024-12-14T11:52:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 14,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2545406985,
          "user": "Sjors",
          "body": "cc @vasild ",
          "created_at": "2024-12-16T11:47:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 11,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2545414544,
          "user": "fanquake",
          "body": "Shouldn't this be an upstream bug report, given that's where the issue is?",
          "created_at": "2024-12-16T11:50:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 74,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2556860449,
          "user": "fanquake",
          "body": "Nothing for us to do here, so could be reopened/linked from a PR once a proper issue is filed upstream.",
          "created_at": "2024-12-20T11:57:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 103,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2557362137,
          "user": "hebasto",
          "body": "> Shouldn't this be an upstream bug report, given that's where the issue is?\r\n\r\nhttps://github.com/capnproto/capnproto/issues/2201.",
          "created_at": "2024-12-20T16:42:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 131,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2337,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3748267024,
      "number": 34120,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "meghwalsachin663-gif",
      "created_at": "2025-12-19T17:34:56Z",
      "updated_at": "2025-12-19T17:35:04Z",
      "closed_at": "2025-12-19T17:35:02Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34120",
      "labels": [],
      "comment_data": [
        {
          "id": 3675942359,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The issue body contains nonsensical numeric placeholders and personal contact strings rather than a clear problem description, reproduction details, or relevant logs. It appears to be garbage/irrelevant content rather than a legitimate bug report or feature request.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-19T17:35:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 535,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3743148759,
      "number": 34101,
      "title": "build: build broken with older supported Boost",
      "body": "Broken by #33192.\n\nDebian Bookworm\nGCC 12.2.0\nBoost 1.74.0 (our minimum supported is currently 1.73.0)\n```bash\ncmake -B build -DCMAKE_BUILD_TYPE=Debug\n<snip>\n/bitcoin/src/txrequest.cpp: In member function 'void TxRequestTracker::Impl::ReceivedInv(NodeId, const GenTxid&, bool, std::chrono::microseconds)':\n/bitcoin/src/txrequest.cpp:583:35: error: 'boost::multi_index::multi_index_container<{anonymous}::Announcement, {anonymous}::Announcement_Indices>::index<{anonymous}::ByPeer>::type' {aka 'class boost::multi_index::detail::ordered_index<{anonymous}::ByPeerViewExtractor, std::less<std::tuple<long int, bool, const uint256&> >, boost::multi_index::detail::nth_layer<1, {anonymous}::Announcement, {anonymous}::Announcement_Indices, std::allocator<{anonymous}::Announcement> >, boost::mpl::v_item<{anonymous}::ByPeer, boost::mpl::vector0<mpl_::na>, 0>, boost::multi_index::detail::ordered_unique_tag, boost::multi_index::detail::null_augment_policy>'} has no member named 'contains'\n  583 |         if (m_index.get<ByPeer>().contains(ByPeerView{peer, true, gtxid.ToUint256()})) return;\n      |                                   ^~~~~~~~\ngmake[2]: *** [src/CMakeFiles/bitcoin_node.dir/build.make:1308: src/CMakeFiles/bitcoin_node.dir/txrequest.cpp.o] Error 1\ngmake[2]: *** Waiting for unfinished jobs....\nIn file included from /bitcoin/src/support/allocators/pool.h:17,\n                 from /bitcoin/src/memusage.h:10,\n                 from /bitcoin/src/core_memusage.h:10,\n                 from /bitcoin/src/coins.h:10,\n                 from /bitcoin/src/txmempool.h:9,\n                 from /bitcoin/src/txmempool.cpp:6:\n/bitcoin/src/txmempool.cpp: In member function 'CTxMemPool::ChangeSet::TxHandle CTxMemPool::ChangeSet::StageAddition(const CTransactionRef&, CAmount, int64_t, unsigned int, uint64_t, bool, int64_t, LockPoints)':\n/bitcoin/src/txmempool.cpp:991:22: error: 'CTxMemPool::indexed_transaction_set' {aka 'class boost::multi_index::multi_index_container<CTxMemPoolEntry, CTxMemPool::CTxMemPoolEntry_Indices>'} has no member named 'contains'\n  991 |     Assume(!m_to_add.contains(tx->GetHash()));\n      |                      ^~~~~~~~\n/bitcoin/src/util/check.h:125:51: note: in definition of macro 'Assume'\n  125 | #define Assume(val) inline_assertion_check<false>(val, std::source_location::current(), #val)\n      |                                                   ^~~\ngmake[2]: *** [src/CMakeFiles/bitcoin_node.dir/build.make:1294: src/CMakeFiles/bitcoin_node.dir/txmempool.cpp.o] Error 1\n```\n\nReported by @marcofleon.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-18T13:21:47Z",
      "updated_at": "2025-12-19T15:55:31Z",
      "closed_at": "2025-12-19T15:55:31Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/34101",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3670300267,
          "user": "hebasto",
          "body": "Is it a good time to consider bumping of the Boost minimum supported version?",
          "created_at": "2025-12-18T13:28:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 77,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670335345,
          "user": "fanquake",
          "body": "Looks like it might have been added in Boost 1.78.0: https://github.com/boostorg/multi_index/issues/35.",
          "created_at": "2025-12-18T13:37:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 103,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670376266,
          "user": "maflcko",
          "body": "> Is it a good time to consider bumping of the Boost minimum supported version?\n\nI think there are users out there on Ubuntu:22.04 and Debian Bookworm, so breaking them seems a bit too early?",
          "created_at": "2025-12-18T13:48:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 191,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670429071,
          "user": "l0rinc",
          "body": "We could revert these instances, but in that case we have to make sure the CI catches these next time.\nLet me know if there's anything you'd like me to do here.",
          "created_at": "2025-12-18T14:01:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 160,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670432470,
          "user": "marcofleon",
          "body": "> Looks like it might have been added in Boost 1.78.0\n\nJust confirmed that 1.78.0 does build without errors.\n\n",
          "created_at": "2025-12-18T14:02:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 110,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670454317,
          "user": "maflcko",
          "body": "> We could revert these instances, but in that case we have to make sure the CI catches these next time.\n\nI don't think it will be possible that CI catches \"everything\". In theory, the `ci/test/00_setup_env_native_previous_releases.sh` could be modified to run without depends to catch this, but then we wouldn't be checking depends. So a new ci config would have to be added. But that again will only check either gcc, or clang. So a new ci config will have to be added for both....",
          "created_at": "2025-12-18T14:07:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 483,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670657739,
          "user": "hebasto",
          "body": "> > Is it a good time to consider bumping of the Boost minimum supported version?\n> \n> I think there are users out there on Ubuntu:22.04 and Debian Bookworm, so breaking them seems a bit too early?\n\nFWIW, they could workaround using depends. For example, see https://github.com/bitcoin/bitcoin/pull/34103.",
          "created_at": "2025-12-18T14:45:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 305,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3670680873,
          "user": "l0rinc",
          "body": "regardless of the workaround, I don't mind reverting to make it work with old boost again - we can enable the new clang-tidy rule without them as well.\nI have reverted the above changes in https://github.com/bitcoin/bitcoin/pull/34095 - can someone please validate that it fixed the build with older boost?",
          "created_at": "2025-12-18T14:51:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 306,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3671775750,
          "user": "maflcko",
          "body": "> > > Is it a good time to consider bumping of the Boost minimum supported version?\n> > \n> > \n> > I think there are users out there on Ubuntu:22.04 and Debian Bookworm, so breaking them seems a bit too early?\n> \n> FWIW, they could workaround using depends. For example, see [#34103](https://github.com/bitcoin/bitcoin/pull/34103).\n\nAsking for a depends workaround when the only benefit is a `count()` vs `contains()` in two lines of code, seems a bit too much.",
          "created_at": "2025-12-18T18:58:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 460,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3671960127,
          "user": "hebasto",
          "body": "> > > > Is it a good time to consider bumping of the Boost minimum supported version?\n> > > \n> > > \n> > > I think there are users out there on Ubuntu:22.04 and Debian Bookworm, so breaking them seems a bit too early?\n> > \n> > \n> > FWIW, they could workaround using depends. For example, see [#34103](https://github.com/bitcoin/bitcoin/pull/34103).\n> \n> Asking for a depends workaround when the only benefit is a `count()` vs `contains()` in two lines of code, seems a bit too much.\n\nIt seems there’s nobody to ask :)\n\n(see https://github.com/bitcoin/bitcoin/pull/34095#pullrequestreview-3594758109)",
          "created_at": "2025-12-18T19:44:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 598,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3671985664,
          "user": "maflcko",
          "body": "> It seems there’s nobody to ask :)\n\nOh, I see you are referring to bumping from 1.73 to 1.74?  That seems fine, if there is no distro that ships with it.",
          "created_at": "2025-12-18T19:52:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 154,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3672153110,
          "user": "hebasto",
          "body": "> > It seems there’s nobody to ask :)\n> \n> Oh, I see you are referring to bumping from 1.73 to 1.74? That seems fine, if there is no distro that ships with it.\n\nDone in https://github.com/bitcoin/bitcoin/pull/34107.",
          "created_at": "2025-12-18T20:45:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 215,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2584,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2327304674,
      "number": 30210,
      "title": "build: use UCRT runtime for Windows (release) binaries",
      "body": "Switching to the modern runtime would be good, because the old runtime is missing features, which has meant writing workarounds for Windows in our code: i.e #29014/#29357.\r\n\r\n[Mingw-w64 12.0.0 has been released](https://sourceforge.net/p/mingw-w64/mailman/message/58776404/), which now defaults to the `UCRT` runtime, over `MSVCRT`. See https://github.com/mingw-w64/mingw-w64/blob/master/mingw-w64-doc/howto-build/ucrt-vs-msvcrt.txt for more details. This makes using it somewhat easier, because we can just use `12.0.0` verbatim, rather than having to configure an older mingw-w64 for the newer runtime.\r\n\r\n- [x] Upstream mingw-w64 12.0.0 into Guix: See https://git.savannah.gnu.org/cgit/guix.git/commit/?id=17188be0f723e00377b21b767f5447d7938a116e.\r\n- [x] Update Guix time-machine here: #30452.\r\n- [ ] Add CI to cover new runtime.\r\n- [ ] Drop MSVCRT workarounds.\r\n- [ ] Any other documentation / Windows release build configuration updates.\r\n- [ ] A symbol-check that the new runtime is indeed being used.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2024-05-31T08:56:31Z",
      "updated_at": "2025-12-19T11:28:37Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/30210",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 2604834248,
          "user": "fanquake",
          "body": "Inconsistency in the binaries leading to more workarounds/disabling test code: https://github.com/bitcoin/bitcoin/pull/31410.",
          "created_at": "2025-01-21T14:07:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 125,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2629109656,
          "user": "hebasto",
          "body": ">    - [ ]  Add CI to cover new runtime.\n\nI've [added](https://github.com/hebasto/bitcoin-core-nightly/pull/39) a nightly build with UCRT to https://github.com/hebasto/bitcoin-core-nightly.\n\n> Inconsistency in the binaries leading to more workarounds/disabling test code: [#31410](https://github.com/bitcoin/bitcoin/pull/31410).\n\nIt seems that the mentioned issue requires further investigation, as the fix is still needed.",
          "created_at": "2025-02-01T20:54:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 423,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2915451888,
          "user": "hebasto",
          "body": "@jeandudey \n\n> I've sent a patchset a while ago when working on cross-base updating MinGW to 12.0.0: https://issues.guix.gnu.org/71630.\n> \n> Using `UCRT` will likely need a new target triplet for Guix though like MSYS2 does, e.g. `x86_64-w64-ucrt-mingw32`.\n\nTrying to build `mingw-w64` with the deleted [`--with-default-msvcrt=msvcrt`](https://codeberg.org/guix/guix/src/commit/d1ec5be63e2d8521a6bad61e5c478319280623c6/gnu/packages/mingw.scm#L90) configure option results in a linker error:\n```\nx86_64-w64-mingw32-ld: src/.libs/libwinpthread_la-thread.o: in function `pthread_create_wrapper':\n/tmp/guix-build-mingw-w64-x86_64-winpthreads-12.0.0.drv-0/mingw-w64-v12.0.0/mingw-w64-libraries/winpthreads/src/thread.c:1544: undefined reference to `__intrinsic_setjmpex'\ncollect2: error: ld returned 1 exit status\nmake[4]: *** [Makefile:706: libwinpthread.la] Error 1\n```\n\nAny ideas on how to resolve this?",
          "created_at": "2025-05-28T08:33:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 901,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3518182486,
          "user": "hebasto",
          "body": ">    - [ ]  Any other documentation / Windows release build configuration updates.\n\nSee: https://github.com/bitcoin/bitcoin/pull/33857.",
          "created_at": "2025-11-11T18:13:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 135,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3591608313,
          "user": "hebasto",
          "body": ">    - [ ]  Add CI to cover new runtime.\n\n\nSince bitcoin/bitcoin#33764 has been merged, this checkbox can now be ticked.",
          "created_at": "2025-11-29T11:57:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 120,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3607488174,
          "user": "fanquake",
          "body": "> Since https://github.com/bitcoin/bitcoin/pull/33764 has been merged, this checkbox can now be ticked.\n\nAs I mentioned in that PR, neither the headers, or the compiler version, match Guix, so its not exactly testing something similar to how we build releases. That will be improved by #33775.",
          "created_at": "2025-12-03T15:44:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 293,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3637300883,
          "user": "maflcko",
          "body": "I am seeing a bunch of CI failues in the ucrt task:\n\n* https://github.com/bitcoin/bitcoin/actions/runs/20090968443/job/57638966158?pr=32800#step:13:203\n* https://github.com/bitcoin/bitcoin/actions/runs/20098915295/job/57665466725#step:13:1494\n\nHaven't looked, so not sure what they mean.",
          "created_at": "2025-12-10T14:17:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 287,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3674706308,
          "user": "hebasto",
          "body": "> I am seeing a bunch of CI failues in the ucrt task:\n> \n>    * https://github.com/bitcoin/bitcoin/actions/runs/20090968443/job/57638966158?pr=32800#step:13:203\n\nFor some reason, no details have been logged there.",
          "created_at": "2025-12-19T11:28:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 213,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1062,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2744615508,
      "number": 31515,
      "title": "Compile error with GCC 14.2 and `-D_GLIBCXX_DEBUG`",
      "body": "The master branch @ b042c4f0538c6f9cdf8efbcef552796851e38a85 fails to compile with GCC 14.2 and `-D_GLIBCXX_DEBUG`:\r\n```\r\n$ cmake -B build -DCMAKE_CXX_FLAGS=\"-D_GLIBCXX_DEBUG\"\r\n$ cmake --build build --target bitcoind\r\n[4/6] Building CXX object src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.o\r\nFAILED: src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.o \r\n/usr/bin/ccache /usr/bin/c++  -I/home/hebasto/git/bitcoin/build/src -I/home/hebasto/git/bitcoin/src -I/home/hebasto/git/bitcoin/src/secp256k1/include -D_GLIBCXX_DEBUG -O2 -g -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/home/hebasto/git/bitcoin/src=. -fmacro-prefix-map=/home/hebasto/git/bitcoin/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -MD -MT src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.o -MF src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.o.d -o src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.o -c /home/hebasto/git/bitcoin/src/pubkey.cpp \r\nIn file included from /usr/include/c++/14/debug/debug.h:90,\r\n                 from /usr/include/c++/14/bits/stl_algobase.h:69,\r\n                 from /usr/include/c++/14/string:51,\r\n                 from /home/hebasto/git/bitcoin/src/crypto/sha256.h:10,\r\n                 from /home/hebasto/git/bitcoin/src/hash.h:12,\r\n                 from /home/hebasto/git/bitcoin/src/pubkey.h:10,\r\n                 from /home/hebasto/git/bitcoin/src/pubkey.cpp:6:\r\n/home/hebasto/git/bitcoin/src/pubkey.cpp:195:116:   in ‘constexpr’ expansion of ‘std::span<const unsigned char>(util::hex_literals::operator\"\"_hex_u8<util::detail::Hex<65>{std::array<std::byte, 32>{std::__array_traits<std::byte, 32>::_Type{(std::byte)80, (std::byte)146, (std::byte)155, (std::byte)116, (std::byte)193, (std::byte)160, (std::byte)73, (std::byte)84, (std::byte)183, (std::byte)139, (std::byte)75, (std::byte)96, (std::byte)53, (std::byte)233, (std::byte)122, (std::byte)94, (std::byte)7, (std::byte)138, (std::byte)90, (std::byte)15, (std::byte)40, (std::byte)236, (std::byte)150, (std::byte)213, (std::byte)71, (std::byte)191, (std::byte)238, (std::byte)154, (std::byte)206, (std::byte)128, (std::byte)58, (std::byte)192}}}>())’\r\n/usr/include/c++/14/span:202:57:   in ‘constexpr’ expansion of ‘((std::span<const unsigned char>*)this)->std::span<const unsigned char>::span<const unsigned char*>((& __arr)->std::array<unsigned char, 32>::data(), 32)’\r\n/usr/include/c++/14/span:165:11: error: ‘__builtin_expect(((long int)(! __gnu_debug::__valid_range<const unsigned char*>(__first, (__first + ((sizetype)__count))))), 0)’ is not a constant expression\r\n  165 |           __glibcxx_requires_valid_range(__first, __first + __count);\r\n      |           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nninja: build stopped: subcommand failed.\r\n```\r\n\r\nThe issue was introduced in 50bc017040ae300c795e3709233b80619db24518 from https://github.com/bitcoin/bitcoin/pull/30377.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-17T11:00:48Z",
      "updated_at": "2025-12-18T12:31:04Z",
      "closed_at": "2024-12-17T11:02:04Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31515",
      "labels": [],
      "comment_data": [
        {
          "id": 2548151931,
          "user": "hebasto",
          "body": "cc @hodlinator ",
          "created_at": "2024-12-17T11:01:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 15,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2548154578,
          "user": "fanquake",
          "body": "Duplicate of #31436.",
          "created_at": "2024-12-17T11:02:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 20,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2552146836,
          "user": "hodlinator",
          "body": "> cc @hodlinator\r\n\r\nThanks @hebasto. I started trying to update my environment yesterday to use newer GCC on NixOS but ran into (valid) compilation errors in other libraries and didn't have time to correct them before the fix in #31493 got merged.",
          "created_at": "2024-12-18T19:50:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 247,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3256,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2740811022,
      "number": 31505,
      "title": "Bitcoin Core crashes when importing a wallet file",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nBitcoin Core crashes unexpectedly when attempting to import a wallet file. The crash occurs immediately after executing the import command, and no further operations can be performed. The application closes without providing an error message or logs visible in the GUI.\r\n\r\nThe node stops responding before completing the wallet import process.\r\nThe wallet file being imported is valid and works in previous versions of Bitcoin Core.\r\n\n\n### Expected behaviour\n\nThe wallet file should be imported successfully, and the node should continue functioning normally.\n\n### Steps to reproduce\n\nStart Bitcoin Core version X.X.X.\r\nAttempt to import a wallet file using the GUI or the RPC command (e.g., importwallet <filename>).\r\nDescribe exactly what happens, including any error messages (if applicable).\r\n\n\n### Relevant log output\n\nInclude debug logs from debug.log if available (found in the Bitcoin Core data directory).\r\nIf no logs are generated, mention this as well.\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n25.0.0\n\n### Operating system and version\n\nUbuntu 22.04\n\n### Machine specifications\n\nWas it generated by a different Bitcoin version? What format is it in?",
      "state": "closed",
      "user": "NexusGKSoftwares",
      "created_at": "2024-12-15T18:28:12Z",
      "updated_at": "2025-12-18T12:31:04Z",
      "closed_at": "2024-12-18T06:50:23Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31505",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 2544210195,
          "user": "furszy",
          "body": "> The application closes without providing an error message or logs visible in the GUI.\r\n\r\nPlease open the `debug.log` file located in your data directory, check for any error messages, and share them.",
          "created_at": "2024-12-15T23:52:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 201,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2544708218,
          "user": "NexusGKSoftwares",
          "body": "i will share them",
          "created_at": "2024-12-16T06:25:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 17,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2544838703,
          "user": "maflcko",
          "body": "A backtrace in gdb or valgrind would be useful as well. You'll have to launch Bitcoin Core through them:\r\n\r\n`valgrind --tool=nulgrind ./bitcoin-qt` or `gdb --args ./bitcoin-qt`.",
          "created_at": "2024-12-16T07:52:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 177,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1385,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2748186974,
      "number": 31532,
      "title": "qa: `feature_pruning.py` fails on OpenBSD 7.6",
      "body": "```\r\n$ ./build/test/functional/feature_pruning.py                                                                                                                                    \r\n2024-12-18T15:43:01.718000Z TestFramework (INFO): PRNG seed is: 9161356521613668802\r\n2024-12-18T15:43:01.722000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_9kemfg2i\r\n2024-12-18T15:43:03.429000Z TestFramework (INFO): Warning! This test requires 4GB of disk space\r\n2024-12-18T15:43:03.430000Z TestFramework (INFO): Mining a big blockchain of 995 blocks\r\n2024-12-18T15:44:06.404000Z TestFramework (INFO): Check that we haven't started pruning yet because we're below PruneAfterHeight\r\n2024-12-18T15:44:06.404000Z TestFramework (INFO): Success\r\n2024-12-18T15:44:06.405000Z TestFramework (INFO): Though we're already using more than 550MiB, current usage: 592.1861515045166\r\n2024-12-18T15:44:06.405000Z TestFramework (INFO): Mining 25 more blocks should cause the first block file to be pruned\r\n2024-12-18T15:44:08.797000Z TestFramework (INFO): Success\r\n2024-12-18T15:44:08.798000Z TestFramework (INFO): Usage should be below target: 496.3139057159424\r\n2024-12-18T15:44:08.799000Z TestFramework (INFO): Check that we'll exceed disk space target if we have a very high stale block rate\r\n2024-12-18T15:44:08.799000Z TestFramework (INFO): Mine 24 (stale) blocks on Node 1, followed by 25 (main chain) block reorg from Node 0, for 12 rounds\r\n2024-12-18T15:45:03.671000Z TestFramework (INFO): Usage can be over target because of high stale rate: 512.3139057159424\r\n2024-12-18T15:45:03.673000Z TestFramework (INFO): Check that we can survive a 288 block reorg still\r\n2024-12-18T15:45:03.674000Z TestFramework (INFO): Current block height: 1320\r\n2024-12-18T15:45:03.674000Z TestFramework (INFO): Invalidating block 0c24dade6348580616b36943a607e63d022e2f0c1295016767e2a55155349df0 at height 1033\r\n2024-12-18T15:45:07.251000Z TestFramework (INFO): New best height: 1032\r\n2024-12-18T15:45:07.365000Z TestFramework (INFO): Generating new longer chain of 300 more blocks\r\n2024-12-18T15:45:07.989000Z TestFramework (INFO): Reconnect nodes\r\n2024-12-18T15:45:14.252000Z TestFramework (INFO): Verify height on node 2: 1332\r\n2024-12-18T15:45:14.254000Z TestFramework (INFO): Usage possibly still high because of stale blocks in block files: 512.3139057159424\r\n2024-12-18T15:45:14.254000Z TestFramework (INFO): Mine 220 more large blocks so we have requisite history\r\n2024-12-18T15:45:23.828000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 415, in run_test\r\n    self.reorg_test()  # (1033, )\r\n    ^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 221, in reorg_test\r\n    mine_large_blocks(self.nodes[0], 220)\r\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 59, in mine_large_blocks\r\n    node.submitblock(block.serialize().hex())\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 146, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: AcceptBlock: Failed to find position to write new block to disk (-25)\r\n2024-12-18T15:45:23.885000Z TestFramework (INFO): Stopping nodes\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-18T15:54:03Z",
      "updated_at": "2025-12-18T12:31:00Z",
      "closed_at": "2024-12-18T17:51:22Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31532",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 2551703588,
          "user": "maflcko",
          "body": "Please share the combined log (with the debug log), otherwise there is less that can be done to fix this.",
          "created_at": "2024-12-18T15:59:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 105,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2551938110,
          "user": "hebasto",
          "body": "My apologies for the false alarm.\r\n\r\nIt was a free disk space issue.",
          "created_at": "2024-12-18T17:51:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 68,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3791,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3741376083,
      "number": 34097,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Svki77777",
      "created_at": "2025-12-18T04:12:46Z",
      "updated_at": "2025-12-18T04:12:53Z",
      "closed_at": "2025-12-18T04:12:51Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34097",
      "labels": [],
      "comment_data": [
        {
          "id": 3668277429,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The title and body contain only brief, non-substantive text with no description of an issue, bug, or meaningful change, indicating an irrelevant or placeholder submission rather than a legitimate report or PR.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-18T04:12:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 478,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3446310643,
      "number": 33468,
      "title": "sqlite legacy descriptor wallet migration fails",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nthe latest version of bitcoin does not load my legacy descriptor wallet, and migration doesn't work\n\nwhen I try to migrate:\n\n```\n./build/bin/bitcoin-cli migratewallet personal\n```\n\nI get:\n\n```\nerror code: -4\nerror message:\nError: This wallet is already a descriptor wallet\n```\n\nso effectively I can't use my wallet in the latest version of bitcoin.\n\ncc @achow101 \n\n### Expected behaviour\n\nI expect migratewallet to migrate my legacy descriptor wallet to sqlite so I can use it\n\n### Steps to reproduce\n\nCreate a legacy descriptor wallet, and try to migrate it to sqlite\n\n### Relevant log output\n\n```\nerror code: -4\nerror message:\nError: This wallet is already a descriptor wallet\n```\n\nWhen I try to load wallet:\n\n```\n./build/bin/bitcoin-cli -datadir=/Volumes/chunkstr/bitcoin loadwallet personal\nerror code: -18\nerror message:\nWallet file verification failed. Failed to open database path '/Volumes/chunkstr/bitcoin/personal'. The wallet appears to be a Legacy wallet, please use the wallet migration tool (migratewallet RPC or the GUI option).\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@89144eb473c6bdb64f21de66912e915225ea6510\n\n### Operating system and version\n\nMacOS 26.0\n\n### Machine specifications\n\nM2 Max, external exFAT m.2 2TB drive in usb-c enclosure ",
      "state": "closed",
      "user": "jb55",
      "created_at": "2025-09-23T18:43:32Z",
      "updated_at": "2025-12-17T21:05:25Z",
      "closed_at": "2025-12-17T21:05:25Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/33468",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3325250806,
          "user": "jb55",
          "body": "commenting out that check didn't seem to harm anything and it migrated successfully.\n\n```patch\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\nindex 6b5d08b0a3ad..150d79749324 100644\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -4230,9 +4230,9 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n     const std::string wallet_name = local_wallet->GetName();\n \n     // Before anything else, check if there is something to migrate.\n-    if (local_wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n-        return util::Error{_(\"Error: This wallet is already a descriptor wallet\")};\n-    }\n+    //if (local_wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+    //    return util::Error{_(\"Error: This wallet is already a descriptor wallet\")};\n+    //}\n \n     // Make a backup of the DB in the wallet's directory with a unique filename\n     // using the wallet name and current timestamp. The backup filename is based\n```\n\nperhaps we just need a new check? since there could be legacy descriptor wallets?",
          "created_at": "2025-09-23T19:19:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1062,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3325340756,
          "user": "achow101",
          "body": "Can you be more specific as to which configuration you had? Was it bdb-descriptor or sqlite-legacy?\n\nEither way, both of those are not supported wallet configurations and are not possible to create without modifying the software.",
          "created_at": "2025-09-23T19:53:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 229,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325363600,
          "user": "jb55",
          "body": "bdb-descriptor. I don't think I ran modified software, I do remember importing descriptors exported via hwi a long time ago.\n\nif I remember correctly I used createwallet with descriptors=true and perhaps with sqlite not compiled ? so maybe thats what happened... hmm",
          "created_at": "2025-09-23T20:03:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325372801,
          "user": "jb55",
          "body": "anyway I fixed it, all good",
          "created_at": "2025-09-23T20:06:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 27,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325389924,
          "user": "achow101",
          "body": "It was only possible to create bdb-descriptor with a build of master for the 5 months between #16528 and #19077. I'm surprised that `migratewallet` works on those wallets when removing that check.\n\nMy typical recommendation for such wallets is to use `bitcoin-wallet dump` and `bitcoin-wallet createfromdump` to export the records and the load them into a new sqlite database.",
          "created_at": "2025-09-23T20:13:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 376,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325407230,
          "user": "jb55",
          "body": "ok I will try that instead just in case",
          "created_at": "2025-09-23T20:19:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 39,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3456559038,
          "user": "CMDRZOD",
          "body": "I am also experiencing this same issue with v30. I downloaded compiled binaries to use on ubuntu 22.04\n\nI also tried upgrading a backup of the wallet using windows binaries on Win 11 which also failed with the message unable to rescan.\n\nMy data dir is in a custom location and am unable to get the bitcoin-wallet dump command to work. What is the recommended path forward?",
          "created_at": "2025-10-28T13:45:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 372,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3661427943,
          "user": "jb55",
          "body": "@achow101 \n> My typical recommendation for such wallets is to use bitcoin-wallet dump and bitcoin-wallet createfromdump to export the records and the load them into a new sqlite database.\n\n```\n$ bitcoin-wallet -datadir=/titan/bitcoin -dumpfile=personal.dump createfromdump\nError: Dumpfile specifies an unsupported database format (bdb). Only sqlite database dumps are supported\n```\n\nit doesn't let me :(",
          "created_at": "2025-12-16T16:37:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 403,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3661449845,
          "user": "luckman212",
          "body": "I got hit with this somewhat scary situation, I ended up using an older version (v25.2) of the Bitcoin-Qt app to migrate my wallet, because v30 refused to parse it.",
          "created_at": "2025-12-16T16:42:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 164,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3663281115,
          "user": "achow101",
          "body": "> it doesn't let me :(\n\nOpen the dump file, change the `bdb` at the top to `sqlite` and do `createfromdump`. You'll get a checksum error that gives you the correct checksum. Copy that checksum, open the dump file again, go to the bottom and replace the checksum. `createfromdump` should now work.",
          "created_at": "2025-12-17T01:59:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 296,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3667104351,
          "user": "jb55",
          "body": "oh nice I instinctually tried that and ran into the checksum error, didn't realize I could replace the checksum. will try",
          "created_at": "2025-12-17T20:50:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 121,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3667153801,
          "user": "jb55",
          "body": "that works! thanks boss.",
          "created_at": "2025-12-17T21:04:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 24,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1492,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1813481787,
      "number": 28109,
      "title": "build: Windows debug cross-build fails with `-O0`",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nWhen cross-compiling for Windows with the `-O0` optimization level the build fails.\r\n\r\nThe error can be fixed by the `-Wa,-mbig-obj` assembler flag. However, @theuni [suggested](https://github.com/hebasto/bitcoin/pull/18#discussion_r1267219453):\r\n> We should definitely look into breaking up that object.\r\n\r\n### Expected behaviour\r\n\r\nThe build completes with no error.\r\n\r\n### Steps to reproduce\r\n\r\n```\r\n$ make -C depends HOST=x86_64-w64-mingw32 DEBUG=1 NO_QT=1\r\n$ ./configure CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site --enable-debug CFLAGS=-O0 CXXFLAGS=-O0\r\n$ make\r\n```\r\n\r\n### Relevant log output\r\n\r\n```\r\n...\r\n/usr/bin/x86_64-w64-mingw32-as: wallet/libbitcoin_wallet_a-wallet.o: too many sections (46006)\r\n{standard input}: Assembler messages:\r\n{standard input}: Fatal error: can't write 47 bytes to section .text of wallet/libbitcoin_wallet_a-wallet.o: 'file too big'\r\n/usr/bin/x86_64-w64-mingw32-as: wallet/libbitcoin_wallet_a-wallet.o: too many sections (46006)\r\n{standard input}: Fatal error: wallet/libbitcoin_wallet_a-wallet.o: file too big\r\n...\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@5608e1d3b4ba3a23c05937918046e428be890505\r\n\r\n### Operating system and version\r\n\r\nUbuntu 23.04\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2023-07-20T08:44:59Z",
      "updated_at": "2025-12-17T12:30:32Z",
      "closed_at": "2024-12-17T11:03:54Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/28109",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1504,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2722828534,
      "number": 31436,
      "title": "windows: build failure with GCC 14.2 & `-D_GLIBCXX_DEBUG`",
      "body": "Initially seen building using depends & `DEBUG=1`, which adds `-D_GLIBCXX_DEBUG`.\r\n\r\n```bash\r\n# x86_64-w64-mingw32-g++ (GCC) 14.2.0 on Alpine x86_64\r\nmake -C depends/ HOST=x86_64-w64-mingw32 -j12 NO_QT=1 NO_ZMQ=1 NO_WALLET=1\r\ncmake -B build --toolchain /bitcoin/depends/x86_64-w64-mingw32/toolchain.cmake -DAPPEND_CPPFLAGS=\"-D_GLIBCXX_DEBUG\"\r\ncmake --build build\r\n<snip>\r\n[ 25%] Building CXX object src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.obj\r\ncd /bitcoin/build/src && /usr/bin/ccache /usr/bin/x86_64-w64-mingw32-g++ -DNOMINMAX -DSECP256K1_STATIC -DWIN32 -DWIN32_LEAN_AND_MEAN -D_MT -D_WIN32_IE=0x0A00 -D_WIN32_WINNT=0x0A00 -D_WINDOWS @CMakeFiles/bitcoin_consensus.dir/includes_CXX.rsp -pipe -std=c++20 -O2 -O2 -g -std=c++20 -Wa,-muse-unaligned-vector-move -fno-extended-identifiers -fdebug-prefix-map=/bitcoin/src=. -fmacro-prefix-map=/bitcoin/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -MD -MT src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.obj -MF CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.obj.d -o CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.obj -c /bitcoin/src/pubkey.cpp -D_GLIBCXX_DEBUG\r\nIn file included from /usr/x86_64-w64-mingw32/include/c++/14.2.0/debug/debug.h:90,\r\n                 from /usr/x86_64-w64-mingw32/include/c++/14.2.0/bits/stl_algobase.h:69,\r\n                 from /usr/x86_64-w64-mingw32/include/c++/14.2.0/string:51,\r\n                 from /bitcoin/src/crypto/sha256.h:10,\r\n                 from /bitcoin/src/hash.h:12,\r\n                 from /bitcoin/src/pubkey.h:10,\r\n                 from /bitcoin/src/pubkey.cpp:6:\r\n/bitcoin/src/pubkey.cpp:195:116:   in 'constexpr' expansion of 'std::span<const unsigned char>(util::hex_literals::operator\"\"_hex_u8<util::detail::Hex<65>{std::array<std::byte, 32>{std::__array_traits<std::byte, 32>::_Type{(std::byte)80, (std::byte)146, (std::byte)155, (std::byte)116, (std::byte)193, (std::byte)160, (std::byte)73, (std::byte)84, (std::byte)183, (std::byte)139, (std::byte)75, (std::byte)96, (std::byte)53, (std::byte)233, (std::byte)122, (std::byte)94, (std::byte)7, (std::byte)138, (std::byte)90, (std::byte)15, (std::byte)40, (std::byte)236, (std::byte)150, (std::byte)213, (std::byte)71, (std::byte)191, (std::byte)238, (std::byte)154, (std::byte)206, (std::byte)128, (std::byte)58, (std::byte)192}}}>())'\r\n/usr/x86_64-w64-mingw32/include/c++/14.2.0/span:202:57:   in 'constexpr' expansion of '((std::span<const unsigned char>*)this)->std::span<const unsigned char>::span<const unsigned char*>((& __arr)->std::array<unsigned char, 32>::data(), 32)'\r\n/usr/x86_64-w64-mingw32/include/c++/14.2.0/span:165:11: error: '__builtin_expect(((long int)(! __gnu_debug::__valid_range<const unsigned char*>(__first, (__first + ((sizetype)__count))))), 0)' is not a constant expression\r\n  165 |           __glibcxx_requires_valid_range(__first, __first + __count);\r\n      |           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ngmake[2]: *** [src/CMakeFiles/bitcoin_consensus.dir/build.make:170: src/CMakeFiles/bitcoin_consensus.dir/pubkey.cpp.obj] Error 1\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-06T11:38:28Z",
      "updated_at": "2025-12-17T12:30:30Z",
      "closed_at": "2024-12-12T07:18:06Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/31436",
      "labels": [
        "Build system",
        "Tests",
        "Upstream",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 2537998304,
          "user": "maflcko",
          "body": "Fixed in gcc-15. There may be backports to 12-14, but I wouldn't count on it.",
          "created_at": "2024-12-12T07:18:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 77,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2548191518,
          "user": "maflcko",
          "body": "A workaround is in https://github.com/bitcoin/bitcoin/pull/31493",
          "created_at": "2024-12-17T11:20:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 64,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3414,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3069421158,
      "number": 32536,
      "title": "cmake: Cannot find Qt 6 on SunOS / illumos (OpenIndiana Distribution)",
      "body": "Qt 6 was installed as follows:\n```\n$ sudo pkg install library/qt6\n```\n\nAs a workaround, the `Qt6_DIR` CMake variable can be set manually:\n```\n$ cmake -B build -DBUILD_GUI=ON -DQt6_DIR=/usr/lib/qt/6.6/lib/amd64/cmake/Qt6\n```\n\nAlternatively, the [`Qt6_ROOT`](https://cmake.org/cmake/help/latest/variable/PackageName_ROOT.html) CMake or [environment](https://cmake.org/cmake/help/latest/envvar/PackageName_ROOT.html) variable can be used:\n```\n$ env Qt6_ROOT=/usr/lib/qt/6.6/lib/amd64 cmake -B build -DBUILD_GUI=ON\n```\n\nMoved from https://github.com/hebasto/bitcoin/issues/234.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-05-16T16:22:20Z",
      "updated_at": "2025-12-17T11:41:20Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32536",
      "labels": [
        "Brainstorming",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 2887477698,
          "user": "purpleKarrot",
          "body": "It sure is annoying when system packages are installed to a location where they cannot be found by default. On the other hand, package maintainers may have their reasons for doing that. There are probably multiple packages which depend on Qt6 and are built with CMake. It is very likely that package maintainers have their build environment set up for that.\n\nTrying to work around that \"issue\" creates a maintenance burden for us and potentially for package maintainers too, because our workaround may cause conflicts with their build environment setup. The most portable solution is to do - believe it or not - nothing at all.\n\nIf we want to provide binary packages for download on a website, we take the role of package maintainers. In packaging scripts, we need to setup a build environment so that all dependencies can be found. There are countless ways to do that. Two are mentioned above, other approaches are listed in the documentation of the [`find_package`](https://cmake.org/cmake/help/latest/command/find_package.html) command. Such build scripts ideally should be maintained separate from the project, like in a separate repository.",
          "created_at": "2025-05-16T19:04:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1145,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2888278841,
          "user": "fanquake",
          "body": "> If we want to provide binary packages for download on a website, we take the role of package maintainers. In packaging scripts, we need to setup a build environment so that all dependencies can be found. There are countless ways to do that. \n\nThe only way we will produce anything binary, that would end up being distributed on our website, is via our Guix build; so any approach taken needs to happen inside Guix (all blobs/binaries must be reproducible).\n\n> Such build scripts ideally should be maintained separate from the project, like in a separate repository.\n\nCan you elaborate? I don't think I'd agree with splitting up our release scripts, into separate repositories.",
          "created_at": "2025-05-17T10:25:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 678,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2888283003,
          "user": "maflcko",
          "body": "Are there any known users on this platform? Maybe this can be closed for now, until there are a few users. Then, a `build-*.md` can be added with any needed details. Whether or not to do a guix build can be decided then as well.",
          "created_at": "2025-05-17T10:34:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 228,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 643,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3710526735,
      "number": 34035,
      "title": "qa: Assertion in `p2p_v2_misbehaving.py`",
      "body": "From the CI [log](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20051004575/job/57506810574) in OmniOS CI job:\n```\n\n169/281 - p2p_v2_misbehaving.py failed, Duration: 40 s\n\nstdout:\n2025-12-09T04:30:26.705442Z TestFramework (INFO): PRNG seed is: 8231439354065845951\n2025-12-09T04:30:26.706779Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251209_041712/p2p_v2_misbehaving_132\n2025-12-09T04:30:27.106102Z TestFramework (INFO): Sending ellswift bytes in parts to ensure that response from responder is received only when\n2025-12-09T04:30:27.106393Z TestFramework (INFO): ellswift bytes have a mismatch from the 16 bytes(network magic followed by \"version\\x00\\x00\\x00\\x00\\x00\")\n2025-12-09T04:30:27.107282Z TestFramework (INFO): Sending first 4 bytes of ellswift which match network magic\n2025-12-09T04:30:27.107449Z TestFramework (INFO): If a response is received, assertion failure would happen in our custom data_received() function\n2025-12-09T04:30:27.162726Z TestFramework (INFO): Sending remaining ellswift and garbage which are different from V1_PREFIX. Since a response is\n2025-12-09T04:30:27.163083Z TestFramework (INFO): expected now, our custom data_received() function wouldn't result in assertion failure\n2025-12-09T04:30:27.218285Z TestFramework (INFO): successful disconnection since modified ellswift was sent as response\n2025-12-09T04:31:07.237755Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_v2_misbehaving.py\", line 134, in run_test\n    self.test_v2disconnection()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_v2_misbehaving.py\", line 177, in test_v2disconnection\n    with node0.assert_debug_log(expected_debug_message[test_type.value], timeout=5):\n         ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 148, in __exit__\n    next(self.gen)\n    ~~~~^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 576, in assert_debug_log\n    self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 229, in _raise_assertion_error\n    raise AssertionError(self._node_msg(msg))\nAssertionError: [node 0] Expected messages \"['V2 transport error: missing garbage terminator, peer=1']\" does not partially match log:\n\n - 2025-12-09T04:30:27.219068Z (mocktime: 2025-12-09T04:30:31Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.219261Z (mocktime: 2025-12-09T04:30:31Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=setmocktime user=__cookie__\n - 2025-12-09T04:30:27.224046Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:3858] [CNode::CNode(NodeId, std::shared_ptr<Sock>, const CAddress&, uint64_t, uint64_t, const CService&, const std::string&, ConnectionType, bool, uint64_t, CNodeOptions&&)] [net] Added connection peer=1\n - 2025-12-09T04:30:27.224092Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1860] [void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&&, NetPermissionFlags, const CService&, const CService&)] [net] connection from 127.0.0.1:44555 accepted\n - 2025-12-09T04:30:27.225456Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:3858] [CNode::CNode(NodeId, std::shared_ptr<Sock>, const CAddress&, uint64_t, uint64_t, const CService&, const std::string&, ConnectionType, bool, uint64_t, CNodeOptions&&)] [net] Added connection peer=2\n - 2025-12-09T04:30:27.225490Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1860] [void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&&, NetPermissionFlags, const CService&, const CService&)] [net] connection from 127.0.0.1:44830 accepted\n - 2025-12-09T04:30:27.290527Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1191] [bool V2Transport::ProcessReceivedGarbageBytes()] [net] V2 transport error: missing garbage terminator, peer=2\n - 2025-12-09T04:30:27.290568Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:2183] [void CConnman::SocketHandlerConnected(const std::vector<CNode*>&, const Sock::EventsPerSock&)] [net] receiving message bytes failed, disconnecting peer=2\n - 2025-12-09T04:30:27.290582Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: version (111 bytes) peer=1\n - 2025-12-09T04:30:27.290635Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending version (114 bytes) peer=1\n - 2025-12-09T04:30:27.290746Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:1542] [void {anonymous}::PeerManagerImpl::PushNodeVersion(CNode&, const {anonymous}::Peer&)] [net] send version message: version 70016, blocks=200, txrelay=1, peer=1\n - 2025-12-09T04:30:27.290770Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending wtxidrelay (0 bytes) peer=1\n - 2025-12-09T04:30:27.290791Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending sendaddrv2 (0 bytes) peer=1\n - 2025-12-09T04:30:27.291319Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending verack (0 bytes) peer=1\n - 2025-12-09T04:30:27.291363Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3623] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] receive version message: /python-p2p-tester:0.0.3/: version 70016, blocks=-1, us=127.0.0.1:12584, txrelay=1, peer=1\n - 2025-12-09T04:30:27.292113Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:560] [void CNode::CloseSocketDisconnect()] [net] Resetting socket for peer=2\n - 2025-12-09T04:30:27.292174Z (mocktime: 2025-12-09T04:30:27Z) [net] [net_processing.cpp:1660] [virtual void {anonymous}::PeerManagerImpl::FinalizeNode(const CNode&)] [net] Cleared nodestate for peer=2\n - 2025-12-09T04:30:27.296338Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: wtxidrelay (0 bytes) peer=1\n - 2025-12-09T04:30:27.296374Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: verack (0 bytes) peer=1\n - 2025-12-09T04:30:27.296395Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3666] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] New inbound v2 peer connected: version: 70016, blocks=-1, peer=1\n - 2025-12-09T04:30:27.296418Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending sendcmpct (9 bytes) peer=1\n - 2025-12-09T04:30:27.296450Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.296524Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending getheaders (645 bytes) peer=1\n - 2025-12-09T04:30:27.296558Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:5550] [virtual bool {anonymous}::PeerManagerImpl::SendMessages(CNode*)] [net] initial getheaders (199) to peer=1 (startheight:-1)\n - 2025-12-09T04:30:27.296586Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending feefilter (8 bytes) peer=1\n - 2025-12-09T04:30:27.296615Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: getaddr (0 bytes) peer=1\n - 2025-12-09T04:30:27.296674Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [addrman.cpp:849] [std::vector<CAddress> AddrManImpl::GetAddr_(size_t, size_t, std::optional<Network>, bool) const] [addrman] GetAddr returned 0 random addresses\n - 2025-12-09T04:30:27.301877Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.329896Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.329925Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.329985Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.330004Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.380276Z (mocktime: 2025-12-09T04:30:27Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.380464Z (mocktime: 2025-12-09T04:30:27Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=getpeerinfo user=__cookie__\n - 2025-12-09T04:30:27.381597Z (mocktime: 2025-12-09T04:30:27Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.381776Z (mocktime: 2025-12-09T04:30:27Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=setmocktime user=__cookie__\n\n\n2025-12-09T04:31:07.294475Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-09T04:31:07.294652Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251209_041712/p2p_v2_misbehaving_132\n2025-12-09T04:31:07.294764Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251209_041712/p2p_v2_misbehaving_132/test_framework.log\n2025-12-09T04:31:07.295209Z TestFramework (ERROR): \n2025-12-09T04:31:07.295373Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20251209_041712/p2p_v2_misbehaving_132' to consolidate all logs\n2025-12-09T04:31:07.295454Z TestFramework (ERROR): \n2025-12-09T04:31:07.295511Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-09T04:31:07.295791Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-09T04:31:07.295864Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-09T11:50:12Z",
      "updated_at": "2025-12-16T13:55:59Z",
      "closed_at": "2025-12-16T13:55:58Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34035",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3633211587,
          "user": "mzumsande",
          "body": "In the failed run the peer that the test framework connects second is seen by the node as the first peer, so that the log message `V2 transport error: missing garbage terminator` is logged for `peer=2` and not `peer=1` as the test expects.\nFYI @stratospher ",
          "created_at": "2025-12-09T16:42:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 257,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3645779184,
          "user": "stratospher",
          "body": "ok looks like python event loop asynchronous behaviour.\n- it's scheduling connection to `peer1` and then scheduling a connection to `peer2`\n- but it is actually connecting to `peer2` first (which gets assigned peer id = 1 on c++ side) and only later connecting to the peer we're interested in `peer1` (which gets assigned peer id = 2 on c++ side) and we're seeing a log mismatch\n\nideally, we let the event loop do whatever it wants and then use the actual peer id in `expected_debug_message` - as in we check for `V2 transport error: missing garbage terminator, peer={}` instead of `V2 transport error: missing garbage terminator, peer=1`. but it would require more invasive changes in the test framework code since peer id is assigned on the C++ side.\n\ni think simplest solution is just removing the hard-coded peer id from the debug message - as in just checking `V2 transport error: missing garbage terminator` instead of `V2 transport error: missing garbage terminator, peer=1`. since we're checking that `peer2` in the functional test remains connected, disconnection should come from  the peer (`peer1`) which we're expecting to disconnect.\n\nwill open a fix.",
          "created_at": "2025-12-12T10:01:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1164,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 12863,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2742715410,
      "number": 31509,
      "title": "Mac mIni M4 chip Fatal crash during initial chain download",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nFatal crash at block height=204907 when intalling bitcoin-core on new mac\n\n### Expected behaviour\n\ndownload whole chain.\n\n### Steps to reproduce\n\ntried it several times and it keeps crashing.\r\nalso tried earlier versions of bitcoin core.\r\n\r\nNon techie so please forgive if I am a Numpty!\n\n### Relevant log output\n\n2024-12-16T13:13:15Z UpdateTip: new best=000000000000049dfa92a13ebe5f250b6139b17f90348618d4022a798eab97e9 height=204906 version=0x00000001 log2_work=68.915302 tx=8334826 date='2012-10-25T14:06:46Z' progress=0.007280 cache=348.1MiB(2981431txo)\r\n2024-12-16T13:13:15Z UpdateTip: new best=00000000000004a9639319bbbd67e2f37876d3894ac89cbc6a1ba5c4b36ebf53 height=204907 version=0x00000001 log2_work=68.915336 tx=8335103 date='2012-10-25T14:31:31Z' progress=0.007280 cache=348.1MiB(2981430txo)\r\n2024-12-16T13:13:15Z *** Corrupt block found indicating potential hardware failure; shutting down\r\n2024-12-16T13:13:15Z Error: A fatal internal error occurred, see debug.log for details\r\n2024-12-16T14:46:14Z ERROR: ConnectTip: ConnectBlock 000000000000016afdf1a0a9a98d5f3b5a73f0e00532f47cc234e6e97f4f6f2f failed, bad-txnmrklroot, hashMerkleRoot mismatch\r\n2024-12-16T14:46:14Z ERROR: ProcessNewBlock: ActivateBestChain failed (bad-txnmrklroot, hashMerkleRoot mismatch)\r\n2024-12-16T14:46:14Z Flushed fee estimates to fee_estimates.dat.\r\n2024-12-16T14:46:14Z tor: Thread interrupt\r\n2024-12-16T14:46:14Z Shutdown: In progress...\r\n2024-12-16T14:46:14Z opencon thread exit\r\n2024-12-16T14:46:14Z addcon thread exit\r\n2024-12-16T14:46:14Z torcontrol thread exit\r\n2024-12-16T14:46:14Z net thread exit\r\n2024-12-16T14:46:14Z msghand thread exit\r\n2024-12-16T14:46:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2024-12-16T14:46:14Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2024-12-16T14:46:14Z scheduler thread exit\r\n2024-12-16T14:46:14Z Writing 0 unbroadcast transactions to disk.\r\n2024-12-16T14:46:14Z Dumped mempool: 0.000s to copy, 0.007s to dump\r\n2024-12-16T14:46:14Z Flushed fee estimates to fee_estimates.dat.\r\n2024-12-16T14:46:17Z Shutdown: done\r\n\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n27.0.0, Copyright © 2009-2024 The Bitcoin Core developers\n\n### Operating system and version\n\nMac OS 15.1.1 (24B2091)\n\n### Machine specifications\n\n16gb memory\r\nExternal SSD 1 TB, checked with Disc Utility and ok",
      "state": "closed",
      "user": "Paragit1",
      "created_at": "2024-12-16T15:35:23Z",
      "updated_at": "2025-12-16T12:30:01Z",
      "closed_at": "2024-12-16T16:02:32Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31509",
      "labels": [
        "macOS",
        "Data corruption"
      ],
      "comment_data": [
        {
          "id": 2546021628,
          "user": "maflcko",
          "body": "exFAT is not supported, See https://github.com/bitcoin/bitcoin/issues/31454",
          "created_at": "2024-12-16T16:02:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2546065961,
          "user": "Paragit1",
          "body": "Thanks. It did work on my 2017 macbook which seems odd.",
          "created_at": "2024-12-16T16:20:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 55,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2629,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3730153407,
      "number": 34076,
      "title": "tapscript with time-locked musig2",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nTrying to import descriptor with time-locked musig fragment in tapscript returns:\n```\nerror code: -5\nerror message:\nInvalid musig() expression\n```\n\n### Expected behaviour\n\nImport should work.\n\n### Steps to reproduce\n\ntry `getdescriptorinfo` with following BIP-388 policy:\n\n`tr(musig(@0,@1,@2)/**,{and_v(v:pk(musig(@0,@1)/**),older(12960)),{and_v(v:pk(musig(@0,@2)/**),older(12960)),and_v(v:pk(musig(@1,@2)/**),older(12960))}})`\n\nwhich translates (for example) to following descriptor:\n\n```\ntr(musig([a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6,[6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG)/<0;1>/*,{and_v(v:pk(musig([6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG,[a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q)/<0;1>/*),older(12960)),{and_v(v:pk(musig([6b69e5e9/88h/1h/0h]tpubDCMSPy71rEscssSimZNZ3S1Z2aguLeeLbguzDUXJVfwiCxuAE88omLcd95895x9au5Tw81bCuPhNcmSCzp2Yz13EReNHduoFKc4f1VNs7VG,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6)/<0;1>/*),older(12960)),and_v(v:pk(musig([a471be2d/88h/1h/0h]tpubDCyTVDMyRxsEeAf7KLPRfUZkSCCjsZPqZoM2Ay3FqtH55CxvTchpK2DSbTgVRziFGesGGibdsfC4BktGNUMwb4VjGwu2KuzDCp9A97rVH8q,[0f056943/88h/1h/0h]tpubDD8WTkCBJwj5WHR8S1gr2y64LcFSwEic38zGRKEuHXUUPRacZyTREJp9vZ5fayGVqEzzBacffrkK1g4CJRA5PgXE7MkrsLcUWbeixkLaNM6)/<0;1>/*),older(12960))}})\n```\n\n(imo) error is caused by the first leaf where `expr` after split is missing terminating parentheses of musig expression https://github.com/bitcoin/bitcoin/blob/2210feb4466eff1455468f0a25045fce4b89c55d/src/script/descriptor.cpp#L1844-L1847\n\nOR use below patch to add test case to musig functional tests:\n\n```\nSubject: [PATCH] test\n---\nIndex: test/functional/wallet_musig.py\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/test/functional/wallet_musig.py b/test/functional/wallet_musig.py\n--- a/test/functional/wallet_musig.py\t(revision 2210feb4466eff1455468f0a25045fce4b89c55d)\n+++ b/test/functional/wallet_musig.py\t(date 1765796643152)\n@@ -236,6 +236,7 @@\n         self.do_test(\"tr(H,{pk(musig/*), pk(same keys different musig/*)})\", \"tr($H,{pk(musig($0,$1,$2)/<0;1>/*),pk(musig($1,$2)/0/*)})\", scriptpath=True)\n         self.do_test(\"tr(musig/*,{pk(partial keys diff musig-1/*),pk(partial keys diff musig-2/*)})}\", \"tr(musig($0,$1,$2)/<3;4>/*,{pk(musig($0,$1)/<5;6>/*),pk(musig($1,$2)/7/*)})\")\n         self.do_test(\"tr(musig/*,{pk(partial keys diff musig-1/*),pk(partial keys diff musig-2/*)})} script-path\", \"tr(musig($0,$1,$2)/<3;4>/*,{pk(musig($0,$1)/<5;6>/*),pk(musig($1,$2)/7/*)})\", scriptpath=True, nosign_wallets=[0])\n+        self.do_test(\"time-locked musig\", \"tr(musig($0,$1,$2)/<0;1>/*,{and_v(v:pk(musig($0,$1)/<0;1>/*),older(12960)),{and_v(v:pk(musig($0,$2)/<0;1>/*),older(12960)),and_v(v:pk(musig($1,$2)/<0;1>/*),older(12960))}})\", scriptpath=True)\n \n \n if __name__ == '__main__':\n```\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@2210feb4466eff1455468f0a25045fce4b89c55d\n\n### Operating system and version\n\nLinux ... 6.14.0-37-generic #37~24.04.1-Ubuntu ... x86_64 x86_64 x86_64 GNU/Linux\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "scgbckbone",
      "created_at": "2025-12-15T12:14:26Z",
      "updated_at": "2025-12-16T02:32:17Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34076",
      "labels": [],
      "comment_data": [
        {
          "id": 3655673810,
          "user": "scgbckbone",
          "body": "> (imo) error is caused by the first leaf where `expr` after split is missing terminating parentheses of musig expression\n\nactually it is not after split... `ParsePubkey` parameter `sp` already lacks terminating `)` of musig expression, therefore `split.size()` is 1",
          "created_at": "2025-12-15T13:32:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 266,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3658444972,
          "user": "achow101",
          "body": "Looks like [`ParseKeyEnd`](https://github.com/bitcoin/bitcoin/blob/41bf8f2d5eceaac72b98c1791f5fc368b3af90cb/src/script/miniscript.h#L1751) is looking for the next `)` which is incorrect when there is a `musig()` as the key.",
          "created_at": "2025-12-16T02:32:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 223,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3948,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2390654235,
      "number": 30392,
      "title": "Fee Estimation via Fee rate Forecasters tracking issue",
      "body": "This is a tracking issue for an effort to add Fee Estimation with Forecasters (Mempool-Based Fee rate Forecaster) to Bitcoin Core.\n\nFor the conceptual motivation behind this work, see issue #27995 and the previous discussion on Delving Bitcoin: [Mempool-Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703).\n\n\n\n### What to Review\n\n- #31664\n\n### Roadmap\n\n\n- [x] #30391\n- [x] #33218\n- [ ] #31664\n- [ ] Integrate the new feature into `estimatesmartfee` RPC and add Functional Test\n- [ ] Add Feature to the Wallet\n\n### Complete Feature\n Design document https://gist.github.com/ismaelsadeeq/bcfa6b1216eef10076665551d9885722\n- Implementation #30157\n\n\n\n### Next Steps\n\n- Use this feature in the Bitcoin Core wallet\n- Use heuristics from the mempool to target a higher/lower percentile in the mempool forecaster\n\n\n<details>\n<summary>\n<em>Related Work on fee estimation</em>\n</summary>\n\n\n### Improving the current `BlockPolicyEstimator` in the Short Term\n\n- #30079\n- #30275:\n- #30525\n  - [Delving Bitcoin Analysis](https://delvingbitcoin.org/t/bitcoind-policy-estimator-modes-analysis/964/1)\n \n### Improving the current `BlockPolicyEstimator` after the [Cluster Mempool Project](https://github.com/bitcoin/bitcoin/issues/30289)\n- Make `BlockPolicyEstimator` package-aware: [Delving Bitcoin Post](https://delvingbitcoin.org/t/package-aware-fee-estimator-post-cluster-mempool/312/)\n\n### Previous Refactors\n\n- [x] #28368\n- [x] #29013\n</details>\n\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2024-07-04T11:33:32Z",
      "updated_at": "2025-12-15T12:04:25Z",
      "closed_at": "2025-12-15T12:04:25Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/30392",
      "labels": [
        "TX fees and policy",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2639597574,
          "user": "jsarenik",
          "body": "Just a few related notes, a compilation from what I have seen so far. HTH, may be biased and YMMV:\n\nYes, getting a transaction into a block (confirmed) is a future event so on all my nodes I do `ln -nsf /dev/null ~/.bitcoin/fee_estimates.dat` and never call the RPCs guessing \"smart fee estimation\" from historical values.\n\nSetting a rational initial fee allows for simple (if not m-of-n multisig where `n>=m>1`) RBF replacements to increment the fee just by subtracting the `vsize` sats from one (or more, combined) output(s). See for example the RBF dance [on mempool.space/signet](https://mempool.space/signet/address/tb1p4tp4l6glyr2gs94neqcpr5gha7344nfyznfkc8szkreflscsdkgqsdent4).\n\nIn case of `sat/vB` units I would suggest at least three decimal places. Works in Blockstream Green Wallet. See [a current example](https://mempool.space/signet/tx/f97a251e214990514b142e2bf2db4ea1d401df457e982b9c7c0c317359d3eb44) on mempool.space, whereas the fee-rate used was `20.001`. Further I would suggest to use the transaction `weight` rather than `vsize`. The computation would look like `((weight*fee_rate)+3)/4` which is the same way how to get the `vsize` but once multiplying by the `fee_rate` (be it decimal or in `sat/kvB`) the results may differ.\n\nComputaion of the top-left located \"rational fee-rate\" at [Anyone's Display](https://display.anyone.eu.org/price.html) is currently done by dividing the `total_fee` by number of blocks in the mempool. Try this shell-script to get the current mempool-sensitive value:\n\n```sh\n#!/bin/sh\n\neval $(bitcoin-cli getmempoolinfo \\\n  |  tr -d ', \".' | tr : = \\\n  | sed 's/=0\\+/=/;1,2d;$d')\nblocks=$((($bytes+999999)/1000000))\nrfr=$(( ($total_fee+999)/1000/$blocks ))\n\n# Exceptions:\n#  1. if the computed value is below 1001\n#    set it to 1001\ntest $rfr -lt 1001 && rfr=1001\n# 2. if there is only one block in the mempool\n#    set the value to 1000\ntest $blocks -eq 1 && rfr=1000\n\necho $rfr\n```\n\nCopying and pasting the above into you favorite Terminal works and to keep things clean I suggest running `env -i PATH=$PATH HOME=$HOME sh` first.",
          "created_at": "2025-02-06T11:45:17Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 2082,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2640268166,
          "user": "ismaelsadeeq",
          "body": "Hmm, I am not sure whether this is a rational fee rate.\n\n1.  It's also unclear what confirmation target this \"rational fee rate\" is aiming for. \n2. I see there is a case where you just 1000  blindly this is not rational at all, it may be that your mempool is sparse because you just started your node, and you only have 1 block worth of transactions.\n3. The script you provided does not also check against the minimum relay fee rate. Hence you might provide a fee rate below that and your transaction might not even propagate to your peers.\n\nBut nice website, and thanks for looking into this!",
          "created_at": "2025-02-06T16:07:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 593,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2717491587,
          "user": "ismaelsadeeq",
          "body": "Following some positive feedback from the recent in-person Core Dev meeting, a notable one is from @ajtowns who suggest exposing the data used for the mempool health check\n\nI’ve made several improvements:  \n\nUpdating the design document to reflect recent improvements and is now shared on \ngithub gist for more review and feedback https://gist.github.com/ismaelsadeeq/bcfa6b1216eef10076665551d9885722)  \n\n#### Updated the  Complete Feature Implementation  \n\n**Mempool Health Check**:  \nThe node’s mempool is validated against miner mempools using a better approach I thought of recently.  \n\nThis can easily be achieved through listening to validation interface notifications:  \n- `MempoolTransactionsRemovedForBlock`: Use notification data to computes the total weight of transactions removed after a new block.  \n- `BlockConnected`: Use notification data to computes the actual block weight.  \n\n- Tracking this over six blocks provides a reliable indicator of mempool sanity.  \n\nThis method is lightweight and aligns with the approach used by the current block policy estimator. (https://github.com/bitcoin/bitcoin/pull/28368\n\nSee Implementation https://github.com/bitcoin/bitcoin/pull/30157/commits/3e4f293ba3bc89f7a42b7c15179d466f83743730 \n\n**Filtering Transactions Skewing Fee Estimates**:  \n- Transactions that consistently fail to confirm despite being in the top mempool block template are now filtered out.  This prevents misleading fee rate estimates due to miner policy deviations.   While rare, such cases can occurr (e.g., Ocean Mining).  \n- See Implementation: https://github.com/bitcoin/bitcoin/pull/30157/commits/a81d3bda9c74936bb020d655443b31d692b17eb2 \n\nThis is an example output (`estimatefee 1 true`)  on mainet running #30157\n```\n{\n  \"minrelayfee\": 0.00001000,\n  \"low\": 0.00002006,\n  \"high\": 0.00002118,\n  \"forecaster\": \"Mempool Forecast\",\n  \"stats\": [\n    \"Tracked 6 most-recent blocks.\",\n   \"Block height: 887420, 3.99909e+06WU txs were seen in the mempool, Block weight: 3.99575e+06 WU (100.00% from mempool).\",\n    \"Block height: 887421, 3.92792e+06WU txs were seen in the mempool, Block weight: 3.99165e+06 WU (98.40% from mempool).\",\n    \"Block height: 887422, 4.00331e+06WU txs were seen in the mempool, Block weight: 3.99194e+06 WU (100.00% from mempool).\",\n    \"Block height: 887423, 3.995e+06WU txs were seen in the mempool, Block weight: 3.99189e+06 WU (100.00% from mempool).\",\n    \"Block height: 887424, 3.99632e+06WU txs were seen in the mempool, Block weight: 3.9919e+06 WU (100.00% from mempool).\",\n    \"Block height: 887425, 4.00402e+06WU txs were seen in the mempool, Block weight: 3.99197e+06 WU (100.00% from mempool).\",\n    \"We suspect 3 txs filtered by miners\",\n    \"02ebbd8ca9e05de5fa056031ef....; count 4\"\n  ]\n}\n```\n\ncc @willcl-ark, @glozow @instagibbs @davidgumberg @ryanofsky ",
          "created_at": "2025-03-12T11:04:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2822,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2790498733,
          "user": "naiyoma",
          "body": "Currently, we have two RPCs for fee estimation.\nThis new method will also introduce another RPC. Why not reuse the existing ones, since that’s what users are already familiar with—assuming they expect them to always return the most accurate fee between `FeeRateForecasterManager` and `CBlockPolicyEstimator`?",
          "created_at": "2025-04-09T17:46:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 308,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2799976769,
          "user": "ismaelsadeeq",
          "body": "Good suggestion, I've done that. thanks @naiyoma  see recent push in #30157",
          "created_at": "2025-04-13T14:33:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3655256760,
          "user": "ismaelsadeeq",
          "body": "Closed in favour of another approach in #34075",
          "created_at": "2025-12-15T12:04:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 46,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1553,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2605720160,
      "number": 31133,
      "title": "net: Tor service target port collides when running multiple nodes, making bitcoind error out",
      "body": "Various people have reported this on IRC after the 28.0 release, but have not created a GH issue, so i'm creating one.\r\n\r\nTo be able to distinguish incoming localhost connections from connections on the Tor hidden (onion) service, we automatically create a separate \"Tor service target\" P2P port. This port is always opened, even if `-listenonion=0`, because the user might manually configure a Tor hidden service and wants the same behavior.\r\n\r\n[DefaultOnionServiceTarget()](https://github.com/bitcoin/bitcoin/blob/master/src/torcontrol.cpp#L714) creates the CService for the Tor service target port. This number is fixed in the chainparams to [8334](https://github.com/bitcoin/bitcoin/blob/master/src/chainparamsbase.cpp#L44) for mainnet, on localhost.\r\n\r\nNormally, this is no problem. However a common scenario is to run multiple bitcoin nodes on one machine (usually for testing) with different P2P and RPC ports. In this case, they will all try to bind to port 8334 and the latter ones will fail. This problem has existed since the Tor service port was introduced, however it became visible in v0.28 with #22729. After that PR it becomes a crash issue.\r\n(it *was* a problem before because multiple `bitcoind` instances would try to bind on port `8334` while ignoring failures, but still have the wrong internal knowledge that they bound on port 8334, passing this to Tor. So all of Tor's connections would go to the first node)\r\n\r\n*The current suggested workaround* is to manually set `-bind=...`. This removes the automatic onion binds (although explicit `-bind=.....=onion` can be used to create new ones). i have tagged this issue with milestone 28.1 as it could be considered a regression and would be nice to have this automatically work again (especially in cases where the user doesn't care  about Tor, like in regtest harnesses).\r\n\r\nVarious ideas to resolve this have been discussed, among which:\r\n\r\n1. Revert #22729: i strongly dislike this, as it would only bury the problem again. Explicit failures are always better than having to debug silent loss of functionality.\r\n2. Instead of hardcoding port 8334, make it `P2P_port + 1`:  When overriding the `-port`, the Tor service target port changes at the same time. This resolves the problem automatically, except in the edge case where the different `bitcoind` instances' P2P ports are specified very closely together (and maybe it's just better to avoid that in the first place).\r\n3. Disable the Tor service port binding when `-listenonion=0`: This avoids the problem when the user doesn't care about Onion binds, however it means that an extra option has to be set, it's still not nice automatic behavior. Might as well set `-bind=` then.\r\n4. Disable the Tor service port binding when `-regtest`: In case of regtest, it's uncommon to care about Tor. However not always; this would interfere with out own tests when we want to test interaction with Tor. It also doesn't solve the issue in case of sigtest/mainnet.\r\n\r\n(some more, from @mzumsande in #31134)\r\n\r\n5. Do nothing and tell affected users to switch to `-bind` - maybe even deprecate `-port`\r\n6.  if `-port` is given, don't attempt to bind to the default onion port\r\n7. disable the automatic tor binding silently if the port is already used\r\n\r\ni personally prefer 2. It keeps the current behavior, except when port is overridden, and doesn't require any special workarounds.",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2024-10-22T14:59:27Z",
      "updated_at": "2025-12-13T12:28:30Z",
      "closed_at": "2024-12-13T23:56:48Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/31133",
      "labels": [
        "P2P"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3489,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2682989515,
      "number": 31345,
      "title": "Add `sat_to_btc()` and conversely `btc_to_sat()` util functions in functional tests",
      "body": "### Motivation\r\n\r\nIn [functional tests](https://github.com/bitcoin/bitcoin/tree/master/test/functional), there are numerous instances of conversion code with patterns such as `/ COIN` and `* COIN` that are converting between units _satoshis_ to _BTC_. \r\n\r\nFollowing details are as of the latest commit on master 2638fdb4f934be96b7c798dbac38ea5ab8a6374a.\r\n\r\n### Patterns stats\r\n```terminal\r\n# satoshis to BTC conversion\r\n➜  bitcoin git:(2638fdb4f9) ✗ git grep -n \"/ COIN\" -- '*.py' | wc -l\r\n      22\r\n\r\n# BTC to satoshis conversion\r\n➜  bitcoin git:(2638fdb4f9) ✗ git grep -n \"* COIN\" -- '*.py' | wc -l\r\n     127\r\n```\r\n\r\n### Satoshis to BTC conversion instances\r\n<details>\r\n<summary>git grep -n \"/ COIN\" -- '*.py'</summary>\r\n\r\n```terminal\r\ntest/functional/feature_fee_estimation.py:128:        fee_rate=Decimal(feerate * 1000) / COIN,\r\ntest/functional/feature_fee_estimation.py:301:        high_feerate_kvb = Decimal(high_feerate) / COIN * 10 ** 3\r\ntest/functional/feature_rbf.py:211:            fee=(Decimal(fee) / COIN) * n,\r\ntest/functional/feature_rbf.py:220:            fee=(Decimal(fee) / COIN) * n + Decimal(\"0.1\"),\r\ntest/functional/feature_rbf.py:240:                fee=2 * (Decimal(fee) / COIN) * n,\r\ntest/functional/feature_rbf.py:356:                fee=Decimal(fee) / COIN,\r\ntest/functional/interface_usdt_mempool.py:172:        tx = self.wallet.send_self_transfer(from_node=node, fee=fee / COIN)\r\ntest/functional/interface_usdt_mempool.py:209:        tx = self.wallet.send_self_transfer(from_node=node, fee=fee / COIN)\r\ntest/functional/interface_usdt_mempool.py:258:            from_node=node, utxo_to_spend=utxo, fee=original_fee / COIN\r\ntest/functional/interface_usdt_mempool.py:265:            from_node=node, utxo_to_spend=utxo, fee=replacement_fee / COIN\r\ntest/functional/mempool_ephemeral_dust.py:39:        result[\"new_utxos\"][0][\"value\"] = Decimal(result[\"tx\"].vout[0].nValue) / COIN\r\ntest/functional/mempool_ephemeral_dust.py:48:        result[\"new_utxos\"].append({\"txid\": new_txid, \"vout\": len(result[\"tx\"].vout) - 1, \"value\": Decimal(output_value) / COIN, \"height\": 0, \"coinbase\": False, \"confirmations\": 0})\r\ntest/functional/mempool_package_rbf.py:166:        incremental_sats_required = Decimal(package_3_size) / COIN\r\ntest/functional/mining_prioritisetransaction.py:97:        fee_delta_b = Decimal(9999) / COIN\r\ntest/functional/mining_prioritisetransaction.py:98:        fee_delta_c_1 = Decimal(-1234) / COIN\r\ntest/functional/mining_prioritisetransaction.py:99:        fee_delta_c_2 = Decimal(8888) / COIN\r\ntest/functional/p2p_ibd_txrelay.py:31:MAX_FEE_FILTER = Decimal(9170997) / COIN\r\ntest/functional/p2p_ibd_txrelay.py:32:NORMAL_FEE_FILTER = Decimal(100) / COIN\r\ntest/functional/test_framework/messages.py:492:            % (self.nValue // COIN, self.nValue % COIN,\r\ntest/functional/test_framework/wallet.py:326:        fee = Decimal(inputs_value_total - outputs_value_total) / COIN\r\ntest/functional/test_framework/wallet.py:345:                value=Decimal(tx.vout[i].nValue) / COIN,\r\ntest/functional/wallet_import_rescan.py:280:            variant.initial_amount = get_rand_amount(min_amount=((500 * 20 / COIN) + AMOUNT_DUST))\r\n```\r\n</details>\r\n\r\n### BTC to Satoshis conversion instances\r\n<details>\r\n<summary>git grep -n \"* COIN\" -- '*.py'</summary>\r\n\r\n```\r\ntest/functional/feature_bip68_sequence.py:94:        value = int((utxo[\"value\"] - self.relayfee) * COIN)\r\ntest/functional/feature_bip68_sequence.py:115:        tx2.vout = [CTxOut(int(value - self.relayfee * COIN), SCRIPT_W0_SH_OP_TRUE)]\r\ntest/functional/feature_bip68_sequence.py:203:            tx.vout.append(CTxOut(int(value - self.relayfee * tx_size * COIN / 1000), SCRIPT_W0_SH_OP_TRUE))\r\ntest/functional/feature_bip68_sequence.py:233:        tx2.vout = [CTxOut(int(tx1.vout[0].nValue - self.relayfee * COIN), SCRIPT_W0_SH_OP_TRUE)]\r\ntest/functional/feature_bip68_sequence.py:253:            tx.vout = [CTxOut(int(orig_tx.vout[0].nValue - relayfee * COIN), SCRIPT_W0_SH_OP_TRUE)]\r\ntest/functional/feature_bip68_sequence.py:365:        tx2.vout = [CTxOut(int(tx1.vout[0].nValue - self.relayfee * COIN), SCRIPT_W0_SH_OP_TRUE)]\r\ntest/functional/feature_bip68_sequence.py:383:        tx3.vout = [CTxOut(int(tx2.vout[0].nValue - self.relayfee * COIN), SCRIPT_W0_SH_OP_TRUE)]\r\ntest/functional/feature_block.py:812:        tx = self.create_and_sign_transaction(out[17], 51 * COIN)\r\ntest/functional/feature_block.py:1162:        tx77 = self.create_and_sign_transaction(out[24], 10 * COIN)\r\ntest/functional/feature_block.py:1168:        tx78 = self.create_tx(tx77, 0, 9 * COIN)\r\ntest/functional/feature_block.py:1173:        tx79 = self.create_tx(tx78, 0, 8 * COIN)\r\ntest/functional/feature_coinstatsindex.py:155:            amount=21 * COIN,\r\ntest/functional/feature_coinstatsindex.py:164:        tx2.vout = [CTxOut(int(Decimal(tx2_val) * COIN), CScript([OP_RETURN] + [OP_FALSE] * 30))]\r\ntest/functional/feature_coinstatsindex.py:192:        cb.vout.append(CTxOut(5 * COIN, CScript([OP_FALSE])))\r\ntest/functional/feature_dbcrash.py:192:            input_amount = int(sum([utxo['value'] for utxo in utxos_to_spend]) * COIN)\r\ntest/functional/feature_fee_estimation.py:60:    tx.vout[0].nValue = int((total_in - amount - fee) * COIN)\r\ntest/functional/feature_fee_estimation.py:62:    tx.vout[1].nValue = int(amount * COIN)\r\ntest/functional/feature_rbf.py:116:        tx.vout[0].nValue -= int(0.1 * COIN)\r\ntest/functional/feature_rbf.py:131:        initial_nValue = 5 * COIN\r\ntest/functional/feature_rbf.py:137:        while remaining_value > 1 * COIN:\r\ntest/functional/feature_rbf.py:138:            remaining_value -= int(0.1 * COIN)\r\ntest/functional/feature_rbf.py:160:        dbl_tx.vout[0].nValue = int(0.1 * COIN)\r\ntest/functional/feature_rbf.py:171:        initial_nValue = 5 * COIN\r\ntest/functional/feature_rbf.py:174:        def branch(prevout, initial_value, max_txs, tree_width=5, fee=0.00001 * COIN, _total_txs=None):\r\ntest/functional/feature_rbf.py:202:        fee = int(0.00001 * COIN)\r\ntest/functional/feature_rbf.py:232:            fee = int(0.00001 * COIN)\r\ntest/functional/feature_rbf.py:250:        tx0_outpoint = self.make_utxo(self.nodes[0], int(1.1 * COIN))\r\ntest/functional/feature_rbf.py:273:        utxo1 = self.make_utxo(self.nodes[0], int(1.2 * COIN))\r\ntest/functional/feature_rbf.py:274:        utxo2 = self.make_utxo(self.nodes[0], 3 * COIN)\r\ntest/functional/feature_rbf.py:312:        confirmed_utxo = self.make_utxo(self.nodes[0], int(1.1 * COIN))\r\ntest/functional/feature_rbf.py:313:        unconfirmed_utxo = self.make_utxo(self.nodes[0], int(0.1 * COIN), confirmed=False)\r\ntest/functional/feature_rbf.py:325:            amount_per_output=1 * COIN,\r\ntest/functional/feature_rbf.py:337:        initial_nValue = 10 * COIN\r\ntest/functional/feature_rbf.py:339:        fee = int(0.0001 * COIN)\r\ntest/functional/feature_rbf.py:466:        tx0_outpoint = self.make_utxo(self.nodes[0], int(1.1 * COIN))\r\ntest/functional/feature_rbf.py:480:            amount_per_output=int(0.00001 * COIN),\r\ntest/functional/feature_rbf.py:487:        self.nodes[0].prioritisetransaction(txid=tx1a_txid, fee_delta=int(-0.1 * COIN))\r\ntest/functional/feature_rbf.py:495:        tx1_outpoint = self.make_utxo(self.nodes[0], int(1.1 * COIN))\r\ntest/functional/feature_rbf.py:516:        self.nodes[0].prioritisetransaction(txid=tx2b[\"txid\"], fee_delta=int(0.1 * COIN))\r\ntest/functional/feature_rbf.py:557:        confirmed_utxo = self.make_utxo(self.nodes[0], int(2 * COIN))\r\ntest/functional/feature_segwit.py:279:        tx.vout.append(CTxOut(int(49.99 * COIN), CScript([OP_TRUE, OP_DROP] * 15 + [OP_TRUE])))\r\ntest/functional/feature_segwit.py:295:        tx.vout.append(CTxOut(int(49.95 * COIN), CScript([OP_TRUE, OP_DROP] * 15 + [OP_TRUE])))  # Huge fee\r\ntest/functional/interface_rest.py:99:        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=int(0.1\r\n * COIN))[\"txid\"]\r\ntest/functional/interface_rest.py:176:        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=int(0.\r\n1 * COIN))[\"txid\"]\r\ntest/functional/interface_usdt_utxocache.py:195:                assert_equal(50 * COIN, event.value)\r\ntest/functional/interface_usdt_utxocache.py:301:                        \"value\": int(prevout_tx[\"vout\"][vin[\"vout\"]][\"value\"] * COIN),\r\ntest/functional/interface_usdt_utxocache.py:310:                        \"value\": int(vout[\"value\"] * COIN),\r\ntest/functional/mempool_accept.py:91:        tx.vout[0].nValue = int(0.3 * COIN)\r\ntest/functional/mempool_accept.py:92:        tx.vout[1].nValue = int(49 * COIN)\r\ntest/functional/mempool_accept.py:120:        tx.vout[0].nValue = int((Decimal('0.3') - fee) * COIN)\r\ntest/functional/mempool_accept.py:134:        tx.vout[0].nValue = int(output_amount * COIN)\r\ntest/functional/mempool_accept.py:156:        tx.vout[0].nValue -= int(fee * COIN)  # Double the fee\r\ntest/functional/mempool_accept.py:184:        tx.vout[0].nValue = int(0.1 * COIN)\r\ntest/functional/mempool_accept.py:202:        tx.vout[0].nValue = int(0.05 * COIN)\r\ntest/functional/mempool_accept_wtxid.py:59:        parent.vout.append(CTxOut(int(9.99998 * COIN), script_pubkey))\r\ntest/functional/mempool_accept_wtxid.py:76:        child_one.vout.append(CTxOut(int(9.99996 * COIN), child_script_pubkey))\r\ntest/functional/mempool_dust.py:53:            dust_threshold = int(get_fee(tx_size, dust_relay_fee) * COIN)\r\ntest/functional/mempool_limit.py:254:        cpfp_satoshis = int(cpfp_fee * COIN) + magic_satoshis\r\ntest/functional/mempool_limit.py:323:        child = self.wallet.create_self_transfer_multi(utxos_to_spend=parent_utxos, fee_per_output=int(cpfp_fee\r\n * COIN))\r\ntest/functional/mempool_limit.py:372:        node.prioritisetransaction(tx_rich[\"txid\"], 0, int(DEFAULT_FEE * COIN))\r\ntest/functional/mempool_package_rbf.py:65:            fee_per_output=int(child_fee * COIN // num_child_outputs),\r\ntest/functional/mempool_package_rbf.py:281:            fee_per_output=int(DEFAULT_CHILD_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:314:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:321:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:367:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:374:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:412:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:420:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:427:            fee_per_output=int(DEFAULT_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:491:            fee_per_output=int(DEFAULT_CHILD_FEE * COIN),\r\ntest/functional/mempool_package_rbf.py:579:            fee_per_output=int(DEFAULT_CHILD_FEE * COIN),\r\ntest/functional/mempool_persist.py:233:        self.nodes[0].prioritisetransaction(tx_node01_secret[\"txid\"], 0, 2 * COIN)\r\ntest/functional/mempool_persist.py:234:        self.nodes[1].prioritisetransaction(tx_node01_secret[\"txid\"], 0, 3 * COIN)\r\ntest/functional/mempool_truc.py:551:        fee_to_beat = max(int(tx_v3_child_2[\"fee\"] * COIN), int(tx_unrelated_replacee[\"fee\"]*COIN))\r\ntest/functional/mining_prioritisetransaction.py:48:        assert_equal(self.nodes[0].getprioritisedtransactions(), { tx_replacee[\"txid\"] : { \"fee_d\r\nelta\" : 100, \"in_mempool\" : True, \"modified_fee\": int(tx_replacee[\"fee\"] * COIN + 100)}})\r\ntest/functional/mining_prioritisetransaction.py:56:        assert_equal(self.nodes[0].getprioritisedtransactions(), { tx_replacee[\"txid\"] : { \"fee_d\r\nelta\" : COIN + 100, \"in_mempool\" : True, \"modified_fee\": int(tx_replacee[\"fee\"] * COIN + COIN + 100)}})\r\ntest/functional/mining_prioritisetransaction.py:100:        self.nodes[0].prioritisetransaction(txid=txid_b, fee_delta=int(fee_delta_b * COIN))\r\ntest/functional/mining_prioritisetransaction.py:101:        self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_1 * COIN))\r\ntest/functional/mining_prioritisetransaction.py:102:        self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_2 * COIN))\r\ntest/functional/mining_prioritisetransaction.py:114:        assert_equal(self.nodes[0].getprioritisedtransactions(), {txid_b: {\"fee_delta\" : fee_del\r\nta_b*COIN, \"in_mempool\" : True, \"modified_fee\": int(fee_delta_b*COIN + COIN * tx_o_b[\"fee\"])}, txid_c: {\"fee_delta\" : (fee_delta_c_1 + fee_delta_c_2\r\n)*COIN, \"in_mempool\" : True, \"modified_fee\": int((fee_delta_c_1 + fee_delta_c_2 ) * COIN + COIN * tx_o_c[\"fee\"])}})\r\ntest/functional/mining_prioritisetransaction.py:124:        self.nodes[0].prioritisetransaction(txid=txid_b, fee_delta=int(fee_delta_b * COIN))\r\ntest/functional/mining_prioritisetransaction.py:125:        self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_1 * COIN))\r\ntest/functional/mining_prioritisetransaction.py:126:        self.nodes[0].prioritisetransaction(txid=txid_c, fee_delta=int(fee_delta_c_2 * COIN))\r\ntest/functional/mining_prioritisetransaction.py:133:        assert_equal(self.nodes[0].getprioritisedtransactions(), {txid_b: {\"fee_delta\" : fee_del\r\nta_b*COIN, \"in_mempool\" : True, \"modified_fee\": int(fee_delta_b*COIN + COIN * tx_o_b[\"fee\"])}, txid_c: {\"fee_delta\" : (fee_delta_c_1 + fee_delta_c_2\r\n)*COIN, \"in_mempool\" : True, \"modified_fee\": int((fee_delta_c_1 + fee_delta_c_2 ) * COIN + COIN * tx_o_c[\"fee\"])}})\r\ntest/functional/p2p_filter.py:141:        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amou\r\nnt=1 * COIN)[\"txid\"]\r\ntest/functional/p2p_filter.py:142:        irr_result = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 *\r\nCOIN)\r\ntest/functional/p2p_filter.py:160:        self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN\r\n)\r\ntest/functional/p2p_filter.py:189:        self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=7 * COIN)\r\ntest/functional/p2p_filter.py:196:        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9\r\n * COIN)[\"txid\"]\r\ntest/functional/p2p_filter.py:203:            txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=7 * CO\r\nIN)[\"txid\"]\r\ntest/functional/p2p_invalid_block.py:72:        tx1 = create_tx_with_script(block1.vtx[0], 0, script_sig=bytes([OP_TRUE]), amount=50 * COIN)\r\ntest/functional/p2p_invalid_block.py:73:        tx2 = create_tx_with_script(tx1, 0, script_sig=bytes([OP_TRUE]), amount=50 * COIN)\r\ntest/functional/p2p_invalid_block.py:120:        tx3 = create_tx_with_script(tx2, 0, script_sig=bytes([OP_TRUE]), amount=50 * COIN)\r\ntest/functional/p2p_invalid_tx.py:95:        tx_withhold.vout = [CTxOut(nValue=25 * COIN - 12000, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)] * 2\r\ntest/functional/p2p_invalid_tx.py:101:        tx_orphan_1.vout = [CTxOut(nValue=8 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)] * 3\r\ntest/functional/p2p_invalid_tx.py:107:        tx_orphan_2_no_fee.vout.append(CTxOut(nValue=8 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:112:        tx_orphan_2_valid.vout.append(CTxOut(nValue=8 * COIN - 12000, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:118:        tx_orphan_2_invalid.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:154:            orphan_tx_pool[i].vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:162:        rejected_parent.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:174:        tx_withhold_until_block_A.vout = [CTxOut(nValue=12 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)] * 2\r\ntest/functional/p2p_invalid_tx.py:179:        tx_orphan_include_by_block_A.vout.append(CTxOut(nValue=12 * COIN - 12000, scriptPubKey=SCRIPT_PUB_KEY_\r\nOP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:199:        tx_withhold_until_block_B.vout.append(CTxOut(nValue=11 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE))\r\ntest/functional/p2p_invalid_tx.py:204:        tx_orphan_include_by_block_B.vout.append(CTxOut(nValue=10 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)\r\n)\r\ntest/functional/p2p_invalid_tx.py:209:        tx_orphan_conflict_by_block_B.vout.append(CTxOut(nValue=9 * COIN, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)\r\n)\r\ntest/functional/rpc_blockchain.py:679:        tx = create_tx_with_script(block.vtx[0], 0, script_sig=bytes([OP_TRUE]), amount=50 * COIN)\r\ntest/functional/rpc_createmultisig.py:159:        tx = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=spk, amount=int(value * COIN))\r\ntest/functional/rpc_packages.py:248:            fee_per_output=int(DEFAULT_FEE * 5 * COIN),\r\ntest/functional/rpc_rawtransaction.py:362:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_RETURN] + [OP_FALSE] * 30))]\r\ntest/functional/rpc_rawtransaction.py:369:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_FALSE] * 10001))]\r\ntest/functional/rpc_rawtransaction.py:376:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_INVALIDOPCODE]))]\r\ntest/functional/rpc_rawtransaction.py:383:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_RETURN] + [OP_FALSE] * 30))]\r\ntest/functional/rpc_rawtransaction.py:390:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_RETURN] + [OP_FALSE] * 30))]\r\ntest/functional/rpc_rawtransaction.py:397:        tx.vout = [CTxOut(int(Decimal(tx_val) * COIN), CScript([OP_RETURN] + [OP_FALSE] * 30))]\r\ntest/functional/rpc_scanblocks.py:34:        wallet.send_to(from_node=node, scriptPubKey=spk_1, amount=1 * COIN)\r\ntest/functional/rpc_scanblocks.py:41:                       amount=1 * COIN)\r\ntest/functional/rpc_signrawtransactionwithkey.py:53:        tx = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=script_pub_key, amount=in\r\nt(amount * COIN))\r\ntest/functional/test_framework/blocktools.py:137:    coinbaseoutput.nValue = nValue * COIN\r\ntest/functional/test_framework/messages.py:40:MAX_MONEY = 21000000 * COIN\r\ntest/functional/test_framework/messages.py:665:            if tout.nValue < 0 or tout.nValue > 21000000 * COIN:\r\ntest/functional/wallet_assumeutxo.py:122:                self.mini_wallet.send_to(from_node=n0, scriptPubKey=w_skp, amount=1 * COIN)\r\ntest/functional/wallet_assumeutxo.py:123:                self.mini_wallet.send_to(from_node=n0, scriptPubKey=w2_skp, amount=10 * COIN)\r\ntest/functional/wallet_basic.py:817:            assert_equal(this_unspent['ancestorfees'], ancestor_fees * COIN)\r\ntest/functional/wallet_fundrawtransaction.py:167:        tx.vout = [CTxOut(1 * COIN, bytearray(address_to_scriptpubkey(address)))] * 2\r\ntest/functional/wallet_fundrawtransaction.py:1304:        assert_equal(fundedtx['fee'] * COIN, tx_size * 10)\r\ntest/functional/wallet_fundrawtransaction.py:1312:        assert_equal(fundedtx['fee'] * COIN, tx_size * 10)\r\ntest/functional/wallet_listtransactions.py:198:        tx3_b.vout[0].nValue -= int(Decimal(\"0.004\") * COIN)  # bump the fee\r\n```\r\n</details>\r\n\r\n### Possible solution\r\n\r\nA possible solution that has garnered some support is to add utility functions in the functional tests such as `sat_to_btc()` and conversely `btc_to_sat()` that can get rid of this repetitive inline conversion and make the testing code more readable.\r\n\r\nPrior discussion: https://github.com/bitcoin/bitcoin/pull/30079#discussion_r1602965411\r\n\r\n### Useful Skills\r\n\r\n* Compiling Bitcoin Core from source\r\n* Running the C++ unit tests and the Python functional tests\r\n* Basic Python skills\r\n\r\n\r\n### Guidance for new contributors\r\n\r\nWant to work on this issue?\r\n\r\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\r\n",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2024-11-22T12:01:22Z",
      "updated_at": "2025-12-13T12:28:29Z",
      "closed_at": "2024-12-13T12:30:56Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/31345",
      "labels": [
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 2541346377,
          "user": "rkrux",
          "body": "I don't see a consensus forming on this issue in its current form, and hence am closing it.",
          "created_at": "2024-12-13T12:30:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 91,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 20118,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1423631521,
      "number": 26391,
      "title": "Stuck in Endless Pre-Syncing Headers Loop",
      "body": "**Expected behavior**\r\nPre-Sync Headers Like Normal.\r\n\r\n**Actual behavior**\r\n```\r\n2022-10-26T07:34:14Z Pre-synchronizing blockheaders, height: 748853 (~98.55%)\r\n2022-10-26T07:34:16Z Pre-synchronizing blockheaders, height: 226853 (~31.00%)\r\n```\r\n\r\nUnaffected by restating program.\r\n\r\n```\r\n2022-10-26T07:34:14Z Pre-synchronizing blockheaders, height: 748853 (~98.55%)\r\n2022-10-26T07:34:16Z Pre-synchronizing blockheaders, height: 226853 (~31.00%)\r\n```\r\n\r\n**To reproduce**\r\n\r\nI think that this is a one-off sort of error:\r\n\r\nHere is a backup of my .bitcoin folder.\r\nhttps://drive.proton.me/urls/V04QAGG998#GlCnfHpkWW7F\r\n\r\n~The files before `blk00047.dat` and `rev00047.dat` are omitted, and need to be copied in from another source.~\r\nAs sipa says, the blk files are not deterministic.  - Will upload the full .bitcoin folder so people can reproduce...\r\n\r\nHere is the 4.6gb full backup of my .bitcoin folder:\r\nhttps://drive.proton.me/urls/JA11NDEA14#GeG83qrpmvtt\r\n\r\n**System information**\r\n\r\nFedora 37 Silverblue Running in Toolbox.\r\n\r\nBitcoin Core: 28cf75697186ea8e473e120a643994bdf8237d6c\r\n\r\n",
      "state": "closed",
      "user": "da2ce7",
      "created_at": "2022-10-26T08:26:31Z",
      "updated_at": "2025-12-12T13:46:15Z",
      "closed_at": "2025-12-09T16:28:00Z",
      "comments": 28,
      "url": "https://github.com/bitcoin/bitcoin/issues/26391",
      "labels": [
        "Feature",
        "Brainstorming",
        "P2P"
      ],
      "comment_data": [
        {
          "id": 1291765534,
          "user": "maflcko",
          "body": "Steps to reproduce (with a diff to force corruption):\n\n\n```diff\ndiff --git a/src/validation.cpp b/src/validation.cpp\nindex 37e68cfe4a..811ff2f9eb 100644\n--- a/src/validation.cpp\n+++ b/src/validation.cpp\n@@ -2201,7 +2201,7 @@ bool Chainstate::ConnectBlock(const CBlock& block, BlockValidationState& state,\n         {\n             CAmount txfee = 0;\n             TxValidationState tx_state;\n-            if (!Consensus::CheckTxInputs(tx, tx_state, view, pindex->nHeight, txfee)) {\n+            if (Consensus::CheckTxInputs(tx, tx_state, view, pindex->nHeight, txfee)) {\n                 // Any transaction validation failure in ConnectBlock is a block consensus failure\n                 state.Invalid(BlockValidationResult::BLOCK_CONSENSUS,\n                             tx_state.GetRejectReason(), tx_state.GetDebugMessage());\n```\n\nthen call `./src/qt/bitcoin-qt -datadir=/tmp -signet -printtoconsole=1`  \n\nor even with a reduced min chain work, to speed up the retry-loop:\n\n`./bld-cmake/bin/bitcoin-qt -datadir=/tmp -signet -printtoconsole=1 -minimumchainwork=11c4ff1d99 -debug=validation`",
          "created_at": "2022-10-26T09:35:47Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 1088,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2541679190,
          "user": "jstefanop",
          "body": "FYI we are seeing this across a large number of our Nodes (FutureBit Apollos we have 10's of thousands of nodes from our users on the network). \r\n\r\nRe-index usually fixes, but there should be a way for core to detect this corruption and self fix/reindex from the point of corruption. Being stuck in an endless pre-sync loop is not great (or at least shutdown the node with an error?)",
          "created_at": "2024-12-13T15:17:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 383,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2545808616,
          "user": "maflcko",
          "body": "> detect this corruption and self fix/reindex from the point of corruption.\r\n\r\nI am not sure this will be an improvement, because:\r\n\r\n* It will turn an endless per-sync loop into an endless reindex loop (at least for some).\r\n* If there is an issue with the hardware, it would be better to diagnose and fix it, instead of continuing. Otherwise the issue will possibly be silently ignored and re-appear in the future.\r\n\r\nMy recommendation would be to check which configs of your hardware run into this problem and then try to determine and fix the root cause.",
          "created_at": "2024-12-16T14:41:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 557,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2585720873,
          "user": "eshutov",
          "body": "I have faced with the same issue:\r\n```\r\n2025-01-12T12:01:56Z Pre-synchronizing blockheaders, height: 852216 (~97.02%)\r\n2025-01-12T12:02:00Z Pre-synchronizing blockheaders, height: 854216 (~97.23%)\r\n2025-01-12T12:02:02Z Pre-synchronizing blockheaders, height: 856216 (~97.47%)\r\n2025-01-12T12:02:29Z Pre-synchronizing blockheaders, height: 712215 (~81.31%)\r\n2025-01-12T12:02:33Z Pre-synchronizing blockheaders, height: 714215 (~81.52%)\r\n2025-01-12T12:02:37Z Pre-synchronizing blockheaders, height: 716215 (~81.75%)\r\n```\r\nPre-synchronizing repeats in infinity loop and consumes network bandwidth.\r\nI confirm this happened for me due to hardware issue with my PC (GPU extra power cord wasn't connected originally and this caused kernel backtraces in dmesg).\r\nAs was mentioned above i tried to do -reindex. But this didn't help. Still see the messages like above.\r\nPossibly the best option for those who ran into this is entire blockchain redownloading.\r\n\r\nversion: v28.0.0",
          "created_at": "2025-01-12T12:47:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 968,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2654838081,
          "user": "mzumsande",
          "body": "> A question is whether we could detect this during the pre-sync phase instead, which wouldn't stop the lack of progress, but would avoid the bandwidth waste on repeated presyncs with everyone. The answer is yes - it wouldn't be hard to check for known-invalid headers in the presync phase as well, however, I don't think we want to do that because of fingerprinting reasons: it would permit an attacker to feed you an invalid, low-PoW, block during IBD, and then later follow you around the network by claiming to have a chain that extends this invalid block. If you stop fetching immediately, they know you're the same node as the one they gave the invalid block to earlier.\n\nI don't think that fingerprinting is a concern here. An attacker cannot feed us an invalid, low-PoW block during IBD to fingerprint us - if they could get us to accept such a header to our block tree db somehow, that would mean that the Anti-DoS headers-sync algorithm would have failed, and we'd probably have way bigger problems than fingerprinting.\n\nSo I don't think there is a conceptual problem with detecting this in the pre-sync phase.\n\nBut the point remains that this is just a symptom of the underlying corruption - we'd still endlessly cycle through peers that we would now disconnect immediately for sending us an \"invalid\" header, so I'm not sure how that would actually be more helpful for users?",
          "created_at": "2025-02-12T21:03:03Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 1387,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2654843751,
          "user": "sipa",
          "body": "@mzumsande Agreed, reading back what I wrote, I don't see why I thought fingerprinting would be an issue.\n\nI think the most useful course of actual here is detecting the presence of a high-PoW header-invalid chain, and reporting it to the user as a sign of likely corruption. Unsure what that would mean for anything other than the GUI, though.",
          "created_at": "2025-02-12T21:06:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 344,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2654943412,
          "user": "mzumsande",
          "body": "> I think the most useful course of actual here is detecting the presence of a high-PoW header-invalid chain, and reporting it to the user as a sign of likely corruption. Unsure what that would mean for anything other than the GUI, though.\n\nWe actually have this kind of check (`CheckForkWarningConditions`) but have it disabled during IBD for no good reason I can see (at least after #19905). I'll work on a PR suggesting to use this check in the pre-sync header loop situation (and also rework it, e.g. I don't think it needs to be called in `ActivateBestChainStep()`).",
          "created_at": "2025-02-12T22:04:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 571,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3371418908,
          "user": "jblachly",
          "body": "Still happening in 29.1\n\n```\n2025-10-06T12:27:14Z Pre-synchronizing blockheaders, height: 846996 (~92.38%)\n2025-10-06T12:27:15Z Pre-synchronizing blockheaders, height: 852996 (~93.04%)\n2025-10-06T12:27:15Z Pre-synchronizing blockheaders, height: 856996 (~93.46%)\n2025-10-06T12:27:15Z Pre-synchronizing blockheaders, height: 860996 (~93.89%)\n2025-10-06T12:27:15Z Pre-synchronizing blockheaders, height: 866996 (~94.54%)\n2025-10-06T12:27:16Z Pre-synchronizing blockheaders, height: 874996 (~95.38%)\n2025-10-06T12:27:16Z Pre-synchronizing blockheaders, height: 880996 (~96.04%)\n2025-10-06T12:27:18Z Pre-synchronizing blockheaders, height: 368995 (~40.84%)\n2025-10-06T12:27:22Z Pre-synchronizing blockheaders, height: 370995 (~41.06%)\n2025-10-06T12:27:26Z Pre-synchronizing blockheaders, height: 372995 (~41.28%)\n2025-10-06T12:27:26Z Pre-synchronizing blockheaders, height: 374995 (~41.50%)\n2025-10-06T12:27:28Z Pre-synchronizing blockheaders, height: 376995 (~41.71%)\n2025-10-06T12:27:32Z Pre-synchronizing blockheaders, height: 378995 (~41.94%)\n```\n\nThe reported approximate percentage at which it \"resets\" is typically +/- a couple of percent of 96.04%, and occasionally is the exact same value (96.04%), but has been as lo was 91%.\n\n",
          "created_at": "2025-10-06T12:34:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1233,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3374369293,
          "user": "mzumsande",
          "body": "> I'll work on a PR suggesting to use this check in the pre-sync header loop situation\n\nForgot about this completely, but opened #33553 now to improve the logging (we'll still circle through peers trying to get headers that we don't view as invalid, but will now repeatedly log warning suggesting to reindex if the problem persists)",
          "created_at": "2025-10-06T21:52:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 332,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3634191830,
          "user": "da2ce7",
          "body": "@glozow thank you for your work towards resolution of this issue; however the software still gets stuck in an endless loop. :(  - Just with better logging :)\n\nI do not think that this issue should be closed (as completed) until the client has some sort of resolution; (for example triggering a full recheck of the data and fixing the corruption; or aborting and throwing a fatal error)...",
          "created_at": "2025-12-09T20:39:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 388,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3634297696,
          "user": "mzumsande",
          "body": "I'm not sure if there really is a better solution - there is a judgement call involved by the node operator on whether there is local corruption, or whether the peers are out of consensus and we are correct in viewing the block as invalid (e.g. in case of a catastrophic consensus split). I don't think we would want to automate making that call. We wouldn't want to reindex or shut down automatically, because this could be turned into an (expensive) attack by miners, who could deliberately create an invalid block with valid PoW.\n\nStrictly speaking there is no endless loop. We connect to one peer, sync headers until we get to the invalid block, and then disconnect and search for another peer to download headers from, and so on. The loop is only \"endless\" if all peers in the network have a different view on consensus than we have, and we have no way of knowing for sure if this is the case.",
          "created_at": "2025-12-09T21:10:48Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 898,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3634433495,
          "user": "roqqit",
          "body": "This is very fragile on testnets that fork a lot. For example on dogecoin (ya not bitcoin but hey its a software fork), there were a lot of testnet forks for whatever reason and presyncing spun in an endless loop (I let it run for over 24 hours). I found a way around this by setting minimumchainwork=0. This \"fix\" works but also signals that presyncing is broken.\n\nI do not have a clear path forward but it does appear that presyncing is too aggressive and should instead work on a best-effort basis. As a user my expectation would be for headers to start processing after a few hours even if presyncing failed. That way, I could at least take action and start invalidating blocks or whatever. But when presyncing gets stuck there is nothing obvious to do since I am stuck at genesis.",
          "created_at": "2025-12-09T21:51:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 785,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3634788731,
          "user": "sipa",
          "body": "@roqqit That sounds like an unrelated issue, which may be specific to your fork. This issue is about the node not detecting that its database is corrupted, and thus incorrectly rejecting the valid chain when it is offered.",
          "created_at": "2025-12-10T00:04:04Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 222,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3646548064,
          "user": "hodlinator",
          "body": "Agree with https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-3634191830 that only adding warnings feels unsatisfying. My initial suggestion was also to halt the node. But I now also agree with https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-3634297696, we cannot make a definite classification between corruption and consensus forks.\n\nThe original issue at the top here had a log where the node was still syncing ancestor blocks to assumevalid. Within the same run: outputs were (or should have been) added to the chainstate DB in one block and then validation of a later block failed to find them when searching for inputs (my digging into the data: https://github.com/bitcoin/bitcoin/pull/33553#issuecomment-3406488480, was still suggesting more drastic measures there). I think this kind of IBD case might merit at least more certain language:\n\n<details><summary>Diff changing warning if block is an ancestor to assumevalid:\n\n    block %s was previously marked invalid (received from peer=%i).\n    It's an ancestor to the assume valid block though! Unless we are running with\n    a malicious -assumevalid setting or are experiencing a very unlikely fork in\n    consensus, this strongly indicates database corruption (that -reindex may fix).\n</summary>\n\n```diff\n--- a/src/net_processing.cpp\n+++ b/src/net_processing.cpp\n@@ -2957,10 +2957,25 @@ void PeerManagerImpl::ProcessHeadersMessage(CNode& pfrom, Peer& peer,\n         if (state.IsInvalid()) {\n             if (!pfrom.IsInboundConn() && state.GetResult() == BlockValidationResult::BLOCK_CACHED_INVALID) {\n                 // Warn user if outgoing peers send us headers of blocks that we previously marked as invalid.\n-                LogWarning(\"%s (received from peer=%i). \"\n-                           \"If this happens with all peers, consider database corruption (that -reindex may fix) \"\n-                           \"or a potential consensus incompatibility.\",\n-                           state.GetDebugMessage(), pfrom.GetId());\n+                bool assume_valid_ancestor{false};\n+                if (!m_chainman.AssumedValidBlock().IsNull()) {\n+                    LOCK(cs_main);\n+                    node::BlockMap::const_iterator it{m_chainman.m_blockman.m_block_index.find(m_chainman.AssumedValidBlock())};\n+                    assume_valid_ancestor = it != m_chainman.m_blockman.m_block_index.end() &&\n+                                            it->second.GetAncestor(pindexLast->nHeight) == pindexLast;\n+                }\n+                if (assume_valid_ancestor) {\n+                    LogWarning(\"%s (received from peer=%i). \"\n+                               \"It's an ancestor to the assume valid block though! Unless we are running with \"\n+                               \"a malicious -assumevalid setting or are experiencing a very unlikely fork in \"\n+                               \"consensus, this strongly indicates database corruption (that -reindex may fix).\",\n+                               state.GetDebugMessage(), pfrom.GetId());\n+                } else {\n+                    LogWarning(\"%s (received from peer=%i). \"\n+                               \"If this happens with all peers, consider database corruption (that -reindex may fix) \"\n+                               \"or a potential consensus incompatibility.\",\n+                               state.GetDebugMessage(), pfrom.GetId());\n+                }\n             }\n             MaybePunishNodeForBlock(pfrom.GetId(), state, via_compact_block, \"invalid header received\");\n             return;\n```\n\n</details>\n\nSince we only do this for outbound connections thanks to https://github.com/bitcoin/bitcoin/pull/33553#discussion_r2413568289, the ancestor lookup shouldn't be too much of a DoS vector.\n\nWould there be any interest in such a follow-up?",
          "created_at": "2025-12-12T13:46:15Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 3810,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1133,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3723031325,
      "number": 34056,
      "title": "Wallet RPC semantics: gettransaction.confirmations returns large negative values for RBF-replaced transactions (undocumented behavior)",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen using Replace-By-Fee (RBF) in combination with wallet rescans, the wallet RPC reports transactions with negative confirmation counts (e.g. -900, -1200), long after the replacing transaction has been confirmed.\n\nThese negative confirmation values persist even when:\n- the replacement transaction is deeply confirmed\n- the original transaction is fully conflicted and no longer in the mempool\n- wallet balances and UTXO sets are otherwise correct\n\nThe negative value appears to encode “distance since replacement” rather than an actual confirmation count.\n\n\n### Expected behaviour\n\nOnce a transaction has been replaced via RBF and the replacement transaction is confirmed, the original transaction should report a stable and documented state.\n\nSpecifically:\n- `confirmations` should not become increasingly negative over time\n- confirmation values should have a clear and documented semantic meaning\n- wallet RPC consumers should not need to infer hidden meanings from confirmation numbers\n\n\n### Steps to reproduce\n\n1. Create a wallet on regtest\n2. Send a transaction with BIP125 replaceable flag enabled\n3. Trigger a wallet rescan\n4. Perform a bumpfee (RBF replacement)\n5. Mine blocks to deeply confirm the replacement transaction\n6. Query `gettransaction` for the original transaction\n\nObservation:\nThe original transaction reports large negative confirmation counts (e.g. -900, -1200), even though the replacement transaction is confirmed.\n\n\n- regtest mode\n- default wallet settings\n- descriptor wallet\n- RBF enabled\n- wallet rescan invoked via RPC\n\n\n### Relevant log output\n\nSee attached JSON excerpts showing:\n- negative confirmation values\n- walletconflicts\n- replaced_by_txid relationships\n\nThe following excerpts show a replaced RBF transaction reporting large negative\nconfirmation counts long after its replacement has been deeply confirmed.\nThere is no chain reorg and wallet balances are correct.\n\nThe negative confirmation value continues to decrease as new blocks are mined,\neven though the replacing transaction is already confirmed.\n\nThis raises a question about RPC semantics: is `confirmations` for replaced\ntransactions intended to represent a negative distance to the replacing\ntransaction’s confirmation height, and if so, where is this behavior documented?\n\n\n[gettransaction.json](https://github.com/user-attachments/files/24125876/gettransaction.json)\n[gettransaction-replace.txt](https://github.com/user-attachments/files/24125875/gettransaction-replace.txt)\n[getbalance.txt](https://github.com/user-attachments/files/24125874/getbalance.txt)\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv27.0\n\n### Operating system and version\n\nUbuntu 22.04 LTS\n\n### Machine specifications\n\nx86_64 system, local regtest environment, SSD storage\n",
      "state": "closed",
      "user": "husstege-e",
      "created_at": "2025-12-12T11:12:57Z",
      "updated_at": "2025-12-12T11:54:56Z",
      "closed_at": "2025-12-12T11:54:46Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34056",
      "labels": [
        "Docs",
        "Wallet",
        "RPC/REST/ZMQ",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3646182093,
          "user": "maflcko",
          "body": "> undocumented\n\nTo get the documentation, you can use the `help` RPC. It will explain and document the output. E.g.\n\n```\n  \"confirmations\" : n,              (numeric) The number of confirmations for the transaction. Negative confirmations means the\n                                    transaction conflicted that many blocks ago.",
          "created_at": "2025-12-12T11:54:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 329,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3063,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3722838132,
      "number": 34055,
      "title": "Showing error:- Error unlocking wallet: some keys decrypt but not all. Your wallet file may be corrupt.",
      "body": "When i am trying to transfer funds from my bitcoin core wallet it is showing a error which says:- Error unlocking wallet: some keys decrypt but not all. Your wallet file may be corrupt.\nIt is also showing the same error in console of bitcoin core app after entering passphrase when i tried to dumpwallet\n\n![Image](https://github.com/user-attachments/assets/e2141d24-15f9-45a4-b315-eab1e14c8eb3)\n\n![Image](https://github.com/user-attachments/assets/6feae494-3bbd-4484-8bf4-1d125c36d85f)\n\n1. Does it means mine wallet.dat is corrupt?\n2. Password is wrong ?\n3. bitcoin core is not synced fully ?\n\nPlease Help me",
      "state": "closed",
      "user": "Manishdudi700",
      "created_at": "2025-12-12T10:12:23Z",
      "updated_at": "2025-12-12T10:41:30Z",
      "closed_at": "2025-12-12T10:41:30Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34055",
      "labels": [
        "Wallet",
        "Data corruption",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3645935489,
          "user": "maflcko",
          "body": "> 1. Does it means mine wallet.dat is corrupt?\n> \n>     2. Password is wrong ?\n> \n>     3. bitcoin core is not synced fully ?\n> \n> \n> Please Help me\n\n\n\nWhen it says \"Error unlocking wallet: some keys decrypt but not all. Your wallet file may be corrupt.\", then it means \"Error unlocking wallet: some keys decrypt but not all. Your wallet file may be corrupt.\".\n\nYou can continue at your own risk, but my recommendation would be to backup your wallet.dat, and also restore an old backup and double check if everything is correct.\n\n",
          "created_at": "2025-12-12T10:40:59Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 530,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3645936203,
          "user": "maflcko",
          "body": "Usually the issue tracker is used to track technical issues related to the Bitcoin Core code base.\n\nGeneral bitcoin questions and/or support requests are best directed to the [Bitcoin StackExchange](https://bitcoin.stackexchange.com) or the `#bitcoin` IRC channel on Libera Chat, or one of the Bitcoin subreddits, or any other place that you feel is well suited.\n\n ",
          "created_at": "2025-12-12T10:41:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 365,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 712,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3699555810,
      "number": 34019,
      "title": "RFC: randomize over netgroups in outbound peer selection",
      "body": "The current mechanism for choosing outbound peers picks one at randoms among known-reachable addresses, with the caveat that we do not connect twice to the same netgroup (by default /16's and, if an ASmap is configured, by AS's). A more robust mechanism for preventing an attacker to control all of a node's outbound connections would first randomize over netgroups and then pick a known-reachable address within that netgroup.\n\nThis alternative mechanism would make the probability for an attacker to control all of a node's outbound connections exponentially decreasing in the number of connections, roughly $(\\frac{k}{n})^c$ with $k$ the number of netgroups controlled by the attacker, $n$ the total number of netgroups available to be chosen from, and $c$ the number of outbound connections made. There is today in the order of 5k different /16's to choose from in the network[^0]. If we were to use this method, even an adversary that introduced 1k new ones with exclusively their nodes (which would be absurdly expensive) would not be able to control all of a node's outbound peers with any relevant probability.\n\nBy contrast, the current mechanism will allow an adversary with enough node IPs to control all outbound connections of a node with a realistic probability, as long as those IPs are spread across at least as many netgroups as we make outbound connections by default. This is not merely a theoretical concern. This summer i investigated[^1] an entity that spun up hundreds of reachable nodes on the network. They have since scaled up to 3000 nodes, spread across 8 /16's boundaries (and 3 or 4 AS's). As a result, a freshly started clearnet nodes nowadays will make 3 to 5 of their outbound connections on average to this single entity, which is not even actively attacking (for instance by more aggressively sharing their own node addresses and/or not relaying other reachable nodes'). More discussions regarding this entity are available [here](https://bnoc.xyz/t/increase-in-the-number-of-reachable-ipv4-nodes-bitprojects-io) and [here](https://bnoc.xyz/t/many-connections-to-bitproject-io-nodes).\n\nOf course, switching to this mechanism for choosing outbound peers would have consequences on the network graph. Because we currently sample over all known node addresses, we will be biased towards netgroups that contain a lot of nodes (such as hosting providers). First sampling by netgroup would remove this bias, and make it significantly more likely to connect to more \"obscure\" netgroups. This could cause a resource allocation issue on the network, with the inbound connection slots of netgroups with a lesser amount of nodes getting overused (and maxed out) while tons of inbound connection slots in netgroups with a higher amount of nodes sit unused. Interestingly, this is a similar concern to that of switching to ASmap by default shared by @virtu [here](https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-1917362538).\n\nNaturally a middle of the road solution could be to use the alternative mechanism for half of our connections ($c = 5$ in the formula above is more than enough) to get the local eclipse resistance benefits while minimizing the risk of global network disruption. An alternative would be to fully move to sampling by netgroups, but not uniformly. The draw could be biased toward those with more available resources.\n\nA related discussion is how we want a node to behave when its inbound connection slots are full (see https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-3609099274).\n\nA related question is whether we want to keep the \"never connect to more than one netgroup\" rule if we adopt the alternative mechanism. Without the rule but with the new mechanism, could it be the case that if all connection slots in \"small\" netgroups, a large fraction of the network eventually converge towards the larger netgroups? Possibly making several connections to the same netgroups? That seems unlikely. On the other hand if it happens it would organically spread resource usage (though not with a distribution we are happy with).\n\nThis topic was discussed during yesterday's IRC meeting (which this issue is following up on). Logs available [here](https://www.erisian.com.au/bitcoin-core-dev/log-2025-12-04.html#l-469).\n\n[^0]: A conservative estimate from querying the /16's present in the tried table of a number of long-running nodes, and comparing what a number of sources (1, 2, 3) claim are the number of reachable ipv4 nodes.  The command ran to gather the number of /16's in a node's addrman is the following: `bitcoin-cli getrawaddrman |jq -r '.tried[].address | select(test(\"^[0-9]{1,3}(\\\\.[0-9]{1,3}){3}$\")) | (split(\".\")[0:2] | join(\".\"))' |uniq |wc -l`.\n[^1]: See this [blog post](https://antoinep.com/posts/misbehaving_nodes/). The investigation started because the nodes were misconfigured, and i ended up being in contact with the person running those. It appears the person is purposefully trying to optimize for the highest possible number of node addresses announced, in particular by having advertising several IPs per node.",
      "state": "open",
      "user": "darosior",
      "created_at": "2025-12-05T16:19:39Z",
      "updated_at": "2025-12-12T01:01:36Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34019",
      "labels": [
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3617990387,
          "user": "ajtowns",
          "body": "I seem to have 7204 ipv4 nodes in my tried table with a timestamp more recent than 90 days ago, split across 3509 /16s. There are 6 /16s with between 100 and 200 tried entries, and another 23 /16s with more than 20 tried entries. At the other end of the scale, there are 2578 /16s with only one node in my tried table, 561 with two nodes, 172 with three, 58 with four, 28 with 5 and 26 with 6.\n\nThe network is able to accept 115 inbound connections per node by default (max connections = 125, minus 10 outbounds), so if I tak e my tried table as comprehensive (not really a sensible assumption), cumulatively that's:\n\n * 2578 /16s with 1 nodes: 29,647 nodes worth of inbound connections\n * +561 /16s with 2 nodes: 42,550 nodes worth of inbound connections\n * +172 /16s with 3 nodes: 48,484 nodes worth of inbound connections\n * +58 /16s with 4 nodes: 51,152 nodes worth of inbound connections\n * +28 /16s with 5 nodes: 52,762 nodes worth of inbound connections\n * +26 /16s with 6 nodes: 54,556 nodes worth of inbound connections\n * +13 /16s with 7 nodes: 55,602 nodes worth of inbound connections\n * +12 /16s with 8 nodes: 56,706 nodes worth of inbound connections\n * +8 /16s with 9 nodes: 57,534 nodes worth of inbound connections\n * +4 /16s with 10 nodes: 57,994 nodes worth of inbound connections\n * +5 /16s with 11 nodes: 58,627 nodes worth of inbound connections\n * +2 /16s with 12 nodes: 58,903 nodes worth of inbound connections\n * +3 /16s with 13 nodes: 59,351 nodes worth of inbound connections\n * +5 /16s with 14 nodes: 60,156 nodes worth of inbound connections \n * +2 /16s with 15 nodes: 60,501 nodes worth of inbound connections\n * everything: 82,846 nodes worth of inbound connections\n\n(the calculation here is just `G` /16s with N nodes each gives `G*N*115` inbound slots, and thus copes `with G*N*11.5` nodes' worth of inbound connections, since each node makes 10 outbound connections)\n\nTrying a sim with a 50/50 split and 60k total nodes seems to suggest the single-node /16s would all fill up their slots; but a 30/70 split looks like the single-node /16s would average out to 108.3/115 inbounds, which might be manageable.",
          "created_at": "2025-12-05T18:14:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2141,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 5163,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3721401484,
      "number": 34052,
      "title": "Bitcoin to send field is nearly invisible",
      "body": "### Issues, reports or feature requests related to the GUI should be opened directly on the GUI repo\n\n- [x] I still think this issue should be opened here\n\n### Report\n\nBitcoin to send field is nearly invisible, it works, but the up and down arrows completely obfuscate the text area.",
      "state": "closed",
      "user": "memeticae",
      "created_at": "2025-12-12T00:11:38Z",
      "updated_at": "2025-12-12T00:22:14Z",
      "closed_at": "2025-12-12T00:20:07Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34052",
      "labels": [
        "GUI"
      ],
      "comment_data": [
        {
          "id": 3644359946,
          "user": "pinheadmz",
          "body": "See https://github.com/bitcoin-core/gui/issues/906",
          "created_at": "2025-12-12T00:21:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3644362867,
          "user": "pinheadmz",
          "body": "Or otherwise search open issues in https://github.com/bitcoin-core/gui/issues before opening a new issue",
          "created_at": "2025-12-12T00:22:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 104,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 325,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3638547789,
      "number": 33901,
      "title": "29.x depends: fallback server missing capnp downloads",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/19464722758/job/55696959090#step:9:2030:\n```bash\nFetching capnproto-c++-1.2.0.tar.gz from https://capnproto.org/\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0    15    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 500\nWarning: Problem : HTTP error. Will retry in 1 seconds. 3 retries left.\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0    15    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 500\nWarning: Problem : HTTP error. Will retry in 2 seconds. 2 retries left.\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0    15    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 500\nWarning: Problem : HTTP error. Will retry in 4 seconds. 1 retries left.\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0    15    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 500\nFetching capnproto-c++-1.2.0.tar.gz from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n  0   146    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 404\nmake: *** [funcs.mk:304: /home/admin/actions-runner/_work/_temp/depends/sources/download-stamps/.stamp_fetched-native_capnp-capnproto-cxx-1.2.0.tar.gz.hash] Error 22\nmake: Leaving directory '/home/admin/actions-runner/_work/_temp/depends'\nError: Process completed with exit code 2.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-18T14:44:04Z",
      "updated_at": "2025-12-11T19:10:42Z",
      "closed_at": "2025-12-11T19:10:42Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33901",
      "labels": [],
      "comment_data": [
        {
          "id": 3549276978,
          "user": "achow101",
          "body": "Backport #33580?\n\nWe can also upload the tarball.",
          "created_at": "2025-11-18T19:35:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 49,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3643393113,
          "user": "fanquake",
          "body": "This is now fixed.",
          "created_at": "2025-12-11T19:10:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 18,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2311,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3705493801,
      "number": 34030,
      "title": "consider adding a new `interface RawTxFeed` on Mining IPC",
      "body": "Sv2 Job Declarator Server (a.k.a. JDS) needs to keep an in-memory representation of the mempool so it can validate the custom jobs it receives via `DeclareMiningJob` message\n\ncurrently, SRI JDS polls some RPCs against Bitcoin Core, but polling is rather suboptimal\n\non https://github.com/stratum-mining/sv2-apps/issues/26 we considered switching to an approach where we subscribe for the `rawtx` ZMQ feed... JDS would have some task that's solely dedicated to consuming this feed\n\nhowever, [I hear ZMQ is not super reliable](https://github.com/stratum-mining/sv2-apps/issues/26#issuecomment-3621881167) and this might be a good opportunity to leverage IPC, so I'm creating this issue to brainstorm with @ryanofsky @Sjors @ismaelsadeeq whether this would make sense\n\nin order to provide something similar to a `rawtx` ZMQ feed, I can imagine the following:\n- new `createRawTxFeed` method under `interface Mining`, returning a `RawTxFeed` as a result\n- new `interface RawTxFeed` with a `waitNext` method\n\n(although I probably have blindspots and core devs might be able to imagine better approaches)\n\n`getTransactionsByWitnessId` (to be potentially introduced via https://github.com/bitcoin/bitcoin/pull/34020) would be  useful as a secondary mechanism to be leveraged if JDS receives a `DeclareMiningJob` contains some `wtxid` that hasn't arrived on the feed yet, which could happen for two different potential reasons:\n- this specific `wtxid` is on the back of the queue while the chained calls to `RawTxFeed.waitNext` didn't fully catch up yet, in which case `getTransactionsByWitnessId` will accelerate the process\n- Bitcoin Core simply hasn't seen this tx yet, in which case `getTransactionsByWitnessId` will return an error and JDS has no option but to send `ProvideMissingTransactions` to JDC",
      "state": "closed",
      "user": "plebhash",
      "created_at": "2025-12-08T09:31:59Z",
      "updated_at": "2025-12-11T18:57:12Z",
      "closed_at": "2025-12-11T15:54:18Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/34030",
      "labels": [
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3626035899,
          "user": "Sjors",
          "body": "> JDS polls some RPCs against Bitcoin Core\n\nCan you enumerate which RPC calls you're polling? And briefly explain why.\n\nFor streaming changes to the mempool, we'd probably want to introduce a whole new `Mempool` interface, since there are other use cases (wallets, lightning nodes, block explorers). And such an interface might as well have methods to submit new transaction (packages).\n\nWe haven't used IPC for ZMQ-style streaming yet. In the Mining interface you call a method and get a result, immediately or after a delay. So this might be quite involved.\n\nCalling a `waitNext` method and getting a response for every single new mempool transaction is simpler. But it would be very inefficient when there's dozens of new transactions per second. They could be collected in batches though.\n\nYou could also use a (package) fee rate filter so the JDS only collects transactions that are likely to be mined, fetching specific missing txs just in time via `getTransactionsByWitnessId()`.",
          "created_at": "2025-12-08T09:57:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 986,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3626128379,
          "user": "plebhash",
          "body": "> Can you enumerate which RPC calls you're polling? \n\n`getrawmempool` is the only polled RPC, under a user-defined period, to periodically check whether there's new txs it needs to be aware of\n\n- `health` is called once at startup\n- `getrawtransaction` is called (multiple times, one for each new tx) after `getrawmempool` on each polling cycle\n- `submitblock` is called ad-hoc after JDC sends `PushSolution`",
          "created_at": "2025-12-08T10:18:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 408,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3627141436,
          "user": "plebhash",
          "body": "> They could be collected in batches though.\n\nyeah `waitNext` probably shouldn't return one single tx at a time, batching makes more sense\n\noverall the main point is to be able to have something that allows Bitcoin Core to push mempool updates ASAP, instead of forcing the client to have to poll for it ",
          "created_at": "2025-12-08T14:14:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 303,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3627204038,
          "user": "plebhash",
          "body": "> fetching specific missing txs just in time via `getTransactionsByWitnessId()`\n\nI feel this should be left as a last-resort kind of thing\n\nwhatever feed JDS gets from Bitcoin Core (be it updates with single or batched txs), it should contain full `txdata` instead of only `wtxids`\n\nthen it's up to JDS implementation to aim to optimize which txs it could selectively drop to avoid unbounded memory consumption\n\nmain point being:\n\n `txdata` should be made available sooner, rather than selectively fetched (with extra round-trips on hot Job Declaration paths) later ",
          "created_at": "2025-12-08T14:29:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 566,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3627326527,
          "user": "ryanofsky",
          "body": "> We haven't used IPC for ZMQ-style streaming yet. In the Mining interface you call a method and get a result, immediately or after a delay. So this might be quite involved.\n\nThis is true for the mining interface, but the other interfaces in #29409 and #10102 do used streamed notifications. The wallet uses `Chain.handleNotifications` to start receiving notifications and transactions and blocks:\n\nhttps://github.com/bitcoin/bitcoin/blob/d9efd1e49d1df154970b6a60229eedde3ba7cffe/src/ipc/capnp/chain.capnp#L58\n\nproviding a `ChainNotifications` instance to see transactions added / removed from the mempool:\n\nhttps://github.com/bitcoin/bitcoin/blob/d9efd1e49d1df154970b6a60229eedde3ba7cffe/src/ipc/capnp/chain.capnp#L74-L75\n\nI will to say I don't understand enough of the context behind this to know if this design is ideal, and am curious how the JDS mempool will be managed. Is it supposed to be a superset of bitcoin core mempool + any transactions that pool participants sent? Does that also mean it will keep transactions that get dropped from the bitcoin core mempool and maybe doesn't need transactionRemovedFromMempool information?",
          "created_at": "2025-12-08T14:57:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1138,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3627477785,
          "user": "Sjors",
          "body": "A pool's JDS processes proposed templates from multiple miners, which will have divergent mempools. So until a block is mined, some templates may still have transaction that the pool itself threw out of its mempool.\n\nIn order for the JDS to prune its pseudo-mempool it could track which inputs are spent in the new block and (recursively) delete entries that spend from it.",
          "created_at": "2025-12-08T15:25:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 373,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3635757656,
          "user": "plebhash",
          "body": "moving discussion from #34013 here, where @Fi3 [said](https://github.com/bitcoin/bitcoin/issues/34013#issuecomment-3635671638)\n\n> ... @plebhash about the stream style design I don't think that is good idea, I do not want to have every tx in mempool around but just the ones that are actually added to templates.",
          "created_at": "2025-12-10T07:30:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 311,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3635780858,
          "user": "plebhash",
          "body": "reply to @Fi3:\n\n---\n\nfirst, let me explain the rationale behind this feature request\n\nonce `DeclareMiningJob` arrives, I wanted JDS to be able to validate it as fast as possible\n\nassuming the best case scenario (where all `wtxid`s have already been seen and no extra `ProvideMissingTransactions` round-trip is needed), having all txs readily available on JDS memory would allow the validation of `DeclareMiningJob` to happen ASAP\n\nif we're worried about unbounded memory growth, low-fee txs (which are unlikely to be in a template anyways) could always be evicted after they arrive from the stream\n\n---\n\nnow entertaining your perspective:\n\nalternatively, we could call `getTransactionsByWitnessId` (to be potentially introduced via #34020) every time `DeclareMiningJob` arrives\n\nwhile we could be comfortable with this extra round-trip over a local UNIX socket (because it's fast), we should keep in mind that IPC could potentially be extended to TCP as well, which could introduce room for undesirable latency\n\nand that's where the stream-based approach could come in handy, because JDS would be able to have all txs readily available in memory when `DeclareMiningJob` arrives",
          "created_at": "2025-12-10T07:37:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1177,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3636086303,
          "user": "Sjors",
          "body": "> low-fee txs [...] could always be evicted after they arrive from the stream\n\nThat's not so easy, because you can't judge transactions by their individual fee rate. We introduced the [cluster mempool](https://delvingbitcoin.org/t/an-overview-of-the-cluster-mempool-proposal/393) approach to handle this.\n\nIf you want to filter the stream, it's better to do so on the node side. But we'd need a different interface method for that, one that emits (chunks of) clusters above a certain fee rate threshold.",
          "created_at": "2025-12-10T09:11:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 503,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3640907952,
          "user": "Fi3",
          "body": "> reply to [@Fi3](https://github.com/Fi3):\n> \n> first, let me explain the rationale behind this feature request\n> \n> once `DeclareMiningJob` arrives, I wanted JDS to be able to validate it as fast as possible\n> \n> assuming the best case scenario (where all `wtxid`s have already been seen and no extra `ProvideMissingTransactions` round-trip is needed), having all txs readily available on JDS memory would allow the validation of `DeclareMiningJob` to happen ASAP\n> \n> if we're worried about unbounded memory growth, low-fee txs (which are unlikely to be in a template anyways) could always be evicted after they arrive from the stream\n> \n> now entertaining your perspective:\n> \n> alternatively, we could call `getTransactionsByWitnessId` (to be potentially introduced via [#34020](https://github.com/bitcoin/bitcoin/pull/34020)) every time `DeclareMiningJob` arrives\n> \n> while we could be comfortable with this extra round-trip over a local UNIX socket (because it's fast), we should keep in mind that IPC could potentially be extended to TCP as well, which could introduce room for undesirable latency\n> \n> and that's where the stream-based approach could come in handy, because JDS would be able to have all txs readily available in memory when `DeclareMiningJob` arrives\n\nkeep in mind that you will see unknown txs in a very small percentage of the declared job so the overall impact is very very low",
          "created_at": "2025-12-11T08:57:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1406,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3642581846,
          "user": "plebhash",
          "body": "ok, I guess we can stick with `getTransactionsByWitnessId` (to be potentially introduced via https://github.com/bitcoin/bitcoin/pull/34020) for https://github.com/stratum-mining/sv2-apps/issues/24\n\nif these IPC round-trips ever prove to be an undesirable bottleneck, we can revisit the ideas proposed here.",
          "created_at": "2025-12-11T15:54:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 306,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1855,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3701398972,
      "number": 34021,
      "title": "ci: The bitcoincore.org depends fallback is missing sqlite-autoconf-3500400.tar.gz",
      "body": "The depends fallback is down again?\r\n\r\n```\r\n$ curl --show-headers 'https://bitcoincore.org/depends-sources/sqlite-autoconf-3500400.tar.gz'\r\nHTTP/2 404 \r\nserver: nginx\r\ndate: Fri, 28 Nov 2025 09:21:07 GMT\r\ncontent-type: text/html\r\ncontent-length: 146\r\nstrict-transport-security: max-age=63072000; includeSubDomains; preload\r\n```\r\n\r\n_Originally posted by @maflcko in https://github.com/bitcoin/bitcoin/issues/32655#issuecomment-3588516475_\r\n            ",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-06T10:15:32Z",
      "updated_at": "2025-12-11T18:36:13Z",
      "closed_at": "2025-12-11T18:36:13Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34021",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3643265612,
          "user": "theuni",
          "body": "Yeah, there was a firewall issue after a server move. Fixed now, and sqlite-autoconf-3500400.tar.gz is available.",
          "created_at": "2025-12-11T18:36:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 113,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 534,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3715043208,
      "number": 34041,
      "title": "rpc: `settxfee` and `paytxfee` removal",
      "body": "These were marked as deprecated in #31278 and scheduled for removal in `v31.0`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-10T12:40:47Z",
      "updated_at": "2025-12-10T13:10:01Z",
      "closed_at": "2025-12-10T13:10:00Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34041",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3636931169,
          "user": "fanquake",
          "body": "cc @polespinasa ",
          "created_at": "2025-12-10T12:45:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 16,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3636965147,
          "user": "maflcko",
          "body": "See https://github.com/bitcoin/bitcoin/pull/32138 ?",
          "created_at": "2025-12-10T12:54:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 51,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 118,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2730306923,
      "number": 31459,
      "title": "Quantum-Resistant Addresses and Signatures (QRAS)",
      "body": "**Status:** Draft  \r\n**Created:** 20241210\r\n\r\n### Motivation\r\nAs quantum computing advances, the security of classical cryptographic primitives—especially those relying on discrete logarithms and factoring—may diminish over time. Bitcoin's current reliance on ECDSA for signatures is expected to remain secure against foreseeable quantum computers, but preparing preemptively for a smooth transition to post-quantum (PQ) algorithms avoids rushed changes later. Introducing quantum-resistant signatures now provides long-term resilience.\r\n\r\n### Abstract\r\nThis BIP proposes a new witness version and script rules enabling quantum-resistant signature schemes, starting with a well-studied, standardized scheme like SPHINCS+. It maintains backward compatibility, allowing legacy addresses and signatures to coexist. Over time, users may voluntarily migrate funds to PQ addresses as quantum threats materialize. The design supports multiple PQ schemes and can adapt if a particular PQ algorithm is compromised, ensuring Bitcoin's long-term security.\r\n\r\n### Specification\r\n\r\n#### New Witness Version and Script Structure\r\n- Introduce a new witness version to signal that the output requires a PQ signature.\r\n- For example, use `OP_1Q` in `ScriptPubKey` to indicate a PQ public key and the associated verification operation:\r\n\r\n```math\r\n\\text{ScriptPubKey} = OP_1Q \\; <PK> \\; OP_CHECKPQSIGN\r\n```\r\n  \r\nHere, `<PK>` is a public key compatible with the chosen PQ scheme. `OP_CHECKPQSIGN` is a new opcode that verifies a provided PQ signature against `<PK>` and the transaction message.\r\n\r\n#### Supported PQ Schemes\r\n- Start with SPHINCS+, a hash-based signature scheme standardized by NIST and backed by well-understood security properties (collision-resistant hash functions).\r\n- The framework allows for future extension:\r\n  - Define a `<SchemeID>` field to support multiple PQ schemes, e.g.:\r\n```math\r\n\\text{ScriptPubKey} = OP_1Q \\; <SchemeID> <PK> \\; OP_CHECKPQSIGN\r\n```\r\n  - Additional schemes (e.g., CRYSTALS-Dilithium) can be introduced via new `<SchemeID>` values.\r\n\r\n#### PQ Signature Verification\r\nThe transaction message $M$ (a hash of the input and output data) is verified against a PQ signature $\\sigma$ and public key $PK$.\r\n\r\n```math\r\n\\text{Verify}_{PQ}(PK, \\sigma, M) = \r\n\\begin{cases}\r\n\\text{True}, & \\text{if $\\sigma$ is a valid PQ signature on $M$ w.r.t. $PK$}\\\\\r\n\\text{False}, & \\text{otherwise}\r\n\\end{cases}\r\n```\r\n\r\nFor SPHINCS+, this involves hashing-based verification. If $\\text{Verify}_{PQ}(PK, \\sigma, M)$ returns True, the input is valid.\r\n\r\n#### Parameter and Size Considerations\r\n- Let the underlying hash function be:\r\n```math\r\nH: \\{0,1\\}^* \\to \\{0,1\\}^{256}\r\n```\r\n- SPHINCS+ typically uses parameters ensuring classical and quantum security at standardized levels.  \r\n- Signatures are larger than ECDSA, often tens of kilobytes, which impacts bandwidth and block space. Future PQ schemes may reduce size and improve performance.\r\n\r\n#### Attack Vectors and Mitigations\r\n- **Quantum Attacks:**  \r\n  SPHINCS+ resists known quantum attacks by relying on hard-to-find hash collisions, which remain infeasible even for powerful quantum adversaries.\r\n  \r\n- **Side-Channel Attacks:**  \r\n  Wallets should implement PQ operations using constant-time methods to prevent key leaks.\r\n\r\n- **Parameter Backdoors and Broken Schemes:**  \r\n  Only deploy schemes vetted by the cryptographic community and standardized by reputable bodies. If a scheme weakens, introduce a new `<SchemeID>` and encourage migration.\r\n\r\n- **Multiple PQ Schemes (Chess Moves Against the Future):**  \r\n  By supporting multiple schemes, Bitcoin can pivot quickly if one scheme is compromised. This future-proofing ensures no single point of cryptographic failure.\r\n\r\n#### Backward Compatibility and Deployment\r\n- Legacy addresses and transaction types remain valid. Non-upgraded nodes treat PQ outputs as anyone-can-spend, incentivizing them to upgrade to retain full validation security.\r\n- Introduce the feature as a soft fork (e.g., using methods like BIP9 or BIP8). Miners signal support, and after activation, upgraded nodes begin enforcing PQ signatures on PQ-designated outputs.\r\n- Users can initially create hybrid outputs that accept ECDSA or PQ signatures, allowing a gradual transition.\r\n\r\n#### Testing and Rollout\r\n- Test the PQ changes on Signet/Testnet to gather performance data and confirm compatibility.\r\n- Benchmark verification speeds, block size impacts, and confirm no consensus splits occur among upgraded nodes.\r\n- Provide reference implementations, test vectors, and developer tools.\r\n\r\n### Example PQ Transaction\r\n1. Alice generates a PQ key pair using SPHINCS+ and produces an address `bc1q_pq...` referencing `OP_1Q <PK> OP_CHECKPQSIGN`.\r\n2. Bob sends BTC to Alice's PQ address.\r\n3. When spending, Alice includes a PQ signature $\\sigma$ in the witness:\r\n```math\r\n\\text{Verify}_{PQ}(PK, \\sigma, M) = \\text{True} \\implies \\text{Spend allowed.}\r\n```\r\n\r\n### Conclusion\r\nThis BIP ensures Bitcoin can smoothly adapt to a post-quantum world. By introducing PQ signatures preemptively, the network stays secure against potential future quantum attacks. The flexible design allows multiple PQ schemes, continual cryptanalysis, and incremental user adoption. This future-proofs Bitcoin's cryptographic foundation, maintaining trust and stability in the decades ahead.",
      "state": "closed",
      "user": "tgaeta",
      "created_at": "2024-12-10T14:37:47Z",
      "updated_at": "2025-12-10T12:26:03Z",
      "closed_at": "2024-12-10T14:45:16Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31459",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 7,
        "positive_keywords": 1,
        "text_length": 5414,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2720755575,
      "number": 31430,
      "title": "Fix for `Corrupt block found indicating potential hardware failure; shutting down`",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nThe `bitcoind` process exits with the given log message. If I try to run again, the same message appears. I need to run `bitcoind` with `-reindex` (`-reindex-chainstate` doesn't work as block index is corrupted) to continue which takes alot of time and I had to do reindexing like 8 times before I was able to sync about 445,000 blocks. This only slows down my full sync as I download more and more blocks, my reindex times goes higher every time. It doesn't make sense for me to sync this way. I did not have any unexpected power failures, unexptect bitcoind exits or anything as well. It just happens randomly out of nowhere.\r\n\r\n### Expected behaviour\r\n\r\nSince this is happening while in the initial sync, this should be some corruption happened in the memory, or the block being received from the peer itself is corrupted. \r\n\r\nWouldn't it be possible that we just discard that block, or maybe disconnect from that peer we got the corrupted block and continue syncing? Why it has to just exit the process with corrupted index on disk that has to be reindexed from scratch before any use. Is there anything fundamental that I'm missing here?\r\n\r\n### Steps to reproduce\r\n\r\n- Clone the repo\r\n- Checkout to `v28x` tag\r\n- Run `./autogen.sh && ./configure && make && make install`\r\n\r\n### Relevant log output\r\n\r\nERROR: AcceptBlock: bad-txnmrklroot, hashMerkleRoot mismatch\r\n*** Corrupt block found indicating potential hardware failure; shutting down\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.1.0rc1\r\n\r\n### Operating system and version\r\n\r\nmacOS Sequoia Version 15.1.1 (24B91)\r\n\r\n### Machine specifications\r\n\r\nApple M1 Pro\r\n16GB Memory\r\nUsing an external Transcend 1TB SSD as `datadir`.",
      "state": "closed",
      "user": "helloscoopa",
      "created_at": "2024-12-05T15:43:33Z",
      "updated_at": "2025-12-10T12:26:03Z",
      "closed_at": "2024-12-10T10:55:56Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/31430",
      "labels": [
        "macOS",
        "Upstream",
        "Data corruption"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1955,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3698416643,
      "number": 34013,
      "title": "rpc: getrawtransaction lookup by witness txid",
      "body": "For Stratum v2 custom job declaration to be bandwidth efficient, the pool can request[^0] only the transactions that it doesn't know about.\n\nThe spec doesn't specify how this is achieved, but one method is to call `getrawtransaction` on each of the transaction ids listed in [DeclareMiningJob](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol?query=DeclareMiningJob#644-declareminingjob-client-server) (or a subset if the pool software maintains a cache).\n\nUnfortunately this RPC only supports `txid`, not `wtxid`.\n\nI think the easiest change would be:\n- have `getrawtransaction` accept either `txid` or `wtxid` as the first _positional_ argument\n- add a `GetTransaction` that takes a `Wtxid`\n- try with `Txid` first, `Wtxid` if that fails\n- optionally add a \"hash_type\" argument: `txid`, `txid` or `*`\n\nSee also:\n- https://github.com/stratum-mining/sv2-spec/issues/170\n\n[^0]: there's two reasons the pool requests these transactions: to approve the template and to broadcast the block if a solution is found (the miner will also broadcast via their template provider) ",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-05T10:31:52Z",
      "updated_at": "2025-12-10T07:37:36Z",
      "closed_at": null,
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/34013",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3616470606,
          "user": "Fi3",
          "body": "ACK for dmnd or other pools that will implement sv2 and want to do job declaration and being able to relay the blocks founded by the miners, having fast way to retrieve tx data from the node using a wtxid would be very useful.   ",
          "created_at": "2025-12-05T11:22:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 229,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3616489509,
          "user": "sedited",
          "body": "It's not clear to me why this should happen through RPC if they are using the IPC interface already.",
          "created_at": "2025-12-05T11:26:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 100,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616505380,
          "user": "Sjors",
          "body": "@sedited there's different \"they\"s here:\n\n1. The miner who proposes a block, they use IPC\n2. The pool software that verifies the template and broadcasts a solution: the current SRI implementation doesn't use IPC\n\nThat said, I'm thinking about making an IPC method to fetch transactions more efficiently.",
          "created_at": "2025-12-05T11:30:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 303,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616513802,
          "user": "Fi3",
          "body": "> It's not clear to me why this should happen through RPC if they are using the IPC interface already.\n\nThe [Template Provider](https://github.com/Sjors/sv2-tp/)  is using the IPC interface but the Job Declarator Server is not, and it could need to get tx data for tx in jobs declared by the miner. Having a method to do that without asking to the miner is very helpful.  The Job Declarator Server could use the IPC interface, but I don't see why this should not be possible trough the RPC interface. And as an implementor I prefer to use RPC for  Job Declarator Server since IPC is very new and I don't need it if I have this in RPC.\n\nhttps://stratumprotocol.org/specification",
          "created_at": "2025-12-05T11:31:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 677,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616550030,
          "user": "plebhash",
          "body": "currently SRI Job Declarator Server monitors the mempool via RPC and we have considered switching to ZMQ on this issue https://github.com/stratum-mining/sv2-apps/issues/26, which is about to be tackled soon\n\nbut I like @Sjors idea of leveraging IPC for this purpose, we can use this JDS refactoring to drive the development and stabilization of this new feature on Bitcoin Core side\n\n(perhaps on a separate issue on this repo?)",
          "created_at": "2025-12-05T11:42:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 427,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3616579875,
          "user": "Sjors",
          "body": "ZMQ will give you all new mempool transactions, whereas a new `getRawTransactions()` IPC method would only give you the ones you request. As does the RPC change suggested here.\n\nThat's probably enough if you keep a local cache of transactions you've seen before and only request unknown ones from `DeclareMiningJob`.\n\n> perhaps on a separate issue on this repo\n\nYes, an IPC method would need a different issue, or the pull request once I write it.",
          "created_at": "2025-12-05T11:52:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 447,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3618231614,
          "user": "Sjors",
          "body": "See #34020 for the IPC approach.",
          "created_at": "2025-12-05T19:15:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 32,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3620660349,
          "user": "plebhash",
          "body": "I see @Fi3 manifested interest for this, so I'd assume he still wants his JDS implementation to rely on a poll-style RPC-based design for a while\n\non SRI we're aiming for a stream-based design under the efforts for https://github.com/stratum-mining/sv2-apps/issues/26\n\nso IPC would be desirable, but as a potential replacement for ZMQ `rawtx` subscription, and not as a in-place replacement for `getrawtransaction`",
          "created_at": "2025-12-06T16:30:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 414,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3621878889,
          "user": "Sjors",
          "body": "> for a while\n\nI would not expect this to land before v31 in spring 2026, so by that time @Fi3 might have finished implementing IPC support and could just use the more performant #34020.",
          "created_at": "2025-12-07T10:03:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 186,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3635671638,
          "user": "Fi3",
          "body": "> > for a while\n> \n> I would not expect this to land before v31 in spring 2026, so by that time [@Fi3](https://github.com/Fi3) might have finished implementing IPC support and could just use the more performant [#34020](https://github.com/bitcoin/bitcoin/pull/34020).\n\nyep this is likley. @plebhash about the stream style design I don't think that is good idea, I do not want to have every tx in mempool around but just the ones that are actually added to templates.",
          "created_at": "2025-12-10T07:00:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 466,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3635757487,
          "user": "plebhash",
          "body": "@Fi3 thanks for your input!\n\nlet's move this discussion to #34030 and leave this issue for the RPC discussion",
          "created_at": "2025-12-10T07:30:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 109,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1136,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2480344676,
      "number": 30694,
      "title": "Split socket handling out of CConnman",
      "body": "### Please describe the feature you'd like to see added.\n\nSplit `CConnman` in two pieces:\n\n* protocol agnostic low level socket and connection handler and\n* bitcoin-p2p protocol specific handler.\n\nThis way the code should become more modular and easier to maintain.\n\n### Is your feature related to a problem, if so please describe it.\n\nCode has intermixed low level socket handling and P2P logic.\n\n### Describe the solution you'd like\n\nSplit `CConnman` in such a way that the code is easier to read and maintain.\n\n### Describe any alternatives you've considered\n\nDuplicate code.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2024-08-22T09:53:49Z",
      "updated_at": "2025-12-10T05:57:39Z",
      "closed_at": "2025-12-10T05:57:39Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/30694",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3617709020,
          "user": "fanquake",
          "body": "Can you update the issue description to remove mentions of SV2 (given it doesn't need or uses this), and probably the libevent removal, given that seems to be taking a different approach now? I guess this could also be closed, given all relevant discussion is happening in the PR (#30988).",
          "created_at": "2025-12-05T16:54:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 289,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3635518251,
          "user": "vasild",
          "body": "Updated the OP and closing as suggested.",
          "created_at": "2025-12-10T05:57:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 40,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 616,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2591781114,
      "number": 31098,
      "title": "Stratum v2 via IPC Mining Interface tracking issue",
      "body": "After much discussion in https://github.com/bitcoin/bitcoin/pull/29432 it appears there's currently little support for directly supporting Stratum v2 in Bitcoin Core, with most contributors favouring the creation of a Mining IPC interface that external applications can use.\n\nThe only such application currently is the Template Provider implemented by me in https://github.com/Sjors/bitcoin/pull/48. This also serves to illustrate how the interface is used and that it's complete. The folks working on SRI should be able to build a Template Provider as well, once the interface is complete and shipped in a release.\n\n### Needed for (hopefully) v30\n\nTo complete the interface:\n\n- [x] #31318\n- [x] #31283 (replaces #31003) \n  - [x] #31325\n  - [x] #31581\n- [x] #31785\n- [x] #31346\n- [x] #31196\n- [x] #31197\n- [x] #31288\n- [x] https://github.com/chaincodelabs/libmultiprocess/issues/122 (not used by Stratum v2)\n\nMisc bug fixes:\n- [ ] #32420\n\nFor multiprocess release binaries\n\n- [x] #31802\n- [x] #31763 (pending \"officially\" shipping `bitcoin-node`)\n- [x] #31375\n  - To resolve #30983\n- [x] #31741\n- [x] #30975\n- [x] #31992 \n- [x] https://github.com/chaincodelabs/libmultiprocess/pull/119\n- [x] https://github.com/chaincodelabs/libmultiprocess/issues/117\n- [x] #31455\n- [x] #31151\n- [ ] https://github.com/chaincodelabs/libmultiprocess/issues/123\n- [x] https://github.com/chaincodelabs/libmultiprocess/issues/128\n\nLibmultiprocess bugfixes\n\n- [x] https://github.com/chaincodelabs/libmultiprocess/pull/120\n- [x] https://github.com/chaincodelabs/libmultiprocess/pull/121\n- [x] https://github.com/chaincodelabs/libmultiprocess/pull/127\n\n### Can wait for later releases\n\n- [x] #31827 \n- [ ] Windows support\n  - [ ] https://github.com/chaincodelabs/libmultiprocess/issues/114\n  - [ ] add `bitcoin-node.exe` etc to Windows build\n  - [ ] add `bitcoin.exe` to Windows build (e.g. 26d3a069f94e2cabcc8d1f73fd2cfa3e7c320497)\n- [ ] https://github.com/bitcoin/bitcoin/pull/30437\n- [x] #31002 DATUM developers are currently uninterested in taking advantage of the more performant interface, preferring to use the `getblocktemplate` RPC instead, despite an earlier concept ACK on Stratum v2 support https://github.com/bitcoin/bitcoin/pull/27854#issuecomment-1605237375.\n- new interface methods:\n  - `createFutureBlock()` for faster work switching, see #31109\n  - `waitNewPowBlock()` for SPV mining, see #31109\n  - `verifyBlock(CBlock block, bool allow_rollback, bool check_pow, uint256 target)`\n     * for Stratum v2 pools to verify a proposed block, ignoring PoW\n     * can also be used to verify weak blocks in P2pool like systems\n     * can use the mempool to accelerate validation, but doesn't update it\n     * (maybe) can optionally roll back, to inspect older templates\n\n### Current Template Provider users \n\nAs a stop-gap measure I plan to maintain https://github.com/Sjors/bitcoin/pull/68 which is a continuation of https://github.com/bitcoin/bitcoin/pull/29432, since people are currently using that. Once the Mining interface makes it into a release, along with multiprocess enabled Guix binaries, I plan to drop that in favour of https://github.com/Sjors/bitcoin/pull/48.\n\nAdditionally I plan to convert the latter from a patch set on top of Bitcoin Core into a standalone application, to make it easier for others to contribute. That should make it less dependent on my own effort. The Bitcoin Core project could decide in the future to \"adopt\" this project, but that is entirely uncertain and most contributors seems averse to this idea.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-10-16T12:43:56Z",
      "updated_at": "2025-12-09T10:06:37Z",
      "closed_at": "2025-10-28T08:11:09Z",
      "comments": 23,
      "url": "https://github.com/bitcoin/bitcoin/issues/31098",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2539041544,
          "user": "ryanofsky",
          "body": "I added #31375 to the list in the description since I think it will also be needed for a multirprocess release",
          "created_at": "2024-12-12T14:02:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 110,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2544735248,
          "user": "Sjors",
          "body": "#31346 landed, marked as such in the description. Many to go, most of them are pretty simple and already have some review; just need more eyes to get them over the finish line. ",
          "created_at": "2024-12-16T06:45:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 177,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2550613064,
          "user": "Sjors",
          "body": "#31197, #31318 and #31196 landed. Suggested review: #31325 or #31375.\r\n\r\nUpdate 2024-12-20: #31325 landed, suggested review: #31283 or #31375.",
          "created_at": "2024-12-18T08:02:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 142,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2556161334,
          "user": "Sjors",
          "body": "Updated description to hint at some new interface methods I plan to propose in the future: `createFutureBlock()`, `waitNewPowBlock()` and `verifyBlock()`.\r\n\r\nHowever for now let's focus on the last interface method that the Template Provider needs, namely `waitNext()`. And on all the multiprocess changes.",
          "created_at": "2024-12-20T02:52:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 306,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2582939898,
          "user": "Sjors",
          "body": "I moved Windows support to \"can wait for later releases\" and expanded the item a bit.",
          "created_at": "2025-01-10T15:17:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 85,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2610551239,
          "user": "Sjors",
          "body": "The discussion in [todays IRC meeting](https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2025-01-23#1737649417-1737651814;) suggests v29 is very unlikely to happen, but v30 is conceivable.",
          "created_at": "2025-01-23T17:44:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 189,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2733571093,
          "user": "Sjors",
          "body": "More things have been merged... for build system fans I recommend #31992, for interface fans #31785. ",
          "created_at": "2025-03-18T14:59:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 101,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2813323000,
          "user": "Sjors",
          "body": "All interface changes that I need for v30 have been merged!\n\nSome progress has been made on enabling IPC for the release as well, but please review #31375 and https://github.com/bitcoin/bitcoin/pull/31802.",
          "created_at": "2025-04-17T15:27:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 205,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2915399359,
          "user": "Sjors",
          "body": "The wrapper binary PR #31375 just landed, which is great progress!\n\nThe only big change left is to add bitcoin-node (aka `bitcoin -m`) to the release binaries, which is what #31802 does. It in turn depends on a small bug fix https://github.com/bitcoin-core/libmultiprocess/pull/172.\n",
          "created_at": "2025-05-28T08:15:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 283,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3451047615,
          "user": "ryanofsky",
          "body": "Does it make sense to close this issue?",
          "created_at": "2025-10-27T12:31:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 39,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3455099378,
          "user": "Sjors",
          "body": "Yes, I might open a fresh tracking issue later for remaining and new interface changes. There are a few things that we want to adjust, including things that aren't urgent, but should be done when we need a breaking change anyway.\n\nThe sidecar application lives at https://github.com/Sjors/sv2-tp",
          "created_at": "2025-10-28T08:11:09Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 295,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3631384055,
          "user": "Sjors",
          "body": "There's a fresh tracking issue for the mining IPC at #33777.",
          "created_at": "2025-12-09T10:06:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 60,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 3582,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3149228636,
      "number": 32759,
      "title": "Guix build fails on M4 macOS host with Ubuntu in UTM",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nSince #32431 my macOS (M4 using UTM) Guix builds no longer work: \n\n```\nHOSTS=\"x86_64-linux-gnu\" contrib/guix/guix-build\n...\nguix shell: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument\n```\n\nThis seems to be something else than what I encountered on my native AMD Ubuntu machine: https://github.com/bitcoin/bitcoin/pull/32431#issuecomment-2966089437\n\nBut perhaps a common factor is that this PR pulled in a lot of new guix packages.\n\n### Expected behaviour\n\nGuix build should work, it does on c8abd972818f83d90bf50b250131f338034460ef.\n\n### Steps to reproduce\n\nSee below\n\n### Relevant log output\n\n```\n$ HOSTS=\"x86_64-linux-gnu\" contrib/guix/guix-build\nChecking that we can connect to the guix-daemon...\n\nHint: If this hangs, you may want to try turning your guix-daemon off and on\n      again.\n\nmake: Entering directory '/home/sjors/bitcoin/depends'\nmake[1]: Entering directory '/home/sjors/bitcoin/depends'\nmake[1]: Leaving directory '/home/sjors/bitcoin/depends'\nmake: Leaving directory '/home/sjors/bitcoin/depends'\nINFO: Building fed41b75fbfa for platform triple x86_64-linux-gnu:\n      ...using reference timestamp: 1749642062\n      ...running at most 10 jobs\n      ...from worktree directory: '/home/sjors/bitcoin'\n          ...bind-mounted in container to: '/bitcoin'\n      ...in build directory: '/home/sjors/bitcoin/guix-build-fed41b75fbfa/distsrc-fed41b75fbfa-x86_64-linux-gnu'\n          ...bind-mounted in container to: '/distsrc-base/distsrc-fed41b75fbfa-x86_64-linux-gnu'\n      ...outputting in: '/home/sjors/bitcoin/guix-build-fed41b75fbfa/output/x86_64-linux-gnu'\n          ...bind-mounted in container to: '/outdir-base/x86_64-linux-gnu'\n      ADDITIONAL FLAGS (if set)\n          ADDITIONAL_GUIX_COMMON_FLAGS: --max-jobs=4 --no-substitutes\n          ADDITIONAL_GUIX_ENVIRONMENT_FLAGS:\n          ADDITIONAL_GUIX_TIMEMACHINE_FLAGS:\nThe following derivations will be built:\n  /gnu/store/5kpjfn7qg25c4w1q3cczl565x0yi8mpb-python-lief-0.16.6.drv\n  /gnu/store/04dcmhmlhgj2pgnyspb88lm5j9rwbd60-python-typing-extensions-4.9.0.drv\n  /gnu/store/nd7dcikf5dnq113cxmb1r4w0q8ijs1qq-typing_extensions-4.9.0.tar.gz.drv\n  /gnu/store/25adw1ck5fvbgvrx405c0l6kjag49j9z-python-importlib-metadata-5.2.0.drv\n...\n  /gnu/store/c985sj9mqmk3qvsd55b0g11hlv26krbk-msgpack-1.0.4.tar.gz.drv\n  /gnu/store/x8vm49yz0k8wm3w2hgishy5q1svkcfaw-python-pymongo-4.1.1.drv\n  /gnu/store/6dv3fazv5hnhwvgfnnykm0f2lwnajgsq-pymongo-4.1.1.tar.gz.drv\n\nbuilding /gnu/store/ck789yrq1xslycd986zdh5fq8dknl3r3-rust-actix-derive-0.5.0.tar.gz.drv...\nbuilding /gnu/store/2xasv0pcv8gw6lafag6bkjfqkmlbj02f-rust-actix-http-1.0.1.tar.gz.drv...\nbuilding /gnu/store/qifi4hb8hjm6bk6nv4664fyw7cb25fgp-rust-actix-http-2.2.0.tar.gz.drv...\nbuilding /gnu/store/gm8l3rn479p9hf3zs1vj9pzchvcj42f8-rust-actix-macros-0.1.3.tar.gz.drv...\nThe following builds are still in progress:\n  /gnu/store/qifi4hb8hjm6bk6nv4664fyw7cb25fgp-rust-actix-http-2.2.0.tar.gz.drv\n  /gnu/store/ck789yrq1xslycd986zdh5fq8dknl3r3-rust-actix-derive-0.5.0.tar.gz.drv\n\nbuilding /gnu/store/grpq0sq301rwsz6h4vbdx9sgvi64wai4-Python-2.7.18.tar.xz.drv...\nThe following builds are still in progress:\n  /gnu/store/grpq0sq301rwsz6h4vbdx9sgvi64wai4-Python-2.7.18.tar.xz.drv\n  /gnu/store/qifi4hb8hjm6bk6nv4664fyw7cb25fgp-rust-actix-http-2.2.0.tar.gz.drv\n\nThe following builds are still in progress:\n  /gnu/store/grpq0sq301rwsz6h4vbdx9sgvi64wai4-Python-2.7.18.tar.xz.drv\n  /gnu/store/qifi4hb8hjm6bk6nv4664fyw7cb25fgp-rust-actix-http-2.2.0.tar.gz.drv\n\nbuilding /gnu/store/sf5wwnpy8mr9l8iic2xz5bmg3bppjrj9-asynctest-0.13.0.tar.gz.drv...\nbuilding /gnu/store/hiqwnz4mhiad1zcqyf250b1ws0s36djc-attrs-21.2.0.tar.gz.drv...\nThe following builds are still in progress:\n  /gnu/store/hiqwnz4mhiad1zcqyf250b1ws0s36djc-attrs-21.2.0.tar.gz.drv\n  /gnu/store/sf5wwnpy8mr9l8iic2xz5bmg3bppjrj9-asynctest-0.13.0.tar.gz.drv\n  /gnu/store/grpq0sq301rwsz6h4vbdx9sgvi64wai4-Python-2.7.18.tar.xz.drv\n\nnote: keeping build directory `/tmp/guix-build-Python-2.7.18.tar.xz.drv-2'\nnote: keeping build directory `/tmp/guix-build-bash.drv-2'\nnote: keeping build directory `/tmp/guix-build-asynctest-0.13.0.tar.gz.drv-2'\nnote: keeping build directory `/tmp/guix-build-attrs-21.2.0.tar.gz.drv-2'\nguix shell: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@fed41b75fbfa6d14cce852863271b1fb0206eef0\n\n### Operating system and version\n\nMacOS 15.5 with UTM, guest (virtualized) Ubuntu 24.10 (aarch64\n\n### Machine specifications\n\nM4",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-06-16T09:25:48Z",
      "updated_at": "2025-12-09T10:01:34Z",
      "closed_at": "2025-12-09T09:35:10Z",
      "comments": 19,
      "url": "https://github.com/bitcoin/bitcoin/issues/32759",
      "labels": [
        "Build system",
        "Upstream",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 2980852583,
          "user": "willcl-ark",
          "body": "I tried to reproduce this (using docker and @fanquake's alpine guix image) and got errors building gcc:\n\n[g6wxpn4yq37pvw5q4jzbqxq5l9rqhr-gcc-cross-x86_64-linux-gnu-13.3.0.drv.gz](https://github.com/user-attachments/files/20778583/g6wxpn4yq37pvw5q4jzbqxq5l9rqhr-gcc-cross-x86_64-linux-gnu-13.3.0.drv.gz)\n\n(too big for most pastebins, read with `zcat `)\n\nIt is building gcc-cross and the tail is:\n\n<details><summary>Details</summary>\n<p>\n\n```sh\n/gnu/store/id0knspwhrd51wrg2nbx2pw3ajz36ngg-bash-minimal-5.1.16/bin/bash ../../gcc-13.3.0/gcc/../move-if-change tmp-fixinc_list fixinc_list\necho timestamp > s-fixinc_list\nrm -f g++-cross\ncp xg++ g++-cross\nrm -f gfortran-cross\ncp gfortran gfortran-cross\ng++  -fno-PIE -c   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -I. -Ilto -I../../gcc-13.3.0/gcc -I../../gcc-13.3.0/gcc/lto -I../../gcc-13.3.0/gcc/../include  -I../../gcc-13.3.0/gcc/../libcpp/include -I../../gcc-13.3.0/gcc/../libcody  -I../../gcc-13.3.0/gcc/../libdecnumber -I../../gcc-13.3.0/gcc/../libdecnumber/bid -I../libdecnumber -I../../gcc-13.3.0/gcc/../libbacktrace   -o lto/lto-dump.o -MT lto/lto-dump.o -MMD -MP -MF lto/.deps/lto-dump.TPo ../../gcc-13.3.0/gcc/lto/lto-dump.cc\nrm -rf libbackend.a\nar rcT libbackend.a gimple-match.o generic-match.o insn-attrtab.o insn-automata.o insn-dfatab.o insn-emit.o insn-extract.o insn-latencytab.o insn-modes.o insn-opinit.o insn-output.o insn-peep.o insn-preds.o insn-recog.o insn-enums.o ggc-page.o adjust-alignment.o alias.o alloc-pool.o auto-inc-dec.o auto-profile.o bb-reorder.o bitmap.o builtins.o caller-save.o calls.o ccmp.o cfg.o cfganal.o cfgbuild.o cfgcleanup.o cfgexpand.o cfghooks.o cfgloop.o cfgloopanal.o cfgloopmanip.o cfgrtl.o ctfc.o ctfout.o btfout.o symtab.o symtab-thunks.o symtab-clones.o cgraph.o cgraphbuild.o cgraphunit.o cgraphclones.o combine.o combine-stack-adj.o compare-elim.o context.o convert.o coroutine-passes.o coverage.o cppbuiltin.o cppdefault.o cprop.o cse.o cselib.o data-streamer.o data-streamer-in.o data-streamer-out.o dbgcnt.o dce.o ddg.o debug.o df-core.o df-problems.o df-scan.o dfp.o digraph.o dojump.o dominance.o domwalk.o double-int.o dse.o dumpfile.o dwarf2asm.o dwarf2cfi.o dwarf2ctf.o dwarf2out.o early-remat.o emit-rtl.o et-forest.o except.o explow.o expmed.o expr.o fibonacci_heap.o file-prefix-map.o final.o fixed-value.o fold-const.o fold-const-call.o function.o function-abi.o function-tests.o fwprop.o gcc-rich-location.o gcse.o gcse-common.o ggc-common.o ggc-tests.o gimple.o gimple-array-bounds.o gimple-builder.o gimple-expr.o gimple-if-to-switch.o gimple-iterator.o gimple-fold.o gimple-harden-conditionals.o gimple-laddress.o gimple-loop-interchange.o gimple-loop-jam.o gimple-loop-versioning.o gimple-low.o gimple-predicate-analysis.o gimple-pretty-print.o gimple-range.o gimple-range-cache.o gimple-range-edge.o gimple-range-fold.o gimple-range-gori.o gimple-range-infer.o gimple-range-op.o gimple-range-trace.o gimple-ssa-backprop.o gimple-ssa-isolate-paths.o gimple-ssa-nonnull-compare.o gimple-ssa-split-paths.o gimple-ssa-store-merging.o gimple-ssa-strength-reduction.o gimple-ssa-sprintf.o gimple-ssa-warn-access.o gimple-ssa-warn-alloca.o gimple-ssa-warn-restrict.o gimple-streamer-in.o gimple-streamer-out.o gimple-walk.o gimple-warn-recursion.o gimplify.o gimplify-me.o godump.o graph.o graphds.o graphviz.o graphite.o graphite-isl-ast-to-gimple.o graphite-dependences.o graphite-optimize-isl.o graphite-poly.o graphite-scop-detection.o graphite-sese-to-poly.o gtype-desc.o haifa-sched.o hash-map-tests.o hash-set-tests.o hw-doloop.o hwint.o ifcvt.o ree.o inchash.o incpath.o init-regs.o internal-fn.o ipa-cp.o ipa-sra.o ipa-devirt.o ipa-fnsummary.o ipa-polymorphic-call.o ipa-split.o ipa-inline.o ipa-comdats.o ipa-free-lang-data.o ipa-visibility.o ipa-inline-analysis.o ipa-inline-transform.o ipa-modref.o ipa-modref-tree.o ipa-predicate.o ipa-profile.o ipa-prop.o ipa-param-manipulation.o ipa-pure-const.o ipa-icf.o ipa-icf-gimple.o ipa-reference.o ipa-ref.o ipa-utils.o ipa.o ira.o ira-build.o ira-costs.o ira-conflicts.o ira-color.o ira-emit.o ira-lives.o jump.o langhooks.o lcm.o lists.o loop-doloop.o loop-init.o loop-invariant.o loop-iv.o loop-unroll.o lower-subreg.o lra.o lra-assigns.o lra-coalesce.o lra-constraints.o lra-eliminations.o lra-lives.o lra-remat.o lra-spills.o lto-cgraph.o lto-streamer.o lto-streamer-in.o lto-streamer-out.o lto-section-in.o lto-section-out.o lto-opts.o lto-compress.o mcf.o mode-switching.o modulo-sched.o multiple_target.o omp-offload.o omp-expand.o omp-general.o omp-low.o omp-oacc-kernels-decompose.o omp-oacc-neuter-broadcast.o omp-simd-clone.o opt-problem.o optabs.o optabs-libfuncs.o optabs-query.o optabs-tree.o optinfo.o optinfo-emit-json.o options-save.o opts-global.o ordered-hash-map-tests.o passes.o plugin.o pointer-query.o postreload-gcse.o postreload.o predict.o print-rtl.o print-rtl-function.o print-tree.o profile.o profile-count.o range.o range-op.o range-op-float.o read-md.o read-rtl.o read-rtl-function.o real.o realmpfr.o recog.o reg-stack.o regcprop.o reginfo.o regrename.o regstat.o reload.o reload1.o reorg.o resource.o rtl-error.o rtl-ssa/accesses.o rtl-ssa/blocks.o rtl-ssa/changes.o rtl-ssa/functions.o rtl-ssa/insns.o rtl-tests.o rtl.o rtlhash.o rtlanal.o rtlhooks.o rtx-vector-builder.o run-rtl-passes.o sched-deps.o sched-ebb.o sched-rgn.o sel-sched-ir.o sel-sched-dump.o sel-sched.o selftest-rtl.o selftest-run-tests.o sese.o shrink-wrap.o simplify-rtx.o sparseset.o spellcheck.o spellcheck-tree.o splay-tree-utils.o sreal.o stack-ptr-mod.o statistics.o stmt.o stor-layout.o store-motion.o streamer-hooks.o stringpool.o substring-locations.o target-globals.o targhooks.o timevar.o toplev.o tracer.o trans-mem.o tree-affine.o asan.o tsan.o ubsan.o sanopt.o sancov.o tree-call-cdce.o tree-cfg.o tree-cfgcleanup.o tree-chrec.o tree-complex.o tree-data-ref.o tree-dfa.o tree-diagnostic.o tree-diagnostic-client-data-hooks.o tree-diagnostic-path.o tree-dump.o tree-eh.o tree-emutls.o tree-if-conv.o tree-inline.o tree-into-ssa.o tree-iterator.o tree-logical-location.o tree-loop-distribution.o tree-nested.o tree-nrv.o tree-object-size.o tree-outof-ssa.o tree-parloops.o tree-phinodes.o tree-predcom.o tree-pretty-print.o tree-profile.o tree-scalar-evolution.o tree-sra.o tree-switch-conversion.o tree-ssa-address.o tree-ssa-alias.o tree-ssa-ccp.o tree-ssa-coalesce.o tree-ssa-copy.o tree-ssa-dce.o tree-ssa-dom.o tree-ssa-dse.o tree-ssa-forwprop.o tree-ssa-ifcombine.o tree-ssa-live.o tree-ssa-loop-ch.o tree-ssa-loop-im.o tree-ssa-loop-ivcanon.o tree-ssa-loop-ivopts.o tree-ssa-loop-manip.o tree-ssa-loop-niter.o tree-ssa-loop-prefetch.o tree-ssa-loop-split.o tree-ssa-loop-unswitch.o tree-ssa-loop.o tree-ssa-math-opts.o tree-ssa-operands.o gimple-range-path.o tree-ssa-phiopt.o tree-ssa-phiprop.o tree-ssa-pre.o tree-ssa-propagate.o tree-ssa-reassoc.o tree-ssa-sccvn.o tree-ssa-scopedtables.o tree-ssa-sink.o tree-ssa-strlen.o tree-ssa-structalias.o tree-ssa-tail-merge.o tree-ssa-ter.o tree-ssa-threadbackward.o tree-ssa-threadedge.o tree-ssa-threadupdate.o tree-ssa-uncprop.o tree-ssa-uninit.o tree-ssa.o tree-ssanames.o tree-stdarg.o tree-streamer.o tree-streamer-in.o tree-streamer-out.o tree-tailcall.o tree-vect-generic.o gimple-isel.o tree-vect-patterns.o tree-vect-data-refs.o tree-vect-stmts.o tree-vect-loop.o tree-vect-loop-manip.o tree-vect-slp.o tree-vect-slp-patterns.o tree-vectorizer.o tree-vector-builder.o tree-vrp.o tree.o tristate.o typed-splay-tree.o valtrack.o value-pointer-equiv.o value-query.o value-range.o value-range-pretty-print.o value-range-storage.o value-relation.o value-prof.o var-tracking.o varasm.o varpool.o vec-perm-indices.o vmsdbgout.o vr-values.o vtable-verify.o warning-control.o web.o wide-int.o wide-int-print.o i386.o analyzer/analysis-plan.o analyzer/analyzer.o analyzer/analyzer-language.o analyzer/analyzer-logging.o analyzer/analyzer-pass.o analyzer/analyzer-selftests.o analyzer/bar-chart.o analyzer/bounds-checking.o analyzer/call-details.o analyzer/call-info.o analyzer/call-string.o analyzer/call-summary.o analyzer/checker-event.o analyzer/checker-path.o analyzer/complexity.o analyzer/constraint-manager.o analyzer/diagnostic-manager.o analyzer/engine.o analyzer/feasible-graph.o analyzer/function-set.o analyzer/infinite-recursion.o analyzer/kf.o analyzer/kf-analyzer.o analyzer/kf-lang-cp.o analyzer/known-function-manager.o analyzer/pending-diagnostic.o analyzer/program-point.o analyzer/program-state.o analyzer/region.o analyzer/region-model.o analyzer/region-model-asm.o analyzer/region-model-manager.o analyzer/region-model-reachability.o analyzer/sm.o analyzer/sm-file.o analyzer/sm-fd.o analyzer/sm-malloc.o analyzer/sm-pattern-test.o analyzer/sm-sensitive.o analyzer/sm-signal.o analyzer/sm-taint.o analyzer/state-purge.o analyzer/store.o analyzer/supergraph.o analyzer/svalue.o analyzer/trimmed-graph.o analyzer/varargs.o x86-tune-sched.o x86-tune-sched-bd.o x86-tune-sched-atom.o x86-tune-sched-core.o i386-options.o i386-builtins.o i386-expand.o i386-features.o linux.o gnu-property.o host-linux.o\nif [ -f ../stage_final ] \\\n   && cmp -s ../stage_current ../stage_final; then \\\n  cp ../prev-gcc/cc1-checksum.cc cc1-checksum.cc; \\\nelse \\\n  build/genchecksum c/c-lang.o c-family/stub-objc.o attribs.o c/c-errors.o c/c-decl.o c/c-typeck.o c/c-convert.o c/c-aux-info.o c/c-objc-common.o c/c-parser.o c/c-fold.o c/gimple-parser.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a libcommon.a ../libcpp/libcpp.a ../libiberty/libiberty.a   ../libdecnumber/libdecnumber.a ../libbacktrace/.libs/libbacktrace.a \\\n                     checksum-options > cc1-checksum.cc.tmp &&           \\\n  ../../gcc-13.3.0/gcc/../move-if-change cc1-checksum.cc.tmp cc1-checksum.cc; \\\nfi\nif [ -f ../stage_final ] \\\n   && cmp -s ../stage_current ../stage_final; then \\\n   cp ../prev-gcc/cc1plus-checksum.cc cc1plus-checksum.cc; \\\nelse \\\n  build/genchecksum cp/cp-lang.o c-family/stub-objc.o cp/call.o cp/class.o cp/constexpr.o cp/constraint.o cp/coroutines.o cp/cp-gimplify.o cp/cp-objcp-common.o cp/cp-ubsan.o cp/cvt.o cp/contracts.o cp/cxx-pretty-print.o cp/decl.o cp/decl2.o cp/dump.o cp/error.o cp/except.o cp/expr.o cp/friend.o cp/init.o cp/lambda.o cp/lex.o cp/logic.o cp/mangle.o cp/mapper-client.o cp/mapper-resolver.o cp/method.o cp/module.o cp/name-lookup.o cp/optimize.o cp/parser.o cp/pt.o cp/ptree.o cp/rtti.o cp/search.o cp/semantics.o cp/tree.o cp/typeck.o cp/typeck2.o cp/vtable-class-hierarchy.o attribs.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a ../libcody/libcody.a libcommon.a ../libcpp/libcpp.a ../libiberty/libiberty.a   ../libdecnumber/libdecnumber.a ../libbacktrace/.libs/libbacktrace.a \\\n                     checksum-options > cc1plus-checksum.cc.tmp &&         \\\n  ../../gcc-13.3.0/gcc/../move-if-change cc1plus-checksum.cc.tmp cc1plus-checksum.cc; \\\nfi\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o f951 \\\n        fortran/arith.o fortran/array.o fortran/bbt.o fortran/check.o fortran/class.o fortran/constructor.o fortran/cpp.o fortran/data.o fortran/decl.o fortran/dump-parse-tree.o fortran/error.o fortran/expr.o fortran/interface.o fortran/intrinsic.o fortran/io.o fortran/iresolve.o fortran/match.o fortran/matchexp.o fortran/misc.o fortran/module.o fortran/openmp.o fortran/options.o fortran/parse.o fortran/primary.o fortran/resolve.o fortran/scanner.o fortran/simplify.o fortran/st.o fortran/symbol.o fortran/target-memory.o  fortran/convert.o fortran/dependency.o fortran/f95-lang.o fortran/trans.o fortran/trans-array.o fortran/trans-common.o fortran/trans-const.o fortran/trans-decl.o fortran/trans-expr.o fortran/trans-intrinsic.o fortran/trans-io.o fortran/trans-openmp.o fortran/trans-stmt.o fortran/trans-types.o fortran/frontend-passes.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a -lz libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a  attribs.o \\\n        -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o lto1 \\\n        lto/lto-lang.o lto/lto.o lto/lto-object.o attribs.o lto/lto-partition.o lto/lto-symtab.o lto/lto-common.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz  libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o lto-dump \\\n        lto/lto-lang.o lto/lto-object.o attribs.o lto/lto-partition.o lto/lto-symtab.o lto/lto-dump.o lto/lto-common.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz  libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a\nif [ -f ../stage_final ] \\\n   && cmp -s ../stage_current ../stage_final \\\n   && [ -f ../prev-gcc/cc1obj-checksum.cc ]; then \\\n  cp ../prev-gcc/cc1obj-checksum.cc cc1obj-checksum.cc; \\\nelse \\\n  build/genchecksum objc/objc-lang.o objc/objc-act.o hash-table.o objc/objc-runtime-shared-support.o objc/objc-gnu-runtime-abi-01.o objc/objc-next-runtime-abi-01.o objc/objc-next-runtime-abi-02.o objc/objc-encoding.o objc/objc-map.o attribs.o c/c-errors.o c/c-decl.o c/c-typeck.o c/c-convert.o c/c-aux-info.o c/c-objc-common.o c/c-parser.o c/c-fold.o c/gimple-parser.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o \\\n        libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a libcommon.a ../libcpp/libcpp.a ../libiberty/libiberty.a   ../libdecnumber/libdecnumber.a ../libbacktrace/.libs/libbacktrace.a checksum-options > cc1obj-checksum.cc.tmp && \\\n  ../../gcc-13.3.0/gcc/../move-if-change cc1obj-checksum.cc.tmp cc1obj-checksum.cc; \\\nfi\ng++  -fno-PIE -c  -DIN_GCC_FRONTEND -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -I. -I. -I../../gcc-13.3.0/gcc -I../../gcc-13.3.0/gcc/. -I../../gcc-13.3.0/gcc/../include  -I../../gcc-13.3.0/gcc/../libcpp/include -I../../gcc-13.3.0/gcc/../libcody  -I../../gcc-13.3.0/gcc/../libdecnumber -I../../gcc-13.3.0/gcc/../libdecnumber/bid -I../libdecnumber -I../../gcc-13.3.0/gcc/../libbacktrace   -o cc1-checksum.o -MT cc1-checksum.o -MMD -MP -MF ./.deps/cc1-checksum.TPo cc1-checksum.cc\ng++  -fno-PIE -c  -DIN_GCC_FRONTEND -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -I. -I. -I../../gcc-13.3.0/gcc -I../../gcc-13.3.0/gcc/. -I../../gcc-13.3.0/gcc/../include  -I../../gcc-13.3.0/gcc/../libcpp/include -I../../gcc-13.3.0/gcc/../libcody  -I../../gcc-13.3.0/gcc/../libdecnumber -I../../gcc-13.3.0/gcc/../libdecnumber/bid -I../libdecnumber -I../../gcc-13.3.0/gcc/../libbacktrace   -o cc1obj-checksum.o -MT cc1obj-checksum.o -MMD -MP -MF ./.deps/cc1obj-checksum.TPo cc1obj-checksum.cc\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o cc1 c/c-lang.o c-family/stub-objc.o attribs.o c/c-errors.o c/c-decl.o c/c-typeck.o c/c-convert.o c/c-aux-info.o c/c-objc-common.o c/c-parser.o c/c-fold.o c/gimple-parser.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o \\\n  cc1-checksum.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a  -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz\ng++  -fno-PIE -c  -DIN_GCC_FRONTEND -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -I. -I. -I../../gcc-13.3.0/gcc -I../../gcc-13.3.0/gcc/. -I../../gcc-13.3.0/gcc/../include  -I../../gcc-13.3.0/gcc/../libcpp/include -I../../gcc-13.3.0/gcc/../libcody  -I../../gcc-13.3.0/gcc/../libdecnumber -I../../gcc-13.3.0/gcc/../libdecnumber/bid -I../libdecnumber -I../../gcc-13.3.0/gcc/../libbacktrace   -o cc1plus-checksum.o -MT cc1plus-checksum.o -MMD -MP -MF ./.deps/cc1plus-checksum.TPo cc1plus-checksum.cc\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o cc1obj \\\n      objc/objc-lang.o objc/objc-act.o hash-table.o objc/objc-runtime-shared-support.o objc/objc-gnu-runtime-abi-01.o objc/objc-next-runtime-abi-01.o objc/objc-next-runtime-abi-02.o objc/objc-encoding.o objc/objc-map.o attribs.o c/c-errors.o c/c-decl.o c/c-typeck.o c/c-convert.o c/c-aux-info.o c/c-objc-common.o c/c-parser.o c/c-fold.o c/gimple-parser.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o cc1obj-checksum.o \\\n      libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a  -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz\ng++ -no-pie   -g -O2     -DIN_GCC  -DCROSS_DIRECTORY_STRUCTURE   -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Wconditionally-supported -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings   -DHAVE_CONFIG_H -static-libstdc++ -static-libgcc  -o cc1plus \\\n      cp/cp-lang.o c-family/stub-objc.o cp/call.o cp/class.o cp/constexpr.o cp/constraint.o cp/coroutines.o cp/cp-gimplify.o cp/cp-objcp-common.o cp/cp-ubsan.o cp/cvt.o cp/contracts.o cp/cxx-pretty-print.o cp/decl.o cp/decl2.o cp/dump.o cp/error.o cp/except.o cp/expr.o cp/friend.o cp/init.o cp/lambda.o cp/lex.o cp/logic.o cp/mangle.o cp/mapper-client.o cp/mapper-resolver.o cp/method.o cp/module.o cp/name-lookup.o cp/optimize.o cp/parser.o cp/pt.o cp/ptree.o cp/rtti.o cp/search.o cp/semantics.o cp/tree.o cp/typeck.o cp/typeck2.o cp/vtable-class-hierarchy.o attribs.o c-family/c-common.o c-family/c-cppbuiltin.o c-family/c-dump.o c-family/c-format.o c-family/c-gimplify.o c-family/c-indentation.o c-family/c-lex.o c-family/c-omp.o c-family/c-opts.o c-family/c-pch.o c-family/c-ppoutput.o c-family/c-pragma.o c-family/c-pretty-print.o c-family/c-semantics.o c-family/c-ada-spec.o c-family/c-ubsan.o c-family/known-headers.o c-family/c-attribs.o c-family/c-warn.o c-family/c-spellcheck.o i386-c.o glibc-c.o cc1plus-checksum.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a ../libcody/libcody.a  \\\n        libcommon.a ../libcpp/libcpp.a   ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a  -lisl -lmpc -lmpfr -lgmp -rdynamic  -lz\ncollect2: fatal error: ld terminated with signal 9 [Killed]\ncompilation terminated.\nmake[2]: *** [../../gcc-13.3.0/gcc/cp/Make-lang.in:145: cc1plus] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nmake[2]: Leaving directory '/tmp/guix-build-gcc-cross-x86_64-linux-gnu-13.3.0.drv-0/build/gcc'\nmake[1]: *** [Makefile:4627: all-gcc] Error 2\nmake[1]: Leaving directory '/tmp/guix-build-gcc-cross-x86_64-linux-gnu-13.3.0.drv-0/build'\nmake: *** [Makefile:1042: all] Error 2\nerror: in phase 'build': uncaught exception:\n%exception #<&invoke-error program: \"make\" arguments: (\"-j\" \"8\" \"FLAGS_FOR_TARGET=-B/gnu/store/x374h6pay478zxafyy1l263qvanznlj0-glibc-cross-x86_64-linux-gnu-2.31/lib\" \"CFLAGS=-g0 -O2\") exit-status: 2 term-signal: #f stop-signal: #f>\nphase `build' failed after 1170.1 seconds\ncommand \"make\" \"-j\" \"8\" \"FLAGS_FOR_TARGET=-B/gnu/store/x374h6pay478zxafyy1l263qvanznlj0-glibc-cross-x86_64-linux-gnu-2.31/lib\" \"CFLAGS=-g0 -O2\" failed with status 2\n```\n\n</p>\n</details> \n\nI will try again and see if I get the same error.\n\nedit: It seems likely this may be an OOM (or similar) in the container. So I will try again using podman with more resources.",
          "created_at": "2025-06-17T15:34:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 24382,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2981641162,
          "user": "willcl-ark",
          "body": "Ok I've tried this again twice more:\n\n- M3-aarch64 host\n- using podman\n- both alpine and debian containers\n- building with HOSTS=x86_64-linux-gnu\n\n...and both runs, whilst a little slower than previously, completed successfully.\n\n@Sjors was your container totally fresh for your run, or has it been restored from some kind of saved state?",
          "created_at": "2025-06-17T19:47:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 338,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2984828907,
          "user": "Sjors",
          "body": "@willcl-ark I'm using UTM: https://mac.getutm.app (not Podman or Docker)\n\nDefinitely not a fresh machine, it's been making guix builds for while. I could make a fresh one if you can't reproduce, but it's a bit of a pain to setup a guix environment from scratch.",
          "created_at": "2025-06-18T15:58:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 261,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2984912270,
          "user": "maflcko",
          "body": "What are the minimal steps to reproduce? Can you run a normal shell?\n\n```\nguix time-machine --commit=53396a22afc04536ddf75d8f82ad2eafa5082725 -- shell --container --pure bash",
          "created_at": "2025-06-18T16:23:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 174,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2987111243,
          "user": "Sjors",
          "body": "- install UTM\n- create Ubuntu 24.10 machine\n- setup guix environment (method 4 of installing guix through apt)\n  - I don't use substitutes, but it might not matter for this issue \n- checkout master @ c8abd972818f83d90bf50b250131f338034460ef and do a guix build; it should succeed\n- checkout any newer commit, it should fail\n\n```\n$ guix time-machine --commit=53396a22afc04536ddf75d8f82ad2eafa5082725 -- shell --container --pure bash\nThe following derivation will be built:\n  /gnu/store/70dmz7dxm15949rbxiyjkk8gvgas86g4-profile.drv\n\nbuilding CA certificate bundle...\nlisting Emacs sub-directories...\nbuilding fonts directory...\nbuilding directory of Info manuals...\nbuilding profile with 1 package...\nsjors@ubuntu ~ [env]$\n```",
          "created_at": "2025-06-19T07:56:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 724,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2987187401,
          "user": "maflcko",
          "body": "Sorry, I was asking for the isolated guix command that fails. This can help to see if the issue is guix related or bitcoin-core related.\n\nI was thinking about the shell, because the error message says: `guix shell: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument`.\n\nMaybe re-try via `V=1 VERBOSE=1 MAX_JOBS=1 HOSTS=arm64-apple-darwin ./contrib/guix/guix-build` to get a linear log?",
          "created_at": "2025-06-19T08:23:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 433,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2987375199,
          "user": "Sjors",
          "body": "That doesn't reveal anything new unfortunately. With fed41b75fbfa6d14cce852863271b1fb0206eef0 checked out.\n\n```\ngit clean -dfx\nV=1 VERBOSE=1 MAX_JOBS=1 HOSTS=\"x86_64-linux-gnu\" ./contrib/guix/guix-build\n\n...\n\nbuilding /gnu/store/hiqwnz4mhiad1zcqyf250b1ws0s36djc-attrs-21.2.0.tar.gz.drv...\nThe following builds are still in progress:\n  /gnu/store/hiqwnz4mhiad1zcqyf250b1ws0s36djc-attrs-21.2.0.tar.gz.drv\n  /gnu/store/sf5wwnpy8mr9l8iic2xz5bmg3bppjrj9-asynctest-0.13.0.tar.gz.drv\n  /gnu/store/grpq0sq301rwsz6h4vbdx9sgvi64wai4-Python-2.7.18.tar.xz.drv\n\nnote: keeping build directory `/tmp/guix-build-Python-2.7.18.tar.xz.drv-5'\nnote: keeping build directory `/tmp/guix-build-bash.drv-5'\nnote: keeping build directory `/tmp/guix-build-asynctest-0.13.0.tar.gz.drv-5'\nnote: keeping build directory `/tmp/guix-build-attrs-21.2.0.tar.gz.drv-5'\nguix shell: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument\n```\n\nFull log: https://gist.github.com/Sjors/47d6fc2162721c8afa405815bfff4108\n\nThough this seems to ignore `MAX_JOBS=1`?",
          "created_at": "2025-06-19T09:22:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1067,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2987393468,
          "user": "fanquake",
          "body": "Does running the following work:\n```bash\nguix build --system=armhf-linux hello\n```",
          "created_at": "2025-06-19T09:27:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 82,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2987414163,
          "user": "Sjors",
          "body": "@fanquake that produces the same error, so I guess that's useful info (and it's independent of Bitcoin Core).\n\nhttps://gist.github.com/Sjors/af35816417ead5a45956cda65b8456b8\n\nI'm confused by what `armhf-linux` is doing though since I'm only trying to build `HOSTS=\"x86_64-linux-gnu\"`\n\n\nAdditional info:\n\n```\n$ guix build --list-systems\nThe available systems are:\n\n   - aarch64-linux [current]\n   - armhf-linux\n   - i586-gnu\n   - i686-linux\n   - mips64el-linux\n   - powerpc-linux\n   - powerpc64le-linux\n   - riscv64-linux\n   - x86_64-linux\n```\n\n",
          "created_at": "2025-06-19T09:32:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 544,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2987451591,
          "user": "Sjors",
          "body": "It happens for every `--system` I tried so far.\n\nMaybe the issue has nothing to do with the specific new packages installed in #32431, but rather an inability of my guix system to add _any_ new packages. I'll try to test that scenario somehow...\n\n---\n\nIt doesn't seem that simple either, e.g. I can add something random and it builds fine:\n\n```\ndiff --git a/contrib/guix/manifest.scm b/contrib/guix/manifest.scm\nindex 92fc1791f0..42c138df03 100644\n--- a/contrib/guix/manifest.scm\n+++ b/contrib/guix/manifest.scm\n@@ -1,5 +1,6 @@\n (use-modules (gnu packages)\n              ((gnu packages bash) #:select (bash-minimal))\n+             (gnu packages aspell)\n              (gnu packages bison)\n              ((gnu packages certs) #:select (nss-certs))\n              ((gnu packages cmake) #:select (cmake-minimal))\n@@ -527,6 +528,7 @@ inspecting signatures in Mach-O binaries.\")\n  (append\n   (list ;; The Basics\n         bash-minimal\n+        aspell\n         which\n         coreutils-minimal\n         ;; File(system) inspection\n```",
          "created_at": "2025-06-19T09:45:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1024,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3056031910,
          "user": "Sjors",
          "body": "Going to setup a fresh UTM instance, this time using Apple Virtualization (but not Rosetta, since I don't want x86_64) instead of Qemu. Let's see if that (a) works and (b) doesn't break again after a few months. The other difference would be that I'm installing Ubuntu 25.04 instead of 24.10.\n\n---\n\nSteps I used after installing the OS (mostly repeating my own bash history from the previous VM).\n\nFor some reason it wasn't using the full 100GB I asked for, as seen by `sudo lsblk`. Maybe I wasn't paying attention during installation? Anyway, fix that first:\n\n```\nsudo lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv\nsudo resize2fs /dev/ubuntu-vg/ubuntu-lv\n```\n\n```sh\n$ sudo apt install guix make\n$ guix --version\nguix (GNU Guix) 1.4.0\n```\n\nAdd to `.bashrc`:\n\n```sh\nexport SDK_PATH=$HOME/SDKs\nexport SOURCES_PATH=\"$HOME/depends-SOURCES_PATH\"\nexport BASE_CACHE=\"$HOME/depends-BASE_CACHE\"\nexport ADDITIONAL_GUIX_COMMON_FLAGS='--max-jobs=4 --no-substitutes'\n\nexport DETACHED_SIGS_REPO=\"$HOME/bitcoin-detached-sigs\"\nexport GUIX_SIGS_REPO=\"$HOME/guix.sigs\"\n```\n\n\n\n(exit and login again)\n\n```sh\nmkdir depends-SOURCES_PATH\nmkdir depends-BASE_CACHE\nmkdir SDKs\n```\n\nFrom the host machine:\n\n```\nscp Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz guix-mbp:SDKs \n```\n\n```sh\ncd SDKs\ntar -xzf Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nrm Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\ncd ..\n\ngit clone https://github.com/bitcoin/bitcoin.git\ngit rev-parse HEAD\n```\n\nAt the time I was at master @ a40e9536588c366886de4f4b9d67b8665a509929.\n\nAnd go!\n\n```sh\ncontrib/guix/guix-build\n```\n\nDeal with the usual hash mismatches (see #31266):\n\n```\nguix download https://www.gnupg.org/ftp/gcrypt/gnutls/v3.7/gnutls-3.7.2.tar.xz\nguix download https://gnupg.org/ftp/gcrypt/libgcrypt/libgcrypt-1.8.8.tar.bz2\nguix download https://gnupg.org/ftp/gcrypt/libgpg-error/libgpg-error-1.42.tar.bz2\n```\n\nI can't find `net-tools-1.60` online anywhere, so just allowing a substitute to fetch it:\n\n```\nguix build /gnu/store/12iixx4vr706phhwi5xb9a0i1wa7f0jw-net-tools-1.60-0.479bb4a.zip.drv\n```\n\n(could probably just use `guix download` if I know the url to use)\n\nAnd failing openssl tests (see install docs):\n\n```\n...\n```\n\n",
          "created_at": "2025-07-10T07:24:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2226,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3060808833,
          "user": "Sjors",
          "body": "The new machine also gives me the \"cannot set armhf-linux personality\" error.\n\nIt seems to happen after successfully building one package (with `--max-jobs=1`). Each time you do `guix build` it'll build another package and throw this error.\n\nIf I switch back to c8abd972818f83d90bf50b250131f338034460ef then `guix build` just works. At least after I fix the app armor issue:\n\nIn `/etc/apparmor.d/guix`:\n\n```\nabi <abi/4.0>,\ninclude <tunables/global>\n\n# Profile for the guix binary\nprofile guix /usr/bin/guix flags=(unconfined) {\n  userns,\n  # Site-specific additions and overrides\n  include if exists <local/guix>\n}\n\n# Profile for unprivileged user namespaces\nprofile unprivileged_userns flags=(unconfined) {\n}\n```\n\nAnd then `sudo apparmor_parser -r /etc/apparmor.d/guix`\n\nBut the following fails regardless:\n\n```\nguix build --system=armhf-linux hello --no-substitutes\nThe following derivations will be built:\n  /gnu/store/y81j374bznilwn5dqnwysjdmg02xi1gw-hello-2.12.1.drv\n  /gnu/store/16kwj1sika6b0lky77kwpfz6cs9cgi4k-diffutils-3.8.drv\n...\n  /gnu/store/rl2ajq6hfph99pymwfm72cd2rb2hqzra-tar-1.34.drv\n  /gnu/store/9rhm0cz4wc1az3c99jpjran28nwqz280-tar-1.34.tar.xz.drv\nguix build: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument\n```\n\nBut this one does work:\n\n```\nguix build --system=aarch64-linux  hello --no-substitutes\n```\n\nI'll see if I can narrow down the culprit package to one of these and/or one of their dependencies:\n\n```\n((gnu packages python-science) #:select (python-scikit-build-core))\n((gnu packages python-xyz) #:select (python-pydantic-2 python-pydantic-core))\n```\n",
          "created_at": "2025-07-11T06:32:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1629,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3060956972,
          "user": "Sjors",
          "body": "Perhaps an easier thing for me to test would be if switching to guix own python-lief 0.16.6 package magically fixes things. This would require a time machine bump past: https://codeberg.org/guix/guix/pulls/353\n\n@fanquake in https://github.com/bitcoin/bitcoin/pull/32764#pullrequestreview-2942922469 you mentioned having a time machine bump branch?\n\nMeanwhile I'll try if the simple act of adding either `python-scikit-build-core`, `python-pydantic-2` or `python-pydantic-core` on top of https://github.com/bitcoin/bitcoin/commit/c8abd972818f83d90bf50b250131f338034460ef breaks my guix machine. Calling `guix gc` uninstalls everything from the Bitcoin Core manifest, so might be a practical (albeit slow) way of trying these three things independently.\n\n(presumably I'd have to remove `python-lief` from the manifest entirely to get far enough into the `guix build` process to trigger the original error) ",
          "created_at": "2025-07-11T07:19:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 904,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3062401151,
          "user": "Sjors",
          "body": "I created a branch to debug this: https://github.com/Sjors/bitcoin/commits/2025/07/guix-aarch64-debug/\n\nIt starts from https://github.com/bitcoin/bitcoin/commit/c8abd972818f83d90bf50b250131f338034460ef. First it drops `python-tomli` and `lief` and disables the security checks. I run `HOSTS=\"arm64-apple-darwin\" contrib/guix/guix-build` and make sure it succeeds.\n\nNext I add `python-scikit-build-core` and pretend its needed for `signapple`. Depending on whether that succeeds, I'll add `python-pydantic-2` and `python-pydantic-core` to see if the failure is there. And if it fails, I'll try to drill down to the sub-sub-sub dependency that's the culprit. If so then it's probably an upstream issue. But if it doesn't fail, then the issue might be with our own LIEF package.",
          "created_at": "2025-07-11T13:43:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 775,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3066701981,
          "user": "Sjors",
          "body": "So far I found:\n\n- `python-scikit-build-core` builds fine\n- `python-pydantic-2` fails\n- `python-pydantic-core` fails\n\nMy current suspicion is that `Python-2.7.18` / `python2-minimal` is the culprit, based on what was being built around the time it fails.\n\nHowever I'm unable to produce the failure if I just insert `python-2.7` somewhere in the manifest. Part of the problem is that I don't really understand how these manifest files work.\n\nBut if my suspicion is current, then it might be a matter of replacing `python-2.7` with `python2-minimal` somewhere in the dependency spider web. Or of just getting rid of python 2.",
          "created_at": "2025-07-13T07:55:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 623,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3084139301,
          "user": "dongcarl",
          "body": "Don't have full context but it's curious what causes `guix` to want to `set armhf-linux personality` in the first place.\n\nClearly M4 macOS hosts are `aarch64-linux`, and as @Sjors mentions:\n- `guix build --system=armhf-linux hello` \"produces the same error\"\n- `guix build --system=aarch64-linux  hello --no-substitutes` does work\n\nAnother clue from the Guix manual for `--system=system` (added [here](https://issues.guix.gnu.org/31473)):\n\n> **Note**: Building for an armhf-linux system is unconditionally enabled on aarch64-linux machines, although certain aarch64 chipsets do not allow for this functionality, notably the ThunderX. \n\nPerhaps the M4 chipset doesn't allow for this functionality either.\n\n@Sjors what if you try to build the upstream [lief 0.16.6](https://packages.guix.gnu.org/packages/python-lief/0.16.6/)?",
          "created_at": "2025-07-17T13:44:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 823,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3084264672,
          "user": "Sjors",
          "body": "> Perhaps the M4 chipset doesn't allow for this functionality either.\n\nThat's quite possible, because trying to run the arm CI job also doesn't work, see #31344.\n\n---\n\nNot sure how to go about building the upstream lief 0.16.6:\n\n```\n$ guix install python-lief@0.16.6\nguix install: error: python-lief: package not found for version 0.16.6\n```\n\nGuess I need to do `guix pull` first?",
          "created_at": "2025-07-17T14:18:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 380,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3085012171,
          "user": "Sjors",
          "body": "Yes that was needed... Afterwards:\n\n```\n$ guix --version\nguix (GNU Guix) 945c6ff9f222efed460ce8ab31fb6911f89436c9\n...\nguix install python-lief@0.16.6 --no-substitutes\n...\n\nbuilding /gnu/store/1krys8fl33k7bzr9md8fgd38k41av1fk-babel-2.16.0.tar.gz.drv...\nguix install: error: while setting up the build environment: cannot set armhf-linux personality: Invalid argument\n```\n\n> Don't have full context but it's curious what causes `guix` to want to `set armhf-linux personality` in the first place.\n\nIt must be one of the dependencies of lief, because without that I can do guix builds just fine on this machine - and have been for several major releases.\n",
          "created_at": "2025-07-17T18:20:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 651,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3631245979,
          "user": "Sjors",
          "body": "Giving up on this for now, my x86_64 box works fine.",
          "created_at": "2025-12-09T09:35:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 52,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4776,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1933055748,
      "number": 28620,
      "title": "rpc: make loadtxoutset async",
      "body": "### Please describe the feature you'd like to see added.\n\n`loadtxoutset` should return more quickly, perhaps just checking that the file exists. There should be another RPC to monitor the status.\n\n### Is your feature related to a problem, if so please describe it.\n\n1. `loadtxoutset` takes too long, even requiring `-rpctimeout=0`. This makes it hard for potential integrations like Umbrel, BTCPay server or Specter desktop to show progress.\r\n\r\n2. Progress can only be followed via the debug log, which is too noisy during IBD.\n\n### Describe the solution you'd like\n\nIt could follow the same pattern as `scanblocks`, with `start`, `status` and `abort`. The latter two won't need an argument. This would not be backwards compatible, but imo that's fine as long as it lands before mainnet support.\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2023-10-09T13:20:45Z",
      "updated_at": "2025-12-09T09:32:48Z",
      "closed_at": "2025-12-09T09:32:48Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/28620",
      "labels": [
        "Feature"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 944,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1826219268,
      "number": 28179,
      "title": "test: 999 of 999 multisig",
      "body": "### Motivation\r\n\r\nThe stack size limit of 1000 [confuses even those who designed it](https://bitcoin.stackexchange.com/questions/117317/how-can-i-create-a-multi-sign-for-a-large-number-of-users/117320?noredirect=1#comment134168_117320).\r\n\r\nIt would be useful to have a test to demonstrate that a 999 of 999 Taproot multisig is possible: `multi_a(999, P1, …, P999)`. Especially to make sure our wallet can spend from it and doesn't allow a bigger one (no 999 of 1000 and no 1 of 1000).\r\n\r\n### Possible solution\r\n\r\nEither expand the descriptors unit test and/or one of the wallet functional tests.\r\n\r\n### Useful Skills\r\n\r\nPython and a basic understanding of [output descriptors](https://github.com/bitcoin/bitcoin/blob/master/doc/descriptors.md). Understanding (Mini)script (interpreter) is not necessary unless you actually want to understand why the limit is there.\r\n\r\n### Guidance for new contributors\r\n\r\nWant to work on this issue?\r\n\r\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2023-07-28T10:56:14Z",
      "updated_at": "2025-12-09T09:32:06Z",
      "closed_at": "2025-12-09T09:32:06Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/28179",
      "labels": [
        "Tests",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 2563083221,
          "user": "yuvicc",
          "body": "What's the status of this, @Sjors? If no one is working can I take this up?",
          "created_at": "2024-12-26T20:33:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2608935652,
          "user": "tnndbtc",
          "body": "By the way, PR https://github.com/bitcoin/bitcoin/pull/31719 is submitted to fix the performance issue that was experienced by PR https://github.com/bitcoin/bitcoin/pull/28212.",
          "created_at": "2025-01-23T06:04:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 176,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2609129788,
          "user": "Sjors",
          "body": "@i-am-yuvi you can always do that. But it seems @tnndbtc has something that you may want to review or build on top of.",
          "created_at": "2025-01-23T08:18:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 118,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1120,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3669421512,
      "number": 33958,
      "title": "Net split meta issue",
      "body": "Note: This is just a thought dump for now.. an attempt at a high-level roadmap based on an initial POC and the feedback I've gathered thus far. I will edit this meta issue frequently as a real roadmap takes shape.\n\nThe goal of this project to cleanly separate the net/net_processing layers, so that neither depends on the implementation details of the other.\n\nIn order to achieve that, we'll need to de-tangle the two subsystems (namely `CConnman` and `PeerManager`) and connect them instead via abstract interfaces.\n\nAn (ugly) initial POC can be seen here: https://github.com/theuni/bitcoin/tree/multiprocess_p2p. Note that it will likely not be rebased because it was not intended to be used as-is. Instead, chunks will be extracted and PR'd separately.\n\nThe above POC takes the split even further, moving all p2p logic into a separate binary, and communicating over IPC. This is not a goal of this project, but it does highlight how useful the split is.\n\n## Major Projects:\n\n### Reduce `PeerManager`'s usage of `CNode`\nThe main hurdle for creating a clean separation between `CConnman` and `PeerManager` is the fact that `CNode` is used by both.\n\n`CNode` is an implementation detail of `CConnman`, and its leakage causes (among other things) lifetime and locking issues. The `Peer` structure was created years ago, with the [intention that it would hold the state](https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp#L219) that `PeerManager` cares about. Unfortunately, this work was never complete.\n\n**So the first chunk of work is moving the necessary state from `CNode` to `Peer`**. In many cases, the logic belongs purely at one layer or another. In others (for ex, node id, connection time, etc), both layers will keep copies.\n\nIn order to do that cleanly, some helper functions will move out of `CConnman`/`CNode` and into `PeerManager`/`Peer`, and others will be split into generic helpers used by both layers.\n\n### Move the message handling loop to `PeerManager`\n\nWhen `PeerManager`'s dependency on `CConnman`/`CNode` is reduced to a reasonably small surface, the message handling loop can be move out of `CConnman`.\nRather than iterating all `CNode`s, it will now iterate all `Peer`s. Ugliness like `ForNode`/`ForEachNode` can be removed.\n\n### Dropped usage of `CNode` in `PeerManager`\n\nWith the event loop moved and nascent interfaces beginning to take shape, `PeerManager` should be able to operate without `CNode`. At this point, all of `CConnman`'s public-facing functions will take a `NodeId` rather than `CNode` pointer.\n\n### Virtual interfaces and dropped includes\n\nLastly, the layers will be severed, includes dropped, and they will only communicate via virtual interfaces. `PeerMan`'s `NetEventsInterface` will be filled in, and `CConnman` will implement a new virtual interface.\n\n## Outstanding questions\n\n(This list will expand as the project moves along)\n\n### Unit tests and fuzzers\nIt's not immediately obvious what should happen to tests and fuzzers which rely on:\n- `CNode`'s internals\n- Assumptions about `CConnman`/`PeerManager` behavior\n- Assumptions about layer violations between the two\n\nMANY tests rely on implementation details. Those tests are in conflict with the aim of this project, which is to largely turn those subsystems into black boxes. However, this actually makes the tests _easier_ and _more functional_, because it becomes possible to test a specific behavior without having to resort to hacking the implementation.\n\nAs an example, because `PeerManager`'s `NodeConnected` interface function will now require all of the properties of the connected node, it becomes easier to specify (fake) an exact node configuration without actually creating a node with those properties.\n\nRather than modifying the existing unit tests and fuzzers to work as-is, I think it makes sense to take advantage of the new functionality. Likely as the project progresses and paradigms change, some tests will be modified and others will be dropped/rewritten entirely.",
      "state": "open",
      "user": "theuni",
      "created_at": "2025-11-27T00:17:28Z",
      "updated_at": "2025-12-09T08:53:46Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/33958",
      "labels": [
        "Brainstorming",
        "Refactoring",
        "Tests",
        "P2P",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3601281266,
          "user": "ajtowns",
          "body": "> Reduce `PeerManager`'s usage of `CNode`\n> Move the message handling loop to `PeerManager`\n\nBig fan of these aspects. I like the documentation aspect of NetManagerEvents. Would like to see the PeerManager functions move towards accepting a `Peer&` (vs a `CNode*` and looking up `GetPeerRef`, or an explicit `CNode, Peer` pair) in general too.\n\n> Dropped usage of `CNode` in `PeerManager`\n> \n> With the event loop moved and nascent interfaces beginning to take shape, `PeerManager` should be able to operate without `CNode`. At this point, all of `CConnman`'s public-facing functions will take a `NodeId` rather than `CNode` pointer.\n\nI think this part is going in the wrong direction though.\n\nIn particular, I think good goals to have here are (not in priority order):\n\n 1. simplify the codebase so it's easier to understand and update\n 2. improve robustness of the codebase, so that if there are bugs, they have less impact\n 3. make the code higher performance, so that we can have more peers, and/or run on cheaper hardware\n\nGetting a better division between `Connman` and `PeerManager` is great for the first point. I don't think it's a big improvement in the second point -- that would come if we could separate PeerManager's parsing of random data from the internet and generally complex logic from mempool/block validation.\n\nFor the last point, I think there are two main principles we should aim for: (a) minimising the movement and reparsing of data, and (b) minimising the locking and (potentially) maximising the cache performance when we send/receive data. Currently, when we send data and don't need to block, we:\n\n * encode the message as two byte streams (the msg_type as a string and the data as a byte vector)\n * take the node's `cs_vSend` mutex, move the message into a dequeue and attempt to send the message if the socket seemed idle\n * when sending the message, we do the transport encoding, potentially converting the msg_type to a number, and queue data on the socket\n * after releasing `cs_vSend`, if we actually sent data, briefly take the global lock `m_total_bytes_sent_mutex` to track total bytes sent and bytes sent in cycle  \n\nWith the POC code, we're adding extra steps between the first two points:\n\n * pass the message and the node id to the new p2pinterface\n * if there's process separation, do a capnp encode-decode cycle and moving the data to another process over IPC\n * taking the global `m_nodes_mutex` lock and doing a search for the node id through m_nodes, and getting a shared copy of the CNode\n * doing the same logic as above\n\nSo, like I said, that seems headed in the wrong direction to me. In particular introducing IPC in between the two seems like a misfeature -- it adds complexity and lowers performance (with both extra locks and extra data movement) for not really any benefit.\n\nRather than having net_processing communicate with net via either a full CNode* or just an integer NodeId, I think a better approach would be to give it an opaque handle with a bunch of inlines, something like:\n\n```c++\nclass NodeHandle\n{\nprivate:\n    std::shared_ptr<CNode> node;\npublic:\n    friend CConnman;\n    set_disconnect() { node->fDiscconnect = true; }\n};\n\nclass CConnman\n{\n    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n    inline void PushMessage(NodeHandle& nodehandle, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)\n    {\n        PushMessage(nodehandle.node.get(), std::move(msg));\n    }\n};\n```\n\nYou've also used `NodeId` internally within net_processing; so eg `ThreadMessageHandler()` takes `node_id = peer->m_id`, then calls `ProcessMessages(node_id)` and `SendMessages(node_id)` with both immediately recovering the peer with `peer = GetPeerRef(node_id)`. Presumably that's just because those are exposed for testing but `Peer` isn't; probably could fix it by just also exposing `GetPeerRef` for testing as well, I think, and calling `if (auto p = GetPeerRef(id); p) ProcessMessages(*p);` instead of `ProcessMessages(id)`?\n\n> Lastly, the layers will be severed, includes dropped, and they will only communicate via virtual interfaces. \n\nAs above, I don't really think severing the layers is a good idea (at least for process separation reasons, maybe for testing harnesses though?), but I think you could make `NodeHandle` a virtual interface fairly reasonably if it were, while still keeping things quite fast when it's implemented as a lightweight handle to a `CNode*`.\n\nWhile thinking about this, I've been looking at two other aspects, which I'd like to mention for possible discussion:\n\n`NetMsgType::ADDR` etc are currently constant strings (with SSO they'll avoid allocations at least though), so as a result, net_processing has to sanitize them when logging, and when tracking message bytes, we use a `map<string,int>` to keep track of them, and likewise have an `unordered_map<string,uint8_t>` for the transport v2 message ids, which seems overly complex when we only actually care about the 30ish messages we know about in almost all situations. Changing this doesn't look like too bad a cleanup to me: https://github.com/ajtowns/bitcoin/commits/202511-enum-netmsgtype/\n\nWe have a lot of locks in the net/netproc subsystem these days  (eg, when I run a debug binary listening on mainnet, I get ~100% CPU usage sustained, mostly due to DEBUG_LOCKORDER; dropping DEBUG_LOCKORDER gets me down ~30% CPU), and it would be nice to work on reducing them, rather than adding more -- ie, having data be accessed by a single thread, rather than shared across threads. I've been looking whether we can change the way `PushMessage` etc works, so that the socket operations all happen in the socket handler thread, rather than also opportunistically from the sending thread. I think the two parts to making that work while still being low latency are (a) having a fast message queue in CNode that PeerMan can push to and Connman can pull from, and (b) a way of cheaply notifying Connman to wake up from its poll() and start sending newly queued data. Feels a fair bit like reinventing the wheel vs libevent/libuv/whatever, but I think as long as we give net_processing some sort of \"handle\" object, it can be made fairly simple/safe as well as being fast.\n\nI'd also like to get some cleanup of the Transport stuff -- even just separating it into its own module as a start maybe. In particular, if we introduce new one-byte BIP324 message-types, and have those negotiated over p2p rather than just decided at connection time, then I don't think we need the conversion between short id and msg_type to happen at the net_processing side of the queue, rather than the net side of the queue where it currently occurs, which probably means it's better to change `CNetMessage` and `CSerializedNetMsg` to contain a ~13 byte `SerializedNetMsgType` where v1 transport has the first byte as always 0, and netproc becomes responsible the short id encoding, rather than V2Transport. Probably should do that before any of the `NetMsgType` stuff above.\n\n(EDIT: concretely, moving the bip324 shortid logic to net_processing also requires moving the bytes{sent,rev}permsg logic to net_processing, which requires rpc/net's sendmsgtopeer to go through net_processing, which would involve additional lock juggling if net_processing were handling the msgproc thread rather than net. EDIT^2: Hey, success after 3 years: https://github.com/bitcoin/bips/pull/1378#discussion_r2585766526 . The locking isn't too bad as is, but would still improve slightly with the msgproc loop having access to PeerManagerImpl, and that could better ensure the std::promise stuff didn't get lost too)",
          "created_at": "2025-12-02T10:18:19Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 7699,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3628282838,
          "user": "theuni",
          "body": "\n> In particular, I think good goals to have here are (not in priority order):\n> \n>     1. simplify the codebase so it's easier to understand and update\n> \n>     2. improve robustness of the codebase, so that if there are bugs, they have less impact\n> \n>     3. make the code higher performance, so that we can have more peers, and/or run on cheaper hardware\n> \n\nGoal #1 is a logical separation of concerns. Today, the many of interactions between `CConnman` and `PeerManager` are subtle and (I'd guess) virtually unknown to all but 2 or 3 people. In particular, issues around lifetime and disconnection.\n\n> \n> Getting a better division between `Connman` and `PeerManager` is great for the first point. I don't think it's a big improvement in the second point -- that would come if we could separate PeerManager's parsing of random data from the internet and generally complex logic from mempool/block validation.\n> \n> For the last point, I think there are two main principles we should aim for: (a) minimising the movement and reparsing of data, and (b) minimising the locking and (potentially) maximising the cache performance when we send/receive data. Currently, when we send data and don't need to block, we:\n> \n>     * encode the message as two byte streams (the msg_type as a string and the data as a byte vector)\n> \n>     * take the node's `cs_vSend` mutex, move the message into a dequeue and attempt to send the message if the socket seemed idle\n> \n>     * when sending the message, we do the transport encoding, potentially converting the msg_type to a number, and queue data on the socket\n> \n>     * after releasing `cs_vSend`, if we actually sent data, briefly take the global lock `m_total_bytes_sent_mutex` to track total bytes sent and bytes sent in cycle\n> \n\nI'm all for these goals, but I consider almost all of those things to be premature optimizations compared to the real-world bottlenecks that we currently see. As two examples, I'd challenge you to demonstrate a meaningful statistical slowdown caused by `cs_vSend` as compared to:\n- the time we take to encrypt/decrypt bip324 messages. ( I have a branch which gives us a ~3x speedup here, PR coming soon)\n- The archaic ProcessMessages/SendMessages loop as compared to multi-threaded event-based message handling\n\nI realize those seem like disjointed/unrelated arguments, but I'm trying to make a larger point: I'd rather not spend time re-factoring to avoid some map/lookup inefficiencies when we have existing massive architectural logjams.\n\n> \n> With the POC code, we're adding extra steps between the first two points:\n> \n>     * pass the message and the node id to the new p2pinterface\n> \n>     * if there's process separation, do a capnp encode-decode cycle and moving the data to another process over IPC\n> \n>     * taking the global `m_nodes_mutex` lock and doing a search for the node id through m_nodes, and getting a shared copy of the CNode\n> \n>     * doing the same logic as above\n> \n> \n> So, like I said, that seems headed in the wrong direction to me. In particular introducing IPC in between the two seems like a misfeature -- it adds complexity and lowers performance (with both extra locks and extra data movement) for not really any benefit.\n\nAgain, I'd ask that you not worry too much about the map lookups and data copies. In principle I completely agree.. if we were rewriting this all from scratch I'd prefer to aim for a zero-copy and non-pipeline-stalling implementation. But the reality is that we have heaps of tech debt that overshadow these inefficiencies.\n\nAs for the process separation.. maybe I shouldn't have even brought that up. It's something that becomes possible with this architecture, but it's a very reasonable argument that it's the wrong split. Please think of it as a toy rather than an end-goal.\n\n\n> \n> Rather than having net_processing communicate with net via either a full CNode* or just an integer NodeId, I think a better approach would be to give it an opaque handle with a bunch of inlines, something like:\n> \n> class NodeHandle\n> {\n> private:\n>     std::shared_ptr<CNode> node;\n> public:\n>     friend CConnman;\n>     set_disconnect() { node->fDiscconnect = true; }\n> };\n> \n> class CConnman\n> {\n>     void PushMessage(CNode* pnode, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n>     inline void PushMessage(NodeHandle& nodehandle, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)\n>     {\n>         PushMessage(nodehandle.node.get(), std::move(msg));\n>     }\n> };\n\nThis reintroduces the _exact_ lifetime issues I'm trying to remove :(\n\nAgain, compared to everything else happening in these threads, I consider avoiding an uncontested lock and map lookup to be a premature optimization. Unless it can be demonstrated that these operations even show up in a flamegraph, I don't think reintroducing the complexity of shared ownership is worth the complexity.\n\nRemember that the message handling loop is now happening in `PeerManager`, so the locking of `m_nodes_mutex` is now much less interesting. And even if it does ever show up in benchmarks, because it's only ever modified when nodes are connected/disconnected, it could be made a read/write lock.. that would ensure that it's essentially never contended.\n\nHOWEVER, I did anticipate this argument and came up with a similar solution, but with a tweak to avoid the layer violations. See here for the actual impl: https://github.com/theuni/bitcoin/commit/6a9710417d29e7eab1aa5b515bfb1b1ea0ce5b9c\n\nTl;dr: It's essentially the same thing you're suggesting above, but it looks like this (simplified, missing type safety) instead:\n```c++\nstruct NodeHandle\n{\n    std::weak_ptr<void> m_node;\n    NodeId m_id;\n};\n\nclass CConnman\n{\nprivate:\n    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\npublic:\n    inline void PushMessage(const NodeHandle& nodehandle, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)\n    {\n        if (auto node = std::static_pointer_cast<CNode>(nodehandle.m_node.lock()); node) {\n            PushMessage(node.get(), std::move(msg));\n        }\n    }\n};\n```\n\nIt exploits `std::weak_ptr<void>` as an opaque handle (while keeping CNode's deleter).\n\nThe above has the same benefits you're after:\n- Avoids locking\n- No map lookups\n\nBut without the layer violations:\n- `PeerManager` doesn't influence `CNode` lifetimes (except for the duration of the weak->shared)\n- `PeerManager` sees a 100% opaque type.\n\n\nBut again, I consider this to be a last resort in the (imo incredibly unlikely) event that the read-lock + map lookup causes _any_ meaningful slowdown.\n\n> \n> You've also used `NodeId` internally within net_processing; so eg `ThreadMessageHandler()` takes `node_id = peer->m_id`, then calls `ProcessMessages(node_id)` and `SendMessages(node_id)` with both immediately recovering the peer with `peer = GetPeerRef(node_id)`. Presumably that's just because those are exposed for testing but `Peer` isn't; probably could fix it by just also exposing `GetPeerRef` for testing as well, I think, and calling `if (auto p = GetPeerRef(id); p) ProcessMessages(*p);` instead of `ProcessMessages(id)`?\n> \n\nI stopped short of optimizing these things in my branch. But sure, there's lots of room for optimizing things like that.\n\n> I'd also like to get some cleanup of the Transport stuff -- even just separating it into its own module as a start maybe. In particular, if we introduce new one-byte BIP324 message-types, and have those negotiated over p2p rather than just decided at connection time, then I don't think we need the conversion between short id and msg_type to happen at the net_processing side of the queue, rather than the net side of the queue where it currently occurs, which probably means it's better to change `CNetMessage` and `CSerializedNetMsg` to contain a ~13 byte `SerializedNetMsgType` where v1 transport has the first byte as always 0, and netproc becomes responsible the short id encoding, rather than V2Transport. Probably should do that before any of the `NetMsgType` stuff above.\n\nSure, this seems great. Seems to me it's 3 distinct layers anyway :)",
          "created_at": "2025-12-08T17:51:02Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 3,
            "text_length": 8211,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3629082728,
          "user": "ajtowns",
          "body": "> > For the last point, I think there are two main principles we should aim for: (a) minimising the movement and reparsing of data, and (b) minimising the locking and (potentially) maximising the cache performance when we send/receive data. Currently, when we send data and don't need to block, we:\n\n> I'm all for these goals, but I consider almost all of those things to be premature optimizations compared to the real-world bottlenecks that we currently see.\n\nThe single biggest bottleneck I see today is due to `DEBUG_LOCKORDER` which takes a dev build from using ~10%-40% of a VPS core to ~100%.\n\nOtherwise, we waste a fair bit of time in `NodeSnapshot` (1.98% - mostly shuffle()), `CNodeState` lookups (1.97%), `GetPeerRef` lookups (1.01%), `GenerateWaitSockets` (3.61%), and, at least for what it does, `AccountForSentBytes` (0.11%),\n\nWe spend a lot of time doing `ProcessTransaction` (20%), `TxDownloadManager` (12.27%),`CompareInvMempoolOrder` heap ops (2.7%), `RollingBloomFilter` stuff (5.8%), and serialization and v2 en/decryption (3.06%), but at least they're all things we're actively trying to do. \n\n> As two examples, I'd challenge you to demonstrate a meaningful statistical slowdown caused by `cs_vSend` as compared to:\n\n`cs_vSend` is a per-peer lock, so I don't think it's very problematic. The main reason to look at removing it is that it's about protecting \"net\" internals and the only purpose of having the lock is to allow those internals to be touched by the msghand thread (and perhaps the rpc threads for sendmsgtopeer), rather than just the net thread, because queuing data for 50ms while waiting for the net thread to wakeup, when it could just be sent immediately is pretty lame.\n\n>     * the time we take to encrypt/decrypt bip324 messages. ( I have a branch which gives us a ~3x speedup here, PR coming soon)\n\nPresuming my percentages aren't just due to being a dev build, wow!\n \n>     * The archaic ProcessMessages/SendMessages loop as compared to multi-threaded event-based message handling\n\nI don't think ProcessMessages or SendMessages is particularly bad at present; though the NodeSnapshot and GenerateWaitSockets stuff isn't great, and maybe that's just a question of where in the stack you're assigning the blame.\n\nSwitching to a \"multi-threaded\" model is a big ask, that I think's better treated as a separate project (making tx and block processing happen async in another thread, while msg handling continues for other peers? making it possible to process multiple txs/blocks simultaneously?). But outside of changing the way we interact with validation / `cs_main`, I don't think there's a big win for the multithreaded part here, when we're only dealing with 100s of peers and maybe a few MB/s of data.\n\nMaking ProcessMessages more event oriented seems pretty plausible. :+1:\n\nMaking SendMessages more event based otoh seems somewhat more difficult; I'd like to be able to think more about that after `ThreadMessageHandler` is moved. We've got lots of `if (current_time > peer.m_next_send_feefilter)` tests which might translate well to something event based, but it seems like a lot of code movement, and doesn't seem that bad as-is, so I'm not sure.\n \n> I realize those seem like disjointed/unrelated arguments, but I'm trying to make a larger point: I'd rather not spend time re-factoring to avoid some map/lookup inefficiencies when we have existing massive architectural logjams.\n\nI look at it more the other way: it's simpler and easier to understand when functions are directly given the data they're supposed to operate on. `ProcessMessage` is meant to take a message from the wire (ie, a type and a payload) from a logical peer (ie, `Peer`) and do whatever's necessary to deal with that message. Its signature should be `ProcessMessage(Peer&, string_view, DataStream&&)` with `Peer&` giving it immediate access to everything it needs, without having to look data up, and deal with errors if that data is mysteriously unavailable.\n\nIf we're trying to simplify our net layers, we shouldn't be adding abstractions that we constantly switch between.\n\nIf we can get `ThreadMessageHandler` moved into net_processing, I think we'd be pretty close to being able make `Peer` objects private to the msghand thread -- where we currently have other threads accessing `Peer` directly (eg `UpdatedBlockTip`), I think we could change to adding to an event queue that msghand multiplexes to each (relevant) peer. (Or have the events first get multiplexed to per-msghand event queues if there are multiple msghand threads), which I think would clear up a huge bunch of locks and simplify a huge bunch of thread safety considerations, eg.\n\n> Again, I'd ask that you not worry too much about the map lookups and data copies. In principle I completely agree.. if we were rewriting this all from scratch I'd prefer to aim for a zero-copy and non-pipeline-stalling implementation. But the reality is that we have heaps of tech debt that overshadow these inefficiencies.\n> As for the process separation.. maybe I shouldn't have even brought that up. It's something that becomes possible with this architecture, but it's a very reasonable argument that it's the wrong split. Please think of it as a toy rather than an end-goal.\n\nI think passing around NodeIds instead of the actual data structures we want is adding more tech debt, and putting IPC in between message generation and sending the message on the socket would also be adding more tech debt. (Outside of the IPC POC, I think the only data copy issues are in NodeSnapshot and WaitMany, which I expect this project will improve anyway, or at least not make any worse)\n \n> > Rather than having net_processing communicate with net via either a full CNode* or just an integer NodeId, I think a better approach would be to give it an opaque handle with a bunch of inlines, something like:\n> > class NodeHandle\n> > {\n> > private:\n> > std::shared_ptr node;\n\n> This reintroduces the _exact_ lifetime issues I'm trying to remove :(\n\nI'm pretty sure if you're reworking CConnman, CNode, Peer and PeerManager you can make that arrangement work okay.\n\nWhat I was loosely thinking of is that when either PeerMan or CConnman decides it doesn't want that CNode anymore (because it's been misbehaving, or because the socket closed, eg) they set an `fDisconnect`-like flag, and when they next notice the node (whether that's due to a timeout or triggers an event), whichever hasn't already dropped it drops it now, so that the shared_ptr is freed, and CNode's various queues are released. (The socket is already closed prior to CConnman abandoning the shared_ptr)\n\nIn particular, CConnman is not invoking `NetEventsInterface::FinalizeNode(cnode)` or `m_msgproc->markNodeDisconnected(node->GetId())` in this arrangement, peerman is doing that directly when it next gets around to checking what's going on with that node, and finding that connman's already abandoned the node, and concludes it should too. It's only possible to do things that way after PeerManager has its own thread in order to iterate over its peers of course.\n\n> HOWEVER, I did anticipate this argument and came up with a similar solution, but with a tweak to avoid the layer violations. See here for the actual impl: [theuni@6a97104](https://github.com/theuni/bitcoin/commit/6a9710417d29e7eab1aa5b515bfb1b1ea0ce5b9c)\n\nI mean, that's fine, I guess, but having the `CNode` object available but closed seems better than having to check if a weak_ptr is expired. It also allows the msgproc thread to deal with any messages that were received but unprocessed at the time the socket closed. (It's especially fine if it's just an intermediate step while connman is still calling peerman's FinalizeNode)\n\n> > You've also used `NodeId` internally within net_processing; so eg `ThreadMessageHandler()` takes `node_id = peer->m_id`, then calls `ProcessMessages(node_id)` and `SendMessages(node_id)` with both immediately recovering the peer with `peer = GetPeerRef(node_id)`. Presumably that's just because those are exposed for testing but `Peer` isn't; probably could fix it by just also exposing `GetPeerRef` for testing as well, I think, and calling `if (auto p = GetPeerRef(id); p) ProcessMessages(*p);` instead of `ProcessMessages(id)`?\n> \n> I stopped short of optimizing these things in my branch. But sure, there's lots of room for optimizing things like that.\n\nDo you understand where I'm coming from when I say I don't think of that as an optimisation, but rather the natural way to write the code? If `FooClass::FuncA()` has an object `Bar b`, and `FooClass::FuncB()` wants to use that object, it should just pass it directly by calling `FuncB(b)`, rather than calling `FuncB(b.id)` and having `FuncB` have to recover it with `auto b = GetByById(id); if (!b) return;`.\n\n> > I'd also like to get some cleanup of the Transport stuff -- even just separating it into its own module as a start maybe. In particular, if we introduce new one-byte BIP324 message-types, and have those negotiated over p2p rather than just decided at connection time, then I don't think we need the conversion between short id and msg_type to happen at the net_processing side of the queue, rather than the net side of the queue where it currently occurs, which probably means it's better to change `CNetMessage` and `CSerializedNetMsg` to contain a ~13 byte `SerializedNetMsgType` where v1 transport has the first byte as always 0, and netproc becomes responsible the short id encoding, rather than V2Transport. Probably should do that before any of the `NetMsgType` stuff above.\n> \n> Sure, this seems great. Seems to me it's 3 distinct layers anyway :)\n\nI think I count five layers, fwiw:\n\n 1. socket handling: util/sock.h, b-net thread, net.h, net.cpp\n 2. wire encoding: V1Transport, V2Transport, protocol.h\n 3. message protocol: ProcessMessage / SendMessages\n 4. connection preference: ThreadOpenConnections, eviction handling\n 5. sharing policy: header/block download/announcements, TxRequestTracker, address relay\n\nMaybe 4 and 5 are both just a \"policy layer\"? I left them separate since (4) is managed by net.cpp, while (5) is exclusively net_processing.cpp; but maybe the openconnections logic should move to net_processing as well as the evictions logic? I think doing that might allow connman to stop needing NetEventsInterface entirely, and instead just use flags on CNode to communicate `markNodeDisconnected` and `markSendBufferFull(bool)`.",
          "created_at": "2025-12-08T21:29:54Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 2,
            "text_length": 10469,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 4031,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2266920587,
      "number": 29977,
      "title": "depends: Freetype and xcbproto version in depends are too new",
      "body": "While investigating interface versions for [qtsowrap](https://github.com/laanwj/qtsowrap/blob/main/scripts/collector.py), i noticed that currently, in depends, the version of freetype and xproto are too new. As of 8cd9475321737a69454f3b54a588b7bfe9f32847.\r\n\r\nAt least if we're considering Ubuntu 20.04LTS as the reference. xcb-proto is even too new for 22.04LTS:\r\n\r\n| library | 20.04LTS | 22.04LTS | depends |\r\n|-------|--------|---------|---------|\r\n| libfontconfig    |   2.13.1     |   2.13.1 |    2.12.6  | \r\n| libfreetype     |     2.10.1    |    2.11.1|  2.11.0 ⚠️    |\r\n| libxkbcommon  |       0.10.0 |       1.4.0|  0.8.4    |\r\n| libxcb            |   1.14     |     1.14|   1.14   |\r\n| libxcb-util       |   0.4.0   |      0.4.0|    0.4.0  |\r\n| libxcb-image    |     0.4.0   |      0.4.0|  0.4.0    |\r\n| libxcb-keysyms |      0.4.0  |       0.4.0|   0.4.0   |\r\n| libxcb-render-util |  0.3.9   |      0.3.9|    0.3.9  |\r\n| libxcb-icccm (=libxcb-util-wm)    |    0.4.1  |       0.4.1|     0.4.1  |\r\n| xcb-proto   |   1.14  |      1.14 |     1.15.2  ⚠️|\r\n\r\n- libfreetype was upgraded from 2.7.1 to 2.11.0 in 01544dd78ccc0b0474571da854e27adef97137fb (#23489)\r\n- xcb-proto was upgraded from 1.14 to 1.15.2 in 7cb88c8b46723d306b96953a6a60c90a4ab211e3 (#28097), apparently for a build issue\r\n\r\nAs these dependencies are used to link against existing system libraries, this means there are potential issues at runtime (though most should be caught by symbols not being found, and this hasn't been reported, so it's likely not too bad).\r\n\r\nEdit: example of an issue caused by this: https://github.com/bitcoin/bitcoin/pull/29923#issuecomment-2068994077",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2024-04-27T08:52:36Z",
      "updated_at": "2025-12-08T10:10:28Z",
      "closed_at": "2025-12-08T10:10:27Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/29977",
      "labels": [
        "GUI",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3552413548,
          "user": "fanquake",
          "body": "Note that libxkb, libxcb, and xcb-proto are now all statically linked, after #33537.",
          "created_at": "2025-11-19T12:20:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 84,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3562659799,
          "user": "hebasto",
          "body": "> At least if we're considering Ubuntu 20.04LTS as the reference.\n\nLet’s update the baseline to Ubuntu 22.04 LTS instead.\n\nIn that case, this issue can be closed in light of [the static linking of XCB](https://github.com/bitcoin/bitcoin/pull/33537).",
          "created_at": "2025-11-21T11:43:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 249,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3582195905,
          "user": "fanquake",
          "body": "See #33952.",
          "created_at": "2025-11-26T16:42:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 11,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1713,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1359424165,
      "number": 25980,
      "title": "combinerawtransaction confusing with distinct transactions",
      "body": "If passed two unrelated transactions, `combinerawtransaction` seems to take the first and ignore the rest.\r\n\r\nWe should probably either throw an error or actually combine them somehow?",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2022-09-01T21:21:36Z",
      "updated_at": "2025-12-06T22:24:07Z",
      "closed_at": null,
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/25980",
      "labels": [
        "Bug",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 2844922900,
          "user": "oxqnd",
          "body": "Could I try this issue?",
          "created_at": "2025-05-01T14:13:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 23,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2845219326,
          "user": "adamandrews1",
          "body": "> Could I try this issue?\n\nWould you mind reviewing https://github.com/bitcoin/bitcoin/pull/31298 instead?\n\nThis solution is still up to date, it just hasn't gotten the right reviewers.",
          "created_at": "2025-05-01T16:42:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 185,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2845932631,
          "user": "oxqnd",
          "body": "> > Could I try this issue?\n> \n> Would you mind reviewing https://github.com/bitcoin/bitcoin/pull/31298 instead?\n> \n> This solution is still up to date, it just hasn't gotten the right reviewers.\n\nI’ll take a look at #31298, but it might take me a little while to get to it. Hope that’s okay!",
          "created_at": "2025-05-01T22:43:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 292,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3621298976,
          "user": "mossein",
          "body": "Closing in favor of #31298 which has been in review since November 2024 and addresses the same issue. I wasn't aware of the existing PRs when I opened this. I'll contribute by reviewing #31298 instead.\n\nApologies for the duplicate!",
          "created_at": "2025-12-06T22:24:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 231,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 243,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1031598650,
      "number": 23326,
      "title": "MuSig2 support",
      "body": "ElementsProject/secp256k1-zkp#131 adds MuSig2 support to secp256k1-zkp, which is an experimental fork of [secp256k1](https://github.com/bitcoin-core/secp256k1). I think it would be useful to have a (series of) draft pr(s) implementing support for this in Bitcoin Core. If only to make it easier to actually test MuSig2.\r\n\r\nMuSig2 paper: \"MuSig2: Simple Two-Round Schnorr Multi-Signatures\" (https://eprint.iacr.org/2020/1261)\r\n\r\nTo simplify things a bit, I'm assuming a things for now:\r\n1. The Bitcoin Core wallet coordinates setup and also takes the initiative for proposing a new transaction\r\n2. Two communication rounds are needed for signing ([no storing nonces in advance](https://github.com/bitcoin/bitcoin/issues/23326#issuecomment-947898104)) \r\n3. ~Only key path spending (for script path spending we probably want miniscript support first anyway)~ (probably not an issue)\r\n4. Our wallet has private keys (after setup we import the musig descriptor and mark that as active)\r\n\r\nOne challenge is how to include secp256k1-zkp (I suppose a proof of concept PR can just swap out the git subtree).\r\n\r\n**Wallet setup**\r\n\r\nWe obtain an xpub with origin info from ourselves and the other signers. Perhaps at the [BIP 87](https://github.com/bitcoin/bips/blob/master/bip-0087.mediawiki) derivation of `m/87'/0'/0'`.\r\n\r\nTodo:\r\n- [ ] #22341\r\n- [ ] ...\r\n\r\nPass them into `secp256k1_musig_pubkey_agg`. Apparently it's possible to aggregate an xpub in one go, instead of calling this function on each and every derived key. But there's some caveats, perhaps @jonasnick can clarify:\r\n* This results in a new xpub, which can be used just fine by a watch-only wallet (which doesn't need to know MuSig2 was involved); but\r\n* agg(xpubA, xpubB)/* != agg(xpubA/*, xpubB/*)\r\n* what about the chain codes?\r\n* do we need to track xpub and/or origin info for the other signers? (this seems practical in any case when dealing with a dumb external signer)\r\n\r\nTodo:\r\n- [ ] RPC or bitcoin-util / bitcoin-wallet command that takes xpub(s), etc and does this\r\n   - since we have to call libsecp functions, a Python script doesn't seem like the right approach\r\n   - the result could be a fresh (public key) descriptor, that is either automatically or manually imported in the wallet\r\n- [ ] add musig2 descriptor (which tracks our own xpub at minimum, as well as the aggregated xpub or/and the other xpubs)\r\n\r\n**Round one nonces**\r\n\r\nOne nice aspect of MuSig2 is that the nonces required for round 1 can:\r\n1. be generated in advance\r\n2. be regenerated if a signer loses them\r\n3. support only 1 cosigner if that's easier\r\n\r\nSo it's tempting to collect a bunch of nonces during the setup. However this is very non-trivial, so let's not for now... https://github.com/bitcoin/bitcoin/issues/23326#issuecomment-947898104\r\n\r\nInstead, we generate our nonce and request one from each participant. Probably the most practical way is to create a PSBT, put our first nonce in it, pass it to the next signer who reads ours and adds theirs. We then get the PSBT back from the last signer.\r\n\r\n- [ ] add PSBT fields\r\n\r\n**Round two: signing**\r\n\r\nPerform step 1 and 2 of [signing process](https://github.com/jonasnick/secp256k1-zkp/blob/musig2/src/modules/musig/musig.md#signing) on the nonces we have.\r\n\r\nGenerate our round 2 nonce with `secp256k1_musig_nonce_gen ` (step 4) and add those to the PSBT\r\n\r\nPass the PSBT to the other signer(s):\r\n1. if there's only 1 co-signer they can generate their nonce and `secp256k1_musig_partial_sign` in one go, and give us the result\r\n2. if there's 2+ co-signers???\r\n\r\nAdd our partial signature:\r\n\r\n- [ ] `secp256k1_musig_partial_sign` (by `walletprocesspsbt`?)\r\n\r\nGenerate full signature:\r\n\r\n- [ ] have one or more of PSBT method(s) do `secp256k1_musig_partial_sig_agg` (does not need wallet)  \r\n\r\nProfit.\r\n\r\n**Updates**\r\n2021-10-20 18:48 UTC: forget about pre committing nonces for round 1, instead use two signing rounds: https://github.com/bitcoin/bitcoin/issues/23326#issuecomment-947898104",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2021-10-20T16:20:01Z",
      "updated_at": "2025-12-06T12:23:51Z",
      "closed_at": "2024-12-06T09:39:47Z",
      "comments": 24,
      "url": "https://github.com/bitcoin/bitcoin/issues/23326",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4005,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2168888697,
      "number": 29565,
      "title": "rpc: rollback",
      "body": "### Please describe the feature you'd like to see added.\r\n\r\n`bitcoin-cli rollback`\r\n\r\nArguments:\r\n\r\n1. height or hash\r\n2. delete blocks from storage\r\n3. delete headers\r\n\r\nThis should be used with networking turned off. As soon as you connect to a peer, it will sync back to the tip as normal.\r\n\r\nIt should rollback indexes too.\r\n\r\nIt should probably warn users if they have a wallet loaded, especially if the rollback is more than 10 (?) block; that's the point where the rollback process stops placing transactions back into the mempool.\r\n\r\n### Is your feature related to a problem, if so please describe it.\r\n\r\nWe currently rely on `invalidateblock` to roll back the chain to an arbitrary height. And then `reconsiderblock` to go back to the tip. Rolling back the chain is used when creating snapshots for assume utxo.\r\n\r\nThis works but the RPC methods are not designed for this. It has annoying side-effects like disconnecting peers because they have \"invalid\" blocks. If there are stale blocks near the height you want to roll back to, you have to make sure to invalidate those too. IIRC there's also no way to abort the process.\r\n\r\nFor functional tests it can be useful to forget a block and a header, e.g. to test behavior when a header is received multiple times from different peers, when receiving an unsolicited or mutated block. Currently such a test has to carefully sequence events, or use multiple unconnected nodes. This RPC would effectively add \"undo\" for such tests.\r\n\r\n### Describe the solution you'd like\r\n\r\nSee above\r\n\r\n### Describe any alternatives you've considered\r\n\r\nStatus quo.\r\n\r\n### Please leave any additional context\r\n\r\nI'm not advocating to drop `invalidateblock` entirely. For example it's still useful if you want to fully validate a stale block.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-03-05T10:50:48Z",
      "updated_at": "2025-12-06T12:23:50Z",
      "closed_at": "2024-12-06T10:40:37Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/29565",
      "labels": [
        "Feature"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1793,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2569957266,
      "number": 31044,
      "title": "lint: markdown check linting build outputs",
      "body": "Running the linter locally I see this output:\r\n```bash\r\nDOCKER_BUILDKIT=1 docker build -t bitcoin-linter --file \"./ci/lint_imagefile\" ./ && docker run --rm -v $(pwd):/bitcoin -it bitcoin-linter\r\n<snip>\r\nOne or more markdown links are broken.\r\n\r\nRelative links are preferred (but not required) as jumping to file works natively within Emacs.\r\n\r\nMarkdown link errors found:\r\n[Err ] ./depends/work/build/x86_64-apple-darwin/qt/6.7.2-b49980c3ba7/qtbase/tests/auto/corelib/serialization/qxmlstream/XML-Test-Suite/xmlconf/xmlconf-20031030.htm (90, 1) => xmlts20031030.zip - Target filename not found.\r\n[Err ] ./depends/work/build/x86_64-apple-darwin/qt/6.7.2-b49980c3ba7/qtbase/tests/auto/corelib/serialization/qxmlstream/XML-Test-Suite/xmlconf/xmlconf-20031030.htm (39, 55) => /Member/#confidential - Target not found.\r\n[Err ] ./depends/work/build/x86_64-apple-darwin/qt/6.7.2-b49980c3ba7/qtbase/tests/auto/corelib/serialization/qxmlstream/XML-Test-Suite/xmlconf/xmlconf-20020521.htm (39, 55) => /Member/#confidential - Target not found.\r\n[Err ] ./depends/work/build/x86_64-apple-darwin/qt/6.7.2-b49980c3ba7/qtbase/tests/auto/corelib/serialization/qxmlstream/XML-Test-Suite/xmlconf/xmlconf-20031030.htm (95, 1) => xmlts20031030.tar - Target filename not found.\r\n[Err ] ./depends/work/build/x86_64-apple-darwin/qt/6.7.2-b49980c3ba7/qtbase/tests/auto/corelib/serialization/qxmlstream/XML-Test-Suite/xmlconf/xmlconf-20031030.htm (77, 1) => xmlconf-20020606.htm - Target filename not found.\r\n\r\n                \r\n^---- ⚠️ Failure generated from lint check 'markdown'!\r\nCheck that markdown links resolve\r\nAll checks passed!\r\nsrc/crc32c in HEAD currently refers to tree 454691a9b89ee8b9e1f71a48a7398edba49c3805\r\nsrc/crc32c in HEAD was last updated in commit 5d45552fd4303f8d668ffbc50cce1053485aeead (tree 454691a9b89ee8b9e1f71a48a7398edba49c3805)\r\nGOOD\r\n<snip>\r\n```\r\n\r\nThe output is somewhat confusing because it seems to simultaneously claim that things are broken, but that all checks passed? In any case, the linter should not be running on files that are not our source code, or is gitignored. i.e here it's running on Qt build outputs, but it shouldn't be linting anything under `depends/work/`, `depends/built/`, `depends/${host}/` etc.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-10-07T10:03:30Z",
      "updated_at": "2025-12-06T12:23:49Z",
      "closed_at": "2024-12-05T16:34:09Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31044",
      "labels": [
        "Tests"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2273,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2327251231,
      "number": 30209,
      "title": "Make Transport independent of CNetMessage and CSerializedNetMsg",
      "body": "Currently `class Transport` uses `CNetMessage` in one place:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/62f7f59ff495fbcbfc10c25e97bb0dc032647abf/src/net.h#L278-L285\r\n\r\nAnd `CSerializedNetMsg` here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/62f7f59ff495fbcbfc10c25e97bb0dc032647abf/src/net.h#L287-L295\r\n\r\nThis creates a problem in my Stratum v2 Template Provider implementation in #29432 which introduces `class Sv2Transport : Transport`. Because the sv2 noise protocol (#29346) is very similar to BIP324 I simply copied `V2Transport` and modified the state machine a little bit. The test and fuzz code was also very reusable.\r\n\r\nBut the above two methods don't fit because of their use of `CNetMessage` and `CSerializedNetMsg`. Stratum v2 messages (`Sv2NetMsg` in #29432) don't inherit from `CNetMessage` and I don't think they should.\r\n\r\nSo I'd like to refactor `Transport` to just return (decrypted) bytes and have the caller interpret them (as `CNetMessage` or `Sv2NetMsg`).\r\n\r\nAdditionally I'm not sure what to do with the `std::chrono::microseconds time, bool& reject_message` arguments. So far I don't use them in `Sv2Transport`.\r\n\r\n* `reject_message`: in v1 the transport sets this if the checksum fails. In v2 it's used for the v1 fallback, but also for unrecognized msg types. This can be done by the caller after my proposed refactor, so the argument can go away.\r\n* `time`: this is passed into `GetReceivedMessage` by the caller and used to set `msg.m_time = time;`, so can also go away.\r\n\r\nFrom IRC I understand @sipa had some ideas on how to tackle this. I can take a stab at it myself, but if someone else does it I'm happy to review.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2024-05-31T08:26:26Z",
      "updated_at": "2025-12-06T12:23:49Z",
      "closed_at": "2024-12-06T10:42:12Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/30209",
      "labels": [
        "P2P"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1713,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3699228979,
      "number": 34016,
      "title": "test: `interface_ipc.py` (might?) start skipping if installed capnp version changes",
      "body": "Noticed this on a Fedora (Rawhide) Box that has capnp `1.2.0` (recently updated from 1.1.0) and `pycapnp` `2.1.0` installed, but was skipping `interface_ipc.py` as if the Python module was not available. The failure was that pycanp `2.1.0` tries to load an older shared lib, and fails:\n```bash\nRemaining jobs: [interface_ipc.py]\n1/1 - interface_ipc.py failed, Duration: 0 s\n\nstdout:\n\n\nstderr:\nTraceback (most recent call last):\n  File \"/root/ci_scratch/build/test/functional/interface_ipc.py\", line 20, in <module>\n    import capnp  # type: ignore[import] # noqa: F401\n    ^^^^^^^^^^^^\n  File \"/usr/local/lib64/python3.14/site-packages/capnp/__init__.py\", line 36, in <module>\n    from .version import version as __version__\n  File \"/usr/local/lib64/python3.14/site-packages/capnp/version.py\", line 1, in <module>\n    from .lib.capnp import _CAPNP_VERSION_MAJOR as LIBCAPNP_VERSION_MAJOR  # noqa: F401\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nImportError: libcapnpc.so.1.0.1: cannot open shared object file: No such file or directory\n```\nWe catch this and skip as if the module isn't available. Updating to `pycapnp` `2.2.1` solved the issue.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-12-05T14:38:18Z",
      "updated_at": "2025-12-05T16:01:30Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34016",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3617445384,
          "user": "ryanofsky",
          "body": "Maybe this would get the failure to be reported properly:\n\n```diff\n--- a/test/functional/interface_ipc.py\n+++ b/test/functional/interface_ipc.py\n@@ -19,7 +19,7 @@ from test_framework.wallet import MiniWallet\n # Test may be skipped and not have capnp installed\n try:\n     import capnp  # type: ignore[import] # noqa: F401\n-except ImportError:\n+except ModuleNotFoundError:\n     pass\n \n @asynccontextmanager\n```",
          "created_at": "2025-12-05T15:46:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 408,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3617499308,
          "user": "fanquake",
          "body": "@ryanofsky yes, that works.",
          "created_at": "2025-12-05T16:01:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 27,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1259,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3698469264,
      "number": 34014,
      "title": "mptest hangs, when run in a loop",
      "body": "Initially ci ran into a segfault in https://github.com/maflcko/bitcoin-core-nightly/actions/runs/19882806964/job/56984144564#step:6:4040: \n\n```\n  3/152 Test   #3: mptest ...............................***Failed    0.05 sec\n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (18106 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (744 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (819 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (793 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (1329 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n*** Received signal #11: Segmentation fault\nstack: 588ddc67 587839bb 5877e6ef 588667a8 58858975 58861e3d 58784940 58780828 5868c5fb 5868c0c8 f5b62d20 f57b0136 f5844c05\n```\n\nWhen trying to reproduce it locally, I'd see mptest hang, when run in a loop (and the CPUs on the machine were made busy via other means). To reproduce on a fresh `podman run -it --rm --platform=linux alpine:3.23`:\n\n`apk update && apk add rsync screen python3 git bash vim && git clone --depth=1 https://github.com/bitcoin/bitcoin ./b-c-ci && cd ./b-c-ci`\n\n`RUN_UNIT_TESTS=false RUN_FUNCTIONAL_TESTS=false CCACHE_DIR=/ccache_dir CCACHE_MAXSIZE=5500M USER=dummy_user DANGER_RUN_CI_ON_HOST=\"1\" MAKEJOBS=\"-j$(nproc)\" FILE_ENV=\"./ci/test/00_setup_env_native_alpine_musl.sh\" ./ci/test_run_all.sh`\n\n`while /ci_container_base/ci/scratch/build-*/src/ipc/libmultiprocess/test/mptest ; do true ; done`\n\n\nAfter some time it just hangs forever:\n\n```\n...\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (83659 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6884 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (9762 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (8612 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (13144 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\nmp/proxy.cpp:45: error: Uncaught exception in daemonized task.; exception = (unknown):-1: failed: std::exception: std::future_error: Promise already satisfied\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (16464 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (53144 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (7757 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (7552 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (7087 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (11442 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (11951 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (57813 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6301 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (7153 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (8374 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (11935 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (15253 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (98583 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6840 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (6811 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (6656 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (12740 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (14853 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (45695 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (7465 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (5967 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (7727 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (9699 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n... (hang)\n```\n\nThe bt looks like this:\n\n```\n(gdb) thread apply all bt\n\nThread 3 (LWP 106816 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=281, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=8) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f689896c in epoll_pwait (fd=3, ev=0x7f21f6449ae0, cnt=16, to=-1, sigs=0x0) at src/linux/epoll.c:28\n#3  0x00005638a3067426 in kj::UnixEventPort::wait (this=0x7f21f68fb4b8) at /usr/src/kj/io.h:284\n#4  0x00005638a2fd0228 in kj::EventLoop::wait (this=this@entry=0x7f21f68fb590) at /usr/src/kj/async.c++:1850\n#5  0x00005638a2fd594c in kj::_::waitImpl (node=..., result=..., waitScope=..., location=...) at /usr/src/kj/async.c++:1984\n#6  0x00005638a2ed3eb6 in kj::Promise<unsigned long>::wait (this=0x7f21f644a070, waitScope=..., location=...) at /ci_container_base/depends/x86_64-pc-linux-musl/include/kj/async-inl.h:1357\n#7  mp::EventLoop::loop (this=this@entry=0x7f21f644a7b0) at ./ipc/libmultiprocess/src/mp/proxy.cpp:240\n#8  0x00005638a2dbcf58 in mp::test::TestSetup::TestSetup(bool)::{lambda()#1}::operator()() const (__closure=<optimized out>) at ./ipc/libmultiprocess/test/mp/test/test.cpp:99\n#9  0x00005638a2dbd1a9 in std::__invoke_impl<void, mp::test::TestSetup::TestSetup(bool)::{lambda()#1}>(std::__invoke_other, mp::test::TestSetup::TestSetup(bool)::{lambda()#1}&&) (__f=...) at /usr/include/c++/15.2.0/bits/invoke.h:63\n#10 std::__invoke<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}>(mp::test::TestSetup::TestSetup(bool)::{lambda()#1}&&) (__fn=...) at /usr/include/c++/15.2.0/bits/invoke.h:98\n#11 std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:303\n#12 std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> >::operator()() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:310\n#13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> > >::_M_run() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:255\n#14 0x00007f21f6695680 in ?? () from /usr/lib/libstdc++.so.6\n#15 0x00007f21f68bc573 in start (p=<optimized out>) at src/thread/pthread_create.c:207\n#16 0x00007f21f68bdec1 in __clone () at src/thread/x86_64/clone.s:22\nBacktrace stopped: frame did not save the PC\n\nThread 2 (LWP 106817 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=202, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=0) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f68bad24 in __futex4_cp (addr=0x7f21f63d27a4, op=0, val=2, to=<optimized out>) at src/thread/__timedwait.c:24\n#3  __timedwait_cp (addr=addr@entry=0x7f21f63d27a4, val=val@entry=2, clk=clk@entry=0, at=at@entry=0x0, priv=128, priv@entry=1) at src/thread/__timedwait.c:52\n#4  0x00007f21f68bbc05 in __pthread_cond_timedwait (c=0x7f21f659a708, m=0x7f21f659a6e0, ts=0x0) at src/thread/pthread_cond_timedwait.c:100\n#5  0x00007f21f668b39d in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib/libstdc++.so.6\n#6  0x00005638a2ed3548 in std::condition_variable::wait<mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()> >(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()>)::<lambda()> > (this=0x7f21f659a708, __lock=..., __p=...) at /usr/include/c++/15.2.0/condition_variable:107\n#7  mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()> > (this=0x7f21f659a6e0, lock=..., pred=...) at ./ipc/libmultiprocess/include/mp/proxy-io.h:343\n#8  operator() (__closure=<optimized out>) at ./ipc/libmultiprocess/src/mp/proxy.cpp:419\n#9  0x00005638a2ed3733 in std::__invoke_impl<void, mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > (__f=...) at /usr/include/c++/15.2.0/bits/invoke.h:63\n#10 std::__invoke<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > (__fn=...) at /usr/include/c++/15.2.0/bits/invoke.h:98\n#11 std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > >::_M_invoke<0> (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:303\n#12 std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > >::operator() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:310\n#13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > > >::_M_run(void) (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:255\n#14 0x00007f21f6695680 in ?? () from /usr/lib/libstdc++.so.6\n#15 0x00007f21f68bc573 in start (p=<optimized out>) at src/thread/pthread_create.c:207\n#16 0x00007f21f68bdec1 in __clone () at src/thread/x86_64/clone.s:22\nBacktrace stopped: frame did not save the PC\n\nThread 1 (LWP 106803 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=202, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=0) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f68bad24 in __futex4_cp (addr=0x7ffd73a69134, op=0, val=2, to=<optimized out>) at src/thread/__timedwait.c:24\n#3  __timedwait_cp (addr=addr@entry=0x7ffd73a69134, val=val@entry=2, clk=clk@entry=0, at=at@entry=0x0, priv=128, priv@entry=1) at src/thread/__timedwait.c:52\n#4  0x00007f21f68bbc05 in __pthread_cond_timedwait (c=0x7f21f659a608, m=0x7f21f659a5e0, ts=0x0) at src/thread/pthread_cond_timedwait.c:100\n#5  0x00007f21f668b39d in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib/libstdc++.so.6\n#6  0x00005638a2da84ac in std::condition_variable::wait<mp::Waiter::wait<mp::test::TestCase312::run()::<lambda()> >(mp::Lock&, mp::test::TestCase312::run()::<lambda()>)::<lambda()> > (this=0x7f21f659a608, __lock=..., __p=...) at /usr/include/c++/15.2.0/condition_variable:107\n#7  mp::Waiter::wait<mp::test::TestCase312::run()::<lambda()> > (this=0x7f21f659a5e0, lock=..., pred=...) at ./ipc/libmultiprocess/include/mp/proxy-io.h:343\n#8  mp::test::TestCase312::run (this=<optimized out>) at ./ipc/libmultiprocess/test/mp/test/test.cpp:373\n#9  0x00005638a2ede23b in kj::TestRunner::run()::{lambda()#1}::operator()() const (__closure=<optimized out>) at /usr/src/kj/test.c++:318\n#10 kj::runCatchingExceptions<kj::TestRunner::run()::{lambda()#1}>(kj::TestRunner::run()::{lambda()#1}&&) (func=...) at /usr/src/kj/exception.h:371\n#11 kj::TestRunner::run (this=0x7ffd73a6a040) at /usr/src/kj/test.c++:318\n#12 0x00005638a2edf2e3 in kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}::operator()<kj::TestRunner>(kj::TestRunner&) (__closure=<optimized out>, s=...) at /usr/src/kj/test.c++:217\n#13 kj::_::BoundMethod<kj::TestRunner&, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#8}>::operator()<>() (this=<optimized out>) at /usr/src/kj/function.h:263\n#14 kj::Function<kj::MainBuilder::Validity ()>::Impl<kj::_::BoundMethod<kj::TestRunner&, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#8}> >::operator()() (this=<optimized out>) at /usr/src/kj/function.h:142\n#15 0x00005638a308cd48 in kj::Function<kj::MainBuilder::Validity()>::operator() (this=<optimized out>) at /usr/src/kj/function.h:119\n#16 kj::MainBuilder::MainImpl::operator() (this=<optimized out>, programName=..., params=...) at /usr/src/kj/main.c++:623\n#17 0x00005638a3091b95 in kj::Function<void(kj::StringPtr, kj::ArrayPtr<kj::StringPtr const>)>::Impl<kj::MainBuilder::MainImpl>::operator() (this=<optimized out>, params#0=..., params#1=...) at /usr/src/kj/function.h:142\n#18 0x00005638a308d1cb in kj::Function<void(kj::StringPtr, kj::ArrayPtr<kj::StringPtr const>)>::operator() (this=0x7ffd73a6a050, params#0=..., params#1=...) at /usr/src/kj/function.h:119\n#19 operator() (__closure=<optimized out>) at /usr/src/kj/main.c++:228\n#20 kj::runCatchingExceptions<kj::runMainAndExit(ProcessContext&, MainFunc&&, int, char**)::<lambda()> > (func=...) at /usr/src/kj/exception.h:371\n#21 kj::runMainAndExit (context=..., func=..., argc=<optimized out>, argc@entry=1, argv=argv@entry=0x7ffd73a6a0f8) at /usr/src/kj/main.c++:228\n#22 0x00005638a2edc4c9 in main (argc=1, argv=0x7ffd73a6a0f8) at /usr/src/kj/test.c++:381\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-05T10:48:01Z",
      "updated_at": "2025-12-05T13:43:41Z",
      "closed_at": null,
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/34014",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3616337285,
          "user": "maflcko",
          "body": "I can also reproduce the i686 segfault from the CI run locally, but I suspect it is similar to issue https://github.com/bitcoin/bitcoin/issues/31772",
          "created_at": "2025-12-05T10:51:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 148,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616352068,
          "user": "fanquake",
          "body": "cc @Sjors @ryanofsky ",
          "created_at": "2025-12-05T10:53:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 21,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616776123,
          "user": "ryanofsky",
          "body": "Thanks for the report. I also saw failures in the \"thread busy\" test on i686 here https://github.com/bitcoin-core/libmultiprocess/pull/218#issuecomment-3366301777.  The problem here seems easier to reproduce though, so maybe solving this issue with the \"thread busy\" the test will help with the other issue too.\n\nCurious how long approximately it takes for the hang to happen?",
          "created_at": "2025-12-05T12:40:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 376,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616809162,
          "user": "maflcko",
          "body": "> Curious how long approximately it takes for the hang to happen?\n\nMaybe 5-15 minutes on my system. Just make sure to saturate all CPUs on the system. (You can run the functional tests with -j 99, or compile without cccache in a loop.)",
          "created_at": "2025-12-05T12:48:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 235,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616849854,
          "user": "maflcko",
          "body": "> I also saw failures in the \"thread busy\" test on i686 here\n\nI tried reproducing those in `podman run -it --rm --platform linux/i386 alpine:3.23` (with the steps from above), and also in `podman run -it --rm --platform linux/i386 debian:unstable` (using `FILE_ENV=\"./ci/test/00_setup_env_native_nowallet.sh\"` or `FILE_ENV=\"./ci/test/00_setup_env_native_previous_releases.sh\"`), but they wouldn't segfault, only hang.\n\nOnly the modified `FILE_ENV=\"./ci/test/00_setup_env_i686_no_ipc.sh\"` would reproduce the segfault, so i guess it is the gcc+clang mixing 🤷 ",
          "created_at": "2025-12-05T13:01:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 558,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616984522,
          "user": "ryanofsky",
          "body": "> so i guess it is the gcc+clang mixing 🤷\n\nOh, fun\n\n",
          "created_at": "2025-12-05T13:43:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 52,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 15779,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3698296242,
      "number": 34012,
      "title": "ci: failure in Windows native job",
      "body": "Has been re-run multiple times.\nhttps://github.com/bitcoin/bitcoin/actions/runs/19800578606/job/57234826268?pr=33973#step:9:900:\n```bash\n\nCompleted submission of libevent[core,thread]:x64-windows@2.1.12#7 to 1 binary cache(s) in 248 ms\nWaiting for 1 remaining binary cache submissions...\nCompleted submission of sqlite3[core,json1]:x64-windows@3.50.4 to 1 binary cache(s) in 399 ms (1/1)\nAll requested installations completed successfully in: 2.4 min\n-- Running vcpkg install - done\n-- Selecting Windows SDK version 10.0.26100.0 to target Windows 10.0.20348.\n-- The CXX compiler identification is MSVC 19.44.35221.0\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.44.35207/bin/Hostx64/x64/cl.exe - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Performing Test CXX_SUPPORTS__WX__OPTIONS_STRICT\n-- Performing Test CXX_SUPPORTS__WX__OPTIONS_STRICT - Success\nCMake Error at C:/Program Files/CMake/share/cmake-3.31/Modules/FindPackageHandleStandardArgs.cmake:233 (message):\n  Could NOT find PkgConfig (missing: PKG_CONFIG_EXECUTABLE)\nCall Stack (most recent call first):\n  C:/Program Files/CMake/share/cmake-3.31/Modules/FindPackageHandleStandardArgs.cmake:603 (_FPHSA_FAILURE_MESSAGE)\n  C:/Program Files/CMake/share/cmake-3.31/Modules/FindPkgConfig.cmake:114 (find_package_handle_standard_args)\n  C:/vcpkg/scripts/buildsystems/vcpkg.cmake:908 (_find_package)\n  cmake/module/FindZeroMQ.cmake:31 (find_package)\n  C:/vcpkg/scripts/buildsystems/vcpkg.cmake:908 (_find_package)\n  CMakeLists.txt:127 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nError: Process completed with exit code 1.\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-12-05T09:59:32Z",
      "updated_at": "2025-12-05T13:38:09Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34012",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3616198218,
          "user": "maflcko",
          "body": "I haven't looked here, but generally CI does not work well with re-running tasks, when the code is merged with current master, but the ci config is stale.\n\nThe solution is to minimize the ci config (yaml) and pull out all ci settings and ci scripts into stand-alone files (similar to the files `.github/ci-lint-exec.py  .github/ci-test-each-commit-exec.py`)\n\nAs the error is zmq related, it could be due to 49c672853503e561cd1e7fed19a32f21ad345370, but again, I haven't checked this closely.",
          "created_at": "2025-12-05T10:16:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 491,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3616545810,
          "user": "hebasto",
          "body": "> I haven't looked here, but generally CI does not work well with re-running tasks, when the code is merged with current master, but the ci config is stale.\n> \n> As the error is zmq related, it could be due to [49c6728](https://github.com/bitcoin/bitcoin/commit/49c672853503e561cd1e7fed19a32f21ad345370), but again, I haven't checked this closely.\n\nI concur with both assessments above.\n\nThe `.github/workflows/ci.yml` for the failed run looks outdated: https://github.com/bitcoin/bitcoin/actions/runs/19800578606/workflow?pr=33973.\n\nUPDATE. Although the issue occurred in the Windows CI job, it is not specific to Windows.",
          "created_at": "2025-12-05T11:41:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 623,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1809,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2720992616,
      "number": 31432,
      "title": "Fixing the blockchain security with 2FA verification itself",
      "body": "### Please describe the feature you'd like to see added.\n\nI will describe bitcoins main security issue of wallets and its security standard 1/2^256 valid possiblity. if anybody or any organisation can successfully make a quantum or a photonic processor they can brute force wallets private keys and they can move the coins. they can lock the coins, they can cause transaction losses and bitcoin will be over. \r\nAs blockchains nature coins are created from nothing and sent to the wallet address of miner and blockchain record wallet address and coin together. \r\ni recommend people to connect the receiving wallet address to transmitting wallet address of users.  bitcoin user should add a bridge to double check and verify it by passing coins from their receiver wallet address and secondly transmitter wallet should transmit blockchain tx to bitcoin nodes. so receiver wallet addresses should be locked to only one transmitter address. \r\n\r\nto improve bitcoin what should add to bitcoin full node database\r\ntransmitter wallet should be created first and receiver wallets should take first sats from it. master transmitter wallet should have a flag as master, master wallet should have ability to change and to create wallets with /master or /slave flags. \r\nin this point master address can make a buffer wallet and use it for sending bitcoins and it can hide behind One time Used wallet.\r\ntransmitter wallet address should have random encoded nonce in its address.\r\n\r\nfor example if somebody trying to brute force master(transmitter wallet) its record on blockchain will have nonce and this address will be seen as one of random fake addresses created using public key of master wallet.\r\n\r\nreceiver wallets must use first transaction sender as a single valid tx address. receiver wallets should have slave flags.\r\nso we can align some wallets together with blockchain verified order. \r\n\r\nwhy this come to my mind?\r\ni am using 100+ bitcoin wallets and i need to check the balances etc daily. i want to make hierarchy for wallets.\r\n\r\n\n\n### Is your feature related to a problem, if so please describe it.\n\nits not seem as a problem now but we need it for a better future.\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "phpkadir",
      "created_at": "2024-12-05T17:21:01Z",
      "updated_at": "2025-12-05T12:23:10Z",
      "closed_at": "2024-12-05T17:26:52Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31432",
      "labels": [
        "Feature"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2401,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3510872152,
      "number": 33615,
      "title": "ASAN use-after-free in `m_reconnections`",
      "body": "I ran into this while shutting my node down during IBD. I think it's benign.\n\nWhat happens:\n- `CConnman` is started [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/init.cpp#L2183).\n  - This initializes `semOutbound` [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/net.cpp#L3361).\n- While `CConnman` is active, `m_reconnections` is added to in `DisconnectNodes` [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/net.cpp#L1981).\n- `CConnman` is stopped [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/init.cpp#L315)\n  - The call to `Stop` will call `StopNodes` which will reset `semOutbound` [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/net.cpp#L3511).\n- `~CConnman` is invoked a few lines below [here](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/init.cpp#L328).\n  - In addition to calling `Stop` a second time, it also destructs a possibly non-empty `m_reconnections` (a list of `ReconnectionInfo` which contains a [pointer to the memory](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/net.h#L1690) that `semOutbound` also pointed to) by calling `clear()`. To destroy each element of `m_reconnections`, it looks like it accesses the `grant` field but that memory was already freed.\n\nI haven't been able to reproduce this reliably, it appears timing-dependent. I think this can be fixed by calling `WITH_LOCK(m_reconnections_mutex, m_reconnections.clear())` before [this line](https://github.com/bitcoin/bitcoin/blob/64a7c7cbb975cb3c3f25a3f784779f32cd95ebaa/src/net.cpp#L3511).\n\nASAN output:\n```\n=================================================================\n==22244==ERROR: AddressSanitizer: heap-use-after-free on address 0x6020018ba9d0 at pc 0x000100837e58 bp 0x00016f826280 sp 0x00016f826278\nWRITE of size 8 at 0x6020018ba9d0 thread T0\n==22244==WARNING: Can't write to symbolizer at fd 5\n    #0 0x100837e54 in void std::__1::__destroy_at[abi:ne180100]<CConnman::ReconnectionInfo, 0>(CConnman::ReconnectionInfo*) construct_at.h:67\n    #1 0x100837754 in std::__1::__list_imp<CConnman::ReconnectionInfo, std::__1::allocator<CConnman::ReconnectionInfo>>::clear() list:635\n    #2 0x1008202b8 in CConnman::~CConnman() net.cpp:3526\n    #3 0x10075802c in Shutdown(node::NodeContext&) init.cpp:328\n    #4 0x1005decc0 in main bitcoind.cpp:292\n    #5 0x1937bab48  (<unknown module>)\n\n0x6020018ba9d0 is located 0 bytes inside of 8-byte region [0x6020018ba9d0,0x6020018ba9d8)\nfreed by thread T0 here:\n    #0 0x1034ed2e4 in _ZdlPv+0x6c (libclang_rt.asan_osx_dynamic.dylib:arm64+0x612e4)\n    #1 0x10081fe9c in CConnman::StopNodes() net.cpp:3511\n    #2 0x100757ebc in Shutdown(node::NodeContext&) init.cpp:315\n    #3 0x1005decc0 in main bitcoind.cpp:292\n    #4 0x1937bab48  (<unknown module>)\n\npreviously allocated by thread T0 here:\n    #0 0x1034ececc in _Znwm+0x6c (libclang_rt.asan_osx_dynamic.dylib:arm64+0x60ecc)\n    #1 0x10081c77c in CConnman::Start(CScheduler&, CConnman::Options const&) net.cpp:3361\n    #2 0x10077d364 in AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) init.cpp:2183\n    #3 0x1005debd0 in main bitcoind.cpp:288\n    #4 0x1937bab48  (<unknown module>)\n\nSUMMARY: AddressSanitizer: heap-use-after-free construct_at.h:67 in void std::__1::__destroy_at[abi:ne180100]<CConnman::ReconnectionInfo, 0>(CConnman::ReconnectionInfo*)\nShadow bytes around the buggy address:\n  0x6020018ba700: fa fa fd fa fa fa fd fa fa fa fd fa fa fa fd fa\n  0x6020018ba780: fa fa fd fa fa fa fd fa fa fa fd fa fa fa fd fa\n  0x6020018ba800: fa fa fd fd fa fa fd fa fa fa fa fa fa fa fa fa\n  0x6020018ba880: fa fa 00 00 fa fa fa fa fa fa fa fa fa fa 00 00\n  0x6020018ba900: fa fa fd fa fa fa fd fd fa fa fd fa fa fa fd fd\n=>0x6020018ba980: fa fa fd fd fa fa fd fd fa fa[fd]fa fa fa fd fa\n  0x6020018baa00: fa fa fd fa fa fa fd fa fa fa fd fa fa fa fd fa\n  0x6020018baa80: fa fa fd fa fa fa fd fd fa fa fa fa fa fa fa fa\n  0x6020018bab00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x6020018bab80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x6020018bac00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==22244==ABORTING\n```",
      "state": "closed",
      "user": "Crypt-iQ",
      "created_at": "2025-10-13T17:23:46Z",
      "updated_at": "2025-12-05T10:29:25Z",
      "closed_at": "2025-12-05T10:29:25Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33615",
      "labels": [
        "Bug",
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3506144248,
          "user": "big14way",
          "body": "@maflcko please assign this issue to me let me fix the bug ",
          "created_at": "2025-11-08T08:23:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 59,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3512126349,
          "user": "Crypt-iQ",
          "body": "@big14way I was planning on fixing this issue myself, but if you want to fix it, feel free. I think it'd be valuable if you were able to reproduce the use-after-free to make sure that the issue is fixed.",
          "created_at": "2025-11-10T14:43:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 203,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5006,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3697531142,
      "number": 34009,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "fugatecorey22",
      "created_at": "2025-12-05T05:16:05Z",
      "updated_at": "2025-12-05T05:16:14Z",
      "closed_at": "2025-12-05T05:16:12Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34009",
      "labels": [],
      "comment_data": [
        {
          "id": 3615342047,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The content is just minimal setup/boilerplate commands with no issue description, problem, or relation to the repository — lacking actionable context and appears irrelevant.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-05T05:16:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 442,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 492959591,
      "number": 16859,
      "title": "Syncing headers with feeler-peers",
      "body": "It occurred to me that we should eliminate the distinction between feelers -- peers we connect to on average every couple minutes to test entries in addrman -- and the extra outbound peers we connect to if our tip is stale (#11560).  Instead, why not just sync headers with feeler connections, and if we happen to learn of a new block from that feeler when our tip had been stale, consider evicting an older connection (just as we do with our extra outbounds)?\r\n\r\nIt seems to me that this should increase the cost to an adversary trying to eclipse a node, because they'd need to control a large fraction of the addrman in order to withhold the most-work chain for any sizeable amount of time.\r\n\r\nMoreover since we're already making these feeler connections already, it should be a small amount of additional bandwidth to sync headers with such a peer.  (Perhaps we should avoid doing this in IBD...?)\r\n\r\n@EthanHeilman Any thoughts?",
      "state": "closed",
      "user": "sdaftuar",
      "created_at": "2019-09-12T18:24:29Z",
      "updated_at": "2025-12-04T19:57:49Z",
      "closed_at": "2025-12-04T19:57:49Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/16859",
      "labels": [
        "Brainstorming",
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3614051541,
          "user": "darosior",
          "body": "Is there any reason for keeping this open now that #19858 was merged? Good arguments for not implementing this behaviour through feeler connections were given above, and #19858 implemented this through a new type of temporary outbound connections instead.",
          "created_at": "2025-12-04T19:43:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 965,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 480353224,
      "number": 16599,
      "title": "ASN-based bucketing of the network nodes",
      "body": "Currently we bucket peers (or potential peers)  based on /16 network groups  which directly correlate to the IP-addresses. This is done to diversify connections every node maintains, for example to avoid connecting to the nodes all belonging to the same region/provider.\r\n\r\nCurrently peers.dat (serialized version of addrman) does not store ip->bucket mappings explicitly, and all the known ips from peers.dat are re-hashed and re-bucketed at every restart (although it's very cheap).\r\n\r\n## Idea\r\n\r\nIt was [recently](http://www.erisian.com.au/bitcoin-core-dev/log-2019-06-20.html) suggested by @TheBlueMatt to use ASN-based bucketing instead. This is strictly better because if the goal is to diversify connections: the distribution of IPs among the ASNs is not uniform, and because of that netgroup-based bucketing may result in having 8 peers from just 2 large ASNs. \r\nIf we allow connecting to each ASN at most once, this would increase the security of the network.\r\n\r\nWe have @sipa's script to create a compressed representation of mapping (ip->ASN), which is less than 2 megabytes.\r\n\r\nHowever, there are integration-related design questions.\r\n\r\n### Distribution of the .map file\r\n\r\nDuring the meeting there was a rough consensus (not unanimous though, @jnewbery ) that mapping file should be distributed along with the release, instead of becoming part of the binary. \r\n\r\nIf you want to question these, feel free to comment below.\r\n\r\n### Legacy /16 bucketing\r\nThere was a suggestion of having an old method as well. I think we should do it.\r\n\r\n### ~Loading the map~\r\nMaybe there will be concerns here, I have an understanding for now.",
      "state": "open",
      "user": "naumenkogs",
      "created_at": "2019-08-13T20:29:21Z",
      "updated_at": "2025-12-04T18:06:54Z",
      "closed_at": null,
      "comments": 35,
      "url": "https://github.com/bitcoin/bitcoin/issues/16599",
      "labels": [
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3608666477,
          "user": "darosior",
          "body": "Thanks for the data @virtu. I think it's important to make a compelling case that switching to ASmap by default won't lead to a degraded network that would take a long time to fix due to the slow take-up on new releases.\n\nRegarding your minor concern, i previously [asked](https://btctranscripts.com/bitcoin-core-dev-tech/2025-02/asmap) about this and got back that the half-life of a map should be around 5 years. So it should always be better than the current method. And i guess it's always possible to implement a fall back to the current method after X years if it turns out to be necessary.\n\nRegarding your major concern, let me try to give an argument in favour of the switch. The current outbound connection logic does not sample first by netgroup (/16 or AS), it samples among all available IPs and only has a rule to not connect twice to the same netgroup. This is not ideal for eclipse resistance, but does provide some leeway regarding your concern. Large providers hosting high-performance nodes own more than one AS. If the numbers of nodes is spread somewhat evenly among those, Bitcoin Core nodes running with ASmap would still most likely establish a connection to both, given the probability that by picking any IP randomly it would belong to either of the AS.\n\nHaving a look through [Bitnodes](https://bitnodes.io/nodes/), Hetzner does have 4 AS but unfortunately the node count is very much unevenly spread (870, 6, 6, 4). Google has 3 with a slightly more spread node count (342, 44, 6). Amazon has 2 with node counts (339, 64).\n\nThis is not quite ideal, but it does mean that a node could still have multiple connections to the cluster of high-performance nodes. Furthermore, this cluster of high-performance nodes is itself fairly well spread among different providers. Still at Bitnodes, i can see 6 hosting providers AS among the IP count of reachable nodes. Those regroup 2377 out of the 7329 publicly reachable IPV4 nodes. So if a node picks -say- a DigitalOcean node for his first outbound connection slot, he still has approximately a 30% probability (217 reachable nodes are hosted at DO) of picking a high performance node. If he then picks an OVH node for his second slot, about 28%. If he then picks a Hetzner node, his chance of picking a node from the high performance hosting provider drops to about 20%.\n\nEnabling ASmap by default is definitely going to reduce the number of outgoing connections made to large hosting providers, this is by design. But i think the current structure of the network is such that the impact on the network graph may be less drastic than you suggest.",
          "created_at": "2025-12-03T20:16:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2616,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3609099274,
          "user": "mzumsande",
          "body": "> a conceivable scenario entails a non-negligible share of Bitcoin nodes not being able to sustain ten outbound connections because they are in constant competition with other nodes for inbound slots on „small-AS“ nodes although ample unused inbound resources are available on „large-AS“ nodes.\n\nThis would likely lead to a  \"ping-pong\" effect of evictions:\n\nWhen most popular reachable nodes are full (125 peers), and other nodes seeking for outbound peers will connect to them, they will usually accept the connection, but at the same time evict another peer to make room. The evicted peer then looks for a new outbound peer, which, if  also full, evicts yet another one and so on, leading to long chains of churning through peers which would obviously be bad for the network.\n\nI was also undecided on whether asmap-by-default is a good idea because of this - one thing that should've helped a lot in this regard is #33004 by increasing the network-wide number of inbound slots,  so I'm more optimistic now than I was before. \n\nIt doesn't help that we have to rely on simulations because it's really hard to measure network-wide inbound capacity - the last measurement known to me is from the 2022 paper \"[On the Peer Degree Distribution of the Bitcoin P2P Network](https://publikationen.bibliothek.kit.edu/1000146768)\" by Grundmann et al. (Fig.2) and showed that global inbound capacity was rather scarce back then - but the methodology of that paper is not easily repeatable for various reasons.",
          "created_at": "2025-12-03T22:24:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1499,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3609129125,
          "user": "sipa",
          "body": "> When most popular reachable nodes are full (125 peers), and other nodes seeking for outbound peers will connect to them, they will usually accept the connection, but at the same time evict another peer to make room. The evicted peer then looks for a new outbound peer, which, if also full, evicts yet another one and so on, leading to long chains of churning through peers which would obviously be bad for the network.\n\nIs that really what happens? That sounds undesirable, independent of this issue. I think replacing an inbound connection should only happen if it strictly improves some metric.",
          "created_at": "2025-12-03T22:33:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 598,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3609156243,
          "user": "mzumsande",
          "body": "> Is that really what happens?\n\nI think so, at least with the default `-maxconnections` (we protect a fixed number of peers with the inbound eviction logic, so with `-maxonnections=30` things may be different). The upside of this is that even if you manage to eclipse a node, keeping it eclipsed is much harder, because every new inbound could break the eclipse (and would immediately get protected from eviction if it provided us a new block the other nodes were withholding from us).",
          "created_at": "2025-12-03T22:43:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 485,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3613637707,
          "user": "darosior",
          "body": "That makes sense, but maybe other mechanism could achieve the same without the same drawbacks. For instance is it still really necessary after https://github.com/bitcoin/bitcoin/pull/19858?",
          "created_at": "2025-12-04T18:06:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 189,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1680,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3550359145,
      "number": 33700,
      "title": "Batch tx broadcast RPC",
      "body": "### Please describe the feature you'd like to see added.\n\nThe intent of #31085 wasn't really *just* to be able to broadcast a \"package\" of size 1, but that it would be nice if the caller of `submitpackage` didn't need to sit down and figure out/make sure all their broadcasts match exactly some BIP-defined structure. Ideally I just give Bitcoin Core a pile of transactions and it figures it out - if there's two children and two parents it broadcasts them as two packages, etc. Maybe this is just something we get for \"free\" with cluster mempool and larger package relay (as long as the transactions are even related to each other, though it'd be kinda nice for Bitcoin Core to figure that out too), but any restrictions in `submitpackage` ultimately filter down through the ecosystem and imply restrictions on hundreds of internal interfaces (eg the LDK `BroadcasterInterface`) and APIs (eg Esplora/Electrum implementations will generally just call that method), so it'd be nice to be as generic as possible.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "open",
      "user": "TheBlueMatt",
      "created_at": "2025-10-24T17:23:11Z",
      "updated_at": "2025-12-04T17:12:58Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33700",
      "labels": [
        "Feature",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3444208682,
          "user": "TheBlueMatt",
          "body": "Oh, maybe the most important relaxation would be to remove the topological-sort requirement.",
          "created_at": "2025-10-24T17:33:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 92,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3461570152,
          "user": "glozow",
          "body": "This definitely seems doable. A couple more API questions since you're here:\nWhat would you prefer to happen if a transaction fails? Is it fine if we quit altogether or do you want the node to keep trying with everything else?\nWe currently just have an error message that's just passed/failed. Would this change work: all passed / some passed / you submitted invalid stuff / maxfeerate or maxburnamount exceeded ?\nAre you ok with _some_ requirements, e.g. \"your batch contains transactions that conflict with each other?\"",
          "created_at": "2025-10-29T13:37:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 521,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3462702682,
          "user": "ajtowns",
          "body": "I'd contend that if you could make a p2p connection, announce `INV tx1 tx2 ...` and reply to `GETDATA` requests (or BIP331 messages or whatever we add in future), and get your txs added to the node's mempool and relayed onwards, then you should be able to get the same result with a simple RPC call.\n\nFor errors, I think it would be preferable to have a parameter that decides whether the behaviour should be \"only accept anything if you can accept everything\" or \"accept as much as you can and tell me what failed and why, including giving me the txid of any in-mempool conflicts\".\n\nFor txs that won't relay currently (eg grandparent, parent below mempool minfee, child cpfp's both?), I think this should give an error, rather than doing any special handling that will still only add the txs to this node's mempool.",
          "created_at": "2025-10-29T17:01:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 816,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3486063102,
          "user": "TheBlueMatt",
          "body": "> What would you prefer to happen if a transaction fails? Is it fine if we quit altogether or do you want the node to keep trying with everything else?\n\nParameter as mentioned by @ajtowns would be fine, but my general view of transaction relay is its all fallible anyway (nodes may be partitioned/fees may spike/we may be disconnected from the internet/etc/etc) so I want to just send a bunch of transaction hex into the void and Bitcoin Core is responsible for getting as much as possible confirmed.\n\nThus, my suggestion would be to just keep going and broadcast what you can, maybe returning the error on a per-tx basis.\n\n\n> We currently just have an error message that's just passed/failed. Would this change work: all passed / some passed / you submitted invalid stuff / maxfeerate or maxburnamount exceeded ?\n\nSure.\n\n> Are you ok with some requirements, e.g. \"your batch contains transactions that conflict with each other?\"\n\nYea, at least that seems reasonable.",
          "created_at": "2025-11-04T13:40:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 967,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1290,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3545450511,
      "number": 33691,
      "title": "SENDTEMPLATE Tracking Issue",
      "body": "Plan:\n\n * Protocol specification [BIN25-2](https://github.com/bitcoin-inquisition/binana/blob/master/2025/BIN-2025-0002.md) and [BIP153 PR#1937](https://github.com/bitcoin/bips/pull/1937)\n * Implementation:\n   * [PR#33191](https://github.com/bitcoin/bitcoin/pull/33191) - Providing templates to peers\n   * [sendtemplate3 branch](https://github.com/ajtowns/bitcoin/tree/202508-sendtemplate3) - Using templates from peers\n * Live tests\n   * [x] signet: inquisition 29.x ([#96](https://github.com/bitcoin-inquisition/bitcoin/pull/96)) nodes provide templates, eg inquisition.bitcoin-signet.net\n   * [x] mainnet: cornflower.erisian.com.au provides templates currently\n   * [ ] warnet simulation?\n * Discussion:\n   * https://delvingbitcoin.org/t/sharing-block-templates/1906\n * Potential benefits: (tick with data confirming benefit)\n   * [ ] Quick population of mempool on initial start\n   * [ ] Quicker relay of top-of-mempool transactions \n   * [ ] Improved compact block propagation with diverse mempool policies\n   * [ ] Transaction rebroadcast without participation of sender/receiver\n * Future ideas:\n   * [x] Include 2MvB of transactions, not just the next block\n   * [ ] Send templates shortly after construction\n   * [ ] Coordinate template construction with INV announcements better\n   * [ ] Send diffs since prior templates to reduce bandwidth\n   * [ ] Use set reconciliation to improve compact block reconstruction (see delving discussion)\n   * [ ] Use reduced siphash to make compact block calculations faster?\n",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-10-23T16:11:55Z",
      "updated_at": "2025-12-04T14:53:26Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33691",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3612640676,
          "user": "ajtowns",
          "body": "It looks like reusing compact block messages doesn't make sense -- including two blocks' worth of data seems pretty useful, but that could result in an ~8MB `blocktxns` data if your mempool was empty and the top of the mempool was full of inscriptions, which would in turn [exceed the 4MB maximum message size we have](https://github.com/bitcoin/bitcoin/pull/33191#pullrequestreview-3383627846). We could expand the maximum message size, but large messages can be a DoS vector, so splitting the template response up probably makes more sense. That also provides the opportunity to describe the block template more directly, rather than pretending it's a block with a header committing to the txids and perhaps a coinbase committing to the wtxids. So current work is on redesigning the p2p messages and making template reconstruction an iterative thing (\"here's the first batch of missing transactions\", ..., \"here's the next batch of missing transactions\") rather than a one shot (\"here's all the missing transactions, you now have a template!\")",
          "created_at": "2025-12-04T14:53:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1045,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1548,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2002120968,
      "number": 28917,
      "title": "fuzz, parse_iso8601: attempt to dereference an end-of-stream istreambuf_iterator",
      "body": "Ran into this crash on my own infra, not sure why oss-fuzz doesn't find it.\r\n\r\n```\r\n$ echo \"MjIyMw0NDQ0NDQ0NDQ0NDQ0NDcIn\" | base64 --decode > parse_iso8601-46463936b8a32173e167a89aad1ddc9a81f24bef.crash\r\n$ FUZZ=parse_iso8601 ./src/test/fuzz/fuzz parse_iso8601-46463936b8a32173e167a89aad1ddc9a81f24bef.crash\r\nINFO: Running with entropic power schedule (0xFF, 100).\r\nINFO: Seed: 3937133750\r\nINFO: Loaded 1 modules   (568922 inline 8-bit counters): 568922 [0x5624a4a983f0, 0x5624a4b2324a), \r\nINFO: Loaded 1 PC tables (568922 PCs): 568922 [0x5624a4b23250,0x5624a53d17f0), \r\n/workdir/fuzz_bins/fuzz_libfuzzer_asan: Running 1 inputs 1 time(s) each.\r\nRunning: /workdir/crashes/crash-46463936b8a32173e167a89aad1ddc9a81f24bef\r\n/usr/bin/../lib/gcc/x86_64-linux-gnu/13/../../../../include/c++/13/bits/streambuf_iterator.h:159:\r\nIn function:\r\n    char_type std::istreambuf_iterator<char>::operator*() const [_CharT = \r\n    char, _Traits = std::char_traits<char>]\r\n\r\nError: attempt to dereference an end-of-stream istreambuf_iterator (this is \r\na GNU extension).\r\n\r\nObjects involved in the operation:\r\n    iterator @ 0x7fba1c71cab0 {\r\n      type = std::istreambuf_iterator<char, std::char_traits<char> >;\r\n    }\r\n==168734== ERROR: libFuzzer: deadly signal\r\n    #0 0x5624a1a85e15 in __sanitizer_print_stack_trace (/workdir/fuzz_bins/fuzz_libfuzzer_asan+0x2139e15) (BuildId: 62115406ea19b6ed2ad09059ef2ecba37a6d0893)\r\n    #1 0x5624a19dfacc in fuzzer::PrintStackTrace() crtstuff.c\r\n    #2 0x5624a19c58e7 in fuzzer::Fuzzer::CrashCallback() crtstuff.c\r\n    #3 0x7fba1e3e950f  (/lib/x86_64-linux-gnu/libc.so.6+0x3c50f) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #4 0x7fba1e4370fb  (/lib/x86_64-linux-gnu/libc.so.6+0x8a0fb) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #5 0x7fba1e3e9471 in raise (/lib/x86_64-linux-gnu/libc.so.6+0x3c471) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #6 0x7fba1e3d34b1 in abort (/lib/x86_64-linux-gnu/libc.so.6+0x264b1) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #7 0x7fba1e76700c  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xa300c) (BuildId: f947d332c54844fe645ac9680c4b4222e5276a9f)\r\n    #8 0x5624a3a39305 in std::istreambuf_iterator<char, std::char_traits<char>>::operator*() const util.cpp\r\n    #9 0x5624a3a3a867 in boost::date_time::format_date_parser<boost::gregorian::date, char>::parse_month(std::istreambuf_iterator<char, std::char_traits<char>>&, std::istreambuf_iterator<char, std::char_traits<char>>&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, boost::date_time::parse_match_result<char>&) const util.cpp\r\n    #10 0x5624a3a34c69 in boost::date_time::time_input_facet<boost::posix_time::ptime, char, std::istreambuf_iterator<char, std::char_traits<char>>>::get(std::istreambuf_iterator<char, std::char_traits<char>>&, std::istreambuf_iterator<char, std::char_traits<char>>&, std::ios_base&, boost::posix_time::ptime&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&, bool) const util.cpp\r\n    #11 0x5624a3a151b4 in std::basic_istream<char, std::char_traits<char>>& boost::posix_time::operator>><char, std::char_traits<char>>(std::basic_istream<char, std::char_traits<char>>&, boost::posix_time::ptime&) util.cpp\r\n    #12 0x5624a3a137d7 in wallet::ParseISO8601DateTime(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) util.cpp\r\n    #13 0x5624a1b28c5e in parse_iso8601_fuzz_target(Span<unsigned char const>) parse_iso8601.cpp\r\n    #14 0x5624a22c8963 in LLVMFuzzerTestOneInput fuzz.cpp\r\n    #15 0x5624a19c6db4 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) crtstuff.c\r\n    #16 0x5624a19afce3 in fuzzer::RunOneTest(fuzzer::Fuzzer*, char const*, unsigned long) crtstuff.c\r\n    #17 0x5624a19b5906 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) crtstuff.c\r\n    #18 0x5624a19e0456 in main crtstuff.c\r\n    #19 0x7fba1e3d46c9  (/lib/x86_64-linux-gnu/libc.so.6+0x276c9) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #20 0x7fba1e3d4784 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x27784) (BuildId: 8a1bf172e710f8ca0c1576912c057b45f90d90d8)\r\n    #21 0x5624a19aa750 in _start (/workdir/fuzz_bins/fuzz_libfuzzer_asan+0x205e750) (BuildId: 62115406ea19b6ed2ad09059ef2ecba37a6d0893)\r\n\r\nNOTE: libFuzzer has rudimentary signal handlers.\r\n      Combine libFuzzer with AddressSanitizer or similar for better crash reports.\r\nSUMMARY: libFuzzer: deadly signal\r\n```\r\n\r\nThis only seems to happen when building with depends, so it might be a bug specific to our boost version (or libstdc++? I tested with libstdc++ from gcc 13 & 11).",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2023-11-20T12:42:39Z",
      "updated_at": "2025-12-04T12:22:47Z",
      "closed_at": "2024-12-04T11:21:50Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/28917",
      "labels": [
        "Upstream",
        "Questions and Help"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 4750,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2717906534,
      "number": 31418,
      "title": "test: failure in `interface_usdt_net.py`",
      "body": "Master @ ae69fc37e4fff237a119225061d68f69e6cd61d7.\r\nRunning on Rawhide.\r\nGCC: `gcc (GCC) 14.2.1 20241104 (Red Hat 14.2.1-6)`.\r\nSystemtap: `systemtap-5.2-1.fc42.src.rpm`\r\n\r\n```bash\r\ncmake -B build -DWITH_USDT=ON\r\ncmake --build build -j17\r\n./build/test/functional/test_runner.py --jobs=17\r\n```\r\n\r\n```bash\r\n123/314 - interface_usdt_net.py failed, Duration: 3 s\r\n\r\nstdout:\r\n2024-12-04T14:13:14.071000Z TestFramework (INFO): PRNG seed is: 2457885293535030371\r\n2024-12-04T14:13:14.072000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20241204_141156/interface_usdt_net_187\r\n2024-12-04T14:13:14.353000Z TestFramework (INFO): hook into the net:inbound_message and net:outbound_message tracepoints\r\n2024-12-04T14:13:16.509000Z TestFramework (INFO): connect a P2P test node to our bitcoind node\r\n2024-12-04T14:13:16.613000Z TestFramework (INFO): check receipt and content of in- and outbound version messages\r\n2024-12-04T14:13:16.613000Z TestFramework (INFO): check_p2p_message(): inbound P2PMessage(peer=0, addr=127.0.0.1:46824, conn_type=inbound, msg_type=version, msg_size=111)\r\n2024-12-04T14:13:16.615000Z TestFramework (INFO): check_p2p_message(): outbound P2PMessage(peer=0, addr=127.0.0.1:46824, conn_type=inbound, msg_type=version, msg_size=114)\r\n2024-12-04T14:13:16.742000Z TestFramework (INFO): Stopping nodes\r\n2024-12-04T14:13:16.794000Z TestFramework (INFO): Cleaning up /tmp/test_runner_₿_🏃_20241204_141156/interface_usdt_net_187 on exit\r\n2024-12-04T14:13:16.794000Z TestFramework (INFO): Tests successful\r\n\r\n\r\nstderr:\r\n/virtual/main.c:70:9: warning: 'MIN' macro redefined [-Wmacro-redefined]\r\n   70 | #define MIN(a,b) ({ __typeof__ (a) _a = (a); __typeof__ (b) _b = (b); _a < _b ? _a : _b; })\r\n      |         ^\r\ninclude/linux/minmax.h:329:9: note: previous definition is here\r\n  329 | #define MIN(a,b) __cmp(min,a,b)\r\n      |         ^\r\n1 warning generated.\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-04T14:17:37Z",
      "updated_at": "2025-12-04T12:22:43Z",
      "closed_at": "2024-12-04T17:13:05Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31418",
      "labels": [
        "Tests"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1934,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1712437859,
      "number": 27677,
      "title": "Proposal for a new mempool design",
      "body": "@sipa and I gave a presentation to some other developers recently about some work we've been doing to redesign how the mempool works, and I wanted to share a writeup outlining our thoughts with a broader audience to further the discussion.  I've also attached a PDF of slides that go along with this: [Reinventing the Mempool.pdf](https://github.com/bitcoin/bitcoin/files/11490409/Reinventing.the.Mempool.pdf).\r\n\r\n--------\r\n\r\n# Summary\r\n\r\nThe current mempool is primarily designed around maintaining two different sort orders, where for each transaction we keep track of its position in an ancestor-feerate-sort and in a descendant-feerate-sort.  We then use those two cached sort orders in order to implement eviction and mining.\r\n\r\nThose algorithms are deficient in several ways. In particular, the eviction algorithm (which removes the transaction with lowest descendant feerate, along with its descendants) does not guarantee that the first transaction evicted would be the last transaction mined, and there exist situations where we could evict a transaction that would otherwise actually be mined in the next block.\r\n\r\nFurthermore, the mining algorithm is more complex than the ancestor feerate sort we maintain, and it is insufficient to merely do lookups into our ancestor feerate index to determine which of two transactions will be mined from the mempool first. This lack of a total ordering on mempool transactions makes RBF calculations difficult to align with miner incentives, and creates distortions where we sometimes can replace transactions via RBF that would actually be better for a miner than the replacement.\r\n\r\nTo solve all these problems, we propose maintaining a total ordering on mempool transactions, which we use to implement a mining and eviction algorithm that are symmetrically opposite and provide better RBF rules for determining when to allow a replacement to occur.\r\n\r\n# Background\r\n\r\n## [Eviction and mining are not opposite](#eviction-mining-not-opposite)\r\n\r\nSometimes our eviction criteria might remove something that would be mined in the next block from our mempool. Consider the following transaction graph _(with (ancestor, descendant) feerates in sat/byte in parentheses)_:\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[\"Tx A: size 250, fee 250 (1, 2)\"]-->B;\r\n    A-->C;\r\n    A-->E[\"Tx E: size 250, fee 49750 (100, 199)\"];\r\n    B[\"Tx B: size 50000, fee 50000 (1, 2.02)\"]-->D[\"Tx D: size 500, fee 52000 (1.51, 104)\"];\r\n    C[\"Tx C: size 50000, fee 50000 (1, 2.02)\"]-->D;\r\n```\r\n\r\nNote that the ancestor feerate of E is 100 sat/byte, while the descendant feerate of A is 2 sat/byte.  In particular, the descendant feerate of A is lowest among all transactions in this diagram, so if it were also the lowest descendant feerate package in the mempool, then we might evict A, and therefore E, even though (A, E) might otherwise be selected for the next block.\r\n\r\n## RBF is not incentive compatible\r\n\r\nThere are many forms of incentive incompatibility baked into the BIP 125 replacement rules:\r\n * The \"no-new-parents\" rule doesn't consider the replacement transaction's desirability to a miner -- it might be better than all the to-be-replaced transactions, despite the new unconfirmed parent.\r\n * The rule requiring that a new transaction pays a higher feerate than its direct conflicts is insufficient to ensure that the new transaction is more desirable than what is being evicted. One of the direct conflicts could have a smaller set of unconfirmed parents than the new transaction, resulting in a higher ancestor feerate. Moreover, because we don't compare feerates of any indirect conflicts -- that is, descendants of direct conflicts -- with the feerate of the new transaction, it's possible that we're evicting a child transaction that would otherwise be mined in the next block with something that will not be mined for a long time.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/26451 for more discussion of the second point.\r\n\r\n# Proposed solution\r\n\r\nIf we're able to maintain a total ordering on the mempool, then we can design efficient algorithms that will solve these problems.\r\n\r\n## How to maintain a total ordering\r\n\r\nWith the current algorithm and rules, it is infeasible to continuously maintain a fully-ordered mempool at all times. Ordering an $n$-transaction mempool from scratch scales with $O(d n \\log n)$, where $d$ is the descendant limit (default 25), which quickly becomes too much when the mempool grows beyond a trivial size. And unfortunately, doing this incrementally (just re-ordering affected transactions whenever updates happen) does not help, because even a single added transaction can change the ordering of all remaining ones.\r\n\r\n[_Edited to use a better example_] As an example of this effect, consider the following transaction graph (all transactions are same size, with ancestor feerates of children in parentheses):\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[Tx A: fee 16]-->D[\"Tx D: fee 17 (16.5)\"];\r\n    A-->E[\"Tx E: fee 19 (16)\"];\r\n    B[Tx B: fee 13]-->E;\r\n    B-->F[\"Tx F: fee 23 (14.67)\"];\r\n    C[Tx C: fee 8]-->F;\r\n```\r\n\r\nWith these ancestor feerates, Tx D should be included first along with its parent Tx A. Once Tx A is included, Tx E will have the next highest ancestor feerate and it is included next with its parent, and so on to produce the ordering: [A, D, B, E, C, F].\r\n\r\nNow consider a single transaction being added, Tx G:\r\n\r\n```mermaid\r\ngraph TD;\r\n    A[Tx A: fee 16]-->D[\"Tx D: fee 17 (16.5)\"];\r\n    A-->E[\"Tx E: fee 19 (16)\"];\r\n    B[Tx B: fee 13]-->E;\r\n    B-->F[\"Tx F: fee 23 (14.67)\"];\r\n    C[Tx C: fee 8]-->F;\r\n    C-->G[\"Tx G: fee 29 (18.5)\"]\r\n```\r\n\r\nTransaction G now has the highest ancestor feerate, and so it would be chosen first in our ancestor-feerate-based ordering. Once Tx G and its parent Tx C are included, Tx F will see its ancestor feerate increase (as it only has one remaining ancestor) to 18, making it the next best to include (along with its parent Tx B). Once Tx B is in, Tx E has the next highest ancestor feerate and we can see that the final ordering of transactions is: [C, G, B, F, A, E, D]. Note that the order in which the child transactions appear has been reversed, and moreover, the number of transactions in this graph could be extended arbitrarily while retaining this behavior.\r\n\r\nFundamentally this means that we need to bound the number of transactions whose ordering can be affected by individual changes to the mempool. Our main insight is that this number is exactly the size of the largest \"cluster\" of transactions that we might have in the mempool, where a \"cluster\" is a maximal set of transactions that are connected via ancestor/descendant relationships in the transaction graph.\r\n\r\nOur proposal is thus to introduce a limit on the size of clusters in the mempool. It then becomes feasible to maintain an ordering for all the individual clusters at all times, and perform a quick merge sort over all of them whenever a total ordering of the entire mempool is needed.\r\n\r\n### Definitions\r\n\r\n#### Clusters\r\n\r\nWe associate the transactions in the mempool with a graph, where each transaction corresponds to a vertex and two transactions are adjacent (ie have an edge between them) if one spends any outputs of the other. We say that two transactions are in the same cluster if there exists a path of edges between them. The overall graph of transactions is partitioned into disjoint clusters, where each transaction is in exactly one cluster. \r\n\r\n#### Linearizations\r\n\r\nWe introduce the term \"linearization\" to refer to any topologically valid ordering of transactions, that is, any ordering of transactions that would be valid in a block under Bitcoin's consensus rules. This could be an ancestor-feerate-based ordering of transactions (like we use in the mining code today), or it could be the optimal ordering (one where we choose amongst all possible subsets of transactions the topologically valid subset that maximizes feerate, and repeat until all transactions are selected).  Or it could be something in between; for the purposes of discussion we abstract away the details of the cluster ordering algorithm, or \"linearization\", that we might settle on.\r\n\r\n#### Chunks\r\n\r\nOur intuition for cluster linearization algorithms is that we often will choose transactions with lower feerate before we choose transactions with higher feerate, because of topology constraints. This is a consequence of behaviors like \"child- pays-for-parent\".  So when thinking about how we might compare transactions from two different clusters to determine which  one is \"better\" (eg for mining) or \"worse\" (eg for eviction), we don't just want to look at the first or last transaction in the cluster. Instead, our intuition is that we want to look at the same package of transactions that our ordering algorithm would have used in coming up with the ordering in the first place.\r\n\r\nThis concept, that transactions should be looked at in some aggregate with other transactions, can be generalized in a way that is indifferent to the underlying linearization algorithm that is used. For a given linearized cluster  $[tx_1, ..., tx_n]$, we can partition the cluster into a series of disjoint \"chunks\" $[c_1, c_2, ..., c_j]$ where $c_1 = [tx_1, ..., tx_{i_1}]$, $c_2 = [tx_{i_1+1}, ..., tx_{i_2}]$ ,..., $c_j = [tx_{i_{j-1}+1}, ..., tx_n]$, such that the feerate of each chunk is no greater than the feerate of the chunk that precedes it. \r\n\r\nAnother way of putting it: chunks are the partitioning of a cluster that respects the linearization in a way that ensures that feerates from one chunk to the next are monotonically decreasing.\r\n\r\n(_Note that due to ties there can be more than one chunking that is compatible with the given definition; generally we'll prefer smaller chunks and therefore not merge together chunks with the same feerate._)\r\n\r\nGiven any cluster linearization, it turns out that it's possible to construct the chunks for the cluster in linear time, and this operation is independent of the linearization algorithm that may have been used.\r\n\r\n### Implementing fundamental mempool operations\r\n\r\nFor the sake of discussion below, let's now imagine that our mempool is grouped into its different clusters, and each cluster is linearized using some algorithm (perhaps the ancestor-feerate-based mining algorithm in use today, or perhaps an optimal ordering), and those linearized clusters are each chunked into their monotonically decreasing feerate order.  Given such a mempool, we can design algorithms to implement the fundamental mempool operations.\r\n\r\n#### Mining\r\n\r\nOur goal with mining is to maximize the fees in a block template, and we do so by applying a greedy algorithm. \r\n\r\n1. Make a highest-feerate-sorted heap consisting of the first chunk from each cluster.  Note that these will be each cluster's highest feerate chunk.\r\n2. While the candidate block is not yet full:\r\n    i. Remove the top of the heap and add to the block candidate.\r\n    ii. If the cluster from which the selection was made has more chunks left, insert the next best chunk from that cluster into the heap.\r\n\r\nNote that when we approach the end of a block, we run into a knapsack problem where chunks may not fit. How we might optimize the end of a block is deferred for later discussion.\r\n\r\n#### Eviction\r\n\r\nOur goal with eviction is to remove the transactions that would be the last ones selected by our mining algorithm. With a  fully ordered mempool, this calculation is straightforward and mirrors the mining algorithm.\r\n\r\n1. Make a lowest-feerate-sorted heap consisting of the last chunk from each cluster. Note that these will be each cluster's lowest feerate chunk.\r\n2. While the mempool is over its size limit:\r\n    i. Remove the top of the heap and evict from the mempool.\r\n    ii. If the cluster from which the selection was made has more chunks left, insert the next lowest feerate chunk from that cluster into the heap.\r\n\r\nAs with our current eviction algorithm, we will also bump up the mempool's minimum fee to be an increment above the highest feerate chunk that was evicted.\r\n\r\n#### [RBF](#RBF)\r\n\r\nOur goal with RBF is to allow a \"better\" transaction (something a miner would prefer to have) to evict some existing, conflicting transactions in a way that is DoS-resistant but is otherwise as permissible as practical.\r\n\r\nGiven a mempool where all clusters are ordered and chunked, we can assign a score to a transaction which is the chunk feerate of the chunk to which it belongs.  Then our main RBF incentive compatibility rule just becomes:\r\n\r\n1. A replacement transaction must have a chunk feerate greater than that of all transactions which it would evict.\r\n\r\nThis would eliminate the BIP 125 rule against replacements introducing new unconfirmed parents and replaces the BIP 125 feerate rule in which a replacement transaction must have a higher individual feerate than all direct conflicts.\r\n\r\nHowever, at least for now, we would retain some of the additional anti-DoS rules:\r\n\r\n1. A replacement transaction must pay more total fees than the sum of fees paid by all evicted transactions.\r\n2. A replacement transaction must not evict more than (100?) existing transactions.\r\n\r\nThe first of those rules prevents free-relay attacks, while some version of the second rule is necessary to prevent us from needing to re-cluster/re-order too much of the mempool while processing a single transaction.\r\n\r\n## Some open questions\r\n\r\n1. Philosophically, is it problematic for RBF rules to be even more of a \"black box\" than the BIP 125 algorithm?\r\n2. Are there usage patterns for wallets or other protocols that would be fundamentally harmed by cluster size limits? Do we know what values would be acceptable or what values would be insufficient?\r\n3. What can we do if a high feerate transaction arrives that would violate the cluster limit? Can we design some sort of \"cluster-sibling eviction\" algorithm that is DoS-resistant and would help reduce the downsides of cluster size limits?\r\n4. Is it problematic if linearization algorithms used on the network are non-deterministic?\r\n   * We could imagine using a variety of linearization algorithms at any given moment -- perhaps for small clusters we use an exponential run-time optimal ordering algorithm, while for medium sized clusters we do something different, like an ancestor-feerate-based ordering, or an optimal ordering with some bounded computation limits.\r\n   * Are there situations where different nodes having different orders causes meaningful user-facing issues with transactions not relaying effectively, eg because of the use of chunk feerates in the RBF algorithm?\r\n6. Chunk sizes should be bounded in vbytes, so that we don't exacerbate the knapsack problem during mining. However, what is the best way to do that?\r\n   * We could just bound the vbytes allowed in a single cluster, which would guarantee that chunks are not too big.\r\n   * Or we could design linearization algorithms and adapt our chunking logic to never produce chunks bigger than a certain size -- but this would come at the expense of chunks within a cluster no longer having monotonically decreasing feerates. This may be possible to do, but is the need for large clusters (measured in vbytes) great enough to warrant the complexity that this would introduce in our algorithms?\r\n\r\n# Current status and next steps\r\n\r\n1. First draft implementation of this logic is done (link to be added).\r\n2. Analyzing effects of this logic on historical transaction data is in process, to try to answer questions like:\r\n   * How big are the clusters we've historically seen / what is the cluster size distribution on the network today\r\n   * How would the network have been affected if we'd had cluster sizes bounded at various different values in the past\r\n3. Performance analysis of all the mempool operations (particularly as a function of cluster size) to ensure that mempool operations are optimized with this approach.\r\n4. The information gathered will (eventually) inform a concrete proposal for what cluster size limits we might consider (along with chunk vbyte and/or cluster vbyte limits).\r\n",
      "state": "open",
      "user": "sdaftuar",
      "created_at": "2023-05-16T17:29:33Z",
      "updated_at": "2025-12-04T09:18:06Z",
      "closed_at": null,
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/issues/27677",
      "labels": [
        "Brainstorming",
        "Mempool"
      ],
      "comment_data": [
        {
          "id": 3595226069,
          "user": "jsarenik",
          "body": "I wonder if the cluster mempool would influence the operation of [alt.signetfaucet.com](https://alt.signetfaucet.com) which currently depends on the default `limitancestorcount` of 25.\n\nUPDATE: Seems quite easy: [~64 instead of 25](https://github.com/bitcoin/bitcoin/issues/30289#issuecomment-2539215701)",
          "created_at": "2025-12-01T08:23:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 304,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 16174,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2855472840,
      "number": 31878,
      "title": "kernel: feedback on using kernel in alternative implementations",
      "body": "After talking about this with many core devs offline, and being told every time to open an issue with this, I'm opening this to spark some discussion about the viability and optimal implementation of a `libbitcoinkernel`-like lib to help consensus-compatible implementations. This could be useful for other experimental projects like [2][3].\n\n## Goals\n\nBitcoin doesn’t have a formal spec for its base protocol. It operates with the “reference implementation” model, where Bitcoin\nCore dictates what Bitcoin actually is. Bitcoin Core is a mission critical software, the backbone of a 2 trillion \ndollars industry. And as such, it has the highest standards when it comes to adding new features, and experimentations. \nHowever, Bitcoin is a new completelly novel experiment, with many prospective ideas out there that can’t be implemented in Core due \nto it’s incipience, but also can’t be implemented in an alternative client (or at least not trivially) due to the constant \nrisk of falling out of consensus with Bitcoin Core. This tradeoff has stopped or slowed down some ideas like Utreexo and \nProof of Work fraud proofs because, to implement them, you need to reimplement a bug-compatible Bitcoin Core rewrite \n(possibly in other languages). This is also a problem for projects that don’t operate directly with the consensus layer, \nlike wallets and Layer two software, that might misinterpret some paramentes and end up putting user’s funds in risk.\n\nFor new deployments, such as segwit and taproot, we have a very well thought description and standardization. We also have \nabundant test-vectores and sometimes even self-contained reference implementations. That makes reimplementations much easier.\nHowever, unless we can hard-fork the network to remove all undefined behavior and get a formal specification, building complex \nsoftware on top of Bitcoin without a way to re-use Bitcoin Core code will always be a non-trivial process.\n  \n## Utreexo light clients\n\nWith utreexo[1] we can have extremely small clients, both in code footprint and actual resource usage. We currently have\ntwo implementations of such ideas: utreexod[2] and floresta[3]. The former is written in Golang, and the latter in Rust.\nWhile they are well-tested and have a high quality standard, reimplementing Bitcoin’s consensus logic is a complex problem, \nthat oftentimes can fail you in the most unexpected ways.\n\nThe vast majority of consensus failures comes from implementing the low-level checks of blocks and transactions, \nlike script evaluation and locktimes. The implementation of those parts inside Bitcoin Core is battle-tested and overly \noptimized already, making any meaningful improvement almost impossible. So it would make sense for other projects to reuse \nthem, reducing the chances of a consensus failure and using the state-of-the-art validation logic. The goal isn't, in any way, \nreplace Bitcoin Core. Rather, to allow for inovation and research in parts that wouldn't be inside Core's scope, but without\nre-inventing the weel every single time. For this we have two possible approaches, `libbitcoinconsensus` and `libbitcoinkernel`.\n\n### libbitcoinconsensus\n\nThis was one the earliest attempts to make the validation code for bitcoin reusable. This lib, however, only exposes script\nvalidation. All other checks must be implemented by consumers. Although it have such limited context, it turns out that most\nof the complexity inside Bitcoin’s validation comes from script validation. It is over a thousand lines, and has many known\nand unknown undefined behaviors that are extremely hard to get right in other languages, like Rust or Go. For instance, the \nlast consensus failure found on btcd is related to `FindAndDelete`, a function used inside the script evaluation.\n\nFloresta uses `libbitcoinconsensus` since it’s very beginning, and has never had any failure of this kind. The API is\nsimple and hard-to-misuse. However, this limited scope prevents it from being used in more advanced use-cases. \nFor instance, all layer two applications need to re-implement core’s mempool policies inside the implementation, \nsometimes needing a simplified script evaluation logic. This is useful because they need to learn in advance whether a \ntransaction will be confirmed or not, without broadcasting it. If core’s internal policy was exposed as a lib, that would \nhelp reducing potential risks on layer two’s software and make them simpler and easier to maintain.\n\n### libbitcoinkernel\n\nKernel on the other hand, is a more complete tool that can even run an embedded Bitcoin Core on your application. \nIt exposes core’s internal storage, the peers logic and lets you replace some parts of a node. It is perfect for \napplications that needs to consume blocks in a high-bandwidth  way, since you can read blocks and transaction straight \nfrom disk, without going through the RPC. In the version implemented in [4], it even brings the old libbitcoinconsensus’s \nAPI, making it a drop-in replacement for the latter. \n\nAs currently designed, however. It can’t get past of libbitcoinconsensus’s context for alternative implementations or \nlayer two software. The reason being that it depends on core’s UTXO set and blocks store. For floresta and utreexod, \nhaving the UTXO set doesn’t make sense, since we are utreexo CSN nodes. For L2, sometimes they need to check for chains of \nunconfirmed transactions, spending UTXOs that doesn’t exist in the UTXO set nor mempool. The ideal workflow for such \napplications would be a method (or a series of) that takes a serialized block, a list of UTXOs, the current MTP, block \nheight (and hash?); then returns whether that block is valid or not (returning the error if possible). This would be \nclose to the SANS-IO model, where all data needed will be provided by the caller, and the function would only operate on them.\nA similar interface to validate transactions would also be very useful.\n\nThe main con of this approach is that now libbitcoinkernel will technically not be fully-consensus compatible. This happens \nbecause whether a UTXO exists or not is completely tied to the database that core uses, in some cases it might be a problem \nthat only happens if they appear in a block. We already have a track record of a chain split caused by a database upgrade[5]. \nEven if we’ve implemented utreexo validation inside Bitcoin Core, leveldb would still be required. The best we could do is require that a UTXO is recognized by both utreexo and leveldb  (that would be a soft-fork, technically). \nEliminating leveldb would only be possible if Bitcoin Core worked only as a utreexo node, using leveldb only as a way to keep \nUTXO data. Although this would be a huge improvement on defining bitcoin’s consensus, and preventing future failures like [5],\nthat is impractical both politically and probably technically, as implementing this risks a consensus failure.\n\nA good compromise would be if libbitcoinkernel (or another subset of thereof with another name for clarity) would allow an \n“unsafe” mode, where not all consensus parts are provided (e.g. leveldb) and you still **could** create a failure. This project\ncould live under a new namespace to not confuse with `libbitcoinkernel`.\n\n\nSources\n[1] https://eprint.iacr.org/2019/611\n[2] https://github.com/utreexo/utreexod\n[3] https://github.com/vinteumorg/floresta\n[4] https://github.com/bitcoin/bitcoin/pull/30595\n[5] https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki",
      "state": "open",
      "user": "Davidson-Souza",
      "created_at": "2025-02-15T13:23:10Z",
      "updated_at": "2025-12-04T00:59:02Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31878",
      "labels": [
        "Brainstorming",
        "UTXO Db and Indexes",
        "Utils/log/libs"
      ],
      "comment_data": [
        {
          "id": 3131724379,
          "user": "moonfury-ops",
          "body": "Hello @Davidson-Souza \n\nThe need for a context-minimal, SANS-IO validation interface is especially compelling. \nBeing able to reuse Bitcoin Core's consensus logic without depending on its internal database (e.g., leveldb-backed UTXO set) would enable a wide range of innovative projects to maintain compatibility and safety without needing to reimplement fragile or underspecified parts of the protocol.\nYour suggestion of a middle-ground approach—a separate module or mode under the libbitcoinkernel umbrella that exposes deterministic block/tx validation interfaces by allowing the caller to provide context like UTXOs, MTP, block height, etc.—makes a lot of sense. \n\nThis could:\nPrevent “consensus drift” due to reimplementing complex logic in other languages.\nReduce the engineering cost and risk for experimental clients.\nImprove the accessibility and safety of building on Bitcoin.\n\nWhile I understand the concerns about introducing potential inconsistencies or unsafe assumptions by decoupling from the internal Core DB model, a clearly documented, opt-in “unsafe” mode or interface seems like a pragmatic way to balance innovation and safety.",
          "created_at": "2025-07-29T10:10:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1150,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3609448765,
          "user": "Jonatanc05",
          "body": "I have been developing a [recreational implementation of a bitcoin node](https://github.com/Jonatanc05/ZiglyNode) and it's getting to a point where I could use it to make some naive tooling and maybe research futurely. I don't have anything concrete but I think the mentioned \"unsafe mode\" would greatly benefit students, beginners and people starting a modest project with no big commitments. We have seen many good things arise from modest projects\n\nLinux:\n> I'm doing a (free) operating system (just a hobby, won't be big and professional like gnu)\n-- Linus Torvalds, https://en.wikipedia.org/wiki/History_of_Linux#The_creation_of_Linux\n\nPython:\n> In December 1989, Van Rossum had been looking for a \"'hobby' programming project that would keep [him] occupied during the week around Christmas\" as his office was closed when he decided to write an interpreter for a \"new scripting language [he] had been thinking about lately\n-- https://en.wikipedia.org/wiki/Guido_van_Rossum#Python\n\nGit, Sqlite, Apache and others have similar histories. Not to mention Bitcoin itself, which was made as a spaghetti code experiment. I think the takeaway is _the lower the cost to experiment, the broader the surface area of research and higher the chances of useful innovation_.",
          "created_at": "2025-12-04T00:59:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1264,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 7535,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3691800098,
      "number": 34002,
      "title": "Request to help mining two Nonstandard UTXO which fails cleanstack",
      "body": "### Please describe the feature you'd like to see added.\n\nI have 2 anybody can spend UTXO which fails cleanstack validation which says non-mandatory script verify flag(Stack size must be exactly one after execution) for P2SH, the script passes consensus perfectly as top item is true but get problem here even if it ends with 2 elements gives the same error. Requesting you to at least make it 5 elements max on the stack .\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\nJust requesting for a bit change in standard policy for the number of elements on the stack should be <=5\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "Sreejitroy",
      "created_at": "2025-12-03T20:31:44Z",
      "updated_at": "2025-12-03T21:56:30Z",
      "closed_at": "2025-12-03T21:56:30Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34002",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3609010449,
          "user": "pinheadmz",
          "body": "The Bitcoin Core issue tracker is reserved for specific software issues like bug reports and feature requests. Individual help inquiries or general Bitcoin usage questions are more appropriate at https://bitcoin.stackexchange.com https://reddit.com/r/bitcoin or IRC channels such as `#bitcoin`",
          "created_at": "2025-12-03T21:56:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 293,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 839,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3653223188,
      "number": 33923,
      "title": "should concurrent IPC requests directed to the same thread cause a crash?",
      "body": "recently I reported https://github.com/bitcoin/bitcoin/issues/33554, which was fixed by the introduction of `interruptWait` via #33575\n\nthen I noticed crashes for similar reasons (although unrelated to `waitNext`), which I explain in detail here: https://github.com/stratum-mining/sv2-apps/issues/88#issuecomment-3558003166\n\nTLDR: I was trying to do a `getBlock` while a `submitSolution` was happening at the same time, both against the same Bitcoin Core thread\n\nthis made me realize that regardless of whether the call is going to block for a long time (like `waitNext`), I simply cannot leave room for concurrent calls against the same Bitcoin Core thread\n\nwhich feels a bit contradictory to what @ryanofsky suggested here: https://github.com/bitcoin/bitcoin/issues/33554#issuecomment-3382354366\n\n> More broadly, I think I'd try just having a c++ \"waiter\" thread dedicated to running waitNext calls, and a c++ \"worker\" thread to run all other IPC operations besides waitNext. The \"waiter\" thread should be mostly blocked monitoring mempool and network, and the \"worker\" thread should be available to do anything else you might need like fetching and submitting block data.\n\nand it's making me re-evaluate some assumptions I had when I started https://github.com/stratum-mining/sv2-apps/pull/59\n\noverall, I'm getting to a place where I'm having to go great lengths in terms of defensive programming just to avoid crashing Bitcoin Core\n\nI'm still evaluating the trade-offs of potential defensive strategies, namely:\n- having synchronization primitives that avoid overlapping requests against the same Bitcoin Core thread\n- instantiating multiple Bitcoin Core threads, one dedicated for each potentially concurrent request\n\nbut I digress... the main point I wanted to articulate here was: shouldn't Bitcoin Core simply not crash if two requests arrive for the same thread?\n\nideally, a naive client should simply be forced to wait a bit longer if they send concurrent requests against the same Bitcoin Core thread, instead of being forced to avoid doing this at all cost because it could cause havoc on the other side of the IPC connection",
      "state": "open",
      "user": "plebhash",
      "created_at": "2025-11-21T22:05:01Z",
      "updated_at": "2025-12-03T16:31:04Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33923",
      "labels": [],
      "comment_data": [
        {
          "id": 3564979973,
          "user": "ryanofsky",
          "body": "> shouldn't Bitcoin Core simply not crash if two requests arrive for the same thread?\n\nYes this shouldn't crash. Hopefully, if you are using a version of bitcoin after https://github.com/bitcoin-core/libmultiprocess/pull/214 (part of #33518 in master and part of #33519 in 30.x branch) you should just see \"thread busy\" errors instead of crashes, and it is a bug if there are still crashes.\n\n> ideally, a naive client should simply be forced to wait a bit longer if they send concurrent requests against the same Bitcoin Core thread\n\nThis is reasonable and would be pretty easy to implement, but it raises the question of how many requests should be allowed? Should it allow 5, 10, or 100 requests before returning \"thread busy\"? Or an arbitrary amount? Or a configurable amount?\n\nMy thinking has been that if a client needs a request queue, it is probably better for the client implement the queue, than to have the server provide one because the client should know its own needs better. Also, not every client needs a queue. For example, Sjor's SV2 client is multithreaded and only makes blocking requests. It just creates one server thread for each client thread, so every server thread is guaranteed to not be busy when a request comes in.\n\nSince the rust client is single threaded and nonblocking, it needs to create different server threads for those requests to execute in parallel like the c++ client does, or it needs to have a queue so requests created in parallel can be executed serially on a single server thread.\n\nIn practice, I think it make sense for the rust client to just create 2 server threads: a waiting thread to execute `waitNext()` calls, and a worker thread using a queue to execute all other calls.\n\nIt if would help, I could add a `enableRequestQueue()` or similar method to the [`Thread`](https://github.com/bitcoin-core/libmultiprocess/blob/470fc518d4be83649fce9ad71e6d32536ffa1aac/include/mp/proxy.capnp#L50-L54) interface so the rust client can ask for the requests sent to a thread to be queued. \n\nHowever, I think it would probably be straightforward to implement a queue in rust on the client side instead. And I wouldn't want queuing to be enabled on the server by default because it could mask other problems. Like if a request was accidentally sent to the waiting thread rather than the worker thread, it could just sit there forever if queuing was enabled on the waiting thread, instead of returning an error.\n\nThanks for reporting the problem here and I hope this can lead to a good solution.",
          "created_at": "2025-11-21T23:29:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2532,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3566852691,
          "user": "plebhash",
          "body": "I guess the main thing I wanted to report here is a duplicate of https://github.com/bitcoin-core/libmultiprocess/pull/214, so it's good to know these crashes won't happen on `v30.x`!\n\n> how many requests should be allowed? Should it allow 5, 10, or 100 requests before returning \"thread busy\"? Or an arbitrary amount? Or a configurable amount?\n\nit would be up to the client to know what are the reasonable bounds for backpressure so that it can avoid the need to handle errors, so I'd say that a configurable amount with a reasonably large default\n\nbut since you also mentioned:\n\n> And I wouldn't want queuing to be enabled on the server by default because it could mask other problems.\n\nI wouldn't necessarily frame this as an actual feature request, mainly because we're working around this without having to resort to server-side queueing.\n\n---\n\n> Since the rust client is single threaded and nonblocking, it needs to create different server threads for those requests to execute in parallel like the c++ client does, or it needs to have a queue so requests created in parallel can be executed serially on a single server thread.\n\ncurrently we're going with the first approach, so now we create 5 server threads, one dedicated for each potentially concurrent call:\n- `submitSolution`\n- `getHeader`\n- `getCoinbaseTx`\n- `getCoinbaseMerklePath`\n- `waitNext`\n\nplus some ad-hoc threads that are created ephemerally whenever we need to do a `getBlock` (either to reply to a `RequestTransactionData` or because we want to dump a valid solution to disk)\n\nto be honest, we could have gotten away with only 2 by forcing `getHeader`, `getCoinbaseTx`, `getCoinbaseMerklePath` and `waitNext` to be done sequentially under the same server thread\n\nbut we're trying to squeeze out every possible micro/nano/pico second out of the way with concurrent execution of `getHeader`, `getCoinbaseTx`, `getCoinbaseMerklePath` so we can craft a `NewTemplate` message ASAP (the ones for mempool updates are actually rate-limited, so we're not really in a race... but for chain tip updates we do want this to happen as fast as possible)\n\nwith this approach, queuing requests on the server side is not needed at all.\n\nbut it made me wonder about something (which I was eventually going to be forced to consider anyways):\n\nwe eventually want to adapt this code so that it can become a sidecar that's attached to Bitcoin Core, which then acts as a Sv2 Template Provider, listening on a TCP port and catering for as many clients as possible... so now, for every client that connects to it, we create 5 new threads on Bitcoin Core\n\nwhether we create 1, 2 or 5 threads for each client is not too relevant, but my main question is whether there are there protection mechanisms in place in case we try to create too many threads at once? if so, what happens once Bitcoin Core is no longer willing to create new threads?",
          "created_at": "2025-11-22T16:18:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2886,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3569919239,
          "user": "Sjors",
          "body": "> to be honest, we could have gotten away with only 2 by forcing `getHeader`, `getCoinbaseTx`, `getCoinbaseMerklePath` and waitNext to be done sequentially under the same server thread\n\nI think you should bench this before deciding if it needs optimising and also check whether it's _actually_ faster and not e.g. slowing the node responses down with overhead.\n\nIf `getHeader`, `getCoinbase(Tx)` and `getCoinbaseMerklePath` really need to be called in parallel, then I think it would be better if the `BlockTemplate` interface is somehow pre-populated with those values - avoiding these round trips entirely.",
          "created_at": "2025-11-24T10:11:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 608,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3607727965,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33923#issuecomment-3566852691\n\n> my main question is whether there are there protection mechanisms in place in case we try to create too many threads at once?\n\nThere aren't any currently, and making a lot of threads is probably the easiest way an IPC client could DoS the node.\n\nIt wouldn't be hard to create a limit though, if there is a use-case.\n\nI do think creating 5 threads for each client that needs to receive templates sounds like overkill, and would suggest trying to implement an approach with less overhead. Ideally the SV2 template provider be able to take a single bitcoin core template and broadcast it out to many clients, instead of each client needing unique templates.\n\nI also agree with sjors it doesn't seem ideal to be calling getters like getHeader, getCoinbaseTx, and getCoinbaseMerklePath in parallel. If we can change the interface to provide a single method that will return all the information needed so you don't need to make multiple calls, that would be better.\n\nre: https://github.com/bitcoin/bitcoin/issues/33923#issuecomment-3564979973\n\n> My thinking has been that if a client needs a request queue, it is probably better for the client implement the queue, than to have the server provide one because the client should know its own needs better.\n\nReplying to myself, I now am rethinking my previous thinking. One case where a server queue is clearly better than a client queue is when a client wants to request multiple pieces of data and have the data sent back sequentially. Without a server queue, the client needs to wait for each piece of data to be received before requesting the next piece of data, which is not efficient. With a server queue, data can be streamed back much more nicely. So now I am thinking about ways to implement a queue. And I think it might be possible to do without creating an separate data structure or explicit queue limit by simply attaching data to capnproto promises. This would get rid of the \"thread busy\" error entirely.\n",
          "created_at": "2025-12-03T16:31:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 2041,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2211,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3690246980,
      "number": 34000,
      "title": "fuzz: crash in psbt fuzzer",
      "body": "From: https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2585106930:\n\n> looks like this line crashes:\n\n```bash\n$ echo 'cHNidP8BAP0+AQIAAAAGy4dxGNHKAQgFPtEAoVgyMqb+N0ghgmdne5OjULYs2sUAAAr/AP3////L\nfnEY0crZmwU+EVahszExpv43SCGCZ2d7k6NQtizaOwADAC4ABHwdAMt+cRjRytmbBT4RVqFYMTGm\n/jdIIYJnZ3uTo1AAOwAsAAC2KwD9////hqbXlTl39C5ZmAtOAI4+zy32vWLVnyQjw7IvQsBa6rYA\nAAcAAP3//zKG/zqgb7JIwmli68xeUjUXVp+c4b/tvc55IsAI4yQAAAAAAAAA/f///8t/0cpxGNmb\nBT4RVqFYMTOm/jdIIXj///8AAAAAgNo7AACAAAD9//3/AiHf9QUAAAAAFgAU9/Ykq9yiCFGnUpsi\nRsS6FFGLkQEAAAAAAAABABYAFEEQliEApQAADCBABv78gsn+/////wAAAAAAAAAAACIagHQAAAAV\nDLQyJycoAHNiKDIDAEIAAEEA/wEABgDI/jdIIYJnZ3uTo1AAOwAsAAC2KwD9////hqbXAY9zeZ10\nc/zcAAEBK2ECEWUrKwAAIlEgcPx0K2ICYgQkKwABAQEBAQsCAgAERUIADwADAAADmSsAAAA=' | base64 --decode > /tmp/crash.bin \n\n\n$ FUZZ=psbt ./bld-cmake/bin/fuzz -runs=1 /tmp/crash.bin \nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 494792800\nINFO: Loaded 1 modules   (385403 inline 8-bit counters): 385403 [0x55c06b279420, 0x55c06b2d759b), \nINFO: Loaded 1 PC tables (385403 PCs): 385403 [0x55c06b2d75a0,0x55c06b8b8d50), \n./bld-cmake/bin/fuzz: Running 1 inputs 1 time(s) each.\nRunning: /tmp/crash.bin\n/usr/bin/../include/c++/v1/span:512: assertion __offset <= size() failed: span<T>::subspan(offset, count): offset out of range\n```\n(needs a hardened libc++, msan, or valgrind)\n",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-03T13:27:23Z",
      "updated_at": "2025-12-03T13:27:55Z",
      "closed_at": "2025-12-03T13:27:55Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34000",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1373,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3690096258,
      "number": 33998,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "ruthsigela6982-lab",
      "created_at": "2025-12-03T12:46:40Z",
      "updated_at": "2025-12-03T12:46:49Z",
      "closed_at": "2025-12-03T12:46:46Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33998",
      "labels": [],
      "comment_data": [
        {
          "id": 3606694780,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission is an unsolicited promotional message advertising a paid recovery/hacking service, includes contact details and a testimonial-style claim, and provides no project-relevant information, reproducible issue, or constructive contribution.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-03T12:46:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 518,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2580813416,
      "number": 31071,
      "title": "ci: Replace wine tests with real tests on Windows?",
      "body": "The Wine tests are annoying, because they frequently fail (for more than a decade now), with no fix in sight.\r\n\r\nAlso, they are less useful than running on a real Windows.\r\n\r\nMy suggestion would be to replace the win64-cross CI task with one on GitHub Actions, using a real Windows. The cross compilation would still be done normally (to mimic guix), inside WSL. However, the unit tests would be run on the real Windows.\r\n\r\nI won't be working on this myself, but I am happy to answer any questions on how to implement this, if they arise.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-10-11T08:45:55Z",
      "updated_at": "2025-12-03T12:22:19Z",
      "closed_at": "2024-12-03T13:50:06Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31071",
      "labels": [
        "Brainstorming",
        "Windows",
        "Tests",
        "CI failed"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 589,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2545812879,
      "number": 30960,
      "title": "log/dump more information if a CheckQueue failure occurs",
      "body": "I recently saw this on a node running master (90a5786bba4baac1c0270e1f4bf5bb8c790e10de iirc):\r\n```bash\r\n2024-09-23T13:12:14Z UpdateTip: new best=00000000000000000000d3ebbca24c44745cfa14153e758d29af82275e00c00f height=862523 version=0x20026000 log2_work=95.170324 tx=1084781037 date='2024-09-23T13:03:46Z' progress=0.999997 cache=302.1MiB(2120379txo)\r\n2024-09-23T13:12:14Z UpdateTip: new best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267 height=862524 version=0x20150000 log2_work=95.170337 tx=1084782848 date='2024-09-23T13:05:37Z' progress=0.999998 cache=302.4MiB(2117708txo)\r\n2024-09-23T13:12:15Z New outbound-full-relay v1 peer connected: version: 70016, blocks=862524, peer=25\r\n2024-09-23T13:13:09Z Saw new header hash=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 height=862525\r\n2024-09-23T13:13:09Z Saw new cmpctblock header hash=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 peer=1\r\n2024-09-23T13:13:10Z ERROR: ConnectBlock: CheckQueue failed\r\n2024-09-23T13:13:10Z InvalidChainFound: invalid block=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084  height=862525  log2_work=95.170350  date=2024-09-23T13:12:13Z\r\n2024-09-23T13:13:10Z InvalidChainFound:  current best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267  height=862524  log2_work=95.170337  date=2024-09-23T13:05:37Z\r\n2024-09-23T13:13:10Z [error] ConnectTip: ConnectBlock 00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 failed, block-validation-failed\r\n2024-09-23T13:13:10Z InvalidChainFound: invalid block=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084  height=862525  log2_work=95.170350  date=2024-09-23T13:12:13Z\r\n2024-09-23T13:13:10Z InvalidChainFound:  current best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267  height=862524  log2_work=95.170337  date=2024-09-23T13:05:37Z\r\n2024-09-23T13:13:16Z New outbound-full-relay v2 peer connected: version: 70016, blocks=862525, peer=27\r\n2024-09-23T13:13:23Z New outbound-full-relay v1 peer connected: version: 70016, blocks=862525, peer=28\r\n```\r\n\r\nIn this case it was possible to restart the node with `-par=1`, to output the actual failure:\r\n```bash\r\n2024-09-23T14:19:04Z [error] ConnectTip: ConnectBlock 00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 failed, mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)\r\n```\r\n\r\nHowever it would also be useful to get that information in either case. The cause of the `ConnectBlock` failure here has currently been put down to hardware.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-09-24T16:05:59Z",
      "updated_at": "2025-12-03T12:22:19Z",
      "closed_at": "2024-12-03T20:22:49Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/30960",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2586165031,
      "number": 31085,
      "title": "Why does `submitpackage` require at least two transactions",
      "body": "### Please describe the feature you'd like to see added.\n\nI want to call `submitpackage` and I don't want to have to check if I have more than one transaction to do it. I'm lazy but that restriction seems arbitrary.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "TheBlueMatt",
      "created_at": "2024-10-14T14:07:12Z",
      "updated_at": "2025-12-03T12:22:18Z",
      "closed_at": "2024-12-03T22:46:30Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31085",
      "labels": [
        "Feature",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 531,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1173662670,
      "number": 24612,
      "title": "[flatpak]  - I cannot choose or change datadir when running from flatpak",
      "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nThe -choosedatadir Should allow me to choose the datadir. But it is not. It immediately starts downloading headers from the peers.\r\nThe chooses a predefined datadir in \r\n\r\n```\r\n~/.var/app/org.bitcoincore.bitcoin-qt$ ls\r\ncache  config  data\r\n```\r\n\r\n* I am unable to modify the datadir location when I run the client using flatpak (on PopOS).\r\n\r\n**To reproduce**\r\n\r\n1. Install flatpak client\r\n2. try the command\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\nEverytime.\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n1. PopOS, Flatpak version. Client information\r\n```\r\n$ flatpak run org.bitcoincore.bitcoin-qt -version\r\nBitcoin Core version v22.0.0\r\nCopyright (C) 2009-2021 The Bitcoin Core developers\r\n\r\nPlease contribute if you find Bitcoin Core useful. Visit\r\n<https://bitcoincore.org/> for further information about the software.\r\nThe source code is available from <https://github.com/bitcoin/bitcoin>.\r\n\r\nThis is experimental software.\r\nDistributed under the MIT software license, see the accompanying file COPYING\r\nor <https://opensource.org/licenses/MIT>\r\n\r\n```\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
      "state": "open",
      "user": "orsenthil",
      "created_at": "2022-03-18T14:35:49Z",
      "updated_at": "2025-12-02T18:53:02Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/24612",
      "labels": [
        "Bug",
        "GUI"
      ],
      "comment_data": [
        {
          "id": 3431981297,
          "user": "laanwj",
          "body": "> Allow flatpak to use the new data folder:\n> \n> ```\n> > flatpak override --user --filesystem=/my/new/folder/for-btc-data org.bitcoincore.bitcoin-qt\n> ```\n\nThis is the correct solution. Flatpak applications are sandboxed, and there's nothing bitcoin-qt can do to reach outside that, unless given explicit permission.\n\nAfter giving it permission, as above, you should be able to use the qt chooser dialog to pick the datadir, so that it gets picked automatically in the future:\n\n```\n> flatpak run org.bitcoincore.bitcoin-qt -choosedatadir &\n```\n\n~~If that never shows the datadir picker with flatpak, that's a bug.~~ It is.\n",
          "created_at": "2025-10-22T11:50:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 623,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3432030077,
          "user": "laanwj",
          "body": "> I don't know much about the flatpak, but I'm guessing the \"flatpak run\" command is invoking bitcoin-qt with a hardcoded -datadir= argument that preempts the -choosedatadir argument:\n\nLooks like you're right. Flatpak creates a wrapper script that simply passes `-datadir` unconditionally.\nhttps://github.com/flathub/org.bitcoincore.bitcoin-qt/blob/master/install_wrappers.sh\n\nThere would be multiple ways to solve this. One way to fix it without changes to this repository would be to adapt the script so that when `-choosedatadir` is passed, or an explicit `-datadir,`, it doesn't pass the argument. ",
          "created_at": "2025-10-22T12:04:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 602,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3597848572,
          "user": "bialy39439",
          "body": "I'm facing same issue.\n\nSolution for me was to add --datadir argument afer org.bitcoincore.bitcoin-qt in .desktop file , eg:\n\n`/usr/bin/flatpak run --branch=stable --arch=x86_64 --command=bitcoin-qt --file-forwarding org.bitcoincore.bitcoin-qt --datadir=/path/to/somewhere`\n\nFlatpak override is necessary anyway.",
          "created_at": "2025-12-01T17:20:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 312,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2465,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3680248071,
      "number": 33981,
      "title": "integer overflow in FUZZ=package_rbf",
      "body": "Oss-Fuzz: https://issues.oss-fuzz.com/issues/464820824\n\nInput: https://github.com/user-attachments/files/23850907/clusterfuzz-testcase-minimized-package_rbf-5766839826448384.bin.not.txt\n\nReproduce:\n\n`UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=package_rbf ./bld-cmake/bin/fuzz -runs=1 /tmp/tmp.hLXaXiiFIP/clusterfuzz-testcase-minimized-package_rbf-5766839826448384.bin.not.txt`\n\n```\nsrc/util/feefrac.h:128:14: runtime error: signed integer overflow: 2147278440 + 318300 cannot be represented in type 'int32_t' (aka 'int')",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-01T10:08:36Z",
      "updated_at": "2025-12-02T15:07:09Z",
      "closed_at": "2025-12-02T15:07:08Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33981",
      "labels": [],
      "comment_data": [
        {
          "id": 3597171676,
          "user": "instagibbs",
          "body": "I believe I diagnosed it and implemented a fix https://github.com/bitcoin/bitcoin/pull/33985",
          "created_at": "2025-12-01T15:25:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 92,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 644,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2562106906,
      "number": 31019,
      "title": "ci: `feature_settings.py` failed in macOS 14 CI",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nEncountered the following failure in PR #30793 (https://github.com/bitcoin/bitcoin/pull/30793#issuecomment-2387502458) for `CI / macOS 14 native, arm64, no depends, sqlite only, gui (pull_request)`.  The failure wasn't seen on the other CI jobs.\r\n\r\n`feature_settings.py` failed, timed out for `Invalid value detected for '-wallet' or '-nowallet'`.\r\n\r\n### Expected behaviour\r\n\r\nNo failure\r\n\r\n### Steps to reproduce\r\n\r\nCI run with #39793 commit e6853592361341c27103ed74b25470ac1e098d6d\r\n\r\n### Relevant log output\r\n\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/11135374974/job/30945271145\r\n\r\n```\r\nnode0 2024-10-02T00:15:45.783638Z [init] [src/noui.cpp:57] [noui_InitMessage] init message: Verifying wallet(s)… \r\nError:  node0 2024-10-02T00:15:45.783653Z [init] [src/noui.cpp:31] [noui_ThreadSafeMessageBox] [error] Invalid value detected for '-wallet' or '-nowallet'. '-wallet' requires a string value, while '-nowallet' accepts only '1' to disable all wallets \r\n node0 2024-10-02T00:15:45.783737Z [init] [src/httpserver.cpp:510] [InterruptHTTPServer] [http] Interrupting HTTP server \r\n node0 2024-10-02T00:15:45.783748Z [init] [src/httprpc.cpp:379] [InterruptHTTPRPC] [rpc] Interrupting HTTP RPC server \r\n node0 2024-10-02T00:15:45.783756Z [init] [src/rpc/server.cpp:291] [operator()] [rpc] Interrupting RPC \r\n node0 2024-10-02T00:15:45.783770Z [init] [src/init.cpp:277] [Shutdown] Shutdown: In progress... \r\n node0 2024-10-02T00:15:45.783782Z [shutoff] [src/httprpc.cpp:384] [StopHTTPRPC] [rpc] Stopping HTTP RPC server \r\n node0 2024-10-02T00:15:45.783794Z [shutoff] [src/httpserver.cpp:772] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for / (exactmatch 1) \r\n node0 2024-10-02T00:15:45.783804Z [shutoff] [src/httpserver.cpp:772] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for /wallet/ (exactmatch 0) \r\n node0 2024-10-02T00:15:45.783810Z [shutoff] [src/rpc/server.cpp:303] [operator()] [rpc] Stopping RPC \r\n node0 2024-10-02T00:15:45.783892Z [shutoff] [src/rpc/server.cpp:309] [operator()] [rpc] RPC stopped. \r\n node0 2024-10-02T00:15:45.783904Z [shutoff] [src/httpserver.cpp:522] [StopHTTPServer] [http] Stopping HTTP server \r\n node0 2024-10-02T00:15:45.783911Z [shutoff] [src/httpserver.cpp:524] [StopHTTPServer] [http] Waiting for HTTP worker threads to exit \r\n node0 2024-10-02T00:15:45.784048Z [http] [src/httpserver.cpp:354] [ThreadHTTP] [http] Entering http event loop \r\n node0 2024-10-02T00:15:45.784129Z [http] [src/httpserver.cpp:357] [ThreadHTTP] [http] Exited http event loop \r\n test  2024-10-02T00:55:45.674000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_node.py\", line 665, in assert_start_raises_init_error\r\n                                       ret = self.process.wait(timeout=self.rpc_timeout)\r\n                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/opt/homebrew/Cellar/python@3.12/3.12.6/Frameworks/Python.framework/Versions/3.12/lib/python3.12/subprocess.py\", line 1264, in wait\r\n                                       return self._wait(timeout=timeout)\r\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/opt/homebrew/Cellar/python@3.12/3.12.6/Frameworks/Python.framework/Versions/3.12/lib/python3.12/subprocess.py\", line 2045, in _wait\r\n                                       raise TimeoutExpired(self.args, timeout)\r\n                                   subprocess.TimeoutExpired: Command '['/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/src/bitcoind', '-datadir=/Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_₿_🏃_20241002_001101/feature_settings_11/node0', '-logtimemicros', '-debug', '-debugexclude=libevent', '-debugexclude=leveldb', '-debugexclude=rand', '-uacomment=testnode0', '-logthreadnames', '-logsourcelocations', '-loglevel=trace', '-v2transport=0', '-settings=/Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_₿_🏃_20241002_001101/feature_settings_11/node0/regtest/settings.json']' timed out after 2400 seconds\r\n                                   During handling of the above exception, another exception occurred:\r\n                                   Traceback (most recent call last):\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 132, in main\r\n                                       self.run_test()\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/feature_settings.py\", line 110, in run_test\r\n                                       self.test_wallet_settings(settings)\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/feature_settings.py\", line 39, in test_wallet_settings\r\n                                       node.assert_start_raises_init_error(expected_msg=\"Error: Invalid value detected for '-wallet' or '-nowallet'. '-wallet' requires a string value, while '-nowallet' accepts only '1' to disable all wallets\",\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_node.py\", line 695, in assert_start_raises_init_error\r\n                                       self._raise_assertion_error(assert_msg)\r\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_node.py\", line 197, in _raise_assertion_error\r\n                                       raise AssertionError(self._node_msg(msg))\r\n                                   AssertionError: [node 0] bitcoind should have exited within 2400s with expected error Error: Invalid value detected for '-wallet' or '-nowallet'. '-wallet' requires a string value, while '-nowallet' accepts only '1' to disable all wallets\r\n test  2024-10-02T00:55:45.690000Z TestFramework (DEBUG): Closing down network thread \r\n test  2024-10-02T00:55:45.894000Z TestFramework (INFO): Stopping nodes \r\n test  2024-10-02T00:55:45.894000Z TestFramework (WARNING): Not cleaning up dir /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_₿_🏃_20241002_001101/feature_settings_11 \r\n test  2024-10-02T00:55:45.895000Z TestFramework (ERROR): Test failed. Test logging available at /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_₿_🏃_20241002_001101/feature_settings_11/test_framework.log \r\n test  2024-10-02T00:55:45.895000Z TestFramework (ERROR): \r\n test  2024-10-02T00:55:45.896000Z TestFramework (ERROR): Hint: Call /Users/runner/work/bitcoin/bitcoin/test/functional/combine_logs.py '/Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_₿_🏃_20241002_001101/feature_settings_11' to consolidate all logs \r\n test  2024-10-02T00:55:45.897000Z TestFramework (ERROR): \r\n test  2024-10-02T00:55:45.897000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \r\n test  2024-10-02T00:55:45.897000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \r\n test  2024-10-02T00:55:45.897000Z TestFramework (ERROR): \r\n ```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.99.0-86e8b1bd8d33-dirty\r\n\r\n### Operating system and version\r\n\r\nmacOS 14.6.1\r\n\r\n### Machine specifications\r\n\r\narm64",
      "state": "closed",
      "user": "tdb3",
      "created_at": "2024-10-02T16:15:52Z",
      "updated_at": "2025-12-02T12:21:51Z",
      "closed_at": "2024-12-02T13:05:31Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/31019",
      "labels": [
        "CI failed"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 7852,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2586825497,
      "number": 31087,
      "title": "Unable to compile for test coverage on Nixos 24.05",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nI'm trying to compile Bitcoin Core for test coverage as explained in `doc/developer-notes.md`, but the command `cmake -P build/Coverage.cmake` fails with \r\n```\r\n[...]\r\nFinished .info-file creation\r\nDeleting all .da files in src and subdirectories\r\nDone.\r\n.lcov-wrapped: WARNING: negative counts found in tracefile test_bitcoin_filtered.info\r\nCombining tracefiles.\r\nReading tracefile test_bitcoin_filtered.info\r\nWriting data to test_bitcoin_filtered.info\r\nSummary coverage rate:\r\n  lines......: 70.5% (76896 of 109080 lines)\r\n  functions..: 64.7% (21913 of 33862 functions)\r\n  branches...: no data found\r\nCombining tracefiles.\r\nReading tracefile baseline_filtered.info\r\nReading tracefile test_bitcoin_filtered.info\r\nWriting data to test_bitcoin_coverage.info\r\nSummary coverage rate:\r\n  lines......: 69.6% (76896 of 110489 lines)\r\n  functions..: 64.0% (21913 of 34217 functions)\r\n  branches...: no data found\r\nReading data file test_bitcoin_coverage.info\r\nFound 1038 entries.\r\nFound common filename prefix \"/home/daniela/Developer/bitcoin\"\r\nWriting .css and .png files.\r\nGenerating output.\r\ngenhtml: ERROR: cannot read /home/daniela/Developer/bitcoin/build/src/include/boost/operators.hpp\r\nProcessing file build/src/include/boost/operators.hpp\r\nCMake Error at build/Coverage.cmake:46 (execute_process):\r\n  execute_process failed command indexes:\r\n\r\n    1: \"Child return code: 2\"\r\n```\r\n\r\nThe command output is also full of similar warnings:\r\n```\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/smart_ptr/detail/shared_count.hpp\r\n```\r\n\r\nThe files `./build/test_bitcoin.coverage/index.html` and `./build/total.coverage/index.html` are not created \r\n\r\n### Expected behaviour\r\n\r\nCompilation succeeds and I'm able to see the `./build/test_bitcoin.coverage/index.html` and `./build/total.coverage/index.html` files\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```\r\ncmake -B build -DCMAKE_BUILD_TYPE=Coverage\r\ncmake --build build\r\ncmake -P build/Coverage.cmake\r\n```\r\n\r\n\r\n### Relevant log output\r\n\r\n<details>\r\n  <summary> Configure build </summary>\r\n\r\n  ```\r\n$ cmake -B build -DCMAKE_BUILD_TYPE=Coverage\r\n\r\n  Configuring secp256k1 subtree...\r\n-- Could NOT find Valgrind (missing: Valgrind_INCLUDE_DIR Valgrind_WORKS) \r\n\r\n\r\nsecp256k1 configure summary\r\n===========================\r\nBuild artifacts:\r\n  library type ........................ Static\r\nOptional modules:\r\n  ECDH ................................ OFF\r\n  ECDSA pubkey recovery ............... ON\r\n  extrakeys ........................... ON\r\n  schnorrsig .......................... ON\r\n  ElligatorSwift ...................... ON\r\nParameters:\r\n  ecmult window size .................. 15\r\n  ecmult gen table size ............... 86 KiB\r\nOptional features:\r\n  assembly ............................ x86_64\r\n  external callbacks .................. OFF\r\nOptional binaries:\r\n  benchmark ........................... OFF\r\n  noverify_tests ...................... ON\r\n  tests ............................... OFF\r\n  exhaustive tests .................... ON\r\n  ctime_tests ......................... OFF\r\n  examples ............................ OFF\r\n\r\nCross compiling ....................... FALSE\r\nValgrind .............................. OFF\r\nPreprocessor defined macros ........... ENABLE_MODULE_ELLSWIFT=1 ENABLE_MODULE_SCHNORRSIG=1 ENABLE_MODULE_EXTRAKEYS=1 ENABLE_MODULE_RECOVERY=1 ECMULT_WINDOW_SIZE=15 COMB_BLOCKS=43 COMB_TEETH=6 USE_ASM_X86_64=1\r\nC compiler ............................ GNU 13.2.0, /nix/store/r73z9i18vbjcph7k2f3isrysxzx6sqjx-gcc-wrapper-13.2.0/bin/gcc\r\nCFLAGS ................................ \r\nCompile options ....................... -pedantic -Wall -Wcast-align -Wcast-align=strict -Wextra -Wnested-externs -Wno-long-long -Wno-overlength-strings -Wno-unused-function -Wshadow -Wstrict-prototypes -Wundef\r\nBuild type:\r\n - CMAKE_BUILD_TYPE ................... Coverage\r\n - CFLAGS ............................. -O2 -g  -O0 -DCOVERAGE=1 --coverage\r\n - LDFLAGS for executables ............  --coverage\r\n - LDFLAGS for shared libraries .......  --coverage\r\n\r\n\r\n\r\nConfigure summary\r\n=================\r\nExecutables:\r\n  bitcoind ............................ ON\r\n  bitcoin-node (multiprocess) ......... OFF\r\n  bitcoin-qt (GUI) .................... OFF\r\n  bitcoin-gui (GUI, multiprocess) ..... OFF\r\n  bitcoin-cli ......................... ON\r\n  bitcoin-tx .......................... ON\r\n  bitcoin-util ........................ ON\r\n  bitcoin-wallet ...................... ON\r\n  bitcoin-chainstate (experimental) ... OFF\r\n  libbitcoinkernel (experimental) ..... OFF\r\nOptional features:\r\n  wallet support ...................... ON\r\n   - descriptor wallets (SQLite) ...... ON\r\n   - legacy wallets (Berkeley DB) ..... OFF\r\n  external signer ..................... ON\r\n  port mapping using UPnP ............. OFF\r\n  ZeroMQ .............................. OFF\r\n  USDT tracing ........................ OFF\r\n  QR code (GUI) ....................... OFF\r\n  DBus (GUI, Linux only) .............. OFF\r\nTests:\r\n  test_bitcoin ........................ ON\r\n  test_bitcoin-qt ..................... OFF\r\n  bench_bitcoin ....................... OFF\r\n  fuzz binary ......................... OFF\r\n\r\nCross compiling ....................... FALSE\r\nC++ compiler .......................... GNU 13.2.0, /nix/store/r73z9i18vbjcph7k2f3isrysxzx6sqjx-gcc-wrapper-13.2.0/bin/g++\r\nCMAKE_BUILD_TYPE ...................... Coverage\r\nPreprocessor defined macros ........... \r\nC++ compiler flags .................... -g -Og --coverage -std=c++20 -fPIC -fdebug-prefix-map=/home/daniela/Developer/bitcoin=. -fmacro-prefix-map=/home/daniela/Developer/bitcoin=. -fno-extended-identifiers -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection\r\nLinker flags .......................... -g -Og --coverage -fstack-reuse=none -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\r\n\r\nNOTE: The summary above may not exactly match the final applied build flags\r\n      if any additional CMAKE_* or environment variables have been modified.\r\n      To see the exact flags applied, build with the --verbose option.\r\n\r\nAttempt to harden executables ......... ON\r\nTreat compiler warnings as errors ..... OFF\r\nUse ccache for compiling .............. ON\r\n\r\n\r\n-- Configuring done (0.3s)\r\n-- Generating done (0.1s)\r\n-- Build files have been written to: /home/daniela/Developer/bitcoin/build\r\n```\r\n</details>\r\n\r\n<details>\r\n  <summary> Generate code coverage report (trimmed) </summary>\r\n\r\n```\r\nCapturing coverage data from src\r\nFound gcov version: 13.2.0\r\nUsing intermediate gcov format\r\nUsing JSON module JSON::PP\r\nScanning src for .gcno files ...\r\nFound 398 graph files in src\r\nProcessing univalue/CMakeFiles/object.dir/test/object.cpp.gcno\r\nProcessing univalue/CMakeFiles/unitester.dir/test/unitester.cpp.gcno\r\nProcessing univalue/CMakeFiles/univalue.dir/lib/univalue_read.cpp.gcno\r\nProcessing univalue/CMakeFiles/univalue.dir/lib/univalue_write.cpp.gcno\r\nProcessing univalue/CMakeFiles/univalue.dir/lib/univalue_get.cpp.gcno\r\nProcessing univalue/CMakeFiles/univalue.dir/lib/univalue.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/exception.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/__/random.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/__/streams.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/__/support/lockedpool.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/__/randomenv.cpp.gcno\r\nProcessing util/CMakeFiles/bitcoin_util.dir/__/sync.cpp.gcno\r\n/home/daniela/Developer/bitcoin/build/src/util/CMakeFiles/bitcoin_util.dir/__/sync.cpp.gcno:no functions found\r\ngeninfo: WARNING: GCOV did not produce any data for /home/daniela/Developer/bitcoin/build/src/util/CMakeFiles/bitcoin_util.dir/__/sync.cpp.gcno\r\n[...]\r\nProcessing CMakeFiles/bitcoin_node.dir/txmempool.cpp.gcno\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/bidir_node_iterator.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/hash_index_iterator.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/utility/base_from_member.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/operators.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/tuple/detail/tuple_basic.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/bucket_array.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/hashed_index.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/hash_index_node.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/auto_space.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/index_base.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/ord_index_node.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/ord_index_impl.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/index_node_base.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index/detail/header_holder.hpp\r\ngeninfo: WARNING: could not open /home/daniela/Developer/bitcoin/build/src/include/boost/multi_index_container.hpp\r\ngeninfo: WARNING: some exclusion markers may be ignored\r\nProcessing CMakeFiles/bitcoin_node.dir/netgroup.cpp.gcno\r\n[...]\r\nFinished .info-file creation\r\nDeleting all .da files in src and subdirectories\r\nDone.\r\n.lcov-wrapped: WARNING: negative counts found in tracefile test_bitcoin_filtered.info\r\nCombining tracefiles.\r\nReading tracefile test_bitcoin_filtered.info\r\nWriting data to test_bitcoin_filtered.info\r\nSummary coverage rate:\r\n  lines......: 70.5% (76896 of 109080 lines)\r\n  functions..: 64.7% (21913 of 33862 functions)\r\n  branches...: no data found\r\nCombining tracefiles.\r\nReading tracefile baseline_filtered.info\r\nReading tracefile test_bitcoin_filtered.info\r\nWriting data to test_bitcoin_coverage.info\r\nSummary coverage rate:\r\n  lines......: 69.6% (76896 of 110489 lines)\r\n  functions..: 64.0% (21913 of 34217 functions)\r\n  branches...: no data found\r\nReading data file test_bitcoin_coverage.info\r\nFound 1038 entries.\r\nFound common filename prefix \"/home/daniela/Developer/bitcoin\"\r\nWriting .css and .png files.\r\nGenerating output.\r\ngenhtml: ERROR: cannot read /home/daniela/Developer/bitcoin/build/src/include/boost/operators.hpp\r\nProcessing file build/src/include/boost/operators.hpp\r\nCMake Error at build/Coverage.cmake:46 (execute_process):\r\n  execute_process failed command indexes:\r\n\r\n    1: \"Child return code: 2\"\r\n```\r\n</details>\r\n\r\nFor full output: [coverage.txt](https://github.com/user-attachments/files/17368354/coverage.txt) (sorry, github doesn't let me paste the full output as it's too long)\r\n\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@48cf3da636089873ba7280e0d5b22eb81811d194\r\n\r\n### Operating system and version\r\n\r\nNixOS 24.05\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "danielabrozzoni",
      "created_at": "2024-10-14T19:03:31Z",
      "updated_at": "2025-12-02T12:21:50Z",
      "closed_at": "2024-12-02T16:26:06Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31087",
      "labels": [
        "Build system"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11940,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2568630708,
      "number": 31039,
      "title": "RPC breakage with v28.0",
      "body": "If you're experiencing issues with Bitcoin Core 28.x, and using RPC, please report them here.\n\n* https://x.com/ketominer/status/1842592989488771531",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-10-06T12:15:52Z",
      "updated_at": "2025-12-02T12:21:50Z",
      "closed_at": "2024-12-02T11:31:00Z",
      "comments": 19,
      "url": "https://github.com/bitcoin/bitcoin/issues/31039",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 171,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2610797583,
      "number": 31145,
      "title": "Cmake build system breaks with symbolic links",
      "body": "If the `build` directory is a symbolic link, or when the entire source directory is symlinked (and we build from there), the current cmake build runs into trouble finding its own generated files.\r\n\r\nTo reproduce:\r\n```\r\ngit clone --depth=1 https://github.com/bitcoin/bitcoin.git\r\nmkdir build\r\ncd bitcoin/\r\nln -s ../build .\r\ncmake -Bbuild -DBUILD_GUI=ON\r\ncd build\r\nmake\r\n```\r\n\r\n```\r\n[ 37%] Building CXX object src/CMakeFiles/bitcoin_node.dir/validation.cpp.o\r\nIn file included from /data/src/tmp/bitcoin/build/src/qt/bitcoinqt_autogen/mocs_compilation.cpp:2:\r\n/data/src/tmp/bitcoin/build/src/qt/bitcoinqt_autogen/EWIEGA46WW/moc_addressbookpage.cpp:10:10: fatal error: ../../../../../src/qt/addressbookpage.h: No such file or directory\r\n   10 | #include \"../../../../../src/qt/addressbookpage.h\"\r\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\nmake[2]: *** [src/qt/CMakeFiles/bitcoinqt.dir/build.make:784: src/qt/CMakeFiles/bitcoinqt.dir/bitcoinqt_autogen/mocs_compilation.cpp.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs...\r\n```\r\n\r\nThis affects the build with Qt as well as the build with multiprocess, both which have generated files.\r\n\r\nWith autotools this wasn't an issue, so i think it can be considered a regression. But not a high-priority one as it can be worked around by specifying the full paths instead.",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2024-10-24T08:04:09Z",
      "updated_at": "2025-12-02T12:21:49Z",
      "closed_at": "2024-12-02T10:29:13Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31145",
      "labels": [
        "Build system"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1404,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3683802499,
      "number": 33992,
      "title": "tx not exist on the testnet4",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nnetwork: testnet4\n\nthis is my txinfo: https://mempool.space/zh/testnet4/tx/93cf45c0fb38f62dfde0619ae4abaadc6842a931b6946abd79012d2a963d19e5\ntip me confirms already, but i search it use rpc \n\n`curl --location 'http://47.236.168.32:18332' \\\n--header 'content-type: text/plain;' \\\n--header 'Authorization: Basic dGVzdDp0ZXN0' \\\n--data '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getrawtransaction\", \"params\": [\"93cf45c0fb38f62dfde0619ae4abaadc6842a931b6946abd79012d2a963d19e5\", true]}'`\n\nnot block info on this tx, what reason ?\n\n### Expected behaviour\n\nsearch this tx info contain block info\n\n### Steps to reproduce\n\nsearch it on the explorer\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nversion v30.0.0\n\n### Operating system and version\n\nUbuntu24\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "dachengcheng2022",
      "created_at": "2025-12-02T03:09:03Z",
      "updated_at": "2025-12-02T05:32:05Z",
      "closed_at": "2025-12-02T05:32:05Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33992",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1034,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3681429124,
      "number": 33984,
      "title": "When 30.0 for Start9",
      "body": "### Please describe the feature you'd like to see added.\n\nJust a reminder that people running Core on Start9 machines are still on 29.2.\nWhen is 30.0 going to be packaged for [Start9](https://start9.com/)?\nThanks!\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "mbarulli",
      "created_at": "2025-12-01T15:02:27Z",
      "updated_at": "2025-12-01T15:39:58Z",
      "closed_at": "2025-12-01T15:03:42Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/33984",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3597046249,
          "user": "willcl-ark",
          "body": "@mbarulli this is out of scope for this project.\n\nI think the correct place to open such an issue would be in the Start9 repo.\n\nhttps://github.com/Start9Labs",
          "created_at": "2025-12-01T15:03:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 157,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3597240774,
          "user": "l0rinc",
          "body": "please see: https://x.com/start9labs/status/1981503274051391495",
          "created_at": "2025-12-01T15:36:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 63,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3597261243,
          "user": "mbarulli",
          "body": "Thanks! Very useful tip!\r\n\r\n\r\nOn Mon, Dec 1, 2025, 16:36 l0rinc ***@***.***> wrote:\r\n\r\n> *l0rinc* left a comment (bitcoin/bitcoin#33984)\r\n> <https://github.com/bitcoin/bitcoin/issues/33984#issuecomment-3597240774>\r\n>\r\n> please see: https://x.com/start9labs/status/1981503274051391495\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/issues/33984#issuecomment-3597240774>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AAILWGXXFYDV4UUP7O3YIMD37RN77AVCNFSM6AAAAACNV6C3QKVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZTKOJXGI2DANZXGQ>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n",
          "created_at": "2025-12-01T15:39:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 691,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 491,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1913356976,
      "number": 28536,
      "title": "BIP352 tracking issue",
      "body": "This issue will be updated to reflect the current state of [BIP352](https://github.com/bitcoin/bips/blob/master/bip-0352.mediawiki) integration.\n\nPRs ready for review:\n\n* https://github.com/bitcoin-core/secp256k1/pull/1698\n\nOverall plan:\n\n* Pre-work / Refactors\n  - [x] https://github.com/bitcoin/bitcoin/pull/28244\n  - [x] https://github.com/bitcoin/bitcoin/pull/28246\n  - [x] https://github.com/bitcoin/bitcoin/pull/25273\n  - [x] https://github.com/bitcoin/bitcoin/pull/28560\n  - [x] https://github.com/bitcoin/bitcoin/pull/30047\n  - [x] https://github.com/bitcoin/bitcoin/pull/30048\n  - [x] https://github.com/bitcoin/bitcoin/pull/30050\n  - [x] https://github.com/bitcoin/bitcoin/pull/30051\n* Send and receive support in the Bitcoin Core wallet:\n  - [ ] libsecp module (cryptographic portion of the protocol: https://github.com/bitcoin-core/secp256k1/pull/1698\n  - [ ] Base protocol: https://github.com/bitcoin/bitcoin/pull/28122\n  - [ ] Sending: https://github.com/bitcoin/bitcoin/pull/28201\n  - [ ] Receiving: https://github.com/bitcoin/bitcoin/pull/32966\n\n* Light client support:\n  - [ ] Index for silent payment tweaks (depends on 28122): https://github.com/bitcoin/bitcoin/pull/28241\n  - [ ] New BIP157 filter type for tweak data (not started)\n  - [ ] Serve new filter type (not started)\n\n<details>\n  <summary>Older stuff</summary>\n\n\n  <ul>\n  <li>Closed / Superseded:\n     <ul>\n     <li>Tracking PR (superseded by this issue): #27827</li>\n     <li>Receiving (superseded by 28453): #28202</li>\n      <li>Original draft implementation: #24897</li>\n     <li>Original libsecp256k1 module (superseded by 1519): bitcoin-core/secp256k1/pull/1471</li>\n     <li>https://github.com/bitcoin-core/secp256k1/pull/1519 , (superseded by #1698)\n     <li> Original receiving PR: https://github.com/bitcoin/bitcoin/pull/28453</li>\n      </ul>\n  </li>\n  </ul>\n</details>\n",
      "state": "open",
      "user": "josibake",
      "created_at": "2023-09-26T11:59:59Z",
      "updated_at": "2025-12-01T12:36:00Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/28536",
      "labels": [
        "Feature",
        "Wallet",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2250728841,
          "user": "Turtlecute33",
          "body": "<details>\n<summary> Edit: I realized this isn't the right place to discuss this, hiding \n</summary>\nI genuinely think silent payments are a good idea and plan on using them myself once they're production ready. However, I wonder if including silent payment support in Bitcoin Core is a good idea, or if instead it would be better to have a separate software on top of Bitcoin Core where the Silent Payments logic is handled - similar to how lightning network nodes or electrum servers are implemented.\n\nFrom what I can see it will be possible to enable/disable Silent Payments support using the compilation flag, but most users don't compile Bitcoin Core, they download it from the official website, and if the official release binary will have Silent Payments activated, this means that a lot of users will have code they don't need in their nodes.\nFrom my point of view, Bitcoin Core should remain as minimal as possible, to decrease the surface of possible attacks, and to make it easier to update and maintain.\n\nI'm interested in exploring the reasons behind this choice. Sorry if this might not be the best place for discussion, in case, let me know where I can ask!\n</details>",
          "created_at": "2024-07-25T15:41:55Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 1182,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3596206124,
          "user": "Eunovo",
          "body": "> PRs ready for review:\n> \n> * [Add BIP352 module (take 3) bitcoin-core/secp256k1#1698](https://github.com/bitcoin-core/secp256k1/pull/1698)\n\n[Add BIP352 module (take 3) bitcoin-core/secp256k1#1698](https://github.com/bitcoin-core/secp256k1/pull/1698) has been replaced with  [Add \"silentpayments\" module implementing BIP352 (take 4, limited to full-node scanning)](https://github.com/bitcoin-core/secp256k1/pull/1765)\n\nAnyone looking to try out silentpayments on bitcoin-core can use https://github.com/bitcoin/bitcoin/pull/32966, which has sending and receiving support and works on the bitcoin-core gui.",
          "created_at": "2025-12-01T12:11:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 606,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1882,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3672835414,
      "number": 33964,
      "title": "Startup crash on macOS with GCC 15.2: `std::source_location::file_name()` is `nullptr`",
      "body": "### Summary\n\n`bitcoind` crashes on startup when built with Homebrew `GCC 15.2.0 `on macOS (arm64).\nThe crash occurs inside `SourceLocationHasher::operator()` when constructing a `std::basic_string_view` from `std::source_location::file_name()`.\n\nThe same commit runs successfully when built with the default `AppleClang` toolchain.\n\n### Versions\n\n* Bitcoin Core: `master` at `808f1d972be35f4c66bdc30ab0f4060dab0c43c0`\n* Platform: macOS 26.1 (25B78), Apple M4 Pro (arm64)\n* CMake: `cmake version 4.2.0`\n* GCC: `gcc (Homebrew GCC 15.2.0) 15.2.0`\n* AppleClang: `AppleClang 17.0.0.17000404`\n\n### Build configuration (GCC 15.2, Debug)\n\n```sh\ngit checkout 808f1d972be35f4c66bdc30ab0f4060dab0c43c0\nrm -rfd build && cmake -B build -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ && cmake --build build -j$(nproc)             \nlldb ./build/bin/bitcoind -- -datadir=\"$HOME/Library/Application Support/Bitcoin\" -stopatheight=21129 -dbcache=1000 -printtoconsole=1\n```\n\n### Crash session\n\n```gdb\n(lldb) run\nProcess 4126 launched: '/Users/lorinc/IdeaProjects/bitcoin/build/bin/bitcoind' (arm64)\n2025-11-27T19:01:48Z Bitcoin Core version v30.99.0-b3e2ae7aaee5 (debug build)\n2025-11-27T19:01:48Z Using the 'arm_shani(1way;2way)' SHA256 implementation\n2025-11-27T19:01:48Z Default data directory /Users/lorinc/Library/Application Support/Bitcoin\n2025-11-27T19:01:48Z Using data directory /Users/lorinc/Library/Application Support/Bitcoin\n2025-11-27T19:01:48Z Config file: /Users/lorinc/Library/Application Support/Bitcoin/bitcoin.conf (not found, skipping)\n2025-11-27T19:01:48Z Command-line arg: datadir=\"/Users/lorinc/Library/Application Support/Bitcoin\"\n2025-11-27T19:01:48Z Command-line arg: dbcache=\"1000\"\n2025-11-27T19:01:48Z Command-line arg: printtoconsole=\"1\"\n2025-11-27T19:01:48Z Command-line arg: stopatheight=\"21129\"\n2025-11-27T19:01:48Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-11-27T19:01:48Z scheduler thread start\n2025-11-27T19:01:48Z Binding RPC on address ::1 port 8332\n2025-11-27T19:01:48Z Binding RPC on address 127.0.0.1 port 8332\n2025-11-27T19:01:48Z Generated RPC authentication cookie /Users/lorinc/Library/Application Support/Bitcoin/.cookie\n2025-11-27T19:01:48Z Permissions used for cookie: rw-------\n2025-11-27T19:01:48Z Using random cookie authentication.\n2025-11-27T19:01:48Z Starting HTTP server with 16 worker threads\nProcess 4126 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n    frame #0: 0x000000019fb3ca84 libsystem_platform.dylib`_platform_strlen + 4\nlibsystem_platform.dylib`_platform_strlen:\n->  0x19fb3ca84 <+4>:  ldr    q0, [x1]\n    0x19fb3ca88 <+8>:  adr    x3, 0x19fb3c9c0 ; ___lldb_unnamed_symbol_1804e09c0\n    0x19fb3ca8c <+12>: ldr    q2, [x3], #0x10\n    0x19fb3ca90 <+16>: and    x2, x0, #0xf\n(lldb) bt\nerror: libbitcoin_util.a(logging.cpp.o) 0x4000ec000000034a: DW_TAG_member '_M_local_buf' refers to type 0x00000000000fed84 which extends beyond the bounds of 0x4000ec0000000340\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n  * frame #0: 0x000000019fb3ca84 libsystem_platform.dylib`_platform_strlen + 4\n    frame #1: 0x0000000100002600 bitcoind`std::char_traits<char>::length(__s=0x0000000000000000) at char_traits.h:393:25\n    frame #2: 0x00000001000086d0 bitcoind`std::basic_string_view<char, std::char_traits<char>>::basic_string_view(this=0x000000016fdfa1b8, __str=0x0000000000000000) at string_view:145:35\n    frame #3: 0x0000000100f43634 bitcoind`SourceLocationHasher::operator()(this=0x000000081286d8a0, s=0x000000016fdfa820) const at logging.h:52:74\n    frame #4: 0x0000000100f554c0 bitcoind`std::__detail::_Hash_code_base<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::__detail::_Select1st, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(this=0x000000081286d8a0, __k=0x000000016fdfa820) const at hashtable_policy.h:1071:23\n    frame #5: 0x0000000100f50a08 bitcoind`std::_Hashtable<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>>::_M_locate(this=0x000000081286d8a0, __k=0x000000016fdfa820) const at hashtable.h:2279:46\n    frame #6: 0x0000000100f4d3ec bitcoind`std::pair<std::__detail::_Node_iterator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, false, false>, bool> std::_Hashtable<std::source_location, std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true>>::try_emplace<std::source_location const&, unsigned long long const&>(this=0x000000081286d8a0, (null)=std::_Hashtable<std::source_location, std::pair<const std::source_location, BCLog::LogRateLimiter::Stats>, std::allocator<std::pair<const std::source_location, BCLog::LogRateLimiter::Stats> >, std::__detail::_Select1st, SourceLocationEqual, SourceLocationHasher, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<false, false, true> >::const_iterator @ 0x000000016fdfa2a0, __k=0x000000016fdfa820, (null)=0x000000081286d8e0) at hashtable.h:1088:30\n    frame #7: 0x0000000100f4ac1c bitcoind`std::pair<std::__detail::_Node_iterator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>, false, false>, bool> std::unordered_map<std::source_location, BCLog::LogRateLimiter::Stats, SourceLocationHasher, SourceLocationEqual, std::allocator<std::pair<std::source_location const, BCLog::LogRateLimiter::Stats>>>::try_emplace<unsigned long long const&>(this=size=0, __k=0x000000016fdfa820, (null)=0x000000081286d8e0) at unordered_map.h:527:27\n    frame #8: 0x0000000100f47510 bitcoind`BCLog::LogRateLimiter::Consume(this=0x000000081286d860, source_loc=0x000000016fdfa820, str=\"2025-11-27T19:01:48Z Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\\n\") at logging.cpp:395:47\n    frame #9: 0x0000000100f47e20 bitcoind`BCLog::Logger::LogPrintStr_(this=0x0000000812820c80, str=(_M_len = 80, _M_str = \"Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\"), source_loc=0x000000016fdfa820, category=ALL, level=Info, should_ratelimit=true) at logging.cpp:465:39\n    frame #10: 0x0000000100f47a24 bitcoind`BCLog::Logger::LogPrintStr(this=0x0000000812820c80, str=(_M_len = 80, _M_str = \"Using wallet directory /Users/lorinc/Library/Application Support/Bitcoin/wallets\"), source_loc=0x000000016fdfa820, category=ALL, level=Info, should_ratelimit=true) at logging.cpp:426:24\n    frame #11: 0x000000010001daec bitcoind`void LogPrintFormatInternal<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>(source_loc=0x000000016fdfa820, flag=ALL, level=Info, should_ratelimit=true, fmt=(fmt = \"Using wallet directory %s\"), (null)=\"/Users/lorinc/Library/Application Support/Bitcoin/wallets\") at logging.h:358:34\n    frame #12: 0x000000010098b85c bitcoind`wallet::VerifyWallets(context=0x00000008130101c8) at load.cpp:53:5\n    frame #13: 0x0000000100931d4c bitcoind`wallet::(anonymous namespace)::WalletLoaderImpl::verify(this=0x00000008130101c0) const at interfaces.cpp:558:50\n    frame #14: 0x0000000100173c10 bitcoind`AppInitMain(node=0x000000016fdfea08, tip_info=0x0000000000000000) at init.cpp:1523:28\n    frame #15: 0x0000000100009820 bitcoind`AppInit(node=0x000000016fdfea08) at bitcoind.cpp:242:54\n    frame #16: 0x0000000100009c54 bitcoind`main(argc=5, argv=0x000000016fdff1c0) at bitcoind.cpp:283:17\n    frame #17: 0x000000019f76dd54 dyld`start + 7184\n```\n\nOn this toolchain, `file_name()` returns a null pointer, so `std::basic_string_view` calls `std::char_traits<char>::length(__s = 0x0)` → `strlen(nullptr)`, which triggers `EXC_BAD_ACCESS`.\n\n---\n\nAccording to [cppreference for `std::source_location::file_name`](https://en.cppreference.com/w/cpp/utility/source_location/file_name), the function is specified to:\n\n> Return the name of the current source file represented by this object, represented as a null-terminated byte string.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-27T19:44:15Z",
      "updated_at": "2025-12-01T09:53:21Z",
      "closed_at": "2025-12-01T09:53:21Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33964",
      "labels": [
        "macOS",
        "Upstream",
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3587213137,
          "user": "maflcko",
          "body": "Your toolchain clearly violates the C++ standard (https://eel.is/c++draft/support.srcloc#class.general-2), so you'll have to report this upstream via a minimal reproducer.",
          "created_at": "2025-11-27T20:33:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 171,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3592487964,
          "user": "l0rinc",
          "body": "Tried getting to the bottom of it, something's really off here, two consecutive calls to `std::source_location::current()` return very different and suspicious values:\n<img width=\"902\" height=\"584\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/cbd0798c-c86a-44f2-8874-618a2676dff8\" />\n\nWhat does `BTC` file name and `sat` function name refer to and why do we have millions of lines :/?\n\nThey seem to come from (modifying these strings updates the file and method names):\nhttps://github.com/bitcoin/bitcoin/blob/966666de9a6211b8748f43d682490c924e132e58/src/policy/feerate.h#L18-L19\n\n<details>\n<summary>source_location::current() manual instrumentation</summary>\n\n```patch\ndiff --git a/src/bitcoind.cpp b/src/bitcoind.cpp\nindex 37cacb2a7e..19a9523322 100644\n--- a/src/bitcoind.cpp\n+++ b/src/bitcoind.cpp\n@@ -239,6 +239,10 @@ static bool AppInit(NodeContext& node)\n             // If locking a directory failed, exit immediately\n             return false;\n         }\n+\n+        auto x = std::source_location::current();\n+        std::cout << \"AppInit called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n         fRet = AppInitInterfaces(node) && AppInitMain(node);\n     }\n     catch (const std::exception& e) {\n@@ -279,6 +283,9 @@ MAIN_FUNCTION\n     // Process early info return commands such as -help or -version\n     if (ProcessInitCommands(*init, args)) return EXIT_SUCCESS;\n \n+    auto x = std::source_location::current();\n+    std::cout << \"main called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n     // Start application\n     if (!AppInit(node) || !Assert(node.shutdown_signal)->wait()) {\n         node.exit_status = EXIT_FAILURE;\ndiff --git a/src/init.cpp b/src/init.cpp\nindex d1c6a5cad0..2c446785b0 100644\n--- a/src/init.cpp\n+++ b/src/init.cpp\n@@ -1518,6 +1518,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             return InitError(_(\"Unable to start HTTP server. See debug log for details.\"));\n     }\n \n+    auto x = std::source_location::current();\n+    std::cout << \"AppInitMain called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n+\n     // ********************************************************* Step 5: verify wallet database integrity\n     for (const auto& client : node.chain_clients) {\n         if (!client->verify()) {\ndiff --git a/src/wallet/interfaces.cpp b/src/wallet/interfaces.cpp\nindex 2cda1ba299..b353b51f28 100644\n--- a/src/wallet/interfaces.cpp\n+++ b/src/wallet/interfaces.cpp\n@@ -555,7 +555,13 @@ public:\n             m_rpc_handlers.emplace_back(m_context.chain->handleRpc(m_rpc_commands.back()));\n         }\n     }\n-    bool verify() override { return VerifyWallets(m_context); }\n+    bool verify() override\n+    {\n+        auto x = std::source_location::current();\n+        std::cout << \"verify called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n+        return VerifyWallets(m_context);\n+    }\n     bool load() override { return LoadWallets(m_context); }\n     void start(CScheduler& scheduler) override\n     {\ndiff --git a/src/wallet/load.cpp b/src/wallet/load.cpp\nindex f362064473..8a6a237d1d 100644\n--- a/src/wallet/load.cpp\n+++ b/src/wallet/load.cpp\n@@ -26,6 +26,12 @@ using util::Join;\n namespace wallet {\n bool VerifyWallets(WalletContext& context)\n {\n+    auto x1 = std::source_location::current();\n+    std::cout << \"VerifyWallets1 called from \" << x1.file_name() << \":\" << x1.line() << \"\\n\";\n+\n+    auto x = std::source_location::current();\n+    std::cout << \"VerifyWallets called from \" << x.file_name() << \":\" << x.line() << \"\\n\";\n+\n     interfaces::Chain& chain = *context.chain;\n     ArgsManager& args = *Assert(context.args);\n\n```\n\n</details>\n\nThe stack parents seem to be evaluated correctly, but `VerifyWallets` starts returning weird values from the start:\n```\nmain called from ./bitcoind.cpp:286\nAppInit called from ./bitcoind.cpp:243\nAppInitMain called from ./init.cpp:1521\nverify called from ./wallet/interfaces.cpp:560\nVerifyWallets1 called from BTC:4412482\n```\n\n\n-----\n\nDoing the same with default AppleClang works correctly:\n\n<img width=\"1111\" height=\"585\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e941f630-ff1e-4c47-9076-a93839912570\" />\n\n-----\n\nI'm not sure how to create a reproducer for this...",
          "created_at": "2025-11-30T11:53:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 4267,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3595267273,
          "user": "maflcko",
          "body": "> I'm not sure how to create a reproducer for this...\n\nFor toolchain bugs, it helps to create a minimal reproducer. Often, this is easy to create in one shot, looking at the code that mis-compiled.\n\nSometimes, it is not so easy and you'll have to manually remove chunks from the full software, until you end up with something minimal. This may be tedious, when done manually. You can also use `creduce`, but this may not work in contexts where one can define a unique bug signature (https://github.com/bitcoin/bitcoin/issues/32276#issuecomment-2812024548).\n\nIn theory, it should be possible to move the runtime bug to a compile time bug with a `static_assert(std::string_view{__FILE__}== std::string_view{std::source_location::current().file_name()});`, so that it can be fed into `creduce`, but I have a feeling that the bug disappears at compile time. In that case, I don't see an easier way to reduce it. \n",
          "created_at": "2025-12-01T08:35:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 909,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3595271169,
          "user": "maflcko",
          "body": "Unrelated, you can also try different version of your gcc package, to see if this was introduced recently.",
          "created_at": "2025-12-01T08:35:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 106,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3595607653,
          "user": "l0rinc",
          "body": "Not sure how to create a reliable reproducer for this, closing for now",
          "created_at": "2025-12-01T09:53:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 70,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 8820,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3486857012,
      "number": 33548,
      "title": "`test_bitcoin-qt`: segfault under LTO (CMAKE_INTERPROCEDURAL_OPTIMIZATION=ON)",
      "body": "```bash\npodman run -it ubuntu:24.04\napt install git build-essential cmake pkgconf python3 libevent-dev libboost-dev qt6-base-dev qt6-tools-dev qt6-l10n-tools qt6-tools-dev-tools libgl-dev libqrencode-dev\ngit clone https://github.com/bitcoin/bitcoin/\ncd bitcoin\n```\n```bash\ncmake -B build -DENABLE_IPC=OFF -DBUILD_GUI=ON -DENABLE_WALLET=OFF\ncmake --build build\nctest --test-dir build # works fine\n```\n\n```bash\n### Enable LTO\ncmake -B build -DENABLE_IPC=OFF -DBUILD_GUI=ON -DENABLE_WALLET=OFF -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON\ncmake --build build\nctest --test-dir build\n...\nThe following tests FAILED:\n\t  6 - test_bitcoin-qt (SEGFAULT)\n```\n```bash\nbuild/bin/test_bitcoin-qt\nSegmentation fault (core dumped)\n```\n```bash\ngdb build/bin/test_bitcoin-qt\n...\nProgram received signal SIGSEGV, Segmentation fault.\n0x000079e008f7bafa in ?? () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n(gdb) bt\n#0  0x000079e008f7bafa in ?? () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n#1  0x000079e0095b3844 in QGuiApplication::screenAdded(QScreen*) () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#2  0x000079e0096024a6 in QWindowSystemInterface::handleScreenAdded(QPlatformScreen*, bool) () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#3  0x000079e005856a13 in ?? () from /usr/lib/x86_64-linux-gnu/qt6/plugins/platforms/libqminimal.so\n#4  0x000079e0095ac142 in QGuiApplicationPrivate::createPlatformIntegration() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#5  0x000079e0095ad860 in QGuiApplicationPrivate::createEventDispatcher() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#6  0x000079e008f348b6 in QCoreApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n#7  0x000079e0095ad8ff in QGuiApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#8  0x000079e009ccc985 in QApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Widgets.so.6\n#9  0x00005b7f77cb9cff in BitcoinApplication::BitcoinApplication (this=<optimized out>, this=<optimized out>) at .././qt/bitcoin.cpp:201\n#10 0x00005b7f77c6ee8b in main (argc=<optimized out>, argv=<optimized out>) at ./qt/test/test_main.cpp:78\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-10-06T11:36:32Z",
      "updated_at": "2025-11-30T22:36:51Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33548",
      "labels": [
        "Bug",
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3405201314,
          "user": "willcl-ark",
          "body": "FWIW this doesn't reproduce for me using Clang 20 via [this nix flake](https://github.com/bitcoin-dev-tools/bix/blob/wip-updates/flake.nix), where I need to force `QT_QPA_PLATFORM=xcb` to run Qt:\n\n<details>\n<summary>Details</summary>\n\n```\nConfigure summary\n=================\nExecutables:\n  bitcoin ............................. ON\n  bitcoind ............................ ON\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... ON\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... ON\n  bitcoin-tx .......................... ON\n  bitcoin-util ........................ ON\n  bitcoin-wallet ...................... OFF\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... OFF\n  external signer ..................... ON\n  ZeroMQ .............................. OFF\n  IPC ................................. OFF\n  USDT tracing ........................ OFF\n  QR code (GUI) ....................... ON\n  DBus (GUI) .......................... ON\nTests:\n  test_bitcoin ........................ ON\n  test_bitcoin-qt ..................... ON\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... OFF\n\nCross compiling ....................... FALSE\nC++ compiler .......................... Clang 20.1.8, /nix/store/64bmj9nvp00if8bsbk5w782rd6vji654-ccache-links-wrapper-4.11.3/bin/clang++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ...........\nC++ compiler flags .................... -O2 -g -std=c++20 -fPIC -fdebug-prefix-map=/home/will/src/core/bitcoin/src=. -fmacro-prefix-map=/home/will/src/core/bitcoin/src=. -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wgnu -Wformat -Wformat-security -Wvla -Wshadow-field -Wthread-safety -Wloop-analysis -Wredundant-decls -Wunused-member-function -Wdate-time -Wconditional-uninitialized -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wdocumentation -Wself-assign -Wundef -Wno-unused-parameter\nLinker flags .......................... -O2 -g -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. ON\n\n\n-- Configuring done (25.2s)\n-- Generating done (0.1s)\n-- Build files have been written to: /home/will/src/core/bitcoin/build\n\n<snip>\n\n[663/663] Linking CXX executable bin/test_bitcoin\n\n❯ QT_QPA_PLATFORM=xcb ctest --test-dir build --parallel\nInternal ctest changing into directory: /home/will/src/core/bitcoin/build\nTest project /home/will/src/core/bitcoin/build\n        Start   1: univalue_test\n        Start   2: univalue_object_test\n        Start   3: secp256k1_noverify_tests\n        Start   4: secp256k1_tests\n        Start   5: secp256k1_exhaustive_tests\n        Start   6: test_bitcoin-qt\n        Start   7: addrman_tests\n        Start   8: allocator_tests\n        Start   9: amount_tests\n        Start  10: argsman_tests\n        Start  11: arith_uint256_tests\n        Start  12: banman_tests\n        Start  13: base32_tests\n        Start  14: base58_tests\n        Start  15: base64_tests\n        Start  16: bech32_tests\n  1/132 Test   #1: univalue_test ........................   Passed    0.01 sec\n  2/132 Test   #2: univalue_object_test .................   Passed    0.01 sec\n        Start  17: bip32_tests\n        Start  18: bip324_tests\n  3/132 Test   #9: amount_tests .........................   Passed    0.11 sec\n        Start  19: blockchain_tests\n  4/132 Test   #8: allocator_tests ......................   Passed    0.11 sec\n        Start  20: blockencodings_tests\n  5/132 Test  #11: arith_uint256_tests ..................   Passed    0.11 sec\n  6/132 Test  #12: banman_tests .........................   Passed    0.11 sec\n  7/132 Test  #13: base32_tests .........................   Passed    0.11 sec\n        Start  21: blockfilter_index_tests\n        Start  22: blockfilter_tests\n        Start  23: blockmanager_tests\n  8/132 Test  #15: base64_tests .........................   Passed    0.11 sec\n  9/132 Test  #14: base58_tests .........................   Passed    0.12 sec\n 10/132 Test  #16: bech32_tests .........................   Passed    0.11 sec\n        Start  24: bloom_tests\n        Start  25: bswap_tests\n        Start  26: caches_tests\n 11/132 Test  #17: bip32_tests ..........................   Passed    0.15 sec\n        Start  27: chain_tests\n 12/132 Test  #22: blockfilter_tests ....................   Passed    0.11 sec\n        Start  28: chainstate_write_tests\n 13/132 Test  #26: caches_tests .........................   Passed    0.11 sec\n        Start  29: checkqueue_tests\n 14/132 Test  #25: bswap_tests ..........................   Passed    0.12 sec\n        Start  30: cluster_linearize_tests\n 15/132 Test  #24: bloom_tests ..........................   Passed    0.12 sec\n        Start  31: coins_tests_base\n 16/132 Test   #7: addrman_tests ........................   Passed    0.25 sec\n        Start  32: coins_tests_dbbase\n 17/132 Test  #19: blockchain_tests .....................   Passed    0.24 sec\n        Start  33: coins_tests\n 18/132 Test  #30: cluster_linearize_tests ..............   Passed    0.12 sec\n        Start  34: coinscachepair_tests\n 19/132 Test  #28: chainstate_write_tests ...............   Passed    0.15 sec\n        Start  35: coinstatsindex_tests\n 20/132 Test  #20: blockencodings_tests .................   Passed    0.28 sec\n        Start  36: common_url_tests\n 21/132 Test  #23: blockmanager_tests ...................   Passed    0.33 sec\n        Start  37: compilerbug_tests\n 22/132 Test  #34: coinscachepair_tests .................   Passed    0.11 sec\n        Start  38: compress_tests\n 23/132 Test  #36: common_url_tests .....................   Passed    0.11 sec\n        Start  39: crypto_tests\n 24/132 Test  #10: argsman_tests ........................   Passed    0.55 sec\n        Start  40: cuckoocache_tests\n 25/132 Test  #37: compilerbug_tests ....................   Passed    0.11 sec\n        Start  41: dbwrapper_tests\n 26/132 Test  #21: blockfilter_index_tests ..............   Passed    0.47 sec\n        Start  42: denialofservice_tests\n 27/132 Test  #18: bip324_tests .........................   Passed    0.67 sec\n        Start  43: descriptor_tests\n 28/132 Test  #38: compress_tests .......................   Passed    0.21 sec\n        Start  44: disconnected_transactions\n 29/132 Test  #35: coinstatsindex_tests .................   Passed    0.36 sec\n        Start  45: feefrac_tests\n 30/132 Test  #42: denialofservice_tests ................   Passed    0.17 sec\n        Start  46: flatfile_tests\n 31/132 Test  #44: disconnected_transactions ............   Passed    0.18 sec\n        Start  47: fs_tests\n 32/132 Test  #45: feefrac_tests ........................   Passed    0.12 sec\n        Start  48: getarg_tests\n 33/132 Test  #46: flatfile_tests .......................   Passed    0.14 sec\n        Start  49: hash_tests\n 34/132 Test  #47: fs_tests .............................   Passed    0.12 sec\n        Start  50: headers_sync_chainwork_tests\n 35/132 Test  #48: getarg_tests .........................   Passed    0.12 sec\n        Start  51: httpserver_tests\n 36/132 Test  #49: hash_tests ...........................   Passed    0.11 sec\n        Start  52: i2p_tests\n 37/132 Test  #51: httpserver_tests .....................   Passed    0.12 sec\n        Start  53: interfaces_tests\n 38/132 Test  #41: dbwrapper_tests ......................   Passed    0.57 sec\n        Start  54: key_io_tests\n 39/132 Test  #52: i2p_tests ............................   Passed    0.12 sec\n        Start  55: key_tests\n 40/132 Test   #6: test_bitcoin-qt ......................   Passed    1.17 sec\n 41/132 Test  #50: headers_sync_chainwork_tests .........   Passed    0.18 sec\n        Start  56: logging_tests\n        Start  57: mempool_tests\n 42/132 Test  #40: cuckoocache_tests ....................   Passed    0.63 sec\n        Start  58: merkle_tests\n 43/132 Test  #29: checkqueue_tests .....................   Passed    1.01 sec\n        Start  59: merkleblock_tests\n 44/132 Test  #54: key_io_tests .........................   Passed    0.13 sec\n        Start  60: miner_tests\n 45/132 Test  #56: logging_tests ........................   Passed    0.14 sec\n        Start  61: miniminer_tests\n 46/132 Test  #27: chain_tests ..........................   Passed    1.17 sec\n        Start  62: miniscript_tests\n 47/132 Test  #59: merkleblock_tests ....................   Passed    0.11 sec\n        Start  63: minisketch_tests\n 48/132 Test  #55: key_tests ............................   Passed    0.23 sec\n        Start  64: multisig_tests\n 49/132 Test  #57: mempool_tests ........................   Passed    0.27 sec\n        Start  65: net_peer_connection_tests\n 50/132 Test  #43: descriptor_tests .....................   Passed    0.81 sec\n        Start  66: net_peer_eviction_tests\n 51/132 Test  #63: minisketch_tests .....................   Passed    0.15 sec\n        Start  67: net_tests\n 52/132 Test  #64: multisig_tests .......................   Passed    0.13 sec\n        Start  68: netbase_tests\n 53/132 Test  #58: merkle_tests .........................   Passed    0.40 sec\n        Start  69: node_init_tests\n 54/132 Test  #65: net_peer_connection_tests ............   Passed    0.16 sec\n        Start  70: node_warnings_tests\n 55/132 Test  #53: interfaces_tests .....................   Passed    0.54 sec\n        Start  71: orphanage_tests\n 56/132 Test  #66: net_peer_eviction_tests ..............   Passed    0.20 sec\n 57/132 Test  #68: netbase_tests ........................   Passed    0.16 sec\n        Start  72: pcp_tests\n        Start  73: peerman_tests\n 58/132 Test  #70: node_warnings_tests ..................   Passed    0.12 sec\n        Start  74: pmt_tests\n 59/132 Test  #39: crypto_tests .........................   Passed    1.27 sec\n 60/132 Test  #61: miniminer_tests ......................   Passed    0.47 sec\n        Start  75: policy_fee_tests\n        Start  76: policyestimator_tests\n 61/132 Test  #72: pcp_tests ............................   Passed    0.13 sec\n        Start  77: pool_tests\n 62/132 Test  #73: peerman_tests ........................   Passed    0.14 sec\n        Start  78: pow_tests\n 63/132 Test  #69: node_init_tests ......................   Passed    0.28 sec\n        Start  79: prevector_tests\n 64/132 Test  #74: pmt_tests ............................   Passed    0.18 sec\n        Start  80: raii_event_tests\n 65/132 Test  #75: policy_fee_tests .....................   Passed    0.12 sec\n        Start  81: random_tests\n 66/132 Test  #77: pool_tests ...........................   Passed    0.12 sec\n        Start  82: rbf_tests\n 67/132 Test  #78: pow_tests ............................   Passed    0.13 sec\n        Start  83: rest_tests\n 68/132 Test  #71: orphanage_tests ......................   Passed    0.29 sec\n        Start  84: result_tests\n 69/132 Test  #33: coins_tests ..........................   Passed    1.66 sec\n        Start  85: reverselock_tests\n 70/132 Test  #80: raii_event_tests .....................   Passed    0.12 sec\n        Start  86: rpc_tests\n 71/132 Test  #83: rest_tests ...........................   Passed    0.11 sec\n        Start  87: sanity_tests\n 72/132 Test  #84: result_tests .........................   Passed    0.11 sec\n        Start  88: scheduler_tests\n 73/132 Test  #85: reverselock_tests ....................   Passed    0.12 sec\n        Start  89: script_assets_tests\n 74/132 Test  #79: prevector_tests ......................   Passed    0.31 sec\n        Start  90: script_p2sh_tests\n 75/132 Test  #87: sanity_tests .........................   Passed    0.12 sec\n        Start  91: script_parse_tests\n 76/132 Test  #88: scheduler_tests ......................   Passed    0.13 sec\n        Start  92: script_segwit_tests\n 77/132 Test  #89: script_assets_tests ..................***Skipped   0.12 sec\n        Start  93: script_standard_tests\n 78/132 Test  #82: rbf_tests ............................   Passed    0.37 sec\n 79/132 Test  #91: script_parse_tests ...................   Passed    0.13 sec\n        Start  94: script_tests\n        Start  95: scriptnum_tests\n 80/132 Test  #31: coins_tests_base .....................   Passed    2.09 sec\n 81/132 Test  #90: script_p2sh_tests ....................   Passed    0.15 sec\n        Start  96: serfloat_tests\n        Start  97: serialize_tests\n 82/132 Test  #92: script_segwit_tests ..................   Passed    0.12 sec\n        Start  98: settings_tests\n 83/132 Test  #93: script_standard_tests ................   Passed    0.13 sec\n        Start  99: sighash_tests\n 84/132 Test  #95: scriptnum_tests ......................   Passed    0.13 sec\n        Start 100: sigopcount_tests\n 85/132 Test  #98: settings_tests .......................   Passed    0.12 sec\n        Start 101: skiplist_tests\n 86/132 Test  #97: serialize_tests ......................   Passed    0.17 sec\n        Start 102: sock_tests\n 87/132 Test  #62: miniscript_tests .....................   Passed    1.18 sec\n        Start 103: span_tests\n 88/132 Test  #86: rpc_tests ............................   Passed    0.51 sec\n        Start 104: streams_tests\n 89/132 Test #100: sigopcount_tests .....................   Passed    0.12 sec\n        Start 105: sync_tests\n 90/132 Test #102: sock_tests ...........................   Passed    0.13 sec\n        Start 106: system_ram_tests\n 91/132 Test #103: span_tests ...........................   Passed    0.13 sec\n        Start 107: system_tests\n 92/132 Test  #99: sighash_tests ........................   Passed    0.31 sec\n        Start 108: testnet4_miner_tests\n 93/132 Test #104: streams_tests ........................   Passed    0.15 sec\n        Start 109: timeoffsets_tests\n 94/132 Test #105: sync_tests ...........................   Passed    0.13 sec\n        Start 110: torcontrol_tests\n 95/132 Test  #96: serfloat_tests .......................   Passed    0.41 sec\n        Start 111: transaction_tests\n 96/132 Test #106: system_ram_tests .....................   Passed    0.12 sec\n        Start 112: translation_tests\n 97/132 Test #107: system_tests .........................   Passed    0.15 sec\n        Start 113: txdownload_tests\n 98/132 Test #109: timeoffsets_tests ....................   Passed    0.12 sec\n        Start 114: txgraph_tests\n 99/132 Test #110: torcontrol_tests .....................   Passed    0.12 sec\n        Start 115: txindex_tests\n100/132 Test #108: testnet4_miner_tests .................   Passed    0.16 sec\n        Start 116: txpackage_tests\n101/132 Test #112: translation_tests ....................   Passed    0.11 sec\n        Start 117: txreconciliation_tests\n102/132 Test #101: skiplist_tests .......................   Passed    0.40 sec\n        Start 118: txrequest_tests\n103/132 Test #117: txreconciliation_tests ...............   Passed    0.12 sec\n        Start 119: txvalidation_tests\n104/132 Test  #76: policyestimator_tests ................   Passed    1.19 sec\n        Start 120: txvalidationcache_tests\n105/132 Test #115: txindex_tests ........................   Passed    0.29 sec\n        Start 121: uint256_tests\n106/132 Test #113: txdownload_tests .....................   Passed    0.37 sec\n        Start 122: util_string_tests\n107/132 Test #119: txvalidation_tests ...................   Passed    0.24 sec\n        Start 123: util_tests\n108/132 Test #121: uint256_tests ........................   Passed    0.11 sec\n        Start 124: util_threadnames_tests\n109/132 Test #122: util_string_tests ....................   Passed    0.11 sec\n        Start 125: util_trace_tests\n110/132 Test  #67: net_tests ............................   Passed    1.84 sec\n        Start 126: validation_block_tests\n111/132 Test #124: util_threadnames_tests ...............   Passed    0.12 sec\n        Start 127: validation_chainstate_tests\n112/132 Test #114: txgraph_tests ........................   Passed    0.55 sec\n        Start 128: validation_chainstatemanager_tests\n113/132 Test #123: util_tests ...........................   Passed    0.14 sec\n        Start 129: validation_flush_tests\n114/132 Test #125: util_trace_tests .....................   Passed    0.12 sec\n        Start 130: validation_tests\n115/132 Test #116: txpackage_tests ......................   Passed    0.64 sec\n        Start 131: validationinterface_tests\n116/132 Test #130: validation_tests .....................   Passed    0.19 sec\n        Start 132: versionbits_tests\n117/132 Test #129: validation_flush_tests ...............   Passed    0.25 sec\n118/132 Test #127: validation_chainstate_tests ..........   Passed    0.31 sec\n119/132 Test #131: validationinterface_tests ............   Passed    0.17 sec\n120/132 Test #120: txvalidationcache_tests ..............   Passed    0.71 sec\n121/132 Test #126: validation_block_tests ...............   Passed    0.68 sec\n122/132 Test #132: versionbits_tests ....................   Passed    0.47 sec\n123/132 Test  #60: miner_tests ..........................   Passed    2.80 sec\n124/132 Test #118: txrequest_tests ......................   Passed    1.23 sec\n125/132 Test  #94: script_tests .........................   Passed    1.96 sec\n126/132 Test  #81: random_tests .........................   Passed    2.74 sec\n127/132 Test  #32: coins_tests_dbbase ...................   Passed    4.66 sec\n128/132 Test #111: transaction_tests ....................   Passed    2.18 sec\n129/132 Test #128: validation_chainstatemanager_tests ...   Passed    2.91 sec\n130/132 Test   #5: secp256k1_exhaustive_tests ...........   Passed    7.58 sec\n131/132 Test   #3: secp256k1_noverify_tests .............   Passed   14.42 sec\n132/132 Test   #4: secp256k1_tests ......................   Passed   29.73 sec\n\n100% tests passed, 0 tests failed out of 132\n\nTotal Test time (real) =  29.74 sec\n\nThe following tests did not run:\n         89 - script_assets_tests (Skipped)\n</details>",
          "created_at": "2025-10-15T08:32:17Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 18311,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3405816831,
          "user": "maflcko",
          "body": "I think this is fixed with `GCC 15.2.0), ubuntu 25.10`. I wouldn't recommend using lto with gcc-13:\n\n* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=105469\n* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=113359\n* ...",
          "created_at": "2025-10-15T10:46:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 214,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2187,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3189243686,
      "number": 32838,
      "title": "Shallow invalid forks + ActivateBestChainStep result in overly aggressive mempool filtering",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nUpon reorgs, the mempool has its transactions filtered near the end of every call of `ActivateBestChainStep` via  `MaybeUpdateMempoolForReorg` : https://github.com/bitcoin/bitcoin/blob/a763497b1d6661bc5a7b8943d8f04a4459fd6827/src/validation.cpp#L3403\n\nIf the fork being activated is actually invalid this can happen:\n\n1. Chain at height `T`, with transaction in mempool which relies on height T or higher for lock validity (nsequence f.e.)\n2. Alternative chain to height `T+1`, forking at `T-1` is encountered.\n3. `ActivateBestChainStep` fires once, rolling back to height `T-1`, then stopping when it attempts to validate the invalid block fork at height `T`.\n4. Since `fBlocksDisconnected` is true, `MaybeUpdateMempoolForReorg` is called at height `T-1`\n5. Transaction is filtered due to non-final locks at height `T-1`, and function returns\n6. Next `ActivateBestChainStep` is called, but with an empty disconnect pool, getting back to height `T` with original chain tip at step (1)\n\nI think this can also happen if a valid reorg is longer than 32 blocks: https://github.com/bitcoin/bitcoin/blob/a763497b1d6661bc5a7b8943d8f04a4459fd6827/src/validation.cpp#L3360\n\n### Expected behaviour\n\nIdeally, the disconnectpool would not be re-applied until the known reorg is complete.\n\n### Steps to reproduce\n\nAn example causing this was found during debugging a related fuzzing crash: https://github.com/bitcoin/bitcoin/pull/28676#issuecomment-3018572194\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nhttps://github.com/dergoegge/bitcoin/commit/6329ce979f63b396aa036a1ad39798bb83fa4ade\n\n### Operating system and version\n\nUbuntu\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2025-06-30T17:05:42Z",
      "updated_at": "2025-11-28T20:18:40Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32838",
      "labels": [],
      "comment_data": [
        {
          "id": 3020041895,
          "user": "instagibbs",
          "body": "cc @dergoegge",
          "created_at": "2025-06-30T17:06:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 13,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3020279448,
          "user": "mzumsande",
          "body": "Mabe we could create a `DisconnectedBlockTransactions` pool in `ActivateBestChain()` that is passed to each `ActivateBestChainStep()` instead of having a separate one in each `ActivateBestChainStep()` call, and then only call `MaybeUpdateMempoolForReorg` after `ABC` has made enough progress. We'd have to deal with blocks from multiple separate disconnections within one pool then (meaning duplicates/ possbile conflicts, because we could go into multiple forks, try to connect blocks, fail at some point along the way, disconnect those blocks again and so on) This might complicate things a bit. \n\nObviously someone has to create invalid blocks with valid PoW to trigger this (losing at least one block reward), which is costly.",
          "created_at": "2025-06-30T18:27:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 730,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3590331276,
          "user": "sdaftuar",
          "body": "I discovered a related, but separate issue -- if we reorg to a lower-height chain, then I believe it's possible (likely?) for a mempool transaction with an unconfirmed parent (and which doesn't have BIP68 disabled) to be evicted from the mempool, even if the transaction is valid and would be reaccepted if immediately resubmitted.\n\nMy understanding is that this can happen due to the special heights we store for transactions with mempool dependencies (\"tip height + 1\") -- we can use a cached value that was generated when the chain was longer and so on a lower height chain, we'll filter the tx. ",
          "created_at": "2025-11-28T20:18:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 599,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1965,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2625167717,
      "number": 31188,
      "title": "Bitcoin Core 28.0 (Flatpak Linux Mint) pointing or saving blockchain to external drives does not work",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\n- bitcoin core 28.0 (flatpak) won't save data (blockchain nor chainstate) to external drive\r\n- dialogue box for creating path to save blockchain to save elsewhere will never appear\r\n- changing config file doesn't change anything but continue to save to home directory\r\n\r\n### Expected behaviour\r\n\r\nsaving or continuing blockchain on external harddrive\r\n\r\n### Steps to reproduce\r\n\r\n1. Fresh install of Linux Mint 22.0\r\n2. Install via mintinstall (flatpak) bitcoin core 28.0\r\n3. Saving or continuing of blockchain to external drive doesn't work, everything gets saved to home directory for example:        /home/USERNAME/.var/app/org.bitcoincore.bitcoin-qt\r\n7.  Configuration via bitcoin.config (datadir = /media/USERNAME/EXTERNALDRIVE) doesn't work, download will always fall back to home directory\r\n8. Overriding flatpak in terminal with command doesn't change anything: sudo flatpak override org.bitcoincore.bitcoin-qt --filesystem=/media/USERNAME/EXTERNALDRIVE\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPackage manager\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n28.0\r\n\r\n### Operating system and version\r\n\r\nLinux Mint 22.0, (6.2.9)\r\n\r\n### Machine specifications\r\n\r\nDell Latitude E7240, Intel© Core™ i5-4310U CPU, SSD 128GB",
      "state": "closed",
      "user": "Urpferd",
      "created_at": "2024-10-30T19:42:35Z",
      "updated_at": "2025-11-28T12:18:15Z",
      "closed_at": "2024-11-28T13:38:15Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31188",
      "labels": [
        "Questions and Help"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1493,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3667090031,
      "number": 33948,
      "title": "node0 stderr bitcoind: validation.cpp:5392: void ChainstateManager::CheckBlockIndex() const: Assertion `!c->setBlockIndexCandidates.contains(const_cast<CBlockIndex*>(pindex))' failed.",
      "body": "Just ran into this crash in the nightly CI, which was using llvm `22~++20251125085442+ed95c4d6ecf0-1~exp1~20251125085501.1311`. It may be a compiler error, but it is odd that only one test was failing:\n\nhttps://github.com/maflcko/bitcoin-core-nightly/actions/runs/19692916493/job/56412271437#step:10:6430\n\n```\n node0 stderr bitcoind: validation.cpp:5392: void ChainstateManager::CheckBlockIndex() const: Assertion `!c->setBlockIndexCandidates.contains(const_cast<CBlockIndex*>(pindex))' failed. \n```\n\n```\n...\n node0 2025-11-26T05:23:50.207878Z [initload] [util/thread.cpp:22] [void util::TraceThread(std::string_view, std::function<void ()>)] initload thread exit \n node0 2025-11-26T05:23:50.207921Z [net] [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] net thread start \n node0 2025-11-26T05:23:50.208026Z [addcon] [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] addcon thread start \n node0 2025-11-26T05:23:50.208076Z [init] [noui.cpp:57] [void noui_InitMessage(const std::string &)] init message: Done loading \n node0 2025-11-26T05:23:50.208131Z [msghand] [util/thread.cpp:20] [void util::TraceThread(std::string_view, std::function<void ()>)] msghand thread start \n node0 2025-11-26T05:23:50.300411Z [http] [httpserver.cpp:308] [void http_request_cb(struct evhttp_request *, void *)] [http] Received a POST request for / from 127.0.0.1:53008 \n node0 2025-11-26T05:23:50.301476Z [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-11-26T05:23:50.302068Z [http] [httpserver.cpp:308] [void http_request_cb(struct evhttp_request *, void *)] [http] Received a POST request for / from 127.0.0.1:53008 \n node0 2025-11-26T05:23:50.302154Z [httpworker.1] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__ \n test  2025-11-26T05:23:50.302472Z TestFramework.node0 (DEBUG): RPC successfully started \n test  2025-11-26T05:23:50.303502Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress` \n node0 2025-11-26T05:23:50.303964Z [http] [httpserver.cpp:308] [void http_request_cb(struct evhttp_request *, void *)] [http] Received a POST request for / from 127.0.0.1:53008 \n node0 2025-11-26T05:23:50.304029Z [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=generatetoaddress user=__cookie__ \n node0 2025-11-26T05:23:50.304103Z [httpworker.0] [node/miner.cpp:173] [std::unique_ptr<CBlockTemplate> node::BlockAssembler::CreateNewBlock()] CreateNewBlock(): block weight: 904 txs: 0 fees: 0 sigops 400 \n node0 2025-11-26T05:23:50.304141Z [httpworker.0] [validation.cpp:2405] [bool Chainstate::ConnectBlock(const CBlock &, BlockValidationState &, CBlockIndex *, CCoinsViewCache &, bool)] [bench]     - Sanity checks: 0.00ms [0.00s (0.00ms/blk)] \n node0 2025-11-26T05:23:50.304159Z [httpworker.0] [validation.cpp:2507] [bool Chainstate::ConnectBlock(const CBlock &, BlockValidationState &, CBlockIndex *, CCoinsViewCache &, bool)] [bench]     - Fork checks: 0.02ms [0.00s (0.02ms/blk)] \n node0 2025-11-26T05:23:50.304171Z [httpworker.0] [validation.cpp:2513] [bool Chainstate::ConnectBlock(const CBlock &, BlockValidationState &, CBlockIndex *, CCoinsViewCache &, bool)] Enabling script verification at block #228 (2a5aefafbdc44a7bc7f446f5e10b5cfb3d2bb92c4213f8c17356455f105d00fc): assumevalid=0 (always verify). \n node0 2025-11-26T05:23:50.304179Z [httpworker.0] [validation.cpp:2622] [bool Chainstate::ConnectBlock(const CBlock &, BlockValidationState &, CBlockIndex *, CCoinsViewCache &, bool)] [bench]       - Connect 1 transactions: 0.02ms (0.019ms/tx, 0.000ms/txin) [0.00s (0.02ms/blk)] \n node0 2025-11-26T05:23:50.304189Z [httpworker.0] [validation.cpp:2645] [bool Chainstate::ConnectBlock(const CBlock &, BlockValidationState &, CBlockIndex *, CCoinsViewCache &, bool)] [bench]     - Verify 0 txins: 0.03ms (0.000ms/txin) [0.00s (0.03ms/blk)] \n node0 2025-11-26T05:23:50.304194Z [httpworker.0] [node/miner.cpp:191] [std::unique_ptr<CBlockTemplate> node::BlockAssembler::CreateNewBlock()] [bench] CreateNewBlock() chunks: 0.02ms, validity: 0.10ms (total 0.12ms) \n test  2025-11-26T05:23:50.742247Z TestFramework (DEBUG): Destroying ZMQ context \n test  2025-11-26T05:23:50.743550Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/bld/test/functional/interface_zmq.py\", line 131, in run_test\n                                       self.test_multiple_interfaces()\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/bld/test/functional/interface_zmq.py\", line 563, in test_multiple_interfaces\n                                       subscribers = self.setup_zmq_test([\n                                                     ^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/bld/test/functional/interface_zmq.py\", line 162, in setup_zmq_test\n                                       test_block = ZMQTestSetupBlock(self, self.nodes[0])\n                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/bld/test/functional/interface_zmq.py\", line 93, in __init__\n                                       self.block_hash = test_framework.generate(node, 1, sync_fun=test_framework.no_op)[0]\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 660, in generate\n                                       blocks = generator.generate(*args, called_by_framework=True, **kwargs)\n                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 405, in generate\n                                       return self.generatetoaddress(nblocks=nblocks, address=self.get_deterministic_priv_key().address, maxtries=maxtries, **kwargs)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 413, in generatetoaddress\n                                       return self.__getattr__('generatetoaddress')(*args, **kwargs)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ^^^^^^^^^^^^^^^^^^^^\n                                     File \"/__w/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 1428, in getresponse\n                                       response.begin()\n                                     File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 300, in _read_status\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\n                                   http.client.RemoteDisconnected: Remote end closed connection without response",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-26T11:32:09Z",
      "updated_at": "2025-11-28T10:10:33Z",
      "closed_at": "2025-11-28T10:10:33Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33948",
      "labels": [
        "Validation",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3584926632,
          "user": "maflcko",
          "body": "It passed with `22~++20251126081852+97732ddb5d92-1~exp1`, fwiw.",
          "created_at": "2025-11-27T09:31:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 63,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3587488953,
          "user": "151henry151",
          "body": "This looks similar to #32173 (same line in CheckBlockIndex). Could the experimental LLVM 22 compiler be exposing a logic bug in setBlockIndexCandidates maintenance, similar to issues fixed in #16849 and #30479? The compiler might be hitting a consistency issue with setBlockIndexCandidates that happens when cs_main is released during block processing.",
          "created_at": "2025-11-27T23:27:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 352,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 9618,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1026357375,
      "number": 23279,
      "title": "Add unit tests for Taproot code in src/script/interpreter.cpp",
      "body": "The Taproot code in `src/script/interpreter.cpp` is covered by our functional tests (`test/functional/feature_taproot.py` and `test/functional/wallet_taproot.py`), but we don't have any unit test coverage for this code.\r\n\r\nUnit test coverage for `src/script/interpreter.cpp` can be found here:\r\n* https://marcofalke.github.io/btc_cov/test_bitcoin.coverage/src/script/interpreter.cpp.gcov.html\r\n\r\nThese functions in `src/script/interpreter.cpp` are currently not covered by our unit tests:\r\n* `EvalChecksigTapscript`\r\n* `HandleMissingData`\r\n* `SignatureHashSchnorr`\r\n* `GenericTransactionSignatureChecker<T>::VerifySchnorrSignature`\r\n* `GenericTransactionSignatureChecker<T>::CheckSchnorrSignature`\r\n* `ComputeTaprootMerkleRoot`\r\n* `SigVersion::TAPSCRIPT` code paths in `ExecuteWitnessScript`\r\n* Taproot code paths in `VerifyWitnessProgram`\r\n\r\nIt would be nice to have C++ unit tests covering this code in addition to the Python functional tests.",
      "state": "open",
      "user": "practicalswift",
      "created_at": "2021-10-14T12:48:27Z",
      "updated_at": "2025-11-27T17:19:20Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/23279",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3586837302,
          "user": "billymcbip",
          "body": "> EvalChecksigTapscript\n\nI've added a unit test for the empty pubkey error in Tapscript signature validation: https://github.com/bitcoin/bitcoin/pull/33961.",
          "created_at": "2025-11-27T17:15:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 156,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1007,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2854785350,
      "number": 31873,
      "title": "guix: Unable to reproduce macOS SDK tarball on Fedora 40",
      "body": "On Fedora 40, following the instructions in [`contrib/macdeploy/README.md`](https://github.com/bitcoin/bitcoin/tree/master/contrib/macdeploy#readme) to generate the macOS SDK tarball that is used during GUIX builds, I am not able to reproduce the hash in the readme for the generated tarball. I have reproduced this on two different Fedora 40 machines, and with a Fedora 40 docker image, but the issue does not appear when generating the tarball in an Ubuntu 24.04 docker image, or on a macOS Sequoia arm device, I've included reproduction instructions below.\n\n# Steps to reproduce\n\nYou first have to acquire the `Xcode_15.xip` archive according to the instructions in [`contrib/macdeploy/README.md`](https://github.com/bitcoin/bitcoin/tree/master/contrib/macdeploy#readme). The steps below assume you have placed this archive at `~/xcode/Xcode_15.xip`.\n\n## Making the bad tarball using Fedora 40\n### Container setup\n```bash\nsha256sum ~/xcode/Xcode_15.xip\n# 4daaed2ef2253c9661779fa40bfff50655dc7ec45801aba5a39653e7bcdde48e  /home/user/xcode/Xcode_15.xip\ndocker pull fedora:40\ndocker run -it \\\n  -v ~/xcode:/xcode \\\n  fedora:40 \\\n  /bin/bash\n```\n\n### In the container\n\n```bash\nsha256sum /xcode/Xcode_15.xip\n# 4daaed2ef2253c9661779fa40bfff50655dc7ec45801aba5a39653e7bcdde48e  /xcode/Xcode_15.xip\ndnf install cpio git python -y\ngit clone --depth 1 https://github.com/bitcoin/bitcoin.git\ngit clone --depth 1 https://github.com/bitcoin-core/apple-sdk-tools.git\npython3 apple-sdk-tools/extract_xcode.py -f /xcode/Xcode_15.xip | cpio -d -i\n# 23498380 blocks\n/bitcoin/contrib/macdeploy/gen-sdk Xcode.app/\n# Found Xcode (version: 15.0, build id: 15A240d)\n# Found MacOSX SDK (version: 14.0, build id: 23A334)\n# Creating output .tar.gz file...\n# Adding MacOSX SDK 14.0 files...\n# Done! Find the resulting gzipped tarball at:\n/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nsha256sum Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n# 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765  Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n# Wrong hash!\n```\n\n## Making a good tarball using Ubuntu 24.04\n\n### Container setup\n```bash\nsha256sum ~/xcode/Xcode_15.xip\n# 4daaed2ef2253c9661779fa40bfff50655dc7ec45801aba5a39653e7bcdde48e  /home/user/xcode/Xcode_15.xip\ndocker pull ubuntu:24.04\ndocker run -it \\\n  -v ~/xcode:/xcode \\\n  ubuntu:24.04 \\\n  /bin/bash\n```\n\n### In the container\n```bash\nexport DEBIAN_FRONTEND=noninteractive # prevents apt from halting to interact\nsha256sum /xcode/Xcode_15.xip\n# 4daaed2ef2253c9661779fa40bfff50655dc7ec45801aba5a39653e7bcdde48e  /xcode/Xcode_15.xip\napt update\napt install cpio git python3 -y\ngit clone --depth 1 https://github.com/bitcoin/bitcoin.git\ngit clone --depth 1 https://github.com/bitcoin-core/apple-sdk-tools.git\npython3 apple-sdk-tools/extract_xcode.py -f /xcode/Xcode_15.xip | cpio -d -i\n# 23498380 blocks\n/bitcoin/contrib/macdeploy/gen-sdk Xcode.app/\n# Found Xcode (version: 15.0, build id: 15A240d)\n# Found MacOSX SDK (version: 14.0, build id: 23A334)\n# Creating output .tar.gz file...\n# Adding MacOSX SDK 14.0 files...\n# Done! Find the resulting gzipped tarball at:\n# /Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nsha256sum Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n# c0c2e7bb92c1fee0c4e9f3a485e4530786732d6c6dd9e9f418c282aa6892f55d  Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n```\n\n# Further investigation\n\n## `pkgdiff`\n\n`pkgdiff` reports the contents of the two tarballs are identical:\n\n```console\n$ sha256sum badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765  badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ sha256sum goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nc0c2e7bb92c1fee0c4e9f3a485e4530786732d6c6dd9e9f418c282aa6892f55d  goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ pkgdiff badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nReading packages ...\nComparing packages ...\ncreating report ...\nresult: UNCHANGED\n```\n<details> \n\n<summary> pkgdiff report screenshot </summary>\n\n![Image](https://github.com/user-attachments/assets/364c072b-bcb1-412a-92b0-ea2491878865)\n\n</details>\n\n## Python and zlib versions\n\n| os     | python | zlib          | pyenv / repo | hash                                                             |\n|--------|--------|---------------|---------------|------------------------------------------------------------------|\n| ubuntu | 3.12.3 | 1.3           | repo          | c0c2e7bb92c1fee0c4e9f3a485e4530786732d6c6dd9e9f418c282aa6892f55d |\n| fedora | 3.12.8 | 1.3.1.zlib-ng | repo          | 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765 |\n| ubuntu | 3.12.3 | 1.3           | pyenv         | c0c2e7bb92c1fee0c4e9f3a485e4530786732d6c6dd9e9f418c282aa6892f55d |\n| fedora | 3.12.3 | 1.3           | pyenv         | 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765 |\n| ubuntu | 3.12.8 | 1.3.1.zlib-ng | pyenv         | 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765 \n| ubuntu | 3.12.3 | 1.3.1.zlib-ng | pyenv         | 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765 ",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2025-02-14T22:10:00Z",
      "updated_at": "2025-11-27T15:03:52Z",
      "closed_at": "2025-11-27T15:03:52Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31873",
      "labels": [
        "Bug",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 2660423530,
          "user": "achow101",
          "body": "> `pkgdiff` reports the contents of the two tarballs are identical:\n\nTry `diffoscope` (be prepared for very long output, and probably very long runtime).",
          "created_at": "2025-02-14T22:50:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 153,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660517967,
          "user": "davidgumberg",
          "body": "> Try `diffoscope` (be prepared for very long output, and probably very long runtime).\n\n`diffoscope` says:\n\n> Format-specific differences are supported for Gzipped files but no file-specific differences were detected; falling back to a binary diff.`\n\n```bash\ndiffoscope --no-default-limits --max-page-diff-block-line 16384 --html diffoscope.html badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz  goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n```\n\nand the binary seems totally different to my untrained eyes:\n\nFirst 16,000 lines of diff: https://davidgumberg.github.io/fg/other/sdkdiffoscope.html\n\n<details>\n\n<summary> screenshot of diffoscope html output </summary>\n\n![Image](https://github.com/user-attachments/assets/cebc6149-ce83-434c-8f94-671cff66feb6)\n\n</details>",
          "created_at": "2025-02-14T23:50:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 808,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2660536157,
          "user": "achow101",
          "body": "Can you `gunzip` the files and compare the `.tar`s?",
          "created_at": "2025-02-15T00:02:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 51,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660561659,
          "user": "davidgumberg",
          "body": "> Can you `gunzip` the files and compare the `.tar`s?\n\nNice, the `gunzip`'ed tars are identical:\n\n```console\n$ gunzip badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ gunzip goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ sha256sum badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar\nd91d39ca0dbff805677afc46abe0064056e7406728aa58e67ad98e147ef0e04c  badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar\n$ sha256sum goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar\nd91d39ca0dbff805677afc46abe0064056e7406728aa58e67ad98e147ef0e04c  goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar\n```\n\nFedora 40 has gzip 1.13 and Ubuntu 24.04 has gzip 1.12, I'll see if this issue occurs with gzip 1.13 on ubuntu.\n\n---\nEdit: No change after swapping out gzip version on both Fedora and Ubuntu, and I realized that python's gzip module doesn't rely on the system's gzip binary\n\n```python\nimport zlib\nprint(zlib.ZLIB_VERSION)\n```\n\n1.3.1.zlib-ng on Fedora 40 and 1.3 on Ubuntu 24.04",
          "created_at": "2025-02-15T00:21:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1058,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660692458,
          "user": "davidgumberg",
          "body": "Tried Fedora with the same zlib and python version as Ubuntu 24.04 and I still get the same bad hash.\n\n<details>\n\n<summary> python 3.12.3  w/ zlib-1.3 on fedora </summary>\n\n```bash\nsudo dnf install -y gcc openssl-devel xz-devel\ncurl -L https://github.com/madler/zlib/releases/download/v1.3/zlib-1.3.tar.gz | tar xzvf -\ncd zlib-1.3 && ./configure && make -j $(nproc) && make install && cd ..\n\ncurl https://pyenv.run | bash\nexport PYENV_ROOT=\"$HOME/.pyenv\"\n[[ -d $PYENV_ROOT/bin ]] && export PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init - bash)\"\n\npyenv install 3.12.3\npyenv global 3.12.3\n\n# verify zlib version\npython -c \"import zlib; print(zlib.ZLIB_VERSION)\"\n# 1.3\n\n# regenerate Xcode.app\nrm -rf Xcode.app/ && python3 apple-sdk-tools/extract_xcode.py -f /xcode/Xcode_15.xip | cpio -d -i\n/bitcoin/contrib/macdeploy/gen-sdk Xcode.app/\nsha256sum Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n# 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765  Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n```\n\n</details>\n\nI also tried the opposite on ubuntu,  python 3.12.8 with the zlib-ng \"1.3\" and I got the same bad hash as fedora 40:\n\n<details>\n\n<summary> python 3.12.8 w/ zlib-ng 1.3.1 on ubuntu </summary>\n\n```bash\napt install -y build-essential curl liblzma-dev libssl-dev pkg-config\ncurl -L https://github.com/zlib-ng/zlib-ng/archive/refs/tags/2.2.3.tar.gz | tar xzvf -\ncd zlib-ng-2.2.3/ && ./configure --zlib-compat && make -j $(nproc) && make install && cd ../\n\ncurl https://pyenv.run | bash\nexport PYENV_ROOT=\"$HOME/.pyenv\"\n[[ -d $PYENV_ROOT/bin ]] && export PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init - bash)\"\n\npyenv install 3.12.8\npyenv global 3.12.8\n\n# verify zlib version\npython -c \"import zlib; print(zlib.ZLIB_VERSION)\"\n# 1.3.1.zlib-ng\n\n\n# try gen-sdk again\nrm -rf Xcode.app/ && python apple-sdk-tools/extract_xcode.py -f /xcode/Xcode_15.xip | cpio -d -i\n/bitcoin/contrib/macdeploy/gen-sdk Xcode.app/\nsha256sum Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n# 5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765  Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n```\n\n</details>\n\nA bit mysterious,  I'll keep experimenting.\n\n\n\n\n",
          "created_at": "2025-02-15T03:26:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2216,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660780429,
          "user": "sedited",
          "body": "Is the output of `tar tvvf` the same for both archives?",
          "created_at": "2025-02-15T07:01:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 55,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2660990695,
          "user": "davidgumberg",
          "body": "> Is the output of `tar tvvf` the same for both archives?\n\nDiffing `tar tvvf` of the two archives results in no output.\n\n```console\n$ sha256sum badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n5b1a05d3e79fd14f5c8f6d3565762c89a522c7f5e7efbed4353d878410f2d765  badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ sha256sum goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\nc0c2e7bb92c1fee0c4e9f3a485e4530786732d6c6dd9e9f418c282aa6892f55d  goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz\n$ diff <(tar tvvf badsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz) <(tar tvvf goodsdk/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers.tar.gz)\n# no output\n```",
          "created_at": "2025-02-15T16:22:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 739,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2700668553,
          "user": "fanquake",
          "body": "@davidgumberg did you follow up any further here?",
          "created_at": "2025-03-05T11:32:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 49,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2701538499,
          "user": "dongcarl",
          "body": "This is likely because [python >= 3.11 delegates `gzip.compress` to `zlib.compress`](https://docs.python.org/3/library/gzip.html#gzip.compress), which then delegates to the `zlib` specified at configure-time for python.\n\nOn Ubuntu 24.04, this is `zlib`/`zlib1g`: https://packages.ubuntu.com/noble/python3.12-minimal\nOn Fedora 40, this is `zlib-ng-compat`: https://packages.fedoraproject.org/pkgs/python3.11/python3.11-libs/fedora-40.html",
          "created_at": "2025-03-05T16:59:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 437,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2704041240,
          "user": "fanquake",
          "body": "@dongcarl Nice find. I wonder if we can just set `mtime` to 1, and avoid the delegation.",
          "created_at": "2025-03-06T14:39:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 88,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2704130971,
          "user": "fanquake",
          "body": "Looks like even if that worked now, it wouldn't work in future (Python 3.14+), as the \"only delegate to zlib if mtime is 0\" condition has been removed, in favour of always delegating: https://github.com/python/cpython/commit/08d09cf5ba041c9c5c3860200b56bab66fd44a23.",
          "created_at": "2025-03-06T15:11:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 266,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2704337598,
          "user": "fanquake",
          "body": "Opened #32009 to discuss.",
          "created_at": "2025-03-06T16:26:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 25,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 5386,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1809623098,
      "number": 28095,
      "title": "guix: re-enable exported symbol checking for RISC-V",
      "body": "This is currently disabled, when it can likely be fixed and re-enabled:\r\nhttps://github.com/bitcoin/bitcoin/blob/673acab223c0f896767b1ae784659df9f95452ae/contrib/devtools/symbol-check.py#L210\r\n\r\nA Guix build with the exception dropped shows there are symbols being exported in the RISC-V bins:\r\n```bash\r\n/opt/homebrew/opt/binutils/bin/objdump -T bitcoind\r\n\r\n0000000000080500  w   DF .text\t00000000000000a6  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEC1IS3_EEPKcRKS3_\r\n000000000007f6a0  w   DF .text\t0000000000000064  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED1Ev\r\n000000000007e9da  w   DF .text\t0000000000000024  Base        _ZNKSt5ctypeIcE8do_widenEc\r\n\r\nstd::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<std::allocator<char> >(char const*, std::allocator<char> const&)\r\nstd::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::~basic_stringbuf()\r\nstd::ctype<char>::do_widen(char) const\r\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2023-07-18T10:12:32Z",
      "updated_at": "2025-11-27T12:35:07Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/28095",
      "labels": [
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 2701377875,
          "user": "fanquake",
          "body": "> Holding this off until https://github.com/bitcoin/bitcoin/pull/29987 is.merged.\n\nThis has gone in, and I've confirmed that this is still an issue with current master (0391d7e4c24e49ed186215e9fa375903c19af86e). @laanwj any chance you still wanted to investigate?",
          "created_at": "2025-03-05T16:00:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 263,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2702668461,
          "user": "laanwj",
          "body": "Yes, thanks for the reminder.",
          "created_at": "2025-03-06T03:01:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 29,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2704078274,
          "user": "laanwj",
          "body": "i tried to figure this out today but haven't got very far. Curiously, there are even more (weak) symbols exported by the current RISC-V build than mentioned in the OP-\n```\n0000000000091fd8  w   DF .text  0000000000000998  Base        _ZZSt8to_arrayINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEELm35EESt5arrayINSt9remove_cvIT_E4typeEXT0_EEOAT0__S8_ENKUlTpTnmSt16integer_sequenceImJXspT_EEEE_clIJLm0ELm1ELm2ELm3ELm4ELm5ELm6ELm7ELm8ELm9ELm10ELm11ELm12ELm13ELm14ELm15ELm16ELm17ELm18ELm19ELm20ELm21ELm22ELm23ELm24ELm25ELm26ELm27ELm28ELm29ELm30ELm31ELm32ELm33ELm34EEEEDaSF_\n0000000000093ade  w   DF .text  0000000000000148  Base        std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::replace(unsigned long, unsigned long, char const*, unsigned long)\n0000000000091efa  w   DF .text  000000000000005e  Base        std::array<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, 35ul>::~array()\n00000000000929de  w   DF .text  0000000000000042  Base        std::any::reset()\n000000000009389e  w   DF .text  000000000000008a  Base        std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_append(char const*, unsigned long)\n0000000000093928  w   DF .text  00000000000000be  Base        std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::append(char const*)\n0000000000091d88  w   DF .text  000000000000006e  Base        std::any::_Manager_internal<node::NodeContext*>::_S_manage(std::any::_Op, std::any const*, std::any::_Arg*)\n000000000009372c  w   DF .text  0000000000000172  Base        std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_mutate(unsigned long, unsigned long, char const*, unsigned long)\n0000000000092a20  w   DF .text  0000000000000068  Base        std::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::~basic_stringbuf()\n0000000000091fa4  w   DF .text  0000000000000034  Base        std::_Function_base::~_Function_base()\n0000000000092afe  w   DF .text  000000000000004c  Base        std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_dispose()\n0000000000091cb0  w   DF .text  0000000000000028  Base        std::ctype<char>::do_widen(char) const\n```\nOne thing we can say for sure: the large number of symbols here makes it impractical to add specific exceptions.\n\nHaven't been able to explain why there is a difference between RISC-V and other platforms here. i couldn't find any ABI documentation that mentions a difference in handling weak symbols.\n\nNext step i'll see if i can isolate a small test case that can be compiled on different cross-compilers to reproduce the issue.",
          "created_at": "2025-03-06T14:53:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2715,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2704673758,
          "user": "laanwj",
          "body": "Reproduction (with gcc 13.3.0 , binutils 2.38, everything from guix build context):\n```c++\n#include <iostream>\n\nint main()\n{\n    std::string test{\"12345\"};\n    std::cout << test << std::endl;\n\n    return 0;\n}\n```\n\n```bash\n$ x86_64-linux-gnu-g++ test.cpp -o test.x64 -Wl,--exclude-libs,ALL -fvisibility=hidden  -static-libstdc++ \n$ x86_64-linux-gnu-objdump -T test.x64|grep \"\\.text\"\n(no output)\n\n$ riscv64-linux-gnu-g++ test.cpp -o test.rv -Wl,--exclude-libs,ALL -fvisibility=hidden  -static-libstdc++ \n$ riscv64-linux-gnu-objdump -T test.rv|grep \"\\.text\"\n00000000000176b0 l    d  .text  0000000000000000              .text\n0000000000018810  w   DF .text  00000000000000fe  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEE12_M_constructIPKcEEvT_S8_St20forward_iterator_tag\n```\n- On `x86_64`, even providing just `-static-libstdc++ ` gives no exported weak symbols from the binary.\n- On `riscv64`,  leaving out `-fvisibility=hidden` gives one exported symbol `main`. Leaving out ` -fvisibility=hidden` makes the build export *a ton* of symbols.\n\nAs the versions of all build tools and libraries are the same for both platforms, i *suspect* this is a linker bug specific to RISC-V.\n(i've checked the intermediate .o files and the `forward_iterator_tag` symbols in those have the same flags, so expect it is not the compiler)\n\nAll in all, this appears to be an upstream issue, not something we can fix in our build. When i get around to it i'll check with the latest binutils to see if it has been fixed upstream in the meantime.",
          "created_at": "2025-03-06T18:47:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1542,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2707990682,
          "user": "laanwj",
          "body": "The problem still exists in the latest binutils built from git (d07a59a5ca830bf74705471f6bea6db1a47da2b5 as of 2025-03-07).\n\ni've been digging a bit as to what causes some weak symbols (but not all) to end up in the binary: overall, if a weak function symbol is in both `libstdc++.a` and in the `.o` file, it will end up exported in the binary. This behavior exists on riscv64 but not x86_64.\n\nThe only exception is the monstriosity `_ZZSt8to_arrayINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEELm35EESt5arrayINSt9remove_cvIT_E4typeEXT0_EEOAT0__S8_ENKUlTpTnmSt16integer_sequenceImJXspT_EEEE_clIJLm0ELm1ELm2ELm3ELm4ELm5ELm6ELm7ELm8ELm9ELm10ELm11ELm12ELm13ELm14ELm15ELm16ELm17ELm18ELm19ELm20ELm21ELm22ELm23ELm24ELm25ELm26ELm27ELm28ELm29ELm30ELm31ELm32ELm33ELm34EEEEDaSF_`, which does not appear in libstdc++, and which objdump cannot demangle. It is likely coming from inside bitcoin's code. But will focus on the libstdc++ ones first.\n\nIf you want to know what the actual `ld` invocation looks like for linking a simple binary (normally this is hidden two levels, inside a `collect2` call inside `g++`):\n```\n$LD --sysroot=/ --eh-frame-hdr -melf64lriscv \\\n    -dynamic-linker /gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib/ld-linux-riscv64-lp64d.so.1 \\\n    -pie -o ${BINARY} \\\n    /gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib/Scrt1.o \\\n    /gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0/crti.o \\\n    /gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0/crtbeginS.o \\\n    -L/gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib  \\\n    -L/gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0 \\\n    -L/gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib \\\n    -L/gnu/store/25fk4fj4n7r3djxq9hqn54mf4pcs0irj-glibc-cross-riscv64-linux-gnu-2.31-static/lib \\\n    -L/gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0 \\\n    -L/gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0/../../../../riscv64-linux-gnu/lib \\\n    -L/gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib \\\n    $OBJECT \\\n    --exclude-libs ALL -Bstatic -lstdc++ -Bdynamic -lm -lgcc_s -lgcc \\\n    -L/gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib \\\n    -rpath-link=/gnu/store/whzxf4x97y7j2gcrg8p90n3iqiy9ssal-glibc-cross-riscv64-linux-gnu-2.31/lib \\\n    -rpath-link=/gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/riscv64-linux-gnu/lib \\\n    -lgcc_s -lc -lgcc_s -lgcc \\\n    /gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0/crtendS.o \\\n    /gnu/store/f1blyzzq50h5gx0aimp7d0m72xvmdk3a-gcc-cross-riscv64-linux-gnu-13.3.0-lib/lib/gcc/riscv64-linux-gnu/13.3.0/crtn.o\n```\ni've compared the command line between riscv64 and x86_64, but did not notice any differences that could explain the behavior. So i'm still fairly convinced it's internal to binutils. ",
          "created_at": "2025-03-08T04:00:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3338,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2714382203,
          "user": "laanwj",
          "body": "It almost looks like ld flag `--no-export-dynamic`, which is the default, doesn't work on RISC-V. Not even if added explicitly. Without `--exclude-libs ALL`, all weak symbols imported from libraries end up in the exported binary. With `--exclude-libs ALL` only the ones that are exported by the `.o` file (the behavior we're seeing).\n\nPassing `--export-dynamic` to the x86_64 build approximates what we're seeing on RISC-V. But not entirely, we get more symbols than that. So *some* filtering is happening there, just less.\n\nEdit: narrowed it down to the following code in `allocate_dynrelocs` in `bfd/elf64-riscv.c`:\n```\n      /* Make sure this symbol is output as a dynamic symbol.\n         Undefined weak syms won't yet be marked as dynamic.  */\n      if (h->dynindx == -1\n          && !h->forced_local)\n        {\n          if (! bfd_elf_link_record_dynamic_symbol (info, h))\n            return false;\n        }\n```\nCommenting out the `bfd_elf_link_record_dynamic_symbol` call makes the extraneous symbols disappear. So it looks like this has something to do with dynamic relocations in the binary. This explains why it is RISCV specific, but doesn't rule out that the symbols are spurious.",
          "created_at": "2025-03-11T13:54:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1193,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2717186516,
          "user": "laanwj",
          "body": "Filed an upstream issue for binutils: https://sourceware.org/bugzilla/show_bug.cgi?id=32783",
          "created_at": "2025-03-12T09:17:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 91,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3585628172,
          "user": "fanquake",
          "body": "While there hasn't been a response to our upstream issue: https://sourceware.org/bugzilla/show_bug.cgi?id=32783, the test case seems to be improved as of binutils 2.45. I can recreate the issue using `2.44`. i.e:\n```bash\n# riscv64-linux-gnu-ld --version\nGNU ld (GNU Binutils for Debian) 2.44\n# riscv64-linux-gnu-g++ test.cpp -o test.rv -Wl,--exclude-libs,ALL -fvisibility=hidden  -static-libstdc++ \n# riscv64-linux-gnu-objdump -T test.rv|grep \"\\.text\"\n0000000000016820 l    d  .text\t0000000000000000              .text\n0000000000017b54  w   DF .text\t00000000000000f0  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEE12_M_constructIPKcEEvT_S8_St20forward_iterator_tag\n```\nbut with `2.45`, the spurious symbol is no-longer present:\n```bash\n# riscv64-linux-gnu-ld --version\nGNU ld (GNU Binutils for Debian) 2.45.50.20251125\n# riscv64-linux-gnu-g++ test.cpp -o test.rv -Wl,--exclude-libs,ALL -fvisibility=hidden  -static-libstdc++ \n# riscv64-linux-gnu-objdump -T test.rv|grep \"\\.text\"\n0000000000016780 l    d  .text\t0000000000000000              .text\n```\n\nHowever using binutils 2.45.1 doesn't seem to have fixed the issue with our Guix build.",
          "created_at": "2025-11-27T12:33:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1157,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1063,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2551569143,
      "number": 30985,
      "title": "gen-manpages.py should skip nonexistent binaries and still work for the existent binaries",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nBy executing `BUILDDIR=$PWD/build contrib/devtools/gen-manpages.py`, if one binary is not found, it will stop the generation of all manpages.\r\n\r\nFor example: Executing gen-manpages.py without bitcoin-qt. The command exits after detecting that bitcoin-qt does not exist, and no manpage is generated, even though only bitcoin-qt is missing.\r\n\r\n```bash\r\n➜  bitcoin git:(master) ✗ BUILDDIR=$PWD/build contrib/devtools/gen-manpages.py\r\n/home/andre/repos/bitcoin/build/src/qt/bitcoin-qt not found or not an executable\r\n➜  bitcoin git:(master) ✗ \r\n```\r\n\r\nInitially, I thought this behavior was intended, but after investigating the older shell script implementation `gen-manpages.sh`, I realized that’s not the case. `gen-manpages.sh` was able to generate all the manpages and just warned the user about missing binaries.\r\n\r\nExample using the last version of the shell script: https://github.com/bitcoin/bitcoin/blob/a5edd191be93aff8f9c0f60f04e711e2e78ecc77/contrib/devtools/gen-manpages.sh\r\n\r\n```bash\r\n➜  bitcoin git:(master) ✗ BUILDDIR=$PWD/build contrib/devtools/gen-manpages.sh\r\ncontrib/devtools/gen-manpages.sh: line 25: /home/andre/repos/bitcoin/build/src/qt/bitcoin-qt: No such file or directory\r\nhelp2man: can't get `--help' info from /home/andre/repos/bitcoin/build/src/qt/bitcoin-qt\r\nTry `--no-discard-stderr' if option outputs to stderr\r\n➜  bitcoin git:(master) ✗ git status\r\nOn branch master\r\nYour branch is up to date with 'origin/master'.\r\n\r\nChanges not staged for commit:\r\n  (use \"git add <file>...\" to update what will be committed)\r\n  (use \"git restore <file>...\" to discard changes in working directory)\r\n\tmodified:   doc/man/bitcoin-cli.1\r\n\tmodified:   doc/man/bitcoin-tx.1\r\n\tmodified:   doc/man/bitcoin-util.1\r\n\tmodified:   doc/man/bitcoin-wallet.1\r\n\tmodified:   doc/man/bitcoind.1\r\n\r\n```\r\n\r\nThe script warned about `bitcoin-qt` being missing but still generated the other manpages, as you can see with the git status command.\n\n### Expected behaviour\n\n```sh\r\n➜  bitcoin git:(master) ✗ BUILDDIR=$PWD/build contrib/devtools/gen-manpages.py\r\n/home/andre/repos/bitcoin/build/src/qt/bitcoin-qt not found or not an executable. Skipping...\r\nGenerating /home/andre/repos/bitcoin/doc/man/bitcoind.1…\r\nGenerating /home/andre/repos/bitcoin/doc/man/bitcoin-cli.1…\r\nGenerating /home/andre/repos/bitcoin/doc/man/bitcoin-tx.1…\r\nGenerating /home/andre/repos/bitcoin/doc/man/bitcoin-wallet.1…\r\nGenerating /home/andre/repos/bitcoin/doc/man/bitcoin-util.1…\r\n```\n\n### Steps to reproduce\n\nRun `BUILDDIR=$PWD/build contrib/devtools/gen-manpages.py` without having one of the binaries compiled e.g. bitcoin-qt.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster\n\n### Operating system and version\n\nDebian\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "andremralves",
      "created_at": "2024-09-26T21:35:19Z",
      "updated_at": "2025-11-27T12:17:48Z",
      "closed_at": "2024-11-27T17:34:45Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/30985",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3039,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2673722706,
      "number": 31326,
      "title": "Maximum dbcache too small",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\n28.0 gives 'out of space' and hangs when dbcache is set to 16384 and full chainstate -reindex is run.\n\n### Expected behaviour\n\nShould -reindex complete the reindexing.\n\n### Steps to reproduce\n\nHave whole blockchain on disk, txindex=1, dbcache=16384 and reindex whole chainstate with command line -reindex option.\n\n### Relevant log output\n\n2024-11-18T17:15:31Z Cache size (16396074160) exceeds total space (16395641600)\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n28.0\n\n### Operating system and version\n\nWindows 10 Pro x64 PL\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "pbies",
      "created_at": "2024-11-19T22:31:28Z",
      "updated_at": "2025-11-27T12:17:46Z",
      "closed_at": "2024-11-25T13:07:37Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31326",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 764,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3669326653,
      "number": 33957,
      "title": "[BIP-352] Silent Payments Implementation",
      "body": "Hi.\n\nWe are keen on 'playing with'/testing Silent Payments in Bitcoin Core and thus contributing to it.\nThere seems to be a myriad of relevant PRs (#28201, #28122, #27827 and so on) as well as (open) issues which confuse us.\nWhich one is the latest one? How many (and which ones) must be implemented? In which order?\n\nAre there any Windows desktop wallets we could use for testing purposes?\n\nSorry about so many questions.\n\nThanks in advance.\n\n@josibake @Eunovo ",
      "state": "closed",
      "user": "multicryptobank",
      "created_at": "2025-11-26T23:13:47Z",
      "updated_at": "2025-11-26T23:21:24Z",
      "closed_at": "2025-11-26T23:21:24Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33957",
      "labels": [],
      "comment_data": [
        {
          "id": 3583520845,
          "user": "pinheadmz",
          "body": "Follow  https://github.com/bitcoin/bitcoin/issues/28536",
          "created_at": "2025-11-26T23:20:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 55,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 503,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2557844550,
      "number": 31005,
      "title": "Docs: \"External signer\" documentation is outdated. (plz close if unwanted request)",
      "body": "### Is there an existing issue for this?\r\n\r\n- [x] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nSpecification documents some basic command-line options only.\r\n\r\n### Expected behaviour\r\n\r\nIncluding missing flags, at least `--account`, `--chain`, `--stdin`. And in case of `--stdin`, all further stdin-commands and corresponding results.\r\n\r\n### Steps to reproduce\r\n\r\nN/A\r\n\r\n### Relevant log output\r\n\r\nN/A\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nOther\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster-ref in repo\r\n\r\n### Operating system and version\r\n\r\nN/A\r\n\r\n### Machine specifications\r\n\r\nN/A",
      "state": "closed",
      "user": "cobratbq",
      "created_at": "2024-09-30T23:33:21Z",
      "updated_at": "2025-11-26T14:27:19Z",
      "closed_at": "2025-11-26T14:27:19Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31005",
      "labels": [
        "Docs"
      ],
      "comment_data": [
        {
          "id": 3144377397,
          "user": "Sjors",
          "body": "Feel free to open a PR to update these docs.",
          "created_at": "2025-08-01T12:14:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 44,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3478486581,
          "user": "cobratbq",
          "body": "@Sjors feel free to review my PR #33765 :-P",
          "created_at": "2025-11-02T23:28:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 43,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3581571135,
          "user": "maflcko",
          "body": "ok, let's move the discussion to the pull request.",
          "created_at": "2025-11-26T14:27:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3069082387,
      "number": 32531,
      "title": "avoid using invalidateblock to directly test reorg behavior",
      "body": "### Motivation\n\nWhile working on https://github.com/bitcoin/bitcoin/pull/32516 I found that for testing mempool entry from reorged blocks, directly using invalidateblock to trigger the reorg has at least a couple behaviors that don't match real reorgs:\n\n1) Only allows 10 deep reorg before it stops trying to re-enter things into the mempool\n2) doesn't respect descendant chain limits(Sets of PreChecks isn't run once per reorg but once per block, letting longer chains slip in)\n\nthe code paths greatly diverge from normal re-orgs, which makes this problematic for actual testing.\n\nThe setup being used:\n1) build blockchain of stuff you want re-entry for\n2) invalidatblock to the desired fork off point\n\nOne example to look at would be https://github.com/bitcoin/bitcoin/blob/3f83c744ac28b700090e15b5dda2260724a56f49/test/functional/mempool_ephemeral_dust.py#L350 or any other tests in `mempool_*.py` that use invalidateblock to simulate reorgs and mempool re-entry.\n\n\n### Possible solution\n\n\nWe should make sure that in our reorg/mempool tests spread across the codebase that we don't do it this way and instead:\n\n1) Prep fork chain of sufficient length\n2) invalidate the fork chain\n3) do normal test setup\n4) reconsiderblock the previously invalidated chain\n\nThis appears to match the intended test coverage.\n\n### Useful Skills\n\nUnderstanding of python test suite\n\n### Guidance for new contributors\n\nWant to work on this issue?\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-05-16T13:54:49Z",
      "updated_at": "2025-11-26T14:02:27Z",
      "closed_at": "2025-11-26T14:02:27Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/32531",
      "labels": [
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 2886940689,
          "user": "mzumsande",
          "body": "> We should make sure that in our reorg/mempool tests spread across the codebase that we don't do it this way and instead:\n> \n> 1. Prep fork chain of sufficient length\n> 2. invalidate the fork chain\n> 3. do normal test setup\n> 4. reconsiderblock the previously invalidated chain\n> \n> This appears to match the intended test coverage.\n\nWhy not simply submit the fork chain at the right point in time, provided it has more work - no invalidateblock / reconsiderblock involved at all. I always thought the reason for using those was just the simplicity of not having to prepare a longer chain to reorg to.",
          "created_at": "2025-05-16T14:47:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 602,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2886947178,
          "user": "instagibbs",
          "body": "> Why not simply submit the fork chain at the right point in time\n\nSure, that works too, it just seemed easiest since you can use ~all the tooling to generate blockchains. e.g., if you want stuff in the fork blocks (and make as many blocks as you like) it's trivial to do via rpcs like generateblock.",
          "created_at": "2025-05-16T14:50:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 300,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2887013040,
          "user": "mzumsande",
          "body": "> > Why not simply submit the fork chain at the right point in time\n> \n> Sure, that works too, it just seemed easiest since you can use ~all the tooling to generate blockchains. e.g., if you want stuff in the fork blocks (and make as many blocks as you like) it's trivial to do via rpcs like generateblock.\n\nOh ok I see now, as in https://github.com/bitcoin/bitcoin/pull/32516/commits/16af944a547bfea8f1f910938491a8ad11a47de5.  Could also prepare the fork chain on a second node using whatever tooling, and connect the two at the right moment, but if you want to use just one node that works too.",
          "created_at": "2025-05-16T15:13:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 596,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2901240394,
          "user": "yuvicc",
          "body": "> ### Motivation\n> While working on [#32516](https://github.com/bitcoin/bitcoin/pull/32516) I found that for testing mempool entry from reorged blocks, directly using invalidateblock to trigger the reorg has at least a couple behaviors that don't match real reorgs:\n> \n> 1. Only allows 10 deep reorg before it stops trying to re-enter things into the mempool\n> 2. doesn't respect descendant chain limits(Sets of PreChecks isn't run once per reorg but once per block, letting longer chains slip in)\n> \n> the code paths greatly diverge from normal re-orgs, which makes this problematic for actual testing.\n> \n> The setup being used:\n> \n> 1. build blockchain of stuff you want re-entry for\n> 2. invalidatblock to the desired fork off point\n> \n> ### Possible solution\n> We should make sure that in our reorg/mempool tests spread across the codebase that we don't do it this way and instead:\n> \n> 1. Prep fork chain of sufficient length\n> 2. invalidate the fork chain\n> 3. do normal test setup\n> 4. reconsiderblock the previously invalidated chain\n> \n> This appears to match the intended test coverage.\n\nThanks @instagibbs for identifying the issue, I have opened a draft PR to address this. Will notify once its ready for review!\n\n",
          "created_at": "2025-05-22T13:30:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1227,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2901247824,
          "user": "instagibbs",
          "body": "Also wondering aloud how we can accurately test deep reorgs on real networks, like a mainnet node for performance testing. Anyone have suggestions on this?",
          "created_at": "2025-05-22T13:32:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 155,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2906624037,
          "user": "spikeyrock",
          "body": "Maybe spin up two regtest nodes, mine a fork on one, and then connect them at just the right time to trigger the reorg. That way, the reorg happens \"naturally\" through P2P sync rather than forcing it.",
          "created_at": "2025-05-24T08:20:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 200,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2954644351,
          "user": "yuvicc",
          "body": "I've opened a PR [#32587](https://github.com/bitcoin/bitcoin/pull/32587) to update the reorg pattern to the real one mentioned above — it's ready for review! If anyone’s interested in taking a look, your feedback would be most welcome and appreciated! \n\n@instagibbs @mzumsande ",
          "created_at": "2025-06-09T05:07:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 277,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1649,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3644286752,
      "number": 33911,
      "title": "RFC: Add versioning to the kernel header",
      "body": "The kernel header installed alongside its dynamic library should be versioned. Versioning best practices around providing a stable API are well established, e.g. through semantic versioning. However the library presents challenges to versioning beyond API stability. Internal features changing, i.e. a new soft fork rule, or a new validation cache, might not have a direct impact on the API, but won't necessarily be desirable to run by all users. It also currently uses clientversion.cpp, which dictates the underlying Bitcoin Core version. Since Bitcoin Core's version in turn does not communicate anything about the state of the API, it should not be directly re-used for the header's versioning.\n\nA solution to this might be to have a version for the API and treat the Bitcoin Core version as a product name. This could divorce the release of the header and the library from the rest of Bitcoin Core. A full version string could look something like v1.0.0 (Core-v31.0). This could also mean that the same API version supports different \"product names\" and vice-versa.\n\nAnother alternative to consider here is to provide a unified version for the header and bump its patch number on every change to the library.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-11-19T20:19:02Z",
      "updated_at": "2025-11-26T11:02:14Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33911",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3580729764,
          "user": "fanquake",
          "body": "I think anything is probably fine here (at this point), as long as any versioning doesn't become a burden on productivity. I think the API should remain experimental, and no guarantees about backwards compatibility or stability should be made. If the need arises, we should be free to completely rewrite or re-architect (in a breaking way) anything we have released. We currently have a small, reactive group implementing things on top of the API, who I think will be willing to continue to rewrite/adapt their code as we flesh out what this should look like, and their contributions/feedback are taken onboard.",
          "created_at": "2025-11-26T10:46:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 611,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3580786554,
          "user": "maflcko",
          "body": "It is probably fine for the first few releases to just treat the Bitcoin Core `FormatFullVersion()` as the kernel version. It is clear that that version does not follow the semantic versioning of the kernel API, but if  kernel users care about breaking changes, they will be listed in the release notes anyway.",
          "created_at": "2025-11-26T11:02:14Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 310,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1255,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 700541331,
      "number": 19950,
      "title": "[Linux] Add wayland support",
      "body": "**Is your feature request related to a problem? Please describe.**\r\n - Wayland provides extra security as apps can't have access to windows from other apps\r\n- X apps looks blurry using fractional scaling on GNOME.\r\n- X is mostly unmaintained, in favour of Wayland\r\n\r\n**Describe the solution you'd like**\r\nAdd Wayland support to precompiled binaries.\r\n\r\n**Additional context**\r\nAs far as I understand wayland is supported on the KDE 5.15 runtime. Currently running with `QT_QPA_PLATFORM=\"wayland\"` results in\r\n\r\n```\r\nThis application failed to start because it could not find or load the Qt platform plugin \"wayland\"\r\nin \"\".\r\n\r\nAvailable platform plugins are: xcb.\r\n\r\nReinstalling the application may fix this problem.\r\n```\r\n",
      "state": "open",
      "user": "A6GibKm",
      "created_at": "2020-09-13T10:18:32Z",
      "updated_at": "2025-11-25T22:10:05Z",
      "closed_at": null,
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/19950",
      "labels": [
        "Feature",
        "GUI",
        "Linux/Unix"
      ],
      "comment_data": [
        {
          "id": 3577790159,
          "user": "AndKe",
          "body": "even with QT_QPA_PLATFORM=xcb  bitcoin-qt is very broken. \nInterestingly : bitcoin-25.1 works perfectly fine, 30.0 is very broken on Wayland.",
          "created_at": "2025-11-25T22:10:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 141,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3565483017,
      "number": 33731,
      "title": "RFC: Do we want to support fuzzing on MacOS?",
      "body": "Fuzzing on MacOS (i.e. actual fuzzing not just running the inputs through the `fuzz` binary) is known to be brittle and we've had plenty of issues reported to us showcasing this:\n\n- https://github.com/bitcoin/bitcoin/issues/33667\n- https://github.com/bitcoin/bitcoin/issues/32089\n- https://github.com/bitcoin/bitcoin/issues/31049\n- https://github.com/bitcoin/bitcoin/issues/27550\n- https://github.com/bitcoin/bitcoin/issues/19789\n\nThe solution usually involves something along the lines of waiting for a brew llvm update or adding macOS specific hints to our documentation. These issues can however also depend on specific macOS versions, and our hints might not be accurate for every version or get stale with time.\n\nI usually don't chime in on these issues because I don't have a Mac and afaik, all serious fuzzing (at scale & automated) for us (and most other projects) happens on Linux.\n\nI think there are two options:\n\n1. Keep the current approach and fix/document as issues are reported.\n2. Deprecate \"official\" support for fuzzing on macOS and add a section to the docs about using Linux instead (e.g. to use a VM or VPS). MacOS users will still be able to fuzz on a their Mac but it won't be on us to triage the issues for their specific setup.\n\nI'd prefer option 2).",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2025-10-29T11:17:08Z",
      "updated_at": "2025-11-25T16:26:09Z",
      "closed_at": "2025-11-25T16:26:09Z",
      "comments": 19,
      "url": "https://github.com/bitcoin/bitcoin/issues/33731",
      "labels": [
        "Brainstorming",
        "Docs",
        "macOS",
        "Tests",
        "Up for grabs",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3461142954,
          "user": "fanquake",
          "body": "> 1. Keep the current approach and fix/document as issues are reported.\n\nIf we do do this, it should be clear what is supported (i.e just the latest version of LLVM/Clang shipped via brew, using `lld` to link?) , otherwise (as you metion above) we'll be documenting many different \"workarounds\" depending on the version of macOS, version of Apple clang/binutils install, if brew LLVM is being used, and it's version, using `ld64` to link, vs `lld`.\n\n> I'd prefer option 2).\n\nConcept ACK. Getting fuzzing to work on macOS seems like whack-a-mole, and even if somebody can get it to compile, the amount of useful fuzzing they are likely to do, other than a sanity check that the fuzzer doesn't immeadiately crash, seems limited.",
          "created_at": "2025-10-29T11:57:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 726,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3461199887,
          "user": "Crypt-iQ",
          "body": "I have a mac and prefer option 2 also. The fuzz tests usually break each macOS update and I don't think it makes sense to maintain documentation for it. I occasionally find it useful just to see that a harness is working, but I can fix issues on my own as they come up.",
          "created_at": "2025-10-29T12:13:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 269,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3461226122,
          "user": "marcofleon",
          "body": "Concept ACK on option 2. I remember struggling on my mac when I first started fuzzing and the section we have in the docs didn't really help. Ended up just figuring it out on my own. These days pretty much all of my fuzzing happens on Linux.",
          "created_at": "2025-10-29T12:20:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 241,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3461244223,
          "user": "maflcko",
          "body": "No strong opinion, but I don't mind having docs that just say they only works with a specific brew llvm version and macOS version, and have them updated when they break.\n\nThough, saying that libFuzzer is not supported on macOS seems also fine.",
          "created_at": "2025-10-29T12:24:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 243,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3461417256,
          "user": "brunoerg",
          "body": "Concept ACK on option 2. I use macOS and I agree this is a pain -- The effort of updating the documentation is not worth it. The only downside of it would be not attracting macOS people to fuzzing development (?). But anyway, if someone really wants to get in fuzzing dev would have to have a linux at some point.",
          "created_at": "2025-10-29T13:05:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 3,
            "text_length": 313,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3461908503,
          "user": "Crypt-iQ",
          "body": "> The only downside of it would be not attracting macOS people to fuzzing development (?)\n\nI was also thinking about this, and it could turn away some people from writing fuzz tests. Maybe if the docs mentioned a specific working version as suggested by @maflcko above, but then somebody would need to test these versions. I've had issues where even updating to a new macOS version isn't possible without some hacks.",
          "created_at": "2025-10-29T14:34:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 416,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3461995390,
          "user": "furszy",
          "body": "It’s definitely painful to run it on Mac. I'm not against officially deprecating it if that is the general consensus but it’s quite useful to be able to troubleshoot individual crashes/timeouts locally. It would be handy to have pinned versions with specific docs on how to make it work (if possible).",
          "created_at": "2025-10-29T14:48:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 301,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3462509273,
          "user": "dergoegge",
          "body": "> but it’s quite useful to be able to troubleshoot individual crashes/timeouts locally\n\nThis will still be possible, because you can build the `fuzz` binary without libFuzzer for reproduction purposes (this is what we do in the macOS fuzz CI job). Unless the bugs only manifest when running the fuzzer due to non-determinism.",
          "created_at": "2025-10-29T16:12:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 325,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3463979308,
          "user": "l0rinc",
          "body": "I have also documented some workarounds for mac in https://github.com/bitcoin/bitcoin/pull/32084#issuecomment-3361478681 - they kinda' work, without sanitizers at least, which cannot handle exceptions for some reason.\n\nBut I'm not sure why we want to give up fuzzing on Macs, everything we do is a whack-a-mole game, if we want people to write fuzz tests, we can't expect them to run them on a different machine and not even try them locally. We'll just end up with 100 PR pushes because people will debug these on the CI.",
          "created_at": "2025-10-29T20:56:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 522,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3466734703,
          "user": "maflcko",
          "body": "My suggestion would be similar to how valgrind is handled, which doesn't really work unless the dev picks a tested Linux distro, arch, and compiler, with compiler settings:\n\nhttps://github.com/bitcoin/bitcoin/blob/72511fd02e72b74be11273e97bd7911786a82e54/contrib/valgrind.supp#L15-L16\n\nIn that case, I'd expect that the `doc/fuzzing.md` would only list the latest release of macOS and the exact steps (with compiler version) to reproduce there. If someone is on an older macOS, they can check the older version of the docs on their own.\n\nObviously this means it will have to be updated yearly, but this is true for a lot of other docs, such as `doc/build-netbsd.md`, which list the latest tested version to work.",
          "created_at": "2025-10-30T08:58:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 712,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3467299965,
          "user": "fanquake",
          "body": "> we can't expect them to run them on a different machine and not even try them locally. \n\nThey can always use Podman or Docker, and run a Linux VM, on their macOS machine.",
          "created_at": "2025-10-30T10:44:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 172,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3493139664,
          "user": "Sjors",
          "body": "The only performant macOS machine I have is a laptop, so I would never use that for long running fuzzer jobs. I do want to be able to reproduce failures, but that's not at stake here.\n\nIf I ever want to add a new fuzz target, I don't mind trying it on a physical linux machine (virtualisation on Apple Silicon has often been a can of worms for me, though I haven't tried with fuzzing).\n\nNot doing (1) does increase the barrier for macOS based developers to contribute fuzz code. I'm not sure how to compare that to the effort saved by (2).\n\nMy preference would be (1), but limit documentation / support to the most recent macOS version. It can be limited to the minimum tooling required to briefly run fuzzers.",
          "created_at": "2025-11-05T20:10:47Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 710,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559605455,
          "user": "maflcko",
          "body": "> My preference would be (1), but limit documentation / support to the most recent macOS version. It can be limited to the minimum tooling required to briefly run fuzzers.\n\nSounds good. So I guess this is up-for-grabs, and a dev with the latest macOS can just update the docs (https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md#macos-hints-for-libfuzzer) with the steps that work with that version?",
          "created_at": "2025-11-20T19:03:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 409,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559744710,
          "user": "brunoerg",
          "body": "> Sounds good. So I guess this is up-for-grabs, and a dev with the latest macOS can just update the docs (https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md#macos-hints-for-libfuzzer) with the steps that work with that version?\n\nACK on doing it.",
          "created_at": "2025-11-20T19:41:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 256,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3559791440,
          "user": "l0rinc",
          "body": "> a dev with the latest macOS can just update the docs\n\nShould I revive https://github.com/bitcoin/bitcoin/pull/32084?",
          "created_at": "2025-11-20T19:54:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 118,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3560092109,
          "user": "maflcko",
          "body": "> > a dev with the latest macOS can just update the docs\n> \n> Should I revive [#32084](https://github.com/bitcoin/bitcoin/pull/32084)?\n\nI think you found that it doesn't work reliably. If there truly is no single way to get fuzzing to work fully reliably on macOS, it seems best to remove the docs temporarily.",
          "created_at": "2025-11-20T21:20:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 310,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3560177532,
          "user": "l0rinc",
          "body": "Fuzzing works, I just have to disable the sanitizers, since they disable exception support - and the fuzzer halts at the very first throw.",
          "created_at": "2025-11-20T21:46:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 138,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3560406701,
          "user": "maflcko",
          "body": "If `--preset=libfuzzer-nosan` is the only thing that works reliably, then only that should be mentioned. And possibly mention the option to reproduce existing fuzz inputs with a sanitizer, without libfuzzer.",
          "created_at": "2025-11-20T22:33:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 207,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3563260883,
          "user": "dergoegge",
          "body": "Opened #33921 ",
          "created_at": "2025-11-21T14:29:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 14,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1320,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3637412774,
      "number": 33898,
      "title": "depends: fallback server missing Qt downloads",
      "body": "Looks like `https://code.qt.io` is down / having issues. None of the files needed from that site are available from the fallback server:\n```bash\nChecksum missing or mismatched for qt source. Forcing re-download.\nFetching qtbase-everywhere-src-6.7.3.tar.xz from https://download.qt.io/archive/qt/6.7/6.7.3/submodules\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   281  100   281    0     0    306      0 --:--:-- --:--:-- --:--:--   306\n100 47.1M  100 47.1M    0     0  4687k      0  0:00:10  0:00:10 --:--:-- 7798k\n/bitcoin/depends/work/download/qt-6.7.3/qtbase-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching qttranslations-everywhere-src-6.7.3.tar.xz from https://download.qt.io/archive/qt/6.7/6.7.3/submodules\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   289  100   289    0     0    284      0  0:00:01  0:00:01 --:--:--   285\n100 1511k  100 1511k    0     0   622k      0  0:00:02  0:00:02 --:--:-- 1430k\n/bitcoin/depends/work/download/qt-6.7.3/qttranslations-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching qttools-everywhere-src-6.7.3.tar.xz from https://download.qt.io/archive/qt/6.7/6.7.3/submodules\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   282  100   282    0     0    336      0 --:--:-- --:--:-- --:--:--   336\n100 8811k  100 8811k    0     0  2715k      0  0:00:03  0:00:03 --:--:-- 3864k\n/bitcoin/depends/work/download/qt-6.7.3/qttools-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching CMakeLists.txt?h=6.7.3 from https://code.qt.io/cgit/qt/qt5.git/plain\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:--  0:00:30 --:--:--     0\ncurl: (28) Failed to connect to code.qt.io port 443 after 30002 ms: Timeout was reached\nWarning: Problem : timeout. Will retry in 1 seconds. 3 retries left.\n  0     0    0     0    0     0      0      0 --:--:--  0:00:30 --:--:--     0\ncurl: (28) Failed to connect to code.qt.io port 443 after 30006 ms: Timeout was reached\nWarning: Problem : timeout. Will retry in 2 seconds. 2 retries left.\n  0     0    0     0    0     0      0      0 --:--:--  0:00:30 --:--:--     0\ncurl: (28) Failed to connect to code.qt.io port 443 after 30005 ms: Timeout was reached\nWarning: Problem : timeout. Will retry in 4 seconds. 1 retries left.\n  0     0    0     0    0     0      0      0 --:--:--  0:00:30 --:--:--     0\ncurl: (28) Failed to connect to code.qt.io port 443 after 30004 ms: Timeout was reached\nFetching CMakeLists.txt?h=6.7.3 from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0   146    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\ncurl: (22) The requested URL returned error: 404\nmake[1]: *** [funcs.mk:346: /bitcoin/depends/sources/download-stamps/.stamp_fetched-qt-qtbase-everywhere-src-6.7.3.tar.xz.hash] Error 22\nmake[1]: Leaving directory '/bitcoin/depends'\nmake: *** [Makefile:276: download-linux] Error 2\nmake: Leaving directory '/bitcoin/depends'\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-18T10:40:43Z",
      "updated_at": "2025-11-25T12:23:03Z",
      "closed_at": "2025-11-25T12:23:03Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33898",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3547055070,
          "user": "maflcko",
          "body": "They are cgit requests, so likely the server is just dos'd by llm bots",
          "created_at": "2025-11-18T11:19:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 70,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3549403050,
          "user": "achow101",
          "body": "The file is located at https://bitcoincore.org/depends-sources/CMakeLists.txt-6.7.3\n\nNot sure how to have download figure that out.",
          "created_at": "2025-11-18T20:10:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 131,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3551739190,
          "user": "fanquake",
          "body": "cc @hebasto ",
          "created_at": "2025-11-19T09:34:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 12,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559079200,
          "user": "hebasto",
          "body": "I forced fallback downloads using the following patch:\n```diff\n--- a/depends/funcs.mk\n+++ b/depends/funcs.mk\n@@ -36,8 +36,7 @@ define fetch_file_inner\n endef\n \n define fetch_file\n-    ( $(call fetch_file_inner,$(1),$(2),$(3),$(4),$(5)) || \\\n-      $(call fetch_file_inner,$(1),$(FALLBACK_DOWNLOAD_PATH),$(4),$(4),$(5)))\n+      $(call fetch_file_inner,$(1),$(FALLBACK_DOWNLOAD_PATH),$(4),$(4),$(5))\n endef\n \n # Shell script to create a source tarball in $(1)_source from local directory\n```\n\nEverything appears to work as expected:\n```\n$ gmake -C depends qt_fetched\ngmake: Entering directory '/home/hebasto/dev/bitcoin/depends'\nFetching qtbase-everywhere-src-6.7.3.tar.xz from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 47.1M  100 47.1M    0     0  2753k      0  0:00:17  0:00:17 --:--:-- 3259k\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/qtbase-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching qttranslations-everywhere-src-6.7.3.tar.xz from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 1511k  100 1511k    0     0   829k      0  0:00:01  0:00:01 --:--:--  829k\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/qttranslations-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching qttools-everywhere-src-6.7.3.tar.xz from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 8811k  100 8811k    0     0  1109k      0  0:00:07  0:00:07 --:--:-- 1706k\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/qttools-everywhere-src-6.7.3.tar.xz.temp: OK\nFetching CMakeLists.txt-6.7.3 from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  4041  100  4041    0     0   5121      0 --:--:-- --:--:-- --:--:--  5121\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/CMakeLists.txt-6.7.3.temp: OK\nFetching ECMOptionalAddSubdirectory.cmake-6.7.3 from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  3029  100  3029    0     0   3741      0 --:--:-- --:--:-- --:--:--  3739\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/ECMOptionalAddSubdirectory.cmake-6.7.3.temp: OK\nFetching QtTopLevelHelpers.cmake-6.7.3 from https://bitcoincore.org/depends-sources\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 21633  100 21633    0     0  22979      0 --:--:-- --:--:-- --:--:-- 22964\n/home/hebasto/dev/bitcoin/depends/work/download/qt-6.7.3/QtTopLevelHelpers.cmake-6.7.3.temp: OK\ngmake: Leaving directory '/home/hebasto/dev/bitcoin/depends'\n$ gmake -C depends qt_extracted\ngmake: Entering directory '/home/hebasto/dev/bitcoin/depends'\nExtracting qt...\n/home/hebasto/dev/bitcoin/depends/sources/qtbase-everywhere-src-6.7.3.tar.xz: OK\n/home/hebasto/dev/bitcoin/depends/sources/qttranslations-everywhere-src-6.7.3.tar.xz: OK\n/home/hebasto/dev/bitcoin/depends/sources/qttools-everywhere-src-6.7.3.tar.xz: OK\n/home/hebasto/dev/bitcoin/depends/sources/CMakeLists.txt-6.7.3: OK\n/home/hebasto/dev/bitcoin/depends/sources/ECMOptionalAddSubdirectory.cmake-6.7.3: OK\n/home/hebasto/dev/bitcoin/depends/sources/QtTopLevelHelpers.cmake-6.7.3: OK\ngmake: Leaving directory '/home/hebasto/dev/bitcoin/depends'\n```\n",
          "created_at": "2025-11-20T16:54:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 3894,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3559092421,
          "user": "fanquake",
          "body": "Seems like `https://code.qt.io` also doesn't work with (some?) VPN providers, so we should probably move away from using that.",
          "created_at": "2025-11-20T16:57:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 126,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3559121324,
          "user": "hebasto",
          "body": "> Seems like `https://code.qt.io` also doesn't work with (some?) VPN providers, so we should probably move away from using that.\n\nI can see two options:\n1. Switch to https://raw.githubusercontent.com/qt/qt5.\n2. Treat the three files as patches.",
          "created_at": "2025-11-20T17:04:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 244,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3540,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2692278093,
      "number": 31372,
      "title": "0.28 binds to default ports when -port or -rpcport set",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\n```\r\nbitcoind --datadir=(mktemp -d) -port=51234 -rpcport=51235\r\n```\r\n\r\nfails for me with:\r\n\r\n```\r\n2024-11-25T21:18:29Z [net:error] Unable to bind to 127.0.0.1:8334 on this computer. Bitcoin Core is probably already running.\r\n2024-11-25T21:18:29Z [error] Unable to bind to 127.0.0.1:8334 on this computer. Bitcoin Core is probably already running.\r\nError: Unable to bind to 127.0.0.1:8334 on this computer. Bitcoin Core is probably already running.\r\n2024-11-25T21:18:29Z [error] Failed to listen on any port. Use -listen=0 if you want this.\r\nError: Failed to listen on any port. Use -listen=0 if you want this.\r\n```\r\n\r\n(because I already have one listening)\r\n\r\nThis was not the case in 0.27. I noticed when upgrading `nixpkgs` in our test suite (which switches bitcoind from 0.27 to 0.28). We used to set `port` and `rpcport` in the config and that was it. Now we need to set also `bind` and `rpcbind`.\n\n### Expected behaviour\n\nUnclear if this is a bug, but clearly a change in the behavior, so worth reporting.\n\n### Steps to reproduce\n\n```\r\nbitcoind --datadir=(mktemp -d) -port=51234 -rpcport=51235\r\n```\r\n\r\n, check ports with `sudo netstat -l -p -n | grep bitcoind`\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv28.0.0\n\n### Operating system and version\n\nNixOS 24.11-beta\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "dpc",
      "created_at": "2024-11-25T21:23:04Z",
      "updated_at": "2025-11-25T12:16:23Z",
      "closed_at": "2024-11-25T21:41:42Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31372",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1575,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2670346015,
      "number": 31321,
      "title": "Segmentation fault when ./bitcoind",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nError Run Bitcoind deamon after compile on ubuntu 22\r\n\r\n1. compile depends \r\n2. compile daemon linked to depends \r\n3. run ./bitcoind showed error below \r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n0x00007ffff7e4b5ee in std::_Rb_tree_decrement(std::_Rb_tree_node_base const*) () from /lib/x86_64-linux-gnu/libstdc++.so.6\r\n\r\n### Expected behaviour\r\n\r\nRunning as normal\r\n\r\n### Steps to reproduce\r\n\r\n1. compile depend \r\n2. compile daemon\r\n3. run ./bitcoind show error below \r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n0x00007ffff7e4b5ee in std::_Rb_tree_decrement(std::_Rb_tree_node_base const*) () from /lib/x86_64-linux-gnu/libstdc++.so.6\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.0\r\n\r\n### Operating system and version\r\n\r\nUbuntu 22.04 LTS\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "Hotman10001",
      "created_at": "2024-11-18T23:56:06Z",
      "updated_at": "2025-11-25T12:16:23Z",
      "closed_at": "2024-11-25T13:05:13Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31321",
      "labels": [
        "Linux/Unix"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1082,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3662465683,
      "number": 33942,
      "title": "RFC: Replacing `tinyformat` with `{fmt}`",
      "body": "# Description\n\nBitcoin Core has used tinyformat (via its `strprintf` wrapper) for text formatting for many years, a choice that reflected the library’s simplicity and its ability to be dropped into a large C++ codebase with minimal friction. Over time, the C++ standard and the ecosystem around formatting have evolved: `{fmt}` has become the de facto modern formatting library and served as the basis for `std::format` in later C++ standards. At the same time, a security and maintenance review of Tinyformat in the Bitcoin context revealed limitations that required ad-hoc fixes. Replacing tinyformat with `{fmt}` is therefore not merely an API swap; it is an alignment with modern C++ conventions, with a maintained codebase and stronger compile-time guarantees that reduce future maintenance cost.\n\nThe primary motivations for replacing `tinyformat` with `{fmt}` can be expressed in concrete, measurable terms. Benchmarks maintained by the `{fmt}` project and reproduced by early adopters show that `{fmt}` formats common workloads at speeds close to `printf` and substantially faster than `Tinyformat` (which relies on iostreams). In one commonly cited microbenchmark suite, `{fmt}` completes a heavy formatting loop in roughly 1.3–1.4 seconds while tinyformat finishes the same workload in roughly 2.25–2.6 seconds, which implies an empirical throughput improvement on the order of 1.6x to 2x for formatting-heavy tight loops. These measurements come from the `{fmt}` benchmark collection and independent reproductions of the original tinyformat benchmark.\n\nBeyond per-call speed, the difference in generated code and compile-time behavior is also material. The `{fmt}` project’s benchmark table reports much smaller stripped binaries and faster compile times for equivalent test programs: for a medium test scenario, `{fmt}` produced a stripped binary in the tens of kilobytes while the tinyformat/io-based alternative produced a binary in the low hundreds of kilobytes, and `{fmt}`’s measured compile times were lower than the iostream/tinyformat combination in the sample runs. These results indicate that adopting `{fmt}` can reduce the code-size impact of formatting and improve build characteristics on large codebases where formatting is used frequently.\n\n| Metric                                                     | `{fmt}` |                                                                `tinyformat` | `printf` / `iostream` (for reference) |\n| ---------------------------------------------------------- | ------: | --------------------------------------------------------------------------: | ------------------------------------: |\n| Execution time for a heavy formatting loop (2M iterations) |  1.42 s |                                                                      2.25 s | `printf` ~1.30 s, `iostream` ~1.85 s. |\n| Measured throughput improvement (tinyformat -> `{fmt}`)    |       — |                                      `{fmt}` ~= 1.6x faster than tinyformat |                                     — |\n| Stripped binary size for a medium test project             |  34 KiB |                                                                     386 KiB |                                     — |\n| Compile time for that medium test project                  |  46.8 s |                                                                      64.6 s |                                     — |\n| Approximate binary-size reduction (tinyformat -> `{fmt}`)  |       — | `{fmt}` produces binaries ~11× smaller in this scenario (386 KiB -> 34 KiB) |                                     — |\n\n> reference for benchmarks results from `{fmt}` team:  \n> https://github.com/fmtlib/fmt?tab=readme-ov-file#benchmarks\n\nIn addition to all of that, I think that will be a good step toward migrating to C++20 in the future, and we will be able to depend on the standard format library itself.\n\nThere were a lot of discussions to replace tinyformat with `{fmt}`, and I think the time has come to do that.",
      "state": "closed",
      "user": "hulxv",
      "created_at": "2025-11-25T10:34:05Z",
      "updated_at": "2025-11-25T12:06:17Z",
      "closed_at": "2025-11-25T11:30:20Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33942",
      "labels": [
        "Questions and Help"
      ],
      "comment_data": [
        {
          "id": 3575193582,
          "user": "maflcko",
          "body": "> In addition to all of that, I think that will be a good step toward migrating to C++20 in the future, and we will be able to depend on the standard format library itself.\n\nC++20 is already used, so I'll go ahead and close this for now.\n\n\nI don't think there is value in switching `tinyformat` to `{fmt}` and then again to `std::format`, with all the churn.\n\nIf the switch is done, it should be straight to `std::format`.\n\nSo I'll close this for now, but the discussion can continue.",
          "created_at": "2025-11-25T11:30:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 484,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575205474,
          "user": "maflcko",
          "body": "For further context: The current minimum required GCC version is 12.1 (https://github.com/bitcoin/bitcoin/blob/master/doc/dependencies.md#compiler), however `std::format` only comes with GCC libstdc++ 13.1",
          "created_at": "2025-11-25T11:33:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 205,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575220797,
          "user": "hulxv",
          "body": "> For further context: The current minimum required GCC version is 12.1 (https://github.com/bitcoin/bitcoin/blob/master/doc/dependencies.md#compiler), however `std::format` only comes with GCC libstdc++ 13.1\n\nFor that, I thought about switching first to `{fmt}` and after that, we can switch to `std::format` easily when we bump the minimum required GCC version",
          "created_at": "2025-11-25T11:38:34Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 361,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575238806,
          "user": "maflcko",
          "body": "Yes, I understand, but there are no meaningful user-visible benefits:\n\n* Performance does not matter, because formatting isn't done in hot loops\n* A few KiB of binary size don't matter, because the binary is several MiB in size\n\n",
          "created_at": "2025-11-25T11:43:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 229,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575297752,
          "user": "hulxv",
          "body": "But from the developers' view, I think having features like compile-time error-checking and easy API and [other features](https://github.com/fmtlib/fmt?tab=readme-ov-file#features) will be helpful to have. At least it will make it a little bit easier. Maybe this is a little thing, but nice to have",
          "created_at": "2025-11-25T11:58:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 298,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3575329532,
          "user": "maflcko",
          "body": "There is compile-time error-checking already implemented for tinyformat in this codebase, so there is also no developer benefit of using `std::format` or `{fmt}`.",
          "created_at": "2025-11-25T12:06:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 162,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4048,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3626271352,
      "number": 33873,
      "title": "guix build fails on RISC-V due to python-py-cpuinfo test failure",
      "body": "i'm trying to do a guix build (of the master branch) on RISC-V hardware. The device is a [Scaleway EM-RV1-C4M16S128-A](https://labs.scaleway.com/en/em-rv1/) server from Scaleway. It has a four core T-HEAD C910 CPU:\n\n```\nArchitecture:          riscv64\n  Byte Order:          Little Endian\nCPU(s):                4\n  On-line CPU(s) list: 0-3\n```\n\n```\nprocessor       : 0\nhart            : 0\nisa             : rv64imafdcsu\nmmu             : sv39\ncpu-freq        : 1.848Ghz\ncpu-icache      : 64KB\ncpu-dcache      : 64KB\ncpu-l2cache     : 1MB\ncpu-tlb         : 1024 4-ways\ncpu-cacheline   : 64Bytes\n⋮ (4 times)\n```\n\nHowever, it fails in the tests of `python-py-cpuinfo` (a dependency of LIEF).\n```\nbuilding /gnu/store/gs9j7j3c0z9wph9y2ag7j60xfq0jhhnr-python-py-cpuinfo-8.0.0-1.4d6987e.drv...\n/ 'check' phasenote: keeping build directory `/tmp/guix-build-python-py-cpuinfo-8.0.0-1.4d6987e.drv-3'\nbuilder for `/gnu/store/gs9j7j3c0z9wph9y2ag7j60xfq0jhhnr-python-py-cpuinfo-8.0.0-1.4d6987e.drv' failed with exit code 1\nbuild of /gnu/store/gs9j7j3c0z9wph9y2ag7j60xfq0jhhnr-python-py-cpuinfo-8.0.0-1.4d6987e.drv failed\nView build log at '/var/log/guix/drvs/gs/9j7j3c0z9wph9y2ag7j60xfq0jhhnr-python-py-cpuinfo-8.0.0-1.4d6987e.drv.gz'.\ncannot build derivation `/gnu/store/wmcihcrlgln588v5xbk89zh05rvr2hdi-python-fastjsonschema-2.15.1.drv': 1 dependencies couldn't be built\nbuilding /gnu/store/gqr2b58a66m4gwblgprqbmp3yfnfq41c-python-pycparser-2.21.drv...\ncannot build derivation `/gnu/store/vllqd95n44lpzfpj08v5wgp61gg23dr2-python-pydantic-2.5.3.drv': 1 dependencies couldn't be built\nnote: keeping build directory `/tmp/guix-build-python-pycparser-2.21.drv-3'\ncannot build derivation `/gnu/store/a0a1wwiwdgk9mxlspkl6p5mddfsdhrkh-python-lief-0.16.6.drv': 1 dependencies couldn't be built\n```\n\nDetailed failure:\n```\n======================================================================\nFAIL: test_all (test_actual.TestActual)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/tmp/guix-build-python-py-cpuinfo-8.0.0-1.4d6987e.drv-0/source/tests/test_actual.py\", line 74, in test_all\n    self.assertTrue(len(cpuinfo._get_cpu_info_from_proc_cpuinfo()) > 0)\nAssertionError: False is not true\n\n----------------------------------------------------------------------\nRan 152 tests in 17.371s\n\nFAILED (failures=1, skipped=1)\nTest failed: <unittest.runner.TextTestResult run=152 errors=0 failures=1>\nerror: Test failed: <unittest.runner.TextTestResult run=152 errors=0 failures=1>\nerror: in phase 'check': uncaught exception:\n%exception #<&invoke-error program: \"python\" arguments: (\"-c\" \"import setuptools, tokenize;__file__='setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\\\r\\\\n', '\\\\n');f.close();exec(compile(code, __file__, 'exec'))\" \"test\") exit-status: 1 term-signal: #f stop-signal: #f> \nphase `check' failed after 19.5 seconds\ncommand \"python\" \"-c\" \"import setuptools, tokenize;__file__='setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\\\r\\\\n', '\\\\n');f.close();exec(compile(code, __file__, 'exec'))\" \"test\" failed with status 1\nbuild process 6 exited with status 256\n```",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2025-11-14T16:16:56Z",
      "updated_at": "2025-11-25T08:18:56Z",
      "closed_at": "2025-11-25T08:17:25Z",
      "comments": 17,
      "url": "https://github.com/bitcoin/bitcoin/issues/33873",
      "labels": [
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3533560301,
          "user": "hebasto",
          "body": "Which OS?\n\nI’ve found Debian to be more suitable for RISC-V.\n\n(somewhat related: https://codeberg.org/guix/guix/issues/3852)",
          "created_at": "2025-11-14T16:27:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 124,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3533735681,
          "user": "laanwj",
          "body": "It's debian (Debian GNU/Linux forky/sid). Intentially chose that because i assumed it would be least hassle 😄 \n\nLooks like the package is defined in\n```\n/home/guix-build/.cache/guix/checkouts/lmgz3ewobtxzz4rsyp72z7woeuxeghzyukvmmnxlwpobu76yyi5a/gnu/packages/python-xyz.scm\n```\nWould it be possible to patch it to disable the tests, like with openssl?",
          "created_at": "2025-11-14T17:07:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 350,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3533900033,
          "user": "laanwj",
          "body": "i patched all versions of `python-xyz.scm` on the system (not sure how to determine which exactly i need to) with this:\n```patch\ndiff --git a/gnu/packages/python-xyz.scm b/gnu/packages/python-xyz.scm\nindex cba99cce62..7d91059365 100644\n--- a/gnu/packages/python-xyz.scm\n+++ b/gnu/packages/python-xyz.scm\n@@ -31650,6 +31650,7 @@ (define-public python-py-cpuinfo\n           (base32\n            \"0h5wi1bfcqqr1x3j1pa7dmkx7siprsyksbsy80fl2sdrrgpji0b0\"))))\n       (build-system python-build-system)\n+      (arguments (list #:tests? #false))\n       (home-page \"https://github.com/workhorsy/py-cpuinfo\")\n       (synopsis \"Get CPU info with Python\")\n       (description\n```\nThis seems to have worked to get past it.",
          "created_at": "2025-11-14T17:51:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 706,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3541894978,
          "user": "maflcko",
          "body": "I presume the same fails upstream, without guix: https://github.com/workhorsy/py-cpuinfo/blame/f3f0fec58335b9699b9b294267c15f516045b1fe/tests/test_actual.py#L74\n\nThough, upsteam is unmaintained, so i am not sure what can be done here.",
          "created_at": "2025-11-17T13:41:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 234,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3542166449,
          "user": "laanwj",
          "body": "Right! i could take a look at fixing this upstream.\n\nFrom a high level perspective, i don't quite understand why a cpuinfo module would be needed for deterministic cross-compiling in the first place. Nor why it'd run tests that depend on local CPU configuration. But i guess it's some deeper nested dependency that gets pulled in unconditionally (through LIEF in this case?). GUIX sadly has more of those, basically same complaint as in #30042.",
          "created_at": "2025-11-17T14:34:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 444,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3542218159,
          "user": "maflcko",
          "body": "Yeah, if it is pulled in through LIEF, it could make sense to strip the unmaintained dependency from LIEF upstream.",
          "created_at": "2025-11-17T14:43:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 115,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3542936019,
          "user": "hebasto",
          "body": "> Yeah, if it is pulled in through LIEF, it could make sense to strip the unmaintained dependency from LIEF upstream.\n\nFWIW:\n```\n# guix graph --path python-lief python-py-cpuinfo\npython-lief@0.17.1\npython-pydantic@2.10.4\npython-pytest-benchmark@5.1.0\npython-py-cpuinfo@9.0.0\n```\n\n (guix checked out at a different commit though)",
          "created_at": "2025-11-17T16:58:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 328,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3543162626,
          "user": "hebasto",
          "body": "> i'm trying to do a guix build (of the master branch) on RISC-V hardware. The device is a [Scaleway EM-RV1-C4M16S128-A](https://labs.scaleway.com/en/em-rv1/) server from Scaleway.\n\nIt builds fine for me on an instance from the same provider:\n```\n# guix describe\nGeneration 3\tNov 17 2025 17:45:37\t(current)\n  guix 5cb84f2\n    repository URL: https://git.guix.gnu.org/guix.git\n    commit: 5cb84f2013c5b1e48a7d0e617032266f1e6059e2\n# guix build python-py-cpuinfo\n/gnu/store/v09j8kcdxci3nbrjrqz7gik0sf5rm3dx-python-py-cpuinfo-8.0.0-1.4d6987e\n```",
          "created_at": "2025-11-17T17:51:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 541,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3546355023,
          "user": "laanwj",
          "body": "> It builds fine for me on an instance from the same provider:\n\nOkay, now i'm confused. What operating system? Also debian forky/sid?\n\nIt could be that they got me a faulty server? i can't imagine having done anything wrong here, just followed basic GUIX build steps.",
          "created_at": "2025-11-18T09:09:25Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 267,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3546364000,
          "user": "laanwj",
          "body": "Looks like it stopped an error in the `-rust-1.65.0.drv.gz` build this night. The \"faulty server\" hypothesis definitely *not* disproven 😄  Why do i always have this little luck with RISC-V devices lol.\n```\n...\npatch-cargo-checksums: generate-checksums for vendor/winapi\npatch-cargo-checksums: generate-checksums for vendor/windows-sys-0.28.0\npatch-cargo-checksums: generate-checksums for vendor/windows-sys\npatch-cargo-checksums: generate-checksums for vendor/windows_aarch64_msvc-0.28.0\nFatal glibc error: pthread_mutex_lock.c:94 (___pthread_mutex_lock): assertion failed: mutex->__data.__owner == 0\nbuild process 6 exited with status 6\n```",
          "created_at": "2025-11-18T09:11:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 641,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3546510385,
          "user": "hebasto",
          "body": "> > It builds fine for me on an instance from the same provider:\n> \n> Okay, now i'm confused. What operating system? Also debian forky/sid?\n\nYes, debian forky/sid.",
          "created_at": "2025-11-18T09:43:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 163,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3546710178,
          "user": "laanwj",
          "body": "Could also be a kernel bug:\n```\n[155604.743750] BUG: using smp_processor_id() in preemptible [00000000] code: guile/662593\n[155604.751799] caller is debug_smp_processor_id+0x20/0x2a\n[155604.757101] CPU: 3 PID: 662593 Comm: guile Not tainted 5.10.113-scw1 #1\n[155604.763806] Call Trace:\n[155604.766349] [<ffffffe0002040f0>] walk_stackframe+0x0/0x112\n[155604.771928] [<ffffffe000fcd022>] show_stack+0x46/0x62\n[155604.777075] [<ffffffe000fd6be2>] dump_stack_lvl+0x7a/0x9a\n[155604.782567] [<ffffffe000fd6c1a>] dump_stack+0x18/0x20\n[155604.787716] [<ffffffe000fe3aba>] check_preemption_disabled+0xb4/0xb6\n[155604.794163] [<ffffffe000fe3adc>] debug_smp_processor_id+0x20/0x2a\n[155604.800352] [<ffffffe000feb818>] kprobe_breakpoint_handler+0x36/0x202\n[155604.806887] [<ffffffe000204080>] do_trap_break+0x3a/0x8e\n[155604.812293] [<ffffffe000201e4c>] ret_from_exception+0x0/0xc\n[155604.817956] CPU: 3 PID: 662593 Comm: guile Not tainted 5.10.113-scw1 #1\n[155604.824659] epc: 0000003ff7b26262 ra : 0000003ff7b26256 sp : 0000003fca5b89e0\n[155604.831884]  gp : 0000000000014800 tp : 0000003fca5ba8e0 t0 : 0000000000001000\n[155604.839194]  t1 : 0000000000000030 t2 : 00000000000003ff s0 : 0000003ff7c1bbf8\n[155604.846505]  s1 : 0000003ff7c1bbf8 a0 : 0000000000000000 a1 : 000000000000000a\n[155604.853816]  a2 : 0000000000000006 a3 : 0000000000000000 a4 : 0000000000000004\n[155604.861125]  a5 : 0000000000000005 a6 : 0000000000000000 a7 : 0000000000000083\n[155604.868436]  s2 : 0000003fca5ba180 s3 : 0000003ff7fda000 s4 : 0000000000000000\n[155604.875745]  s5 : 0000003fca5b8b40 s6 : 0000003fca5b8b40 s7 : 0000000000000008\n[155604.883057]  s8 : 0000000000000071 s9 : 0000003ff7fd6000 s10: 0000000000000004\n[155604.890368]  s11: 0000000000000004 t3 : 0000003ff7b66b5e t4 : 0000003ff7fda060\n[155604.897678]  t5 : 0000003ff7ae0000 t6 : 0000000000000004\n[155604.903079] status: 0000000200004020 badaddr: 0000000000000000 cause: 0000000000000003\n[155604.911085] End Trace.\n[155604.913611] BUG: using __this_cpu_read() in preemptible [00000000] code: guile/662593\n[155604.921578] caller is __this_cpu_preempt_check+0x1a/0x22\n```\n\nWhich kernel are you running? `5.10.113-scw1` here.\n(Apparently released `Wed, 27 Apr 2022`. That's ancient especially in RISC-V land! Going to report this to Scaleway.)\n",
          "created_at": "2025-11-18T10:19:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2279,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3546810258,
          "user": "hebasto",
          "body": "> Which kernel are you running? `5.10.113-scw1` here. (Apparently released `Wed, 27 Apr 2022`. That's ancient especially in RISC-V land!)\n\n```\n# uname -srv\nLinux 5.10.113-scw1 #1 SMP PREEMPT Fri Jul 12 15:31:22 UTC 2024\n```",
          "created_at": "2025-11-18T10:35:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 223,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3547137380,
          "user": "hebasto",
          "body": "> > Which kernel are you running? `5.10.113-scw1` here. (Apparently released `Wed, 27 Apr 2022`. That's ancient especially in RISC-V land!)\n> \n> ```\n> # uname -srv\n> Linux 5.10.113-scw1 #1 SMP PREEMPT Fri Jul 12 15:31:22 UTC 2024\n> ```\n\nI've just checked out Fedora 40:\n```\n# uname -srv\nLinux 5.10.113-scw1 #1 SMP PREEMPT Mon Jul 15 10:10:04 UTC 2024\n```",
          "created_at": "2025-11-18T11:33:08Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 354,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3547626871,
          "user": "laanwj",
          "body": "> Linux 5.10.113-scw1 #1 SMP PREEMPT Mon Jul 15 10:10:04 UTC 2024\n\nIt looks like the kernel is fixed and provided externally. It doesn't actually use one from the distro.\n(Might be a SoC with no upstream kernel support in the first place, so they're stuck at this version. That's on the course for embedded systems, sadly)\n\nAnyhow if you never came across this problem on any of the other servers with the same SoC, it's probably a problem with this specific server.\n\n(i restarted the build and it's now building again, but i suspect it's a matter of time before it happens again)",
          "created_at": "2025-11-18T13:19:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 580,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3556124760,
          "user": "laanwj",
          "body": "Another faliure, this time in `rust-1.75.0.drv.gz`:\n```\nmalloc(): unaligned fastbin chunk detected\nbuild process 6 exited with status 6\n```\n\nin `-rust-1.82.0.drv.gz`\n```\ncorrupted double-linked list\nrustc exited with signal: 6 (SIGABRT)\nerror: could not compile `cargo` (lib)\n```\n\n(memory corruption?)",
          "created_at": "2025-11-20T06:25:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 301,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3574292725,
          "user": "laanwj",
          "body": "Clearly a hardware issue, closing.",
          "created_at": "2025-11-25T08:18:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 34,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3247,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3660643004,
      "number": 33941,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "jdavidthomson",
      "created_at": "2025-11-24T21:50:36Z",
      "updated_at": "2025-11-24T21:50:48Z",
      "closed_at": "2025-11-24T21:50:45Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33941",
      "labels": [],
      "comment_data": [
        {
          "id": 3572862033,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission primarily promotes an external product and presents a vague, non-technical idea rather than a clear, actionable feature request relevant to the project. It includes an external commercial link and lacks coherent technical detail or reproducible proposal for the repository, which matches common spam characteristics.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-11-24T21:50:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 600,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1959828375,
      "number": 28722,
      "title": "Multiprocess tracking issue",
      "body": "This issue will be updated to reflect the current state of bitcoin core [multiprocess support](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md).\n\n---\n\nPRs for review related to building & releasing:\n\n- [ ] #33623\n- [ ] #33774\n- [ ] #33795\n- [ ] #32387\n- [ ] Upstream [libmultiprocess pulls](https://github.com/chaincodelabs/libmultiprocess/pulls)\n\nPRs for review related to mining:\n\n- [ ] #33819\n- [ ] #32420\n- [ ] #33922 \n- [ ] #33936\n- [ ] #30437\n- [ ] #33421\n\n\nPRs for review related wallet & gui & cli:\n\n- [ ] #29409\n- [ ] #10102\n- [ ] #19460\n- [ ] #19461\n- [ ] #32297\n- [ ] #32898\n\nIssues:\n\n- [ ] #32669\n- [ ] #32802\n- [ ] #33341\n- [ ] #33387\n- [ ] #33576\n- [ ] #33756\n- [ ] #33777\n- [ ] #33897\n- [ ] #33899 \n- [ ] #33923 \n- [ ] #33940\n\nPRs / issues closed:\n\n- [X] ~#10242~\n- [X] ~#10295~\n- [X] ~#10600~\n- [X] ~#10244~\n- [X] ~#10605~\n- [X] ~#14636~\n- [X] ~#14437~\n- [X] ~#14711~\n- [X] ~#15342~\n- [X] ~#15373~\n- [X] ~#15288~\n- [X] ~#15531~\n- [X] ~#10973~\n- [X] ~#16839~\n- [X] ~#17906~\n- [X] ~#18278~\n- [X] ~#16367~\n- [X] ~#17999~\n- [X] ~#18743~\n- [X] ~#18587~\n- [X] ~#18677~\n- [X] ~#20494~\n- [X] ~#20046~\n- [X] ~#21035~\n- [X] ~#21732~\n- [X] ~#19160~\n- [X] ~#22216~\n- [X] ~#22214~\n- [X] ~#22218~\n- [X] ~bitcoin-core/gui#360~\n- [X] ~#22215~\n- [X] ~#22217~\n- [X] ~#19101~\n- [X] ~#22848~\n- [X] ~#22219~\n- [X] ~#23003~\n- [X] ~#23006~\n- [X] ~#23004~\n- [X] ~#23005~\n- [X] ~#23499~\n- [X] ~#28721~\n- [X] ~#28907~\n- [X] ~#28978~\n- [X] ~#28921~\n- [X] ~#28929~\n- [X] ~#30509~\n- [X] ~#30510~\n- [X] ~#31196~\n- [X] ~#31197~\n- [X] ~#30940~\n- [X] ~#30955~\n- [X] ~#31105~\n- [X] ~#31003~\n- [X] ~#31288~\n- [X] ~#31480~\n- [X] ~#31318~\n- [X] ~#31196~\n- [X] ~#31740~\n- [X] ~#31151~\n- [X] ~#31455~\n- [X] ~#31763~\n- [X] ~#31815~\n- [X] ~#31945~\n- [X] ~#31283~\n- [X] ~#31827~\n- [X] ~#31564~\n- [X] ~#31866~\n- [X] ~#31992~\n- [X] ~#31741~\n- [X] ~#30975~\n- [X] ~#31785~\n- [X] ~#32271~\n- [X] ~#32378~\n- [X] ~#31375~\n- [X] ~#32634~\n- [X] ~#32641~\n- [X] ~#32690~ \n- [X] ~#31981~\n- [X] ~#32760~\n- [X] ~#32781~\n- [X] ~#31679~\n- [X] ~#31802~\n- [X] ~#32345~\n- [X] ~#33190~\n- [X] ~#33322~\n- [X] ~#33222~\n- [X] ~#33233~\n- [X] ~#33241~\n- [X] ~#33219~\n- [X] ~#33235~\n- [X] ~#33290~\n- [X] ~#33315~\n- [X] ~#33201~\n- [X] ~#33176~\n- [X] ~#33308~\n- [X] ~#33279~\n- [X] ~#33281~\n- [X] ~#33312~\n- [X] ~#33256~\n- [X] ~#33342~\n- [X] ~#33348~\n- [X] ~#33412~\n- [X] ~#33244~\n- [X] ~#33277~\n- [X] ~#33380~\n- [X] ~#33372~\n- [X] ~#33374~\n- [X] ~#33459~\n- [X] ~#33229~\n- [X] ~#31618~\n- [X] ~#33417~\n- [X] ~#33420~\n- [X] ~#33518~\n- [X] ~#33519~\n- [X] ~#33517~\n- [X] ~#33647~\n- [X] ~#32275~\n- [X] ~#30983~\n- [X] ~#31109~\n  - caused by #31003\n  - resolved by #31283\n- [X] ~#31756~\n- [X] ~#33439~\n- [X] ~#31098~\n- [X] ~#33749~\n- [X] ~#33445~\n- [X] ~#33676~\n- [X] ~#33575~\n- [X] ~#33745~\n- [X] ~#33511~\n- [X] ~#33554~\n- [X] ~#33884~\n- [X] ~#33880~\n- [X] ~#33890~\n- [X] ~#33463~\n\n\nLinks:\n\n* [Documentation](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md)\n* [Project board](https://github.com/bitcoin/bitcoin/projects/10)\n* [Wiki](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Process-Separation)\n* [Presentation](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit) ([code shown](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21))\n* [Working group](https://signal.group/#CjQKIJBeCC9-Jbnd_3sPDFPy7TB6ZPkW3k1J5tjwQ-IN_Gu1EhDV_4urKfbKiNIAhdblAulp)\n* [List of working groups](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Working-Groups)",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2023-10-24T18:22:37Z",
      "updated_at": "2025-11-24T19:58:13Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/28722",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 2807026958,
          "user": "sipa",
          "body": "Please let me know if this is already implemented, being discussed elsewhere, or if this is not the right place for it.\n\nWould it make sense to (not now, or even necessarily in the short term), make `bitcoin-cli` (or `bitcoin rpc`, with the wrapper binary) support IPC communication with `bitcoin-node`, which would gain an \"RPC-over-IPC\" service? Since IPC supports communication over a UNIX socket, and there has been discussion about what would be needed to make RPC support UNIX sockets, this seems like an easy way to achieve the same thing.\n\nThis cannot be a replacement for the TCP/IP-based RPC functionality, as it would lack authentication control, but enable an easy, efficient, configuration-free way of executing RPC commands?",
          "created_at": "2025-04-15T17:52:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 738,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2807250181,
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/28722#issuecomment-2807026958\n\nThis is an interesting idea. Another place to discuss it might be #5029, depending on what goal of the change is. There are links to different unix socket implementations in #5029, and according to #31194, supporting unix socket RPC calls is a top reason for wanting to drop the dependency on libevent (which is done in #32061).\n\nProbably the cleanest way to support RPCs over a unix socket would be to send JSON-RPC requests directly over the socket as discussed in the previous issues. But it would be pretty easy to implement a new IPC interface similar to the IPC mining interface which could allow `bitcoin-cli` or another client to make RPC method calls over the IPC socket. I could make a small PR to implement that if it would be interesting. The interface could be as simple as something like:\n\n```capnp\ninterface Rpc $Proxy.wrap(\"interfaces::Rpc\") {\n    callMethod @0 (context :Proxy.Context, request :Text) -> (result :Text);\n};\n```\n\nif it just passes JSON requests and responses. Though probably the interface should be more structured and use separate fields for things like wallet names and user names.\n\n> there has been discussion about what would be needed to make RPC support UNIX sockets, this seems like an easy way to achieve the same thing.\n\nYes, this should be easier to implement than other approaches. The relative downsides are that it would be more internally complicated, and more awkward to write external clients for, since it would require capnproto.\n\nEDIT: Implemented this a draft PR in #32297",
          "created_at": "2025-04-15T19:21:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1602,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3523,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1707054771,
      "number": 27634,
      "title": "BIP324 tracking issue",
      "body": "This issue will be updated to reflect the current state of [BIP324](https://github.com/bitcoin/bips/blob/master/bip-0324.mediawiki) integration.\n\nPRs ready for review:\n* #29347 \n\nOverall plan:\n* ElligatorSwift integration in Bitcoin Core (formerly 23432, 23561)\n  * [x] Dependency: Jacobi symbol support in libsecp256k1: bitcoin-core/secp256k1#979\n  * [x] Dependency: ElligatorSwift support in libsecp256k1: bitcoin-core/secp256k1#1129\n  * [x] Dependency: update libsecp256k1 subtree: currently part of 27479.\n  * [x] Main feature: #27479\n* Cipher suite implementation (formerly 25361):\n  * [x] Dependency: support for not wasting ChaCha20 stream bytes: #26153\n  * [x] Dependency: support for RFC8439 variant of ChaCha20: #27985\n  * [x] Dependency: support for incremental Poly1305 computation: #27993\n  * [x] Main feature: #28008\n  * [x] Follow-up: #28267\n  * [x] Follow-up: #28263\n* P2P v2 connection support (formerly 25361, 23233, 24545):\n  * [x] Dependency: P2P transport abstraction: #28165\n  * [x] Main feature: #28196\n  * [x] Follow up: #28433\n  * [x] Bugfix: #28489\n  * [x] Follow up: BIP change: #28525\n  * [x] Follow up: BIP change: #28577 \n  * [x] Potential follow-up: decide how to report handshake/decoy bytes in per-message stats: https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1731202211\n* P2P v2 signalling/integration (formerly 24545):\n  * [x] Main feature: #28331 \n  * [x] Follow up test: #28588\n  * [x] Follow up: make all functional tests compatible with v2: #28805\n  * [x] Potential follow-up: integrated connect/add/reconnect logic: https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1335820022\n  * [x] Potential follow-up: reuse `CNode` objects on reconnect: https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1335876277\n  * [x] Potential follow-up: use `V2Transport` for everything, dropping abstract class: https://github.com/bitcoin/bitcoin/pull/28331#discussion_r1336030845\n  * [x] Enable V2 by default: #29347 \n* BIP324 functional tests: \n   * [x] Dependency: ElligatorSwift support in functional tests: #24005\n   * [x] Dependency: Field element support in functional tests: #26222\n   * [x] Dependency: Python cryptography #28374\n   * [x] Main feature: #24748\n* P2P_V2 service flag support in DNS seeder:\n  * [x] Main feature: sipa/bitcoin-seeder#102\n\n<details><summary>Older stuff:</summary>\n\n* Prehistory:\n  * [x] CKey negation (no longer needed): #14047\n  * [x] ChaCha20 encryption: #15512\n  * [x] Poly1305 authentication: #15519 \n  * [x] Old ChaCha20Poly1305@Bitcoin cipher: #15649\n  * Preparing for multiple transport layers:\n    * [x] #16202\n    * [x] #16562\n  * Fuzz tests for various components:\n    * [x] #17771\n    * [x] #19296\n    * [x] #22029\n    * [x] #22704\n    * [x] #23806\n  * Miscellaneous fixes:\n    * [x]  #22331\n    * [x] #23271\n  * [x] ChaCha20 performance: #24946 \n\n* Superseded:\n  * #14032\n  * #14046\n  * #14049 \n  * #14050 \n  * #18242\n  * #20962\n  * #23233 \n  * #23322\n  * #23432\n  * #23441\n  * #23900\n  * #23561\n  * #24545\n  * #25361\n \n</details>",
      "state": "closed",
      "user": "sipa",
      "created_at": "2023-05-12T07:00:54Z",
      "updated_at": "2025-11-24T16:53:53Z",
      "closed_at": "2024-02-04T18:18:32Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/27634",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3048,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3656741511,
      "number": 33931,
      "title": "how to syn testnet4 data",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nBitcoin Core daemon version v30.0.0\nconfig is\n\n\ntestnet=1\nserver=1\ntxindex=1\n\n[test]                \nwallet=testwallet\nrpcbind=0.0.0.0\nrpcallowip=0.0.0.0/0\nrpcport=18332\nrpcuser=test\nrpcpassword=test\nfallbackfee=0.0001\n\nsyn is testnet3 data now\n\n### Expected behaviour\n\nsyn testnet4 data\n\n### Steps to reproduce\n\nhow to syn testnet4 data\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nversion v30.0.0\n\n### Operating system and version\n\nUbuntu24\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "dachengcheng2022",
      "created_at": "2025-11-24T01:19:05Z",
      "updated_at": "2025-11-24T07:11:53Z",
      "closed_at": "2025-11-24T07:11:53Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33931",
      "labels": [],
      "comment_data": [
        {
          "id": 3568647252,
          "user": "pinheadmz",
          "body": "use `testnet4=1`\n\nhttps://github.com/bitcoin/bitcoin/blob/a14e7b9dee9145920f93eab0254ce92942bd1e5e/share/examples/bitcoin.conf#L568-L570",
          "created_at": "2025-11-24T01:30:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 136,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 722,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3446032553,
      "number": 33463,
      "title": "`bitcoin-node` is unkillable after mining IPC connection is established",
      "body": "I'm using `bitcoin-node` from [`v30.0rc1`](https://github.com/bitcoin/bitcoin/tree/v30.0rc1) to drive my development towards Sv2 integration over the new mining IPC interface https://github.com/stratum-mining/sv2-apps/issues/39\n\nI noticed that after the first IPC connection is established, I'm unable to kill `bitcoin-node` via Ctrl+C.\n\n<img width=\"1906\" height=\"847\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/97857485-2a8a-4f03-b388-73ed27c6d1d7\" />",
      "state": "closed",
      "user": "plebhash",
      "created_at": "2025-09-23T16:58:27Z",
      "updated_at": "2025-11-24T07:03:46Z",
      "closed_at": "2025-11-24T07:03:46Z",
      "comments": 19,
      "url": "https://github.com/bitcoin/bitcoin/issues/33463",
      "labels": [],
      "comment_data": [
        {
          "id": 3324853126,
          "user": "Sjors",
          "body": "cc @ryanofsky - is the client supposed to cooperate in this killing process?",
          "created_at": "2025-09-23T16:59:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 76,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3324880657,
          "user": "plebhash",
          "body": "the Rust code is still WIP (will share later today), but FWIW, up until the ctrl+c sigterm sent to `bitcoin-node`, the interactions between my Rust code with `bitcoin-node` were:\n- one call to `createNewBlock`\n- one call to `waitTipChanged` (that hasn't been answered yet)\n- all the bootstrapping to make the above possible (bootstrap RPC system, thread client, mining client)",
          "created_at": "2025-09-23T17:08:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 376,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3324900365,
          "user": "Sjors",
          "body": "I'm not sure if `waitTipChanged` and `waitNext` can handle being interrupted before their timeouts yet, from either side. How does ctrl + c happens if you don't call `submitBlock`?",
          "created_at": "2025-09-23T17:15:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 180,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325023136,
          "user": "ryanofsky",
          "body": "> I'm not sure if `waitTipChanged` and `waitNext` can handle being interrupted before their timeouts yet, from either side\n\nThey are supposed to be handle it because they wait on `kernel_notifications.m_tip_block_cv` and `chainman.m_interrupt` which should both get signaled on shutdown.\n\nClient should also not need to do anything on shutdown and should just be disconnected.\n\nFrom the log it seems like ctrl-c is being processed, and shutdown is proceeding all the way up to the \"Shutdown down\" message, and then maybe the process is hanging? If so that's pretty interesting because there is no code after that in the Shutdown() function, and no code after that in the main() function calling Shutdown(), so it must mean there is some hang in some a destructor.\n\nMost useful thing to debug would be a stack trace, which you could get by running the process under GDB and running `thread apply all bt`. There was also another shutdown bug reported https://github.com/bitcoin/bitcoin/issues/33387 and which my suggested patch could potentially address, or at least provide some more debug information. Other things to try might be running with `-debug=ipc` to log IPC calls and trying to stop the node with `bitcoin-cli stop` to see if the effect is the same as with ctrl-c\n\n",
          "created_at": "2025-09-23T18:00:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1275,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3325050561,
          "user": "plebhash",
          "body": "I also tried with the example from https://github.com/rustaceanrob/bitcoin-ipc/tree/mining\n\nthis example only does a brief interaction with `bitcoin-node` and then exit... in other words, it doesn't sustain a connection indefinitely, like my WIP code does\n\nand killing `bitcoin-node` after these examples are finished works fine, no hanging\n\nso this seems to be related to the fact that there's an active IPC connection",
          "created_at": "2025-09-23T18:09:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 419,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3325090308,
          "user": "ryanofsky",
          "body": "Makes sense an active connection or even an active call might be required to trigger this, but it's definitely not expected behavior, and there is probably a deadlock of some kind here. Its possible the patch from #33387 could fix this, and `thread apply all bt` output from GDB would also more clearly identify the problem",
          "created_at": "2025-09-23T18:21:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 323,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3328278574,
          "user": "plebhash",
          "body": "> Most useful thing to debug would be a stack trace, which you could get by running the process under GDB and running `thread apply all bt`.\n\n@ryanofsky I'm on macOS, would a stack trace from LLDB be equally useful?\n\n> Other things to try might be running with `-debug=ipc` to log IPC calls\n\nhere's logs running with `-debug=ipc`, trying to kill it with ctrl+c, not being able to, and then actually killing via `sudo kill -9`:\n```\n./build/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\n...\n2025-09-24T12:47:23Z 0 addresses found from DNS seeds\n2025-09-24T12:47:23Z dnsseed thread exit\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server recv request  stratum-mining/stratum#1 Init.construct$Params ()\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server send response stratum-mining/stratum#1 Init.construct$Results (threadMap = <external capability>)\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server recv request  stratum-mining/stratum#2 Init.makeMining$Params (context = (thread = <external capability>))\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server post request  stratum-mining/stratum#2 {bitcoin-node-91437/2969689 (from )}\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server send response stratum-mining/stratum#2 Init.makeMining$Results (result = <external capability>)\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server recv request  stratum-mining/stratum#3 Mining.createNewBlock$Params (options = (useMempool = true, blockReservedWeight = 2000, coinbaseOutputMaxAdditionalSigops = 1))\n2025-09-24T12:47:29Z CreateNewBlock(): block weight: 804 txs: 0 fees: 0 sigops 1\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server send response stratum-mining/stratum#3 Mining.createNewBlock$Results (result = <external capability>)\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server recv request  stratum-mining/stratum#4 Mining.getTip$Params (context = (thread = <external capability>))\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server post request  stratum-mining/stratum#4 {bitcoin-node-91437/2969689 (from )}\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server send response stratum-mining/stratum#4 Mining.getTip$Results (result = (hash = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", height = 88), hasResult = true)\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server recv request  stratum-mining/stratum#5 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:47:29Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server post request  stratum-mining/stratum#5 {bitcoin-node-91437/2969689 (from )}\n^C2025-09-24T12:47:43Z tor: Thread interrupt\n2025-09-24T12:47:43Z Shutdown in progress...\n2025-09-24T12:47:43Z torcontrol thread exit\n2025-09-24T12:47:43Z mapport thread exit\n2025-09-24T12:47:43Z addcon thread exit\n2025-09-24T12:47:43Z opencon thread exit\n2025-09-24T12:47:43Z net thread exit\n2025-09-24T12:47:43Z msghand thread exit\n2025-09-24T12:47:43Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\n2025-09-24T12:47:43Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\n2025-09-24T12:47:43Z scheduler thread exit\n2025-09-24T12:47:43Z Writing 0 mempool transactions to file...\n2025-09-24T12:47:43Z Writing 0 unbroadcast transactions to file.\n2025-09-24T12:47:43Z Dumped mempool: 0.000s to copy, 0.006s to dump, 27 bytes dumped to file\n2025-09-24T12:47:43Z Flushed fee estimates to fee_estimates.dat.\n2025-09-24T12:47:43Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-09-24T12:47:43Z [ipc] {bitcoin-node-91437/b-capnp-loop-2969096} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2025-09-24T12:47:43Z Shutdown done\n^C^C^C^C^C^C^C^C^C[1]    91437 killed     ./build/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\n```\n\n> and trying to stop the node with `bitcoin-cli stop` to see if the effect is the same as with ctrl-c\n\ndoing `bitcoin-cli stop` didn't make the process hang like ctrl+c, but it forced a bunch of extra logs that seem a bit odd:\n```\n./build/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\n...\n2025-09-24T12:49:53Z dnsseed thread exit\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#1 Init.construct$Params ()\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#1 Init.construct$Results (threadMap = <external capability>)\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#2 Init.makeMining$Params (context = (thread = <external capability>))\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#2 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#2 Init.makeMining$Results (result = <external capability>)\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#3 Mining.createNewBlock$Params (options = (useMempool = true, blockReservedWeight = 2000, coinbaseOutputMaxAdditionalSigops = 1))\n2025-09-24T12:49:59Z CreateNewBlock(): block weight: 804 txs: 0 fees: 0 sigops 1\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#3 Mining.createNewBlock$Results (result = <external capability>)\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#4 Mining.getTip$Params (context = (thread = <external capability>))\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#4 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#4 Mining.getTip$Results (result = (hash = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", height = 88), hasResult = true)\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#5 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:49:59Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#5 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z tor: Thread interrupt\n2025-09-24T12:50:08Z torcontrol thread exit\n2025-09-24T12:50:08Z mapport thread exit\n2025-09-24T12:50:08Z addcon thread exit\n2025-09-24T12:50:08Z Shutdown in progress...\n2025-09-24T12:50:08Z opencon thread exit\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#5 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#6 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#6 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#6 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#7 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#7 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#7 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#8 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#8 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#8 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#9 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#9 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#9 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#10 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#10 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#10 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#11 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#11 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#11 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#12 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#12 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#12 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#13 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#13 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#13 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#14 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#14 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#14 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#15 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#15 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#15 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#16 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#16 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#16 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#17 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#17 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#17 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#18 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#18 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#18 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#19 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#19 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#19 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#20 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#20 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#20 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#21 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#21 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#21 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#22 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#22 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#22 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#23 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#23 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#23 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#24 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#24 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#24 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#25 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#25 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#25 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#26 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#26 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#26 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#27 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#27 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#27 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#28 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#28 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#28 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#29 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#29 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#29 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#30 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#30 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#30 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#31 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#31 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#31 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#32 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#32 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#32 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#33 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#33 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#33 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#34 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#34 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#34 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#35 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#35 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#35 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#36 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#36 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#36 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#37 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#37 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#37 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#38 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#38 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#38 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#39 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#39 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#39 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#40 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#40 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#40 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z net thread exit\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#41 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#41 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#41 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#42 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#42 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#42 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#43 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#43 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#43 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#44 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#44 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#44 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#45 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#45 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#45 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#46 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#46 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#46 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#47 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#47 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#47 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#48 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#48 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#48 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#49 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#49 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#49 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#50 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#50 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#50 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#51 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#51 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#51 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#52 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#52 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#52 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#53 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#53 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#53 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#54 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#54 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#54 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#55 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#55 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#55 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#56 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#56 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#56 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#6 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#6 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#6 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#58 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#58 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#58 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#59 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#59 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#59 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#60 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#60 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#60 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#61 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#61 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#61 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#62 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#62 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#62 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#63 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#63 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#63 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#64 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#64 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#64 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#65 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#65 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#65 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#66 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#66 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#66 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#67 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#67 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#67 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#5 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#5 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#5 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#69 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#69 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#69 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#70 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#70 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#70 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#71 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#71 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#71 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#72 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#72 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#72 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#73 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#73 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#73 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#74 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#74 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#74 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#75 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#75 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#75 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#76 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#76 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#76 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#77 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#77 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#77 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#78 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#78 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#78 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#79 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#79 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#79 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#80 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#80 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#80 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#81 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#81 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#81 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#82 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#82 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#82 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#83 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#83 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#83 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#84 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#84 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#84 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#85 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#85 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#85 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#86 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#86 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#86 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#87 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#87 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#87 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#88 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#88 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#88 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#89 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#89 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#89 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#90 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#90 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#90 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#91 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#91 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#91 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#92 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#92 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#92 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#93 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#93 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#93 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#94 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#94 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#94 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#95 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#95 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#95 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#96 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#96 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#96 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#97 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#97 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#97 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#98 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#98 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#98 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#99 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#99 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#99 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#100 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#100 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#100 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#101 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#101 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#101 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#102 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#102 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#102 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#103 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#103 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#103 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#104 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#104 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#104 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#4 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#4 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#4 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#106 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#106 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#106 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#2 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#2 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#2 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#13 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#13 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#13 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#14 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#14 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#14 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#15 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#15 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#15 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/sri-docs#1 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/sri-docs#1 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/sri-docs#1 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#112 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#112 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#112 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#113 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#113 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#113 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#114 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#114 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#114 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#115 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#115 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#115 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#116 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#116 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#116 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#117 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#117 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#117 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#118 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#118 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#118 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#119 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#119 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#119 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#120 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#120 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#120 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#121 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#121 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#121 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#122 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#122 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#122 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#123 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#123 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#123 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#124 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#124 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#124 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#125 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#125 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#125 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#126 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#126 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#126 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#127 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#127 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#127 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#128 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#128 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#128 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#129 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#129 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#129 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#130 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#130 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#130 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#131 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#131 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#131 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#132 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#132 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#132 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#133 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#133 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#133 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#134 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#134 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#134 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#135 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#135 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#135 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#136 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#136 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#136 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#137 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#137 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#137 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#138 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#138 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#138 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#139 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#139 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#139 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#140 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#140 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#140 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#141 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#141 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#141 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#142 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#142 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#142 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#143 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#143 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#143 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#144 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#144 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#144 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#145 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#145 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#145 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#146 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#146 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#146 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#147 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#147 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#147 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#148 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#148 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#148 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#149 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#149 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#149 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#150 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#150 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#150 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#151 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#151 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#151 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#152 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#152 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#152 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#153 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#153 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#153 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#154 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#154 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#154 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#155 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#155 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#155 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#156 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#156 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#156 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#157 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#157 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#157 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z msghand thread exit\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#158 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#158 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#158 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#159 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#159 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#159 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#160 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#160 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#160 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#161 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#161 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#161 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#162 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#162 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#162 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#163 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#163 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#163 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#164 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#164 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#164 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#165 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#165 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#165 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#166 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#166 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#166 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#167 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#167 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#167 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#168 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#168 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#168 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#169 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#169 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#169 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#170 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#170 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#170 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#171 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#171 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#171 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#172 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#172 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#172 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#173 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#173 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#173 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#174 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#174 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#174 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#175 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#175 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#175 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#176 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#176 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#176 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#177 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#177 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#177 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#178 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#178 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#178 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#179 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#179 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#179 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#180 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#180 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#180 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#181 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#181 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#181 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#182 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.00s)\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#182 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#182 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z scheduler thread exit\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#183 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#183 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z Writing 0 mempool transactions to file...\n2025-09-24T12:50:08Z Writing 0 unbroadcast transactions to file.\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#183 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#184 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#184 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#184 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#185 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#185 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#185 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#186 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#186 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#186 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#187 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#187 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#187 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#188 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#188 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#188 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#189 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#189 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#189 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z Dumped mempool: 0.000s to copy, 0.005s to dump, 27 bytes dumped to file\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#190 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#190 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#190 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#191 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#191 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#191 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#192 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#192 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#192 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#193 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#193 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#193 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#194 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#194 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#194 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#195 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#195 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#195 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#196 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#196 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#196 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#197 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#197 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#197 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#198 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#198 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#198 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#199 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#199 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#199 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z Flushed fee estimates to fee_estimates.dat.\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#200 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#200 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#200 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#201 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#201 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#201 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#202 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#202 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#202 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#203 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#203 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#203 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#204 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#204 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#204 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#205 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#205 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#205 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#206 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#206 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#206 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#207 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#207 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#207 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#208 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#208 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#208 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#209 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#209 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#209 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#210 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#210 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#210 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#211 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#211 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#211 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#212 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#212 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#212 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#213 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#213 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#213 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#214 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#214 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#214 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#215 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#215 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#215 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#216 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#216 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#216 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#217 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#217 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#217 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#218 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#218 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#218 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#219 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#219 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#219 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server recv request  stratum-mining/stratum#220 Mining.waitTipChanged$Params (context = (thread = <external capability>), currentTip = \"\\\\005x\\\\361G\\\\224\\\\340(j\\\\005\\\\335\\\\260\\\\034F[}/\\\\303\\\\365\\\\264$N\\\\347\\\\246\\\\036\\\\004~gU\\\\352\\\\231\\\\221\\\\177\", timeout = 1.7976931348623157e30...\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server post request  stratum-mining/stratum#220 {bitcoin-node-92177/2973229 (from )}\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server send response stratum-mining/stratum#220 Mining.waitTipChanged$Results ()\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages6MiningEEE\n2025-09-24T12:50:08Z Shutdown done\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} EventLoop::loop done, cancelling event listeners.\n2025-09-24T12:50:08Z [ipc] {bitcoin-node-92177/b-capnp-loop-2972687} EventLoop::loop bye.\n```",
          "created_at": "2025-09-24T12:54:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 152039,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3330050492,
          "user": "plebhash",
          "body": "after some more progress on my Rust code, I'm no longer waiting on `waitTipChanged`, since I can get away with only waiting on `waitNext`\n\nafter these changes, I'm no longer observing `bitcoin-node` being unkillable via ctrl+c.\n\nso this, plus the odd-looking logs above, make it seem that this is related to how `bitcoin-node` is dealing with `waitTipChanged` internally?",
          "created_at": "2025-09-24T17:55:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 371,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3330113600,
          "user": "ryanofsky",
          "body": "> [@ryanofsky](https://github.com/ryanofsky) I'm on macOS, would a stack trace from LLDB be equally useful?\n\nYes a stack trace from all threads after the hang happens should make the cause of the problem clear. lldb command to print that should be `thread backtrace all`. It's also good to know the problem doesn't happen with waitNext, only waitTipChanged since we can look for differences between those methods.",
          "created_at": "2025-09-24T18:13:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 413,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3330765943,
          "user": "ryanofsky",
          "body": "Have been trying to reproduce this bug in python by calling waitTipChanged followed by a shutdown but so far no luck.\n\nWith no `await asyncio.sleep` after `waitTipChanged` and before `stop_node` I get a \"peer disconnected\" error. With `await asyncio.sleep(0)` I get a \"broken pipe\" error, and with longer sleeps I see a nullopt BlockRef returned from waitTipChanged(). \n\nThese results are all expected, and I didn't see a way to make the node hang on shutdown. Changes made to interface_ipc.py are shown in the diff below.\n\nI also tried to analyze the two posted log files. The first log file shows a waitTipChanged call being made and apparently never returning when the node shuts down. There is no \"IPC server destroy\" log line for the Mining interface object in the logs, and only the Init and BlockTemplate objects are shown to be destroyed. This is consistent with the Mining.waitTipChanged method hanging somehow and never returning.\n\nThe second log file seems to show the rust client calling waitTipChanged in a loop during shutdown, and waitTipChanged returning an empty response with the [`result: Common.BlockRef`](https://github.com/bitcoin/bitcoin/blob/d41b503ae128ac36ef27e652d2935c6fe7981a79/src/ipc/capnp/mining.capnp#L19) field unset. This is expected because it just means the c++ waitTipChanged method returned nullopt during shutdown as [documented](https://github.com/bitcoin/bitcoin/blob/d41b503ae128ac36ef27e652d2935c6fe7981a79/src/interfaces/mining.h#L102). The client should probably handle this by shutting down itself.\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/test/functional/interface_ipc.py\n+++ b/test/functional/interface_ipc.py\n@@ -124,8 +124,30 @@ class IPCInterfaceTest(BitcoinTestFramework):\n             assert_equal(len(newblockref.result.hash), block_hash_size)\n             assert_equal(newblockref.result.height, current_block_height + 1)\n             self.log.debug(\"Wait for timeout\")\n-            wait = mining.result.waitTipChanged(ctx, newblockref.result.hash, timeout)\n-            oldblockref = await wait\n+\n+            async def wait_tip_changed():\n+                return await mining.result.waitTipChanged(ctx, newblockref.result.hash, timeout)\n+\n+            wait = asyncio.create_task(wait_tip_changed())\n+            #await asyncio.sleep(0)\n+            #await asyncio.sleep(0.1)\n+            self.nodes[0].stop_node()\n+            try:\n+                oldblockref = await wait\n+            except capnp.lib.capnp.KjException as e:\n+                if \"disconnected: Peer disconnected\" in e.message:\n+                    self.log.debug(\"Success: peer disconnected\")\n+                    return\n+                if \"disconnected: message = [Errno 32] Broken pipe\" in e.message:\n+                    self.log.debug(\"Success: broken pipe\")\n+                    return\n+                raise\n+\n+            if not oldblockref._has(\"result\"):\n+                self.log.debug(\"Success: waitTipChanged returned nullopt\")\n+                return\n+            raise AssertionError(f\"Expected broken pipe not {oldblockref.result=!r}\")\n+\n             assert_equal(len(newblockref.result.hash), block_hash_size)\n             assert_equal(oldblockref.result.hash, newblockref.result.hash)\n             assert_equal(oldblockref.result.height, newblockref.result.height)\n```\n</p>\n</details>\n\nSince it seems not straightforward to reproduce this problem this makes me think it could be a race condition that the patch from https://github.com/bitcoin/bitcoin/issues/33387 is more likely to fix\n",
          "created_at": "2025-09-24T21:24:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 3543,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3330793682,
          "user": "plebhash",
          "body": "still haven't found the time for the stack trace, busy with Sv2 release... apologies for that\n\nbut it's pretty much gone on my side\n\nso I'm happy if we close this, or I can also share stack trace later in case you feel it's still valuable",
          "created_at": "2025-09-24T21:37:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 238,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3334508468,
          "user": "ryanofsky",
          "body": "> can also share stack trace later in case you feel it's still valuable\n\nWould appreciate that if you get a chance. I do suspect this is related to #33387 but would be nice to have some confirmation or ideally a reliable way to reproduce.\n\nThanks for reporting the bug in any case, and if doesn't seem worth collecting more debug information, it would be ok to close this",
          "created_at": "2025-09-25T14:40:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 371,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3347520481,
          "user": "plebhash",
          "body": "@ryanofsky I don't really use `gdb` nor `lldb` on a regular basis, so I apologize if I did anything wrong. I hope the logs below are giving you the right info.\n\nHere's the sequence of steps I took:\n- do `lldb -- ./build/bin/bitcoin-node -testnet4 -ipcbind=unix`\n- inside `lldb` terminal, do `process handle -p true -s false -n false SIGINT` so that the `SIGINT` goes to the process and not to `lldb`\n- inside `lldb` terminal, do `run`\n- launch my (now outdated) Rust code that does `waitTipChanged`\n- on a new terminal, do `kill -INT $(pgrep -n bitcoin-node)` to send a `SIGINT` to `bitcoin-node`\n- on `lldb` do ctrl+c to get the terminal back\n- on `lldb` terminal do `thread backtrace all\n\n```\n➜  bitcoin git:(v30.0rc1) lldb -- ./build/bin/bitcoin-node -testnet4 -ipcbind=unix                                           \n(lldb) target create \"./build/bin/bitcoin-node\"\nCurrent executable set to '/Users/plebhash/develop/sv2-bitcoin-core/bitcoin/build/bin/bitcoin-node' (arm64).\n(lldb) settings set -- target.run-args  \"-testnet4\" \"-ipcbind=unix\"\n(lldb) process handle -p true -s false -n false SIGINT\nNAME         PASS     STOP     NOTIFY\n===========  =======  =======  =======\nSIGINT       true     false    false  \n(lldb) run\nProcess 51122 launched: '/Users/plebhash/develop/sv2-bitcoin-core/bitcoin/build/bin/bitcoin-node' (arm64)\n2025-09-29T15:02:03Z Ignoring unknown configuration value signet.sv2port\n2025-09-29T15:02:03Z Bitcoin Core version v30.0rc1 (release build)\n2025-09-29T15:02:03Z Using the 'arm_shani(1way;2way)' SHA256 implementation\n2025-09-29T15:02:03Z Default data directory /Users/plebhash/Library/Application Support/Bitcoin\n2025-09-29T15:02:03Z Using data directory /Users/plebhash/Library/Application Support/Bitcoin/testnet4\n2025-09-29T15:02:03Z Config file: /Users/plebhash/Library/Application Support/Bitcoin/bitcoin.conf\n2025-09-29T15:02:03Z Config file arg: rpcpassword=****\n2025-09-29T15:02:03Z Config file arg: rpcuser=****\n2025-09-29T15:02:03Z Config file arg: server=\"1\"\n2025-09-29T15:02:03Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:28332\"\n2025-09-29T15:02:03Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:28333\"\n2025-09-29T15:02:03Z Config file arg: [signet] debug=\"rpc\"\n2025-09-29T15:02:03Z Config file arg: [signet] debug=\"sv2\"\n2025-09-29T15:02:03Z Config file arg: [signet] loglevel=\"sv2:debug\"\n2025-09-29T15:02:03Z Config file arg: [signet] rpcpassword=****\n2025-09-29T15:02:03Z Config file arg: [signet] rpcuser=****\n2025-09-29T15:02:03Z Config file arg: [signet] server=\"1\"\n2025-09-29T15:02:03Z Config file arg: [signet] signetchallenge=\"51\"\n2025-09-29T15:02:03Z Command-line arg: ipcbind=\"unix\"\n2025-09-29T15:02:03Z Command-line arg: testnet4=\"\"\n2025-09-29T15:02:03Z Using at most 125 automatic connections (285 file descriptors available)\n2025-09-29T15:02:03Z scheduler thread start\n2025-09-29T15:02:03Z Listening for IPC requests on address unix:/Users/plebhash/Library/Application Support/Bitcoin/testnet4/node.sock\n2025-09-29T15:02:03Z Binding RPC on address ::1 port 48332\n2025-09-29T15:02:03Z Binding RPC on address 127.0.0.1 port 48332\n2025-09-29T15:02:03Z Using rpcuser/rpcpassword authentication.\n2025-09-29T15:02:03Z [warning] The use of rpcuser/rpcpassword is less secure, because credentials are configured in plain text. It is recommended that locally-run instances switch to cookie-based auth, or otherwise to use hashed rpcauth credentials. See share/rpcauth in the source directory for more information.\n2025-09-29T15:02:03Z Starting HTTP server with 16 worker threads\n2025-09-29T15:02:03Z Using wallet directory /Users/plebhash/Library/Application Support/Bitcoin/testnet4/wallets\n2025-09-29T15:02:03Z init message: Verifying wallet(s)…\n2025-09-29T15:02:03Z Using /16 prefix for IP bucketing\n2025-09-29T15:02:03Z init message: Loading P2P addresses…\n2025-09-29T15:02:03Z Loaded 23267 addresses from peers.dat  37ms\n2025-09-29T15:02:03Z init message: Loading banlist…\n2025-09-29T15:02:03Z SetNetworkActive: true\n2025-09-29T15:02:03Z Cache configuration:\n2025-09-29T15:02:03Z * Using 2.0 MiB for block index database\n2025-09-29T15:02:03Z * Using 8.0 MiB for chain state database\n2025-09-29T15:02:03Z * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n2025-09-29T15:02:03Z Script verification uses 11 additional threads\n2025-09-29T15:02:03Z Using obfuscation key for blocksdir *.dat files (/Users/plebhash/Library/Application Support/Bitcoin/testnet4/blocks): '0000000000000000'\n2025-09-29T15:02:03Z Opening LevelDB in /Users/plebhash/Library/Application Support/Bitcoin/testnet4/blocks/index\n2025-09-29T15:02:03Z Opened LevelDB successfully\n2025-09-29T15:02:03Z Using obfuscation key for /Users/plebhash/Library/Application Support/Bitcoin/testnet4/blocks/index: 0000000000000000\n2025-09-29T15:02:03Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n2025-09-29T15:02:03Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n2025-09-29T15:02:03Z init message: Loading block index…\n2025-09-29T15:02:03Z Assuming ancestors of block 000000000000000180a58e7fa3b0db84b5ea76377524894f53660d93ac839d9b have valid signatures.\n2025-09-29T15:02:03Z Setting nMinimumChainWork=00000000000000000000000000000000000000000000034a4690fe592dc49c7c\n2025-09-29T15:02:03Z Loading block index db: last block file = 77\n2025-09-29T15:02:03Z Loading block index db: last block file info: CBlockFileInfo(blocks=85, size=32007602, heights=104200...104274, time=2025-09-29...2025-09-29)\n2025-09-29T15:02:03Z Checking all blk files are present...\n2025-09-29T15:02:03Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\n2025-09-29T15:02:03Z Opening LevelDB in /Users/plebhash/Library/Application Support/Bitcoin/testnet4/chainstate\n2025-09-29T15:02:03Z Opened LevelDB successfully\n2025-09-29T15:02:03Z Using obfuscation key for /Users/plebhash/Library/Application Support/Bitcoin/testnet4/chainstate: b82ff6b27ea46612\n2025-09-29T15:02:03Z Loaded best chain: hashBestChain=00000000048587410da002f9d5c281a95ea0122b0635d8a9c063b68e962a69dc height=104274 date=2025-09-29T16:45:17Z progress=1.000000\n2025-09-29T15:02:03Z init message: Verifying blocks…\n2025-09-29T15:02:03Z Verifying last 6 blocks at level 3\n2025-09-29T15:02:03Z Verification progress: 0%\n2025-09-29T15:02:03Z Verification progress: 16%\n2025-09-29T15:02:03Z Verification progress: 33%\n2025-09-29T15:02:03Z Verification progress: 50%\n2025-09-29T15:02:03Z Verification progress: 66%\n2025-09-29T15:02:03Z Verification progress: 83%\n2025-09-29T15:02:03Z Verification progress: 99%\n2025-09-29T15:02:03Z Verification: No coin database inconsistencies in last 6 blocks (8 transactions)\n2025-09-29T15:02:03Z Block index and chainstate loaded\n2025-09-29T15:02:03Z Setting NODE_NETWORK on non-prune mode\n2025-09-29T15:02:03Z block tree size = 113609\n2025-09-29T15:02:03Z nBestHeight = 104274\n2025-09-29T15:02:03Z initload thread start\n2025-09-29T15:02:03Z mapport thread start\n2025-09-29T15:02:03Z Loading 0 mempool transactions from file...\n2025-09-29T15:02:03Z Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\n2025-09-29T15:02:03Z AddLocal([2804:1b3:6149:9f39:18f3:9d48:b408:73af]:48333,1)\n2025-09-29T15:02:03Z Discover: 2804:1b3:6149:9f39:18f3:9d48:b408:73af\n2025-09-29T15:02:03Z AddLocal([2804:1b3:6149:9f39:91a7:284f:10f5:fb42]:48333,1)\n2025-09-29T15:02:03Z Discover: 2804:1b3:6149:9f39:91a7:284f:10f5:fb42\n2025-09-29T15:02:03Z AddLocal([2804:1b3:6149:9f39:51f9:a558:1d9a:8ecf]:48333,1)\n2025-09-29T15:02:03Z torcontrol thread start\n2025-09-29T15:02:03Z Discover: 2804:1b3:6149:9f39:51f9:a558:1d9a:8ecf\n2025-09-29T15:02:03Z initload thread exit\n2025-09-29T15:02:03Z AddLocal([2804:1b3:6149:9f39:b539:4ce9:ab6f:64ed]:48333,1)\n2025-09-29T15:02:03Z Discover: 2804:1b3:6149:9f39:b539:4ce9:ab6f:64ed\n2025-09-29T15:02:03Z Bound to 127.0.0.1:48334\n2025-09-29T15:02:03Z Bound to [::]:48333\n2025-09-29T15:02:03Z Bound to 0.0.0.0:48333\n2025-09-29T15:02:03Z Loaded 0 addresses from \"anchors.dat\"\n2025-09-29T15:02:03Z 0 block-relay-only anchors will be tried for connections.\n2025-09-29T15:02:03Z init message: Starting network threads…\n2025-09-29T15:02:03Z net thread start\n2025-09-29T15:02:03Z dnsseed thread start\n2025-09-29T15:02:03Z msghand thread start\n2025-09-29T15:02:03Z init message: Done loading\n2025-09-29T15:02:03Z opencon thread start\n2025-09-29T15:02:03Z addcon thread start\n2025-09-29T15:02:03Z Waiting 300 seconds before querying DNS seeds.\n2025-09-29T15:02:04Z New outbound-full-relay v2 peer connected: version: 70016, blocks=104274, peer=0\n2025-09-29T15:02:04Z Leaving InitialBlockDownload (latching to false)\n2025-09-29T15:02:05Z New outbound-full-relay v2 peer connected: version: 70016, blocks=104274, peer=1\n2025-09-29T15:02:08Z CreateNewBlock(): block weight: 812 txs: 0 fees: 0 sigops 1\n2025-09-29T15:02:14Z P2P peers available. Skipped DNS seeding.\n2025-09-29T15:02:14Z dnsseed thread exit\n2025-09-29T15:02:35Z New outbound-full-relay v2 peer connected: version: 70016, blocks=104274, peer=2\n2025-09-29T15:02:41Z New outbound-full-relay v2 peer connected: version: 70016, blocks=104274, peer=3\n2025-09-29T15:02:42Z New outbound-full-relay v2 peer connected: version: 70016, blocks=104274, peer=4\n2025-09-29T15:02:44Z tor: Thread interrupt\n2025-09-29T15:02:44Z Shutdown in progress...\n2025-09-29T15:02:44Z mapport thread exit\n2025-09-29T15:02:44Z torcontrol thread exit\n2025-09-29T15:02:44Z addcon thread exit\n2025-09-29T15:02:44Z net thread exit\n2025-09-29T15:02:44Z msghand thread exit\n2025-09-29T15:02:47Z opencon thread exit\n2025-09-29T15:02:47Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\n2025-09-29T15:02:47Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\n2025-09-29T15:02:47Z scheduler thread exit\n2025-09-29T15:02:47Z Writing 0 mempool transactions to file...\n2025-09-29T15:02:47Z Writing 0 unbroadcast transactions to file.\n2025-09-29T15:02:47Z Dumped mempool: 0.000s to copy, 0.006s to dump, 27 bytes dumped to file\n2025-09-29T15:02:47Z Flushed fee estimates to fee_estimates.dat.\n2025-09-29T15:02:47Z Shutdown done\nProcess 51122 stopped\n* thread stratum-mining/stratum#1, name = 'b-shutoff', queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n    frame #0: 0x000000018e74f9b8 libsystem_kernel.dylib`__ulock_wait + 8\nlibsystem_kernel.dylib`:\n->  0x18e74f9b8 <+8>:  b.lo   0x18e74f9d8               ; <+40>\n    0x18e74f9bc <+12>: pacibsp \n    0x18e74f9c0 <+16>: stp    x29, x30, [sp, #-0x10]!\n    0x18e74f9c4 <+20>: mov    x29, sp\nTarget 0: (bitcoin-node) stopped.\n(lldb) thread backtrace all\n* thread stratum-mining/stratum#1, name = 'b-shutoff', queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x000000018e74f9b8 libsystem_kernel.dylib`__ulock_wait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7920b0 libsystem_pthread.dylib`_pthread_join + 608\n    frame stratum-mining/stratum#2: 0x000000018e6c1e54 libc++.1.dylib`std::__1::thread::join() + 36\n    frame stratum-mining/stratum#3: 0x000000010038cfc8 bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol() [inlined] ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=0x0000000130e05a30) at protocol.cpp:45:53 [opt]\n    frame stratum-mining/stratum#4: 0x000000010038cf8c bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=0x0000000130e05a30) at protocol.cpp:43:5 [opt]\n    frame stratum-mining/stratum#5: 0x000000010038d084 bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=<unavailable>) at protocol.cpp:43:5 [opt]\n    frame stratum-mining/stratum#6: 0x0000000100394730 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::default_delete<ipc::Protocol>::operator()[abi:v160006](this=<unavailable>, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#7: 0x0000000100394724 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::reset[abi:v160006](this=0x0000600002a9daf0, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#8: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::~unique_ptr[abi:v160006](this=0x0000600002a9daf0) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#9: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::~unique_ptr[abi:v160006](this=0x0000600002a9daf0) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#10: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n    frame stratum-mining/stratum#11: 0x00000001003946f4 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n    frame stratum-mining/stratum#12: 0x00000001003946f4 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n    frame stratum-mining/stratum#13: 0x000000010000ba00 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::default_delete<interfaces::Ipc>::operator()[abi:v160006](this=<unavailable>, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#14: 0x000000010000b9f4 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::reset[abi:v160006](this=0x000060000249ea50, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#15: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::~unique_ptr[abi:v160006](this=0x000060000249ea50) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#16: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::~unique_ptr[abi:v160006](this=0x000060000249ea50) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#17: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n    frame stratum-mining/stratum#18: 0x000000010000b9dc bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n    frame stratum-mining/stratum#19: 0x000000010000b9dc bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n    frame stratum-mining/stratum#20: 0x0000000100008168 bitcoin-node`main [inlined] std::__1::default_delete<interfaces::Init>::operator()[abi:v160006](this=0x000000016fdfeae8, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#21: 0x000000010000815c bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::reset[abi:v160006](this=0x000000016fdfeae8, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#22: 0x0000000100008150 bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::~unique_ptr[abi:v160006](this=0x000000016fdfeae8) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#23: 0x0000000100008150 bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::~unique_ptr[abi:v160006](this=0x000000016fdfeae8) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#24: 0x0000000100008150 bitcoin-node`main(argc=<unavailable>, argv=<unavailable>) at bitcoind.cpp:290:1 [opt]\n    frame stratum-mining/stratum#25: 0x000000018e3eeb98 dyld`start + 6076\n  thread stratum-mining/stratum#3, name = 'b-capnp-loop'\n    frame #0: 0x000000018e753d04 libsystem_kernel.dylib`kevent + 8\n    frame stratum-mining/stratum#1: 0x000000010152ce70 libkj-async.1.0.2.dylib`kj::UnixEventPort::doKqueueWait(timespec*) + 76\n    frame stratum-mining/stratum#2: 0x000000010152d470 libkj-async.1.0.2.dylib`kj::UnixEventPort::wait() + 144\n    frame stratum-mining/stratum#3: 0x000000010151f46c libkj-async.1.0.2.dylib`kj::EventLoop::wait() + 40\n    frame stratum-mining/stratum#4: 0x000000010151faa8 libkj-async.1.0.2.dylib`kj::_::waitImpl(kj::Own<kj::_::PromiseNode, kj::_::PromiseDisposer>&&, kj::_::ExceptionOrValue&, kj::WaitScope&, kj::SourceLocation) + 528\n    frame stratum-mining/stratum#5: 0x00000001005ffab0 bitcoin-node`kj::Promise<unsigned long>::wait(this=<unavailable>, waitScope=<unavailable>, location=(fileName = \"ipc/libmultiprocess/src/mp/proxy.cpp\", function = \"loop\", lineNumber = 231, columnNumber = 35)) at async-inl.h:1357:3 [opt]\n    frame stratum-mining/stratum#6: 0x00000001005ff344 bitcoin-node`mp::EventLoop::loop(this=0x0000000130e05a48) at proxy.cpp:231:68 [opt]\n    frame stratum-mining/stratum#7: 0x000000010038db10 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(this=0x000060000249ece8)::'lambda'()::operator()() const at protocol.cpp:96:21 [opt]\n    frame stratum-mining/stratum#8: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] decltype(std::declval<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>()()) std::__1::__invoke[abi:v160006]<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__f=0x000060000249ece8) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#9: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#10: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(__vp=0x000060000249ece0) at thread:299:5 [opt]\n    frame stratum-mining/stratum#11: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n  thread stratum-mining/stratum#38\n    frame #0: 0x000000018e7513cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7900e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame stratum-mining/stratum#2: 0x000000018e6c0300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame stratum-mining/stratum#3: 0x0000000100173cfc bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000600001198110, __lk=0x000000017134e750, __d=<unavailable>) at __mutex_base:0 [opt]\n    frame stratum-mining/stratum#4: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] void std::__1::condition_variable::__do_timed_wait<std::__1::chrono::steady_clock>(this=0x0000600001198110, __lk=0x000000017134e750, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x25) at __mutex_base:514:5 [opt]\n    frame stratum-mining/stratum#5: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000000l>>>(this=0x0000600001198110, __lk=0x000000017134e750, __t=<unavailable>) at __mutex_base:417:5 [opt]\n    frame stratum-mining/stratum#6: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000000l>>, node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&)::$_3>(this=0x0000600001198110, __lk=0x000000017134e750, __t=<unavailable>, __pred=<unavailable>) at __mutex_base:429:13 [opt]\n    frame stratum-mining/stratum#7: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(chainman=0x0000000131808200, kernel_notifications=0x00006000011980c0, current_tip=0x000000017134e8c0, timeout=0x000000017134e800) at miner.cpp:571:45 [opt]\n    frame stratum-mining/stratum#8: 0x0000000100167f34 bitcoin-node`node::(anonymous namespace)::MinerImpl::waitTipChanged(this=<unavailable>, current_tip=uint256 @ 0x000000017134e8c0, timeout=(__rep_ = 3155695200000)) at interfaces.cpp:957:16 [opt]\n    frame stratum-mining/stratum#9: 0x000000010040c4cc bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::TypeList<>, uint256&&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&&) const [inlined] decltype(auto) mp::ProxyMethodTraits<ipc::capnp::messages::Mining::WaitTipChangedParams, void>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(server_context=0x000000017134eb30, args=<unavailable>, args=<unavailable>) at proxy.h:288:16 [opt]\n    frame stratum-mining/stratum#10: 0x000000010040c4a4 bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::TypeList<>, uint256&&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&&) const [inlined] decltype(auto) mp::ServerCall::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(this=<unavailable>, server_context=0x000000017134eb30, (null)=<unavailable>, args=<unavailable>, args=<unavailable>) const at proxy-types.h:448:16 [opt]\n    frame stratum-mining/stratum#11: 0x000000010040c4a4 bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(this=0x0000600002ab832c, server_context=0x000000017134eb30, (null)=<unavailable>, args=<unavailable>, args=<unavailable>) const at proxy-types.h:471:33 [opt]\n    frame stratum-mining/stratum#12: 0x000000010040c408 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::Timeout, 1>, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<>, uint256>((null)=<unavailable>, (null)=<unavailable>, server_context=0x000000017134eb30, fn=0x0000600002ab832c, args=0x000000017134ea70, args=0x000000017134eaa0) at proxy-types.h:307:8 [opt]\n    frame stratum-mining/stratum#13: 0x000000010040c17c bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::CurrentTip, 17>, uint256, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(mp::Priority<0>, mp::TypeList<uint256>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>&&) [inlined] decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>, uint256>(this=0x0000600002ab832c, server_context=0x000000017134eb30, (null)=<unavailable>, args=0x000000017134eaa0) const at proxy-types.h:539:16 [opt]\n    frame stratum-mining/stratum#14: 0x000000010040c168 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::CurrentTip, 17>, uint256, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>((null)=<unavailable>, (null)=<unavailable>, server_context=0x000000017134eb30, fn=0x0000600002ab832c, args=0x000000017134eb80) at proxy-types.h:307:8 [opt]\n    frame stratum-mining/stratum#15: 0x000000010040b8e0 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(mp::Priority<1>, mp::TypeList<>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>> const&, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>&&)::'lambda'()::operator()() [inlined] decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(this=<unavailable>, server_context=0x000000017134eb30, (null)=<unavailable>) const at proxy-types.h:539:16 [opt]\n    frame stratum-mining/stratum#16: 0x000000010040b8d4 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(this=0x0000600002ab8308)::'lambda'()::operator()() at type-context.h:116:24 [opt]\n    frame stratum-mining/stratum#17: 0x000000010039dcb4 bitcoin-node`void mp::Unlock<std::__1::unique_lock<std::__1::mutex>, kj::Function<void ()>&>(std::__1::unique_lock<std::__1::mutex>&, kj::Function<void ()>&) [inlined] kj::Function<void ()>::operator()(this=0x000000017134ef20) at function.h:119:12 [opt]\n    frame stratum-mining/stratum#18: 0x000000010039dca4 bitcoin-node`void mp::Unlock<std::__1::unique_lock<std::__1::mutex>, kj::Function<void ()>&>(lock=0x000000017134ef40, callback=0x000000017134ef20) at util.h:198:5 [opt]\n    frame stratum-mining/stratum#19: 0x00000001006036b4 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) at proxy-io.h:306:17 [opt]\n    frame stratum-mining/stratum#20: 0x0000000100603690 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void std::__1::condition_variable::wait<void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'()>(std::__1::unique_lock<std::__1::mutex>&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'())::'lambda'()>(this=0x000060000168c0d0, __lk=0x000000017134ef40, __pred=<unavailable>) at __mutex_base:399:13 [opt]\n    frame stratum-mining/stratum#21: 0x0000000100603690 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'()>(this=0x000060000168c090, lock=0x000000017134ef40, pred=<unavailable>) at proxy-io.h:297:14 [opt]\n    frame stratum-mining/stratum#22: 0x0000000100603678 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()(this=<unavailable>) const at proxy.cpp:404:34 [opt]\n    frame stratum-mining/stratum#23: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] decltype(std::declval<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>()()) std::__1::__invoke[abi:v160006]<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>(__f=<unavailable>) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#24: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>(__t=<unavailable>, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#25: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(__vp=<unavailable>) at thread:299:5 [opt]\n    frame stratum-mining/stratum#26: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n  thread stratum-mining/stratum#39\n    frame #0: 0x000000018e7513cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7900e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame stratum-mining/stratum#2: 0x000000018e6c0268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame stratum-mining/stratum#3: 0x0000000100601ab0 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] mp::EventLoop::startAsyncThread()::$_7::operator()(this=<unavailable>) const at proxy.cpp:296:22 [opt]\n    frame stratum-mining/stratum#4: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] decltype(std::declval<mp::EventLoop::startAsyncThread()::$_7>()()) std::__1::__invoke[abi:v160006]<mp::EventLoop::startAsyncThread()::$_7>(__f=<unavailable>) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#5: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>(__t=<unavailable>, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#6: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(__vp=<unavailable>) at thread:299:5 [opt]\n    frame stratum-mining/stratum#7: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n(lldb) \n```",
          "created_at": "2025-09-29T15:05:57Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 39650,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3348090942,
          "user": "ryanofsky",
          "body": "Thanks! Output from LLDB shows what the problem is and suggests this should be fixed by the patch in #33387, which I will go ahead and make into a PR.\n\nIn the stack trace (which I annotated below):\n\n- Thread 1 is the bitcoin node main thread, and it is just waiting for the IPC event loop thread to exit.\n- Thread 3 is IPC event loop thread, and it is idle waiting for new I/O events.\n- Thread 38 is an IPC worker thread calling `WaitTipChanged`, which is stuck calling `kernel_notifications.m_tip_block_cv.wait_until()` waiting for shutdown to be signaled or the chain tip to change. This shows buggy behavior, because by this point thread 1 will have already destroyed the kernel notification and `m_tip_block_cv` objects.\n- Thread 39 is the IPC asynchronous cleanup thread and it is just idle, waiting for new cleanup callbacks to be added or for the event loop to exit.\n\nThe patch in #33387 should fix the problem with thread 38 using objects already destroyed by thread 1, by making the `disconnectIncoming()` call in Thread 1 wait for thread 38 to exit before proceeding further with shutdown. (Specifically, `disconnectIncoming` will delete the IPC server `mp::Connection` object associated with the client, and destroy the `ProxyServer<Thread>` object, waiting for the worker thread to exit in that destructor.)\n\nI am still unsure why I couldn't reproduce this problem with the python tests I tried to write https://github.com/bitcoin/bitcoin/issues/33463#issuecomment-3330765943, and also why the problem did not seem to happen when you called stop RPC instead of using ctrl-c. I was looking more closely at shutdown code and think it may have to do with ctrl-c handler `HandleSIGTERM` only triggering the `g_shutdown` shutdown signal, not triggering `m_tip_block_cv` as the `stop` RPC seems to do via the `NodeContext::shutdown_request` callback. Knowing this could help write a test to reproduce the problem, which would be good because even if I think the patch in #33387 fixes it, it would be good to have confirmation.\n\n<details><summary>annotated stack trace</summary>\n<p>\n\n```c++\n============================================================\n============================================================\n* thread stratum-mining/stratum#1, name = 'b-shutoff', queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x000000018e74f9b8 libsystem_kernel.dylib`__ulock_wait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7920b0 libsystem_pthread.dylib`_pthread_join + 608\n    frame stratum-mining/stratum#2: 0x000000018e6c1e54 libc++.1.dylib`std::__1::thread::join() + 36\n    frame stratum-mining/stratum#3: 0x000000010038cfc8 bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol() [inlined] ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=0x0000000130e05a30) at protocol.cpp:45:53 [opt]\n    frame stratum-mining/stratum#4: 0x000000010038cf8c bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=0x0000000130e05a30) at protocol.cpp:43:5 [opt]\n    frame stratum-mining/stratum#5: 0x000000010038d084 bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::~CapnpProtocol(this=<unavailable>) at protocol.cpp:43:5 [opt]\n\n    42      ~CapnpProtocol() noexcept(true)\n    43      {\n    44          m_loop_ref.reset();\n>   45          if (m_loop_thread.joinable()) m_loop_thread.join();\n    46          assert(!m_loop);\n    47      };\n\n    frame stratum-mining/stratum#6: 0x0000000100394730 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::default_delete<ipc::Protocol>::operator()[abi:v160006](this=<unavailable>, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#7: 0x0000000100394724 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::reset[abi:v160006](this=0x0000600002a9daf0, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#8: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::~unique_ptr[abi:v160006](this=0x0000600002a9daf0) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#9: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] std::__1::unique_ptr<ipc::Protocol, std::__1::default_delete<ipc::Protocol>>::~unique_ptr[abi:v160006](this=0x0000600002a9daf0) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#10: 0x0000000100394718 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n    frame stratum-mining/stratum#11: 0x00000001003946f4 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl() [inlined] ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n    frame stratum-mining/stratum#12: 0x00000001003946f4 bitcoin-node`ipc::(anonymous namespace)::IpcImpl::~IpcImpl(this=0x0000600002a9dad0) at interfaces.cpp:52:7 [opt]\n\n    52  class IpcImpl : public interfaces::Ipc\n    53  {\n    54  public:\n   ...\n>  125      std::unique_ptr<Protocol> m_protocol;\n\n    frame stratum-mining/stratum#13: 0x000000010000ba00 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::default_delete<interfaces::Ipc>::operator()[abi:v160006](this=<unavailable>, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#14: 0x000000010000b9f4 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::reset[abi:v160006](this=0x000060000249ea50, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#15: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::~unique_ptr[abi:v160006](this=0x000060000249ea50) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#16: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] std::__1::unique_ptr<interfaces::Ipc, std::__1::default_delete<interfaces::Ipc>>::~unique_ptr[abi:v160006](this=0x000060000249ea50) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#17: 0x000000010000b9e8 bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n    frame stratum-mining/stratum#18: 0x000000010000b9dc bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit() [inlined] init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n    frame stratum-mining/stratum#19: 0x000000010000b9dc bitcoin-node`init::(anonymous namespace)::BitcoinNodeInit::~BitcoinNodeInit(this=0x000060000249ea40) at bitcoin-node.cpp:21:7 [opt]\n\n    21  class BitcoinNodeInit : public interfaces::Init\n    22  {\n    23  public:\n   ...\n>   42      std::unique_ptr<interfaces::Ipc> m_ipc;\n\n    frame stratum-mining/stratum#20: 0x0000000100008168 bitcoin-node`main [inlined] std::__1::default_delete<interfaces::Init>::operator()[abi:v160006](this=0x000000016fdfeae8, __ptr=<unavailable>) const at unique_ptr.h:65:5 [opt]\n    frame stratum-mining/stratum#21: 0x000000010000815c bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::reset[abi:v160006](this=0x000000016fdfeae8, __p=0x0000000000000000) at unique_ptr.h:297:7 [opt]\n    frame stratum-mining/stratum#22: 0x0000000100008150 bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::~unique_ptr[abi:v160006](this=0x000000016fdfeae8) at unique_ptr.h:263:75 [opt]\n    frame stratum-mining/stratum#23: 0x0000000100008150 bitcoin-node`main [inlined] std::__1::unique_ptr<interfaces::Init, std::__1::default_delete<interfaces::Init>>::~unique_ptr[abi:v160006](this=0x000000016fdfeae8) at unique_ptr.h:263:73 [opt]\n    frame stratum-mining/stratum#24: 0x0000000100008150 bitcoin-node`main(argc=<unavailable>, argv=<unavailable>) at bitcoind.cpp:290:1 [opt]\n    frame stratum-mining/stratum#25: 0x000000018e3eeb98 dyld`start + 6076\n============================================================\n============================================================\n  thread stratum-mining/stratum#3, name = 'b-capnp-loop'\n    frame #0: 0x000000018e753d04 libsystem_kernel.dylib`kevent + 8\n    frame stratum-mining/stratum#1: 0x000000010152ce70 libkj-async.1.0.2.dylib`kj::UnixEventPort::doKqueueWait(timespec*) + 76\n    frame stratum-mining/stratum#2: 0x000000010152d470 libkj-async.1.0.2.dylib`kj::UnixEventPort::wait() + 144\n    frame stratum-mining/stratum#3: 0x000000010151f46c libkj-async.1.0.2.dylib`kj::EventLoop::wait() + 40\n    frame stratum-mining/stratum#4: 0x000000010151faa8 libkj-async.1.0.2.dylib`kj::_::waitImpl(kj::Own<kj::_::PromiseNode, kj::_::PromiseDisposer>&&, kj::_::ExceptionOrValue&, kj::WaitScope&, kj::SourceLocation) + 528\n    frame stratum-mining/stratum#5: 0x00000001005ffab0 bitcoin-node`kj::Promise<unsigned long>::wait(this=<unavailable>, waitScope=<unavailable>, location=(fileName = \"ipc/libmultiprocess/src/mp/proxy.cpp\", function = \"loop\", lineNumber = 231, columnNumber = 35)) at async-inl.h:1357:3 [opt]\n    frame stratum-mining/stratum#6: 0x00000001005ff344 bitcoin-node`mp::EventLoop::loop(this=0x0000000130e05a48) at proxy.cpp:231:68 [opt]\n\n   230      for (;;) {\n>  231          const size_t read_bytes = wait_stream->read(&buffer, 0, 1).wait(m_io_context.waitScope);\n   232          if (read_bytes != 1) throw std::logic_error(\"EventLoop wait_stream closed unexpectedly\");\n\n    frame stratum-mining/stratum#7: 0x000000010038db10 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(this=0x000060000249ece8)::'lambda'()::operator()() const at protocol.cpp:96:21 [opt]\n\n    87      void startLoop(const char* exe_name)\n    88      {\n    89          if (m_loop) return;\n    90          std::promise<void> promise;\n    91          m_loop_thread = std::thread([&] {\n    92              util::ThreadRename(\"capnp-loop\");\n    93              m_loop.emplace(exe_name, &IpcLogFn, &m_context);\n    94              m_loop_ref.emplace(*m_loop);\n    95              promise.set_value();\n>   96              m_loop->loop();\n    97              m_loop.reset();\n    98          });\n    99          promise.get_future().wait();\n   100      }\n\n    frame stratum-mining/stratum#8: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] decltype(std::declval<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>()()) std::__1::__invoke[abi:v160006]<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__f=0x000060000249ece8) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#9: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#10: 0x000000010038da6c bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(__vp=0x000060000249ece0) at thread:299:5 [opt]\n    frame stratum-mining/stratum#11: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n============================================================\n============================================================\n  thread stratum-mining/stratum#38\n    frame #0: 0x000000018e7513cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7900e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame stratum-mining/stratum#2: 0x000000018e6c0300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame stratum-mining/stratum#3: 0x0000000100173cfc bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000600001198110, __lk=0x000000017134e750, __d=<unavailable>) at __mutex_base:0 [opt]\n    frame stratum-mining/stratum#4: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] void std::__1::condition_variable::__do_timed_wait<std::__1::chrono::steady_clock>(this=0x0000600001198110, __lk=0x000000017134e750, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x25) at __mutex_base:514:5 [opt]\n    frame stratum-mining/stratum#5: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000000l>>>(this=0x0000600001198110, __lk=0x000000017134e750, __t=<unavailable>) at __mutex_base:417:5 [opt]\n    frame stratum-mining/stratum#6: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&) [inlined] bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000000l>>, node::WaitTipChanged(ChainstateManager&, node::KernelNotifications&, uint256 const&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&)::$_3>(this=0x0000600001198110, __lk=0x000000017134e750, __t=<unavailable>, __pred=<unavailable>) at __mutex_base:429:13 [opt]\n    frame stratum-mining/stratum#7: 0x0000000100173cec bitcoin-node`node::WaitTipChanged(chainman=0x0000000131808200, kernel_notifications=0x00006000011980c0, current_tip=0x000000017134e8c0, timeout=0x000000017134e800) at miner.cpp:571:45 [opt]\n\n   560          WAIT_LOCK(kernel_notifications.m_tip_block_mutex, lock);\n   561          // For callers convenience, wait longer than the provided timeout\n   562          // during startup for the tip to be non-null. That way this function\n   563          // always returns valid tip information when possible and only\n   564          // returns null when shutting down, not when timing out.\n   565          kernel_notifications.m_tip_block_cv.wait(lock, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n   566              return kernel_notifications.TipBlock() || chainman.m_interrupt;\n   567          });\n   568          if (chainman.m_interrupt) return {};\n   569          // At this point TipBlock is set, so continue to wait until it is\n   570          // different then `current_tip` provided by caller.\n>  571          kernel_notifications.m_tip_block_cv.wait_until(lock, deadline, [&]() EXCLUSIVE_LOCKS_REQUIRED(kernel_notifications.m_tip_block_mutex) {\n   572              return Assume(kernel_notifications.TipBlock()) != current_tip || chainman.m_interrupt;\n   573          });\n\n    frame stratum-mining/stratum#8: 0x0000000100167f34 bitcoin-node`node::(anonymous namespace)::MinerImpl::waitTipChanged(this=<unavailable>, current_tip=uint256 @ 0x000000017134e8c0, timeout=(__rep_ = 3155695200000)) at interfaces.cpp:957:16 [opt]\n\n   955      std::optional<BlockRef> waitTipChanged(uint256 current_tip, MillisecondsDouble timeout) override\n   956      {\n>  957          return WaitTipChanged(chainman(), notifications(), current_tip, timeout);\n   958      }\n\n    frame stratum-mining/stratum#9: 0x000000010040c4cc bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::TypeList<>, uint256&&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&&) const [inlined] decltype(auto) mp::ProxyMethodTraits<ipc::capnp::messages::Mining::WaitTipChangedParams, void>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(server_context=0x000000017134eb30, args=<unavailable>, args=<unavailable>) at proxy.h:288:16 [opt]\n\n>  288          return (server_context.proxy_server.m_impl.get()->*ProxyMethod<MethodParams>::impl)(std::forward<Args>(args)...);\n\n    frame stratum-mining/stratum#10: 0x000000010040c4a4 bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::TypeList<>, uint256&&, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>&&) const [inlined] decltype(auto) mp::ServerCall::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(this=<unavailable>, server_context=0x000000017134eb30, (null)=<unavailable>, args=<unavailable>, args=<unavailable>) const at proxy-types.h:448:16 [opt]\n\n>  448          return ProxyServerMethodTraits<typename decltype(server_context.call_context.getParams())::Reads>::invoke(\n   449              server_context,\n   450              std::forward<Args>(args)...);\n\n    frame stratum-mining/stratum#11: 0x000000010040c4a4 bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>(this=0x0000600002ab832c, server_context=0x000000017134eb30, (null)=<unavailable>, args=<unavailable>, args=<unavailable>) const at proxy-types.h:471:33 [opt]\n\n>  471          auto&& result = Parent::invoke(server_context, TypeList<>(), std::forward<Args>(args)...);\n\n    frame stratum-mining/stratum#12: 0x000000010040c408 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::Timeout, 1>, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<>, uint256>((null)=<unavailable>, (null)=<unavailable>, server_context=0x000000017134eb30, fn=0x0000600002ab832c, args=0x000000017134ea70, args=0x000000017134eaa0) at proxy-types.h:307:8 [opt]\n\n>  307      fn.invoke(server_context, std::forward<Args>(args)..., static_cast<LocalType&&>(*param));\n\n    frame stratum-mining/stratum#13: 0x000000010040c17c bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::CurrentTip, 17>, uint256, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(mp::Priority<0>, mp::TypeList<uint256>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>&&) [inlined] decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>, uint256>(this=0x0000600002ab832c, server_context=0x000000017134eb30, (null)=<unavailable>, args=0x000000017134eaa0) const at proxy-types.h:539:16 [opt]\n\n>  539          return PassField<Accessor>(Priority<2>(),\n   540              typename Split<argc, ArgTypes>::First(),\n   541              server_context,\n   542              this->parent(),\n   543              typename Split<argc, ArgTypes>::Second(),\n   544              std::forward<Args>(args)...);\n\n    frame stratum-mining/stratum#14: 0x000000010040c168 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::CurrentTip, 17>, uint256, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>((null)=<unavailable>, (null)=<unavailable>, server_context=0x000000017134eb30, fn=0x0000600002ab832c, args=0x000000017134eb80) at proxy-types.h:307:8 [opt]\n\n>  307      fn.invoke(server_context, std::forward<Args>(args)..., static_cast<LocalType&&>(*param));\n\n    frame stratum-mining/stratum#15: 0x000000010040b8e0 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(mp::Priority<1>, mp::TypeList<>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>> const&, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>&&)::'lambda'()::operator()() [inlined] decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(this=<unavailable>, server_context=0x000000017134eb30, (null)=<unavailable>) const at proxy-types.h:539:16 [opt]\n\n>  539          return PassField<Accessor>(Priority<2>(),\n\n    frame stratum-mining/stratum#16: 0x000000010040b8d4 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::Mining>, capnp::CallContext<ipc::capnp::messages::Mining::WaitTipChangedParams, ipc::capnp::messages::Mining::WaitTipChangedResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::CurrentTip, 17>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Timeout, 1>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>>, mp::TypeList<uint256, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000l>>>>(this=0x0000600002ab8308)::'lambda'()::operator()() at type-context.h:116:24 [opt]\n\n>  116                      fn.invoke(server_context, args...);\n\n    frame stratum-mining/stratum#17: 0x000000010039dcb4 bitcoin-node`void mp::Unlock<std::__1::unique_lock<std::__1::mutex>, kj::Function<void ()>&>(std::__1::unique_lock<std::__1::mutex>&, kj::Function<void ()>&) [inlined] kj::Function<void ()>::operator()(this=0x000000017134ef20) at function.h:119:12 [opt]\n    frame stratum-mining/stratum#18: 0x000000010039dca4 bitcoin-node`void mp::Unlock<std::__1::unique_lock<std::__1::mutex>, kj::Function<void ()>&>(lock=0x000000017134ef40, callback=0x000000017134ef20) at util.h:198:5 [opt]\n\n   194  template <typename Lock, typename Callback>\n   195  void Unlock(Lock& lock, Callback&& callback)\n   196  {\n   197      const UnlockGuard<Lock> unlock(lock);\n>  198      callback();\n   199  }\n\n    frame stratum-mining/stratum#19: 0x00000001006036b4 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) at proxy-io.h:306:17 [opt]\n\n   303              while (m_fn) {\n   304                  auto fn = std::move(*m_fn);\n   305                  m_fn.reset();\n>  306                  Unlock(lock, fn);\n   307              }\n\n    frame stratum-mining/stratum#20: 0x0000000100603690 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void std::__1::condition_variable::wait<void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'()>(std::__1::unique_lock<std::__1::mutex>&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'())::'lambda'()>(this=0x000060000168c0d0, __lk=0x000000017134ef40, __pred=<unavailable>) at __mutex_base:399:13 [opt]\n    frame stratum-mining/stratum#21: 0x0000000100603690 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()() const::'lambda'()>(this=0x000060000168c090, lock=0x000000017134ef40, pred=<unavailable>) at proxy-io.h:297:14 [opt]\n\n>  297          m_cv.wait(lock, [&] {\n\n    frame stratum-mining/stratum#22: 0x0000000100603678 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9::operator()(this=<unavailable>) const at proxy.cpp:404:34 [opt]\n\n   393  kj::Promise<void> ProxyServer<ThreadMap>::makeThread(MakeThreadContext context)\n   394  {\n   395      const std::string from = context.getParams().getName();\n   396      std::promise<ThreadContext*> thread_context;\n   397      std::thread thread([&thread_context, from, this]() {\n   398          g_thread_context.thread_name = ThreadName(m_connection.m_loop->m_exe_name) + \" (from \" + from + \")\";\n   399          g_thread_context.waiter = std::make_unique<Waiter>();\n   400          thread_context.set_value(&g_thread_context);\n   401          std::unique_lock<std::mutex> lock(g_thread_context.waiter->m_mutex);\n   402          // Wait for shutdown signal from ProxyServer<Thread> destructor (signal\n   403          // is just waiter getting set to null.)\n>  404          g_thread_context.waiter->wait(lock, [] { return !g_thread_context.waiter; });\n   405      });\n\n    frame stratum-mining/stratum#23: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] decltype(std::declval<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>()()) std::__1::__invoke[abi:v160006]<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>(__f=<unavailable>) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#24: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>(__t=<unavailable>, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#25: 0x0000000100603468 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_9>>(__vp=<unavailable>) at thread:299:5 [opt]\n    frame stratum-mining/stratum#26: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n============================================================\n============================================================\n  thread stratum-mining/stratum#39\n    frame #0: 0x000000018e7513cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame stratum-mining/stratum#1: 0x000000018e7900e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame stratum-mining/stratum#2: 0x000000018e6c0268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame stratum-mining/stratum#3: 0x0000000100601ab0 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] mp::EventLoop::startAsyncThread()::$_7::operator()(this=<unavailable>) const at proxy.cpp:296:22 [opt]\n\n   276  void EventLoop::startAsyncThread()\n   277  {\n   278      assert (std::this_thread::get_id() == m_thread_id);\n   279      if (m_async_thread.joinable()) {\n   280          // Notify to wake up the async thread if it is already running.\n   281          m_cv.notify_all();\n   282      } else if (!m_async_fns->empty()) {\n   283          m_async_thread = std::thread([this] {\n   284              Lock lock(m_mutex);\n   285              while (m_async_fns) {\n   286                  if (!m_async_fns->empty()) {\n   287                      EventLoopRef ref{*this, &lock};\n   288                      const std::function<void()> fn = std::move(m_async_fns->front());\n   289                      m_async_fns->pop_front();\n   290                      Unlock(lock, fn);\n   291                      // Important to relock because of the wait() call below.\n   292                      ref.reset(/*relock=*/true);\n   293                      // Continue without waiting in case there are more async_fns\n   294                      continue;\n   295                  }\n>  296                  m_cv.wait(lock.m_lock);\n   297              }\n   298          });\n   299      }\n   300  }\n\n    frame stratum-mining/stratum#4: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] decltype(std::declval<mp::EventLoop::startAsyncThread()::$_7>()()) std::__1::__invoke[abi:v160006]<mp::EventLoop::startAsyncThread()::$_7>(__f=<unavailable>) at invoke.h:394:23 [opt]\n    frame stratum-mining/stratum#5: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(void*) [inlined] void std::__1::__thread_execute[abi:v160006]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>(__t=<unavailable>, (null)=<unavailable>) at thread:288:5 [opt]\n    frame stratum-mining/stratum#6: 0x0000000100601a60 bitcoin-node`void* std::__1::__thread_proxy[abi:v160006]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_7>>(__vp=<unavailable>) at thread:299:5 [opt]\n    frame stratum-mining/stratum#7: 0x000000018e78fc0c libsystem_pthread.dylib`_pthread_start + 136\n```\n</p>\n</details>\n",
          "created_at": "2025-09-29T17:06:26Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 37741,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3348121335,
          "user": "plebhash",
          "body": "> I am still unsure why I couldn't reproduce this problem with the python tests I tried to write https://github.com/bitcoin/bitcoin/issues/33463#issuecomment-3330765943, and also why the problem did not seem to happen when you called stop RPC instead of using ctrl-c.\n\nFWIW, here's the code I used to trigger this. Like I mentioned previously, it's already outdated since I'm no longer making usage of `waitTipChanged` (and many other parts have also evolved).\n\nSo this repo is pretty much useless, only created for the purpose of reproducing the issue I reported here.\n\nhttps://github.com/plebhash/sv2-bitcoin-core",
          "created_at": "2025-09-29T17:14:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 615,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3348136502,
          "user": "ryanofsky",
          "body": "Thanks! I will try that out",
          "created_at": "2025-09-29T17:18:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 27,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3348387503,
          "user": "ryanofsky",
          "body": "That worked! Am able to reproduce with `gdb -ex run --args build/bin/bitcoin -m node -ipcbind=unix -regtest` and `cargo run --example logger \"$HOME/.bitcoin/regtest/node.sock\"` and `killall bitcoin-node`.\n\nThen I see a hang with same stack trace that you posted.\n\nIf I run `bitcoin-cli -regtest stop` instead of `killall` there is no problem and shutdown works.\n\nPatch in #33387 does not seem sufficient to fix the problem and does not seem to stop the hang or change the stack trace. Apparently it does not wait for the IPC worker thread calling WaitTipChanged to exit like I expected, but I'm not sure why.\n\nA simple change which does fix the problem is to notify `m_tip_block_cv` during shutdown after ctrl-c is pressed:\n\n```diff\n--- a/src/init.cpp\n+++ b/src/init.cpp\n@@ -215,8 +215,6 @@ void InitContext(NodeContext& node)\n     node.shutdown_request = [&node] {\n         assert(node.shutdown_signal);\n         if (!(*node.shutdown_signal)()) return false;\n-        // Wake any threads that may be waiting for the tip to change.\n-        if (node.notifications) WITH_LOCK(node.notifications->m_tip_block_mutex, node.notifications->m_tip_block_cv.notify_all());\n         return true;\n     };\n }\n@@ -267,6 +265,8 @@ void Interrupt(NodeContext& node)\n #if HAVE_SYSTEM\n     ShutdownNotify(*node.args);\n #endif\n+    // Wake any threads that may be waiting for the tip to change.\n+    if (node.notifications) WITH_LOCK(node.notifications->m_tip_block_mutex, node.notifications->m_tip_block_cv.notify_all());\n     InterruptHTTPServer();\n     InterruptHTTPRPC();\n     InterruptRPC();\n```\n\nThis change probably makes sense more generally as well to minimize differences between pressing ctrl-c and calling the stop RPC",
          "created_at": "2025-09-29T18:19:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 1712,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3353488242,
          "user": "ryanofsky",
          "body": "#33511 contains the patch above and should fix this issue",
          "created_at": "2025-09-30T19:18:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 57,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3557987606,
          "user": "sedited",
          "body": "Can this be closed now that #33511 is merged?",
          "created_at": "2025-11-20T13:11:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 45,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 541,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3656611015,
      "number": 33930,
      "title": "Documentation on 'services' parsing in RPC response for getnodeaddresses",
      "body": "### Please describe the feature you'd like to see added.\n\nI can't find any docs on how you parse `services` results for `getnodeaddresses` RPC data requests:\n\n https://bitcoincore.org/en/doc/30.0.0/rpc/network/getnodeaddresses/\n\nI'm hoping to have a more user friendly interface, other than the raw services number for a geolocation search filter:\n\n<img width=\"1836\" height=\"1206\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4b845c48-10b4-4098-86c2-fcf22ce49cff\" />\n\n### Is your feature related to a problem, if so please describe it.\n\nNo real problem, other than lack of documentation, to understand how this data can be parsed into a user friendly summary.\n\n### Describe the solution you'd like\n\nDocumentation on parsing the raw data.\n\n### Describe any alternatives you've considered\n\nNone.\n\n### Please leave any additional context\n\nLive working demo here (to better understand my interfacing):\nhttps://dragonfrugal.org/open-crypto-tracker/plugins.php#plugin_on-chain-stats",
      "state": "closed",
      "user": "taoteh1221",
      "created_at": "2025-11-23T23:46:53Z",
      "updated_at": "2025-11-24T01:41:53Z",
      "closed_at": "2025-11-24T01:41:53Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33930",
      "labels": [
        "Feature"
      ],
      "comment_data": [
        {
          "id": 3568571196,
          "user": "pinheadmz",
          "body": "It's a bitfield, defined here:\n\nhttps://github.com/bitcoin/bitcoin/blob/0690514d4f72aac251ee0b876cded9187d42c63e/src/protocol.h#L308-L339\n\nYou're right that it's not super well documented but you can find some information:\n\nhttps://en.bitcoin.it/wiki/Protocol_documentation#version\n\nhttps://bitcoin.stackexchange.com/search?q=service+bits",
          "created_at": "2025-11-24T00:35:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 338,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3568602551,
          "user": "taoteh1221",
          "body": "Thanks for pointing me in the right direction @pinheadmz. 👍 Googling didn't get me too far. \n\nI'm looking to filter mining, ln, etc (if possible), in the geolocation GUI results filters. Hopefully this is possible. Will deep dive your source file and 3rd party links this week, thanks very much. \n\nI can close this issue, unless you all think it's feasible enough to keep open? I'm sure their are a ton of higher priorities, I just came up nearly blank on google, so figured I'd ping it here. Thanks for the quick response.\n",
          "created_at": "2025-11-24T00:56:48Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 524,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3568609429,
          "user": "taoteh1221",
          "body": "I see the source seems to suggest only P2P-related stuff is flagged into the `services` value, if I'm reading it right.",
          "created_at": "2025-11-24T01:02:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 119,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3568621814,
          "user": "taoteh1221",
          "body": "Seems I may need to look at other endpoints for the data I seek. Was hoping to keep overhead low with a single call to `getnodeaddresses`, as this will be run on low power devices on home / internal networks often...but doesn't look like I can do that.",
          "created_at": "2025-11-24T01:08:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 252,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3568645276,
          "user": "sipa",
          "body": "Bitcoin nodes have no knowledge about what other functionality may run on top, like LN or mining. The \"services\" the P2P node network knows about only relate to functionality offered over that P2P network.",
          "created_at": "2025-11-24T01:29:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 205,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3568664817,
          "user": "taoteh1221",
          "body": "Thanks @sipa, I appreciate the quick response. 👍 ",
          "created_at": "2025-11-24T01:41:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 49,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1064,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3595242346,
      "number": 33806,
      "title": "malloc: Failed to allocate segment from range group - out of space",
      "body": "While reviewing and benchmarking https://github.com/bitcoin/bitcoin/pull/31132 I noticed that I was getting these (separately):\n```\nbench_bitcoin(10874,0x207c84800) malloc: Failed to allocate segment from range group - out of space\nbitcoind(70369,0x16f5ff000) malloc: Failed to allocate segment from range group - out of space\nbitcoind(71239,0x170f2f000) malloc: Failed to allocate segment from range group - out of space\n```\nI have checked the same against master and it seems to reproduce: https://github.com/bitcoin/bitcoin/pull/31132#discussion_r2497861709\n\nI will investigate further, if anyone saw the same, please comment",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-11-06T10:53:58Z",
      "updated_at": "2025-11-23T11:53:13Z",
      "closed_at": "2025-11-23T11:53:13Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/33806",
      "labels": [
        "Bug",
        "macOS",
        "Resource usage"
      ],
      "comment_data": [
        {
          "id": 3502430755,
          "user": "l0rinc",
          "body": "I can reproduce it reliably on a MacBook M4 Pro with 64 GB memory.\nThe OOM happens at block ~500k already (at ~8.6GiB dbcache): https://gist.github.com/l0rinc/8ccb47e298d6176f8af28397eef7b4df",
          "created_at": "2025-11-07T13:03:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 191,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3502734842,
          "user": "maflcko",
          "body": "> I can reproduce it reliably on a MacBook M4 Pro with 64 GB memory.\n\nDoes it happen with da6f041e39efaf64a84b748556e321021ec1f756 reverted?",
          "created_at": "2025-11-07T14:01:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 140,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3503242687,
          "user": "l0rinc",
          "body": "Yeah, doing a `git bisect` to figure out when this was introduced:\n\n<details>\n<summary>-dbcache=45000 OOM @ height=497674, cache=8510.8MiB</summary>\n\n```\ngit checkout da6f041e39efaf64a84b748556e321021ec1f756^\n...\nrm -rf build && cmake -B build -DBUILD_BENCH=OFF -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo && \\\ncmake --build build -j$(nproc)\n...\n2025-11-07T15:33:59Z UpdateTip: new best=0000000000000000002ad1de1011dd699820b20a24411d92cf801c6b5012395d height=497674 version=0x20000000 log2_work=87.590254 tx=278248302 date='2017-12-05T06:31:59Z' progress=0.219615 cache=8510.8MiB(58992594txo)\nProcess 48399 launched: '/Users/lorinc/IdeaProjects/bitcoin/build/bin/bitcoind' (arm64)\nProcess 48399 stopped\n* thread #35, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\nwarning: bitcoind was compiled with optimization - stepping may behave oddly; variables may not be available.\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x00000001005e9010 bitcoind`TokenPipeEnd::TokenRead(this=0x000000010087c6d4) at tokenpipe.cpp:60:26 [opt]\n    frame #2: 0x00000001005d760c bitcoind`util::SignalInterrupt::wait(this=<unavailable>) at signalinterrupt.cpp:69:24 [opt]\n    frame #3: 0x0000000100002e88 bitcoind`main(argc=<unavailable>, argv=<unavailable>) at bitcoind.cpp:283:58 [opt]\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x00000001004f5c50 bitcoind`CRollingBloomFilter::insert(this=0x0000000cbcc061c0, vKey=<unavailable>) at bloom.cpp:215:25 [opt]\n    frame #1: 0x000000010015aa74 bitcoind`node::TxDownloadManagerImpl::BlockConnected(this=0x0000000cbd07c000, pblock=<unavailable>) at txdownloadman_impl.cpp:103:45 [opt]\n    frame #2: 0x00000001000ae3f0 bitcoind`(anonymous namespace)::PeerManagerImpl::BlockConnected(this=0x0000000cbcf98000, role=NORMAL, pblock=std::__1::shared_ptr<const CBlock>::element_type @ 0x0000000cbd0b1878 strong=2 weak=0, pindex=<unavailable>) at net_processing.cpp:1974:21 [opt]\n    frame #3: 0x000000010033afd4 bitcoind`ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_1::operator()() const::'lambda'(CValidationInterface&)::operator()(this=<unavailable>, callbacks=<unavailable>) const at validationinterface.cpp:214:79 [opt] [inlined]\n    frame #4: 0x000000010033afd0 bitcoind`void ValidationSignalsImpl::Iterate<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_1::operator()() const::'lambda'(CValidationInterface&)>(this=0x000000010129a320, f=<unavailable>) at validationinterface.cpp:88:17 [opt]\n    frame #5: 0x000000010033afd0 bitcoind`ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_1::operator()(this=0x0000000cb89dbb88) const at validationinterface.cpp:214:22 [opt] [inlined]\n    frame #6: 0x000000010033af38 bitcoind`ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0::operator()(this=<unavailable>) const at validationinterface.cpp:216:5 [opt] [inlined]\n    frame #7: 0x000000010033af0c bitcoind`decltype(std::declval<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0&>()()) std::__1::__invoke[abi:ne200100]<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0&>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #8: 0x000000010033af0c bitcoind`void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0&>(__args=<unavailable>) at invoke.h:251:5 [opt] [inlined]\n    frame #9: 0x000000010033af0c bitcoind`void std::__1::__invoke_r[abi:ne200100]<void, ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0&>(__args=<unavailable>) at invoke.h:273:10 [opt] [inlined]\n    frame #11: 0x000000010033af0c bitcoind`std::__1::__function::__func<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0, std::__1::allocator<ValidationSignals::BlockConnected(ChainstateRole, std::__1::shared_ptr<CBlock const> const&, CBlockIndex const*)::$_0>, void ()>::operator()(this=0x0000000cb89dbb60) at function.h:319:10 [opt]\n    frame #12: 0x00000001005675a0 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x000000016fe86db8) const at function.h:436:12 [opt] [inlined]\n    frame #13: 0x000000010056758c bitcoind`std::__1::function<void ()>::operator()(this=0x000000016fe86db8) const at function.h:995:10 [opt] [inlined]\n    frame #14: 0x000000010056758c bitcoind`SerialTaskRunner::ProcessQueue(this=0x0000000cbd014540) at scheduler.cpp:173:5 [opt]\n    frame #15: 0x0000000100566d1c bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x000000016fe86e78) const at function.h:436:12 [opt] [inlined]\n    frame #16: 0x0000000100566d08 bitcoind`std::__1::function<void ()>::operator()(this=0x000000016fe86e78) const at function.h:995:10 [opt] [inlined]\n    frame #17: 0x0000000100566d08 bitcoind`CScheduler::serviceQueue(this=0x000000010129a180) at scheduler.cpp:60:17 [opt]\n    frame #18: 0x00000001005e7804 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x000000016fe86f78) const at function.h:436:12 [opt] [inlined]\n    frame #19: 0x00000001005e77f0 bitcoind`std::__1::function<void ()>::operator()(this=0x000000016fe86f78) const at function.h:995:10 [opt] [inlined]\n    frame #20: 0x00000001005e77f0 bitcoind`util::TraceThread(thread_name=\"scheduler\", thread_func=function<void ()> @ 0x000000016fe86f78) at thread.cpp:21:9 [opt]\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e3f30 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x0000000100cc3ab0 libevent_core-2.1.7.dylib`kq_dispatch + 492\n    frame #2: 0x0000000100cba0a8 libevent_core-2.1.7.dylib`event_base_loop + 588\n    frame #3: 0x0000000100041e98 bitcoind`ThreadHTTP(base=0x0000000cbd094900) at httpserver.cpp:355:5 [opt]\n    frame #4: 0x0000000100047254 bitcoind`decltype(std::declval<void (*)(event_base*)>()(std::declval<event_base*>())) std::__1::__invoke[abi:ne200100]<void (*)(event_base*), event_base*>(__f=0x0000000cbd018508, __args=0x0000000cbd018510) at invoke.h:179:25 [opt] [inlined]\n    frame #5: 0x000000010004724c bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*, 2ul>(__t=size=3, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #6: 0x000000010004724c bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*>>(__vp=0x0000000cbd018500) at thread.h:214:3 [opt]\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=0) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50048, __args=0x0000000cbcc50050, __args=0x0000000cbcc50058) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50040) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=1) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50068, __args=0x0000000cbcc50070, __args=0x0000000cbcc50078) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50060) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=2) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50088, __args=0x0000000cbcc50090, __args=0x0000000cbcc50098) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50080) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=3) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc500a8, __args=0x0000000cbcc500b0, __args=0x0000000cbcc500b8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc500a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-httpworker.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=4) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc500c8, __args=0x0000000cbcc500d0, __args=0x0000000cbcc500d8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc500c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-httpworker.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=5) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc500e8, __args=0x0000000cbcc500f0, __args=0x0000000cbcc500f8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc500e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-httpworker.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=6) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50108, __args=0x0000000cbcc50110, __args=0x0000000cbcc50118) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50100) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-httpworker.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=7) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50128, __args=0x0000000cbcc50130, __args=0x0000000cbcc50138) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50120) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-httpworker.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=8) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50148, __args=0x0000000cbcc50150, __args=0x0000000cbcc50158) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50140) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-httpworker.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=9) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50168, __args=0x0000000cbcc50170, __args=0x0000000cbcc50178) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50160) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-httpworker.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=10) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50188, __args=0x0000000cbcc50190, __args=0x0000000cbcc50198) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50180) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-httpworker.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=11) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc501a8, __args=0x0000000cbcc501b0, __args=0x0000000cbcc501b8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc501a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-httpworker.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=12) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc501c8, __args=0x0000000cbcc501d0, __args=0x0000000cbcc501d8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc501c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-httpworker.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=13) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc501e8, __args=0x0000000cbcc501f0, __args=0x0000000cbcc501f8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc501e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-httpworker.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=14) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50208, __args=0x0000000cbcc50210, __args=0x0000000cbcc50218) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50200) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-httpworker.15'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046818 bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000cbcc883c0) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100041f88 bitcoind`HTTPWorkQueueRun(queue=0x0000000cbcc883c0, worker_num=15) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x00000001000465bc bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000cbcc50228, __args=0x0000000cbcc50230, __args=0x0000000cbcc50238) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000465b0 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000465b0 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000cbcc50220) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53be8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53be8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53be0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc539a8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc539a8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc539a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53de8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53de8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53de0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #23, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc52c28) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc52c28) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc52c20) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc52a28) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc52a28) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc52a20) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53bc8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53bc8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53bc0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53948) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53948) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53940) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #27, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53888) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53888) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53880) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #28, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53308) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53308) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53300) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #29, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc52fa8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc52fa8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc52fa0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #30, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc531c8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc531c8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc531c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #31, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc537a8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc537a8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc537a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #32, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc533e8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc533e8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc533e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #33, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53288) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53288) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53280) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #34, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010032c7c4 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000cbd0f8030, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100333400 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000cbcc53e08) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003333c4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000cbcc53e08) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003333c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003333c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000cbcc53e00) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #35, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f2d8a78 libc++abi.dylib`operator new(unsigned long) + 52\n    frame #6: 0x00000001000ef020 bitcoind`void* std::__1::__libcpp_operator_new[abi:ne200100]<std::byte>(__n=1072298) at allocate.h:55:10 [opt] [inlined]\n    frame #7: 0x00000001000ef018 bitcoind`std::byte* std::__1::__libcpp_allocate[abi:ne200100]<std::byte>(__n=1072298, __align=1) at allocate.h:91:28 [opt] [inlined]\n    frame #8: 0x00000001000ef018 bitcoind`std::__1::allocator<std::byte>::allocate[abi:ne200100](this=0x0000000171092638, __n=1072298) at allocator.h:105:14 [opt] [inlined]\n    frame #9: 0x00000001000ef018 bitcoind`std::__1::__allocation_result<std::__1::allocator_traits<std::__1::allocator<std::byte>>::pointer> std::__1::__allocate_at_least[abi:ne200100]<std::__1::allocator<std::byte>>(__alloc=0x0000000171092638, __n=1072298) at allocate_at_least.h:41:19 [opt] [inlined]\n    frame #10: 0x00000001000ef018 bitcoind`std::__1::__split_buffer<std::byte, std::__1::allocator<std::byte>&>::__split_buffer(this=<unavailable>, __cap=1072298, __start=0, __a=0x0000000171092638) at __split_buffer:325:25 [opt] [inlined]\n    frame #11: 0x00000001000ef018 bitcoind`std::__1::__split_buffer<std::byte, std::__1::allocator<std::byte>&>::__split_buffer(this=<unavailable>, __cap=1072298, __start=0, __a=0x0000000171092638) at __split_buffer:321:38 [opt] [inlined]\n    frame #12: 0x00000001000ef018 bitcoind`std::__1::vector<std::byte, std::__1::allocator<std::byte>>::__append(this=size=0, __n=1072298) at vector.h:943:49 [opt]\n    frame #13: 0x00000001000eefe8 bitcoind`std::__1::vector<std::byte, std::__1::allocator<std::byte>>::resize(this=size=0, __sz=1072298) at vector.h:1355:11 [opt] [inlined]\n    frame #14: 0x00000001000eefd8 bitcoind`node::BlockManager::ReadRawBlock(this=<unavailable>, block=size=0, pos=0x00000001710926f8) const at blockstorage.cpp:1081:15 [opt]\n    frame #15: 0x00000001000ee9dc bitcoind`node::BlockManager::ReadBlock(this=0x0000000cbd0f82c0, block=0x0000000cbd0b1698, pos=0x00000001710926f8, expected_hash= Has Value=true ) const at blockstorage.cpp:1007:10 [opt]\n    frame #16: 0x00000001000ef2e8 bitcoind`node::BlockManager::ReadBlock(this=0x0000000cbd0f82c0, block=0x0000000cbd0b1698, index=0x0000000cc35b2410) const at blockstorage.cpp:1045:12 [opt]\n    frame #17: 0x0000000100307ea4 bitcoind`Chainstate::ConnectTip(this=0x0000000cbd0a8800, state=0x0000000171092d40, pindexNew=0x0000000cc35b2410, block_to_connect=nullptr, connectTrace=0x0000000171092bd8, disconnectpool=0x0000000171092ab0) at validation.cpp:3141:25 [opt]\n    frame #18: 0x0000000100309c54 bitcoind`Chainstate::ActivateBestChainStep(this=0x0000000cbd0a8800, state=0x0000000171092d40, pindexMostWork=0x0000000cc496cd50, pblock=nullptr, fInvalidFound=0x0000000171092bd7, connectTrace=0x0000000171092bd8) at validation.cpp:3352:18 [opt]\n    frame #19: 0x000000010030a268 bitcoind`Chainstate::ActivateBestChain(this=0x0000000cbd0a8800, state=0x0000000171092d40, pblock=nullptr) at validation.cpp:3493:22 [opt]\n    frame #20: 0x00000001000f0d24 bitcoind`node::ImportBlocks(chainman=0x0000000cbd0f8000, import_paths=<unavailable>) at blockstorage.cpp:1274:26 [opt]\n    frame #21: 0x000000010008133c bitcoind`std::__1::vector<unsigned char, std::__1::allocator<unsigned char>>::~vector[abi:ne200100](this=<unavailable>) - 18446744069414055107 [opt]\n    frame #22: 0x00000001005e7804 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000cbcc1a080) const at function.h:436:12 [opt] [inlined]\n    frame #23: 0x00000001005e77f0 bitcoind`std::__1::function<void ()>::operator()(this=0x0000000cbcc1a080) const at function.h:995:10 [opt] [inlined]\n    frame #24: 0x00000001005e77f0 bitcoind`util::TraceThread(thread_name=<unavailable>, thread_func=function<void ()> @ 0x0000000cbcc1a080) at thread.cpp:21:9 [opt]\n  thread #36, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005e7b78 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=<unavailable>, __lk=0x000000017111edc8, __d=<unavailable>) at condition_variable.h:0 [opt] [inlined]\n    frame #4: 0x00000001005e7b70 bitcoind`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=<unavailable>, __lk=0x000000017111edc8, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001005e7b70 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=<unavailable>, __lk=0x000000017111edc8, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001005e7b70 bitcoind`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=<unavailable>, __lk=0x000000017111edc8, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x00000001005e7b70 bitcoind`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=<unavailable>, __lk=0x000000017111edc8, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x00000001005e7b70 bitcoind`CThreadInterrupt::sleep_for(this=0x0000000cbd0b8018, rel_time=<unavailable>) at threadinterrupt.cpp:39:18 [opt]\n    frame #9: 0x000000010009310c bitcoind`std::__1::char_traits<char>::assign[abi:ne200100](__c1=0x000000017111ef00, __c2=<unavailable>) - 18446744069413981939 [opt] [inlined]\n    frame #10: 0x0000000100093c10 bitcoind`std::__1::vector<unsigned char, std::__1::allocator<unsigned char>>::~vector[abi:ne200100](this=<unavailable>) - 18446744069413979119 [opt]\n    frame #11: 0x00000001005e7804 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000cbd070000) const at function.h:436:12 [opt] [inlined]\n    frame #12: 0x00000001005e77f0 bitcoind`std::__1::function<void ()>::operator()(this=0x0000000cbd070000) const at function.h:995:10 [opt] [inlined]\n    frame #13: 0x00000001005e77f0 bitcoind`util::TraceThread(thread_name=<unavailable>, thread_func=function<void ()> @ 0x0000000cbd070000) at thread.cpp:21:9 [opt]\n    frame #14: 0x00000001000aa564 bitcoind`std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::basic_string[abi:ne200100]<0>(this=<unavailable>, __s=<unavailable>) - 18446744069413886619 [opt]\n    frame #15: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #37, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005e7b78 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=<unavailable>, __lk=0x00000001711aad48, __d=<unavailable>) at condition_variable.h:0 [opt] [inlined]\n    frame #4: 0x00000001005e7b70 bitcoind`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=<unavailable>, __lk=0x00000001711aad48, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001005e7b70 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=<unavailable>, __lk=0x00000001711aad48, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001005e7b70 bitcoind`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=<unavailable>, __lk=0x00000001711aad48, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x00000001005e7b70 bitcoind`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=<unavailable>, __lk=0x00000001711aad48, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x00000001005e7b70 bitcoind`CThreadInterrupt::sleep_for(this=0x0000000cbd0b8018, rel_time=<unavailable>) at threadinterrupt.cpp:39:18 [opt]\n  thread #38, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n```\n\n</details>",
          "created_at": "2025-11-07T15:36:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 81735,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3504302105,
          "user": "l0rinc",
          "body": "### 29\n\nSeems v29 already had this problem:\n\n<details>\n<summary>-dbcache=45000 OOM @ height=500515, cache=8553.2MiB</summary>\n\n```\n2025-11-07T16:03:59Z UpdateTip: new best=0000000000000000008abb306f6c51b4dfd3aed47a3e46099a92dc164d4d6059 height=500515 version=0x20000000 log2_work=87.707859 tx=284945541 date='2017-12-22T09:02:59Z' progress=0.225917 cache=8553.2MiB(63023361txo)\nProcess 74025 launched: '/Users/lorinc/IdeaProjects/bitcoin/build/bin/bitcoind' (arm64)\nProcess 74025 stopped\n* thread #35, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x00000001005fbb44 bitcoind`TokenPipeEnd::TokenRead(this=0x0000000100884d44) at tokenpipe.cpp:60:26 [opt]\n    frame #2: 0x00000001005e977c bitcoind`util::SignalInterrupt::wait(this=<unavailable>) at signalinterrupt.cpp:69:24 [opt]\n    frame #3: 0x0000000100002e08 bitcoind`main(argc=<unavailable>, argv=<unavailable>) at bitcoind.cpp:283:58 [opt]\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100580138 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=<unavailable>, __lk=0x000000016fe86e58, __d=<unavailable>) at scheduler.h:0:91 [opt] [inlined]\n    frame #4: 0x000000010058012c bitcoind`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=<unavailable>, __lk=0x000000016fe86e58, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x22) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x000000010058012c bitcoind`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=<unavailable>, __lk=0x000000016fe86e58, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x000000010058012c bitcoind`CScheduler::serviceQueue(this=0x00000001011db100) at scheduler.cpp:43:38 [opt]\n    frame #7: 0x00000001005fa034 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x000000016fe86f78) const at function.h:436:12 [opt] [inlined]\n    frame #8: 0x00000001005fa020 bitcoind`std::__1::function<void ()>::operator()(this=0x000000016fe86f78) const at function.h:995:10 [opt] [inlined]\n    frame #9: 0x00000001005fa020 bitcoind`util::TraceThread(thread_name=\"scheduler\", thread_func=function<void ()> @ 0x000000016fe86f78) at thread.cpp:21:9 [opt]\n    frame #10: 0x000000010008480c bitcoind`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>(__f=0x0000000af104c008, __args=<no value available>, __args=0x0000000af104c018) at invoke.h:179:25 [opt] [inlined]\n    frame #11: 0x00000001000847d8 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #12: 0x00000001000847d8 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>>(__vp=0x0000000af104c000) at thread.h:214:3 [opt]\n    frame #13: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e3f30 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x0000000100cc7ab0 libevent_core-2.1.7.dylib`kq_dispatch + 492\n    frame #2: 0x0000000100cbe0a8 libevent_core-2.1.7.dylib`event_base_loop + 588\n    frame #3: 0x0000000100041d18 bitcoind`ThreadHTTP(base=0x0000000af10e8000) at httpserver.cpp:353:5 [opt]\n    frame #4: 0x0000000100047468 bitcoind`decltype(std::declval<void (*)(event_base*)>()(std::declval<event_base*>())) std::__1::__invoke[abi:ne200100]<void (*)(event_base*), event_base*>(__f=0x0000000af1018688, __args=0x0000000af1018690) at invoke.h:179:25 [opt] [inlined]\n    frame #5: 0x0000000100047460 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*, 2ul>(__t=size=3, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #6: 0x0000000100047460 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*>>(__vp=0x0000000af1018680) at thread.h:214:3 [opt]\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=0) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c088, __args=0x0000000af104c090, __args=0x0000000af104c098) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c080) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=1) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c0a8, __args=0x0000000af104c0b0, __args=0x0000000af104c0b8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c0a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=2) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c0c8, __args=0x0000000af104c0d0, __args=0x0000000af104c0d8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c0c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=3) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c0e8, __args=0x0000000af104c0f0, __args=0x0000000af104c0f8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c0e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-httpworker.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=4) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c108, __args=0x0000000af104c110, __args=0x0000000af104c118) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c100) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-httpworker.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=5) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c128, __args=0x0000000af104c130, __args=0x0000000af104c138) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c120) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-httpworker.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=6) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c148, __args=0x0000000af104c150, __args=0x0000000af104c158) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c140) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-httpworker.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=7) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c168, __args=0x0000000af104c170, __args=0x0000000af104c178) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c160) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-httpworker.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=8) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c188, __args=0x0000000af104c190, __args=0x0000000af104c198) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c180) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-httpworker.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=9) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c1a8, __args=0x0000000af104c1b0, __args=0x0000000af104c1b8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c1a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-httpworker.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=10) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c1c8, __args=0x0000000af104c1d0, __args=0x0000000af104c1d8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c1c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-httpworker.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=11) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c1e8, __args=0x0000000af104c1f0, __args=0x0000000af104c1f8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c1e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-httpworker.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=12) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c208, __args=0x0000000af104c210, __args=0x0000000af104c218) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c200) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-httpworker.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=13) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c228, __args=0x0000000af104c230, __args=0x0000000af104c238) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c220) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-httpworker.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=14) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c248, __args=0x0000000af104c250, __args=0x0000000af104c258) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c240) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-httpworker.15'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100046a2c bitcoind`WorkQueue<HTTPClosure>::Run(this=0x0000000af1035080) at httpserver.cpp:109:26 [opt]\n    frame #4: 0x0000000100041e10 bitcoind`HTTPWorkQueueRun(queue=0x0000000af1035080, worker_num=15) at httpserver.cpp:417:12 [opt]\n    frame #5: 0x00000001000467d0 bitcoind`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x0000000af104c268, __args=0x0000000af104c270, __args=0x0000000af104c278) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001000467c4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001000467c4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x0000000af104c260) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c568) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c568) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c560) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1e548) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1e548) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1e540) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1e068) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1e068) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1e060) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #23, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c088) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c088) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c080) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1dfe8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1dfe8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1dfe0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c1c8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c1c8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c1c0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c828) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c828) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c820) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #27, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c848) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c848) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c840) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #28, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c8a8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c8a8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c8a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #29, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1ce88) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1ce88) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1ce80) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #30, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1c868) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1c868) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1c860) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #31, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1e0e8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1e0e8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1e0e0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #32, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1e128) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1e128) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1e120) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #33, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1e1a8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1e1a8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1e1a0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #34, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100321f34 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x0000000af11026e8, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x0000000100328310 bitcoind`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=0x0000000af0c1cbe8) const at checkqueue.h:152:17 [opt] [inlined]\n    frame #5: 0x00000001003282d4 bitcoind`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=0x0000000af0c1cbe8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x00000001003282d4 bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #7: 0x00000001003282d4 bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000000af0c1cbe0) at thread.h:214:3 [opt]\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #35, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f1354c8 libsystem_malloc.dylib`malloc_type_aligned_alloc + 180\n    frame #6: 0x000000018f2d8b6c libc++abi.dylib`operator new(unsigned long, std::align_val_t) + 80\n    frame #7: 0x000000010050ae38 bitcoind`PoolResource<144ul, 8ul>::AllocateChunk(this=0x0000000171092838) at pool.h:161:25 [opt] [inlined]\n    frame #8: 0x000000010050ae1c bitcoind`PoolResource<144ul, 8ul>::Allocate(this=0x0000000171092838, bytes=128, alignment=8) at pool.h:227:17 [opt]\n    frame #9: 0x000000010050adec bitcoind`PoolAllocator<std::__1::__hash_node<std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, void*>, 144ul, 8ul>::allocate(this=0x0000000171092990, n=1) at pool.h:318:44 [opt] [inlined]\n    frame #12: 0x000000010050ade4 bitcoind`std::__1::pair<std::__1::__hash_iterator<std::__1::__hash_node<std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, void*>*>, bool> std::__1::__hash_table<std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, std::__1::__unordered_map_hasher<COutPoint, std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, SaltedOutpointHasher, std::__1::equal_to<COutPoint>, false>, std::__1::__unordered_map_equal<COutPoint, std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, std::__1::equal_to<COutPoint>, SaltedOutpointHasher, true>, PoolAllocator<std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, 144ul, 8ul>>::__emplace_unique_key_args<COutPoint, std::__1::piecewise_construct_t const&, std::__1::tuple<COutPoint const&>, std::__1::tuple<>>(this=0x0000000171092970, __k=<unavailable>, __args=<unavailable>, __args=size=1, __args=size=0) at __hash_table:1547:25 [opt]\n    frame #13: 0x0000000100508858 bitcoind`std::__1::pair<std::__1::__hash_map_iterator<std::__1::__hash_iterator<std::__1::__hash_node<std::__1::__hash_value_type<COutPoint, CCoinsCacheEntry>, void*>*>>, bool> std::__1::unordered_map<COutPoint, CCoinsCacheEntry, SaltedOutpointHasher, std::__1::equal_to<COutPoint>, PoolAllocator<std::__1::pair<COutPoint const, CCoinsCacheEntry>, 144ul, 8ul>>::try_emplace[abi:ne200100]<>(this=<unavailable>, __k=0x0000000b23984e00) at unordered_map:1282:21 [opt] [inlined]\n    frame #14: 0x000000010050884c bitcoind`CCoinsViewCache::FetchCoin(this=0x0000000171092800, outpoint=0x0000000b23984e00) const at coins.cpp:49:45 [opt]\n    frame #15: 0x000000010050944c bitcoind`CCoinsViewCache::HaveCoin(this=<unavailable>, outpoint=<unavailable>) const at coins.cpp:164:36 [opt]\n    frame #16: 0x000000010050a22c bitcoind`CCoinsViewCache::HaveInputs(this=0x0000000171092800, tx=0x0000000aeaf35738) const at coins.cpp:297:18 [opt]\n    frame #17: 0x000000010002abe4 bitcoind`Consensus::CheckTxInputs(tx=0x0000000aeaf35738, state=0x0000000171092660, inputs=0x0000000171092800, nSpendHeight=500516, txfee=0x00000001710925d8) at tx_verify.cpp:167:17 [opt]\n    frame #18: 0x00000001002f6678 bitcoind`Chainstate::ConnectBlock(this=0x0000000af106c800, block=0x0000000aeaa45418, state=0x0000000171092d50, pindex=<unavailable>, view=0x0000000171092800, fJustCheck=false) at validation.cpp:2657:18 [opt]\n    frame #19: 0x00000001002fa9b8 bitcoind`Chainstate::ConnectTip(this=0x0000000af106c800, state=0x0000000171092d50, pindexNew=0x0000000afbc94ab0, pblock=<unavailable>, connectTrace=0x0000000171092bc8, disconnectpool=0x0000000171092aa0) at validation.cpp:3200:19 [opt]\n    frame #20: 0x00000001002fc6f4 bitcoind`Chainstate::ActivateBestChainStep(this=0x0000000af106c800, state=0x0000000171092d50, pindexMostWork=0x0000000af85a0ab0, pblock=nullptr, fInvalidFound=0x0000000171092bc7, connectTrace=0x0000000171092bc8) at validation.cpp:3395:18 [opt]\n    frame #21: 0x00000001002fcd08 bitcoind`Chainstate::ActivateBestChain(this=0x0000000af106c800, state=0x0000000171092d50, pblock=nullptr) at validation.cpp:3536:22 [opt]\n    frame #22: 0x00000001000f725c bitcoind`node::ImportBlocks(chainman=0x0000000af1102400, import_paths=<unavailable>) at blockstorage.cpp:1260:26 [opt]\n    frame #23: 0x000000010008707c bitcoind`AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9::operator()(this=0x0000000af1961748) const at init.cpp:1836:9 [opt] [inlined]\n    frame #24: 0x0000000100087058 bitcoind`decltype(std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9&>()()) std::__1::__invoke[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9&>(__f=0x0000000af1961748) at invoke.h:179:25 [opt] [inlined]\n    frame #25: 0x0000000100087058 bitcoind`void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9&>(__args=0x0000000af1961748) at invoke.h:251:5 [opt] [inlined]\n    frame #26: 0x0000000100087058 bitcoind`void std::__1::__invoke_r[abi:ne200100]<void, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9&>(__args=0x0000000af1961748) at invoke.h:273:10 [opt] [inlined]\n    frame #28: 0x0000000100087058 bitcoind`std::__1::__function::__func<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9, std::__1::allocator<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9>, void ()>::operator()(this=0x0000000af1961740) at function.h:319:10 [opt]\n    frame #29: 0x00000001005fa034 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000171092f58) const at function.h:436:12 [opt] [inlined]\n    frame #30: 0x00000001005fa020 bitcoind`std::__1::function<void ()>::operator()(this=0x0000000171092f58) const at function.h:995:10 [opt] [inlined]\n    frame #31: 0x00000001005fa020 bitcoind`util::TraceThread(thread_name=\"initload\", thread_func=function<void ()> @ 0x0000000171092f58) at thread.cpp:21:9 [opt]\n    frame #32: 0x0000000100086a7c bitcoind`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9>(__f=<unavailable>, __args=<unavailable>, __args=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #33: 0x00000001000869fc bitcoind`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9, 2ul, 3ul>(__t=<unavailable>, (null)=<unavailable>) at thread.h:205:3 [opt] [inlined]\n    frame #34: 0x00000001000869fc bitcoind`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_9>>(__vp=<unavailable>) at thread.h:214:3 [opt]\n    frame #35: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #36, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005fa350 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000000af0cdc348, __lk=0x000000017111edb8, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x00000001005fa344 bitcoind`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=0x0000000af0cdc348, __lk=0x000000017111edb8, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001005fa344 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=0x0000000af0cdc348, __lk=0x000000017111edb8, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001005fa344 bitcoind`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000af0cdc348, __lk=0x000000017111edb8, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x00000001005fa344 bitcoind`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000af0cdc348, __lk=0x000000017111edb8, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x00000001005fa310 bitcoind`CThreadInterrupt::sleep_for(this=0x0000000af0cdc348, rel_time=<unavailable>) at threadinterrupt.cpp:34:18 [opt]\n    frame #9: 0x000000010009955c bitcoind`std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::size[abi:ne200100](this=size=error: Size not multiple of element size.) const - 18446744069413956259 [opt] [inlined]\n    frame #10: 0x000000010009a070 bitcoind`char* std::__1::__constexpr_memmove[abi:ne200100]<char, char const, 0>(__dest=<unavailable>, __src=<unavailable>, __n=<unavailable>) - 18446744069413953423 [opt] [inlined]\n    frame #11: 0x00000001005fa034 bitcoind`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000af0cdc000) const at function.h:436:12 [opt] [inlined]\n    frame #12: 0x00000001005fa020 bitcoind`std::__1::function<void ()>::operator()(this=0x0000000af0cdc000) const at function.h:995:10 [opt] [inlined]\n    frame #13: 0x00000001005fa020 bitcoind`util::TraceThread(thread_name=<unavailable>, thread_func=function<void ()> @ 0x0000000af0cdc000) at thread.cpp:21:9 [opt]\n    frame #14: 0x00000001000b0788 bitcoind`void* std::__1::__libcpp_operator_new[abi:ne200100]<char>(__n=0) - 18446744069413861495 [opt] [inlined]\n    frame #15: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #37, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005fa350 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000000af0cdc348, __lk=0x00000001711aad88, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x00000001005fa344 bitcoind`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=0x0000000af0cdc348, __lk=0x00000001711aad88, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001005fa344 bitcoind`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=0x0000000af0cdc348, __lk=0x00000001711aad88, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001005fa344 bitcoind`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000af0cdc348, __lk=0x00000001711aad88, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x00000001005fa344 bitcoind`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000af0cdc348, __lk=0x00000001711aad88, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x00000001005fa310 bitcoind`CThreadInterrupt::sleep_for(this=0x0000000af0cdc348, rel_time=<unavailable>) at threadinterrupt.cpp:34:18 [opt]\n  thread #38, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n```\n\n</details>\n\n### 28.3\n\nTried with 28 as well, but decided against recompiling, so I downloaded the binary, signed it and started that instead:\n\n<details>\n<summary>-dbcache=45000 OOM @ height=501732, cache=8645.9MiB</summary>\n\n```\n2025-11-07T16:51:12Z UpdateTip: new best=000000000000000000888235f8d61fbd6cba88a513768fea5639dc88ef18e90c height=501732 version=0x20000000 log2_work=87.762689 tx=287404358 date='2017-12-30T13:49:01Z' progress=0.217621 cache=8645.9MiB(63780013txo)\nProcess 75204 launched: '/Users/lorinc/Downloads/bitcoin-28.3-arm64-apple-darwin-codesigning/bitcoin-28.3/bin/bitcoind' (arm64)\nProcess 75204 stopped\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x0000000100669b50 bitcoind`___lldb_unnamed_symbol_100669b18 + 56\n    frame #2: 0x0000000100657668 bitcoind`___lldb_unnamed_symbol_100657640 + 40\n    frame #3: 0x000000010000167c bitcoind`___lldb_unnamed_symbol_100000c60 + 2588\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005d8394 bitcoind`___lldb_unnamed_symbol_1005d8288 + 268\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x000000010007ef9c bitcoind`___lldb_unnamed_symbol_10007ef24 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e3f30 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x00000001007c911c bitcoind`___lldb_unnamed_symbol_1007c8efc + 544\n    frame #2: 0x00000001007c1a10 bitcoind`___lldb_unnamed_symbol_1007c1814 + 508\n    frame #3: 0x0000000100023430 bitcoind`___lldb_unnamed_symbol_10002338c + 164\n    frame #4: 0x000000010002991c bitcoind`___lldb_unnamed_symbol_1000298d4 + 72\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f1354c8 libsystem_malloc.dylib`malloc_type_aligned_alloc + 180\n    frame #6: 0x000000018f2d8b6c libc++abi.dylib`operator new(unsigned long, std::align_val_t) + 80\n    frame #7: 0x0000000100556180 bitcoind`___lldb_unnamed_symbol_1005560f4 + 140\n    frame #8: 0x0000000100556034 bitcoind`___lldb_unnamed_symbol_100556000 + 52\n    frame #9: 0x0000000100553aec bitcoind`___lldb_unnamed_symbol_100553a54 + 152\n    frame #10: 0x0000000100553f90 bitcoind`___lldb_unnamed_symbol_100553d50 + 576\n    frame #11: 0x000000010032b594 bitcoind`___lldb_unnamed_symbol_10032a28c + 4872\n    frame #12: 0x0000000100330d3c bitcoind`___lldb_unnamed_symbol_100330a38 + 772\n    frame #13: 0x0000000100332b90 bitcoind`___lldb_unnamed_symbol_1003328f8 + 664\n    frame #14: 0x0000000100333318 bitcoind`___lldb_unnamed_symbol_100333090 + 648\n    frame #15: 0x00000001001154f8 bitcoind`___lldb_unnamed_symbol_100114f00 + 1528\n    frame #16: 0x00000001000834dc bitcoind`___lldb_unnamed_symbol_100083490 + 76\n    frame #17: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #18: 0x0000000100082f0c bitcoind`___lldb_unnamed_symbol_100082e3c + 208\n    frame #19: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x000000010009edb0 bitcoind`___lldb_unnamed_symbol_10009ec9c + 276\n    frame #5: 0x000000010009f6f8 bitcoind`___lldb_unnamed_symbol_10009f694 + 100\n    frame #6: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #7: 0x00000001000b917c bitcoind`___lldb_unnamed_symbol_1000b9104 + 120\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x00000001000a5c90 bitcoind`___lldb_unnamed_symbol_1000a5940 + 848\n    frame #5: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #6: 0x00000001000b9b1c bitcoind`___lldb_unnamed_symbol_1000b9aa4 + 120\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001000a602c bitcoind`___lldb_unnamed_symbol_1000a5de8 + 580\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x00000001000ba7c0 bitcoind`___lldb_unnamed_symbol_1000ba748 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n```\n\n</details>\n\n\nThe same seems to be the case if I increase the max memory:\n\n<details>\n<summary>-dbcache=70000 OOM @ height=501736, cache=8646.4MiB</summary>\n\n```\n2025-11-07T17:15:02Z UpdateTip: new best=0000000000000000001351718d558140f255c64d672171f3d259651d4f2c7033 height=501736 version=0x20000000 log2_work=87.762866 tx=287413882 date='2017-12-30T14:28:02Z' progress=0.217627 cache=8646.4MiB(63784106txo)\nProcess 75519 launched: '/Users/lorinc/Downloads/bitcoin-28.3-arm64-apple-darwin-codesigning/bitcoin-28.3/bin/bitcoind' (arm64)\nProcess 75519 stopped\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x0000000100669b50 bitcoind`___lldb_unnamed_symbol_100669b18 + 56\n    frame #2: 0x0000000100657668 bitcoind`___lldb_unnamed_symbol_100657640 + 40\n    frame #3: 0x000000010000167c bitcoind`___lldb_unnamed_symbol_100000c60 + 2588\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005d8394 bitcoind`___lldb_unnamed_symbol_1005d8288 + 268\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x000000010007ef9c bitcoind`___lldb_unnamed_symbol_10007ef24 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e3f30 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x00000001007c911c bitcoind`___lldb_unnamed_symbol_1007c8efc + 544\n    frame #2: 0x00000001007c1a10 bitcoind`___lldb_unnamed_symbol_1007c1814 + 508\n    frame #3: 0x0000000100023430 bitcoind`___lldb_unnamed_symbol_10002338c + 164\n    frame #4: 0x000000010002991c bitcoind`___lldb_unnamed_symbol_1000298d4 + 72\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f2d8a78 libc++abi.dylib`operator new(unsigned long) + 52\n    frame #6: 0x000000010032ac00 bitcoind`___lldb_unnamed_symbol_10032a28c + 2420\n    frame #7: 0x0000000100330d3c bitcoind`___lldb_unnamed_symbol_100330a38 + 772\n    frame #8: 0x0000000100332b90 bitcoind`___lldb_unnamed_symbol_1003328f8 + 664\n    frame #9: 0x0000000100333318 bitcoind`___lldb_unnamed_symbol_100333090 + 648\n    frame #10: 0x00000001001154f8 bitcoind`___lldb_unnamed_symbol_100114f00 + 1528\n    frame #11: 0x00000001000834dc bitcoind`___lldb_unnamed_symbol_100083490 + 76\n    frame #12: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #13: 0x0000000100082f0c bitcoind`___lldb_unnamed_symbol_100082e3c + 208\n    frame #14: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x000000010009edb0 bitcoind`___lldb_unnamed_symbol_10009ec9c + 276\n    frame #5: 0x000000010009f6f8 bitcoind`___lldb_unnamed_symbol_10009f694 + 100\n    frame #6: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #7: 0x00000001000b917c bitcoind`___lldb_unnamed_symbol_1000b9104 + 120\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x00000001000a5c90 bitcoind`___lldb_unnamed_symbol_1000a5940 + 848\n    frame #5: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #6: 0x00000001000b9b1c bitcoind`___lldb_unnamed_symbol_1000b9aa4 + 120\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001000a602c bitcoind`___lldb_unnamed_symbol_1000a5de8 + 580\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x00000001000ba7c0 bitcoind`___lldb_unnamed_symbol_1000ba748 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n```\n\n</details>\n\nor if we decrease, as long as there's no flush happening at the given height:\n\n<details>\n<summary>-dbcache=10000 OOM @ height=501759, cache=8652.2MiB</summary>\n\n```\n2025-11-07T17:43:30Z UpdateTip: new best=0000000000000000006d96e76af60d87b52bc2cda65202f0d978a2729707bad6 height=501759 version=0x20000000 log2_work=87.763882 tx=287475514 date='2017-12-30T18:26:34Z' progress=0.217672 cache=8652.2MiB(63831713txo)\nProcess 75808 launched: '/Users/lorinc/Downloads/bitcoin-28.3-arm64-apple-darwin-codesigning/bitcoin-28.3/bin/bitcoind' (arm64)\nProcess 75808 stopped\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x0000000100669b50 bitcoind`___lldb_unnamed_symbol_100669b18 + 56\n    frame #2: 0x0000000100657668 bitcoind`___lldb_unnamed_symbol_100657640 + 40\n    frame #3: 0x000000010000167c bitcoind`___lldb_unnamed_symbol_100000c60 + 2588\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001005d8394 bitcoind`___lldb_unnamed_symbol_1005d8288 + 268\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x000000010007ef9c bitcoind`___lldb_unnamed_symbol_10007ef24 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e3f30 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x00000001007c911c bitcoind`___lldb_unnamed_symbol_1007c8efc + 544\n    frame #2: 0x00000001007c1a10 bitcoind`___lldb_unnamed_symbol_1007c1814 + 508\n    frame #3: 0x0000000100023430 bitcoind`___lldb_unnamed_symbol_10002338c + 164\n    frame #4: 0x000000010002991c bitcoind`___lldb_unnamed_symbol_1000298d4 + 72\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100028e14 bitcoind`___lldb_unnamed_symbol_100028d94 + 128\n    frame #4: 0x000000010002351c bitcoind`___lldb_unnamed_symbol_1000234bc + 96\n    frame #5: 0x0000000100028cb4 bitcoind`___lldb_unnamed_symbol_100028c68 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001003578c4 bitcoind`___lldb_unnamed_symbol_1003577cc + 248\n    frame #4: 0x000000010035e8a8 bitcoind`___lldb_unnamed_symbol_10035e82c + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #23, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f2d8a78 libc++abi.dylib`operator new(unsigned long) + 52\n    frame #6: 0x000000010032ac00 bitcoind`___lldb_unnamed_symbol_10032a28c + 2420\n    frame #7: 0x0000000100330d3c bitcoind`___lldb_unnamed_symbol_100330a38 + 772\n    frame #8: 0x0000000100332b90 bitcoind`___lldb_unnamed_symbol_1003328f8 + 664\n    frame #9: 0x0000000100333318 bitcoind`___lldb_unnamed_symbol_100333090 + 648\n    frame #10: 0x00000001001154f8 bitcoind`___lldb_unnamed_symbol_100114f00 + 1528\n    frame #11: 0x00000001000834dc bitcoind`___lldb_unnamed_symbol_100083490 + 76\n    frame #12: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #13: 0x0000000100082f0c bitcoind`___lldb_unnamed_symbol_100082e3c + 208\n    frame #14: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x000000010009edb0 bitcoind`___lldb_unnamed_symbol_10009ec9c + 276\n    frame #5: 0x000000010009f6f8 bitcoind`___lldb_unnamed_symbol_10009f694 + 100\n    frame #6: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #7: 0x00000001000b917c bitcoind`___lldb_unnamed_symbol_1000b9104 + 120\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100657d94 bitcoind`___lldb_unnamed_symbol_100657d08 + 140\n    frame #4: 0x00000001000a5c90 bitcoind`___lldb_unnamed_symbol_1000a5940 + 848\n    frame #5: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #6: 0x00000001000b9b1c bitcoind`___lldb_unnamed_symbol_1000b9aa4 + 120\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001000a602c bitcoind`___lldb_unnamed_symbol_1000a5de8 + 580\n    frame #4: 0x00000001006577f0 bitcoind`___lldb_unnamed_symbol_100657708 + 232\n    frame #5: 0x00000001000ba7c0 bitcoind`___lldb_unnamed_symbol_1000ba748 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n```\n\n</details>\n\n\n<details>\n<summary>-dbcache=5000 **NO** OOM @ height=529445, cache=4994.4MiB</summary>\n\n```\n2025-11-07T17:56:39Z UpdateTip: new best=000000000000000003fd1c304b6c2e3b69de18359d5e1b88a033b8e3c7b30791 height=406715 version=0x00000004 log2_work=84.463427 tx=121562202 date='2016-04-11T01:33:03Z' progress=0.092044 cache=4994.7MiB(37091528txo)\n2025-11-07T17:56:39Z Cache size (5237606368) exceeds total space (5237394240)\n...\n2025-11-07T18:06:07Z UpdateTip: new best=0000000000000000006671e60ac37ae81a43b0a6324aa73f6414fbe47f67b1f9 height=463361 version=0x20000002 log2_work=86.331519 tx=216007134 date='2017-04-24T23:52:25Z' progress=0.163556 cache=4994.7MiB(37575411txo)\n2025-11-07T18:06:07Z Cache size (5237809440) exceeds total space (5237394240)\n...\n2025-11-07T18:15:59Z UpdateTip: new best=000000000000000000759a0389705ae189e1a820005005381fc66a7e57bbe02e height=502610 version=0x20000000 log2_work=87.801827 tx=289241230 date='2018-01-04T23:52:03Z' progress=0.219006 cache=4994.6MiB(37598467txo)\n2025-11-07T18:15:59Z Cache size (5237711616) exceeds total space (5237394240)\n...\n2025-11-07T18:31:18Z UpdateTip: new best=00000000000000000011101eae1e4803acf862a005b6dbbbb8839885504dcfcf height=529445 version=0x20000000 log2_work=89.123507 tx=324716413 date='2018-06-27T08:45:06Z' progress=0.245866 cache=4994.4MiB(37585588txo)\n2025-11-07T18:31:18Z Cache size (5237520160) exceeds total space (5237394240)\n...\n```\n\n</details>\n\n----\n\n<details>\n<summary>deobfuscate the blocks to support older versions</summary>\n\n```bash\ngit checkout 86c5afc2948511c0f4db3f7ba4f27f2d69b6ed78 && \\\nrm -rf build && cmake -B build -DBUILD_BENCH=ON -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo && \\\ncmake --build build -j$(nproc)  && \\\nbuild/bin/bitcoind -reobfuscate-blocks=0000000000000000 -stopatheight=1\n```\n\n</details>\n\n---\n\n### 27.2\n\n<details>\n<summary>Make it executable</summary>\n\n```bash\nxattr -dr com.apple.quarantine /Users/lorinc/Downloads/bitcoin-27.2  \ncodesign -s - /Users/lorinc/Downloads/bitcoin-27.2/bin/bitcoind\n```\n\n</details>\n\n<details>\n<summary>-dbcache=45000 OOM @ height=669880, cache=8642.3MiB</summary>\n\n```\n2025-11-07T22:05:31Z UpdateTip: new best=0000000000000000000b3fcf0823ccd40401d5a0cec8c9c22f9b8a763823bbf8 height=669880 version=0x20400000 log2_work=92.656223 tx=614587863 date='2021-02-09T17:54:09Z' progress=0.462061 cache=8642.3MiB(72683563txo)\nProcess 34323 launched: '/Users/lorinc/Downloads/bitcoin-27.2/bin/bitcoind' (arm64)\nProcess 34323 stopped\n* thread #24, name = 'b-initload', stop reason = breakpoint 1.1\n    frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\nlibsystem_malloc.dylib`malloc_vreport:\n->  0x18f124e8c <+0>:  pacibsp \n    0x18f124e90 <+4>:  stp    x28, x27, [sp, #-0x60]!\n    0x18f124e94 <+8>:  stp    x26, x25, [sp, #0x10]\n    0x18f124e98 <+12>: stp    x24, x23, [sp, #0x20]\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018f2de908 libsystem_kernel.dylib`read + 8\n    frame #1: 0x00000001006645a4 bitcoind`___lldb_unnamed_symbol_10066456c + 56\n    frame #2: 0x00000001006511c4 bitcoind`___lldb_unnamed_symbol_10065119c + 40\n    frame #3: 0x00000001000066d0 bitcoind`___lldb_unnamed_symbol_10000588c + 3652\n    frame #4: 0x000000018ef61d54 dyld`start + 7184\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018f2e09c8 libsystem_kernel.dylib`__psynch_mutexwait + 8\n    frame #1: 0x000000018f31de3c libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_wait + 84\n    frame #2: 0x000000018f31b868 libsystem_pthread.dylib`_pthread_mutex_firstfit_lock_slow + 220\n    frame #3: 0x000000018f252a14 libc++.1.dylib`std::__1::recursive_mutex::lock() + 16\n    frame #4: 0x00000001000c5294 bitcoind`___lldb_unnamed_symbol_1000c50c8 + 460\n    frame #5: 0x0000000100359cc4 bitcoind`___lldb_unnamed_symbol_100359b2c + 408\n    frame #6: 0x00000001005c57ac bitcoind`___lldb_unnamed_symbol_1005c5668 + 324\n    frame #7: 0x00000001005c4dd8 bitcoind`___lldb_unnamed_symbol_1005c4b38 + 672\n    frame #8: 0x0000000100651398 bitcoind`___lldb_unnamed_symbol_100651264 + 308\n    frame #9: 0x0000000100086dd0 bitcoind`___lldb_unnamed_symbol_100086d58 + 120\n    frame #10: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-http'\n    frame #0: 0x000000018f2e66c0 libsystem_kernel.dylib`poll + 8\n    frame #1: 0x00000001007c5a20 bitcoind`___lldb_unnamed_symbol_1007c5960 + 192\n    frame #2: 0x00000001007bf7dc bitcoind`event_base_loop + 632\n    frame #3: 0x0000000100040674 bitcoind`___lldb_unnamed_symbol_100040588 + 236\n    frame #4: 0x0000000100046e94 bitcoind`___lldb_unnamed_symbol_100046e4c + 72\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-httpworker.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001000463b4 bitcoind`___lldb_unnamed_symbol_100046330 + 132\n    frame #4: 0x00000001000407fc bitcoind`___lldb_unnamed_symbol_10004079c + 96\n    frame #5: 0x0000000100046250 bitcoind`___lldb_unnamed_symbol_100046204 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001000463b4 bitcoind`___lldb_unnamed_symbol_100046330 + 132\n    frame #4: 0x00000001000407fc bitcoind`___lldb_unnamed_symbol_10004079c + 96\n    frame #5: 0x0000000100046250 bitcoind`___lldb_unnamed_symbol_100046204 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001000463b4 bitcoind`___lldb_unnamed_symbol_100046330 + 132\n    frame #4: 0x00000001000407fc bitcoind`___lldb_unnamed_symbol_10004079c + 96\n    frame #5: 0x0000000100046250 bitcoind`___lldb_unnamed_symbol_100046204 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001000463b4 bitcoind`___lldb_unnamed_symbol_100046330 + 132\n    frame #4: 0x00000001000407fc bitcoind`___lldb_unnamed_symbol_10004079c + 96\n    frame #5: 0x0000000100046250 bitcoind`___lldb_unnamed_symbol_100046204 + 76\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-scriptch.0'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-scriptch.1'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-scriptch.2'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-scriptch.3'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-scriptch.4'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-scriptch.5'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-scriptch.6'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-scriptch.7'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-scriptch.8'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-scriptch.9'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-scriptch.10'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-scriptch.11'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-scriptch.12'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.13'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.14'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010034632c bitcoind`___lldb_unnamed_symbol_100346230 + 252\n    frame #4: 0x0000000100350c84 bitcoind`___lldb_unnamed_symbol_100350c08 + 124\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #23\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f25174c libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001006c33b4 bitcoind`___lldb_unnamed_symbol_1006c334c + 104\n    frame #4: 0x00000001006c3458 bitcoind`___lldb_unnamed_symbol_1006c3410 + 72\n    frame #5: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n* thread #24, name = 'b-initload', stop reason = breakpoint 1.1\n  * frame #0: 0x000000018f124e8c libsystem_malloc.dylib`malloc_vreport\n    frame #1: 0x000000018f128f38 libsystem_malloc.dylib`malloc_report + 64\n    frame #2: 0x000000018f12d4b4 libsystem_malloc.dylib`_xzm_segment_group_alloc_segment + 480\n    frame #3: 0x000000018f12b084 libsystem_malloc.dylib`xzm_segment_group_alloc_chunk + 692\n    frame #4: 0x000000018f140e0c libsystem_malloc.dylib`_xzm_malloc_large_huge + 272\n    frame #5: 0x000000018f1354c8 libsystem_malloc.dylib`malloc_type_aligned_alloc + 180\n    frame #6: 0x000000018f2d8b6c libc++abi.dylib`operator new(unsigned long, std::align_val_t) + 80\n    frame #7: 0x000000010053c16c bitcoind`___lldb_unnamed_symbol_10053c0d8 + 148\n    frame #8: 0x000000010053c034 bitcoind`___lldb_unnamed_symbol_10053c000 + 52\n    frame #9: 0x0000000100539d8c bitcoind`___lldb_unnamed_symbol_100539cf8 + 148\n    frame #10: 0x000000010053a778 bitcoind`___lldb_unnamed_symbol_10053a754 + 36\n    frame #11: 0x000000010053b350 bitcoind`___lldb_unnamed_symbol_10053b2a0 + 176\n    frame #12: 0x0000000100029fd4 bitcoind`___lldb_unnamed_symbol_100029f80 + 84\n    frame #13: 0x00000001003140b8 bitcoind`___lldb_unnamed_symbol_100313670 + 2632\n    frame #14: 0x000000010031a97c bitcoind`___lldb_unnamed_symbol_10031a52c + 1104\n    frame #15: 0x000000010031cbc4 bitcoind`___lldb_unnamed_symbol_10031c73c + 1160\n    frame #16: 0x000000010031d268 bitcoind`___lldb_unnamed_symbol_10031cfd4 + 660\n    frame #17: 0x000000010010f064 bitcoind`___lldb_unnamed_symbol_10010e838 + 2092\n    frame #18: 0x000000010008b448 bitcoind`___lldb_unnamed_symbol_10008b400 + 72\n    frame #19: 0x0000000100651398 bitcoind`___lldb_unnamed_symbol_100651264 + 308\n    frame #20: 0x000000010008ae50 bitcoind`___lldb_unnamed_symbol_10008ada0 + 176\n    frame #21: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-net'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100651b78 bitcoind`___lldb_unnamed_symbol_100651aec + 140\n    frame #4: 0x00000001000a4f24 bitcoind`___lldb_unnamed_symbol_1000a4e14 + 272\n    frame #5: 0x00000001000a5974 bitcoind`___lldb_unnamed_symbol_1000a58fc + 120\n    frame #6: 0x0000000100651398 bitcoind`___lldb_unnamed_symbol_100651264 + 308\n    frame #7: 0x00000001000bff30 bitcoind`___lldb_unnamed_symbol_1000bfeb8 + 120\n    frame #8: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-addcon'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100651b78 bitcoind`___lldb_unnamed_symbol_100651aec + 140\n    frame #4: 0x00000001000ac71c bitcoind`___lldb_unnamed_symbol_1000ac3c4 + 856\n    frame #5: 0x0000000100651398 bitcoind`___lldb_unnamed_symbol_100651264 + 308\n    frame #6: 0x00000001000c08c0 bitcoind`___lldb_unnamed_symbol_1000c0848 + 120\n    frame #7: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n  thread #27, name = 'b-msghand'\n    frame #0: 0x000000018f2e14f8 libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018f3210dc libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018f2517e4 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001000acac0 bitcoind`___lldb_unnamed_symbol_1000ac878 + 584\n    frame #4: 0x0000000100651398 bitcoind`___lldb_unnamed_symbol_100651264 + 308\n    frame #5: 0x00000001000c15ac bitcoind`___lldb_unnamed_symbol_1000c1534 + 120\n    frame #6: 0x000000018f320c08 libsystem_pthread.dylib`_pthread_start + 136\n```\n\n</details>\n\n(surprising how much more fits into the cache in 27 compared to 28-30)\n\n### 26.2\n\n<details>\n<summary>-dbcache=4500 **NO** OOM @ height=700000, cache=9367.7MiB</summary>\n\n```\n2025-11-07T23:29:52Z UpdateTip: new best=0000000000000000000590fc0f3eba193a278534220b2b37e9849e1a770ca959 height=700000 version=0x3fffe004 log2_work=93.063032 tx=669566382 date='2021-09-11T04:14:32Z' progress=0.527773 cache=9367.7MiB(77357753txo)\n...\n```\n</details>",
          "created_at": "2025-11-07T18:56:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 158547,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3506817713,
          "user": "l0rinc",
          "body": "So it seems that v26 handles these smoothly without an OOM, but v27-30 OOMs for dbcache sizes >8.7GB on Mac. So it also crashes for a 10 GB dbcache on a 64GB system.\nCan somebody else reproduce this?\nI suspect it may be related to https://github.com/bitcoin/bitcoin/pull/25325.\n\n----\n\nI have instrumented the `UpdateTip` messages with dbcache `buckets` and system free memory - to plot the behavior before the crash, so the entries look like:\n```\n2025-11-08T19:07:15Z UpdateTip: new best=0000000000000000013ec16f06b41e4912d0d08e45b3126f8cdc805907ac7042 height=467045 version=0x20000000 log2_work=86.451975 tx=223632782 date='2017-05-19T02:25:43Z' progress=0.176433 cache=7303.3MiB(52678905txo) buckets=52679969 free=29030.5MiB\n2025-11-08T19:07:21Z UpdateTip: new best=0000000000000000001cced60bdba0d5a5c109e8192453cbc36523aaa8dad8d7 height=467046 version=0x20000000 log2_work=86.452008 tx=223634957 date='2017-05-19T02:31:39Z' progress=0.176435 cache=7705.5MiB(52680253txo) buckets=105359939 free=29009.7MiB\n```\n\nFree memory spikes up at the beginning, but levels off - I don't see any OOM pressure here, maybe I'm measuring something incorrectly :/\n<img width=\"4500\" height=\"3000\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ce8bf178-dd38-46fa-8f4d-51c5ae9c46d0\" />\n\nBucket count and bucket saturation doesn't indicate that this is happening during a dbcache reallocation (which would only partially explain it anyway):\n\n<img width=\"4500\" height=\"3000\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/fdd24855-bae5-428a-8fa2-3f16d049548a\" />\n\n<img width=\"4500\" height=\"3000\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/81fa6fa7-cc67-46a9-a5f4-4e8c23d7de3e\" />\n\nSomething else is special about the `~8645.9MiB` dbcache sizes.",
          "created_at": "2025-11-08T19:23:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1769,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3510202526,
          "user": "maflcko",
          "body": "> Can somebody else reproduce this?\n\nDoes it only happen on macOS, or also on Linux?",
          "created_at": "2025-11-10T08:42:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 84,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3567870300,
          "user": "l0rinc",
          "body": "No idea what changed since, but I cannot reproduce it with `master` or with `27.2`.\nHas anyone else tried it? Closing for now, we can reopen if it reproduces later.",
          "created_at": "2025-11-23T11:53:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 164,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 695,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3655407908,
      "number": 33928,
      "title": "Fresh install version 30.0 bitcoin-cli kicks me out if adding rpc creds",
      "body": "I have already read this other [issue](https://github.com/bitcoin/bitcoin/issues/14627) and could not determine if it was relevant to mine.\n\nThis is a fresh install of Bitcoin Core 30.0 and I am using the conf file from Ministry of Nodes 2024 [guide](https://www.youtube.com/watch?v=l-JJzodH2l8&list=PLCRbH-IWlcW0g0HCrtI06_ZdVVolUWr39&index=6) MINUS the rpc creds because I am too lazy at the moment to do the rpcauth.py stuff and found that I can use the node normally until I add lines for rpcuser= and rpcpassword=, after which I lose the ability to run bitcoin-cli because my user doesn't have the rpc creds to access bitcoin-cli. I can delete the two lines, save the file and immediately regain access to bitcoin-cli. At no point have I stopped and started the node, just modifying the file. In the past, I know you are supposed to restart the node for changes to take effect so I'm really not sure what's going on. Can someone enlighten me to the new behavior?\n\nRunning on Debian 13.\n\nCurrent conf file:\n```\nserver=1\ntxindex=1\ndaemon=1\nrpcport=8332\nrpcbind=0.0.0.0\nrpcallowip=127.0.0.1\nrpcallowip=10.0.0.0/8\nrpcallowip=172.0.0.0/8\nrpcallowip=192.0.0.0/8\nzmqpubrawblock=tcp://0.0.0.0:28332\nzmqpubrawtx=tcp://0.0.0.0:28333\nzmqpubhashblock=tcp://0.0.0.0:28334\nwhitelist=127.0.0.1\ndisablewallet=1\ndbcache=2048\nmaxconnections=125\n```\n\n*Edit: did rpcauth.py and everything works as expected. I assume this means that the old user and pass lines are fully deprecated?",
      "state": "closed",
      "user": "SeaSquared24",
      "created_at": "2025-11-23T02:33:27Z",
      "updated_at": "2025-11-23T08:00:50Z",
      "closed_at": "2025-11-23T07:59:29Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33928",
      "labels": [],
      "comment_data": [
        {
          "id": 3567596771,
          "user": "achow101",
          "body": "Without `rpcuser` and `rpcpassword`, the RPC server creates an ephemeral user and password saved in `.cookie` in the datadir. `bitcoin-cli` will parse your `bitcoin.conf` for `rpcuser` and `rpcpassword` first, and if it doesn't find them, then it looks at `.cookie`. Since you haven't restarted Bitcoin Core yet, your new credentials aren't being used by the RPC server, but `bitcoin-cli` is trying to use them, hence an unauthorized error.\n\nWhen you use `rpcauth`, the password is not included directly in the `bitcoin.conf` so the RPC server still creates the cookie file which `bitcoin-cli` still uses in that mode. If you tried to specify the `rpcauth` credentials with `bitcoin-cli -rpcuser=<user> -rpcpassword=<password>`, it would also fail until you restart Bitcoin Core.",
          "created_at": "2025-11-23T07:59:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 779,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1538,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2538940839,
      "number": 30938,
      "title": "`test_bitcoin` from pre-built 28.0rc2 tarball is failing for JSON parsing",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nTested the 28.0rc2 packages from [bitcoincore.org/bin](https://bitcoincore.org/bin/bitcoin-core-28.0/test.rc2/) for Linux x86_64, Darwin x86_64, and Darwin arm64.\r\n\r\nSeeing consistent failures in the rc2 `test_bitcoin` binary running:\r\n- Docker with base image of Arch ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429843131), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430967365), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430986135))\r\n- Docker with base image of Debian ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429843761), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430967880), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430987569)), Ubuntu ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429845402), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430970232), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430989907)), and Kali ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429844197), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430968471), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430988323))\r\n- Docker with base image of openSUSE Leap ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429845604), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430970512), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430990207)), openSUSE Tumbleweed ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429845803), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430970806), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430990490)), and SUSE Enterprise ([1](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958688270/job/30429845217), [2](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10958998680/job/30430969917), [3](https://github.com/bitcoin-tools/nodebuilder/actions/runs/10959033329/job/30430989693))\r\n\r\nrc2 `test_bitcoin` is consistently NOT failing on the following:\r\n- Ubuntu running on bare metal github CI runner (not in Docker)\r\n- macOS 13 x86_64 and macOS 14 arm64 on bare metal github CI runner\r\n- Docker with base image of Alpine, Clear Linux, Fedora, Manjaro, Oracle Linux, RHEL, and Rocky Linux\r\n\r\nAlso, `test_bitcoin` was consistently NOT failing like this on 28.0rc1.\r\n\r\n### Expected behaviour\r\n\r\n`test_bitcoin` from pre-built package should return exit status 0 when run inside a Docker container.\r\n\r\n### Steps to reproduce\r\n\r\nTo reproduce the `test_bitcoin` failures on 28.0rc2:\r\n\r\n```sh\r\ngit clone https://github.com/bitcoin-tools/nodebuilder\r\ncd nodebuilder/docker/\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_archlinux .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_debian .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_kali .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_openususe-leap .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_opensuse-tumbleweed .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 -f Dockerfile_sles .\r\ndocker build --build-arg NODEBUILDER_VERSION=f0194173557c364d929148952c6a28e2a8965f97 .\r\n```\r\n\r\nTo reproduce the expected behavior on 28.0rc1:\r\n\r\n```sh\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_archlinux .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_debian .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_kali .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_openususe-leap .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_opensuse-tumbleweed .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb -f Dockerfile_sles .\r\ndocker build --build-arg NODEBUILDER_VERSION=f453fb64c665beabfce70fe037625215ea0e96bb .\r\n```\r\n\r\nCommit hashes are taken from [this PR](https://github.com/bitcoin-tools/nodebuilder/pull/1539/commits).\r\n\r\n### Relevant log output\r\n\r\n```text\r\n[2024-09-20T13:36:14]  INFO: Running the unit tests.\r\n\r\nRunning 630 test cases...\r\ntest/system_tests.cpp(61): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned\", command)) != std::string::npos has failed\r\ntest/system_tests.cpp(62): error: in \"system_tests/run_command\": check what.find(expected) != std::string::npos has failed\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n\r\n[2024-09-20T13:39:42] ERROR: Unit tests failed.\r\n[2024-09-20T13:39:42] ERROR: Unhandled error at line 1.\r\nThe command '/bin/sh -c /bin/sh -c \"$(curl -fsSL ${NODEBUILDER_URL} )\"' returned a non-zero code: 1\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n28.0rc2\r\n\r\n### Operating system and version\r\n\r\nDocker on Ubuntu 24\r\n\r\n### Machine specifications\r\n\r\n- Inside a Docker container on GitHub Actions CI\r\n- Inside docker on my Ubuntu 24 local environment.",
      "state": "closed",
      "user": "bitcoin-tools",
      "created_at": "2024-09-20T14:14:29Z",
      "updated_at": "2025-11-22T22:05:54Z",
      "closed_at": "2024-09-24T15:37:49Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/30938",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3567084620,
          "user": "hebasto",
          "body": "> This can be worked around by installing python3. An alternative would be something like done here: https://github.com/bitcoin/bitcoin/pull/29868/files#r1747435819 (but that diff currently does not compile, as can be seen in the CI output)\n\nI’ve revisited this and now think it’s reasonable for a test of a feature that itself depends on Python (HWI) to use Python directly. The only requirement is a runtime check ensuring that Python is available in `PATH`.\n\nThe dependency on `coreutils` may not be the only one. For example, the `bitcoin-core` Guix package [depends](https://codeberg.org/guix/guix/src/commit/ac3499aaec06ed61de31d17018c8647fc4e3df49/gnu/packages/finance.scm#L195-L196) on both `coreutils` and `bash`.",
          "created_at": "2025-11-22T22:05:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 722,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 5968,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3414291236,
      "number": 33386,
      "title": "Default ASmap file path is not used unless -asmap is set",
      "body": "The `-asmap` option supposedly has a default value `ip_asn.map` (as defined by `DEFAULT_ASMAP_FILENAME`). However, when I tried to put a file with this name into my datadir, nothing happened. It turns out that this default is not actually used unless the `-asmap` option is set, which seems weird since setting the option normally overrides the default. There is a way to set it without overriding the default on the command line (`bitcoind -asmap`), but in bitcoin.conf there doesn't seem to be a way to do that (e.g. `asmap=1` sets the file path to `1`).\n\nSome ways this could be resolved:\n\n- Simply better document this behavior. The help text doesn't say that the default value is not actually used when the option is not set, and the option itself is introduced as `-asmap=<file>` which in no way indicates that it can be used without a value.\n- If the option is not set (but not explicitly disabled with `-noasmap`) try to load the ASmap file using the default path but don't abort if the file doesn't exist.\n- Remove the default value to prevent any confusion.",
      "state": "closed",
      "user": "vostrnad",
      "created_at": "2025-09-13T23:37:29Z",
      "updated_at": "2025-11-21T23:41:28Z",
      "closed_at": "2025-11-21T23:41:28Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/33386",
      "labels": [],
      "comment_data": [
        {
          "id": 3298250998,
          "user": "fanquake",
          "body": "@fjahr ",
          "created_at": "2025-09-16T12:00:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 7,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3298756998,
          "user": "fjahr",
          "body": "I agree that this whole default location thing is a bit odd and it's not something I think we necessarily need but it was already there when I started to get more involved in ASmap and I didn't find it so harmful that it needed to be removed. It can be easily ignored by just not putting a file there after all, so if you don't like it just don't use it, I guess.\n\n> The -asmap option supposedly has a default value ip_asn.map (as defined by DEFAULT_ASMAP_FILENAME). However, when I tried to put a file with this name into my datadir, nothing happened. It turns out that this default is not actually used unless the -asmap option is set, which seems weird since setting the option normally overrides the default. \n\nI think the behavior is correct that placing a file in the default location doesn't activate ASmap automatically. ASmap is off by default and I don't think we have another feature that gets activated with just a file being in a certain place. I prefer that the feature still needs to be explicitly activated for now.\n\nFWIW, I am reading `-asmap` documentation as \"activate the feature, then it will look for the file in the default location or the location provided\" while you read it as \"if the file is in the default location, activate the feature, otherwise also activate the feature if the default location was overridden\". Can you pinpoint which part of the docs gave you this impression? Was it the RPC help or maybe files.md (https://github.com/bitcoin/bitcoin/blob/master/doc/files.md)? Is there a different place where you think this behavior could be better documented?\n\n> Some ways this could be resolved:\n\nI would suggest to go with option one and add some more documentation. Note that this doesn't get easier to reason about when there is an additional path available with embedded data, should #28792 be merged. I am giving an explanation of the behavior here: https://github.com/bitcoin/bitcoin/pull/28792#issuecomment-2322358005 and I am expanding the documentation in the PR accordingly, also adding something explicitly on the default file location: https://github.com/bitcoin/bitcoin/pull/28792/files#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR526 There is also some more on the asmap data here: https://github.com/bitcoin/bitcoin/pull/28792/files#diff-7128095523f4b61eba067a48474bdc10b72fe13cf8843408c1154a488fcf6f60\n\n> There is a way to set it without overriding the default on the command line (bitcoind -asmap), but in bitcoin.conf there doesn't seem to be a way to do that (e.g. asmap=1 sets the file path to 1).\n\nThis is actually a bug (IMO) that is unrelated to ASmap itself, I am fixing it in the embedding PR and it's also included in this smaller prework PR that I have extracted and there was a little bit of discussion on it there as well: https://github.com/bitcoin/bitcoin/pull/33026#discussion_r2228533987 I am actually happy that you ran into this and see it as an issue too ;)",
          "created_at": "2025-09-16T13:22:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2955,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3299667325,
          "user": "ryanofsky",
          "body": "re: fjahr https://github.com/bitcoin/bitcoin/issues/33386#issuecomment-3298756998\n\n> Can you pinpoint which part of the docs gave you this impression? Was it the RPC help or maybe files.md (https://github.com/bitcoin/bitcoin/blob/master/doc/files.md)? Is there a different place where you think this behavior could be better documented?\n\nSince I noted the same issue in https://github.com/bitcoin/bitcoin/pull/30529#pullrequestreview-2516002191, the part of the doc which gave me that impression was just:\n\n```\n(default: ip_asn.map)\n```\n\nWhen docs specify a default value for an option, I think the implication is that default value is the value which will be used if the option is not specified.\n\nIn this case, no file is loaded when -asmap is not specified, so I don't think it's accurate to say that the default value is `ip_asn.map`. Could address this with a change like:\n\n```\n(default: disabled, but if -asmap or -asmap= is specified without a filename, \"ip_asn.map\" will be used)\n```\n\nre: vostmad https://github.com/bitcoin/bitcoin/issues/33386#issue-3414291236\n\n> but in bitcoin.conf there doesn't seem to be a way to do that (e.g. `asmap=1` sets the file path to `1`).\n\nI think you can actually do it by specifying `asmap=` in the configuration file, and maybe the documentation suggestion above would make that clearer. But I'm not actually sure if there is currently a use-case for that. If you have to download a file manually AND you have to update the configuration it seems rational to have to point the configuration file you edit to the file you downloaded. Supporting asmap=1 seems more useful in a future scenario where you don't have to download any file.\n\nre: fjahr https://github.com/bitcoin/bitcoin/issues/33386#issuecomment-3298756998\n\n> I think the behavior is correct that placing a file in the default location doesn't activate ASmap automatically.\n\nThis is reasonable, but not what I'd would expect given current documentation. And it does seem to me like it would be nice if the file was used by default as long as it existed and the option was not changed (similar to other files in the datadir), but maybe this is not safe.\n\n> This is actually a bug (IMO) that is unrelated to ASmap itself, I am fixing it in the embedding PR \n\nI wouldn't say it's a bug that if you specify \"1\" as a filename, it's interpreted as a filename. I do think it probably makes sense to support -asmap=1 as a special case for loading embedded data. But it would seem a little cleaner to me to have separate -asmap/-asmapfile options or some other unambiguous way of passing a filename that is just a filename.\n\nThese are just off-the-cuff opinions, though. You've thought about the asmap option more than me and I think different approaches are reasonable here.\n",
          "created_at": "2025-09-16T17:17:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2769,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3300460071,
          "user": "vostrnad",
          "body": "To clarify, the docs that confused me was the CLI help text:\n```\n  -asmap=<file>\n       Specify asn mapping used for bucketing of the peers (default:\n       ip_asn.map). Relative paths will be prefixed by the net-specific\n       datadir location.\n```\nAs ryanofsky said, this seems to imply that the default value is used when the option is not specified. I would personally be fine with that behavior (it certainly didn't raise any eyebrows when I thought that was how it worked), but maybe you're right that it's not safe.",
          "created_at": "2025-09-16T21:50:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 523,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3403824021,
          "user": "fjahr",
          "body": "> As ryanofsky said, this seems to imply that the default value is used when the option is not specified.\n\nThanks for clarifying @vostrnad @ryanofsky , I agree that this part is confusing and I didn't see that way of reading it previously.\n\nInitially I had a preference to not change the behavior of `-asmap` and introduce a separate option for the file path, but recently this has grown on me. So I have opened two alternative PRs now, one which leaves the option unchanged but improves the `=1` case and adds the documentation as discussed: [#33632](https://github.com/bitcoin/bitcoin/pull/33632). The other one splits the file path handling out, which is certainly cleaner but the change in behavior may be a bit confusing for current users of asmap: [#33631](https://github.com/bitcoin/bitcoin/pull/33631)",
          "created_at": "2025-10-14T22:31:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 809,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3497169826,
          "user": "fjahr",
          "body": "> Remove the default value to prevent any confusion.\n\n@vostrnad since you reported this issue and [#33770](https://github.com/bitcoin/bitcoin/pull/33770) implements this suggestion of your, could you say if the removal would be your preferred resolution or if you would like to keep the option around? I think you haven't said if you wanted to actually use the default path or if you just happened to stumble upon this. Thanks!",
          "created_at": "2025-11-06T13:02:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 427,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3534768830,
          "user": "vostrnad",
          "body": "@fjahr Yes, I think removing the default altogether is probably the best way forward, especially in light of a possible future release with embedded ASmap data, and it should remove any potential for confusion around how the option works.",
          "created_at": "2025-11-14T21:54:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 238,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3565003991,
          "user": "ryanofsky",
          "body": "Closing since this should be resolved with #33770",
          "created_at": "2025-11-21T23:41:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 49,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1124,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3646740449,
      "number": 33913,
      "title": "ci: failure to download 0.14.3-win64.zip in Win test cross-built",
      "body": "This is happening semi-frequently:\n\nhttps://github.com/bitcoin/bitcoin/actions/runs/19520873587/job/55885060054:\n```bash\nRun ./test/get_previous_releases.py --target-dir $PREVIOUS_RELEASES_DIR\n\nDownload failed: Remote end closed connection without response\nReleases directory: D:\\a\\_temp/previous_releases\nFetching: https://bitcoincore.org/bin/bitcoin-core-0.14.3/bitcoin-0.14.3-win64.zip\nError: Process completed with exit code 1.\n```\n\nhttps://github.com/bitcoin/bitcoin/actions/runs/19239483669/job/55006759227:\n```bash\n Releases directory: D:\\a\\_temp/previous_releases\nFetching: https://bitcoincore.org/bin/bitcoin-core-0.14.3/bitcoin-0.14.3-win64.zip\n\nDownload failed: [WinError 10054] An existing connection was forcibly closed by the remote host\nDownloading: [----------------------------------------] 0.0%\nError: Process completed with exit code 1.\n```\n\nhttps://github.com/bitcoin/bitcoin/actions/runs/19481968460/job/55756476621:\n```bash\n\nRun ./test/get_previous_releases.py --target-dir $PREVIOUS_RELEASES_DIR\n\nDownload failed: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\nReleases directory: D:\\a\\_temp/previous_releases\nFetching: https://bitcoincore.org/bin/bitcoin-core-0.14.3/bitcoin-0.14.3-win64.zip\nError: Process completed with exit code 1.\n```\n",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-20T11:03:15Z",
      "updated_at": "2025-11-21T21:35:22Z",
      "closed_at": "2025-11-21T21:35:22Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33913",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3557574741,
          "user": "maflcko",
          "body": "yeah, network requests should be retried.\n\nAn alternative could be to cache the bins, but I am not sure how large they are and if the diff is worth it. It could look something like this, if the simply retry does not improve things:\n\n\n```diff\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\nindex 7ba353a..3e2e1a1 100644\n--- a/.github/workflows/ci.yml\n+++ b/.github/workflows/ci.yml\n@@ -394,6 +394,7 @@ jobs:\n     env:\n       PYTHONUTF8: 1\n       TEST_RUNNER_TIMEOUT_FACTOR: 40\n+      CONTAINER_NAME: windows-native-test\n \n     steps:\n       - *ANNOTATION_PR_NUMBER\n@@ -452,6 +453,27 @@ jobs:\n         run: |\n           echo \"PREVIOUS_RELEASES_DIR=${{ runner.temp }}/previous_releases\" >> \"$GITHUB_ENV\"\n \n+      - name: Set previous releases hash\n+        run: |\n+          PREVIOUS_RELEASES_HASH=$(py -3 - <<'PY'\n+          import hashlib, subprocess\n+          data = subprocess.check_output([\"git\", \"ls-tree\", \"HEAD\", \"test/get_previous_releases.py\"])\n+          print(hashlib.sha256(data).hexdigest())\n+          PY)\n+          echo \"PREVIOUS_RELEASES_HASH=$PREVIOUS_RELEASES_HASH\" >> \"$GITHUB_ENV\"\n+\n+      - name: Restore previous releases cache\n+        id: previous-releases\n+        uses: actions/cache/restore@v4\n+        with:\n+          path: ${{ env.PREVIOUS_RELEASES_DIR }}\n+          key: previous-releases-${{ env.CONTAINER_NAME }}-${{ env.PREVIOUS_RELEASES_HASH }}\n+          restore-keys: |\n+            previous-releases-${{ env.CONTAINER_NAME }}-\n+\n+      - name: Record previous releases cache hit\n+        run: echo \"PREVIOUS_RELEASES_CACHE_HIT=${{ steps.previous-releases.outputs.cache-hit }}\" >> \"$GITHUB_ENV\"\n+\n       - name: Get previous releases\n         run: ./.github/get_previous_releases_with_retry.py --target-dir $PREVIOUS_RELEASES_DIR\n \n@@ -463,6 +485,13 @@ jobs:\n           TEST_RUNNER_EXTRA: ${{ github.event_name != 'pull_request' && '--extended' || '' }}\n         run: py -3 test/functional/test_runner.py --jobs $NUMBER_OF_PROCESSORS --ci --quiet --tmpdirprefix=\"$RUNNER_TEMP\" --combinedlogslen=99999999 --timeout-factor=$TEST_RUNNER_TIMEOUT_FACTOR $EXCLUDE $TEST_RUNNER_EXTRA\n \n+      - name: Save previous releases cache\n+        if: ${{ (github.event_name == 'push') && (github.ref_name == github.event.repository.default_branch) && (env.PREVIOUS_RELEASES_CACHE_HIT != 'true') }}\n+        uses: actions/cache/save@v4\n+        with:\n+          path: ${{ env.PREVIOUS_RELEASES_DIR }}\n+          key: previous-releases-${{ env.CONTAINER_NAME }}-${{ env.PREVIOUS_RELEASES_HASH }}\n+\n   ci-matrix:\n     name: ${{ matrix.name }}\n     needs: runners\n",
          "created_at": "2025-11-20T11:47:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2600,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1481,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3399209230,
      "number": 33351,
      "title": "Higher **reported** memory usage of Bitcoin Core after version 29",
      "body": "For versions of Bitcoin Core after 29.0, common utilities like `top` will report higher RAM usage of the `bitcoind` process than for previous Bitcoin Core versions.\n\nThe size of LevelDB files was increased from 2 MiB to 32 MiB in Bitcoin Core 29.0 (PR https://github.com/bitcoin/bitcoin/pull/30039). LevelDB caches its on-disk files using [`mmap`](https://en.wikipedia.org/wiki/Mmap) and will cache up to 1000 files by default, although our fork increased this number to 4096 (see https://github.com/bitcoin-core/leveldb-subtree/pull/52). This means that if there is enough available memory, the full chainstate database will be cached.\n\nHowever this is not memory actually *used* by the `bitcoind` process, only on-disk database files cached for faster future reads. Therefore in case of memory pressure, the host's kernel will not kill the `bitcoind` process but just drop the `mmap` pages. To be extra clear: **although common utilities will report that Bitcoin Core after 29.0 uses more memory it is not so and it will not lead to OOM**.",
      "state": "open",
      "user": "darosior",
      "created_at": "2025-09-09T16:53:40Z",
      "updated_at": "2025-11-21T21:25:24Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33351",
      "labels": [
        "Resource usage"
      ],
      "comment_data": [
        {
          "id": 3274820688,
          "user": "Raimo33",
          "body": "looks like a `top` issue to me.",
          "created_at": "2025-09-10T12:44:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 31,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3274837345,
          "user": "sipa",
          "body": "Yeah, it's just a reporting issue.\n\nThe behavior is largely unchanged: the OS will cache disk content in memory regardless if there is a spare physical memory. The difference is that with (more) mmap'ed content, that memory usage will be accounted for by the process itself as shared memory, while otherwise it'll be accounted for as kernel disk cache memory.",
          "created_at": "2025-09-10T12:48:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 359,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3275021850,
          "user": "darosior",
          "body": "Yes this issue is intended for documentation purpose, in case someone looking up for \"bitcoind higher memory usage\" on the tracker or a search engine.",
          "created_at": "2025-09-10T13:37:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 150,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3357203898,
          "user": "tyuxar",
          "body": "It is not just a reporting issue, there is a problem with the memory use of v29.\n\nI've been running Core in a FreeBSD jail for quite a long time (it's at 14.3p4 right now) and has been using the binary pkg.\n\nv28 used at most approximately 1-1.5 GB, but usually it was hovering around 6-800 MB RSS.\n\nv29 went up to slightly over 3GB shortly after startup, and remained there for 24+ hours. This is RSS! The virtual size was 12+ GB (I assume b/c of the mentioned LevelDB memory mapping).\n\nAs I'm running it on a fairly low powered x86 system (APU2) with only 4 GB RAM, it became quite annoying (it's not the only workload on the server).",
          "created_at": "2025-10-01T16:32:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 635,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3564638453,
          "user": "darosior",
          "body": "@tyuxar this is expected and what i explain in OP. If other applications start using memory, caching will be scaled down.",
          "created_at": "2025-11-21T21:25:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 121,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1107,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2927699406,
      "number": 32089,
      "title": "Failure to run Fuzz tests when running with corpus",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen running the fuzz tests with fuzz corpus raises an error \n```\nFUZZ=process_message build_fuzz/bin/fuzz qa-assets/fuzz_corpora/process_message/                                               ─╯\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 64371175\nINFO: Loaded 1 modules   (1252320 inline 8-bit counters): 1252320 [0x1061c8000, 0x1062f9be0), \nINFO: Loaded 1 PC tables (1252320 PCs): 1252320 [0x1062f9be0,0x1076159e0), \n=================================================================\n==36574==ERROR: AddressSanitizer: container-overflow on address 0x60800002c268 at pc 0x000102074ef4 bp 0x00016ddd26e0 sp 0x00016ddd26d8\nWRITE of size 8 at 0x60800002c268 thread T0\n    #0 0x000102074ef0 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::__init_copy_ctor_external(char const*, unsigned long)+0x1c4 (fuzz:arm64+0x100048ef0)\n    #1 0x0001057b34f8 in fuzzer::ListFilesInDirRecursive(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, long*, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>*, bool)+0x26c (fuzz:arm64+0x1037874f8)\n    #2 0x0001057b27c0 in fuzzer::GetSizedFilesFromDir(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>*)+0x2c (fuzz:arm64+0x1037867c0)\n    #3 0x0001057ae338 in fuzzer::ReadCorpora(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&)+0x4c (fuzz:arm64+0x103782338)\n    #4 0x0001057ae1a0 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1dbc (fuzz:arm64+0x1037821a0)\n    #5 0x0001057c1aa8 in main+0x24 (fuzz:arm64+0x103795aa8)\n    #6 0x00018ce70270  (<unknown module>)\n    #7 0xf3547ffffffffffc  (<unknown module>)\n\n0x60800002c268 is located 72 bytes inside of 96-byte region [0x60800002c220,0x60800002c280)\nallocated by thread T0 here:\n    #0 0x0001094d92c4 in _Znwm+0x6c (libclang_rt.asan_osx_dynamic.dylib:arm64+0x612c4)\n    #1 0x0001025f0a5c in std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>&)+0xf0 (fuzz:arm64+0x1005c4a5c)\n    #2 0x000102943a48 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>* std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)+0x244 (fuzz:arm64+0x100917a48)\n    #3 0x0001057b3468 in fuzzer::ListFilesInDirRecursive(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, long*, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>*, bool)+0x1dc (fuzz:arm64+0x103787468)\n    #4 0x0001057b27c0 in fuzzer::GetSizedFilesFromDir(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>*)+0x2c (fuzz:arm64+0x1037867c0)\n    #5 0x0001057ae338 in fuzzer::ReadCorpora(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&)+0x4c (fuzz:arm64+0x103782338)\n    #6 0x0001057ae1a0 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1dbc (fuzz:arm64+0x1037821a0)\n    #7 0x0001057c1aa8 in main+0x24 (fuzz:arm64+0x103795aa8)\n    #8 0x00018ce70270  (<unknown module>)\n    #9 0xf3547ffffffffffc  (<unknown module>)\n\nHINT: if you don't care about these errors you may set ASAN_OPTIONS=detect_container_overflow=0.\nIf you suspect a false positive see also: https://github.com/google/sanitizers/wiki/AddressSanitizerContainerOverflow.\nSUMMARY: AddressSanitizer: container-overflow (fuzz:arm64+0x100048ef0) in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::__init_copy_ctor_external(char const*, unsigned long)+0x1c4\nShadow bytes around the buggy address:\n  0x60800002bf80: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n  0x60800002c000: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c080: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n  0x60800002c100: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c180: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n=>0x60800002c200: fa fa fa fa 00 00 00 00 00 00 00 00 00[fc]fc fc\n  0x60800002c280: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c300: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 00\n  0x60800002c380: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c400: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x60800002c480: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==36574==ABORTING\n[3]    36574 abort      FUZZ=process_message build_fuzz/bin/fuzz \n\n```\n\nwhen running with without corpus , the fuzz test runs fine.\n```\n FUZZ=process_message build_fuzz/bin/fuzz                                                                                       ─╯\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 85124989\nINFO: Loaded 1 modules   (1252320 inline 8-bit counters): 1252320 [0x10672c000, 0x10685dbe0), \nINFO: Loaded 1 PC tables (1252320 PCs): 1252320 [0x10685dbe0,0x107b799e0), \nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 4096 bytes\nINFO: A corpus is not provided, starting from an empty corpus\n#2      INITED cov: 2748 ft: 2747 corp: 1/1b exec/s: 0 rss: 193Mb\n#6      NEW    cov: 2754 ft: 2848 corp: 2/2b lim: 4 exec/s: 0 rss: 193Mb L: 1/1 MS: 4 ChangeBinInt-ChangeBit-CopyPart-ChangeByte-\n#8      NEW    cov: 2754 ft: 2851 corp: 3/4b lim: 4 exec/s: 0 rss: 194Mb L: 2/2 MS: 2 CopyPart-InsertByte-\n#11     NEW    cov: 2757 ft: 2858 corp: 4/5b lim: 4 exec/s: 0 rss: 194Mb L: 1/2 MS: 3 ChangeBit-ChangeBinInt-ChangeBit-\n#26     NEW    cov: 2757 ft: 2859 corp: 5/7b lim: 4 exec/s: 0 rss: 194Mb L: 2/2 MS: 5 CrossOver-ChangeBit-ChangeByte-CrossOver-CrossOver-\n#27     NEW    cov: 2758 ft: 2878 corp: 6/8b lim: 4 exec/s: 0 rss: 194Mb L: 1/2 MS: 1 ChangeByte-\n#53     NEW    cov: 2758 ft: 2879 corp: 7/12b lim: 4 exec/s: 0 rss: 195Mb L: 4/4 MS: 1 CopyPart-\n#278    NEW    cov: 2759 ft: 2881 corp: 8/17b lim: 6 exec/s: 0 rss: 198Mb L: 5/5 MS: 5 ShuffleBytes-ChangeByte-EraseBytes-CrossOver-CrossOver-\n#364    NEW    cov: 2759 ft: 2882 corp: 9/18b lim: 6 exec/s: 0 rss: 200Mb L: 1/5 MS: 1 ChangeByte-\n#615    NEW    cov: 2759 ft: 2890 corp: 10/20b lim: 8 exec/s: 0 rss: 204Mb L: 2/5 MS: 1 InsertByte-\n#657    NEW    cov: 2759 ft: 2892 corp: 11/27b lim: 8 exec/s: 0 rss: 204Mb L: 7/7 MS: 2 ChangeByte-CopyPart-\n#692    NEW    cov: 2759 ft: 2893 corp: 12/34b lim: 8 exec/s: 0 rss: 205Mb L: 7/7 MS: 5 InsertRepeatedBytes-InsertByte-EraseBytes-ChangeBinInt-InsertRepeatedBytes-\n#1013   NEW    cov: 2759 ft: 2895 corp: 13/45b lim: 11 exec/s: 0 rss: 210Mb L: 11/11 MS: 1 InsertRepeatedBytes-\n#1341   NEW    cov: 2764 ft: 2901 corp: 14/58b lim: 14 exec/s: 0 rss: 215Mb L: 13/13 MS: 3 ChangeByte-InsertRepeatedBytes-InsertRepeatedBytes-\n#1347   NEW    cov: 2765 ft: 2902 corp: 15/61b lim: 14 exec/s: 0 rss: 215Mb L: 3/13 MS: 1 CrossOver-\n#1378   NEW    cov: 2765 ft: 2905 corp: 16/75b lim: 14 exec/s: 0 rss: 216Mb L: 14/14 MS: 1 InsertByte-\n#1716   NEW    cov: 2765 ft: 2908 corp: 17/91b lim: 17 exec/s: 0 rss: 221Mb L: 16/16 MS: 3 CrossOver-InsertRepeatedBytes-InsertRepeatedBytes-\n#1754   NEW    cov: 2765 ft: 2911 corp: 18/106b lim: 17 exec/s: 0 rss: 222Mb L: 15/16 MS: 3 InsertByte-ChangeBit-CopyPart-\n#1982   NEW    cov: 2766 ft: 2912 corp: 19/110b lim: 17 exec/s: 0 rss: 226Mb L: 4/16 MS: 3 ChangeBit-EraseBytes-ChangeBit-\n#2405   NEW    cov: 2767 ft: 2915 corp: 20/130b lim: 21 exec/s: 0 rss: 232Mb L: 20/20 MS: 3 InsertByte-InsertRepeatedBytes-InsertRepeatedBytes-\n#2418   NEW    cov: 2769 ft: 2917 corp: 21/151b lim: 21 exec/s: 0 rss: 233Mb L: 21/21 MS: 3 InsertRepeatedBytes-InsertByte-CrossOver-\n#2629   REDUCE cov: 2769 ft: 2917 corp: 21/150b lim: 21 exec/s: 0 rss: 236Mb L: 6/21 MS: 1 EraseBytes-\n        NEW_FUNC[1/19]: 0x0001034cb5bc in CNetAddr::IsRFC1918() const+0x0 (fuzz:arm64+0x100f3b5bc)\n        NEW_FUNC[2/19]: 0x0001034cbd94 in CNetAddr::IsRFC2544() const+0x0 (fuzz:arm64+0x100f3bd94)\n#3051   NEW    cov: 2881 ft: 3227 corp: 22/173b lim: 25 exec/s: 0 rss: 244Mb L: 23/23 MS: 2 InsertRepeatedBytes-InsertRepeatedBytes-\n#3071   REDUCE cov: 2881 ft: 3227 corp: 22/170b lim: 25 exec/s: 0 rss: 244Mb L: 3/23 MS: 5 ChangeBit-CrossOver-CMP-CrossOver-EraseBytes- DE: \"\\377\\377\\377\\377\"-\n        NEW_FUNC[1/11]: 0x0001025a7a5c in std::__1::vector<unsigned char, std::__1::allocator<unsigned char>>::shrink_to_fit()+0x0 (fuzz:arm64+0x100017a5c)\n        NEW_FUNC[2/11]: 0x0001025a8070 in std::__1::vector<unsigned char, \n```\n\n### Expected behaviour\n\nTo run the fuzz tests without any error and relevant log output.\n\n### Steps to reproduce\n\n```shell\ngit clone https://github.com/bitcoin-core/qa-assets\ncmake --preset=libfuzzer \\\n   -DCMAKE_C_COMPILER=\"$(brew --prefix llvm)/bin/clang\" \\\n   -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm)/bin/clang++\" \\\n   -DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld\"\n\ncmake --build build_fuzz -j$(sysctl -n hw.ncpu)\nFUZZ=process_message build_fuzz/bin/fuzz qa-assets/fuzz_corpora/process_message/      \n```\n\n\n\n### Relevant log output\n\nNA\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster @83a9e55ae1 \n\n### Operating system and version\n\nMacOS 15.3.1 \n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "Prabhat1308",
      "created_at": "2025-03-18T09:05:09Z",
      "updated_at": "2025-11-21T14:41:45Z",
      "closed_at": "2025-11-21T14:41:44Z",
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/32089",
      "labels": [
        "macOS",
        "Tests",
        "Upstream",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 2732222228,
          "user": "Prabhat1308",
          "body": "I tried running with the \n```\nASAN_OPTIONS=detect_container_overflow=0 FUZZ=process_message build_fuzz/bin/fuzz qa-assets/fuzz_corpora/process_message/\n```\nIt crashes with the following log \n```\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 917199606\nINFO: Loaded 1 modules   (1252320 inline 8-bit counters): 1252320 [0x109024000, 0x109155be0), \nINFO: Loaded 1 PC tables (1252320 PCs): 1252320 [0x109155be0,0x10a4719e0), \nINFO:     4126 files found in qa-assets/fuzz_corpora/process_message/\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 981836 bytes\nINFO: seed corpus: files: 4126 min: 1b max: 981836b total: 141648651b rss: 195Mb\nlibc++abi: terminating due to uncaught exception of type std::__1::ios_base::failure: DataStream::read(): end of data: unspecified iostream_category error\n==36931== ERROR: libFuzzer: deadly signal\n    #0 0x00010c34d248 in __sanitizer_print_stack_trace+0x28 (libclang_rt.asan_osx_dynamic.dylib:arm64+0x5d248)\n    #1 0x00010861d0a4 in fuzzer::PrintStackTrace()+0x2c (fuzz:arm64+0x1037950a4)\n    #2 0x000108610a58 in fuzzer::Fuzzer::CrashCallback()+0x54 (fuzz:arm64+0x103788a58)\n    #3 0x00018d226de0 in _sigtramp+0x34 (libsystem_platform.dylib:arm64+0x3de0)\n    #4 0x9e2380018d1eff6c  (<unknown module>)\n    #5 0xc23900018d0fc904  (<unknown module>)\n    #6 0x493e80018d1a6448  (<unknown module>)\n    #7 0x166a80018d194a20  (<unknown module>)\n    #8 0xfc5480018ce3d3f0  (<unknown module>)\n    #9 0x135b80018d1a570c  (<unknown module>)\n    #10 0xd05000018d1a8cd8  (<unknown module>)\n    #11 0x633f80018d1a8c80  (<unknown module>)\n    #12 0x9a7e0001050aac24  (<unknown module>)\n    #13 0x0001050bf008 in unsigned long long ReadCompactSize<DataStream>(DataStream&, bool)+0x110 (fuzz:arm64+0x100237008)\n    #14 0x000107720fbc in void VectorFormatter<DefaultFormatter>::Unser<DataStream, std::__1::vector<CInv, std::__1::allocator<CInv>>>(DataStream&, std::__1::vector<CInv, std::__1::allocator<CInv>>&)+0x1e8 (fuzz:arm64+0x102898fbc)\n    #15 0x000107652d3c in (anonymous namespace)::PeerManagerImpl::ProcessMessage(CNode&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, DataStream&, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000l>>, std::__1::atomic<bool> const&)+0x3cb4 (fuzz:arm64+0x1027cad3c)\n    #16 0x00010767f794 in (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::__1::atomic<bool>&)+0x24b0 (fuzz:arm64+0x1027f7794)\n    #17 0x000105647fa0 in process_message_fuzz_target(std::__1::span<unsigned char const, 18446744073709551615ul>)+0xaf8 (fuzz:arm64+0x1007bffa0)\n    #18 0x000105b366ec in LLVMFuzzerTestOneInput+0x198 (fuzz:arm64+0x100cae6ec)\n    #19 0x000108612004 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long)+0x12c (fuzz:arm64+0x10378a004)\n    #20 0x000108611884 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool, bool*)+0x3c (fuzz:arm64+0x103789884)\n    #21 0x0001086133c4 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>&)+0x470 (fuzz:arm64+0x10378b3c4)\n    #22 0x0001086137fc in fuzzer::Fuzzer::Loop(std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>&)+0x98 (fuzz:arm64+0x10378b7fc)\n    #23 0x00010860a1b4 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1dd0 (fuzz:arm64+0x1037821b4)\n    #24 0x00010861daa8 in main+0x24 (fuzz:arm64+0x103795aa8)\n    #25 0x00018ce70270  (<unknown module>)\n    #26 0x475cfffffffffffc  (<unknown module>)\n\nNOTE: libFuzzer has rudimentary signal handlers.\n      Combine libFuzzer with AddressSanitizer or similar for better crash reports.\nSUMMARY: libFuzzer: deadly signal\nMS: 0 ; base unit: 0000000000000000000000000000000000000000\n0x67,0x65,0x74,0x64,0x61,0x74,0x61,0x0,0x0,0x0,0x0,0x0,0x0,0x80,0x91,0x28,0x67,0x1,0x5c,0x9,0x5c,0x78,0x1,0x0,0x5e,0x78,0xc0,0x87,0x27,0xd8,0x9c,0xff,0xff,0xff,0xff,0x0,0xff,0xff,0x0,0x47,0x8b,0x0,0x82,0x7d,0x8b,0x7d,0x82,0x7d,0x82,0x1,0x0,0x0,0x0,0xa1,0x7d,0x82,0x7d,0xff,0xff,0xe9,0x7d,0x0,0x8b,0x8b,0x0,0x82,0xff,0xff,0x7d,0x7e,0x7d,0x82,0x1,0x0,0x0,0x0,0x73,0x65,0x6e,0x64,0x61,0x64,0x64,0x1c,0x0,0xb5,\ngetdata\\000\\000\\000\\000\\000\\000\\200\\221(g\\001\\\\\\011\\\\x\\001\\000^x\\300\\207'\\330\\234\\377\\377\\377\\377\\000\\377\\377\\000G\\213\\000\\202}\\213}\\202}\\202\\001\\000\\000\\000\\241}\\202}\\377\\377\\351}\\000\\213\\213\\000\\202\\377\\377}~}\\202\\001\\000\\000\\000sendadd\\034\\000\\265\nartifact_prefix='./'; Test unit written to ./crash-88926609e7277110e77b9c19c108b9df4835d6e7\nBase64: Z2V0ZGF0YQAAAAAAAICRKGcBXAlceAEAXnjAhyfYnP////8A//8AR4sAgn2LfYJ9ggEAAAChfYJ9///pfQCLiwCC//99fn2CAQAAAHNlbmRhZGQcALU=\n```\n\nhowever this seems to be specific to `process_message` target only . when I run it with `tx_package_eval` this works fine.\n\n```\nASAN_OPTIONS=detect_container_overflow=0 FUZZ=tx_package_eval build_fuzz/bin/fuzz  qa-assets/fuzz_corpora/tx_package_eval \n```\n```\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 1122799189\nINFO: Loaded 1 modules   (1252320 inline 8-bit counters): 1252320 [0x106cdc000, 0x106e0dbe0), \nINFO: Loaded 1 PC tables (1252320 PCs): 1252320 [0x106e0dbe0,0x1081299e0), \nINFO:     2435 files found in qa-assets/fuzz_corpora/tx_package_eval\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 999203 bytes\nINFO: seed corpus: files: 2435 min: 1b max: 999203b total: 112736936b rss: 192Mb\n#1024   pulse  cov: 12171 ft: 64557 corp: 629/83Kb exec/s: 256 rss: 286Mb\n```",
          "created_at": "2025-03-18T09:08:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 5554,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2733144415,
          "user": "brunoerg",
          "body": "I could reproduce it following the same steps on MacOS 14.3\n\n```\nFUZZ=process_message build_fuzz/bin/fuzz qa-assets/fuzz_corpora/process_message/\nfuzz(56832,0x1e31a5c40) malloc: nano zone abandoned due to inability to reserve vm space.\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 2192399851\nINFO: Loaded 1 modules   (1252322 inline 8-bit counters): 1252322 [0x104c38000, 0x104d69be2),\nINFO: Loaded 1 PC tables (1252322 PCs): 1252322 [0x104d69be8,0x106085a08),\n=================================================================\n==56832==ERROR: AddressSanitizer: container-overflow on address 0x60800002ca68 at pc 0x000100adcef4 bp 0x00016f36aa20 sp 0x00016f36aa18\nWRITE of size 8 at 0x60800002ca68 thread T0\n    #0 0x000100adcef0 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::__init_copy_ctor_external(char const*, unsigned long)+0x1c4 (fuzz:arm64+0x100048ef0)\n    #1 0x00010421b5bc in fuzzer::ListFilesInDirRecursive(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, long*, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>*, bool)+0x26c (fuzz:arm64+0x1037875bc)\n    #2 0x00010421a884 in fuzzer::GetSizedFilesFromDir(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>*)+0x2c (fuzz:arm64+0x103786884)\n    #3 0x0001042163fc in fuzzer::ReadCorpora(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&)+0x4c (fuzz:arm64+0x1037823fc)\n    #4 0x000104216264 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1dbc (fuzz:arm64+0x103782264)\n    #5 0x000104229b6c in main+0x24 (fuzz:arm64+0x103795b6c)\n    #6 0x00018c5590dc  (<unknown module>)\n    #7 0x9f697ffffffffffc  (<unknown module>)\n```\n\nFor reference: https://github.com/google/sanitizers/wiki/AddressSanitizerContainerOverflow#false-positives",
          "created_at": "2025-03-18T13:03:03Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2496,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2733160346,
          "user": "maflcko",
          "body": "I presume the `libfuzzer-nosan` preset works fine?",
          "created_at": "2025-03-18T13:08:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2733185782,
          "user": "Prabhat1308",
          "body": "> I presume the `libfuzzer-nosan` preset works fine?\n\nWorks fine. I do get these warning though on the start of the run .\n```\nWARNING: Failed to find function \"__sanitizer_acquire_crash_state\". Reason dlsym(RTLD_DEFAULT, __sanitizer_acquire_crash_state): symbol not found.\nWARNING: Failed to find function \"__sanitizer_print_stack_trace\". Reason dlsym(RTLD_DEFAULT, __sanitizer_print_stack_trace): symbol not found.\nWARNING: Failed to find function \"__sanitizer_set_death_callback\". Reason dlsym(RTLD_DEFAULT, __sanitizer_set_death_callback): symbol not found.\n```",
          "created_at": "2025-03-18T13:16:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 564,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2734905310,
          "user": "brunoerg",
          "body": "Worth adding this \"false positive\" information to the documentation?",
          "created_at": "2025-03-18T22:51:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 68,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2737863589,
          "user": "maflcko",
          "body": "> libc++abi: terminating due to uncaught exception of type std::__1::ios_base::failure: DataStream::read(): end of data: unspecified iostream_category error\n\nThis looks like an upstream packaging bug or asan bug on your platform, given that it passes fine when asan is disabled on your platform.",
          "created_at": "2025-03-19T19:35:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 295,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2756991853,
          "user": "maflcko",
          "body": "Does the issue happen with all clang versions from brew? (clang-16 to clang-20)?\n\nDoes the issue happen when compiling clang from source?",
          "created_at": "2025-03-27T07:24:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 137,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2757479417,
          "user": "Prabhat1308",
          "body": "I suspect this issue is because of the `-DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld\"` flag.\n\nOther than my default llvm19 , I used llvm@18 downloaded via brew which comes with clang 18 I used 2 different configs\n\n```\nmake --preset=libfuzzer \\                                                                                                       \n    -DCMAKE_C_COMPILER=\"$(brew --prefix llvm@18)/bin/clang\" \\\n    -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm@18)/bin/clang++\" \\\n    -DAPPEND_LDFLAGS=\"-Wl,-no_warn_duplicate_libraries\" \\\n    -DCMAKE_EXE_LINKER_FLAGS=\"$LDFLAGS\"\n```\n\n<details>\n<summary> Output </summary>\n\n```\n\n/opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:495:12: runtime error: call to function decltype(auto) std::__1::__variant_detail::__visitation::__base::__dispatcher<0ul, 0ul>::__dispatch[abi:ne180100]<void std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>::__generic_construct[abi:ne180100]<std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>>(std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>&, std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&&)::'lambda'(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&, auto&&)&&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&>(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&) through pointer to incorrect function type 'void (*)((lambda at /opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:814:11) &&, std::__variant_detail::__base<std::__variant_detail::_Trait::_Available, RPCArg::Optional, std::string, UniValue> &, std::__variant_detail::__base<std::__variant_detail::_Trait::_Available, RPCArg::Optional, std::string, UniValue> &&)'\nvariant:532: note: decltype(auto) std::__1::__variant_detail::__visitation::__base::__dispatcher<0ul, 0ul>::__dispatch[abi:ne180100]<void std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>::__generic_construct[abi:ne180100]<std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>>(std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>&, std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&&)::'lambda'(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&, auto&&)&&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&>(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&) defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:495:12 \n/Users/prabhatverma/projects/bitcoin/src/rpc/server.h:100:15: runtime error: call to function getblockchaininfo() through pointer to incorrect function type 'RPCHelpMan (*)()'\nblockchain.cpp:1291: note: getblockchaininfo() defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/rpc/server.h:100:15 \n/Users/prabhatverma/projects/bitcoin/src/rpc/server.h:102:15: runtime error: call to function getblockchaininfo() through pointer to incorrect function type 'RPCHelpMan (*)()'\nblockchain.cpp:1291: note: getblockchaininfo() defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/rpc/server.h:102:15 \n/Users/prabhatverma/projects/bitcoin/src/tinyformat.h:544:13: runtime error: call to function void tinyformat::detail::FormatArg::formatImpl<char [13]>(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, char const*, char const*, int, void const*) through pointer to incorrect function type 'void (*)(std::ostream &, const char *, const char *, int, const void *)'\ntinyformat.h:558: note: void tinyformat::detail::FormatArg::formatImpl<char [13]>(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, char const*, char const*, int, void const*) defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/tinyformat.h:544:13 \nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 1206976568\nINFO: Loaded 1 modules   (1257184 inline 8-bit counters): 1257184 [0x103ed4a48, 0x104007928), \nINFO: Loaded 1 PC tables (1257184 PCs): 1257184 [0x104007928,0x105336728), \nINFO:     4374 files found in qa-assets/fuzz_corpora/process_message/\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 981836 bytes\nINFO: seed corpus: files: 4374 min: 1b max: 981836b total: 152590538b rss: 195Mb\n#2048   pulse  cov: 14987 ft: 33197 corp: 969/143Kb exec/s: 1024 rss: 435Mb\n#4096   pulse  cov: 17387 ft: 57266 corp: 1814/795Kb exec/s: 1024 rss: 435Mb\n^C==35105== libFuzzer: run interrupted; exiting\n\n```\n</details>\n\nThis is what the initial response was before this [PR](https://github.com/bitcoin/bitcoin/pull/31954) where the exe flag was added .\n\nUsing the new config with llvm@18\n```\ncmake --preset=libfuzzer \\\n    -DCMAKE_C_COMPILER=\"$(brew --prefix llvm@18)/bin/clang\" \\\n    -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm@18)/bin/clang++\" \\\n    -DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld\"\n```\n\n<details>\n<summary>Output</summary>\n\n```\n\n/opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:495:12: runtime error: call to function decltype(auto) std::__1::__variant_detail::__visitation::__base::__dispatcher<0ul, 0ul>::__dispatch[abi:ne180100]<void std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>::__generic_construct[abi:ne180100]<std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>>(std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>&, std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&&)::'lambda'(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&, auto&&)&&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&>(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&) through pointer to incorrect function type 'void (*)((lambda at /opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:814:11) &&, std::__variant_detail::__base<std::__variant_detail::_Trait::_Available, RPCArg::Optional, std::string, UniValue> &, std::__variant_detail::__base<std::__variant_detail::_Trait::_Available, RPCArg::Optional, std::string, UniValue> &&)'\n(fuzz:arm64+0x101536194): note: decltype(auto) std::__1::__variant_detail::__visitation::__base::__dispatcher<0ul, 0ul>::__dispatch[abi:ne180100]<void std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>::__generic_construct[abi:ne180100]<std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>>(std::__1::__variant_detail::__ctor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>>&, std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&&)::'lambda'(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>&, auto&&)&&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&>(std::__1::__variant_detail::__move_constructor<std::__1::__variant_detail::__traits<RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>, (std::__1::__variant_detail::_Trait)1>, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&, std::__1::__variant_detail::__base<(std::__1::__variant_detail::_Trait)1, RPCArg::Optional, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, UniValue>&&) defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /opt/homebrew/opt/llvm@18/bin/../include/c++/v1/variant:495:12 \n/Users/prabhatverma/projects/bitcoin/src/rpc/server.h:100:15: runtime error: call to function getblockchaininfo() through pointer to incorrect function type 'RPCHelpMan (*)()'\n(fuzz:arm64+0x1020d8d8c): note: getblockchaininfo() defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/rpc/server.h:100:15 \n/Users/prabhatverma/projects/bitcoin/src/rpc/server.h:102:15: runtime error: call to function getblockchaininfo() through pointer to incorrect function type 'RPCHelpMan (*)()'\n(fuzz:arm64+0x1020d8d8c): note: getblockchaininfo() defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/rpc/server.h:102:15 \n/Users/prabhatverma/projects/bitcoin/src/tinyformat.h:544:13: runtime error: call to function void tinyformat::detail::FormatArg::formatImpl<char [13]>(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, char const*, char const*, int, void const*) through pointer to incorrect function type 'void (*)(std::ostream &, const char *, const char *, int, const void *)'\n(fuzz:arm64+0x100b9c7cc): note: void tinyformat::detail::FormatArg::formatImpl<char [13]>(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, char const*, char const*, int, void const*) defined here\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /Users/prabhatverma/projects/bitcoin/src/tinyformat.h:544:13 \nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 1461236862\nINFO: Loaded 1 modules   (1257184 inline 8-bit counters): 1257184 [0x107780000, 0x1078b2ee0), \nINFO: Loaded 1 PC tables (1257184 PCs): 1257184 [0x1078b2ee0,0x108be1ce0), \n=================================================================\n==41097==ERROR: AddressSanitizer: container-overflow on address 0x60800002c268 at pc 0x000104784be4 bp 0x00016b6c2710 sp 0x00016b6c2708\nWRITE of size 8 at 0x60800002c268 thread T0\n    #0 0x104784be0 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::__init_copy_ctor_external(char const*, unsigned long)+0x2b4 (fuzz:arm64+0x100048be0)\n    #1 0x106ed8d2c in fuzzer::ListFilesInDirRecursive(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, long*, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>*, bool)+0x21c (fuzz:arm64+0x10279cd2c)\n    #2 0x106ed80dc in fuzzer::GetSizedFilesFromDir(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>*)+0x2c (fuzz:arm64+0x10279c0dc)\n    #3 0x106ed3848 in fuzzer::ReadCorpora(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&)+0x4c (fuzz:arm64+0x102797848)\n    #4 0x106ed36b0 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1c80 (fuzz:arm64+0x1027976b0)\n    #5 0x106ee7848 in main+0x24 (fuzz:arm64+0x1027ab848)\n    #6 0x18ce70270  (<unknown module>)\n    #7 0x1a2c7ffffffffffc  (<unknown module>)\n\n0x60800002c268 is located 72 bytes inside of 96-byte region [0x60800002c220,0x60800002c280)\nallocated by thread T0 here:\n    #0 0x10a7ececc in _Znwm+0x6c (libclang_rt.asan_osx_dynamic.dylib:arm64+0x60ecc)\n    #1 0x104cad68c in std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>&)+0xf0 (fuzz:arm64+0x10057168c)\n    #2 0x104f26814 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>* std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)+0x230 (fuzz:arm64+0x1007ea814)\n    #3 0x106ed8cb8 in fuzzer::ListFilesInDirRecursive(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, long*, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>*, bool)+0x1a8 (fuzz:arm64+0x10279ccb8)\n    #4 0x106ed80dc in fuzzer::GetSizedFilesFromDir(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&, std::__1::vector<fuzzer::SizedFile, std::__1::allocator<fuzzer::SizedFile>>*)+0x2c (fuzz:arm64+0x10279c0dc)\n    #5 0x106ed3848 in fuzzer::ReadCorpora(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>> const&)+0x4c (fuzz:arm64+0x102797848)\n    #6 0x106ed36b0 in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long))+0x1c80 (fuzz:arm64+0x1027976b0)\n    #7 0x106ee7848 in main+0x24 (fuzz:arm64+0x1027ab848)\n    #8 0x18ce70270  (<unknown module>)\n    #9 0x1a2c7ffffffffffc  (<unknown module>)\n\nHINT: if you don't care about these errors you may set ASAN_OPTIONS=detect_container_overflow=0.\nIf you suspect a false positive see also: https://github.com/google/sanitizers/wiki/AddressSanitizerContainerOverflow.\nSUMMARY: AddressSanitizer: container-overflow (fuzz:arm64+0x100048be0) in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>::__init_copy_ctor_external(char const*, unsigned long)+0x2b4\nShadow bytes around the buggy address:\n  0x60800002bf80: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n  0x60800002c000: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c080: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n  0x60800002c100: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c180: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n=>0x60800002c200: fa fa fa fa 00 00 00 00 00 00 00 00 00[fc]fc fc\n  0x60800002c280: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c300: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 00\n  0x60800002c380: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 fa\n  0x60800002c400: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x60800002c480: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==41097==ABORTING\n[2]    41097 abort      FUZZ=process_message build_fuzz/bin/fuzz \n\n```\n</details>\n\nAlthough not completely sure if this is the right config since runtime errors still appears but the bug is introduced in llvm18 also because of this. \n\nCan reproduce this with llvm16 too using\n```\ncmake --preset=libfuzzer \\                                                                                                 \n    -DCMAKE_C_COMPILER=\"$(brew --prefix llvm@16)/bin/clang\" \\\n    -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm@16)/bin/clang++\" \\\n    -DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld\"\n```\n\n\n",
          "created_at": "2025-03-27T10:10:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 22082,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2773231856,
          "user": "Crypt-iQ",
          "body": "I was able to run the fuzz tests with sanitizers + corpus on macOS 15.4 with the following:\n```console\ncmake -B build -DCMAKE_C_COMPILER=\"clang\" -DCMAKE_CXX_COMPILER=\"clang++\" -DBUILD_FOR_FUZZING=ON -DSANITIZERS=\"undefined,address,fuzzer\"\ncmake --build build -j8\nFUZZ=process_message build/bin/fuzz process-message-corpus\n```\n\nI did get some ubsan errors before it started fuzzing, but then it worked smoothly after that. My `clang` is aliased to brew-installed clang and I didn't need to use `-fuse-ld=lld`.",
          "created_at": "2025-04-02T17:18:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 508,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2773265571,
          "user": "Prabhat1308",
          "body": "> I was able to run the fuzz tests with sanitizers + corpus on macOS 15.4 with the following:\n> \n> cmake -B build -DCMAKE_C_COMPILER=\"clang\" -DCMAKE_CXX_COMPILER=\"clang++\" -DBUILD_FOR_FUZZING=ON -DSANITIZERS=\"undefined,address,fuzzer\"\n> cmake --build build -j8\n> FUZZ=process_message build/bin/fuzz process-message-corpus\n> I did get some ubsan errors before it started fuzzing, but then it worked smoothly after that. My `clang` is aliased to brew-installed clang and I didn't need to use `-fuse-ld=lld`.\n\nI am running on macOS with 15.3.1 and running your command I get linker error while building. Can you share more about your clang versions and other dependencies ?\n",
          "created_at": "2025-04-02T17:34:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 671,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2773308034,
          "user": "Crypt-iQ",
          "body": "> I am running on macOS with 15.3.1 and running your command I get linker error while building. Can you share more about your clang versions and other dependencies ?\n\nI'm using clang 18.1.8, what linker errors are you getting?\n\n<details>\n<summary>Output of the `cmake -B build` step </summary>\n<br>\n\n```console\neugenesiegel@Eugenes-MacBook-Air-2 bitcoin % cmake -B build -DCMAKE_C_COMPILER=\"clang\" -DCMAKE_CXX_COMPILER=\"clang++\" -DBUILD_FOR_FUZZING=ON -DSANITIZERS=\"undefined,address,fuzzer\"\nCMake Warning at CMakeLists.txt:216 (message):\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\n  BUILD_FUZZ_BINARY=ON.\n\n\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK - Success\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK_6231\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK_6231 - Success\n-- Could NOT find Python3 (missing: Python3_EXECUTABLE Interpreter) (Required is at least version \"3.10\")\n    Reason given by package: \n        Interpreter: Wrong version for the interpreter \"/usr/bin/python3\"\n\n-- Could NOT find Doxygen (missing: DOXYGEN_EXECUTABLE dot) \n\nConfiguring secp256k1 subtree...\n-- Could NOT find Valgrind (missing: Valgrind_INCLUDE_DIR Valgrind_WORKS) \n\n\nsecp256k1 configure summary\n===========================\nBuild artifacts:\n  library type ........................ Static\nOptional modules:\n  ECDH ................................ OFF\n  ECDSA pubkey recovery ............... ON\n  extrakeys ........................... ON\n  schnorrsig .......................... ON\n  musig ............................... OFF\n  ElligatorSwift ...................... ON\nParameters:\n  ecmult window size .................. 15\n  ecmult gen table size ............... 86 KiB\nOptional features:\n  assembly ............................ OFF\n  external callbacks .................. OFF\nOptional binaries:\n  benchmark ........................... OFF\n  noverify_tests ...................... OFF\n  tests ............................... OFF\n  exhaustive tests .................... OFF\n  ctime_tests ......................... OFF\n  examples ............................ OFF\n\nCross compiling ....................... FALSE\nValgrind .............................. OFF\nPreprocessor defined macros ........... ENABLE_MODULE_ELLSWIFT=1 ENABLE_MODULE_SCHNORRSIG=1 ENABLE_MODULE_EXTRAKEYS=1 ENABLE_MODULE_RECOVERY=1 ECMULT_WINDOW_SIZE=15 COMB_BLOCKS=43 COMB_TEETH=6\nC compiler ............................ Clang 18.1.8, /opt/homebrew/Cellar/llvm@18/18.1.8/bin/clang\nCFLAGS ................................ \nCompile options ....................... -pedantic -Wall -Wcast-align -Wconditional-uninitialized -Wextra -Wnested-externs -Wno-long-long -Wno-overlength-strings -Wno-unused-function -Wreserved-identifier -Wshadow -Wstrict-prototypes -Wundef\nBuild type:\n - CMAKE_BUILD_TYPE ................... RelWithDebInfo\n - CFLAGS ............................. -O2 -g \n - LDFLAGS for executables ............ \n - LDFLAGS for shared libraries ....... \nSECP256K1_APPEND_CFLAGS ............... -fsanitize=undefined,address,fuzzer-no-link\nSECP256K1_APPEND_LDFLAGS .............. -fsanitize=undefined,address,fuzzer-no-link\n\n\n\nConfigure summary\n=================\nExecutables:\n  bitcoind ............................ OFF\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... OFF\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... OFF\n  bitcoin-tx .......................... OFF\n  bitcoin-util ........................ OFF\n  bitcoin-wallet ...................... OFF\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... ON\n   - legacy wallets (Berkeley DB) ..... OFF\n  external signer ..................... OFF\n  ZeroMQ .............................. OFF\n  USDT tracing ........................ OFF\n  QR code (GUI) ....................... OFF\n  DBus (GUI, Linux only) .............. OFF\nTests:\n  test_bitcoin ........................ OFF\n  test_bitcoin-qt ..................... OFF\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... ON\n\nCross compiling ....................... FALSE\nC++ compiler .......................... Clang 18.1.8, /opt/homebrew/Cellar/llvm@18/18.1.8/bin/clang++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ........... FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION OBJC_OLD_DISPATCH_PROTOTYPES=0\nC++ compiler flags .................... -O2 -g -std=c++20 -fPIC -fdebug-prefix-map=/Users/eugenesiegel/btc/bitcoin/src=. -fmacro-prefix-map=/Users/eugenesiegel/btc/bitcoin/src=. -fsanitize=undefined,address,fuzzer-no-link -Wall -Wextra -Wgnu -Wformat -Wformat-security -Wvla -Wshadow-field -Wthread-safety -Wloop-analysis -Wredundant-decls -Wunused-member-function -Wdate-time -Wconditional-uninitialized -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wdocumentation -Wself-assign -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -mbranch-protection=bti\nLinker flags .......................... -O2 -g -Wl,-dead_strip -Wl,-dead_strip_dylibs -Wl,-headerpad_max_install_names -fsanitize=undefined,address,fuzzer-no-link -fstack-protector-all -Wl,-fixup_chains -fPIE -Xlinker -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nAttempt to harden executables ......... ON\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. OFF\n\n\n  ******\n\nCMake Warning at CMakeLists.txt:702 (message):\n  Minimum required Python not found.  Utils and rpcauth tests are disabled.\n\n\n  ******\n\n-- Configuring done (0.6s)\n-- Generating done (0.1s)\n-- Build files have been written to: /Users/eugenesiegel/btc/bitcoin/build\n```\n\n</details>",
          "created_at": "2025-04-02T17:55:12Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 6108,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2773325328,
          "user": "Prabhat1308",
          "body": "> > I am running on macOS with 15.3.1 and running your command I get linker error while building. Can you share more about your clang versions and other dependencies ?\n> \n> I'm using clang 18.1.8, what linker errors are you getting?\n> \n> Output of the `cmake -B build` step\n\nThe error is when I run `cmake --build build -j$(sysctl -n hw.ncpu)`\n\n<details>\n<summary>Output</summary>\n\n```\n[  0%] Building CXX object src/crypto/CMakeFiles/bitcoin_crypto.dir/aes.cpp.o\n...\n...\n...\n[100%] Linking CXX executable ../../../bin/fuzz\nld: warning: ignoring duplicate libraries: '-lc++', '../../../lib/libbitcoin_common.a', '../../../lib/libbitcoin_util.a', '../../libleveldb.a', '../../libminisketch.a', '../../secp256k1/lib/libsecp256k1.a', '../../univalue/libunivalue.a'\nld: multiple errors: invalid r_symbolnum=1 in '/Users/prabhatverma/projects/bitcoin/build/src/test/fuzz/CMakeFiles/fuzz.dir/overflow.cpp.o'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_cli.a[2](stdin.cpp.o)'; invalid r_symbolnum=1 in '../../libcrc32c.a[4](crc32c_arm64.cc.o)'; invalid r_symbolnum=1 in '../../libcrc32c.a[3](crc32c_portable.cc.o)'; invalid r_symbolnum=1 in '../../libcrc32c.a[2](crc32c.cc.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_consensus.a[11](script_error.cpp.o)'; invalid r_symbolnum=18 in '../../../lib/libbitcoin_crypto.a[19](sha256_arm_shani.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_crypto.a[15](sha3.cpp.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[37](logging.cc.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[35](hash.cc.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_crypto.a[10](poly1305.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_crypto.a[5](hex_base.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[29](randomenv.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libtest_util.a[13](str.cpp.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[31](crc32c.cc.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[27](bloom.cc.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_consensus.a[5](hash.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[27](logging.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[24](threadnames.cpp.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[8](filename.cc.o)'; invalid r_symbolnum=1 in '../../../lib/libtest_util.a[5](index.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[16](serfloat.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libtest_util.a[3](coins.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[15](readwritefile.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[14](rbf.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[48](parsing.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[9](feefrac.cpp.o)'; invalid r_symbolnum=1 in '../../libleveldb.a[2](builder.cc.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_util.a[6](chaintype.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[43](request.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[39](pow.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[85](torcontrol.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[31](merkleblock.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[25](deploymentinfo.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[22](compressor.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[21](url.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_common.a[17](run_command.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[64](fees_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[53](peerman_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[50](miner.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[49](mempool_persist_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[42](database_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[40](connection_types.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[39](coins_view_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[38](coin.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[37](chainstatemanager_args.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[35](caches.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[33](blockmanager_args.cpp.o)'; invalid r_symbolnum=3 in '../../../lib/libbitcoin_node.a[30](net_processing.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[27](mempool_removal_reason.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[22](checks.cpp.o)'; invalid r_symbolnum=1 in '../../../lib/libbitcoin_node.a[21](chain.cpp.o)'\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [bin/fuzz] Error 1\nmake[1]: *** [src/test/fuzz/CMakeFiles/fuzz.dir/all] Error 2\nmake: *** [all] Error 2\n```\n</details>",
          "created_at": "2025-04-02T18:02:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 5098,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2775798921,
          "user": "Crypt-iQ",
          "body": "What version of `ld` are you using?",
          "created_at": "2025-04-03T13:29:49Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 35,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2776108518,
          "user": "Prabhat1308",
          "body": "> What version of `ld` are you using?\n\n16.0.0",
          "created_at": "2025-04-03T15:08:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 45,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2776227923,
          "user": "Crypt-iQ",
          "body": "> 16.0.0\n\nThis matches my `ld` -- can you share the output of the configure step when running the above command?",
          "created_at": "2025-04-03T15:43:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 112,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2776245517,
          "user": "Prabhat1308",
          "body": "Running\n```\ncmake -B build -DCMAKE_C_COMPILER=\"clang\" -DCMAKE_CXX_COMPILER=\"clang++\" -DBUILD_FOR_FUZZING=ON -DSANITIZERS=\"undefined,address,fuzzer\"\n```\n\n<details>\n<summary>Output</summary>\n\n```\n\n-- The CXX compiler identification is Clang 19.1.7\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /opt/homebrew/opt/llvm/bin/clang++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Setting build type to \"RelWithDebInfo\" as none was specified\n-- Performing Test CXX_SUPPORTS__WERROR\n-- Performing Test CXX_SUPPORTS__WERROR - Success\n-- Performing Test CXX_SUPPORTS__G3\n-- Performing Test CXX_SUPPORTS__G3 - Success\n-- Performing Test LINKER_SUPPORTS__G3\n-- Performing Test LINKER_SUPPORTS__G3 - Success\n-- Performing Test CXX_SUPPORTS__FTRAPV\n-- Performing Test CXX_SUPPORTS__FTRAPV - Success\n-- Performing Test LINKER_SUPPORTS__FTRAPV\n-- Performing Test LINKER_SUPPORTS__FTRAPV - Success\n-- Found SQLite3: /Library/Developer/CommandLineTools/SDKs/MacOSX15.2.sdk/usr/include (found suitable version \"3.43.2\", minimum required is \"3.7.17\")\nCMake Warning at CMakeLists.txt:216 (message):\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\n  BUILD_FUZZ_BINARY=ON.\n\n\n-- Performing Test LINKER_SUPPORTS__WL__FATAL_WARNINGS\n-- Performing Test LINKER_SUPPORTS__WL__FATAL_WARNINGS - Success\n-- Performing Test LINKER_SUPPORTS__WL__DEAD_STRIP\n-- Performing Test LINKER_SUPPORTS__WL__DEAD_STRIP - Success\n-- Performing Test LINKER_SUPPORTS__WL__DEAD_STRIP_DYLIBS\n-- Performing Test LINKER_SUPPORTS__WL__DEAD_STRIP_DYLIBS - Success\n-- Performing Test LINKER_SUPPORTS__WL__HEADERPAD_MAX_INSTALL_NAMES\n-- Performing Test LINKER_SUPPORTS__WL__HEADERPAD_MAX_INSTALL_NAMES - Success\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\n-- Found Threads: TRUE\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK - Success\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK_6231\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER_NO_LINK_6231 - Success\n-- Performing Test FUZZ_BINARY_LINKS_WITHOUT_MAIN_FUNCTION\n-- Performing Test FUZZ_BINARY_LINKS_WITHOUT_MAIN_FUNCTION - Success\n-- Found Boost: /opt/homebrew/include (found suitable version \"1.87.0\", minimum required is \"1.73.0\")\n-- Performing Test NO_DIAGNOSTICS_BOOST_NO_CXX98_FUNCTION_BASE\n-- Performing Test NO_DIAGNOSTICS_BOOST_NO_CXX98_FUNCTION_BASE - Failed\n-- Found PkgConfig: /opt/homebrew/bin/pkg-config (found version \"2.3.0\")\n-- Found Libevent: /opt/homebrew/Cellar/libevent/2.1.12_1/lib (found suitable version \"2.1.12-stable\", minimum required is \"2.1.8\")\n-- Performing Test HAVE_EVHTTP_CONNECTION_GET_PEER_CONST_CHAR\n-- Performing Test HAVE_EVHTTP_CONNECTION_GET_PEER_CONST_CHAR - Failed\n-- Looking for C++ include sys/prctl.h\n-- Looking for C++ include sys/prctl.h - not found\n-- Looking for C++ include sys/resources.h\n-- Looking for C++ include sys/resources.h - not found\n-- Looking for C++ include sys/vmmeter.h\n-- Looking for C++ include sys/vmmeter.h - found\n-- Looking for C++ include vm/vm_param.h\n-- Looking for C++ include vm/vm_param.h - not found\n-- Looking for O_CLOEXEC\n-- Looking for O_CLOEXEC - found\n-- Looking for fdatasync\n-- Looking for fdatasync - not found\n-- Looking for fork\n-- Looking for fork - found\n-- Looking for pipe2\n-- Looking for pipe2 - not found\n-- Looking for setsid\n-- Looking for setsid - found\n-- Looking for C++ include sys/types.h\n-- Looking for C++ include sys/types.h - found\n-- Looking for C++ include ifaddrs.h\n-- Looking for C++ include ifaddrs.h - found\n-- Performing Test IFADDR_LINKS_WITHOUT_LIBSOCKET\n-- Performing Test IFADDR_LINKS_WITHOUT_LIBSOCKET - Success\n-- Performing Test STD_ATOMIC_LINKS_WITHOUT_LIBATOMIC\n-- Performing Test STD_ATOMIC_LINKS_WITHOUT_LIBATOMIC - Success\n-- Looking for std::system\n-- Looking for std::system - found\n-- Looking for ::_wsystem\n-- Looking for ::_wsystem - not found\n-- Performing Test STRERROR_R_CHAR_P\n-- Performing Test STRERROR_R_CHAR_P - Failed\n-- Looking for malloc_info\n-- Looking for malloc_info - not found\n-- Performing Test HAVE_MALLOPT_ARENA_MAX\n-- Performing Test HAVE_MALLOPT_ARENA_MAX - Failed\n-- Performing Test HAVE_POSIX_FALLOCATE\n-- Performing Test HAVE_POSIX_FALLOCATE - Failed\n-- Performing Test HAVE_STRONG_GETAUXVAL\n-- Performing Test HAVE_STRONG_GETAUXVAL - Failed\n-- Performing Test HAVE_SOCKADDR_UN\n-- Performing Test HAVE_SOCKADDR_UN - Success\n-- Performing Test HAVE_GETRANDOM\n-- Performing Test HAVE_GETRANDOM - Failed\n-- Performing Test HAVE_GETENTROPY_RAND\n-- Performing Test HAVE_GETENTROPY_RAND - Success\n-- Performing Test HAVE_SYSCTL\n-- Performing Test HAVE_SYSCTL - Success\n-- Performing Test HAVE_SYSCTL_ARND\n-- Performing Test HAVE_SYSCTL_ARND - Failed\n-- Performing Test HAVE_SSE41\n-- Performing Test HAVE_SSE41 - Failed\n-- Performing Test HAVE_AVX2\n-- Performing Test HAVE_AVX2 - Failed\n-- Performing Test HAVE_X86_SHANI\n-- Performing Test HAVE_X86_SHANI - Failed\n-- Performing Test HAVE_ARM_SHANI\n-- Performing Test HAVE_ARM_SHANI - Success\n-- Performing Test CXX_SUPPORTS__WALL\n-- Performing Test CXX_SUPPORTS__WALL - Success\n-- Performing Test CXX_SUPPORTS__WEXTRA\n-- Performing Test CXX_SUPPORTS__WEXTRA - Success\n-- Performing Test CXX_SUPPORTS__WGNU\n-- Performing Test CXX_SUPPORTS__WGNU - Success\n-- Performing Test CXX_SUPPORTS__WFORMAT__WFORMAT_SECURITY\n-- Performing Test CXX_SUPPORTS__WFORMAT__WFORMAT_SECURITY - Success\n-- Performing Test CXX_SUPPORTS__WVLA\n-- Performing Test CXX_SUPPORTS__WVLA - Success\n-- Performing Test CXX_SUPPORTS__WSHADOW_FIELD\n-- Performing Test CXX_SUPPORTS__WSHADOW_FIELD - Success\n-- Performing Test CXX_SUPPORTS__WTHREAD_SAFETY\n-- Performing Test CXX_SUPPORTS__WTHREAD_SAFETY - Success\n-- Performing Test CXX_SUPPORTS__WLOOP_ANALYSIS\n-- Performing Test CXX_SUPPORTS__WLOOP_ANALYSIS - Success\n-- Performing Test CXX_SUPPORTS__WREDUNDANT_DECLS\n-- Performing Test CXX_SUPPORTS__WREDUNDANT_DECLS - Success\n-- Performing Test CXX_SUPPORTS__WUNUSED_MEMBER_FUNCTION\n-- Performing Test CXX_SUPPORTS__WUNUSED_MEMBER_FUNCTION - Success\n-- Performing Test CXX_SUPPORTS__WDATE_TIME\n-- Performing Test CXX_SUPPORTS__WDATE_TIME - Success\n-- Performing Test CXX_SUPPORTS__WCONDITIONAL_UNINITIALIZED\n-- Performing Test CXX_SUPPORTS__WCONDITIONAL_UNINITIALIZED - Success\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES - Failed\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_COND\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_COND - Failed\n-- Performing Test CXX_SUPPORTS__WLOGICAL_OP\n-- Performing Test CXX_SUPPORTS__WLOGICAL_OP - Failed\n-- Performing Test CXX_SUPPORTS__WOVERLOADED_VIRTUAL\n-- Performing Test CXX_SUPPORTS__WOVERLOADED_VIRTUAL - Success\n-- Performing Test CXX_SUPPORTS__WSUGGEST_OVERRIDE\n-- Performing Test CXX_SUPPORTS__WSUGGEST_OVERRIDE - Success\n-- Performing Test CXX_SUPPORTS__WIMPLICIT_FALLTHROUGH\n-- Performing Test CXX_SUPPORTS__WIMPLICIT_FALLTHROUGH - Success\n-- Performing Test CXX_SUPPORTS__WUNREACHABLE_CODE\n-- Performing Test CXX_SUPPORTS__WUNREACHABLE_CODE - Success\n-- Performing Test CXX_SUPPORTS__WDOCUMENTATION\n-- Performing Test CXX_SUPPORTS__WDOCUMENTATION - Success\n-- Performing Test CXX_SUPPORTS__WSELF_ASSIGN\n-- Performing Test CXX_SUPPORTS__WSELF_ASSIGN - Success\n-- Performing Test CXX_SUPPORTS__WBIDI_CHARS_ANY\n-- Performing Test CXX_SUPPORTS__WBIDI_CHARS_ANY - Failed\n-- Performing Test CXX_SUPPORTS__WUNDEF\n-- Performing Test CXX_SUPPORTS__WUNDEF - Success\n-- Performing Test CXX_SUPPORTS__WUNUSED_PARAMETER\n-- Performing Test CXX_SUPPORTS__WUNUSED_PARAMETER - Success\n-- Performing Test CXX_SUPPORTS__FNO_EXTENDED_IDENTIFIERS\n-- Performing Test CXX_SUPPORTS__FNO_EXTENDED_IDENTIFIERS - Failed\n-- Performing Test CXX_SUPPORTS__FDEBUG_PREFIX_MAP_A_B\n-- Performing Test CXX_SUPPORTS__FDEBUG_PREFIX_MAP_A_B - Success\n-- Performing Test CXX_SUPPORTS__FMACRO_PREFIX_MAP_A_B\n-- Performing Test CXX_SUPPORTS__FMACRO_PREFIX_MAP_A_B - Success\n-- Performing Test CXX_SUPPORTS__FSTACK_REUSE_NONE\n-- Performing Test CXX_SUPPORTS__FSTACK_REUSE_NONE - Failed\n-- Performing Test CXX_SUPPORTS__U_FORTIFY_SOURCE__D_FORTIFY_SOURCE_3_cc10\n-- Performing Test CXX_SUPPORTS__U_FORTIFY_SOURCE__D_FORTIFY_SOURCE_3_cc10 - Success\n-- Performing Test LINKER_SUPPORTS__U_FORTIFY_SOURCE__D_FORTIFY_SOURCE_3_cc10\n-- Performing Test LINKER_SUPPORTS__U_FORTIFY_SOURCE__D_FORTIFY_SOURCE_3_cc10 - Success\n-- Performing Test CXX_SUPPORTS__WSTACK_PROTECTOR\n-- Performing Test CXX_SUPPORTS__WSTACK_PROTECTOR - Success\n-- Performing Test CXX_SUPPORTS__FSTACK_PROTECTOR_ALL\n-- Performing Test CXX_SUPPORTS__FSTACK_PROTECTOR_ALL - Success\n-- Performing Test LINKER_SUPPORTS__FSTACK_PROTECTOR_ALL\n-- Performing Test LINKER_SUPPORTS__FSTACK_PROTECTOR_ALL - Success\n-- Performing Test CXX_SUPPORTS__FCF_PROTECTION_FULL\n-- Performing Test CXX_SUPPORTS__FCF_PROTECTION_FULL - Failed\n-- Performing Test CXX_SUPPORTS__FSTACK_CLASH_PROTECTION\n-- Performing Test CXX_SUPPORTS__FSTACK_CLASH_PROTECTION - Failed\n-- Performing Test CXX_SUPPORTS__MBRANCH_PROTECTION_BTI\n-- Performing Test CXX_SUPPORTS__MBRANCH_PROTECTION_BTI - Success\n-- Performing Test LINKER_SUPPORTS__WL___ENABLE_RELOC_SECTION\n-- Performing Test LINKER_SUPPORTS__WL___ENABLE_RELOC_SECTION - Failed\n-- Performing Test LINKER_SUPPORTS__WL___DYNAMICBASE\n-- Performing Test LINKER_SUPPORTS__WL___DYNAMICBASE - Failed\n-- Performing Test LINKER_SUPPORTS__WL___NXCOMPAT\n-- Performing Test LINKER_SUPPORTS__WL___NXCOMPAT - Failed\n-- Performing Test LINKER_SUPPORTS__WL___HIGH_ENTROPY_VA\n-- Performing Test LINKER_SUPPORTS__WL___HIGH_ENTROPY_VA - Failed\n-- Performing Test LINKER_SUPPORTS__WL__Z_RELRO\n-- Performing Test LINKER_SUPPORTS__WL__Z_RELRO - Failed\n-- Performing Test LINKER_SUPPORTS__WL__Z_NOW\n-- Performing Test LINKER_SUPPORTS__WL__Z_NOW - Failed\n-- Performing Test LINKER_SUPPORTS__WL__Z_SEPARATE_CODE\n-- Performing Test LINKER_SUPPORTS__WL__Z_SEPARATE_CODE - Failed\n-- Performing Test LINKER_SUPPORTS__WL__FIXUP_CHAINS\n-- Performing Test LINKER_SUPPORTS__WL__FIXUP_CHAINS - Success\n-- Found Python3: /opt/homebrew/bin/python3 (found suitable version \"3.13.2\", minimum required is \"3.10\") found components: Interpreter\n-- Could NOT find Doxygen (missing: DOXYGEN_EXECUTABLE) \n-- Performing Test HAVE_BUILTIN_PREFETCH\n-- Performing Test HAVE_BUILTIN_PREFETCH - Success\n-- Performing Test HAVE_MM_PREFETCH\n-- Performing Test HAVE_MM_PREFETCH - Failed\n-- Performing Test HAVE_SSE42\n-- Performing Test HAVE_SSE42 - Failed\n-- Performing Test HAVE_ARM64_CRC32C\n-- Performing Test HAVE_ARM64_CRC32C - Success\n-- Looking for F_FULLFSYNC\n-- Looking for F_FULLFSYNC - found\n-- Performing Test HAVE_CLMUL\n-- Performing Test HAVE_CLMUL - Failed\n\nConfiguring secp256k1 subtree...\n-- The C compiler identification is Clang 19.1.7\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /opt/homebrew/opt/llvm/bin/clang - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Performing Test HAVE_X86_64_ASM\n-- Performing Test HAVE_X86_64_ASM - Failed\n-- Could NOT find Valgrind (missing: Valgrind_INCLUDE_DIR Valgrind_WORKS) \n-- Performing Test C_SUPPORTS__PEDANTIC\n-- Performing Test C_SUPPORTS__PEDANTIC - Success\n-- Performing Test C_SUPPORTS__WALL\n-- Performing Test C_SUPPORTS__WALL - Success\n-- Performing Test C_SUPPORTS__WCAST_ALIGN\n-- Performing Test C_SUPPORTS__WCAST_ALIGN - Success\n-- Performing Test C_SUPPORTS__WCAST_ALIGN_STRICT\n-- Performing Test C_SUPPORTS__WCAST_ALIGN_STRICT - Failed\n-- Performing Test C_SUPPORTS__WCONDITIONAL_UNINITIALIZED\n-- Performing Test C_SUPPORTS__WCONDITIONAL_UNINITIALIZED - Success\n-- Performing Test C_SUPPORTS__WEXTRA\n-- Performing Test C_SUPPORTS__WEXTRA - Success\n-- Performing Test C_SUPPORTS__WNESTED_EXTERNS\n-- Performing Test C_SUPPORTS__WNESTED_EXTERNS - Success\n-- Performing Test C_SUPPORTS__WNO_LONG_LONG\n-- Performing Test C_SUPPORTS__WNO_LONG_LONG - Success\n-- Performing Test C_SUPPORTS__WNO_OVERLENGTH_STRINGS\n-- Performing Test C_SUPPORTS__WNO_OVERLENGTH_STRINGS - Success\n-- Performing Test C_SUPPORTS__WNO_UNUSED_FUNCTION\n-- Performing Test C_SUPPORTS__WNO_UNUSED_FUNCTION - Success\n-- Performing Test C_SUPPORTS__WRESERVED_IDENTIFIER\n-- Performing Test C_SUPPORTS__WRESERVED_IDENTIFIER - Success\n-- Performing Test C_SUPPORTS__WSHADOW\n-- Performing Test C_SUPPORTS__WSHADOW - Success\n-- Performing Test C_SUPPORTS__WSTRICT_PROTOTYPES\n-- Performing Test C_SUPPORTS__WSTRICT_PROTOTYPES - Success\n-- Performing Test C_SUPPORTS__WUNDEF\n-- Performing Test C_SUPPORTS__WUNDEF - Success\n\n\nsecp256k1 configure summary\n===========================\nBuild artifacts:\n  library type ........................ Static\nOptional modules:\n  ECDH ................................ OFF\n  ECDSA pubkey recovery ............... ON\n  extrakeys ........................... ON\n  schnorrsig .......................... ON\n  musig ............................... OFF\n  ElligatorSwift ...................... ON\nParameters:\n  ecmult window size .................. 15\n  ecmult gen table size ............... 86 KiB\nOptional features:\n  assembly ............................ OFF\n  external callbacks .................. OFF\nOptional binaries:\n  benchmark ........................... OFF\n  noverify_tests ...................... OFF\n  tests ............................... OFF\n  exhaustive tests .................... OFF\n  ctime_tests ......................... OFF\n  examples ............................ OFF\n\nCross compiling ....................... FALSE\nValgrind .............................. OFF\nPreprocessor defined macros ........... ENABLE_MODULE_ELLSWIFT=1 ENABLE_MODULE_SCHNORRSIG=1 ENABLE_MODULE_EXTRAKEYS=1 ENABLE_MODULE_RECOVERY=1 ECMULT_WINDOW_SIZE=15 COMB_BLOCKS=43 COMB_TEETH=6\nC compiler ............................ Clang 19.1.7, /opt/homebrew/opt/llvm/bin/clang\nCFLAGS ................................ \nCompile options ....................... -pedantic -Wall -Wcast-align -Wconditional-uninitialized -Wextra -Wnested-externs -Wno-long-long -Wno-overlength-strings -Wno-unused-function -Wreserved-identifier -Wshadow -Wstrict-prototypes -Wundef\nBuild type:\n - CMAKE_BUILD_TYPE ................... RelWithDebInfo\n - CFLAGS ............................. -O2 -g \n - LDFLAGS for executables ............ \n - LDFLAGS for shared libraries ....... \nSECP256K1_APPEND_CFLAGS ............... -fsanitize=undefined,address,fuzzer-no-link\nSECP256K1_APPEND_LDFLAGS .............. -fsanitize=undefined,address,fuzzer-no-link\n\n\n\nConfigure summary\n=================\nExecutables:\n  bitcoind ............................ OFF\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... OFF\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... OFF\n  bitcoin-tx .......................... OFF\n  bitcoin-util ........................ OFF\n  bitcoin-wallet ...................... OFF\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... ON\n   - legacy wallets (Berkeley DB) ..... OFF\n  external signer ..................... OFF\n  ZeroMQ .............................. OFF\n  USDT tracing ........................ OFF\n  QR code (GUI) ....................... OFF\n  DBus (GUI, Linux only) .............. OFF\nTests:\n  test_bitcoin ........................ OFF\n  test_bitcoin-qt ..................... OFF\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... ON\n\nCross compiling ....................... FALSE\nC++ compiler .......................... Clang 19.1.7, /opt/homebrew/opt/llvm/bin/clang++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ........... FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION OBJC_OLD_DISPATCH_PROTOTYPES=0\nC++ compiler flags .................... -O2 -g -std=c++20 -fPIC -fdebug-prefix-map=/Users/prabhatverma/projects/bitcoin/src=. -fmacro-prefix-map=/Users/prabhatverma/projects/bitcoin/src=. -fsanitize=undefined,address,fuzzer-no-link -Wall -Wextra -Wgnu -Wformat -Wformat-security -Wvla -Wshadow-field -Wthread-safety -Wloop-analysis -Wredundant-decls -Wunused-member-function -Wdate-time -Wconditional-uninitialized -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wdocumentation -Wself-assign -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -mbranch-protection=bti\nLinker flags .......................... -O2 -g -Wl,-dead_strip -Wl,-dead_strip_dylibs -Wl,-headerpad_max_install_names -fsanitize=undefined,address,fuzzer-no-link -fstack-protector-all -Wl,-fixup_chains -fPIE -Xlinker -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nAttempt to harden executables ......... ON\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. OFF\n\n\n-- Configuring done (10.6s)\n-- Generating done (0.1s)\n-- Build files have been written to: /Users/prabhatverma/projects/bitcoin/build\n```\n</details>",
          "created_at": "2025-04-03T15:49:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 17347,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2776273741,
          "user": "Crypt-iQ",
          "body": "Does the issue occur with clang 18?",
          "created_at": "2025-04-03T16:00:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 35,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 2776312006,
          "user": "Prabhat1308",
          "body": "> Does the issue occur with clang 18?\n\nworks with clang 18 but its bringing back https://github.com/bitcoin/bitcoin/issues/31591",
          "created_at": "2025-04-03T16:15:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 128,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 2787299500,
          "user": "Crypt-iQ",
          "body": "> works with clang 18 but its bringing back https://github.com/bitcoin/bitcoin/issues/31591\n\nAhh, I see. That's annoying. I'm just ignoring the errors for now and it seems to work as expected. I've historically had a bit of trouble with macOS fuzzing and sometimes things just tend to break.",
          "created_at": "2025-04-08T18:14:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 291,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3563306804,
          "user": "maflcko",
          "body": "Closing for now. If someone finds this to be working at some point, they are welcome to add docs for it. In the meantime, please use libfuzzer-nosan, or other stuff, mentioned in https://github.com/bitcoin/bitcoin/pull/33921",
          "created_at": "2025-11-21T14:41:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 224,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11755,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3536147559,
      "number": 33667,
      "title": "Unable to fuzz in local on MacOS 15.4.1",
      "body": "Reproduction steps as per [libfuzzer](https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md#quickstart-guide):\n```zsh\n$ brew install llvm lld\n$ cmake --preset=libfuzzer \\\n   -DCMAKE_C_COMPILER=\"$(brew --prefix llvm)/bin/clang\" \\\n   -DCMAKE_CXX_COMPILER=\"$(brew --prefix llvm)/bin/clang++\" \\\n   -DCMAKE_EXE_LINKER_FLAGS=\"-fuse-ld=lld\"\n$ cmake --build build_fuzz\n```\n\n\n<details open>\n<summary>\nGetting the following error instead on the last step:\n</summary>\n\n```zsh\n[ 99%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/spend.cpp.o\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/scriptpubkeyman.cpp.o\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/wallet_bdb_parser.cpp.o\n[100%] Linking CXX executable ../../../bin/fuzz\nld64.lld: error: undefined symbol: std::__1::__hash_memory(void const*, unsigned long)\n>>> referenced by /Users/rkrux/projects/rkrux/bitcoin/build_fuzz/src/util/./support/lockedpool.cpp\n>>>               ../../../lib/libbitcoin_util.a(lockedpool.cpp.o):(symbol std::__1::pair<std::__1::__hash_iterator<std::__1::__hash_node<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, void*>*>, bool> std::__1::__hash_table<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::__unordered_map_hasher<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::hash<void*>, std::__1::equal_to<void*>, true>, std::__1::__unordered_map_equal<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::equal_to<void*>, std::__1::hash<void*>, true>, std::__1::allocator<std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>>>::__emplace_unique_key_args<void*, void*&, std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>&>(void* const&, void*&, std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>&)+0x100)\n>>> referenced by /Users/rkrux/projects/rkrux/bitcoin/build_fuzz/src/util/./support/lockedpool.cpp\n>>>               ../../../lib/libbitcoin_util.a(lockedpool.cpp.o):(symbol std::__1::unique_ptr<std::__1::__hash_node<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, void*>, std::__1::__hash_node_destructor<std::__1::allocator<std::__1::__hash_node<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, void*>>>> std::__1::__hash_table<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::__unordered_map_hasher<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::hash<void*>, std::__1::equal_to<void*>, true>, std::__1::__unordered_map_equal<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::equal_to<void*>, std::__1::hash<void*>, true>, std::__1::allocator<std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>>>::__construct_node<char*, std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>&>(char*&&, std::__1::__map_iterator<std::__1::__tree_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>&)+0x2d1)\n>>> referenced by /Users/rkrux/projects/rkrux/bitcoin/build_fuzz/src/util/./support/lockedpool.cpp\n>>>               ../../../lib/libbitcoin_util.a(lockedpool.cpp.o):(symbol std::__1::__hash_table<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::__unordered_map_hasher<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::hash<void*>, std::__1::equal_to<void*>, true>, std::__1::__unordered_map_equal<void*, std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, std::__1::equal_to<void*>, std::__1::hash<void*>, true>, std::__1::allocator<std::__1::pair<void* const, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>>>::__node_insert_unique(std::__1::__hash_node<std::__1::__hash_value_type<void*, std::__1::__map_const_iterator<std::__1::__tree_const_iterator<std::__1::__value_type<unsigned long, void*>, std::__1::__tree_node<std::__1::__value_type<unsigned long, void*>, void*>*, long>>>, void*>*)+0x116)\n>>> referenced 19 more times\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [bin/fuzz] Error 1\nmake[1]: *** [src/test/fuzz/CMakeFiles/fuzz.dir/all] Error 2\nmake: *** [all] Error 2\n```\n</details>",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-10-21T11:38:26Z",
      "updated_at": "2025-11-21T14:41:23Z",
      "closed_at": "2025-11-21T14:41:23Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33667",
      "labels": [
        "Docs",
        "macOS",
        "Tests",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3426502657,
          "user": "maflcko",
          "body": "There are some prior issues/pulls/discussions:\n\n* https://github.com/bitcoin/bitcoin/pull/32084\n* https://github.com/bitcoin/bitcoin/issues/32089\n\nThough, this one seems to be a new link-time error.",
          "created_at": "2025-10-21T12:59:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 198,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3446537462,
          "user": "fanquake",
          "body": "Looks like this could be https://github.com/Homebrew/homebrew-core/issues/235411.",
          "created_at": "2025-10-25T10:28:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 81,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3446561167,
          "user": "maflcko",
          "body": "So I guess this can be fixed by using the homebrew libc++?",
          "created_at": "2025-10-25T11:06:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 58,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3563305681,
          "user": "maflcko",
          "body": "Closing for now. If someone finds this to be working at some point, they are welcome to add docs for it. In the meantime, please use libfuzzer-nosan, or other stuff, mentioned in https://github.com/bitcoin/bitcoin/pull/33921",
          "created_at": "2025-11-21T14:41:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 224,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 7169,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3432545596,
      "number": 33432,
      "title": "v30rc1 Weird GUI windowing behavior",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nChanging tabs in the GUI will close and re-open the app, it also will reposition the app\n\n### Expected behaviour\n\nJust switch tab\n\n### Steps to reproduce\n\nhttps://github.com/user-attachments/assets/86be4b98-de5e-4a4a-a7d4-3eaed7d32491\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv30rc1\n\n### Operating system and version\n\nubuntu 24.04 TLS\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "benthecarman",
      "created_at": "2025-09-19T02:59:44Z",
      "updated_at": "2025-11-21T12:51:51Z",
      "closed_at": "2025-10-03T14:26:25Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33432",
      "labels": [
        "GUI"
      ],
      "comment_data": [
        {
          "id": 3310407746,
          "user": "benthecarman",
          "body": "Doing `sudo apt install libxcb-cursor0` seems to have fixed the issue but also removed dark mode for me!",
          "created_at": "2025-09-19T03:36:35Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 104,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3311531020,
          "user": "fanquake",
          "body": "> Doing sudo apt install libxcb-cursor0\n\nRelated to #32097.",
          "created_at": "2025-09-19T09:58:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 59,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3311581711,
          "user": "hebasto",
          "body": "@benthecarman \n> Doing `sudo apt install libxcb-cursor0` seems to have fixed the issue but also removed dark mode for me!\n\nWhat are the first 10 lines of your debug log file in both cases?",
          "created_at": "2025-09-19T10:14:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 188,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3312812001,
          "user": "benthecarman",
          "body": "compiled from source without `libxcb-cursor0`\n\n```\n2025-09-19T16:11:53Z Ignoring unknown configuration value mempoolfullrbf\n2025-09-19T16:11:53Z Ignoring unknown configuration value signet.signetblocktime\n2025-09-19T16:11:53Z Bitcoin Core version v30.0rc1 (release build)\n2025-09-19T16:11:53Z Qt 6.4.2 (dynamic), plugin=wayland\n2025-09-19T16:11:53Z No static plugins.\n2025-09-19T16:11:53Z Style: fusion / QFusionStyle\n2025-09-19T16:11:53Z System: Ubuntu 24.04.3 LTS, x86_64-little_endian-lp64\n2025-09-19T16:11:53Z Screen: eDP-1 1920x1200, pixel ratio=1.0\n2025-09-19T16:11:53Z Using the 'x86_shani(1way;2way)' SHA256 implementation\n2025-09-19T16:11:54Z Using RdSeed as an additional entropy source\n2025-09-19T16:11:54Z Using RdRand as an additional entropy source\n2025-09-19T16:11:54Z Default data directory /home/ben/.bitcoin\n2025-09-19T16:11:54Z Using data directory /home/ben/.bitcoin\n2025-09-19T16:11:54Z Config file: /home/ben/.bitcoin/bitcoin.conf\n2025-09-19T16:11:54Z Config file arg: blockfilterindex=\"1\"\n2025-09-19T16:11:54Z Config file arg: coinstatsindex=\"1\"\n2025-09-19T16:11:54Z Config file arg: peerblockfilters=\"1\"\n2025-09-19T16:11:54Z Config file arg: server=\"1\"\n2025-09-19T16:11:54Z Config file arg: txindex=\"1\"\n2025-09-19T16:11:54Z Config file arg: v2transport=\"1\"\n```\n\n30rc1 guix binary (with `libxcb-cursor0` so i can run it)\n\n```\n2025-09-19T16:13:43Z Ignoring unknown configuration value mempoolfullrbf\n2025-09-19T16:13:43Z Ignoring unknown configuration value signet.signetblocktime\n2025-09-19T16:13:43Z Bitcoin Core version v30.0.0rc1 (release build)\n2025-09-19T16:13:43Z Qt 6.7.3 (static), plugin=xcb\n2025-09-19T16:13:43Z Static plugins:\n2025-09-19T16:13:43Z  QMinimalIntegrationPlugin, version 395008\n2025-09-19T16:13:43Z  QXcbIntegrationPlugin, version 395008\n2025-09-19T16:13:43Z Style: fusion / QFusionStyle\n2025-09-19T16:13:43Z System: Ubuntu 24.04.3 LTS, x86_64-little_endian-lp64\n2025-09-19T16:13:43Z Screen: eDP-1 1920x1200, pixel ratio=1.0\n2025-09-19T16:13:43Z Using the 'x86_shani(1way;2way)' SHA256 implementation\n2025-09-19T16:13:43Z Using RdSeed as an additional entropy source\n2025-09-19T16:13:43Z Using RdRand as an additional entropy source\n2025-09-19T16:13:43Z Default data directory /home/ben/.bitcoin\n2025-09-19T16:13:43Z Using data directory /home/ben/.bitcoin\n2025-09-19T16:13:43Z Config file: /home/ben/.bitcoin/bitcoin.conf\n2025-09-19T16:13:43Z Config file arg: blockfilterindex=\"1\"\n2025-09-19T16:13:43Z Config file arg: coinstatsindex=\"1\"\n2025-09-19T16:13:43Z Config file arg: peerblockfilters=\"1\"\n```",
          "created_at": "2025-09-19T16:14:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 2547,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3312837619,
          "user": "hebasto",
          "body": "Thanks, @benthecarman!\n\nFrom the provided logs, it appears that the reported bug occurs when building with the system’s Qt 6.4.2, rather than with the statically linked release binary.\n\nThe requirement to install `libxcb-cursor0` is already a known issue and is being tracked elsewhere.\n",
          "created_at": "2025-09-19T16:21:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 287,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3562903769,
          "user": "hebasto",
          "body": "@benthecarman \n> Changing tabs in the GUI will close and re-open the app, it also will reposition the app\n\nCould you please test https://github.com/bitcoin-core/gui/pull/914?",
          "created_at": "2025-11-21T12:51:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 174,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 629,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2676024373,
      "number": 31334,
      "title": "ci: brew link workaround step no-longer working",
      "body": "CI failure in #31333. https://github.com/bitcoin/bitcoin/actions/runs/11935219880/job/33266067166?pr=31333:\r\n```bash\r\nRun # A workaround for \"The `brew link` step did not complete successfully\" error.\r\n<...>\r\n Error: The `brew link` step did not complete successfully\r\nThe formula built, but is not symlinked into /opt/homebrew\r\nCould not symlink bin/pkg-config\r\nTarget /opt/homebrew/bin/pkg-config\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-11-20T14:22:28Z",
      "updated_at": "2025-11-21T12:13:59Z",
      "closed_at": "2024-11-21T13:37:50Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31334",
      "labels": [
        "macOS"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 451,
        "has_nack": false,
        "has_ack": false
      }
    }
  ],
  "summary": {
    "total_prs": 1000,
    "total_issues": 208,
    "total_comments": 818,
    "unique_participants": 301
  }
}