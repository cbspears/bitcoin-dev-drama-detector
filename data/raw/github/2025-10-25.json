{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:25:52.393657+00:00",
  "date": "2025-10-25",
  "pull_requests": [
    {
      "number": 33702,
      "title": "contrib: Remove brittle, confusing and redundant UTF8 encoding from Python IO",
      "body": "Historically, there was an attempt via `test/lint/lint-python-utf8-encoding.py` to enforce explicit UTF8 in every Python IO statement (`open`, `subprocess`, ...). However, the lint check has many problems:\r\n\r\n* The check is incomplete and many IO statements lack the explicit UTF8 specification.\r\n* It was added at a time when some systems were not UTF8 by default.\r\n* The check is brittle, as it depends on a fragile regex.\r\n\r\nIn theory, now that the minimum Python version is 3.10 (since commit 2123c94448ed142e78942421c597a1f264859c48), the check could be replaced by `PYTHONWARNDEFAULTENCODING=1` from https://docs.python.org/3/whatsnew/3.10.html#optional-encodingwarning-and-encoding-locale-option. However, this comes with many other problems:\r\n\r\n* All our Python scripts already assume and require UTF8 to be set externally. On almost all modern systems, this is already the default. Some Windows versions do not have UTF8 by default and require `PYTHONUTF8=1` to be set for the tests to run already today (with or without the changes in this pull). Also, the CI and many other Bash scripts force UTF8 via `LC_ALL`. Finally, Python 3.15 will likely enable UTF8 on *all* systems by default, per https://peps.python.org/pep-0686/#abstract.\r\n* So adding UTF8 to every single IO call is redundant, verbose, and confusing, given that it is the expected default.\r\n\r\nSo fix all issues, by:\r\n\r\n* Removing the `test/lint/lint-python-utf8-encoding.py` check.\r\n* Removing the encoding on the individual IO calls.\r\n* Clarifying the existing docs around the existing UTF8 requirement and assumption.\r\n\r\nObviously, every IO call is still free to specify UTF8 or any other encoding explicitly, if there is a documented need for it in the future.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-10-25T10:07:52Z",
      "updated_at": "2025-12-08T13:48:50Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33702",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33702.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/33702#pullrequestreview-3510583287), [laanwj](https://github.com/bitcoin/bitcoin/pull/33702#pullrequestreview-3529672889) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33184](https://github.com/bitcoin/bitcoin/pull/33184) (test: Refactor rpc_getblockstats.py to use MiniWallet by enirox001)\n* [#32929](https://github.com/bitcoin/bitcoin/pull/32929) (qa: Avoid knock-on exception in assert_start_raises_init_error by hodlinator)\n* [#32928](https://github.com/bitcoin/bitcoin/pull/32928) (test: add logging to mock external signers by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-25T10:07:58Z"
        },
        {
          "user": "fanquake",
          "body": "cc @theStack ",
          "created_at": "2025-10-27T16:43:46Z"
        },
        {
          "user": "laanwj",
          "body": "Concept ACK",
          "created_at": "2025-10-31T12:22:29Z"
        },
        {
          "user": "maflcko",
          "body": "rebased for a one-line conflict and a one-line silent conflict. Should be trivial to re-review via git range-diff",
          "created_at": "2025-11-26T11:39:21Z"
        }
      ]
    },
    {
      "number": 33701,
      "title": "test: add case where `TOTAL_TRIES` is exceeded yet solution remains",
      "body": "Show that `CoinGrider` halts searching when the number of attempts exceeds `TOTAL_TRIES`.  To do so, show that a solution is found, then add one more entry to the same set of inputs.  Since the search orders by `effective_value`, the solution is constructed such that only values with the lowest `effective_value` have the least weight.  Only the lowest weight values will not exceed the `max_selection_weight`. Therefore, `CoinGrinder` will not evaluate all lowest weight solutions together before exceeding `TOTAL_TRIES` since they are last found.\r\n\r\nThis test case was inspired by a similar test for `BnB` currently named `bnb_test`.",
      "state": "open",
      "user": "yancyribbens",
      "created_at": "2025-10-25T00:30:30Z",
      "updated_at": "2025-11-12T11:23:43Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/33701",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33701.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [frankomosh](https://github.com/bitcoin/bitcoin/pull/33701#issuecomment-3513298652) |\n| Concept ACK | [alvroble](https://github.com/bitcoin/bitcoin/pull/33701#pullrequestreview-3450241034) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-25T00:30:35Z"
        },
        {
          "user": "yancyribbens",
          "body": "closes https://github.com/bitcoin/bitcoin/issues/33419",
          "created_at": "2025-10-25T00:30:53Z"
        },
        {
          "user": "alvroble",
          "body": "Hey, I'm new to this project. So just learning. Ran the tests and they were not broken, and I agree with the rationale. Concept ACK.",
          "created_at": "2025-10-25T11:42:29Z"
        },
        {
          "user": "frankomosh",
          "body": "Code review ACK b189a34",
          "created_at": "2025-11-10T18:26:38Z"
        },
        {
          "user": "yancyribbens",
          "body": "@murchandamus ; would appreciate your input on this.",
          "created_at": "2025-11-12T11:23:43Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 2,
    "issues": 0
  }
}