{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:50:06.120113+00:00",
  "date": "2025-06-12",
  "pull_requests": [
    {
      "number": 32741,
      "title": "rpc: Add optional peer_ids param to filter getpeerinfo",
      "body": "Adds an optional `peer_ids` parameter to `getpeerinfo` to filter results by peer IDs.\r\n\r\nThis is useful when using bitcoin-cli or the console to inspect specific peers referenced in debug.log.",
      "state": "open",
      "user": "waketraindev",
      "created_at": "2025-06-12T21:51:05Z",
      "updated_at": "2025-12-18T00:47:48Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/pull/32741",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32741.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [danielabrozzoni](https://github.com/bitcoin/bitcoin/pull/32741#pullrequestreview-3568688179), [rkrux](https://github.com/bitcoin/bitcoin/pull/32741#pullrequestreview-3588075627) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34004](https://github.com/bitcoin/bitcoin/pull/34004) (Implementation of SwiftSync by rustaceanrob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T21:51:09Z"
        },
        {
          "user": "0xB10C",
          "body": "I'm frequently using something like `bitcoin-cli getpeerinfo | jq '[.[] | select(.id == 24430)]'` for this. Doesn't work in the GUI console though.",
          "created_at": "2025-06-13T09:17:58Z"
        },
        {
          "user": "waketraindev",
          "body": "Added test coverage with nodeid filter in test_getpeerinfo, including a check for nonexistent ids. Let me  know if you'd prefer this in a separate test method or different cases",
          "created_at": "2025-06-13T13:20:23Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/44049534572</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by lint errors, specifically a trailing whitespace issue detected during the lint check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-13T13:22:00Z"
        },
        {
          "user": "waketraindev",
          "body": "Small touch up in code style, renamed parameter to `peer_id` for consistency ",
          "created_at": "2025-06-15T23:21:39Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45364101888</sub>\n<sub>LLM reason (‚ú® experimental): Lint check failed due to a coding style error in rpc_net.py caused by an unnecessary semicolon.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-04T12:42:25Z"
        },
        {
          "user": "waketraindev",
          "body": "Rebased on top of master, updated help text\r\n",
          "created_at": "2025-07-04T15:23:31Z"
        },
        {
          "user": "waketraindev",
          "body": "Updated to use `peer_ids` (array) instead of a single `peer_id`. This allows filtering by multiple peers in one call and aligns better with RPC design. Functional tests adjusted.",
          "created_at": "2025-07-15T15:34:36Z"
        },
        {
          "user": "luke-jr",
          "body": "I would do peer_id|peer_ids and accept both a single number (most common use) or an array (efficient).",
          "created_at": "2025-07-15T20:16:48Z"
        },
        {
          "user": "waketraindev",
          "body": "> I would do peer_id|peer_ids and accept both a single number (most common use) or an array (efficient).\r\n\r\nI don't think `RPCArg` currently supports a single argument that can be either a num or an array (Maybe  RPCArg::Type::ANY?). One option would be to add two separate optional arguments: one for a single ID and another for the list, then merge both into the filter set internally. That would allow `getpeerinfo 7` for convenience and `getpeerinfo -1 '[1,3,4,7]'` for multiple.\r\n\r\n---\r\n\r\nFigured it out in the latest push, skipped type checking for peer_ids",
          "created_at": "2025-07-15T20:56:00Z"
        },
        {
          "user": "waketraindev",
          "body": "> I would do peer_id|peer_ids and accept both a single number (most common use) or an array (efficient).\r\n\r\nSkipped type checking and added simple cases so `getpeerinfo 7` and `getpeerinfo '[1,2,3]'` should work\r\n\r\n",
          "created_at": "2025-07-15T23:07:46Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/47411071680</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure caused by a lint check for a missing trailing newline in the release notes markdown file.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-05T10:58:20Z"
        },
        {
          "user": "waketraindev",
          "body": "Rebased on current master.\r\n",
          "created_at": "2025-10-14T20:49:52Z"
        },
        {
          "user": "maflcko",
          "body": "the commit message is wrong?",
          "created_at": "2025-11-19T08:06:41Z"
        },
        {
          "user": "waketraindev",
          "body": "> the commit message is wrong?\r\n\r\nThanks. Must've replaced it by mistake when I rebased. Fixed now",
          "created_at": "2025-11-19T11:00:12Z"
        }
      ]
    },
    {
      "number": 32740,
      "title": "refactor: Header sync optimisations & simplifications",
      "body": "This is a partial* revival of #25968\r\n\r\nIt contains a list of most-unrelated simplifications and optimizations to the code merged in #25717:\r\n\r\n- Avoid an IsAncestorOfBestHeaderOrTip call: Just don't call this function when it won't have any effect.\r\n- Compute work from headers without CBlockIndex: Avoid the need to construct a CBlockIndex object just to compute work for a header, when its nBits value suffices for that. Also use some Spans where possible.\r\n- Remove useless CBlock::GetBlockHeader: There is no need for a function to convert a CBlock to a CBlockHeader, as it's a child class of it.\r\n\r\nIt also contains the following code cleanups, which were suggested by reviewers in #25968:\r\n- Remove redundant parameter from CheckHeadersPoW: No need to pass consensusParams, as CheckHeadersPow already has access to m_chainparams.GetConsensus()\r\n- Remove unused parameter in ReportHeadersPresync\r\n- Use initializer list in CompressedHeader, also make GetFullHeader const\r\n- Use reference for chain_start in HeadersSyncState: chain_start can never be null, so it's better to pass it as a reference rather than a raw pointer\r\n\r\n*I decided to leave out three commits that were in #25968 (4e7ac7b94d04e056e9994ed1c8273c52b7b23931, ab52fb4e95aa2732d1a1391331ea01362e035984, 7f1cf440ca1a9c86085716745ca64d3ac26957c0), since they're a bit more involved, and I'm a new contributor. If this PR gets merged, I'll comment under #25968 to note that these three commits are still up for grabs :)\r\n",
      "state": "closed",
      "user": "danielabrozzoni",
      "created_at": "2025-06-12T20:20:06Z",
      "updated_at": "2026-01-14T19:38:45Z",
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/pull/32740",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32740.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32740#issuecomment-3557161480), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32740#pullrequestreview-3489612258), [polespinasa](https://github.com/bitcoin/bitcoin/pull/32740#issuecomment-3718052751), [sipa](https://github.com/bitcoin/bitcoin/pull/32740#issuecomment-3750027884), [achow101](https://github.com/bitcoin/bitcoin/pull/32740#issuecomment-3751224879) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33856](https://github.com/bitcoin/bitcoin/pull/33856) (kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState by yuvicc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T20:20:17Z"
        },
        {
          "user": "ajtowns",
          "body": "Maybe change the title to describe what's actually going on for those of us who don't memorise every pr number? :) (\"Header sync optimisations/simplifications\" ?)",
          "created_at": "2025-06-13T02:43:25Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "@hodlinator thank you for your review!\r\n\r\nI like the idea of converting `ProcessingResult` to an enum, I think it makes the code easier to read.\r\n\r\nAs for `pow_validated_headers`, I don‚Äôt have a strong preference between using a span or an argument for I/O just yet. I‚Äôll take a closer look at #32579 over the next few days and should have a more informed opinion afterward :) I‚Äôd also be interested to hear what other reviewers think!\r\n\r\nLatest push:\r\n- style improvements based on review comments",
          "created_at": "2025-06-24T12:40:49Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "Last push:\r\n- Reformat to address https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2185221868\r\n- Rebase on master\r\n\r\n> I'd like to review this - can you tell me how to measure the effect of the \"optimizations\" using either the microbenchmarks or a reindex or anything that shows the magnitude of change?\r\nWould be helpful if you could publish your measurements if you have any.\r\n\r\nI don't have any, working on it! ",
          "created_at": "2025-07-07T16:49:48Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "After some thinking, I decided to drop the first commit, and let ProcessNextHeaders take the headers argument and return it, instead of using it as a I/O argument. I tried to write a benchmark to measure how much using the vector as I/O argument would optimize the code, but it convinced me that the new interface would be too hard to work with, as reviewers pointed out. While it might still be a performance improvement, I'm not sure if it's really worth it.\r\n\r\nFor anyone interested, here's my attempt at writing a benchmark: 852aca5e34320449c47488d181e98ce72b74adfd and [my branch](https://github.com/danielabrozzoni/bitcoin/commits/upforgrabs/25968-bench/)\r\n(Unfortunately, since ProcessNextHeaders changes the content of the headers vector passed in, I had to copy the vector every single time, which I suppose could make the benchmark a bit unreliable? There are also a few assertions in the bench.run() function, which I used to make sure that my code wasn't bugged, but I'm not sure if they should be there in any serious attempt at benchmarking)\r\n\r\nWill update the PR in the next few days :)",
          "created_at": "2025-08-01T15:41:52Z"
        },
        {
          "user": "l0rinc",
          "body": "recrACK 50e61f448eedfe0ccfa07f3124aeef9c7762a69b\r\n\r\nI only left nits, I'm fine with merging it as is.",
          "created_at": "2025-08-21T03:01:19Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "@hodlinator thanks! Was about to comment with the update haha :)\r\n\r\nIn my last push:\r\n\r\n- Rebase after #32579 \r\n- Address https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2289739420, https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2289729638, https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2289725133\r\n- Specify in 8a4ab45c13dd7ca4474bc4621110da82e0a634f8 commit message that I'm also slightly reformatting the code ",
          "created_at": "2025-11-03T08:57:57Z"
        },
        {
          "user": "l0rinc",
          "body": "Code review reACK 8a4ab45c13dd7ca4474bc4621110da82e0a634f8\r\n\r\nI have re-rebased [my previous ack](https://github.com/bitcoin/bitcoin/pull/32740#issuecomment-3208833064), solved the conflicts and did a soft reset compared to this, the only differences were whitespace changes, comment fixes, [static cast update](https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2269932154).\r\nNot sure if https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2485972867 was on purpose or not, but either is fine with me.",
          "created_at": "2025-11-03T10:29:59Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "In my last push: re-introduce Assert in header sync tests, see https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2485972867\r\n\r\nSorry for another push after the acks, and thanks for the reviews ",
          "created_at": "2025-11-03T12:42:45Z"
        },
        {
          "user": "l0rinc",
          "body": "Code review reACK 9a387e9175d34d1eaf83b9008f5e857d1eb04b8e\r\n\r\nFinalized the pointer to reference migration since last ack.",
          "created_at": "2025-11-03T12:51:16Z"
        },
        {
          "user": "hodlinator",
          "body": "Tested running the Linux->Windows CI locally and this patch seems to fix the failure:\r\n```diff\r\n--- a/src/test/headers_sync_chainwork_tests.cpp\r\n+++ b/src/test/headers_sync_chainwork_tests.cpp\r\n@@ -52,7 +52,7 @@ constexpr size_t COMMITMENT_PERIOD{600}; // Somewhat close to mainnet.\r\n \r\n struct HeadersGeneratorSetup : public RegTestingSetup {\r\n     const CBlock& genesis{Params().GenesisBlock()};\r\n-    const CBlockIndex& chain_start{WITH_LOCK(::cs_main, return *Assert(m_node.chainman->m_blockman.LookupBlockIndex(genesis.GetHash())))};\r\n+    const CBlockIndex& chain_start{ChainStart()};\r\n \r\n     // Generate headers for two different chains (using differing merkle roots\r\n     // to ensure the headers are different).\r\n@@ -101,6 +101,15 @@ private:\r\n     std::vector<CBlockHeader> GenerateHeaders(size_t count,\r\n             uint256 prev_hash, int32_t nVersion, uint32_t prev_time,\r\n             const uint256& merkle_root, uint32_t nBits);\r\n+\r\n+    // Broken out into its own function to please 32-bit ARM (GCC 13.3) and\r\n+    // Linux->Windows cross builds (GCC 13.0) which otherwise complain about\r\n+    // \"possibly dangling reference to a temporary [-Werror=dangling-reference]\"\r\n+    const CBlockIndex& ChainStart()\r\n+    {\r\n+        LOCK(::cs_main);\r\n+        return *Assert(m_node.chainman->m_blockman.LookupBlockIndex(genesis.GetHash()));\r\n+    }\r\n };\r\n \r\n void HeadersGeneratorSetup::FindProofOfWork(CBlockHeader& starting_header)\r\n```",
          "created_at": "2025-11-03T19:30:58Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "Thank you @hodlinator!\r\n\r\nIn my last push (184c54c):\r\n- Push hodlinator's fix as a co-authored commit on top (I slightly changed the diff to align with the style of `HeadersGeneratorSetup`). I can squash the last two commits if that's preferred.",
          "created_at": "2025-11-10T04:54:09Z"
        },
        {
          "user": "hodlinator",
          "body": ">     * Push hodlinator's fix as a co-authored commit on top (I slightly changed the diff to align with the style of `HeadersGeneratorSetup`). I can squash the last two commits if that's preferred.\r\n\r\nThanks for taking my change! Technically I think the repo policy is that every commit should build on all CI, see for example https://github.com/bitcoin/bitcoin/pull/33785/commits/fae1d99651e29341e486a10e6340335c71a2144e which adds `const&` in the same change as disabling the errors, instead of doing `const&` in the parent commit. So 184c54c0843cdaf90a0282532d627213fa5d018d should be squashed into the parent commit.\r\n\r\nAlternatively, if rebasing on top of #33785 makes it work, and since it has 3 ACKs, we could wait for it to be merged before this PR and drop 184c54c0843cdaf90a0282532d627213fa5d018d.",
          "created_at": "2025-11-10T07:39:23Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "Hey, sorry this took a while. I tried rebasing onto #33785 but it wouldn't fix the warning. \r\n\r\nIn my last push (de4242f):\r\n- I didn't rebase, to hopefully make re-reviewing easier\r\n- I removed `const` as suggested in https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2509736434, I like it a bit better than the previous solution\r\n- I squashed the fix inside the last commit instead pushing as a separate one\r\n\r\n> Technically I think the repo policy is that every commit should build on all CI,\r\n\r\nUnderstood, thanks for explaining! :)\r\n",
          "created_at": "2025-11-20T03:23:00Z"
        },
        {
          "user": "l0rinc",
          "body": "ACK de4242f47476769d0a7f3e79e8297ed2dd60d9a4\r\n\r\nOnly a [const removal](https://github.com/bitcoin/bitcoin/compare/9a387e9175d34d1eaf83b9008f5e857d1eb04b8e..de4242f47476769d0a7f3e79e8297ed2dd60d9a4?diff=unified&w) since my last ACK",
          "created_at": "2025-11-20T10:32:22Z"
        },
        {
          "user": "hodlinator",
          "body": "<details><summary>\r\n\r\nEdit: invalidated test by not testing on latest master. See https://github.com/bitcoin/bitcoin/pull/32740#discussion_r2547406121.\r\n\r\n</summary>\r\n\r\n> I tried rebasing onto #33785 but it wouldn't fix the warning.\r\n\r\nChecked this by:\r\n```\r\n‚Çø git pr 32740\r\nSwitched to branch 'pr/32740'\r\n```\r\nRebasing onto the merge commit of #33785:\r\n```\r\n‚Çø git rebase HEAD~8 --onto 490cb056f651f4247731e39efab35ef8e8a59833\r\n```\r\nAdding back `const` in commit 9bfcde056df7698ddf7ce9d958d5a9d3f3d0b43a:\r\n\r\nARM 32 build and Linux->Windows cross builds succeed on CI with GNU (GCC) 13.3:\r\nhttps://github.com/hodlinator/bitcoin/actions/runs/19529971162/job/55910436956#step:8:3389\r\nhttps://github.com/hodlinator/bitcoin/actions/runs/19529971162/job/55910436924#step:6:1935\r\n\r\nIt's true that there is still a warning (https://github.com/hodlinator/bitcoin/actions/runs/19529971162/job/55910436956#step:8:4290), but it's excluded from triggering an error thanks to #33785's `-Wno-error=dangling-reference`:\r\nhttps://github.com/bitcoin/bitcoin/pull/33785/commits/fae1d99651e29341e486a10e6340335c71a2144e#diff-01c24871dbdf85d7ddae09d013d9280074676ba15cbabb07258e8e9a8f5a1640R16\r\n\r\nSo I think rebasing would still be preferable (instead of dropping `const`).\r\n\r\n</details>",
          "created_at": "2025-11-20T19:18:33Z"
        },
        {
          "user": "polespinasa",
          "body": "re-ACK de4242f47476769d0a7f3e79e8297ed2dd60d9a4\r\n\r\nlgtm nothing to add to what others already said :)",
          "created_at": "2026-01-07T09:42:29Z"
        },
        {
          "user": "danielabrozzoni",
          "body": "Ready for merge?",
          "created_at": "2026-01-14T14:15:22Z"
        },
        {
          "user": "sipa",
          "body": "ACK de4242f47476769d0a7f3e79e8297ed2dd60d9a4",
          "created_at": "2026-01-14T15:12:41Z"
        },
        {
          "user": "achow101",
          "body": "ACK de4242f47476769d0a7f3e79e8297ed2dd60d9a4",
          "created_at": "2026-01-14T19:25:03Z"
        }
      ]
    },
    {
      "number": 32739,
      "title": "tsan: remove note about dropping Qt wildcards",
      "body": "Doing so looks unmaintainable.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-06-12T16:59:15Z",
      "updated_at": "2025-06-13T13:01:52Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32739",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32739.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32739#issuecomment-2970004208) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T16:59:18Z"
        },
        {
          "user": "maflcko",
          "body": "I don't think the CI has the GUI enabled?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/5757de4ddd37f9321ee6b338b40888fd3561fc00/ci/test/00_setup_env_native_tsan.sh#L13-L16\r\n\r\nI guess you enabled it locally? Still, the gui unit tests reach not too much coverage, so just using them may not be enough.\r\n\r\n\r\n\r\n> If this looks too unruly to maintain,\r\n\r\nYeah, if we are just maintaining the non-wildcard list without any prospect of anyone fixing or reporting any of them, I don't think this is worth it.",
          "created_at": "2025-06-12T19:47:28Z"
        },
        {
          "user": "fanquake",
          "body": "> I don't think the CI has the GUI enabled?\n\nIt does: https://cirrus-ci.com/task/5347460467392512?logs=ci#L2040\n\n> I don't think this is worth it.\n\nSure, will just drop the replacement comment.",
          "created_at": "2025-06-13T05:55:40Z"
        },
        {
          "user": "maflcko",
          "body": "> > I don't think the CI has the GUI enabled?\r\n> \r\n> It does: https://cirrus-ci.com/task/5347460467392512?logs=ci#L2040\r\n\r\nI was confused. The default for `BUILD_GUI` is off; and `git grep BUILD_GUI ./ci/test/00_setup_env_native_tsan.sh` is empty. However, the gui is enabled via depends.",
          "created_at": "2025-06-13T06:20:37Z"
        },
        {
          "user": "fanquake",
          "body": "Swapped to just dropping the TODO.",
          "created_at": "2025-06-13T10:52:19Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 5db0a4a2db205901965e38fb5e2107c61d5d5be6\r\n\r\n",
          "created_at": "2025-06-13T11:10:59Z"
        }
      ]
    },
    {
      "number": 32738,
      "title": ".",
      "body": "btc-isdnh.com\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Bitchryankilledme",
      "created_at": "2025-06-12T15:37:27Z",
      "updated_at": "2025-06-12T15:38:39Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32738",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32738.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T15:37:31Z"
        },
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-06-12T15:37:42Z"
        }
      ]
    },
    {
      "number": 32737,
      "title": "rpc, doc: clarify the response of listtransactions RPC",
      "body": "I noticed this behaviour while perf testing PR #27286 and it was not something that I expected, updating the doc to make it present in the RPCHelp command.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-06-12T14:53:46Z",
      "updated_at": "2025-12-22T23:12:19Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32737",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32737.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32737#pullrequestreview-3593328432), [musaHaruna](https://github.com/bitcoin/bitcoin/pull/32737#pullrequestreview-3578082783), [achow101](https://github.com/bitcoin/bitcoin/pull/32737#issuecomment-3684488735) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32737#pullrequestreview-2937307134) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T14:53:49Z"
        },
        {
          "user": "achow101",
          "body": "ACK c27629702285029add897b89247ab9493aede22d",
          "created_at": "2025-11-17T21:58:28Z"
        },
        {
          "user": "musaHaruna",
          "body": "ACK [c27629](https://github.com/bitcoin/bitcoin/pull/32737/commits/c27629702285029add897b89247ab9493aede22d)\r\nI used the example in the docs to verify the behaviour. The doc now clearly explains the RPC! \r\nLeft a nit suggestion below. \r\nI used the test script below to verify behaviour. \r\n\r\n```\r\n#!/usr/bin/env python3\r\n\"\"\"Minimal functional test for `listtransactions` behavior.\r\n\r\nThis test verifies two documented behaviours:\r\n 1) A single blockchain transaction that sends wallet funds to 1 wallet address\r\n    and 2 non-wallet addresses produces multiple wallet entries: 1 \"receive\"\r\n    entry and 3 \"send\" entries (total 4 entries).\r\n 2) Calling `listtransactions` with a label returns only incoming transactions\r\n    paying to addresses with that label.\r\n\"\"\"\r\n\r\nfrom test_framework.test_framework import BitcoinTestFramework\r\nfrom test_framework.blocktools import COINBASE_MATURITY\r\nfrom test_framework.util import assert_equal\r\n\r\nclass ListTransactionsTest(BitcoinTestFramework):\r\n    def set_test_params(self):\r\n        self.num_nodes = 2\r\n        self.setup_clean_chain = True\r\n        self.extra_args = [[], []]\r\n\r\n    def skip_test_if_missing_module(self):\r\n        self.skip_if_no_wallet()\r\n\r\n    def setup_network(self):\r\n        self.setup_nodes()\r\n        self.connect_nodes(0, 1)\r\n        self.sync_all()\r\n\r\n    def run_test(self):\r\n        # Mine mature coinbase outputs for node0 so it can spend\r\n        self.generate(self.nodes[0], COINBASE_MATURITY + 1, sync_fun=lambda: self.sync_all(self.nodes))\r\n        self.sync_all()\r\n\r\n        # Prepare addresses: one address in node0's wallet (will be labelled), and\r\n        # two addresses that are not in node0's wallet (use node1 addresses).\r\n        addr_wallet = self.nodes[0].getnewaddress()\r\n        self.nodes[0].setlabel(addr_wallet, \"receive_address\")\r\n        external_address1 = self.nodes[1].getnewaddress()\r\n        external_address2 = self.nodes[1].getnewaddress()\r\n\r\n        # Send a single transaction from node0 to three outputs: one to its own\r\n        # address (labelled) and two to external addresses (node1). This should\r\n        # create one blockchain transaction with 3 outputs.\r\n        txid = self.nodes[0].sendmany('', {addr_wallet: 1, external_address1: 1, external_address2: 1})\r\n        # Confirm the transaction\r\n        self.generate(self.nodes[0], 1, sync_fun=lambda: self.sync_all(self.nodes))\r\n        self.sync_all()\r\n\r\n        # Collect listtransactions entries for this txid from node0's wallet\r\n        tx_entries = [txs for txs in self.nodes[0].listtransactions('*', 100) if txs.get('txid') == txid]\r\n\r\n        # According to documentation: one 'receive' entry and three 'send' entries\r\n        assert_equal(len(tx_entries), 4)\r\n        receive_count = sum(1 for txs in tx_entries if txs['category'] == 'receive')\r\n        send_count = sum(1 for txs in tx_entries if txs['category'] == 'send')\r\n        assert_equal(receive_count, 1)\r\n        assert_equal(send_count, 3)\r\n\r\n        # Now verify label filtering: listing with the label should return only\r\n        # incoming transactions paying to addresses with that label (i.e. the\r\n        # single 'receive' entry for this tx).\r\n        label_entries = self.nodes[0].listtransactions(label=\"receive_address\", count=100)\r\n        # Filter to entries related to our tx\r\n        label_tx_entries = [txs for txs in label_entries if txs.get('txid') == txid]\r\n        assert_equal(len(label_tx_entries), 1)\r\n        assert_equal(label_tx_entries[0]['category'], 'receive')\r\n        assert_equal(label_tx_entries[0]['address'], addr_wallet)\r\n\r\nif __name__ == '__main__':\r\n    ListTransactionsTest(__file__).main()\r\n```\r\n",
          "created_at": "2025-12-15T13:03:36Z"
        },
        {
          "user": "achow101",
          "body": "ACK 1ed8e7616527c69dbaa9904cda59e3b73c29fa5d",
          "created_at": "2025-12-22T23:08:29Z"
        }
      ]
    },
    {
      "number": 32736,
      "title": "wallet: Correct dir iteration error handling",
      "body": "Make wallet DB properly detect and report failure to scan wallet directory. Seems to have been broken since moving from Boost to `std::filesystem`.\r\n\r\nFound while reviewing: https://github.com/bitcoin/bitcoin/pull/31410#pullrequestreview-2604068753",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-06-12T13:42:34Z",
      "updated_at": "2025-06-22T19:31:14Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32736",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32736.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32736#issuecomment-2978602910), [maflcko](https://github.com/bitcoin/bitcoin/pull/32736#issuecomment-2980001315), [rkrux](https://github.com/bitcoin/bitcoin/pull/32736#pullrequestreview-2945788488) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31410](https://github.com/bitcoin/bitcoin/pull/31410) (qa: Fix `wallet_multiwallet.py` by hebasto)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-12T13:42:37Z"
        },
        {
          "user": "fanquake",
          "body": "https://cirrus-ci.com/task/6556243914915840?logs=ci#L4845:\r\n```bash\r\n[09:50:58.842]                                    AssertionError: [node 0] Expected messages \"['Error scanning directory entries under']\" does not partially match log:\r\n```",
          "created_at": "2025-06-12T13:59:52Z"
        },
        {
          "user": "achow101",
          "body": "ACK 272cd09b796a36596b325277bb43cb47b19c8e12",
          "created_at": "2025-06-17T01:04:14Z"
        },
        {
          "user": "maflcko",
          "body": "re-ACK 272cd09b796a36596b325277bb43cb47b19c8e12 üçΩ\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 272cd09b796a36596b325277bb43cb47b19c8e12 üçΩ\r\nAEazdGZf0r70TCVJIeQ80JUBY7kWpOCzK+1Ox7cr7sGS7jMMX/Gob+wUeP8QofmQ6VtgMMTCg9yg/xM5jyhyBg==\r\n```\r\n\r\n</details>\r\n\r\n",
          "created_at": "2025-06-17T11:31:52Z"
        }
      ]
    },
    {
      "number": 32735,
      "title": "[28.x] More backports",
      "body": "This backports \r\n* https://github.com/bitcoin/bitcoin/commit/3656b828dc2204418974e94928cc8d915b10ed95 - Which was missed in #32563, see https://github.com/bitcoin/bitcoin/pull/32563#issuecomment-2960237938.\r\n* #32693",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-06-12T09:45:25Z",
      "updated_at": "2025-06-17T13:52:06Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32735",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32735.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32735#pullrequestreview-2935374074) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- C_VISBILITY_PRESET -> C_VISIBILITY_PRESET [correct spelling of ‚Äúvisibility‚Äù in the CMake property name]\n- accomodate -> accommodate [correct spelling of ‚Äúaccommodate‚Äù]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-06-12T09:45:29Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `Win64, unit tests, no gui tests, no functional tests`: https://github.com/bitcoin/bitcoin/runs/43959393827</sub>\n<sub>LLM reason (‚ú® experimental): The failure is caused by errors in the test suite due to issues with Wine compatibility and missing system DLLs.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-12T11:42:36Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32734,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "xiaochengbeier",
      "created_at": "2025-06-12T05:38:44Z",
      "updated_at": "2025-06-12T05:42:22Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32734",
      "labels": []
    },
    {
      "number": 32733,
      "title": "getbestblockhash is sometimes taking a very long time",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nI'm running Bitcoin Core v29 on a RPi v4 with 4GB RAM and 2TB SSD. Sometimes when I run \"getbestblockhash\" it takes a very long time.\n\n```\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000208fcdfe388b464d7a7ef9c05b2ad2701488f1eedbe70\n\nreal    10m21.332s\nuser    0m0.000s\nsys     0m0.026s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n000000000000000000002f0d8fcab1392628ed73aa18848aa44cb53de6dff349\n\nreal    11m34.199s\nuser    0m0.002s\nsys     0m0.044s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000083ac9f1bc7ae399cd89f84c3058e5e7905a66da66394\n\nreal    4m40.592s\nuser    0m0.008s\nsys     0m0.019s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000083ac9f1bc7ae399cd89f84c3058e5e7905a66da66394\n\nreal    0m0.144s\nuser    0m0.007s\nsys     0m0.009s\n```\nThe last entry I ran immediately after the previous call and it returns the same hash which I guess is cached or easier to read on a subsequent call. I don't see anything in the logs but I am running the default log settings.\n\nIs there something that I need to tweak to get this to be more performant? Is there any other information needed to debug this?\n\n### Expected behaviour\n\ngetbestblockhash should return in seconds instead of minutes\n\n### Steps to reproduce\n\nbitcoin-cli getbestblockhash ....I'm not certain what data or environmental issues would cause it to take minutes to return.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv29\n\n### Operating system and version\n\nDebian Bullseye Lite\n\n### Machine specifications\n\nRPI 4\n4GB RAM\n2TB SSD connected via USB",
      "state": "open",
      "user": "martinatime",
      "created_at": "2025-06-12T02:52:17Z",
      "updated_at": "2025-07-25T22:30:48Z",
      "comments": 21,
      "url": "https://github.com/bitcoin/bitcoin/issues/32733",
      "labels": [
        "Resource usage"
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 2
  }
}