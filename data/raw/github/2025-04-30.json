{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:37:08.745783+00:00",
  "date": "2025-04-30",
  "pull_requests": [
    {
      "number": 32388,
      "title": "fuzz: Remove unused TimeoutExpired catch in fuzz runner",
      "body": "Currently, the way to check for libFuzzer is to search the stderr of the fuzz executable when passed `-help=1` for the string `libFuzzer`. See also https://github.com/bitcoin/bitcoin/blob/14b8dfb2bd5e2ca2b7c0c9a7f7d50e1e60adf75c/contrib/devtools/deterministic-fuzz-coverage/src/main.rs#L90-L101\r\n\r\nThe python test runner additionally includes a timeout catch, which was needed before the plain `read_file` fallback was implemented, see https://github.com/bitcoin/bitcoin/blob/14b8dfb2bd5e2ca2b7c0c9a7f7d50e1e60adf75c/src/test/fuzz/fuzz.cpp#L251.\r\n\r\nHowever, it is no longer needed and the printed error message would be wrong, so remove it.\r\n\r\n(side-note: On Windows the fuzz executable seems to time out when an assert is hit in a debug build, see https://github.com/bitcoin/bitcoin/issues/32341#issuecomment-2842716175. However, no one is running fuzz debug on Windows. Also, the newly added debug logging is a preferable replacement in this case anyway.)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-30T17:57:56Z",
      "updated_at": "2025-10-30T13:58:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32388",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32388.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [marcofleon](https://github.com/bitcoin/bitcoin/pull/32388#pullrequestreview-2812454130), [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/32388#issuecomment-2852734496), [brunoerg](https://github.com/bitcoin/bitcoin/pull/32388#pullrequestreview-2819842011), [Crypt-iQ](https://github.com/bitcoin/bitcoin/pull/32388#issuecomment-2858082209) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-30T17:57:59Z"
        },
        {
          "user": "kevkevinpal",
          "body": "crACK [fa48040](https://github.com/bitcoin/bitcoin/pull/32388/commits/fa4804009ceba96926edd7f55ea22442ebdc665d)\r\n\r\nAgreed the error message would be wrong but also not needed anymore",
          "created_at": "2025-05-05T23:50:00Z"
        },
        {
          "user": "Crypt-iQ",
          "body": "crACK fa4804009ceba96926edd7f55ea22442ebdc665d\r\n\r\nJust curious, why did adding the `read_file` fallback cause the timeout to be unused? I can't really speak to the Windows side-effect as I don't totally understand it.",
          "created_at": "2025-05-07T10:45:33Z"
        },
        {
          "user": "maflcko",
          "body": "> Just curious, why did adding the `read_file` fallback cause the timeout to be unused?\r\n\r\n`read_file` was implemented in https://github.com/bitcoin/bitcoin/commit/f59bee3fb242c9e02781a35272cf9644f37e7fc1. Previously, it would just call `read_stdin`, which then may time out (because nothing is fed into stdin).",
          "created_at": "2025-05-07T11:36:16Z"
        }
      ]
    },
    {
      "number": 32387,
      "title": "ipc: add windows support",
      "body": "\n<!-- begin based-on -->\n**This is based on https://github.com/bitcoin-core/libmultiprocess/pull/231.** The non-base commits are:\n\n- [`3d0737720ae6` ipc: add windows support](https://github.com/bitcoin/bitcoin/pull/32387/commits/3d0737720ae6bbd2c3eb4382e41fa49dd3d727d9)<!-- end -->\n\nThese changes make IPC features work on windows, resolving https://github.com/bitcoin-core/libmultiprocess/issues/53 and https://github.com/bitcoin-core/libmultiprocess/issues/114\n\nPR is a draft since this is less of a priority compared to other multiprocess PR's (see tracking issue #28722). Also it would probably make sense to split this up into separate commits. But the code is working and clean, and this could be reviewed and tested.\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-30T12:43:38Z",
      "updated_at": "2025-12-15T21:31:15Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32387",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32387.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32387#pullrequestreview-2807134774) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\n\n\nPossible typos and grammar issues:\n\n- \"needs be to called\" -> \"needs to be called\" [grammatical error: missing \"to\" in infinitive]\n- \"//! up its own state (calling ProxyServer destructors, etc) on disconnect,\" -> \"//! clean up its own state (calling ProxyServer destructors, etc.) on disconnect,\" [fragment/missing verb; \"clean up\" restores meaning; add period after \"etc\" for completeness]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- socket(addr.sun_family, SOCK_STREAM, 0) in src/ipc/process.cpp\n- socket(addr.sun_family, SOCK_STREAM, 0) in src/ipc/process.cpp\n\n\n\n<sup>2025-12-12</sup>\n",
          "created_at": "2025-04-30T12:43:41Z"
        },
        {
          "user": "ryanofsky",
          "body": "Updated 9df5a838aa9c020adf8d024393749d75bd932ec2 -> 87432b6a4325e09a13c912d77b386daa3832b34d ([`pr/ipc-win.1`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.1) -> [`pr/ipc-win.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.1..pr/ipc-win.2)) fixing accidentally disabled tests",
          "created_at": "2025-04-30T12:47:30Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `multiprocess, i686, DEBUG`: https://github.com/bitcoin/bitcoin/runs/41420704031</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by an assertion failure in the IPC test suite due to a nullptr dereference.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-04-30T15:00:08Z"
        },
        {
          "user": "Sjors",
          "body": "I guess the easiest way to test this would be to combine it with:\r\n1. #31756 so I can bake a Widnows guix build instead of learning to compile on Windows; and\r\n2. #30437 to have something to test against",
          "created_at": "2025-04-30T19:12:53Z"
        },
        {
          "user": "ryanofsky",
          "body": "Updated 87432b6a4325e09a13c912d77b386daa3832b34d -> 0a35e21103b7fed6e46c809e9029446277b6f6ee ([`pr/ipc-win.2`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.2) -> [`pr/ipc-win.3`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.2..pr/ipc-win.3)) to fix test CI failure https://cirrus-ci.com/task/5583224107171840 due to bad std::optional access\r\nUpdated 0a35e21103b7fed6e46c809e9029446277b6f6ee -> 27328195136754babe8d8f5d99f4f0b6a5ab2e55 ([`pr/ipc-win.3`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.3) -> [`pr/ipc-win.4`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.3..pr/ipc-win.4)) to fix CI test failure https://cirrus-ci.com/task/5668412652781568 in rpc_misc.py echoipc call due to CLOEXEC flag \r\n\r\n---\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/32387#issuecomment-2843024844\r\n\r\nAgree changes in #31756 should make this easier to test (though I might be able to make a minimal change here to turn on multiprocess windows build).\r\n\r\nHaving #30437 or #32297 merged first would also make test coverage more meaningful because they both add functional tests for -ipcbind and -ipcconect options.\r\n\r\nIn general there is more work to do here and I hope other PRs can be merged before this one.",
          "created_at": "2025-04-30T21:24:25Z"
        },
        {
          "user": "ryanofsky",
          "body": "Updated 27328195136754babe8d8f5d99f4f0b6a5ab2e55 -> f215e742045401ab386f0cd67d06b358558ecf89 ([`pr/ipc-win.4`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.4) -> [`pr/ipc-win.5`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.4..pr/ipc-win.5)) fixing many windows bugs.\r\n\r\nWith this update, IPC code is mostly working on windows: `mpexample` and `mptest` programs work, `test_bitcoin` IPC calls over socketpairs work, `bitcoin-node` `echoipc` command is able to create a subprocess and successfully make calls to it, and `bitcoin-node` `-ipcbind` option creates a unix socket file. Some problems remain:\r\n\r\n- This is a hang on shutdown that prevents child processes from exiting. You can kill them manually and everything works fine, but this problem needs to be debugged.\r\n- `bitcoin-mine -ipcconnect` seems unable to find the unix socket, failing with \"Error: The system cannot find the file specified\" even though the socket exists. Two `test_bitcoin` unix socket tests also give similar errors.\r\n- The `test_bitcoin` parse address tests fails because some checks are looking for / not \\ separators.\r\n",
          "created_at": "2025-05-02T21:12:48Z"
        },
        {
          "user": "ryanofsky",
          "body": "Updated f215e742045401ab386f0cd67d06b358558ecf89 -> 5f272b7cc3b72fe4a59f590825b68dc2c342baca ([`pr/ipc-win.5`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.5) -> [`pr/ipc-win.6`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.5..pr/ipc-win.6)) with more fixes.\n<!-- begin push-7 -->\nUpdated 5f272b7cc3b72fe4a59f590825b68dc2c342baca -> 13aef5ad7669e0302e27f96876615907dc98c3c3 ([`pr/ipc-win.6`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.6) -> [`pr/ipc-win.7`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.6..pr/ipc-win.7))<!-- end --> improving comments.\n\nWith the new fixes, IPC is fully working on windows: both creating child processes and communicating over socket pairs, and listening and making connections over unix sockets. (Latter currently requires adding a SetupNetworking call to bitcoin-mine in #30437). The code changes are also mostly straightforward and clean, although I want to split commits to make them easier to review.\n\nWill leave this PR in a draft state for now since other multiprocess PRs should have higher priority (see tracking issue https://github.com/bitcoin/bitcoin/issues/28722)\n\n--\n\n<!-- begin push-8 -->\nRebased 13aef5ad7669e0302e27f96876615907dc98c3c3 -> cbd06846803e800f23f4498e27f930e09d260000 ([`pr/ipc-win.7`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.7) -> [`pr/ipc-win.8`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.8), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.7-rebase..pr/ipc-win.8))<!-- end --> due to conflicts with #32345\n<!-- begin push-9 -->\nRebased cbd06846803e800f23f4498e27f930e09d260000 -> 3d0737720ae6bbd2c3eb4382e41fa49dd3d727d9 ([`pr/ipc-win.8`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.8) -> [`pr/ipc-win.9`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.9), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.8-rebase..pr/ipc-win.9))<!-- end --> due to conflicts with #33517\n<!-- begin push-10 -->\nRebased 3d0737720ae6bbd2c3eb4382e41fa49dd3d727d9 -> 24f5e883f20d0c65bc163dba0e3d8c2f031c63c7 ([`pr/ipc-win.9`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.9) -> [`pr/ipc-win.10`](https://github.com/ryanofsky/bitcoin/commits/pr/ipc-win.10), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/ipc-win.9-rebase..pr/ipc-win.10))<!-- end -->",
          "created_at": "2025-05-06T15:09:53Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `No wallet`: https://github.com/bitcoin/bitcoin/actions/runs/20166538974/job/57891563544</sub>\n<sub>LLM reason (‚ú® experimental): Compilation failure: missing mp::Stream and mp::SocketId types (making CapnpProtocol abstract and uninstantiable).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-12T16:18:04Z"
        }
      ]
    },
    {
      "number": 32386,
      "title": "mining: rename gbt_force and gbt_force_name",
      "body": "The term \"force\" is ambiguous and not used in [BIP9](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki#getblocktemplate-changes) where there ! rule prefix is introduced.\r\n\r\nE.g. this code is hard to read:\r\n\r\n```cpp\r\nif (!gbt_force) {\r\n   s.insert(s.begin(), '!');\r\n```\r\n\r\nAdditionally, #29039 renamed `gbt_vb_name` to `gbt_force_name` which, at least for me, further increased the confusion.\r\n\r\nThis is a pure (variable rename) refactor (plus documentation) and does not change behavior.\r\n\r\nReminder of how to verify a scripted diff:\r\n\r\n```sh\r\ntest/lint/commit-script-check.sh origin/master..HEAD\r\n```",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-04-30T12:01:30Z",
      "updated_at": "2025-05-14T06:55:05Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32386",
      "labels": [
        "Mining"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32386.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32386#issuecomment-2843168779), [janb84](https://github.com/bitcoin/bitcoin/pull/32386#pullrequestreview-2809667848), [musaHaruna](https://github.com/bitcoin/bitcoin/pull/32386#pullrequestreview-2814893880), [glozow](https://github.com/bitcoin/bitcoin/pull/32386#pullrequestreview-2838070577) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26201](https://github.com/bitcoin/bitcoin/pull/26201) (Remove Taproot activation height by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-30T12:01:33Z"
        },
        {
          "user": "sedited",
          "body": "Can this be a scripted diff?",
          "created_at": "2025-04-30T12:35:56Z"
        },
        {
          "user": "Sjors",
          "body": "@TheCharlatan converted to a scripted diff plus a documentation commit.",
          "created_at": "2025-04-30T12:49:47Z"
        },
        {
          "user": "ajtowns",
          "body": "Note that there this field combines three effects:\r\n\r\n 1. per bip-9, it means that the template incorporates features from that soft fork and miners not aware of what the soft fork means may produce invalid blocks by mining in the regular way \r\n 2. similar to bip-145's implication that clients must specify \"segwit\" in the rules field of its request in order for witness txs to be included, it becomes an error if a client doesn't explicitly indicate support for a feature that's activated when requesting a template\r\n 3. when a \"!\" soft fork is in the signalling phase, if the getblocktemplate request didn't indicate support, then the template won't signal for the feature by default\r\n\r\nI don't think the third effect has ever actually been used: since bip9, segwit was the only `gbt_force=false` rule, but that was set to `gbt_force=true` prior to activation with #9955. See also #16060 and #17946. In particular https://github.com/bitcoin/bitcoin/pull/16060/files#r309323261",
          "created_at": "2025-04-30T13:44:06Z"
        },
        {
          "user": "Sjors",
          "body": "I also documented some of the `!` behavior in #26201. It might be worth including that here, along with @ajtowns's explanation.\r\n\r\nBehavior (3) is implemented here (code from master, so no rename):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/14b8dfb2bd5e2ca2b7c0c9a7f7d50e1e60adf75c/src/rpc/mining.cpp#L965-L970\r\n\r\nThis seems potentially dangerous when combined with forced signalling, which IIRC has occasionally been proposed _after_ Bitcoin Core already shipped activation code. Once something is locked in, there's less utility in (correctly) signalling, so it could make sense to \"lie\", especially since behavior (2) inevitably kicks at activation time:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/14b8dfb2bd5e2ca2b7c0c9a7f7d50e1e60adf75c/src/rpc/mining.cpp#L974-L978\r\n\r\nOn the other hand, perhaps a helpful community member notices the lack of signalling at this stage and alerts the miner of the impending doom. And SPV clients could use it to anticipate a bumpy period of small reorgs. ",
          "created_at": "2025-04-30T14:31:40Z"
        },
        {
          "user": "achow101",
          "body": "ACK 0750249289c092fc8e2e29669fec73a58b873767\r\n\r\nThis was a little bit confusing to me when reviewing #29039",
          "created_at": "2025-04-30T20:12:22Z"
        },
        {
          "user": "Sjors",
          "body": "@musaHaruna it looks like you checked an outdated hash.",
          "created_at": "2025-05-05T14:01:03Z"
        },
        {
          "user": "musaHaruna",
          "body": "@Sjors Thanks. Updated to the latest hash",
          "created_at": "2025-05-05T14:13:50Z"
        }
      ]
    },
    {
      "number": 32385,
      "title": "test: refactor out same-txid-diff-wtxid tx to reuse in other tests",
      "body": "It's useful to easily create transactions with same txid, different wtxid and valid witness for testing scenarios in other places in the codebase (ex: private broadcast connections, see https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2055915118)\r\n\r\nSo refactor out the current `same-txid-diff-wtxid` transaction in `mempool_accept_wtxid.py` so that it can be reused.",
      "state": "closed",
      "user": "stratospher",
      "created_at": "2025-04-30T08:15:12Z",
      "updated_at": "2025-09-03T09:33:40Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32385",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32385.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32385#issuecomment-2980766165), [theStack](https://github.com/bitcoin/bitcoin/pull/32385#pullrequestreview-2945920824), [vasild](https://github.com/bitcoin/bitcoin/pull/32385#pullrequestreview-2953228936) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-30T08:15:15Z"
        },
        {
          "user": "theStack",
          "body": "Concept ACK\r\n\r\nSeems useful to create a pair of valid \"same-txid-different-wtxid\" transactions for testing purposes.\r\n\r\nDidn't try that yet, but I think another possibility to create these without having to involve signatures at all would be a \"trivial math puzzle\"-like locking script of e.g. \"OP_ADD 5 OP_EQUAL\" (in a p2wsh or p2tr script-path) and swapped witness data elements ([1,4] and [4,1]) in the spending txs.",
          "created_at": "2025-05-13T12:57:25Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK afaaba69eddd50bc22b94ca7c0f9195773aaa111 üìé\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK afaaba69eddd50bc22b94ca7c0f9195773aaa111 üìé\r\nw44y4qKZmXzcguTW5prhwG9RaYGgH9OHX1jY8LvGM8uNagph12jUxir9RBvQEygHsFYJoYCA815jxbITO6+/AA==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-06-17T15:10:36Z"
        },
        {
          "user": "stratospher",
          "body": "So I changed the approach in the PR. `mempool_accept_wtxid.py` already was dealing with same-txid-different-wtxid scenario and I've simply refactored it out.\r\n\r\nHere's an example of how it can be used in the private broadcast tests - https://github.com/stratospher/bitcoin/commit/c14812402aa370b448a46efad1b0e5a5af1199ee\r\n\r\n> Didn't try that yet, but I think another possibility to create these without having to involve signatures at all would be a \"trivial math puzzle\"-like locking script of e.g. \"OP_ADD 5 OP_EQUAL\" (in a p2wsh or p2tr script-path) and swapped witness data elements ([1,4] and [4,1]) in the spending txs.\r\n\r\nYes! This P2TR locking script worked and I honestly liked it better than the current P2WSH one we have (more compact + cleaner). I didn't change it though for easier review and both give same-txid-different-wtxid anyways.",
          "created_at": "2025-06-19T11:07:35Z"
        },
        {
          "user": "vasild",
          "body": "This is [used](https://github.com/bitcoin/bitcoin/pull/29415#issuecomment-3248422237) now in https://github.com/bitcoin/bitcoin/pull/29415, thank you!",
          "created_at": "2025-09-03T09:33:40Z"
        }
      ]
    },
    {
      "number": 32384,
      "title": "Make `cs_db` mutex non-recursive",
      "body": "Make `cs_db` mutex non-recursive (related to https://github.com/bitcoin/bitcoin/issues/19303).",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-04-30T06:31:33Z",
      "updated_at": "2025-04-30T13:54:44Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32384",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32384.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28710](https://github.com/bitcoin/bitcoin/pull/28710) (Remove the legacy wallet and BDB dependency by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-30T06:31:36Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/41399604706</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a trailing whitespace issue detected during the lint check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-04-30T07:41:13Z"
        },
        {
          "user": "hebasto",
          "body": "It might be better to focus on reviewing  https://github.com/bitcoin/bitcoin/pull/28710 instead.",
          "created_at": "2025-04-30T08:11:46Z"
        }
      ]
    },
    {
      "number": 32383,
      "title": "util: Remove `fsbridge::get_filesystem_error_message()`",
      "body": "The `fsbridge::get_filesystem_error_message()` function exhibits several drawbacks:\r\n\r\n1. It was introduced in https://github.com/bitcoin/bitcoin/pull/14192 to account for platform-specific variations in\r\n`boost::filesystem::filesystem_error::what()`. Since [migrating](https://github.com/bitcoin/bitcoin/pull/20744) to `std::filesystem`, those discrepancies no longer exist.\r\n\r\n2. It fails to display UTF-8 paths correctly on Windows:\r\n```\r\n> build\\bin\\Release\\bitcoind.exe -datadir=\"C:\\Users\\hebasto\\dd_‚Çø_üèÉ\" -regtest\r\n...\r\n2025-04-30T00:17:48Z DeleteAuthCookie: Unable to remove random auth cookie file: remove: Access is denied.: \"C:\\Users\\hebasto\\dd_?_??\\regtest\\.cookie\"\r\n...\r\n```\r\n\r\n3. It relies on `std::wstring_convert`, which was deprecated in C++17 and removed in C++26 (also see https://github.com/bitcoin/bitcoin/issues/32361).\r\n\r\nThis PR removes the obsolete `fsbridge::get_filesystem_error_message()` function, thereby resolving all of the above issues.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-30T00:18:29Z",
      "updated_at": "2025-04-30T18:51:11Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32383",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32383.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32383#issuecomment-2841616263), [laanwj](https://github.com/bitcoin/bitcoin/pull/32383#pullrequestreview-2806981828), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32383#issuecomment-2841953785), [achow101](https://github.com/bitcoin/bitcoin/pull/32383#issuecomment-2842817151) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#28710](https://github.com/bitcoin/bitcoin/pull/28710) (Remove the legacy wallet and BDB dependency by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-30T00:18:32Z"
        },
        {
          "user": "hebasto",
          "body": "Friendly ping @ryanofsky @davidgumberg @hodlinator @sipsorcery :)",
          "created_at": "2025-04-30T09:24:23Z"
        },
        {
          "user": "hebasto",
          "body": "The recent [feedback](https://github.com/bitcoin/bitcoin/pull/32383#discussion_r2068272988) from @maflcko has been addressed.",
          "created_at": "2025-04-30T09:43:13Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm re-ACK 97eaadc3bf9f621ba397e29bb1c0cd99af55f2e3\r\n\r\nOnly change are some minor format cleanups for the error messages.",
          "created_at": "2025-04-30T11:04:45Z"
        },
        {
          "user": "davidgumberg",
          "body": "untested crACK https://github.com/bitcoin/bitcoin/pull/32383/commits/97eaadc3bf9f621ba397e29bb1c0cd99af55f2e3\r\n\r\nThis code made sense when using boost, but I think `std::filesystem` implementations are responsible for and better equipped to handle platform specific character width issues.",
          "created_at": "2025-04-30T13:21:07Z"
        },
        {
          "user": "achow101",
          "body": "ACK 97eaadc3bf9f621ba397e29bb1c0cd99af55f2e3",
          "created_at": "2025-04-30T17:43:53Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 6,
    "issues": 0
  }
}