{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:49:48.072606+00:00",
  "date": "2025-06-11",
  "pull_requests": [
    {
      "number": 32732,
      "title": "net, rpc, qt: add per-peer blocktxn stats to getpeerinfo and qt debug window",
      "body": "Adds per-peer tracking of the TX count and byte size of the last BLOCKTXN message sent.\r\nThese stats are exposed via getpeerinfo and displayed in the Qt debug window.",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-06-11T22:30:29Z",
      "updated_at": "2025-09-25T09:44:52Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32732",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32732.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T22:30:32Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/43929845422</sub>\n<sub>LLM reason (‚ú® experimental): The failure is caused by a trailing whitespace error detected during the lint check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-11T22:40:18Z"
        },
        {
          "user": "maflcko",
          "body": "Not sure. Why should those debug-only stats be exposed on the rpc and the gui?",
          "created_at": "2025-06-12T06:16:31Z"
        },
        {
          "user": "waketraindev",
          "body": "Thanks for the feedback, makes sense. I use this in my node monitoring tooling. Closed.",
          "created_at": "2025-06-12T09:39:52Z"
        }
      ]
    },
    {
      "number": 32731,
      "title": "depends: Build `qt` package for FreeBSD hosts",
      "body": "This PR continues the work started in https://github.com/bitcoin/bitcoin/pull/23948.\r\n\r\nHere is an excerpt from the log:\r\n```\r\n$ ./build/bin/bitcoin-qt -printtoconsole\r\n2025-06-12T01:06:56Z Bitcoin Core version v29.99.0-15de25ba2a28 (release build)\r\n2025-06-12T01:06:56Z Qt 6.7.3 (static), plugin=xcb\r\n2025-06-12T01:06:56Z Static plugins:\r\n2025-06-12T01:06:56Z  QMinimalIntegrationPlugin, version 395008\r\n2025-06-12T01:06:56Z  QXcbIntegrationPlugin, version 395008\r\n2025-06-12T01:06:56Z Style: fusion / QFusionStyle\r\n2025-06-12T01:06:56Z System: FreeBSD 14.3-RELEASE, x86_64-little_endian-lp64\r\n```\r\n\r\nAnd here are the screenshots:\r\n\r\n![image](https://github.com/user-attachments/assets/acf3fefc-ee3f-41cb-ab9a-3bc4d49c7054)\r\n\r\n\r\n![image](https://github.com/user-attachments/assets/6280303f-9c7b-445d-8428-172ea998343d)\r\n",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-06-11T21:43:20Z",
      "updated_at": "2025-06-26T16:29:06Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32731",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32731.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/32731#pullrequestreview-2958316212) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32262](https://github.com/bitcoin/bitcoin/pull/32262) (build: Restore cross-compilation for Android by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T21:43:23Z"
        },
        {
          "user": "hebasto",
          "body": "Friendly ping @vasild :)",
          "created_at": "2025-06-16T11:13:37Z"
        }
      ]
    },
    {
      "number": 32730,
      "title": "p2p: avoid traversing blocks (twice) during IBD",
      "body": "Context:\r\nEvery time a block is connected, a `BlockConnected()` event is appended to the validation interface queue. This queue is consumed sequentially by a single worker thread. To avoid excessive memory usage, the queue is limited to 10 events at a time, and we stop processing new blocks until the queued events are handled.\r\n\r\nIssue:\r\nWithin the `PeerManager::BlockConnected()` listener, we traverse the block twice inside the transaction download manager ‚Äî despite not needing to handle orphans or transaction requests during IBD.\r\n\r\nExtra info about the changes:\r\nThe new arg added to `BlockConnected()` in the first commit is primarily meant to avoid locking `cs_main` on the\r\nlistener side (to avoid calling `IsInitialBlockDownload()` there).\r\nAnother way of implementing this could be to add a bool field `enabled` to the `TxDownloadManager` class that is only\r\nset to true when we are out of IBD, so that we don't have to include a new arg inside the block connection event.\r\nThis is open for discussion. Could try implementing this second approach too.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2025-06-11T16:54:40Z",
      "updated_at": "2025-12-12T10:42:47Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32730",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32730.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32941](https://github.com/bitcoin/bitcoin/pull/32941) (p2p: TxOrphanage revamp cleanups by glozow)\n* [#32827](https://github.com/bitcoin/bitcoin/pull/32827) (mempool: Avoid needless vtx iteration during IBD by l0rinc)\n* [#32631](https://github.com/bitcoin/bitcoin/pull/32631) (refactor: Convert GenTxid to `std::variant` by marcofleon)\n* [#32189](https://github.com/bitcoin/bitcoin/pull/32189) (refactor: Txid type safety (parent PR) by marcofleon)\n* [#31829](https://github.com/bitcoin/bitcoin/pull/31829) (p2p: improve TxOrphanage denial of service bounds by glozow)\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n* [#30116](https://github.com/bitcoin/bitcoin/pull/30116) (p2p: Fill reconciliation sets (Erlay) attempt 2 by sr-gi)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T16:54:44Z"
        },
        {
          "user": "sedited",
          "body": "One thing that still irks me a bit is that we are communicating more `ChainstateManager` state through a `Chainstate` callback. I think ideally the chainstate should not have to know if it is in ibd or not, but that is a difficult thing to achieve with out current code. What does seem non-ideal is that re-indexing is treated the same `is_ibd`. Maybe the `SynchronizationState` from the `headerTip` notification would give us more flexibility in that regard if needed in the future?",
          "created_at": "2025-06-13T10:15:18Z"
        },
        {
          "user": "furszy",
          "body": "> One thing that still irks me a bit is that we are communicating more `ChainstateManager` state through a `Chainstate` callback. I think ideally the chainstate should not have to know if it is in ibd or not, but that is a difficult thing to achieve with out current code.\r\n\r\nHmm yeah, we would need to decouple the block download logic from the chain state class first. This reminds me to #27837, which is a small step in that direction.\r\n\r\n> What does seem non-ideal is that re-indexing is treated the same is_ibd. Maybe the SynchronizationState from the headerTip notification would give us more flexibility in that regard if needed in the future?\r\n\r\nCheck it now. Ended up reimplementing it differently.",
          "created_at": "2025-06-17T19:41:00Z"
        },
        {
          "user": "furszy",
          "body": "> m_initial_sync_finished will normally be set to true, so this is dead code now. Surprising that no tests failed ...\r\n\r\nyeah.. This reminded me why I didn‚Äôt use the `m_initial_sync_finished` flag in the previous version.. it is being set differently because it can toggle back and forth, while the IBD one doesn‚Äôt. We had a whole discussion about this in #28170.\r\nBefore getting into any detail, will think more about the approach (not this week) and whether it‚Äôs worth embarking on a larger journey just for this change.\r\n",
          "created_at": "2025-06-18T12:53:34Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-07-11T19:11:36Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--13523179cfe9479db18ec6c5d236f789-->\n‚åõ There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? ‚û°Ô∏è Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? ‚û°Ô∏è Please close.\n* Did the author lose interest or time to work on this? ‚û°Ô∏è Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
          "created_at": "2025-10-08T02:27:37Z"
        },
        {
          "user": "sedited",
          "body": "This should be re-opened. At the least the tx orphanage should not require work when it is empty.",
          "created_at": "2025-11-29T09:40:15Z"
        },
        {
          "user": "mzumsande",
          "body": "> At the least the tx orphanage should not require work when it is empty\r\n\r\nThat part was merged with #32827",
          "created_at": "2025-12-01T20:12:09Z"
        },
        {
          "user": "sedited",
          "body": "> That part was merged with https://github.com/bitcoin/bitcoin/pull/32827\r\n\r\nAh right, forgot about that. Should have mentioned this directly, but the change I was looking for is in the txdownloadman. Was thinking that if this is rebased, we could add a patch for avoiding the additional iteration and filter calculation there in this pull request. But I guess I could also just open a separate PR for that?",
          "created_at": "2025-12-06T13:14:40Z"
        },
        {
          "user": "stratospher",
          "body": "planning on picking this up in a separate PR - unless someone already has a branch ready (happy to review in that case!).",
          "created_at": "2025-12-12T05:41:02Z"
        }
      ]
    },
    {
      "number": 32729,
      "title": "test,refactor: extract script template helpers & widen sigop count coverage",
      "body": "### Summary\r\n\r\nThis PR extracts a set of cheap, inline helpers for recognizing the most common script templates, clarifies the definition of valid op-codes for pre-Taproot scripts, and splits the existing \"deserialize + check-block\" benchmark into three orthogonal micro-benchmarks.  \r\nThe change is behavior-neutral for consensus and policy - every modified call-site performs the same checks as before, just through clearer helper functions.\r\n\r\n### Context\r\n\r\nWhile working on [`GetSigOpCount` optimizations for known script templates](https://github.com/bitcoin/bitcoin/pull/32532) I noticed that feature-test coverage was [thin for this code path](https://maflcko.github.io/b-c-cov/total.coverage/src/script/script.cpp.gcov.html).  \r\nThis PR therefore adds tests for error cases (malformed push-data encodings) and for the expected sigop totals of the various script templates (including edge cases like a sigop after an `OP_RETURN`).\r\n\r\nGiven the difficulty of reviewing the [original optimizations themselves](https://github.com/bitcoin/bitcoin/pull/32532#issuecomment-2950665350), I split all test / benchmark work into this standalone PR.  \r\nThe recent burst of sigops related refactor activity ([#31624](https://github.com/bitcoin/bitcoin/pull/31624), [#32521](https://github.com/bitcoin/bitcoin/pull/32521), [#32533](https://github.com/bitcoin/bitcoin/pull/32533)) underlines the need for extra safety.\r\n\r\nThe refactors here eliminate magic numbers, deduplicate template checks, and lay groundwork for future performance work.\r\n\r\n### Structure\r\n\r\n* **Benchmarks** - first commits separate deserialization+hashing, validation, and sigop counting so each cost can be measured independently.  \r\n* **Template helpers** - tiny, mechanical commits move each script-template check into `script.h`, replace all ad-hoc byte-checks, and add tests where necessary.  \r\n* **Tests** - a full script-test suite covering malformed `PUSHDATA` sequences and the pre-taproot / accurate sigop totals for every standard template.  \r\n* **pre-taproot opcode ceiling** - documents, enforces, and tests that `OP_CHECKSIGADD` > `MAX_OPCODE`.\r\n* **Extra fuzzing** - enabled all possible opcodes in `ConsumeOpcodeType`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-06-11T14:44:28Z",
      "updated_at": "2026-01-15T17:24:02Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32729",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32729.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32729#pullrequestreview-3115365742), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32729#pullrequestreview-3117474040) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34210](https://github.com/bitcoin/bitcoin/pull/34210) (bench: Remove -priority-level= option by maflcko)\n* [#34208](https://github.com/bitcoin/bitcoin/pull/34208) (bench: add fluent API for untimed `setup` steps in nanobench by l0rinc)\n* [#33645](https://github.com/bitcoin/bitcoin/pull/33645) (refactor: optimize: avoid allocations in script & policy verification by Raimo33)\n* [#32554](https://github.com/bitcoin/bitcoin/pull/32554) (bench: replace embedded raw block with configurable block generator by l0rinc)\n* [#32317](https://github.com/bitcoin/bitcoin/pull/32317) (kernel: Separate UTXO set access from validation functions by sedited)\n* [#31682](https://github.com/bitcoin/bitcoin/pull/31682) ([IBD] specialize CheckBlock's input & coinbase checks by l0rinc)\n* [#29060](https://github.com/bitcoin/bitcoin/pull/29060) (Policy: Report debug message why inputs are non standard by ismaelsadeeq)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T14:44:32Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/43965124848</sub>\n<sub>LLM reason (‚ú® experimental): The failure is caused by a compilation error in policy.cpp where a boolean value is incorrectly passed to a function expecting a CScript reference.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-21T10:23:40Z"
        },
        {
          "user": "l0rinc",
          "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/32521/files#diff-ea6d307faa4ec9dfa5abcf6858bc19603079f2b8e110e1d62da4df98f4bdb9c0R184",
          "created_at": "2025-07-21T19:58:48Z"
        },
        {
          "user": "l0rinc",
          "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/32279 - updating the tests with the new convenience template helpers instead of using `Solver` for them. Ready for review again.",
          "created_at": "2025-07-28T20:42:00Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `MSan, depends`: https://github.com/bitcoin/bitcoin/runs/47383324322</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a compilation error in script_ops.cpp: 'GetSigOpCount' is missing in 'CScript'.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-05T02:39:18Z"
        },
        {
          "user": "l0rinc",
          "body": "Addressed or responded to all concerns, thanks for spending the time to review this.\r\nI've extended the fuzzer to use the whole range of possible opcodes, I'm curious to see if it reveals any new failures.\r\nThe change consists of tiny, simple changes, other reviewers are welcome.",
          "created_at": "2025-08-06T02:15:59Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/47470624304</sub>\n<sub>LLM reason (‚ú® experimental): Lint check failed due to locale-dependent code usage in src/test/sigopcount_tests.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-06T02:31:37Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `no wallet, libbitcoinkernel`: https://github.com/bitcoin/bitcoin/runs/47636996984</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a compilation error due to calling CountP2SHSigOps with one argument instead of the required two.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-07T23:00:10Z"
        },
        {
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/16872143934/job/47788785406?pr=32729#step:6:4338:\r\n```bash\r\n test/script_tests.cpp(1620): Entering test case \"GetOpName_no_missing_mnemonics\"\r\n/home/runner/work/_temp/src/test/script_tests.cpp:1622:25: runtime error: load of value 256, which is not a valid value for type 'opcodetype'\r\n    #0 0x559b4df3e847 in script_tests::GetOpName_no_missing_mnemonics::test_method() /home/runner/work/_temp/build-asan/src/test/./test/script_tests.cpp:1622:25\r\n    #1 0x559b4df3ba1b in script_tests::GetOpName_no_missing_mnemonics_invoker() /home/runner/work/_temp/build-asan/src/test/./test/script_tests.cpp:1620:1\r\n    #2 0x559b4d0f360d in boost::function0<void>::operator()() const /usr/include/boost/function/function_template.hpp:771:14\r\n    #3 0x559b4d174328 in boost::detail::forward::operator()() /usr/include/boost/test/impl/execution_monitor.ipp:1395:32\r\n    #4 0x559b4d174328 in boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) /usr/include/boost/function/function_template.hpp:137:18\r\n    #5 0x559b4d16de2d in boost::function0<int>::operator()() const /usr/include/boost/function/function_template.hpp:771:14\r\n    #6 0x559b4d0598fc in int boost::detail::do_invoke<boost::shared_ptr<boost::detail::translator_holder_base>, boost::function<int ()>>(boost::shared_ptr<boost::detail::translator_holder_base> const&, boost::function<int ()> const&) /usr/include/boost/test/impl/execution_monitor.ipp:308:30\r\n    #7 0x559b4d0598fc in boost::execution_monitor::catch_signals(boost::function<int ()> const&) /usr/include/boost/test/impl/execution_monitor.ipp:910:16\r\n    #8 0x559b4d059e0d in boost::execution_monitor::execute(boost::function<int ()> const&) /usr/include/boost/test/impl/execution_monitor.ipp:1308:16\r\n    #9 0x559b4d052498 in boost::execution_monitor::vexecute(boost::function<void ()> const&) /usr/include/boost/test/impl/execution_monitor.ipp:1404:5\r\n    #10 0x559b4d052498 in boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) /usr/include/boost/test/impl/unit_test_monitor.ipp:49:9\r\n    #11 0x559b4d0b5fd4 in boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /usr/include/boost/test/impl/framework.ipp:815:44\r\n    #12 0x559b4d0b4e9b in boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /usr/include/boost/test/impl/framework.ipp:784:58\r\n    #13 0x559b4d0b4e9b in boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /usr/include/boost/test/impl/framework.ipp:784:58\r\n    #14 0x559b4d0508eb in boost::unit_test::framework::run(unsigned long, bool) /usr/include/boost/test/impl/framework.ipp:1722:29\r\n    #15 0x559b4d07f350 in boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) /usr/include/boost/test/impl/unit_test_main.ipp:250:9\r\n    #16 0x7f2c01d841c9  (/lib/x86_64-linux-gnu/libc.so.6+0x2a1c9) (BuildId: 282c2c16e7b6600b0b22ea0c99010d2795752b5f)\r\n    #17 0x7f2c01d8428a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2a28a) (BuildId: 282c2c16e7b6600b0b22ea0c99010d2795752b5f)\r\n    #18 0x559b4cf44984 in _start (/home/runner/work/_temp/build-asan/bin/test_bitcoin+0x12c5984) (BuildId: 536afe9665aa0f1665ca9d21723b3d0c1c5aa9a6)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: invalid-enum-load /home/runner/work/_temp/src/test/script_tests.cpp:1622:25 \r\n```",
          "created_at": "2025-08-12T13:19:41Z"
        },
        {
          "user": "l0rinc",
          "body": "Rebased, ready for review again. This change is mostly about tests and benchmarks and cleanup, let me know if you think the two should be added separately instead.",
          "created_at": "2026-01-15T17:09:57Z"
        }
      ]
    },
    {
      "number": 32728,
      "title": "Add initial OpenAPI/Swagger specification for Bitcoin Core RPC and REST interfaces (issue #29912)",
      "body": "## Motivation\r\n\r\nCurrently, (almost) all clients manually implement the Bitcoin Core RPC API, which leads to:\r\n- Accidental implementation bugs (e.g., unit mistakes such as vB vs BTC/kvB)\r\n- Difficulty maintaining clients as the API evolves\r\n- Increased effort to implement clients in new programming languages\r\n\r\nThere is no formal, machine-readable specification of the RPC API. Existing documentation is not sufficient for code generation or type-safe client implementations. See discussion in #29912.\r\n\r\n## Overview\r\n\r\nThis PR introduces an initial OpenAPI/Swagger specification for the Bitcoin Core RPC and REST interfaces. The goal is to provide a foundation for:\r\n- Automated client code generation in multiple languages (e.g., via [Kiota](https://github.com/microsoft/kiota))\r\n- Easier maintenance and improved correctness for downstream clients\r\n- A step towards a spec-driven development process for the RPC API\r\n\r\n## Details\r\n\r\n- Adds `share/openapi.yml` describing the REST API (and/or `bitcoin-rpc-openapi.yaml` for the JSON-RPC interface).\r\n- The spec is based on the current implementation and documentation, but is a work in progress and will need to be updated as the API evolves.\r\n- See #29912 for background, rationale, and community discussion.\r\n\r\n## Tests\r\n\r\nThis change is documentation/specification only. No code is modified. Downstream client generators and tools can be used to validate the spec.\r\n\r\n## Further Work\r\n\r\n- Extend the OpenAPI spec to cover all RPC methods and parameters, including type details and units.\r\n- Consider generating JSON Schema or OpenRPC specifications for even better machine-readability and codegen support.\r\n- Integrate with CI to ensure the spec remains up-to-date.\r\n\r\n---\r\n\r\nCloses #29912\r\n\r\n---",
      "state": "closed",
      "user": "sweeden-ttu",
      "created_at": "2025-06-11T11:04:35Z",
      "updated_at": "2025-06-11T12:32:50Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32728",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32728.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T11:04:38Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `no wallet, libbitcoinkernel`: https://github.com/bitcoin/bitcoin/runs/43882810988</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a missing 'openapi-generator' executable during the openapi_codegen_vs_rpc_headers test.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-11T11:08:47Z"
        },
        {
          "user": "willcl-ark",
          "body": "I strongly suspect this PR description is AI-generated; this makes it seem likely to me that the code is also AI-generated.\r\n\r\nI also don't think this PR is ready for review, and it should be marked as draft (or probably better still, closed) while you work on it, at which point it can be opened.\r\n\r\nFYI you can run tests locally while you work on your changes. Once you have those passing it can be opened here and run against the full CI suite.",
          "created_at": "2025-06-11T11:12:12Z"
        },
        {
          "user": "sweeden-ttu",
          "body": "The description of the pull request is an AI summary of the issue, the code is not. I did not have the test case properly wired in with the rest, I will close this pull request and make sure class TestOpenAPICodegen(unittest.TestCase) is running correctly. \r\n\r\nAlso the build/test dependency can be easily installed with npm but I'm not sure the CI build process has it available.  ",
          "created_at": "2025-06-11T12:32:50Z"
        }
      ]
    },
    {
      "number": 32727,
      "title": "doc: add release notes for #32425",
      "body": "Add release notes for https://github.com/bitcoin/bitcoin/pull/32425.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-06-11T11:00:56Z",
      "updated_at": "2025-06-26T07:17:08Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32727",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32727.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32727#pullrequestreview-2958946450), [janb84](https://github.com/bitcoin/bitcoin/pull/32727#pullrequestreview-2959000718), [glozow](https://github.com/bitcoin/bitcoin/pull/32727#pullrequestreview-2959472194) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T11:01:00Z"
        },
        {
          "user": "vasild",
          "body": "`8a30551de9...8264d3c0b3`: address suggestion",
          "created_at": "2025-06-13T11:16:44Z"
        },
        {
          "user": "vasild",
          "body": "`8264d3c0b3...a4cfaa5eab`: address suggestion",
          "created_at": "2025-06-20T08:21:55Z"
        },
        {
          "user": "janb84",
          "body": "> `8264d3c0b3...a4cfaa5eab`: address suggestion\r\n\r\nThink this has gone in the wrong direction, the feedback (as i interpreted it) was to only indicate that the port portion of the argument is optional. Going to real addresses does not addresses the feedback, and makes it less clear (imho)",
          "created_at": "2025-06-20T08:32:44Z"
        },
        {
          "user": "vasild",
          "body": "Hmm, but look - there is a difference between \"specification\" and \"example\". The docs usually read something like:\r\n\r\n> The syntax of the proxy option is `-proxy=addr[:port]`. For example: `-proxy=127.0.0.1:9050`.\r\n\r\nIt wouldn't make sense to use `[:port]` in the example:\r\n\r\n> The syntax of the proxy option is `-proxy=addr[:port]`. For example: `-proxy=addr[:port]`.\r\n\r\nIt is _examples_ in the added release note.",
          "created_at": "2025-06-20T09:05:59Z"
        },
        {
          "user": "vasild",
          "body": "`a4cfaa5eab...b9a2e8ee96`: take suggestions",
          "created_at": "2025-06-25T16:25:19Z"
        }
      ]
    },
    {
      "number": 32726,
      "title": "Add initial OpenAPI/Swagger specification for Bitcoin Core RPC and REST interfaces (issue #29912)",
      "body": "\r\n## Motivation\r\n\r\nCurrently, (almost) all clients manually implement the Bitcoin Core RPC API, which leads to:\r\n- Accidental implementation bugs (e.g., unit mistakes such as vB vs BTC/kvB)\r\n- Difficulty maintaining clients as the API evolves\r\n- Increased effort to implement clients in new programming languages\r\n\r\nThere is no formal, machine-readable specification of the RPC API. Existing documentation is not sufficient for code generation or type-safe client implementations. See discussion in #29912.\r\n\r\n## Overview\r\n\r\nThis PR introduces an initial OpenAPI/Swagger specification for the Bitcoin Core RPC and REST interfaces. The goal is to provide a foundation for:\r\n- Automated client code generation in multiple languages (e.g., via [Kiota](https://github.com/microsoft/kiota))\r\n- Easier maintenance and improved correctness for downstream clients\r\n- A step towards a spec-driven development process for the RPC API\r\n\r\n## Details\r\n\r\n- Adds `share/openapi.yml` describing the REST API (and/or `bitcoin-rpc-openapi.yaml` for the JSON-RPC interface).\r\n- The spec is based on the current implementation and documentation, but is a work in progress and will need to be updated as the API evolves.\r\n- See #29912 for background, rationale, and community discussion.\r\n\r\n## Tests\r\n\r\nThis change is documentation/specification only. No code is modified. Downstream client generators and tools can be used to validate the spec.\r\n\r\n## Further Work\r\n\r\n- Extend the OpenAPI spec to cover all RPC methods and parameters, including type details and units.\r\n- Consider generating JSON Schema or OpenRPC specifications for even better machine-readability and codegen support.\r\n- Integrate with CI to ensure the spec remains up-to-date.\r\n\r\n---\r\n\r\nCloses #29912\r\n\r\n---",
      "state": "closed",
      "user": "sweeden-ttu",
      "created_at": "2025-06-11T09:48:43Z",
      "updated_at": "2025-06-24T15:07:02Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32726",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32726.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- infos -> information [‚Äúinfos‚Äù is not a valid plural; use ‚Äúinformation‚Äù for comprehension]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-06-11T09:48:46Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `previous releases, depends DEBUG`: https://github.com/bitcoin/bitcoin/runs/43882460633</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by compiler errors due to unrecognized command-line options during configuration.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-11T10:58:38Z"
        }
      ]
    },
    {
      "number": 32725,
      "title": "test: round difficulty and networkhashps",
      "body": "Both are rational numbers. Client software should only use them to display information to humans. Followup calculations should use the underlying values such as target.\r\n\r\nTherefore it's not necessary to test the handling of these floating point values. Round them down to avoid spurious test failures.\r\n\r\nFixes #32515\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-06-11T09:40:27Z",
      "updated_at": "2025-06-20T23:30:52Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32725",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32725.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32725#pullrequestreview-2918145987), [janb84](https://github.com/bitcoin/bitcoin/pull/32725#pullrequestreview-2920953165), [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/32725#issuecomment-2977585964), [achow101](https://github.com/bitcoin/bitcoin/pull/32725#issuecomment-2993095198) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T09:40:30Z"
        },
        {
          "user": "Sjors",
          "body": "Note that `mining_mainnet.py` uses integer difficulty values (1 and 4) so it shouldn't have this issue.",
          "created_at": "2025-06-11T09:44:08Z"
        },
        {
          "user": "Prabhat1308",
          "body": "Code Review ACK [`578ea3e`](https://github.com/bitcoin/bitcoin/pull/32725/commits/578ea3eedb285519762087a4b27d953d8f61667f)\r\n\r\nSlightly relaxing the contraint seems fine in the context of the test . ",
          "created_at": "2025-06-16T18:17:25Z"
        },
        {
          "user": "achow101",
          "body": "ACK 578ea3eedb285519762087a4b27d953d8f61667f\r\n\r\nWas unable to replicate the original test failure, but this change seems fine.",
          "created_at": "2025-06-20T23:24:54Z"
        }
      ]
    },
    {
      "number": 32724,
      "title": "Musig2 tests",
      "body": "Built on https://github.com/bitcoin/bitcoin/pull/31244\r\n\r\nThis PR adds explicit tests for Bitcoin Core's MuSig2 interface.\r\n\r\nAny issues in musig2.{cpp,h} will likely also be caught by the descriptor tests, but having more detailed tests for the MuSig2 class itself improves test reporting/coverage.\r\n\r\nIt uses BIP 328 test vectors.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-06-11T02:08:39Z",
      "updated_at": "2026-01-07T12:42:04Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32724",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32724.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32724#pullrequestreview-3634681093) |\n| Stale ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32724#issuecomment-3516337169) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-06-11T02:08:42Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/43856471515</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a trailing whitespace error detected in src/test/musig2.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-11T03:08:26Z"
        },
        {
          "user": "rkrux",
          "body": "I feel this PR should be in draft until #31244 is merged as all the commits here are from that PR except the last one.\r\n\r\nThough the last commit can be reviewed separately.",
          "created_at": "2025-06-12T10:47:59Z"
        },
        {
          "user": "brunoerg",
          "body": "Mutation testing report for #32724 \r\n\r\n**223** mutants for `src/script/descriptor.cpp` - **mutation score: 90.13%**\r\n**10** mutants for `src/musig.cpp` - **mutation score: 80.0%**\r\n\r\n<details>\r\n<summary>Unkilled mutants for src/script/descriptor.cpp and src/musig.cpp</summary>\r\n\r\n```diff\r\nmutation-core analyze -f=\"muts-pr-32724-descriptor-cpp\" -c=\"cmake --build build -j 5 && ./build/bin/test_bitcoin --run_test=musig2_tests && ./build/bin/test_bitcoin --run_test=descriptor_tests\"\r\n* 223 MUTANTS *\r\n...\r\nMUTATION SCORE: 90.13%\r\n\r\nSurviving mutants:\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.186.cpp\r\nindex 8cb78327f7..0f8840c015 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.186.cpp\r\n@@ -1910,7 +1910,7 @@ std::vector<std::unique_ptr<PubkeyProvider>> ParsePubkey(uint32_t& key_exp_index\r\n                         vec.emplace_back(vec.at(0)->Clone());\r\n                     }\r\n                 } else if (vec.size() != length) {\r\n-                    return false;\r\n+                    return true;\r\n                 }\r\n             }\r\n             return true;\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.218.cpp\r\nindex 8cb78327f7..ca626ff150 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.218.cpp\r\n@@ -2067,7 +2067,7 @@ struct KeyParser {\r\n     {\r\n         assert(m_out);\r\n         Key key = m_keys.size();\r\n-        uint32_t exp_index = m_offset + key;\r\n+        uint32_t exp_index = m_offset - key;\r\n         auto pk = ParsePubkey(exp_index, {&*begin, &*end}, ParseContext(), *m_out, m_key_parsing_error);\r\n         if (pk.empty()) return {};\r\n         m_keys.emplace_back(std::move(pk));\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.22.cpp\r\nindex 8cb78327f7..53c1a41269 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.22.cpp\r\n@@ -670,7 +670,7 @@ public:\r\n             // Use a dummy signing provider as private keys do not exist for the aggregate pubkey\r\n             FlatSigningProvider dummy;\r\n             std::optional<CPubKey> pub = m_aggregate_provider->GetPubKey(pos, dummy, out, read_cache, write_cache);\r\n-            if (!pub) return std::nullopt;\r\n+            if (1==0) return std::nullopt;\r\n             pubout = *pub;\r\n             out.aggregate_pubkeys.emplace(m_aggregate_pubkey.value(), pubkeys);\r\n         } else {\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.23.cpp\r\nindex 8cb78327f7..b47540ebc5 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.23.cpp\r\n@@ -670,7 +670,7 @@ public:\r\n             // Use a dummy signing provider as private keys do not exist for the aggregate pubkey\r\n             FlatSigningProvider dummy;\r\n             std::optional<CPubKey> pub = m_aggregate_provider->GetPubKey(pos, dummy, out, read_cache, write_cache);\r\n-            if (!pub) return std::nullopt;\r\n+\r\n             pubout = *pub;\r\n             out.aggregate_pubkeys.emplace(m_aggregate_pubkey.value(), pubkeys);\r\n         } else {\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.221.cpp\r\nindex 8cb78327f7..96bc9cd33c 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.221.cpp\r\n@@ -2067,7 +2067,7 @@ struct KeyParser {\r\n     {\r\n         assert(m_out);\r\n         Key key = m_keys.size();\r\n-        uint32_t exp_index = m_offset + key;\r\n+        uint32_t exp_index = (m_offset + key) + 1;\r\n         auto pk = ParsePubkey(exp_index, {&*begin, &*end}, ParseContext(), *m_out, m_key_parsing_error);\r\n         if (pk.empty()) return {};\r\n         m_keys.emplace_back(std::move(pk));\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.209.cpp\r\nindex 8cb78327f7..471ea17a83 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.209.cpp\r\n@@ -1940,7 +1940,7 @@ std::vector<std::unique_ptr<PubkeyProvider>> ParsePubkey(uint32_t& key_exp_index\r\n                 // Final MuSigPubkeyProvider use participant pubkey providers at each multipath position, and the first (and only) path\r\n                 emplace_final_provider(i, 0);\r\n             }\r\n-        } else if (paths.size() > 1) {\r\n+        } else if (paths.size() >= 1) {\r\n             // All key provider vectors should be length 1. Clone them until they have the same length as paths\r\n             if (!clone_providers(paths.size())) {\r\n                 error = \"musig(): Multipath derivation path with multipath participants is disallowed\"; // This error is unreachable due to earlier check\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.27.cpp\r\nindex 8cb78327f7..1f3b5320c3 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.27.cpp\r\n@@ -677,7 +677,7 @@ public:\r\n             if (!Assume(m_ranged_participants)) return std::nullopt;\r\n             // Compute aggregate key from derived participants\r\n             std::optional<CPubKey> aggregate_pubkey = MuSig2AggregatePubkeys(pubkeys);\r\n-            if (!aggregate_pubkey) return std::nullopt;\r\n+\r\n             pubout = *aggregate_pubkey;\r\n\r\n             KeyOriginInfo info;\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.26.cpp\r\nindex 8cb78327f7..917be613cd 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.26.cpp\r\n@@ -677,7 +677,7 @@ public:\r\n             if (!Assume(m_ranged_participants)) return std::nullopt;\r\n             // Compute aggregate key from derived participants\r\n             std::optional<CPubKey> aggregate_pubkey = MuSig2AggregatePubkeys(pubkeys);\r\n-            if (!aggregate_pubkey) return std::nullopt;\r\n+            if (1==0) return std::nullopt;\r\n             pubout = *aggregate_pubkey;\r\n\r\n             KeyOriginInfo info;\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.24.cpp\r\nindex 8cb78327f7..8a4961d14f 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.24.cpp\r\n@@ -674,7 +674,7 @@ public:\r\n             pubout = *pub;\r\n             out.aggregate_pubkeys.emplace(m_aggregate_pubkey.value(), pubkeys);\r\n         } else {\r\n-            if (!Assume(m_ranged_participants)) return std::nullopt;\r\n+\r\n             // Compute aggregate key from derived participants\r\n             std::optional<CPubKey> aggregate_pubkey = MuSig2AggregatePubkeys(pubkeys);\r\n             if (!aggregate_pubkey) return std::nullopt;\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.18.cpp\r\nindex 8cb78327f7..bc2436a7cf 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.18.cpp\r\n@@ -658,7 +658,7 @@ public:\r\n         std::vector<CPubKey> pubkeys;\r\n         for (const auto& prov : m_participants) {\r\n             std::optional<CPubKey> pub = prov->GetPubKey(pos, arg, out, read_cache, write_cache);\r\n-            if (!pub) return std::nullopt;\r\n+\r\n             pubkeys.emplace_back(*pub);\r\n         }\r\n         std::sort(pubkeys.begin(), pubkeys.end());\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.31.cpp\r\nindex 8cb78327f7..b448f978e8 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.31.cpp\r\n@@ -688,7 +688,7 @@ public:\r\n             out.aggregate_pubkeys.emplace(pubout, pubkeys);\r\n         }\r\n\r\n-        if (!Assume(pubout.IsValid())) return std::nullopt;\r\n+\r\n         return pubout;\r\n     }\r\n     bool IsRange() const override { return IsRangedDerivation() || m_ranged_participants; }\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.86.cpp\r\nindex 8cb78327f7..73e12ab35e 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.86.cpp\r\n@@ -730,7 +730,7 @@ public:\r\n         if (IsRangedDerivation()) {\r\n             out += \"/*\";\r\n         }\r\n-        if (!any_privkeys) out.clear();\r\n+        if (1==0) out.clear();\r\n         return any_privkeys;\r\n     }\r\n     bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const override\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.99.cpp\r\nindex 8cb78327f7..e1cff262a0 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.99.cpp\r\n@@ -741,7 +741,7 @@ public:\r\n             if (i) out += \",\";\r\n             std::string tmp;\r\n             if (!pubkey->ToNormalizedString(arg, tmp)) {\r\n-                return false;\r\n+                return true;\r\n             }\r\n             out += tmp;\r\n         }\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.117.cpp\r\nindex 8cb78327f7..2ef8b39b2d 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.117.cpp\r\n@@ -789,7 +789,7 @@ public:\r\n     bool IsBIP32() const override\r\n     {\r\n         // musig() can only be a BIP 32 key if all participants are bip32 too\r\n-        return std::all_of(m_participants.begin(), m_participants.end(), [](const auto& pubkey) { return pubkey->IsBIP32(); });\r\n+        return std::any_of(m_participants.begin(), m_participants.end(), [](const auto& pubkey) { return pubkey->IsBIP32(); });\r\n     }\r\n };\r\n\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.165.cpp\r\nindex 8cb78327f7..200cabd7a6 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.165.cpp\r\n@@ -1892,7 +1892,7 @@ std::vector<std::unique_ptr<PubkeyProvider>> ParsePubkey(uint32_t& key_exp_index\r\n                 error = \"musig(): Cannot have hardened child derivation\";\r\n                 return {};\r\n             }\r\n-            bool dummy = false;\r\n+            bool dummy = true;\r\n             if (!ParseKeyPath(deriv_split, paths, dummy, error, /*allow_multipath=*/true, /*allow_hardened=*/false)) {\r\n                 error = \"musig(): \" + error;\r\n                 return {};\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.17.cpp\r\nindex 8cb78327f7..20f835caf8 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.17.cpp\r\n@@ -658,7 +658,7 @@ public:\r\n         std::vector<CPubKey> pubkeys;\r\n         for (const auto& prov : m_participants) {\r\n             std::optional<CPubKey> pub = prov->GetPubKey(pos, arg, out, read_cache, write_cache);\r\n-            if (!pub) return std::nullopt;\r\n+            if (1==0) return std::nullopt;\r\n             pubkeys.emplace_back(*pub);\r\n         }\r\n         std::sort(pubkeys.begin(), pubkeys.end());\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.3.cpp\r\nindex 8cb78327f7..93e335fc45 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.3.cpp\r\n@@ -608,7 +608,7 @@ public:\r\n         m_participants(std::move(providers)),\r\n         m_path(std::move(path)),\r\n         m_derive(derive),\r\n-        m_ranged_participants(std::any_of(m_participants.begin(), m_participants.end(), [](const auto& pubkey) { return pubkey->IsRange(); }))\r\n+        m_ranged_participants(std::all_of(m_participants.begin(), m_participants.end(), [](const auto& pubkey) { return pubkey->IsRange(); }))\r\n     {\r\n         if (!Assume(!(m_ranged_participants && IsRangedDerivation()))) {\r\n             throw std::runtime_error(\"musig(): Cannot have both ranged participants and ranged derivation\");\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.12.cpp\r\nindex 8cb78327f7..b4a54fb541 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.12.cpp\r\n@@ -648,7 +648,7 @@ public:\r\n                 extpub.chaincode = MUSIG_CHAINCODE;\r\n                 extpub.pubkey = m_aggregate_pubkey.value();\r\n\r\n-                m_aggregate_provider = std::make_unique<BIP32PubkeyProvider>(m_expr_index, extpub, m_path, m_derive, /*apostrophe=*/false);\r\n+                m_aggregate_provider = std::make_unique<BIP32PubkeyProvider>(m_expr_index, extpub, m_path, m_derive, /*apostrophe=*/true);\r\n             } else {\r\n                 m_aggregate_provider = std::make_unique<ConstPubkeyProvider>(m_expr_index, m_aggregate_pubkey.value(), /*xonly=*/false);\r\n             }\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.13.cpp\r\nindex 8cb78327f7..72e90a79de 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.13.cpp\r\n@@ -650,7 +650,7 @@ public:\r\n\r\n                 m_aggregate_provider = std::make_unique<BIP32PubkeyProvider>(m_expr_index, extpub, m_path, m_derive, /*apostrophe=*/false);\r\n             } else {\r\n-                m_aggregate_provider = std::make_unique<ConstPubkeyProvider>(m_expr_index, m_aggregate_pubkey.value(), /*xonly=*/false);\r\n+                m_aggregate_provider = std::make_unique<ConstPubkeyProvider>(m_expr_index, m_aggregate_pubkey.value(), /*xonly=*/true);\r\n             }\r\n         }\r\n\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.177.cpp\r\nindex 8cb78327f7..363403a0c2 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.177.cpp\r\n@@ -1906,7 +1906,7 @@ std::vector<std::unique_ptr<PubkeyProvider>> ParsePubkey(uint32_t& key_exp_index\r\n         const auto& clone_providers = [&providers](size_t length) -> bool {\r\n             for (auto& vec : providers) {\r\n                 if (vec.size() == 1) {\r\n-                    for (size_t i = 1; i < length; ++i) {\r\n+                    for (size_t i = 1; i < length; --i) {\r\n                         vec.emplace_back(vec.at(0)->Clone());\r\n                     }\r\n                 } else if (vec.size() != length) {\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.175.cpp\r\nindex 8cb78327f7..3bee51264c 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.175.cpp\r\n@@ -1906,7 +1906,7 @@ std::vector<std::unique_ptr<PubkeyProvider>> ParsePubkey(uint32_t& key_exp_index\r\n         const auto& clone_providers = [&providers](size_t length) -> bool {\r\n             for (auto& vec : providers) {\r\n                 if (vec.size() == 1) {\r\n-                    for (size_t i = 1; i < length; ++i) {\r\n+                    for (size_t i = 1; i <= length; ++i) {\r\n                         vec.emplace_back(vec.at(0)->Clone());\r\n                     }\r\n                 } else if (vec.size() != length) {\r\n\r\n--------------\r\ndiff --git a/src/script/descriptor.cpp b/muts-pr-32724-descriptor-cpp/descriptor.mutant.11.cpp\r\nindex 8cb78327f7..9594e83929 100644\r\n--- a/src/script/descriptor.cpp\r\n+++ b/muts-pr-32724-descriptor-cpp/descriptor.mutant.11.cpp\r\n@@ -636,7 +636,7 @@ public:\r\n\r\n             // Aggregate the pubkey\r\n             m_aggregate_pubkey = MuSig2AggregatePubkeys(pubkeys);\r\n-            if (!Assume(m_aggregate_pubkey.has_value())) return std::nullopt;\r\n+\r\n\r\n             // Make our pubkey provider\r\n             if (IsRangedDerivation() || !m_path.empty()) {\r\n\r\n--------------\r\n\r\n```diff\r\n‚ûú  bitcoin-core-dev git:(pr/32724) ‚úó mutation-core analyze -f=\"muts-pr-32724-musig-cpp\" -c=\"cmake --build build -j 5 && ./build/bin/test_bitcoin --run_test=musig2_tests && ./build/bin/test_bitcoin --run_test=descriptor_tests\"\r\n...\r\nMUTATION SCORE: 80.0%\r\n\r\nSurviving mutants:\r\ndiff --git a/src/musig.cpp b/muts-pr-32724-musig-cpp/musig.mutant.2.cpp\r\nindex b332954312..8d60925399 100644\r\n--- a/src/musig.cpp\r\n+++ b/muts-pr-32724-musig-cpp/musig.mutant.2.cpp\r\n@@ -13,7 +13,7 @@ bool GetMuSig2KeyAggCache(const std::vector<CPubKey>& pubkeys, secp256k1_musig_k\r\n     std::vector<const secp256k1_pubkey*> pubkey_ptrs;\r\n     for (const CPubKey& pubkey : pubkeys) {\r\n         if (!secp256k1_ec_pubkey_parse(secp256k1_context_static, &secp_pubkeys.emplace_back(), pubkey.data(), pubkey.size())) {\r\n-            return false;\r\n+            return true;\r\n         }\r\n     }\r\n     pubkey_ptrs.reserve(secp_pubkeys.size());\r\n\r\n--------------\r\ndiff --git a/src/musig.cpp b/muts-pr-32724-musig-cpp/musig.mutant.5.cpp\r\nindex b332954312..219f54aa14 100644\r\n--- a/src/musig.cpp\r\n+++ b/muts-pr-32724-musig-cpp/musig.mutant.5.cpp\r\n@@ -23,7 +23,7 @@ bool GetMuSig2KeyAggCache(const std::vector<CPubKey>& pubkeys, secp256k1_musig_k\r\n\r\n     // Aggregate the pubkey\r\n     if (!secp256k1_musig_pubkey_agg(secp256k1_context_static, nullptr, &keyagg_cache, pubkey_ptrs.data(), pubkey_ptrs.size())) {\r\n-        return false;\r\n+        return true;\r\n     }\r\n     return true;\r\n }\r\n--------------\r\n```\r\n</details>\r\n\r\n_**note**: It only generated mutants based on git diff - code touched by this PR._",
          "created_at": "2025-06-12T18:37:00Z"
        },
        {
          "user": "w0xlt",
          "body": "Rebased and fixed `musig.mutant.2.cpp`.\r\nIt is impossible to reach the condition in `musig.mutant.5.cpp` with valid public keys. The condition detected by mutant 2 prevents sending invalid public keys to `secp256k1_musig_pubkey_agg`.\r\nEven if I try to send P and -P, the MuSig2 protocol prevents key cancellation attacks.",
          "created_at": "2025-07-31T22:37:16Z"
        },
        {
          "user": "w0xlt",
          "body": "The CI error is related to the wallet migration test.\r\nhttps://github.com/bitcoin/bitcoin/issues/33096",
          "created_at": "2025-07-31T22:38:29Z"
        },
        {
          "user": "Sjors",
          "body": "This can be moved out of draft? (since the CI failure is unrelated)\r\n\r\nConcept ACK\r\n\r\nJust two test vectors? If there's more then it might make sense to put them in a JSON file.",
          "created_at": "2025-08-01T07:33:05Z"
        },
        {
          "user": "w0xlt",
          "body": "> Just two test vectors? \r\n\r\nYes, they cover BIP 328 test vectors and the mutation detected by @brunoerg .\r\nBIP 327 doesn't have any test vectors (even the musig2 secp256k1 library uses random keys in the test).\r\nBIP 328 test vectors are particularly interesting because they test aggregate keys and xpubs.",
          "created_at": "2025-08-06T23:13:31Z"
        },
        {
          "user": "Sjors",
          "body": "ACK fa65a57a826192ffae48f62f10c216068e8236f4\r\n\r\nI (lightly) checked that the vectors match BIP 328 and that the test fails if I sabotage the input data. ",
          "created_at": "2025-11-11T11:07:32Z"
        },
        {
          "user": "w0xlt",
          "body": "Comments addressed. Thanks for the review.",
          "created_at": "2026-01-06T23:55:48Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 9,
    "issues": 0
  }
}