{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:44:10.574966+00:00",
  "date": "2025-12-30",
  "pull_requests": [
    {
      "number": 34183,
      "title": "doc: fix double-word typos in comments",
      "body": "Spotted a few duplicated words while reading through the code:\r\n\r\n1. \"the the\" in mempool_stress.cpp\r\n2. \"to to\" in txgraph.cpp\r\n3. \"for for\" in cluster_linearize.h\r\n4. \"that that\" in txrequest.h\r\n5. \"in in\" in test/fuzz/txgraph.cpp",
      "state": "closed",
      "user": "bensig",
      "created_at": "2025-12-30T20:17:46Z",
      "updated_at": "2026-01-05T18:46:08Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34183",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34183.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34183#issuecomment-3700539522), [maflcko](https://github.com/bitcoin/bitcoin/pull/34183#issuecomment-3701863285) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-30T20:17:53Z"
        },
        {
          "user": "l0rinc",
          "body": "We don't usually add these separately - they take up review time, which is already very scarce - but we might as well get rid of these.\r\nACK 08ed802babb5cdda6fa61c4e50a0e6fb92a6f434",
          "created_at": "2025-12-30T20:48:30Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 08ed802babb5cdda6fa61c4e50a0e6fb92a6f434",
          "created_at": "2025-12-31T09:53:11Z"
        }
      ]
    },
    {
      "number": 34182,
      "title": "doc: Update OpenBSD Build Guide",
      "body": "[OpenBSD 7.8](https://www.openbsd.org/78.html) ships LLVM/Clang 19.1.7, which satisfies the recently [updated](https://github.com/bitcoin/bitcoin/pull/33555) minimum requirement.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-30T20:03:01Z",
      "updated_at": "2026-01-05T12:10:43Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34182",
      "labels": [
        "Docs",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34182.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/34182#pullrequestreview-3619269019), [katesalazar](https://github.com/bitcoin/bitcoin/pull/34182#issuecomment-3700779222) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-30T20:03:08Z"
        },
        {
          "user": "katesalazar",
          "body": "ACK https://github.com/bitcoin/bitcoin/commit/84d8c52662545b33c0d02c8ac02ae694950ad9d4\r\n",
          "created_at": "2025-12-30T23:08:27Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 30.x in #34192.",
          "created_at": "2026-01-05T12:10:43Z"
        }
      ]
    },
    {
      "number": 34181,
      "title": "refactor: [p2p] Make ProcessMessage private again, Use references when non-null",
      "body": "There is a single unit test, which calls the internal `ProcessMessage` function. This is problematic, because it makes future changes harder, since they will need to carry over this public internal interface each time.\r\n\r\nAlso, there is a mixed use of pointers and references in p2p code, where just based on context, a pointer may sometimes assumed to be null, or non-null. This is confusing when reading the code, or making or reading future changes.\r\n\r\nFix both issues in a series of commits, to:\r\n\r\n* refactor the single unit test to call higher-level functions\r\n* Make `ProcessMessage` private again\r\n* Use references instead of implicit non-null pointers, mostly in a scripted-diff",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-30T12:31:30Z",
      "updated_at": "2026-01-14T21:39:00Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34181",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34181.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/34181#issuecomment-3728995294) |\n| Stale ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34181#issuecomment-3707426996) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34267](https://github.com/bitcoin/bitcoin/pull/34267) (net: avoid unconditional `privatebroadcast` logging (+ warn for debug logs) by l0rinc)\n* [#33854](https://github.com/bitcoin/bitcoin/pull/33854) (fix assumevalid is ignored during reindex by Eunovo)\n* [#32278](https://github.com/bitcoin/bitcoin/pull/32278) (doc: better document NetEventsInterface and the deletion of \"CNode\"s by vasild)\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-30T12:31:37Z"
        },
        {
          "user": "bensig",
          "body": "ACK fa4dbf1b299dd7bf0fa4b0d5f713d5a393215cdc\r\n\r\nBuild and tests pass (denialofservice_tests, p2p_ping.py).\r\n\r\nClean refactor - using references instead of implicit non-null pointers makes the code clearer... and of course, ProcessMessage is private again.",
          "created_at": "2026-01-03T22:56:42Z"
        },
        {
          "user": "optout21",
          "body": "reACK faba163fc38085d9d25b4b6df1d8c3abe4663aeb\r\nRe-review following rebase.\r\n\r\nPrev:\r\nutACK fa4dbf1b299dd7bf0fa4b0d5f713d5a393215cdc\r\nThe single external usage of a method is removed by changing a test, the method is changed to private. Some additional limited-scope refactors.\r\n- code reviewed\r\n- verified the diff script to produce the same result\r\n- checked unit tests locally",
          "created_at": "2026-01-09T13:51:25Z"
        },
        {
          "user": "maflcko",
          "body": "rebased, should be trivial to re-review via git range-diff",
          "created_at": "2026-01-14T07:01:28Z"
        }
      ]
    },
    {
      "number": 34180,
      "title": "bench: add `SIGABRT` handler to show failed bench name",
      "body": "### Problem\r\nWhen a benchmark triggers an assertion failure or abort deeper down the stack, the output provides no indication of which benchmark failed.\r\n\r\n### Reproducer\r\nTo reproduce, inject a failure outside the benchmarks:\r\n```patch\r\ndiff --git a/src/streams.h b/src/streams.h\r\n--- a/src/streams.h\t(revision aa2eebdb1e8182394d44fd9719e316ea52926cab)\r\n+++ b/src/streams.h\t(date 1767091264182)\r\n@@ -179,6 +179,7 @@\r\n\r\n     bool Rewind(std::optional<size_type> n = std::nullopt)\r\n     {\r\n+        Assert(false);\r\n         // Total rewind if no size is passed\r\n         if (!n) {\r\n             m_read_pos = 0;\r\n```\r\n\r\nand run with a filter matching multiple benchmarks:\r\n```bash\r\nrm -rfd build && cmake -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_BENCH=ON && cmake --build build -j$(nproc) && ./build/bin/bench_bitcoin -filter='DeserializeAndCheckBlockTest|DeserializeBlockTest|PrevectorDeserialize' -sanity-check\r\n```\r\n\r\nBefore - the outputs provide no indication which benchmark failed:\r\n```bash\r\nstreams.h:182 bool DataStream::Rewind(std::optional<size_type>): Assertion `false' failed.\r\nzsh: abort      ./build/bin/bench_bitcoin  -sanity-check\r\n```\r\n\r\n### Fix\r\nThis PR adds a `SIGABRT` signal handler that prints the currently running benchmark's name before re-raising the signal. The name only appears on failure, not before each benchmark starts, keeping normal output clean.\r\n\r\nAfter - the benchmark name is logged, and the signal re-raised:\r\n```bash\r\nstreams.h:182 bool DataStream::Rewind(std::optional<size_type>): Assertion `false' failed.\r\nBenchmark failed: DeserializeAndCheckBlockTest.\r\nzsh: abort      ./build/bin/bench_bitcoin  -sanity-check\r\n```\r\n\r\n### Considerations\r\nWorks in both debug and release builds since it doesn't rely on stack traces (which would require debug symbols).",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-30T11:11:51Z",
      "updated_at": "2025-12-31T12:14:34Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34180",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34180.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-30T11:11:58Z"
        },
        {
          "user": "maflcko",
          "body": "> This PR adds a `SIGABRT` signal handler that prints the currently running benchmark's name before re-raising the signal. The name only appears on failure, not before each benchmark starts, keeping normal output clean.\r\n\r\nNot sure. This seems to go in the wrong direction. Ideally, each benchmark is run individually and then the test framework just responds with the name of the failing test. This is possible via https://github.com/bitcoin/bitcoin/pull/33142. I don't care if that is written in python of cmake script, but I think we should just pick one solution instead of keeping to write verbose  workarounds that aren't really needed.\r\n\r\n\r\n\r\n> Before - the outputs provide no indication which benchmark failed:\r\n\r\nThis is common in all other  executables that are built? Seems odd to try to fix this in the source code one-by-one. I think the normal way to approach this is to just use a debugger, such as `gdb`, or even just `valgrind --tool=none`, or link a sanitizer, etc. I don't think there is a need to come up with a hand-rolled way for this?",
          "created_at": "2025-12-30T11:56:45Z"
        },
        {
          "user": "l0rinc",
          "body": "The use cases differ: #33142 runs `-sanity-check` to catch crashes, typically in `Debug` or sanitizer builds where debugging tools are available, running every single benchmark:\r\n```\r\n...\r\ntool_bench_sanity_check.py --bench=WalletLoadingDescriptors                      | ✓ Passed  | 1 s                                                                                               \r\ntool_bench_sanity_check.py --bench=WalletMigration                               | ✓ Passed  | 2 s                                                                                               \r\ntool_bench_sanity_check.py --bench=WriteBlockBench                               | ✓ Passed  | 0 s                                                                                               \r\ntool_bench_sanity_check.py --bench=DeserializeAndCheckBlockTest                  | ✖ Failed  | 0 s                                                                                               \r\ntool_bench_sanity_check.py --bench=DeserializeBlockTest                          | ✖ Failed  | 0 s                                                                                               \r\ntool_bench_sanity_check.py --bench=PrevectorDeserializeNontrivial                | ✖ Failed  | 0 s                                                                                               \r\ntool_bench_sanity_check.py --bench=PrevectorDeserializeTrivial                   | ✖ Failed  | 0 s                                                                                               \r\n```\r\n\r\nBut actual benchmarking requires `Release` build for meaningful results, and that's where a crash becomes harder to diagnose - no debug symbols, aggressive inlining obscures stack traces, and re-running with sanitizers changes timing characteristics enough that some bugs may not reproduce.\r\n\r\nWhen `bench_bitcoin -filter='Foo|Bar|Baz'` crashes in `Release`, the signal handler gives you immediate triage: \"it was `Bar`\" - so you know which benchmark to isolate and re-run in `Debug`.\r\n\r\nWe can make it work without this change as well, I just bumped into this a few times, though I'll fix it ...\r\n\r\n",
          "created_at": "2025-12-30T21:27:08Z"
        },
        {
          "user": "bensig",
          "body": "Tested on macOS - builds and works as described. Sent SIGABRT during a running benchmark and it correctly printed \"Benchmark failed: AddrManAdd.\"\r\n\r\nI'll leave the concept discussion to more experienced reviewers.",
          "created_at": "2025-12-30T21:59:15Z"
        },
        {
          "user": "maflcko",
          "body": "> But actual benchmarking requires `Release` build for meaningful results, and that's where a crash becomes harder to diagnose - no debug symbols, aggressive inlining obscures stack traces,\r\n\r\nI don't think this is true. The default build type is `-O2 -g` (with debug symbols) and I haven't seen inlining remove the name of the benchmark. Also, gdb shouldn't slow down typical benchmark code, when no breakpoints are present.\r\n\r\nEven with Release `-O2`, I am locally seeing no slowdown and the name of the benchmark in the `bt` in `gdb`.",
          "created_at": "2025-12-31T10:18:33Z"
        }
      ]
    },
    {
      "number": 34179,
      "title": "refactor: Enable transparent lookup for setBlockIndexCandidates to remove const_cast",
      "body": "### Rationale\r\n\r\nThis PR improves code safety by removing a `const_cast` in `src/validation.cpp`.\r\n\r\nCurrently, `setBlockIndexCandidates` stores mutable `CBlockIndex*`. However, validation logic (like `CVerifyDB`) often holds `const CBlockIndex*`. Previously, checking for existence in the set required casting away constness. While currently benign, this bypasses compiler safety checks and could mask accidental modifications in future refactors.\r\n\r\n### Description\r\n\r\n1.  **Enable Heterogeneous Lookup:** Added `using is_transparent = void;` to `CBlockIndexWorkComparator` in `src/node/blockstorage.h`. This allows the `std::set` to natively accept `const CBlockIndex*` for lookup (utilizing C++14 heterogeneous lookup).\r\n2.  **Remove Cast:** Removed the now unnecessary `const_cast<CBlockIndex*>` in `src/validation.cpp`, allowing the compiler to strictly enforce const-correctness.\r\n\r\n### Notes\r\n\r\n- **Refactoring only:** No behavioral change.\r\n- **Verification:** `validation_tests` and `blockmanager_tests` pass.",
      "state": "open",
      "user": "joaonevess",
      "created_at": "2025-12-30T07:40:16Z",
      "updated_at": "2026-01-02T19:08:15Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34179",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34179.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34179#issuecomment-3706050232) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33637](https://github.com/bitcoin/bitcoin/pull/33637) (refactor: optimize block index comparisons (1.4-6.8x faster) by l0rinc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-30T07:40:24Z"
        },
        {
          "user": "bensig",
          "body": "ACK 1cda007\r\n\r\nBuilt and ran `validation_tests` and `blockmanager_tests` on macOS - all pass.\r\nClean removal of `const_cast` using transparent lookup. \r\nGood improvement to code safety.",
          "created_at": "2026-01-02T19:08:12Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 34178,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "TraceScamCEO",
      "created_at": "2025-12-30T01:49:22Z",
      "updated_at": "2025-12-30T01:49:30Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34178",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission contains only a generic template with no real feature description and instead posts a cryptocurrency address; it provides no substantive context, problem, or implementation details and appears promotional/irrelevant rather than a legitimate issue or proposal.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-30T01:49:27Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 5,
    "issues": 1
  }
}