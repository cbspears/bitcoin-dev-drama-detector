{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:43:54.579674+00:00",
  "date": "2025-12-29",
  "pull_requests": [
    {
      "number": 34177,
      "title": "policy/refactor: remove constant parameter from `IsWellFormedPackage`",
      "body": "`IsWellFormedPackage()` already claims: \"parents must appear before children.\" In practice the `require_sorted` argument was always passed as `true`, making the false-path dead code. It was introduced that way from the beginning in https://github.com/bitcoin/bitcoin/pull/28758/files#diff-f30090b30c9489972ee3f1181c302cf3a484bb890bade0fd7c9ca92ea8d347f6R79.\r\n\r\nRemove the unused parameter, updating callers/tests.\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-12-29T20:27:30Z",
      "updated_at": "2026-01-02T10:26:27Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34177",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34177.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [billymcbip](https://github.com/bitcoin/bitcoin/pull/34177#issuecomment-3699425653), [instagibbs](https://github.com/bitcoin/bitcoin/pull/34177#pullrequestreview-3620874285) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T20:27:37Z"
        },
        {
          "user": "billymcbip",
          "body": "tACK 658d38106a397ca04b94d98de57afc4de140feaa\r\n\r\n- The `require_sorted` argument is true in all call sites, making this a straightforward refactor.\r\n- The refactor aligns the implementation with the documentation comments.",
          "created_at": "2025-12-30T13:56:18Z"
        }
      ]
    },
    {
      "number": 34176,
      "title": "wallet: improve error msg when db directory is not writable",
      "body": "Make wallet creation and load fail with a clear error when the db directory isnâ€™t writable.\r\n\r\n#### 1) For Wallet Creation\r\n\r\nBefore: creating a wallet would return a generic error:\r\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\r\n\r\nAfter: creating a wallet returns:\r\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\r\n\r\n#### 2) For Wallet Loading\r\n\r\nWe currently allow the load of wallets located on non-writable directories. This is problematic\r\nbecause the node crashes on any subsequent write; generating a block is enough to trigger it.\r\nCan be verified just by running the following test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\n\r\n\r\nAlso, to check directory writability, this creates a tmp file rather than relying on the\r\n`permissions()` functions, since perms bits alone may not reliably reflect actual writability\r\nin some systems.\r\n\r\nTesting Note:\r\nPushed the tests in separate commits so they can be cherry-picked on master for comparison.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-12-29T19:44:56Z",
      "updated_at": "2026-01-14T09:25:54Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/34176",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34176.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3721321867) |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34176#issuecomment-3709275555) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34269](https://github.com/bitcoin/bitcoin/pull/34269) (wallet: disallow creating new or restoring to an unnamed (default) wallet by achow101)\n* [#33014](https://github.com/bitcoin/bitcoin/pull/33014) (rpc: Fix internal bug in descriptorprocesspsbt when encountering invalid signatures by b-l-u-e)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T19:45:02Z"
        },
        {
          "user": "furszy",
          "body": "Thanks for the review @rkrux!\r\nApplied all suggestions except the `touch()` if-block, since the function doesnâ€™t return a boolean (per docs, it either returns `None` or an exception). Also pulled out the `is_dir_writable` function to make the introduced try-except-finally workflow slightly more readable.",
          "created_at": "2025-12-30T16:17:10Z"
        },
        {
          "user": "stickies-v",
          "body": "Hmm. Nothing against better reporting when something failed, but the changes necessary to do that here seem a bit excessive for the pay-off? It doesn't seem like this change would have made resolving #34163 trivial?\r\n\r\nDidn't test, but would `sqlite3_errmsg(m_db)` offer a more simple alternative? I think I'm slightly Approach NACK atm, unless I'm wrong on the usefulness of the change.",
          "created_at": "2026-01-03T08:03:58Z"
        },
        {
          "user": "furszy",
          "body": "> the changes necessary to do that here seem a bit excessive for the pay-off? It doesn't seem like this change would have made resolving #34163 trivial?\r\n\r\nIt turned out not to help with #34163, but it is a general improvement to reporting read-only permission issues. Which we currently don't do properly. Can take #34163 as the starting point that led to uncover other issues.\r\n\r\nSomething I didnâ€™t mention in the PR description is that this also fixes opening a non-writable wallet directory, which is actually more important than issues during creation. We currently open the wallet even when the directory is read-only, and then crash on any subsequent write because we cannot write to the `-journal` file. I should add a simple test case demonstrating this bad behavior and append it to the PR description..\r\n\r\nAlso, do you really think that labeling these changes as \"excessive\" is correct?\r\nWe are talking about an 8-line function that improves the user experience at almost no cost and could be useful in other contexts as well. Even setting aside the post-opening crash and only focusing on the creation issue, I wouldnâ€™t label this as an excessive change.\r\n\r\n> Didn't test, but would `sqlite3_errmsg(m_db)` offer a more simple alternative? I think I'm slightly Approach NACK atm, unless I'm wrong on the usefulness of the change.\r\n\r\n`sqlite3_errmsg(m_db)` returns the same message as `sqlite3_errstr(ret)`. Both return the generic and not particularly useful \"unable to open database file\".",
          "created_at": "2026-01-03T17:17:06Z"
        },
        {
          "user": "furszy",
          "body": "@stickies-v done. Run this simple test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\nThe node crashes after loading a wallet in a non-writable directory; generating a block is enough to trigger it.",
          "created_at": "2026-01-03T17:41:57Z"
        },
        {
          "user": "stickies-v",
          "body": "> Also, do you really think that labeling these changes as \"excessive\" is correct?\r\n\r\nIt's not a big diff, but adding helper functions to improve diagnostic messages for a rare issue that is reasonably straightforward for the user to diagnose felt like perhaps not something we should have in our codebase, hence why I used \"excessive\" (in a relative way).\r\n\r\n> The node crashes after loading a wallet in a non-writable directory; generating a block is enough to trigger it.\r\n\r\nThis seems like a much better rationale to me for this PR. Concept ACK. Approach-wise, I'm confused why the `sqlite3_db_readonly` call we already have doesn't do what we'd expect it to do, but I'm not sure I'll be diving into this further, just wanted to leave early concept feedback.",
          "created_at": "2026-01-05T07:41:34Z"
        },
        {
          "user": "bensig",
          "body": "ACK 2ef6adde86f9a248463b8b628f559012be103382 \r\n\r\nTests passed",
          "created_at": "2026-01-07T23:59:14Z"
        }
      ]
    },
    {
      "number": 34174,
      "title": "doc: update copyright year to 2026",
      "body": "Bump in the places that need bumping.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-29T18:05:37Z",
      "updated_at": "2026-01-05T12:12:19Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/34174",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34174.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/34174#pullrequestreview-3617545036), [fjahr](https://github.com/bitcoin/bitcoin/pull/34174#issuecomment-3699312747), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/34174#pullrequestreview-3618553628), [janb84](https://github.com/bitcoin/bitcoin/pull/34174#pullrequestreview-3618701314) |\n| Concept NACK | [purpleKarrot](https://github.com/bitcoin/bitcoin/pull/34174#issuecomment-3699892138) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T18:05:44Z"
        },
        {
          "user": "fjahr",
          "body": "ACK b23b901363c56043c536f32261ac8cb540624a84\r\n\r\n> IANAL but i thought we could just leave these all as ...-present forever\r\n\r\nIANAL too but I am guessing in these places it's not possible to work with `present` because that would deviate from the original format, at least the MIT license has a `<year>` as part of the template.",
          "created_at": "2025-12-30T13:09:07Z"
        },
        {
          "user": "purpleKarrot",
          "body": "IANAL either, but to my layman knowledge, copyright attaches at creation, not per-year renewal. Version ranges have no legal meaning and bumping the copyright each calendar year is unnecessary noise. Count that as a NACK.",
          "created_at": "2025-12-30T16:36:33Z"
        },
        {
          "user": "maflcko",
          "body": "> IANAL either, but to my layman knowledge, copyright attaches at creation, not per-year renewal. Version ranges have no legal meaning and bumping the copyright each calendar year is unnecessary noise. Count that as a NACK.\r\n\r\nThere is more meaning to to the year than just a legal one. The year in `CMakeLists.txt` ends up in the version, Windows installer, about dialogs, ... etc, so users will have rough guess how old the code is they are running. Bitcoin Core is not using the Ubuntu YY.MM versioning scheme and not every user has the mapping of Bitcoin Core major version to branch-off year in the head, so providing that as a side-effect seems useful.\r\n\r\nAlso, the major and minor version is bumped several times per year, so a single additional 4-line commit per year seems basically zero overhead/noise.\r\n\r\nBut not strong opinion. Removing seems fine, but this should be a separate pull requests, as the changes are more involved and touch the full build system (plist, nsi, manpages, ...)",
          "created_at": "2025-12-30T18:27:42Z"
        },
        {
          "user": "purpleKarrot",
          "body": "\"Version ranges\" was a typo/thinko. I meant \"year ranges\". And I only refer to copyright, not release dates.",
          "created_at": "2025-12-30T21:08:55Z"
        },
        {
          "user": "Sjors",
          "body": "Post merge ACK ðŸŽ‰ ðŸŽ† 2026 ðŸŽ† ðŸŽ‰ ",
          "created_at": "2026-01-01T04:44:13Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 30.x in #34192.",
          "created_at": "2026-01-05T12:12:19Z"
        }
      ]
    },
    {
      "number": 34173,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "jummon-koshai",
      "created_at": "2025-12-29T15:54:47Z",
      "updated_at": "2025-12-29T17:44:44Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34173",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34173.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible places where comparison-specific test macros should replace generic comparisons:\n\n- test/functional/test_framework/test_util_wait_until.py: assert counter[\"count\"] >= 3 -> use assert_greater_than_or_equal(counter[\"count\"], 3)\n- test/functional/test_framework/test_util_wait_until.py: assert len(history) > 0 -> use assert_greater_than(len(history), 0)\n\n\n\n<sup>2025-12-29</sup>\n",
          "created_at": "2025-12-29T15:54:54Z"
        },
        {
          "user": "pinheadmz",
          "body": "AI slop",
          "created_at": "2025-12-29T17:34:01Z"
        }
      ]
    },
    {
      "number": 34172,
      "title": "Fix intermittent issue in p2p_1p1c_network.py",
      "body": "Resolves https://github.com/bitcoin/bitcoin/issues/33318 in a minimal fashion. Given that the orphan transactions aren't being persisted anymore, I'm not that specific case offers much coverage, but kept it around for now to get rid of the timeouts at least.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-12-29T15:17:04Z",
      "updated_at": "2025-12-31T11:27:02Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34172",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34172.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/34172#issuecomment-3696991878) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T15:17:10Z"
        },
        {
          "user": "instagibbs",
          "body": "@glozow don't recall if this actually caused flakiness, but it definitely violated the assumptions of the test: https://github.com/bitcoin/bitcoin/pull/34172/files#diff-303ce8833aaae92cea51cf00a5f56f7a9a1f3b9cab11576d41d63a403bf4e335L71\r\n\r\nexplicit 1sat/vbyte minrelay assumption",
          "created_at": "2025-12-29T15:46:50Z"
        },
        {
          "user": "glozow",
          "body": "utACK 95ef0fc5e78146e367e9454ba6b2899503631858",
          "created_at": "2025-12-29T16:36:33Z"
        }
      ]
    },
    {
      "number": 34171,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "fridokus",
      "created_at": "2025-12-29T13:42:33Z",
      "updated_at": "2025-12-29T13:53:15Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34171",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34171.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T13:42:43Z"
        },
        {
          "user": "DrahtBot",
          "body": "SPAM. The submission contains only placeholder/template text and a short irrelevant personal line, lacking any substantive description, rationale, tests, or implementation details for the proposed change. It appears to be a non-actionable or placeholder submission rather than a legitimate contribution.",
          "created_at": "2025-12-29T13:53:00Z"
        }
      ]
    },
    {
      "number": 34170,
      "title": "fuzz: Extend `scriptpubkeyman` coverage",
      "body": "Add fuzzing coverage for several missing `DescriptorScriptPubKeyMan` methods.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2025-12-29T12:04:50Z",
      "updated_at": "2026-01-15T19:14:02Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34170",
      "labels": [
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34170.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34170#issuecomment-3721277246) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32876](https://github.com/bitcoin/bitcoin/pull/32876) (refactor: use options struct for signing and PSBT operations by Sjors)\n* [#32857](https://github.com/bitcoin/bitcoin/pull/32857) (wallet: allow skipping script paths by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible typos and grammar issues:\n\n- setup -> set up [â€œset upâ€ is the verb form; â€œsetupâ€ is a noun â€” use â€œset up a new SPKMâ€ for correct grammar]\n\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- [spk_manager->FillPSBT(psbt, txdata, sighash_type, sign, bip32derivs, nullptr, finalize)] in src/wallet/test/fuzz/scriptpubkeyman.cpp\n\n\n\n<sup>2025-12-31</sup>\n",
          "created_at": "2025-12-29T12:04:56Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `macOS native, fuzz`: https://github.com/bitcoin/bitcoin/actions/runs/20572426083/job/59082228214</sub>\n<sub>LLM reason (âœ¨ experimental): Uncaught std::runtime_error \"Unable to expand descriptor\" in fuzz target scriptpubkeyman caused the CI failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-29T13:20:32Z"
        },
        {
          "user": "bensig",
          "body": "ACK 9efc7963132bb82cbaac05f3cfdd0fbe6940ffb1\r\n\r\nTests ran.",
          "created_at": "2026-01-07T23:36:48Z"
        }
      ]
    },
    {
      "number": 34169,
      "title": "fuzz: change fuzz runner test_runner.py to be cwd independent",
      "body": "Dear Maintainers,\r\n\r\nWhile using `test_runner.py` that runs fuzz tests and produces coverage results I encountered the following error.\r\n\r\nIf not running the script from the project root directory the `git grep --function-context [...]` does not return the same output which results in the following Python error:\r\n\r\n```\r\n../../src/protocol.h-', '../../../src/protocol.h-/** nServices flags */']\r\nTraceback (most recent call last):\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 405, in <module>\r\n    main()\r\n    ~~~~^^\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 173, in main\r\n    return generate_corpus(\r\n        fuzz_pool=fuzz_pool,\r\n    ...<3 lines>...\r\n        targets=test_list_selection,\r\n    )\r\n  File \"/path/to/bitcoin/build_libfuzzer/test/fuzz/./test_runner.py\", line 249, in generate_corpus\r\n    targets = transform_process_message_target(targets, Path(src_dir))\r\n  File \"/path/to/build_libfuzzer/test/fuzz/./test_runner.py\", line 218, in transform_process_message_target\r\n    assert len(lines)\r\n           ~~~^^^^^^^\r\nAssertionError\r\n```\r\n\r\nThe script is not able to retrieve lines as the filter applied is:\r\n\r\n```python\r\nlines = [l.split(\"::\", 1)[1].split(\",\")[0].lower() for l in lines if l.startswith(\"src/protocol.h-    NetMsgType::\")]\r\n```\r\n\r\nWhich when running from the root directory returns:\r\n```\r\n[snip]\r\nsrc/protocol.h-    NetMsgType::VERSION,\r\n[snip]\r\n```\r\nbut returns a relative path to CWD when run from other directories e.g:\r\n```\r\n../../../src/protocol.h-    NetMsgType::VERSION,\r\n```\r\n\r\nThis is very unfortunate as the script rightfully read the `config.ini` relatively to itself and go fetch `BUILDDIR` and `SRCDIR`  variables to obtain absolute paths.\r\n\r\n\r\nOptions are:\r\n* enforce running the script from *bitcoin/* directory  (and thus explicitly mentioning it in the doc)\r\n* make the script independent from where it is being run\r\n\r\nI chose the second option as it was fairly easy to make the script independent from where it is being run.\r\n",
      "state": "closed",
      "user": "RobinDavid",
      "created_at": "2025-12-29T11:06:27Z",
      "updated_at": "2026-01-05T08:22:46Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/34169",
      "labels": [
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34169.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/34169#issuecomment-3698993295), [dergoegge](https://github.com/bitcoin/bitcoin/pull/34169#pullrequestreview-3622904175) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T11:06:34Z"
        },
        {
          "user": "maflcko",
          "body": "Please squash your commits according to https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
          "created_at": "2025-12-29T16:54:21Z"
        },
        {
          "user": "maflcko",
          "body": "thanks!\r\n\r\nlgtm ACK 77c9b3c08f5f195c9afe8fba2395fbe48068fce0\r\n\r\n",
          "created_at": "2025-12-30T10:50:16Z"
        },
        {
          "user": "maflcko",
          "body": "@ janb84 : I don't see a risk here. This is fixing a usability bug, without any downside?",
          "created_at": "2026-01-02T09:09:30Z"
        },
        {
          "user": "janb84",
          "body": "> @ janb84 : I don't see a risk here. This is fixing a usability bug, without any downside?\r\n\r\nIn my testing using the documentation to find the coverage results, I found that the documentation uses still a lot of relative to bitcoin root references. The code change is good only the practicality of the change was, to me, not that valuable therefor ~0.  (have to admit that Judging when a change is not relevant is still somewhat of a conundrum to me )   ",
          "created_at": "2026-01-05T08:10:04Z"
        },
        {
          "user": "maflcko",
          "body": "I think relative paths are fine in the docs (after all it isn't possible to put absolute paths there, right?). But in scripts, it seems better to use absolute paths, when it is possible and when there is no downside.",
          "created_at": "2026-01-05T08:22:46Z"
        }
      ]
    },
    {
      "number": 34168,
      "title": "qa: Require `--exclude` for each excluded test",
      "body": "This PR allows a long `--exclude ...` argument in the `test/functional/test_runner.py` invocation to be split across multiple lines, with optional per-line explanatory comments. I found this useful for the CI scripts in https://github.com/hebasto/bitcoin-core-nightly.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-29T11:02:05Z",
      "updated_at": "2026-01-13T22:42:30Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/pull/34168",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34168.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/34168#issuecomment-3706343096), [rkrux](https://github.com/bitcoin/bitcoin/pull/34168#pullrequestreview-3635190227), [maflcko](https://github.com/bitcoin/bitcoin/pull/34168#issuecomment-3728416246), [achow101](https://github.com/bitcoin/bitcoin/pull/34168#issuecomment-3746880432) |\n| Stale ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34168#issuecomment-3703353788) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-29T11:02:11Z"
        },
        {
          "user": "bensig",
          "body": "ACK c9698f6\r\n\r\nVerified the argument parsing logic works as expected - multiple `--exclude` flags get joined and split correctly.",
          "created_at": "2026-01-01T07:11:20Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK c9698f6560b84f110365858fc707922ac1297faf",
          "created_at": "2026-01-01T16:30:44Z"
        },
        {
          "user": "l0rinc",
          "body": ">  I wonder if this could be made a breaking change to drop the comma-separated feature\r\n\r\nIn this context I would vote for that, let's have a single way to specify these to avoid confusion: approach NACK\r\n\r\nIt seems simpler to migrate to separate ones completely instead of having this mixed strategy, something like:\r\n```patch\r\ndiff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml\r\nindex 5e5b0c48e8..e287841e6e 100644\r\n--- a/.github/workflows/ci.yml\r\n+++ b/.github/workflows/ci.yml\r\n@@ -503,7 +503,7 @@ jobs:\r\n         env:\r\n           # TODO: Fix the excluded test and re-enable it.\r\n           # feature_unsupported_utxo_db.py fails on windows because of emojis in the test data directory\r\n-          EXCLUDE: '--exclude wallet_multiwallet.py,feature_unsupported_utxo_db.py'\r\n+          EXCLUDE: '--exclude wallet_multiwallet.py --exclude feature_unsupported_utxo_db.py'\r\n           TEST_RUNNER_EXTRA: ${{ github.event_name != 'pull_request' && '--extended' || '' }}\r\n         run: py -3 test/functional/test_runner.py --jobs $NUMBER_OF_PROCESSORS --ci --quiet --tmpdirprefix=\"$RUNNER_TEMP\" --combinedlogslen=99999999 --timeout-factor=$TEST_RUNNER_TIMEOUT_FACTOR $EXCLUDE $TEST_RUNNER_EXTRA\r\n \r\ndiff --git a/ci/test/00_setup_env_native_valgrind.sh b/ci/test/00_setup_env_native_valgrind.sh\r\nindex 884bc3955c..3e23a580da 100755\r\n--- a/ci/test/00_setup_env_native_valgrind.sh\r\n+++ b/ci/test/00_setup_env_native_valgrind.sh\r\n@@ -13,7 +13,7 @@ export PIP_PACKAGES=\"--break-system-packages pycapnp\"\r\n export USE_VALGRIND=1\r\n export NO_DEPENDS=1\r\n # bind tests excluded for now, see https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\r\n-export TEST_RUNNER_EXTRA=\"--exclude rpc_bind,feature_bind_extra\"\r\n+export TEST_RUNNER_EXTRA=\"--exclude rpc_bind --exclude feature_bind_extra\"\r\n export GOAL=\"install\"\r\n # TODO enable GUI\r\n export BITCOIN_CONFIG=\"\\\r\ndiff --git a/ci/test/00_setup_env_s390x.sh b/ci/test/00_setup_env_s390x.sh\r\nindex b7d23fbf5e..b6f924cf5d 100755\r\n--- a/ci/test/00_setup_env_s390x.sh\r\n+++ b/ci/test/00_setup_env_s390x.sh\r\n@@ -11,7 +11,7 @@ export PACKAGES=\"python3-zmq\"\r\n export CONTAINER_NAME=ci_s390x\r\n export CI_IMAGE_NAME_TAG=\"mirror.gcr.io/ubuntu:24.04\"\r\n export CI_IMAGE_PLATFORM=\"linux/s390x\"\r\n-export TEST_RUNNER_EXTRA=\"--exclude rpc_bind,feature_bind_extra\"  # Excluded for now, see https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\r\n+export TEST_RUNNER_EXTRA=\"--exclude rpc_bind --exclude feature_bind_extra\"  # Excluded for now, see https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\r\n export RUN_FUNCTIONAL_TESTS=true\r\n export GOAL=\"install\"\r\n export BITCOIN_CONFIG=\"\\\r\ndiff --git a/test/functional/test_runner.py b/test/functional/test_runner.py\r\nindex 58b331ee20..dae672e7da 100755\r\n--- a/test/functional/test_runner.py\r\n+++ b/test/functional/test_runner.py\r\n@@ -400,7 +400,7 @@ def main():\r\n     parser.add_argument('--combinedlogslen', '-c', type=int, default=0, metavar='n', help='On failure, print a log (of length n lines) to the console, combined from the test framework and all test nodes.')\r\n     parser.add_argument('--coverage', action='store_true', help='generate a basic coverage report for the RPC interface')\r\n     parser.add_argument('--ci', action='store_true', help='Run checks and code that are usually only enabled in a continuous integration environment')\r\n-    parser.add_argument('--exclude', '-x', action='append', help='specify a comma-separated-list of scripts to exclude.')\r\n+    parser.add_argument('--exclude', '-x', action='append', help='specify a script to exclude (can be specified multiple times).')\r\n     parser.add_argument('--extended', action='store_true', help='run the extended test suite in addition to the basic tests')\r\n     parser.add_argument('--help', '-h', '-?', action='store_true', help='print help text and exit')\r\n     parser.add_argument('--jobs', '-j', type=int, default=4, help='how many test scripts to run in parallel. Default=4.')\r\n@@ -503,8 +503,18 @@ def main():\r\n             for exclude_item in exclude_list:\r\n                 test_list.remove(exclude_item)\r\n \r\n-        exclude_tests = [test.strip() for test in \",\".join(args.exclude).split(\",\")]\r\n-        for exclude_test in exclude_tests:\r\n+        for exclude_test in args.exclude:\r\n+            if ',' in exclude_test:\r\n+                print(\"{}WARNING!{} --exclude '{}' contains a comma. Use --exclude for each test.\".format(BOLD[1], BOLD[0], exclude_test))\r\n+                if fail_on_warn:\r\n+                    sys.exit(1)\r\n+\r\n+        if len(args.exclude) != len(set(args.exclude)):\r\n+            print(\"{}WARNING!{} Duplicate --exclude detected.\".format(BOLD[1], BOLD[0]))\r\n+            if fail_on_warn:\r\n+                sys.exit(1)\r\n+\r\n+        for exclude_test in args.exclude:\r\n             # A space in the name indicates it has arguments such as \"rpc_bind.py --ipv4\"\r\n             if ' ' in exclude_test:\r\n                 remove_tests([test for test in test_list if test.replace('.py', '') == exclude_test.replace('.py', '')])\r\n```\r\n\r\nQ: should we log the name of each excluded test to be safe?\r\n```patch\r\ndiff --git a/test/functional/test_runner.py b/test/functional/test_runner.py\r\nindex 58b331ee20..fc204b858b 100755\r\n--- a/test/functional/test_runner.py\r\n+++ b/test/functional/test_runner.py\r\n@@ -501,6 +501,7 @@ def main():\r\n             if not exclude_list:\r\n                 print_warning_missing_test(exclude_test)\r\n             for exclude_item in exclude_list:\r\n+                print(\"Excluding %s\" % exclude_item)\r\n                 test_list.remove(exclude_item)\r\n \r\n         exclude_tests = [test.strip() for test in \",\".join(args.exclude).split(\",\")]\r\n```",
          "created_at": "2026-01-01T20:00:16Z"
        },
        {
          "user": "hebasto",
          "body": "Reworked per feedback. The updated branch is mostly based on @l0rinc's [suggestion](https://github.com/bitcoin/bitcoin/pull/34168#issuecomment-3704056886).",
          "created_at": "2026-01-02T13:26:41Z"
        },
        {
          "user": "l0rinc",
          "body": "Checked that all of my comments were applied correctly (even better than what I suggested), except for failure for duplicates, but that just behaves the same way as if we provided an invalid name for an excursion - a warning will appear:\r\n```bash\r\ncmake -B build -DCMAKE_BUILD_TYPE=Debug && cmake --build build -j$(nproc) && \\\r\n./build/test/functional/test_runner.py feature_includeconf.py feature_loadblock.py --exclude=feature_includeconf.py --exclude=feature_includeconf.py \r\n```\r\n> Excluding feature_includeconf.py\r\nWARNING! Test 'feature_includeconf.py' not found in current test list. Check the --exclude options.\r\nRemaining jobs: [feature_loadblock.py]\r\n1/1 - feature_loadblock.py passed, Duration: 1 s\r\n\r\nMay not be the best UX, but I actually prefer this over more complicated code.\r\n\r\ntested ACK c5825d4b7fe9ae202ea3c74798f58cd3a920821d",
          "created_at": "2026-01-02T22:26:30Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK c5825d4b7fe9ae202ea3c74798f58cd3a920821d ðŸ›„\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK c5825d4b7fe9ae202ea3c74798f58cd3a920821d ðŸ›„\r\nUQgbpGUCLuV09g7FGt+KgXbVRTQNpuB5S5ApWon8JehSgYzE0/oApwfqKUgbyosUEuHG+etgFuSVmO2Jt54nCA==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2026-01-09T10:55:20Z"
        },
        {
          "user": "maflcko",
          "body": "rfm?",
          "created_at": "2026-01-09T11:28:12Z"
        },
        {
          "user": "achow101",
          "body": "ACK c5825d4b7fe9ae202ea3c74798f58cd3a920821d",
          "created_at": "2026-01-13T22:37:08Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 34175,
      "title": "qa: `feature_pruning.py` fails when built `ENABLE_WALLET=OFF`",
      "body": "Below are the steps to reproduce the bug:\n```\n$ cmake -B build -DENABLE_WALLET=OFF\n$ cmake --build build\n$ ./build/test/functional/feature_pruning.py --tmpdir $(pwd)/tmp\n2025-12-29T18:31:27.385714Z TestFramework (INFO): PRNG seed is: 6842027149269818275\n2025-12-29T18:31:27.386337Z TestFramework (INFO): Initializing test directory /home/hebasto/dev/bitcoin/tmp\n2025-12-29T18:31:28.135416Z TestFramework (INFO): Warning! This test requires 4GB of disk space\n2025-12-29T18:31:28.135533Z TestFramework (INFO): Mining a big blockchain of 995 blocks\n2025-12-29T18:31:49.087269Z TestFramework (INFO): Check that we haven't started pruning yet because we're below PruneAfterHeight\n2025-12-29T18:31:49.087331Z TestFramework (INFO): Success\n2025-12-29T18:31:49.087425Z TestFramework (INFO): Though we're already using more than 550MiB, current usage: 592.1861515045166\n2025-12-29T18:31:49.087446Z TestFramework (INFO): Mining 25 more blocks should cause the first block file to be pruned\n2025-12-29T18:31:49.917042Z TestFramework (INFO): Success\n2025-12-29T18:31:49.917238Z TestFramework (INFO): Usage should be below target: 480.3139057159424\n2025-12-29T18:31:49.917265Z TestFramework (INFO): Check that we'll exceed disk space target if we have a very high stale block rate\n2025-12-29T18:31:49.917287Z TestFramework (INFO): Mine 24 (stale) blocks on Node 1, followed by 25 (main chain) block reorg from Node 0, for 12 rounds\n2025-12-29T18:32:23.946016Z TestFramework (INFO): Usage can be over target because of high stale rate: 640.085205078125\n2025-12-29T18:32:23.947212Z TestFramework (INFO): Check that we can survive a 288 block reorg still\n2025-12-29T18:32:23.947673Z TestFramework (INFO): Current block height: 1320\n2025-12-29T18:32:23.948098Z TestFramework (INFO): Invalidating block 170863767faea392ccf9ff5b962cc758ebe9991b2562af2f3aa044c321d175e2 at height 1033\n2025-12-29T18:32:24.322179Z TestFramework (INFO): New best height: 1032\n2025-12-29T18:32:24.429004Z TestFramework (INFO): Generating new longer chain of 300 more blocks\n2025-12-29T18:32:24.562884Z TestFramework (INFO): Reconnect nodes\n2025-12-29T18:32:25.769411Z TestFramework (INFO): Verify height on node 2: 1332\n2025-12-29T18:32:25.769654Z TestFramework (INFO): Usage possibly still high because of stale blocks in block files: 640.085205078125\n2025-12-29T18:32:25.769682Z TestFramework (INFO): Mine 220 more large blocks so we have requisite history\n2025-12-29T18:32:32.175362Z TestFramework (INFO): Usage should be below target: 448.4003086090088\n2025-12-29T18:32:32.175530Z TestFramework (INFO): Test that we can rerequest a block we previously pruned if needed for a reorg\n2025-12-29T18:32:33.817865Z TestFramework (INFO): Will need to redownload block 1033\n2025-12-29T18:32:33.938875Z TestFramework (INFO): Rewind node 0 to prev main chain to mine longer chain to trigger redownload. Blocks needed: 233\n2025-12-29T18:32:35.807399Z TestFramework (INFO): Verify node 2 reorged back to the main chain, some blocks of which it had to redownload\n2025-12-29T18:32:38.244340Z TestFramework (INFO): Test manual pruning with block indices\n2025-12-29T18:32:39.327901Z TestFramework (INFO): Success\n2025-12-29T18:32:39.327948Z TestFramework (INFO): Test manual pruning with timestamps\n2025-12-29T18:32:40.410622Z TestFramework (INFO): Success\n2025-12-29T18:32:40.410722Z TestFramework (INFO): Test invalid pruning command line options\n2025-12-29T18:32:40.580461Z TestFramework (INFO): Test scanblocks can not return pruned data\n2025-12-29T18:32:40.583664Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 481, in run_test\n    self.test_scanblocks_pruned()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/hebasto/dev/bitcoin/./build/test/functional/feature_pruning.py\", line 496, in test_scanblocks_pruned\n    assert_raises_rpc_error(-1, \"Block not available (pruned data)\", node.scanblocks,\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        \"start\", [{\"desc\": f\"raw({false_positive_spk.hex()})\"}], 0, 0, \"basic\", {\"filter_false_positives\": True})\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/hebasto/dev/bitcoin/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: No exception raised\n2025-12-29T18:32:40.636711Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-29T18:32:40.636826Z TestFramework (WARNING): Not cleaning up dir /home/hebasto/dev/bitcoin/tmp\n2025-12-29T18:32:40.636857Z TestFramework (ERROR): Test failed. Test logging available at /home/hebasto/dev/bitcoin/tmp/test_framework.log\n2025-12-29T18:32:40.636939Z TestFramework (ERROR): \n2025-12-29T18:32:40.637012Z TestFramework (ERROR): Hint: Call /home/hebasto/dev/bitcoin/test/functional/combine_logs.py '/home/hebasto/dev/bitcoin/tmp' to consolidate all logs\n2025-12-29T18:32:40.637031Z TestFramework (ERROR): \n2025-12-29T18:32:40.637048Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-29T18:32:40.637086Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-29T18:32:40.637103Z TestFramework (ERROR): \n[node 5] Cleaning up leftover process\n[node 4] Cleaning up leftover process\n[node 3] Cleaning up leftover process\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n```\n\nThe combined log appears to be too large to upload to GitHub.\n\nThis was initially observed on NetBSD and was later reproduced on Fedora 43.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-29T18:46:08Z",
      "updated_at": "2026-01-14T20:58:57Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34175",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "brunoerg",
          "body": "I was able to reproduce it on macOS 14.3:\n\n```\ncmake -B build_no_wallet -DENABLE_IPC=OFF -DENABLE_WALLET=OFF && cmake --build build_no_wallet -j 10 && ./build_no_wallet/test/functional/feature_pruning.py --tmpdir $(pwd)/tmp\n```\n\n```sh\n2025-12-30T21:10:45.025328Z TestFramework (INFO): Test manual pruning with block indices\n2025-12-30T21:10:46.286682Z TestFramework (INFO): Success\n2025-12-30T21:10:46.286738Z TestFramework (INFO): Test manual pruning with timestamps\n2025-12-30T21:10:47.544538Z TestFramework (INFO): Success\n2025-12-30T21:10:47.544656Z TestFramework (INFO): Test invalid pruning command line options\n2025-12-30T21:10:47.686153Z TestFramework (INFO): Test scanblocks can not return pruned data\n2025-12-30T21:10:47.688006Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build_no_wallet/test/functional/feature_pruning.py\", line 481, in run_test\n    self.test_scanblocks_pruned()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/./build_no_wallet/test/functional/feature_pruning.py\", line 496, in test_scanblocks_pruned\n    assert_raises_rpc_error(-1, \"Block not available (pruned data)\", node.scanblocks,\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        \"start\", [{\"desc\": f\"raw({false_positive_spk.hex()})\"}], 0, 0, \"basic\", {\"filter_false_positives\": True})\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/brunogarcia/projects/bitcoin-core-dev/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n    assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: No exception raised\n2025-12-30T21:10:47.742645Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-30T21:10:47.742746Z TestFramework (WARNING): Not cleaning up dir /Users/brunogarcia/projects/bitcoin-core-dev/tmp\n2025-12-30T21:10:47.742778Z TestFramework (ERROR): Test failed. Test logging available at /Users/brunogarcia/projects/bitcoin-core-dev/tmp/test_framework.log\n2025-12-30T21:10:47.742868Z TestFramework (ERROR):\n2025-12-30T21:10:47.742948Z TestFramework (ERROR): Hint: Call /Users/brunogarcia/projects/bitcoin-core-dev/test/functional/combine_logs.py '/Users/brunogarcia/projects/bitcoin-core-dev/tmp' to consolidate all logs\n2025-12-30T21:10:47.742973Z TestFramework (ERROR):\n2025-12-30T21:10:47.742996Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-30T21:10:47.743040Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-30T21:10:47.743061Z TestFramework (ERROR):\n[node 5] Cleaning up leftover process\n[node 4] Cleaning up leftover process\n[node 3] Cleaning up leftover process\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n```",
          "created_at": "2025-12-30T21:12:54Z"
        },
        {
          "user": "brunoerg",
          "body": "I did not investigate it in depth, but I think we shouldn't test the behavior of `scanblocks` for a pruned node, especially filtering false positives, with the genesis block since it has no undo data. Also, without wallet, the `wallet_test` is skipped so node5 isn't synced with node0 and the prune isn't done?",
          "created_at": "2025-12-30T21:33:28Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 9,
    "issues": 1
  }
}