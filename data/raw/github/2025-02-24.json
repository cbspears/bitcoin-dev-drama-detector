{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:20:03.022730+00:00",
  "date": "2025-02-24",
  "pull_requests": [
    {
      "number": 31945,
      "title": "depends: Update libmultiprocess library to fix CI failures",
      "body": "Bump libmultiprocess library to include bugfix https://github.com/chaincodelabs/libmultiprocess/pull/159 which should fix intermittent CI failures reported in https://github.com/bitcoin/bitcoin/issues/31921\r\n\r\nThis change is bumping the libmultiprocess version instead of cherry picking the bugfix. It could cherry-pick the bugfix instead, but there are reasons to prefer bumping the version:\r\n\r\n- Bugfix might interact with earlier PRs, and the latest version is better tested with testing done in many CI configurations in [#30975](https://github.com/bitcoin/bitcoin/pull/30975) and [#31802](https://github.com/bitcoin/bitcoin/pull/31802)\r\n\r\n- Even though we are in feature freeze for a release, the MULTIPROCESS=1 option is currently not enabled for release, so this PR only affect CI builds and local builds, not the release build.\r\n\r\nThis update brings in the following changes:\r\n\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/140 build: don't clobber user/superproject c++ version\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/142 build: add option for external mpgen binary\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/143 cleanup: initialize vars in the EventLoop constructor in the correct order\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/146 cmake: Suppress compiler warnings from capnproto headers\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/147 cmake: EXTERNAL_MPGEN cleanups\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/148 util: fix -Wpessimizing-move warning\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/145 CTest: Module must be included at the top level\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/149 Avoid `-Wundef` compiler warnings\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/152 refactor: Fix compiler and clang-tidy warnings\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/155 scripted-diff: s/Libmultiprocess_EXTERNAL_MPGEN/MPGEN_EXECUTABLE/g\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/156 refactor: Remove locale-dependent function calls\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/157 refactor: Avoid using std::format\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/159 bugfix: Do not lock EventLoop::mutex after EventLoop is done\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/161 cmake: Avoid including CTest if not top level project\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/164 Bump minimum required cmake to 3.12\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-02-24T12:57:42Z",
      "updated_at": "2025-03-04T17:26:08Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/31945",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31945.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/31945#pullrequestreview-2641354989) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-24T12:57:48Z"
        }
      ]
    },
    {
      "number": 31943,
      "title": "test: add coverage for abandoning unconfirmed transaction",
      "body": "Previous discussion: https://github.com/bitcoin/bitcoin/pull/31794#pullrequestreview-2605174936\r\nCurrent Coverage: https://maflcko.github.io/b-c-cov/total.coverage/src/wallet/wallet.cpp.gcov.html#L1326",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-02-24T10:20:38Z",
      "updated_at": "2025-02-26T14:36:43Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/31943",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31943.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Eunovo](https://github.com/bitcoin/bitcoin/pull/31943#issuecomment-2678262193), [janb84](https://github.com/bitcoin/bitcoin/pull/31943#issuecomment-2683205888), [maflcko](https://github.com/bitcoin/bitcoin/pull/31943#issuecomment-2683242368), [brunoerg](https://github.com/bitcoin/bitcoin/pull/31943#pullrequestreview-2644733871) |\n| Concept ACK | [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/31943#pullrequestreview-2638693713) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-24T10:20:43Z"
        },
        {
          "user": "Eunovo",
          "body": "Tested ACK https://github.com/bitcoin/bitcoin/pull/31943/commits/073a017016e62c7d52562aa61d942024379c110d",
          "created_at": "2025-02-24T12:22:29Z"
        },
        {
          "user": "maflcko",
          "body": "> Covers the previously uncovered `TransactionCanBeAbandoned()` function increasing the coverage .\r\n\r\nI don't understand this comment. `TransactionCanBeAbandoned` is only called by the GUI, but this new test isn't a gui test.\r\n\r\nAlso, https://corecheck.dev/bitcoin/bitcoin/pulls/31943 doesn't show new code coverage for `TransactionCanBeAbandoned` or anything else in wallet cpp",
          "created_at": "2025-02-25T10:11:47Z"
        },
        {
          "user": "Prabhat1308",
          "body": "> I don't understand this comment. `TransactionCanBeAbandoned` is only called by the GUI, but this new test isn't a gui test.\r\n\r\nThe confusion arose from my side . The RPC has the response `transaction not eligible for abandonment` and from the current coverage in the PR description (which I thought to be the pre-pull coverage) , the marked line was already covered. So , I incidently thought the `TransactionCanBeAbandoned` to be the check for abandonment function refered to increase the coverage.\r\n\r\nRemoved the comment.\r\n\r\n",
          "created_at": "2025-02-25T10:32:47Z"
        },
        {
          "user": "rkrux",
          "body": "> I don't understand this comment. TransactionCanBeAbandoned is only called by the GUI, but this new test isn't a gui test.\r\n\r\nCorrect, this doesn't cover `TransactionCanBeAbandoned`, which is called by GUI only. Instead, this covers the second condition in this if check here: https://github.com/bitcoin/bitcoin/blob/e486597f9a57903600656fb5106858941885852f/src/wallet/wallet.cpp#L1326C43-L1326C56\r\n\r\n> Also, https://corecheck.dev/bitcoin/bitcoin/pulls/31943 doesn't show new code coverage for TransactionCanBeAbandoned or anything else in wallet cpp\r\n\r\nThis is most likely because it checks on new lines covered by the code. However, this test doesn't cover a new line but a new branch of the already covered line.",
          "created_at": "2025-02-25T11:09:15Z"
        },
        {
          "user": "janb84",
          "body": "Tested ACK [073a017](https://github.com/bitcoin/bitcoin/pull/31943/commits/073a017016e62c7d52562aa61d942024379c110d)",
          "created_at": "2025-02-25T20:25:40Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 073a017016e62c7d52562aa61d942024379c110d",
          "created_at": "2025-02-25T20:43:45Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 31947,
      "title": "clang ubsan build fails link step after cmake migration",
      "body": "The error only happens for cmake builds, starting with the cmake migration.\n\nSteps to reproduce on Debian/Ubuntu:\n\n* Install packages and clone repo: `( export DEBIAN_FRONTEND=noninteractive && apt update && apt install git ccache make build-essential libtool cmake autotools-dev automake pkg-config bsdmainutils python3     libevent-dev libboost-dev  libsqlite3-dev clang llvm  -y && git clone https://github.com/bitcoin/bitcoin.git b-c ) && cd b-c `\n* `git checkout 338bc2cd261ba3daf7fb494f8cb4a534762e292c  # cmake migration (allows to test autotools and cmake on the same commit)`\n* `./autogen.sh && rm -rf ./bld-a && mkdir bld-a && ( cd bld-a && ../configure CC=clang CXX=clang++ --with-sanitizers=undefined && make -j$(nproc) src/bitcoind )  # (passes)`\n* `rm -rf ./bld-c && cmake -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++  -DSANITIZERS=undefined -B ./bld-c && cmake --build ./bld-c -j $(nproc) --target=bitcoind  # (fails)`",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-24T15:58:13Z",
      "updated_at": "2025-02-25T14:53:20Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31947",
      "labels": [],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "Sorry, wrong alarm",
          "created_at": "2025-02-24T16:04:46Z"
        }
      ]
    },
    {
      "number": 31946,
      "title": "test: intermittent issue in p2p_1p1c_network.py",
      "body": "> https://github.com/bitcoin/bitcoin/actions/runs/13498602529/job/37711361328?pr=31603#step:6:3286 \n\n _Originally posted by @brunoerg in [#31721](https://github.com/bitcoin/bitcoin/issues/31721#issuecomment-2678560262)_\n\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-24T14:50:40Z",
      "updated_at": "2025-03-20T15:51:33Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/31946",
      "labels": [
        "Brainstorming",
        "Tests",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "darosior",
          "body": "Another instance occurred in #31603 https://github.com/bitcoin/bitcoin/actions/runs/13498602529/job/37711361328.",
          "created_at": "2025-03-04T14:50:55Z"
        },
        {
          "user": "glozow",
          "body": "Is it possible the fix in #31751 has a race, where `disconnect_p2ps()` hasn't finished disconnecting / erasing the peer's orphan requests when the package is submitted?",
          "created_at": "2025-03-04T20:25:41Z"
        },
        {
          "user": "mzumsande",
          "body": "> Is it possible the fix in [#31751](https://github.com/bitcoin/bitcoin/pull/31751) has a race, where `disconnect_p2ps()` hasn't finished disconnecting / erasing the peer's orphan requests when the package is submitted?\n\nhmm, it shouldn't be possible, because of [this wait](https://github.com/bitcoin/bitcoin/blob/88debb3e4297ef4ebc8966ffe599359bc7b231d0/test/functional/test_framework/test_node.py#L830). Looking into the logs, the python nodes never get disconnected until the end (so it's not even a race), there are also no \"Closed connection to\" log entries that python would write if it attempted to close a connection. Weird...",
          "created_at": "2025-03-04T22:52:04Z"
        },
        {
          "user": "mzumsande",
          "body": "maybe the `test-each-commit` job just didn't pick up https://github.com/bitcoin/bitcoin/pull/31751 for some reason?\n\nIn both logs of the failed runs I see  `TEST_BASE: 5691fa93c48c5b2c767f19aad5e972e4d760414a`\n5691fa93c48c5b2c767f19aad5e972e4d760414a commit is older than https://github.com/bitcoin/bitcoin/pull/31751 / 152a2dcdefa6ec744db5b106d5c0a8c5b8aca416  so if that wasn't included these errors would make sense.\n@maflcko can you help?\n",
          "created_at": "2025-03-04T23:50:14Z"
        },
        {
          "user": "maflcko",
          "body": "Sorry for missing the ping. The goal of the `test-each-commit` is to check for bisect errors on the original commits. Thus, it will be susceptible to intermittent issues that were fixed in current master.\n\nMaybe the docs could be improved to mention this?\n\nOther than than, I'd recommend to just rebase on master when a known/fixed issue is hit in the `test-each-commit` task, or to re-run the task.",
          "created_at": "2025-03-20T14:04:07Z"
        },
        {
          "user": "mzumsande",
          "body": "Ok thanks - then it looks like there is no actual issue with p2p_1p1c_network.py to fix anymore.\n\n> The goal of the test-each-commit is to check for bisect errors on the original commits.\n\nWould it be possible to first rebase the PR branch onto current master, and only then do the test-each-commit procedure from there? That way, inconsistencies inside amongst the commits of the PR would still be found (maybe even more because silent conflicts that are only there in intermediate commits would now be detected), but intermittent issues fixed in current master wouldn't be an issue anymore.",
          "created_at": "2025-03-20T15:46:57Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, let's continue review/discussion in one place ( #32103)",
          "created_at": "2025-03-20T15:51:31Z"
        }
      ]
    },
    {
      "number": 31944,
      "title": "Intermittent failure in feature_fee_estimation.py in check_raw_estimates                                        feerate = float(e[\"feerate\"]) KeyError: 'feerate'",
      "body": "( Reminds me of https://github.com/bitcoin/bitcoin/issues/30640 )\n\nhttps://cirrus-ci.com/task/5862559074484224?logs=ci#L2975:\n\n```\n node1 2025-02-21T16:00:41.934000Z [httpworker.9] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__ \n node2 2025-02-21T16:00:41.935013Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:34802 \n node2 2025-02-21T16:00:41.935352Z [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__ \n node2 2025-02-21T16:00:41.936338Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:34802 \n node2 2025-02-21T16:00:41.936547Z [httpworker.14] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblock user=__cookie__ \n node1 2025-02-21T16:00:41.939972Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:54186 \n node1 2025-02-21T16:00:41.940135Z [httpworker.11] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=estimaterawfee user=__cookie__ \n node1 2025-02-21T16:00:41.940489Z [httpworker.11] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.96200: feerate: 366047 from (348912 - 424105) 100.00% 18.8/(18.8 0 mem 0.0 out) Fail: (301403 - 348912) 77.41% 24.0/(24.0 7 mem 0.0 out) \n node1 2025-02-21T16:00:41.940868Z [httpworker.11] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.99520: feerate: 435306 from (384675 - 515502) 100.00% 23.6/(23.6 0 mem 0.0 out) Fail: (301403 - 384675) 87.01% 46.9/(46.9 7 mem 0.0 out) \n node1 2025-02-21T16:00:41.943365Z [httpworker.11] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.99931: feerate: -1 from (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out) Fail: (301403 - 1e+99) 92.37% 169.5/(169.5 14 mem 0.0 out) \n test  2025-02-21T16:00:41.944000Z TestFramework (ERROR): Key error \n                                   Traceback (most recent call last):\n                                     File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 135, in main\n                                       self.run_test()\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_fee_estimation.py\", line 449, in run_test\n                                       self.sanity_check_estimates_range()\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_fee_estimation.py\", line 223, in sanity_check_estimates_range\n                                       check_estimates(self.nodes[1], self.fees_per_kb)\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_fee_estimation.py\", line 120, in check_estimates\n                                       check_raw_estimates(node, fees_seen)\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/feature_fee_estimation.py\", line 80, in check_raw_estimates\n                                       feerate = float(e[\"feerate\"])\n                                                       ~^^^^^^^^^^^\n                                   KeyError: 'feerate'\n\n\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-02-24T11:54:02Z",
      "updated_at": "2025-07-03T19:57:46Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/31944",
      "labels": [
        "TX fees and policy",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "It is actually possible to reliably reproduce this:\n\n```\n./bld-cmake/test/functional/feature_fee_estimation.py --randomseed=2986529890161488286",
          "created_at": "2025-02-24T12:05:16Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "\n\nThe failure occurs in `sanity_check_estimates_range` on the first iteration of the `for` loop.  \n\nhttps://github.com/bitcoin/bitcoin/blob/88debb3e4297ef4ebc8966ffe599359bc7b231d0/test/functional/feature_fee_estimation.py#L210-L223\n\nIt occurs in `check_raw_estimates` on confirmation target `1`.\nThe fee rate results in `estimaterawfee`  long stats has insufficient data to produce an estimate.\n\n- short \n  ```python3 {\n    \"feerate\": Decimal(\"0.00366047\"),\n    \"decay\": Decimal(\"0.962\"),\n    \"scale\": 1,\n    \"pass\": {\n      \"startrange\": 348912,\n      \"endrange\": 424105,\n      \"withintarget\": Decimal(\"18.82\"),\n      \"totalconfirmed\": Decimal(\"18.82\"),\n      \"inmempool\": 0,\n      \"leftmempool\": 0\n    },\n    \"fail\": {\n      \"startrange\": 301403,\n      \"endrange\": 348912,\n      \"withintarget\": Decimal(\"23.99\"),\n      \"totalconfirmed\": Decimal(\"23.99\"),\n      \"inmempool\": 7,\n      \"leftmempool\": 0\n    }\n  }\n  ```\n  \n- medium \n  ```python3 {\n    \"feerate\": Decimal(\"0.00435306\"),\n    \"decay\": Decimal(\"0.9952\"),\n    \"scale\": 2,\n    \"pass\": {\n      \"startrange\": 384675,\n      \"endrange\": 515502,\n      \"withintarget\": Decimal(\"23.61\"),\n      \"totalconfirmed\": Decimal(\"23.61\"),\n      \"inmempool\": 0,\n      \"leftmempool\": 0\n    },\n    \"fail\": {\n      \"startrange\": 301403,\n      \"endrange\": 384675,\n      \"withintarget\": Decimal(\"46.87\"),\n      \"totalconfirmed\": Decimal(\"46.87\"),\n      \"inmempool\": 7,\n      \"leftmempool\": 0\n    }\n  }\n  ```\n\n- long  \n  ```python3 {\n    \"decay\": Decimal(\"0.99931\"),\n    \"scale\": 24,\n    \"fail\": {\n      \"startrange\": 301403,\n      \"endrange\": Decimal(\"1E+99\"),\n      \"withintarget\": Decimal(\"169.53\"),\n      \"totalconfirmed\": Decimal(\"169.53\"),\n      \"inmempool\": 14,\n      \"leftmempool\": 0\n    },\n    \"errors\": [\"Insufficient data or no feerate found which meets threshold\"]\n  }\n  ```\n\nI ran the test using the provided random seed, and it fails consistently.  \n\n> ( Reminds me of https://github.com/bitcoin/bitcoin/issues/30640 )\n\nThis seems orthogonal since, in `transact_and_mine`, we sync the mempool of the nodes before mining.\n\nI checked that the nodes have the same mempool before mining, and after mining, their chain tips match as well.  \n\nIt appears that the random nature of the number of transactions (along with the random selection of their feerates) generated **10 times** to mine in `transact_and_mine` results in a long stats unable to provide an estimate.\n\n",
          "created_at": "2025-03-04T23:38:18Z"
        },
        {
          "user": "tnndbtc",
          "body": "@maflcko @ismaelsadeeq \n\nI dug further into this test failure in bitcoind process and found following:\nWhen test fails, it's because TxConfirmStats::EstimateMedianVal (in src/policy/fees.cpp) has gone into the error path:\n\ndouble curPct = nConf / (totalNum + failNum + extraNum);\n// Check to see if we are no longer getting confirmed at the success rate\nif (curPct < successBreakPoint) {\n    **// error path**\n}\nelse {\n    **// happy path**\n}\n\nAt this particular test case, curPct is 0.92371745878662281 and fall below successBreakPoint (0.94999999999999996)\nThis is because **extraNum** (14) has dragged the current percentage down\n(lldb) fr v curPct successBreakPoint nConf totalNum failNum extraNum\n(double) curPct = 0.92371745878662281\n(double) successBreakPoint = 0.94999999999999996 **// calculated by curPct = nConf / (totalNum + failNum + extraNum);**\n(double) nConf = 169.52823303092737\n(double) totalNum = 169.52823303092737\n(double) failNum = 0\n(int) **extraNum = 14**\n\nIn happy path during the test, **extraNum** is small, and **failNum** is 0, so **curPct** is bigger than expected **successBreakPoint** (0.94999999999999996)\n\nIn reality, extraNum could be a larger number as there might be more unconfirmed transactions in mempool, so I believe a lower than expected success break point is a real scenario.  Therefore, the expectation that it always returns a greater than 0 feerate in **check_raw_estimates** in test/functional/feature_fee_estimation.py does not always hold true.\n            feerate = float(e[\"feerate\"])\n            assert_greater_than(feerate, 0)\n\nSo, I would suggest we simply log a message when **feerate** does not exist in **check_raw_estimates** and continue the test.\n\nWhat do you think? \n\nInclude more logs from debug.out in node1 which shows the failed messages:\n\nfeature_fee_estimation_0/node1/regtest/debug.out\n2025-04-03T20:35:00.810609Z [httpworker.10] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.96200: feerate: 366047 from (348912 - 424105) 100.00% 18.8/(18.8 0 mem 0.0 out) Fail: (301403 - 348912) 77.41% 24.0/(24.0 7 mem 0.0 out)\n2025-04-03T20:35:00.810971Z [httpworker.10] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.99520: feerate: 435306 from (384675 - 515502) 100.00% 23.6/(23.6 0 mem 0.0 out) Fail: (301403 - 384675) 87.01% 46.9/(46.9 7 mem 0.0 out)\n**2025-04-03T20:35:00.815082Z [httpworker.10] [policy/fees.cpp:398] [EstimateMedianVal] [estimatefee] FeeEst: 1 > 95% decay 0.99931: feerate: -1 from (-1 - -1) 0.00% 0.0/(0.0 0 mem 0.0 out) Fail: (301403 - 1e+99) 92.37% 169.5/(169.5 14 mem 0.0 out)**\n",
          "created_at": "2025-05-24T16:33:33Z"
        },
        {
          "user": "tnndbtc",
          "body": "Include @Empact who originally worked on this test to review PR# 32615",
          "created_at": "2025-05-25T19:50:36Z"
        },
        {
          "user": "tnndbtc",
          "body": "@ismaelsadeeq @maflcko We currently do not have a good solution to fix this but have a good understanding on why it occasionally fails.  Would it be helpful to add a error message when **feerate** is missing in the key and state that it's expected for certain random seeds, and a workaround is to re-run the test with a different random seed so other people wouldn't need to spend more time digging out the root cause?",
          "created_at": "2025-07-03T19:57:46Z"
        }
      ]
    },
    {
      "number": 31942,
      "title": "[rfc] build: Reject unclean configure?",
      "body": "When re-configuring a build, it is possible to do so in an unclean way on a stale build folder.\n\nThe average person initiating such a build does not know when a stale build is safe and when not. Time is wasted for the builder when a broken build silently succeeds and then leads to a nonsensical error later on. Just to give the last two examples of the last few days: (https://github.com/bitcoin/bitcoin/issues/31922#issuecomment-2673888781, https://github.com/bitcoin/bitcoin/pull/31933#discussion_r1966580329, ...)\n\nThe benefit of an unclean build is unclear, given that it merely  saves a few seconds of a build that normally happens in the background anyway, at the risk of wasting minutes or hours if something is overlooked.\n\nThus, a build configure should be rejected if the build directory exists.\n\n(Obviously, re-builds on a build directory that do not require a re-configure are not affected)",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-02-24T08:38:16Z",
      "updated_at": "2025-04-28T10:18:13Z",
      "comments": 33,
      "url": "https://github.com/bitcoin/bitcoin/issues/31942",
      "labels": [
        "Brainstorming",
        "Build system"
      ]
    },
    {
      "number": 31941,
      "title": "Proposal for Bitcoin Expiration Mechanism to Improve Scalability and Maintain Mining Incentives",
      "body": "### Please describe the feature you'd like to see added.\n\n**Title**: Proposal for Bitcoin Expiration Mechanism to Improve Scalability and Maintain Mining Incentives\n\n**Summary:**\nThis proposal suggests implementing an expiration mechanism for unmoved Bitcoin to address long-term scalability, lost coins, and mining incentives. Under this model, Bitcoin that has remained unspent for a fixed period (e.g., 16 years) would be reabsorbed into the mining pool as block rewards, ensuring the blockchain remains sustainable while preserving the total supply cap of 21 million BTC.\n\n**Problem Statement:**\nBitcoin faces two major long-term challenges:\n1. **Blockchain Growth**: The ledger size grows indefinitely, making it increasingly difficult for full nodes to operate efficiently.\n2. **Lost and Dormant Bitcoin**: A significant portion of Bitcoin is permanently lost due to forgotten keys, deaths, or lost hardware, reducing the functional supply.\n3. **Diminishing Mining Rewards**: As block rewards decrease over time, Bitcoin miners may lack sufficient incentive to secure the network.\n\n**Proposed Solution:**\n- **Expiration Rule**: Any Bitcoin UTXO that has remained unspent for a fixed period (e.g., 16 years) would be considered \"expired.\"\n- **Recycling Mechanism**: Expired Bitcoin would be reabsorbed and redistributed as future block rewards.\n- **Ledger Pruning**: Expired transactions would allow older blocks to be pruned, keeping the blockchain size stable.\n- **User Notification**: Wallet software would track UTXO expiration dates and notify users well in advance, ensuring they can move their funds if desired.\n\n**Benefits:**\n- **Fixed Blockchain Size**: Prevents excessive growth, making it feasible for more users to run full nodes.\n- **Preserves 21M BTC Cap**: The total Bitcoin supply remains unchanged, avoiding inflationary effects.\n- **Revives Lost BTC**: Reintroduces inactive Bitcoin back into circulation, improving liquidity.\n- **Sustains Mining Rewards**: Provides continuous incentives for miners long after the last Bitcoin is mined.\n- **Encourages Active Use**: Prevents excessive hoarding and ensures BTC remains a functional currency.\n\n**Potential Challenges & Considerations:**\n- **User Backlash**: Some may resist the idea of their Bitcoin expiring, even with ample warnings.\n- **Implementation Complexity**: Requires modifications to Bitcoin Core and consensus agreement.\n- **Security Risks**: Could this mechanism be exploited? Proper safeguards must be in place.\n- **Governance**: Defining the ideal expiration period (e.g., 16 years) requires broad consensus.\n\n**Next Steps:**\n1. **Community Feedback**: Open discussion with developers and users.\n2. **Technical Specification**: Draft a detailed BIP (Bitcoin Improvement Proposal).\n3. **Testnet Implementation**: Create a fork or soft fork to test feasibility.\n4. **Consensus Building**: Work toward adoption by miners and node operators.\n\nThis proposal aims to enhance Bitcoinâ€™s long-term viability while maintaining its core principles. Feedback and discussion are welcome to refine and improve the idea further.\n\n\n\n### Is your feature related to a problem, if so please describe it.\n\nThis idea solves real long-term issues, especially around storage growth and lost coins, without violating Bitcoinâ€™s hard cap of 21M. Itâ€™s less extreme than a reset or a forkâ€”just an evolution of the rules over time.\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "RealStanima",
      "created_at": "2025-02-24T01:06:12Z",
      "updated_at": "2025-02-24T01:07:25Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31941",
      "labels": [
        "Feature"
      ]
    }
  ],
  "summary": {
    "pull_requests": 2,
    "issues": 5
  }
}