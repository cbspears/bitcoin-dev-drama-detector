{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:41:07.759952+00:00",
  "date": "2025-05-13",
  "pull_requests": [
    {
      "number": 32489,
      "title": "wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet",
      "body": "Currently, if a user wants to use an airgapped setup, they need to manually create the watchonly wallet that will live on the online node by importing the public descriptors. This PR introduces `exportwatchonlywallet` which will create a wallet file with the public descriptors to avoid exposing the specific internals to the user. Additionally, this RPC will copy any existing labels, transactions, and wallet flags. This ensures that the exported watchonly wallet is almost entirely a copy of the original wallet but without private keys.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-05-13T22:22:00Z",
      "updated_at": "2026-01-05T22:16:37Z",
      "comments": 17,
      "url": "https://github.com/bitcoin/bitcoin/pull/32489",
      "labels": [
        "Wallet",
        "Review club"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32489.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [shahsb](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-2843940627), [Sjors](https://github.com/bitcoin/bitcoin/pull/32489#issuecomment-2890893688), [vicjuma](https://github.com/bitcoin/bitcoin/pull/32489#issuecomment-2917340365), [Eunovo](https://github.com/bitcoin/bitcoin/pull/32489#issuecomment-2980159342), [stringintech](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-3103209012), [enirox001](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-3116692194) |\n| Stale ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-3090320231), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-3094757593), [rkrux](https://github.com/bitcoin/bitcoin/pull/32489#pullrequestreview-3164472562), [polespinasa](https://github.com/bitcoin/bitcoin/pull/32489#issuecomment-3268580076) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33034](https://github.com/bitcoin/bitcoin/pull/33034) (wallet: Store transactions in a separate sqlite table by achow101)\n* [#33008](https://github.com/bitcoin/bitcoin/pull/33008) (wallet: support bip388 policy with external signer by Sjors)\n* [#32895](https://github.com/bitcoin/bitcoin/pull/32895) (wallet: Prepare for future upgrades by recording versions of last client to open and decrypt by achow101)\n* [#32861](https://github.com/bitcoin/bitcoin/pull/32861) (Have createwalletdescriptor auto-detect an unused(KEY) by Sjors)\n* [#32784](https://github.com/bitcoin/bitcoin/pull/32784) (wallet: derivehdkey RPC to get xpub at arbitrary path by Sjors)\n* [#32471](https://github.com/bitcoin/bitcoin/pull/32471) (wallet/rpc: fix listdescriptors RPC fails to return descriptors with private key information when wallet contains descriptors missing any key by Eunovo)\n* [#29136](https://github.com/bitcoin/bitcoin/pull/29136) (wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T22:22:04Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/42170822821</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is due to linting errors in Python and C++ code.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-13T22:39:22Z"
        },
        {
          "user": "Sjors",
          "body": "Concept ACK\r\n\r\nThis might also be useful in a _multisig_ airgapped scenario (where two private keys never go near each other).\r\n\r\nE.g. create a 2-of-2 MuSig2 wallet on your offline machine, with one hot key held by Bitcoin Core and the other a hardware wallet. Export the watch-only wallet and put it on the online machine. You can then use the hardware wallet on either the online or offline machine to co-sign.\r\n\r\nThough for that to work, the `exportwatchonlywallet` should have an option to set the `external_signer` flag (the offline wallet might not have this flag, depending on how you set it up).",
          "created_at": "2025-05-19T12:50:11Z"
        },
        {
          "user": "achow101",
          "body": "Rebased, ready for review",
          "created_at": "2025-05-21T17:54:14Z"
        },
        {
          "user": "achow101",
          "body": "Split the `LockCoin` commit into #32593, the `parent_descs` to #32594, the flag setting and retrieval stuff to #32597, and exception logging to #32598",
          "created_at": "2025-05-22T21:21:56Z"
        },
        {
          "user": "Sjors",
          "body": "> Split the LockCoin commit into https://github.com/bitcoin/bitcoin/pull/3259,\r\n\r\n#32593",
          "created_at": "2025-05-23T07:52:40Z"
        },
        {
          "user": "vicjuma",
          "body": "Concept ACK\r\n\r\nThis separates viewing and spending logic and will be efficient especially if **exporting** it to an _easily_ **importable** format ",
          "created_at": "2025-05-28T19:06:36Z"
        },
        {
          "user": "Sjors",
          "body": "Can you update the description with the prerequisite PRs? Just #32593 and #32597 are left I believe.",
          "created_at": "2025-06-16T11:27:23Z"
        },
        {
          "user": "Eunovo",
          "body": "Concept ACK\r\n\r\nLeft some comments.",
          "created_at": "2025-06-17T12:20:10Z"
        },
        {
          "user": "achow101",
          "body": "All prerequisite PRs merged, ready for review.",
          "created_at": "2025-07-24T18:22:12Z"
        },
        {
          "user": "rkrux",
          "body": "Strong Concept ACK e6ac2015a852caa0f50e44becf9cd4b7592c48e7\r\nVery useful for the users, the GUI option (in the separate PR) makes creating a watch-only version even easier.\r\nI will review this PR soon.\r\n\r\nI believe the following is done now and can be removed from the PR description?\r\n> Some of the first several commits can be split into separate PRs if so desired. Those are primarily bug fixes for existing issues that came up during testing.",
          "created_at": "2025-07-25T03:59:24Z"
        },
        {
          "user": "achow101",
          "body": "> I believe the following is done now and can be removed from the PR description?\r\n\r\nYes, removed.",
          "created_at": "2025-07-25T05:03:06Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/47161464649</sub>\n<sub>LLM reason (‚ú® experimental): Clang-tidy detected a recursive function call in descriptor.cpp, which caused the CI failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-01T01:24:12Z"
        },
        {
          "user": "ryanofsky",
          "body": "For anyone who's interested, I'm hosting a review club meeting about this PR on Wednesday: https://bitcoincore.reviews/32489",
          "created_at": "2025-08-04T16:13:52Z"
        },
        {
          "user": "jonatack",
          "body": "> For anyone who's interested, I'm hosting a review club meeting about this PR on Wednesday: [bitcoincore.reviews/32489](https://bitcoincore.reviews/32489)\r\n\r\nThere is `Review Club` label in this repo that can be added, too.",
          "created_at": "2025-08-04T21:23:37Z"
        },
        {
          "user": "polespinasa",
          "body": "slightly code review tACK 0f547141487e3964a55102f6ae441233d7144aaf\r\n\r\nThe behaviour of this new RPC was tested to update the guide in commit 0f547141487e3964a55102f6ae441233d7144aaf and the behavior is the expected.",
          "created_at": "2025-09-09T01:53:25Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `fuzzer,address,undefined,integer`: https://github.com/bitcoin/bitcoin/actions/runs/20111780022/job/57710791590</sub>\n<sub>LLM reason (‚ú® experimental): Compilation failed due to a type mismatch: ExportDescriptors returns util::Expected<vector<WalletDescInfo>, string>, which cannot be converted to util::Result<vector<WalletDescInfo>> in wallet.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-10T20:11:45Z"
        }
      ]
    },
    {
      "number": 32488,
      "title": "fuzz: Properly setup wallet in wallet_fees target",
      "body": "`g_wallet_ptr` is destructed after the `testing_setup`. This is not supported and will lead to issues such as https://github.com/bitcoin/bitcoin/pull/30221#issuecomment-2863875857 or https://github.com/bitcoin/bitcoin/pull/32409#issuecomment-2855259932.\r\n\r\nThis could be fixed by fixing the initialization order.\r\n\r\nHowever, the global wallet is also modified in the fuzz target, which is bad fuzzing practise.\r\n\r\nSo instead fix it by constructing a fresh wallet for each fuzz iteration.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-13T21:13:23Z",
      "updated_at": "2025-10-30T13:58:46Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32488",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32488.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/32488#pullrequestreview-2838169693), [hebasto](https://github.com/bitcoin/bitcoin/pull/32488#pullrequestreview-2839582440), [marcofleon](https://github.com/bitcoin/bitcoin/pull/32488#pullrequestreview-2839644907) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T21:13:26Z"
        },
        {
          "user": "maflcko",
          "body": "Can be tested via:\r\n\r\n```diff\r\ndiff --git a/src/wallet/wallet.h b/src/wallet/wallet.h\r\nindex e32b8c7272..ea67a48e9e 100644\r\n--- a/src/wallet/wallet.h\r\n+++ b/src/wallet/wallet.h\r\n@@ -468,6 +468,7 @@ public:\r\n \r\n     ~CWallet()\r\n     {\r\n+    chain().relayMinFee();\r\n         // Should not have slots connected at this point.\r\n         assert(NotifyUnload.empty());\r\n     }\r\n```\r\n\r\nand:\r\n\r\n```\r\nrm -rf ./bld-cmake && cmake -B ./bld-cmake -DAPPEND_CXXFLAGS='-std=c++23 -O3 -g2' -DAPPEND_CFLAGS='-O3 -g2' -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DBUILD_FOR_FUZZING=ON -DSANITIZERS=fuzzer,address,undefined,integer,float-divide-by-zero && cmake --build ./bld-cmake --parallel $( nproc )\r\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=wallet_fees  ./bld-cmake/bin/fuzz -runs=2\r\n```\r\n\r\nBefore: UndefinedBehaviorSanitizer: dynamic-type-mismatch\r\nAfter: Clean",
          "created_at": "2025-05-13T21:17:14Z"
        },
        {
          "user": "maflcko",
          "body": "(side note: I would have expected that the fuzz stability was less, but https://oss-fuzz.com/fuzzer-stats?group_by=by-fuzzer&date_start=2025-04-14&date_end=2025-05-13&fuzzer=afl_bitcoin-core_wallet_fees&job=afl_asan_bitcoin-core&project=bitcoin-core claims it is 100%)",
          "created_at": "2025-05-14T05:00:49Z"
        }
      ]
    },
    {
      "number": 32487,
      "title": "blocks: avoid recomputing block header hash in `ReadBlock`",
      "body": "Eliminate one block header hash calculation per block-read by reusing the hash for:\r\n* proof‚Äëof‚Äëwork verification;\r\n* (optional) integrity check against the supplied hash.\r\n\r\nThis part of the code wasn't covered by tests either, so the first commit exercises this part first, before pushing the validation to the delegate method.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-05-13T20:18:31Z",
      "updated_at": "2025-05-29T10:00:46Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32487",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32487.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32487#issuecomment-2911226436), [jonatack](https://github.com/bitcoin/bitcoin/pull/32487#pullrequestreview-2871187569), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/32487#pullrequestreview-2871920816), [achow101](https://github.com/bitcoin/bitcoin/pull/32487#issuecomment-2913804719) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32487#pullrequestreview-2851941615), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/32487#pullrequestreview-2865691734) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T20:18:35Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK 8117c16fd7a0a5334fe63efaff94ea4e1d3cf851 üåã\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 8117c16fd7a0a5334fe63efaff94ea4e1d3cf851 üåã\r\n12TE8ZKu4avgseXLh/q3bD12L6JUoKwRM4JRSVJomoSPCLwU7x9A91dE0TdOMtRbkIOg6/qKppZ6YA6uZ8jIDQ==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-05-26T07:35:46Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 09ee8b7f278627b917f0784adf23cbc76cae5fa0",
          "created_at": "2025-05-27T06:11:44Z"
        },
        {
          "user": "pinheadmz",
          "body": "Is there a reason we don't just cache the hash as a member of `CBlockHeader` and compute-or-return that value in `GetHash()`?",
          "created_at": "2025-05-27T14:21:04Z"
        },
        {
          "user": "l0rinc",
          "body": "@pinheadmz, that's the first thing I though of, but unfortunately the header is as mutable as it gets (see e.g. `while (!CheckProofOfWork(block.GetHash(), block.nBits, Params().GetConsensus())) ++block.nNonce;`), so it would be dangerous to cache the hash, given that all fields are accessible from the outside and there's no simple way to invalidate the pre-computed hash, unless we expose them all to getter/setters which would invalidate the hash on change (and which would slow down `nNonce` exploration). Or alternatively to convert to an immutable header after we're done mutating - but that's also likely a huge change.\r\nSo, for now, this seemed to be both simpler and slightly more performant than before.",
          "created_at": "2025-05-27T15:41:14Z"
        },
        {
          "user": "achow101",
          "body": "ACK 09ee8b7f278627b917f0784adf23cbc76cae5fa0",
          "created_at": "2025-05-27T19:45:51Z"
        },
        {
          "user": "l0rinc",
          "body": "Thanks for the reviews and the suggestions - added https://github.com/bitcoin/bitcoin/pull/32638 as a follow-up which enforces most remaining usages of `ReadBlock` to validate their hash.",
          "created_at": "2025-05-29T10:00:45Z"
        }
      ]
    },
    {
      "number": 32485,
      "title": "Update minisketch subtree",
      "body": "Includes:\r\n* https://github.com/bitcoin-core/minisketch/pull/89\r\n* https://github.com/bitcoin-core/minisketch/pull/94 (in #32482)",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T17:10:00Z",
      "updated_at": "2025-05-16T09:15:08Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32485",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32485.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32485#pullrequestreview-2845934886), [maflcko](https://github.com/bitcoin/bitcoin/pull/32485#issuecomment-2886091020) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T17:10:06Z"
        },
        {
          "user": "maflcko",
          "body": "> Apologies for my git-ignorance, but why are there two commits with the same changes? Is that how a subtree update normally looks?\r\n\r\nIf you want to preserve the subtree, the only way to update is via a merge (I think), so you need one commit for the subtree changes itself and then a merge commit to merge them into this repo.",
          "created_at": "2025-05-16T08:57:22Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 46b533dfe6fc6c956ac178896d9caf1d59b73d9f\r\n\r\nThe changes look like the merged upstream changes. I haven't run the subtree check locally to confirm.",
          "created_at": "2025-05-16T08:58:29Z"
        },
        {
          "user": "fanquake",
          "body": "For reference, the command used here is `git subtree pull --prefix src/minisketch https://github.com/bitcoin-core/minisketch.git master --squash`.",
          "created_at": "2025-05-16T09:04:00Z"
        }
      ]
    },
    {
      "number": 32484,
      "title": "[28.x] build: suppress `-Wunterminated-string-initialization` in secp256k1",
      "body": "Suppress `-Wunterminated-string-initialization` warnings from GCC 15, like:\r\n```bash\r\nIn file included from src/secp256k1.c:830:\r\nsrc/modules/schnorrsig/main_impl.h:48:46: warning: initializer-string for array of 'unsigned char' truncates NUL terminator but destination lacks 'nonstring' attribute (14 chars into 13 available) [-Wunterminated-string-initialization]\r\n   48 | static const unsigned char bip340_algo[13] = \"BIP0340/nonce\";\r\n      |                                              ^~~~~~~~~~~~~~~\r\nIn file included from src/tests_exhaustive.c:28:\r\nsrc/testrand_impl.h: In function ‚Äòtestrand_seed‚Äô:\r\nsrc/testrand_impl.h:21:45: warning: initializer-string for array of ‚Äòunsigned char‚Äô truncates NUL terminator but destination lacks ‚Äònonstring‚Äô attribute (20 chars into 19 available) [-Wunterminated-string-initialization]\r\n   21 |     static const unsigned char PREFIX[19] = \"secp256k1 test init\";\r\n      |                                             ^~~~~~~~~~~~~~~~~~~~~\r\nsrc/modules/ellswift/tests_impl.h:411:53: warning: initializer-string for array of ‚Äòunsigned char‚Äô truncates NUL terminator but destination lacks ‚Äònonstring‚Äô attribute (27 chars into 26 available) [-Wunterminated-string-initialization]\r\n  411 |         static const unsigned char bip324_tag[26] = \"bip324_ellswift_xonly_ecdh\";\r\n      |                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n```\r\n\r\nThis was fixed upstream in https://github.com/bitcoin-core/secp256k1/pull/1583, so only relevant for `28.x` and later. The code is fine, but the warnings may break builds under `-Werror`, leave users wondering if there is a real issue etc.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T16:18:38Z",
      "updated_at": "2025-11-05T10:39:11Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32484",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32484.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32484#pullrequestreview-2837501535) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T16:18:41Z"
        },
        {
          "user": "theuni",
          "body": "Hmm, my first thought was just to backport the \"fix\" instead, but I guess we've never really backported secp changes for the sake of keeping in sync.\r\n\r\nEither way, in this case I agree it's simple/safe enough to just suppress the warning for 28.x.",
          "created_at": "2025-05-13T16:49:54Z"
        },
        {
          "user": "fanquake",
          "body": "Changed this, as the prior approach would warn under Clang.",
          "created_at": "2025-05-16T14:12:52Z"
        },
        {
          "user": "maflcko",
          "body": "An alternative would be to just ignore the warning? CI on 28.x isn't using gcc 15 and users aren't really expected to compile with werror?",
          "created_at": "2025-05-16T15:35:52Z"
        },
        {
          "user": "fanquake",
          "body": "We could also do that. I guess it depends where we expect this branch to be compiled. Any downstream CIs, build systems, packagers etc may be turning warnings into errors. It doesn't seem bad for us to suppress known non-issues.",
          "created_at": "2025-05-16T15:42:15Z"
        },
        {
          "user": "maflcko",
          "body": "> Any downstream CIs, build systems, packagers etc may be turning warnings into errors.\r\n\r\nIf those exists and are affected with gcc-15, I'd say they could just use the latest release, which is unaffected, or just disable the warning themselves, if they really need to. Generally, I think backports (this one isn't even a backport in a strict sense) should be limited to real errors/issues that can affect end-users of the program. But no strong opinion, just wanted to explain my thoughts.",
          "created_at": "2025-06-17T12:29:12Z"
        },
        {
          "user": "fanquake",
          "body": "I think I'll just leave this, and we can do rc3/final.",
          "created_at": "2025-06-17T15:43:45Z"
        }
      ]
    },
    {
      "number": 32483,
      "title": "test: fix two intermittent failures in wallet_basic.py",
      "body": "Fixes two rare failures that happened in the CI:\r\n\r\n#27249:\r\nThere could be a race with outstanding TxAddedToMempool notifications being applied to the soon-to-be created wallet:\r\n1. importdescriptors during rescan sets status to `TxStateConfirmed`\r\n2. old `transactionAddedToMempool` notification changes status back to  `TxStateInMempool`\r\n3. If the listunspent call happens here the test will fail\r\n4. blockConnected notification will change the status back to `TxStateConfirmed` (so it's not a persistent failure)\r\n\r\nI could reproduce this by adding a 100 microsecond sleep to `AddToWallet()`, the fix is to add a sync, so `transactionAddedToMempool` notifications won't affect the new wallet anymore.\r\n\r\n#32456:\r\nDuring init, the test framework will start using rpc after the mempool was loaded.\r\nIt will not wait for `start()` / `postInitProcess` or outstanding `transactionAddedToMempool` notifications (which would both set the status to `TxStateInMempool`), leading to\r\na possible race, in which `listunspent` can be called while the tx is still in `Inactive` status. \r\n\r\nCan be reproduced by adding two sleeps: To init  before calling `start()` for the chain clients, plus to `transactionAddedToMempool` in `wallet.cpp`.\r\nPrevent this by processing outstanding notifications.\r\n\r\nFixes #27249\r\nFixes #32456",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-05-13T16:05:52Z",
      "updated_at": "2025-05-14T13:33:53Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32483",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32483.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32483#issuecomment-2879883748) |\n| Concept ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32483#issuecomment-2880021915) |\n| Stale ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32483#issuecomment-2877470966) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T16:05:55Z"
        },
        {
          "user": "achow101",
          "body": "ACK 4290a86c6022c8f63610b9c1b185ac115cefbd2c",
          "created_at": "2025-05-13T17:54:41Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK e7ad86e1ca3b0b2f2795e91c2f9959486c67dd90 üé©\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK e7ad86e1ca3b0b2f2795e91c2f9959486c67dd90 üé©\r\nWgNwLvB4clQ7IsdGtON1cU1KwtmoEvNlU0K6e9yxlOi3dZc7g52zNZlVg/Qfjnc2K+u1ZreEuSaj1cgnquFpBw==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-05-14T11:45:20Z"
        },
        {
          "user": "fanquake",
          "body": "@achow101 note that you've ACK'd a commit has not in this PR, but for an equivalent change.",
          "created_at": "2025-05-14T12:23:54Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to `29.x` in #32292.",
          "created_at": "2025-05-14T12:29:00Z"
        }
      ]
    },
    {
      "number": 32482,
      "title": "build: add `-W*-whitespace`",
      "body": "GCC 15 now has options to turn leading & trailing whitespace into compile failures: https://gcc.gnu.org/gcc-15/changes.html#c-family. Fix the few cases of leading tabs, and trailing whitespace, and then enable `-Wleading-whitespace` and `-Wtrailing-whitespace`.\r\n\r\nWe currently get PRs that are opened with various whitespace, i.e #33822, so turning that into compile-time failure where possible, seems useful, to avoid a CI roundtrip.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T15:13:05Z",
      "updated_at": "2025-11-12T16:12:51Z",
      "comments": 25,
      "url": "https://github.com/bitcoin/bitcoin/pull/32482",
      "labels": [
        "Build system"
      ]
    },
    {
      "number": 32481,
      "title": "wallet, refactor: Remove Legacy wallet unused warnings and errors",
      "body": "Remove dead code due to legacy wallet support removal.\r\n\r\nThese changes have no impact on functionality. They are transparent to the end user, as legacy wallets can't be created or loaded anymore, so these checks are no longer reached. The legacy-to-descriptor wallet migration flow is not affected either, as these removals are not part of its process.",
      "state": "closed",
      "user": "pablomartin4btc",
      "created_at": "2025-05-13T14:44:33Z",
      "updated_at": "2025-06-16T09:16:10Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32481",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32481.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32481#pullrequestreview-2924804142), [achow101](https://github.com/bitcoin/bitcoin/pull/32481#issuecomment-2972010275) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28333](https://github.com/bitcoin/bitcoin/pull/28333) (wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T14:44:38Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/42142854745</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is due to trailing whitespace and spelling errors identified by the lint check.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-13T14:52:53Z"
        },
        {
          "user": "pablomartin4btc",
          "body": "_<ins>Updates</ins>_:\r\n* Addressed @achow101's [feedback](https://github.com/bitcoin/bitcoin/pull/32481#discussion_r2087371964) by adding an `Assert()` on `CreateWallet()` enforcing only descriptor wallets can be created.",
          "created_at": "2025-05-13T20:03:02Z"
        },
        {
          "user": "pablomartin4btc",
          "body": "Addressed [feedback](https://github.com/bitcoin/bitcoin/pull/32481#discussion_r2089806374) removing unnecessary descriptor wallet checks.",
          "created_at": "2025-05-16T18:25:15Z"
        },
        {
          "user": "pablomartin4btc",
          "body": "_<ins>Updates</ins>_:\r\n* Removed \"non-descriptor\" checks and error instances in RPC (noticed while reviewing #32708).",
          "created_at": "2025-06-09T23:42:25Z"
        },
        {
          "user": "pablomartin4btc",
          "body": "_<ins>Updates</ins>_:\r\n* Addressed [feedback](https://github.com/bitcoin/bitcoin/pull/32481#discussion_r2138353475) from @maflcko [and](https://github.com/bitcoin/bitcoin/pull/32481#discussion_r2138470337) @achow101.\r\n* Removed also wallet descriptor check from `CWallet::EncryptWallet()` and  `CWallet::Create()`.",
          "created_at": "2025-06-10T19:57:42Z"
        },
        {
          "user": "achow101",
          "body": "ACK ce90f0c99fded22dd24f08757d6f48b5c6b52990",
          "created_at": "2025-06-14T00:10:20Z"
        }
      ]
    },
    {
      "number": 32480,
      "title": "[28.x] 28.2rc1",
      "body": "Final changes for `v28.2rc1`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T13:44:35Z",
      "updated_at": "2025-05-16T17:11:49Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32480",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32480.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32480#pullrequestreview-2844686716) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T13:44:38Z"
        }
      ]
    },
    {
      "number": 32479,
      "title": "[27.x] Backports",
      "body": "Backports\r\n- #32070\r\n- #32187\r\n- #32286\r\n- #32439\r\n- #32568",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-13T13:31:40Z",
      "updated_at": "2025-06-09T12:52:37Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32479",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32479.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32479#pullrequestreview-2905089748) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- accomodate -> accommodate [correct spelling of ‚Äúaccommodate‚Äù]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-05-13T13:31:47Z"
        },
        {
          "user": "fanquake",
          "body": "This is failing in the macOS CI. An issue with Boost Process:\r\n```bash\r\n configure:34786: checking whether Boost.Process can be used\r\nconfigure:34817: g++ -std=gnu++11 -std=c++20 -o conftest  -Wno-error=narrowing  -isystem /usr/local/include -DBOOST_MULTI_INDEX_DISABLE_SERIALIZATION  -pthread conftest.cpp  >&5\r\nconftest.cpp:64:9: error: no type named 'opstream' in namespace 'boost::process'\r\n    bp::opstream stdin_stream;\r\n    ~~~~^\r\nconftest.cpp:65:18: error: use of undeclared identifier 'stdout_stream'; did you mean 'stdin_stream'?\r\n    bp::ipstream stdout_stream;\r\n                 ^~~~~~~~~~~~~\r\n                 stdin_stream\r\nconftest.cpp:64:18: note: 'stdin_stream' declared here\r\n    bp::opstream stdin_stream;\r\n                 ^\r\nconftest.cpp:65:17: error: expected ';' after expression\r\n    bp::ipstream stdout_stream;\r\n```",
          "created_at": "2025-05-13T14:02:55Z"
        },
        {
          "user": "fanquake",
          "body": "> This is failing in the macOS CI. An issue with Boost Process:\r\n\r\nLooks this is because Boost Process V1 compat was broken in Boost 1.88.0, https://github.com/boostorg/process/issues/480, which is the version being used in the macOS CI here, and `--enable-external-signer` is passed globally in the CI.",
          "created_at": "2025-05-13T16:54:44Z"
        },
        {
          "user": "fanquake",
          "body": "I've added a commit to drop ` --enable-external-signer` from the global CI config.",
          "created_at": "2025-05-19T12:56:14Z"
        },
        {
          "user": "fanquake",
          "body": "Added a note to the release notes as well.",
          "created_at": "2025-05-21T11:58:34Z"
        },
        {
          "user": "fanquake",
          "body": "That is correct.",
          "created_at": "2025-06-06T14:23:46Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build:\r\n```bash\r\nd178e3421afcc858584bedbda3e3bce85ccc9071aa4fab8b58eda3aad9b4676f  guix-build-1d8856dddfcd/output/aarch64-linux-gnu/SHA256SUMS.part\r\n31064b3b8268e8b8512e120c12d458788a249b733be3578cc73808bfde5a04f4  guix-build-1d8856dddfcd/output/aarch64-linux-gnu/bitcoin-1d8856dddfcd-aarch64-linux-gnu-debug.tar.gz\r\n58d34149465cf68e3cf2c3b6b96ba625ec4df4b5aaeccc48597588b83c4e6ed8  guix-build-1d8856dddfcd/output/aarch64-linux-gnu/bitcoin-1d8856dddfcd-aarch64-linux-gnu.tar.gz\r\n23b8d8759f407086878d909104bc9d86e8f35c39c81de1a7eaf0cceab9c4061e  guix-build-1d8856dddfcd/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n1503ec1aef2683af68d4070c4fd9d5920785ac0dfd24b850375738a5312a0f6d  guix-build-1d8856dddfcd/output/arm-linux-gnueabihf/bitcoin-1d8856dddfcd-arm-linux-gnueabihf-debug.tar.gz\r\n2003a72943c8c1104d6b9e0391e29e838cd684fae3b9b30faa894f80da6c03aa  guix-build-1d8856dddfcd/output/arm-linux-gnueabihf/bitcoin-1d8856dddfcd-arm-linux-gnueabihf.tar.gz\r\n6ea37b6d4043a063a24c773a2682f041c7b6dc1d58df725ad6ac268c9ee403b4  guix-build-1d8856dddfcd/output/arm64-apple-darwin/SHA256SUMS.part\r\n30c8bba72d34859be7aa175601a3fe45c3dd2b0d0977cde70063fbb113017165  guix-build-1d8856dddfcd/output/arm64-apple-darwin/bitcoin-1d8856dddfcd-arm64-apple-darwin-unsigned.tar.gz\r\n3396f77e96e027bdee263608d6b84541189edaa02cae5e6e0e18ae1c2bb44f42  guix-build-1d8856dddfcd/output/arm64-apple-darwin/bitcoin-1d8856dddfcd-arm64-apple-darwin-unsigned.zip\r\n8d006e800c042e4d6a233388cc848c21ea64f264d283df17d197528cd321c4ed  guix-build-1d8856dddfcd/output/arm64-apple-darwin/bitcoin-1d8856dddfcd-arm64-apple-darwin.tar.gz\r\nbacc6282fd85c51d1b537bc1214ad9b4b0b252dba05df6bf281cc43583b55bcd  guix-build-1d8856dddfcd/output/dist-archive/bitcoin-1d8856dddfcd.tar.gz\r\n907cc967ffce96061d3075beddb34a2cbd1066f892f3efa469143501e3b4425e  guix-build-1d8856dddfcd/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nea9586fbd4a55ac923539404a8f78b83ac70f5ec8710a167d83030c6d8b87e81  guix-build-1d8856dddfcd/output/powerpc64-linux-gnu/bitcoin-1d8856dddfcd-powerpc64-linux-gnu-debug.tar.gz\r\nef824279e27db19ec6ed658a94665cbf54787f580b2def3290a33eeec7431a13  guix-build-1d8856dddfcd/output/powerpc64-linux-gnu/bitcoin-1d8856dddfcd-powerpc64-linux-gnu.tar.gz\r\n38a1c3affe90842d2753cd51af30d03729ca701f2e4dbc0d22b8abb23f8ccf94  guix-build-1d8856dddfcd/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n2ba1fe34d255eef472aa74bba09846523902216ceb9799791d21f21e96569ee8  guix-build-1d8856dddfcd/output/powerpc64le-linux-gnu/bitcoin-1d8856dddfcd-powerpc64le-linux-gnu-debug.tar.gz\r\nc9c1379555a8531136ce4c0c66ee4ed38c901ae50ed18056883dd4f966d4414d  guix-build-1d8856dddfcd/output/powerpc64le-linux-gnu/bitcoin-1d8856dddfcd-powerpc64le-linux-gnu.tar.gz\r\n756dc06d97d3fc20fa410388e561de3fa93d2fd94d9114fb74b4227eaa8fccbc  guix-build-1d8856dddfcd/output/riscv64-linux-gnu/SHA256SUMS.part\r\n96cfb2985d5ecb96b93867b1d7e1bbf833af67538e552c7fd211c962e4e1d8e8  guix-build-1d8856dddfcd/output/riscv64-linux-gnu/bitcoin-1d8856dddfcd-riscv64-linux-gnu-debug.tar.gz\r\nc47032969cae8fe910eda753081391caa603764baacad7f9c09c08f1c6c74736  guix-build-1d8856dddfcd/output/riscv64-linux-gnu/bitcoin-1d8856dddfcd-riscv64-linux-gnu.tar.gz\r\n7df9054e4985b19f04369a2a505258598dc21382dc0a1b1d1947fd8a6565589d  guix-build-1d8856dddfcd/output/x86_64-apple-darwin/SHA256SUMS.part\r\n5b7d59824261edbcc5b8da75cb55f730fed05d5c23b3aa71f0efd014210fc562  guix-build-1d8856dddfcd/output/x86_64-apple-darwin/bitcoin-1d8856dddfcd-x86_64-apple-darwin-unsigned.tar.gz\r\nd4527781f45775cd3e3ed22786199eed8617eca3650e13eff3e37063220d914b  guix-build-1d8856dddfcd/output/x86_64-apple-darwin/bitcoin-1d8856dddfcd-x86_64-apple-darwin-unsigned.zip\r\nabba3e53094cd69474a330501d21ff59f0863252b7681ddf56815cb3c1b1ad80  guix-build-1d8856dddfcd/output/x86_64-apple-darwin/bitcoin-1d8856dddfcd-x86_64-apple-darwin.tar.gz\r\n04a70a9c034767f4cacd932914c575c144212440cdc57b2dc0a461d06f6df772  guix-build-1d8856dddfcd/output/x86_64-linux-gnu/SHA256SUMS.part\r\n3f6bf3ea6abb17a01d835140591fc9668df501a12a5e7a0849c66388bd359f55  guix-build-1d8856dddfcd/output/x86_64-linux-gnu/bitcoin-1d8856dddfcd-x86_64-linux-gnu-debug.tar.gz\r\n91cb989ab182c9e320d504c7b42cf59235a02759bec3f8816cbedfa8f9c8a3e7  guix-build-1d8856dddfcd/output/x86_64-linux-gnu/bitcoin-1d8856dddfcd-x86_64-linux-gnu.tar.gz\r\nf4ada77b53d1ae98d602b3dc42180b5e7a2084adf7069c6f3c81351075a6c884  guix-build-1d8856dddfcd/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n4e0e1d6c41e8d256e7139ea0443ab1143302268e155dab5c13ea60924c0c7e43  guix-build-1d8856dddfcd/output/x86_64-w64-mingw32/bitcoin-1d8856dddfcd-win64-debug.zip\r\n39df55dd4dff0ad451615d08f7fa74006ee4286be6691beff5e827446eb5f0bb  guix-build-1d8856dddfcd/output/x86_64-w64-mingw32/bitcoin-1d8856dddfcd-win64-setup-unsigned.exe\r\nc70e31b182af00671e69b63854c2e8ccc3430d654776384269f307f798f17c07  guix-build-1d8856dddfcd/output/x86_64-w64-mingw32/bitcoin-1d8856dddfcd-win64-unsigned.tar.gz\r\ncc6877d136bb2f0814de3ec5b32966a0f286b41db13d0bd77a421df73eb81126  guix-build-1d8856dddfcd/output/x86_64-w64-mingw32/bitcoin-1d8856dddfcd-win64.zip\r\n```",
          "created_at": "2025-06-06T14:39:18Z"
        }
      ]
    },
    {
      "number": 32477,
      "title": "lint: Check for missing trailing newline",
      "body": "A missing trailing newline is harmless, but a bit problematic:\r\n\r\n* `git` shows a warning by default\r\n* After another line is appended, the diff will be verbose and `git blame` will be wrong for the \"untouched\" line.\r\n\r\nFix the problems by just requiring what is already the default, see also https://github.com/bitcoin/bitcoin/blob/663a9cabf811e2fc53102bc6da00d09fc99d1d81/.editorconfig#L9 and https://github.com/bitcoin/bitcoin/blob/663a9cabf811e2fc53102bc6da00d09fc99d1d81/test/lint/test_runner/src/main.rs#L327",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-13T10:07:04Z",
      "updated_at": "2025-05-20T08:52:08Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32477",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32477.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32477#issuecomment-2876944750), [fanquake](https://github.com/bitcoin/bitcoin/pull/32477#pullrequestreview-2853191950) |\n| Concept ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/32477#issuecomment-2876400295), [fjahr](https://github.com/bitcoin/bitcoin/pull/32477#issuecomment-2890980318) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32551](https://github.com/bitcoin/bitcoin/pull/32551) (cmake: Remove `ENABLE_{SSE41,AVX2,X86_SHANI,ARM_SHANI}` from `bitcoin-build-config.h` by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T10:07:07Z"
        },
        {
          "user": "maflcko",
          "body": "This should also catch issues where existing newlines are removed (and make the diff even more verbose): https://github.com/bitcoin/bitcoin/pull/32404#discussion_r2072592239 (cc @l0rinc)",
          "created_at": "2025-05-13T10:33:58Z"
        },
        {
          "user": "laanwj",
          "body": "Concept ACK it makes sense to be consistent on this, it's kind of annoying if commit A adds a newline at the end, B removes it again, C adds it again etc. On the other hand i hope we can trust (especially random contributors) to know how their editors work and not have to explain it.",
          "created_at": "2025-05-13T12:55:05Z"
        },
        {
          "user": "l0rinc",
          "body": "utACK fa9198af55df74b0c19c9125d256ad4df83cf005",
          "created_at": "2025-05-13T15:17:42Z"
        },
        {
          "user": "fjahr",
          "body": "Concept ACK\n\nI agree with the rationale, will test it shortly.",
          "created_at": "2025-05-19T13:09:50Z"
        }
      ]
    },
    {
      "number": 32476,
      "title": "refactor: Remove unused HaveKey and HaveWatchOnly",
      "body": "removes some dead code",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-13T07:46:06Z",
      "updated_at": "2025-05-13T14:35:05Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32476",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32476.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32476#issuecomment-2875734524) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T07:46:08Z"
        },
        {
          "user": "maflcko",
          "body": "(follow-up to https://github.com/bitcoin/bitcoin/pull/32438)",
          "created_at": "2025-05-13T07:47:41Z"
        },
        {
          "user": "Sjors",
          "body": "utACK fabdc5ad06bce8cd3b0e525071d10f616a30bb04",
          "created_at": "2025-05-13T09:32:57Z"
        }
      ]
    },
    {
      "number": 32475,
      "title": "wallet: Use `util::Error` throughout `AddWalletDescriptor` instead of returning `nullptr` for some errors",
      "body": "#32023 changed `AddWalletDescriptor` to return `util::Error`, but did not change all of the failure cases to do so. This may result in some callers continuing when there was actually an error. Unify all of the failure cases to use `util::Error` so that all callers handle `AddWalletDescriptor` errors in the same way.\r\n\r\nThe encapsulated return type is changed from `ScriptPubKeyMan*` to `std::reference_wrapper<DescriptorScriptPubKeyMan>`. This avoids having a value that can be interpreted as a bool, and also removes the need to constantly dynamic_cast the returned value. The only kind of `ScriptPubKeyMan` that can come out of `AddWalletDescriptor` is a `DescriptorScriptPubKeyMan` anyways.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-05-13T01:28:35Z",
      "updated_at": "2025-05-21T13:24:45Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32475",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32475.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32475#pullrequestreview-2854592072), [furszy](https://github.com/bitcoin/bitcoin/pull/32475#pullrequestreview-2855022471), [Sjors](https://github.com/bitcoin/bitcoin/pull/32475#issuecomment-2897669129) |\n| Concept ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32475#pullrequestreview-2854602428) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32475#pullrequestreview-2844660917) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/872](https://github.com/bitcoin-core/gui/pull/872) (Menu action to export a watchonly wallet by achow101)\n* [#32489](https://github.com/bitcoin/bitcoin/pull/32489) (wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet by achow101)\n* [#28333](https://github.com/bitcoin/bitcoin/pull/28333) (wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively by achow101)\n* [#27865](https://github.com/bitcoin/bitcoin/pull/27865) (wallet: Track no-longer-spendable TXOs separately by achow101)\n* [#27286](https://github.com/bitcoin/bitcoin/pull/27286) (wallet: Keep track of the wallet's own transaction outputs in memory by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-13T01:28:38Z"
        },
        {
          "user": "fanquake",
          "body": "```bash\r\n /Users/runner/work/bitcoin/bitcoin/src/wallet/test/wallet_tests.cpp:69:10: error: unused variable 'spk_manager' [-Werror,-Wunused-variable]\r\n    auto spk_manager = *Assert(wallet.AddWalletDescriptor(w_desc, provider, \"\", false));\r\n         ^\r\n1 error generated.\r\n```",
          "created_at": "2025-05-13T08:32:33Z"
        },
        {
          "user": "achow101",
          "body": "CI should be fixed",
          "created_at": "2025-05-13T20:19:24Z"
        },
        {
          "user": "Sjors",
          "body": "utACK 785e1407b0a39fef81a7b25554aab88d4cecd66b",
          "created_at": "2025-05-21T11:54:35Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32486,
      "title": "build: deprecated arg usage in macOS deploy script",
      "body": "`--deep` has been deprecated for at least the last 2 major versions of macos:\n\n> --deep  (DEPRECATED for signing as of macOS 13.0) When signing a bundle. ...\n\nGiven it's deprecated, I'd think that means we shouldn't actually need to use it. Assuming this also means it could be removed at some point, we should probably stop using it regardless. See our usage here:\n\nhttps://github.com/bitcoin/bitcoin/blob/8309a9747a8df96517970841b3648937d05939a3/contrib/macdeploy/macdeployqtplus#L497",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-05-13T17:16:32Z",
      "updated_at": "2025-05-13T17:16:36Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32486",
      "labels": [
        "macOS",
        "Build system",
        "Scripts and tools"
      ]
    },
    {
      "number": 32478,
      "title": "Allow multiple data outputs in `createrawtransaction` and `createpsbt`",
      "body": "### Motivation\n\n> Each key may only appear once, i.e. there can only be one 'data' output, and no address may be duplicated.\n\nhttps://bitcoincore.org/en/doc/29.0.0/rpc/rawtransactions/createrawtransaction/\n\nIf and when https://github.com/bitcoin/bitcoin/pull/32406 gets merged, it will be helpful to use multiple data outputs while creating a transaction.\n\nRelated comment: https://github.com/bitcoin/bitcoin/pull/32406#issuecomment-2875133307\n\n### Possible solution\n\nRemove the check for duplicate data key.\n\nRelevant function:\n\n```C++\nstd::vector<std::pair<CTxDestination, CAmount>> ParseOutputs(const UniValue& outputs)\n{\n    // Duplicate checking\n    std::set<CTxDestination> destinations;\n    std::vector<std::pair<CTxDestination, CAmount>> parsed_outputs;\n    bool has_data{false};\n    for (const std::string& name_ : outputs.getKeys()) {\n        if (name_ == \"data\") {\n            if (has_data) {\n                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, duplicate key: data\");\n            }\n            has_data = true;\n            std::vector<unsigned char> data = ParseHexV(outputs[name_].getValStr(), \"Data\");\n            CTxDestination destination{CNoDestination{CScript() << OP_RETURN << data}};\n            CAmount amount{0};\n            parsed_outputs.emplace_back(destination, amount);\n        } else {\n            CTxDestination destination{DecodeDestination(name_)};\n            CAmount amount{AmountFromValue(outputs[name_])};\n            if (!IsValidDestination(destination)) {\n                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, std::string(\"Invalid Bitcoin address: \") + name_);\n            }\n\n            if (!destinations.insert(destination).second) {\n                throw JSONRPCError(RPC_INVALID_PARAMETER, std::string(\"Invalid parameter, duplicated address: \") + name_);\n            }\n            parsed_outputs.emplace_back(destination, amount);\n        }\n    }\n    return parsed_outputs;\n}\n```\n\nhttps://github.com/bitcoin/bitcoin/blob/663a9cabf811e2fc53102bc6da00d09fc99d1d81/src/rpc/rawtransaction_util.cpp#L100\n\n### Useful Skills\n\n* Compiling Bitcoin Core from source\n* Running the C++ unit tests and the Python functional tests\n\n\n### Guidance for new contributors\n\nWant to work on this issue?\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "open",
      "user": "1440000bytes",
      "created_at": "2025-05-13T10:46:48Z",
      "updated_at": "2025-10-06T06:44:34Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32478",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "> If and when [#32406](https://github.com/bitcoin/bitcoin/pull/32406) gets merged\n\nThe policy change isn't merged, and if it was merged, any wallet or rpc features usually come one release later. So I've removed the \"good first issue\" label and moved the milestone back.",
          "created_at": "2025-05-13T11:00:03Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 13,
    "issues": 2
  }
}