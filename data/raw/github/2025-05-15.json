{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:42:24.621649+00:00",
  "date": "2025-05-15",
  "pull_requests": [
    {
      "number": 32522,
      "title": "util: C++20 `ToIntegral()` Improvement",
      "body": "While reviewing https://github.com/bitcoin/bitcoin/pull/32520, I noticed that the function `ToIntegral()` could be improved:\r\n\r\n* Instead of manually asserting `std::is_integral_v<T>`,  the template can be constrained with the standard `std::integral` for clearer intent.\r\n\r\n* Annotation with `[[nodiscard]]` and `noexcept`. Compilers will warn if the return value is discarded and since `std::from_chars` is guaranteed to throw nothing, declaring the wrapper `noexcept` makes the exception guarantee explicit.\r\n\r\n* With C++23, the integral overloads of `std::from_chars` are `constexpr`, allowing `ToIntegral` to become a `constexpr` function.\r\n\r\nhttps://en.cppreference.com/w/cpp/utility/from_chars",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-05-15T23:51:25Z",
      "updated_at": "2025-08-05T16:53:43Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32522",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32522.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [shahsb](https://github.com/bitcoin/bitcoin/pull/32522#pullrequestreview-2845494857) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T23:51:29Z"
        }
      ]
    },
    {
      "number": 32521,
      "title": "policy: make pathological transactions packed with legacy sigops non-standard",
      "body": "The Consensus Cleanup soft fork proposal includes a limit on the number of legacy signature\r\noperations potentially executed when validating a transaction. If this change is to be implemented\r\nhere and activated by Bitcoin users in the future, we should make transactions that are not valid\r\naccording to the new rules non-standard first because it would otherwise be a trivial DoS to\r\npotentially unupgraded miners after the soft fork activates.\r\n\r\nML post: https://gnusha.org/pi/bitcoindev/49dyqqkf5NqGlGdinp6SELIoxzE_ONh3UIj6-EB8S804Id5yROq-b1uGK8DUru66eIlWuhb5R3nhRRutwuYjemiuOOBS2FQ4KWDnEh0wLuA=@protonmail.com/T/#u",
      "state": "closed",
      "user": "darosior",
      "created_at": "2025-05-15T21:05:26Z",
      "updated_at": "2025-07-27T22:19:50Z",
      "comments": 43,
      "url": "https://github.com/bitcoin/bitcoin/pull/32521",
      "labels": [
        "TX fees and policy"
      ]
    },
    {
      "number": 32520,
      "title": "Remove legacy `Parse(U)Int*`",
      "body": "The legacy int parsing is problematic, because it accepts the `+` sign for unsigned integers. In all cases this is either:\r\n\r\n* Useless, because the `+` sign was already rejected.\r\n* Erroneous and inconsistent, when third party parsers reject it. (C.f. https://github.com/bitcoin/bitcoin/pull/32365)\r\n* Confusing, because the `+` sign is  neither documented, nor can it be assumed to be present.\r\n\r\nFix all issues by removing the legacy int parsing.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-15T20:06:08Z",
      "updated_at": "2025-05-20T16:36:49Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32520",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32520.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/32520#issuecomment-2893615325), [brunoerg](https://github.com/bitcoin/bitcoin/pull/32520#pullrequestreview-2854297782) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32520#pullrequestreview-2845212748), [fjahr](https://github.com/bitcoin/bitcoin/pull/32520#issuecomment-2892383304) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32387](https://github.com/bitcoin/bitcoin/pull/32387) ([DRAFT] ipc: add windows support by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T20:06:11Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nğŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/42316044773</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is due to Python linting errors identified by `ruff`.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-15T20:14:42Z"
        },
        {
          "user": "fjahr",
          "body": "Concept ACK",
          "created_at": "2025-05-19T13:05:18Z"
        },
        {
          "user": "stickies-v",
          "body": "re-ACK 33332829333b589420f8038541d04ec6970f051d",
          "created_at": "2025-05-19T16:00:35Z"
        },
        {
          "user": "fjahr",
          "body": "utACK 33332829333b589420f8038541d04ec6970f051d\r\n\r\nI think I found two leftover mentions of the `ParseInt` in documentation: https://github.com/fjahr/bitcoin/commit/1f2f1a432b0fdb3d84eecc9dc3a2db34d88dc892 I can option a follow-up if you don't want to address it here.",
          "created_at": "2025-05-19T21:56:44Z"
        },
        {
          "user": "maflcko",
          "body": "thx, I pushed a commit similar to yours. (Generally, when it comes to the dev notes, I think it is clear that no one is reading them, because of all the stale references in it. We should probably work on reducing them to only contain the important stuff that is not already checked by the automated linters or not already covered by other docs)",
          "created_at": "2025-05-20T05:05:03Z"
        },
        {
          "user": "stickies-v",
          "body": "re-ACK faf55fc80b",
          "created_at": "2025-05-20T09:21:29Z"
        }
      ]
    },
    {
      "number": 32519,
      "title": "ci: Enable feature_init and wallet_reorgsrestore in valgrind task",
      "body": "The `fork()` isn't needed and in fact makes the forked process not react to signals (like kill or terminate), so just avoid it and run the valgrind process directly in the CI task.\r\n\r\nCan be tested with something like:\r\n\r\n`env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" MAKEJOBS=\"-j$(nproc)\" FILE_ENV=\"./ci/test/00_setup_env_native_valgrind.sh\" ./ci/test_run_all.sh`",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-15T16:42:26Z",
      "updated_at": "2025-05-16T18:22:16Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32519",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32519.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32519#pullrequestreview-2847192390) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T16:42:30Z"
        },
        {
          "user": "maflcko",
          "body": "If someone wants to quickly test this outside the CI system a minimal reproducer would be:\r\n\r\n```\r\nâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n       â”‚ File: /tmp/a.py\r\nâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n   1   â”‚ import subprocess\r\n   2   â”‚ import time\r\n   3   â”‚ \r\n   4   â”‚ process = subprocess.Popen([\"bash\", \"/tmp/a.sh\"])\r\n   5   â”‚ print(\"Wait for the first print to happen ...\")\r\n   6   â”‚ time.sleep(0.1)\r\n   7   â”‚ process.kill()\r\n   8   â”‚ print(f\"Process ended with {process.wait()}. Should not print more!\")\r\nâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n       â”‚ File: /tmp/a.sh\r\nâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n   1   â”‚ exec bash -c 'echo hi1 && sleep 1 && echo hi2 && false'\r\nâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n```\r\n\r\nCommand: `python3 /tmp/a.py`",
          "created_at": "2025-05-16T08:24:29Z"
        }
      ]
    },
    {
      "number": 32517,
      "title": "rpc: add \"ischange: true\" to decoded tx outputs in wallet gettransaction response",
      "body": "This change is motivated by external RBF clients like https://github.com/CardCoins/additive-rbf-batcher/. It saves the user a redundant re-looping of tx outputs, calling `getaddressinfo` on each one, looking for the change output in order to adjust the fee.\r\n\r\nThe field `\"ischange\"` only appears when `gettransaction` is called on a wallet, and is either `true` or not present at all. I chose not to include `ischange: false` because it is confusing to see that on *received* transactions.\r\n\r\nExample of the new field:\r\n\r\n```\r\n    \"vout\": [\r\n      {\r\n        \"value\": 1.00000000,\r\n        \"n\": 0,\r\n        \"scriptPubKey\": {\r\n          \"asm\": \"0 5483235e05c76273b3b50af62519738781aff021\",\r\n          \"desc\": \"addr(bcrt1q2jpjxhs9ca388va4ptmz2xtns7q6lupppkw7wu)#d42g84j6\",\r\n          \"hex\": \"00145483235e05c76273b3b50af62519738781aff021\",\r\n          \"address\": \"bcrt1q2jpjxhs9ca388va4ptmz2xtns7q6lupppkw7wu\",\r\n          \"type\": \"witness_v0_keyhash\"\r\n        }\r\n      },\r\n      {\r\n        \"value\": 198.99859000,\r\n        \"n\": 1,\r\n        \"scriptPubKey\": {\r\n          \"asm\": \"0 870ab1ab58632b05a417d5295f4038500e407592\",\r\n          \"desc\": \"addr(bcrt1qsu9tr26cvv4stfqh65547spc2q8yqavj7fnlju)#tgapemkv\",\r\n          \"hex\": \"0014870ab1ab58632b05a417d5295f4038500e407592\",\r\n          \"address\": \"bcrt1qsu9tr26cvv4stfqh65547spc2q8yqavj7fnlju\",\r\n          \"type\": \"witness_v0_keyhash\"\r\n        },\r\n        \"ischange\": true\r\n      }\r\n    ]\r\n\r\n```",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-05-15T15:40:28Z",
      "updated_at": "2025-11-11T09:21:58Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32517",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32517.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32517#issuecomment-3462765091), [rkrux](https://github.com/bitcoin/bitcoin/pull/32517#pullrequestreview-3410388983), [maflcko](https://github.com/bitcoin/bitcoin/pull/32517#issuecomment-3480077208) |\n| Stale ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32517#issuecomment-2917784928) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31252](https://github.com/bitcoin/bitcoin/pull/31252) (rpc: print P2WSH and P2SH redem Script in getrawtransaction by polespinasa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T15:40:32Z"
        },
        {
          "user": "achow101",
          "body": "ACK f6517df210f5e940d87823c86358976743de2641",
          "created_at": "2025-05-28T22:47:38Z"
        },
        {
          "user": "furszy",
          "body": "ACK [060bb55](https://github.com/bitcoin/bitcoin/pull/32517/commits/060bb55508245776bb6a39c8b7849769ee588d69)",
          "created_at": "2025-10-29T17:19:52Z"
        },
        {
          "user": "maflcko",
          "body": "Sorry for missing the review request earlier.\r\n\r\nreview ACK 060bb55508245776bb6a39c8b7849769ee588d69 ğŸŒ›\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 060bb55508245776bb6a39c8b7849769ee588d69 ğŸŒ›\r\noFaD8aXwgNJESDCDkPUK36fans9bFYO48Z+kJQ23jaQZBYjSlHReFMS0DTWGUZ53/9KXGQYvRo3vNbWJscPFAA==\r\n```\r\n\r\n</details>\r\n\r\n",
          "created_at": "2025-11-03T11:35:24Z"
        },
        {
          "user": "achow101",
          "body": "ACK 060bb55508245776bb6a39c8b7849769ee588d69",
          "created_at": "2025-11-10T16:50:36Z"
        }
      ]
    },
    {
      "number": 32516,
      "title": "test: add MAX_DISCONNECTED_TX_POOL_BYTES, chainlimits coverage",
      "body": "`DisconnectedBlockTransactions::LimitMemoryUsage()` has unit test coverage, but the default value end to end doesn't have coverage.\r\n\r\nThis test adds exercised coverage of memory limiting of the disconnect pool, and some basic behavior sanity checks.\r\n\r\nAnother test added is making sure chainlimits are being respected on reorg, and the expected transactions pruned.\r\n\r\nLastly, fix the existing test case which was using a deficient test via directly inducing reorgs with `invalidateblock`",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-05-15T15:19:48Z",
      "updated_at": "2025-05-29T10:34:00Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32516",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32516.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32516#issuecomment-2915446066), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/32516#pullrequestreview-2877551270) |\n| Stale ACK | [mzumsande](https://github.com/bitcoin/bitcoin/pull/32516#pullrequestreview-2855643647), [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/32516#pullrequestreview-2858551944) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\nPossible typos and grammar issues:\n\n- â€œ# Finally, reorg to empty chain kick everything back into mempoolâ€ -> â€œkicksâ€ [subjectâ€“verb agreement]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-05-15T15:19:55Z"
        },
        {
          "user": "instagibbs",
          "body": "I don't think I'm actually hitting that particular limit, getting weird results when looking closer, draft for now while I look",
          "created_at": "2025-05-15T16:39:19Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nğŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/42311652764</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is due to lint errors identified by `ruff`.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-15T18:51:26Z"
        },
        {
          "user": "maflcko",
          "body": "re-ACK 84aa484d45e2fb3c1149941ef23779e4adb983d9 ğŸš‹\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 84aa484d45e2fb3c1149941ef23779e4adb983d9 ğŸš‹\r\nO4vg4KJB7fyQgaqyIEXZN4vN/M1IJ1RGjEYbRriXHFjjAAucXCr+GECIWTscWQkia3xx30XE6hi6vtHbKfZZDQ==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-05-28T08:31:54Z"
        }
      ]
    },
    {
      "number": 32514,
      "title": "scripted-diff: Remove unused leading newline in RPC docs",
      "body": "It is harmless, but newlines in the beginning read a bit odd (\"nReturns\"). So just require them to not be present.\r\n\r\nThe diff is large, but a trivial scripted-diff.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-15T13:55:32Z",
      "updated_at": "2025-05-19T10:13:52Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32514",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32514.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32514#pullrequestreview-2847195929), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32514#pullrequestreview-2847712472) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30886](https://github.com/bitcoin/bitcoin/pull/30886) (rpc: Add support to populate PSBT input utxos via rpc by instagibbs)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-05-15T13:55:37Z"
        },
        {
          "user": "fanquake",
          "body": "```bash\r\n Run rpc with args ['/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/bin/fuzz', PosixPath('/\r\n\r\nAssertion failed: (error_msg.find(\"trigger_internal_bug\") != std::string::npos), function rpc_fuzz_target, file rpc.cpp, line 389.\r\nError processing input \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/qa-assets/fuzz_corpora/rpc/9cfc6f75197c087f55eb7ea406ef812047989f2b\"\r\n\r\nâš ï¸ Failure generated from target with exit code 1: ['/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/bin/fuzz', PosixPath('/Users/runner/work/bitcoin/bitcoin/ci/scratch/qa-assets/fuzz_corpora/rpc')]\r\n```",
          "created_at": "2025-05-15T14:37:37Z"
        },
        {
          "user": "fanquake",
          "body": "Concept ACK - did you want to fix any more of the [Grammar] here?",
          "created_at": "2025-05-16T10:58:46Z"
        }
      ]
    },
    {
      "number": 32513,
      "title": "ci: remove 3rd party js from windows dll gha job",
      "body": "The windows job uses the external dependency `ilammy/msvc-dev-cmd` which runs javascript. We use this to put various tools on the path such as `MSBuild.exe` and `mt.exe`. We can remove this dependency and use `vswhere.exe` directly to find these tools and create a \"[Developer command prompt](https://github.com/microsoft/vswhere/wiki/Start-Developer-Command-Prompt#using-powershell)\" as someone would on their dev machine.\r\n\r\nWhile in this area of the code, this PR also runs some additional manifest checks on the windows binaries.\r\n\r\nFixes: #32508\r\n\r\n",
      "state": "closed",
      "user": "m3dwards",
      "created_at": "2025-05-15T13:36:46Z",
      "updated_at": "2025-10-08T03:41:22Z",
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/pull/32513",
      "labels": [
        "Windows",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32513.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32513#pullrequestreview-3296059963), [hebasto](https://github.com/bitcoin/bitcoin/pull/32513#pullrequestreview-3310010920) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33562](https://github.com/bitcoin/bitcoin/pull/33562) (DRAFT: add a freebsd job using systemlibs by willcl-ark)\n* [#32672](https://github.com/bitcoin/bitcoin/pull/32672) (ci: update pwsh to use custom shell that fails-fast by m3dwards)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T13:36:49Z"
        },
        {
          "user": "hebasto",
          "body": "Concept ACK.\r\n\r\nThank you for taking this!",
          "created_at": "2025-05-15T13:42:21Z"
        },
        {
          "user": "davidgumberg",
          "body": "It might be better to use a more general solution for setting up VS prompts, this would also work once #32396 is merged.\r\n\r\n```yml\r\n      - name: Set up VS Developer Prompt\r\n        shell: pwsh\r\n        run: |\r\n          $vswherePath = \"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"\r\n          $installationPath = & 'C:\\Program Files (x86)\\Microsoft Visual Studio\\Installer\\vswhere.exe' -latest -property installationPath\r\n          if ($installationPath -and (test-path \"$installationPath\\Common7\\Tools\\vsdevcmd.bat\")) {\r\n            & \"${env:COMSPEC}\" /s /c \"`\"$installationPath\\Common7\\Tools\\vsdevcmd.bat`\" -no_logo && set\" | foreach-object {\r\n              $name, $value = $_ -split '=', 2\r\n              echo \"$name=$value\" >> $env:GITHUB_ENV\r\n            }\r\n          }\r\n```\r\n(https://github.com/davidgumberg/bitcoin/commit/83c53bfb58bf5451dccee753ace1c7464ea4ac5f)\r\n\r\n\r\nThis snippet was mostly taken from this `vswhere` wiki article: https://github.com/microsoft/vswhere/wiki/Start-Developer-Command-Prompt#using-powershell",
          "created_at": "2025-05-16T05:53:01Z"
        },
        {
          "user": "hebasto",
          "body": "> It might be better to use a more general solution for setting up VS prompts, this would also work once #32396 is merged.\r\n\r\n@m3dwards \r\n\r\nCould you please rebase this PR on top of https://github.com/bitcoin/bitcoin/pull/32396?",
          "created_at": "2025-05-16T10:06:43Z"
        },
        {
          "user": "m3dwards",
          "body": "Rebased and taken @davidgumberg's great suggestion.",
          "created_at": "2025-05-20T12:30:56Z"
        },
        {
          "user": "davidgumberg",
          "body": "This approach here should also be applied to replace the `Find mt.exe tool` step in the `Windows, test cross-built` job.",
          "created_at": "2025-05-23T15:05:24Z"
        },
        {
          "user": "m3dwards",
          "body": "@hebasto @davidgumberg I believe all comments have been addressed?",
          "created_at": "2025-05-29T11:19:48Z"
        },
        {
          "user": "m3dwards",
          "body": "> While touching this code, it seems reasonable to also address the other @davidgumberg's [comment](https://github.com/bitcoin/bitcoin/pull/32634#issuecomment-2918081325):\r\n\r\nI don't mind adding that.",
          "created_at": "2025-05-29T11:30:17Z"
        },
        {
          "user": "hodlinator",
          "body": "I suspect checking for manifests will currently fail for bench_bitcoin.exe as it doesn't yet have a manifest. Not sure about other binaries. Wouldn't be against adding missing manifests unless it slows down the builds noticeably.",
          "created_at": "2025-05-29T11:40:41Z"
        },
        {
          "user": "m3dwards",
          "body": "> While touching this code, it seems reasonable to also address the other @davidgumberg's [comment](https://github.com/bitcoin/bitcoin/pull/32634#issuecomment-2918081325):\r\n\r\nAdded",
          "created_at": "2025-06-02T10:23:05Z"
        },
        {
          "user": "hebasto",
          "body": "@m3dwards \r\n\r\nCould you please rebase this PR to refresh the CI?",
          "created_at": "2025-09-16T21:18:46Z"
        },
        {
          "user": "hebasto",
          "body": "For the second commit, you might consider using a YAML anchor:\r\n```diff\r\n--- a/.github/workflows/ci.yml\r\n+++ b/.github/workflows/ci.yml\r\n@@ -211,7 +211,8 @@ jobs:\r\n     steps:\r\n       - *CHECKOUT\r\n \r\n-      - name: Set up VS Developer Prompt\r\n+      - &SET_UP_VS\r\n+        name: Set up VS Developer Prompt\r\n         shell: pwsh -Command \"$PSVersionTable; $PSNativeCommandUseErrorActionPreference = $true; $ErrorActionPreference = 'Stop'; & '{0}'\"\r\n         run: |\r\n           $vswherePath = \"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"\r\n@@ -374,19 +375,14 @@ jobs:\r\n       - name: Run bitcoind.exe\r\n         run: ./bin/bitcoind.exe -version\r\n \r\n-      - name: Find mt.exe tool\r\n-        shell: pwsh\r\n-        run: |\r\n-          $sdk_dir = (Get-ItemProperty 'HKLM:\\SOFTWARE\\Wow6432Node\\Microsoft\\Windows Kits\\Installed Roots' -Name KitsRoot10).KitsRoot10\r\n-          $sdk_latest = (Get-ChildItem \"$sdk_dir\\bin\" -Directory | Where-Object { $_.Name -match '^\\d+\\.\\d+\\.\\d+\\.\\d+$' } | Sort-Object Name -Descending | Select-Object -First 1).Name\r\n-          \"MT_EXE=${sdk_dir}bin\\${sdk_latest}\\x64\\mt.exe\" >> $env:GITHUB_ENV\r\n+      - *SET_UP_VS\r\n \r\n       - name: Get bitcoind manifest\r\n         shell: pwsh\r\n         run: |\r\n-          & $env:MT_EXE -nologo -inputresource:bin\\bitcoind.exe -out:bitcoind.manifest\r\n+          mt.exe -nologo -inputresource:bin\\bitcoind.exe -out:bitcoind.manifest\r\n           Get-Content bitcoind.manifest\r\n-          & $env:MT_EXE -nologo -inputresource:bin\\bitcoind.exe -validate_manifest\r\n+          mt.exe -nologo -inputresource:bin\\bitcoind.exe -validate_manifest\r\n \r\n       - name: Run unit tests\r\n         # Can't use ctest here like other jobs as we don't have a CMake build tree.\r\n```",
          "created_at": "2025-09-22T09:13:55Z"
        },
        {
          "user": "hebasto",
          "body": "> While in this area of the code, this PR also runs some additional manifest checks on the windows binaries.\r\n\r\n> ... there are still two places where `shell: pwsh` is used without your ` -Command \"$PSVersionTable; $PSNativeCommandUseErrorActionPreference = $true; $ErrorActionPreference = 'Stop'; & '{0}'\"` suffix...\r\n\r\nWhile I do agree with the concerns above, it might be better to keep this PR focused on resolving https://github.com/bitcoin/bitcoin/issues/32508.",
          "created_at": "2025-09-22T09:21:26Z"
        },
        {
          "user": "hebasto",
          "body": "On the [master](https://github.com/bitcoin/bitcoin/actions/runs/17921155333/job/50956194860) branch:\r\n```\r\nVSCMD_ARG_HOST_ARCH: x64\r\nVSCMD_ARG_TGT_ARCH: x64\r\n```\r\n\r\nHowever, with this [PR](https://github.com/bitcoin/bitcoin/actions/runs/17807365691/job/50622408408):\r\n```\r\nVSCMD_ARG_HOST_ARCH: x86\r\nVSCMD_ARG_TGT_ARCH: x86\r\n```\r\n",
          "created_at": "2025-09-22T20:59:49Z"
        },
        {
          "user": "m3dwards",
          "body": "> On the [master](https://github.com/bitcoin/bitcoin/actions/runs/17921155333/job/50956194860) branch:\r\n> \r\n> ```\r\n> VSCMD_ARG_HOST_ARCH: x64\r\n> VSCMD_ARG_TGT_ARCH: x64\r\n> ```\r\n> \r\n> However, with this [PR](https://github.com/bitcoin/bitcoin/actions/runs/17807365691/job/50622408408):\r\n> \r\n> ```\r\n> VSCMD_ARG_HOST_ARCH: x86\r\n> VSCMD_ARG_TGT_ARCH: x86\r\n> ```\r\n\r\nWhat a great catch! Sorted it in this [run](https://github.com/m3dwards/bitcoin/actions/runs/18015235679/job/51258366346), will update PR shortly",
          "created_at": "2025-09-25T17:29:24Z"
        },
        {
          "user": "m3dwards",
          "body": "Thanks @davidgumberg!\r\n\r\n@hebasto should have addressed your comments.",
          "created_at": "2025-10-03T10:22:26Z"
        }
      ]
    },
    {
      "number": 32511,
      "title": "refactor: bdb removals",
      "body": "remove dead code",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-15T13:00:32Z",
      "updated_at": "2025-05-17T06:08:04Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32511",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32511.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32511#issuecomment-2885785793), [rkrux](https://github.com/bitcoin/bitcoin/pull/32511#pullrequestreview-2845971700), [achow101](https://github.com/bitcoin/bitcoin/pull/32511#issuecomment-2887602257) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/872](https://github.com/bitcoin-core/gui/pull/872) (gui: Menu action to export a watchonly wallet by achow101)\n* [#32489](https://github.com/bitcoin/bitcoin/pull/32489) (wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet by achow101)\n* [#32475](https://github.com/bitcoin/bitcoin/pull/32475) (wallet: Use `util::Error` throughout `AddWalletDescriptor` instead of returning `nullptr` for some errors by achow101)\n* [#32432](https://github.com/bitcoin/bitcoin/pull/32432) (wallet, rpc: Change `OutputType` items from `string` into compile-time constants `string_view` by w0xlt)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T13:00:36Z"
        },
        {
          "user": "davidgumberg",
          "body": "crACK https://github.com/bitcoin/bitcoin/pull/32511/commits/fafee85358397289aa4c6b799d2603a5d89e83a2",
          "created_at": "2025-05-16T06:39:03Z"
        },
        {
          "user": "maflcko",
          "body": "> The functions in the last 3 commits do look like good helper functions but I don't mind their removal as they are not used besides tests, making it easier to navigate the codebase that I prefer.\r\n> An alternative could be to move some of them under tests directory. But fine with current state of the PR too.\r\n\r\nIt is hard for me to see a use case for the functions, even in tests. The tests only used them to generate dummy values, but those are trivially created inline. Generally, when it comes to providing helper functions for tests, my preference would be to focus on porting the real and user-exposed (wallet) RPCs to similarly-named or similarly-featured helper functions to be used in tests.",
          "created_at": "2025-05-16T09:03:57Z"
        },
        {
          "user": "rkrux",
          "body": "> Generally, when it comes to providing helper functions for tests, my preference would be to focus on porting the real and user-exposed (wallet) RPCs to similarly-named or similarly-featured helper functions to be used in tests.\r\n\r\nInteresting, something like this is done in this PR #32452 for `importprivkey`.",
          "created_at": "2025-05-16T10:48:06Z"
        },
        {
          "user": "maflcko",
          "body": "The pull here only touches C++ code, so I meant to have such helpers in C++ code. The python side can just use the RPCs directly (or use one of the pre-existing helpers)",
          "created_at": "2025-05-16T11:33:18Z"
        },
        {
          "user": "rkrux",
          "body": "Oh yeah, for a second there, I got engrossed in that wrapper/helper function over there and forgot it's in the functional test framework.",
          "created_at": "2025-05-16T13:47:22Z"
        },
        {
          "user": "achow101",
          "body": "ACK fafee85358397289aa4c6b799d2603a5d89e83a2",
          "created_at": "2025-05-16T20:17:01Z"
        }
      ]
    },
    {
      "number": 32510,
      "title": "rfc: only put replaced txs in extra pool",
      "body": "We currently store rejected mempool transactions in the extra pool. This includes (some) policy and consensus rejected transactions.\r\n\r\nIt seems trivial to attack this pool for free with consensus invalid transactions, or almost free with policy violating transactions that are extremely unlikely to ever get mined. This was known at the time it was introduced: https://github.com/bitcoin/bitcoin/pull/9499#discussion_r96489548\r\n\r\nAt the same time the orphanage already handles some cases that were initially dealt with here.\r\n\r\nThis commit simplifies things by only putting replaced transactions in the extra pool, as these represent things that at least previously passed our mempool DoS protections.\r\n\r\nLater on we could introduce similar DoS protection as #31829 does for the orphan pool, and then expand the list of things we store again. Or even revert to the present behavior.\r\n\r\nThis extra pool was introduced by #9499. It started with just adding replaced transactions in commit 93380c5247526e2248248a7d539233ec48d11bdd, added orphans in 7f8c8cab1e537809848088d3bfaa13ecca7ac8cc and then all the other rejected things in 863edb45b9841c3058e883015c7576e6f69e3cc6.\r\n\r\nTODO:\r\n- restore some lost test coverage\r\n- consider bringing some reject reasons back to this pool",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-05-15T12:17:02Z",
      "updated_at": "2025-05-16T06:56:41Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32510",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32510.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32379](https://github.com/bitcoin/bitcoin/pull/32379) (p2p: stop special-casing witness-stripped error for unconfirmed transactions by darosior)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T12:17:05Z"
        },
        {
          "user": "Sjors",
          "body": "cc @0xB10C do you have any stats on what rejected stuff typically ends up in the extra pool?",
          "created_at": "2025-05-15T12:49:30Z"
        },
        {
          "user": "glozow",
          "body": "Agree that a FIFO ring buffer isn't a robust data structure; it's opportunistic as it says on the can. However, I think deleting most things from `vExtraTxnForCompact` because it's trivially DoSable is a bit like giving up on orphan resolution because the orphanage is trivially DoSable... it seems more productive to try to come up with ways to make it less vulnerable to churn. EDIT: yes I realize this isn't deleting the data structure altogether, but it's close.\r\n\r\nI have to imagine that especially with policy changes happening, this vector is useful (yes, in the absence of attackers). If you don't support 1p1c yet, you'll currently be throwing the `TX_RECONSIDERABLE` parent and `TX_MISSING_INPUTS` child in there. Same if you don't support TRUC yet. I think I had a comment somewhere about returning false for `TX_CONSENSUS` errors.\r\n\r\n@0xB10C was collecting data on how often we use this for compact block relay reconstruction I think? Correct me if I'm wrong and it's actually useless 100% of the time. Still, then I'd take that as motivation to add smarter protections.",
          "created_at": "2025-05-15T13:01:16Z"
        },
        {
          "user": "Sjors",
          "body": "Just to add another thought here: it seems that recently fee bumps were a big source of failed compact block propagation. By restricting the extra pool to just those, and perhaps expanding its default size, we might get more value of it, with less DoS downside. \r\n\r\nThat said, I don't know what percentage of that fee bump traffic was due to our not supporting `-mempoolfullrbf`.",
          "created_at": "2025-05-15T15:12:32Z"
        },
        {
          "user": "szarka",
          "body": "> I have to imagine that especially with policy changes happening, this vector is useful (yes, in the absence of attackers). If you don't support 1p1c yet, you'll currently be throwing the `TX_RECONSIDERABLE` parent and `TX_MISSING_INPUTS` child in there. Same if you don't support TRUC yet. I think I had a comment somewhere about returning false for `TX_CONSENSUS` errors.\r\n> \r\n> @0xB10C was collecting data on how often we use this for compact block relay reconstruction I think? Correct me if I'm wrong and it's actually useless 100% of the time. Still, then I'd take that as motivation to add smarter protections.\r\n\r\nGiven the concerns expressed by many recently about \"filtering\" slowing down block propagation, this PR sounds like a step backward to me. I am always interested in seeing B10C's research, of course, if it exists. But FWIW here are the stats from the most recent block (896843, which doesn't look especially spammy) on a Knots node (same logic for this functionality, AFAIK) with `blockreconstructionextratxn=10000` and moderately-aggressive filtering:\r\n\r\n```\r\n2025-05-15T15:20:14Z [cmpctblock] Successfully reconstructed block 000000000000000000021ff7cef215cf12815880bf031fdb44d14636fd7a1272 with 1 txn prefilled, 3594 txn from mempool (incl at least 87 from extra pool) and 32 txn requested\r\n```\r\n\r\nSeems like including things that are rejected for policy reasons is useful.",
          "created_at": "2025-05-15T15:26:48Z"
        },
        {
          "user": "Sjors",
          "body": "@szarka the extra pool is capped at 100kb regardless of the number of transactions, so any filtered content over 100kb would overflow it.\r\n\r\nIt's (unfortunately) unclear from your log example what these 87 transactions were. If they were all RBF replacements, then this PR wouldn't hurt that. If they're all inscriptions, then it would.\r\n\r\n> Seems like including things that are rejected for policy reasons is useful.\r\n\r\nIn principle yes. The problem is that when we decide a transaction is invalid for _policy_ reasons, we don't recheck it against _consensus_. We don't know the difference. So we hold on to consensus invalid transactions, which means anyone can connect to your node, feed it 100kb worth or garbage and then disconnect.\r\n\r\nThings would be different if we _did_ check whether something is only policy invalid, but that would eat extra CPU cycles.\r\n\r\n@glozow wrote:\r\n\r\n> is a bit like giving up on orphan resolution because the orphanage is trivially DoSable... it seems more productive to try to come up with ways to make it less vulnerable to churn\r\n\r\nYou're working on that for orphan resolution, but nobody is currently working on it for the extra pool. If we can apply the same mechanism, that would probably be a better solution. And perhaps that's really easy.\r\n\r\nIf we can't apply that here, then it seems better to allocate the 100kb towards the most effective and hardest to DoS thing, e.g. by restricting it to fee bumps.\r\n\r\nIn any case I'd love to see @0xB10C's data. I'll keep this in draft.",
          "created_at": "2025-05-15T16:02:54Z"
        },
        {
          "user": "szarka",
          "body": "> In any case I'd love to see @0xB10C's data. I'll keep this in draft.\r\n\r\nI think maybe [this _Delving_ post](https://delvingbitcoin.org/t/stats-on-compact-block-reconstructions/1052) is what @glozow was referring to?\r\n",
          "created_at": "2025-05-15T16:07:31Z"
        },
        {
          "user": "Sjors",
          "body": "Thanks everyone for their feedback. My current thinking is that there's two parallel ways forward:\r\n\r\n1. Create a separate pool just for fee bumps, move those out of the extra pool\r\n2. Harden the extra pool using the mechanism introduced in #31829\r\n\r\nFee bumps themselves are more DoS resistant than the other categories in extra pool. By moving them to their own structure (1), they can't be overcrowded by the other stuff.\r\n\r\nIn that case there's no need to limit the extra pool; it's small, best case it helps, worst case it's useless. By hardening it (2), we potentially keep it useful even in that worst case.\r\n\r\nAdditionally perhaps we should improve compact block reconstruction logging to include the rejection categories (e.g. by tracking the reason in `vExtraTxnForCompact`).",
          "created_at": "2025-05-16T06:54:39Z"
        }
      ]
    },
    {
      "number": 32509,
      "title": "qa: feature_framework_startup_failures.py fixes & improvements (#30660 follow-up)",
      "body": "* Handle multiple `--tmpdir` args properly.\r\n* Handle `--timeout-factor=0` properly (fixes #32506).\r\n* Improve readability of expected error message (`assert_raises_message()`).\r\n* Make suppressed error output less confusing (`wait_for_rpc_connection()`).",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-05-15T11:58:44Z",
      "updated_at": "2025-05-27T21:44:44Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32509",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32509.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/32509#issuecomment-2886527364), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/32509#issuecomment-2886789925), [janb84](https://github.com/bitcoin/bitcoin/pull/32509#pullrequestreview-2857005161), [achow101](https://github.com/bitcoin/bitcoin/pull/32509#issuecomment-2914136270) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T11:58:48Z"
        },
        {
          "user": "yuvicc",
          "body": "Tested ACK c47f634718d4248fd2a30e51a57944f89da72a64\r\n\r\n```\r\n./build/test/functional/test_runner.py feature_framework_startup_failures.py --timeout-factor=0\r\nTemporary test directory at /var/folders/jb/wlbrz0t95vl58wzxjt75wqmh0000gn/T/test_runner_â‚¿_ğŸƒ_20250516_012813\r\nRemaining jobs: [feature_framework_startup_failures.py]\r\n1/1 - feature_framework_startup_failures.py passed, Duration: 5 s\r\n\r\nTEST                                  | STATUS    | DURATION\r\n\r\nfeature_framework_startup_failures.py | âœ“ Passed  | 5 s\r\n\r\nALL                                   | âœ“ Passed  | 5 s (accumulated) \r\nRuntime: 5 s\r\n```",
          "created_at": "2025-05-15T19:56:42Z"
        },
        {
          "user": "yuvicc",
          "body": "re-ACK bf950c4544d3a8478b46faf0b93c0dc647274c9b",
          "created_at": "2025-05-16T12:02:47Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "Code review and tested ACK bf950c45\r\n\r\nThis PR makes the test easier to read and also rightly fixes the issue in the OP.",
          "created_at": "2025-05-16T13:51:43Z"
        },
        {
          "user": "achow101",
          "body": "ACK bf950c4544d3a8478b46faf0b93c0dc647274c9b",
          "created_at": "2025-05-27T21:39:24Z"
        }
      ]
    },
    {
      "number": 32507,
      "title": "ci: Exclude failing wallet_reorgsrestore.py from valgrind task for now",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32493\r\n\r\nFor some reason terminate or kill do not work inside the CI system under valgrind.\r\n\r\nSo disable the test for now, until a solution is found.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-15T10:59:47Z",
      "updated_at": "2025-05-15T15:32:20Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32507",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32507.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32507#pullrequestreview-2843310006), [mzumsande](https://github.com/bitcoin/bitcoin/pull/32507#pullrequestreview-2843925049) |\n\nIf your review is incorrectly listed, please react with ğŸ‘ to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-15T10:59:51Z"
        },
        {
          "user": "maflcko",
          "body": "> What if instead of excluding the entire test file, we only exclude the specific failing test case?\r\n\r\nYour diff would exclude the test case for all CI runs (even CI runs not using valgrind). I think longer term it would be better to just fix it.",
          "created_at": "2025-05-15T14:38:51Z"
        },
        {
          "user": "furszy",
          "body": "> > What if instead of excluding the entire test file, we only exclude the specific failing test case?\r\n> \r\n> Your diff would exclude the test case for all CI runs (even CI runs not using valgrind).\r\n\r\nThat would be easy to fix by just providing another environment variable for Valgrind runs. But np, it was just an idea to keep the test running while the issue is being investigated.\r\n\r\n> I think longer term it would be better to just fix it.\r\n\r\nHard to disagree.",
          "created_at": "2025-05-15T15:06:05Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32518,
      "title": ".",
      "body": "### Motivation\n\nf\n\n### Possible solution\n\n_No response_\n\n### Useful Skills\n\n* Compiling Bitcoin Core from source\n* Running the C++ unit tests and the Python functional tests\n* ...\n\n\n### Guidance for new contributors\n\nWant to work on this issue?\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "closed",
      "user": "fatmirsul1234",
      "created_at": "2025-05-15T15:54:35Z",
      "updated_at": "2025-05-15T15:55:58Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32518",
      "labels": []
    },
    {
      "number": 32515,
      "title": "test: failure in `mining_basic.py` AssertionError: not(4.656542373906924E-10 == 4.656542373906925E-10)",
      "body": "x86_64 Alpine Linux\nmaster @ c779ee3a4044df3a263394bbb8b104aeeaa7c727\n```bash\n/bitcoin # build/test/functional/test_runner.py mining_basic.py --valgrind --timeout-factor=0\nTemporary test directory at /tmp/test_runner_â‚¿_ğŸƒ_20250515_142647\nRemaining jobs: [mining_basic.py]\n1/1 - mining_basic.py failed, Duration: 58 s                                                                        \n\nstdout:\n2025-05-15T14:26:48.007000Z TestFramework (INFO): PRNG seed is: 1679234749093477821\n2025-05-15T14:26:48.008000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â‚¿_ğŸƒ_20250515_142647/mining_basic_0\n2025-05-15T14:26:57.860000Z TestFramework (INFO): Create some old blocks\n2025-05-15T14:27:19.347000Z TestFramework (INFO): test blockversion\n2025-05-15T14:27:45.954000Z TestFramework (INFO): getmininginfo\n2025-05-15T14:27:46.014000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/bitcoin/test/functional/test_framework/test_framework.py\", line 183, in main\n    self.run_test()\n  File \"/bitcoin/build/test/functional/mining_basic.py\", line 392, in run_test\n    assert_equal(mining_info['difficulty'], Decimal('4.656542373906925E-10'))\n  File \"/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(4.656542373906924E-10 == 4.656542373906925E-10)\n2025-05-15T14:27:46.067000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-05-15T14:27:46.067000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_â‚¿_ğŸƒ_20250515_142647/mining_basic_0\n2025-05-15T14:27:46.067000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_â‚¿_ğŸƒ_20250515_142647/mining_basic_0/test_framework.log\n2025-05-15T14:27:46.067000Z TestFramework (ERROR): \n2025-05-15T14:27:46.067000Z TestFramework (ERROR): Hint: Call /bitcoin/test/functional/combine_logs.py '/tmp/test_runner_â‚¿_ğŸƒ_20250515_142647/mining_basic_0' to consolidate all logs\n2025-05-15T14:27:46.067000Z TestFramework (ERROR): \n2025-05-15T14:27:46.067000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-05-15T14:27:46.068000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-05-15T14:27:46.068000Z TestFramework (ERROR):\n```\n\nVerbose logs are available here: https://gist.github.com/fanquake/e2f2e4eba103d883e23801b154af45f2",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-15T14:33:07Z",
      "updated_at": "2025-06-20T23:30:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32515",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "What are the exact steps to reproduce? It passes for me: https://cirrus-ci.com/task/6221957416353792?logs=functional_test#L92",
          "created_at": "2025-05-15T17:23:52Z"
        },
        {
          "user": "maflcko",
          "body": "Oh, you are saying this only happens under valgrind?",
          "created_at": "2025-05-15T17:24:47Z"
        },
        {
          "user": "fanquake",
          "body": "Yea. Have only seen it under Valgrind.",
          "created_at": "2025-05-16T08:04:08Z"
        },
        {
          "user": "Sjors",
          "body": "#32725 should fix this",
          "created_at": "2025-06-11T09:41:31Z"
        }
      ]
    },
    {
      "number": 32512,
      "title": "build: Alpine portability issues",
      "body": "Currently, when building on Alpine Linux, the build might fail in the following ways:\n\nx86_64 && aarch64\n\n```bash\n/bitcoin/depends/work/build/x86_64-pc-linux-musl/native_capnp/1.1.0-725f3670538/src/kj/mutex.c++:37:10: fatal error: linux/futex.h: No such file or directory\n   37 | #include <linux/futex.h>\n      |          ^~~~~~~~~~~~~~~\ncompilation terminated.\n```\n```bash\n/bitcoin/depends/work/build/x86_64-pc-linux-musl/qt/6.7.3-be399392c6d/qtbase/src/corelib/io/qfilesystemengine_unix.cpp:64:12: fatal error: linux/fs.h: No such file or directory\n   64 | #  include <linux/fs.h>\n      |            ^~~~~~~~~~~~\ncompilation terminated.\n```\n\n```bash\n/bitcoin/src/common/netif.cpp:16:10: fatal error: linux/rtnetlink.h: No such file or directory\n   16 | #include <linux/rtnetlink.h>\n      |          ^~~~~~~~~~~~~~~~~~~\n```\n\naarch64\n```bash\n/bitcoin/src/crypto/sha256.cpp:19:10: fatal error: asm/hwcap.h: No such file or directory\n   19 | #include <asm/hwcap.h>\n      |          ^~~~~~~~~~~~~\ncompilation terminated.\n```\n\nThese are all due to missing`linux-headers` (which are not installed by default). They can be installed with `apk add linux-headers`.\n\nWe don't currently have any Alpine build docs, so they could be added, with a note about needing the headers being required, or, the code could be changed.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-15T13:07:36Z",
      "updated_at": "2025-08-01T13:42:49Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32512",
      "labels": [
        "Build system"
      ]
    },
    {
      "number": 32508,
      "title": "ci: remove third-party javascript usage from Windows CI",
      "body": "See:\n\nhttps://github.com/bitcoin/bitcoin/blob/c779ee3a4044df3a263394bbb8b104aeeaa7c727/.github/workflows/ci.yml#L189-L190\n\nWe shouldn't need to use a third-party repo, that runs some Javascript, to configure a command prompt. The comment in our code also doesn't explain why this is necessary. We should be able to drop this dependency.\n\nAlso discussed in #32396.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-05-15T11:09:12Z",
      "updated_at": "2025-10-12T09:05:55Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32508",
      "labels": [
        "Windows",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "Maybe keep this issue open for visibility until the `ilammy/msvc-dev-cmd` action is actually removed from the repository whitelist?\n\nThis may, in turn, require backporting some commits from bitcoin/bitcoin#32513 and waiting until for contributors to rebase their PRs.",
          "created_at": "2025-10-10T11:53:50Z"
        }
      ]
    },
    {
      "number": 32506,
      "title": "test: feature_framework_startup_failures.py fails with `--timeout-factor=0`",
      "body": "master @ c779ee3a4044df3a263394bbb8b104aeeaa7c727\n```bash\n./build/test/functional/test_runner.py feature_framework_startup_failures.py --timeout-factor=0\nTemporary test directory at /tmp/test_runner_â‚¿_ğŸƒ_20250515_101739\nRemaining jobs: [feature_framework_startup_failures.py]\n1/1 - feature_framework_startup_failures.py failed, Duration: 1 s\n\nstdout:\n2025-05-15T10:17:39.659000Z TestFramework (INFO): PRNG seed is: 8331063254222734517\n2025-05-15T10:17:39.660000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â‚¿_ğŸƒ_20250515_101739/feature_framework_startup_failures_0\n2025-05-15T10:17:40.344000Z TestFramework (INFO): Verifying _verify_startup_failure() functionality (self-check).\n2025-05-15T10:17:40.346000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/root/bitcoin/test/functional/test_framework/util.py\", line 100, in assert_raises_message\n    fun(*args, **kwds)\n    ~~~^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/build/test/functional/feature_framework_startup_failures.py\", line 52, in _verify_startup_failure\n    output = subprocess.run(args, timeout=60 * self.options.timeout_factor,\n             ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                            stdout=subprocess.PIPE, stderr=subprocess.STDOUT).stdout.decode(\"utf-8\")\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib64/python3.13/subprocess.py\", line 556, in run\n    stdout, stderr = process.communicate(input, timeout=timeout)\n                     ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib64/python3.13/subprocess.py\", line 1222, in communicate\n    stdout, stderr = self._communicate(input, endtime, timeout)\n                     ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib64/python3.13/subprocess.py\", line 2125, in _communicate\n    ready = selector.select(timeout)\n  File \"/usr/lib64/python3.13/selectors.py\", line 398, in select\n    fd_event_list = self._selector.poll(timeout)\nOverflowError: timeout is too large\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 183, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/build/test/functional/feature_framework_startup_failures.py\", line 74, in run_test\n    assert_raises_message(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        AssertionError,\n        ^^^^^^^^^^^^^^^\n    ...<6 lines>...\n        \"NonExistentError\",\n        ^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/root/bitcoin/test/functional/test_framework/util.py\", line 108, in assert_raises_message\n    raise AssertionError(\"Unexpected exception raised: \" + type(e).__name__)\nAssertionError: Unexpected exception raised: OverflowError\n2025-05-15T10:17:40.400000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-05-15T10:17:40.400000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_â‚¿_ğŸƒ_20250515_101739/feature_framework_startup_failures_0\n2025-05-15T10:17:40.400000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_â‚¿_ğŸƒ_20250515_101739/feature_framework_startup_failures_0/test_framework.log\n2025-05-15T10:17:40.400000Z TestFramework (ERROR): \n2025-05-15T10:17:40.400000Z TestFramework (ERROR): Hint: Call /root/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_â‚¿_ğŸƒ_20250515_101739/feature_framework_startup_failures_0' to consolidate all logs\n2025-05-15T10:17:40.400000Z TestFramework (ERROR): \n2025-05-15T10:17:40.400000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-05-15T10:17:40.401000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-05-15T10:17:40.401000Z TestFramework (ERROR): \n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-15T10:19:02Z",
      "updated_at": "2025-05-27T21:44:43Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32506",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "cc @hodlinator ",
          "created_at": "2025-05-15T10:19:13Z"
        },
        {
          "user": "hodlinator",
          "body": "Thanks for finding & reporting. I've been preparing a follow-up PR for the one that introduced the test (#30660) last week, will add a commit to resolve this issue there.",
          "created_at": "2025-05-15T10:44:13Z"
        },
        {
          "user": "hodlinator",
          "body": "Proposed fix in #32509.",
          "created_at": "2025-05-15T12:01:04Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 12,
    "issues": 5
  }
}