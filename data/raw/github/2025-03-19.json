{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:25:59.084390+00:00",
  "date": "2025-03-19",
  "pull_requests": [
    {
      "number": 32096,
      "title": "Move some tests and documentation from testnet3 to testnet4",
      "body": "In preparation for dropping testnet3 entirely in #31974 this PR migrates a few things to testnet4:\r\n\r\n* the ZMQ examples\r\n* developer docs\r\n* various unit tests\r\n* the snapshot magic byte check in `feature_assumeutxo.py`\r\n\r\nIt drops `testnet3` from `MAGIC_BYTES` in the test framework, since no test uses it.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-03-19T09:14:36Z",
      "updated_at": "2025-04-02T08:01:41Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/pull/32096",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32096.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/32096#issuecomment-2754230919), [maflcko](https://github.com/bitcoin/bitcoin/pull/32096#issuecomment-2754396141), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32096#issuecomment-2754488161) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32117](https://github.com/bitcoin/bitcoin/pull/32117) (qa: make feature_assumeutxo.py test more robust by darosior)\n* [#31974](https://github.com/bitcoin/bitcoin/pull/31974) (Drop testnet3 by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-03-19T09:14:39Z"
        },
        {
          "user": "Sjors",
          "body": "I'm  unsure if I got the `argsman_tests` changes right.\r\n\r\nAn alternative approach could be to move (some of) these tests to signet, which is less likely to go away than testnet4.",
          "created_at": "2025-03-19T09:14:59Z"
        },
        {
          "user": "fjahr",
          "body": "utACK 2906b183169bc78b37449a818717249c2d1cb7a1\r\n\r\nReviewed the code and changes look good to me.",
          "created_at": "2025-03-24T16:13:56Z"
        },
        {
          "user": "Sjors",
          "body": "Rebased (just in case), added testnet4 magic bytes coverage to `feature_assumeutxo.py` (new commit), removed the duplication in `argsman_tests.cpp`.",
          "created_at": "2025-03-25T09:01:53Z"
        },
        {
          "user": "Sjors",
          "body": "Not sure what to make of the Win64 fuzz failure:\r\n\r\n```\r\nAssertion failed: DecodeBase64PSBT(psbt, random_string, error) == error.empty(), file\r\n```\r\n\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/14055561051/job/39354164966?pr=32096#step:14:373\r\n\r\ncc @maflcko \r\n\r\n---\r\n\r\nUpdate, appears unrelated, see #32135.",
          "created_at": "2025-03-25T12:49:07Z"
        },
        {
          "user": "hodlinator",
          "body": "> Not sure what to make of the Win64 fuzz failure:\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/30746#discussion_r2011712656",
          "created_at": "2025-03-25T12:51:37Z"
        },
        {
          "user": "fjahr",
          "body": "re-ACK 2ee474d33f3340084a458e7348f5358fcaea8911",
          "created_at": "2025-03-25T13:25:35Z"
        },
        {
          "user": "Sjors",
          "body": "e1862a0b5d3ff46d507ff8cd3426292ff587328d -> 4281e3603a2eadefc8535b863128a05cf3a5a75f: reduced the scope of ZMQ changes, no longer touching the ports, see https://github.com/bitcoin/bitcoin/pull/32096#discussion_r2013761919",
          "created_at": "2025-03-26T11:30:54Z"
        },
        {
          "user": "fjahr",
          "body": "re-ACK aa7a898c236eb519aaf546afee2b9c2b6dfdea1f\r\n\r\nJust removed the change of zmq ports.",
          "created_at": "2025-03-26T12:25:25Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK aa7a898c236eb519aaf546afee2b9c2b6dfdea1f ðŸ”Š\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: lgtm ACK aa7a898c236eb519aaf546afee2b9c2b6dfdea1f ðŸ”Š\r\nLZn2toUp80K0lEVpMDDXYzRUmbBeK6deAYV8ud1Go6oIr7dmDGyx2EK5QuBm0m4vVmxjMrUHDo+OnctMeTx2Aw==\r\n```\r\n\r\n</details>\r\n\r\n",
          "created_at": "2025-03-26T13:25:51Z"
        },
        {
          "user": "hodlinator",
          "body": "re-ACK aa7a898c236eb519aaf546afee2b9c2b6dfdea1f",
          "created_at": "2025-03-26T13:55:02Z"
        }
      ]
    },
    {
      "number": 32095,
      "title": "doc: clarify that testnet min-difficulty is not optional",
      "body": "When 20 minutes have gone by on testnet3 or testnet4, the next block `MUST` have difficulty 1. I've seen people be confused about this several times now in recent months. It doesn't help that the code comment is wrong. So fixing that.\r\n\r\nThe reason is that `nBits` must match exactly:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/e568c1dd134e0318c46113cb7dfc23b40e2829e8/src/validation.cpp#L4212-L4215\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-03-19T08:01:02Z",
      "updated_at": "2025-03-24T21:40:10Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32095",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32095.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/32095#issuecomment-2737476437), [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/32095#issuecomment-2745981739) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-19T08:01:04Z"
        },
        {
          "user": "Sjors",
          "body": "Note that there's a recent proposal to drop this rule entirely: https://gnusha.org/pi/bitcoindev/hU75DurC5XToqizyA-vOKmVtmzd3uZGDKOyXuE_ogE6eQ8tPCrvX__S08fG_nrW5CjH6IUx7EPrq8KwM5KFy9ltbFBJZQCHR2ThoimRbMqU=@protonmail.com/",
          "created_at": "2025-03-19T08:06:29Z"
        },
        {
          "user": "fjahr",
          "body": "ACK 288481aabd77b90876489e39403b6eab9d4ae74d",
          "created_at": "2025-03-19T17:24:44Z"
        },
        {
          "user": "kevkevinpal",
          "body": "ACK [288481a](https://github.com/bitcoin/bitcoin/pull/32095/commits/288481aabd77b90876489e39403b6eab9d4ae74d)",
          "created_at": "2025-03-23T02:46:45Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32098,
      "title": "Incorrect balance when dealing with coinbase UTXOs that will be mature on `h + 1`",
      "body": "Bitcoin Core is reporting the wrong balance when dealing with coinbase UTXOs that will become mature on the next block.\n\nScenario:\nOn regtest, I mine 101 blocks. Since coinbase maturity height is 100 blocks, I have 1 mature UTXO (50 BTC) at height 101. However, at height 102, another coinbase UTXO (50 BTC) will have matured and will be accepted by the mempool as an input to a transaction. Therefore, my _**spendable**_ balance at height 102 will be 50+50 BTC (2 UTXOs available for selection).\n\nCurrently, only a the first coin (50 BTC) is available for selection.\n\nI first discovered this when doing (manual) differential testing between BDK and Bitcoin Core (see https://github.com/bitcoindevkit/bdk/issues/1878).",
      "state": "closed",
      "user": "luisschwab",
      "created_at": "2025-03-19T18:58:01Z",
      "updated_at": "2025-07-23T01:54:01Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/32098",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "luisschwab",
          "body": "Apparently this is a simple fix:\n\n```diff\nscr/wallet/wallet.cpp\n\nint CWallet::GetTxBlocksToMaturity(const CWalletTx& wtx) const\n{\n    AssertLockHeld(cs_wallet);\n\n    if (!wtx.IsCoinBase()) {\n        return 0;\n    }\n    int chain_depth = GetTxDepthInMainChain(wtx);\n    assert(chain_depth >= 0); // coinbase tx should not be conflicted\n-   return std::max(0, (COINBASE_MATURITY+1) - chain_depth);\n+   return std::max(0, COINBASE_MATURITY - chain_depth); \n}\n```",
          "created_at": "2025-03-19T19:20:37Z"
        },
        {
          "user": "maflcko",
          "body": "I presume this was last touched in commit bf3a20a6e8cafdf723ef101af078df303ea06fec, which explains that there may be a race condition where the transaction is rejected, because the 100th block has not been relayed yet to the peer when the transaction is sent.",
          "created_at": "2025-03-19T19:26:46Z"
        },
        {
          "user": "maflcko",
          "body": "So I guess this can be closed, or the code could be updated with the rationale as docs?",
          "created_at": "2025-03-20T15:19:24Z"
        },
        {
          "user": "luisschwab",
          "body": "Shouldn't these be separate concerns (transaction building and transaction broadcasting)?",
          "created_at": "2025-03-20T15:54:58Z"
        },
        {
          "user": "maflcko",
          "body": "The wallet generally is a bit conservative when it comes to creating transactions that may not propagate well. (For example, it doesn't yet offer fullrbf bumps). Of course, anyone is free to manually create the wanted transaction early and propagate it manually.",
          "created_at": "2025-03-20T16:13:50Z"
        },
        {
          "user": "luisschwab",
          "body": "I understand that, but I think the wallet should strive for correctness, given we're dealing with coinbase UTXOs which only knowledgeable people have access to (miners and developers). This is an edge case regular users won't ever experience outside of test networks, myself included.",
          "created_at": "2025-03-20T17:17:39Z"
        },
        {
          "user": "sipa",
          "body": "@luisschwab Well it's not incorrect to be conservative. And if regular users don't experience it, why does it matter at all?",
          "created_at": "2025-03-20T17:23:52Z"
        },
        {
          "user": "luisschwab",
          "body": "I don't think not being able to select an otherwise spendable UTXO is correct.",
          "created_at": "2025-03-20T17:33:13Z"
        },
        {
          "user": "instagibbs",
          "body": "re:propagation, do we not have the same race condition on most wallet made transactions due to the anti fee sniping logic?",
          "created_at": "2025-03-25T16:26:52Z"
        },
        {
          "user": "luisschwab",
          "body": "Closing as it failed to reach consensus.",
          "created_at": "2025-07-23T01:54:01Z"
        }
      ]
    },
    {
      "number": 32097,
      "title": "Linux download needs installation instructions",
      "body": "Windows has an installer, macOS has the usual drag-me-to-application logic that most GUI users will be familiar with. But for Linux we just give people are bunch of binaries along with a README that lacks any installation instructions.\n\nWorse, it turns out the binaries don't work out of the box on a vanilla Ubuntu system. That's not just because of Wayland, which we don't support yet. Even on X11 it will miss certain libraries.\n\nhttps://www.reddit.com/r/BitcoinBeginners/comments/14m8f9q/missing_required_library_to_run_core_on_ubuntu/\n\nhttps://bitcoin.stackexchange.com/questions/122646/libxcb-xinerama0-library-required-by-bitcoin-qt\n\nThe easiest fix would be to point to https://bitcoin.org/en/full-node#other-linux-gui which at least gives some general instructions.\n\nBetter I think would be to add instructions for the most popular desktop distros.\n\nI think it's fine to assume that daemon users can figure it out for themselves.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-19T16:34:09Z",
      "updated_at": "2026-01-02T15:24:58Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/32097",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "hodlinator",
          "body": "> https://bitcoin.stackexchange.com/questions/122646/libxcb-xinerama0-library-required-by-bitcoin-qt\n\n(This seems to have led to #30061 with the same title).",
          "created_at": "2025-03-19T21:07:16Z"
        },
        {
          "user": "Sjors",
          "body": "That's a useful reference. But the concern there is about security, i.e. the dependency on operating system libraries.\n\nHere I'm just worried about the practically of installing. As linux desktop gets more user friendly, I expect fewer people to know how to figure out which libraries they're missing and how to install them.",
          "created_at": "2025-03-20T09:22:39Z"
        },
        {
          "user": "maflcko",
          "body": "I think this was fixed and can be closed?",
          "created_at": "2025-08-26T10:15:29Z"
        },
        {
          "user": "fanquake",
          "body": "Yea I'm not sure. For master, the binaries still have a `libxcb-cursor` dependency, that may need to be installed. It's not clear if #33238 will work for `29.x`, so that will still have a `libxcb-xinerama` dependency, that may need to be installed, (same for `28.x`). There's a note about `libxcb-cursor0` in build-unix, but that isn't shipped with release binaries, or likely read by anyone who isn't compiling from source, so it seems like any of this could benefit from additional documentation.\n\nThoughts @hebasto?",
          "created_at": "2025-08-26T17:31:51Z"
        },
        {
          "user": "maflcko",
          "body": "> There's a note about `libxcb-cursor0` in build-unix, but that isn't shipped with release binaries, or likely read by anyone who isn't compiling from source, so it seems like any of this could benefit from additional documentation.\n\nI see, so it seems a bit related to https://github.com/bitcoin/bitcoin/issues/32565",
          "created_at": "2025-08-26T17:35:31Z"
        },
        {
          "user": "fanquake",
          "body": "Added this to `30.0`, but this seems to need addressing for all release branches, in some way.",
          "created_at": "2025-09-01T15:05:38Z"
        },
        {
          "user": "BenWestgate",
          "body": "If we added to the tarball:\n```\n./share/applications/bitcoin-qt.desktop\n./share/icons/bitcoin128.png\n./share/mime/packages/x-scheme-handler-bitcoin.xml\n./share/doc/bitcoin-core/README.md\n./share/doc/bitcoin-core/bitcoin.conf\n```\nThen a local install can be performed by:\n`tar xzf bitcoin-29.1-x86_64-linux-gnu.tar.gz --strip-components=1 --directory=$HOME/.local`\nand a system wide install by:\n`sudo tar xzf bitcoin-29.1-x86_64-linux-gnu.tar.gz --strip-components=1 --directory=/usr/local`\n\nWe currently have two files in `./`: `README.md` and `bitcoin.conf` which are in the wrong place for [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/latest/) that must be moved to enable the one line install.\n\n`bitcoin.conf` either belongs in `./share/doc/bitcoin-core/` as documentation or perhaps more preferably generated at start-up and placed in the data_dir (default: `~/.bitcoin`) similar to many other files.",
          "created_at": "2025-09-09T23:29:50Z"
        },
        {
          "user": "fanquake",
          "body": "@hebasto can you followup here",
          "created_at": "2025-09-18T12:56:46Z"
        },
        {
          "user": "fanquake",
          "body": "See #33432. \n> Doing sudo apt install libxcb-cursor0 seems to have fixed the issue",
          "created_at": "2025-09-19T09:59:35Z"
        },
        {
          "user": "hebasto",
          "body": "> [@hebasto](https://github.com/hebasto) can you followup here\n\nhttps://github.com/bitcoin/bitcoin/pull/33451.",
          "created_at": "2025-09-21T19:33:43Z"
        }
      ]
    },
    {
      "number": 32094,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "hanis12345",
      "created_at": "2025-03-19T01:19:39Z",
      "updated_at": "2025-03-19T01:25:05Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32094",
      "labels": []
    }
  ],
  "summary": {
    "pull_requests": 2,
    "issues": 3
  }
}