{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:41:41.565743+00:00",
  "date": "2025-05-14",
  "pull_requests": [
    {
      "number": 32505,
      "title": "depends: bump to latest config.guess and config.sub",
      "body": "Noticed that these files were last updated from [upstream](https://git.savannah.gnu.org/gitweb/?p=config.git) quite a while ago (in 2023, see #28781), so bump them again.\r\n\r\nCan be verified via e.g.\r\n```\r\n$ git clone https://git.savannah.gnu.org/git/config.git /tmp/config.git\r\n$ diff /tmp/config.git/config.guess ./depends/config.guess\r\n$ diff /tmp/config.git/config.sub ./depends/config.sub\r\n```",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-05-14T22:42:28Z",
      "updated_at": "2025-05-16T08:52:59Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32505",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32505.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32505#pullrequestreview-2845902109) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T22:42:31Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build\r\n```bash\r\nc44d180153f6844a636a0693f588fa20c45c33efd31194a9f4d02858f5eaaaf7  guix-build-486bc9179072/output/aarch64-linux-gnu/SHA256SUMS.part\r\n1beb0041c2d22378094d38e53878a2806d5d76557ef4f9dd2f40287e66388647  guix-build-486bc9179072/output/aarch64-linux-gnu/bitcoin-486bc9179072-aarch64-linux-gnu-debug.tar.gz\r\nd824bbf3f03bf7679f0721173dbe2387b9168ea0f0cc24f9f676af85e5527c9b  guix-build-486bc9179072/output/aarch64-linux-gnu/bitcoin-486bc9179072-aarch64-linux-gnu.tar.gz\r\nb0ddcb7739e44760b3e7a6364b095c7766b3546ef1c32c6c2325f80108594736  guix-build-486bc9179072/output/arm-linux-gnueabihf/SHA256SUMS.part\r\ncb472c0f861521ec82f1348d25cd994b8c5d5ef541e5dbaf1992ad4c0b0d44d6  guix-build-486bc9179072/output/arm-linux-gnueabihf/bitcoin-486bc9179072-arm-linux-gnueabihf-debug.tar.gz\r\n7dbe78dbb6467481dc48fd372dec476be07a57c311af6c0be47ac13b83ef43bb  guix-build-486bc9179072/output/arm-linux-gnueabihf/bitcoin-486bc9179072-arm-linux-gnueabihf.tar.gz\r\n1c3475cb4ff73fca528c382318b6334b1c7746fb2fecd49b881dc4e11d2d9d1d  guix-build-486bc9179072/output/arm64-apple-darwin/SHA256SUMS.part\r\n88c5f09be8ea0cc4108fb75e7dc005244d6215b4d51596aaf6f790764e94b0ce  guix-build-486bc9179072/output/arm64-apple-darwin/bitcoin-486bc9179072-arm64-apple-darwin-codesigning.tar.gz\r\n24c9d3a6d21c32daf33737cefc5c13bec5c5055307ce3ea2a757320b84077424  guix-build-486bc9179072/output/arm64-apple-darwin/bitcoin-486bc9179072-arm64-apple-darwin-unsigned.tar.gz\r\nd0e9001729eed75ba13b9eacd6333c84e6df0aa6e3515c5f00a75c0941cc739d  guix-build-486bc9179072/output/arm64-apple-darwin/bitcoin-486bc9179072-arm64-apple-darwin-unsigned.zip\r\nb0b4366b0fc3e60d6605b2dcb18d9d5f65a66df41d8cd62e5307db3c0c6c7c03  guix-build-486bc9179072/output/dist-archive/bitcoin-486bc9179072.tar.gz\r\n5f4bacaeae3de0d117a98a7f31d86c3db736488f1bc6b644e72fb057e21403f0  guix-build-486bc9179072/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n37aa81020d4535eebdc4a9596ae87ebd17a91a9cf7c2b056f313c0906f4ca552  guix-build-486bc9179072/output/powerpc64-linux-gnu/bitcoin-486bc9179072-powerpc64-linux-gnu-debug.tar.gz\r\n63f70fabc82d1fa1199bd0774f6d3c637507068c8fc09f97a1ca9643980cf1e2  guix-build-486bc9179072/output/powerpc64-linux-gnu/bitcoin-486bc9179072-powerpc64-linux-gnu.tar.gz\r\nbc97e2bcd45b895cee24c6ff6bf79e8cace6678e484e5c97cfcfedca847d2b2c  guix-build-486bc9179072/output/riscv64-linux-gnu/SHA256SUMS.part\r\n8629713fea87cfa8b142d9d90f86d1598a68f10eae80135ff24e23fabaa2ea32  guix-build-486bc9179072/output/riscv64-linux-gnu/bitcoin-486bc9179072-riscv64-linux-gnu-debug.tar.gz\r\ne6bc3a781921e911864325315d76bede72d401e08f87ae45aebdbce2121ff155  guix-build-486bc9179072/output/riscv64-linux-gnu/bitcoin-486bc9179072-riscv64-linux-gnu.tar.gz\r\n651bc81c457327b531c45b2271db48c6690f006d067ded5cf6d1ad306cc97927  guix-build-486bc9179072/output/x86_64-apple-darwin/SHA256SUMS.part\r\nac088673d74712a0640e5c41f53ceb82d7ff87995ddaac0a5e37ae64b10d2e92  guix-build-486bc9179072/output/x86_64-apple-darwin/bitcoin-486bc9179072-x86_64-apple-darwin-codesigning.tar.gz\r\n83fa8f562bc5b86138a0985285b366867ec4668f95dedf9c124d67aa4f1dc1ed  guix-build-486bc9179072/output/x86_64-apple-darwin/bitcoin-486bc9179072-x86_64-apple-darwin-unsigned.tar.gz\r\nc0ffbde3f068654d5d531649a1bb2a28b433a4e9c5040e46ef9c4d90554e90d3  guix-build-486bc9179072/output/x86_64-apple-darwin/bitcoin-486bc9179072-x86_64-apple-darwin-unsigned.zip\r\na69b2efeda64a31d1e1c92e2f6cffc365e1f9857db4abfa42184369d2edbd2dc  guix-build-486bc9179072/output/x86_64-linux-gnu/SHA256SUMS.part\r\n738a7182bc71597005237fe7ccd08cd29eb76d5c5c094aa2065b54a8d4dd0499  guix-build-486bc9179072/output/x86_64-linux-gnu/bitcoin-486bc9179072-x86_64-linux-gnu-debug.tar.gz\r\n6cc9637221c32a58a91ce7aa0abe11be620ae8d65f9398aa429d6b5916ce78e4  guix-build-486bc9179072/output/x86_64-linux-gnu/bitcoin-486bc9179072-x86_64-linux-gnu.tar.gz\r\ncb2a4eef5e5899ee464cb2302dda8845ed5d71eec2fe7f9c4f849b088fc67a5b  guix-build-486bc9179072/output/x86_64-w64-mingw32/SHA256SUMS.part\r\nb0b7f3358b0dad6f2e8e7d11a0c6c086dcad09923c8f4bd4d905d51e8a5934fd  guix-build-486bc9179072/output/x86_64-w64-mingw32/bitcoin-486bc9179072-win64-codesigning.tar.gz\r\n23255a10fd077c2f7a29966ab762ee0e5503891974ddce1fc12f25e31681dc97  guix-build-486bc9179072/output/x86_64-w64-mingw32/bitcoin-486bc9179072-win64-debug.zip\r\n6f6495a8dc811160456435f51e243e12c5bb342d25ed4a9672f595bd04147294  guix-build-486bc9179072/output/x86_64-w64-mingw32/bitcoin-486bc9179072-win64-setup-unsigned.exe\r\nf1fee40859fe659ac4b2c45d35c04977ced00c8c225348529d122d82376a19f3  guix-build-486bc9179072/output/x86_64-w64-mingw32/bitcoin-486bc9179072-win64-unsigned.zip\r\n```",
          "created_at": "2025-05-15T14:38:33Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 31d3eebfb92ae0521e18225d69be95e78fb02672<br>(master) | commit c097c17c7b794649f0e0fac447e4912b527496f3<br>(pull/32505/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`c10e0491d60ffd03...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-aarch64-linux-gnu-debug.tar.gz) | [`c42a72bbc65213a1...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`19d27306d05cc316...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-aarch64-linux-gnu.tar.gz) | [`e81f22415366b0db...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`0757a070fe9ba807...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-arm-linux-gnueabihf-debug.tar.gz) | [`21a05c00d3f147b5...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`57d6034a18054bf1...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-arm-linux-gnueabihf.tar.gz) | [`c8a24cf865cdbee3...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`5876fbd271b9750d...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-arm64-apple-darwin-codesigning.tar.gz) | [`e85e063048fd2b6b...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`08181a384915ae0d...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-arm64-apple-darwin-unsigned.tar.gz) | [`57fd119e84f7e580...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`5946c1c5411ef79e...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-arm64-apple-darwin-unsigned.zip) | [`9f5d5d1501567e07...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`6a67368b1794b210...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-powerpc64-linux-gnu-debug.tar.gz) | [`0d3218fcad91c949...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`8122d4a457599224...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-powerpc64-linux-gnu.tar.gz) | [`8c67126f1e0401d9...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`49b3d311c20713d9...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-riscv64-linux-gnu-debug.tar.gz) | [`f49248b4a8f35043...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`1538d68d17baa09b...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-riscv64-linux-gnu.tar.gz) | [`7c1ae759dde554b0...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`4fe14717e4ea1a62...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-x86_64-apple-darwin-codesigning.tar.gz) | [`4b4f5851347fe22c...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`ec85909c0a428a36...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-x86_64-apple-darwin-unsigned.tar.gz) | [`22dc4cc3c84187fe...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`6e1da5429a7d9ef9...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-x86_64-apple-darwin-unsigned.zip) | [`1927bd62bc27f5c8...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`a28eca4832624d46...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-x86_64-linux-gnu-debug.tar.gz) | [`9276d8f3313bc921...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`37a293b503e1f947...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a-x86_64-linux-gnu.tar.gz) | [`82b6a15c8e9eede4...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`12b973e16c672f8f...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/bitcoin-31d3eebfb92a.tar.gz) | [`69793fc608081698...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/bitcoin-c097c17c7b79.tar.gz) |\n| SHA256SUMS.part | [`e5083880d0aa0cf7...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/SHA256SUMS.part) | [`315087e68d344d81...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/SHA256SUMS.part) |\n| guix_build.log | [`1fc2a6c7ddc90a8c...`](https://drahtbot.space/guix/monotree/31d3eebfb92ae0521e18225d69be95e78fb02672/guix_build.log) | [`0db1bb1ceeedcf70...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/guix_build.log) |\n| guix_build.log.diff |  | [`f31bfcb031dcc16d...`](https://drahtbot.space/guix/monotree/c097c17c7b794649f0e0fac447e4912b527496f3/guix_build.log.diff) |\n\n",
          "created_at": "2025-05-15T18:48:53Z"
        }
      ]
    },
    {
      "number": 32504,
      "title": "test: descriptor: cover invalid multi/multi_a cases",
      "body": "This PR adds test coverage for invalid `multi()` and `multi_a()` cases, see:\r\n\r\n1. https://github.com/bitcoin/bitcoin/blob/53eb5593f0a1a8ae5cf0fabea58e2f22193a5c55/src/script/descriptor.cpp#L1819-L1821\r\n\r\n2.  https://github.com/bitcoin/bitcoin/blob/53eb5593f0a1a8ae5cf0fabea58e2f22193a5c55/src/script/descriptor.cpp#L1835-L1837\r\n\r\n3. https://github.com/bitcoin/bitcoin/blob/53eb5593f0a1a8ae5cf0fabea58e2f22193a5c55/src/script/descriptor.cpp#L1838-L1840\r\n\r\n\r\nWe could also exercise to exceed the number of keys - 20 for `multi` and 999 for `multi_a`.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-05-14T20:27:30Z",
      "updated_at": "2025-10-27T19:40:18Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32504",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32504.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32504#issuecomment-2883537760), [darosior](https://github.com/bitcoin/bitcoin/pull/32504#pullrequestreview-3369771171), [glozow](https://github.com/bitcoin/bitcoin/pull/32504#pullrequestreview-3385170617) |\n| Concept ACK | [sipa](https://github.com/bitcoin/bitcoin/pull/32504#issuecomment-2883546999) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T20:27:33Z"
        },
        {
          "user": "maflcko",
          "body": "Nice, but two commits for adding three lines of related tests seems like it could be squashed?",
          "created_at": "2025-05-15T05:50:38Z"
        },
        {
          "user": "brunoerg",
          "body": "> Nice, but two commits for adding three lines of related tests seems like it could be squashed?\r\n\r\nDone.",
          "created_at": "2025-05-15T11:18:54Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 58e55b17e632dbd4425dd64825b087f242ac4b7b",
          "created_at": "2025-05-15T11:48:10Z"
        },
        {
          "user": "sipa",
          "body": "Concept ACK",
          "created_at": "2025-05-15T11:51:56Z"
        }
      ]
    },
    {
      "number": 32502,
      "title": "wallet: Drop unused fFromMe from CWalletTx",
      "body": "This has been unused since commit fe52346, this is a re-opening of #9351.",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2025-05-14T18:26:29Z",
      "updated_at": "2025-05-14T22:05:30Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32502",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32502.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32502#issuecomment-2881173072), [achow101](https://github.com/bitcoin/bitcoin/pull/32502#issuecomment-2881681061) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T18:26:32Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 5bf91ba8800d23402536d758f02198eac0fd7d61",
          "created_at": "2025-05-14T18:35:19Z"
        },
        {
          "user": "maflcko",
          "body": "(please no `@` in the pull description, otherwise people will get pinged for every cherry-pick of the merge commit, which includes this)",
          "created_at": "2025-05-14T18:36:26Z"
        },
        {
          "user": "davidgumberg",
          "body": "> (please no `@` in the pull description, otherwise people will get pinged for every cherry-pick of the merge commit, which includes this)\r\n\r\nFixed, thanks.",
          "created_at": "2025-05-14T18:38:12Z"
        },
        {
          "user": "achow101",
          "body": "ACK 5bf91ba8800d23402536d758f02198eac0fd7d61",
          "created_at": "2025-05-14T21:58:04Z"
        }
      ]
    },
    {
      "number": 32501,
      "title": "RPC: removeprunedfunds should take an array of txids",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/29466\r\n\r\nUpdate `removeprunedfunds` RPC to take an `array of strings of txids` instead of a `single txid string` to allow batch removal of transactions",
      "state": "closed",
      "user": "BrandonOdiwuor",
      "created_at": "2025-05-14T17:35:49Z",
      "updated_at": "2025-05-20T12:18:49Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32501",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32501.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32501#pullrequestreview-2853851501) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32514](https://github.com/bitcoin/bitcoin/pull/32514) (scripted-diff: Remove unused leading newline in RPC docs by maflcko)\n* [#32238](https://github.com/bitcoin/bitcoin/pull/32238) (qt, wallet: Convert uint256 to Txid by marcofleon)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T17:35:52Z"
        },
        {
          "user": "stickies-v",
          "body": "This seems very similar to the approach taken in https://github.com/bitcoin/bitcoin/pull/29468. There were a couple of unaddressed review comments that seem to apply here too, so I think it would be good to list and address them. Furthermore, it might be appropriate to credit the original author?",
          "created_at": "2025-05-14T20:54:47Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "@BrandonOdiwuor \r\nI don't think it's productive to open a draft PR without first addressing the comments. \r\nIf you'd like to continue working on this but are facing blockers, it would be better to communicate your approach and explain where you're stuck in the tracking issue.\r\n\r\nI suggest closing this for now and reopening it once the concerns raised about the previous approach have been addressed.",
          "created_at": "2025-05-14T21:09:24Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-05-16T09:21:00Z"
        },
        {
          "user": "maflcko",
          "body": "Closing for now. I don't think there is any need in opening a pull request that is just a previously closed pull request with:\r\n\r\n* the original author stripped,\r\n* no reference to the previously closed pull,\r\n* failing tests,\r\n* no feedback addressed.\r\n\r\nContributions are welcome. Just make sure to run the tests before opening a pull request. Also, pre-existing review feedback would be good to address before opening a pull request.",
          "created_at": "2025-05-20T12:18:48Z"
        }
      ]
    },
    {
      "number": 32500,
      "title": "init: drop `-upnp`",
      "body": "This was slated for removal in `30.0`, so remove it.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T15:06:00Z",
      "updated_at": "2025-05-16T08:32:26Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32500",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32500.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/32500#issuecomment-2882719488), [darosior](https://github.com/bitcoin/bitcoin/pull/32500#pullrequestreview-2844910044), [maflcko](https://github.com/bitcoin/bitcoin/pull/32500#issuecomment-2885816473) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T15:06:03Z"
        },
        {
          "user": "maflcko",
          "body": "No objection, but if this reintroduces the `settings.json` error, I can also see waiting one more release (or so), because the migration code looks minimal and harmless.",
          "created_at": "2025-05-14T15:17:40Z"
        },
        {
          "user": "fanquake",
          "body": "Yea I don't mind. I guess we'll have to touch this in either case, as we shouldn't have a note saying to remove things in `30.x`, if they aren't being removed in `30.x`.",
          "created_at": "2025-05-14T15:20:01Z"
        },
        {
          "user": "yuvicc",
          "body": "ACK 301993ebf7f8ec23050e91377e0fd05823bb372a\n\n",
          "created_at": "2025-05-15T06:34:47Z"
        },
        {
          "user": "darosior",
          "body": "> if this reintroduces the `settings.json` error, I can also see waiting one more release\r\n\r\nAn unknown `upnp` entry in `settings.json` would just be ignored? A `upnp` entry in the config file would cause a startup failure. Concept ACK on this basis.",
          "created_at": "2025-05-15T20:17:48Z"
        },
        {
          "user": "maflcko",
          "body": "> > An unknown upnp entry in settings.json would just be ignored?\r\n> \r\n> Confirmed.\r\n\r\nThanks for checking. I guess I was confused and the comment added in https://github.com/bitcoin/bitcoin/pull/31198/files was wrong?\r\n\r\nreview ACK 301993ebf7f8ec23050e91377e0fd05823bb372a\r\n\r\nAlso checked that unknown entries are ignored.",
          "created_at": "2025-05-16T06:55:06Z"
        }
      ]
    },
    {
      "number": 32499,
      "title": "cmake: Restrict MSVC-specific workaround to affected versions",
      "body": "The recent MSVC version 17.14 has fixed a [bug](https://developercommunity.visualstudio.com/t/C1001:-Internal-compiler-error-with-st/10830350), so we can now enable compilation of `fuzz/utxo_snapshot.cpp` with the updated compiler.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-14T14:56:54Z",
      "updated_at": "2025-05-16T07:04:33Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/pull/32499",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32499.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sipsorcery](https://github.com/bitcoin/bitcoin/pull/32499#issuecomment-2881408178) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31507](https://github.com/bitcoin/bitcoin/pull/31507) (build: Use clang-cl to build on Windows natively by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T14:56:57Z"
        },
        {
          "user": "maflcko",
          "body": "No objection, but I guess it also seems fine to wait a few weeks until GitHub bumps their Windows image and then just bump the msvc minimum required version.",
          "created_at": "2025-05-14T14:59:37Z"
        },
        {
          "user": "hebasto",
          "body": "> No objection, but I guess it also seems fine to wait a few weeks until GitHub bumps their Windows image and then just bump the msvc minimum required version.\r\n\r\nDo we really need to force Windows developers to update their toolchains in this case?",
          "created_at": "2025-05-14T15:02:07Z"
        },
        {
          "user": "maflcko",
          "body": "> Do we really need to force Windows developers to update their toolchains in this case?\r\n\r\nI expect the number of Windows devs is still small enough to just ping and ask them, when the time has come.",
          "created_at": "2025-05-14T15:20:44Z"
        },
        {
          "user": "hebasto",
          "body": "> > Do we really need to force Windows developers to update their toolchains in this case?\r\n> \r\n> I expect the number of Windows devs is still small enough to just ping and ask them, when the time has come.\r\n\r\nFriendly ping @davidgumberg @hodlinator @sipsorcery  :)",
          "created_at": "2025-05-14T17:07:33Z"
        },
        {
          "user": "sipsorcery",
          "body": "utACK 677943032785253ab268e51c9d37fbacc1483568.\r\n\r\n17.14 is still in preview so can't test yet (would rather avoid the >10GB download and install for the sake of a week or two).",
          "created_at": "2025-05-14T20:01:46Z"
        },
        {
          "user": "hebasto",
          "body": "> 17.14 is still in preview so can't test yet (would rather avoid the >10GB download and install for the sake of a week or two).\n\nFrom https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes:\n\n> 17.14 ... was released on May 13, 2025.",
          "created_at": "2025-05-14T21:05:07Z"
        },
        {
          "user": "sipsorcery",
          "body": "Just checked again (1 hour later) and installing 17.14 now. \r\n\r\nSeems it was just my VS Installer instance being crap and telling me there were no new updates and offering 17.14 as a preview.",
          "created_at": "2025-05-14T21:21:13Z"
        },
        {
          "user": "hodlinator",
          "body": "nit: Should PR description include \"ref #31303\"?\r\n\r\nTried removing the `compiler_has_bug`-logic completely and building with the version I had installed: [17.13.4](https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-v17.13#17.13.4)...\r\n\r\n```\r\ncmake -B build --preset vs2022 -DVCPKG_INSTALL_OPTIONS=\"--x-buildtrees-root=C:\\vcpkg\" -DBUILD_FUZZ_BINARY=ON -DBUILD_GUI=OFF\r\ncmake --build build --config Release -j16\r\n```\r\n...did not encounter the internal compiler error?\r\n\r\nCouldn't repro the ICE from https://developercommunity.visualstudio.com/t/C1001:-Internal-compiler-error-with-st/10830350 either:\r\n```\r\n> cl.exe /std:c++20 /c ice_demo.cpp\r\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.43.34809 for x86\r\nCopyright (C) Microsoft Corporation.  All rights reserved.\r\n\r\nice_demo.cpp\r\n\r\n>\r\n```",
          "created_at": "2025-05-15T11:28:37Z"
        },
        {
          "user": "davidgumberg",
          "body": "> Tried removing the `compiler_has_bug`-logic completely and building with the version I had installed: [17.13.4](https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes-v17.13#17.13.4)...\r\n> \r\n> [...]\r\n> \r\n> ...did not encounter the internal compiler error?\r\n\r\nMy guess is either that a hotfix was pushed for `19.43`, or that this bug was already fixed in `19.43`, and the labels / bot response on the msvc bugtracker are inaccurate or canned, don't have an MSVC in front of me, but using [Godbolt's ](https://godbolt.org) MSVC [19.42.34441](https://godbolt.org/z/q17K3dPnW) the minimal reproduction causes internal error [`C1001`](https://godbolt.org/z/7q5ezdhjo), and MSVC [19.43.34810](https://godbolt.org/z/zWc5b8vEE) does [not](https://godbolt.org/z/YndYeosax).\r\n",
          "created_at": "2025-05-16T06:31:02Z"
        },
        {
          "user": "hebasto",
          "body": "Closing in favour of https://github.com/bitcoin/bitcoin/pull/32525.",
          "created_at": "2025-05-16T07:04:21Z"
        }
      ]
    },
    {
      "number": 32498,
      "title": "doc: remove Carls substitute server from Guix docs",
      "body": "This no-longer exists. Use one of the other Guix servers in the example.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T14:10:12Z",
      "updated_at": "2025-05-15T08:39:54Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32498",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32498.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32498#issuecomment-2881677010), [hebasto](https://github.com/bitcoin/bitcoin/pull/32498#pullrequestreview-2842400855) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T14:10:15Z"
        },
        {
          "user": "achow101",
          "body": "ACK 3b824169c7766460794bb445028ac55a7111ee3e\r\n\r\nCarl's substitute server is indeed down, IIRC I ran into this a couple months ago.\r\n\r\nThe replacement matches the Guix defaults.",
          "created_at": "2025-05-14T21:55:53Z"
        }
      ]
    },
    {
      "number": 32497,
      "title": "merkle: pre‚Äëreserve leaves to prevent reallocs with odd vtx count",
      "body": "#### Summary\r\n\r\n`ComputeMerkleRoot` [duplicates the last hash](https://github.com/bitcoin/bitcoin/blob/39b6c139bd6be33699af781f1d71f6fed303d468/src/consensus/merkle.cpp#L54-L56) when the input size is odd. If the caller provides a `std::vector` whose capacity equals its size, that extra `push_back` forces a reallocation, doubling its capacity (causing peak memory usage of 3x the necessary size).\r\n\r\nThis affects roughly half of the created blocks (those with odd transaction counts), causing unnecessary memory fragmentation during every block validation.\r\n\r\n#### Fix\r\n\r\n* Pre-reserves vector capacity to account for the odd-count duplication using `(size + 1) & ~1ULL`.\r\n    * This syntax produces [optimal assembly](https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2553107836) across x86/ARM and 32/64-bit platforms for GCC & Clang.\r\n* Eliminates default construction of `uint256` objects that are immediately overwritten by switching from `resize` to `reserve` + `push_back`.\r\n\r\n#### Memory Impact\r\n\r\n[Memory profiling](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3563724551) shows **50% reduction in peak allocation** (576KB ‚Üí 288KB) and elimination of reallocation overhead.\r\n\r\n#### Validation\r\n\r\nThe benchmark was updated to use an odd leaf count to demonstrate the real-world scenario where the reallocation occurs.\r\n\r\nA full `-reindex-chainstate` up to block **896 408** ran without triggering the asserts.\r\n\r\n<details>\r\n<summary>Validation asserts</summary>\r\n\r\nTemporary asserts (not included in this PR) confirm that `push_back` never reallocates and that the coinbase witness hash remains null:\r\n```cpp\r\nif (hashes.size() & 1) {\r\n    assert(hashes.size() < hashes.capacity()); // TODO remove\r\n    hashes.push_back(hashes.back());\r\n}\r\n\r\nleaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even\r\nleaves.emplace_back();\r\nassert(leaves.back().IsNull()); // TODO remove\r\n```\r\n\r\n</details>\r\n\r\n#### Benchmark Performance\r\n\r\nWhile the main purpose is to improve predictability, the reduced memory operations also improve hashing throughput slightly.\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-14T13:01:42Z",
      "updated_at": "2026-01-15T07:43:21Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/pull/32497",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32497.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3099889680), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3624328843), [vasild](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3664290763) |\n| Concept NACK | [darosior](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3528552716) |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2853787748) |\n| Stale ACK | [yuvicc](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3011987044) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T13:01:47Z"
        },
        {
          "user": "yuvicc",
          "body": "I have thought on changing the benchmark tests as we would want to test the worst case scenario right? or else we could have both case for testing? ",
          "created_at": "2025-06-13T20:42:19Z"
        },
        {
          "user": "l0rinc",
          "body": "Updated the benchmark to showcase the before/after state better (resembles production code changes), by splitting out the vector copies to the unmetered lambda and having an odd number of elements.\r\nChanged the previous `leaves.reserve((block.vtx.size() + 1) & ~1ULL)` rounding to `leaves.reserve(block.vtx.size() + (block.vtx.size() & 1))`.",
          "created_at": "2025-06-15T10:06:53Z"
        },
        {
          "user": "l0rinc",
          "body": "I've rebased the changed and adjusted the benchmark to be more similar to the other production usages in the first commit, rounded to even in the second (optimization) commit, so that we can realistically measure the speed difference before and after:\r\n\r\n% build/bin/bench_bitcoin -filter='MerkleRoot' --min-time=1000\r\n\r\nBefore 7f620cffebee593e48434cf182cc2fd64a6d76be:\r\n\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               45.50 |       21,975,688.66 |    0.0% |      1.10 | `MerkleRoot`\r\n|               45.53 |       21,962,546.91 |    0.1% |      1.10 | `MerkleRoot`\r\n|               45.53 |       21,965,162.52 |    0.0% |      1.10 | `MerkleRoot`\r\n\r\nAfter a73dd45e95f5e909d0950ba7c76225589df74854:\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               45.04 |       22,200,976.95 |    0.1% |      1.10 | `MerkleRoot`\r\n|               44.97 |       22,235,208.25 |    0.1% |      1.10 | `MerkleRoot`\r\n|               45.01 |       22,217,033.81 |    0.1% |      1.10 | `MerkleRoot`",
          "created_at": "2025-06-25T21:33:42Z"
        },
        {
          "user": "yuvicc",
          "body": "lgtm re-ACK be8f3053a7ad526823f32f1a70847b9c06c4c54b\r\n\r\nBefore e87430ed5fad6f9d90c1e7d256b9b8276b936c24\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.83 |       18,577,129.91 |    0.1% |      1.10 | `MerkleRoot`\r\n|               53.62 |       18,648,858.81 |    0.1% |      1.10 | `MerkleRoot`\r\n|               53.70 |       18,621,594.40 |    0.1% |      1.10 | `MerkleRoot`\r\n\r\nAfter be8f3053a7ad526823f32f1a70847b9c06c4c54b\r\n\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.02 |       18,860,232.62 |    0.2% |      1.10 | `MerkleRoot`\r\n|               52.88 |       18,910,755.68 |    0.0% |      1.10 | `MerkleRoot`\r\n|               52.89 |       18,906,671.63 |    0.1% |      1.10 | `MerkleRoot`",
          "created_at": "2025-06-27T07:22:24Z"
        },
        {
          "user": "l0rinc",
          "body": "Rebased and added a new commit on top for deduplicating the integer rounding. Ready for review again.",
          "created_at": "2025-07-30T23:58:15Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/47077763348</sub>\n<sub>LLM reason (‚ú® experimental): Lint check failed due to missing include guards in src/util/ints.h.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-30T23:58:57Z"
        },
        {
          "user": "optout21",
          "body": "LGTM!\r\nMinor comments:\r\n- Maybe add a note to the `ComputeMerkleRoot` declaration, that the `hashes` input is expected to have one extra capacity (in case size is odd). Minor, as this function is not used directly much.\r\n- Even more, it could debug-assert that capacity is even, but this may be a bit of a stretch.",
          "created_at": "2025-08-07T06:36:53Z"
        },
        {
          "user": "l0rinc",
          "body": "> it could debug-assert that capacity is even\r\n\r\n~Added, thanks for the hint~\r\n\r\nEdit: had to push a few variants, the fuzzing still seems to fail, so I removed the Assert/Assume from `ComputeMerkleRoot` (it's not a requirement anyway, it's just more performant)",
          "created_at": "2025-08-07T19:03:12Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `multiprocess, i686, DEBUG`: https://github.com/bitcoin/bitcoin/runs/47624077326</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by an assertion failure in consensus/merkle.cpp during the merkle root computation.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-07T19:31:53Z"
        },
        {
          "user": "l0rinc",
          "body": "Rebased after https://github.com/bitcoin/bitcoin/pull/33116 - the only conflict was adding `.ToUint256()` to the merkle hashes.\r\n\r\nBased on the suggestion of @achow101 (since I do agree that it's kinda' leaking abstractions and there's also a lot of duplication for collecting the merkle leaves), I have also deduplicated all call sites without needing to touch the consensusy Merkle calculation itself.\r\nWe can still do that in a follow-up, if needed, but this way we've made the code both simpler **and** more performant (which wasn't the case with either the original or the suggestion), and separated the leaves abstraction and kept the risky merkle root calculation intact.\r\nI have remeasured the before/after benchmarks, no change in performance since last push, but updated the commit messages anyway.",
          "created_at": "2025-08-13T20:44:13Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/48036589106</sub>\n<sub>LLM reason (‚ú® experimental): The failure is caused by an error in clang-tidy related to the use of std::move on a const variable, indicating a code warning treated as an error.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-08-13T21:49:48Z"
        },
        {
          "user": "darosior",
          "body": "Sorry to be this guy again, but it seems to me unreasonable to touch such critical consensus code for such marginal benefits. Unless observable benefits can be shown, i lean toward Concept NACK.",
          "created_at": "2025-11-13T16:11:48Z"
        },
        {
          "user": "l0rinc",
          "body": "> Unless observable benefits can be shown\r\n\r\nThe change itself is trivial, it's just a **+1** for the reserve before calling the Merkle calculation.\r\nI don't mind simplifying the change if you think that's easier to review (I could also just bump `leaves.reserve(block.vtx.size())` to `leaves.reserve(block.vtx.size() + 1)` without the refactors).\r\nOriginally it was similar to that, but based on [concerns](https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2264185044) to decouple callers from needing to know the internals of Merkle calculations, I extracted the loops.\r\n\r\nI'm open to simplifying it back to just a reserve if you think that's easier to review, but I'd argue that the underlying incorrect memory reservation is a minor bug that should be fixed.\r\n\r\n---------\r\n\r\nWhile this change does result in small speedup, the primary purpose is to avoid having to reallocate 2x additional memory for a predictable calculation - less memory fragmentation, lower memory usage, more predictable behavior.\r\nLet's quantify the impact: running `massif` for the benchmark with an odd leaf count shows the memory peaks clearly:\r\n\r\n<details>\r\n<summary>massif measurement comparing the two commits for 200 second benchmark run</summary>\r\n\r\n```bash\r\nCOMMITS=\"f2334a0ae056a9e3cba218206d139b3688eeda96 de6a28396b8bf7a3fd1124418b4cd5beba1906d6\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\nFILTER=\"MerkleRoot\"; MIN_TIME=200000; \\\r\nmkdir -p \"$LOG_DIR\"; \\\r\n(echo \"memory benchmark | filter=$FILTER | min-time=${MIN_TIME}ms | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM\";) &&\\\r\n(for c in $COMMITS; do git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor COMMIT in $COMMITS; do \\\r\n  SHORT_COMMIT=${COMMIT:0:8}; \\\r\n  echo \"Processing commit $SHORT_COMMIT...\"; \\\r\n  git fetch -q origin $COMMIT && git checkout -q $COMMIT && \\\r\n  git clean -fxd && git reset --hard && \\\r\n  cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DBUILD_BENCH=ON -DENABLE_IPC=OFF && \\\r\n  ninja -C build bench_bitcoin -j2 && \\\r\n  valgrind --tool=massif --time-unit=ms \\\r\n    --massif-out-file=\"$LOG_DIR/massif-bench-$FILTER-$SHORT_COMMIT.out\" \\\r\n    build/bin/bench_bitcoin -filter=\"$FILTER\" --min-time=$MIN_TIME && \\\r\n  ms_print \"$LOG_DIR/massif-bench-$FILTER-$SHORT_COMMIT.out\" | tee \"$LOG_DIR/massif-bench-$FILTER-$SHORT_COMMIT.txt\" && \\\r\n  echo \"Completed $SHORT_COMMIT\"; \\\r\ndone && \\\r\necho \"\" && echo \"Results in: $LOG_DIR/massif-bench-$FILTER-*.{out,txt}\"\r\n````\r\n\r\n</details>\r\n\r\nWe can also clearly see the [difference](https://www.diffchecker.com/Lrp4SYcS) in the capture stack traces.\r\n**Before**, having  **1.3 MB peak memory** usage:\r\n```massif\r\n    MB\r\n1.332^        :                                                               \r\n     | #      :                                                               \r\n     | #      :                                                               \r\n     | #      :                                                               \r\n     | #      :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #    @ :                                                               \r\n     | #::::@::::::::::::::::::::::::::::::::::::::::::::::::::::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n     | #: ::@::::: :::::::: :: ::: :::::: : : :: ::: ::: : : : ::::@:::::@::::\r\n   0 +----------------------------------------------------------------------->s\r\n     0                                                                   226.2\r\n```\r\nshowing the reallocations clearly in the stacks:\r\n```\r\n97.87% (1,366,841B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\r\n->41.25% (576,064B) 0x969717: allocate (new_allocator.h:151)\r\n| ->41.25% (576,064B) 0x969717: allocate (allocator.h:203)\r\n|   ->41.25% (576,064B) 0x969717: allocate (alloc_traits.h:614)\r\n|     ->41.25% (576,064B) 0x969717: _M_allocate (stl_vector.h:387)\r\n|       ->41.25% (576,064B) 0x969717: _M_realloc_append<const uint256&> (vector.tcc:572)\r\n|         ->41.25% (576,064B) 0x969717: push_back (stl_vector.h:1427)\r\n|           ->41.25% (576,064B) 0x969717: ComputeMerkleRoot(std::vector<uint256, std::allocator<uint256> >, bool*) (merkle.cpp:55)\r\n|             ->41.25% (576,064B) 0x2235A7: operator() (merkle_root.cpp:31)\r\n|               ->41.25% (576,064B) 0x2235A7: ankerl::nanobench::Bench& ankerl::nanobench::Bench::run<MerkleRoot(ankerl::nanobench::Bench&)::{lambda()\r\n```\r\n\r\n-----\r\n\r\n**After**, having a **0.8 MB peak memory** usage\r\n```massif\r\n    KB\r\n801.4^ #                                                                      \r\n     | #                                                                      \r\n     | #                                                                      \r\n     | #                                                                      \r\n     | #                                                                      \r\n     | #                                                                      \r\n     | #                                                                      \r\n     | #                                                         :::::@:::::@:\r\n     | #:::@@@::@:::::::::::::::@::@:@:::@@:::::::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n     | #:::@ @: @:::::::::::::::@::@:@:::@ :::: ::::@::::::@:::::@::::@:::::@:\r\n   0 +----------------------------------------------------------------------->s\r\n     0                                                                   227.5\r\n```\r\nand the stacks don't show reallocs anymore:\r\n```\r\n96.37% (790,809B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\r\n->35.10% (288,064B) 0x2234AF: allocate (new_allocator.h:151)\r\n| ->35.10% (288,064B) 0x2234AF: allocate (allocator.h:203)\r\n|   ->35.10% (288,064B) 0x2234AF: allocate (alloc_traits.h:614)\r\n|     ->35.10% (288,064B) 0x2234AF: _M_allocate (stl_vector.h:387)\r\n|       ->35.10% (288,064B) 0x2234AF: reserve (vector.tcc:79)\r\n|         ->35.10% (288,064B) 0x2234AF: ToMerkleLeaves<std::vector<uint256>, MerkleRoot(ankerl::nanobench::Bench&)::<lambda()>::<lambda(bool, const auto:46&)> > (merkle.h:19)\r\n|           ->35.10% (288,064B) 0x2234AF: operator() (merkle_root.cpp:25)\r\n|             ->35.10% (288,064B) 0x2234AF: ankerl::nanobench::Bench& ankerl::nanobench::Bench::run<MerkleRoot(ankerl::nanobench::Bench&)::{lambda()\r\n```",
          "created_at": "2025-11-21T16:14:21Z"
        }
      ]
    },
    {
      "number": 32496,
      "title": "depends: drop `ltcg` for Windows Qt",
      "body": "The related Windows patches were dropped in 5e794e62024eef612e1fbb71c76ea54d17435c14, and \"Cross-compiling does not support LTO.\" (from #30997).",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T11:45:50Z",
      "updated_at": "2025-06-05T09:05:03Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32496",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32496.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32496#issuecomment-2940365526) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T11:45:54Z"
        },
        {
          "user": "fanquake",
          "body": "Qt + lto works for native, but is broken for Darwin cross builds, so dropped the second commit.",
          "created_at": "2025-06-04T13:56:54Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 9653ebc053602a30aee6d8676913306d615841cf",
          "created_at": "2025-06-04T14:56:42Z"
        }
      ]
    },
    {
      "number": 32492,
      "title": "test: add skip_if_running_under_valgrind()",
      "body": "Enable it in the USDT tests. The context (from 0xB10C):\r\n\r\n> every time the tracepoint is reached a SIGTRAP is fired.\r\n> No matter the tracepoint contents, even with an empty one.\r\n> Valgrind intercepts SIGTRAP and aborts.\r\n\r\nSee discussion in #32374.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T09:58:24Z",
      "updated_at": "2025-06-03T10:35:24Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32492",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32492.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32492#issuecomment-2879855860), [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32492#pullrequestreview-2841515552) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T09:58:28Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 75a185ea3db3177e8e479ee61a39bcb51e08d9a6\r\n\r\nI haven't tested or confirmed this, but the diff looks plausible.",
          "created_at": "2025-05-14T11:36:43Z"
        },
        {
          "user": "0xB10C",
          "body": "LGTM post-merge ACK",
          "created_at": "2025-06-03T10:35:23Z"
        }
      ]
    },
    {
      "number": 32491,
      "title": "build: document why we check for `std::system`",
      "body": "It's probably debatable if we support targets like iOS, but for now, document why we are checking for this standard library feature.\r\n\r\nTrying to use `std::system` for a `aarch64-darwin-ios` target results in:\r\n```bash\r\ntest.cpp:7:10: error: 'system' is unavailable: not available on iOS\r\n    7 |     std::system(\"some_command\");\r\n      |          ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/_stdlib.h:203:6: note: 'system' has been explicitly marked unavailable here\r\n  203 | int      system(const char *) __DARWIN_ALIAS_C(system);\r\n      |          ^\r\n1 error generated.\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T08:53:44Z",
      "updated_at": "2025-05-16T10:47:04Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32491",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32491.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32491#issuecomment-2882769993) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T08:53:47Z"
        },
        {
          "user": "Sjors",
          "body": "ACK 8f4ba90b8ff47c7f90fe65d3ed37f486f9fe3a74\r\n\r\nMy understanding is that QML based QT will run fine on iOs, though I haven't tried myself.\r\n\r\nBack when this was introduced https://github.com/bitcoin/bitcoin/pull/15457#issuecomment-466315628 it was observered that there's also more obscure platforms out there that don't have and/or sandbox `std::system`. Though nowadays we would probably direct them towards the kernel project.",
          "created_at": "2025-05-15T06:57:46Z"
        },
        {
          "user": "fanquake",
          "body": "> it was observered that there's also more obscure platforms out there that don't have and/or sandbox std::system.\r\n\r\n@laanwj you might remember / know of such systems?",
          "created_at": "2025-05-15T09:33:49Z"
        },
        {
          "user": "laanwj",
          "body": "> @laanwj you might remember / know of such systems?\r\n\r\nYes. At the time there was cloudabi, which was a sandboxed version of POSIX that removed all contextual access and ambient authority, so processes only get capability handles passed in to what they need. So there was no shell and hence no `std::system`. But that project was abandoned years ago.\r\n\r\ni'm not sure any other such platforms exist right now, i'm fine with removing the check. But adding a comment makes sense nevertheless.\r\n\r\nAside: i would like to eventually convert usage of `std::system` to `subprocess`, especially now (after #32343) that it doesn't leak file descriptors anymore.\r\n",
          "created_at": "2025-05-15T10:22:10Z"
        },
        {
          "user": "hebasto",
          "body": "> Aside: i would like to eventually convert usage of `std::system` to `subprocess`, especially now (after #32343) that it doesn't leak file descriptors anymore.\r\n\r\n:+1: ",
          "created_at": "2025-05-15T10:27:14Z"
        },
        {
          "user": "fanquake",
          "body": "> i'm not sure any other such platforms exist right now, i'm fine with removing the check. But adding a comment makes sense nevertheless.\r\n\r\nYea. Wanting to remove the check is what led me to end up documenting it, given it's unclear wether we support these builds or not.",
          "created_at": "2025-05-16T10:46:34Z"
        }
      ]
    },
    {
      "number": 32490,
      "title": "refactor: Remove UB in prevector reverse iterators",
      "body": "`rend()` creates a pointer with offset `-1`. This is UB, according to the C++ standard: https://eel.is/c++draft/expr.add#4:\r\n\r\n    When an expression J that has integral type is added to [...] an\r\n    expression P of pointer type, the result has the type of P.\r\n\r\n    ... if P points to a (possibly-hypothetical) array element i of an\r\n    array object x with n elements [...] the expressions P + J and J + P\r\n    (where J has the value j) point to the (possibly-hypothetical) array\r\n    element i+j of x if 0‚â§i+j‚â§n [...]\r\n\r\n    Otherwise, the behavior is undefined.\r\n\r\nAlso, it is unclear why the functions exist at all, when stdlib utils such as `std::reverse_iterator{it}` or `std::views::reverse` can be used out of the box.\r\n\r\nSo remove them, along with the ubsan suppressions, that are no longer used.\r\n\r\nI've tagged this a refactor, because the code was always dead (unused outside of tests). And since commit 2925bd537cbd8c70594e23f6c4298b7101f7f73d it was completely dead. Also, I could not find a sanitizer that detects this type of UB.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-05-14T07:56:12Z",
      "updated_at": "2025-05-15T10:25:39Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32490",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32490.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32490#issuecomment-2880252363), [stickies-v](https://github.com/bitcoin/bitcoin/pull/32490#pullrequestreview-2840449544), [theuni](https://github.com/bitcoin/bitcoin/pull/32490#pullrequestreview-2841063795), [achow101](https://github.com/bitcoin/bitcoin/pull/32490#issuecomment-2881607692) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-14T07:56:15Z"
        },
        {
          "user": "l0rinc",
          "body": "tested ACK faf9082a5f689e2e51a474bf654e4e9b6ca29685\r\n\r\nThanks for fixing it properly - this explains why I couldn't trigger an actual failure (local or CI) in https://github.com/bitcoin/bitcoin/pull/32296.",
          "created_at": "2025-05-14T13:28:25Z"
        },
        {
          "user": "achow101",
          "body": "ACK faf9082a5f689e2e51a474bf654e4e9b6ca29685\r\n\r\nChecked dead code removal, did not test for UB.",
          "created_at": "2025-05-14T21:20:06Z"
        },
        {
          "user": "l0rinc",
          "body": "This PR is an extension of https://github.com/bitcoin/bitcoin/pull/32296 (which originally just removed the unnecessary `prevector` suppression, but @maflcko bisected the cause here and removed the dead code as well).\r\nYour reviews would be appreciated there as well.",
          "created_at": "2025-05-15T10:25:21Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32503,
      "title": "Dark Mode for users",
      "body": "### Please describe the feature you'd like to see added.\n\nHello everyone!\n\nIt would be nice to see a dark mode in this app because everything on my computer is in dark mode and Core application is in native mode.\n\n### Is your feature related to a problem, if so please describe it.\n\nVisual contrast in light theme\n\n### Describe the solution you'd like\n\nMake an Dark theme for this application.\n\n### Describe any alternatives you've considered\n\n- Windows 11\n- Visual Studio Code\n- Docker CE\n- DBeaver CE\n- PgAdmin 4\n- Postman\n- Chrome (DarkReader)\n- Telegram ...\n\n### Please leave any additional context\n\nI wouldn't say it's important, but maybe if someone has motivation and time, I would be grateful.",
      "state": "closed",
      "user": "SignalMQ",
      "created_at": "2025-05-14T19:21:12Z",
      "updated_at": "2025-05-14T19:42:28Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32503",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "Duplicate of https://github.com/bitcoin-core/gui/issues/378.",
          "created_at": "2025-05-14T19:41:49Z"
        }
      ]
    },
    {
      "number": 32495,
      "title": "test: consider Clang `type` sanitizer",
      "body": "Clang 20 introduced an experimental type sanitizer that \"detects violations of C/C++ type-based aliasing rules.\" See here for more info: https://clang.llvm.org/docs/TypeSanitizer.html. Someone might want to run this against our code, to see if it works, or detects real issues. This could likely be done with:\n```bash\nmake -C depends/ CC=clang CXX=clang++ CXXFLAGS=\"-stdlib=libc++\" NM=llvm-nm AR=llvm-ar RANLIB=llvm-ranlib STRIP=llvm-strip\ncmake -B build --toolchain /bitcoin/depends/x86_64-pc-linux-gnu/toolchain.cmake -DSANITIZERS=type\ncmake --build build\n```\n\n```bash\n# ./build/bin/bitcoind\n==20420==ERROR: TypeSanitizer: type-aliasing-violation on address 0x5d65ea902120 (pc 0x5d65e334066b bp 0x7ffe26be2d50 sp 0x7ffe26be2ce0 tid 20420)\nWRITE of size 8 at 0x5d65ea902120 with type p1 _ZTSNSt3__110__function6__baseIFNS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEEPKcEEE (in std::__1::__function::__value_func<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> (char const*)> at offset 32) accesses part of an existing object of type std::__1::function<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> (char const*)> that starts at offset -32\n    #0 0x5d65e334066a in std::__1::__function::__value_func<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> (char const*)>::__value_func[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:355:52\n    #1 0x5d65e334066a in std::__1::function<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> (char const*)>::function[abi:ne200100](std::nullptr_t) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:862:25\n    #2 0x5d65e334066a in __cxx_global_var_init.1 /bitcoin/build/src/./bitcoind.cpp:37:19\n    #3 0x5d65e334066a in _GLOBAL__sub_I_bitcoind.cpp /bitcoin/build/src/./bitcoind.cpp\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-05-14T11:42:12Z",
      "updated_at": "2025-05-15T09:28:40Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32495",
      "labels": [
        "Tests"
      ]
    },
    {
      "number": 32494,
      "title": "build: (initial?) failure to build xproto on Alpine",
      "body": "```bash\n# podman run -it alpine\napk update && apk add pkgconf patch python3 cmake g++ bash curl gcc git make && \\\n\tgit clone https://github.com/bitcoin/bitcoin && \\\n\tcd bitcoin && \\\n\tmake -C depends qt -j13\n```\n\nThis will fail with\n```bash\nStaging xproto...\nmake[1]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nMaking install in specs\nmake[2]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nMaking install in SIAddresses\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[4]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[4]: Nothing to be done for 'install-exec-am'.\nmake[4]: Nothing to be done for 'install-data-am'.\nmake[4]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[4]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[4]: Nothing to be done for 'install-exec-am'.\nmake[4]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[2]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[2]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[3]: Nothing to be done for 'install-exec-am'.\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/lib/pkgconfig'\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\nmkdir: can't create directory '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11': File exists\nmake[3]: *** [Makefile:508: install-xprotoHEADERS] Error 1\nmake[3]: *** Waiting for unfinished jobs....\n /usr/bin/install -c -m 644 xproto.pc '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/lib/pkgconfig'\n /usr/bin/install -c -m 644 Xfuncproto.h Xpoll.h '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[2]: *** [Makefile:838: install-am] Error 2\nmake[2]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[1]: *** [Makefile:535: install-recursive] Error 1\nmake[1]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake: *** [funcs.mk:342: /bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/.stamp_staged] Error 2\nmake: Leaving directory '/bitcoin/depends'\n```\n\nIf you restart the build it then picks up and continues:\n```bash\nmake -C depends/ qt\nmake: Entering directory '/bitcoin/depends'\nStaging xproto...\nmake[1]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nMaking install in specs\nmake[2]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nMaking install in SIAddresses\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[4]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[4]: Nothing to be done for 'install-exec-am'.\nmake[4]: Nothing to be done for 'install-data-am'.\nmake[4]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs/SIAddresses'\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[4]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[4]: Nothing to be done for 'install-exec-am'.\nmake[4]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[2]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/specs'\nmake[2]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[3]: Entering directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[3]: Nothing to be done for 'install-exec-am'.\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\n /usr/bin/install -c -m 644 Xfuncproto.h Xpoll.h '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/lib/pkgconfig'\n /usr/bin/install -c -m 644 xproto.pc '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/lib/pkgconfig'\n ./install-sh -c -d '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\n /usr/bin/install -c -m 644 ap_keysym.h DECkeysym.h HPkeysym.h keysymdef.h keysym.h Sunkeysym.h Xalloca.h Xarch.h Xatom.h Xdefs.h XF86keysym.h Xfuncs.h X.h Xmd.h Xosdefs.h Xos.h Xos_r.h Xproto.h Xprotostr.h Xthreads.h Xw32defs.h XWDFile.h Xwindows.h Xwinsock.h '/bitcoin/depends/work/staging/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec/bitcoin/depends/aarch64-unknown-linux-musl/include/X11'\nmake[3]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[2]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nmake[1]: Leaving directory '/bitcoin/depends/work/build/aarch64-unknown-linux-musl/xproto/7.0.31-7e4871430ec'\nPostprocessing xproto...\nCaching xproto...\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T10:54:52Z",
      "updated_at": "2025-06-03T19:21:23Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32494",
      "labels": [
        "GUI",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "willcl-ark",
          "body": "This appears to be related to make parallelism. It can be circumvented by using `make -j1`.\n\nAnother approach might be to patch the (failing) `mkdir` call with `mkdir -p`, although this might possibly also just mask underlying issue...",
          "created_at": "2025-05-19T17:12:40Z"
        }
      ]
    },
    {
      "number": 32493,
      "title": "test: wallet_reorgsrestore.py failure under valgrind",
      "body": "I see this consistently when running the `native_valgrind` CI:\n```bash\nnode0 2025-05-14T10:02:50.888348Z [init] [wallet/wallet.h:924] [WalletLogPrintf] [reorg_crash] Wallet completed loading in              61ms \n node0 2025-05-14T10:02:50.889127Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.889588Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.889965Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.890780Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.891224Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.891602Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.892422Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.892865Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.893253Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.894021Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.894440Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.894808Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.895605Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.896039Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.896394Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.897229Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.897680Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.898098Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.898850Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.899271Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.899633Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.900392Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:50.900808Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:50.901176Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:50.902018Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: SELECT value FROM main WHERE key = x'0962657374626c6f636b' \n node0 2025-05-14T10:02:50.902278Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: SELECT value FROM main WHERE key = x'1262657374626c6f636b5f6e6f6d65726b6c65' \n node0 2025-05-14T10:02:50.903082Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: SELECT value FROM main WHERE key = x'0962657374626c6f636b' \n node0 2025-05-14T10:02:50.903344Z [init] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: SELECT value FROM main WHERE key = x'1262657374626c6f636b5f6e6f6d65726b6c65' \n node0 2025-05-14T10:02:50.903656Z [init] [wallet/wallet.h:924] [WalletLogPrintf] [reorg_crash] setKeyPool.size() = 8 \n node0 2025-05-14T10:02:50.903793Z [init] [wallet/wallet.h:924] [WalletLogPrintf] [reorg_crash] mapWallet.size() = 1 \n node0 2025-05-14T10:02:50.903915Z [init] [wallet/wallet.h:924] [WalletLogPrintf] [reorg_crash] m_address_book.size() = 1 \n node0 2025-05-14T10:02:50.905339Z [init] [init.cpp:1776] [AppInitMain] Setting NODE_NETWORK on non-prune mode \n node0 2025-05-14T10:02:50.927907Z [init] [init.cpp:1886] [AppInitMain] block tree size = 228 \n node0 2025-05-14T10:02:50.928705Z [init] [init.cpp:1899] [AppInitMain] nBestHeight = 216 \n node0 2025-05-14T10:02:50.944147Z [init] [net.cpp:3168] [BindListenPort] Bound to 127.0.0.1:11000 \n node0 2025-05-14T10:02:50.949620Z [init] [noui.cpp:57] [noui_InitMessage] init message: Starting network threads‚Ä¶ \n node0 2025-05-14T10:02:50.967599Z [init] [net.cpp:3358] [Start] DNS seeding disabled \n node0 2025-05-14T10:02:51.000689Z [init] [noui.cpp:57] [noui_InitMessage] init message: Done loading \n node0 2025-05-14T10:02:51.010548Z [addcon] [util/thread.cpp:20] [TraceThread] addcon thread start \n node0 2025-05-14T10:02:51.018558Z [initload] [util/thread.cpp:20] [TraceThread] initload thread start \n node0 2025-05-14T10:02:51.025885Z [net] [util/thread.cpp:20] [TraceThread] net thread start \n node0 2025-05-14T10:02:51.033665Z [msghand] [util/thread.cpp:20] [TraceThread] msghand thread start \n node0 2025-05-14T10:02:51.040718Z [initload] [node/mempool_persist.cpp:73] [LoadMempool] Loading 0 mempool transactions from file... \n node0 2025-05-14T10:02:51.044378Z [initload] [node/mempool_persist.cpp:145] [LoadMempool] Imported mempool transactions from file: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast \n node0 2025-05-14T10:02:51.045906Z [initload] [util/thread.cpp:22] [TraceThread] initload thread exit \n node0 2025-05-14T10:02:51.049424Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.050474Z [httpworker.8] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-05-14T10:02:51.090088Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.091232Z [httpworker.4] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__ \n test  2025-05-14T10:02:51.148000Z TestFramework.node0 (DEBUG): RPC successfully started \n node0 2025-05-14T10:02:51.152352Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.155482Z [httpworker.9] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getwalletinfo user=__cookie__ \n node0 2025-05-14T10:02:51.188559Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.189474Z [httpworker.2] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__ \n node0 2025-05-14T10:02:51.193212Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.194768Z [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=invalidateblock user=__cookie__ \n node0 2025-05-14T10:02:51.231913Z [httpworker.13] [validation.cpp:3052] [DisconnectTip] [bench] - Disconnect block: 18.37ms \n node0 2025-05-14T10:02:51.247598Z [httpworker.13] [validation.cpp:2040] [IsInitialBlockDownload] Leaving InitialBlockDownload (latching to false) \n node0 2025-05-14T10:02:51.257342Z [httpworker.13] [validation.cpp:2967] [UpdateTipLog] UpdateTip: new best=5613be1333f0f3305a83b733ffb5aca47778c6d38954ca181e8a271e9a256fcf height=215 version=0x30000000 log2_work=8.754888 tx=219 date='2025-05-14T10:02:30Z' progress=1.000000 cache=0.3MiB(1txo) \n node0 2025-05-14T10:02:51.261048Z [httpworker.13] [validationinterface.cpp:235] [BlockDisconnected] [validation] Enqueuing BlockDisconnected: block hash=52ddf4d829b618e6614f6377915b7e20e3848ec6457f61ef997a8b95182dd2a2 block height=216 \n node0 2025-05-14T10:02:51.288049Z [httpworker.13] [validation.cpp:2078] [InvalidChainFound] InvalidChainFound: invalid block=52ddf4d829b618e6614f6377915b7e20e3848ec6457f61ef997a8b95182dd2a2  height=216  log2_work=8.761551  date=2025-05-14T10:02:41Z \n node0 2025-05-14T10:02:51.289738Z [httpworker.13] [validation.cpp:2083] [InvalidChainFound] InvalidChainFound:  current best=5613be1333f0f3305a83b733ffb5aca47778c6d38954ca181e8a271e9a256fcf  height=215  log2_work=8.754888  date=2025-05-14T10:02:30Z \n node0 2025-05-14T10:02:51.299740Z [httpworker.13] [validationinterface.cpp:187] [ActiveTipChange] [validation] ActiveTipChange: new block hash=5613be1333f0f3305a83b733ffb5aca47778c6d38954ca181e8a271e9a256fcf block height=215 \n node0 2025-05-14T10:02:51.309128Z [scheduler] [validationinterface.cpp:235] [operator()] [validation] BlockDisconnected: block hash=52ddf4d829b618e6614f6377915b7e20e3848ec6457f61ef997a8b95182dd2a2 block height=216 \n node0 2025-05-14T10:02:51.339554Z [scheduler] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: BEGIN TRANSACTION \n node0 2025-05-14T10:02:51.340926Z [scheduler] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:51.352258Z [scheduler] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: COMMIT TRANSACTION \n node0 2025-05-14T10:02:51.379444Z [scheduler] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:51.383478Z [scheduler] [wallet/wallet.h:924] [WalletLogPrintf] [reorg_crash] AddToWallet a206802b6f3fb1bfc0c475cf6fdf1821fa2ffb87cf9223a58c8a62355ee831e4  update Inactive (abandoned=1) \n node0 2025-05-14T10:02:51.384177Z [scheduler] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest/reorg_crash/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?) \n node0 2025-05-14T10:02:51.390525Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.392793Z [httpworker.1] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__ \n node0 2025-05-14T10:02:51.404657Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.405706Z [httpworker.15] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getwalletinfo user=__cookie__ \n node0 2025-05-14T10:02:51.414251Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.417299Z [httpworker.10] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblock user=__cookie__ \n node0 2025-05-14T10:02:51.497784Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/reorg_crash from 127.0.0.1:57014 \n node0 2025-05-14T10:02:51.499049Z [httpworker.12] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=gettransaction user=__cookie__ \n test  2025-05-14T10:02:51.629000Z TestFramework.node0 (DEBUG): Node stopped \n test  2025-05-14T10:02:51.629000Z TestFramework.utils (DEBUG): Deleting leftover cookie file \n test  2025-05-14T10:02:51.630000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \n test  2025-05-14T10:02:55.888000Z TestFramework (ERROR): Unexpected exception caught during testing \n                                   Traceback (most recent call last):\n                                     File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 183, in main\n                                       self.run_test()\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/wallet_reorgsrestore.py\", line 214, in run_test\n                                       self.test_reorg_handling_during_unclean_shutdown()\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/wallet_reorgsrestore.py\", line 119, in test_reorg_handling_during_unclean_shutdown\n                                       self.start_node(0)\n                                     File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 583, in start_node\n                                       node.wait_for_rpc_connection()\n                                     File \"/ci_container_base/test/functional/test_framework/test_node.py\", line 275, in wait_for_rpc_connection\n                                       raise FailedToStartError(self._node_msg(\n                                   test_framework.test_node.FailedToStartError: [node 0] bitcoind exited with status 1 during initialization. Error: Cannot obtain a lock on directory /tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest. Bitcoin Core is probably already running.\n                                   ************************\n test  2025-05-14T10:02:55.890000Z TestFramework (DEBUG): Closing down network thread \n test  2025-05-14T10:02:55.941000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2025-05-14T10:02:55.941000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0 \n test  2025-05-14T10:02:55.941000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/test_framework.log \n test  2025-05-14T10:02:55.941000Z TestFramework (ERROR): \n test  2025-05-14T10:02:55.941000Z TestFramework (ERROR): Hint: Call /ci_container_base/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0' to consolidate all logs \n test  2025-05-14T10:02:55.941000Z TestFramework (ERROR): \n test  2025-05-14T10:02:55.942000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2025-05-14T10:02:55.942000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2025-05-14T10:02:55.942000Z TestFramework (ERROR): \n node0 2025-05-14T10:03:36.019830Z [scheduler] [net.cpp:2427] [StartExtraBlockRelayPeers] [net] enabling extra block-relay-only peers \n\n node0 stderr Error: Cannot obtain a lock on directory /tmp/test_runner_‚Çø_üèÉ_20250514_100134/wallet_reorgsrestore_0/node0/regtest. Bitcoin Core is probably already running.\n```\n\nLooks similar to #32066, which was fixed in #32069. cc @furszy @mzumsande.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-05-14T10:15:43Z",
      "updated_at": "2025-05-15T15:24:50Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/32493",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "Does it always happen, or did this start at some point  in the git history?",
          "created_at": "2025-05-14T12:02:40Z"
        },
        {
          "user": "maflcko",
          "body": "Ubuntu Archives were down today, so I applied some patches before reproducing:\n\n```diff\ndiff --git a/ci/test/01_base_install.sh b/ci/test/01_base_install.sh\nindex 1344563268..49aeeacf53 100755\n--- a/ci/test/01_base_install.sh\n+++ b/ci/test/01_base_install.sh\n@@ -21,6 +21,9 @@ if [ -n \"$DPKG_ADD_ARCH\" ]; then\n   dpkg --add-architecture \"$DPKG_ADD_ARCH\"\n fi\n \n+apt update && apt install ca-certificates -y\n+echo -e \"# Packages and Updates from the Hetzner Ubuntu Mirror\\ndeb https://mirror.hetzner.com/ubuntu/packages noble main restricted universe multiverse\\ndeb https://mirror.hetzner.com/ubuntu/packages noble-updates main restricted universe multiverse\\ndeb https://mirror.hetzner.com/ubuntu/packages noble-backports main restricted universe multiverse\\ndeb https://mirror.hetzner.com/ubuntu/packages noble-security main restricted universe multiverse\" | tee /etc/apt/sources.list.d/hetzner-mirror.list\n+\n if [ -n \"${APT_LLVM_V}\" ]; then\n   ${CI_RETRY_EXE} apt-get update\n   ${CI_RETRY_EXE} apt-get install curl -y\ndiff --git a/ci/test/03_test_script.sh b/ci/test/03_test_script.sh\nindex 3dd44807c9..ace5413458 100755\n--- a/ci/test/03_test_script.sh\n+++ b/ci/test/03_test_script.sh\n@@ -155,7 +155,7 @@ fi\n if [ \"$RUN_FUNCTIONAL_TESTS\" = \"true\" ]; then\n   # parses TEST_RUNNER_EXTRA as an array which allows for multiple arguments such as TEST_RUNNER_EXTRA='--exclude \"rpc_bind.py --ipv6\"'\n   eval \"TEST_RUNNER_EXTRA=($TEST_RUNNER_EXTRA)\"\n-  LD_LIBRARY_PATH=\"${DEPENDS_DIR}/${HOST}/lib\" test/functional/test_runner.py --ci \"${MAKEJOBS}\" --tmpdirprefix \"${BASE_SCRATCH_DIR}\"/test_runner/ --ansi --combinedlogslen=99999999 --timeout-factor=\"${TEST_RUNNER_TIMEOUT_FACTOR}\" \"${TEST_RUNNER_EXTRA[@]}\" --quiet --failfast\n+  LD_LIBRARY_PATH=\"${DEPENDS_DIR}/${HOST}/lib\" test/functional/test_runner.py --ci \"${MAKEJOBS}\" --tmpdirprefix \"${BASE_SCRATCH_DIR}\"/test_runner/ --ansi --combinedlogslen=99999999 --timeout-factor=\"${TEST_RUNNER_TIMEOUT_FACTOR}\" \"wallet_reorgsrestore.py\" --quiet --failfast\n fi\n \n if [ \"${RUN_TIDY}\" = \"true\" ]; then\n```\n\nMy command:\n\n`env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" RUN_UNIT_TESTS=false CCACHE_DIR=/ccache_dir CCACHE_MAXSIZE=5500M MAKEJOBS=\"-j$(nproc)\" FILE_ENV=\"./ci/test/00_setup_env_native_valgrind.sh\" ./ci/test_run_all.sh`\n\nThe result:\n\n11f8ab140fe63857f6a93b81021efda8f90ceeda is the first bad commit\n\n```\ncommit 11f8ab140fe63857f6a93b81021efda8f90ceeda\nDate:   Tue Feb 18 19:07:04 2025 -0300\n\n    test: wallet, coverage for crash on dup block disconnection during unclean shutdown\n\n test/functional/wallet_reorgsrestore.py | 52 +++++++++++++++++++++++++++++++++\n 1 file changed, 52 insertions(+)\n",
          "created_at": "2025-05-14T18:12:56Z"
        },
        {
          "user": "maflcko",
          "body": "It is a bit confusing, because it passes fine outside of the CI system.\n\n",
          "created_at": "2025-05-14T18:40:10Z"
        },
        {
          "user": "maflcko",
          "body": "I guess it is the same reason that feature_init.py was disabled in the CI only",
          "created_at": "2025-05-15T10:59:00Z"
        },
        {
          "user": "furszy",
          "body": "We could try expanding the shutdown procedure to ensure the app's lock can be acquired before returning.\nThis would guarantee that the process can be re-initiated at any time afterward. Thinking of something like: https://github.com/furszy/bitcoin-core/commit/c6c9723f523c74615d784788b51e3365c5bee7c0\n\nIf this fails, it would mean the lock file is not being released at all after the process is killed (so far, we only can guess that during Valgrind runs, the lock release process might be taking longer).",
          "created_at": "2025-05-15T15:21:44Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 12,
    "issues": 4
  }
}