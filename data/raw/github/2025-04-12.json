{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:32:11.137129+00:00",
  "date": "2025-04-12",
  "pull_requests": [
    {
      "number": 32256,
      "title": "Update feature_pruning.py",
      "body": "**Motivation:**\r\n\r\nThis PR addresses a small typo in the `mine_large_blocks` utility function within the `test/functional/feature_pruning.py` functional test. The code checked for the existence of `\"nTimes\"` (plural) as a function attribute before initializing `mine_large_blocks.nTime` (singular), while the intended variable was `nTime`.\r\n\r\n**Improvement:**\r\n\r\nFixing this typo (`nTimes` -> `nTime`) improves code clarity and correctness by ensuring the initialization logic matches the variable name used throughout the function. This makes the code easier to understand and maintain, aligning it more closely with the intent described in the accompanying comment (to initialize the time variable only on the first call).\r\n\r\n**Testing:**\r\n\r\nThis change modifies an existing functional test (`test/functional/feature_pruning.py`).\r\n\r\n**Note:** As discussed previously (and reported by sipa on IRC), fixing this typo *might* cause the `feature_pruning.py` test to fail. The original code, due to the typo, had slightly different timestamp generation behavior on subsequent calls to `mine_large_blocks` compared to the corrected code. Further investigation and potential adjustments to the test assertions might be necessary if failures occur after this fix. This PR focuses solely on correcting the identified typo for code clarity.\r\n\r\ncloses #32249 ",
      "state": "closed",
      "user": "gap-editor",
      "created_at": "2025-04-12T15:14:02Z",
      "updated_at": "2025-06-25T22:10:59Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32256",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32256.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/32256#issuecomment-2799939222) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-12T15:14:06Z"
        },
        {
          "user": "sipa",
          "body": "Please verify first that this does not break any tests.",
          "created_at": "2025-04-12T15:55:52Z"
        },
        {
          "user": "maflcko",
          "body": "The problem here is not to ask  an LLM to come up with a fix, and blindly submit it when all tests pass.\r\n\r\nThe problem is to explain the fix (and possibly why it passed before and after), so that it can be reviewed easier. Copy-pasting an LLM-generated description is the opposite of useful. If anyone wanted to look at LLM generated stuff, they could just ask an LLM themselves.\r\n\r\nMy recommendation would be to focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.\r\n\r\n\r\n",
          "created_at": "2025-04-12T16:42:37Z"
        },
        {
          "user": "fjahr",
          "body": "Concept ACK\r\n\r\nThe code change looks fine but the commit message needs to be updated to explain what it is actually changed in the commit, not just the file. The pull description isn't very helpful either as @maflcko pointed out.\r\n\r\nIf @gap-editor doesn't address the feedback with something that isn't obviously copy+paste soon, I think we close and mark up for grabs/good first issue.",
          "created_at": "2025-04-13T12:44:10Z"
        },
        {
          "user": "gap-editor",
          "body": "@fanquake can i reopen when i will be ready to work on it again?\r\n",
          "created_at": "2025-04-15T15:47:48Z"
        }
      ]
    },
    {
      "number": 32255,
      "title": "miniscript: Correct off-by-one assert guards (#31727 follow-up)",
      "body": "First instances discovered by darosior in https://github.com/bitcoin/bitcoin/pull/31727#issuecomment-2619342125.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-04-12T07:56:34Z",
      "updated_at": "2025-04-14T11:12:40Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32255",
      "labels": [
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32255.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32255#issuecomment-2798728376), [sipa](https://github.com/bitcoin/bitcoin/pull/32255#issuecomment-2798838985), [l0rinc](https://github.com/bitcoin/bitcoin/pull/32255#issuecomment-2800015330) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31719](https://github.com/bitcoin/bitcoin/pull/31719) (miniscript: fixes #29098 by only use first k valid signatures by tnndbtc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-12T07:56:37Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 3693e4d6ee003623bebb6c4c2c1672ed4c6e7a4a\r\n\r\nThis reminds me of https://github.com/bitcoin/bitcoin/pull/32122 and seems like a common error. An alternative may be to remove the verbose and erroneous asserts and just use `std::(linear_container)::at(size_t)` instead (downside would be on error the exception string is less descriptive), or enable the fast standard library hardening by default (probably a longer task, starting by opening a brainstorming issue for this first. Also has the same downside of slightly less descriptive error message compared to assert/Assert/CHECK_NONFATAL).",
          "created_at": "2025-04-12T08:07:26Z"
        },
        {
          "user": "hodlinator",
          "body": "Agree that since `assert`s are always enabled in this project, using `.at(n)` is fairly equivalent. Might switch if I re-touch.",
          "created_at": "2025-04-12T08:12:55Z"
        },
        {
          "user": "sipa",
          "body": "ACK 3693e4d6ee003623bebb6c4c2c1672ed4c6e7a4a",
          "created_at": "2025-04-12T13:48:15Z"
        },
        {
          "user": "l0rinc",
          "body": "Tested ACK 3693e4d6ee003623bebb6c4c2c1672ed4c6e7a4a\r\nChecked that each modified line is covered by tests.\r\n\r\nI also would prefer having `.at()` and `.front()` instead of the extra asserts to document it better - but I'm also fine with this.\r\n\r\n<details>\r\n<summary>Suggestion</summary>\r\n\r\n```C++\r\ndiff --git a/src/script/miniscript.h b/src/script/miniscript.h\r\nindex 3256ef967d..b20a1d3a95 100644\r\n--- a/src/script/miniscript.h\r\n+++ b/src/script/miniscript.h\r\n@@ -1009,8 +1009,7 @@ private:\r\n                     next_sats.push_back(sats[sats.size() - 1] + sub->ops.sat);\r\n                     sats = std::move(next_sats);\r\n                 }\r\n-                assert(k < sats.size());\r\n-                return {count, sats[k], sats[0]};\r\n+                return {count, sats[k], sats.front()};\r\n             }\r\n         }\r\n         assert(false);\r\n@@ -1177,8 +1176,7 @@ private:\r\n                     next_sats.push_back(sats[sats.size() - 1] + sub->ws.sat);\r\n                     sats = std::move(next_sats);\r\n                 }\r\n-                assert(k < sats.size());\r\n-                return {sats[k], sats[0]};\r\n+                return {sats[k], sats.front()};\r\n             }\r\n         }\r\n         assert(false);\r\n@@ -1227,8 +1225,7 @@ private:\r\n                     // satisfying 0 keys.\r\n                     auto& nsat{sats[0]};\r\n                     CHECK_NONFATAL(node.k != 0);\r\n-                    assert(node.k < sats.size());\r\n-                    return {std::move(nsat), std::move(sats[node.k])};\r\n+                    return {std::move(nsat), std::move(sats.at(node.k))};\r\n                 }\r\n                 case Fragment::MULTI: {\r\n                     // sats[j] represents the best stack containing j valid signatures (out of the first i keys).\r\n@@ -1253,8 +1250,7 @@ private:\r\n                     // The dissatisfaction consists of k+1 stack elements all equal to 0.\r\n                     InputStack nsat = ZERO;\r\n                     for (size_t i = 0; i < node.k; ++i) nsat = std::move(nsat) + ZERO;\r\n-                    assert(node.k < sats.size());\r\n-                    return {std::move(nsat), std::move(sats[node.k])};\r\n+                    return {std::move(nsat), std::move(sats.at(node.k))};\r\n                 }\r\n                 case Fragment::THRESH: {\r\n                     // sats[k] represents the best stack that satisfies k out of the *last* i subexpressions.\r\n@@ -1288,8 +1284,7 @@ private:\r\n                         // Include all dissatisfactions (even these non-canonical ones) in nsat.\r\n                         if (i != node.k) nsat = std::move(nsat) | std::move(sats[i]);\r\n                     }\r\n-                    assert(node.k < sats.size());\r\n-                    return {std::move(nsat), std::move(sats[node.k])};\r\n+                    return {std::move(nsat), std::move(sats.at(node.k))};\r\n                 }\r\n                 case Fragment::OLDER: {\r\n                     return {INVALID, ctx.CheckOlder(node.k) ? EMPTY : INVALID};\r\n```\r\n\r\n</details>",
          "created_at": "2025-04-13T16:16:50Z"
        },
        {
          "user": "maflcko",
          "body": "> I also would prefer having `.at()` and `.front()` instead of the extra asserts to document it better - but I'm also fine with this.\r\n\r\nI don't think `front()` is safe in C++20. See https://en.cppreference.com/w/cpp/container/span/front. This requires https://github.com/bitcoin/bitcoin/issues/32265",
          "created_at": "2025-04-14T11:12:38Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32258,
      "title": "LND can't connect with ZMQ",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nBitcoin core v29.0 is running all good, but LND can't connect to the ZMQ endpoints anymore, issue created in LND here:\nhttps://github.com/lightningnetwork/lnd/issues/9706\n\n### Expected behaviour\n\nLND should connect correctly to the ZMQ endpoints from bitcoin core v29.0, like they do with v28.1\n\n### Steps to reproduce\n\nRun LND v0.19.0rc2 together with Bitcoin core v29.0\n\n### Relevant log output\n\n```\nApr 12 23:02:53 lnd-mainnet lnd[3373367]: 2025-04-12 23:02:53.276 [INF] RPCC: Established connection to RPC server 192.168.178.109:8332\nApr 12 23:02:53 lnd-mainnet lnd[3373367]: 2025-04-12 23:02:53.276 [INF] RPCC: Established connection to RPC server 192.168.178.109:8332\nApr 12 23:02:53 lnd-mainnet lnd[3373367]: 2025-04-12 23:02:53.278 [ERR] LTND: unable to create partial chain control: unable to subscribe for zmq block events: dial tcp 192.168.178.109:28332: connect: connection refused\nApr 12 23:02:53 lnd-mainnet lnd[3373367]: 2025-04-12 23:02:53.278 [ERR] LTND: Shutting down due to error in main method rev=0053fd err=\"unable to create partial chain control: unable to subscribe for zmq block events: dial tcp 192.168.178.109:28332: connect: connection refused\"\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv29.0\n\n### Operating system and version\n\nDebian 11\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "bufo24",
      "created_at": "2025-04-12T23:18:17Z",
      "updated_at": "2025-04-15T09:41:56Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/32258",
      "labels": [
        "Docs",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "pinheadmz",
          "body": "whats your bitcoin.conf and lnd.conf? does it work if you downgrade to bitcoin 28 or lnd 18?",
          "created_at": "2025-04-12T23:27:38Z"
        },
        {
          "user": "bufo24",
          "body": "It works when I downgrade bitcoin core to 28.1, unfortunately LND 0.19 has db migrations and cannot downgrade to 0.18.x, so cannot test that.\n \nI guess this is all that's related:\nbitcoin core\n```\nzmqpubrawblock=tcp://0.0.0.0:28332\nzmqpubrawtx=tcp://0.0.0.0:28333\n```\nlnd:\n```\nbitcoind.zmqpubrawblock=tcp://192.168.178.109:28332\nbitcoind.zmqpubrawtx=tcp://192.168.178.109:28333\n```",
          "created_at": "2025-04-12T23:34:37Z"
        },
        {
          "user": "mzumsande",
          "body": "> Compiled from source\n\njust to make sure, did you compile bitcoin core with `-DWITH_ZMQ=ON` ([doc](https://github.com/bitcoin/bitcoin/blob/master/doc/zmq.md))? ",
          "created_at": "2025-04-13T04:25:45Z"
        },
        {
          "user": "bufo24",
          "body": "It works now, when compiling with `-DWITH_ZMQ=ON`. This wasn't needed with the previous build system, was it?",
          "created_at": "2025-04-13T10:45:30Z"
        },
        {
          "user": "bufo24",
          "body": "I read the draft release notes for v29.0 [here](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/29.0-Release-Notes-draft). But did not read anything about this change. Maybe worth adding that in?",
          "created_at": "2025-04-13T10:50:16Z"
        },
        {
          "user": "pinheadmz",
          "body": "There is a link to new build system options:\n\nhttps://github.com/bitcoin-core/bitcoin-devwiki/wiki/Autotools-to-CMake-Options-Mapping",
          "created_at": "2025-04-13T11:04:13Z"
        },
        {
          "user": "fanquake",
          "body": "I think the point is that pretty much everything optional is now opt in, when, previously it would be compiled in based on a dependency being available. The release notes don't seem to mention this at all.",
          "created_at": "2025-04-13T11:13:20Z"
        },
        {
          "user": "mzumsande",
          "body": "Also, zmq-related startup options such as `zmqpubhashblock` could throw an init error (or at least a warning) if zmq wasn't compiled in, instead of silently being ignored.",
          "created_at": "2025-04-13T15:02:05Z"
        },
        {
          "user": "pinheadmz",
          "body": "> init error\n\n\nThat's a good point actually, I'm pretty sure rpc `getzmqnotifications` is \"unknown command\" when not compiled",
          "created_at": "2025-04-13T15:05:35Z"
        },
        {
          "user": "pinheadmz",
          "body": "Apparently there is a historical reason to quietly ignore configurations that are known but not supported by the build: https://github.com/bitcoin/bitcoin/pull/13441",
          "created_at": "2025-04-14T13:45:23Z"
        },
        {
          "user": "glozow",
          "body": "> It works now, when compiling with -DWITH_ZMQ=ON. This wasn't needed with the previous build system, was it?\n\nIndeed, it's confusing that configure defaults changed. I added a couple sentences to the website release notes: https://github.com/bitcoin-core/bitcoincore.org/pull/1119/ Lmk how that looks? Otherwise I think this issue can be marked resolved.",
          "created_at": "2025-04-14T18:19:10Z"
        },
        {
          "user": "bufo24",
          "body": "> I added a couple sentences to the website release notes\n\nNice! This should already help!\nI will make a PR to make it more prominent in the build docs as well.",
          "created_at": "2025-04-14T18:24:50Z"
        },
        {
          "user": "maflcko",
          "body": "I've also modified https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Autotools-to-CMake-Options-Mapping#autotools-to-cmake-options-mapping to include:\n\n> The CMake variables have fixed default values and are not auto-detected at runtime. Any CMake build that requires values different from the defaults must explicitly set them. CMake will print a configure summary, which can be used to verify the build configuration.\n\n",
          "created_at": "2025-04-15T08:10:29Z"
        }
      ]
    },
    {
      "number": 32257,
      "title": ".",
      "body": "### Please describe the feature you'd like to see added.\n\n[mendiolaerick79@gmail.com](url)\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "mendiolaC79",
      "created_at": "2025-04-12T19:51:18Z",
      "updated_at": "2025-04-17T12:45:47Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32257",
      "labels": []
    },
    {
      "number": 32254,
      "title": "build: Android build and related stuff for `Qt 6.x`",
      "body": "## Summary\n\n- At the moment, Android build support was removed due to Qt 5.15â€™s limitations with NDK r25 and the migration to C++20 (as mentioned in #30049 #29360). \n\n- #30049 #29636  indicates that the removed components will be reinstated once the build system is migrated to CMake and Qt is upgraded to 6.x.\n\n- Are there any timelines or progress updates regarding the reintroduction of Android builds now that the transition to CMake is underway?\n\n",
      "state": "open",
      "user": "naftalimurgor",
      "created_at": "2025-04-12T05:12:38Z",
      "updated_at": "2025-04-13T20:48:18Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/32254",
      "labels": [
        "GUI",
        "Android"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": ">    * Are there any timelines or progress updates regarding the reintroduction of Android builds now that the transition to CMake is underway?\n\nhttps://github.com/bitcoin/bitcoin/pull/32262.",
          "created_at": "2025-04-13T16:50:22Z"
        },
        {
          "user": "naftalimurgor",
          "body": "@hebasto great work. Hoping to see this to fruition. Looking great so far.",
          "created_at": "2025-04-13T20:48:17Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 2,
    "issues": 3
  }
}