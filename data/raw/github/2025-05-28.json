{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:46:18.476725+00:00",
  "date": "2025-05-28",
  "pull_requests": [
    {
      "number": 32634,
      "title": "build: Add resource file and manifest to `bitcoin.exe`",
      "body": "This PR is a follow up to https://github.com/bitcoin/bitcoin/pull/31375, which:\r\n1. Adds a resource file for `bitcoin.exe` for consistency with other Windows executables.\r\n2. Adds an application manifest to `bitcoin.exe`, which has been required for release binaries since https://github.com/bitcoin/bitcoin/pull/32396.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-28T19:26:28Z",
      "updated_at": "2025-06-10T20:05:31Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32634",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32634.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32634#pullrequestreview-2876260861), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32634#issuecomment-2918081325) |\n| Concept ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32634#issuecomment-2918500203) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T19:26:32Z"
        },
        {
          "user": "davidgumberg",
          "body": "ACK https://github.com/bitcoin/bitcoin/pull/32634/commits/dbb2d4c3d54759f8c346882b6f98d26d5bb8e816\r\n\r\nMight be nice to have a CI check like https://github.com/davidgumberg/bitcoin/commit/1b9816052b1d8ad1d9c17945530e14ead79fce33 to prevent future regressions, but OK for a separate PR if out of scope. \r\n\r\nThis is also a blocker for #32431.",
          "created_at": "2025-05-29T02:50:30Z"
        },
        {
          "user": "Sjors",
          "body": "Concept ACK, seems consistent with the other binaries. I made a note to test a guix build on Windows later (assuming this does anything without code signing?).",
          "created_at": "2025-05-29T06:57:46Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build:\r\n```bash\r\n0762b5cbe6135d2e83b80f96248be668bb5ac514511b07f59fbd1df5094d9eee  guix-build-dbb2d4c3d547/output/aarch64-linux-gnu/SHA256SUMS.part\r\nc65f1e1fe6feb729acd0b987066d7131e5e7220c1e45c6731f9e46e1b2dca187  guix-build-dbb2d4c3d547/output/aarch64-linux-gnu/bitcoin-dbb2d4c3d547-aarch64-linux-gnu-debug.tar.gz\r\n05e4220765d4c85c5bfe89392e264b0c0cd6bd093fed2eb025f33cd9180f220c  guix-build-dbb2d4c3d547/output/aarch64-linux-gnu/bitcoin-dbb2d4c3d547-aarch64-linux-gnu.tar.gz\r\ne0bb9020320a12cadd6acb1f59e72643c38d13730d4e79560221202792faf462  guix-build-dbb2d4c3d547/output/arm-linux-gnueabihf/SHA256SUMS.part\r\ne85fab77ac70456262bf5a11bb18712061b4b183aab9531d857bce6ddbf88d26  guix-build-dbb2d4c3d547/output/arm-linux-gnueabihf/bitcoin-dbb2d4c3d547-arm-linux-gnueabihf-debug.tar.gz\r\ndf7ce4d02a13cf68932eb3462d9ab643157af898272c3c2b8cdf64bafa3ad7e5  guix-build-dbb2d4c3d547/output/arm-linux-gnueabihf/bitcoin-dbb2d4c3d547-arm-linux-gnueabihf.tar.gz\r\nc7d9de86d3ee46dade2bf45da7a03919018d8401410d984caa971bcb2df6860e  guix-build-dbb2d4c3d547/output/arm64-apple-darwin/SHA256SUMS.part\r\nbf18b71ab2b23d9ab4465af43c428fffe384aa7c76ca83b6807f080c8516f914  guix-build-dbb2d4c3d547/output/arm64-apple-darwin/bitcoin-dbb2d4c3d547-arm64-apple-darwin-codesigning.tar.gz\r\n274eeef0e3b92738c23e342788e482e3d2dc97acf65fcc92197d23c975287382  guix-build-dbb2d4c3d547/output/arm64-apple-darwin/bitcoin-dbb2d4c3d547-arm64-apple-darwin-unsigned.tar.gz\r\ne77c82775109c50efe928f21bb158471d952bf5eeb86d92bedca3e3d4a106820  guix-build-dbb2d4c3d547/output/arm64-apple-darwin/bitcoin-dbb2d4c3d547-arm64-apple-darwin-unsigned.zip\r\n27604622ce4728c2a3d4795d310cc9a774796f8bc744ddc2d585fce05dbe44d6  guix-build-dbb2d4c3d547/output/dist-archive/bitcoin-dbb2d4c3d547.tar.gz\r\nea53c6bf802b8caaacef2e39755bcbfa1c1f81e8d27c8e884e4c701ccde5ed20  guix-build-dbb2d4c3d547/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nfa822d6225bd617f233ff0de569823e57728509b976a2a15f3b2df708117666c  guix-build-dbb2d4c3d547/output/powerpc64-linux-gnu/bitcoin-dbb2d4c3d547-powerpc64-linux-gnu-debug.tar.gz\r\n2687c6e337b55434f13bce1a6d937120e757cbcd1c20d1b1d3054cb76b5b92a7  guix-build-dbb2d4c3d547/output/powerpc64-linux-gnu/bitcoin-dbb2d4c3d547-powerpc64-linux-gnu.tar.gz\r\n209f9b97d07920039391a957b7380c81431f7752f6c07f00dd182fea191178d1  guix-build-dbb2d4c3d547/output/riscv64-linux-gnu/SHA256SUMS.part\r\n3f3df816ac88daa41fc059aa044d611509ffbcd2388cfcc9d1dfe1d940e629a6  guix-build-dbb2d4c3d547/output/riscv64-linux-gnu/bitcoin-dbb2d4c3d547-riscv64-linux-gnu-debug.tar.gz\r\nb9303e7e870099c9737531322eeebd84ee806433ac51cfc1a3fce08a5d72a750  guix-build-dbb2d4c3d547/output/riscv64-linux-gnu/bitcoin-dbb2d4c3d547-riscv64-linux-gnu.tar.gz\r\nff520d86512d8346d93548c4874489034e4379244821a80663e8161434543bbe  guix-build-dbb2d4c3d547/output/x86_64-apple-darwin/SHA256SUMS.part\r\nfe718b09e41d6c964e0b68cb5cf939e16bbc669b483194a261326bcd65279831  guix-build-dbb2d4c3d547/output/x86_64-apple-darwin/bitcoin-dbb2d4c3d547-x86_64-apple-darwin-codesigning.tar.gz\r\nd52d6a880c9495aaacd8891520e8f09d7e402358d98f64794a71da61d5670ed4  guix-build-dbb2d4c3d547/output/x86_64-apple-darwin/bitcoin-dbb2d4c3d547-x86_64-apple-darwin-unsigned.tar.gz\r\n7f8611320fce39aa4be6878e95ac4ca00e879ad5cc7b1b7d045f50e767a77f9e  guix-build-dbb2d4c3d547/output/x86_64-apple-darwin/bitcoin-dbb2d4c3d547-x86_64-apple-darwin-unsigned.zip\r\n9471fc34f66addac4e6956a35128616c294cb6d756555917d10f43336de6d84b  guix-build-dbb2d4c3d547/output/x86_64-linux-gnu/SHA256SUMS.part\r\nbe7f11f8e651e6c94814609e33d57ff2357cdd242eddefc640a0c11f33923f26  guix-build-dbb2d4c3d547/output/x86_64-linux-gnu/bitcoin-dbb2d4c3d547-x86_64-linux-gnu-debug.tar.gz\r\n3fbe22c1e88915e666374538a057e011691a845d72150be552dc0b9c7b74bf49  guix-build-dbb2d4c3d547/output/x86_64-linux-gnu/bitcoin-dbb2d4c3d547-x86_64-linux-gnu.tar.gz\r\n8ff25d176d59a4ec0de0ffeb9dc720865785c4dbf77ee651f62e94593c391c24  guix-build-dbb2d4c3d547/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n7210eb474a71510d5a15dd45c8628b1c5b36450f2f5d247a02a248589098d53b  guix-build-dbb2d4c3d547/output/x86_64-w64-mingw32/bitcoin-dbb2d4c3d547-win64-codesigning.tar.gz\r\nc92ab6bd518cb5cdf99081ce02cfdb4db0daaab7c1b56c0bcf22e62aec3742b7  guix-build-dbb2d4c3d547/output/x86_64-w64-mingw32/bitcoin-dbb2d4c3d547-win64-debug.zip\r\nede02f181ffe5209e4e2c6a11d8a460a380c49cd6478f5976594da5ec83a3fc3  guix-build-dbb2d4c3d547/output/x86_64-w64-mingw32/bitcoin-dbb2d4c3d547-win64-setup-unsigned.exe\r\n46c51d74cd46bd0ac3920a710e2d85314890d48d0ac258446bf5136309cadde3  guix-build-dbb2d4c3d547/output/x86_64-w64-mingw32/bitcoin-dbb2d4c3d547-win64-unsigned.zip\r\n```",
          "created_at": "2025-05-29T09:40:49Z"
        }
      ]
    },
    {
      "number": 32633,
      "title": "windows: Use predefined `RC_INVOKED` macro instead of custom one",
      "body": "See: https://learn.microsoft.com/en-us/windows/win32/menurc/predefined-macros.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-28T19:13:02Z",
      "updated_at": "2025-05-29T12:51:43Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32633",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32633.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32633#pullrequestreview-2877972468), [fanquake](https://github.com/bitcoin/bitcoin/pull/32633#pullrequestreview-2878165242) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T19:13:04Z"
        },
        {
          "user": "fanquake",
          "body": "This needs rebasing for #32634; otherwise, I'm not sure how a release build of this was tested, given the Windows Guix build is broken in this branch.",
          "created_at": "2025-05-29T10:08:50Z"
        },
        {
          "user": "hebasto",
          "body": "> This needs rebasing for #32634; otherwise, I'm not sure how a release build of this was tested, given the Windows Guix build is broken in this branch.\r\n\r\nSure! Rebased.",
          "created_at": "2025-05-29T10:19:16Z"
        },
        {
          "user": "hebasto",
          "body": "My Guix build:\r\n```\r\naarch64\r\n90c59c671509f759cc862b4376b374ff36707a323eda619fed3f91cf322c0de5  guix-build-55f1c2ac8beb/output/aarch64-linux-gnu/SHA256SUMS.part\r\n890e9ac6b9c445bc1fe799378d3c7f6a9ac3c6c2d650e70d1a251a23cca88394  guix-build-55f1c2ac8beb/output/aarch64-linux-gnu/bitcoin-55f1c2ac8beb-aarch64-linux-gnu-debug.tar.gz\r\n13e21adc0e0f487e19649d468753c3565f60b20d5e021576cd27cdf6aad16640  guix-build-55f1c2ac8beb/output/aarch64-linux-gnu/bitcoin-55f1c2ac8beb-aarch64-linux-gnu.tar.gz\r\nee0faf9e0a05969973fd54b9c0ba15e4732779eacc5a374f637d835aa7aac62c  guix-build-55f1c2ac8beb/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n16338ed05163322b77f24f55e9ad41f2094d43f2fe08732c2d079ee3c93f022a  guix-build-55f1c2ac8beb/output/arm-linux-gnueabihf/bitcoin-55f1c2ac8beb-arm-linux-gnueabihf-debug.tar.gz\r\nc7f94d171815bc172fb648520a34b8ba102d2e9843f2441ff28db2ea2dfa0b05  guix-build-55f1c2ac8beb/output/arm-linux-gnueabihf/bitcoin-55f1c2ac8beb-arm-linux-gnueabihf.tar.gz\r\n0537630d6459a0f01f8fc45a7f5df88dc3a021f267cea47225df58647aa135e2  guix-build-55f1c2ac8beb/output/arm64-apple-darwin/SHA256SUMS.part\r\nd7ae6b796114cc730123fb693f6a4cbc5c37220798fc345884e8998b50e8ad77  guix-build-55f1c2ac8beb/output/arm64-apple-darwin/bitcoin-55f1c2ac8beb-arm64-apple-darwin-codesigning.tar.gz\r\ne5b1efdb1fa628457280cccc7a77c56e6845cff7678f19a4a13be1aceb9a2080  guix-build-55f1c2ac8beb/output/arm64-apple-darwin/bitcoin-55f1c2ac8beb-arm64-apple-darwin-unsigned.tar.gz\r\n38305b66ec2919f3d9a7f79164da59609da8f7af08db3194374c3cd396e75d0a  guix-build-55f1c2ac8beb/output/arm64-apple-darwin/bitcoin-55f1c2ac8beb-arm64-apple-darwin-unsigned.zip\r\n512632ba356a2e858091dca086221a1d16b9b3318cb44c0b513dde6548379888  guix-build-55f1c2ac8beb/output/dist-archive/bitcoin-55f1c2ac8beb.tar.gz\r\nd7b2a957c0a793ceb1c513a5c44e216559947b0d73e7871892842c878869d94f  guix-build-55f1c2ac8beb/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n898d2168b6448b01d1d4f5440e0b7b080d05257ccf1ea4296e7a56cb568be689  guix-build-55f1c2ac8beb/output/powerpc64-linux-gnu/bitcoin-55f1c2ac8beb-powerpc64-linux-gnu-debug.tar.gz\r\n85dbd50d13f3350953e177ce8338c0dd5668debfe3fd38e13ee43e1b61b4a431  guix-build-55f1c2ac8beb/output/powerpc64-linux-gnu/bitcoin-55f1c2ac8beb-powerpc64-linux-gnu.tar.gz\r\n77693014db6da1e0e4ffd5f8af926d4c8a281cab4ccc275f4cd56d790e66fa6e  guix-build-55f1c2ac8beb/output/riscv64-linux-gnu/SHA256SUMS.part\r\n5fe0bfd79022152cf2d0580f73edc757f739d96023cce8c2697395367260ee0b  guix-build-55f1c2ac8beb/output/riscv64-linux-gnu/bitcoin-55f1c2ac8beb-riscv64-linux-gnu-debug.tar.gz\r\nf61d537f49292f2d293dd54ecae08abdbb7dd0ecc21b6f78e2e30775d9881207  guix-build-55f1c2ac8beb/output/riscv64-linux-gnu/bitcoin-55f1c2ac8beb-riscv64-linux-gnu.tar.gz\r\n8c2cdf03900513286e0ed2d2954394f264d10e0092a44d6875c1c50f26bdc706  guix-build-55f1c2ac8beb/output/x86_64-apple-darwin/SHA256SUMS.part\r\n863c6d852a80a4f256feeda2866611b9a8b4e901df5c40e0df5c478d1e8080fc  guix-build-55f1c2ac8beb/output/x86_64-apple-darwin/bitcoin-55f1c2ac8beb-x86_64-apple-darwin-codesigning.tar.gz\r\n6d99c5aa3f56520119e6ae059359fd460c6f2b50e9d563e0dc9d23bf9a4a1ee6  guix-build-55f1c2ac8beb/output/x86_64-apple-darwin/bitcoin-55f1c2ac8beb-x86_64-apple-darwin-unsigned.tar.gz\r\n665558381ee12901c5b1e7de9606f5123bee81b0ea8d3ca82b9202556ee02887  guix-build-55f1c2ac8beb/output/x86_64-apple-darwin/bitcoin-55f1c2ac8beb-x86_64-apple-darwin-unsigned.zip\r\n5af8e1f2ee0b81d33a28f3bddefe84f8e69a810bf520a08b75fbb92fb17c0012  guix-build-55f1c2ac8beb/output/x86_64-linux-gnu/SHA256SUMS.part\r\nc733984b5a957ed96edfd70e597ab2716d04d12b59d11c0a969c5d05fb77f8b9  guix-build-55f1c2ac8beb/output/x86_64-linux-gnu/bitcoin-55f1c2ac8beb-x86_64-linux-gnu-debug.tar.gz\r\nedeffd0d66afa84690948d1d831b896aef2b73f1495f75b7bccca2e88e50a444  guix-build-55f1c2ac8beb/output/x86_64-linux-gnu/bitcoin-55f1c2ac8beb-x86_64-linux-gnu.tar.gz\r\n18079f9eaa6b541fc2d4d425de55e10a8fec1fc7a549f4ac7dcf25275d632e0e  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n0d548fc0b8de0a087644930b52e8ef8b6fce93e73e1a4ff30076efee9075993e  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-codesigning.tar.gz\r\n50dfa21fba79537a7f1ddb9e870931f72fc96cc5888a70695c6fb9392f043c37  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-debug.zip\r\nd5050fd62d81535a2c074f61a5d5aba6e83ecfe60451db8d60cea6c0e98654aa  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-setup-unsigned.exe\r\n0640a1c640e827d76c43ab76d415ad417125067b1fbecc87a8235a3bcea7fbcf  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-unsigned.zip\r\n```",
          "created_at": "2025-05-29T12:38:55Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build (win):\r\n```bash\r\n512632ba356a2e858091dca086221a1d16b9b3318cb44c0b513dde6548379888  guix-build-55f1c2ac8beb/output/dist-archive/bitcoin-55f1c2ac8beb.tar.gz\r\n18079f9eaa6b541fc2d4d425de55e10a8fec1fc7a549f4ac7dcf25275d632e0e  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n0d548fc0b8de0a087644930b52e8ef8b6fce93e73e1a4ff30076efee9075993e  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-codesigning.tar.gz\r\n50dfa21fba79537a7f1ddb9e870931f72fc96cc5888a70695c6fb9392f043c37  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-debug.zip\r\nd5050fd62d81535a2c074f61a5d5aba6e83ecfe60451db8d60cea6c0e98654aa  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-setup-unsigned.exe\r\n0640a1c640e827d76c43ab76d415ad417125067b1fbecc87a8235a3bcea7fbcf  guix-build-55f1c2ac8beb/output/x86_64-w64-mingw32/bitcoin-55f1c2ac8beb-win64-unsigned.zip\r\n```",
          "created_at": "2025-05-29T12:49:26Z"
        }
      ]
    },
    {
      "number": 32632,
      "title": "wallet: sqlite: there is no need to have exclusive locking when mocking",
      "body": "For in-memory SQLite databases, exclusive locking is generally not necessary because in-memory dbs are private to the connection that created them.\r\n\r\n",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-05-28T19:01:21Z",
      "updated_at": "2025-06-04T19:03:35Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32632",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32632.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T19:01:24Z"
        },
        {
          "user": "achow101",
          "body": "Does this materially change anything for performance? If not, I'd rather keep it as is for simplicity.",
          "created_at": "2025-05-28T19:46:41Z"
        },
        {
          "user": "brunoerg",
          "body": "> Does this materially change anything for performance? If not, I'd rather keep it as is for simplicity.\r\n\r\nYes, but it's hard to measure, especially because mocking is used for testing. Anyway, we can keep as is.",
          "created_at": "2025-06-04T19:03:35Z"
        }
      ]
    },
    {
      "number": 32631,
      "title": "refactor: Convert GenTxid to `std::variant`",
      "body": "Part of the [type safety refactor](https://github.com/bitcoin/bitcoin/pull/32189).\r\n\r\nThis PR changes the GenTxid class to a variant, which holds both Txids and Wtxids. This provides compile-time type safety and eliminates the manual type check (bool m_is_wtxid). Variables that can be either a Txid or a Wtxid are now using the new GenTxid variant, instead of uint256.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2025-05-28T15:45:16Z",
      "updated_at": "2025-07-18T10:13:53Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32631",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32631.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-3007546189), [dergoegge](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-3009607187), [maflcko](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-3009084888), [theStack](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-3011294284) |\n| Concept ACK | [instagibbs](https://github.com/bitcoin/bitcoin/pull/32631#issuecomment-2919973134), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-2909638652) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/32631#pullrequestreview-2975363560) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32941](https://github.com/bitcoin/bitcoin/pull/32941) (p2p: TxOrphanage revamp cleanups by glozow)\n* [#32730](https://github.com/bitcoin/bitcoin/pull/32730) (p2p: avoid traversing blocks (twice) during IBD by furszy)\n* [#32189](https://github.com/bitcoin/bitcoin/pull/32189) (refactor: Txid type safety (parent PR) by marcofleon)\n* [#31829](https://github.com/bitcoin/bitcoin/pull/31829) (p2p: improve TxOrphanage denial of service bounds by glozow)\n* [#30116](https://github.com/bitcoin/bitcoin/pull/30116) (p2p: Fill reconciliation sets (Erlay) attempt 2 by sr-gi)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T15:45:20Z"
        },
        {
          "user": "marcofleon",
          "body": "In `txrequest` the `ByPeer` and `ByTxHash` indexes still sort announcements by the underlying uint256 txhash only, as opposed to using the GenTxid comparators which sort by type and then hash. The patch below can be used to make sure that there are no accidental switches from uint256 comparisons to GenTxid comparisons.\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 011e3cd928..1a47a39dfd 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -206,6 +206,12 @@ struct QueuedBlock {\r\n     std::unique_ptr<PartiallyDownloadedBlock> partialBlock;\r\n };\r\n \r\n+struct CompareGenTxid {\r\n+    bool operator()(const GenTxid& a, const GenTxid& b) const {\r\n+        return std::tuple(a.index(), a.ToUint256()) < std::tuple(b.index(), b.ToUint256());\r\n+    }\r\n+};\r\n+\r\n /**\r\n  * Data structure for an individual peer. This struct is not protected by\r\n  * cs_main since it does not contain validation-critical data.\r\n@@ -302,7 +308,7 @@ struct Peer {\r\n          *  non-wtxid-relay peers, wtxid for wtxid-relay peers). We use the\r\n          *  mempool to sort transactions in dependency order before relay, so\r\n          *  this does not have to be sorted. */\r\n-        std::set<GenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\r\n+        std::set<GenTxid, CompareGenTxid> m_tx_inventory_to_send GUARDED_BY(m_tx_inventory_mutex);\r\n         /** Whether the peer has requested us to send our complete mempool. Only\r\n          *  permitted if the peer has NetPermissionFlags::Mempool or we advertise\r\n          *  NODE_BLOOM. See BIP35. */\r\n@@ -856,7 +862,7 @@ private:\r\n     std::shared_ptr<const CBlock> m_most_recent_block GUARDED_BY(m_most_recent_block_mutex);\r\n     std::shared_ptr<const CBlockHeaderAndShortTxIDs> m_most_recent_compact_block GUARDED_BY(m_most_recent_block_mutex);\r\n     uint256 m_most_recent_block_hash GUARDED_BY(m_most_recent_block_mutex);\r\n-    std::unique_ptr<const std::map<GenTxid, CTransactionRef>> m_most_recent_block_txs GUARDED_BY(m_most_recent_block_mutex);\r\n+    std::unique_ptr<const std::map<GenTxid, CTransactionRef, CompareGenTxid>> m_most_recent_block_txs GUARDED_BY(m_most_recent_block_mutex);\r\n \r\n     // Data about the low-work headers synchronization, aggregated from all peers' HeadersSyncStates.\r\n     /** Mutex guarding the other m_headers_presync_* variables. */\r\n@@ -2027,7 +2033,7 @@ void PeerManagerImpl::NewPoWValidBlock(const CBlockIndex *pindex, const std::sha\r\n         std::async(std::launch::deferred, [&] { return NetMsg::Make(NetMsgType::CMPCTBLOCK, *pcmpctblock); })};\r\n \r\n     {\r\n-        auto most_recent_block_txs = std::make_unique<std::map<GenTxid, CTransactionRef>>();\r\n+        auto most_recent_block_txs = std::make_unique<std::map<GenTxid, CTransactionRef, CompareGenTxid>>();\r\n         for (const auto& tx : pblock->vtx) {\r\n             most_recent_block_txs->emplace(tx->GetHash(), tx);\r\n             most_recent_block_txs->emplace(tx->GetWitnessHash(), tx);\r\ndiff --git a/src/util/transaction_identifier.h b/src/util/transaction_identifier.h\r\nindex 3cdeb664d4..6ab5d98263 100644\r\n--- a/src/util/transaction_identifier.h\r\n+++ b/src/util/transaction_identifier.h\r\n@@ -88,13 +88,12 @@ public:\r\n         return std::visit([](const auto& id) -> const uint256& { return id.ToUint256(); }, *this);\r\n     }\r\n \r\n-    friend bool operator==(const GenTxid& a, const GenTxid& b) {\r\n-        return a.index() == b.index() && a.ToUint256() == b.ToUint256();\r\n-    }\r\n-\r\n-    friend bool operator<(const GenTxid& a, const GenTxid& b) {\r\n-        return std::tuple(a.index(), a.ToUint256()) < std::tuple(b.index(), b.ToUint256());\r\n-    }\r\n+    friend bool operator==(const GenTxid& a, const GenTxid& b) = delete;\r\n+    friend bool operator!=(const GenTxid& a, const GenTxid& b) = delete;\r\n+    friend bool operator<(const GenTxid& a, const GenTxid& b) = delete;\r\n+    friend bool operator<=(const GenTxid& a, const GenTxid& b) = delete;\r\n+    friend bool operator>(const GenTxid& a, const GenTxid& b) = delete;\r\n+    friend bool operator>=(const GenTxid& a, const GenTxid& b) = delete;\r\n };\r\n \r\n #endif // BITCOIN_UTIL_TRANSACTION_IDENTIFIER_H\r\n \r\n ```\r\n Then run `cmake --build build --target bitcoind`. To check all tests as well, comment out the unit and fuzz tests for `txrequest`, as these tests directly compare GenTxid objects.",
          "created_at": "2025-05-28T15:46:55Z"
        },
        {
          "user": "instagibbs",
          "body": "concept ACK",
          "created_at": "2025-05-29T16:42:20Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `TSan, depends, gui`: https://github.com/bitcoin/bitcoin/runs/43405323838</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by compilation errors due to missing 'util::Overloaded' and 'gtxid.ToVariant' members, indicating code incompatibility or missing definitions.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-06-03T17:42:51Z"
        },
        {
          "user": "theStack",
          "body": "Concept ACK",
          "created_at": "2025-06-04T11:21:46Z"
        },
        {
          "user": "marcofleon",
          "body": "Thanks for reviewing @stickies-v! I took your suggestion for mempool's `exists`, `info`, and `info_for_relay`. These are all fairly simple functions where I agree that the separate txid/wtxid overloads make the code clearer.\r\n\r\nI looked at `txrequest` and `txdownloadman_impl` to see where txid and wtxid could be used internally in place of the variant, but it seems to be a less straightfoward refactor. Maybe `AddTxAnnouncement` could be a good candidate? If you see something that I'm missing (or isn't as complicated as I might think it is), let me know and I'll give it a go, if not in this PR then in a follow-up.",
          "created_at": "2025-06-04T15:24:15Z"
        },
        {
          "user": "marcofleon",
          "body": "Thanks for reviewing @hodlinator and @stickies-v! Pretty sure I addressed all comments, but let me know if I missed anything in the most recent push (very possible I did). After taking your suggestions, it's looking better and cleaner now for sure. The `txrequest` changes should be quite a bit easier to review now as well.",
          "created_at": "2025-07-01T11:13:21Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45122218183</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by a lint error in the script check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-01T12:07:50Z"
        },
        {
          "user": "JeremyRubin",
          "body": "i get that this is an overall improvement to the type safety, but I think that it's gone about sort of the wrong way since it leaves a lot of data-structures that are supposed to be made homogeneous as hetergeneous still. E.g.,         \r\n\r\n```\r\nstd::set<GenTxid> m_tx_inventory_to_send;\r\n ```\r\n\r\nis _supposed_ to be     `std::variant<std::set<Txid>, std::set<WTxid>>`.\r\n\r\nYou can create a templated wrapper to encapsulate a generic container interface for this. \r\n",
          "created_at": "2025-07-11T18:52:06Z"
        },
        {
          "user": "marcofleon",
          "body": "Follow ups to these last few comments can be found here: https://github.com/bitcoin/bitcoin/pull/33005\r\n\r\nedit: after I fix CI...",
          "created_at": "2025-07-18T10:12:21Z"
        }
      ]
    },
    {
      "number": 32630,
      "title": "test: fix sync function in rpc_psbt.py",
      "body": "Even though the block is created on `node2`, the sync is only between `node1` and `node0`. Accordingly the test fails if I put a sleep in `msg_type == NetMsgType::HEADERS` processing: In this case, `node1` and `node0` do not hear about the new  block, the sync still passes because they are in sync with each other, and later on in the `test_input_confs_control` subtest, `node1` would generate a forked block instead of building on the previous one, leading to test failure.\r\n\r\nHaven't seen this in the CI, but I ran into it on an experimental branch.",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-05-28T15:25:23Z",
      "updated_at": "2025-05-28T21:25:32Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32630",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32630.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32630#issuecomment-2916784818), [achow101](https://github.com/bitcoin/bitcoin/pull/32630#issuecomment-2917407472) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T15:25:28Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 4df4df45d7bc2e8be99325d40cda936aab87c083",
          "created_at": "2025-05-28T15:34:46Z"
        },
        {
          "user": "achow101",
          "body": "ACK 4df4df45d7bc2e8be99325d40cda936aab87c083",
          "created_at": "2025-05-28T19:35:46Z"
        }
      ]
    },
    {
      "number": 32629,
      "title": "Replace dead gnome link notificator.cpp",
      "body": "Hey teamâ€”noticed a dead link, replaced it with a working URL\r\nhttps://developer.gnome.org/notification-spec/ - old link\r\nhttps://developer.gnome.org/documentation/tutorials/notifications.html - new link",
      "state": "closed",
      "user": "strmfos",
      "created_at": "2025-05-28T09:28:07Z",
      "updated_at": "2025-05-29T14:18:01Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32629",
      "labels": [
        "GUI",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32629.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-28T09:28:10Z"
        },
        {
          "user": "strmfos",
          "body": "@hebasto I removed the outdated link (comment), if I can do anything else, I'll be glad\r\nThank you",
          "created_at": "2025-05-29T13:29:21Z"
        },
        {
          "user": "hebasto",
          "body": "Please [squash](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits) your commits and update the PR title and description.",
          "created_at": "2025-05-29T13:34:27Z"
        },
        {
          "user": "fanquake",
          "body": "I'll cherry pick this into a different branch.",
          "created_at": "2025-05-29T14:18:00Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32635,
      "title": ".",
      "body": "",
      "state": "closed",
      "user": "harryvik990",
      "created_at": "2025-05-28T22:40:23Z",
      "updated_at": "2025-05-28T22:41:36Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32635",
      "labels": []
    }
  ],
  "summary": {
    "pull_requests": 6,
    "issues": 1
  }
}