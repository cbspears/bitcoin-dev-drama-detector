{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:20:26.427222+00:00",
  "date": "2025-10-06",
  "pull_requests": [
    {
      "number": 33553,
      "title": "validation: Improve warnings in case of chain corruption",
      "body": "In case of corruption that leads to a block being marked as invalid that is seen as valid by the rest of the network, the user currently doesn't receive good error messages, but will often be stuck in an endless headers-sync loop with no explanation (#26391).\r\n\r\nThis PR improves warnings in two ways:\r\n- When we receive a header that is already saved in our disk, but invalid, add a warning. This will happen repeatedly during the headerssync loop (see https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-1291765534 on how to trigger it artificially).\r\n- Removes the IBD check from `CheckForkWarningConditions` and adds a call to the function during init (`LoadChainTip()`). The existing check was added in https://github.com/bitcoin/bitcoin/commit/55ed3f14751206fc87f0cbf8cb4e223efacef338 a long time ago when we had more sophisticated fork detection that could lead to false positives during IBD, but that  logic was removed in https://github.com/bitcoin/bitcoin/commit/fa62304c9760f0de9838e56150008816e7a9bacb so that I don't see a reason to suppress the warning anymore.\r\n\r\nFixes #26391 (We'll still do the endless looping, trying to find a peer with a headers that we can use, but will now repeatedly log warnings while doing so).\r\n",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-10-06T21:49:22Z",
      "updated_at": "2025-12-09T18:30:31Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/33553",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33553.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3531547322), [sedited](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3535952294) |\n| Concept ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3310548122), [hodlinator](https://github.com/bitcoin/bitcoin/pull/33553#issuecomment-3383238791), [rkrux](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3524622915) |\n| Stale ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3398970603), [polespinasa](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3402460705), [maflcko](https://github.com/bitcoin/bitcoin/pull/33553#pullrequestreview-3479097629), [glozow](https://github.com/bitcoin/bitcoin/pull/33553#issuecomment-3633120807) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33856](https://github.com/bitcoin/bitcoin/pull/33856) (kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState by yuvicc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T21:49:29Z"
        },
        {
          "user": "mzumsande",
          "body": "> NIT: why keep looping ? is there a path where the node can recover from this ?\r\n\r\nNot if we are actually corrupted, but we can't be 100% sure. Maybe we are right, and the next peer would extend the chain that we see as valid.\r\n\r\nThere is the possibility of an an attack where a miner creates an invalid block with valid PoW (which is costly), and has some sybil nodes feed that chain to others - it wouldn't be good if this could be used to shutdown nodes. Or there could be some kind of chaotic chain split / hard fork scenario. This is not very likely to happen (hopefully), but I don't think shutting down the node automatically would be a good idea.",
          "created_at": "2025-10-07T15:23:28Z"
        },
        {
          "user": "hodlinator",
          "body": "Concept ACK 04b943b63ca4c27aa857b03e5de82ed8cae7b17d\r\n\r\nGood to see progress on this issue!",
          "created_at": "2025-10-08T21:06:38Z"
        },
        {
          "user": "stickies-v",
          "body": "> In case of corruption that leads to a block being marked as invalid\r\n\r\nIs the working assumption that the errors users are reporting in #26391 are due to disk corruption causing exactly the serialized `nStatus::BLOCK_FAILED_{VALID,CHILD}` bit to be flipped, causing the block to be loaded as invalid instead of valid, without causing any other corruption that would likely crash the application? Because while that wouldn't be impossible, it seems like an incredibly unlikely event to me?",
          "created_at": "2025-10-13T13:30:28Z"
        },
        {
          "user": "mzumsande",
          "body": "> Is the working assumption that the errors users are reporting in #26391 are due to disk corruption causing exactly the serialized `nStatus::BLOCK_FAILED_{VALID,CHILD}` bit to be flipped, causing the block to be loaded as invalid instead of valid, without causing any other corruption that would likely crash the application? Because while that wouldn't be impossible, it seems like an incredibly unlikely event to me?\r\n\r\nNo, that would indeed be unlikely. The assumption is that some kind of corruption led to a downloaded block being marked as invalid during `ConnectBlock()` erroneously - the `BLOCK_FAILED` flag is then set by the validation code as a result. The original corruption could also be with the UTXO set (e.g. an input needed by the block is no longer there) or with the block.",
          "created_at": "2025-10-14T19:17:39Z"
        },
        {
          "user": "hodlinator",
          "body": "Please excuse me while I beat the dead horse before digging deeper. Was also assuming this had to do with some kind of corruption in the bits of `CBlockIndex::nStatus` while at rest on disk, thanks for clearing this up! In https://github.com/bitcoin/bitcoin/issues/26391#issuecomment-1291737018 we find what triggered the original issue:\r\n```\r\nERROR: ConnectBlock: Consensus::CheckTxInputs: 878d6685666400b75a1947ccfc676249ecdf52678b2dc0d83e0328f8c24a951a, bad-txns-inputs-missingorspent, CheckTxInputs: inputs missing/spent\r\nInvalidChainFound: invalid block=000000000000032021a6d18011d202df36cf07822a657b47390ab90568bb14e2  height=224855  log2_work=69.513793  date=2013-03-08T15:58:52Z\r\n```\r\n\r\nWhen checking the inputs of the above transaction https://mempool.space/tx/878d6685666400b75a1947ccfc676249ecdf52678b2dc0d83e0328f8c24a951a, the UTXO set (chainstate) for some reason doesn't contain expected entries. We mark the block as invalid, _even though the UTXO set is the culprit_. - The transaction itself is not corrupt, since it hashed into a valid txid. And the block (224855) is probably intact as the inputs are from older blocks, 224108 and 224589, and earlier checks in `ConnectBlock()` would probably have failed too if the block data had been mutated.\r\n\r\nQ1: Maybe bitcoind could automatically wipe the UTXO set if the current block is an ancestor of the assume valid hash, instead of marking the block as invalid?\r\n\r\nAnother less drastic alternative could be to not automatically wipe the UTXO set, but log a suggestion to `-reindex` and - if block is an ancestor of assume valid - *Shut the node down.*\r\n\r\nIn the full debug.log from the original issue one can see that 224108 and 224589 where downloaded within the same process lifetime as 224855. So this is the UTXO set being corrupted while bitcoind is running.\r\n\r\nQ2: Do we suspect that the UTXO set was corrupted / out of sync due to a logic error, or cosmic ray-type event out of our control?\r\n\r\nEdit: Clarified Qs and avoided negation.\r\nEdit2: Suggested less drastic alternative to wiping UTXO set. Corrected assume UTXO -> assume valid.",
          "created_at": "2025-10-15T13:36:00Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK 6d2c8ea9dbd77c71051935b5ab59224487509559 ðŸ”°\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 6d2c8ea9dbd77c71051935b5ab59224487509559 ðŸ”°\r\ne7zVGtlAw9tQANK5Te51nUSvNnbjuXtLdKqar4hxyH81q3jHN8rDezqO2V3vSFP7A3uVsjQmrrS0dvig50raAQ==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-11-13T14:03:56Z"
        },
        {
          "user": "mzumsande",
          "body": "[6d2c8ea](https://github.com/bitcoin/bitcoin/commit/6d2c8ea9dbd77c71051935b5ab59224487509559) to [6db2551](https://github.com/bitcoin/bitcoin/commit/6db2551dc27c4a9b989e8814054c93dd9d8f1b36):\r\nAdded hash of invalid block  to the log.",
          "created_at": "2025-11-17T20:21:33Z"
        },
        {
          "user": "mzumsande",
          "body": "[6db2551](https://github.com/bitcoin/bitcoin/commit/6db2551dc27c4a9b989e8814054c93dd9d8f1b36) to [7f28483](https://github.com/bitcoin/bitcoin/commit/7f284835be87c4d1a8a56804992043e12dae1ea1):\r\n- addressed https://github.com/bitcoin/bitcoin/pull/33553#discussion_r2539190197\r\n- reworked the second `CheckForkWarningConditions` commit to unify the log message with the alernotify warning. I noticed the discrepancy due to #33893",
          "created_at": "2025-11-19T19:02:47Z"
        },
        {
          "user": "theStack",
          "body": "Concept ACK",
          "created_at": "2025-11-19T21:12:18Z"
        },
        {
          "user": "mzumsande",
          "body": "[7f28483](https://github.com/bitcoin/bitcoin/commit/7f284835be87c4d1a8a56804992043e12dae1ea1) to [53ef86f](https://github.com/bitcoin/bitcoin/commit/53ef86f0ecd4ca2b66c4e3dce591ac4718e38f0e):\r\nRebased due to silent conflict with #33893 and changed \"at least\" to \"more than\" in the warning message (same reason as https://github.com/bitcoin/bitcoin/pull/33893#discussion_r2543670655)",
          "created_at": "2025-11-26T21:48:37Z"
        },
        {
          "user": "mzumsande",
          "body": "[53ef86f](https://github.com/bitcoin/bitcoin/commit/53ef86f0ecd4ca2b66c4e3dce591ac4718e38f0e) to [4b47113](https://github.com/bitcoin/bitcoin/commit/4b4711369880369729893ba7baef11ba2a36cf4b): rebased",
          "created_at": "2025-12-02T17:06:02Z"
        },
        {
          "user": "glozow",
          "body": "ACK `git range-diff 6d2c8ea9dbd77c71051935b5ab59224487509559...4b4711369880369729893ba7baef11ba2a36cf4b`",
          "created_at": "2025-12-09T16:21:13Z"
        }
      ]
    },
    {
      "number": 33552,
      "title": "Update README_windows.txt",
      "body": "looks good now\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "mdfaizanaquil",
      "created_at": "2025-10-06T18:42:49Z",
      "updated_at": "2025-10-06T18:44:05Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33552",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33552.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T18:42:53Z"
        }
      ]
    },
    {
      "number": 33551,
      "title": "[29.x] Finalise 29.2",
      "body": "I'm optimistic that 29.2 wont need an `rc3`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-06T15:53:05Z",
      "updated_at": "2025-10-10T15:59:02Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33551",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33551.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [instagibbs](https://github.com/bitcoin/bitcoin/pull/33551#issuecomment-3389387280), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33551#pullrequestreview-3323741676), [glozow](https://github.com/bitcoin/bitcoin/pull/33551#pullrequestreview-3324377596) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T15:53:10Z"
        },
        {
          "user": "instagibbs",
          "body": "ACK 46d9b9091baa096da30da5e14329a32f1264229a",
          "created_at": "2025-10-10T11:04:07Z"
        },
        {
          "user": "glozow",
          "body": "EDIT: ignore, I was mistaken about how long we should wait for bug reports",
          "created_at": "2025-10-10T14:03:33Z"
        }
      ]
    },
    {
      "number": 33550,
      "title": "Fix windows libc++ `fs::path` `fstream` compile errors",
      "body": "Drop support for passing `fs::path` directly to `std::ifstream` and `std::ofstream` constructors and `open()` functions, because as reported by hebasto in https://github.com/bitcoin/bitcoin/issues/33545, after https://wg21.link/lwg3430 there is no way this can continue to work in windows builds, and there are already compile errors compiling for windows with newer versions of libc++.\r\n\r\nInstead, add an `fs::path::std_path()` method that returns `std::filesystem::path` references and use it where needed.",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-10-06T15:08:04Z",
      "updated_at": "2025-10-22T08:10:56Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/pull/33550",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33550.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/33550#pullrequestreview-3305871368), [l0rinc](https://github.com/bitcoin/bitcoin/pull/33550#pullrequestreview-3357116782), [maflcko](https://github.com/bitcoin/bitcoin/pull/33550#pullrequestreview-3359282710) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27409](https://github.com/bitcoin/bitcoin/pull/27409) (Make GUI and CLI tools use the same datadir by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T15:08:08Z"
        },
        {
          "user": "hebasto",
          "body": "CI [fails](https://github.com/bitcoin/bitcoin/actions/runs/18285430177/job/52059106747):\r\n```\r\n /home/admin/actions-runner/_work/_temp/src/wallet/test/init_test_fixture.cpp:39:21: error: conversion function from 'mapped_type' (aka 'fs::path') to 'const string' (aka 'const basic_string<char>') invokes a deleted function\r\n   39 |     std::ofstream f{m_walletdir_path_cases[\"file\"]};\r\n      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/home/admin/actions-runner/_work/_temp/src/util/fs.h:65:5: note: 'operator basic_string' has been explicitly marked deleted here\r\n   65 |     operator string_type() const = delete;\r\n      |     ^\r\n/cxx_build/include/c++/v1/fstream:1303:63: note: passing argument to parameter '__s' here\r\n 1303 |   _LIBCPP_HIDE_FROM_ABI explicit basic_ofstream(const string& __s, ios_base::openmode __mode = ios_base::out);\r\n      |                                                               ^\r\n1 error generated.\r\n```",
          "created_at": "2025-10-06T15:17:39Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK f39d3e1a2f2b9cdcf0e77942fd69eb92a58ce77f, but CI fails",
          "created_at": "2025-10-06T15:24:45Z"
        },
        {
          "user": "ryanofsky",
          "body": "<!-- begin push-2 -->\r\nUpdated f39d3e1a2f2b9cdcf0e77942fd69eb92a58ce77f -> b0113afd44b4c7c0d0da9883424bd2978de3d18c ([`pr/winstream.1`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.1) -> [`pr/winstream.2`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/winstream.1..pr/winstream.2))<!-- end --> to fix CI failures caused by missing std_path replacement\r\n",
          "created_at": "2025-10-06T15:27:07Z"
        },
        {
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/pull/33550#pullrequestreview-3305372031\r\n\r\n> Maybe consider removing these lines now:\r\n\r\nNice suggestion. Attempted this in new commit.\r\n\r\n<!-- begin push-3 -->\r\nAdded 1 commits b0113afd44b4c7c0d0da9883424bd2978de3d18c -> d405c76d2e32e957a72c042f1fb82fd0cfcc8e6d ([`pr/winstream.2`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.2) -> [`pr/winstream.3`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/winstream.2...pr/winstream.3))<!-- end --> simplifying fs::path as suggested\r\n",
          "created_at": "2025-10-06T15:43:02Z"
        },
        {
          "user": "hebasto",
          "body": "> re: [#33550 (review)](https://github.com/bitcoin/bitcoin/pull/33550#pullrequestreview-3305372031)\r\n> \r\n> > Maybe consider removing these lines now:\r\n> \r\n> Nice suggestion. Attempted this in new commit.\r\n> \r\n> Added 1 commits [b0113af](https://github.com/bitcoin/bitcoin/commit/b0113afd44b4c7c0d0da9883424bd2978de3d18c) -> [d405c76](https://github.com/bitcoin/bitcoin/commit/d405c76d2e32e957a72c042f1fb82fd0cfcc8e6d) ([`pr/winstream.2`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.2) -> [`pr/winstream.3`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/winstream.2...pr/winstream.3)) simplifying fs::path as suggested\r\n\r\nThanks for taking this.\r\n\r\nI assume we still need `fs::path::filename()` though.",
          "created_at": "2025-10-06T15:44:00Z"
        },
        {
          "user": "ryanofsky",
          "body": "> I assume we still need `fs::path::filename()` though.\r\n\r\nI think we could overload it but it seems a little consistent to do that without a clear reason and without also overloading parent_path. For now just dropped some code in bitcoin.cpp which was using it.\r\n\r\n",
          "created_at": "2025-10-06T16:13:37Z"
        },
        {
          "user": "ryanofsky",
          "body": "<!-- begin push-4 -->\r\nUpdated d405c76d2e32e957a72c042f1fb82fd0cfcc8e6d -> c864a4c1940d682f7eb6fdb3b91b18d638b59330 ([`pr/winstream.3`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.3) -> [`pr/winstream.4`](https://github.com/ryanofsky/bitcoin/commits/pr/winstream.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/winstream.3..pr/winstream.4))<!-- end --> with CI fixes for second commit",
          "created_at": "2025-10-06T16:15:51Z"
        },
        {
          "user": "fanquake",
          "body": "> Added to the nightly builds in https://github.com/hebasto/bitcoin-core-nightly/pull/74.\r\n\r\nLooks like there are failing unit tests (https://github.com/hebasto/bitcoin-core-nightly/actions/runs/18313967330/job/52151177201#step:6:401):\r\n```bash\r\ntest\\util_string_tests.cpp(43): Entering test case \"ConstevalFormatString_NumSpec\"\r\ntest/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\r\ntest/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\r\n...\r\n```",
          "created_at": "2025-10-07T15:49:00Z"
        },
        {
          "user": "hebasto",
          "body": "> > Added to the nightly builds in https://github.com/hebasto/bitcoin-core-nightly/pull/74.\n> \n> \n> \n> Looks like there are failing unit tests (https://github.com/hebasto/bitcoin-core-nightly/actions/runs/18313967330/job/52151177201#step:6:401):\n> \n> ```bash\n> \n> test\\util_string_tests.cpp(43): Entering test case \"ConstevalFormatString_NumSpec\"\n> \n> test/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\n> \n> test/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\n> \n> ...\n> \n> ```\n\nCorrect. I'm looking into them.\n\nHowever, I believe those failures are not related to this PR changes.",
          "created_at": "2025-10-07T15:51:39Z"
        },
        {
          "user": "hebasto",
          "body": "> > Added to the nightly builds in [hebasto/bitcoin-core-nightly#74](https://github.com/hebasto/bitcoin-core-nightly/pull/74).\r\n> \r\n> Looks like there are failing unit tests (https://github.com/hebasto/bitcoin-core-nightly/actions/runs/18313967330/job/52151177201#step:6:401):\r\n> \r\n> ```shell\r\n> test\\util_string_tests.cpp(43): Entering test case \"ConstevalFormatString_NumSpec\"\r\n> test/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\r\n> test/util_string_tests.cpp(40): error: in \"util_string_tests/ConstevalFormatString_NumSpec\": exception \"const char*\" raised as expected: validation on the raised exception through predicate \"HasReason{error}\"\r\n> ...\r\n> ```\r\n\r\nThe issue appears to be caused by [this](https://github.com/bitcoin/bitcoin/commit/6c3c619b35cc03e883f9d2b3326f906aedde9ba7) commit.\r\n\r\nFriendly ping @l0rinc @hodlinator as co-authors of that commit :)",
          "created_at": "2025-10-07T19:33:17Z"
        },
        {
          "user": "l0rinc",
          "body": "I'm on it, it seems related to the discussion in the original PR which already had some Windows build problems: https://github.com/bitcoin/bitcoin/pull/30546#discussion_r1745687847\r\n\r\nI have reproduced the error in https://github.com/l0rinc/bitcoin-core-nightly/pull/2 with @hebasto's nightly clone redirected to `l0rinc/master`.\r\n\r\nI pushed a potential fix that adds a `const char *` overload to `HasReason` in https://github.com/l0rinc/bitcoin/pull/43 - tested through https://github.com/l0rinc/bitcoin-core-nightly/pull/1.\r\n\r\nAlso added an alternative which replaces all remaining `const char *` throws with `std::runtime_error` in https://github.com/l0rinc/bitcoin/pull/44 - tested through https://github.com/l0rinc/bitcoin-core-nightly/pull/3.\r\n\r\nBased on your feedback and on what the CI gods think, I will push one of them as a PR.\r\n\r\n----\r\n\r\nAlso note that the windows build indicates additional warnings (unused vars because of `ifndef __USING_WINDOWS__`)\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/src/randomenv.cpp:61:15: warning: '__p__environ' redeclared without 'dllimport' attribute: previous 'dllimport' ignored [-Winconsistent-dllimport]\r\n   61 | extern char** environ; // NOLINT(readability-redundant-declaration): Necessary on some platforms\r\n      |               ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/llvm_mingw_toolchain/x86_64-w64-mingw32/include/stdlib.h:656:17: note: expanded from macro 'environ'\r\n  656 | #define environ _environ\r\n      |                 ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/llvm_mingw_toolchain/x86_64-w64-mingw32/include/stdlib.h:225:21: note: expanded from macro '_environ'\r\n  225 | #define _environ (* __p__environ())\r\n      |                     ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/llvm_mingw_toolchain/x86_64-w64-mingw32/include/stdlib.h:221:27: note: previous declaration is here\r\n  221 |   _CRTIMP char ***__cdecl __p__environ(void);\r\n      |                           ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/llvm_mingw_toolchain/x86_64-w64-mingw32/include/stdlib.h:221:3: note: previous attribute is here\r\n  221 |   _CRTIMP char ***__cdecl __p__environ(void);\r\n      |   ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/llvm_mingw_toolchain/x86_64-w64-mingw32/include/_mingw.h:52:40: note: expanded from macro '_CRTIMP'\r\n   52 | #      define _CRTIMP  __attribute__ ((__dllimport__))\r\n      |    \r\n```\r\nand\r\n```\r\nIn file included from /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/src/util/exec.cpp:8:\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/src/util/subprocess.h:759:10: warning: private field 'parent_' is not used [-Wunused-private-field]\r\n  759 |   Popen* parent_ = nullptr;\r\n      |          ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/src/util/subprocess.h:760:7: warning: private field 'err_wr_pipe_' is not used [-Wunused-private-field]\r\n  760 |   int err_wr_pipe_ = -1;\r\n      |       ^\r\n/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/src/util/subprocess.h:1038:7: warning: private field 'child_pid_' is not used [-Wunused-private-field]\r\n 1038 |   int child_pid_ = -1;\r\n      |       ^\r\n ```\r\n\r\n</details>\r\n\r\nWe should likely fix these as well - I don't mind pushing a separate PR for this after the other one.",
          "created_at": "2025-10-07T22:58:26Z"
        },
        {
          "user": "hebasto",
          "body": "I've submitted an [issue](https://github.com/mstorsjo/llvm-mingw/issues/522) to https://github.com/mstorsjo/llvm-mingw.\r\n\r\n@l0rinc \r\n\r\n> I have reproduced the error in [l0rinc/bitcoin-core-nightly#2](https://github.com/l0rinc/bitcoin-core-nightly/pull/2) with @hebasto's nightly clone redirected to `l0rinc/master`.\r\n> \r\n> I pushed a potential fix that adds a `const char *` overload to `HasReason` in [l0rinc#43](https://github.com/l0rinc/bitcoin/pull/43) - tested through [l0rinc/bitcoin-core-nightly#1](https://github.com/l0rinc/bitcoin-core-nightly/pull/1).\r\n> \r\n> Also added an alternative which replaces all remaining `const char *` throws with `std::runtime_error` in [l0rinc#44](https://github.com/l0rinc/bitcoin/pull/44) - tested through [l0rinc/bitcoin-core-nightly#3](https://github.com/l0rinc/bitcoin-core-nightly/pull/3).\r\n> \r\n> Based on your feedback and on what the CI gods think, I will push one of them as a PR.\r\n\r\nI believe that [this](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#e15-throw-by-value-catch-exceptions-from-a-hierarchy-by-reference) is also a good point. Because of [array-to-pointer](https://en.cppreference.com/w/cpp/language/implicit_cast.html#Array-to-pointer_conversion) conversion, I'd lean to the second option you mentioned.\r\n\r\n---\r\n\r\n> Also note that the windows build indicates additional warnings (unused vars because of `ifndef __USING_WINDOWS__`)\r\n>\r\n> We should likely fix these as well - I don't mind pushing a separate PR for this after the other one.\r\n\r\nYes. These warnings are unrelated to the current PR changes, and I'd prefer to see them fixed in separated PR(s).",
          "created_at": "2025-10-07T23:25:19Z"
        },
        {
          "user": "l0rinc",
          "body": "> I'd lean to the second option you mentioned\r\n\r\nThanks, closed the other ones and opened https://github.com/bitcoin/bitcoin/pull/33569 - the dedicated nightly build passed: https://github.com/l0rinc/bitcoin-core-nightly/pull/3\r\n\r\n> I'd prefer to see them fixed in separated PR(s)\r\n\r\nPushed https://github.com/bitcoin/bitcoin/pull/33570 as well for `extern char** environ` - but the one in `subprocess.h` seems more involved, will leave that to someone else.",
          "created_at": "2025-10-08T00:56:48Z"
        },
        {
          "user": "ryanofsky",
          "body": "Thanks for the review!\r\n\r\n> It bothers me a bit that the first commit doesn't compile\r\n\r\nIt should compile. Github just seems to show a red x next to the commit because the job was cancelled when the second commit was pushed.\r\n\r\n> I have tried reproducing the error of removing make_preferred and filename on master, but I'm not actually getting any failure\r\n\r\nI think the failure only happened on windows. The workaround was introduced here: https://github.com/bitcoin/bitcoin/pull/20744#issuecomment-1028380153\r\n\r\n",
          "created_at": "2025-10-21T06:29:29Z"
        }
      ]
    },
    {
      "number": 33549,
      "title": "ci: Add macOS cross task for arm64-apple-darwin",
      "body": "Cross compiling to Intel macOS seems fine, but it would be good to cross compile to arm64-apple-darwin as well.\r\n\r\nFurther reading:\r\n\r\n* https://en.wikipedia.org/wiki/Mac_transition_to_Apple_silicon#Timeline.\r\n* It is harder to find native Intel macOS hardware (E.g. GitHub is in the process of dropping it: https://github.blog/changelog/2025-07-11-upcoming-changes-to-macos-hosted-runners-macos-latest-migration-and-xcode-support-policy-updates/#macos-13-is-closing-down)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-10-06T13:11:37Z",
      "updated_at": "2025-10-15T10:24:25Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/33549",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33549.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/33549#issuecomment-3381079356), [hodlinator](https://github.com/bitcoin/bitcoin/pull/33549#pullrequestreview-3334496537) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33620](https://github.com/bitcoin/bitcoin/pull/33620) (ci: Build ci_native_base image layer by maflcko)\n* [#33562](https://github.com/bitcoin/bitcoin/pull/33562) (DRAFT: add a freebsd job using systemlibs by willcl-ark)\n* [#33185](https://github.com/bitcoin/bitcoin/pull/33185) (guix: update time-machine to 5cb84f2013c5b1e48a7d0e617032266f1e6059e2 by fanquake)\n* [#32162](https://github.com/bitcoin/bitcoin/pull/32162) (depends: Switch from multilib to platform-specific toolchains by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T13:11:43Z"
        },
        {
          "user": "Sjors",
          "body": "The title is a bit confusing: \"Use ARM instead of Intel in macOS cross task\"\r\n\r\nMaybe say \"Build for\" instead of \"use\", since the job uses Ubuntu to build.\r\n\r\nIt might be better to test cross compilation for both x86 and arm, though if that takes too much CI resources then arm is probably the more important target.\r\n\r\nBriefly running the cross-compiled x86 binary on a native x86 CI machine would be useful, but it looks like Rosetta is the best we'll get from Github.\r\n\r\n\r\n",
          "created_at": "2025-10-08T09:46:00Z"
        },
        {
          "user": "maflcko",
          "body": "> It might be better to test cross compilation for both x86 and arm, though if that takes too much CI resources then arm is probably the more important target.\r\n> \r\n> Briefly running the cross-compiled x86 binary on a native x86 CI machine would be useful, but it looks like Rosetta is the best we'll get from Github.\r\n\r\nHappy to add this to my nightly CI repo, but it doesn't seem like a good use of CI resources here. Though, best I can do is the Rosetta 2 from GitHub.",
          "created_at": "2025-10-08T09:49:47Z"
        },
        {
          "user": "fanquake",
          "body": "> but it doesn't seem like a good use of CI resources here.\r\n\r\nHaving at least compilation coverage of every target we are shipping a release binary for seems like something we should have? Post switchover we are much less constrained on the CI resources front.",
          "created_at": "2025-10-08T09:54:28Z"
        },
        {
          "user": "maflcko",
          "body": "> Having at least compilation coverage of every target we are shipping a release binary for seems like something we should have? Post switchover we are much less constrained on the CI resources front.\r\n\r\nThx, done. Also, agree that cross-compilation is cheap and fast.",
          "created_at": "2025-10-08T11:04:20Z"
        },
        {
          "user": "Sjors",
          "body": "utACK fad5a7101cc3dccbb525cfe9afc105aace8da88e\r\n\r\nCI log suggests it worked.",
          "created_at": "2025-10-08T11:27:13Z"
        }
      ]
    },
    {
      "number": 33546,
      "title": "test: add functional test for `TestShell` (matching doc example)",
      "body": "This PR adds a functional framework test for the `TestShell` class. The primary motivation for this is to avoid that the example instructions for the interactive Python shell in `test-shell.md` get outdated or broken without noticing, a problem we had already several times in the past (see #26520, #27906, #31415). Having a copy is still not perfect, as docs and functional test have to be kept in sync, but I don't expect this to be a problem in practice, assuming the hint in the functional test comment is hopefully noticed if changes are made.\r\n\r\nAlternatively, the example instructions in `test-shell.md` could be removed with a hint to the functional test (I tend to prefer to keep the docs as-is though, showing the full REPL interaction).\r\n\r\nThe first commit contain two small removal fix-ups in `test-shell.md` regarding the result of the `createwallet` RPC call and the mentioning of the `noshutdown` option that was removed earlier (see #31620). Could be backported to v30.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-10-06T00:31:32Z",
      "updated_at": "2025-10-28T16:22:58Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33546",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33546.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/33546#pullrequestreview-3319800382), [stratospher](https://github.com/bitcoin/bitcoin/pull/33546#pullrequestreview-3338732396), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/33546#pullrequestreview-3384132863) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-10-06T00:31:38Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like the new test times out in CI?",
          "created_at": "2025-10-06T06:19:29Z"
        },
        {
          "user": "theStack",
          "body": "Force-pushed with a fix to make the test also work for non-wallet builds. With this, all CI jobs should pass now.\r\n\r\n> Looks like the new test times out in CI?\r\n\r\nHmm, seems like the test just hangs whenever the `TestShell` instance is not shut down at the end. Wrapped it in an `try: ... finally: test.shutdown()` block in order to prevent time-outs if any exception would be thrown there.",
          "created_at": "2025-10-06T08:15:05Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33554,
      "title": "[`v30.0rc3`]`bitcoin-node` aborts with mining IPC interface usage",
      "body": "this is similar to #33463 cc @ryanofsky \n\nhowever there's no usage of `waitTipChanged`, only `waitNext`... and the proble is not that `bitcoin-node` is unkillable, but that it aborts\n\nsteps to reproduce:\n- build `bitcoin-node` from `v30.0rc3` tag\n- clone https://github.com/plebhash/sv2-bitcoin-core\n- check out `2025-10-06-abort-proxy-io` branch\n- launch `bitcoin-node` with `-ipc-bind=unix`\n- launch `sv2-bitcoin-core` with `cargo run --example logger \"/path/to/node.sock\"`\n\nhere's a stack trace of `bitcoin-node` with a failed assertion at file `proxy-io.h`, line 289:\n\nhttps://pastebin.com/uugSA6cD\n\nand another one with a failed assertion at file `proxy.h`, line 59:\n\nhttps://pastebin.com/g2NBei2n\n\n(exceeds 65536 characters so github doesn't allow me to paste here, I hope I'm not violating any rules)",
      "state": "closed",
      "user": "plebhash",
      "created_at": "2025-10-06T22:20:25Z",
      "updated_at": "2025-11-18T20:58:05Z",
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/issues/33554",
      "labels": [
        "interfaces"
      ],
      "comment_list": [
        {
          "user": "plebhash",
          "body": "also reproducible on `v30-0rc1` tag",
          "created_at": "2025-10-06T22:45:43Z"
        },
        {
          "user": "plebhash",
          "body": "one relevant detail here is that our rust code has evolved from what it looked like when I first reported https://github.com/bitcoin/bitcoin/issues/33463, and there I did not witness this behavior\n\nnow, every 10s, we receive a Sv2 [`CoinbaseOutputConstraints`](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputconstraints-client---server) message, which is meant to set the coinbase parameters with regards to blockspace consumption (weight and sigops)\n\nso everytime this message arrives, we create a fresh new `BlockTemplate` IPC client with those new parameters\n\nwe do not call `destroy` on the previous one, because we don't know if we could still receive a [`submitSolution`](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#77-submitsolution-client---server) associated with a template that was generated from it\n\nso we keep clones of past `BlockTemplate` IPC client in memory (as many clones as templates generated from the same instance) and drop them all whenever there's a new chain tip (also without calling `destroy`)",
          "created_at": "2025-10-06T22:57:55Z"
        },
        {
          "user": "ryanofsky",
          "body": "(So far I'm not able to reproduce a crash with v30.0rc3, but that might just be because I was testing with regtest.)\n\nThe assert you see happening on [line 289](https://github.com/bitcoin-core/libmultiprocess/blob/13424cf2ecc1e5eadc85556cf1f4c65e915f702a/include/mp/proxy-io.h#L289) just happens when the IPC client asks the server to execute multiple IPC calls simultaneously on the same thread. The IPC server does not expect this and currently aborts when it happens.\n\nIt is possible for the server to execute multiple IPC calls simultaneously, but the client needs to create more than one thread thread with [ThreadMap.makeThread](https://github.com/plebhash/sv2-bitcoin-core/blob/93fd9dcf1baf8d8897bcd34e4f4cb86d0616cc19/src/lib.rs#L136-L140) and [assign](https://github.com/plebhash/sv2-bitcoin-core/blob/93fd9dcf1baf8d8897bcd34e4f4cb86d0616cc19/src/lib.rs#L283) different threads to the IPC calls that are supposed to execute simultaneously.\n\nThe server is pretty fragile and unhelpful for failing this way, but a recently merged PR https://github.com/bitcoin-core/libmultiprocess/pull/214 should make the situation better by having the server return with a \"thread busy\" error instead of aborting when this happens.\n\n",
          "created_at": "2025-10-07T00:44:15Z"
        },
        {
          "user": "ryanofsky",
          "body": "Just to be clear about next steps, the node aborts should be prevented by https://github.com/bitcoin-core/libmultiprocess/pull/214 which is set to be backported in https://github.com/bitcoin/bitcoin/pull/33519. (The aborts were originally intentional but are an unnecessarily harsh way to fail, so those PR's replace them with IPC \"thread busy\" errors.)\n\nRegardless of this, the rust client code needs to be changed to either not make other IPC calls at the same time as there is an active `waitNext()` IPC call, or to just create more server threads and request the waitNext call to run on a different thread than the other IPC calls.",
          "created_at": "2025-10-07T13:19:10Z"
        },
        {
          "user": "plebhash",
          "body": "I updated the code with the advice above and `bitcoin-node` no longer crashes during normal operation... I can leave it running for hours without a crash.\n\nBut if I kill my rust code, it still causes a crash on `bitcoin-node`... I wonder if I'm still doing something wrong on shutdown?\n\nsteps to reproduce:\n- build `bitcoin-node` from https://github.com/bitcoin/bitcoin/pull/33519\n- clone https://github.com/plebhash/sv2-bitcoin-core\n- check out `2025-10-06-abort-proxy-io` branch\n- launch `bitcoin-node` with `-ipc-bind=unix` (connected to `testnet4`)\n- launch `sv2-bitcoin-core` with `cargo run --example logger \"/path/to/node.sock\"`\n- wait for at least one mempool fee change\n- kill the rust code with `ctrl+c`\n\nhere's stack trace:\n\n```\nAssertion failed: (m_loop), function operator*, file proxy.h, line 59.\nProcess 6886 stopped\n* thread #45, stop reason = hit program assert\n    frame #4: 0x0000000100620940 bitcoin-node`mp::EventLoopRef::operator*(this=<unavailable>) const at proxy.h:59:36 [opt] [inlined]\nTarget 0: (bitcoin-node) stopped.\nwarning: bitcoin-node was compiled with optimization - stepping may behave oddly; variables may not be available.\n(lldb) thread backtrace all\n  thread #1, queue = 'com.apple.main-thread'\n    frame #0: 0x000000018cfa67dc libsystem_kernel.dylib`read + 8\n    frame #1: 0x000000010074df40 bitcoin-node`TokenPipeEnd::TokenRead(this=0x0000000100a38788) at tokenpipe.cpp:60:26 [opt]\n    frame #2: 0x000000010073a600 bitcoin-node`util::SignalInterrupt::wait(this=<unavailable>) at signalinterrupt.cpp:69:24 [opt]\n    frame #3: 0x00000001000042f4 bitcoin-node`main(argc=<unavailable>, argv=<unavailable>) at bitcoind.cpp:283:58 [opt]\n    frame #4: 0x000000018cc46b98 dyld`start + 6076\n  thread #2, name = 'b-scheduler'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001006baf5c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=<unavailable>, __lk=0x000000016fe86e68, __d=<unavailable>) at condition_variable.h:0 [opt] [inlined]\n    frame #4: 0x00000001006baf4c bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=<unavailable>, __lk=0x000000016fe86e68, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x23) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001006baf4c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=<unavailable>, __lk=0x000000016fe86e68, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001006baf4c bitcoin-node`CScheduler::serviceQueue(this=0x000060000214c000) at scheduler.cpp:43:38 [opt]\n    frame #7: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x000000016fe86f78) const at function.h:436:12 [opt] [inlined]\n    frame #8: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x000000016fe86f78) const at function.h:995:10 [opt] [inlined]\n    frame #9: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"scheduler\", thread_func=function<void ()> @ 0x000000016fe86f78) at thread.cpp:21:9 [opt]\n    frame #10: 0x0000000100088eac bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>(__f=0x000060000104daa8, __args=0x000060000104dab0, __args=0x000060000104dab8) at invoke.h:179:25 [opt] [inlined]\n    frame #11: 0x0000000100088e78 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #12: 0x0000000100088e78 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>>(__vp=0x000060000104daa0) at thread.h:208:3 [opt]\n    frame #13: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #3, name = 'b-capnp-loop'\n    frame #0: 0x000000018cfabd04 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x000000010145ce70 libkj-async.1.0.2.dylib`kj::UnixEventPort::doKqueueWait(timespec*) + 76\n    frame #2: 0x000000010145d470 libkj-async.1.0.2.dylib`kj::UnixEventPort::wait() + 144\n    frame #3: 0x000000010144f46c libkj-async.1.0.2.dylib`kj::EventLoop::wait() + 40\n    frame #4: 0x000000010144faa8 libkj-async.1.0.2.dylib`kj::_::waitImpl(kj::Own<kj::_::PromiseNode, kj::_::PromiseDisposer>&&, kj::_::ExceptionOrValue&, kj::WaitScope&, kj::SourceLocation) + 528\n    frame #5: 0x0000000100622b28 bitcoin-node`kj::Promise<unsigned long>::wait(this=<unavailable>, waitScope=<unavailable>, location=(fileName = \"ipc/libmultiprocess/src/mp/proxy.cpp\", function = \"loop\", lineNumber = 240, columnNumber = 68)) at async-inl.h:1357:3 [opt]\n    frame #6: 0x0000000100622168 bitcoin-node`mp::EventLoop::loop(this=0x0000000127704768) at proxy.cpp:240:68 [opt]\n    frame #7: 0x000000010038e4c4 bitcoin-node`ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()::operator()(this=0x000060000104dae8) const at protocol.cpp:96:21 [opt] [inlined]\n    frame #8: 0x000000010038e41c bitcoin-node`decltype(std::declval<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__f=0x000060000104dae8) at invoke.h:179:25 [opt] [inlined]\n    frame #9: 0x000000010038e41c bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #10: 0x000000010038e41c bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, ipc::capnp::(anonymous namespace)::CapnpProtocol::startLoop(char const*)::'lambda'()>>(__vp=0x000060000104dae0) at thread.h:208:3 [opt]\n    frame #11: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #4, name = 'b-http'\n    frame #0: 0x000000018cfabd04 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x0000000101093a90 libevent_core-2.1.7.dylib`kq_dispatch + 492\n    frame #2: 0x000000010108a0b8 libevent_core-2.1.7.dylib`event_base_loop + 596\n    frame #3: 0x00000001000479a0 bitcoin-node`ThreadHTTP(base=0x0000000127604340) at httpserver.cpp:355:5 [opt]\n    frame #4: 0x000000010004e120 bitcoin-node`decltype(std::declval<void (*)(event_base*)>()(std::declval<event_base*>())) std::__1::__invoke[abi:ne200100]<void (*)(event_base*), event_base*>(__f=0x000060000104db08, __args=0x000060000104db10) at invoke.h:179:25 [opt] [inlined]\n    frame #5: 0x000000010004e118 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*, 2ul>(__t=size=3, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #6: 0x000000010004e118 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(event_base*), event_base*>>(__vp=0x000060000104db00) at thread.h:208:3 [opt]\n    frame #7: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #5, name = 'b-httpworker.0'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=0) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104e588, __args=0x000060000104e590, __args=0x000060000104e598) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104e580) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #6, name = 'b-httpworker.1'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=1) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104df08, __args=0x000060000104df10, __args=0x000060000104df18) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104df00) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #7, name = 'b-httpworker.2'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=2) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104df48, __args=0x000060000104df50, __args=0x000060000104df58) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104df40) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #8, name = 'b-httpworker.3'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=3) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104df68, __args=0x000060000104df70, __args=0x000060000104df78) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104df60) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #9, name = 'b-httpworker.4'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=4) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104df88, __args=0x000060000104df90, __args=0x000060000104df98) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104df80) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #10, name = 'b-httpworker.5'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=5) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104df28, __args=0x000060000104df30, __args=0x000060000104df38) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104df20) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #11, name = 'b-httpworker.6'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=6) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104dfa8, __args=0x000060000104dfb0, __args=0x000060000104dfb8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104dfa0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #12, name = 'b-httpworker.7'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=7) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104dfc8, __args=0x000060000104dfd0, __args=0x000060000104dfd8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104dfc0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #13, name = 'b-httpworker.8'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=8) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104dfe8, __args=0x000060000104dff0, __args=0x000060000104dff8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104dfe0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #14, name = 'b-httpworker.9'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=9) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104e008, __args=0x000060000104e010, __args=0x000060000104e018) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104e000) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #15, name = 'b-httpworker.10'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=10) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104e028, __args=0x000060000104e030, __args=0x000060000104e038) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104e020) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #16, name = 'b-httpworker.11'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=11) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104e048, __args=0x000060000104e050, __args=0x000060000104e058) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104e040) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #17, name = 'b-httpworker.12'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=12) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104e068, __args=0x000060000104e070, __args=0x000060000104e078) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104e060) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #18, name = 'b-httpworker.13'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=13) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104ea88, __args=0x000060000104ea90, __args=0x000060000104ea98) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104ea80) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #19, name = 'b-httpworker.14'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=14) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104eaa8, __args=0x000060000104eab0, __args=0x000060000104eab8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104eaa0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #20, name = 'b-httpworker.15'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x000000010004d56c bitcoin-node`WorkQueue<HTTPClosure>::Run(this=0x0000600002748b00) at httpserver.cpp:111:26 [opt]\n    frame #4: 0x0000000100047a94 bitcoin-node`HTTPWorkQueueRun(queue=0x0000600002748b00, worker_num=15) at httpserver.cpp:419:12 [opt]\n    frame #5: 0x000000010004d2c8 bitcoin-node`decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(__f=0x000060000104eac8, __args=0x000060000104ead0, __args=0x000060000104ead8) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010004d2bc bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010004d2bc bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(__vp=0x000060000104eac0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #21, name = 'b-scriptch.0'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x000060000104d6e0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #22, name = 'b-scriptch.1'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x000060000104eb40) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #23, name = 'b-scriptch.2'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x000060000104eb60) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #24, name = 'b-scriptch.3'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x000060000104eb80) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #25, name = 'b-scriptch.4'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000600001040000) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #26, name = 'b-scriptch.5'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000600001040020) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #27, name = 'b-scriptch.6'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000600001040040) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #28, name = 'b-scriptch.7'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000600001040060) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #29, name = 'b-scriptch.8'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x0000600001040080) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #30, name = 'b-scriptch.9'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x00006000010400a0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #31, name = 'b-scriptch.10'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x0000000100375a34 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::Loop(this=0x000000012800ca30, fMaster=<unavailable>) at checkqueue.h:108:26 [opt]\n    frame #4: 0x000000010037dc84 bitcoin-node`CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()::operator()(this=<unavailable>) const at checkqueue.h:152:17 [opt]\n    frame #5: 0x000000010037db28 bitcoin-node`decltype(std::declval<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>()()) std::__1::__invoke[abi:ne200100]<CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010037db24 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #7: 0x000000010037db20 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, CCheckQueue<CScriptCheck, std::__1::pair<ScriptError_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>>::CCheckQueue(unsigned int, int)::'lambda'()>>(__vp=0x00006000010400c0) at thread.h:208:3 [opt]\n    frame #8: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #32, name = 'b-mapport'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x000000010074cb3c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000000100a387d8, __lk=0x0000000170f7acc8, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x000000010074cb30 bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=0x0000000100a387d8, __lk=0x0000000170f7acc8, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x000000010074cb30 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=0x0000000100a387d8, __lk=0x0000000170f7acc8, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000100a387d8, __lk=0x0000000170f7acc8, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000100a387d8, __lk=0x0000000170f7acc8, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x000000010074cafc bitcoin-node`CThreadInterrupt::sleep_for(this=0x0000000100a387d8, rel_time=<unavailable>) at threadinterrupt.cpp:34:18 [opt]\n    frame #9: 0x000000010009110c bitcoin-node`ThreadMapPort() at mapport.cpp:126:34 [opt]\n    frame #10: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000170f7af78) const at function.h:436:12 [opt] [inlined]\n    frame #11: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this= Function = ThreadMapPort() ) const at function.h:995:10 [opt] [inlined]\n    frame #12: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"mapport\", thread_func= Function = ThreadMapPort() ) at thread.cpp:21:9 [opt]\n    frame #13: 0x00000001000920f0 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<void (*)()>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, void (*)()>(__f=0x00006000010885e8, __args=0x00006000010885f0, __args=0x00006000010885f8) at invoke.h:179:25 [opt] [inlined]\n    frame #14: 0x00000001000920ac bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, void (*)(), 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #15: 0x00000001000920ac bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, void (*)()>>(__vp=0x00006000010885e0) at thread.h:208:3 [opt]\n    frame #16: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #33, name = 'b-torcontrol'\n    frame #0: 0x000000018cfabd04 libsystem_kernel.dylib`kevent + 8\n    frame #1: 0x0000000101093a90 libevent_core-2.1.7.dylib`kq_dispatch + 492\n    frame #2: 0x000000010108a0b8 libevent_core-2.1.7.dylib`event_base_loop + 596\n    frame #3: 0x000000010031dd68 bitcoin-node`TorControlThread(onion_service_target=CService @ 0x0000000171006ce8) at torcontrol.cpp:684:5 [opt] [inlined]\n    frame #4: 0x000000010031dcf0 bitcoin-node`StartTorControl(CService)::$_0::operator()(this=<unavailable>) const at torcontrol.cpp:702:9 [opt] [inlined]\n    frame #5: 0x000000010031dbc8 bitcoin-node`decltype(std::declval<StartTorControl(CService)::$_0&>()()) std::__1::__invoke[abi:ne200100]<StartTorControl(CService)::$_0&>(__f=<unavailable>) at invoke.h:179:25 [opt] [inlined]\n    frame #6: 0x000000010031dbc8 bitcoin-node`void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<StartTorControl(CService)::$_0&>(__args=<unavailable>) at invoke.h:251:5 [opt] [inlined]\n    frame #7: 0x000000010031dbc8 bitcoin-node`void std::__1::__invoke_r[abi:ne200100]<void, StartTorControl(CService)::$_0&>(__args=<unavailable>) at invoke.h:273:10 [opt] [inlined]\n    frame #10: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000171006f48) const at function.h:436:12 [opt] [inlined]\n    frame #11: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x0000000171006f48) const at function.h:995:10 [opt] [inlined]\n    frame #12: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"torcontrol\", thread_func=function<void ()> @ 0x0000000171006f48) at thread.cpp:21:9 [opt]\n    frame #13: 0x000000010031d4c4 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<StartTorControl(CService)::$_0>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, StartTorControl(CService)::$_0>(__f=0x0000600000ac9e08, __args=0x0000600000ac9e10, __args=0x0000600000ac9e18) at invoke.h:179:25 [opt] [inlined]\n    frame #14: 0x000000010031d464 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, StartTorControl(CService)::$_0, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #15: 0x000000010031d464 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, StartTorControl(CService)::$_0>>(__vp=0x0000600000ac9e00) at thread.h:208:3 [opt]\n    frame #16: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #34, name = 'b-net'\n    frame #0: 0x000000018cfb0c2c libsystem_kernel.dylib`__select + 8\n    frame #1: 0x000000010073b304 bitcoin-node`Sock::WaitMany(this=<unavailable>, timeout=50 ms, events_per_sock=size=13) const at sock.cpp:223:9 [opt]\n    frame #2: 0x000000010009f4e4 bitcoin-node`CConnman::SocketHandler(this=0x0000000128009400) at net.cpp:2105:73 [opt]\n    frame #3: 0x00000001000a0080 bitcoin-node`CConnman::ThreadSocketHandler(this=0x0000000128009400) at net.cpp:2237:9 [opt]\n    frame #4: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000171092f78) const at function.h:436:12 [opt] [inlined]\n    frame #5: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x0000000171092f78) const at function.h:995:10 [opt] [inlined]\n    frame #6: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"net\", thread_func=function<void ()> @ 0x0000000171092f78) at thread.cpp:21:9 [opt]\n    frame #7: 0x00000001000b8b88 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<CConnman::Start(CScheduler&, CConnman::Options const&)::$_2>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_2>(__f=0x0000600001044068, __args=0x0000600001044070, __args=0x0000600001044078) at invoke.h:179:25 [opt] [inlined]\n    frame #8: 0x00000001000b8b54 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_2, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #9: 0x00000001000b8b54 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_2>>(__vp=0x0000600001044060) at thread.h:208:3 [opt]\n    frame #10: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #35, name = 'b-addcon'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x000000010074cb3c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000000128009748, __lk=0x00000001711aad88, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x000000010074cb30 bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=0x0000000128009748, __lk=0x00000001711aad88, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x000000010074cb30 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=0x0000000128009748, __lk=0x00000001711aad88, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000128009748, __lk=0x00000001711aad88, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000128009748, __lk=0x00000001711aad88, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x000000010074cafc bitcoin-node`CThreadInterrupt::sleep_for(this=0x0000000128009748, rel_time=<unavailable>) at threadinterrupt.cpp:34:18 [opt]\n    frame #9: 0x00000001000a5cc0 bitcoin-node`CConnman::ThreadOpenAddedConnections(this=0x0000000128009400) at net.cpp:2984:27 [opt]\n    frame #10: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x00000001711aaf78) const at function.h:436:12 [opt] [inlined]\n    frame #11: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x00000001711aaf78) const at function.h:995:10 [opt] [inlined]\n    frame #12: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"addcon\", thread_func=function<void ()> @ 0x00000001711aaf78) at thread.cpp:21:9 [opt]\n    frame #13: 0x00000001000b9548 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<CConnman::Start(CScheduler&, CConnman::Options const&)::$_4>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_4>(__f=0x00006000010440a8, __args=0x00006000010440b0, __args=0x00006000010440b8) at invoke.h:179:25 [opt] [inlined]\n    frame #14: 0x00000001000b9514 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_4, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #15: 0x00000001000b9514 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_4>>(__vp=0x00006000010440a0) at thread.h:208:3 [opt]\n    frame #16: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #36, name = 'b-opencon'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x000000010074cb3c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000000128009748, __lk=0x00000001712369d8, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x000000010074cb30 bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=0x0000000128009748, __lk=0x00000001712369d8, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x20) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x000000010074cb30 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=0x0000000128009748, __lk=0x00000001712369d8, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000128009748, __lk=0x00000001712369d8, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x000000010074cb30 bitcoin-node`bool std::__1::condition_variable::wait_for[abi:ne200100]<long long, std::__1::ratio<1l, 1000000000l>, CThreadInterrupt::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>)::$_0>(this=0x0000000128009748, __lk=0x00000001712369d8, __d=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:205:10 [opt] [inlined]\n    frame #8: 0x000000010074cafc bitcoin-node`CThreadInterrupt::sleep_for(this=0x0000000128009748, rel_time=<unavailable>) at threadinterrupt.cpp:34:18 [opt]\n    frame #9: 0x00000001000a22d8 bitcoin-node`CConnman::ThreadOpenConnections(this=0x0000000128009400, connect=<unavailable>, seed_nodes=size=0) at net.cpp:2583:27 [opt]\n    frame #10: 0x00000001000ba1b8 bitcoin-node`CConnman::Start(CScheduler&, CConnman::Options const&)::$_5::operator()(this=0x0000600000ac9f08) const at net.cpp:3382:102 [opt] [inlined]\n    frame #11: 0x00000001000ba170 bitcoin-node`decltype(std::declval<CConnman::Start(CScheduler&, CConnman::Options const&)::$_5&>()()) std::__1::__invoke[abi:ne200100]<CConnman::Start(CScheduler&, CConnman::Options const&)::$_5&>(__f=0x0000600000ac9f08) at invoke.h:179:25 [opt] [inlined]\n    frame #12: 0x00000001000ba170 bitcoin-node`void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<CConnman::Start(CScheduler&, CConnman::Options const&)::$_5&>(__args=0x0000600000ac9f08) at invoke.h:251:5 [opt] [inlined]\n    frame #13: 0x00000001000ba170 bitcoin-node`void std::__1::__invoke_r[abi:ne200100]<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_5&>(__args=0x0000600000ac9f08) at invoke.h:273:10 [opt] [inlined]\n    frame #16: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x0000000171236f48) const at function.h:436:12 [opt] [inlined]\n    frame #17: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x0000000171236f48) const at function.h:995:10 [opt] [inlined]\n    frame #18: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"opencon\", thread_func=function<void ()> @ 0x0000000171236f48) at thread.cpp:21:9 [opt]\n    frame #19: 0x00000001000b9a94 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<CConnman::Start(CScheduler&, CConnman::Options const&)::$_5>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_5>(__f=0x000060000335c148, __args=0x000060000335c150, __args=0x000060000335c158) at invoke.h:179:25 [opt] [inlined]\n    frame #20: 0x00000001000b9a04 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_5, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #21: 0x00000001000b9a04 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_5>>(__vp=<unavailable>) at thread.h:208:3 [opt]\n    frame #22: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #37, name = 'b-msghand'\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x00000001000a6028 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=<unavailable>, __lk=0x00000001712c2e80, __d=<unavailable>) at duration.h:0:33 [opt] [inlined]\n    frame #4: 0x00000001000a601c bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<std::__1::chrono::steady_clock>(this=<unavailable>, __lk=0x00000001712c2e80, __tp=time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1L, 1000000000L> > > @ x22) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001000a601c bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>(this=<unavailable>, __lk=0x00000001712c2e80, __t=<unavailable>) at condition_variable.h:161:3 [opt] [inlined]\n    frame #6: 0x00000001000a601c bitcoin-node`bool std::__1::condition_variable::wait_until<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>, CConnman::ThreadMessageHandler()::$_0>(this=<unavailable>, __lk=0x00000001712c2e80, __t=<unavailable>, __pred=(unnamed class) @ x19) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x00000001000a601c bitcoin-node`CConnman::ThreadMessageHandler(this=0x0000000128009400) at net.cpp:3070:25 [opt]\n    frame #8: 0x000000010074c844 bitcoin-node`std::__1::__function::__value_func<void ()>::operator()[abi:ne200100](this=0x00000001712c2f78) const at function.h:436:12 [opt] [inlined]\n    frame #9: 0x000000010074c830 bitcoin-node`std::__1::function<void ()>::operator()(this=0x00000001712c2f78) const at function.h:995:10 [opt] [inlined]\n    frame #10: 0x000000010074c830 bitcoin-node`util::TraceThread(thread_name=\"msghand\", thread_func=function<void ()> @ 0x00000001712c2f78) at thread.cpp:21:9 [opt]\n    frame #11: 0x00000001000ba4e4 bitcoin-node`decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(__f=0x00006000010440c8, __args=0x00006000010440d0, __args=0x00006000010440d8) at invoke.h:179:25 [opt] [inlined]\n    frame #12: 0x00000001000ba4b0 bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6, 2ul, 3ul>(__t=size=4, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #13: 0x00000001000ba4b0 bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>(__vp=0x00006000010440c0) at thread.h:208:3 [opt]\n    frame #14: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #40\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18268 libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 32\n    frame #3: 0x00000001006250b8 bitcoin-node`mp::EventLoop::startAsyncThread()::$_0::operator()(this=0x000060000126c108) const at proxy.cpp:305:22 [opt] [inlined]\n    frame #4: 0x000000010062506c bitcoin-node`decltype(std::declval<mp::EventLoop::startAsyncThread()::$_0>()()) std::__1::__invoke[abi:ne200100]<mp::EventLoop::startAsyncThread()::$_0>(__f=0x000060000126c108) at invoke.h:179:25 [opt] [inlined]\n    frame #5: 0x000000010062506c bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_0>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #6: 0x000000010062506c bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::EventLoop::startAsyncThread()::$_0>>(__vp=0x000060000126c100) at thread.h:208:3 [opt]\n    frame #7: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n  thread #44\n    frame #0: 0x000000018cfa93cc libsystem_kernel.dylib`__psynch_cvwait + 8\n    frame #1: 0x000000018cfe80e0 libsystem_pthread.dylib`_pthread_cond_wait + 984\n    frame #2: 0x000000018cf18300 libc++.1.dylib`std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) + 104\n    frame #3: 0x0000000100174704 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_for<long long, std::__1::ratio<1l, 1000000000l>>(this=0x0000600002548d10, __lk=0x0000000177742708, __d=<unavailable>) at condition_variable.h:0 [opt] [inlined]\n    frame #4: 0x00000001001746c8 bitcoin-node`void std::__1::condition_variable::__do_timed_wait[abi:ne200100]<NodeClock>(this=0x0000600002548d10, __lk=0x0000000177742708, __tp=<unavailable>) at condition_variable.h:235:3 [opt] [inlined]\n    frame #5: 0x00000001001746c8 bitcoin-node`std::__1::cv_status std::__1::condition_variable::wait_until<NodeClock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000l>>>(this=0x0000600002548d10, __lk=0x0000000177742708, __t=0x00000001777426f8) at condition_variable.h:161:3 [opt]\n    frame #6: 0x000000010016e074 bitcoin-node`bool std::__1::condition_variable::wait_until<NodeClock, std::__1::chrono::duration<double, std::__1::ratio<1l, 1000000l>>, node::WaitAndCreateNewBlock(ChainstateManager&, node::KernelNotifications&, CTxMemPool*, std::__1::unique_ptr<node::CBlockTemplate, std::__1::default_delete<node::CBlockTemplate>> const&, node::BlockWaitOptions const&, node::BlockAssembler::Options const&)::$_0>(this=<unavailable>, __lk=0x0000000177742708, __t=0x00000001777426f8, __pred=<unavailable>) at condition_variable.h:169:9 [opt] [inlined]\n    frame #7: 0x000000010016e010 bitcoin-node`node::WaitAndCreateNewBlock(chainman=0x000000012800ca00, kernel_notifications=0x0000600002548cc0, mempool=0x0000000127715900, block_template=node::CBlockTemplate @ 0x000060002e8681a0, options=0x0000000177742878, assemble_options=0x0000600003e68008) at miner.cpp:479:49 [opt]\n    frame #8: 0x00000001001647f4 bitcoin-node`node::(anonymous namespace)::BlockTemplateImpl::waitNext(this=0x0000600003e68000, options=BlockWaitOptions @ 0x0000000177742878) at interfaces.cpp:921:29 [opt]\n    frame #9: 0x0000000100446ef8 bitcoin-node`decltype(auto) mp::ProxyMethodTraits<ipc::capnp::messages::BlockTemplate::WaitNextParams, void>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, node::BlockWaitOptions>(server_context=0x0000000177742b10, args=<unavailable>) at proxy.h:288:16 [opt] [inlined]\n    frame #10: 0x0000000100446edc bitcoin-node`decltype(auto) mp::ServerCall::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, node::BlockWaitOptions>(this=<unavailable>, server_context=0x0000000177742b10, (null)=<unavailable>, args=<unavailable>) const at proxy-types.h:448:16 [opt] [inlined]\n    frame #11: 0x0000000100446edc bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, node::BlockWaitOptions>(this=0x0000600001e54b9c, server_context=0x0000000177742b10, (null)=<unavailable>, args=0x0000000177742a78) const at proxy-types.h:471:33 [opt]\n    frame #12: 0x0000000100446e20 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::Options, 17>, node::BlockWaitOptions, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<>>((null)=<unavailable>, (null)=<unavailable>, server_context=0x0000000177742b10, fn=0x0000600001e54b9c, args=0x0000000177742b98) at proxy-types.h:307:8 [opt]\n    frame #13: 0x0000000100446338 bitcoin-node`decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::TypeList<node::BlockWaitOptions>>(this=<unavailable>, server_context=0x0000000177742b10, (null)=<unavailable>) const at proxy-types.h:539:16 [opt] [inlined]\n    frame #14: 0x0000000100446330 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>, mp::TypeList<node::BlockWaitOptions>>(mp::Priority<1>, mp::TypeList<>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<node::BlockWaitOptions>&&)::'lambda'()::operator()(this=<unavailable>) at type-context.h:126:24 [opt]\n    frame #15: 0x000000010039d40c bitcoin-node`kj::Function<void ()>::operator()(this=0x0000000177742f30) at function.h:119:12 [opt] [inlined]\n    frame #16: 0x000000010039d3fc bitcoin-node`void mp::Unlock<mp::Lock, kj::Function<void ()>&>(lock=0x0000000177742f50, callback=0x0000000177742f30) at util.h:209:5 [opt]\n    frame #17: 0x00000001006261dc bitcoin-node`void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'())::'lambda'()::operator()(this=<unavailable>) const at proxy-io.h:352:17 [opt]\n    frame #18: 0x00000001006261b8 bitcoin-node`void std::__1::condition_variable::wait<void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'())::'lambda'()>(this=<unavailable>, __lk=0x0000000177742f50, __pred=<unavailable>) at condition_variable.h:146:11 [opt] [inlined]\n    frame #19: 0x00000001006261ac bitcoin-node`void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(this=0x0000600002268120, lock=0x0000000177742f50, pred=<unavailable>) at proxy-io.h:343:14 [opt] [inlined]\n    frame #20: 0x0000000100626184 bitcoin-node`mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()(this=0x0000600001e54ba8) const at proxy.cpp:419:34 [opt] [inlined]\n    frame #21: 0x0000000100625c9c bitcoin-node`decltype(std::declval<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>()()) std::__1::__invoke[abi:ne200100]<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>(__f=0x0000600001e54ba8) at invoke.h:179:25 [opt] [inlined]\n    frame #22: 0x0000000100625c9c bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #23: 0x0000000100625c9c bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>>(__vp=0x0000600001e54ba0) at thread.h:208:3 [opt]\n    frame #24: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n* thread #45, stop reason = hit program assert\n    frame #0: 0x000000018cfae388 libsystem_kernel.dylib`__pthread_kill + 8\n    frame #1: 0x000000018cfe788c libsystem_pthread.dylib`pthread_kill + 296\n    frame #2: 0x000000018cef0a3c libsystem_c.dylib`abort + 124\n    frame #3: 0x000000018ceefc70 libsystem_c.dylib`__assert_rtn + 284\n  * frame #4: 0x0000000100620940 bitcoin-node`mp::EventLoopRef::operator*(this=<unavailable>) const at proxy.h:59:36 [opt] [inlined]\n    frame #5: 0x0000000100620920 bitcoin-node`mp::ProxyContext::ProxyContext(this=<unavailable>, connection=<unavailable>) at proxy.cpp:81:83 [opt] [inlined]\n    frame #6: 0x0000000100620920 bitcoin-node`mp::ProxyContext::ProxyContext(this=<unavailable>, connection=<unavailable>) at proxy.cpp:81:104 [opt]\n    frame #7: 0x0000000100418988 bitcoin-node`mp::ProxyServerBase<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>::ProxyServerBase(this=0x0000600003468120, vtt=0x0000000100a28ad8, impl=nullptr, connection=0x000000012680b610) at proxy-io.h:521:32 [opt] [inlined]\n    frame #8: 0x0000000100418950 bitcoin-node`mp::ProxyServerCustom<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>::ProxyServerCustom(this=0x0000600003468120, vtt=<unavailable>, (null)=nullptr, (null)=0x000000012680b610) at proxy.h:197:45 [opt] [inlined]\n    frame #9: 0x0000000100418950 bitcoin-node`mp::ProxyServer<ipc::capnp::messages::BlockTemplate>::ProxyServer(this=0x0000600003468120, (null)=nullptr, (null)=0x000000012680b610) at mining.capnp.proxy.h:393:30 [opt] [inlined]\n    frame #10: 0x000000010041892c bitcoin-node`kj::Own<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, std::nullptr_t> kj::heap<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, std::__1::shared_ptr<interfaces::BlockTemplate>, mp::Connection&>(params=nullptr, params=<unavailable>) at memory.h:609:21 [opt]\n    frame #11: 0x000000010044715c bitcoin-node`kj::Own<ipc::capnp::messages::BlockTemplate::Server, std::nullptr_t> mp::MakeProxyServer<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>(context=0x00000001776b6b10, impl=nullptr) at type-interface.h:14:12 [opt] [inlined]\n    frame #12: 0x000000010044714c bitcoin-node`kj::Own<ipc::capnp::messages::BlockTemplate::Server, std::nullptr_t> mp::CustomMakeProxyServer<ipc::capnp::messages::BlockTemplate, interfaces::BlockTemplate>(context=0x00000001776b6b10, impl=nullptr) at type-interface.h:20:12 [opt] [inlined]\n    frame #13: 0x0000000100447144 bitcoin-node`_ZN2mp16CustomBuildFieldIN10interfaces13BlockTemplateENSt3__110unique_ptrIS2_NS3_14default_deleteIS2_EEEERNS_11StructFieldINS_8AccessorINS_13mining_fields6ResultELi18EEEN3ipc5capnp8messages13BlockTemplate15WaitNextResults7BuilderEEEEEvNS_8TypeListIJNS4_IT_NS5_ISM_EEEEEEENS_8PriorityILi1EEERNS_13InvokeContextEOT0_OT1_PNu7__decayIDTcldtfL0p3_3getEEE5CallsE((null)=<unavailable>, (null)=<unavailable>, invoke_context=0x00000001776b6b10, value=nullptr, output=0x00000001776b6980, enable=0x0000000000000000) at type-interface.h:33:20 [opt]\n    frame #14: 0x0000000100446f58 bitcoin-node`void mp::BuildField<std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>, mp::InvokeContext, std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder>&>((null)=<unavailable>, context=0x00000001776b6b10, output=0x00000001776b6980, values=nullptr) at proxy-types.h:203:9 [opt] [inlined]\n    frame #15: 0x0000000100446f44 bitcoin-node`void mp::CustomBuildField<std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>, std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder>>((null)=<unavailable>, (null)=<unavailable>, invoke_context=0x00000001776b6b10, value=nullptr, output=0x00000001776b6980) at type-decay.h:34:5 [opt] [inlined]\n    frame #16: 0x0000000100446f44 bitcoin-node`void mp::BuildField<std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>&&, mp::InvokeContext, std::__1::unique_ptr<interfaces::BlockTemplate, std::__1::default_delete<interfaces::BlockTemplate>>, mp::StructField<mp::Accessor<mp::mining_fields::Result, 18>, ipc::capnp::messages::BlockTemplate::WaitNextResults::Builder>>((null)=<unavailable>, context=0x00000001776b6b10, output=0x00000001776b6980, values=nullptr) at proxy-types.h:203:9 [opt] [inlined]\n    frame #17: 0x0000000100446f44 bitcoin-node`void mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, node::BlockWaitOptions>(this=0x0000600001e5059c, server_context=0x00000001776b6b10, (null)=<unavailable>, args=0x00000001776b6a78) const at proxy-types.h:474:9 [opt]\n    frame #18: 0x0000000100446e20 bitcoin-node`void mp::PassField<mp::Accessor<mp::mining_fields::Options, 17>, node::BlockWaitOptions, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall> const&, mp::TypeList<>>((null)=<unavailable>, (null)=<unavailable>, server_context=0x00000001776b6b10, fn=0x0000600001e5059c, args=0x00000001776b6b98) at proxy-types.h:307:8 [opt]\n    frame #19: 0x0000000100446338 bitcoin-node`decltype(auto) mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>::invoke<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::TypeList<node::BlockWaitOptions>>(this=<unavailable>, server_context=0x00000001776b6b10, (null)=<unavailable>) const at proxy-types.h:539:16 [opt] [inlined]\n    frame #20: 0x0000000100446330 bitcoin-node`std::__1::enable_if<std::is_same<decltype(mp::Accessor<mp::mining_fields::Context, 17>::get(fp1.call_context.getParams())), mp::Context::Reader>::value, kj::Promise<mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>::CallContext>>::type mp::PassField<mp::Accessor<mp::mining_fields::Context, 17>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>, mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>>, mp::TypeList<node::BlockWaitOptions>>(mp::Priority<1>, mp::TypeList<>, mp::ServerInvokeContext<mp::ProxyServer<ipc::capnp::messages::BlockTemplate>, capnp::CallContext<ipc::capnp::messages::BlockTemplate::WaitNextParams, ipc::capnp::messages::BlockTemplate::WaitNextResults>>&, mp::ServerField<1, mp::Accessor<mp::mining_fields::Options, 17>, mp::ServerRet<mp::Accessor<mp::mining_fields::Result, 18>, mp::ServerCall>> const&, mp::TypeList<node::BlockWaitOptions>&&)::'lambda'()::operator()(this=<unavailable>) at type-context.h:126:24 [opt]\n    frame #21: 0x000000010039d40c bitcoin-node`kj::Function<void ()>::operator()(this=0x00000001776b6f30) at function.h:119:12 [opt] [inlined]\n    frame #22: 0x000000010039d3fc bitcoin-node`void mp::Unlock<mp::Lock, kj::Function<void ()>&>(lock=0x00000001776b6f50, callback=0x00000001776b6f30) at util.h:209:5 [opt]\n    frame #23: 0x00000001006261dc bitcoin-node`void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'())::'lambda'()::operator()(this=<unavailable>) const at proxy-io.h:352:17 [opt]\n    frame #24: 0x00000001006261b8 bitcoin-node`void std::__1::condition_variable::wait<void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'())::'lambda'()>(this=<unavailable>, __lk=0x00000001776b6f50, __pred=<unavailable>) at condition_variable.h:146:11 [opt] [inlined]\n    frame #25: 0x00000001006261ac bitcoin-node`void mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()() const::'lambda'()>(this=0x0000600002250000, lock=0x00000001776b6f50, pred=<unavailable>) at proxy-io.h:343:14 [opt] [inlined]\n    frame #26: 0x0000000100626184 bitcoin-node`mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0::operator()(this=0x0000600001e54e78) const at proxy.cpp:419:34 [opt] [inlined]\n    frame #27: 0x0000000100625c9c bitcoin-node`decltype(std::declval<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>()()) std::__1::__invoke[abi:ne200100]<mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>(__f=0x0000600001e54e78) at invoke.h:179:25 [opt] [inlined]\n    frame #28: 0x0000000100625c9c bitcoin-node`void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>(__t=size=2, (null)=<unavailable>) at thread.h:199:3 [opt] [inlined]\n    frame #29: 0x0000000100625c9c bitcoin-node`void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, mp::ProxyServer<mp::ThreadMap>::makeThread(capnp::CallContext<mp::ThreadMap::MakeThreadParams, mp::ThreadMap::MakeThreadResults>)::$_0>>(__vp=0x0000600001e54e70) at thread.h:208:3 [opt]\n    frame #30: 0x000000018cfe7c0c libsystem_pthread.dylib`_pthread_start + 136\n```",
          "created_at": "2025-10-07T20:40:52Z"
        },
        {
          "user": "ryanofsky",
          "body": "> But if I kill my rust code, it still causes a crash on `bitcoin-node`... I wonder if I'm still doing something wrong on shutdown?\n\nThis seems like a new crash I haven't seen before. Probably there is something the rust code could be doing differently to prevent the crash, but that wouldn't mean it is doing anything wrong, since the node should be able to avoid crashing on unclean shutdowns. Will look into this more and try to suggest changes and fix.",
          "created_at": "2025-10-07T20:56:14Z"
        },
        {
          "user": "plebhash",
          "body": "to be fair, the shutdown strategy on the rust code doesn't really do anything to try to be \"clean\"\n\nwhen `ctrl+c` is hit, we simply break the loops of every spawned task and drop everything from memory (including records to whatever `waitNext` request that was still waiting for completion)",
          "created_at": "2025-10-07T21:03:56Z"
        },
        {
          "user": "plebhash",
          "body": "also worth mentioning that the steps listed above are not able to reproduce it deterministically\n\nsometimes it happens, sometimes it doesn't happen\n\nprobably related to the order in which things are dropped from memory, which I assume `capnp` and `capnp-rpc` crates take as triggers for IPC signals for resource cleanup on the server side",
          "created_at": "2025-10-07T21:08:35Z"
        },
        {
          "user": "ryanofsky",
          "body": "Thanks @plebhash. The stack trace from https://github.com/bitcoin/bitcoin/issues/33554#issuecomment-3378637474 shows the problem pretty clearly, and I created an issue to track it: https://github.com/bitcoin-core/libmultiprocess/issues/226.\n\nIt looks to me like there's not way great way for the rust client to avoid this problem, and this is something `bitcoin-node` should be changed to fix by (1) fixing the abort described in https://github.com/bitcoin-core/libmultiprocess/issues/226 and (2) improving the mining interface so there is a way to interrupt `waitNext` calls.\n\nI think currently the only reliable way to avoid triggering the abort is to avoid disconnecting until `waitNext` returns.\n\nBut this might be undesirable because there isn't currently a way to interrupt the waitNext call and have it return early. It would be good if `bitcoin-node` would address this by adding a new [`BlockTemplate`](https://github.com/bitcoin/bitcoin/blob/ec5841888de7fa2b194b6cd06641b0efbab57cd4/src/ipc/capnp/mining.capnp#L24) `interruptWait` method, or just have `BlockTemplate` destructor interrupt the wait. The client should have some clean way of interrupting the `waitNext` call if it no longer needs a new block so mining interface clients can shut down quickly and cleanly.\n\n",
          "created_at": "2025-10-08T00:41:21Z"
        },
        {
          "user": "plebhash",
          "body": "I have a question related to the approach I started taking with the insights coming from the crashes reported here.\n\nfollowing your advice, I'm no longer using one single server thread for everything... now there's one \"static\" server thread that's responsible for all non-blocking calls (e.g.: fetching some template data or submitting solution to some template)\n\nand for `waitNext`, there's dedicated server thread(s)\n\nthe thing is, I still need to cater for incoming Sv2 `CoinbaseOutputConstraints` messages, and whenever that arrives, I need to make sure the `BlockTemplate` (or `TemplateIpcClient` as I'm aliasing on the rust code) that's used to kickstart the next `waitNext` loops has the correct `block_reserved_weight` and `max_additional_sigops` as defined on the Sv2 message.\n\nand since I cannot interfere with server thread dedicated to the ongoing `waitNext` (because it would lead to crashes), I'm being forced to instantiate yet another server thread, just so I can instantiate the new `BlockTemplate` with the new coinbase constraints and kickstart the new `waitNext` loop\n\nso my question is: by doing this, am I risking unbounded resource consumption on `bitcoin-node`? because basically I'm not taking any explicit steps to kill the server thread that was dedicated for `waitNext` loops under the previous coinbase constraints... the reference to `ThreadIpcClient` is simply dropped from memory, and that's it.\n\nanyways, once the changes mentioned on the comment above take place, this should no longer be a relevant issue, because as soon as `CoinbaseOutputConstraints` arrived, I'd be able to kill the current `waitNext` call and simply use the same server thread for the new one, so the rust client would always be using only two server threads without any need for creating more server threads every time we had new coinbase constraints\n\nbut I felt I should ask anyways, because it seems like an important concept that's still foggy on my mental model for IPC \n\n",
          "created_at": "2025-10-08T13:57:00Z"
        },
        {
          "user": "ryanofsky",
          "body": "These are good questions. I opened #33575 to figure out how to cancel waitNext calls, and I think it should not be hard to provide that.\n\nMore broadly, I think I'd try just having a c++ \"waiter\" thread dedicated to running `waitNext` calls, and a c++ \"worker\" thread to run all other IPC operations besides `waitNext`. The \"waiter\" thread should be mostly blocked monitoring mempool and network, and the \"worker\" thread should be available to do anything else you might need like fetching and submitting block data.\n\nWith current v30 code, there is no mechanism to cancel waitNext calls, so I think simplest approach would be to create a new c++ thread for each waitNext call, effectively having multiple \"waiter\" threads and one \"worker\" thread. This will use more resources, but I would not expect it to take a lot more, because presumably `block_reserved_weight` and `max_additional_sigops` option values should not change very frequently, and new blocks being connected should provide an upper limit on how long waitNext calls stick around.",
          "created_at": "2025-10-08T16:32:51Z"
        },
        {
          "user": "plebhash",
          "body": "rephrasing my previous question in a more compact way:\n\nis there a way to \"kill\" server threads?\n\n---\n\n> because presumably block_reserved_weight and max_additional_sigops option values should not change very frequently\n\nindeed, I think this will be relatively rare in practice... but it's still something that's not under our control, and on the current strategy it will lead to unbounded resource consumption on Bitcoin Core side (unless server threads could be killed)",
          "created_at": "2025-10-08T16:48:41Z"
        },
        {
          "user": "ryanofsky",
          "body": "> is there a way to \"kill\" server threads?\n\nIndirectly, yes. The server threads will destroy themselves as soon as they are no longer referenced, either by the client or an ongoing IPC call that is using them. So as long as the client is not holding references to threads it is not using, they will be cleaned up.\n\nThere is some cost to creating threads, so it's good to reuse them between calls, and why I recommended having dedicated \"waiter\" and \"worker\" threads. But if you wanted to create more threads than that for different calls it would probably work ok in practice.\n\n> and on the current strategy it will lead to unbounded resource consumption on Bitcoin Core side\n\nAs long as there is no way to cancel waitNext calls, it could lead to a lot of threads being created if you need to make many calls. I'd just expect the number to be pretty limited based on how many should be needed. After cancellation is implemented you should be able to get away with having just 2 threads total.",
          "created_at": "2025-10-08T17:11:01Z"
        },
        {
          "user": "plebhash",
          "body": "> Indirectly, yes. The server threads will destroy themselves as soon as they are no longer referenced, either by the client or an ongoing IPC call that is using them. So as long as the client is not holding references to threads it is not using, they will be cleaned up.\n\nok I had AI tell me the same thing but didn't want to blindly trust it, so that's why I went out of my way to confirm that. Good to know.\n\nthen also what I said about unbounded resource consumption above is not true, since references to server threads for the old `waitNext` loops are dropped. \n\nbut still, ideally only 2 threads should be enough, and I guess we'll get there eventually.",
          "created_at": "2025-10-08T19:34:11Z"
        },
        {
          "user": "plebhash",
          "body": "@ryanofsky should we close this?",
          "created_at": "2025-11-17T20:07:38Z"
        },
        {
          "user": "ryanofsky",
          "body": "> [@ryanofsky](https://github.com/ryanofsky) should we close this?\n\nThanks will close. The original issue where then node crashes when a client requests to multiple IPC calls to execute simultaneously on the same worker thread should be fixed by https://github.com/bitcoin-core/libmultiprocess/pull/214 and https://github.com/bitcoin/bitcoin/pull/33519 which replaces the crashes with \"thread busy\" errors.\n\nThe crash reported later where killing the rust code in the middle of a waitNext call causes the node to crash during shutdown (https://github.com/bitcoin/bitcoin/issues/33554#issuecomment-3378693317) isn't fixed yet but I created a separate issue to track it https://github.com/bitcoin-core/libmultiprocess/issues/226. Also the new `interruptWait` method in #33676 should make the problem less likely to happen if the rust client uses it.\n\nWill close this since remaining issue is tracked in https://github.com/bitcoin-core/libmultiprocess/issues/226\n",
          "created_at": "2025-11-18T20:58:04Z"
        }
      ]
    },
    {
      "number": 33548,
      "title": "`test_bitcoin-qt`: segfault under LTO (CMAKE_INTERPROCEDURAL_OPTIMIZATION=ON)",
      "body": "```bash\npodman run -it ubuntu:24.04\napt install git build-essential cmake pkgconf python3 libevent-dev libboost-dev qt6-base-dev qt6-tools-dev qt6-l10n-tools qt6-tools-dev-tools libgl-dev libqrencode-dev\ngit clone https://github.com/bitcoin/bitcoin/\ncd bitcoin\n```\n```bash\ncmake -B build -DENABLE_IPC=OFF -DBUILD_GUI=ON -DENABLE_WALLET=OFF\ncmake --build build\nctest --test-dir build # works fine\n```\n\n```bash\n### Enable LTO\ncmake -B build -DENABLE_IPC=OFF -DBUILD_GUI=ON -DENABLE_WALLET=OFF -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON\ncmake --build build\nctest --test-dir build\n...\nThe following tests FAILED:\n\t  6 - test_bitcoin-qt (SEGFAULT)\n```\n```bash\nbuild/bin/test_bitcoin-qt\nSegmentation fault (core dumped)\n```\n```bash\ngdb build/bin/test_bitcoin-qt\n...\nProgram received signal SIGSEGV, Segmentation fault.\n0x000079e008f7bafa in ?? () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n(gdb) bt\n#0  0x000079e008f7bafa in ?? () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n#1  0x000079e0095b3844 in QGuiApplication::screenAdded(QScreen*) () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#2  0x000079e0096024a6 in QWindowSystemInterface::handleScreenAdded(QPlatformScreen*, bool) () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#3  0x000079e005856a13 in ?? () from /usr/lib/x86_64-linux-gnu/qt6/plugins/platforms/libqminimal.so\n#4  0x000079e0095ac142 in QGuiApplicationPrivate::createPlatformIntegration() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#5  0x000079e0095ad860 in QGuiApplicationPrivate::createEventDispatcher() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#6  0x000079e008f348b6 in QCoreApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Core.so.6\n#7  0x000079e0095ad8ff in QGuiApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Gui.so.6\n#8  0x000079e009ccc985 in QApplicationPrivate::init() () from /lib/x86_64-linux-gnu/libQt6Widgets.so.6\n#9  0x00005b7f77cb9cff in BitcoinApplication::BitcoinApplication (this=<optimized out>, this=<optimized out>) at .././qt/bitcoin.cpp:201\n#10 0x00005b7f77c6ee8b in main (argc=<optimized out>, argv=<optimized out>) at ./qt/test/test_main.cpp:78\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-10-06T11:36:32Z",
      "updated_at": "2025-11-30T22:36:51Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33548",
      "labels": [
        "Bug",
        "Build system",
        "Upstream"
      ],
      "comment_list": [
        {
          "user": "willcl-ark",
          "body": "FWIW this doesn't reproduce for me using Clang 20 via [this nix flake](https://github.com/bitcoin-dev-tools/bix/blob/wip-updates/flake.nix), where I need to force `QT_QPA_PLATFORM=xcb` to run Qt:\n\n<details>\n<summary>Details</summary>\n\n```\nConfigure summary\n=================\nExecutables:\n  bitcoin ............................. ON\n  bitcoind ............................ ON\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... ON\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... ON\n  bitcoin-tx .......................... ON\n  bitcoin-util ........................ ON\n  bitcoin-wallet ...................... OFF\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... OFF\n  external signer ..................... ON\n  ZeroMQ .............................. OFF\n  IPC ................................. OFF\n  USDT tracing ........................ OFF\n  QR code (GUI) ....................... ON\n  DBus (GUI) .......................... ON\nTests:\n  test_bitcoin ........................ ON\n  test_bitcoin-qt ..................... ON\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... OFF\n\nCross compiling ....................... FALSE\nC++ compiler .......................... Clang 20.1.8, /nix/store/64bmj9nvp00if8bsbk5w782rd6vji654-ccache-links-wrapper-4.11.3/bin/clang++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ...........\nC++ compiler flags .................... -O2 -g -std=c++20 -fPIC -fdebug-prefix-map=/home/will/src/core/bitcoin/src=. -fmacro-prefix-map=/home/will/src/core/bitcoin/src=. -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wgnu -Wformat -Wformat-security -Wvla -Wshadow-field -Wthread-safety -Wloop-analysis -Wredundant-decls -Wunused-member-function -Wdate-time -Wconditional-uninitialized -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wdocumentation -Wself-assign -Wundef -Wno-unused-parameter\nLinker flags .......................... -O2 -g -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. ON\n\n\n-- Configuring done (25.2s)\n-- Generating done (0.1s)\n-- Build files have been written to: /home/will/src/core/bitcoin/build\n\n<snip>\n\n[663/663] Linking CXX executable bin/test_bitcoin\n\nâ¯ QT_QPA_PLATFORM=xcb ctest --test-dir build --parallel\nInternal ctest changing into directory: /home/will/src/core/bitcoin/build\nTest project /home/will/src/core/bitcoin/build\n        Start   1: univalue_test\n        Start   2: univalue_object_test\n        Start   3: secp256k1_noverify_tests\n        Start   4: secp256k1_tests\n        Start   5: secp256k1_exhaustive_tests\n        Start   6: test_bitcoin-qt\n        Start   7: addrman_tests\n        Start   8: allocator_tests\n        Start   9: amount_tests\n        Start  10: argsman_tests\n        Start  11: arith_uint256_tests\n        Start  12: banman_tests\n        Start  13: base32_tests\n        Start  14: base58_tests\n        Start  15: base64_tests\n        Start  16: bech32_tests\n  1/132 Test   #1: univalue_test ........................   Passed    0.01 sec\n  2/132 Test   #2: univalue_object_test .................   Passed    0.01 sec\n        Start  17: bip32_tests\n        Start  18: bip324_tests\n  3/132 Test   #9: amount_tests .........................   Passed    0.11 sec\n        Start  19: blockchain_tests\n  4/132 Test   #8: allocator_tests ......................   Passed    0.11 sec\n        Start  20: blockencodings_tests\n  5/132 Test  #11: arith_uint256_tests ..................   Passed    0.11 sec\n  6/132 Test  #12: banman_tests .........................   Passed    0.11 sec\n  7/132 Test  #13: base32_tests .........................   Passed    0.11 sec\n        Start  21: blockfilter_index_tests\n        Start  22: blockfilter_tests\n        Start  23: blockmanager_tests\n  8/132 Test  #15: base64_tests .........................   Passed    0.11 sec\n  9/132 Test  #14: base58_tests .........................   Passed    0.12 sec\n 10/132 Test  #16: bech32_tests .........................   Passed    0.11 sec\n        Start  24: bloom_tests\n        Start  25: bswap_tests\n        Start  26: caches_tests\n 11/132 Test  #17: bip32_tests ..........................   Passed    0.15 sec\n        Start  27: chain_tests\n 12/132 Test  #22: blockfilter_tests ....................   Passed    0.11 sec\n        Start  28: chainstate_write_tests\n 13/132 Test  #26: caches_tests .........................   Passed    0.11 sec\n        Start  29: checkqueue_tests\n 14/132 Test  #25: bswap_tests ..........................   Passed    0.12 sec\n        Start  30: cluster_linearize_tests\n 15/132 Test  #24: bloom_tests ..........................   Passed    0.12 sec\n        Start  31: coins_tests_base\n 16/132 Test   #7: addrman_tests ........................   Passed    0.25 sec\n        Start  32: coins_tests_dbbase\n 17/132 Test  #19: blockchain_tests .....................   Passed    0.24 sec\n        Start  33: coins_tests\n 18/132 Test  #30: cluster_linearize_tests ..............   Passed    0.12 sec\n        Start  34: coinscachepair_tests\n 19/132 Test  #28: chainstate_write_tests ...............   Passed    0.15 sec\n        Start  35: coinstatsindex_tests\n 20/132 Test  #20: blockencodings_tests .................   Passed    0.28 sec\n        Start  36: common_url_tests\n 21/132 Test  #23: blockmanager_tests ...................   Passed    0.33 sec\n        Start  37: compilerbug_tests\n 22/132 Test  #34: coinscachepair_tests .................   Passed    0.11 sec\n        Start  38: compress_tests\n 23/132 Test  #36: common_url_tests .....................   Passed    0.11 sec\n        Start  39: crypto_tests\n 24/132 Test  #10: argsman_tests ........................   Passed    0.55 sec\n        Start  40: cuckoocache_tests\n 25/132 Test  #37: compilerbug_tests ....................   Passed    0.11 sec\n        Start  41: dbwrapper_tests\n 26/132 Test  #21: blockfilter_index_tests ..............   Passed    0.47 sec\n        Start  42: denialofservice_tests\n 27/132 Test  #18: bip324_tests .........................   Passed    0.67 sec\n        Start  43: descriptor_tests\n 28/132 Test  #38: compress_tests .......................   Passed    0.21 sec\n        Start  44: disconnected_transactions\n 29/132 Test  #35: coinstatsindex_tests .................   Passed    0.36 sec\n        Start  45: feefrac_tests\n 30/132 Test  #42: denialofservice_tests ................   Passed    0.17 sec\n        Start  46: flatfile_tests\n 31/132 Test  #44: disconnected_transactions ............   Passed    0.18 sec\n        Start  47: fs_tests\n 32/132 Test  #45: feefrac_tests ........................   Passed    0.12 sec\n        Start  48: getarg_tests\n 33/132 Test  #46: flatfile_tests .......................   Passed    0.14 sec\n        Start  49: hash_tests\n 34/132 Test  #47: fs_tests .............................   Passed    0.12 sec\n        Start  50: headers_sync_chainwork_tests\n 35/132 Test  #48: getarg_tests .........................   Passed    0.12 sec\n        Start  51: httpserver_tests\n 36/132 Test  #49: hash_tests ...........................   Passed    0.11 sec\n        Start  52: i2p_tests\n 37/132 Test  #51: httpserver_tests .....................   Passed    0.12 sec\n        Start  53: interfaces_tests\n 38/132 Test  #41: dbwrapper_tests ......................   Passed    0.57 sec\n        Start  54: key_io_tests\n 39/132 Test  #52: i2p_tests ............................   Passed    0.12 sec\n        Start  55: key_tests\n 40/132 Test   #6: test_bitcoin-qt ......................   Passed    1.17 sec\n 41/132 Test  #50: headers_sync_chainwork_tests .........   Passed    0.18 sec\n        Start  56: logging_tests\n        Start  57: mempool_tests\n 42/132 Test  #40: cuckoocache_tests ....................   Passed    0.63 sec\n        Start  58: merkle_tests\n 43/132 Test  #29: checkqueue_tests .....................   Passed    1.01 sec\n        Start  59: merkleblock_tests\n 44/132 Test  #54: key_io_tests .........................   Passed    0.13 sec\n        Start  60: miner_tests\n 45/132 Test  #56: logging_tests ........................   Passed    0.14 sec\n        Start  61: miniminer_tests\n 46/132 Test  #27: chain_tests ..........................   Passed    1.17 sec\n        Start  62: miniscript_tests\n 47/132 Test  #59: merkleblock_tests ....................   Passed    0.11 sec\n        Start  63: minisketch_tests\n 48/132 Test  #55: key_tests ............................   Passed    0.23 sec\n        Start  64: multisig_tests\n 49/132 Test  #57: mempool_tests ........................   Passed    0.27 sec\n        Start  65: net_peer_connection_tests\n 50/132 Test  #43: descriptor_tests .....................   Passed    0.81 sec\n        Start  66: net_peer_eviction_tests\n 51/132 Test  #63: minisketch_tests .....................   Passed    0.15 sec\n        Start  67: net_tests\n 52/132 Test  #64: multisig_tests .......................   Passed    0.13 sec\n        Start  68: netbase_tests\n 53/132 Test  #58: merkle_tests .........................   Passed    0.40 sec\n        Start  69: node_init_tests\n 54/132 Test  #65: net_peer_connection_tests ............   Passed    0.16 sec\n        Start  70: node_warnings_tests\n 55/132 Test  #53: interfaces_tests .....................   Passed    0.54 sec\n        Start  71: orphanage_tests\n 56/132 Test  #66: net_peer_eviction_tests ..............   Passed    0.20 sec\n 57/132 Test  #68: netbase_tests ........................   Passed    0.16 sec\n        Start  72: pcp_tests\n        Start  73: peerman_tests\n 58/132 Test  #70: node_warnings_tests ..................   Passed    0.12 sec\n        Start  74: pmt_tests\n 59/132 Test  #39: crypto_tests .........................   Passed    1.27 sec\n 60/132 Test  #61: miniminer_tests ......................   Passed    0.47 sec\n        Start  75: policy_fee_tests\n        Start  76: policyestimator_tests\n 61/132 Test  #72: pcp_tests ............................   Passed    0.13 sec\n        Start  77: pool_tests\n 62/132 Test  #73: peerman_tests ........................   Passed    0.14 sec\n        Start  78: pow_tests\n 63/132 Test  #69: node_init_tests ......................   Passed    0.28 sec\n        Start  79: prevector_tests\n 64/132 Test  #74: pmt_tests ............................   Passed    0.18 sec\n        Start  80: raii_event_tests\n 65/132 Test  #75: policy_fee_tests .....................   Passed    0.12 sec\n        Start  81: random_tests\n 66/132 Test  #77: pool_tests ...........................   Passed    0.12 sec\n        Start  82: rbf_tests\n 67/132 Test  #78: pow_tests ............................   Passed    0.13 sec\n        Start  83: rest_tests\n 68/132 Test  #71: orphanage_tests ......................   Passed    0.29 sec\n        Start  84: result_tests\n 69/132 Test  #33: coins_tests ..........................   Passed    1.66 sec\n        Start  85: reverselock_tests\n 70/132 Test  #80: raii_event_tests .....................   Passed    0.12 sec\n        Start  86: rpc_tests\n 71/132 Test  #83: rest_tests ...........................   Passed    0.11 sec\n        Start  87: sanity_tests\n 72/132 Test  #84: result_tests .........................   Passed    0.11 sec\n        Start  88: scheduler_tests\n 73/132 Test  #85: reverselock_tests ....................   Passed    0.12 sec\n        Start  89: script_assets_tests\n 74/132 Test  #79: prevector_tests ......................   Passed    0.31 sec\n        Start  90: script_p2sh_tests\n 75/132 Test  #87: sanity_tests .........................   Passed    0.12 sec\n        Start  91: script_parse_tests\n 76/132 Test  #88: scheduler_tests ......................   Passed    0.13 sec\n        Start  92: script_segwit_tests\n 77/132 Test  #89: script_assets_tests ..................***Skipped   0.12 sec\n        Start  93: script_standard_tests\n 78/132 Test  #82: rbf_tests ............................   Passed    0.37 sec\n 79/132 Test  #91: script_parse_tests ...................   Passed    0.13 sec\n        Start  94: script_tests\n        Start  95: scriptnum_tests\n 80/132 Test  #31: coins_tests_base .....................   Passed    2.09 sec\n 81/132 Test  #90: script_p2sh_tests ....................   Passed    0.15 sec\n        Start  96: serfloat_tests\n        Start  97: serialize_tests\n 82/132 Test  #92: script_segwit_tests ..................   Passed    0.12 sec\n        Start  98: settings_tests\n 83/132 Test  #93: script_standard_tests ................   Passed    0.13 sec\n        Start  99: sighash_tests\n 84/132 Test  #95: scriptnum_tests ......................   Passed    0.13 sec\n        Start 100: sigopcount_tests\n 85/132 Test  #98: settings_tests .......................   Passed    0.12 sec\n        Start 101: skiplist_tests\n 86/132 Test  #97: serialize_tests ......................   Passed    0.17 sec\n        Start 102: sock_tests\n 87/132 Test  #62: miniscript_tests .....................   Passed    1.18 sec\n        Start 103: span_tests\n 88/132 Test  #86: rpc_tests ............................   Passed    0.51 sec\n        Start 104: streams_tests\n 89/132 Test #100: sigopcount_tests .....................   Passed    0.12 sec\n        Start 105: sync_tests\n 90/132 Test #102: sock_tests ...........................   Passed    0.13 sec\n        Start 106: system_ram_tests\n 91/132 Test #103: span_tests ...........................   Passed    0.13 sec\n        Start 107: system_tests\n 92/132 Test  #99: sighash_tests ........................   Passed    0.31 sec\n        Start 108: testnet4_miner_tests\n 93/132 Test #104: streams_tests ........................   Passed    0.15 sec\n        Start 109: timeoffsets_tests\n 94/132 Test #105: sync_tests ...........................   Passed    0.13 sec\n        Start 110: torcontrol_tests\n 95/132 Test  #96: serfloat_tests .......................   Passed    0.41 sec\n        Start 111: transaction_tests\n 96/132 Test #106: system_ram_tests .....................   Passed    0.12 sec\n        Start 112: translation_tests\n 97/132 Test #107: system_tests .........................   Passed    0.15 sec\n        Start 113: txdownload_tests\n 98/132 Test #109: timeoffsets_tests ....................   Passed    0.12 sec\n        Start 114: txgraph_tests\n 99/132 Test #110: torcontrol_tests .....................   Passed    0.12 sec\n        Start 115: txindex_tests\n100/132 Test #108: testnet4_miner_tests .................   Passed    0.16 sec\n        Start 116: txpackage_tests\n101/132 Test #112: translation_tests ....................   Passed    0.11 sec\n        Start 117: txreconciliation_tests\n102/132 Test #101: skiplist_tests .......................   Passed    0.40 sec\n        Start 118: txrequest_tests\n103/132 Test #117: txreconciliation_tests ...............   Passed    0.12 sec\n        Start 119: txvalidation_tests\n104/132 Test  #76: policyestimator_tests ................   Passed    1.19 sec\n        Start 120: txvalidationcache_tests\n105/132 Test #115: txindex_tests ........................   Passed    0.29 sec\n        Start 121: uint256_tests\n106/132 Test #113: txdownload_tests .....................   Passed    0.37 sec\n        Start 122: util_string_tests\n107/132 Test #119: txvalidation_tests ...................   Passed    0.24 sec\n        Start 123: util_tests\n108/132 Test #121: uint256_tests ........................   Passed    0.11 sec\n        Start 124: util_threadnames_tests\n109/132 Test #122: util_string_tests ....................   Passed    0.11 sec\n        Start 125: util_trace_tests\n110/132 Test  #67: net_tests ............................   Passed    1.84 sec\n        Start 126: validation_block_tests\n111/132 Test #124: util_threadnames_tests ...............   Passed    0.12 sec\n        Start 127: validation_chainstate_tests\n112/132 Test #114: txgraph_tests ........................   Passed    0.55 sec\n        Start 128: validation_chainstatemanager_tests\n113/132 Test #123: util_tests ...........................   Passed    0.14 sec\n        Start 129: validation_flush_tests\n114/132 Test #125: util_trace_tests .....................   Passed    0.12 sec\n        Start 130: validation_tests\n115/132 Test #116: txpackage_tests ......................   Passed    0.64 sec\n        Start 131: validationinterface_tests\n116/132 Test #130: validation_tests .....................   Passed    0.19 sec\n        Start 132: versionbits_tests\n117/132 Test #129: validation_flush_tests ...............   Passed    0.25 sec\n118/132 Test #127: validation_chainstate_tests ..........   Passed    0.31 sec\n119/132 Test #131: validationinterface_tests ............   Passed    0.17 sec\n120/132 Test #120: txvalidationcache_tests ..............   Passed    0.71 sec\n121/132 Test #126: validation_block_tests ...............   Passed    0.68 sec\n122/132 Test #132: versionbits_tests ....................   Passed    0.47 sec\n123/132 Test  #60: miner_tests ..........................   Passed    2.80 sec\n124/132 Test #118: txrequest_tests ......................   Passed    1.23 sec\n125/132 Test  #94: script_tests .........................   Passed    1.96 sec\n126/132 Test  #81: random_tests .........................   Passed    2.74 sec\n127/132 Test  #32: coins_tests_dbbase ...................   Passed    4.66 sec\n128/132 Test #111: transaction_tests ....................   Passed    2.18 sec\n129/132 Test #128: validation_chainstatemanager_tests ...   Passed    2.91 sec\n130/132 Test   #5: secp256k1_exhaustive_tests ...........   Passed    7.58 sec\n131/132 Test   #3: secp256k1_noverify_tests .............   Passed   14.42 sec\n132/132 Test   #4: secp256k1_tests ......................   Passed   29.73 sec\n\n100% tests passed, 0 tests failed out of 132\n\nTotal Test time (real) =  29.74 sec\n\nThe following tests did not run:\n         89 - script_assets_tests (Skipped)\n</details>",
          "created_at": "2025-10-15T08:32:17Z"
        },
        {
          "user": "maflcko",
          "body": "I think this is fixed with `GCC 15.2.0), ubuntu 25.10`. I wouldn't recommend using lto with gcc-13:\n\n* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=105469\n* https://gcc.gnu.org/bugzilla/show_bug.cgi?id=113359\n* ...",
          "created_at": "2025-10-15T10:46:51Z"
        }
      ]
    },
    {
      "number": 33547,
      "title": "HeadersSync tracking issue",
      "body": "End Goal: Make the headers sync phase quicker and less prone to fail, while improving implementation and test code.\n\nThe Bitcoin Optech Podcast episode for Newsletter 322 (https://bitcoinops.org/en/podcast/2024/10/01/) among other things prompted the (re)discovery of the possible improvement of caching headers so they only needed to be downloaded once. To avoid adding unnecessary resource demands on nodes, the number of `HeaderSyncState` instances created over time should ideally be made more predictable first (see old comments at https://github.com/bitcoin/bitcoin/pull/25720#discussion_r936707629 & https://github.com/bitcoin/bitcoin/pull/25720#issuecomment-1214656320).\n\n## Issues\n\nNot required, but getting these in first helps make later changes clearer:\n* #32740\n* #32579\n\nCritical path (not yet ready for general review):\n* Heavily WIP: More predictable `HeaderSyncState` creation - https://github.com/hodlinator/bitcoin/tree/2025/08/headerssync_predictability\n* WIP: https://github.com/l0rinc/bitcoin/pull/3\n\nAdjacent:\n* #33553 (ameliorates intermittent issue #26391)\n* #34096",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-10-06T09:37:02Z",
      "updated_at": "2026-01-07T13:52:25Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33547",
      "labels": [
        "Tracking Issue"
      ],
      "comment_list": [
        {
          "user": "mzumsande",
          "body": "I opened #33553 to address the problem from https://github.com/bitcoin/bitcoin/issues/26391 .",
          "created_at": "2025-10-06T21:50:23Z"
        }
      ]
    },
    {
      "number": 33545,
      "title": "Implicit conversion from `fs::path` to `std::string` when constructing file streams",
      "body": "The code [fails](https://github.com/bitcoin/bitcoin/issues/31388#issuecomment-3369255505) to compile using the [LLVM MinGW](https://github.com/mstorsjo/llvm-mingw) toolchain.\n\nWhen building with libc++ that has LWG 3430 [implemented](https://github.com/llvm/llvm-project/commit/4761e74a276ee1f38596f4849daa9d633929f2ae), constructing `std::ifstream` or `std::ofstream` from an `fs::path` object triggers its implicit conversion to `std::string`. This behavior has been undesirable ever since `fs::path` was introduced. See, for example: https://github.com/bitcoin/bitcoin/blob/a33bd767a37dccf39a094d03c2f62ea81633410f/src/util/fs.h#L54-L55",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-10-06T00:20:36Z",
      "updated_at": "2025-11-14T12:19:27Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/33545",
      "labels": [],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "cc @ryanofsky ",
          "created_at": "2025-10-06T00:20:51Z"
        },
        {
          "user": "maflcko",
          "body": "I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do. I guess you are asking how to deal with the fs linter?",
          "created_at": "2025-10-06T06:42:45Z"
        },
        {
          "user": "hebasto",
          "body": "> I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do.\n\nThis is one way of doing it.\n\n> I guess you are asking how to deal with the fs linter?\n\nThis, and something like `operator std::string() const = delete;` should be added to `fs::path`.",
          "created_at": "2025-10-06T10:38:12Z"
        },
        {
          "user": "hebasto",
          "body": "> > I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do.\n> \n> This is one way of doing it.\n\nAnother approach would be to restore `fsbridge::ifstream` and `fsbridge::ofstream`, which were removed in 41d7166c8a598b604aad6c6b1d88ad46e23be247.",
          "created_at": "2025-10-06T10:51:49Z"
        },
        {
          "user": "ryanofsky",
          "body": "What is the bug exactly?\n\nThe current description is confusing because it says \"constructing `std::ifstream` or `std::ofstream` from an `fs::path` object triggers its implicit conversion to `std::string`\". But there aren't any unsafe impilcit conversion from paths to strings, there is only a [safe implicit conversion](https://en.cppreference.com/w/cpp/filesystem/path/native.html) to the native string type.\n\nSo what is the bug? Are there compile errors on windows? Is this the concern? Would be good to say what the specific bug or expected behavior is.\n\n> > I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do.\n> \n> This is one way of doing it.\n\nI don't understand this response. What are the other ways of doing it?\n\nI think it might be nice to add a helper method like `const std::filesystem_path& std_path() const { return *this; }` so explicit conversions do not need to be very verbose. But I'm not sure if this would address the issue being reported.\n\n> > I guess you are asking how to deal with the fs linter?\n\n> This, and something like `operator std::string() const = delete;` should be added to `fs::path`.\n\nWhat is the issue with the fs linter? What problem would this deleted operator solve? I could imagine it maybe being useful to trigger compile errors on unix if the code might fail to compile on windows? But again if this would address the issue or what exactly the issue is.",
          "created_at": "2025-10-06T12:04:01Z"
        },
        {
          "user": "hebasto",
          "body": "> What is the bug exactly?\n\nThe code [fails](https://github.com/bitcoin/bitcoin/issues/31388#issuecomment-3369255505) to compile using the [LLVM MinGW](https://github.com/mstorsjo/llvm-mingw) toolchain.",
          "created_at": "2025-10-06T12:16:30Z"
        },
        {
          "user": "maflcko",
          "body": "> So what is the bug? Are there compile errors on windows? Is this the concern? Would be good to say what the specific bug or expected behavior is.\n\nYes, my understanding is there'd be compile errors, but I had difficulty as well figuring this out. My understanding is that there are no unsafe conversions or other bugs. So my suggestion was to just add an explicit cast. Your `std_path` suggestion seems fine as well.",
          "created_at": "2025-10-06T12:16:41Z"
        },
        {
          "user": "hebasto",
          "body": "> > > I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do.\n> > \n> > \n> > This is one way of doing it.\n> \n> I don't understand this response. What are the other ways of doing it?\n\nhttps://github.com/bitcoin/bitcoin/issues/33545#issuecomment-3371016620:\n> > > I guess this means any fs::path would have to be explicitly cast to a std::fs::path, which seems fine to do.\n> > \n> > \n> > This is one way of doing it.\n> \n> Another approach would be to restore `fsbridge::ifstream` and `fsbridge::ofstream`, which were removed in [41d7166](https://github.com/bitcoin/bitcoin/commit/41d7166c8a598b604aad6c6b1d88ad46e23be247).\n\n",
          "created_at": "2025-10-06T12:21:09Z"
        },
        {
          "user": "ryanofsky",
          "body": "> > What is the bug exactly?\n> \n> The code [fails](https://github.com/bitcoin/bitcoin/issues/31388#issuecomment-3369255505) to compile using the [LLVM MinGW](https://github.com/mstorsjo/llvm-mingw) toolchain\n\nThanks this is very helpful. Would recommend adding this to the issue description and probably making it the first sentence. I think deleting `operator std::string` with comment like `// Disallow std::string conversion to ensure code is portable, because this operator is not defined on windows` would be a good solution to ensure the problem does not go undetected.\n\nI wouldn't want `fsbridge::ifstream` and `fsbridge::ofstream` restored. Or I don't see how that would help anything. It seems much nicer to use standard classes.\n",
          "created_at": "2025-10-06T12:25:28Z"
        },
        {
          "user": "maflcko",
          "body": "> would be a good solution to ensure the problem does not go undetected.\n\nFor reference, the MWE for this would be https://godbolt.org/z/KeKq7dxfW (Our fs namespace with `operator std::string` deleted and a minimal main function)",
          "created_at": "2025-10-06T12:34:07Z"
        },
        {
          "user": "ryanofsky",
          "body": "#33550 could be a good fix for this",
          "created_at": "2025-10-06T15:09:53Z"
        },
        {
          "user": "hebasto",
          "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/33550.",
          "created_at": "2025-11-14T12:19:27Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 6,
    "issues": 4
  }
}