{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:11:24.976302+00:00",
  "date": "2025-01-22",
  "pull_requests": [
    {
      "number": 31717,
      "title": "docs: fix  README.md",
      "body": "Hello\r\nI noticed a spelling issue.\r\nBest regards!\r\n",
      "state": "closed",
      "user": "nnsW3",
      "created_at": "2025-01-22T21:52:12Z",
      "updated_at": "2025-01-23T10:47:25Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/31717",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31717.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-01-22T21:52:15Z"
        },
        {
          "user": "maflcko",
          "body": "Duplicate of https://github.com/bitcoin/bitcoin/pull/31718 which includes this and others",
          "created_at": "2025-01-23T10:47:25Z"
        }
      ]
    },
    {
      "number": 31715,
      "title": "build: CMake security checks workarounds",
      "body": "This includes 2 hackish workarounds for our security checks, which are themselves quite hackish. It's unclear exactly what they're supposed to be testing and why.\r\n\r\nRegardless, these changes are enough to fix the checks when no CXXFLAGS are passed in.\r\n\r\nFrom what I can tell, the tests are intended to be self-contained and have a default set of flags, then each tests disables a default and verifies that security is weakened as intended. I'm not sure what the utility of that is, but in that spirit I've fixed up the default flags/compiles to work on their own.\r\n\r\nThe first is a real fix for the test source that gives us a better guarantee that fortification will be turned on. The second adds the flag that fortification requires rather than taking it from our build CXXFLAGS.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-01-22T21:41:46Z",
      "updated_at": "2025-02-07T17:33:03Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/31715",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31715.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25573](https://github.com/bitcoin/bitcoin/pull/25573) ([POC] guix: produce a fully `-static-pie` bitcoind by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-01-22T21:41:50Z"
        },
        {
          "user": "theuni",
          "body": "Ping @fanquake. As discussed.\r\n\r\nI think the second fix is reasonable given the state of things, but if you'd rather get a better flags output from CMake instead I can do that.",
          "created_at": "2025-01-22T21:42:58Z"
        },
        {
          "user": "fanquake",
          "body": "Given these weren't ported completely (#31698), it seems like if were are going to touch them now, we should probably clean that up at the same time. Although I also agree that these scripts are less usful to have/maintain post-Guix, and I will look at removing them entirely.",
          "created_at": "2025-01-23T14:57:02Z"
        },
        {
          "user": "fanquake",
          "body": "> and I will look at removing them entirely.\r\n\r\nOpened a removal in #31818.",
          "created_at": "2025-02-07T15:58:23Z"
        },
        {
          "user": "theuni",
          "body": "Closing in favor of #31818.",
          "created_at": "2025-02-07T17:33:03Z"
        }
      ]
    },
    {
      "number": 31714,
      "title": "validation: Do less work in NeedsRedownload",
      "body": "`NeedsRedownload` exists to detect when a non-segwit client upgrades to segwit after segwit activation. In #21009, it was simplified from an upgrade algorithm to a simple check / recommendation to reindex.\r\n\r\nStill, iterating over hundred thousands of block indexes with each startup for this purpose doesn't seem necessary more than 7 years after segwit activation.\r\nThis PR suggests to only check the first segwit block instead. This is less thorough, but it will speed up init a little bit and the typical case of upgrading a non-segwit client that has already synced beyond the segwit height would still lead to an error.\r\nI also thought about removing `NeedsRedownload()` completely if reviewers prefer that alternative.",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-01-22T21:25:43Z",
      "updated_at": "2025-05-24T11:58:18Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/31714",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31714.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/31714#issuecomment-2617218162) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-01-22T21:25:46Z"
        },
        {
          "user": "maflcko",
          "body": "> This is less thorough\r\n\r\nWould be nice to explain this a bit and also explain the failure case and why it is safe to accept the failure.\r\n\r\nI presume it is less thorough, because anyone could start a non-segwit (EOL) version of Bitcoin Core to submit a (possibly segwit-invalid) block without `BLOCK_OPT_WITNESS` that is not the block immediately after the segwit activation height.\r\n\r\nHowever, this is fine, because it can only happen on an ancient datadir, or someone running EOL versions of Bitcoin Core today. Also, the block (if it was invalid) should normally be reorged out, once connected to the network?\r\n\r\nSo I wonder why keep the flag at all? If is is safe/acceptable to skip it for almost all heights, then it should also be safe to skip for this one specific remaining height?",
          "created_at": "2025-01-23T09:02:06Z"
        },
        {
          "user": "sipa",
          "body": "What would actually happen if we'd drop the check entirely, and you start a modern Bitcoin Core on a datadir produced by syncing say 0.13.0 (pre-segwit activation that was added in 0.13.1) or 0.12.0 past the segwit activation block, and then you run the `getblock` RPC on such segwit block, or are sent `GETDATA` P2P message?",
          "created_at": "2025-01-23T15:48:58Z"
        },
        {
          "user": "mzumsande",
          "body": "> Would be nice to explain this a bit and also explain the failure case and why it is safe to accept the failure.\r\n\r\nI thought that maybe it could be possible to sync beyond the segwit height with a newer client, then downgrade to an older client where segwit isn't activated, download more blocks without `BLOCK_OPT_WITNESS`, and then upgrade again to a newer client.  In this scenario we wouldn't fail anymore after this PR. However, I don't know if this ever would have worked (the pre-segwit client might have failed on startup, even with `-checkblocks=0`?), and even if so, this doesn't seem like a realistic scenario we need to accommodate.\r\n\r\nThe scenario that is still covered (someone upgrades from an old non-segwit client to a current version) seems much more realistic (even if that old client is EOL for ages, there might still be a few nodes out there according https://bitnodes.io/nodes/), and the check costs almost nothing after this PR, so I wasn't sure about complete removal.\r\n\r\n ",
          "created_at": "2025-01-23T15:55:53Z"
        },
        {
          "user": "maflcko",
          "body": "> However, I don't know if this ever would have worked (the pre-segwit client might have failed on startup, even with `-checkblocks=0`?), and even if so, this doesn't seem like a realistic scenario we need to accommodate.\r\n\r\nWhy not? It should be supported to go back and forth between two releases (e.g. 13.0 and 13.1). So if there is a goal to support pre-13.1 upgrades, it seems arbitrary to exclude pre-13.1 upgrades that happened to connect a block with post-13.0.\r\n\r\nAlso, I think checkblock shouldn't affect this, because it only checks connections, which are based on the txid, not wtxid.\r\n\r\nFor reference, this can also be tested: I had 13.1 download some blocks after the activation, then 13.0 started normally (even with checkblocks) and even appended blocks:\r\n\r\n```\r\n2025-01-24 14:54:01 Bitcoin version v0.13.1\r\n...\r\n2025-01-24 14:54:25 UpdateTip: new best=00000000000000000039ab5b80102b36c3f6b7762d1908b128c1c599586d7dfa height=482161 version=0x20000002 log2_work=86.997483 tx=249724170 date='2017-08-27 06:19:28' progress=0.575793 cache=111.0MiB(29988tx)\r\n...\r\n2025-01-24 14:54:27 Shutdown: done\r\n...\r\n...\r\n2025-01-24 14:56:49 Bitcoin version v0.13.0\r\n...\r\n2025-01-24 14:56:57 init message: Rewinding blocks...\r\n2025-01-24 14:56:59 init message: Verifying blocks...\r\n2025-01-24 14:56:59 Verifying last 288 blocks at level 3\r\n2025-01-24 14:56:59 [0%]...[10%]...[20%]...[30%]...[40%]...[50%]...[60%]...[70%]...[80%]...[90%]...[DONE].\r\n2025-01-24 14:57:21 No coin database inconsistencies in last 38 blocks (61549 transactions)\r\n...\r\n2025-01-24 14:59:50 UpdateTip: new best=0000000000000000001ae96111fa32620d598408b32bdb2dd72d78c49390a9b4 height=482163 version=0x20000000 log2_work=86.997554 tx=249727638 date='2017-08-27 06:33:23' progress=0.575798 cache=23.1MiB(11490tx)\r\n...\r\n2025-01-24 14:59:51 Shutdown: done\r\n```\r\n\r\n\r\n\r\n> and then you run the `getblock` RPC on such segwit block, or are sent `GETDATA` P2P message?\r\n\r\nI'll try to try it, but my guess would be that everything appears to behave normally, except that the witness is stripped. Only once you put the block (or a tx from it) into a validation context, you'll see the error.",
          "created_at": "2025-01-24T17:05:05Z"
        },
        {
          "user": "mzumsande",
          "body": "> What would actually happen if we'd drop the check entirely, and you start a modern Bitcoin Core on a datadir produced by syncing say 0.13.0 (pre-segwit activation that was added in 0.13.1) or 0.12.0 past the segwit activation block, and then you run the getblock RPC on such segwit block, or are sent GETDATA P2P message?\r\n\r\nI just tried this out - downloaded the binary for 0.13.0, synced beyond segwit activation height, and  then tried to load the datadir with current master. What happens is that the node doesn't start - it tells me to reindex because `CCoinsViewDB::NeedsUpgrade()` is true - `DB_COINS` was deprecated in `v0.15.0` (1088b02f0ccd7358d2b7076bb9e122d59d502d02).\r\n\r\nSo, it seems to me that we'd need to reindex anyway for an unrelated reason when upgrading from any pre-`v0.15.0`  node to any post -`v0.15.0` node. So maybe  `NeedsRedownload`  can be be safely removed entirely for this reason?",
          "created_at": "2025-01-24T18:47:58Z"
        },
        {
          "user": "luke-jr",
          "body": "Shouldn't it be impossible for the tip block to have the flag, if the blocks between activation and the tip didn't also have it? So checking just the tip would be better and sufficient?",
          "created_at": "2025-01-25T16:17:10Z"
        },
        {
          "user": "sedited",
          "body": ">  So maybe NeedsRedownload can be be safely removed entirely for this reason?\r\n\r\nsgtm, though I'm a bit puzzled why this was not suggested in #21009.",
          "created_at": "2025-01-27T08:15:57Z"
        },
        {
          "user": "tdb3",
          "body": "Synced 0.12 to ~533,000. Stopped and started a binary built from this PR branch (with NeedsRedownload modified to always return false).\r\n\r\n```\r\n[error] Unsupported chainstate database format found. Please restart with -reindex-chainstate. This will rebuild the chainstate database.\r\nError: Unsupported chainstate database format found. Please restart with -reindex-chainstate. This will rebuild the chainstate database.\r\n```\r\n\r\nActing as a user, followed the direction, `bitcoind -reindex-chainstate`. Saw no additional error.\r\n\r\nRan `bitcoin-cli getrawtransaction 8871e3ae8a6bfd26b2168b8152fe01d0f45c6f188219e0c6e13024ac6676f42a 2 00000000000000000006d3e05bbc1baba1b0755f2e2a9527d37b8ec64e64b31b`. (from block 508000, so past segwit activation, but before the 0.12 node had stopped syncing). Saw no `txinwitness` in the response.\r\n\r\nRan `bitcoin-cli getrawtransaction c114c04ff30940d733ca5eeb84e58afc2f1ef18d07947a1e31b2f26a65b0afa0 2 00000000000000000012a6f6b4328bda1b1e58957a9ea7954c4e551fbb0e505e`. (from block 539200, one added by the newer bitcoind). Saw `txinwitness`.",
          "created_at": "2025-01-27T17:54:30Z"
        },
        {
          "user": "tdb3",
          "body": "Concept ACK\r\n\r\n> I think that this is an argument for keeping a basic check ( as the current version of the PR does).\r\n\r\nYes, the current approach seems like a reasonable tradeoff if there is a significant performance benefit. If there isn't one currently, then it might make sense (and be more conservative) to just add a comment to `NeedsRedownload()` so if/when there is one that the change could be made then. Although we are talking about seems like a very small number of (pre-segwit) nodes, so it might be nicer to make the change now and not have to revisit later.\r\n\r\nChecked performance with the blocks dir created in https://github.com/bitcoin/bitcoin/pull/31714#issuecomment-2616512394 (synced to block ~802000, with blocks before ~533000 missing `BLOCK_OPT_WITNESS`, so > 269k blocks checked from tip before the first block without `BLOCK_OPT_WITNESS` is encountered).  Node startup until error took 5 seconds on both 5c5f88b80ad783f66cd0fe314bf657e128ddfa80 and the commit before it, so a significant performance improvement wasn't observed (at least when checking backward from tip by 269k blocks). YMMV (different hardware,etc.). I'm curious if there would be a significant performance difference in a different environment (e.g. HDD).\r\n\r\nI do think the PR covers the \"common\" cases:\r\n- User is running a pre-segwit node that is up to date (i.e. synced past segwit activation). User upgrades to a modern release (pre this PR), which checks from tip backwards for missing BLOCK_OPT_WITNESS). Tip lacks BLOCK_OPT_WITNESS, so `NeedsRedownload()` returns true. Reindex is needed.\r\n- User is running a pre-segwit node that is up to date. User upgrades to a future release with this PR's change to check for BLOCK_OPT_WITNESS only at segwit activation. Same result (`NeedsRedownload()` returns true. Reindex is needed).\r\n- User is running a post-segwit node that is up to date. User upgrades to a future release with this PR's change. `NeedsRedownload()` returns false (faster).",
          "created_at": "2025-01-27T23:56:52Z"
        },
        {
          "user": "maflcko",
          "body": "I still don't understand why this would be safe to remove the check, or just check a single block (start or end), when it is required to check all blocks. Otherwise, upgrading from an ancient blocksdir could lead to errors and bugs down the line. I know this is an edge case, but we are talking about consensus code, so if the introduced failure mode is intentional, it would be good to at least mention or document it.\r\n\r\nThe exact steps to reproduce the new bug are:\r\n\r\n* (optional) Download any number of blocks pre-segwit with any pre-segwit version\r\n* Update to any segwit version (13.1, 14.x) and download at least one block past segwit activation\r\n* Temporarily downgrade to the pre-segwit version and download at least one more block (for example up to 485k)\r\n* Start with this pull request and the required `-reindex-chainstate`, as well as with `-assumevalid`\r\n* Get a pre-segwit-downloaded segwit transaction (for example, `getrawtransaction 47fa1e142488b6a39e050e010d1b7bf3bdbd83da72ae1c60ca0bad237a9e83de 2 000000000000000000155f72edb0d0fd3cd3f4f9bf09c5cf081769e54a662faf`) and observe that the witness is missing. (You don't even have to wait for the reindex-chainstate to finish here, but then master will also mis-behave)\r\n\r\nThen testing when the chain tip has caught up (`in_active_chain==True`):\r\n\r\n* This pull silently omits the witness\r\n* Whereas on current master, the behavior is as expected (at least on the next restart):\r\n\r\n```\r\n: Witness data for blocks after height 481824 requires validation. Please restart with -reindex..\r\n",
          "created_at": "2025-05-23T16:29:00Z"
        },
        {
          "user": "mzumsande",
          "body": "I just thought that there should be a point in time where this edge-case scenario with multiple switches between pre-segwit and post-segwit datadirs would not be sufficiently realistic anymore to justify that each node runs these extra checks with each startup.\r\n\r\nI could change the PR to describe this switching back-and-forth scenario explicitly (it alludes to it with \"less thorough\" / \"most typical case\"), but the currently saved time during startup (~40milliseconds on mainnet for me) does not seem all that significant so I'll close this.",
          "created_at": "2025-05-23T18:12:19Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, if we are fine with the rare edge case, it should also be fine to fully remove it, and also replace the \"unsupported utxo db\" error message from reindex-chainstate to reindex. Alternatively, it could automatically force a reindex to avoid the user picking the wrong setting.",
          "created_at": "2025-05-24T11:57:54Z"
        }
      ]
    },
    {
      "number": 31713,
      "title": "miniscript refactor: Remove unique_ptr-indirection",
      "body": "Removes one level of unnecessary indirection, which was a change that originally [aided in finding one issue](https://github.com/bitcoin/bitcoin/pull/30866#pullrequestreview-2434704657) in #30866. Simplifies the code one step further than 09a1875ad8cddeb17c19af34b8282d37fed0937e belonging to aforementioned PR.\r\n\r\nAlso adds test which verifies resistance to stack overflow when it comes to `~Node()` and `Node::Clone()`.\r\n\r\nNo observed difference when running benchmarks: ExpandDescriptor/WalletIsMineDescriptors/WalletIsMineMigratedDescriptors/WalletLoadingDescriptors.\r\n\r\nFollowup to #30866.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-22T21:16:33Z",
      "updated_at": "2026-01-04T04:53:13Z",
      "comments": 27,
      "url": "https://github.com/bitcoin/bitcoin/pull/31713",
      "labels": [
        "Utils/log/libs"
      ]
    },
    {
      "number": 31711,
      "title": "build: set build type and per-build-type flags as early as possible",
      "body": "This ensures that most compiler tests are not run with the wrong build type's flags. The initial c++ checks are an exception to that because many internal CMake variables are unset until a language is selected, so it's problematic to change our build type before that.\r\n\r\nThe difference can be seen in `build/CMakeFiles/CMakeConfigureLog.yaml`. Before, `Debug` was used for many of the earlly checks. After this PR, it's only the first 2 checks.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-01-22T19:05:16Z",
      "updated_at": "2025-02-12T09:41:34Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/31711",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31711.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/31711#pullrequestreview-2608325691) |\n| Concept ACK | [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/31711#pullrequestreview-2575416662) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31723](https://github.com/bitcoin/bitcoin/pull/31723) (qa debug: Add --debugnode/-waitfordebugger [DRAFT] by hodlinator)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-01-22T19:05:19Z"
        },
        {
          "user": "theuni",
          "body": "Ping @hebasto. As discussed :)",
          "created_at": "2025-01-22T19:06:00Z"
        },
        {
          "user": "hebasto",
          "body": "Concept ACK.",
          "created_at": "2025-01-22T19:08:00Z"
        },
        {
          "user": "theuni",
          "body": " \r\n> The `CMAKE_BUILD_TYPE` cache variable lost its help string:\r\n> \r\nUgh, presumably because it's enabling c++ that sets this?\r\n\r\nI guess that's a downside, and there may be other side-effects as well. I suppose it'd be safer to do this after enabling c++, which means letting that check be done with the wrong build type. Which realistically shouldn't ever be a problem. Agreed?",
          "created_at": "2025-02-06T15:45:52Z"
        },
        {
          "user": "hebasto",
          "body": "> > The `CMAKE_BUILD_TYPE` cache variable lost its help string:\r\n> \r\n> Ugh, presumably because it's enabling c++ that sets this?\r\n> \r\n> I guess that's a downside, and there may be other side-effects as well. I suppose it'd be safer to do this after enabling c++, which means letting that check be done with the wrong build type. Which realistically shouldn't ever be a problem. Agreed?\r\n\r\nGiven https://github.com/bitcoin/bitcoin/pull/31711#discussion_r1944952072, yes, I agree.",
          "created_at": "2025-02-06T15:49:15Z"
        },
        {
          "user": "theuni",
          "body": "Ok, updated description. It's much simpler now and should be very straightforward to review.",
          "created_at": "2025-02-06T20:29:04Z"
        },
        {
          "user": "hebasto",
          "body": "I'd like to summarize here a few observations regarding CMake behaviour.\r\n\r\n1. Single-config generators, such as \"Ninja\":\r\n- `CMAKE_BUILD_TYPE` is defined in `enable_language()`.\r\n- Compiler checks in `enable_language()` ignore any configuration, unless `CMAKE_TRY_COMPILE_CONFIGURATION` is set beforehand.\r\n\r\n2. Single-config generators, such as \"Ninja Multi-Config\":\r\n- `CMAKE_CONFIGURATION_TYPES` is defined in `project()`.\r\n- Compiler checks in `enable_language()` use the \"Debug\" configuration (this choice may be generator-specific), unless `CMAKE_TRY_COMPILE_CONFIGURATION` is set before.\r\n\r\nAlso see: https://gitlab.kitware.com/cmake/cmake/-/issues/26684.",
          "created_at": "2025-02-10T11:28:59Z"
        },
        {
          "user": "theuni",
          "body": "> This issue can be addressed with the following patch:\r\n\r\nYes, that's great! Thanks. Applied and added you as co-author.",
          "created_at": "2025-02-10T21:58:39Z"
        }
      ]
    },
    {
      "number": 31710,
      "title": "Typo fix release-notes-0.10.0.md",
      "body": "# Typo Fix in `release-notes-0.10.0.md`\r\n\r\n## Description\r\nThis pull request corrects the typo in the release notes from \"actualy\" to \"actually.\"\r\n\r\n## Changes\r\n- Fixed the typo \"actualy\" to \"actually\" in the release notes for version 0.10.0.\r\n",
      "state": "closed",
      "user": "BorisNaum",
      "created_at": "2025-01-22T18:00:45Z",
      "updated_at": "2025-01-22T18:02:50Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/31710",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31710.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-01-22T18:00:50Z"
        }
      ]
    },
    {
      "number": 31709,
      "title": "cmake: Fail if `Libmultiprocess` is missing when `WITH_MULTIPROCESS=ON`",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/31708:\r\n```\r\n$ cmake -B build -DWITH_MULTIPROCESS=ON\r\n-- The CXX compiler identification is GNU 13.3.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Found SQLite3: /usr/include (found suitable version \"3.45.1\", minimum required is \"3.7.17\") \r\nCMake Error at CMakeLists.txt:146 (find_package):\r\n  By not providing \"FindLibmultiprocess.cmake\" in CMAKE_MODULE_PATH this\r\n  project has asked CMake to find a package configuration file provided by\r\n  \"Libmultiprocess\", but CMake did not find one.\r\n\r\n  Could not find a package configuration file provided by \"Libmultiprocess\"\r\n  with any of the following names:\r\n\r\n    LibmultiprocessConfig.cmake\r\n    libmultiprocess-config.cmake\r\n\r\n  Add the installation prefix of \"Libmultiprocess\" to CMAKE_PREFIX_PATH or\r\n  set \"Libmultiprocess_DIR\" to a directory containing one of the above files.\r\n  If \"Libmultiprocess\" provides a separate development package or SDK, be\r\n  sure it has been installed.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-22T17:35:32Z",
      "updated_at": "2025-01-23T10:07:55Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/31709",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31709.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/31709#pullrequestreview-2567918185), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/31709#pullrequestreview-2567944336), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31709#pullrequestreview-2569086234) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-01-22T17:35:36Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 31716,
      "title": "`DEFAULT_TRANSACTION_MAXFEE` is 0.1â€¯â‚¿",
      "body": "### Please describe the feature you'd like to see added.\n\nI was reviewing a pull request, when I noticed that the `DEFAULT_TRANSACTION_MAXFEE` is set to 0.1Ã—COIN.\n\n`src/wallet/wallet.h:constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};`\n\n### Describe the solution you'd like\n\n It seems to me that given the current exchange rate we might want to lower that by about a magnitude.",
      "state": "open",
      "user": "murchandamus",
      "created_at": "2025-01-22T21:43:42Z",
      "updated_at": "2025-03-05T17:01:24Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31716",
      "labels": [
        "Brainstorming",
        "Wallet",
        "TX fees and policy"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "> It seems to me that given the current exchange rate we might want to lower that by about a magnitude.\n\nWouldn't that lead to issues in an extreme edge case when a max-sized transaction is sent during a high-fee period?\n\nI think historically the value has been picked so that it is never hit in practise at all (only when the fee truly seems off). Maybe turning it into a feerate may help, but I haven't thought about this much.\n\nAlso, in a greater picture, if the idea is to adjust fee config defaults based on the exchange rate, then https://github.com/bitcoin/bitcoin/pull/13990 should probably be picked up and all other fee defaults should be considered for adjustment as well?",
          "created_at": "2025-01-23T10:57:45Z"
        },
        {
          "user": "murchandamus",
          "body": "Yes, 100,000â€¯vBâ€¯Ã— 1,000,000Â á¹©/kvB =â€¯1â€¯â‚¿.\n\nHowever, it seems to me that sending a max sized transaction during a high-feerate period is something our users would be thankful about when it causes an error.",
          "created_at": "2025-01-23T17:45:20Z"
        },
        {
          "user": "fanquake",
          "body": "@achow101 @furszy @theStack any thoughts here?",
          "created_at": "2025-03-05T11:43:17Z"
        },
        {
          "user": "achow101",
          "body": "> any thoughts here?\n\nWe should probably fix this at some point.",
          "created_at": "2025-03-05T17:01:22Z"
        }
      ]
    },
    {
      "number": 31712,
      "title": "bitcoind crash",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nMy bitcoin node is crashing quite frequently. And after the crash you can't recover anymore. It seems that the files become inaccessible and you cannot start again. Because I can't even read the debug.log file. Everything only works again after restarting the system.\n\nThe problem started after I updated to version 27.0.0. Before I had version 25.0.0\n\n\n### Expected behaviour\n\nDon't crash\n\n### Steps to reproduce\n\nI didn't identify any steps to reproduce. It happens at random times every 3 or 4 days.\n\n### Relevant log output\n\n```\nJan 21 09:38:57 freedom-server systemd[1]: Started bitcoind.service - Bitcoin daemon.\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Main process exited, code=dumped, status=6/ABRT\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Failed with result 'core-dump'.\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Consumed 2h 53min 32.054s CPU time, 648.0M memory peak, 0B memory swap peak.\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Scheduled restart job, restart counter is at 1.\nJan 22 18:27:11 freedom-server systemd[1]: Starting bitcoind.service - Bitcoin daemon...\nJan 22 18:27:11 freedom-server bitcoind[58682]: Error: Settings file could not be read:\nJan 22 18:27:11 freedom-server bitcoind[58682]: - /hdd/bitcoin/settings.json. Please check permissions.\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Control process exited, code=exited, status=1/FAILURE\nJan 22 18:27:11 freedom-server systemd[1]: bitcoind.service: Failed with result 'exit-code'.\nJan 22 18:27:11 freedom-server systemd[1]: Failed to start bitcoind.service - Bitcoin daemon.\n```\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n27.0.0\n\n### Operating system and version\n\nUbuntu 24.04 LTS\n\n### Machine specifications\n\nIntel(R) Core(TM) i5-4200M CPU @ 2.50GHz\n8GB RAM",
      "state": "closed",
      "user": "frbitten",
      "created_at": "2025-01-22T20:12:58Z",
      "updated_at": "2025-02-05T19:34:59Z",
      "comments": 25,
      "url": "https://github.com/bitcoin/bitcoin/issues/31712",
      "labels": [
        "Data corruption",
        "Questions and Help"
      ]
    },
    {
      "number": 31708,
      "title": "build: `WITH_MULTIPROCESS=ON` should fail if libmultiprocess is missing",
      "body": "Currently it warns, and then just fails to properly configure:\n```bash\ncmake -B build -DWITH_MULTIPROCESS=ON\n<snip>\nCMake Warning at CMakeLists.txt:146 (find_package):\n  By not providing \"FindLibmultiprocess.cmake\" in CMAKE_MODULE_PATH this\n  project has asked CMake to find a package configuration file provided by\n  \"Libmultiprocess\", but CMake did not find one.\n\n  Could not find a package configuration file provided by \"Libmultiprocess\"\n  with any of the following names:\n\n    LibmultiprocessConfig.cmake\n    libmultiprocess-config.cmake\n\n  Add the installation prefix of \"Libmultiprocess\" to CMAKE_PREFIX_PATH or\n  set \"Libmultiprocess_DIR\" to a directory containing one of the above files.\n  If \"Libmultiprocess\" provides a separate development package or SDK, be\n  sure it has been installed.\n\n\n-- Could NOT find LibmultiprocessNative (missing: LibmultiprocessNative_DIR)\n<snip>\nCMake Error at src/ipc/CMakeLists.txt:12 (target_capnp_sources):\n  Unknown CMake command \"target_capnp_sources\".\n\n\n-- Configuring incomplete, errors occurred!\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-01-22T16:06:12Z",
      "updated_at": "2025-01-23T09:46:46Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31708",
      "labels": [
        "Build system"
      ]
    },
    {
      "number": 31707,
      "title": "Clear documentation on the bitcoin/bitcoin docker images on Dockerhub and their build process",
      "body": "### Please describe the feature you'd like to see added.\n\nExplanations around the Docker Images being built in the GitHub workflows.\n\n### Is your feature related to a problem, if so please describe it.\n\nAs of now, I was not able to find some clear reference of how the Docker images which are available [here](https://hub.docker.com/r/bitcoin/bitcoin) are being built. It would also be nice to have a short explanation for newcomers about the risks of using a pre-built image. And most importantly: How can I make sure that the DockerHub images are actually built from this repository? I can see some GitHub actions [here](https://github.com/bitcoin/bitcoin/blob/523520f8279987cd528a9e2db6db13dc56641eff/src/secp256k1/.github/actions/run-in-docker-action/action.yml), but I only found them by digging deep into the repo.\n\n### Describe the solution you'd like\n\nA clear explanation on how the Docker images are being built (referencing the GitHub workflows would be nice!) and also a clear statement about whether [this DockerHub page](https://hub.docker.com/r/bitcoin/bitcoin) is owned by the maintainers of this project.\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\nI am willing to contribute, if necessary.",
      "state": "closed",
      "user": "raweber42",
      "created_at": "2025-01-22T15:08:16Z",
      "updated_at": "2025-01-22T15:40:07Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31707",
      "labels": [
        "Questions and Help"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "Those Docker images come from this repository: https://github.com/willcl-ark/bitcoin-core-docker.\n\ncc @willcl-ark.",
          "created_at": "2025-01-22T15:10:24Z"
        },
        {
          "user": "raweber42",
          "body": "Alright, thanks for the lightning fast response!\n\nIt is a bit confusing to see that the DockerHub repo is called `bitcoin/bitcoin`. This makes users assume, that it's \"the official image\". But from what I can see, it is not.",
          "created_at": "2025-01-22T15:16:27Z"
        },
        {
          "user": "willcl-ark",
          "body": " \tHi @raweber42\n\nThese docker images are not owned or maintained by the project, but rather by myself. I.e they are **not** official. They are aimed at testing environments (e.g. for other bitcoin-adjacent projects), as it is non-trivial to verify the authenticity of the bitcoin core binaries inside (but it is possible in some cases, see below).\n\nTo answer your questions more concretely:\n\nAs detailed in the project README.md:\n\n> The Debian-based (non-alpine) images use pre-built binaries pulled from bitcoincore.org or bitcoin.org (or both) as availability dictates. These binaries are built using the Bitcoin Core [reproducible build](https://github.com/bitcoin/bitcoin/blob/master/contrib/guix/README.md) system, and signatures attesting to them can be found in the [guix.sigs](https://github.com/bitcoin-core/guix.sigs) repo. Signatures are checked in the build process for these docker images using the [verify_binaries.py](https://github.com/bitcoin/bitcoin/tree/master/contrib/verify-binaries) script from the bitcoin/bitcoin git repository.\n>\n> The alpine images are built from source inside the CI.\n>\n> The nightly master image is currently alpine-based, source-built, and targeted at the linux/amd64 platform.\n\nThis effectively means that:\n\n1. Non-alpine tagged images are pulled as tarballs from https://bitcoincore.org/bin/ and the binaries have their guix signatures checked using a copy of our verify-binaries.py script.\n\n2. Alpine images are built on-demand inside the GitHub Actions CI\n\n3. Nightly master image is built on-demand inside the GitHub Actions CI\n\n-----\n\nWhen using Bitcoin Core software for non-testing purposes you should always ensure that you have either: i) built it from source yourself, or ii) verfied your binary download (see [this page](https://bitcoincore.org/en/download/) for more information on how to do this).\n\nWhilst I have followed this procedure myself in creating these images, you should not trust me (or anyone else) providing docker images (or any other source of pre-built binaries!).\n\nWhilst you can in theory pull the non-nightly, debian-based images, boot into a shell, and verify the binary inside using the same verification instructions from bitcoincore.org/en/download, it's not the most ergonomic process, and you are likely better off re-building the image yourself using the Dockerfile after reading through it, so that you don't have to trust me.\n\nThe reason these are at bitcoin/bitcoin on Dockerhub is that there was previously a squatted project there with very old images, which I took up ownership of.\n\nThanks for asking about this, I should clarify more of this information in the README on that project.\n\nLet me know if you have any other questions about this, otherwise feel free to close this issue.",
          "created_at": "2025-01-22T15:31:20Z"
        },
        {
          "user": "raweber42",
          "body": "@willcl-ark thank you very much for the exhaustive response! It would be great to see this kind of explanation on the DockerHub page for clarification.",
          "created_at": "2025-01-22T15:40:06Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 4
  }
}