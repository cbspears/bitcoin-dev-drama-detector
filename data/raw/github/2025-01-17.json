{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:09:18.987815+00:00",
  "date": "2025-01-17",
  "pull_requests": [
    {
      "number": 31679,
      "title": "cmake: Install internal binaries to <prefix>/libexec/",
      "body": "This change moves binaries that are not typically invoked directly by users from the `bin/` directory to the `libexec/` directory in CMake installs and binary releases. The goal of the PR is to introduce a distinction between internal and external binaries so starting with #31802, we can use IPC to implement features in new binaries without adding those binaries to the CLI. The change also helps reduce clutter in `bin/`, making it easier for users to identify useful tools to run. Summary of changes:\r\n\r\n- For **source builds** (i.e. developer builds) â€” There are no changes.\r\n- For **source installs** (i.e. `cmake --install` result) â€” `test_bitcoin`, `test_bitcoin-qt`, and `bench_bitcoin` are installed in `${CMAKE_PREFIX_PATH}/libexec` instead of `${CMAKE_PREFIX_PATH}/bin`, so they are no longer on the system `PATH`. However, they can still be invoked from the `libexec/` directory, or from the CLI as `bitcoin test`, `bitcoin test-gui`, and `bitcoin bench`, respectively.\r\n- For **binary releases** â€” Since `test_bitcoin` is the only test binary enabled in releases, the only change is moving `test_bitcoin` from `bin/` to `libexec/`.\r\n\r\n<details><summary>Details</summary>\r\n<p>\r\n\r\n The table below shows the install location of each binary after this change, and the availability of each binary.\r\n\r\n| Binary               | Location     | Availability         | Change                        |\r\n|----------------------|--------------|----------------------|-------------------------------|\r\n| `bitcoin`            | `bin/`       | ðŸ“¦ Binary release (since #31375) | Unchanged                     |\r\n| `bitcoin-cli`        | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bitcoind`           | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bitcoin-qt`         | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bitcoin-tx`         | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bitcoin-util`       | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bitcoin-wallet`     | `bin/`       | ðŸ“¦ Binary release     | Unchanged                     |\r\n| `bench_bitcoin`      | `libexec/`   | ðŸ›  Source build only  | Moved from `bin/`             |\r\n| `bitcoin-chainstate` | `libexec/`   | ðŸ›  Source build only  | Newly installed (was built)   |\r\n| `bitcoin-gui`        | `libexec/`   | ðŸ›  Source build only (until #31802) | Moved from `bin/`             |\r\n| `bitcoin-node`       | `libexec/`   | ðŸ›  Source build only (until #31802) | Moved from `bin/`             |\r\n| `test_bitcoin`       | `libexec/`    | ðŸ“¦ Binary release     | Moved from `bin/`             |\r\n| `test_bitcoin-qt`    | `libexec/`   | ðŸ›  Source build only  | Moved from `bin/`             |\r\n\r\n</p>\r\n</details>\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-01-17T17:01:17Z",
      "updated_at": "2025-09-08T15:42:51Z",
      "comments": 38,
      "url": "https://github.com/bitcoin/bitcoin/pull/31679",
      "labels": [
        "Build system"
      ]
    },
    {
      "number": 31678,
      "title": "ci: Skip read-write of default env vars",
      "body": "If they remain unset, they use the default anyway. Except for `USER`, but this seems unused anyway.\r\n\r\nCan be checked via:\r\n\r\n```\r\nsh-5.2# touch /tmp/empty_env\r\nsh-5.2# podman run --rm --env-file /tmp/empty_env 'ubuntu:24.04' env\r\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\ncontainer=podman\r\nHOME=/root\r\nHOSTNAME=19ece5c9e052\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-17T12:13:07Z",
      "updated_at": "2025-02-12T14:57:46Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/31678",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31678.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/31678#pullrequestreview-2577800829), [0xB10C](https://github.com/bitcoin/bitcoin/pull/31678#issuecomment-2650904601) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-01-17T12:13:11Z"
        },
        {
          "user": "0xB10C",
          "body": "Concept ACK\r\n\r\nI want to check if this helps https://github.com/bitcoin/bitcoin/issues/30852#issuecomment-2558198430 when used with https://github.com/bitcoin/bitcoin/pull/31545 by not having to keep the base images around anymore.",
          "created_at": "2025-01-17T12:37:03Z"
        },
        {
          "user": "maflcko",
          "body": "> I want to check if this helps [#30852 (comment)](https://github.com/bitcoin/bitcoin/issues/30852#issuecomment-2558198430) when used with #31545 by not having to keep the base images around anymore.\r\n\r\n@0xB10C Are you waiting for me to rebase this once more? I've held back, because there is already one review, but I am happy to rebase.",
          "created_at": "2025-02-11T09:30:36Z"
        },
        {
          "user": "0xB10C",
          "body": "> > I want to check if this helps [#30852 (comment)](https://github.com/bitcoin/bitcoin/issues/30852#issuecomment-2558198430) when used with #31545 by not having to keep the base images around anymore.\r\n> \r\n> @0xB10C Are you waiting for me to rebase this once more? I've held back, because there is already one review, but I am happy to rebase.\r\n\r\nThanks for the reminder. I played around with this a bit and it does indeed help:\r\n\r\nWhen using https://github.com/bitcoin/bitcoin/pull/31545, the base image (e.g. `docker:22.04`) is stored as part of the `docker build`-cache. Previously, I needed to keep it around as `docker:22.04` image explictily, as `docker run` doesn't use the `docker build`-cache. Without `docker run`, there is no need to keep the image outside of the build cache.",
          "created_at": "2025-02-11T13:40:20Z"
        },
        {
          "user": "0xB10C",
          "body": "My understanding is that https://github.com/bitcoin/bitcoin/pull/28138 was only needed for `DANGER_RUN_CI_ON_HOST`. That's why removing it here isn't a regression to pre 28138, correct?",
          "created_at": "2025-02-11T13:43:12Z"
        },
        {
          "user": "maflcko",
          "body": "> My understanding is that #28138 was only needed for `DANGER_RUN_CI_ON_HOST`. That's why removing it here isn't a regression to pre 28138, correct?\r\n\r\nI do not know if they were ever needed to be set inside the CI pod, given that they fall back to the default anyway (see pull description). This may have just been added out of caution, as on the outside the pod, they are required sometimes to be set, see the docs:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blame/86528937e5c4da2e12c46085fc41e87ed759258e/ci/README.md#L46",
          "created_at": "2025-02-11T13:52:59Z"
        },
        {
          "user": "0xB10C",
          "body": "Makes sense, thanks.\r\n\r\nACK fa952acdb6ef1b07b7927202d1373fa7479fd5e4",
          "created_at": "2025-02-11T13:58:05Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 2,
    "issues": 0
  }
}