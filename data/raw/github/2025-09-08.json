{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:12:32.258698+00:00",
  "date": "2025-09-08",
  "pull_requests": [
    {
      "number": 33343,
      "title": "help: enrich help text for `-loadblock`",
      "body": "`-loadblock` doesn't support XOR-ed files, mention it in its help text to avoid troubles for users.",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-09-08T17:41:11Z",
      "updated_at": "2025-12-18T14:11:58Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/pull/33343",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33343.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17783](https://github.com/bitcoin/bitcoin/pull/17783) (common: Disallow calling IsArgSet() on ALLOW_LIST options by ryanofsky)\n* [#17581](https://github.com/bitcoin/bitcoin/pull/17581) (refactor: Remove settings merge reverse precedence code by ryanofsky)\n* [#17580](https://github.com/bitcoin/bitcoin/pull/17580) (refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags by ryanofsky)\n* [#17493](https://github.com/bitcoin/bitcoin/pull/17493) (util: Forbid ambiguous multiple assignments in config file by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\nPossible typos and grammar issues:\n\n- \"Imports blocks from external file\" -> \"Imports blocks from an external file\" [missing article \"an\" makes the phrase ungrammatical and may hinder comprehension]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-09-08T17:41:17Z"
        },
        {
          "user": "l0rinc",
          "body": "I wasn't aware of this, it seems we have a dedicated tool to https://github.com/bitcoin/bitcoin/tree/master/contrib/linearize.\r\nIt's explicitly written to deobfuscate blocks from your nodeâ€™s blk*.dat (handling XOR if present) and writes them plain to output_file or to an output/blkNNNNN.dat.",
          "created_at": "2025-09-08T22:59:17Z"
        },
        {
          "user": "HowHsu",
          "body": "> I'm not sure it's a documentation issue, I think we should rather fix it by adding the obfuscation key to the AutoFile instead. I will investigate if adding a fix and updating `feature_loadblock.py` makes more sense and will push an alternative PR to see what people think is more appropriate here. Thanks for jumping on this so quickly.\r\n\r\n\r\n> I'm not sure it's a documentation issue, I think we should rather fix it by adding the obfuscation key to the AutoFile instead. I will investigate if adding a fix and updating `feature_loadblock.py` makes more sense and will push an alternative PR to see what people think is more appropriate here. Thanks for jumping on this so quickly.\r\n\r\nHi l0rinc,\r\nI don't think it's good to either\r\n1. update the Autofile code to use the current  obfuscation key by the running node\r\nthis makes it too restrictive.\r\n2. add a new argument like `-loadblock-xor=xor_value` to indicate the xor key used by `-loadblock`\r\nsince we can restore the obfuscated file with some external tools, it's already very flexible, adding `-loadblock-xor` would be kind of meaningless.\r\nThat's why I only updated the help message.",
          "created_at": "2025-09-09T03:56:47Z"
        },
        {
          "user": "l0rinc",
          "body": "I wrote that before I found the `contrib/linearize` tool, which seems to be designed for unobfuscated block sharing anyway - maybe it can solve your problem of using `-loadblock`. If it does, we might want to mention *that* instead in the argument's documentation.",
          "created_at": "2025-09-09T04:32:11Z"
        },
        {
          "user": "mzumsande",
          "body": "> I wrote that before I found the `contrib/linearize` tool, which seems to be designed for unobfuscated block sharing anyway\r\n\r\nIt was originally designed to to something else (create a linear, in order chain), so using the tool has side effects (maybe the users doesn't want to lose historical forks for some reason). Could mention it as an example though.\r\n\r\nI'm not convinced that changing the interface to support adding a xor-key per `-loadblock` arg (or one for all?) is really worth the effort, since I'm not sure people out there actually use this feature today, and, if so, to what end.",
          "created_at": "2025-09-10T15:06:03Z"
        },
        {
          "user": "HowHsu",
          "body": "> @HowHsu Did you try `contrib/linearize` yourself to export the `.blk` files for `-loadblock`? Did it solve your issue? I have suggested a simpler documentation, do you think that help others to use the linearize tool when they're in your situation?\r\n\r\nI didn't, but I read the code of them (files under `contrib/linearize`), `linearize-data.py` only generates a list of blocks based on a list of block hashes generated by `linearize-hashes.py`, which accepts a height range [min_height, max_height] and get block hashes of these heights from RPC. That is said, the blocks are not arbitrary, if a user use `-loadblock` to load some discontinuous blocks, it has to generate its own block hashes list to feed `linearize-data.py`. So I just  add `for clues of deobfuscation and reobfuscation`. For my scenario, I've found another way to do the test, so I didn't continue it with `-loadblock`",
          "created_at": "2025-09-16T13:19:53Z"
        },
        {
          "user": "l0rinc",
          "body": "I think we should try it ourselves before recommending it in the documentation",
          "created_at": "2025-09-16T21:12:48Z"
        },
        {
          "user": "luke-jr",
          "body": "I think it would make sense to support XOR for loadblock if we're assuming the chain has data that can trigger bad things",
          "created_at": "2025-09-18T05:29:49Z"
        },
        {
          "user": "maflcko",
          "body": "> I think we should try it ourselves before recommending it in the documentation\r\n\r\nIt is already tested in `test/functional/feature_loadblock.py`, no?",
          "created_at": "2025-09-25T13:55:49Z"
        },
        {
          "user": "HowHsu",
          "body": "> I think it would make sense to support XOR for loadblock if we're assuming the chain has data that can trigger bad things\r\n\r\nHi Luke, what do you mean by \"assuming the chain has data that can trigger bad things\"",
          "created_at": "2025-09-25T15:42:47Z"
        },
        {
          "user": "HowHsu",
          "body": "> I think we should try it ourselves before recommending it in the documentation\r\n\r\nI'll try that later when I have some time for it, though the function of the script is already clear enough for me by carefully reading the code.",
          "created_at": "2025-09-25T15:44:59Z"
        },
        {
          "user": "l0rinc",
          "body": "> It is already tested in `test/functional/feature_loadblock.py`, no?\r\n\r\nThat's where I found it, but to see if it solves the original problem for why this PR was opened, it would help to have personal experience with the script so that we can document it such that others don't need to browse the tests. I'm also fine with anyone else having experience with the script suggesting a useful help text.",
          "created_at": "2025-09-25T16:17:47Z"
        }
      ]
    },
    {
      "number": 33342,
      "title": "guix: strip binaries in libexec",
      "body": "#31679 moved some internal binaries to `libexec/`, but the Guix build wasn't updated to stip these binaries of their debug symbols.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-08T15:26:50Z",
      "updated_at": "2025-09-09T23:01:50Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/33342",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33342.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/33342#pullrequestreview-3197287990), [hebasto](https://github.com/bitcoin/bitcoin/pull/33342#pullrequestreview-3198383238), [achow101](https://github.com/bitcoin/bitcoin/pull/33342#issuecomment-3268434902) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T15:26:56Z"
        },
        {
          "user": "hebasto",
          "body": "Concept ACK.\r\n\r\nBuilding...",
          "created_at": "2025-09-08T16:32:52Z"
        },
        {
          "user": "achow101",
          "body": "ACK 3cceda9f4855ac1f5df349f42efdbf5058d08f48\r\n\r\nVerified that the binaries are all stripped now, and that the debug symbols are in the debug symbols tarball.\r\n\r\n```\r\n2042885891c2fdb6d3220da39e6f19b1a9852e3cca865db10f29e94fb2edc35d  guix-build-3cceda9f4855/output/aarch64-linux-gnu/SHA256SUMS.part\r\nf0e603d2a39bab4f4f81160584d6e27c90601c38e8302b813969214e797f16f8  guix-build-3cceda9f4855/output/aarch64-linux-gnu/bitcoin-3cceda9f4855-aarch64-linux-gnu-debug.tar.gz\r\n410a706671693f8770474c797e35bb878961ff810e5a9bfb2bd19b4f069bfd0c  guix-build-3cceda9f4855/output/aarch64-linux-gnu/bitcoin-3cceda9f4855-aarch64-linux-gnu.tar.gz\r\nacc23910bac2c0955212e50cd06a38375a3e019e39bd3966e7aa639837193899  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n915477be25fdff2145864fa7c3016617a53b2dc0bb77618c690eef79a8e25b95  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/bitcoin-3cceda9f4855-arm-linux-gnueabihf-debug.tar.gz\r\n87f033dbb8bf62e9f8e7cfe2e15d902a2e05951c9e157e1f2299438f8a53820e  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/bitcoin-3cceda9f4855-arm-linux-gnueabihf.tar.gz\r\n36e19bad2d07fecb2046816e62874c6738f47fd8385218f5dce38ec2b825718b  guix-build-3cceda9f4855/output/arm64-apple-darwin/SHA256SUMS.part\r\n8c43ce3772d35a9a3ba8122cd570dca992b30625015a9e0b07a153d276d7d43d  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-codesigning.tar.gz\r\n8a6861613028af98c9b0be43c9ad30202970a249fb892a995e1f905a2b0340f2  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-unsigned.tar.gz\r\n8e2de9558feced5851666cc51f87dc47497af7c4dbfd39beb65214c9298b4568  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-unsigned.zip\r\n54aaa08e48aa1486e39d9cfb34e86b90eb015698da71879c3aee16c7f56f0346  guix-build-3cceda9f4855/output/dist-archive/bitcoin-3cceda9f4855.tar.gz\r\ncd205ad06616757171237ed1e5546b590188c4f5161f6ca404f92d6ddc575272  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n52ab0224781217fd4e8510559b5fe34b62c60e1db822f05eb7d330b26ea9a4a1  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/bitcoin-3cceda9f4855-powerpc64-linux-gnu-debug.tar.gz\r\nd577a0409f8d30467dbf05f6bb5314f17205d0f22b1cfe48438f8038416e187a  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/bitcoin-3cceda9f4855-powerpc64-linux-gnu.tar.gz\r\n8a00460822163ded488fe99dc839d1897a2901b785b84203ed2c227db1cbd8c6  guix-build-3cceda9f4855/output/riscv64-linux-gnu/SHA256SUMS.part\r\nfb7114201871b9e5a71193f59637a0b368fc012fe75fac90c3850cfbb60938a5  guix-build-3cceda9f4855/output/riscv64-linux-gnu/bitcoin-3cceda9f4855-riscv64-linux-gnu-debug.tar.gz\r\n8c881f524598ef39079408bc0c2c818021c90c49d75b066128e0399e3d446acb  guix-build-3cceda9f4855/output/riscv64-linux-gnu/bitcoin-3cceda9f4855-riscv64-linux-gnu.tar.gz\r\ncf3eece3ef893bf0b5f71ccf2465d73398e8be64735c6c1d37efe18d3cc1c7d1  guix-build-3cceda9f4855/output/x86_64-apple-darwin/SHA256SUMS.part\r\n28288864588c5a0f3faab7c9eb33e2ab339e484fc39b781f7f98be189d97deee  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-codesigning.tar.gz\r\ncc287ec94975556860e49b68e9361426b615359ac3d815e0b51afcc6ef74c32c  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-unsigned.tar.gz\r\nbaf61d1dd4ceb32af26d9e1cf23df8d2ac8ab8723f0df22c679ce5940ce30227  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-unsigned.zip\r\n61585a025447ced966f371041e61262cff6627755090a1ee3558039b902ffc32  guix-build-3cceda9f4855/output/x86_64-linux-gnu/SHA256SUMS.part\r\n9ea68a111cd0fddc5e6de027d6cfb0332d17274532e1e58b6b7a4d8a532e4425  guix-build-3cceda9f4855/output/x86_64-linux-gnu/bitcoin-3cceda9f4855-x86_64-linux-gnu-debug.tar.gz\r\ndf0b3f3ddd0e1d7309b7d2de29af8d3664fd5d25cd7718494bdbc284f5f09b57  guix-build-3cceda9f4855/output/x86_64-linux-gnu/bitcoin-3cceda9f4855-x86_64-linux-gnu.tar.gz\r\n3f3ef563e3d2ace33a80fec58b6a3df5d5da099dc5c8754bc977e59fbc39f1a4  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n572f632f21d2a7149be7ef6953e66b3d799ece9a1ca730c657092ede0092d2b7  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-codesigning.tar.gz\r\nc695b7be841085bef45a76b978a28e9d032cf1becc7fa95ed3252d86db0eb401  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-debug.zip\r\n95973bd1f18e798cea254167515ff940b5793c6006f94a530b849c153cb45255  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-setup-unsigned.exe\r\n95bbbc6d10d7356ce9ac6828bcbfad7ea078838184a1dcee27fcb47ebac175be  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-unsigned.zip\r\n```",
          "created_at": "2025-09-09T00:23:36Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build:\r\n```bash\r\n2042885891c2fdb6d3220da39e6f19b1a9852e3cca865db10f29e94fb2edc35d  guix-build-3cceda9f4855/output/aarch64-linux-gnu/SHA256SUMS.part\r\nf0e603d2a39bab4f4f81160584d6e27c90601c38e8302b813969214e797f16f8  guix-build-3cceda9f4855/output/aarch64-linux-gnu/bitcoin-3cceda9f4855-aarch64-linux-gnu-debug.tar.gz\r\n410a706671693f8770474c797e35bb878961ff810e5a9bfb2bd19b4f069bfd0c  guix-build-3cceda9f4855/output/aarch64-linux-gnu/bitcoin-3cceda9f4855-aarch64-linux-gnu.tar.gz\r\nacc23910bac2c0955212e50cd06a38375a3e019e39bd3966e7aa639837193899  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n915477be25fdff2145864fa7c3016617a53b2dc0bb77618c690eef79a8e25b95  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/bitcoin-3cceda9f4855-arm-linux-gnueabihf-debug.tar.gz\r\n87f033dbb8bf62e9f8e7cfe2e15d902a2e05951c9e157e1f2299438f8a53820e  guix-build-3cceda9f4855/output/arm-linux-gnueabihf/bitcoin-3cceda9f4855-arm-linux-gnueabihf.tar.gz\r\n36e19bad2d07fecb2046816e62874c6738f47fd8385218f5dce38ec2b825718b  guix-build-3cceda9f4855/output/arm64-apple-darwin/SHA256SUMS.part\r\n8c43ce3772d35a9a3ba8122cd570dca992b30625015a9e0b07a153d276d7d43d  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-codesigning.tar.gz\r\n8a6861613028af98c9b0be43c9ad30202970a249fb892a995e1f905a2b0340f2  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-unsigned.tar.gz\r\n8e2de9558feced5851666cc51f87dc47497af7c4dbfd39beb65214c9298b4568  guix-build-3cceda9f4855/output/arm64-apple-darwin/bitcoin-3cceda9f4855-arm64-apple-darwin-unsigned.zip\r\n54aaa08e48aa1486e39d9cfb34e86b90eb015698da71879c3aee16c7f56f0346  guix-build-3cceda9f4855/output/dist-archive/bitcoin-3cceda9f4855.tar.gz\r\ncd205ad06616757171237ed1e5546b590188c4f5161f6ca404f92d6ddc575272  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n52ab0224781217fd4e8510559b5fe34b62c60e1db822f05eb7d330b26ea9a4a1  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/bitcoin-3cceda9f4855-powerpc64-linux-gnu-debug.tar.gz\r\nd577a0409f8d30467dbf05f6bb5314f17205d0f22b1cfe48438f8038416e187a  guix-build-3cceda9f4855/output/powerpc64-linux-gnu/bitcoin-3cceda9f4855-powerpc64-linux-gnu.tar.gz\r\n8a00460822163ded488fe99dc839d1897a2901b785b84203ed2c227db1cbd8c6  guix-build-3cceda9f4855/output/riscv64-linux-gnu/SHA256SUMS.part\r\nfb7114201871b9e5a71193f59637a0b368fc012fe75fac90c3850cfbb60938a5  guix-build-3cceda9f4855/output/riscv64-linux-gnu/bitcoin-3cceda9f4855-riscv64-linux-gnu-debug.tar.gz\r\n8c881f524598ef39079408bc0c2c818021c90c49d75b066128e0399e3d446acb  guix-build-3cceda9f4855/output/riscv64-linux-gnu/bitcoin-3cceda9f4855-riscv64-linux-gnu.tar.gz\r\ncf3eece3ef893bf0b5f71ccf2465d73398e8be64735c6c1d37efe18d3cc1c7d1  guix-build-3cceda9f4855/output/x86_64-apple-darwin/SHA256SUMS.part\r\n28288864588c5a0f3faab7c9eb33e2ab339e484fc39b781f7f98be189d97deee  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-codesigning.tar.gz\r\ncc287ec94975556860e49b68e9361426b615359ac3d815e0b51afcc6ef74c32c  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-unsigned.tar.gz\r\nbaf61d1dd4ceb32af26d9e1cf23df8d2ac8ab8723f0df22c679ce5940ce30227  guix-build-3cceda9f4855/output/x86_64-apple-darwin/bitcoin-3cceda9f4855-x86_64-apple-darwin-unsigned.zip\r\n61585a025447ced966f371041e61262cff6627755090a1ee3558039b902ffc32  guix-build-3cceda9f4855/output/x86_64-linux-gnu/SHA256SUMS.part\r\n9ea68a111cd0fddc5e6de027d6cfb0332d17274532e1e58b6b7a4d8a532e4425  guix-build-3cceda9f4855/output/x86_64-linux-gnu/bitcoin-3cceda9f4855-x86_64-linux-gnu-debug.tar.gz\r\ndf0b3f3ddd0e1d7309b7d2de29af8d3664fd5d25cd7718494bdbc284f5f09b57  guix-build-3cceda9f4855/output/x86_64-linux-gnu/bitcoin-3cceda9f4855-x86_64-linux-gnu.tar.gz\r\n3f3ef563e3d2ace33a80fec58b6a3df5d5da099dc5c8754bc977e59fbc39f1a4  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n572f632f21d2a7149be7ef6953e66b3d799ece9a1ca730c657092ede0092d2b7  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-codesigning.tar.gz\r\nc695b7be841085bef45a76b978a28e9d032cf1becc7fa95ed3252d86db0eb401  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-debug.zip\r\n95973bd1f18e798cea254167515ff940b5793c6006f94a530b849c153cb45255  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-setup-unsigned.exe\r\n95bbbc6d10d7356ce9ac6828bcbfad7ea078838184a1dcee27fcb47ebac175be  guix-build-3cceda9f4855/output/x86_64-w64-mingw32/bitcoin-3cceda9f4855-win64-unsigned.zip\r\n```",
          "created_at": "2025-09-09T08:39:49Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 3eea9fd39532eeda648e44de365fc4c9112f6fc6<br>(master) | commit 4a940de4cea98e20a026f449f7a5e545455d151f<br>(pull/33342/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`faa23275bdafda39...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-aarch64-linux-gnu-debug.tar.gz) | [`692a3a525987d53b...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`acb67370685d442c...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-aarch64-linux-gnu.tar.gz) | [`2c56a19493eebdfe...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`2b038d65f13e9ac7...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-arm-linux-gnueabihf-debug.tar.gz) | [`6d497f319010bde7...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`2f6c98a7b0ddf070...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-arm-linux-gnueabihf.tar.gz) | [`6ebfef1e6174b8f8...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`4fb70b060d260167...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-arm64-apple-darwin-codesigning.tar.gz) | [`fb13290b33e9a510...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`f9a9afb0650dd6bd...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-arm64-apple-darwin-unsigned.tar.gz) | [`74e557157499a236...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`a49f7f4e981a776e...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-arm64-apple-darwin-unsigned.zip) | [`8db5724a69b05937...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`2197085bfc258bf9...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-powerpc64-linux-gnu-debug.tar.gz) | [`4d681d28d7a5e6e2...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`0355c2d38d0f45ba...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-powerpc64-linux-gnu.tar.gz) | [`46760cdaf7ad017b...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`a8f709bc3b5def37...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-riscv64-linux-gnu-debug.tar.gz) | [`07b8fb1c67ddf0a2...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`b95fe3c4569812cb...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-riscv64-linux-gnu.tar.gz) | [`762ae2ff32f0a3e4...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`cf761b47437adf8b...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-x86_64-apple-darwin-codesigning.tar.gz) | [`13b5fff5eda7d7e9...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`9ac8d47687ee1945...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-x86_64-apple-darwin-unsigned.tar.gz) | [`a63d75766b110eb6...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`7dfaab4fd2692deb...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-x86_64-apple-darwin-unsigned.zip) | [`685a8e76f2955f12...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`3b720439e55240e8...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-x86_64-linux-gnu-debug.tar.gz) | [`dc653d1f4b539333...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`506a254197ae40e2...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532-x86_64-linux-gnu.tar.gz) | [`d5f653be6fd2f0a0...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`5df3a40965bca6a9...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/bitcoin-3eea9fd39532.tar.gz) | [`37daee35192e79cf...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/bitcoin-4a940de4cea9.tar.gz) |\n| SHA256SUMS.part | [`aeee9eb703c1b4f5...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/SHA256SUMS.part) | [`225ec5806689dd1e...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/SHA256SUMS.part) |\n| guix_build.log | [`a84482d5f97d77be...`](https://drahtbot.space/guix/monotree/3eea9fd39532eeda648e44de365fc4c9112f6fc6/guix_build.log) | [`73b9a2b27f84a11c...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/guix_build.log) |\n| guix_build.log.diff |  | [`2779c0b05135057d...`](https://drahtbot.space/guix/monotree/4a940de4cea98e20a026f449f7a5e545455d151f/guix_build.log.diff) |\n\n",
          "created_at": "2025-09-09T23:01:49Z"
        }
      ]
    },
    {
      "number": 33340,
      "title": "Fix benchmark CSV output",
      "body": "The `SHA256AutoDetect` return output is used, among other use cases, to name benchmarks. Using a comma breaks the `bench_bitcoin` CSV output.\r\n\r\nThis PR replaces the comma with a semicolon, which fixes https://github.com/bitcoin/bitcoin/issues/33331.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-09-08T11:14:24Z",
      "updated_at": "2025-09-17T14:18:48Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33340",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33340.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/33340#pullrequestreview-3197485791), [janb84](https://github.com/bitcoin/bitcoin/pull/33340#pullrequestreview-3197683091), [Raimo33](https://github.com/bitcoin/bitcoin/pull/33340#issuecomment-3267809025) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T11:14:28Z"
        },
        {
          "user": "Raimo33",
          "body": "Code Review ACK 790b440197bde322432a5bab161f1869b667e681",
          "created_at": "2025-09-08T20:13:33Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 28.x in #33415 & 29.x in #33344.",
          "created_at": "2025-09-17T14:18:48Z"
        }
      ]
    },
    {
      "number": 33339,
      "title": "doc: move release notes to wiki pre branch off",
      "body": "See https://github.com/bitcoin-core/bitcoin-devwiki/wiki/v30.0-Release-Notes-Draft.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-08T11:10:31Z",
      "updated_at": "2025-09-08T12:42:06Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33339",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33339.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/33339#pullrequestreview-3196259513), [willcl-ark](https://github.com/bitcoin/bitcoin/pull/33339#pullrequestreview-3196263483) |\n| Concept ACK | [fridokus](https://github.com/bitcoin/bitcoin/pull/33339#issuecomment-3265992578) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T11:10:37Z"
        },
        {
          "user": "fridokus",
          "body": "utACK",
          "created_at": "2025-09-08T12:08:33Z"
        }
      ]
    },
    {
      "number": 33338,
      "title": "net: Add interrupt to pcp retry loop",
      "body": "Without this interrupt bitcoind takes a long time to exit if requested to do so after a failed pcp lookup on startup.\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-09-08T10:20:00Z",
      "updated_at": "2025-09-08T20:44:55Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33338",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33338.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/33338#pullrequestreview-3196901800), [hodlinator](https://github.com/bitcoin/bitcoin/pull/33338#pullrequestreview-3196452837), [achow101](https://github.com/bitcoin/bitcoin/pull/33338#issuecomment-3267870639) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T10:20:07Z"
        },
        {
          "user": "sedited",
          "body": "Logs:\r\n\r\n<details>\r\n<summary>Master logs when mapping fails (Click to expand)</summary>\r\n\r\n```\r\n2025-09-08T10:02:52Z msghand thread start\r\n2025-09-08T10:02:52Z Imported mempool transactions from file: 3 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\r\n2025-09-08T10:02:52Z initload thread exit\r\n2025-09-08T10:02:52Z [net:warning] pcp: Could not receive response: Connection refused (111)\r\n2025-09-08T10:02:52Z [net] portmap: gateway [IPv6]: fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:02:52Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:4bfd:91da:7cba:67cb port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:02:52Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:4bfd:91da:7cba:67cb\r\n2025-09-08T10:02:53Z [net] trying v2 connection [2001:e60:1154:ccd9:3515:d56c:bb7:5f4c]:38333 lastseen=58.3hrs\r\n2025-09-08T10:02:53Z [net] pcp: Timeout\r\n2025-09-08T10:02:53Z [net] pcp: Retrying (1)\r\n2025-09-08T10:02:54Z [net] pcp: Timeout\r\n2025-09-08T10:02:54Z [net] pcp: Retrying (2)\r\n^C2025-09-08T10:02:54Z tor: Thread interrupt\r\n2025-09-08T10:02:54Z Shutdown in progress...\r\n2025-09-08T10:02:54Z torcontrol thread exit\r\n2025-09-08T10:02:54Z dnsseed thread exit\r\n2025-09-08T10:02:54Z addcon thread exit\r\n2025-09-08T10:02:54Z net thread exit\r\n2025-09-08T10:02:55Z msghand thread exit\r\n2025-09-08T10:02:55Z [net] pcp: Timeout\r\n2025-09-08T10:02:55Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:02:55Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:1386:bc1d:7d89:306d port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:02:55Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:1386:bc1d:7d89:306d\r\n2025-09-08T10:02:56Z [net] pcp: Timeout\r\n2025-09-08T10:02:56Z [net] pcp: Retrying (1)\r\n2025-09-08T10:02:57Z [net] pcp: Timeout\r\n2025-09-08T10:02:57Z [net] pcp: Retrying (2)\r\n2025-09-08T10:02:58Z [net] connection attempt to [2001:e60:1154:ccd9:3515:d56c:bb7:5f4c]:38333 timed out\r\n2025-09-08T10:02:58Z opencon thread exit\r\n2025-09-08T10:02:58Z [net] pcp: Timeout\r\n2025-09-08T10:02:58Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:02:58Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:17ff:1c49:2591:5195 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:02:58Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:17ff:1c49:2591:5195\r\n2025-09-08T10:02:59Z [net] pcp: Timeout\r\n2025-09-08T10:02:59Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:00Z [net] pcp: Timeout\r\n2025-09-08T10:03:00Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:01Z [net] pcp: Timeout\r\n2025-09-08T10:03:01Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:01Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:5e43:d231:cd0b:5424 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:01Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:5e43:d231:cd0b:5424\r\n2025-09-08T10:03:02Z [net] pcp: Timeout\r\n2025-09-08T10:03:02Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:03Z [net] pcp: Timeout\r\n2025-09-08T10:03:03Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:04Z [net] pcp: Timeout\r\n2025-09-08T10:03:04Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:eb22:5bda:fe93:efb3 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:eb22:5bda:fe93:efb3\r\n2025-09-08T10:03:05Z [net] pcp: Timeout\r\n2025-09-08T10:03:05Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:06Z [net] pcp: Timeout\r\n2025-09-08T10:03:06Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:07Z [net] pcp: Timeout\r\n2025-09-08T10:03:07Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:07Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:ad0f:260a:2c63:7494 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:07Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:ad0f:260a:2c63:7494\r\n2025-09-08T10:03:08Z [net] pcp: Timeout\r\n2025-09-08T10:03:08Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:09Z [net] pcp: Timeout\r\n2025-09-08T10:03:09Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:10Z [net] pcp: Timeout\r\n2025-09-08T10:03:10Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:10Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:65cf:20cb:5921:45bf port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:10Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:65cf:20cb:5921:45bf\r\n2025-09-08T10:03:11Z [net] pcp: Timeout\r\n2025-09-08T10:03:11Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:12Z [net] pcp: Timeout\r\n2025-09-08T10:03:12Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:13Z [net] pcp: Timeout\r\n2025-09-08T10:03:13Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:13Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:5f6b:1db9:7ba0:44a port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:13Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:5f6b:1db9:7ba0:44a\r\n2025-09-08T10:03:14Z [net] pcp: Timeout\r\n2025-09-08T10:03:14Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:15Z [net] pcp: Timeout\r\n2025-09-08T10:03:15Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:16Z [net] pcp: Timeout\r\n2025-09-08T10:03:16Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:16Z [net] pcp: Requesting port mapping for addr 1111:1111::1 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:03:16Z [net] pcp: Internal address after connect: 1111:1111::1\r\n2025-09-08T10:03:17Z [net] pcp: Timeout\r\n2025-09-08T10:03:17Z [net] pcp: Retrying (1)\r\n2025-09-08T10:03:18Z [net] pcp: Timeout\r\n2025-09-08T10:03:18Z [net] pcp: Retrying (2)\r\n2025-09-08T10:03:19Z [net] pcp: Timeout\r\n2025-09-08T10:03:19Z [net] pcp: Giving up after 3 tries\r\n2025-09-08T10:03:19Z mapport thread exit\r\n2025-09-08T10:03:19Z [net] Flushed 13682 addresses to peers.dat  22ms\r\n2025-09-08T10:03:19Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2025-09-08T10:03:19Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2025-09-08T10:03:19Z scheduler thread exit\r\n2025-09-08T10:03:19Z Writing 3 mempool transactions to file...\r\n2025-09-08T10:03:19Z Writing 0 unbroadcast transactions to file.\r\n2025-09-08T10:03:19Z Dumped mempool: 0.000s to copy, 0.008s to dump, 1011 bytes dumped to file\r\n2025-09-08T10:03:19Z Flushed fee estimates to fee_estimates.dat.\r\n2025-09-08T10:03:19Z Shutdown done\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>This PR's logs when mapping fails (Click to expand)</summary>\r\n\r\n```\r\n2025-09-08T10:07:03Z msghand thread start\r\n2025-09-08T10:07:03Z addcon thread start\r\n2025-09-08T10:07:03Z initload thread exit\r\n2025-09-08T10:07:03Z [net:warning] pcp: Could not receive response: Connection refused (111)\r\n2025-09-08T10:07:03Z [net] portmap: gateway [IPv6]: fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:03Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:4bfd:91da:7cba:67cb port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:03Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:4bfd:91da:7cba:67cb\r\n^C2025-09-08T10:07:03Z tor: Thread interrupt\r\n2025-09-08T10:07:03Z Shutdown in progress...\r\n2025-09-08T10:07:03Z torcontrol thread exit\r\n2025-09-08T10:07:03Z addcon thread exit\r\n2025-09-08T10:07:03Z opencon thread exit\r\n2025-09-08T10:07:03Z dnsseed thread exit\r\n2025-09-08T10:07:03Z net thread exit\r\n2025-09-08T10:07:03Z msghand thread exit\r\n2025-09-08T10:07:04Z [net] pcp: Timeout\r\n2025-09-08T10:07:04Z [net] pcp: Retrying (1)\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:1386:bc1d:7d89:306d port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:1386:bc1d:7d89:306d\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:17ff:1c49:2591:5195 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:17ff:1c49:2591:5195\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:5e43:d231:cd0b:5424 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:5e43:d231:cd0b:5424\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:eb22:5bda:fe93:efb3 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:eb22:5bda:fe93:efb3\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:ad0f:260a:2c63:7494 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:ad0f:260a:2c63:7494\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:65cf:20cb:5921:45bf port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:65cf:20cb:5921:45bf\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 2a02:1210:4a25:2f00:5f6b:1db9:7ba0:44a port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 2a02:1210:4a25:2f00:5f6b:1db9:7ba0:44a\r\n2025-09-08T10:07:04Z [net] pcp: Requesting port mapping for addr 1111:1111::1 port 38333 from gateway fe80::a6ce:daff:fe8f:12a0%4\r\n2025-09-08T10:07:04Z [net] pcp: Internal address after connect: 1111:1111::1\r\n2025-09-08T10:07:04Z mapport thread exit\r\n2025-09-08T10:07:04Z [net] Flushed 13692 addresses to peers.dat  20ms\r\n2025-09-08T10:07:04Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2025-09-08T10:07:04Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2025-09-08T10:07:04Z scheduler thread exit\r\n2025-09-08T10:07:04Z Writing 3 mempool transactions to file...\r\n2025-09-08T10:07:04Z Writing 0 unbroadcast transactions to file.\r\n2025-09-08T10:07:04Z Dumped mempool: 0.000s to copy, 0.006s to dump, 1011 bytes dumped to file\r\n2025-09-08T10:07:04Z Flushed fee estimates to fee_estimates.dat.\r\n2025-09-08T10:07:04Z Shutdown done\r\n```\r\n</details>\r\n",
          "created_at": "2025-09-08T10:21:07Z"
        },
        {
          "user": "achow101",
          "body": "ACK 188de70c86414b8b2ad5143f5c607b67686526ea",
          "created_at": "2025-09-08T20:29:40Z"
        }
      ]
    },
    {
      "number": 33337,
      "title": "chore: compare against keys.size() in writeObject comma check",
      "body": "Replace values.size() with keys.size() in the comma condition inside UniValue::writeObject. The loop iterates over keys.size(), and other UniValue methods consistently treat keys and values as parallel arrays. Using keys.size() here ensures internal consistency, avoids relying on the implicit invariant that keys.size() == values.size(\r\n",
      "state": "closed",
      "user": "Snezhkko",
      "created_at": "2025-09-08T08:10:28Z",
      "updated_at": "2025-09-09T14:25:46Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33337",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33337.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/33337#issuecomment-3267229143), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33337#pullrequestreview-3201895990) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T08:10:32Z"
        },
        {
          "user": "l0rinc",
          "body": "NACK, the existing value makes more sense to me, it's not solving any actual problem",
          "created_at": "2025-09-08T17:20:48Z"
        }
      ]
    },
    {
      "number": 33336,
      "title": "log: print every script verification state change",
      "body": "### Summary\r\n\r\nUsers can encounter cases where script checks are unexpectedly enabled (e.g. after reindex, or when `assumevalid`/`minimumchainwork` gates fail). Without an explicit line, they must infer state from the absence of a message, which is incomplete and error-prone. \r\nThe existing \"Assuming ancestors of block â€¦\" line does not reliably indicate whether script checks are actually enabled, which makes debugging/benchmarking confusing.\r\n\r\n### What this changes\r\n\r\nWe make the initial **script-verification** state explicit and log **why** checks are enabled to avoid confusion.\r\n* Always log the first script-verification state on startup, **before** the first `UpdateTip`.\r\n* Flatten the nested `assumevalid` conditionals into a linear gating sequence for readability.\r\n* Extend the functional test to assert the old behavior with the new reason strings.\r\n\r\nThis is a **logging-only** test change it shouldn't change any other behavior.\r\n\r\n### Example output\r\n\r\nThe state (with reason) is logged at startup and whenever the reason changes, e.g.:\r\n\r\n* `Disabling script verification at block #904336 (000000000000000000014106b2082b1a18aaf3091e8b337c6fed110db8c56620).`\r\n* `Enabling script verification at block #912527 (000000000000000000010bb6aa3ecabd7d41738463b6c6621776c2e40dbe738a): block too recent relative to best header.`\r\n* `Enabling script verification at block #912684 (00000000000000000001375cf7b90b2b86e559d05ed92ca764d376702ead3858): block height above assumevalid height.`\r\n\r\n------\r\n\r\nFollow-up to https://github.com/bitcoin/bitcoin/pull/32975#discussion_r2329269037",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-09-08T06:40:46Z",
      "updated_at": "2025-10-24T19:10:27Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/pull/33336",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33336.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3292830294), [Eunovo](https://github.com/bitcoin/bitcoin/pull/33336#issuecomment-3360275363), [yuvicc](https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3297532271), [andrewtoth](https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3302015530), [ajtowns](https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3369808963), [achow101](https://github.com/bitcoin/bitcoin/pull/33336#issuecomment-3444209034) |\n| Approach ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/33336#issuecomment-3302633627) |\n| Stale ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3255852704) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31615](https://github.com/bitcoin/bitcoin/pull/31615) (validation: ensure assumevalid is always used during reindex by Eunovo)\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-08T06:40:52Z"
        },
        {
          "user": "l0rinc",
          "body": "For more context, even just restarting the node that was reindexed before (and is at around 200k blocks) with `-assumevalid=0000000000000000000087564caa77e7b3f29d0464256c04d5539e43663f8698` (block 914005), it still starts with signature verification enabled - using 70% of CPU when it should have been disabled in the first place, see:\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e6094caf-c0d3-40dd-8edd-92cbe76c3d81\" />\r\nThis PR makes it at least obvious that something's off.\r\nhttps://github.com/bitcoin/bitcoin/pull/31615#issuecomment-3273275956 doesn't seem to fix the issue, but that's orthogonal with at least making it obvious via the logs.",
          "created_at": "2025-09-10T04:28:14Z"
        },
        {
          "user": "l0rinc",
          "body": "> that this just reflects assumevalid\r\n\r\nUnfortunately it's more complicated than that, see https://github.com/bitcoin/bitcoin/pull/33336#issuecomment-3273277122\r\nIf you have a concrete suggestion for how to rephrase it, I don't mind applying it.",
          "created_at": "2025-09-10T21:36:14Z"
        },
        {
          "user": "l0rinc",
          "body": "I have instrumented the code, ran some RPC commands and reindexed the whole thing again to see why script verification is always on.\r\nAfter some discussions with @ajtowns it turns out I needed both `-assumevalid=<in-range header>` and `-minimumchainwork=0` to be able to disable script verification.\r\n\r\n---\r\n\r\nAfter `reindex`, my node has ~841k headers, a lot lower than the current tip of ~914k.\r\nThe default `assumevalid` block (height 912,683) is in that missing range, so the header lookup fails since the block isn't found in the block index (even though the log claims \"Assuming ancestors of block ... have valid signatures\").\r\nEven when I set a custom `assumevalid` to a block I actually have, my `chainwork` is still below the bumped `nMinimumChainWork` from [755152ac](https://github.com/bitcoin/bitcoin/blob/755152ac819a23acf2f9e70316134d74a04d589b/src/kernel/chainparams.cpp#L121-L122).\r\n\r\nSo the results were:\r\n* **Default params:** `./build/bin/bitcoind` - `script verification` enabled since block is not among the `headers`\r\n* **Custom `assumevalid` from the `headers` (841,149):** `./build/bin/bitcoind -assumevalid=00000000000000000000529087e51068a98d16a071401d7d43494c4a3bf75cd6` - `script verification` still enabled. Header lookup works fine, but my `chainwork` (`769fbaeb...`) is below the required minimum (`dee8e2a3...`).\r\n* **Default `assumevalid` with low `chainwork`:** `./build/bin/bitcoind -minimumchainwork=0` - still doesn't work because it falls back to the default `assumevalid` which isn't in my `headers`.\r\n* **Custom `assumevalid` with low `chainwork`:** `./build/bin/bitcoind -assumevalid=00000000000000000000529087e51068a98d16a071401d7d43494c4a3bf75cd6 -minimumchainwork=0` - script verification finally gets disabled.\r\n\r\n---\r\n\r\nSo maybe we should update the logs to give the reason for the script verification more precisely: script verification is enabled because the `assumevalid` block cannot be found / the available `nChainWork` isn't sufficient / the blocks are too close to the current tip.\r\n\r\nThe early \"Assuming ancestors of block â€¦\" line is emitted even when that header is not present locally yet - maybe we should adjust this, too.",
          "created_at": "2025-09-11T05:38:59Z"
        },
        {
          "user": "ajtowns",
          "body": "> After `reindex`, my node has ~841k headers, a lot lower than the current tip of ~914k.\r\n> The default `assumevalid` block (height 912,683) is in that missing range,\r\n\r\nI think the behaviour here is probably fine -- it's a weak way of preventing you from triggering assumevalid behaviour on an invalid chain with substantially lower total work than the main chain. It might be nice to have a warning that your headers chain doesn't meet minchainwork though. It would probably be nicer to be able to obtain the missing headers though.\r\n\r\nEDIT: probably fine, compared to the alternative of dropping the `best_header->nChainWork >= MinimumChainWork` check, and just relying on the assumevalid block being in the best_header's ancestry. That didn't seem to have much rationale when it was introduced afaics: https://github.com/bitcoin/bitcoin/pull/9484#issuecomment-272469033",
          "created_at": "2025-09-11T06:04:32Z"
        },
        {
          "user": "Eunovo",
          "body": "> After `reindex`, my node has ~841k headers, a lot lower than the current tip of ~914k. The default `assumevalid` block (height 912,683) is in that missing range, so the header lookup fails since the block isn't found in the block index (even though the log claims \"Assuming ancestors of block ... have valid signatures\"). Even when I set a custom `assumevalid` to a block I actually have, my `chainwork` is still below the bumped `nMinimumChainWork` from [755152ac](https://github.com/bitcoin/bitcoin/blob/755152ac819a23acf2f9e70316134d74a04d589b/src/kernel/chainparams.cpp#L121-L122).\r\n\r\nIt's surprising that https://github.com/bitcoin/bitcoin/pull/31615 didn't help with this. If the block wasn't found in the index, it's supposed to skip script checks while reindexing. If the block was found in the index, it will skip the `MinimumChainwork` check. The only reason why script checks will not get skipped is if the chosen assumed valid block is in the index and it is less than 2 weeks away from the tip of the chain, due to this line\r\n`fScriptChecks = (GetBlockProofEquivalentTime(*m_chainman.m_best_header, *pindex, *m_chainman.m_best_header, params.GetConsensus()) <= 60 * 60 * 24 * 7 * 2);`",
          "created_at": "2025-09-11T08:15:11Z"
        },
        {
          "user": "l0rinc",
          "body": "> It might be nice to have a warning that your headers chain doesn't meet minchainwork though\r\n\r\nGiven how confusing https://github.com/bitcoin/bitcoin/pull/33336#issuecomment-3277968407 was for many of us, it may be beneficial to extend this PR to show the reason for why script verification was enabled.\r\n\r\nGiven the number of acks and time constraints, I have to ask @yuvicc, @Eunovo, @hodlinator, @TheCharlatan, @ajtowns, @w0xlt: would that be welcome change, see https://github.com/l0rinc/bitcoin/pull/38/files\r\n\r\nEdit: split the above suggestion into small focused commits and pushed here since I think it's arguably superior to previous logging attempts.\r\n",
          "created_at": "2025-09-14T01:12:58Z"
        },
        {
          "user": "w0xlt",
          "body": "Approach ACK.\r\n\r\n> beneficial to extend this PR to show the reason for why script verification was enabled.\r\n\r\nI agree.\r\n\r\n> split the above suggestion into small focused commits\r\n\r\nCommits could be squashed but but keeping them separate makes it clearer to review.",
          "created_at": "2025-09-15T04:24:50Z"
        },
        {
          "user": "sedited",
          "body": "Approach ACK",
          "created_at": "2025-09-17T11:52:44Z"
        },
        {
          "user": "achow101",
          "body": "Given that the scope of the changes in this PR has expanded quite a bit since it was added to the milestone, and since the changes take place within consensus validation, I think this should be removed from the milestone. I don't think this will be able to get sufficient review for this release, and I don't think the changes here are necessary for the upcoming release.",
          "created_at": "2025-09-18T20:26:57Z"
        },
        {
          "user": "Eunovo",
          "body": "re-ACK https://github.com/bitcoin/bitcoin/pull/33336/commits/45bd8914658a675d00aa9c83373d6903a8a9ece8",
          "created_at": "2025-10-02T10:04:24Z"
        },
        {
          "user": "l0rinc",
          "body": "rfm",
          "created_at": "2025-10-23T15:11:06Z"
        },
        {
          "user": "achow101",
          "body": "ACK 45bd8914658a675d00aa9c83373d6903a8a9ece8",
          "created_at": "2025-10-24T17:33:44Z"
        },
        {
          "user": "l0rinc",
          "body": "Thank you all for the reviews, appreciate the help.\r\nEdit: I'd like to suggest we backport this to `30.1`.",
          "created_at": "2025-10-24T18:05:57Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33341,
      "title": "ipc: crash on `submitSolution` call with invalid coinbase",
      "body": "There seems to be an unhandled exception when deserializing an invalid coinbase in `submitSolution`. \n<details>\n<summary>log</summary>\n\n```bash\nnode0 2025-09-08T11:26:56.165687Z [capnp-loop] [../../../src/ipc/capnp/protocol.cpp:35] [void ipc::capnp::(anonymous namespace)::IpcLogFn(bool, std::string)] [ipc] {bitcoin-node-166995/b-capnp-loop-166997} IPC server recv request  #14 BlockTemplate.submitSolution$Params (context = (thread = <external capability>), version = 0, timestamp = 0, nonce = 0, coinbase = \"\") \n node0 2025-09-08T11:26:56.165711Z [capnp-loop] [../../../src/ipc/capnp/protocol.cpp:35] [void ipc::capnp::(anonymous namespace)::IpcLogFn(bool, std::string)] [ipc] {bitcoin-node-166995/b-capnp-loop-166997} IPC server post request  #14 {bitcoin-node-166995/b-capnp-loop-167036 (from pythread)} \n test  2025-09-08T11:26:56.207859Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 199, in main\n                                       self.run_test()\n                                     File \"/root/bitcoin/./debugbuild/test/functional/interface_ipc.py\", line 186, in run_test\n                                       self.run_mining_test()\n                                     File \"/root/bitcoin/./debugbuild/test/functional/interface_ipc.py\", line 182, in run_mining_test\n                                       asyncio.run(capnp.run(async_routine()))\n                                     File \"/usr/lib/python3.11/asyncio/runners.py\", line 190, in run\n                                       return runner.run(main)\n                                              ^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.11/asyncio/runners.py\", line 118, in run\n                                       return self._loop.run_until_complete(task)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.11/asyncio/base_events.py\", line 653, in run_until_complete\n                                       return future.result()\n                                              ^^^^^^^^^^^^^^^\n                                     File \"capnp/lib/capnp.pyx\", line 1965, in run\n                                     File \"capnp/lib/capnp.pyx\", line 1966, in capnp.lib.capnp.run\n                                     File \"/root/bitcoin/./debugbuild/test/functional/interface_ipc.py\", line 128, in async_routine\n                                       result = await template.result.submitSolution(ctx, 0, 0, 0, b\"\")\n                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                   capnp.lib.capnp.KjException: capnp/rpc.c++:2778: disconnected: Peer disconnected.\n                                   stack: 7fd1cba914c4 7fd1cba87d10 7fd1cba777c0 7fd1cb9164f0 7fd1cb9187d0\n test  2025-09-08T11:26:56.218026Z TestFramework (DEBUG): Closing down network thread \n test  2025-09-08T11:26:56.268255Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2025-09-08T11:26:56.268354Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_jp4hfh13 \n test  2025-09-08T11:26:56.268384Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_jp4hfh13/test_framework.log \n test  2025-09-08T11:26:56.268453Z TestFramework (ERROR): \n test  2025-09-08T11:26:56.268517Z TestFramework (ERROR): Hint: Call /root/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_jp4hfh13' to consolidate all logs \n test  2025-09-08T11:26:56.268547Z TestFramework (ERROR): \n test  2025-09-08T11:26:56.268569Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2025-09-08T11:26:56.268603Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2025-09-08T11:26:56.268627Z TestFramework (ERROR): \n\n node0 stderr terminate called after throwing an instance of 'std::ios_base::failure[abi:cxx11]'\n  what():  SpanReader::read(): end of data: iostream error \n```\n\n</details>\n\nI found this while using [fuzzamoto](https://github.com/dergoegge/fuzzamoto) to test the mining interface, but the easiest way to reproduce would be to just add \n```c++\nawait template.result.submitSolution(ctx, 0, 0, 0, b\"\")\n```\nafter creating the block template in the IPC functional test (`interface_ipc.py`).",
      "state": "open",
      "user": "marcofleon",
      "created_at": "2025-09-08T12:53:25Z",
      "updated_at": "2025-09-08T14:40:31Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33341",
      "labels": [
        "interfaces"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "@Sjors @ryanofsky ",
          "created_at": "2025-09-08T12:55:26Z"
        },
        {
          "user": "Sjors",
          "body": "Thanks, I was able to reproduce that. Will add a guard and test.",
          "created_at": "2025-09-08T13:07:46Z"
        },
        {
          "user": "Sjors",
          "body": "@ryanofsky looks like libmultiprocess needs to catch this earlier, because even if I make     `bool submitSolution` immediately return `false` it crashes.\n\nThe node crashes with:\n\n```\nlibc++abi: terminating due to uncaught exception of type std::__1::ios_base::failure: SpanReader::read(): end of data: unspecified iostream_category error\n```",
          "created_at": "2025-09-08T13:14:02Z"
        },
        {
          "user": "ryanofsky",
          "body": "Nice find. This behavior is expected but should be improved, and shouldn't be hard to improve.\n\nIt's similar to https://github.com/bitcoin-core/libmultiprocess/issues/206 in that if a bad request is sent to the node, the node will crash instead of returning an error, when it could just as easily return an error, and it would make sense to do that for the sake of stability and to make development easier with other languages like rust and python.\n\nSimilar to https://github.com/bitcoin-core/libmultiprocess/issues/206 this type of error is difficult to trigger from  c++ unless you call the function with an argument that can only be serialized but not deserialized.\n\nIt should not be hard to add some code to [serverInvoke](https://github.com/bitcoin-core/libmultiprocess/blob/13424cf2ecc1e5eadc85556cf1f4c65e915f702a/include/mp/proxy-types.h#L696) to catch and log uncaught exceptions and reject the request. I can follow up with a PR to address this and https://github.com/bitcoin-core/libmultiprocess/issues/206",
          "created_at": "2025-09-08T14:40:31Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 1
  }
}