{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:36:36.552052+00:00",
  "date": "2025-12-02",
  "pull_requests": [
    {
      "number": 33996,
      "title": "contrib: fix manpage generation",
      "body": "0972f5504021b482b27523fd3bcb8036cf6b439c from #33229 broke manpage generation, because the assumption that the last word in the line containing the version number, was the version number, no-longer holds for some binaries. i.e `bitcoind`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-02T15:55:43Z",
      "updated_at": "2025-12-03T11:34:36Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33996",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33996.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/33996#pullrequestreview-3534282452), [rkrux](https://github.com/bitcoin/bitcoin/pull/33996#pullrequestreview-3534323387) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-02T15:55:51Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19864860491/job/56924634590</sub>\n<sub>LLM reason (âœ¨ experimental): Lint check failed due to a Python type error in contrib/devtools/gen-manpages.py.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-02T16:05:09Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 30.x in #33997.",
          "created_at": "2025-12-03T11:34:12Z"
        }
      ]
    },
    {
      "number": 33995,
      "title": "depends: Propagate native C compiler to `sqlite` package",
      "body": "This PR:\r\n\r\n1. Ensures that autosetup can build the local bootstrap `jimsh0` when neither `jimsh` nor `tclsh` is available on the system.\r\n\r\n2. Removes the `tcl` package from the Guix manifest.\r\n\r\nThis is an alternative to https://github.com/bitcoin/bitcoin/pull/33975.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-02T14:50:16Z",
      "updated_at": "2025-12-05T17:28:59Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/33995",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33995.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/33995#pullrequestreview-3543468882), [fanquake](https://github.com/bitcoin/bitcoin/pull/33995#issuecomment-3617808101) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-02T14:50:22Z"
        },
        {
          "user": "fanquake",
          "body": "Concept ACK over #33975.",
          "created_at": "2025-12-03T13:40:35Z"
        },
        {
          "user": "hebasto",
          "body": "My Guix build:\r\n```\r\nx86_64\r\n5ea5588f1e2ee4e37f4b90313a8c32ec17474a39d1dff77d9d585ae9e106c761  guix-build-710031ebef83/output/aarch64-linux-gnu/SHA256SUMS.part\r\n8d7b95ecb5950220f6d70c069d7fdf5add92f8135daee0d0acb9af753c9bab0c  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu-debug.tar.gz\r\ndd0f06c48c57e1243437298d02c219758ecd167c88d3a59be15a9051434a99cb  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu.tar.gz\r\nfe143b6bed2a029d43c5686a01514415e8d99c186196ea3d3bb59b0fc3e9e120  guix-build-710031ebef83/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nbb0c914f3842870aade36bee557d9c745a166b070bb016de2a19025b9e1a22e9  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf-debug.tar.gz\r\n31b6bcee823ecf850598c9ec95bc3abe86a620ba51b165ba0f461130ec47c263  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf.tar.gz\r\nfd086f4ea2acbe9a004ef6c6d0416628ef6c87d1eb3a1d80f83d03f267a14f27  guix-build-710031ebef83/output/arm64-apple-darwin/SHA256SUMS.part\r\ne666e0eac53d8d5db07abc3c275be685b4b8495e87a42befd968aad39caff1df  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-codesigning.tar.gz\r\nf14ae0a38acaea61a34b22aba9dce83e955cbb2718ea6fef1cdff7787932cc02  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.tar.gz\r\n51d7fe6088aeb95d17c7b083dd0f093eb5d01e1f584eb2d2f80ac19cbb7b6665  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.zip\r\n8102417e6e869e1fa868a312af7f8bcfa2533987b9fb109ed13178f1c0db68bf  guix-build-710031ebef83/output/dist-archive/bitcoin-710031ebef83.tar.gz\r\n82122bedefa5fa97ec7cacff21e70ed985243bf4d846b8d854cc9cd881779c5b  guix-build-710031ebef83/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n55e90be8005b59c97ccdf97b12dc64ed5708070d59d4e6d9a4338a28bf0a7c65  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu-debug.tar.gz\r\nefa4d82b2c8aa1dc9498617b977925d383ab8e4269b35303df531f41edde3c3e  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu.tar.gz\r\n2a07e47fc55ced022c3d89a7a8e959832cd0e03b3205463a1869dc168aacfc20  guix-build-710031ebef83/output/riscv64-linux-gnu/SHA256SUMS.part\r\nb0e8a2e7b732d18204e85ff26c66c8e8427a68db19109512d5ac99028d47703f  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu-debug.tar.gz\r\n9a1852829fe2e7a530c8e5311ee64cb185a15cc0b18291c68ce97931c86422fc  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu.tar.gz\r\nc686e8c5583ba098f035c0dfba8604a0fd0609b03c3263b0b62a91a2178b4dc7  guix-build-710031ebef83/output/x86_64-apple-darwin/SHA256SUMS.part\r\n8974a2f30b8fab97f5fe81f35b3dec9a66151facd763edb5504619a39b3d0db0  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-codesigning.tar.gz\r\nf8083c815fdb9081e3562e609cd170fefc5b4e5d7f60f1c14ef151ea418f64cc  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.tar.gz\r\nfca38c1efd399794df72df1ec5e221768776de5f876d21ec19b866370392b005  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.zip\r\n38d7ff6d77a4714cd7f27797665623532398381c813aac814991081c07df4cc7  guix-build-710031ebef83/output/x86_64-linux-gnu/SHA256SUMS.part\r\ne4faebbf1e9f330fc1b831fb76f61fcd39d7168485c8f736ae6b2625ca5585d3  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu-debug.tar.gz\r\nb260a4650cae9247c0e1235aa3d149fe8e262b15a5ad786aaa359978f50b43e0  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu.tar.gz\r\ned656af0f6c204d2df345153ce9bf2c8325fa7928ccb9cbc3acf8c1dde5db266  guix-build-710031ebef83/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n36c5f91a682ec5dcb319f9b97b6d08bee678244e969eec61f384b787e1fd9463  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-codesigning.tar.gz\r\ne5516d4b368f21a1249e77db75208183929e54edbb2d26a772c1c08e5391c4a7  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-debug.zip\r\n2697e888a3fcd68902bb4df88aa3a5aaa5fc38bf3a56be3190829c45e315ef91  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-setup-unsigned.exe\r\n4178f1b371db669e011d39362a14810f620065fea8948f7c8718815605d60f34  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-unsigned.zip\r\n```",
          "created_at": "2025-12-03T15:24:29Z"
        },
        {
          "user": "janb84",
          "body": "My Guix Build Output (matching) \r\n\r\n**Host architecture:** `aarch64`\r\n**Commit:** `710031ebef83`\r\n\r\n```shell\r\n5ea5588f1e2ee4e37f4b90313a8c32ec17474a39d1dff77d9d585ae9e106c761  guix-build-710031ebef83/output/aarch64-linux-gnu/SHA256SUMS.part\r\n8d7b95ecb5950220f6d70c069d7fdf5add92f8135daee0d0acb9af753c9bab0c  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu-debug.tar.gz\r\ndd0f06c48c57e1243437298d02c219758ecd167c88d3a59be15a9051434a99cb  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu.tar.gz\r\nfe143b6bed2a029d43c5686a01514415e8d99c186196ea3d3bb59b0fc3e9e120  guix-build-710031ebef83/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nbb0c914f3842870aade36bee557d9c745a166b070bb016de2a19025b9e1a22e9  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf-debug.tar.gz\r\n31b6bcee823ecf850598c9ec95bc3abe86a620ba51b165ba0f461130ec47c263  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf.tar.gz\r\nfd086f4ea2acbe9a004ef6c6d0416628ef6c87d1eb3a1d80f83d03f267a14f27  guix-build-710031ebef83/output/arm64-apple-darwin/SHA256SUMS.part\r\ne666e0eac53d8d5db07abc3c275be685b4b8495e87a42befd968aad39caff1df  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-codesigning.tar.gz\r\nf14ae0a38acaea61a34b22aba9dce83e955cbb2718ea6fef1cdff7787932cc02  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.tar.gz\r\n51d7fe6088aeb95d17c7b083dd0f093eb5d01e1f584eb2d2f80ac19cbb7b6665  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.zip\r\n8102417e6e869e1fa868a312af7f8bcfa2533987b9fb109ed13178f1c0db68bf  guix-build-710031ebef83/output/dist-archive/bitcoin-710031ebef83.tar.gz\r\n82122bedefa5fa97ec7cacff21e70ed985243bf4d846b8d854cc9cd881779c5b  guix-build-710031ebef83/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n55e90be8005b59c97ccdf97b12dc64ed5708070d59d4e6d9a4338a28bf0a7c65  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu-debug.tar.gz\r\nefa4d82b2c8aa1dc9498617b977925d383ab8e4269b35303df531f41edde3c3e  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu.tar.gz\r\n2a07e47fc55ced022c3d89a7a8e959832cd0e03b3205463a1869dc168aacfc20  guix-build-710031ebef83/output/riscv64-linux-gnu/SHA256SUMS.part\r\nb0e8a2e7b732d18204e85ff26c66c8e8427a68db19109512d5ac99028d47703f  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu-debug.tar.gz\r\n9a1852829fe2e7a530c8e5311ee64cb185a15cc0b18291c68ce97931c86422fc  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu.tar.gz\r\nc686e8c5583ba098f035c0dfba8604a0fd0609b03c3263b0b62a91a2178b4dc7  guix-build-710031ebef83/output/x86_64-apple-darwin/SHA256SUMS.part\r\n8974a2f30b8fab97f5fe81f35b3dec9a66151facd763edb5504619a39b3d0db0  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-codesigning.tar.gz\r\nf8083c815fdb9081e3562e609cd170fefc5b4e5d7f60f1c14ef151ea418f64cc  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.tar.gz\r\nfca38c1efd399794df72df1ec5e221768776de5f876d21ec19b866370392b005  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.zip\r\n38d7ff6d77a4714cd7f27797665623532398381c813aac814991081c07df4cc7  guix-build-710031ebef83/output/x86_64-linux-gnu/SHA256SUMS.part\r\ne4faebbf1e9f330fc1b831fb76f61fcd39d7168485c8f736ae6b2625ca5585d3  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu-debug.tar.gz\r\nb260a4650cae9247c0e1235aa3d149fe8e262b15a5ad786aaa359978f50b43e0  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu.tar.gz\r\ned656af0f6c204d2df345153ce9bf2c8325fa7928ccb9cbc3acf8c1dde5db266  guix-build-710031ebef83/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n36c5f91a682ec5dcb319f9b97b6d08bee678244e969eec61f384b787e1fd9463  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-codesigning.tar.gz\r\ne5516d4b368f21a1249e77db75208183929e54edbb2d26a772c1c08e5391c4a7  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-debug.zip\r\n2697e888a3fcd68902bb4df88aa3a5aaa5fc38bf3a56be3190829c45e315ef91  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-setup-unsigned.exe\r\n4178f1b371db669e011d39362a14810f620065fea8948f7c8718815605d60f34  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-unsigned.zip\r\n```",
          "created_at": "2025-12-04T16:47:16Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build (x86_64):\r\n```bash\r\n5ea5588f1e2ee4e37f4b90313a8c32ec17474a39d1dff77d9d585ae9e106c761  guix-build-710031ebef83/output/aarch64-linux-gnu/SHA256SUMS.part\r\n8d7b95ecb5950220f6d70c069d7fdf5add92f8135daee0d0acb9af753c9bab0c  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu-debug.tar.gz\r\ndd0f06c48c57e1243437298d02c219758ecd167c88d3a59be15a9051434a99cb  guix-build-710031ebef83/output/aarch64-linux-gnu/bitcoin-710031ebef83-aarch64-linux-gnu.tar.gz\r\nfe143b6bed2a029d43c5686a01514415e8d99c186196ea3d3bb59b0fc3e9e120  guix-build-710031ebef83/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nbb0c914f3842870aade36bee557d9c745a166b070bb016de2a19025b9e1a22e9  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf-debug.tar.gz\r\n31b6bcee823ecf850598c9ec95bc3abe86a620ba51b165ba0f461130ec47c263  guix-build-710031ebef83/output/arm-linux-gnueabihf/bitcoin-710031ebef83-arm-linux-gnueabihf.tar.gz\r\nfd086f4ea2acbe9a004ef6c6d0416628ef6c87d1eb3a1d80f83d03f267a14f27  guix-build-710031ebef83/output/arm64-apple-darwin/SHA256SUMS.part\r\ne666e0eac53d8d5db07abc3c275be685b4b8495e87a42befd968aad39caff1df  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-codesigning.tar.gz\r\nf14ae0a38acaea61a34b22aba9dce83e955cbb2718ea6fef1cdff7787932cc02  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.tar.gz\r\n51d7fe6088aeb95d17c7b083dd0f093eb5d01e1f584eb2d2f80ac19cbb7b6665  guix-build-710031ebef83/output/arm64-apple-darwin/bitcoin-710031ebef83-arm64-apple-darwin-unsigned.zip\r\n8102417e6e869e1fa868a312af7f8bcfa2533987b9fb109ed13178f1c0db68bf  guix-build-710031ebef83/output/dist-archive/bitcoin-710031ebef83.tar.gz\r\n82122bedefa5fa97ec7cacff21e70ed985243bf4d846b8d854cc9cd881779c5b  guix-build-710031ebef83/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n55e90be8005b59c97ccdf97b12dc64ed5708070d59d4e6d9a4338a28bf0a7c65  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu-debug.tar.gz\r\nefa4d82b2c8aa1dc9498617b977925d383ab8e4269b35303df531f41edde3c3e  guix-build-710031ebef83/output/powerpc64-linux-gnu/bitcoin-710031ebef83-powerpc64-linux-gnu.tar.gz\r\n2a07e47fc55ced022c3d89a7a8e959832cd0e03b3205463a1869dc168aacfc20  guix-build-710031ebef83/output/riscv64-linux-gnu/SHA256SUMS.part\r\nb0e8a2e7b732d18204e85ff26c66c8e8427a68db19109512d5ac99028d47703f  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu-debug.tar.gz\r\n9a1852829fe2e7a530c8e5311ee64cb185a15cc0b18291c68ce97931c86422fc  guix-build-710031ebef83/output/riscv64-linux-gnu/bitcoin-710031ebef83-riscv64-linux-gnu.tar.gz\r\nc686e8c5583ba098f035c0dfba8604a0fd0609b03c3263b0b62a91a2178b4dc7  guix-build-710031ebef83/output/x86_64-apple-darwin/SHA256SUMS.part\r\n8974a2f30b8fab97f5fe81f35b3dec9a66151facd763edb5504619a39b3d0db0  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-codesigning.tar.gz\r\nf8083c815fdb9081e3562e609cd170fefc5b4e5d7f60f1c14ef151ea418f64cc  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.tar.gz\r\nfca38c1efd399794df72df1ec5e221768776de5f876d21ec19b866370392b005  guix-build-710031ebef83/output/x86_64-apple-darwin/bitcoin-710031ebef83-x86_64-apple-darwin-unsigned.zip\r\n38d7ff6d77a4714cd7f27797665623532398381c813aac814991081c07df4cc7  guix-build-710031ebef83/output/x86_64-linux-gnu/SHA256SUMS.part\r\ne4faebbf1e9f330fc1b831fb76f61fcd39d7168485c8f736ae6b2625ca5585d3  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu-debug.tar.gz\r\nb260a4650cae9247c0e1235aa3d149fe8e262b15a5ad786aaa359978f50b43e0  guix-build-710031ebef83/output/x86_64-linux-gnu/bitcoin-710031ebef83-x86_64-linux-gnu.tar.gz\r\ned656af0f6c204d2df345153ce9bf2c8325fa7928ccb9cbc3acf8c1dde5db266  guix-build-710031ebef83/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n36c5f91a682ec5dcb319f9b97b6d08bee678244e969eec61f384b787e1fd9463  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-codesigning.tar.gz\r\ne5516d4b368f21a1249e77db75208183929e54edbb2d26a772c1c08e5391c4a7  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-debug.zip\r\n2697e888a3fcd68902bb4df88aa3a5aaa5fc38bf3a56be3190829c45e315ef91  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-setup-unsigned.exe\r\n4178f1b371db669e011d39362a14810f620065fea8948f7c8718815605d60f34  guix-build-710031ebef83/output/x86_64-w64-mingw32/bitcoin-710031ebef83-win64-unsigned.zip\r\n```",
          "created_at": "2025-12-05T17:23:55Z"
        },
        {
          "user": "fanquake",
          "body": "ACK 710031ebef838d2f0a1effa19170bef7b130bbeb",
          "created_at": "2025-12-05T17:24:14Z"
        }
      ]
    },
    {
      "number": 33993,
      "title": "init: point out -stopatheight may be imprecise",
      "body": "`-stopatheight` is used to stop running bitcoind after reaching a given height. However, this feature is imprecise since some blocks can still be processed during the shutdown.\r\n\r\nThere are some previous discussions around it in https://github.com/bitcoin/bitcoin/pull/13713, https://github.com/bitcoin/bitcoin/pull/13490 and https://github.com/bitcoin/bitcoin/issues/13477. However, I'm not sure if it will get fixed since it's undesirable to burden the validation code further with this and we can bypass this behavior by using `invalidateblock` to wind back. Anyway, since at this moment its behavior is imprecise I think worth mentioning it in documentation.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-12-02T06:27:29Z",
      "updated_at": "2025-12-09T15:40:03Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33993",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33993.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/33993#pullrequestreview-3538723098), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33993#pullrequestreview-3539444459), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/33993#pullrequestreview-3539838956), [jaonoctus](https://github.com/bitcoin/bitcoin/pull/33993#pullrequestreview-3541279438) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-02T06:27:35Z"
        },
        {
          "user": "brunoerg",
          "body": "Rebased",
          "created_at": "2025-12-02T11:48:28Z"
        },
        {
          "user": "jaonoctus",
          "body": "tACK e4703863655135856d0d6ad54a7021d3326bf071\r\n\r\nI would love to fix the issue #13477 mentioned tho. It got closed but the issue still exists\r\n \r\n Updating the description is a good start tho",
          "created_at": "2025-12-03T21:18:24Z"
        },
        {
          "user": "brunoerg",
          "body": "I just addressed @stickies-v's suggestion: https://github.com/bitcoin/bitcoin/pull/33993#discussion_r2580857428. ",
          "created_at": "2025-12-04T05:53:08Z"
        }
      ]
    },
    {
      "number": 33991,
      "title": "test: Add comprehensive txindex reorg test coverage",
      "body": "# Add comprehensive txindex reorg test coverage\r\n\r\n## Motivation\r\n\r\nThis PR adds a new functional test `feature_txindex_reorg.py` to improve test coverage for the transaction index (`-txindex`) behavior during chain reorganizations. Currently, while txindex functionality is tested in various scenarios, there is limited coverage specifically focused on its behavior during deep reorgs, concurrent access patterns, and edge cases that could affect reliability.\r\n\r\nThe transaction index is a critical component for applications that need to look up historical transactions without knowing their block location. Ensuring its consistency and reliability during chain reorganizations is essential for:\r\n\r\n- Block explorers and indexing services\r\n- Applications using `getrawtransaction` without blockhash\r\n- Historical transaction analysis tools\r\n- Services relying on transaction lookup performance\r\n\r\n## Changes\r\n\r\nThis PR introduces a single new test file and registers it in the test runner:\r\n\r\n- **`test/functional/feature_txindex_reorg.py`** (new): Comprehensive test suite for txindex reorg scenarios\r\n- **`test/functional/test_runner.py`** (modified): Registers the new test\r\n\r\n## Test Coverage\r\n\r\nThe new test covers five critical scenarios:\r\n\r\n### 1. Txindex Consistency After Deep Reorg\r\n- Creates transactions on the main chain\r\n- Triggers a deep reorganization (10+ blocks)\r\n- Verifies that txindex correctly updates to reflect the new chain state\r\n- Ensures reorged-out transactions are properly handled\r\n\r\n### 2. Transaction Lookups After Reorg\r\n- Tests `getrawtransaction` with and without blockhash parameter\r\n- Validates that transactions remain findable after reorg\r\n- Verifies correct behavior when transactions move to mempool\r\n- Tests node without txindex for comparison\r\n\r\n### 3. Txindex Rebuild After Corruption\r\n- Simulates txindex corruption scenario\r\n- Tests recovery using `-reindex` flag\r\n- Verifies all transactions are correctly re-indexed\r\n- Ensures no data loss during rebuild process\r\n\r\n### 4. Concurrent Txindex Queries During Reorg\r\n- Tests thread-safe concurrent access to txindex\r\n- Performs multiple simultaneous transaction lookups\r\n- Executes blockchain operations while queries are running\r\n- Validates that concurrent access doesn't cause crashes or inconsistencies\r\n\r\n### 5. Txindex with Assumeutxo Scenarios\r\n- Tests txindex behavior in assumeutxo-like scenarios\r\n- Validates transaction lookups across snapshot boundaries\r\n- Ensures txindex works correctly with invalidateblock/reconsiderblock\r\n- Verifies consistency when blocks are invalidated around snapshot points\r\n\r\n## Testing\r\n\r\nThe test has been successfully executed:\r\n\r\n```bash\r\n$ test/functional/test_runner.py feature_txindex_reorg\r\nâœ“ feature_txindex_reorg.py passed (Duration: 3s)\r\n```\r\n\r\nAll test scenarios pass without errors, and the test follows Bitcoin Core's functional test framework conventions.\r\n\r\n## Code Quality\r\n\r\nThe implementation follows all contributing guidelines:\r\n\r\n- âœ… Follows naming convention (`feature_*.py`)\r\n- âœ… Uses `BitcoinTestFramework` base class\r\n- âœ… Includes comprehensive docstring explaining test purpose\r\n- âœ… Uses proper logging with `self.log.info()`\r\n- âœ… Follows PEP-8 style guidelines\r\n- âœ… Uses f-strings for formatting\r\n- âœ… Includes MIT license header\r\n- âœ… Properly handles node connections and synchronization\r\n- âœ… Uses `sync_txindex()` utility for proper index synchronization\r\n\r\n## Benefits\r\n\r\nThis test provides several benefits:\r\n\r\n1. **Improved Coverage**: Fills gaps in txindex testing, particularly around reorg scenarios\r\n2. **Regression Prevention**: Catches potential bugs in txindex reorg handling\r\n3. **Documentation**: Serves as documentation for expected txindex behavior during reorgs\r\n4. **Confidence**: Increases confidence in txindex reliability for production use\r\n5. **Future-Proofing**: Ensures txindex works correctly with features like assumeutxo\r\n\r\n## Notes\r\n\r\n- The test is designed to be deterministic and should not be flaky\r\n- Runtime is approximately 3 seconds on standard hardware\r\n- No external dependencies required beyond standard test framework\r\n- Test can be run individually or as part of the full test suite\r\n\r\n## Checklist\r\n\r\n- [x] New test added with clear documentation\r\n- [x] Test passes locally\r\n- [x] Test registered in test_runner.py\r\n- [x] Follows code style guidelines\r\n- [x] Commit message follows conventions\r\n- [x] No breaking changes\r\n- [x] Test is deterministic and not flaky\r\n\r\nContribution by Gittensor, learn more at https://gittensor.io/",
      "state": "closed",
      "user": "codomposer",
      "created_at": "2025-12-02T01:04:30Z",
      "updated_at": "2025-12-02T02:25:24Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33991",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33991.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\n\n\nPossible places where named args may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- [assert_raises_rpc_error(-5, \"No such mempool transaction\", self.nodes[0].getrawtransaction, txid, True)] in test/functional/feature_txindex_reorg.py\n- [assert_raises_rpc_error(-5, \"No such mempool transaction\", self.nodes[2].getrawtransaction, txid1, True)] in test/functional/feature_txindex_reorg.py\n\n\n\n<sup>2025-12-02</sup>\n",
          "created_at": "2025-12-02T01:04:39Z"
        },
        {
          "user": "pinheadmz",
          "body": "Pretty sure this is just AI slop. \"Gittensor\" is kinda dead give away.",
          "created_at": "2025-12-02T02:25:24Z"
        }
      ]
    },
    {
      "number": 33990,
      "title": "test: p2p: check that peer's announced starting height is remembered",
      "body": "Note that the announced starting height of a peer is neither verified nor used in any other logic, so reporting a bogus value [1] as done in the test doesn't have any consequences on the connection -- it's only used for inspection via the `getpeerinfo` RPC and in some debug messages (see also e.g. https://github.com/bitcoin-dot-org/Bitcoin.org/issues/1387#issuecomment-252934859). Admittedly this is not terribly important, but I'd still think having test coverage for this simple reporting functionality is better than not having it.\r\n\r\n[1] any signed 32-bit integer is fine, i.e. in the range [-2^31,2^31-1]",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-12-02T00:25:02Z",
      "updated_at": "2026-01-03T18:35:35Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/33990",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33990.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-02T00:25:10Z"
        },
        {
          "user": "brunoerg",
          "body": "Can be tested with the following diff:\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 5dac413319..ec417b97ac 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -3535,7 +3535,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n             LOCK(pfrom.m_subver_mutex);\r\n             pfrom.cleanSubVer = cleanSubVer;\r\n         }\r\n-        peer->m_starting_height = starting_height;\r\n+        peer->m_starting_height = starting_height + 1;\r\n\r\n         // Only initialize the Peer::TxRelay m_relay_txs data structure if:\r\n         // - this isn't an outbound block-relay-only connection, and\r\n\r\n```",
          "created_at": "2025-12-02T11:20:27Z"
        },
        {
          "user": "fanquake",
          "body": "@ajtowns @mzumsande conceptual thoughts?",
          "created_at": "2025-12-06T13:56:56Z"
        },
        {
          "user": "ajtowns",
          "body": "Seems fine to test it if we have code to export it over RPC.\r\n\r\nI don't think I've ever seen it be useful for debugging anything, and just knowing the height without knowing if it's the same header you have for that height or what the chainwork is doesn't seem very useful. So dropping `peer->m_starting_height` entirely (and only reporting it in the `receive version message` debug log entry) might be better?",
          "created_at": "2025-12-06T23:30:46Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, I also wonder what the use-case  here is or was.\r\n\r\nIf it is an estimate of how long the connection is established, there is the more accurate `conntime` field. If it exists to show which peer is ahead of whom, then  the existing headers-sync and block-sync p2p flow seems a better way to figure it out, which is reported via the `synced_headers`, `presynced_headers`, or `synced_blocks` fields. If it exists just for debugging the sync logic, it seems best to just log it in the debug log.\r\n\r\nIn any case, if it is kept, the rpc docs should be updated to say it is the height reported by the peer, not a confirmed or calculated value.",
          "created_at": "2025-12-07T11:41:16Z"
        },
        {
          "user": "ajtowns",
          "body": "> Yeah, I also wonder what the use-case here is or was.\r\n\r\nLooks like it was introduced in v0.2.9 where it was used as a heuristic for determining if we're in IBD (due to being more than 2k blocks behind where our peers were), The check was removed in #20624, which also has some more context.",
          "created_at": "2025-12-07T21:18:17Z"
        },
        {
          "user": "theStack",
          "body": "Seems reasonable to deprecate the field if there is really no use-case, opened #34197 for that. Closing this one, it can always be re-opened if there is (for any reason) a preference to keep the field.",
          "created_at": "2026-01-03T18:35:35Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33994,
      "title": "Mining IPC `createNewBlock` should not return before IBD is over",
      "body": "### Please describe the feature you'd like to see added.\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Is your feature related to a problem, if so please describe it.\n\non SRI [`bitcoin_core_sv2`](https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2) crate, we want to wait for IBD is over as part of the bootstrapping processes\n\ndiscussing with @ismaelsadeeq and @Shourya742 during BTrust dev day, we came to the conclusion that `createNewBlock` shouldn't even return before IBD is over\n\n### Describe the solution you'd like\n\nMining IPC `createNewBlock` should not return before IBD is over\n\n### Describe any alternatives you've considered\n\n`isInitialBlockDownload` is already available, but it would require us to poll it, which feels a bit backwards with capnproto\n\n### Please leave any additional context\n\nwe're getting reports of crashes when [`sv2-tp`](https://github.com/stratum-mining/sv2-tp) is connected to v30 during IBD\n\nhttps://discord.com/channels/950687892169195530/1179824984592490496/1445351230258937867",
      "state": "open",
      "user": "plebhash",
      "created_at": "2025-12-02T12:10:24Z",
      "updated_at": "2026-01-06T03:05:00Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/33994",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "ismaelsadeeq",
          "body": "@plebhash  It will be nice to get to the root of the issue and see whether it's bitcoin core or from the template provider.\n Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\ncc @Sjors I attempt to reproduce the failure but was not successful yet.\nblocking `createnewblock` from creating template  during ibd is potential solution and would also delegate the responsibility of polling isinitialblockdownload to the node, which is more ideal IMO.\nWe can just make the thread sleeps and wakes up when we are done with ibd and return an empty block.\ncurious to hear what others think.",
          "created_at": "2025-12-02T13:47:19Z"
        },
        {
          "user": "Sjors",
          "body": "The problem is that `ChainstateManager::IsInitialBlockDownload()` uses a fairly relaxed heuristic:\n\nhttps://github.com/bitcoin/bitcoin/blob/d0f6d9953a15d7c7111d46dcb76ab2bb18e5dee3/src/validation.cpp#L1998-L2023\n\nSo it latches to `true` when there's still a day worth of blocks left to process.\n\nWe could make this function much more precise by having it consider the most proof-of-work (not invalid) header chain. It would then insist that we have all blocks fully downloaded and verified.\n\nBut that might have impacts in other places in the codebase, potentially causing things to get stuck longer than needed just because we're missing a few recent blocks. So it's probably better to have a new function like `ReallyAtTheTipNow()`.\n\nBoth the `isInitialBlockDownload()` and `createNewBlock()` interface methods could switch to that. It's better for those methods to wait until we're really at the tip, because otherwise we start emitting templates for blocks that are guaranteed to be stale. ",
          "created_at": "2025-12-02T14:37:09Z"
        },
        {
          "user": "sipa",
          "body": "You can't use \"active_tip == best_known_block_header\" as condition for mining, because an attacker could mine a block, relay the header, and never relay the block. Sure, very expensive, but if the outcome is shutting down other miners, some joker might try it.\n\nBitcoin nodes are *always* synchronizing, and unless you have very strong evidence to the contrary, you should act as if your active tip is the best block on the chain. If we had evidence of a better block, it would be our best tip instead.\n\n`IsInitialBlockDownload()` is essentially this very conservative check. Only if you're *really* behind it'll say `true`.",
          "created_at": "2025-12-02T14:42:38Z"
        },
        {
          "user": "Sjors",
          "body": "Makes sense. We'll have to find another method of preventing a burst of new templates while the node churns through the last day worth of blocks.\n\nThe Template Provider client could simply wait 1 minute at startup if IBD was initially true and changed to false. In practice that only happens after the _node_ restarts (we wouldn't want to waste one minute each time the TP restarts).",
          "created_at": "2025-12-02T15:11:38Z"
        },
        {
          "user": "plebhash",
          "body": "> Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\n\nyeah sorry I was in a hurry for the workshop, indeed pasting Discord links is not ideal\n\nthis is what @jbesraa said:\n> I think handling IBD and other initialization aspects is critical when working in production env. \n> As these two services need to set on the same machine you usually deploy them through the same \"task\" and I think they should wait for each other to come fully available until they connect. I did observe issues with core30/tp when it is restarted alongside sv2-tp(this is actually very consistent error that iam still investigating):\n> ```\n> ./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n> ```\n> \n> also sv2-tp seem to be handling initial IBD fine for some period but then something happen:\n> ```\n> 2025-12-02T09:12:18Z [sv2:trace] Waiting to come out of IBD\n> ``` \n> I can see this is printed while core is downloading\n> but then core reach 100%\n> ```\n>    \n> 2025-12-02T09:34:17Z UpdateTip: new best=000000000000000000010925227dbff92c7e5d41d120cec541487f4fcde6d71c height=926118 version=0x2e9ea000 log2_work=95.967332 tx=1278190156 date='2025-12-02T09:33:49Z' progress=1.000000 cache=587.5MiB(4072609txo)\n> ```\n> but I dont see logs from `sv2-tp`\n>\n> ---\n>\n> i think (2) is really just logging and sv2-tp is just working after that but (1) is kinda a problem(might actually be more core problem than sv2-tp)\n\nI think @jbesraa knows how to reproduce it deterministically?",
          "created_at": "2025-12-02T15:14:53Z"
        },
        {
          "user": "plebhash",
          "body": "> `IsInitialBlockDownload()` is essentially this very conservative check. Only if you're really behind it'll say true.\n\nhow far behind? are we talking ~2, ~20 or ~200 blocks behind?",
          "created_at": "2025-12-02T15:35:58Z"
        },
        {
          "user": "sipa",
          "body": "> how far behind? are we talking ~2, ~20 or ~200 blocks behind?\n\nA day.",
          "created_at": "2025-12-02T15:37:46Z"
        },
        {
          "user": "jbesraa",
          "body": "> > Can you please provide the logs and setups accessible in a text file and not a discord link I think some people might not have discord.\n> \n> yeah sorry I was in a hurry for the workshop, indeed pasting Discord links is not ideal\n> \n> this is what [@jbesraa](https://github.com/jbesraa) said:\n> \n> > I think handling IBD and other initialization aspects is critical when working in production env.\n> > As these two services need to set on the same machine you usually deploy them through the same \"task\" and I think they should wait for each other to come fully available until they connect. I did observe issues with core30/tp when it is restarted alongside sv2-tp(this is actually very consistent error that iam still investigating):\n> > ```\n> > ./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > also sv2-tp seem to be handling initial IBD fine for some period but then something happen:\n> > ```\n> > 2025-12-02T09:12:18Z [sv2:trace] Waiting to come out of IBD\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > I can see this is printed while core is downloading\n> > but then core reach 100%\n> > ```\n> >    \n> > 2025-12-02T09:34:17Z UpdateTip: new best=000000000000000000010925227dbff92c7e5d41d120cec541487f4fcde6d71c height=926118 version=0x2e9ea000 log2_work=95.967332 tx=1278190156 date='2025-12-02T09:33:49Z' progress=1.000000 cache=587.5MiB(4072609txo)\n> > ```\n> > \n> > \n> >     \n> >       \n> >     \n> > \n> >       \n> >     \n> > \n> >     \n> >   \n> > but I dont see logs from `sv2-tp`\n> > \n> > i think (2) is really just logging and sv2-tp is just working after that but (1) is kinda a problem(might actually be more core problem than sv2-tp)\n> \n> I think [@jbesraa](https://github.com/jbesraa) knows how to reproduce it deterministically?\n\nOh hey.\n\nAs mentioned in the original comment, I think there is mainly a problem with (1). \nA bit of info about our setup:\n\nWe run both sv2-tp(by sjors, version 1.0.4) and core 30 via docker on the same (aws)linux EC2 machine. When starting fresh setup, its usually smooth but whenever we need to update a config or something similar and restart the setup, we encounter the following:\n\n`sv2-tp` logs (some data is redacted due to security reasons)\n```\n2025-11-28T13:40:39Z Default data directory\n2025-11-28T13:40:39Z Using data directory \n2025-11-28T13:40:39Z Config file: \n2025-11-28T13:40:39Z Command-line arg: datadir=\n2025-11-28T13:40:39Z Command-line arg: debug=sv2\n2025-11-28T13:40:39Z Command-line arg: ipcconnect=unix:/run/bitcoin/node.sock\n2025-11-28T13:40:39Z Command-line arg: loglevel=\n2025-11-28T13:40:39Z Command-line arg: sv2bind=\n2025-11-28T13:40:39Z Command-line arg: sv2port=\n2025-11-28T13:40:39Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\n2025-11-28T13:40:39Z Using RdSeed as an additional entropy source\n2025-11-28T13:40:39Z Using RdRand as an additional entropy source\n2025-11-28T13:40:39Z [ipc:info] {sv2-tp-1/sv2-tp-1} IPC client first request from current thread, constructing waiter\nConnected to bitcoin-node\n2025-11-28T13:40:39Z [sv2] Reading cached static key from\n2025-11-28T13:40:39Z [sv2:info] Static key: \n2025-11-28T13:40:39Z [sv2:info] Template Provider authority key: \n2025-11-28T13:40:39Z [sv2:trace] Authority key: \n2025-11-28T13:40:39Z [sv2:trace] Certificate hashed data: \n2025-11-28T13:40:39Z [sv2:info] Template Provider listening on \n2025-11-28T13:40:39Z  thread start\n2025-11-28T13:40:39Z sv2 thread start\n2025-11-28T13:40:39Z [ipc:info] {sv2-tp-1/b-sv2-9} IPC client first request from current thread, constructing waiter\n2025-11-28T13:40:39Z [ipc:warning] {sv2-tp-1/b-capnp-loop-7} IPC client: unexpected network disconnect.\n2025-11-28T13:40:39Z [ipc:error] IPC client method call interrupted by disconnect.\n2025-11-28T13:40:39Z \n************************\n************************\nEXCEPTION: N3ipc9ExceptionE       \nEXCEPTION: N3ipc9ExceptionE       \nIPC client method call interrupted by disconnect.       \nIPC client method call interrupted by disconnect.       \nbitcoin in sv2       \nbitcoin in sv2       \nterminate called after throwing an instance of 'ipc::Exception'\n  what():  IPC client method call interrupted by disconnect.\n```\n\n`core-v30` logs (some data is redacted due to security reasons)\n\n```\n2025-11-28T13:40:38Z Bitcoin Core version v30.0 (release build)\n2025-11-28T13:40:38Z parameter interaction: -bind set -> setting -listen=1\n2025-11-28T13:40:38Z Using the 'sse4(1way);sse41(4way);avx2(8way)' SHA256 implementation\n2025-11-28T13:40:39Z Using RdSeed as an additional entropy source\n2025-11-28T13:40:39Z Using RdRand as an additional entropy source\n2025-11-28T13:40:39Z Default data directory\n2025-11-28T13:40:39Z Using data directory \n2025-11-28T13:40:39Z Config file: \n2025-11-28T13:40:39Z Command-line arg: bind=\"0.0.0.0\"\n2025-11-28T13:40:39Z Command-line arg: chain=\"main\"\n2025-11-28T13:40:39Z Command-line arg: datadir=\n2025-11-28T13:40:39Z Command-line arg: ipcbind=\n2025-11-28T13:40:39Z Command-line arg: port=\n2025-11-28T13:40:39Z Command-line arg: printtoconsole=\"\"\n2025-11-28T13:40:39Z Command-line arg: prune=\"1092\"\n2025-11-28T13:40:39Z Command-line arg: rpcbind=\n2025-11-28T13:40:39Z Command-line arg: rpcport=\n2025-11-28T13:40:39Z scheduler thread start\n2025-11-28T13:40:39Z Listening for IPC requests on address \n2025-11-28T13:40:39Z Using wallet directory \n2025-11-28T13:40:39Z init message: Verifying wallet(s)â€¦\n2025-11-28T13:40:39Z Using /16 prefix for IP bucketing\n2025-11-28T13:40:39Z init message: Loading P2P addressesâ€¦\n./node/interfaces.cpp:980 chainman: Assertion `m_node.chainman' failed.\n```\n\n",
          "created_at": "2025-12-02T17:14:54Z"
        },
        {
          "user": "ryanofsky",
          "body": "re: https://github.com/bitcoin/bitcoin/issues/33994#issuecomment-3602538081\n\n> Makes sense. We'll have to find another method of preventing a burst of new templates while the node churns through the last day worth of blocks.\n\nI think the fact that we have separate `createNewBlock` and `waitNext` to functions to fetch the initial block template and subsequent ones should make this easier to solve, because `createNewBlock` can be conservative and wait to return until after some cooldown period, and `waitNext` can be more responsive and always try to return as quickly as possible. So I think we could just add something like the following to `createNewBlock`\n\n```c++\nconstexpr auto COOLDOWN = 1s;\nwhile (!interrupted && (GetTime() - last_block_connected_time < COOLDOWN) && active_tip != best_known_block_header) {\n    cv.wait_for(lock, COOLDOWN);\n}\n```\n\nChecking `best_known_block_header` would just be an optimization. This wouldn't wait longer than the cooldown period to return after the last block was connected.",
          "created_at": "2025-12-02T18:25:30Z"
        },
        {
          "user": "Sjors",
          "body": "@ryanofsky wrote:\n\n> `GetTime() - last_block_connected_time < COOLDOWN`\n\n@jbesraa:\n\nThat looks nice, and would keep client code simple.\n\n> We run both sv2-tp(by sjors, version 1.0.4)\n\nYou should upgrade to [v1.0.5](https://github.com/stratum-mining/sv2-tp/releases/tag/v1.0.5) :-)\n\n> and core 30\n\nAt this point I think it's better to run the `30.x` branch built from source if you can. It has quite a few IPC related bug fixes. Otherwise you're going to hunt for bugs that have already been fixed. Once v30.1 is out it's fine to switch to a release again.",
          "created_at": "2025-12-02T18:56:40Z"
        },
        {
          "user": "Sjors",
          "body": "Implemented the cooldown functionality in #34184.",
          "created_at": "2025-12-31T05:17:53Z"
        },
        {
          "user": "plebhash",
          "body": "@Sjors do you think this would land on `v30.2` or `v31`?",
          "created_at": "2026-01-05T17:41:35Z"
        },
        {
          "user": "Sjors",
          "body": "@plebhash if enough people review it, v31 is still a few months away.",
          "created_at": "2026-01-06T03:04:59Z"
        }
      ]
    },
    {
      "number": 33992,
      "title": "tx not exist on the testnet4",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nnetwork: testnet4\n\nthis is my txinfo: https://mempool.space/zh/testnet4/tx/93cf45c0fb38f62dfde0619ae4abaadc6842a931b6946abd79012d2a963d19e5\ntip me confirms already, but i search it use rpc \n\n`curl --location 'http://47.236.168.32:18332' \\\n--header 'content-type: text/plain;' \\\n--header 'Authorization: Basic dGVzdDp0ZXN0' \\\n--data '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getrawtransaction\", \"params\": [\"93cf45c0fb38f62dfde0619ae4abaadc6842a931b6946abd79012d2a963d19e5\", true]}'`\n\nnot block info on this tx, what reason ?\n\n### Expected behaviour\n\nsearch this tx info contain block info\n\n### Steps to reproduce\n\nsearch it on the explorer\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nversion v30.0.0\n\n### Operating system and version\n\nUbuntu24\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "dachengcheng2022",
      "created_at": "2025-12-02T03:09:03Z",
      "updated_at": "2025-12-02T05:32:05Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33992",
      "labels": []
    }
  ],
  "summary": {
    "pull_requests": 5,
    "issues": 2
  }
}