{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:12:03.628151+00:00",
  "date": "2025-01-21",
  "pull_requests": [
    {
      "number": 31704,
      "title": "doc: add a section in the fuzzing documentation about using MSan",
      "body": "Just a couple lines in a subsection of the sanitizers section mentioning that using the memory sanitizer is a bit more involve than other sanitizers, describing the steps and pointing to an example.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2025-01-21T19:53:31Z",
      "updated_at": "2025-01-23T14:25:35Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/31704",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31704.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/31704#pullrequestreview-2569655377), [dergoegge](https://github.com/bitcoin/bitcoin/pull/31704#pullrequestreview-2569991337) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-01-21T19:53:34Z"
        },
        {
          "user": "maflcko",
          "body": "Could also add a note that in most cases valgrind is the easier option, as it doesn't require a full build with a different config?",
          "created_at": "2025-01-22T08:45:43Z"
        },
        {
          "user": "darosior",
          "body": "Ah right, forgot to add that.",
          "created_at": "2025-01-22T14:36:31Z"
        },
        {
          "user": "darosior",
          "body": "Done.",
          "created_at": "2025-01-22T14:48:39Z"
        }
      ]
    },
    {
      "number": 31703,
      "title": "Use number of dirty cache entries in flush warnings/logs",
      "body": "Since #28280 and #28233, the percentage of dirty entries in the cache when a flush happen may in practice be far from 100%. The log output, the decision to warn about a large flush (#31534), and the disk-full detection, however always use the entire size of the cache.\r\n\r\nFix this by keeping track of the number of dirty entries in `CCoinsViewCache`, and using that number. I've dropped the usage of `DynamicMemoryUsage` as it's the wrong metric, even before the non-wiping flushes were introduced (if everything is dirty, memory usage is correlated with, but not the same as, the amount of disk space written or used). They could be improved by keeping track of proper write size estimates in a follow-up, but here I'm just using a fixed 48 bytes per entry estimate.",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-01-21T19:27:26Z",
      "updated_at": "2025-10-01T20:08:24Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/31703",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31703.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31703#issuecomment-2605622412), [andrewtoth](https://github.com/bitcoin/bitcoin/pull/31703#pullrequestreview-2565615706), [l0rinc](https://github.com/bitcoin/bitcoin/pull/31703#pullrequestreview-2566967750), [tdb3](https://github.com/bitcoin/bitcoin/pull/31703#pullrequestreview-2568482558) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32313](https://github.com/bitcoin/bitcoin/pull/32313) (coins: fix `cachedCoinsUsage` accounting in `CCoinsViewCache` by l0rinc)\n* [#32128](https://github.com/bitcoin/bitcoin/pull/32128) (Draft: CCoinMap Experiments by martinus)\n* [#31132](https://github.com/bitcoin/bitcoin/pull/31132) (validation: fetch block inputs on parallel threads 10% faster IBD by andrewtoth)\n* [#30611](https://github.com/bitcoin/bitcoin/pull/30611) (validation: write chainstate to disk every hour by andrewtoth)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-01-21T19:27:29Z"
        },
        {
          "user": "sedited",
          "body": "Nice, Concept ACK",
          "created_at": "2025-01-21T19:59:36Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35957028069</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-01-21T22:37:37Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/36002777403</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-01-22T15:18:18Z"
        },
        {
          "user": "sipa",
          "body": "@l0rinc I've lost track a bit of your comments/suggestions. Is the PR as-is broken when interacting with assumeutxo?",
          "created_at": "2025-03-31T15:11:21Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-05-01T19:32:16Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--13523179cfe9479db18ec6c5d236f789-->\n‚åõ There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? ‚û°Ô∏è Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? ‚û°Ô∏è Please close.\n* Did the author lose interest or time to work on this? ‚û°Ô∏è Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
          "created_at": "2025-07-29T00:32:46Z"
        },
        {
          "user": "l0rinc",
          "body": "@sipa, my comments are still relevant as far as I can tell, I think it's a good change, how can I help to advance it?",
          "created_at": "2025-07-29T01:37:04Z"
        },
        {
          "user": "sipa",
          "body": "Closing, up for grabs.",
          "created_at": "2025-09-30T21:17:16Z"
        },
        {
          "user": "l0rinc",
          "body": "Addressed all outstanding feedback in https://github.com/bitcoin/bitcoin/pull/33512",
          "created_at": "2025-10-01T02:25:36Z"
        }
      ]
    },
    {
      "number": 31701,
      "title": "test: Bump sync_mempools timeout in p2p_1p1c_network.py",
      "body": "This should address the two issues that happened in https://github.com/bitcoin/bitcoin/actions/runs/12885576442/job/35924329657?pr=25832#step:6:7601:\r\n\r\n* The combined log isn't printed on a test failure.\r\n* The timeout is too strict for the GHA virtual machines.\r\n\r\nFor reference, the output was:\r\n\r\n```\r\n...\r\n149/315 - rpc_blockchain.py --v2transport passed, Duration: 10 s\r\n150/315 - p2p_addrfetch.py passed, Duration: 1 s\r\n151/315 - p2p_1p1c_network.py failed, Duration: 31 s\r\n\r\nstdout:\r\n2025-01-21T12:05:49.465000Z TestFramework (INFO): PRNG seed is: 6581340712385622842\r\n2025-01-21T12:05:49.466000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250121_120233/p2p_1p1c_network_207\r\n2025-01-21T12:05:52.408000Z TestFramework (INFO): Fill mempools with large transactions to raise mempool minimum feerates\r\n2025-01-21T12:05:52.408000Z TestFramework (INFO): Fill the mempool until eviction is triggered and the mempoolminfee rises\r\n2025-01-21T12:05:59.692000Z TestFramework (INFO): Pre-send some transactions to nodes\r\n2025-01-21T12:06:00.203000Z TestFramework (INFO): Submit full packages to node0\r\n2025-01-21T12:06:00.220000Z TestFramework (INFO): Wait for mempools to sync\r\n2025-01-21T12:06:20.384000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\r\n    self.run_test()\r\n  File \"/home/runner/work/bitcoin/bitcoin/build/test/functional/p2p_1p1c_network.py\", line 153, in run_test\r\n    self.sync_mempools(timeout=20)\r\n  File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 803, in sync_mempools\r\n    raise AssertionError(\"Mempool sync timed out after {}s:{}\".format(\r\nAssertionError: Mempool sync timed out after 20s:\r\n...",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-21T14:38:49Z",
      "updated_at": "2025-01-23T09:05:44Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31701",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31701.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/31701#pullrequestreview-2564986589), [l0rinc](https://github.com/bitcoin/bitcoin/pull/31701#issuecomment-2605067663) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-01-21T14:38:52Z"
        },
        {
          "user": "l0rinc",
          "body": "utACK fa80a7dac4be8a1d8e32d88e46da23f14e06bade\r\n\r\nSame happened in https://github.com/bitcoin/bitcoin/actions/runs/12888898958/job/35934893317?pr=31699",
          "created_at": "2025-01-21T15:36:56Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like this still happens: https://github.com/bitcoin/bitcoin/pull/31713#issuecomment-2609212276\r\n\r\nSo this is likely a non-timeout issue. Note that the test has immediate tx-relay (`self.noban_tx_relay`) enabled, so trickle delay should not be an issue.",
          "created_at": "2025-01-23T09:05:43Z"
        }
      ]
    },
    {
      "number": 31699,
      "title": "test,bench: validate `CheckTransaction`'s duplicate input detection in broader context",
      "body": "This PR follows up on [#31682](https://github.com/bitcoin/bitcoin/pull/31682), isolating its testing and benchmarking improvements to focus on `CheckTransaction`'s duplicate input detection and performance in realistic contexts, avoiding the controversial consensus code change.\r\n\r\nFirst commit adds tests to validate `CheckTransaction`'s ordering-based duplicate detection against the hash-based methods used elsewhere in the codebase.\r\n\r\nSecond commit replaces overly-specific microbenchmarks with `ProcessTransactionBench`, which implicitly measures `CheckTransaction` as part of the full validation pipeline.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-01-21T14:03:36Z",
      "updated_at": "2025-01-23T17:07:56Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31699",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31699.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-01-21T14:03:39Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35933961993</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-01-21T14:10:45Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35939718499</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-01-21T15:35:49Z"
        }
      ]
    },
    {
      "number": 31696,
      "title": "test: Check that reindex with prune wipes blk files",
      "body": "This adds missing test coverage for `CleanupBlockRevFiles`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-21T10:58:33Z",
      "updated_at": "2025-01-23T13:53:12Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/31696",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31696.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31696#pullrequestreview-2569112538), [l0rinc](https://github.com/bitcoin/bitcoin/pull/31696#pullrequestreview-2569345797), [tdb3](https://github.com/bitcoin/bitcoin/pull/31696#pullrequestreview-2569717619) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-01-21T10:58:36Z"
        },
        {
          "user": "maflcko",
          "body": "> ACK [fa975d1](https://github.com/bitcoin/bitcoin/commit/fa975d1075668e3dc3366122463d6900e6d94d0c)\r\n\r\nLooks like this was a stale commit?",
          "created_at": "2025-01-21T13:22:28Z"
        },
        {
          "user": "sedited",
          "body": "> Looks like this was a stale commit?\r\n\r\nFixed.",
          "created_at": "2025-01-21T13:49:01Z"
        },
        {
          "user": "PRADACANDI18",
          "body": "fa9593efc2e19d9dfa9a62c8a3d796aad888baa0",
          "created_at": "2025-01-22T04:05:16Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 31705,
      "title": "-usehd=1 no longer works",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nHello! Tried to search through issues but I guess bitcoin uses a new kind of wallet I am not really familiar with. I am not sure how to generate the hd seed im used to, should I try an older version? Thanks for any help. I dont want to use the new kind of wallet. I want to use bitcoin to generate a seed phrase. \n\n### Expected behaviour\n\nim used to it working bitcoin forks\n\n### Steps to reproduce\n\nbitcoin/build/src/qt/bitcoin-qt --usehd=1\n\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n Bitcoin Core 28.1\n\n### Operating system and version\n\nubuntu 22\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "ghost",
      "created_at": "2025-01-21T20:15:03Z",
      "updated_at": "2025-01-22T07:57:21Z",
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/31705",
      "labels": [
        "Wallet",
        "Questions and Help"
      ],
      "comment_list": [
        {
          "user": "achow101",
          "body": "The startup option was superseded by the `sethdseed` command. Furthermore, both `-usehd` and `sethdseed` are also superseded by descriptor wallets.\n\nThere is no need to use that startup option - all wallets, including descriptor wallets, since the option was introduced default to HD anyways.",
          "created_at": "2025-01-21T20:23:50Z"
        },
        {
          "user": "ghost",
          "body": "> The startup option was superseded by the `sethdseed` command. Furthermore, both `-usehd` and `sethdseed` are also superseded by descriptor wallets.\n> \n> There is no need to use that startup option - all wallets, including descriptor wallets, since the option was introduced default to HD anyways.\n\nIm unfamilar with \"descriptor\" wallets and very familiar with HD seed functions, and find them more useful \n\nIs there any way to achieve this function which is on almost every other bitcoin altcoin?",
          "created_at": "2025-01-21T21:02:51Z"
        },
        {
          "user": "ghost",
          "body": "I do not see an option to dump the HD seed phrase, I prefer paper wallets versus a dat file which there are several known viruses which target dat files\n\nexample: https://y3ti.uk/audits/Fulminare",
          "created_at": "2025-01-21T21:03:55Z"
        },
        {
          "user": "sipa",
          "body": "@realsetvin Bitcoin Core does not, and has never, supported seed phrases. In descriptor wallets you can dump the private descriptors (see the `listdescriptors` RPC command), which can be written down in principle, and re-imported.\n\n`-usehd=1` is unrelated to seed phrases. It enabled HD wallets, which are now ubiquitous; you don't need to explicitly enable them.",
          "created_at": "2025-01-21T21:08:16Z"
        },
        {
          "user": "ghost",
          "body": "> [@realsetvin](https://github.com/realsetvin) Bitcoin Core does not, and has never, supported seed phrases. In descriptor wallets you can dump the private descriptors (see the `listdescriptors` RPC command), which can be written down in principle, and re-imported.\n> \n> `-usehd=1` is unrelated to seed phrases. It enabled HD wallets, which are now ubiquitous; you don't need to explicitly enable them.\n\nokay I may be mixing up hd phrases with seed phrases but realistically they are the same right?\n\nwhy do bitcoin copies have the function but bitcoin dosent?\n\nwhat can I do to write down my backup, im not comfortable using the new kind of wallet or a dat file. Thanks for helping",
          "created_at": "2025-01-21T21:15:47Z"
        },
        {
          "user": "sipa",
          "body": "> okay I may be mixing up hd phrases with seed phrases but realistically they are the same right?\n\nNo, HD key derivation is BIP32. Seed phrases can refer to a number of things, but most commonly the ones specified in BIP39. \n\n> why do bitcoin copies have the function but bitcoin dosent?\n\nThis is not a property of the currency, but of the software. There are lots of Bitcoin wallets that support seed phrases. Bitcoin Core just happens to not be one of them.\n\n> what can I do to write down my backup, im not comfortable using the new kind of wallet or a dat file. Thanks for helping\n\nYou can write down the output of `listdescriptors true`. But more realistically, if this is uncomfortable to you, I suggest using other wallet software.",
          "created_at": "2025-01-21T21:18:54Z"
        },
        {
          "user": "ghost",
          "body": "> > okay I may be mixing up hd phrases with seed phrases but realistically they are the same right?\n> \n> No, HD key derivation is BIP32. Seed phrases can refer to a number of things, but most commonly the ones specified in BIP39.\n> \n> > why do bitcoin copies have the function but bitcoin dosent?\n> \n> This is not a property of the currency, but of the software. There are lots of Bitcoin wallets that support seed phrases. Bitcoin Core just happens to not be one of them.\n> \n> > what can I do to write down my backup, im not comfortable using the new kind of wallet or a dat file. Thanks for helping\n> \n> You can write down the output of `listdescriptors true`. But more realistically, if this is uncomfortable to you, I suggest using other wallet software.\n\nim familiar with the function of bitcoin core, can I use an older version? ",
          "created_at": "2025-01-21T21:19:50Z"
        },
        {
          "user": "ghost",
          "body": "> > okay I may be mixing up hd phrases with seed phrases but realistically they are the same right?\n> \n> No, HD key derivation is BIP32. Seed phrases can refer to a number of things, but most commonly the ones specified in BIP39.\n> \n> > why do bitcoin copies have the function but bitcoin dosent?\n> \n> This is not a property of the currency, but of the software. There are lots of Bitcoin wallets that support seed phrases. Bitcoin Core just happens to not be one of them.\n> \n> > what can I do to write down my backup, im not comfortable using the new kind of wallet or a dat file. Thanks for helping\n> \n> You can write down the output of `listdescriptors true`. But more realistically, if this is uncomfortable to you, I suggest using other wallet software.\n\nin this case I want my HD phrase then, dumphdwallet thats the command I want. ",
          "created_at": "2025-01-21T21:20:17Z"
        },
        {
          "user": "sipa",
          "body": "Again, Bitcoin Core does not, and has never supported seed phrases.",
          "created_at": "2025-01-21T21:21:07Z"
        },
        {
          "user": "ghost",
          "body": "> Again, Bitcoin Core does not, and has never supported seed phrases.\n\nin that case, am I falsely attributing something on dash to bitcoin?\n\nwhat about hd phrases?",
          "created_at": "2025-01-21T21:21:52Z"
        },
        {
          "user": "ghost",
          "body": "I understand you're annoyed that I dont know everything you know, maybe you can see im trying to learn. Any attempt of explanation would help.",
          "created_at": "2025-01-21T21:23:36Z"
        },
        {
          "user": "maflcko",
          "body": "> im familiar with the function of bitcoin core, can I use an older version?\n\nSee https://bitcoincore.org/en/lifecycle/",
          "created_at": "2025-01-21T21:23:57Z"
        },
        {
          "user": "sipa",
          "body": "> in that case, am I falsely attributing something on dash to bitcoin?\n\nAgain, this has nothing to do with the currency, but with the wallet software. If you want seed phrases, feel free to use any of the dozens of other Bitcoin wallet software out there that supports it. Bitcoin Core does not.\n\n> what about hd phrases?\n\nHD phrases, or seed phrases, are the same thing. Bitcoin Core does not support any kind of phrases. It uses HD key derivation, however, but that has nothing to do with phrases.",
          "created_at": "2025-01-21T21:24:00Z"
        },
        {
          "user": "ghost",
          "body": "> > in that case, am I falsely attributing something on dash to bitcoin?\n> \n> Again, this has nothing to do with the currency, but with the wallet software. If you want seed phrases, feel free to use any of the dozens of other Bitcoin wallet software out there that supports it. Bitcoin Core does not.\n> \n> > what about hd phrases?\n> \n> HD phrases, or seed phrases, are the same thing. Bitcoin Core does not support any kind of phrases. It uses HD key derivation, however, but that has nothing to do with phrases.\n\nso that was a dash addition im falsely ascribing to bitcoin core? in that case why cant it be added to btc? Risk of being too convenient for end users?",
          "created_at": "2025-01-21T21:25:51Z"
        },
        {
          "user": "ghost",
          "body": "> > in that case, am I falsely attributing something on dash to bitcoin?\n> \n> Again, this has nothing to do with the currency, but with the wallet software. If you want seed phrases, feel free to use any of the dozens of other Bitcoin wallet software out there that supports it. Bitcoin Core does not.\n> \n> > what about hd phrases?\n> \n> HD phrases, or seed phrases, are the same thing. Bitcoin Core does not support any kind of phrases. It uses HD key derivation, however, but that has nothing to do with phrases.\n\nthe way you referenced two bips is as if they are two different things",
          "created_at": "2025-01-21T21:27:06Z"
        },
        {
          "user": "furszy",
          "body": "> so that was a dash addition im falsely ascribing to bitcoin core? in that case why cant it be added to btc? Risk of being too convenient for end users?\n\nThis was the reason for not adding support for it in the past: https://bitcoin.stackexchange.com/questions/88237/is-there-a-reason-to-why-bitcoin-core-does-not-implement-bip39. The topic could, of course, be revisited by experts in the field.",
          "created_at": "2025-01-21T22:01:30Z"
        },
        {
          "user": "ghost",
          "body": "> > so that was a dash addition im falsely ascribing to bitcoin core? in that case why cant it be added to btc? Risk of being too convenient for end users?\n> \n> This was the reason for not adding support for it in the past: https://bitcoin.stackexchange.com/questions/88237/is-there-a-reason-to-why-bitcoin-core-does-not-implement-bip39. The topic could, of course, be revisited by experts in the field.\n\nSince many altcoins are based on dash they boast about being built from bitcoin,\n\nit seems funny that bitcoin does not have some basic features that coins with $200 market cap have. ",
          "created_at": "2025-01-21T22:08:06Z"
        },
        {
          "user": "ghost",
          "body": "Wouldnt it be great if the bitcoin core wallet had all of the features that bitcoin developed? Make them optional. not non existent ",
          "created_at": "2025-01-21T22:10:33Z"
        },
        {
          "user": "pinheadmz",
          "body": "I think this issue should be closed. Questions are better asked on stack exchange and this thread is getting off topic with complaints. Seems to me the original issue has been addressed and follow up questions have been answered. ",
          "created_at": "2025-01-21T23:53:51Z"
        },
        {
          "user": "maflcko",
          "body": "Closing for now. Looks like there have been many questions, all of them answered.\n\nUsually the issue tracker is used to track technical issues related to the Bitcoin Core code base. So in the future, general bitcoin questions and/or support requests are best directed to the [Bitcoin StackExchange](https://bitcoin.stackexchange.com) or the `#bitcoin` IRC channel on Libera Chat, or one of the Bitcoin subreddits, or any other place that you feel is well suited.\n\nIf you want to file a feature request for something, please use the template and communicate clearly why the existing features can not support your use-case (and what your use-case is in the first place).",
          "created_at": "2025-01-22T07:57:20Z"
        }
      ]
    },
    {
      "number": 31702,
      "title": "Wrong/missing package content for macOS, ARM based packages (bitcoin-28.1...)",
      "body": "### Is there an existing issue for this?\n\n- [x] #31720\n\n### Current behaviour\n\nI believe the following two files have the same content (Bitcoin-Qt.app):\n- bitcoin-28.1-arm64-apple-darwin-unsigned.tar.gz\n- bitcoin-28.1-arm64-apple-darwin-unsigned.zip\n\nI think they ought to contain:\n- Bitcoin-Qt.app (bitcoin-28.1-arm64-apple-darwin-unsigned.zip)\n- bitcoind, bitcoin-cli, etc. (bitcoin-28.1-arm64-apple-darwin-unsigned.tar.gz)\n\n... but they both do not contain the bitcoind, bitcoin-cli, etc. (only the \"Bitcoin Core\" package)\n\nAlso the content for the signed versions is correct, and differs in package size.\n\n### Expected behaviour\n\nContent should be similar to the signed versions.\n\n### Steps to reproduce\n\nDownload the packages and look for the (missing) bitcoind, bitcoin-cli files in the unsigned .tar.gz version.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n28.1\n\n### Operating system and version\n\nmacOS Sequoia\n\n### Machine specifications\n\nApple Mac",
      "state": "closed",
      "user": "PaddyFlueckiger",
      "created_at": "2025-01-21T16:52:40Z",
      "updated_at": "2025-01-24T20:31:40Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31702",
      "labels": [
        "macOS"
      ],
      "comment_list": [
        {
          "user": "PaddyFlueckiger",
          "body": "In summary:\n\n- If \"unsigned\" refers to a non code-signed version, a code-signed version should be named \"signed\" to make it clearer\n\nbitcoin-28.1-arm64-apple-darwin-unsigned.tar.gz / 09-Jan-2025 18:54 / 16267360\n- wrong package content, does NOT contain expected version (bitcoind, bitcoin-cli, etc.), contains Bitcoin-Qt.app instead\n- Bitcoin-Qt: code object is not signed at all (codesign -d Bitcoin-Qt)\n\nbitcoin-28.1-arm64-apple-darwin-unsigned.zip / 09-Jan-2025 18:54 / 16299511\n- does contain expected version (Bitcoin-Qt.app)\n- Bitcoin-Qt: code object is not signed at all (codesign -d Bitcoin-Qt)\n\nbitcoin-28.1-arm64-apple-darwin.tar.gz / 09-Jan-2025 18:54 / 34895713\n- does contain expected version (bitcoind, bitcoin-cli, etc.)\n- bitcoind: code object is not signed at all (codesign -d bitcoind)\n- should be signed, since there is no \"unsigned\" in the filename\n\nbitcoin-28.1-arm64-apple-darwin.zip / 09-Jan-2025 18:54 / 16368128\n- does contain expected version (Bitcoin-Qt.app)\n- Bitcoin-Qt: is signed (codesign -v -d Bitcoin-Qt)",
          "created_at": "2025-01-23T06:39:11Z"
        },
        {
          "user": "achow101",
          "body": "see #31407",
          "created_at": "2025-01-24T17:06:54Z"
        },
        {
          "user": "fanquake",
          "body": "Closing this in favour of #29749. I think we should keep discussion there.",
          "created_at": "2025-01-24T20:31:35Z"
        }
      ]
    },
    {
      "number": 31700,
      "title": "intermittent issue in p2p_orphan_handling.py",
      "body": "Looks like the test may overall intermittently fail, because it assumes the tx delay isn't exponentially distributed, but has a constant delay, sufficient for the test to pass.\n\nI think it would be better to use mocktime to halt the test when needed, so that it can even pass when the delay is zero (or close to it).\n\nI haven't looked in detail whether this is the same, but there was one instance in the CI: (Possibly the getdata was split into two, so the check didn't pick it up, because it assumes it to happen in one msg?)\n\nhttps://github.com/bitcoin/bitcoin/actions/runs/12885576442/job/35924329366?pr=25832#step:7:15913\n\n```\n test  2025-01-21T11:21:24.017000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:14372 \n test  2025-01-21T11:21:24.017000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:14372: msg_getdata(inv=[CInv(type=WitnessTx hash=16df2774cb507f967e367838f263d09c647bcc7818d5c45d886c0ee5b8f45ac7)]) \n node0 2025-01-21T11:21:24.017006Z (mocktime: 2025-01-27T11:30:06Z) [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getorphantxs user=__cookie__ \n node0 2025-01-21T11:21:24.017297Z (mocktime: 2025-01-27T11:30:06Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:21:24.017316Z (mocktime: 2025-01-27T11:30:06Z) [httpworker.14] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=setmocktime user=__cookie__ \n node0 2025-01-21T11:21:24.017368Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [node/txdownloadman_impl.cpp:276] [GetRequestsToSend] [net] Requesting tx 16df2774cb507f967e367838f263d09c647bcc7818d5c45d886c0ee5b8f45ac7 peer=24 \n node0 2025-01-21T11:21:24.017377Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net.cpp:3874] [PushMessage] [net] sending getdata (37 bytes) peer=24 \n node0 2025-01-21T11:21:24.017449Z (mocktime: 2025-01-27T11:30:10Z) [net] [net.cpp:2188] [SocketHandlerConnected] [net] socket closed, disconnecting peer=23 \n node0 2025-01-21T11:21:24.017467Z (mocktime: 2025-01-27T11:30:10Z) [net] [net_processing.cpp:1633] [FinalizeNode] [net] Cleared nodestate for peer=23 \n node0 2025-01-21T11:21:24.017701Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:21:24.017722Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.15] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getorphantxs user=__cookie__ \n node0 2025-01-21T11:21:24.221913Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [node/txdownloadman_impl.cpp:276] [GetRequestsToSend] [net] Requesting tx f2777bc29da8d92e6090c69775a12bc7df96a4da2554d086749f8f854872d133 peer=24 \n node0 2025-01-21T11:21:24.221941Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net.cpp:3874] [PushMessage] [net] sending getdata (37 bytes) peer=24 \n test  2025-01-21T11:21:24.222000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:14372: msg_getdata(inv=[CInv(type=WitnessTx hash=f2777bc29da8d92e6090c69775a12bc7df96a4da2554d086749f8f854872d133)]) \n test  2025-01-21T11:28:04.173000Z TestFramework.utils (ERROR): wait_until() failed. Predicate: '''' \n                                           def test_function():\n                                               if check_connected:\n                                                   assert self.is_connected\n                                               return test_function_in()\n                                   '''\n test  2025-01-21T11:28:04.176000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress` \n node0 2025-01-21T11:28:04.179438Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.180169Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=generatetoaddress user=__cookie__ \n node0 2025-01-21T11:28:04.180973Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [node/miner.cpp:161] [CreateNewBlock] CreateNewBlock(): block weight: 1319 txs: 1 fees: 31200 sigops 400 \n node0 2025-01-21T11:28:04.181211Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2527] [ConnectBlock] [bench]     - Sanity checks: 0.01ms [0.00s (0.00ms/blk)] \n node0 2025-01-21T11:28:04.181552Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2629] [ConnectBlock] [bench]     - Fork checks: 0.38ms [0.00s (0.01ms/blk)] \n node0 2025-01-21T11:28:04.181650Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2722] [ConnectBlock] [bench]       - Connect 2 transactions: 0.10ms (0.048ms/tx, 0.095ms/txin) [0.00s (0.01ms/blk)] \n node0 2025-01-21T11:28:04.181716Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2744] [ConnectBlock] [bench]     - Verify 1 txins: 0.16ms (0.163ms/txin) [0.01s (0.02ms/blk)] \n node0 2025-01-21T11:28:04.181756Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [node/miner.cpp:180] [CreateNewBlock] [bench] CreateNewBlock() packages: 0.18ms (1 packages, 0 updated descendants), validity: 0.89ms (total 1.07ms) \n node0 2025-01-21T11:28:04.181838Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:4428] [AcceptBlockHeader] Saw new header hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 height=394 \n node0 2025-01-21T11:28:04.182065Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:255] [NewPoWValidBlock] [validation] NewPoWValidBlock: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 \n node0 2025-01-21T11:28:04.182999Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3187] [ConnectTip] [bench]   - Using cached block \n node0 2025-01-21T11:28:04.183046Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3197] [ConnectTip] [bench]   - Load block from disk: 0.03ms \n node0 2025-01-21T11:28:04.183078Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2527] [ConnectBlock] [bench]     - Sanity checks: 0.00ms [0.00s (0.00ms/blk)] \n node0 2025-01-21T11:28:04.183121Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2629] [ConnectBlock] [bench]     - Fork checks: 0.04ms [0.00s (0.01ms/blk)] \n node0 2025-01-21T11:28:04.183176Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2722] [ConnectBlock] [bench]       - Connect 2 transactions: 0.05ms (0.026ms/tx, 0.051ms/txin) [0.00s (0.01ms/blk)] \n node0 2025-01-21T11:28:04.183210Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2744] [ConnectBlock] [bench]     - Verify 1 txins: 0.09ms (0.088ms/txin) [0.01s (0.02ms/blk)] \n node0 2025-01-21T11:28:04.183460Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2759] [ConnectBlock] [bench]     - Write undo data: 0.25ms [0.04s (0.11ms/blk)] \n node0 2025-01-21T11:28:04.183491Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:2774] [ConnectBlock] [bench]     - Index writing: 0.03ms [0.00s (0.01ms/blk)] \n node0 2025-01-21T11:28:04.183525Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:250] [BlockChecked] [validation] BlockChecked: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 state=Valid \n node0 2025-01-21T11:28:04.183575Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3216] [ConnectTip] [bench]   - Connect total: 0.54ms [0.06s (0.15ms/blk)] \n node0 2025-01-21T11:28:04.183609Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3225] [ConnectTip] [bench]   - Flush: 0.03ms [0.00s (0.00ms/blk)] \n node0 2025-01-21T11:28:04.183634Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3235] [ConnectTip] [bench]   - Writing chainstate: 0.02ms [0.00s (0.00ms/blk)] \n node0 2025-01-21T11:28:04.183680Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [txmempool.cpp:1074] [RemoveUnbroadcastTx] [mempool] Removed ded4025fc122f8892f8e1a3ee818c85275956a77843be62b6989b1c3ff5f2e46 from set of unbroadcast txns before confirmation that txn was sent out \n node0 2025-01-21T11:28:04.183747Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:227] [MempoolTransactionsRemovedForBlock] [validation] Enqueuing MempoolTransactionsRemovedForBlock: block height=394 txs removed=1 \n node0 2025-01-21T11:28:04.183850Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3006] [UpdateTipLog] UpdateTip: new best=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 height=394 version=0x30000000 log2_work=9.625709 tx=612 date='2025-01-27T11:30:10Z' progress=1.000000 cache=0.3MiB(5txo) \n node0 2025-01-21T11:28:04.183901Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3251] [ConnectTip] [bench]   - Connect postprocess: 0.27ms [0.01s (0.02ms/blk)] \n node0 2025-01-21T11:28:04.183939Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validation.cpp:3255] [ConnectTip] [bench] - Connect block: 0.90ms [0.07s (0.18ms/blk)] \n node0 2025-01-21T11:28:04.184008Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [txmempool.cpp:700] [check] [mempool] Checking mempool with 0 transactions and 0 inputs \n node0 2025-01-21T11:28:04.184059Z (mocktime: 2025-01-27T11:30:10Z) [scheduler] [validationinterface.cpp:227] [operator()] [validation] MempoolTransactionsRemovedForBlock: block height=394 txs removed=1 \n node0 2025-01-21T11:28:04.184177Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:217] [BlockConnected] [validation] Enqueuing BlockConnected: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 block height=394 \n node0 2025-01-21T11:28:04.184218Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:182] [UpdatedBlockTip] [validation] Enqueuing UpdatedBlockTip: new block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 fork block hash=4662d66c50b6a655b6971c547619516417c1b422d0718ee24d30f56502410ca3 (in IBD=false) \n node0 2025-01-21T11:28:04.184286Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.1] [validationinterface.cpp:187] [ActiveTipChange] [validation] ActiveTipChange: new block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 block height=394 \n node0 2025-01-21T11:28:04.184454Z (mocktime: 2025-01-27T11:30:10Z) [scheduler] [policy/fees.cpp:711] [processBlock] [estimatefee] Blockpolicy estimates updated by 0 of 1 block txs, since last block 0 of 3 tracked, mempool map size 0, max target 11 from current \n node0 2025-01-21T11:28:04.184501Z (mocktime: 2025-01-27T11:30:10Z) [scheduler] [validationinterface.cpp:217] [operator()] [validation] BlockConnected: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 block height=394 \n node0 2025-01-21T11:28:04.185563Z (mocktime: 2025-01-27T11:30:10Z) [scheduler] [validationinterface.cpp:182] [operator()] [validation] UpdatedBlockTip: new block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 fork block hash=4662d66c50b6a655b6971c547619516417c1b422d0718ee24d30f56502410ca3 (in IBD=false) \n node0 2025-01-21T11:28:04.185654Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net_processing.cpp:5649] [SendMessages] [net] SendMessages: sending inv peer=24 hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 \n node0 2025-01-21T11:28:04.185696Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net.cpp:3874] [PushMessage] [net] sending inv (37 bytes) peer=24 \n test  2025-01-21T11:28:04.187000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:14372: msg_inv(inv=[CInv(type=Block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662)]) \n test  2025-01-21T11:28:04.187000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:14372: msg_getdata(inv=[CInv(type=Block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662)]) \n node0 2025-01-21T11:28:04.188203Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.188325Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.0] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__ \n node0 2025-01-21T11:28:04.188566Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: getdata (37 bytes) peer=24 \n node0 2025-01-21T11:28:04.188622Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net_processing.cpp:3990] [ProcessMessage] [net] received getdata (1 invsz) peer=24 \n node0 2025-01-21T11:28:04.188660Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net_processing.cpp:3993] [ProcessMessage] [net] received getdata for: block 077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 peer=24 \n node0 2025-01-21T11:28:04.188706Z (mocktime: 2025-01-27T11:30:10Z) [msghand] [net.cpp:3874] [PushMessage] [net] sending block (311 bytes) peer=24 \n test  2025-01-21T11:28:04.189000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:14372: msg_block(block=CBlock(nVersion=805306368 hashPrevBlock=4662d66c50b6a655b6971c547619516417c1b422d0718ee24d30f56502410ca3 hashMerkleRoot=b7943c8d36e59a4b8f042e99f55b71e9da78debc337f2520ac30ffb98be501ff nTime=Mon Jan 27 11:30:10 2025 nBits=207fffff nNonce=00000003 vtx=[CTransaction(version=2 vin=[CTxIn(prevout=COutPoint(hash=0000000000000000000000000000000000000000000000000000000000000000 n=4294967295) scriptSig=028a0100 nSequence=4294967295)] vout=[CTxOut(nValue=12.50031200 scriptPubKey=76a9142b4... (msg truncated) \n node0 2025-01-21T11:28:04.189053Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.189130Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.3] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__ \n node0 2025-01-21T11:28:04.190512Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.190644Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.2] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__ \n test  2025-01-21T11:28:04.191000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:14372 \n node0 2025-01-21T11:28:04.191805Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.191893Z (mocktime: 2025-01-27T11:30:10Z) [net] [net.cpp:2188] [SocketHandlerConnected] [net] socket closed, disconnecting peer=24 \n node0 2025-01-21T11:28:04.191978Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.5] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getpeerinfo user=__cookie__ \n node0 2025-01-21T11:28:04.192224Z (mocktime: 2025-01-27T11:30:10Z) [net] [txorphanage.cpp:93] [EraseTx] [txpackages]    removed orphan tx 55ae42d3c30e22ed3fd70b24bbeb214e67fca0420f1fdc8a508a88b4e386af94 (wtxid=9477fadf8dc360b951c9facff7a0be4c4cf8a7158368d64c963a4765fb1a957c) after 8s \n node0 2025-01-21T11:28:04.192252Z (mocktime: 2025-01-27T11:30:10Z) [net] [txorphanage.cpp:120] [EraseForPeer] [txpackages] Erased 1 orphan transaction(s) from peer=24 \n node0 2025-01-21T11:28:04.192263Z (mocktime: 2025-01-27T11:30:10Z) [net] [net_processing.cpp:1633] [FinalizeNode] [net] Cleared nodestate for peer=24 \n node0 2025-01-21T11:28:04.192474Z (mocktime: 2025-01-27T11:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.192514Z (mocktime: 2025-01-27T11:30:10Z) [httpworker.4] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=setmocktime user=__cookie__ \n node0 2025-01-21T11:28:04.192867Z (mocktime: 2025-01-27T23:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.192901Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.6] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getorphantxs user=__cookie__ \n node0 2025-01-21T11:28:04.193191Z (mocktime: 2025-01-27T23:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.193223Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.7] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__ \n node0 2025-01-21T11:28:04.194015Z (mocktime: 2025-01-27T23:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.194065Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=scantxoutset user=__cookie__ \n node0 2025-01-21T11:28:04.194263Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write block and undo data to disk started \n node0 2025-01-21T11:28:04.196980Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write block and undo data to disk completed (2.69ms) \n node0 2025-01-21T11:28:04.197024Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write block index to disk started \n node0 2025-01-21T11:28:04.198904Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write block index to disk completed (1.87ms) \n node0 2025-01-21T11:28:04.198947Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write coins cache to disk (5 coins, 256KiB) started \n node0 2025-01-21T11:28:04.198985Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [txdb.cpp:148] [BatchWrite] [coindb] Writing final batch of 0.00 MiB \n node0 2025-01-21T11:28:04.199390Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [txdb.cpp:150] [BatchWrite] [coindb] Committed 3 changed transaction outputs (out of 3) to coin database... \n node0 2025-01-21T11:28:04.199415Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [logging/timer.h:58] [Log] [bench] FlushStateToDisk: write coins cache to disk (5 coins, 256KiB) completed (0.46ms) \n node0 2025-01-21T11:28:04.199431Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.8] [validationinterface.cpp:245] [ChainStateFlushed] [validation] Enqueuing ChainStateFlushed: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 \n node0 2025-01-21T11:28:04.199489Z (mocktime: 2025-01-27T23:30:10Z) [scheduler] [validationinterface.cpp:245] [operator()] [validation] ChainStateFlushed: block hash=077bf058147704114b908875b7fbfa54065dfe633c6e904276222f6284c18662 \n node0 2025-01-21T11:28:04.202632Z (mocktime: 2025-01-27T23:30:10Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:49580 \n node0 2025-01-21T11:28:04.202704Z (mocktime: 2025-01-27T23:30:10Z) [httpworker.10] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__ \n test  2025-01-21T11:28:04.203000Z TestFramework (ERROR): Assertion failed \n                                   Traceback (most recent call last):\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/p2p_orphan_handling.py\", line 820, in run_test\n                                       self.test_parents_change()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/p2p_orphan_handling.py\", line 55, in wrapper\n                                       func(self)\n                                       ~~~~^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/p2p_orphan_handling.py\", line 791, in test_parents_change\n                                       peer2.wait_for_parent_requests([int(parent_peekaboo_AB[\"txid\"], 16), int(parent_missing[\"txid\"], 16)])\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/p2p_orphan_handling.py\", line 99, in wait_for_parent_requests\n                                       self.wait_until(test_function, timeout=10)\n                                       ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/p2p.py\", line 594, in wait_until\n                                       wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 317, in wait_until_helper_internal\n                                       raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\n                                   AssertionError: Predicate ''''\n                                           def test_function():\n                                               if check_connected:\n                                                   assert self.is_connected\n                                               return test_function_in()\n                                   ''' not true after 400.0 seconds\n test  2025-01-21T11:28:04.208000Z TestFramework (DEBUG): Closing down network thread \n test  2025-01-21T11:28:04.307000Z TestFramework (INFO): Stopping nodes \n test  2025-01-21T11:28:04.308000Z TestFramework.node0 (DEBUG): Stopping node ",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-21T14:07:55Z",
      "updated_at": "2025-03-21T05:46:21Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/31700",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "hodlinator",
          "body": "Another case: https://github.com/hodlinator/bitcoin/actions/runs/13042105883/job/36386032546#step:7:15916",
          "created_at": "2025-01-30T08:46:43Z"
        },
        {
          "user": "maflcko",
          "body": "Another from a local run: https://drahtbot.space/temp_scratch/p2p_o_h_208.tar.zstd",
          "created_at": "2025-02-24T13:10:50Z"
        },
        {
          "user": "maflcko",
          "body": "https://cirrus-ci.com/task/5838171738472448?logs=ci#L2741",
          "created_at": "2025-03-12T16:34:26Z"
        },
        {
          "user": "Sjors",
          "body": "cc orphanage fans @glozow, @sipa, @mzumsande\n\n#31829 significantly overhauls this test, so not sure if a fix would conflict with that?",
          "created_at": "2025-03-13T11:09:02Z"
        },
        {
          "user": "mzumsande",
          "body": "> so not sure if a fix would conflict with that?\n\nHaven't looked into this one yet, but it shouldn't really matter if (#31829) conflicts or not - a fix should have priority, if possible be included in 29.0, so that we don't have a release with known intermittent failures.",
          "created_at": "2025-03-13T15:19:03Z"
        },
        {
          "user": "mzumsande",
          "body": "> Looks like the test may overall intermittently fail, because it assumes the tx delay isn't exponentially distributed, but has a constant delay, sufficient for the test to pass.\n\nThat is not the problem here, because the delay for requesting txns is actually constant and not randomized / exponentially distributed.\n\n> Possibly the getdata was split into two, so the check didn't pick it up, because it assumes it to happen in one msg\n\nYes, this is what's happening in the failed runs. I think the reason is that we call `peer_disconnect()` but don't wait for the disconnected to be finished, so we may bump the `mocktime` before that has happened, resulting in the `GETDATA` to be split over two messages.\n\nSee #32063 for a fix.",
          "created_at": "2025-03-13T21:54:36Z"
        },
        {
          "user": "tnndbtc",
          "body": "@maflcko Even with @mzumsande 's [fix](https://github.com/bitcoin/bitcoin/pull/32063) in , I am able to add a one second sleep in `src/net.cpp:CConnman::DisconnectNodes()` to 100% reproduce the issue on Mac with Apple M1 chipset with OS Sequoia 15.1.1 with `--timeout-factor=1.1`.  For more details, please checkout https://github.com/bitcoin/bitcoin/pull/32063#issuecomment-2730664318\n",
          "created_at": "2025-03-17T19:50:52Z"
        },
        {
          "user": "maflcko",
          "body": "@tnndbtc Thank you for the exact diff to reproduce. This makes it easier to test!\n\n\nI don't know how to fix this class of bug completely, but this one instance can simply be fixed by syncing with the `net` thread. The issue is that net_processing still has a stale reference to the disconnected node and is waiting for the `net` thread to delete it. There is no direct way to sync with the Bitcoin Core `net` thread from outside the process, but as a hacky workaround, one can add some bytes to the buffer and wait for them to be consumed by the net thread. This should ensure the disconnect happened before the message bytes are fully handled.\n\nSee this diff, which should pass:\n\n\n```diff\ndiff --git a/src/net.cpp b/src/net.cpp\nindex 735985a841..2bb6db0cf7 100644\n--- a/src/net.cpp\n+++ b/src/net.cpp\n@@ -1965,6 +1965,9 @@ void CConnman::DisconnectNodes()\n             // Destroy the object only after other threads have stopped using it.\n             if (pnode->GetRefCount() <= 0) {\n                 m_nodes_disconnected.remove(pnode);\n+\n+                std::this_thread::sleep_for(std::chrono::seconds(1)); // SLEEP for 1 second to 100% reproduce the issue\n+\n                 DeleteNode(pnode);\n             }\n         }\ndiff --git a/test/functional/p2p_orphan_handling.py b/test/functional/p2p_orphan_handling.py\nindex ac8b6fd705..e839b2d987 100755\n--- a/test/functional/p2p_orphan_handling.py\n+++ b/test/functional/p2p_orphan_handling.py\n@@ -789,6 +789,7 @@ class OrphanHandlingTest(BitcoinTestFramework):\n         # Disconnect peer1. peer2 should become the new candidate for orphan resolution.\n         peer1.peer_disconnect()\n         self.wait_until(lambda: node.num_test_p2p_connections() == 1)\n+        peer2.sync_with_ping()  # Sync with the 'net' thread which completes the disconnection fully\n         node.bumpmocktime(TXREQUEST_TIME_SKIP)\n         self.wait_until(lambda: len(node.getorphantxs(verbosity=2)[0][\"from\"]) == 1)\n         # Both parents should be requested, now that they are both missing.\n",
          "created_at": "2025-03-18T15:34:55Z"
        },
        {
          "user": "maflcko",
          "body": "An alternative fix would be to adjust `wait_for_parent_requests` to accept any order and any sequence of messages, but this may be a larger diff.",
          "created_at": "2025-03-18T16:07:32Z"
        }
      ]
    },
    {
      "number": 31698,
      "title": "contrib: Autoconf fragments left in test-*-check scripts",
      "body": "The [`test-security-check`](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/test-security-check.py) and [`test-symbol-check`](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/test-symbol-check.py) scripts still reference Autoconf and it's behaviour:\n```python\ndef env_flags() -> list[str]:\n    # This should behave the same as AC_TRY_LINK, so arrange well-known flags\n    # in the same order as autoconf would.\n    #\n    # See the definitions for ac_link in autoconf's lib/autoconf/c.m4 file for\n    # reference.\n```\n\nThe also expect `CPPFLAGS` to be passed into them, but this isn't happening from CMake:\n\nhttps://github.com/bitcoin/bitcoin/blob/d7f56cc5d9e12ad31dd1ce8b34c3ff4ec5c1b70c/cmake/module/Maintenance.cmake#L40",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-01-21T11:40:14Z",
      "updated_at": "2025-02-12T08:48:03Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31698",
      "labels": [
        "Scripts and tools"
      ]
    },
    {
      "number": 31697,
      "title": "ci: tidy task doesn't run on aarch64",
      "body": "```bash\ntime env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" bash -c 'FILE_ENV=\"./ci/test/00_setup_env_native_tidy.sh\" ./ci/test_run_all.sh'\n<snip>\n[  0%] Built target bitcoin_crypto_arm_shani\n[100%] Built target bitcoin_crypto\ngmake: *** No rule to make target 'bitcoin_crypto_x86_shani'.  Stop.\n```\n\nThe script as written assumes that it will be run on `x86_64`:\n\nhttps://github.com/bitcoin/bitcoin/blob/d7f56cc5d9e12ad31dd1ce8b34c3ff4ec5c1b70c/contrib/devtools/check-deps.sh#L11",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-01-21T11:12:02Z",
      "updated_at": "2025-02-18T12:08:59Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31697",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "This can be fixed by https://github.com/bitcoin/bitcoin/pull/31268.",
          "created_at": "2025-01-23T08:52:55Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 5,
    "issues": 5
  }
}