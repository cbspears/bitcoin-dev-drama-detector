{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:32:24.505494+00:00",
  "date": "2025-11-17",
  "pull_requests": [
    {
      "number": 33894,
      "title": "net: Remove unused `local_socket_bytes` variable in `CConnman::GetAddresses()`",
      "body": "The local_socket_bytes variable was never used. Removed it to clean up dead code.",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-11-17T22:04:42Z",
      "updated_at": "2025-11-18T11:50:00Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33894",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33894.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [mzumsande](https://github.com/bitcoin/bitcoin/pull/33894#pullrequestreview-3474798471), [theStack](https://github.com/bitcoin/bitcoin/pull/33894#pullrequestreview-3474865518) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T22:04:49Z"
        }
      ]
    },
    {
      "number": 33893,
      "title": "test: add `-alertnotify` test for large work invalid chain warning",
      "body": "This PR adds missing test coverage for the `LARGE_WORK_INVALID_CHAIN` fork warning, checked with the `-alertnotify` option:\r\nhttps://github.com/bitcoin/bitcoin/blob/ead849c9f177a3a175a22b35fa864b4b37fb9934/src/validation.cpp#L2033-L2040\r\nFound that this is missing during review of #32587. The test works by first creating a bunch of invalid blocks, that are first announced by headers and then submitted fully in reverse (invalid tip first), in order to set `m_best_invalid` to that value, finally leading to the best chain / invalid chain gap of >= 6 blocks. I'd be curious if there are other (more realistic?) ways to test this. One simple alternative is just to call `invalidateblock` twice (once at the tip, once at the base of the invalid chain). \r\n\r\nNote that the written warning doesn't include the exclamation mark, as it is removed via `SanitizeString` in the `AlertNotify` function.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-11-17T21:57:15Z",
      "updated_at": "2025-11-25T12:31:41Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/33893",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33893.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/33893#issuecomment-3571972044), [mzumsande](https://github.com/bitcoin/bitcoin/pull/33893#pullrequestreview-3501853880) |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/33893#issuecomment-3554692728) |\n| Stale ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33893#pullrequestreview-3483548675) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T21:57:23Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19445926854/job/55640320613</sub>\n<sub>LLM reason (âœ¨ experimental): Python linter failed due to missing encoding in open() usage (lint-python-utf8-encoding).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-11-17T22:01:17Z"
        },
        {
          "user": "maflcko",
          "body": "> The test works by first creating a bunch of invalid blocks, that are first announced by headers and then submitted fully in reverse (invalid tip first), in order to set `m_best_invalid` to that value, finally leading to the best chain / invalid chain gap of >= 6 blocks. I'd be curious if there are other (more realistic?) ways to test this. One simple alternative is just to call `invalidateblock` twice (once at the tip, once at the base of the invalid chain).\r\n\r\nAnother alternative could be to create and submit one invalid block, then submit a longer chain forking enough blocks before the invalid block, but this seems even less likely to happen in a realistic scenario.\r\n\r\n> Found that this is missing during review of #32587.\r\n\r\ncorecheck does not show any new coverage here, so I guess there is a test (via invalidateblock?) which triggers this as a side-effect?",
          "created_at": "2025-11-18T18:44:57Z"
        },
        {
          "user": "brunoerg",
          "body": "> corecheck does not show any new coverage here, so I guess there is a test (via invalidateblock?) which triggers this as a side-effect?\r\n\r\nExactly, it's in `feature_bip68_sequence`. I guess it happens at: \r\nhttps://github.com/bitcoin/bitcoin/blob/53b72372da91c5e90df865bc15961e16feb4a983/test/functional/feature_bip68_sequence.py#L341-L344",
          "created_at": "2025-11-18T22:59:11Z"
        },
        {
          "user": "theStack",
          "body": "In addition to `feature_bip68_sequence.py`, it seems that the functional tests `feature_coinstatsindex.py`, `feature_pruning.py` and `mempool_reorg.py` hit this code-path as well (tested experimentally by putting an `assert(false)` into the branch to provoke a crash), most likely all of them in the course of an `invalidateblock` call, though I didn't check in detail. However, none of these use the `-alertnotify` option, so the function `AlertNotify` returns early in those cases.",
          "created_at": "2025-11-19T12:05:38Z"
        },
        {
          "user": "theStack",
          "body": "@brunoerg @maflcko: Thanks for reviewing, I addressed all the nits.\r\n\r\n> FYI I proposed to reword the warning message in #33553 ([7f28483](https://github.com/bitcoin/bitcoin/commit/7f284835be87c4d1a8a56804992043e12dae1ea1)).\r\n\r\nAh nice, makes sense to unify, was already wondering why there are two different messages, each one only mentioning one possible cause.",
          "created_at": "2025-11-19T21:11:12Z"
        },
        {
          "user": "sedited",
          "body": "Nice, Concept ACK",
          "created_at": "2025-11-19T21:24:52Z"
        },
        {
          "user": "brunoerg",
          "body": "reACK 8343a9ffcc752f77eb2248315d10b6dff4a5c98b\r\n\r\nFrom my last review, it addresses https://github.com/bitcoin/bitcoin/pull/33893#discussion_r2543670655. ",
          "created_at": "2025-11-24T17:37:21Z"
        }
      ]
    },
    {
      "number": 33892,
      "title": "policy: allow <minrelay txns in package context if paid for by cpfp",
      "body": "Prior to cluster mempool, a policy was in place that\r\ndisallowed non-TRUC transactions from being\r\nTX_RECONSIDERABLE in a package setting if it was below\r\nminrelay. This was meant to simplify reasoning about mempool\r\ntrimming requirements with non-trivial transaction\r\ntopologies in the mempool. This is no longer a concern\r\npost-cluster mempool, so this is relaxed.\r\n    \r\nIn effect, this makes 0-value parent transactions relayable\r\nthrough the network without the TRUC restrictions and\r\nthus the anti-pinning protections.\r\n",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-11-17T20:24:01Z",
      "updated_at": "2025-12-27T21:34:41Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33892",
      "labels": [
        "TX fees and policy"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33892.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/33892#issuecomment-3677210514), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/33892#pullrequestreview-3604464567) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T20:24:10Z"
        },
        {
          "user": "ajtowns",
          "body": "ACK e44dec027ceec2a5f74b65636689a51833d78a94 - lgtm",
          "created_at": "2025-12-20T01:56:16Z"
        }
      ]
    },
    {
      "number": 33891,
      "title": "kernel: Expose reusable `PrecomputedTransactionData` in script validation",
      "body": "This PR exposes a reusable `PrecomputedTransactionData` object in script validation using libkernel.\r\n\r\nCurrently, libkernel computes `PrecomputedTransactionData` each time `btck_script_pubkey_verify` is called, exposing clients to quadratic hashing when validating a transaction with multiple inputs. By externalizing `PrecomputedTransactionData` and making it reusable, libkernel can eliminate this attack vector.\r\n\r\nI discussed this problem in [this issue](https://github.com/TheCharlatan/rust-bitcoinkernel/issues/46). The design of this PR is inspired by @sedited's comments.\r\n\r\nThe PR introduces three new APIs for managing the `btck_PrecomputedTransactionData` object:\r\n```c\r\n/**\r\n * @brief Create precomputed transaction data for script verification.\r\n *\r\n * @param[in] tx_to             Non-null.\r\n * @param[in] spent_outputs     Nullable for non-taproot verification. Points to an array of\r\n *                              outputs spent by the transaction.\r\n * @param[in] spent_outputs_len Length of the spent_outputs array.\r\n * @return                      The precomputed data, or null on error.\r\n */\r\nbtck_PrecomputedTransactionData* btck_precomputed_transaction_data_create(\r\n    const btck_Transaction* tx_to,\r\n    const btck_TransactionOutput** spent_outputs, size_t spent_outputs_len) BITCOINKERNEL_ARG_NONNULL(1);\r\n\r\n/**\r\n * @brief Copy precomputed transaction data.\r\n *\r\n * @param[in] precomputed_txdata  Non-null.\r\n * @return                      The copied precomputed transaction data.\r\n */\r\nbtck_PrecomputedTransactionData* btck_precomputed_transaction_data_copy(\r\n    const btck_PrecomputedTransactionData* precomputed_txdata) BITCOINKERNEL_ARG_NONNULL(1);\r\n\r\n/**\r\n * Destroy the precomputed transaction data.\r\n */\r\nvoid btck_precomputed_transaction_data_destroy(btck_PrecomputedTransactionData* precomputed_txdata);\r\n```\r\n\r\nThe PR also modifies `btck_script_pubkey_verify` so that it accepts `precomputed_txdata` instead of `spent_outputs`:\r\n```c\r\n/**\r\n * @brief Verify if the input at input_index of tx_to spends the script pubkey\r\n * under the constraints specified by flags. If the\r\n * `btck_ScriptVerificationFlags_WITNESS` flag is set in the flags bitfield, the\r\n * amount parameter is used. If the taproot flag is set, the precomputed data\r\n * must contain the spent outputs.\r\n *\r\n * @param[in] script_pubkey      Non-null, script pubkey to be spent.\r\n * @param[in] amount             Amount of the script pubkey's associated output. May be zero if\r\n *                               the witness flag is not set.\r\n * @param[in] tx_to              Non-null, transaction spending the script_pubkey.\r\n * @param[in] precomputed_txdata Nullable if the taproot flag is not set. Otherwise, precomputed data\r\n *                               for tx_to with the spent outputs must be provided.\r\n * @param[in] input_index        Index of the input in tx_to spending the script_pubkey.\r\n * @param[in] flags              Bitfield of btck_ScriptVerificationFlags controlling validation constraints.\r\n * @param[out] status            Nullable, will be set to an error code if the operation fails, or OK otherwise.\r\n * @return                       1 if the script is valid, 0 otherwise.\r\n */\r\nint btck_script_pubkey_verify(\r\n    const btck_ScriptPubkey* script_pubkey,\r\n    int64_t amount,\r\n    const btck_Transaction* tx_to,\r\n    const btck_PrecomputedTransactionData* precomputed_txdata,\r\n    unsigned int input_index,\r\n    btck_ScriptVerificationFlags flags,\r\n    btck_ScriptVerifyStatus* status) BITCOINKERNEL_ARG_NONNULL(1, 3);\r\n```\r\n\r\nAs before, an error is thrown if the taproot flag is set and `spent_outputs` is not provided in `precomputed_txdata` (or `precomputed_txdata` is null). For simple single-input non-taproot verification, `precomputed_txdata` may be null, and the kernel will construct the precomputed data on-the-fly.\r\n\r\nBoth the C++ wrapper and the test suite are updated with the new API. Tests cover both `precomputed_txdata` reuse and nullability.\r\n\r\nAppreciate feedback on this concept / approach!",
      "state": "closed",
      "user": "joshdoman",
      "created_at": "2025-11-17T19:58:37Z",
      "updated_at": "2025-12-27T16:20:49Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33891",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\r\n### Code Coverage & Benchmarks\r\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33891.\r\n<!--021abf342d371248e50ceaed478a90ca-->\r\n### Reviews\r\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\r\n| Type | Reviewers |\r\n| ---- | --------- |\r\n| ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/33891#pullrequestreview-3610492557), [stringintech](https://github.com/bitcoin/bitcoin/pull/33891#pullrequestreview-3610518044) |\r\n| Concept ACK | [yuvicc](https://github.com/bitcoin/bitcoin/pull/33891#issuecomment-3545630672), [w0xlt](https://github.com/bitcoin/bitcoin/pull/33891#pullrequestreview-3480249411) |\r\n| Stale ACK | [alexanderwiederin](https://github.com/bitcoin/bitcoin/pull/33891#pullrequestreview-3529821349) |\r\n\r\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\r\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33943](https://github.com/bitcoin/bitcoin/pull/33943) (kernel: don't use assert to handle invalid user input by stickies-v)\n* [#33908](https://github.com/bitcoin/bitcoin/pull/33908) (kernel: add contextâ€‘free block validation API (`btck_check_block_context_free`) with POW/Merkle flags by w0xlt)\n* [#33822](https://github.com/bitcoin/bitcoin/pull/33822) (kernel: Add block header support and validation by yuvicc)\n* [#33796](https://github.com/bitcoin/bitcoin/pull/33796) (kernel: Expose `CheckTransaction` consensus validation function by w0xlt)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-11-17T19:58:44Z"
        },
        {
          "user": "yuvicc",
          "body": "Concept ACK\r\n\r\n[Wrote](https://github.com/yuvicc/test-bitcoinkernel/blob/master/context_free.c) a small program to test `btck_PrecomputedTransactionData`.",
          "created_at": "2025-11-18T06:41:26Z"
        },
        {
          "user": "sedited",
          "body": "This looks reasonable, Concept ACK\r\n\r\n",
          "created_at": "2025-11-26T10:33:53Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/20471517120/job/58829202332</sub>\n<sub>LLM reason (âœ¨ experimental): Trailing newline lint failure (trailing_newline check) caused the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-23T22:45:16Z"
        }
      ]
    },
    {
      "number": 33890,
      "title": "mining: add requestedOutputs field, e.g. for merged mining",
      "body": "This adds a `requestedOutputs` field to `BlockCreateOptions` which lets the Mining IPC client request outputs to be added before the consensus mandatory commitments.\r\n\r\nThe main use case is being able to add `OP_RETURN` outputs for merged mining without patching `BlockAssembler::CreateNewBlock()`.\r\n\r\nIt could potentially also be used to make payouts directly from the coinbase, but this is unsafe for any amount above the subsidy (this PR adds checks for that). In general a pool should add payout outputs _after_ obtaining the block template, even a solo pool.\r\n\r\nAlthough it's possible to modify pool software to add merge mining outputs on top of the returned block template (e.g. by intercepting and modifying the Stratum v2 `NewTemplate` message), it may in practice be easier to do this when requesting a template.\r\n\r\nSuggested in https://github.com/bitcoin/bitcoin/pull/33819#issuecomment-3539952304.\r\n\r\nBuilds on:\r\n- #33819",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-17T17:41:02Z",
      "updated_at": "2025-11-20T18:43:09Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/33890",
      "labels": [
        "Mining"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33890.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33795](https://github.com/bitcoin/bitcoin/pull/33795) (test: Ignore error message give from python because of PYTHON_GIL by kevkevinpal)\n* [#33421](https://github.com/bitcoin/bitcoin/pull/33421) (node: add  `BlockTemplateCache` by ismaelsadeeq)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\nPossible typos and grammar issues:\n\n- Scan outputs from getCoinbase() outputs field for the -> Scan the outputs field from getCoinbase() for the [word order makes the sentence confusing; reordering clarifies that the \"outputs\" field of getCoinbase() should be scanned]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-11-17T17:41:12Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `Linux->Windows cross, no tests`: https://github.com/bitcoin/bitcoin/actions/runs/19438954140/job/55617155652</sub>\n<sub>LLM reason (âœ¨ experimental): Build failed due to a C++ compile error: missing initializer for BlockCreateOptions::requested_outputs, treated as an error by -Werror.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-11-17T17:50:17Z"
        },
        {
          "user": "Sjors",
          "body": "@TheBlueMatt do you know of any merged mining open source projects and whether the approach here would make sense for them?\r\n\r\nIn https://github.com/stratum-mining/sv2-spec/issues/167#issuecomment-3547519952 you mention that a downside of adding configuration options to template requests is that it increases the potential number of distinct templates, making caching harder.",
          "created_at": "2025-11-18T14:43:00Z"
        },
        {
          "user": "plebhash",
          "body": "is this aimed at Sv2? if not, please disregard everything below\r\n\r\n---\r\n\r\neven though the `bitcoin_core_sv2` crate introduced via https://github.com/stratum-mining/sv2-apps/pull/59 is leveraging IPC to interact with Bitcoin Core, on the Rust side we're still abstracting the IO around Sv2 Template Distribution Protocol, for which there's no message that would be able to carry this kind of information\r\n\r\n---\r\n\r\n> Although it's possible to modify pool software to add merge mining outputs on top of the returned block template (e.g. by intercepting and modifying the Stratum v2 `NewTemplate` message)\r\n\r\n`NewTemplate` is not really intercepted/modified... it becomes:\r\n- `DeclareMiningJob` + `SetCustomMiningJob` under Job Declaration Protocol\r\n- `NewMiningJob` or `NewExtendedMiningJob` under Mining Protocol\r\n\r\nand when that happens, these messages get the appropriate outputs (be it payout or merged mining) as a natural flow of the protocol, which will eventually turn into valid PoW or Solution\r\n\r\n---\r\n\r\n> it may in practice be easier to do this when requesting a template.\r\n\r\ntbh I don't think this will introduce any meaningful improvements to Sv2, and it will actually do the opposite if it requires a spec change so this can be integrated",
          "created_at": "2025-11-18T18:24:30Z"
        },
        {
          "user": "Sjors",
          "body": "> is this aimed at Sv2?\r\n\r\nAny consumer of the interface, but I mostly have Stratum v2 in mind.\r\n\r\n> if it requires a spec change so this can be integrated\r\n\r\nAs @ajtowns points out in the https://github.com/stratum-mining/sv2-spec/issues/167 thread it's a bit odd that @TheBlueMatt states that merged-mining is \"a key goal of Sv2\" while the spec doesn't even mention it.\r\n\r\nIn principle the change here doesn't need a spec change. Miners who want merged-mining will patch _something_, and this just encourages them to patch the Template Provider rather than Bitcoin Core.\r\n\r\nBut I do think it would be useful to at least sketch out how merged-mining should interact with Stratum v2, so we can decide if it even makes sense to add an extra field here, or whether such outputs should be added at a later step. \r\n",
          "created_at": "2025-11-19T09:15:02Z"
        },
        {
          "user": "Sjors",
          "body": "Going to close this because I don't think it's the right approach.\r\n\r\nWe want to keep templates as reusable as possible in order to support multiple clients (potentially even a public service, though the node would not be doing this directly).\r\n\r\nWith that in mind it seems better if clients take the template and then customize it by adding their own outputs, rather than us customising it for them. ",
          "created_at": "2025-11-20T18:43:09Z"
        }
      ]
    },
    {
      "number": 33889,
      "title": "guix: update per-host disk-space estimates in build gate",
      "body": "Today, the build gates are obsolete. I found this out after seeing someone flag this on a commit setting `-static-libgcc`. Note that the Linux builds came in at the expected amount of disk space utilization, so I did not touch the values for them.\r\n\r\nThis PR aims to readjust the build gate disk space per-host estimates for darwin and mingw based on some testing I did locally in my build VM.\r\n\r\nDetails:\r\n(Copied from https://github.com/kevkevinpal/bitcoin/issues/200):\r\n\r\nI ran `HOSTS=\"x86_64-w64-mingw32\" ./contrib/guix/guix-build`\r\n\r\nAfter (+10 GiB):\r\n```\r\nFilesystem     1G-blocks  Used Available Use% Mounted on\r\n/dev/sda5           512G   98G      393G  20% /gnu/store\r\n```\r\n\r\nThese numbers makes this change seem reasonable (1.5x safety factor):\r\n```\r\n-        *mingw*)  required_KiB=7600000 ;;\r\n+        *mingw*)  required_KiB=15728640 ;;\r\n```\r\n\r\n---\r\n\r\nThen I ran `HOSTS=\"aarch64-linux-gnu\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+6 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  104G  387G  22% /gnu/store\r\n```\r\n\r\n---\r\n\r\nThen I setup the SDK for macOS. This established a new *before* snapshot of disk use:\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  116G  375G  24% /gnu/store\r\n```\r\n\r\nThen I ran `HOSTS=\"x86_64-apple-darwin\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+5 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  121G  370G  25% /gnu/store\r\n```\r\n\r\nIMO, this is grounds for updating this (5 GiB * 1.5x safety factor):\r\n```\r\n-        *darwin*) required_KiB=440000 ;;\r\n+        *darwin*) required_KiB=8388608 ;;\r\n```\r\n",
      "state": "open",
      "user": "djkazic",
      "created_at": "2025-11-17T17:21:07Z",
      "updated_at": "2026-01-05T21:42:45Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33889",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33889.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/33889#issuecomment-3712187096) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T17:21:15Z"
        },
        {
          "user": "bensig",
          "body": "ACK cbddfbac82c8cab5e9b303f6c6b417e16b0e2501\r\n\r\n  Math checks out. Testing methodology in the PR description is thorough.",
          "created_at": "2026-01-05T21:42:41Z"
        }
      ]
    },
    {
      "number": 33888,
      "title": "ci: Re-enable LINT_CI_SANITY_CHECK_COMMIT_SIG",
      "body": "The sanity check to check the last few merge commit signatures on the main branch was accidentally and silently disabled while moving from the `cirrus-ci.com` platform to the GHA platform.\r\n\r\nSo fix that by re-enabling it.\r\n\r\nAlso, contains a few other lint cleanup commits.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-17T16:41:40Z",
      "updated_at": "2025-11-20T19:46:32Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/33888",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33888.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/33888#issuecomment-3549223965), [willcl-ark](https://github.com/bitcoin/bitcoin/pull/33888#pullrequestreview-3482692983) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T16:41:49Z"
        },
        {
          "user": "janb84",
          "body": "\r\n> while moving from cirrus-ci to GHA.\r\n\r\nJust to clarify, is this for the forked repos that run on GHA because the main repo still runs on Cirrus runners right ? see : \r\nhttps://github.com/bitcoin/bitcoin/actions/runs/19437220743/job/55611173427?pr=33888#step:1:2\r\n",
          "created_at": "2025-11-18T13:08:06Z"
        },
        {
          "user": "maflcko",
          "body": "> > while moving from cirrus-ci to GHA.\r\n> \r\n> Just to clarify, is this for the forked repos that run on GHA because the main repo still runs on Cirrus runners right ?\r\n\r\nNo, it is about the platform switch from `cirrus-ci.com` to the GHA platform, which goes through `github.com`. The GHA runner type should be unrelated.",
          "created_at": "2025-11-18T13:11:15Z"
        },
        {
          "user": "janb84",
          "body": "re ACK 55555db055b59dd529526915dfc59e5a13e43160\r\n\r\nchanges since last ACK:\r\n- if condition order and `os.environ[key]` lookup\r\n\r\nthanks for incorporating my suggestion !",
          "created_at": "2025-11-18T19:21:57Z"
        },
        {
          "user": "fanquake",
          "body": "cc @m3dwards @willcl-ark ",
          "created_at": "2025-11-19T09:34:26Z"
        },
        {
          "user": "maflcko",
          "body": "> Side-note: `ruff check` is happy with `.github/ci-lint-exec.py` but `ruff format` suggests some changes. I know we don't enforce this, but would be happy to re-ACK with a final commit `ruff`-formatting the file too :)\r\n\r\nI tried formatting with `black` and `yapf`, but they contradicted each other, so I haven't tried `ruff format` and I'll leave this as-is for now. :sweat_smile: ",
          "created_at": "2025-11-19T13:30:28Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like it worked, fwiw: https://github.com/bitcoin/bitcoin/actions/runs/19545916567/job/55966862251#step:6:151:\r\n\r\n```\r\n+ '[' 1 = 1 ']'\r\n+ git log HEAD~10 -1 --format=%H\r\n+ git log HEAD~10 -1 --format=%H\r\n+ mapfile -t KEYS\r\n+ git config user.email ci@ci.ci\r\n+ git config user.name ci\r\n+ gpg --keyserver hkps://keys.openpgp.org --recv-keys E777299FC265DD04793070EB944D35F9AC3DB76A D1DBF2C4B96F2DEBF4C16654410108112E7EA81F 152812300785C96444D3334D17565732E08E5E41 6B002C6EA3F91B1B0DF0C9BC8F617F1200A6D25C 4D1B3D5ECBA1A7E05371EEBE46800E30FC748A66\r\ngpg: directory '/root/.gnupg' created\r\ngpg: keybox '/root/.gnupg/pubring.kbx' created\r\ngpg: /root/.gnupg/trustdb.gpg: trustdb created\r\n...\r\ngpg: Total number processed: 5\r\ngpg:               imported: 5\r\n+ ./contrib/verify-commits/verify-commits.py\r\nUsing verify-commits data from /bitcoin/contrib/verify-commits\r\nThere is a valid path from \"HEAD\" to b126f981943de0ddcc50a8f7f79a447f1f45cf60 where all commits are signed!",
          "created_at": "2025-11-20T19:46:32Z"
        }
      ]
    },
    {
      "number": 33887,
      "title": "doc: Improve CI docs on env and qemu-user-static",
      "body": "Should at least partially fix #31199",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-11-17T14:08:38Z",
      "updated_at": "2025-11-20T18:48:38Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33887",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33887.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/33887#pullrequestreview-3477801343), [maflcko](https://github.com/bitcoin/bitcoin/pull/33887#issuecomment-3547619341) |\n| Concept ACK | [waketraindev](https://github.com/bitcoin/bitcoin/pull/33887#issuecomment-3542674031) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T14:08:46Z"
        },
        {
          "user": "waketraindev",
          "body": "Concept ACK\r\n\r\nnit: Please squash the commits per the contributing guidelines: https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits\r\n\r\nBoth commits touch `ci/README.md` and cover the same scope.",
          "created_at": "2025-11-17T16:05:04Z"
        },
        {
          "user": "hodlinator",
          "body": "> nit: Please squash the commits per the contributing guidelines: https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits\r\n\r\nWhile they do touch adjacent lines, the commits each address separate sub-issues, both with their own links in respective commit message. So I think it's more orderly like this. But open to squash if other reviewers agree.",
          "created_at": "2025-11-17T16:12:18Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 552eb90071fd246ba40037f74329403b72453047",
          "created_at": "2025-11-18T13:17:34Z"
        }
      ]
    },
    {
      "number": 33886,
      "title": "test: Remove tests violating hardened std::span",
      "body": "Also, add a test for creating a CScript from an empty byte vector.\r\n\r\nTo test: `rm -rf ./bld-cmake && cmake -B ./bld-cmake  -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++;-stdlib=libc++;-D_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_DEBUG' -DBUILD_GUI=OFF -DBUILD_FUZZ_BINARY=OFF -DBUILD_BENCH=OFF -DBUILD_KERNEL_LIB=ON -DENABLE_WALLET=OFF -DENABLE_IPC=OFF && cmake --build ./bld-cmake --parallel $( nproc ) && valgrind --tool=none ./bld-cmake/bin/test_kernel --catch_system_error=no`\r\n\r\nBefore:\r\n\r\n```\r\n/cxx_build/include/c++/v1/span:451: libc++ Hardening assertion __count == 0 || std::to_address(__first) != nullptr failed: passed nullptr with non-zero length in span's constructor (iterator, len)\r\n```\r\n\r\nAfter: (Passes)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-11-17T12:23:21Z",
      "updated_at": "2025-11-17T14:07:14Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33886",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33886.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/33886#pullrequestreview-3472498582), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33886#pullrequestreview-3472700020) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-17T12:23:28Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 9,
    "issues": 0
  }
}