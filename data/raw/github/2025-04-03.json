{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:30:23.152892+00:00",
  "date": "2025-04-03",
  "pull_requests": [
    {
      "number": 32217,
      "title": "Bugfix: Only use git for build info if the repository is actually the right one",
      "body": "cmake port of fix originally fixed for autotools in #7522",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2025-04-03T23:21:21Z",
      "updated_at": "2025-10-13T16:44:33Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/pull/32217",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32217.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32220](https://github.com/bitcoin/bitcoin/pull/32220) (cmake: Get rid of undocumented `BITCOIN_GENBUILD_NO_GIT` environment variable by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-03T23:21:23Z"
        },
        {
          "user": "fanquake",
          "body": "So this is fixing a CMake regression?\r\nAlso seems like the obvious time to document `BITCOIN_GENBUILD_NO_GIT` (#31999) \r\ncc @whitslack ",
          "created_at": "2025-04-03T23:57:44Z"
        },
        {
          "user": "hebasto",
          "body": "> So this is fixing a CMake regression?\r\n\r\nIf so, could it be demonstrated that something works in v28.1 but is broken in v29.0rc3?",
          "created_at": "2025-04-04T12:46:11Z"
        },
        {
          "user": "hebasto",
          "body": "> > So this is fixing a CMake regression?\r\n> \r\n> If so, could it be demonstrated that something works in v28.1 but is broken in v29.0rc3?\r\n\r\nThe PR's author [mentioned](https://github.com/bitcoin/bitcoin/pull/32217#discussion_r2029437679) only one explicit case where this PR might alter behaviour:\r\n\r\n> If any parent directory is a git repository, but the source directory is not\r\n\r\nAccordingly, I have verified any related behavioural changes in this scenario:\r\n- Creating an empty git repository:\r\n```\r\n$ mkdir test_tarballs\r\n$ cd test_tarballs\r\n$ git init .\r\n$ git commit --allow-empty -m \"Initial commit\"\r\n$ git rev-parse --short=12 HEAD\r\n76e386813b40\r\n```\r\n\r\n- Testing the [v28.1 tarball](https://bitcoincore.org/bin/bitcoin-core-28.1/bitcoin-28.1.tar.gz):\r\n```\r\n$ wget https://bitcoincore.org/bin/bitcoin-core-28.1/bitcoin-28.1.tar.gz\r\n$ tar xf bitcoin-28.1.tar.gz \r\n$ cd bitcoin-28.1\r\n$ ./autogen.sh \r\n$ ./configure \r\n$ make -j $(nproc)\r\n$ cat src/obj/build.h\r\n#define BUILD_GIT_COMMIT \"76e386813b40\"\r\n$ ./src/bitcoind -version | head -1\r\nBitcoin Core version v28.1.0\r\n```\r\n\r\n- Testing the [v29.0rc3 tarball](https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz):\r\n```\r\n$ wget https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz\r\n$ tar xf bitcoin-29.0rc3.tar.gz \r\n$ cd bitcoin-29.0rc3\r\n$ cmake -B build\r\n$ cmake --build build -j $(nproc)\r\n$ cat build/src/bitcoin-build-info.h\r\n#define BUILD_GIT_COMMIT \"76e386813b40\"\r\n$ ./build/bin/bitcoind -version | head -1\r\nBitcoin Core daemon version v29.0.0rc3\r\n```\r\n\r\n- Testing a pre-release untagged commit from the 28.x branch:\r\n```\r\n$ tar xf /home/hebasto/GIT_ARCHIVES/bitcoin-1248d0da2279.tar.gz\r\n$ cd bitcoin-1248d0da2279\r\n$ ./autogen.sh \r\n$ ./configure \r\n$ make -j $(nproc)\r\n$ cat src/obj/build.h\r\n#define BUILD_GIT_COMMIT \"76e386813b40\"\r\nhebasto@TS-P340:~/dev/test_tarballs/bitcoin-1248d0da2279$ ./src/bitcoind -version | head -1\r\nBitcoin Core version v28.99.0-76e386813b40\r\n```\r\n\r\n- Testing a pre-release untagged commit from the 29.x branch:\r\n```\r\n$ tar xf /home/hebasto/GIT_ARCHIVES/bitcoin-8cb6ab0b971a.tar.gz\r\n$ cd bitcoin-8cb6ab0b971a\r\n$ cmake -B build\r\n$ cmake --build build -j $(nproc)\r\n$ cat build/src/bitcoin-build-info.h\r\n#define BUILD_GIT_COMMIT \"76e386813b40\"\r\n$ ./build/bin/bitcoind -version | head -1\r\nBitcoin Core daemon version v28.99.0-76e386813b40\r\n```\r\n\r\nAs demonstrated above, there is no change in behaviour and no indication of a \"CMake regression\".\r\n\r\nMaybe remove this PR from the 29.0 milestone?",
          "created_at": "2025-04-07T12:49:50Z"
        },
        {
          "user": "hebasto",
          "body": "Tested 903fc971ed6b13da7260f5e5a8e3e9e7372b2bd7 on Ubuntu 24.10.\r\n\r\nWhen building from my local Bitcoin Core repository:\r\n- on the master branch @ 8cb6ab0b971a27ba255ad6a48959a8c7b84c00f3:\r\n```\r\n$ cmake --build build -t bitcoin_clientversion\r\n[1/3] Generating bitcoin-build-info.h\r\n$ cat build/src/bitcoin-build-info.h \r\n#define BUILD_GIT_COMMIT \"8cb6ab0b971a\"\r\n```\r\n- this PR:\r\n```\r\n$ cmake --build build -t bitcoin_clientversion\r\n[3/3] Linking CXX static library lib/libbitcoin_clientversion.a\r\n$ cat build/src/bitcoin-build-info.h \r\n// No build information available\r\n```\r\n\r\nThe PR's behaviour is evidently incorrect.",
          "created_at": "2025-04-07T13:13:00Z"
        },
        {
          "user": "luke-jr",
          "body": ">As demonstrated above, there is no change in behaviour and no indication of a \"CMake regression\".\r\n\r\nThe regression occurred in https://github.com/bitcoin/bitcoin/pull/18556 and would have been fixed by #18902\r\n\r\n>Testing the [v29.0rc3 tarball](https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz):\r\n>```\r\n>$ wget https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz\r\n>$ tar xf bitcoin-29.0rc3.tar.gz \r\n>$ cd bitcoin-29.0rc3\r\n>$ cmake -B build\r\n>$ cmake --build build -j $(nproc)\r\n>$ cat build/src/bitcoin-build-info.h\r\n>#define BUILD_GIT_COMMIT \"76e386813b40\"\r\n>$ ./build/bin/bitcoind -version | head -1\r\n>Bitcoin Core daemon version v29.0.0rc3\r\n>```\r\n\r\nv29.0rc3 is not 76e386813b40",
          "created_at": "2025-04-10T01:04:09Z"
        },
        {
          "user": "hebasto",
          "body": "> > As demonstrated above, there is no change in behaviour and no indication of a \"CMake regression\".\r\n> \r\n> The regression occurred in #18556 and would have been fixed by #18902\r\n\r\nSo, it's not caused by the migration from Autotools to CMake.\r\n\r\n> > Testing the [v29.0rc3 tarball](https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz):\r\n> > ```\r\n> > $ wget https://bitcoincore.org/bin/bitcoin-core-29.0/test.rc3/bitcoin-29.0rc3.tar.gz\r\n> > $ tar xf bitcoin-29.0rc3.tar.gz \r\n> > $ cd bitcoin-29.0rc3\r\n> > $ cmake -B build\r\n> > $ cmake --build build -j $(nproc)\r\n> > $ cat build/src/bitcoin-build-info.h\r\n> > #define BUILD_GIT_COMMIT \"76e386813b40\"\r\n> > $ ./build/bin/bitcoind -version | head -1\r\n> > Bitcoin Core daemon version v29.0.0rc3\r\n> > ```\r\n> \r\n> v29.0rc3 is not 76e386813b40\r\n\r\nSure it is not. Because the build happens within another \"parent\" git repository:\r\n> > If any parent directory is a git repository, but the source directory is not\r\n> \r\n> Accordingly, I have verified any related behavioural changes in this scenario:\r\n> \r\n>    * Creating an empty git repository:\r\n> \r\n> \r\n> ```\r\n> $ mkdir test_tarballs\r\n> $ cd test_tarballs\r\n> $ git init .\r\n> $ git commit --allow-empty -m \"Initial commit\"\r\n> $ git rev-parse --short=12 HEAD\r\n> 76e386813b40\r\n> ```\r\n",
          "created_at": "2025-04-10T09:44:58Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 247e9de62228bd1cb0e2fb5e3bd9a906b3056167<br>(master) | commit f52244298d0fb27e0157d02f3cb880a1e8ae1546<br>(pull/32217/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`22a79eff8e36e1bf...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-aarch64-linux-gnu-debug.tar.gz) | [`b3e21214b511ef7a...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`cbb887b1068cbcb2...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-aarch64-linux-gnu.tar.gz) | [`e8825e5f7d37959d...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`d5b1583e9e776bdb...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-arm-linux-gnueabihf-debug.tar.gz) | [`a03c7376d91b5972...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`067ec12478462110...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-arm-linux-gnueabihf.tar.gz) | [`aeb3332f0a3bca1e...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`dd98a2df7a886aa2...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-arm64-apple-darwin-codesigning.tar.gz) | [`1af1a7d882467be5...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`578d53467f1964e4...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-arm64-apple-darwin-unsigned.tar.gz) | [`4719ea1916451108...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`f7324f4fbf04094a...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-arm64-apple-darwin-unsigned.zip) | [`9c733079ec211594...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`4d1e9e946f74f4de...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-powerpc64-linux-gnu-debug.tar.gz) | [`4c96544b8853269a...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`95073776ba9e496f...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-powerpc64-linux-gnu.tar.gz) | [`20d63349f5dd76f1...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`b9aa3f6b161a9a22...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-riscv64-linux-gnu-debug.tar.gz) | [`0ffe8d08b0910dd9...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`4359303e00e93dd6...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-riscv64-linux-gnu.tar.gz) | [`cbb67519840ea3eb...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`796e72140cca465e...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-x86_64-apple-darwin-codesigning.tar.gz) | [`ae967d56916991b6...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`cd0a846310165114...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-x86_64-apple-darwin-unsigned.tar.gz) | [`29831386b8bba237...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`3f81d9630b346346...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-x86_64-apple-darwin-unsigned.zip) | [`0a7a72f25c12f5a4...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`b9600b433f60e512...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-x86_64-linux-gnu-debug.tar.gz) | [`73ac0808ca92b7fe...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`051c8ae1c97f699f...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228-x86_64-linux-gnu.tar.gz) | [`a80382fcd4330a85...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`a4f9396cd4278eca...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/bitcoin-247e9de62228.tar.gz) | [`bc990272f05a6cc4...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/bitcoin-f52244298d0f.tar.gz) |\n| SHA256SUMS.part | [`e34ac75fc6f95298...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/SHA256SUMS.part) | [`56c8d00bb5600f7d...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/SHA256SUMS.part) |\n| guix_build.log | [`29922df57c21719c...`](https://drahtbot.space/guix/monotree/247e9de62228bd1cb0e2fb5e3bd9a906b3056167/guix_build.log) | [`50d73edb3996ffee...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/guix_build.log) |\n| guix_build.log.diff |  | [`511d4dc5d4512587...`](https://drahtbot.space/guix/monotree/f52244298d0fb27e0157d02f3cb880a1e8ae1546/guix_build.log.diff) |\n\n",
          "created_at": "2025-04-18T15:12:08Z"
        },
        {
          "user": "hebasto",
          "body": "> Also seems like the obvious time to document `BITCOIN_GENBUILD_NO_GIT` (#31999)\r\n\r\nThis is still unaddressed.",
          "created_at": "2025-10-13T16:44:33Z"
        }
      ]
    },
    {
      "number": 32216,
      "title": "bench: Match ConnectBlock tx output counts",
      "body": "There turned out to be a mismatch in the tx output counts which caused 'ConnectBlockMixedEcdsaSchnorr' benchmark to run slower than 'ConnectBlockAllEcdsa' and 'ConnectBlockAllSchnorr'. This commit makes the tx output counts uniform across all benchmarks.\r\n\r\nThis commit also renames the 'taproot_tx' variable to 'tx' to reflect that this variable represents a general tx and not just a taproot tx.",
      "state": "closed",
      "user": "monlovesmango",
      "created_at": "2025-04-03T17:37:33Z",
      "updated_at": "2025-04-08T21:15:08Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32216",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32216.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32216#issuecomment-2777327472), [janb84](https://github.com/bitcoin/bitcoin/pull/32216#pullrequestreview-2741942581), [josibake](https://github.com/bitcoin/bitcoin/pull/32216#pullrequestreview-2742144571), [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/32216#issuecomment-2778719736) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-03T17:37:36Z"
        },
        {
          "user": "monlovesmango",
          "body": "Background for this PR can be found in https://github.com/bitcoin/bitcoin/pull/31689.\r\n\r\nHappy to remove the renaming of `taproot_tx` if reviewers feel that it is inappropriate.",
          "created_at": "2025-04-03T17:40:13Z"
        },
        {
          "user": "monlovesmango",
          "body": "> My output is less verbose compared to the outputs by other reviewers for some reason.\r\n\r\nThis is how it looks for me too when I run it on my mac, not sure why.",
          "created_at": "2025-04-03T21:47:00Z"
        },
        {
          "user": "davidgumberg",
          "body": "Tested ACK 924f25f6fc766cb89a23fb\r\n\r\nNice find! Given that, as I understand, part of the motivation for this benchmark's introduction (#31689) is to be able to compare `ConnectBlock()` performance with and without schnorr batch validation (#29491), and part of the motivation for using Schnorr signatures in the first place is that they're susceptible to batch validation, it seems to me that it would be useful for these three benchmarks to be as like as possible, so that they can be compared, and this PR makes that the case in my testing.\r\n\r\nRecent PR review club where this was discussed: (https://bitcoincore.reviews/31689#l-60). \r\n\r\n<details>\r\n\r\n<summary>\r\n\r\n## Benchmark Results \r\n\r\n</summary>\r\n\r\n### master (c66f7dab33fb08dc323)\r\n\r\n```console\r\n$ git checkout --detach 924f25f~1\r\n$ cmake -B build -DBUILD_BENCH=ON && cmake --build build -j $(nproc)\r\n$ ./build/bin/bench_bitcoin --filter=ConnectBlock.* --min-time=5000\r\n```\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|       46,549,571.00 |               21.48 |    1.2% |  672,393,930.64 |  161,287,432.73 |  4.169 |  15,122,140.18 |    1.7% |      5.46 | `ConnectBlockAllEcdsa`\r\n|       47,199,469.60 |               21.19 |    0.2% |  680,249,499.27 |  164,132,414.09 |  4.145 |  15,120,173.64 |    1.7% |      5.47 | `ConnectBlockAllSchnorr`\r\n|       59,705,754.22 |               16.75 |    0.7% |  839,091,363.50 |  207,657,368.33 |  4.041 |  18,945,901.12 |    1.8% |      5.55 | `ConnectBlockMixedEcdsaSchnorr`\r\n\r\n### pr branch (924f25f6fc766cb)\r\n\r\n\r\n```console\r\n$ git checkout --detach 924f25f\r\n$ cmake -B build -DBUILD_BENCH=ON && cmake --build build -j $(nproc)\r\n$ ./build/bin/bench_bitcoin --filter=ConnectBlock.* --min-time=5000\r\n```\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|       58,425,229.87 |               17.12 |    0.6% |  840,316,339.12 |  203,096,705.00 |  4.138 |  18,694,845.12 |    1.7% |      5.45 | `ConnectBlockAllEcdsa`\r\n|       59,756,200.89 |               16.73 |    0.6% |  846,439,909.12 |  207,679,122.78 |  4.076 |  18,670,295.75 |    1.8% |      5.52 | `ConnectBlockAllSchnorr`\r\n|       59,767,476.56 |               16.73 |    0.6% |  840,513,726.44 |  207,604,950.00 |  4.049 |  18,968,510.88 |    1.8% |      5.58 | `ConnectBlockMixedEcdsaSchnorr`\r\n\r\n</details>\r\n\r\n----\r\n\r\n> My output is less verbose compared to the outputs by other reviewers for some reason.\r\n\r\nThis is because nanobench provides some extra stats via linux's `perf_events` subsystem and omits them when they're not available:\r\n\r\n> CPU statistics like instructions, cycles, branches, branch misses are only available on Linux, through [perf events](http://web.eece.maine.edu/~vweaver/projects/perf_events/). On some systems you might need to [change permissions](https://www.kernel.org/doc/html/latest/admin-guide/perf-security.html#unprivileged-users) through perf_event_paranoid or use ACL.\r\n\r\nhttps://github.com/martinus/nanobench/blob/e4327893194f06928012eb81cabc606c4e4791ac/src/docs/tutorial.rst?plain=1#L79-L84\r\n",
          "created_at": "2025-04-04T01:19:33Z"
        },
        {
          "user": "Prabhat1308",
          "body": "reACK [`924f25f`](https://github.com/bitcoin/bitcoin/pull/32216/commits/924f25f6fc766cb89a23fb1a6ad632947742da9f)",
          "created_at": "2025-04-04T13:21:00Z"
        },
        {
          "user": "monlovesmango",
          "body": "Hey @l0rinc ,\r\n\r\nI appreciate you reiterating this feedback! I actually tend to agree with you, however do not quite agree with the strategy laid out in your suggested changes, and my lack of experience makes me hesitant to make any sweeping changes.\r\n\r\nFor your suggested changes, in order for the metric to be tx/s I believe the batch size would actually need to be the number of txs and not the outputs.size(). Additionally, I actually think the metric we would really want is tx outputs/s, as switching to tx/s wouldn't actually resolve the issue this pr focused on. From a technical perspective it would be inaccurate to say that this benchmark is actually measuring tx outputs/s just by scaling the batch because what it actually would bench is just connectblock divided by the number of tx outputs which doesn't change the metric in a meaningful way.\r\n\r\nMore broadly, for a \"ConnectBlock\" benchmark my assumption is that this could potentially be used to benchmark other aspects of connectblock functionality, not just signature validation, in which case tx outputs/s would not really be an appropriate metric. I do think it might be valuable to have a separate benchmark that is more focused at the tx output granularity level.\r\n\r\n> I think it would clarify things if we defined more precisely what we're measuring.\r\n\r\nIn my view, block/s is the most precise definition of what we're measuring and tx/s (or tx output/x) would be an obfuscation.",
          "created_at": "2025-04-04T16:46:51Z"
        },
        {
          "user": "l0rinc",
          "body": "> In my view, block/s is the most precise definition of what we're measuring and tx/s (or tx output/x) would be an obfuscation.\r\n\r\nIsn't the point of this PR to change what blocks/s means? That's why this PR exists, since a block doesn't really narrow down what we're measuring. We might as well call it `thing/s`.\r\n\r\n> the metric we would really want is tx outputs/s\r\n\r\nI think that's basically what I wrote (you can scale it to actual transaction outputs, but since the transaction count is the same for all, it's just a multiplier, won't change the ratios)\r\n\r\nWe can also write:\r\n```C++\r\nbench.batch(test_block.vtx.size() * outputs.size()).unit(\"txo\").run([&] {\r\n```\r\nor even\r\n```C++\r\nbench.batch(std::accumulate(test_block.vtx.begin(), test_block.vtx.end(), size_t{0}, [](size_t sum, const auto& tx) { return sum + tx->vout.size(); })).unit(\"txo\").run([&] {\r\n```\r\nif you think that's more accurate, but calling it \"block/s\" and than changing the value and still calling it \"block/s\" is not the sign of a reliable benchmark.\r\n\r\nWill let you decide, I basically already said these in the other PR as well.",
          "created_at": "2025-04-04T20:34:05Z"
        },
        {
          "user": "monlovesmango",
          "body": ">Isn't the point of this PR to change what blocks/s means?\r\n\r\nThe point of this PR is simply to make the existing benchmark code more consistent across benchmarks, not to change anything in the design of the benchmark that has already been merged. As I said before, I do not have the experience nor expertise to tackle something like that and am not convinced that just changing the unit of the benchmark is meaningful.",
          "created_at": "2025-04-04T23:35:54Z"
        }
      ]
    },
    {
      "number": 32215,
      "title": "depends: Fix cross-compiling on macOS",
      "body": "This PR:\r\n1. Specifies Objective C/C++ compilers for `native_qt` package.\r\n2. Removes the `-t` option, which is incompatible with `mv` on macOS.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32208.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-03T14:13:24Z",
      "updated_at": "2025-04-25T09:22:48Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32215",
      "labels": [
        "macOS",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32215.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32215#pullrequestreview-2786676891), [fanquake](https://github.com/bitcoin/bitcoin/pull/32215#pullrequestreview-2793452071) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-04-03T14:13:27Z"
        },
        {
          "user": "janb84",
          "body": "I'm trying to test this PR, but having trouble verifying it. Am I correct to conclude that the fix is really mac only ( not nix-shell on macos? or GUIX cross-compile ? ) \r\n\r\nCan confirm that the `mv -t` option is not supported on MacOS .",
          "created_at": "2025-04-22T12:31:20Z"
        },
        {
          "user": "hebasto",
          "body": "> I'm trying to test this PR, but having trouble verifying it. Am I correct to conclude that the fix is really mac only ( not nix-shell on macos? or GUIX cross-compile ? )\r\n> \r\n> Can confirm that the `mv -t` option is not supported on MacOS .\r\n\r\nThis PR is specific to cases like https://github.com/bitcoin/bitcoin/issues/32208.",
          "created_at": "2025-04-22T12:58:21Z"
        },
        {
          "user": "janb84",
          "body": "> > I'm trying to test this PR, but having trouble verifying it. Am I correct to conclude that the fix is really mac only ( not nix-shell on macos? or GUIX cross-compile ? )\r\n> > Can confirm that the `mv -t` option is not supported on MacOS .\r\n> \r\n> This PR is specific to cases like #32208.\r\n\r\nHave installed homebrew and have successfully recreated the error as #32208. \r\nThis commit will resolve the error from #32208 but I do get an different error back, not sure if related to `Specifies Objective C/C++ compilers for native_qt package.` that's  fixed in this PR (or unrelated) \r\n\r\n<details>\r\nNote: Using static linking will disable the use of dynamically loaded plugins. Make sure to import all needed static plugins, or compile needed modules into the library.\r\n\r\nWARNING: QDoc will not be compiled, probably because clang's C and C++ libraries could not be located. This means that you cannot build the Qt documentation.\r\nYou may need to set CMAKE_PREFIX_PATH or LLVM_INSTALL_DIR to the location of your llvm installation.\r\nOther than clang's libraries, you may need to install another package, such as clang itself, to provide the ClangConfig.cmake file needed to detect your libraries. Once this\r\nfile is in place, the configure script may be able to detect your system-installed libraries without further environment variables.\r\nOn macOS, you can use Homebrew's llvm package.\r\nYou will also need to set the FEATURE_clang CMake variable to ON to re-evaluate this check.\r\nWARNING: QDoc will not be compiled because the QmlPrivate library wasn't found.\r\nWARNING: Clang-based lupdate parser will not be available. Suitable LLVM and Clang C++ libraries have not been found.\r\nYou will need to set the FEATURE_clangcpp CMake variable to ON to re-evaluate this check.\r\nWARNING: Qt Assistant will not be compiled because it requires Qt Network.\r\nWARNING: Qt Designer will not be compiled because it requires Qt Network.\r\n\r\nERROR: detected a std::atomic implementation that fails for function pointers.  Please apply the patch corresponding to your Standard Library vendor, found in qtbase/config.tests/atomicfptr\r\n\r\nCMake Error at qtbase/cmake/QtBuildInformation.cmake:208 (message):\r\n  Check the configuration messages for an error that has occurred.\r\nCall Stack (most recent call first):\r\n  qtbase/cmake/QtBuildInformation.cmake:39 (qt_configure_print_summary)\r\n  qtbase/cmake/QtBaseTopLevelHelpers.cmake:84 (qt_print_feature_summary)\r\n  qtbase/cmake/QtBaseTopLevelHelpers.cmake:72 (qt_internal_print_top_level_info)\r\n  CMakeLists.txt:113 (qt_internal_top_level_end)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nCMake Error at qtbase/cmake/QtProcessConfigureArgs.cmake:1077 (message):\r\n  CMake exited with code 1.\r\n</details>  ",
          "created_at": "2025-04-22T20:49:54Z"
        },
        {
          "user": "hebasto",
          "body": "@janb84 \r\n> ... but I do get an different error back\r\n\r\nPlease provide more details about your build environment (OS version, architecture, compiler version etc) and exact steps to reproduce the error.",
          "created_at": "2025-04-22T21:55:33Z"
        },
        {
          "user": "janb84",
          "body": "> @janb84\r\n> \r\n> > ... but I do get an different error back\r\n> \r\n> Please provide more details about your build environment (OS version, architecture, compiler version etc) and exact steps to reproduce the error.\r\n\r\nOf course, here you go, ill will also try to figure it out also but please let me know if you need any other details. \r\n \r\nBuild env:\r\nMacOS 15.4.1, M1 \r\nQT 6.9.0\r\nGNU Make 4.4.1\r\nTried both Apple clang version 17.0.0 (clang-1700.0.13.3) & Homebrew clang version 20.1.3\r\nSDK 15.4 \r\n\r\nSteps to reproduce:\r\n- Clean previous builds artefacts  \r\n- execute from bitcoin folder `make -C depends -j8 HOST=x86_64-apple-darwin`\r\n\r\nEDIT fixed builds now, needed a clean install of xcode.  Related to https://github.com/bitcoin/bitcoin/issues/31579",
          "created_at": "2025-04-23T08:06:26Z"
        }
      ]
    },
    {
      "number": 32214,
      "title": "test: Remove fragile and ancient release 0.17 wallet test",
      "body": "The test checks that the 0.17 wallet rejects wallet files created in \"the future\".\r\n\r\nThis is nice, and good to know. However,\r\n\r\n* The 0.17 release is ancient and should be unused outside of tests, especially to load future wallets.\r\n* The test intermittently fails, due to ancient RPC server bugs, that were fixed in the meantime. [1]\r\n* Albeit they are not identical, the 0.18 release is still checked in this test, so any theoretical bug that would be caught by 0.17 is hopefully still caught by 0.18 as well.\r\n\r\nSo fix all issues by removing the test case.\r\n\r\n\r\n\r\n[1] For example from https://api.cirrus-ci.com/v1/task/6161588714995712/logs/ci.log:\r\n\r\n```\r\n190/321 - \u001b[1mwallet_backwards_compatibility.py --descriptors\u001b[0m failed, Duration: 23 s\r\n[17:21:40.700] \r\n[17:21:40.700] \u001b[1mstdout:\r\n[17:21:40.700] \u001b[0m2025-04-02T21:21:16.575000Z TestFramework (INFO): PRNG seed is: 5772716217847090743\r\n[17:21:40.700] 2025-04-02T21:21:16.580000Z TestFramework (INFO): Initializing test directory /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250402_210134/wallet_backwards_compatibility_134\r\n[17:21:40.700] 2025-04-02T21:21:26.378000Z TestFramework (INFO): Test wallet backwards compatibility...\r\n[17:21:40.700] 2025-04-02T21:21:33.191000Z TestFramework (INFO): Testing 0.19 addmultisigaddress case (#18075)\r\n[17:21:40.700] 2025-04-02T21:21:33.637000Z TestFramework (INFO): Test that a wallet made on master can be opened on:\r\n[17:21:40.700] 2025-04-02T21:21:33.637000Z TestFramework (INFO): - 250000\r\n[17:21:40.700] 2025-04-02T21:21:34.055000Z TestFramework (INFO): - 240001\r\n[17:21:40.700] 2025-04-02T21:21:34.435000Z TestFramework (INFO): - 230000\r\n[17:21:40.700] 2025-04-02T21:21:34.858000Z TestFramework (INFO): - 220000\r\n[17:21:40.700] 2025-04-02T21:21:35.614000Z TestFramework (INFO): - 210000\r\n[17:21:40.700] 2025-04-02T21:21:35.707000Z TestFramework (INFO): Test descriptor wallet incompatibility on:\r\n[17:21:40.700] 2025-04-02T21:21:35.707000Z TestFramework (INFO): - 200100\r\n[17:21:40.700] 2025-04-02T21:21:35.878000Z TestFramework (INFO): - 190100\r\n[17:21:40.700] 2025-04-02T21:21:36.021000Z TestFramework (INFO): - 180100\r\n[17:21:40.700] 2025-04-02T21:21:36.319000Z TestFramework (INFO): Test descriptor wallet incompatibility with 0.17\r\n[17:21:40.700] 2025-04-02T21:21:37.328000Z TestFramework (INFO): Test that 0.21 cannot open wallet containing tr() descriptors\r\n[17:21:40.700] 2025-04-02T21:21:37.356000Z TestFramework (INFO): Test that a wallet can upgrade to and downgrade from master, from:\r\n[17:21:40.700] 2025-04-02T21:21:37.361000Z TestFramework (INFO): - 250000\r\n[17:21:40.700] 2025-04-02T21:21:37.665000Z TestFramework (INFO): - 240001\r\n[17:21:40.700] 2025-04-02T21:21:37.970000Z TestFramework (INFO): - 230000\r\n[17:21:40.700] 2025-04-02T21:21:38.439000Z TestFramework (INFO): - 220000\r\n[17:21:40.700] 2025-04-02T21:21:38.793000Z TestFramework (INFO): - 210000\r\n[17:21:40.700] 2025-04-02T21:21:39.470000Z TestFramework (INFO): Stopping nodes\r\n[17:21:40.700] \r\n[17:21:40.700] \r\n[17:21:40.700] \u001b[1mstderr:\r\n[17:21:40.700] \u001b[0mTraceback (most recent call last):\r\n[17:21:40.700]   File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/wallet_backwards_compatibility.py\", line 389, in <module>\r\n[17:21:40.700]     BackwardsCompatibilityTest(__file__).main()\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 206, in main\r\n[17:21:40.700]     exit_code = self.shutdown()\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 379, in shutdown\r\n[17:21:40.700]     self.stop_nodes()\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 643, in stop_nodes\r\n[17:21:40.700]     node.stop_node(wait=wait, wait_until_stopped=False)\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/test_node.py\", line 397, in stop_node\r\n[17:21:40.700]     self.stop()\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n[17:21:40.700]     return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 132, in __call__\r\n[17:21:40.700]     response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 106, in _request\r\n[17:21:40.700]     return self._get_response()\r\n[17:21:40.700]   File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 169, in _get_response\r\n[17:21:40.700]     http_response = self.__conn.getresponse()\r\n[17:21:40.700]   File \"/usr/lib/python3.10/http/client.py\", line 1375, in getresponse\r\n[17:21:40.700]     response.begin()\r\n[17:21:40.700]   File \"/usr/lib/python3.10/http/client.py\", line 318, in begin\r\n[17:21:40.700]     version, status, reason = self._read_status()\r\n[17:21:40.700]   File \"/usr/lib/python3.10/http/client.py\", line 287, in _read_status\r\n[17:21:40.700]     raise RemoteDisconnected(\"Remote end closed connection without\"\r\n[17:21:40.700] http.client.RemoteDisconnected: Remote end closed connection without response\r\n[17:21:40.700] [node 10] Cleaning up leftover process\r\n[17:21:40.700] [node 9] Cleaning up leftover process\r\n[17:21:40.700] [node 8] Cleaning up leftover process\r\n[17:21:40.700] [node 7] Cleaning up leftover process\r\n[17:21:40.700] [node 6] Cleaning up leftover process\r\n[17:21:40.700] [node 5] Cleaning up leftover process\r\n[17:21:40.700] [node 4] Cleaning up leftover process\r\n[17:21:40.700] [node 3] Cleaning up leftover process\r\n[17:21:40.700] [node 2] Cleaning up leftover process\r\n[17:21:40.700] [node 1] Cleaning up leftover process\r\n[17:21:40.700] [node 0] Cleaning up leftover process",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-03T10:53:22Z",
      "updated_at": "2025-04-09T06:23:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32214",
      "labels": [
        "Wallet",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32214.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32214#pullrequestreview-2739695996), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32214#pullrequestreview-2739754378), [laanwj](https://github.com/bitcoin/bitcoin/pull/32214#issuecomment-2775954401), [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/32214#pullrequestreview-2743046763) |\n| Stale ACK | [musaHaruna](https://github.com/bitcoin/bitcoin/pull/32214#pullrequestreview-2746974544) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-03T10:53:25Z"
        },
        {
          "user": "janb84",
          "body": "Are the lines 346-356 then still needed ? since we are only testing only from 18+ \r\n\r\n``` C\r\n            if self.major_version_less_than(node, 17):\r\n                # loadwallet is only available in 0.17+\r\n                shutil.copyfile(\r\n                    down_backup_path,\r\n                    node.wallets_path / down_wallet_name\r\n                )\r\n                self.start_node(node.index, extra_args=[f\"-wallet={down_wallet_name}\"])\r\n                wallet_res = node.get_wallet_rpc(down_wallet_name)\r\n                info = wallet_res.validateaddress(address)\r\n                assert_equal(info, addr_info)\r\n ```",
          "created_at": "2025-04-03T11:24:06Z"
        },
        {
          "user": "maflcko",
          "body": "Good catch. I went through the test and removed all dead code now.",
          "created_at": "2025-04-03T12:04:27Z"
        },
        {
          "user": "laanwj",
          "body": "Code review ACK fac978fb213fbd6668194d8b9810ddd10f8a7323\r\n\r\nBecause i wondered i also checked that this test (all the way back to 0.17) still exists after #31250, it does.",
          "created_at": "2025-04-03T14:19:56Z"
        }
      ]
    },
    {
      "number": 32213,
      "title": "msvc: Update vcpkg manifest",
      "body": "This PR:\r\n\r\n1. Updates the vcpkg manifest baseline from the [2024.09.30 Release](https://github.com/microsoft/vcpkg/releases/tag/2024.09.30) to the [2025.03.19 Release](https://github.com/microsoft/vcpkg/releases/tag/2025.03.19), with the following package changes:\r\n\r\n     - boost: 1.85.0#1,2 --> 1.87.0\r\n     - qtbase: 6.7.2#3 -> 6.8.2#1\r\n     - qttools: 6.7.2#1 -> 6.8.2\r\n     - sqlite3: 3.46.1 --> 3.49.1\r\n\r\nThe previous update was made in https://github.com/bitcoin/bitcoin/pull/31186.\r\n\r\n3. Explicitly specifies required features for the `qtbase` package, which makes vcpkg skip unused features such as `dnslookup`, `openssl`, etc.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-03T09:28:28Z",
      "updated_at": "2025-04-19T10:12:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32213",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32213.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32213#pullrequestreview-2770024608) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-04-03T09:28:31Z"
        },
        {
          "user": "hebasto",
          "body": "cc @davidgumberg @hodlinator @sipsorcery ",
          "created_at": "2025-04-14T09:45:44Z"
        }
      ]
    },
    {
      "number": 32212,
      "title": "test: Remove confusing and failing system time test",
      "body": "This was just added as a sanity check in fa013664ae23d0682a195b9bded85bc19c99536e by myself.\r\n\r\nHowever, the test uses system time, so it may obviously (albeit rarely) fail.\r\n\r\nFix it by removing it.\r\n\r\nCan be tested by running two bash loops at the same time:\r\n\r\n`while ( ./bld-cmake/bin/test_bitcoin -t util_tests/util_time_GetTime ) ; do true ; done`\r\n\r\n`while ( date -s \"$(date -d 'now + 0.015 seconds' '+%Y-%m-%d %H:%M:%S.%3N')\" && date -s \"$(date -d 'now - 0.015 seconds' '+%Y-%m-%d %H:%M:%S.%3N')\" ) ; do true ; done`\r\n\r\nEventually, it will fail:\r\n\r\n```\r\ntest/util_tests.cpp(595): error: in \"util_tests/util_time_GetTime\": check ms_0 < GetTime<std::chrono::milliseconds>() has failed\r\ntest/util_tests.cpp(596): error: in \"util_tests/util_time_GetTime\": check us_0 < GetTime<std::chrono::microseconds>() has failed\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-03T09:18:57Z",
      "updated_at": "2025-04-07T15:33:06Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32212",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32212.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32212#pullrequestreview-2741998062), [mabu44](https://github.com/bitcoin/bitcoin/pull/32212#pullrequestreview-2745195779), [hebasto](https://github.com/bitcoin/bitcoin/pull/32212#pullrequestreview-2746379401) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-03T09:19:00Z"
        },
        {
          "user": "janb84",
          "body": "I understand why the test of the imperfect system time was removed. However, now that we‚Äôre aware of these imperfections, I‚Äôm curious if they might have any downstream effects on the benchmarking process. \r\nShould we consider adding a warning about the precision, or am I drawing the wrong conclusions about the found error?\"",
          "created_at": "2025-04-03T18:42:38Z"
        },
        {
          "user": "maflcko",
          "body": "> I‚Äôm curious if they might have any downstream effects on the benchmarking process\r\n\r\nI don't think (and I hope) that system time is not used while benchmarking. Also, it is not the system time that is wrong, it is the test. It is expected for the system time to be adjustable. For example, if the users adjusts the time, or if the system itself decides to adjust it after a clock drift.\r\n\r\nLet me know if there are any other questions about the code changes, or the pull description, and if it can be improved.",
          "created_at": "2025-04-04T06:19:47Z"
        }
      ]
    },
    {
      "number": 32211,
      "title": "doc: Amend Qt 6 dependency packages for Ubuntu",
      "body": "On older systems, such as Ubuntu 22.04, `qt6-tools-dev-tools` and `libgl-dev` are not treated as dependencies of `qt6-tools-dev` and `qt6-base-dev`, respectively. This PR explicitly lists them in the installation documentation.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32210.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-03T09:12:24Z",
      "updated_at": "2025-04-03T10:54:53Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32211",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32211.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/32211#pullrequestreview-2739165226), [maflcko](https://github.com/bitcoin/bitcoin/pull/32211#issuecomment-2775118344) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-03T09:12:27Z"
        },
        {
          "user": "laanwj",
          "body": "Seems fine to add these. If more recent versions do have the dependencies set correctly, we'll want to remove them again when Ubuntu 22.04 becomes EOL (Apr 2027).",
          "created_at": "2025-04-03T09:41:56Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 2e751f559ac8c76655c14ce3825e1b0bdf81da98\r\n\r\nThe following passes for me:\r\n\r\n`export DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  libdb++-dev libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev qt6-tools-dev-tools libgl-dev     -y   &&  cmake -B ./bld-cmake -DBUILD_GUI=ON -DBUILD_FUZZ_BINARY=ON -DBUILD_BENCH=ON -DWITH_ZMQ=ON                             && cmake --build ./bld-cmake --parallel  $(nproc)`",
          "created_at": "2025-04-03T09:45:56Z"
        }
      ]
    },
    {
      "number": 32209,
      "title": "test: Preserve llvm profile path",
      "body": "While generating `profraw` for fuzz tests using steps in [PR 32206](https://github.com/bitcoin/bitcoin/pull/32206) , the profraw was not being built at the desired location and only one `default.profraw` was being created which was being overwritten for multiple fuzz targets. This PR fixes that.",
      "state": "closed",
      "user": "Prabhat1308",
      "created_at": "2025-04-03T06:48:48Z",
      "updated_at": "2025-04-04T09:41:31Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32209",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32209.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32209#issuecomment-2776474269), [mabu44](https://github.com/bitcoin/bitcoin/pull/32209#pullrequestreview-2740897194) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-03T06:48:52Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/39897352535</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-03T06:52:33Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 9dc3862f67a0f2a5feb55abc325d1ce760119160",
          "created_at": "2025-04-03T15:29:18Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/39929972727</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-03T15:32:46Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK c5a7ffd1e8ccae12e034face4293bc8d5a6556b7",
          "created_at": "2025-04-03T17:25:00Z"
        },
        {
          "user": "maflcko",
          "body": "rfm, or does it need more review by other fuzz people?",
          "created_at": "2025-04-04T07:21:41Z"
        },
        {
          "user": "fanquake",
          "body": "cc @dergoegge @marcofleon ",
          "created_at": "2025-04-04T07:40:41Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32210,
      "title": "build: Qt build broken on Ubuntu 22.04",
      "body": "Reported here https://github.com/bitcoin/bitcoin/pull/30997#discussion_r2026452038. Looks like `qt6-tools-dev-tools` is missing from the install docs. However installing that still results in configure failing:\n```bash\ncmake -B build -DBUILD_GUI=ON\n<snip>\n-- Could NOT find OpenGL (missing: OPENGL_INCLUDE_DIR) \n-- Could NOT find WrapOpenGL (missing: WrapOpenGL_FOUND) \nCMake Warning at /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Gui/Qt6GuiConfig.cmake\n\n  but it set Qt6Gui_FOUND to FALSE so package \"Qt6Gui\" is considered to be\n  NOT FOUND.  Reason given by package:\n\n  Qt6Gui could not be found because dependency WrapOpenGL could not be found.\n\nCall Stack (most recent call first):\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\n-- Could NOT find OpenGL (missing: OPENGL_INCLUDE_DIR) \n-- Could NOT find WrapOpenGL (missing: WrapOpenGL_FOUND) \nCMake Warning at /usr/share/cmake-3.22/Modules/CMakeFindDependencyMacro.cmake:47 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Gui/Qt6GuiConfig.cmake\n\n  but it set Qt6Gui_FOUND to FALSE so package \"Qt6Gui\" is considered to be\n  NOT FOUND.  Reason given by package:\n\n  Qt6Gui could not be found because dependency WrapOpenGL could not be found.\n\nCall Stack (most recent call first):\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6/QtPublicDependencyHelpers.cmake:14 (find_dependency)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsDependencies.cmake:96 (_qt_internal_find_dependencies)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsConfig.cmake:50 (include)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package)\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\nCMake Warning at /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsConfig.cmake\n\n  but it set Qt6Widgets_FOUND to FALSE so package \"Qt6Widgets\" is considered\n  to be NOT FOUND.  Reason given by package:\n\n  Qt6Widgets could not be found because dependency Qt6Gui could not be found.\n\nCall Stack (most recent call first):\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\nCMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt6LinguistTools/Qt6LinguistToolsTargets.cmake:131 (message):\n  The imported target \"Qt6::lprodump\" references the file\n\n     \"/usr/lib/qt6/libexec/lprodump\"\n\n  but this file does not exist.  Possible reasons include:\n\n  * The file was deleted, renamed, or moved to another location.\n\n  * An install or uninstall procedure did not complete successfully.\n\n  * The installation package was faulty and contained\n\n     \"/usr/lib/x86_64-linux-gnu/cmake/Qt6LinguistTools/Qt6LinguistToolsTargets.cmake\"\n\n  but not all the files it references.\n\nCall Stack (most recent call first):\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6LinguistTools/Qt6LinguistToolsConfig.cmake:47 (include)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package)\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\n```\n\n```bash\n# apt install qt6-tools-dev-tools\ncmake -B build -DBUILD_GUI=ON\n<snip>\n-- Could NOT find OpenGL (missing: OPENGL_INCLUDE_DIR) \n-- Could NOT find WrapOpenGL (missing: WrapOpenGL_FOUND) \nCMake Warning at /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Gui/Qt6GuiConfig.cmake\n\n  but it set Qt6Gui_FOUND to FALSE so package \"Qt6Gui\" is considered to be\n  NOT FOUND.  Reason given by package:\n\n  Qt6Gui could not be found because dependency WrapOpenGL could not be found.\n\nCall Stack (most recent call first):\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\n-- Could NOT find OpenGL (missing: OPENGL_INCLUDE_DIR) \n-- Could NOT find WrapOpenGL (missing: WrapOpenGL_FOUND) \nCMake Warning at /usr/share/cmake-3.22/Modules/CMakeFindDependencyMacro.cmake:47 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Gui/Qt6GuiConfig.cmake\n\n  but it set Qt6Gui_FOUND to FALSE so package \"Qt6Gui\" is considered to be\n  NOT FOUND.  Reason given by package:\n\n  Qt6Gui could not be found because dependency WrapOpenGL could not be found.\n\nCall Stack (most recent call first):\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6/QtPublicDependencyHelpers.cmake:14 (find_dependency)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsDependencies.cmake:96 (_qt_internal_find_dependencies)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsConfig.cmake:50 (include)\n  /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package)\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\nCMake Warning at /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake:219 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsConfig.cmake\n\n  but it set Qt6Widgets_FOUND to FALSE so package \"Qt6Widgets\" is considered\n  to be NOT FOUND.  Reason given by package:\n\n  Qt6Widgets could not be found because dependency Qt6Gui could not be found.\n\nCall Stack (most recent call first):\n  cmake/module/FindQt.cmake:30 (find_package)\n  CMakeLists.txt:177 (find_package)\n\n\nCMake Warning at cmake/module/FindQt.cmake:30 (find_package):\n  Found package configuration file:\n\n    /usr/lib/x86_64-linux-gnu/cmake/Qt6/Qt6Config.cmake\n\n  but it set Qt6_FOUND to FALSE so package \"Qt6\" is considered to be NOT\n  FOUND.  Reason given by package:\n\n  Failed to find Qt component \"Gui\".\n\n  Expected Config file at\n  \"/usr/lib/x86_64-linux-gnu/cmake/Qt6Gui/Qt6GuiConfig.cmake\" exists\n\n  Failed to find Qt component \"Widgets\".\n\n  Expected Config file at\n  \"/usr/lib/x86_64-linux-gnu/cmake/Qt6Widgets/Qt6WidgetsConfig.cmake\" exists\n\n  \n\nCall Stack (most recent call first):\n  CMakeLists.txt:177 (find_package)\n\n\n-- Found Qt: /usr/lib/x86_64-linux-gnu/cmake/Qt6 (found suitable version \"6.2.4\", minimum required is \"6.2\") \n<snip>\n-- Configuring done\nCMake Error at src/qt/CMakeLists.txt:253 (add_executable):\n  Target \"bitcoin-qt\" links to target \"Qt6::Widgets\" but the target was not\n  found.  Perhaps a find_package() call is missing for an IMPORTED target, or\n  an ALIAS target is missing?\n\n\nCMake Error at src/qt/CMakeLists.txt:68 (add_library):\n  Target \"bitcoinqt\" links to target \"Qt6::Widgets\" but the target was not\n  found.  Perhaps a find_package() call is missing for an IMPORTED target, or\n  an ALIAS target is missing?\n\n\nCMake Error at src/qt/test/CMakeLists.txt:7 (add_executable):\n  Target \"test_bitcoin-qt\" links to target \"Qt6::Widgets\" but the target was\n  not found.  Perhaps a find_package() call is missing for an IMPORTED\n  target, or an ALIAS target is missing?\n\n\n-- Generating done\nCMake Generate step failed.  Build files cannot be regenerated correctly.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-03T08:44:01Z",
      "updated_at": "2025-04-03T10:54:35Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32210",
      "labels": [
        "GUI",
        "Build system"
      ]
    },
    {
      "number": 32208,
      "title": "build: cross-compiling  for `x86_64-apple-darwin` from `arm64-apple-darwin` broken",
      "body": "Was broken in https://github.com/bitcoin/bitcoin/pull/30997#issuecomment-2772450098:\n```bash\nmake -C depends -j13 HOST=x86_64-apple-darwin\ngmake: Entering directory '/Users/bitcoin/depends'\nExtracting native_qt...\n/Users/bitcoin/depends/sources/qtbase-everywhere-src-6.7.3.tar.xz: OK\n/Users/bitcoin/depends/sources/qttranslations-everywhere-src-6.7.3.tar.xz: OK\n/Users/bitcoin/depends/sources/qttools-everywhere-src-6.7.3.tar.xz: OK\n/Users/bitcoin/depends/sources/CMakeLists.txt-6.7.3: OK\n/Users/bitcoin/depends/sources/ECMOptionalAddSubdirectory.cmake-6.7.3: OK\n/Users/bitcoin/depends/sources/QtTopLevelHelpers.cmake-6.7.3: OK\nPreprocessing native_qt...\npatching file 'qtbase/configure'\npatching file 'qtbase/bin/qt-cmake.in'\npatching file 'qtbase/bin/qt-configure-module.in'\npatching file 'qtbase/src/tools/moc/main.cpp'\npatching file 'qtbase/cmake/QtBaseGlobalTargets.cmake'\npatching file 'qtbase/cmake/QtBaseGlobalTargets.cmake'\npatching file 'qtbase/src/CMakeLists.txt'\npatching file 'qtbase/src/tools/CMakeLists.txt'\npatching file 'qtbase/src/tools/rcc/rcc.cpp'\npatching file 'qttools/configure.cmake'\npatching file 'qttools/src/linguist/CMakeLists.txt'\nConfiguring native_qt...\nopt: pcre val: qt\nopt: zlib val: qt\n'/opt/homebrew/bin/cmake' '-DCMAKE_EXE_LINKER_FLAGS=' '-DQT_INTERNAL_CALLED_FROM_CONFIGURE:BOOL=TRUE' '-DBUILD_SHARED_LIBS=OFF' '-DCMAKE_INSTALL_PREFIX=/Users/bitcoin/depends/x86_64-apple-darwin' '-DCMAKE_BUILD_TYPE=Release' '-DINPUT_pkg_config=no' '-DINPUT_reduce_relocations=no' '-DINPUT_use_gold_linker_alias=no' '-DINPUT_concurrent=no' '-DINPUT_network=no' '-DINPUT_printsupport=no' '-DINPUT_sql=no' '-DINPUT_testlib=no' '-DINPUT_xml=no' '-DINPUT_gui=no' '-DINPUT_widgets=no' '-DINPUT_glib=no' '-DINPUT_icu=no' '-DINPUT_libudev=no' '-DINPUT_openssl=no' '-DINPUT_zstd=no' '-DINPUT_pcre=qt' '-DINPUT_system_zlib=no' '-DINPUT_backtrace=no' '-DINPUT_permissions=no' '-DINPUT_process=no' '-DINPUT_settings=no' '-DINPUT_androiddeployqt=no' '-DINPUT_macdeployqt=no' '-DINPUT_windeployqt=no' '-DINPUT_qmake=no' '-DINPUT_linguist=yes' '-DINPUT_assistant=no' '-DINPUT_clang=no' '-DINPUT_clangcpp=no' '-DINPUT_designer=no' '-DINPUT_pixeltool=no' '-DINPUT_qdoc=no' '-DINPUT_qtattributionsscanner=no' '-DINPUT_qtdiag=no' '-DINPUT_qtplugininfo=no' '-G' 'Ninja' '/Users/bitcoin/depends/work/build/x86_64-apple-darwin/native_qt/6.7.3-17d11178efa'\n-- The CXX compiler identification is AppleClang 17.0.0.17000013\n-- The C compiler identification is AppleClang 17.0.0.17000013\n-- The ASM compiler identification is AppleClang\n-- Found assembler: /Library/Developer/CommandLineTools/usr/bin/clang\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/clang++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/clang - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Checking dependencies of submodule 'qtbase'\n-- Checking dependencies of submodule 'qtactiveqt'\n-- Checking dependencies of submodule 'qtdeclarative'\n-- Checking dependencies of submodule 'qttools'\n-- Skipping optional dependency 'qtactiveqt' of 'qttools', because qtactiveqt's CMakeLists.txt couldn't be found.\n-- Skipping optional dependency 'qtdeclarative' of 'qttools', because qtdeclarative's CMakeLists.txt couldn't be found.\n-- Checking dependencies of submodule 'qttranslations'\n-- Configuring submodule 'qtbase'\n-- [QtBase] CMAKE_BUILD_TYPE was already explicitly set to: 'Release'\nCMake Warning at qtbase/cmake/QtPublicAppleHelpers.cmake:920 (message):\n  Qt requires at least version 14 of Xcode, you're building against version .\n  Please upgrade.  You can turn this warning into an error by configuring\n  with -DQT_FORCE_FATAL_APPLE_SDK_AND_XCODE_CHECK=ON.\nCall Stack (most recent call first):\n  qtbase/cmake/QtBuildHelpers.cmake:443 (_qt_internal_check_apple_sdk_and_xcode_versions)\n  qtbase/cmake/QtBuild.cmake:4 (qt_internal_setup_build_and_global_variables)\n  qtbase/cmake/QtSetup.cmake:6 (include)\n  qtbase/cmake/QtBuildRepoHelpers.cmake:21 (include)\n  qtbase/cmake/QtBuildRepoHelpers.cmake:179 (qt_build_internals_set_up_private_api)\n  qtbase/cmake/QtBaseHelpers.cmake:154 (qt_build_repo_begin)\n  qtbase/CMakeLists.txt:32 (qt_internal_qtbase_build_repo)\n\n\nCMake Warning at qtbase/cmake/QtPublicAppleHelpers.cmake:934 (message):\n  Qt has only been tested with version 14 of the platform SDK, you're using\n  15.4.  This is an unsupported configuration.  You may experience build\n  issues, and by using the 15.4 SDK you are opting in to new features that Qt\n  has not been prepared for.  Please downgrade the SDK you use to build your\n  app to version 14, or configure with -DQT_NO_APPLE_SDK_MAX_VERSION_CHECK=ON\n  to silence this warning.\nCall Stack (most recent call first):\n  qtbase/cmake/QtBuildHelpers.cmake:443 (_qt_internal_check_apple_sdk_and_xcode_versions)\n  qtbase/cmake/QtBuild.cmake:4 (qt_internal_setup_build_and_global_variables)\n  qtbase/cmake/QtSetup.cmake:6 (include)\n  qtbase/cmake/QtBuildRepoHelpers.cmake:21 (include)\n  qtbase/cmake/QtBuildRepoHelpers.cmake:179 (qt_build_internals_set_up_private_api)\n  qtbase/cmake/QtBaseHelpers.cmake:154 (qt_build_repo_begin)\n  qtbase/CMakeLists.txt:32 (qt_internal_qtbase_build_repo)\n\n\nCMake Error at /opt/homebrew/share/cmake/Modules/CMakeTestOBJCCompiler.cmake:64 (message):\n  The Objective-C compiler\n\n    \"/Library/Developer/CommandLineTools/usr/bin/clang\"\n\n  is not able to compile a simple test program.\n\n  It fails with the following output:\n\n    Change Dir: '/Users/bitcoin/depends/work/build/x86_64-apple-darwin/native_qt/6.7.3-17d11178efa/CMakeFiles/CMakeScratch/TryCompile-e5ZtEf'\n    \n    Run Build Command(s): /opt/homebrew/bin/ninja -v cmTC_2d8d0\n    [1/2] /Library/Developer/CommandLineTools/usr/bin/clang   -x objective-c -arch arm64 -mmacosx-version-min=11.0 -fPIE -MD -MT CMakeFiles/cmTC_2d8d0.dir/testObjCCompiler.m.o -MF CMakeFiles/cmTC_2d8d0.dir/testObjCCompiler.m.o.d -o CMakeFiles/cmTC_2d8d0.dir/testObjCCompiler.m.o -c /Users/bitcoin/depends/work/build/x86_64-apple-darwin/native_qt/6.7.3-17d11178efa/CMakeFiles/CMakeScratch/TryCompile-e5ZtEf/testObjCCompiler.m\n    [2/2] : && /Library/Developer/CommandLineTools/usr/bin/clang -arch arm64 -mmacosx-version-min=11.0 -Wl,-search_paths_first -Wl,-headerpad_max_install_names  CMakeFiles/cmTC_2d8d0.dir/testObjCCompiler.m.o -o cmTC_2d8d0   && :\n    FAILED: cmTC_2d8d0 \n    : && /Library/Developer/CommandLineTools/usr/bin/clang -arch arm64 -mmacosx-version-min=11.0 -Wl,-search_paths_first -Wl,-headerpad_max_install_names  CMakeFiles/cmTC_2d8d0.dir/testObjCCompiler.m.o -o cmTC_2d8d0   && :\n    ld: library 'System' not found\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n    ninja: build stopped: subcommand failed.\n    \n  CMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\n  qtbase/cmake/QtBuildRepoHelpers.cmake:95 (enable_language)\n  qtbase/cmake/QtBuildRepoHelpers.cmake:197 (qt_enable_cmake_languages)\n  qtbase/cmake/QtBaseHelpers.cmake:154 (qt_build_repo_begin)\n  qtbase/CMakeLists.txt:32 (qt_internal_qtbase_build_repo)\n\n-- Configuring incomplete, errors occurred!\nCMake Error at qtbase/cmake/QtProcessConfigureArgs.cmake:1077 (message):\n  CMake exited with code 1.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-03T02:09:47Z",
      "updated_at": "2025-04-25T09:15:09Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32208",
      "labels": [
        "macOS",
        "Build system"
      ]
    }
  ],
  "summary": {
    "pull_requests": 8,
    "issues": 2
  }
}