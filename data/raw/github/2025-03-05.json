{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:22:23.059967+00:00",
  "date": "2025-03-05",
  "pull_requests": [
    {
      "number": 32005,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Hosampor",
      "created_at": "2025-03-05T23:28:03Z",
      "updated_at": "2025-03-05T23:30:30Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32005",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32005.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-03-05T23:28:07Z"
        }
      ]
    },
    {
      "number": 32004,
      "title": "qt: 29.0 translations update",
      "body": "This PR follows our [Release Process](https://github.com/bitcoin/bitcoin/blob/bd0ee07310c3dcdd08633c69eac330e2e567b235/doc/release-process.md) and concludes the translation-specific efforts for this release cycle. It follows two previous translation-related PRs, https://github.com/bitcoin/bitcoin/pull/31809 and https://github.com/bitcoin-core/gui/pull/854.\r\n\r\nIt is one of the steps required _before_ branch-off, as scheduled in https://github.com/bitcoin/bitcoin/issues/31029.\r\n\r\nThe previous similar PR: https://github.com/bitcoin/bitcoin/pull/30715.\r\n\r\n**Notes for reviewers:**\r\n1. This is the first release process conducted after migrating the build system to CMake. The [bitcoin-maintainer-tools/update-translations.py](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) tool, which is used to fetch translations from [Transifex.com](https://www.transifex.com/bitcoin/bitcoin), still generates the no-longer-needed  `src/Makefile.qt_locale.include` file. Please ignore it.\r\n2. The actual translations on Transifex is a moving target. Therefore, your diff after running [`bitcoin-maintainer-tools/update-translations.py`](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) might differ.\r\n3. The translations for the following languages, which appear to be the result of a mistake or an act of vandalism, have been discarded:\r\n    - Czech (cs)\r\n    - Danish (da)\r\n    - Dutch (nl)\r\n4. Changes to the Thai (th) translation have been discarded due to multiple unsolicited pronunciation notes.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-03-05T23:21:15Z",
      "updated_at": "2025-05-13T16:28:21Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/pull/32004",
      "labels": [
        "GUI"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32004.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/32004#pullrequestreview-2676023046) |\n| Stale ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32004#pullrequestreview-2673743665) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T23:21:19Z"
        },
        {
          "user": "hebasto",
          "body": "cc @stickies-v @pablomartin4btc @johnny9 @jarolrod as regular reviewers of similar previous PRs.\r\n\r\ncc @glozow as the 29.0 release manager.",
          "created_at": "2025-03-05T23:23:25Z"
        },
        {
          "user": "Sjors",
          "body": "I would be useful if the PR describes any major intended changes.\r\n\r\nIt adds several new languages: ast_ES, ay, or, ps, sa, sm, tn, ve, xh, yi\r\n\r\nIt almost completely drops Dutch, Czech, Danish and perhaps others (Github can barely load the diff).\r\n\r\n---\r\n\r\nIt would be great if, in the future, the strings can have canonical ordering, so the XML files are easier to diff (without going to Transifex)\r\n\r\nE.g.\r\n\r\n```\r\ngit show 5a52e0946d399fa467073c44752a5ce68b2a9008 src/qt/locale/bitcoin_de.ts\r\n```\r\n\r\nshow a lot of movement, which even `--color-moved=dimmed-zebra` doesn't seem able to solve for.",
          "created_at": "2025-03-07T10:42:50Z"
        },
        {
          "user": "hebasto",
          "body": "> I would be useful if the PR describes any major intended changes.\r\n> \r\n> It adds several new languages: ast_ES, ay, or, ps, sa, sm, tn, ve, xh, yi\r\n> \r\n> It almost completely drops Dutch, Czech, Danish and perhaps others (Github can barely load the diff).\r\n\r\nAs a PR author, I take responsibility for committing changes that are generated by the [`bitcoin-maintainer-tools/update-translations.py`](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) script, which in turn fetches translations from the Transifex website. When a translation file is removed, I do check whether a translation has been vandalized.\r\n\r\nOtherwise, it is translators' and language coordinators' responsibility for the completeness and quality of the translations.\r\n\r\nI'd like to reiterate my point that Transifex is poorly suited for Bitcoin Core translations, and I'm keen to use GitHub to track translation changes (as was done many years ago). This seems doable in the context of the recently discussed separation of the GUI repository.\r\n\r\n> It would be great if, in the future, the strings can have canonical ordering, so the XML files are easier to diff (without going to Transifex)\r\n> \r\n> E.g.\r\n> \r\n> ```\r\n> git show 5a52e0946d399fa467073c44752a5ce68b2a9008 src/qt/locale/bitcoin_de.ts\r\n> ```\r\n> \r\n> show a lot of movement, which even `--color-moved=dimmed-zebra` doesn't seem able to solve for.\r\n\r\nI agree.",
          "created_at": "2025-03-07T11:45:13Z"
        },
        {
          "user": "hebasto",
          "body": "Feedback from @achow101 has been addressed.",
          "created_at": "2025-03-10T15:38:01Z"
        },
        {
          "user": "Sjors",
          "body": "> > It almost completely drops Dutch, Czech, Danish and perhaps others (Github can barely load the diff).\r\n> \r\n> As a PR author, I take responsibility for committing changes that are generated by the [`bitcoin-maintainer-tools/update-translations.py`](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) script, which in turn fetches translations from the Transifex website. When a translation file is removed, I do check whether a translation has been vandalized.\r\n> \r\n> Otherwise, it is translators' and language coordinators' responsibility for the completeness and quality of the translations.\r\n\r\nIt would still be good to point to some place on Transifex where reviewers can see that discussion. There's nothing on the public page, is it all behind a login? https://explore.transifex.com/bitcoin/bitcoin/\r\n\r\n---\r\n\r\nTurns out I still have an account.\r\n\r\nBetween 28.x and 29.x there's almost no difference in string count: \r\n\r\n<img width=\"670\" alt=\"SchermÂ­afbeelding 2025-03-11 om 13 14 44\" src=\"https://github.com/user-attachments/assets/626f1532-609f-4404-b568-fb361fe12b61\" />\r\n\r\n<img width=\"702\" alt=\"SchermÂ­afbeelding 2025-03-11 om 13 14 20\" src=\"https://github.com/user-attachments/assets/88f3c5c1-1611-4270-ae2b-a0d378afb888\" />\r\n\r\nSo maybe there's a bug in the script or an API change?",
          "created_at": "2025-03-11T12:09:59Z"
        },
        {
          "user": "hebasto",
          "body": "> > > It almost completely drops Dutch, Czech, Danish and perhaps others (Github can barely load the diff).\r\n> > \r\n> > \r\n> > As a PR author, I take responsibility for committing changes that are generated by the [`bitcoin-maintainer-tools/update-translations.py`](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) script, which in turn fetches translations from the Transifex website. When a translation file is removed, I do check whether a translation has been vandalized.\r\n> > Otherwise, it is translators' and language coordinators' responsibility for the completeness and quality of the translations.\r\n> \r\n> It would still be good to point to some place on Transifex where reviewers can see that discussion. There's nothing on the public page, is it all behind a login? https://explore.transifex.com/bitcoin/bitcoin/\r\n> \r\n> Turns out I still have an account.\r\n> \r\n> Between 28.x and 29.x there's almost no difference in string count:\r\n> <img alt=\"SchermÂ­afbeelding 2025-03-11 om 13 14 44\" width=\"670\" src=\"https://private-user-images.githubusercontent.com/10217/421358053-626f1532-609f-4404-b568-fb361fe12b61.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDE2OTYzNDEsIm5iZiI6MTc0MTY5NjA0MSwicGF0aCI6Ii8xMDIxNy80MjEzNTgwNTMtNjI2ZjE1MzItNjA5Zi00NDA0LWI1NjgtZmIzNjFmZTEyYjYxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAzMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMzExVDEyMjcyMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNmNjA3ZmRhOTIyZThhZjI5ZTliY2MwOWM5ZDQ3MjQ0NzdkOTI2MWFjMjZlMzFjYzQzZDE1Y2NlZjI3MzE0NjYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.eWKzCofo_e3I5kNJ71XUvsRxINY0GJ1MFyXB2gbtMns\"> <img alt=\"SchermÂ­afbeelding 2025-03-11 om 13 14 20\" width=\"702\" src=\"https://private-user-images.githubusercontent.com/10217/421358073-88f3c5c1-1611-4270-ae2b-a0d378afb888.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDE2OTYzNDEsIm5iZiI6MTc0MTY5NjA0MSwicGF0aCI6Ii8xMDIxNy80MjEzNTgwNzMtODhmM2M1YzEtMTYxMS00MjcwLWFlMmItYTBkMzc4YWZiODg4LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAzMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMzExVDEyMjcyMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTA0Mjc4ZmU5NDIxMDM2ZDVhM2U2NjhjNWY3ODAzOTcyYjQ5NTdiNGEzZDIzZDJmYTJiZjNiYWJjZDBjZmJkZDcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.OgIEVh8QRvUHfMzni7zz9Z8XjbF33J49-kzEqRW7NIA\">\r\n> \r\n> So maybe there's a bug in the script or an API change?\r\n\r\nFrom reviewing the Dutch (nl) translation history, I can see that the user [ApeEstess1971](https://app.transifex.com/user/profile/ApeEstess1971/) replaced translated strings with the original ones for 28.x, either by mistake or as an act of vandalism. As a result, 29.x automatically picked up these broken translations from 28.x via Translation Memory. Our fetching script treats such strings as untranslated and discards them.\r\n\r\nWhen this happens, people who care about a particular language's translation usually restore the damage, as @Emzy did for German (de) and as I did for Ukrainian (uk).\r\n\r\n",
          "created_at": "2025-03-11T12:40:19Z"
        },
        {
          "user": "Sjors",
          "body": "> people who care about a particular language's translation usually restore the damage\r\n\r\nThey'd have to know about it first and understand how Transifex works. Is it safe to omit these large changes from this PR entirely? I'd rather have a slightly stale translation than a completely broken one.\r\n\r\ncc @laanwj",
          "created_at": "2025-03-11T13:11:05Z"
        },
        {
          "user": "hebasto",
          "body": "> > people who care about a particular language's translation usually restore the damage\r\n> \r\n> They'd have to know about it first and understand how Transifex works.\r\n\r\nCaring about a particular language's translation implies both, doesnâ€™t it?\r\n \r\n> Is it safe to omit these large changes from this PR entirely? I'd rather have a slightly stale translation than a completely broken one.\r\n\r\nI believe it is safe. Which languages are you referring to?",
          "created_at": "2025-03-11T13:16:11Z"
        },
        {
          "user": "Sjors",
          "body": "Based on `git show --stat`, looking for files with massive deletions:\r\n\r\n- `src/qt/locale/bitcoin_cs.ts`\r\n- `src/qt/locale/bitcoin_da.ts`\r\n- `src/qt/locale/bitcoin_nl.ts`\r\n\r\nWhen I undo the changes to those files, at least Dutch looks fine to me.",
          "created_at": "2025-03-11T13:21:24Z"
        },
        {
          "user": "hebasto",
          "body": "> Based on `git show --stat`, looking for files with massive deletions:\r\n> \r\n>     * `src/qt/locale/bitcoin_cs.ts`\r\n> \r\n>     * `src/qt/locale/bitcoin_da.ts`\r\n> \r\n>     * `src/qt/locale/bitcoin_nl.ts`\r\n> \r\n> \r\n> When I undo the changes to those files, at least Dutch looks fine to me.\r\n\r\nThanks! Updated.",
          "created_at": "2025-03-11T13:42:51Z"
        },
        {
          "user": "hebasto",
          "body": "> It would still be good to point to some place on Transifex where reviewers can see that discussion.\r\n\r\nI've posted an announcement, which refers to this PR:\r\n-  on the Transifex website -- https://app.transifex.com/bitcoin/communication/d:4ca41e70-aeda-4632-83d1-b20b3bbd0dd9/?q=project%3Abitcoin\r\n- on the ML -- https://groups.google.com/g/bitcoin-translators/c/qam5uo0h7cA",
          "created_at": "2025-03-11T14:35:54Z"
        },
        {
          "user": "hebasto",
          "body": "cc @darosior for sanity check of French (fr) translation.",
          "created_at": "2025-03-11T15:33:20Z"
        },
        {
          "user": "maflcko",
          "body": "> I'd like to reiterate my point that Transifex is poorly suited for Bitcoin Core translations, and I'm keen to use GitHub to track translation changes (as was done many years ago). This seems doable in the context of the recently discussed separation of the GUI repository.\r\n\r\nThe gui repository is already a separate monotree in https://github.com/bitcoin-core/gui, so it should be possible to drop transifex already today, if translators and translation reviewers prefer to use GitHub. Maybe I am missing context why a further separation is required to achieve this goal?\r\n\r\nUnrelated to that, I presume it is possible to come up with better spam heuristics and have them checked by a script, similar to https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/961d365897e7c273620426d30d23e174cc225b5e/update-translations.py#L223",
          "created_at": "2025-03-12T08:35:57Z"
        },
        {
          "user": "hebasto",
          "body": ">    3. The translations for the following languages, which appear to be the result of a mistake or an act of vandalism, have been discarded:\r\n>        \r\n>       * Czech (cs)\r\n>       * Danish (da)\r\n>       * Dutch (nl)\r\n\r\nI've restored most of damaged strings for these languages on Transifex.",
          "created_at": "2025-05-13T16:28:20Z"
        }
      ]
    },
    {
      "number": 32003,
      "title": "doc: remove note about macOS self-signing",
      "body": "Followup to #31407.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T17:21:59Z",
      "updated_at": "2025-03-06T18:15:43Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32003",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32003.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32003#issuecomment-2701690670), [achow101](https://github.com/bitcoin/bitcoin/pull/32003#issuecomment-2704569667) |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32003#pullrequestreview-2662750676) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T17:22:02Z"
        },
        {
          "user": "Sjors",
          "body": "ACK c873ab6f23e027af1c5837256ce3c9eccaf409cb\r\n\r\nThe binaries we ship are signed and notarized now. If the user compiles from source, self-signing happens automatically.\r\n\r\nIf the user (cross) compiles from source to put it on a different computer, they'll still need to do this on the target machine. But this is probably not the right place to describe cross-compilation steps.\r\n\r\nRemoving these instructions here is also safer: if someone messes with the binaries, the user will get an error from macOS. They might then follow the instructions here and shoot themselves in the foot by self signing a malicious binary. (a less lazy attacker would mess with the instruction of course)",
          "created_at": "2025-03-05T18:03:21Z"
        },
        {
          "user": "achow101",
          "body": "It may still be useful to mention `xattr -d com.apple.quarantine` for the binaries since it's necessary to do that to run them from finder. Although I'm not sure it even makes sense to try to run our binaries from finder. Even with `bitcoin-qt`, it still opens up a terminal that has to be open while the GUI is running.",
          "created_at": "2025-03-05T18:39:35Z"
        },
        {
          "user": "achow101",
          "body": "ACK c873ab6f23e027af1c5837256ce3c9eccaf409cb",
          "created_at": "2025-03-06T17:59:54Z"
        }
      ]
    },
    {
      "number": 32002,
      "title": "doc: add note to Windows build about stripping bins",
      "body": "The Windows binaries are particularly big when they contain debug info, closing in on 500mb. Add a note to the Windows build instructions about using `--strip`.\r\n\r\nI haven't tested this (the copying out to WSL). If we don't want to add this note, in favour of [user-presents or similar](https://github.com/bitcoin/bitcoin/issues/30593#issuecomment-2271304490), then we should just close #30593. \r\n\r\nFixes #30593.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T16:54:44Z",
      "updated_at": "2025-03-08T13:28:27Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32002",
      "labels": [
        "Docs",
        "Windows"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32002.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32002#pullrequestreview-2668463615), [hebasto](https://github.com/bitcoin/bitcoin/pull/32002#pullrequestreview-2669121676) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T16:54:47Z"
        }
      ]
    },
    {
      "number": 32000,
      "title": "Update minisketch subtree to d1e6bb8bbf8ef104b9dd002cab14a71b91061177",
      "body": "Includes:\r\n* https://github.com/bitcoin-core/minisketch/pull/92",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T15:39:03Z",
      "updated_at": "2025-03-07T12:38:45Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32000",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32000.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32000#pullrequestreview-2667130467) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T15:39:06Z"
        }
      ]
    },
    {
      "number": 31998,
      "title": "depends: patch around PlacementNew issue in capnp",
      "body": "See #31772 and https://github.com/capnproto/capnproto/pull/2235.\r\n\r\nGiven there isn't agreement in #29796, pulled this out so it could be merged separately, and it's easier to run different test configurations externally.\r\n\r\nCloses #31772.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T15:13:02Z",
      "updated_at": "2025-03-13T00:59:01Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/31998",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31998.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/31998#pullrequestreview-2679035874), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31998#pullrequestreview-2679065785) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29796](https://github.com/bitcoin/bitcoin/pull/29796) (build: align debugging flags to `-O0` by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-03-05T15:13:05Z"
        }
      ]
    },
    {
      "number": 31997,
      "title": "doc: update location of minisketch repository",
      "body": "This repository is now at https://github.com/bitcoin-core/minisketch.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T14:14:52Z",
      "updated_at": "2025-03-05T14:50:01Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/31997",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31997.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/31997#pullrequestreview-2661261332), [theStack](https://github.com/bitcoin/bitcoin/pull/31997#pullrequestreview-2661348628) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T14:14:55Z"
        },
        {
          "user": "fanquake",
          "body": "Also see: https://github.com/bitcoin-core/minisketch/pull/92.",
          "created_at": "2025-03-05T14:22:54Z"
        }
      ]
    },
    {
      "number": 31996,
      "title": "doc: link to benchcoin over bitcoinperf",
      "body": "Seems like linking to https://github.com/bitcoin-dev-tools/benchcoin is now the best thing to do here. If not, we can just drop the other links.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T13:59:44Z",
      "updated_at": "2025-03-08T13:28:52Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/31996",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31996.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/31996#issuecomment-2701094276), [laanwj](https://github.com/bitcoin/bitcoin/pull/31996#pullrequestreview-2668925537), [hebasto](https://github.com/bitcoin/bitcoin/pull/31996#pullrequestreview-2669098867) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T13:59:47Z"
        },
        {
          "user": "l0rinc",
          "body": "ACK 611999e09777716d1fa686254db20845aff3dffe\r\n\r\nThanks for updating",
          "created_at": "2025-03-05T14:23:52Z"
        }
      ]
    },
    {
      "number": 31995,
      "title": "ci: rename imagefile to Dockerfile to follow docker file's convention.",
      "body": "I'm reviewing bitcoin's ci/lint instructions, I found some docker image files are  named as \"_imagefile\".\r\nAnd some docker image files are named as \".Dockerfile\".\r\n\r\nI think we should name \"_imagefile\" to \".Dockerfile\" to keep consistency.   Friendly invite fanquake to review this. Thank you.\r\n\r\nhttps://docs.docker.com/build/concepts/dockerfile/\r\n\r\n\r\n\r\n```bash\r\n$ fd imagefile\r\nci/lint_imagefile\r\nci/test_imagefile\r\n\r\n$ fd Dockerfile\r\nsrc/minisketch/ci/linux-debian.Dockerfile\r\nsrc/secp256k1/ci/linux-debian.Dockerfile\r\n\r\n$ rg -. test_imagefile\r\nci/test/02_run_container.sh\r\n51:      --file \"${BASE_READ_ONLY_DIR}/ci/test_imagefile\" \\\r\n\r\n$ rg -. lint_imagefile\r\ntest/lint/README.md\r\n10:DOCKER_BUILDKIT=1 docker build -t bitcoin-linter --file \"./ci/lint_imagefile\" ./ && docker run --rm -v $(pwd):/bitcoin -it bitcoin-linter\r\n\r\n$ mv ci/lint_imagefile ci/lint.Dockerfile\r\n\r\n$ mv ci/test_imagefile ci/test.Dockerfile\r\n```\r\n",
      "state": "closed",
      "user": "eval-exec",
      "created_at": "2025-03-05T13:02:11Z",
      "updated_at": "2025-03-05T13:42:12Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/31995",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31995.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-03-05T13:02:15Z"
        },
        {
          "user": "fanquake",
          "body": "> And some docker image files are named as \".Dockerfile\".\r\n\r\nThese are from subtrees.\r\n\r\nI don't think there's anything to do here. Note that also don't need to use Docker, you can also use podman.",
          "created_at": "2025-03-05T13:22:44Z"
        },
        {
          "user": "eval-exec",
          "body": "Thanks for your response! \r\n\r\n> These are from subtrees.\r\n\r\nWhere is subtrees.\r\n\r\n> I don't think there's anything to do here. Note that also don't need to use Docker, you can also use podman.\r\n\r\nI just think it would be better to keep the image file names consistent. And, `podman` call it `Containerfile`. https://docs.podman.io/en/v5.3.0/markdown/podman-build.1.html\r\n",
          "created_at": "2025-03-05T13:33:11Z"
        },
        {
          "user": "fanquake",
          "body": "> Where is subtrees.\r\n\r\nhttps://github.com/bitcoin-core/secp256k1\r\nhttps://github.com/sipa/minisketch\r\n\r\n\r\n> I just think it would be better to keep the image file names consistent.\r\n\r\nOurs are consistently named `{name}_imagefile`. There's no requirement that we are consistent with files from other repositories.",
          "created_at": "2025-03-05T13:39:42Z"
        },
        {
          "user": "eval-exec",
          "body": "Thanks for clarifying. I appreciate it.",
          "created_at": "2025-03-05T13:42:12Z"
        }
      ]
    },
    {
      "number": 31993,
      "title": "ci: use LLVM 20.1.0 for MSAN",
      "body": "Now that the release is out, stop using rc1.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T10:52:50Z",
      "updated_at": "2025-03-06T17:20:19Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31993",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31993.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/31993#issuecomment-2700595304), [Sjors](https://github.com/bitcoin/bitcoin/pull/31993#issuecomment-2703425241) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-03-05T10:52:54Z"
        },
        {
          "user": "l0rinc",
          "body": "utACK d76647eb8f11708ae90600ce3b92570a86f62bac\r\n\r\nCloned the repo locally to make sure the branch exists",
          "created_at": "2025-03-05T11:06:43Z"
        },
        {
          "user": "Sjors",
          "body": "ACK d76647eb8f11708ae90600ce3b92570a86f62bac\r\n\r\nSeems obviously useful and CI passes. Two hundred commits between rc1 and the final version is impressive: https://github.com/llvm/llvm-project/compare/llvmorg-20.1.0-rc1...llvmorg-20.1.0",
          "created_at": "2025-03-06T10:23:19Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32001,
      "title": "ci: `native_fuzz_with_*` jobs are broken",
      "body": "Noticed in https://github.com/bitcoin-core/qa-assets/pull/219.\n\nhttps://cirrus-ci.com/task/4864208556261376?logs=ci#L7169:\n```bash\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/notifications.cpp.o\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/scriptpubkeyman.cpp.o\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/spend.cpp.o\n[100%] Building CXX object src/test/fuzz/CMakeFiles/fuzz.dir/__/__/wallet/test/fuzz/wallet_bdb_parser.cpp.o\n[100%] Linking CXX executable fuzz\n[100%] Built target fuzz\ngmake: *** No rule to make target 'install'.  Stop.\nBuild failure. Verbose build follows.\n+ echo 'Build failure. Verbose build follows.'\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-03-05T15:46:40Z",
      "updated_at": "2025-03-07T14:08:30Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32001",
      "labels": []
    },
    {
      "number": 31999,
      "title": "build: document `BITCOIN_GENBUILD_NO_GIT` environment variable?",
      "body": "This was ported from Autotools, however it's entirely undocumented, so it's unclear what we are trying to support, or why (and if we can just drop this entirely). It'd be good if it was documented, even just inline in the source: https://github.com/bitcoin/bitcoin/blob/36d4bd7fe326ba69e9372f8ddb3b12a3b5b36a3d/cmake/script/GenerateBuildInfo.cmake#L33 so it's more clear what the use-case is.\n\nNote that as-of `29.x`, the ways we distribute our source code will be via git clone, or using a tarball that was generated via git archive. So I guess that the usecase for `BITCOIN_GENBUILD_NO_GIT` is to build from a git clone, but ignore the available version info (why?), or to build from a tarball that has been extacted into a git repository where we might pick up some other git information? It's unclear if this is an actual usecase.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-03-05T15:24:30Z",
      "updated_at": "2025-04-17T11:05:13Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31999",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "cc @hebasto ",
          "created_at": "2025-03-05T15:24:36Z"
        },
        {
          "user": "luke-jr",
          "body": "The intended use case is to avoid git trying to find a repo where there is none, which can trip security checks in some build systems as it looks in parent directories.",
          "created_at": "2025-03-05T23:53:00Z"
        },
        {
          "user": "fanquake",
          "body": "> in some build systems\n\nWhich build systems? This should be documented with a specific example, especially since it seems like an uncommon usecase/workflow.",
          "created_at": "2025-03-06T08:26:34Z"
        },
        {
          "user": "hebasto",
          "body": "FWIW, `BITCOIN_GENBUILD_NO_GIT` was introduced in https://github.com/bitcoin/bitcoin/pull/7522.",
          "created_at": "2025-03-07T08:29:12Z"
        },
        {
          "user": "hebasto",
          "body": "> > in some build systems\n> \n> Which build systems? This should be documented with a specific example, especially since it seems like an uncommon usecase/workflow.\n\nGentoo, I assume: https://bugs.gentoo.org/476294.",
          "created_at": "2025-03-07T08:33:07Z"
        },
        {
          "user": "fanquake",
          "body": "> Gentoo, I assume: https://bugs.gentoo.org/476294.\n\nReading that thread, it's not really clear. The last comment (7 years ago) suggests that there was no issue with 0.13.0, even though the fix from https://github.com/bitcoin/bitcoin/pull/7522 only went into 0.15.0? It'd be good if someone could demonstrate an issue today, with the current source code.",
          "created_at": "2025-03-07T09:07:53Z"
        },
        {
          "user": "luke-jr",
          "body": "> The last comment (7 years ago) suggests that there was no issue with 0.13.0, even though the fix from #7522 only went into 0.15.0?\n\nLikely it was backported\n\n> It'd be good if someone could demonstrate an issue today, with the current source code.\n\n```\nmkdir test\ncd test\ngit init .\ntar -xvpf /path/to/a/release/tarball.tar.gz\ncd bitcoin-*\nsandbox  # set up to complain about reads to /tmp/test/.git\n# do whatever to build\n```\n\nNote that `/tmp` is not a suitable place to run the test, as tools often assume it's fine to access that in general, and `sandbox` doesn't seem to have a way to allow `/tmp` but forbid subdirectories. By default, it also allows access to `$HOME`.\n\nAlso note it's not enough to deny read access to the adhoc `.git`, you need to have the access attempt trigger an alert or kill the process somehow.",
          "created_at": "2025-03-12T02:24:53Z"
        },
        {
          "user": "fanquake",
          "body": "> set up to complain about reads to /tmp/test/.git\n> you need to have the access attempt trigger an alert or kill the process somehow.\n> do whatever to build\n\nMultiple of the steps here are \"just do thing\", where it sounds like there isn't actually a build issue in the default case. Please provide actual, full steps to reproduce (with a tarball, from current master).",
          "created_at": "2025-03-12T02:31:36Z"
        },
        {
          "user": "maflcko",
          "body": "Is this a blocker for 29.0? Seems fine to backport to 29.1, if it is ready later, no?",
          "created_at": "2025-04-01T18:12:28Z"
        },
        {
          "user": "hebasto",
          "body": "I don't think https://github.com/gentoo/gentoo uses `BITCOIN_GENBUILD_NO_GIT`.\n\nAlso see: https://github.com/gentoo/gentoo/pull/41395.",
          "created_at": "2025-04-03T12:37:42Z"
        },
        {
          "user": "whitslack",
          "body": "Correct. The current Gentoo ebuilds for `net-p2p/bitcoin-core` do not use `BITCOIN_GENBUILD_NO_GIT`. I wasn't actually aware of its existence (maybe because it is undocumented ðŸ˜…). I have needed to patch out mandatory Git checks in other build systems since Gentoo ebuilds (except \"live\" versions) never build in/from Git worktrees, but it hasn't been a problem for Bitcoin Core.",
          "created_at": "2025-04-03T19:44:13Z"
        },
        {
          "user": "maflcko",
          "body": "(removed from 29.0 milestone, as the release is out)",
          "created_at": "2025-04-17T11:05:11Z"
        }
      ]
    },
    {
      "number": 31994,
      "title": "build: ccache doesn't hit across build dirs",
      "body": "This has regressed since 28.x. Opening an issue to track given #30861 has been closed. Tagged for 29.x because ideally this would be fixed, and any fix could be backported.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-03-05T11:30:16Z",
      "updated_at": "2025-04-17T11:04:32Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/31994",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "hebasto",
          "body": "## TL;DR\n\nTo enable ccache hits across different build directories on Linux or macOS, configure the ccache options as follows:\n```\nbase_dir = <path_to_your_home_directory>\nhash_dir = false\n```\nor via environment variables:\n```\n$ export CCACHE_BASEDIR=$HOME\n$ export CCACHE_NOHASHDIR=1\n```\n\n## Detailed Solution\n\nAll following commands were executed on Ubuntu 24.04.2 LTS with [ccache 4.9.1](https://packages.ubuntu.com/noble/ccache) installed.\n\nConsider building in two separate build directories with [ccache debugging](https://ccache.dev/manual/4.9.1.html#_cache_debugging) enabled:\n```\n$ export CCACHE_DEBUG=1\n$ printenv | grep CCACHE\nCCACHE_DEBUG=1\n$ export CCACHE_DIR=$(mktemp -d)\n$ cmake -B build_first -DWITH_CCACHE=ON\n$ cmake --build build_first -t bitcoin_crypto -j $(nproc)\n$ cmake -B build_second -DWITH_CCACHE=ON\n$ ccache -z\n$ cmake --build build_second -t bitcoin_crypto -j $(nproc)\n$ ccache -s\nCacheable calls:     20 /  20 (100.0%)\n  Hits:               0 /  20 ( 0.00%)\n    Direct:           0\n    Preprocessed:     0\n  Misses:            20 /  20 (100.0%)\nLocal storage:\n  Cache size (GiB): 0.0 / 5.0 ( 0.09%)\n  Hits:               0 /  20 ( 0.00%)\n  Misses:            20 /  20 (100.0%)\n```\n\nThere were 100% misses. A comparison of the combined input used for hashing for an object file provides some clues:\n```diff\n$ diff -u build_first/src/crypto/CMakeFiles/bitcoin_crypto.dir/aes.cpp.o.*.ccache-input-text build_second/src/crypto/CMakeFiles/bitcoin_crypto.dir/aes.cpp.o.*.ccache-input-text\n--- build_first/src/crypto/CMakeFiles/bitcoin_crypto.dir/aes.cpp.o.20250309_113307_205745.ccache-input-text\t2025-03-09 11:33:07.669373196 +0000\n+++ build_second/src/crypto/CMakeFiles/bitcoin_crypto.dir/aes.cpp.o.20250309_113435_261959.ccache-input-text\t2025-03-09 11:34:35.664968636 +0000\n@@ -10,7 +10,7 @@\n ### LANG\n en_US.UTF-8\n ### cwd\n-/home/hebasto/dev/bitcoin/build_first\n+/home/hebasto/dev/bitcoin/build_second\n === DIRECT MODE ===\n ### cache entry version\n 1\n@@ -83,7 +83,7 @@\n ### arg\n -DENABLE_X86_SHANI\n ### arg\n--I/home/hebasto/dev/bitcoin/build_first/src\n+-I/home/hebasto/dev/bitcoin/build_second/src\n ### arg\n -I/home/hebasto/dev/bitcoin/src\n ### arg\n@@ -170,7 +170,7 @@\n /home/hebasto/dev/bitcoin/src/crypto/aes.cpp\n \"\n # 1 \"\n-/home/hebasto/dev/bitcoin/build_first\n+/home/hebasto/dev/bitcoin/build_second\n \"\n # 0 \"\n <built-in>\n```\n\nHence, we need to address:\n1) Absolute paths in compiler invocation commands, and\n2) Hashing of the current working directory.\n\nThe documented method to resolve the first issue is the [`base_dir`](https://ccache.dev/manual/4.9.1.html#config_base_dir) ccache configuration option. The current [recommendation](https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#cache-compilations-with-ccache) from our [Productivity Notes](https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md) remains valid:\n> `base_dir` is required for ccache to share cached compiles of the same file across different ... paths; it will only do this for paths under `base_dir`.\n\nAdditionally, ccache docs [state](https://ccache.dev/manual/4.9.1.html#config_hash_dir):\n> The CWD will not be included in the hash if [`base_dir`](https://ccache.dev/manual/4.9.1.html#config_base_dir) is set (_and matches the CWD_) and the compiler option `-fdebug-prefix-map` is used. \n\nThe latter is always true:https://github.com/bitcoin/bitcoin/blob/4637cb1eec48d1af8d23eeae1bb4c6f8de55eed9/CMakeLists.txt#L473-L475\n\nHowever, in CMake builds the CWD is a build directory. Therefore, none of the meaningful values of `base_dir` will trigger the skipping of CWD hashing. We must explicitly use the `hash_dir` option to disable this behaviour.\n\nNow, let's set `base_dir` and disable `hash_dir`:\n```\n$ export CCACHE_BASEDIR=$HOME\n$ export CCACHE_NOHASHDIR=1\n$ export CCACHE_DIR=$(mktemp -d)\n$ cmake -B build_first -DWITH_CCACHE=ON\n$ cmake --build build_first -t bitcoin_crypto -j $(nproc)\n$ cmake -B build_second -DWITH_CCACHE=ON\n$ ccache -z\n$ cmake --build build_second -t bitcoin_crypto -j $(nproc)\n$ ccache -s\nCacheable calls:     20 /  20 (100.0%)\n  Hits:              20 /  20 (100.0%)\n    Direct:          20 /  20 (100.0%)\n    Preprocessed:     0 /  20 ( 0.00%)\n  Misses:             0 /  20 ( 0.00%)\nLocal storage:\n  Cache size (GiB): 0.0 / 5.0 ( 0.04%)\n  Hits:              20 /  20 (100.0%)\n  Misses:             0 /  20 ( 0.00%)\n```\n\nWe've got 100% hits.\n\nCcache docs [warn](https://ccache.dev/manual/4.9.1.html#config_hash_dir) about disabling CWD hashing:\n> The reason for including the CWD in the hash by default is to prevent a problem with the storage of the current working directory in the debug info of an object file, which can lead ccache to return a cached object file that has the working directory in the debug info set incorrectly.\n\nHowever, I do not see how this affects us, as all paths in the debug information of object files are mapped as mentioned above.",
          "created_at": "2025-03-09T13:04:25Z"
        },
        {
          "user": "hebasto",
          "body": "Amending our docs, as demonstrated in https://github.com/davidgumberg/bitcoin/commit/1c6ae1043d59d01cbf52f353e50a63b0afa883c4, could be an alternative to https://github.com/bitcoin/bitcoin/pull/30861.",
          "created_at": "2025-03-09T13:09:31Z"
        },
        {
          "user": "ryanofsky",
          "body": "Thanks for writing this up so clearly. It would be good to add this to the documentation.\n\nre: https://github.com/bitcoin/bitcoin/issues/31994#issuecomment-2708846512\n\n> Additionally, ccache docs [state](https://ccache.dev/manual/4.9.1.html#config_hash_dir):\n> \n> > The CWD will not be included in the hash if [`base_dir`](https://ccache.dev/manual/4.9.1.html#config_base_dir) is set (_and matches the CWD_) and the compiler option `-fdebug-prefix-map` is used.\n\nI still don't understand why setting `hash_dir = false` or `CCACHE_NOHASHDIR=1` should be necessary. Both conditions listed would seem to be true. Both CWD's (/home/hebasto/dev/bitcoin/build_first and /home/hebasto/dev/bitcoin/build_second) should match the base_dir (/home/hebasto) because the according to the [base_dir](https://ccache.dev/manual/4.9.1.html#config_base_dir) documentation it matches \"absolute paths that begin with base_dir\". \n\n> However, in CMake builds the CWD is a build directory. Therefore, none of the meaningful values of `base_dir` will trigger the skipping of CWD hashing. We must explicitly use the `hash_dir` option to disable this behaviour.\n\nThis doesn't seem true. How do /home/hebasto/dev/bitcoin/build_first and /home/hebasto/dev/bitcoin/build_second not match /home/hebasto?",
          "created_at": "2025-03-11T14:39:37Z"
        },
        {
          "user": "hebasto",
          "body": "> Thanks for writing this up so clearly. It would be good to add this to the documentation.\n> \n> re: [#31994 (comment)](https://github.com/bitcoin/bitcoin/issues/31994#issuecomment-2708846512)\n> \n> > Additionally, ccache docs [state](https://ccache.dev/manual/4.9.1.html#config_hash_dir):\n> > > The CWD will not be included in the hash if [`base_dir`](https://ccache.dev/manual/4.9.1.html#config_base_dir) is set (_and matches the CWD_) and the compiler option `-fdebug-prefix-map` is used.\n> \n> I still don't understand why setting `hash_dir = false` or `CCACHE_NOHASHDIR=1` should be necessary. Both conditions listed would seem to be true. Both CWD's (/home/hebasto/dev/bitcoin/build_first and /home/hebasto/dev/bitcoin/build_second) should match the base_dir (/home/hebasto) because the according to the [base_dir](https://ccache.dev/manual/4.9.1.html#config_base_dir) documentation it matches \"absolute paths that begin with base_dir\".\n\nThis interpretation of the Ccache documentation does not describe the actual behaviour on my different systems. I read \"`base_dir` matches the CWD\" as \"`base_dir` equals the CWD\". However, I might be wrong.",
          "created_at": "2025-03-11T14:50:35Z"
        },
        {
          "user": "ryanofsky",
          "body": "> This interpretation of the Ccache documentation does not describe the actual behaviour on my different systems. I read \"base_dir matches the CWD\" as \"base_dir equals the CWD\". However, I might be wrong.\n\nYou are probably right but this behavior does not seem to make sense or correspond to documentation of base_dir. It is probably ok for us to force CCACHE_NOHASHDIR, but it seems like it would be safer if ccache just detected conditions it should and shouldn't hash CWD correctly itself. Ccache's behavior here seems nonsensical.",
          "created_at": "2025-03-11T15:21:13Z"
        },
        {
          "user": "hebasto",
          "body": "> > This interpretation of the Ccache documentation does not describe the actual behaviour on my different systems. I read \"base_dir matches the CWD\" as \"base_dir equals the CWD\". However, I might be wrong.\n> \n> You are probably right but this behavior does not seem to make sense or correspond to documentation of base_dir. It is probably ok for us to force CCACHE_NOHASHDIR, but it seems like it would be safer if ccache just detected conditions it should and shouldn't hash CWD correctly itself. Ccache's behavior here seems nonsensical.\n\nIt looks like [this code](https://github.com/ccache/ccache/blob/2f5bf486d366c35c05c36719e2b8d784a9f1175f/src/ccache/ccache.cpp#L626-L628) is responsible for that behaviour:\n```c++\n      if (inc_path != ctx.apparent_cwd || ctx.config.hash_dir()) {\n        hash.hash(inc_path);\n      }\n```",
          "created_at": "2025-03-11T16:49:12Z"
        },
        {
          "user": "maflcko",
          "body": "Is this a blocker for 29.0? Seems fine to backport to 29.1, if it is ready later, no?",
          "created_at": "2025-04-01T18:10:09Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 10,
    "issues": 3
  }
}