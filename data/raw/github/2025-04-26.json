{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:35:58.111079+00:00",
  "date": "2025-04-26",
  "pull_requests": [
    {
      "number": 32357,
      "title": "depends: Fix cross-compiling `qt` package from macOS to Windows",
      "body": "Native packages cannot be used during cross-compiling. However, Qt still unconditionally tries to find them, which causes issues in some cases, such as when [cross-compiling from macOS to Windows](https://github.com/bitcoin/bitcoin/issues/32346).\r\n\r\nThis PR explicitly disables this unnecessary Qt behaviour.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32346.\r\n\r\nHere is a full workflow on my macOS Sequoia 15.4.1 (Intel):\r\n```\r\n% brew install make cmake ninja mingw-w64 nsis\r\n% gmake -C depends -j 10 HOST=x86_64-w64-mingw32\r\n% cmake -B build --toolchain depends/x86_64-w64-mingw32/toolchain.cmake\r\n% cmake --build build -j 10 -t deploy\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-26T17:03:05Z",
      "updated_at": "2025-04-28T15:19:53Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32357",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32357.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [shahsb](https://github.com/bitcoin/bitcoin/pull/32357#pullrequestreview-2798879688), [fanquake](https://github.com/bitcoin/bitcoin/pull/32357#pullrequestreview-2799684867) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-26T17:03:08Z"
        },
        {
          "user": "hebasto",
          "body": "My Guix build:\r\n```\r\naarch64\r\n8ba76371ec4b297da8d29674c7ec31a01eead8131a8e0bbf9bc7e66fb4e1adff  guix-build-35e57fbe336c/output/aarch64-linux-gnu/SHA256SUMS.part\r\nd16137ebd3ca5eabb9614a6d4c322e05c43727621d1b8eca98ef4321c5964f21  guix-build-35e57fbe336c/output/aarch64-linux-gnu/bitcoin-35e57fbe336c-aarch64-linux-gnu-debug.tar.gz\r\n3f0078d7df0a54497a52541f2252a52d5b50737b96b83f88d8f2aecd76b54cca  guix-build-35e57fbe336c/output/aarch64-linux-gnu/bitcoin-35e57fbe336c-aarch64-linux-gnu.tar.gz\r\n778792dcea8b0e82840c8b50cc103557ecd40264919ceac1cfb94d91ab1497da  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n0f11238007712bb6c06c38a77b3f801dd3872c643a3fba5b94a34c416d15abb9  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/bitcoin-35e57fbe336c-arm-linux-gnueabihf-debug.tar.gz\r\ne4718eabc7b1b3447790ab336bfefa31fbb394f0328f662fea01f93df1259658  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/bitcoin-35e57fbe336c-arm-linux-gnueabihf.tar.gz\r\n838497f52bf171b39f1a9146340172457eadefaab3756ea5b00355da57a9e110  guix-build-35e57fbe336c/output/arm64-apple-darwin/SHA256SUMS.part\r\n1f353d89fa8b27f7ca065cc3f1cf620087a14284740d4748c99db08fe6037992  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-codesigning.tar.gz\r\n0b4d59a5a86ff0c43b70460aa8fd09ca1af581a940e9fbfee1a5583edbb9751d  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-unsigned.tar.gz\r\n079803a3a1b964c4c6dd274de407ab9c59979684152cabba1d85923708e8328b  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-unsigned.zip\r\n7d1fdab64ddf657f5db4ed71c4dea08e5c09964bc9f582d2feef451aa86392d3  guix-build-35e57fbe336c/output/dist-archive/bitcoin-35e57fbe336c.tar.gz\r\nb4eb2c619c5f927d6bf02b4102a5b13da750acf537bdef0b36bee3310a359306  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n737648d611f086127243e245dd2321966300103a2af21a38cfcafc73da2ea5bb  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/bitcoin-35e57fbe336c-powerpc64-linux-gnu-debug.tar.gz\r\n070ee5ece7647441884b4b989ed69c929378c3e8b61ab2d736204e31b3b71c76  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/bitcoin-35e57fbe336c-powerpc64-linux-gnu.tar.gz\r\n892c9c1b27f6eba085c25775dc8a7480c14c1b4bd3228e993dc442a3e6817642  guix-build-35e57fbe336c/output/riscv64-linux-gnu/SHA256SUMS.part\r\n49e8e9a205604eb8ca6684e63c0cea98737d962dbe845980aff7771ccafe6eb9  guix-build-35e57fbe336c/output/riscv64-linux-gnu/bitcoin-35e57fbe336c-riscv64-linux-gnu-debug.tar.gz\r\nab7e9035369edd0ca4a342badb4cb0bbc4daa91b1bbdd072565ff442ef8a40c5  guix-build-35e57fbe336c/output/riscv64-linux-gnu/bitcoin-35e57fbe336c-riscv64-linux-gnu.tar.gz\r\n1c0824eaf67a5ca65d508458ec10aeb6d4aedb299828edc2e7b4b47947d4d3a3  guix-build-35e57fbe336c/output/x86_64-apple-darwin/SHA256SUMS.part\r\ne629119e5a7a425efc851eaab123d46f0781ee8d74fac6f7a3766c9fc8f627bf  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-codesigning.tar.gz\r\nb0ab5e8b778e21a01626b2208d15eafa8f6661fe6118be1122d029af0cb9258b  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-unsigned.tar.gz\r\nef47a05298262b65c7298aeacc57293b83ec52383ac1df7249ad7cb94661885c  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-unsigned.zip\r\n5ac871577849ef8ad5a1fcfb42cb3c34d55710f49697c2bde328bab6f4a38a4e  guix-build-35e57fbe336c/output/x86_64-linux-gnu/SHA256SUMS.part\r\n94330b47561d09d94bd9f6fa04a92ee9be4680774ef921653fbac3762ebd1aa2  guix-build-35e57fbe336c/output/x86_64-linux-gnu/bitcoin-35e57fbe336c-x86_64-linux-gnu-debug.tar.gz\r\n3a72d4ed6bcbece378fd15bbc11737654bcf7bb50ac09f122c2144d4d14ee2c2  guix-build-35e57fbe336c/output/x86_64-linux-gnu/bitcoin-35e57fbe336c-x86_64-linux-gnu.tar.gz\r\n21d8e26c11ea0e95e7a8803b2f63477dc50d5aae7072aaf5ae8f1821c70abd16  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n0247ee31fe4cbdfb908b4a377cebe588d560990a29cb452601c6861c30429fd9  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-codesigning.tar.gz\r\nbf3afc049b32e02aea1f238f09637c6b6d6614831fba7c78eea83b4b277b13e6  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-debug.zip\r\nebb562ea6b50dd0be97c175d3a0181cb1846cf44d00f622e058268df132a8d1b  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-setup-unsigned.exe\r\n807d62370d2d8bb2771c2227f48300852459b9a313b49b9538018c6176817e51  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-unsigned.zip\r\n```",
          "created_at": "2025-04-26T20:27:41Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit d2ac748e9e7a92503af1729f2397778979cdd240<br>(master) | commit 15a7734682e91413ac1804fea0fbc0d76f57c781<br>(pull/32357/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`a4024080f4ba963e...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-aarch64-linux-gnu-debug.tar.gz) | [`55dfecc3220b4beb...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`8be9fd8388335ba2...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-aarch64-linux-gnu.tar.gz) | [`6e5f5ff2ea430b9f...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`57393ea8c1f3a173...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-arm-linux-gnueabihf-debug.tar.gz) | [`0e5731ed44539ec9...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`6cb5593d00e733df...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-arm-linux-gnueabihf.tar.gz) | [`c97388b4c7b0b904...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`7d4543658956be9b...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-arm64-apple-darwin-codesigning.tar.gz) | [`f8fbfced6f202eda...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`3d7113bc9088e762...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-arm64-apple-darwin-unsigned.tar.gz) | [`feabcae9d7e28bb1...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`57a42d408a6c3029...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-arm64-apple-darwin-unsigned.zip) | [`e6a0e6d5a37778d5...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`aa786716689e0718...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-powerpc64-linux-gnu-debug.tar.gz) | [`7d0cb17471de1c12...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`48a3ec6f850df791...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-powerpc64-linux-gnu.tar.gz) | [`a41ae5ac495bf0fb...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`030497333c0f1443...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-riscv64-linux-gnu-debug.tar.gz) | [`f8733daa1903676d...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`041e06b86ee3aaec...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-riscv64-linux-gnu.tar.gz) | [`f22a067646679141...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`cb0497a73f5c3914...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-x86_64-apple-darwin-codesigning.tar.gz) | [`e734d640bc8db35d...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`7d06b35395a61cad...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-x86_64-apple-darwin-unsigned.tar.gz) | [`6b2cc313bd9dbf19...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`aefc94a3ce795ac3...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-x86_64-apple-darwin-unsigned.zip) | [`6618f6320dcd96ce...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`afbdbb52442172fa...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-x86_64-linux-gnu-debug.tar.gz) | [`ad45a3ade80268a6...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`8e04bd7386918c2a...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a-x86_64-linux-gnu.tar.gz) | [`1fb16223dd38cbd1...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`d6c1b8ffc8328d76...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/bitcoin-d2ac748e9e7a.tar.gz) | [`de30a8ffba15890d...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/bitcoin-15a7734682e9.tar.gz) |\n| SHA256SUMS.part | [`df8d088495bd4a48...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/SHA256SUMS.part) | [`0d70fcc5b46322a9...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/SHA256SUMS.part) |\n| guix_build.log | [`ffe66eccb5ab0f27...`](https://drahtbot.space/guix/monotree/d2ac748e9e7a92503af1729f2397778979cdd240/guix_build.log) | [`35c33bf657017995...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/guix_build.log) |\n| guix_build.log.diff |  | [`2777295b6ef63004...`](https://drahtbot.space/guix/monotree/15a7734682e91413ac1804fea0fbc0d76f57c781/guix_build.log.diff) |\n\n",
          "created_at": "2025-04-28T03:17:49Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build:\r\n```bash\r\n8ba76371ec4b297da8d29674c7ec31a01eead8131a8e0bbf9bc7e66fb4e1adff  guix-build-35e57fbe336c/output/aarch64-linux-gnu/SHA256SUMS.part\r\nd16137ebd3ca5eabb9614a6d4c322e05c43727621d1b8eca98ef4321c5964f21  guix-build-35e57fbe336c/output/aarch64-linux-gnu/bitcoin-35e57fbe336c-aarch64-linux-gnu-debug.tar.gz\r\n3f0078d7df0a54497a52541f2252a52d5b50737b96b83f88d8f2aecd76b54cca  guix-build-35e57fbe336c/output/aarch64-linux-gnu/bitcoin-35e57fbe336c-aarch64-linux-gnu.tar.gz\r\n778792dcea8b0e82840c8b50cc103557ecd40264919ceac1cfb94d91ab1497da  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n0f11238007712bb6c06c38a77b3f801dd3872c643a3fba5b94a34c416d15abb9  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/bitcoin-35e57fbe336c-arm-linux-gnueabihf-debug.tar.gz\r\ne4718eabc7b1b3447790ab336bfefa31fbb394f0328f662fea01f93df1259658  guix-build-35e57fbe336c/output/arm-linux-gnueabihf/bitcoin-35e57fbe336c-arm-linux-gnueabihf.tar.gz\r\n838497f52bf171b39f1a9146340172457eadefaab3756ea5b00355da57a9e110  guix-build-35e57fbe336c/output/arm64-apple-darwin/SHA256SUMS.part\r\n1f353d89fa8b27f7ca065cc3f1cf620087a14284740d4748c99db08fe6037992  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-codesigning.tar.gz\r\n0b4d59a5a86ff0c43b70460aa8fd09ca1af581a940e9fbfee1a5583edbb9751d  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-unsigned.tar.gz\r\n079803a3a1b964c4c6dd274de407ab9c59979684152cabba1d85923708e8328b  guix-build-35e57fbe336c/output/arm64-apple-darwin/bitcoin-35e57fbe336c-arm64-apple-darwin-unsigned.zip\r\n7d1fdab64ddf657f5db4ed71c4dea08e5c09964bc9f582d2feef451aa86392d3  guix-build-35e57fbe336c/output/dist-archive/bitcoin-35e57fbe336c.tar.gz\r\nb4eb2c619c5f927d6bf02b4102a5b13da750acf537bdef0b36bee3310a359306  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n737648d611f086127243e245dd2321966300103a2af21a38cfcafc73da2ea5bb  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/bitcoin-35e57fbe336c-powerpc64-linux-gnu-debug.tar.gz\r\n070ee5ece7647441884b4b989ed69c929378c3e8b61ab2d736204e31b3b71c76  guix-build-35e57fbe336c/output/powerpc64-linux-gnu/bitcoin-35e57fbe336c-powerpc64-linux-gnu.tar.gz\r\n892c9c1b27f6eba085c25775dc8a7480c14c1b4bd3228e993dc442a3e6817642  guix-build-35e57fbe336c/output/riscv64-linux-gnu/SHA256SUMS.part\r\n49e8e9a205604eb8ca6684e63c0cea98737d962dbe845980aff7771ccafe6eb9  guix-build-35e57fbe336c/output/riscv64-linux-gnu/bitcoin-35e57fbe336c-riscv64-linux-gnu-debug.tar.gz\r\nab7e9035369edd0ca4a342badb4cb0bbc4daa91b1bbdd072565ff442ef8a40c5  guix-build-35e57fbe336c/output/riscv64-linux-gnu/bitcoin-35e57fbe336c-riscv64-linux-gnu.tar.gz\r\n1c0824eaf67a5ca65d508458ec10aeb6d4aedb299828edc2e7b4b47947d4d3a3  guix-build-35e57fbe336c/output/x86_64-apple-darwin/SHA256SUMS.part\r\ne629119e5a7a425efc851eaab123d46f0781ee8d74fac6f7a3766c9fc8f627bf  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-codesigning.tar.gz\r\nb0ab5e8b778e21a01626b2208d15eafa8f6661fe6118be1122d029af0cb9258b  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-unsigned.tar.gz\r\nef47a05298262b65c7298aeacc57293b83ec52383ac1df7249ad7cb94661885c  guix-build-35e57fbe336c/output/x86_64-apple-darwin/bitcoin-35e57fbe336c-x86_64-apple-darwin-unsigned.zip\r\n5ac871577849ef8ad5a1fcfb42cb3c34d55710f49697c2bde328bab6f4a38a4e  guix-build-35e57fbe336c/output/x86_64-linux-gnu/SHA256SUMS.part\r\n94330b47561d09d94bd9f6fa04a92ee9be4680774ef921653fbac3762ebd1aa2  guix-build-35e57fbe336c/output/x86_64-linux-gnu/bitcoin-35e57fbe336c-x86_64-linux-gnu-debug.tar.gz\r\n3a72d4ed6bcbece378fd15bbc11737654bcf7bb50ac09f122c2144d4d14ee2c2  guix-build-35e57fbe336c/output/x86_64-linux-gnu/bitcoin-35e57fbe336c-x86_64-linux-gnu.tar.gz\r\n21d8e26c11ea0e95e7a8803b2f63477dc50d5aae7072aaf5ae8f1821c70abd16  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n0247ee31fe4cbdfb908b4a377cebe588d560990a29cb452601c6861c30429fd9  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-codesigning.tar.gz\r\nbf3afc049b32e02aea1f238f09637c6b6d6614831fba7c78eea83b4b277b13e6  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-debug.zip\r\nebb562ea6b50dd0be97c175d3a0181cb1846cf44d00f622e058268df132a8d1b  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-setup-unsigned.exe\r\n807d62370d2d8bb2771c2227f48300852459b9a313b49b9538018c6176817e51  guix-build-35e57fbe336c/output/x86_64-w64-mingw32/bitcoin-35e57fbe336c-win64-unsigned.zip\r\n```",
          "created_at": "2025-04-28T15:07:33Z"
        }
      ]
    },
    {
      "number": 32356,
      "title": "cmake: Respect user-provided configuration-specific flags",
      "body": "This PR addresses [this](https://github.com/bitcoin/bitcoin/issues/31491#issuecomment-2542140874) comment:\r\n> I suppose that should only happen if the `-O3` isn't coming from an explicitly set `CMAKE_CXX_FLAGS_RELEASE`.\r\n\r\nWith this PR:\r\n```\r\n$ cmake -B build -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS_RELEASE=\"-O3\"\r\n<snip>\r\nC++ compiler flags .................... -O3 -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/home/hebasto/dev/bitcoin/src=. -fmacro-prefix-map=/home/hebasto/dev/bitcoin/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection\r\nLinker flags .......................... -O3 -fstack-reuse=none -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\r\n```\r\nand\r\n```\r\n$ cmake -B build -DCMAKE_BUILD_TYPE=Release\r\n<snip>\r\nC++ compiler flags .................... -O2 -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/home/hebasto/dev/bitcoin/src=. -fmacro-prefix-map=/home/hebasto/dev/bitcoin/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection\r\nLinker flags .......................... -O2 -fstack-reuse=none -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\r\n```\r\n\r\nWhen calling `cmake` repeatedly using the same build directory, each newly provided `CMAKE_CXX_FLAGS_RELEASE` value will be accommodated. In such a scenario, if the user wishes to revert to the build system defaults, they should unset the `CMAKE_CXX_FLAGS_RELEASE` variable by passing `-UCMAKE_CXX_FLAGS_RELEASE`  to `cmake`.\r\n\r\n---\r\n\r\nThis PR does not aim to resolve _all_ issues mentioned in https://github.com/bitcoin/bitcoin/issues/31491.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-26T11:46:04Z",
      "updated_at": "2025-05-08T15:37:24Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/32356",
      "labels": [
        "Bug",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32356.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32356#pullrequestreview-2818239704), [purpleKarrot](https://github.com/bitcoin/bitcoin/pull/32356#issuecomment-2855114474), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32356#pullrequestreview-2825385905) |\n| Concept ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32356#issuecomment-2832127762) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-26T11:46:07Z"
        },
        {
          "user": "l0rinc",
          "body": "Concept ACK\r\n\r\nNit: the title is a bit ambiguous, not sure what \"replacing them\" mean in this context",
          "created_at": "2025-04-26T12:44:31Z"
        },
        {
          "user": "hebasto",
          "body": "> Concept ACK\r\n> \r\n> Nit: the title is a bit ambiguous, not sure what \"replacing them\" mean in this context\r\n\r\nI meant \"we try to replace `-O3` with `-O2` but only when `CMAKE_CXX_FLAGS_RELEASE` is not specified by the user explicitly\". I'll be happy to adjust wording for a better suggestion.",
          "created_at": "2025-04-26T12:53:35Z"
        },
        {
          "user": "l0rinc",
          "body": "How about:\r\n```\r\ncmake: Respect user-provided compiler optimization level\r\n```",
          "created_at": "2025-04-26T13:35:39Z"
        },
        {
          "user": "hebasto",
          "body": "The commit message has been amended.",
          "created_at": "2025-04-26T18:20:41Z"
        },
        {
          "user": "purpleKarrot",
          "body": "The best approach to respect user-provided flags is to treat **all** `CMAKE_...` variables as **read-only**.\r\nThe only place where those variables may be set, is *outside the project* (ie: env vars, toolchain files, initial cache, cli arguments).\r\n\r\nConsider you have a function in C. Inside that function, you have to perform a division by one of the arguments. Since you cannot divide by zero, you treat the value `0` *as if* the user provided the value `2` instead. Would you consider that a valid approach? Every C programmer should agree that it would be better to have a *narrow contract* that excludes the value `0` as input with `assert(arg != 0);` for example.\r\n\r\nThe same applies in CMake. A project should not modify compile flags, irrespective of where the flags are defined. What a project may do, is provide a defensive error/warning when problematic flags are detected:\r\n\r\n```cmake\r\nif(CMAKE_CXX_FLAGS MATCHES \"-O3\")\r\n   message(FATAL_ERROR \"Building this project with -O3 is not supported.\")\r\nendif()\r\n```",
          "created_at": "2025-05-05T11:04:02Z"
        },
        {
          "user": "hebasto",
          "body": "> The same applies in CMake. A project should not modify compile flags, irrespective of where the flags are defined. What a project may do, is provide a defensive error/warning when problematic flags are detected:\r\n> \r\n> ```cmake\r\n> if(CMAKE_CXX_FLAGS MATCHES \"-O3\")\r\n>    message(FATAL_ERROR \"Building this project with -O3 is not supported.\")\r\n> endif()\r\n> ```\r\n\r\nThis results in behaviour where every configuration step using `-DCMAKE_BUILD_TYPE=Release` with the default flags ends in an error, which is a terrible UX.",
          "created_at": "2025-05-05T11:59:54Z"
        },
        {
          "user": "purpleKarrot",
          "body": "> This results in behaviour where every configuration step using `-DCMAKE_BUILD_TYPE=Release` with the default flags ends in an error, which is a terrible UX.\r\n\r\nThen don't use `-DCMAKE_BUILD_TYPE=Release`. You get better UX with less typing.\r\n\r\nFor local development, just use the default build type. CI and package builds are done with scripts that allow enough ways to specify compile flags.\r\n\r\nDistro packagers want to build all packages with the same compile flags. They will patch out all project specific hacks and also avoid CMake's builtin build types. (For example, Debian uses build type `None`, see [here](https://salsa.debian.org/debian/debhelper/-/blob/main/lib/Debian/Debhelper/Buildsystem/cmake.pm?ref_type=heads#L16)). Any project specific hacks, like enforcing that the selected build type is one of `Debug;Release;RelWithDebInfo;MinSizeRel` or fiddling around compile flags creates trouble for them, because it means that they have to maintain a patch to remove that - in their view - nonsense.",
          "created_at": "2025-05-05T12:51:46Z"
        },
        {
          "user": "ryanofsky",
          "body": "Concept ACK.\r\n\r\nI think I agree with @purpleKarrot that it is bad to override CMAKE_ variables, and in general the build does too much overriding (which I've mentioned before in places like https://github.com/bitcoin/bitcoin/issues/30813#issuecomment-2329412411).\r\n\r\nBut it seems like the PR is moving in the right direction and making a strict improvement by overriding less aggressively than before. I think hebasto's point about wanting CMAKE_BUILD_TYPE=Release (and release builds in multi-config environments like IDE's) to work out of the box is pretty compelling and good reason to try to override the cmake's -O3 default while trying not to override -O3 when it is specified externally.",
          "created_at": "2025-05-05T16:38:53Z"
        },
        {
          "user": "hebasto",
          "body": "The [feedback](https://github.com/bitcoin/bitcoin/pull/32356#discussion_r2074117354) from @purpleKarrot has been addressed.",
          "created_at": "2025-05-06T12:47:27Z"
        },
        {
          "user": "purpleKarrot",
          "body": "ACK edde96376a2961dec3730331b3d171ddf972589f\r\n\r\n>  it seems like the PR is moving in the right direction and making a strict improvement by overriding less aggressively than before. \r\n\r\n:+1: ",
          "created_at": "2025-05-06T15:56:25Z"
        },
        {
          "user": "fanquake",
          "body": "@ryanofsky / @theuni want to circle back?\r\n\r\nI think we'll also backport this for `29.x`.",
          "created_at": "2025-05-08T10:08:11Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 29.x in #32292.",
          "created_at": "2025-05-08T15:37:23Z"
        }
      ]
    },
    {
      "number": 32355,
      "title": "Bugfix: Miner: Don't reuse block_reserved_weight for \"block is full enough to give up\" weight delta",
      "body": "PR #30356 incorrectly changed a constant of `4000` to `m_options.coinbase_max_additional_weight` in the check for when to give up finding another transaction to fill the block:\r\n\r\n```diff\r\n             if (nConsecutiveFailed > MAX_CONSECUTIVE_FAILURES && nBlockWeight >\r\n-                    m_options.nBlockMaxWeight - 4000) {\r\n+                    m_options.nBlockMaxWeight - m_options.block_reserved_weight) {\r\n                 // Give up if we're close to full and haven't succeeded in a while\r\n                 break;\r\n             }\r\n```\r\n\r\nBut this constant did not deal with the reserved weight at all. It was in fact simply checking if the block was close to full, and if so, giving up finding another transaction to pad it with after `MAX_CONSECUTIVE_FAILURES` failed attempts.\r\n\r\nIt doesn't seem very logical to reuse the reserve weight for this purpose, and it would be overcomplicated to add yet another setting, so this PR changes it to a new constexpr.\r\n",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2025-04-26T07:45:49Z",
      "updated_at": "2025-05-02T10:25:44Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32355",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32355.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/32355#pullrequestreview-2796264751), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/32355#pullrequestreview-2797625801), [achow101](https://github.com/bitcoin/bitcoin/pull/32355#issuecomment-2840393223) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-26T07:45:52Z"
        },
        {
          "user": "achow101",
          "body": "ACK 524f981bb87319fdd6ff2ab4a932c4b4e31a7398",
          "created_at": "2025-04-29T22:40:55Z"
        },
        {
          "user": "Sjors",
          "body": "Concept ACK\r\n\r\nIf it wasn't for the hardcoded minimum `-blockreservedweight=2000`, then if the user set it to zero this loop might never exit? In any case, it's indeed an unrelated concept so deserves its own constant.",
          "created_at": "2025-05-02T10:24:18Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 3,
    "issues": 0
  }
}