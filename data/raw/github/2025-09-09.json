{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:12:58.291496+00:00",
  "date": "2025-09-09",
  "pull_requests": [
    {
      "number": 33354,
      "title": "txgraph: use enum Level instead of bool main_only",
      "body": "Part of #30289. Inspired by https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2331387778.\r\n\r\nSince there has been more than one case in the development of #28676 of calling a `TxGraph` function without correctly setting the `bool main_only` argument that many of its interface functions have, make these mandatory and explicit, using an `enum class Level`:\r\n\r\n```c++\r\nenum class Level {\r\n    TOP, //!< Refers to staging if it exists, main otherwise.\r\n    MAIN //!< Always refers to the main graph, whether staging is present or not.\r\n};\r\n```",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-09-09T19:57:12Z",
      "updated_at": "2025-09-11T15:21:36Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33354",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33354.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/33354#pullrequestreview-3205867427), [instagibbs](https://github.com/bitcoin/bitcoin/pull/33354#issuecomment-3274911970), [glozow](https://github.com/bitcoin/bitcoin/pull/33354#pullrequestreview-3212180028) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33157](https://github.com/bitcoin/bitcoin/pull/33157) (cluster mempool: control/optimize TxGraph memory usage by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (âœ¨ experimental)\n\nPossible typos and grammar issues:\n\n- \"(which may be indicative of the transaction having been removed already.\" -> \"(which may be indicative of the transaction having been removed already).\" [Missing closing parenthesis makes the parenthetical unclosed and the sentence punctuation inconsistent.]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-09-09T19:57:18Z"
        },
        {
          "user": "instagibbs",
          "body": "concept ACK, having the two values was never confusing, it just took mental load to figure out what the implied argument meant in each context (and lead to bugs too)",
          "created_at": "2025-09-10T12:32:39Z"
        },
        {
          "user": "instagibbs",
          "body": "ACK d45f3717d2c65d1a6012a4bc2f47ff75004fd171\r\n\r\nsignificantly easier to read usages, thank you",
          "created_at": "2025-09-10T13:08:51Z"
        }
      ]
    },
    {
      "number": 33353,
      "title": "log: show reindex progress in `ImportBlocks`",
      "body": "### Summary\r\n\r\nWhen triggering a reindex, users have no indication of progress.\r\n\r\n### Fix\r\n\r\nThis patch precomputes the total number of block files so progress can be shown.\r\nInstead of only displaying which block file is being processed, it now shows the percent complete.\r\n\r\n### Reproducer + expected results\r\n\r\n```bash\r\ncmake -B build -DCMAKE_BUILD_TYPE=Release && make -C build -j && ./build/bin/bitcoind -datadir=demo -reindex\r\n```\r\n\r\nBefore, the block files were shown one-by-one, there's no way to see how much work is left:\r\n```\r\nReindexing block file blk00000.dat...\r\nLoaded 119920 blocks from external file in 1228ms\r\nReindexing block file blk00001.dat...\r\nLoaded 10671 blocks from external file in 284ms\r\nReindexing block file blk00002.dat...\r\nLoaded 5459 blocks from external file in 263ms\r\nReindexing block file blk00003.dat...\r\nLoaded 5595 blocks from external file in 267ms\r\n```\r\n\r\nAfter the change we add a percentage:\r\n```\r\nReindexing block file blk00000.dat (0% complete)...\r\nLoaded 119920 blocks from external file in 1255ms\r\nReindexing block file blk00001.dat (1% complete)...\r\nLoaded 10671 blocks from external file in 303ms\r\nReindexing block file blk00002.dat (2% complete)...\r\nLoaded 5459 blocks from external file in 278ms\r\nReindexing block file blk00003.dat (3% complete)...\r\nLoaded 5595 blocks from external file in 285ms\r\n```",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-09-09T19:08:37Z",
      "updated_at": "2025-12-22T16:12:21Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33353",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33353.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/33353#pullrequestreview-3433884021), [danielabrozzoni](https://github.com/bitcoin/bitcoin/pull/33353#pullrequestreview-3588239911), [maflcko](https://github.com/bitcoin/bitcoin/pull/33353#pullrequestreview-3588272613) |\n| Concept ACK | [Raimo33](https://github.com/bitcoin/bitcoin/pull/33353#issuecomment-3288490603), [enirox001](https://github.com/bitcoin/bitcoin/pull/33353#pullrequestreview-3231320525) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33854](https://github.com/bitcoin/bitcoin/pull/33854) (fix assumevalid is ignored during reindex by Eunovo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T19:08:42Z"
        },
        {
          "user": "Raimo33",
          "body": "Concept ACK",
          "created_at": "2025-09-13T14:52:33Z"
        },
        {
          "user": "l0rinc",
          "body": "rfm?",
          "created_at": "2025-12-17T22:53:39Z"
        }
      ]
    },
    {
      "number": 33349,
      "title": "[30.x] v30.0rc1",
      "body": "* Bumps version to `v30.0rc1`.\r\n* Generates example bitcoin.conf.\r\n* Generates the manpages (includes backport of f5887a8de4c8b3492aa8713c59c4e3819fd4e42b from #33348).\r\n* Points release-notes.md to the devwiki (https://github.com/bitcoin-core/bitcoin-devwiki/wiki/v30.0-Release-Notes-Draft).",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T10:32:57Z",
      "updated_at": "2025-09-09T14:58:03Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33349",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33349.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/33349#pullrequestreview-3200973343), [janb84](https://github.com/bitcoin/bitcoin/pull/33349#pullrequestreview-3201057744), [stickies-v](https://github.com/bitcoin/bitcoin/pull/33349#pullrequestreview-3201216362) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T10:33:02Z"
        }
      ]
    },
    {
      "number": 33348,
      "title": "contrib: add bitcoin binary to gen-manpages",
      "body": "This was missed in #31375.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T10:30:27Z",
      "updated_at": "2025-09-09T10:55:59Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33348",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33348.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/33348#pullrequestreview-3200876564) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T10:30:34Z"
        },
        {
          "user": "fanquake",
          "body": "Partial (f5887a8de4c8b3492aa8713c59c4e3819fd4e42b) backport to 30.x in #33349.",
          "created_at": "2025-09-09T10:55:59Z"
        }
      ]
    },
    {
      "number": 33347,
      "title": "build: bump `CLIENT_VERSION_MAJOR` to 30",
      "body": "Last step before branch off.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T10:00:04Z",
      "updated_at": "2025-09-09T10:15:01Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33347",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33347.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/33347#pullrequestreview-3200673497) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T10:00:10Z"
        }
      ]
    },
    {
      "number": 33346,
      "title": "doc: remove release note fragment",
      "body": "I've added the content to https://github.com/bitcoin-core/bitcoin-devwiki/wiki/v30.0-Release-Notes-Draft.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T09:44:02Z",
      "updated_at": "2025-09-09T09:47:47Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/33346",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33346.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/33346#pullrequestreview-3200515279) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T09:44:08Z"
        }
      ]
    },
    {
      "number": 33344,
      "title": "[29.x] Backports",
      "body": "Backports:\r\n* #32646\r\n* #33296\r\n* #33310\r\n* #33340\r\n* #33364\r\n* #33395\r\n\r\nPlus changes for 29.2rc1.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T09:19:04Z",
      "updated_at": "2025-09-17T18:06:48Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33344",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33344.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/33344#pullrequestreview-3235483971), [mzumsande](https://github.com/bitcoin/bitcoin/pull/33344#pullrequestreview-3235527352) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-09-09T09:19:11Z"
        },
        {
          "user": "instagibbs",
          "body": "https://github.com/bitcoin/bitcoin/pull/32646 and https://github.com/bitcoin/bitcoin/pull/33296 backports look correct",
          "created_at": "2025-09-12T14:56:46Z"
        },
        {
          "user": "Crypt-iQ",
          "body": "Checked that #32646 and #33296 backports are correct and ran `p2p_compactblocks.py` just to be sure.",
          "created_at": "2025-09-12T15:58:06Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33352,
      "title": "CoinGrinder and SRD disagree on small change",
      "body": "Both CoinGrinder and SRD create a change output, however they disagree on what change output is too small.\n\nConsider SRD selection, which adds `CHANGE_LOWER` to the target value and in so doing, prevents a selection that is less than `CHANGE_LOWER` [ref](https://github.com/bitcoin/bitcoin/blob/c0894a0a2be032cd9a5d5945643689230ab10255/src/wallet/coinselection.cpp#L546C5-L546C47)\n```\ntarget_value += CHANGE_LOWER + change_fee;\n```\n\nHowever, CoinGrinder does not add `CHANGE_LOWER` [ref](https://github.com/bitcoin/bitcoin/blob/c0894a0a2be032cd9a5d5945643689230ab10255/src/wallet/coinselection.cpp#L346)\n```\nconst CAmount total_target = selection_target + change_target;\n```\n\nI believe the correct behavior is for CoinGrinder to add `CHANGE_LOWER` to the `total_target`, like so:\n\n```\nconst CAmount total_target = selection_target + CHANGE_LOWER + change_target;\n```",
      "state": "closed",
      "user": "yancyribbens",
      "created_at": "2025-09-09T18:03:46Z",
      "updated_at": "2025-09-09T18:25:06Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33352",
      "labels": [],
      "comment_list": [
        {
          "user": "yancyribbens",
          "body": "cc @murchandamus ",
          "created_at": "2025-09-09T18:04:06Z"
        },
        {
          "user": "murchandamus",
          "body": "This is intentional.\n\nKnapsack and CoinGrinder use [`GenerateChangeTarget`](https://github.com/bitcoin/bitcoin/blob/c0894a0a2be032cd9a5d5945643689230ab10255/src/wallet/coinselection.cpp#L809) to make a [randomized minimum change](https://github.com/bitcoin/bitcoin/pull/24494), because these two algorithms minimize the overshoot over the minimum change which led to a fingerprint and a clustering of change outputs of the same value. SRD randomly selects inputs, so it already overshoots the minimum change by a random amount.",
          "created_at": "2025-09-09T18:19:08Z"
        }
      ]
    },
    {
      "number": 33351,
      "title": "Higher **reported** memory usage of Bitcoin Core after version 29",
      "body": "For versions of Bitcoin Core after 29.0, common utilities like `top` will report higher RAM usage of the `bitcoind` process than for previous Bitcoin Core versions.\n\nThe size of LevelDB files was increased from 2 MiB to 32 MiB in Bitcoin Core 29.0 (PR https://github.com/bitcoin/bitcoin/pull/30039). LevelDB caches its on-disk files using [`mmap`](https://en.wikipedia.org/wiki/Mmap) and will cache up to 1000 files by default, although our fork increased this number to 4096 (see https://github.com/bitcoin-core/leveldb-subtree/pull/52). This means that if there is enough available memory, the full chainstate database will be cached.\n\nHowever this is not memory actually *used* by the `bitcoind` process, only on-disk database files cached for faster future reads. Therefore in case of memory pressure, the host's kernel will not kill the `bitcoind` process but just drop the `mmap` pages. To be extra clear: **although common utilities will report that Bitcoin Core after 29.0 uses more memory it is not so and it will not lead to OOM**.",
      "state": "open",
      "user": "darosior",
      "created_at": "2025-09-09T16:53:40Z",
      "updated_at": "2025-11-21T21:25:24Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33351",
      "labels": [
        "Resource usage"
      ],
      "comment_list": [
        {
          "user": "Raimo33",
          "body": "looks like a `top` issue to me.",
          "created_at": "2025-09-10T12:44:57Z"
        },
        {
          "user": "sipa",
          "body": "Yeah, it's just a reporting issue.\n\nThe behavior is largely unchanged: the OS will cache disk content in memory regardless if there is a spare physical memory. The difference is that with (more) mmap'ed content, that memory usage will be accounted for by the process itself as shared memory, while otherwise it'll be accounted for as kernel disk cache memory.",
          "created_at": "2025-09-10T12:48:21Z"
        },
        {
          "user": "darosior",
          "body": "Yes this issue is intended for documentation purpose, in case someone looking up for \"bitcoind higher memory usage\" on the tracker or a search engine.",
          "created_at": "2025-09-10T13:37:15Z"
        },
        {
          "user": "tyuxar",
          "body": "It is not just a reporting issue, there is a problem with the memory use of v29.\n\nI've been running Core in a FreeBSD jail for quite a long time (it's at 14.3p4 right now) and has been using the binary pkg.\n\nv28 used at most approximately 1-1.5 GB, but usually it was hovering around 6-800 MB RSS.\n\nv29 went up to slightly over 3GB shortly after startup, and remained there for 24+ hours. This is RSS! The virtual size was 12+ GB (I assume b/c of the mentioned LevelDB memory mapping).\n\nAs I'm running it on a fairly low powered x86 system (APU2) with only 4 GB RAM, it became quite annoying (it's not the only workload on the server).",
          "created_at": "2025-10-01T16:32:10Z"
        },
        {
          "user": "darosior",
          "body": "@tyuxar this is expected and what i explain in OP. If other applications start using memory, caching will be scaled down.",
          "created_at": "2025-11-21T21:25:15Z"
        }
      ]
    },
    {
      "number": 33350,
      "title": "Difficulty in reliably mapping errors from Bitcoin Core due to unstable error codes and messages",
      "body": "### Please describe the feature you'd like to see added.\n\nIt's becoming increasingly difficult to reliably map and handle errors originating from Bitcoin Core. The primary challenge stems from the frequent changes in both the error codes and the descriptive error text.\n\nProblem Description\nOur current error-handling logic relies on parsing the responses from Bitcoin Core. However, this approach is fragile for two main reasons:\n\nUnstable Error Codes: The numerical error codes returned by Bitcoin Core are not stable across versions. An error code that signifies a specific issue in one version might be changed or removed in a future update, which breaks any logic that depends on matching these codes.\n\nChanging Error Messages: Relying on string matching of the error messages is also unreliable. The text of these messages is frequently rephrased, updated, or otherwise modified between releases. This makes text-based error detection brittle and requires constant maintenance to keep up with the changes in Core.\n\nThis instability creates a significant maintenance burden, as our error-handling code needs to be constantly revisited and updated to align with the latest changes in Bitcoin Core.\n\nA clear example of this ongoing struggle can be seen in this related issue/PR, which highlights the effort required to adapt to these changes: https://github.com/btcsuite/btcwallet/pull/1053\n\nSeeking a More Robust Solution\nGiven these challenges, we are looking for better strategies to interpret errors from Bitcoin Core that are less susceptible to these frequent upstream changes.\n\nWe are open to any tips or suggestions how to handle this. Are there more resilient patterns for error handling in this context that we should consider? Any advice would be greatly appreciated.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "open",
      "user": "ziggie1984",
      "created_at": "2025-09-09T13:25:54Z",
      "updated_at": "2025-09-15T17:32:09Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/33350",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "instagibbs",
          "body": "Is there a easy to read table somewhere on how you are interpreting and using specific error codes / msgs and how your software is intended to respond to them? This seems like an twice a year issue, and as far as I know no one else is using the errors for non-debugging reasons, or they're too shy to complain about the breaks.\n\n\n\n",
          "created_at": "2025-09-09T13:58:07Z"
        },
        {
          "user": "ziggie1984",
          "body": "We don't have an easy table but I think for example this gives a good example:\n\nhttps://github.com/lightningnetwork/lnd/blob/master/sweep/fee_bumper.go#L568-L578\n\nIn our fee bumper engine we only bump the fee of a transaction if the error is somehow related to an `insufficient fee` error, otherwise we drop this input from the sweeping system because problems like not having the correct signature or being already spent would cause us to never properly sweep this input.\n\nWhat I am more interested is, does core change these error strings or codes with the awareness that dependant code will have to update or is it not really a goal to stay backwards compatible in regards of the error codes/strings ? \n\nYes I am really surprised that people are not using those error codes to decided based on that what is wrong with their transaction what they for example trying to broadcast. Especially `testMempoolAccept` is by the name actually built to test for a specific error to basically change the transaction accordingly.\n\nMaybe it would be good to always have a highlighting notification in the release notes when error codes/ errror strings change. With that we could react accordingly and update our software.",
          "created_at": "2025-09-09T14:15:51Z"
        },
        {
          "user": "instagibbs",
          "body": "Speaking only for myself since I'm more familiar with both LN (by means of CLN) and Bitcoin Core sides...\n\n> Yes I am really surprised that people are not using those error codes to decided based on that what is wrong with their transaction what they for example trying to broadcast.\n\nI think it's honestly quite rare. People will craft transactions using information gleaned Core (like mempool minfee or fee estimator) and proactively avoid violating it. The software can't do anything about other errors, other than report loudly in logs.\n\nShower thought: Would a \"this type of transaction will not work for some unfixable reason\" vs \"this may work later\" vs \"this may work with fees bumped\" kind of status help? This is why I'm asking for more scenarios.\n\n> Maybe it would be good to always have a highlighting notification in the release notes when error codes/ errror strings change. With that we could react accordingly and update our software.\n\nThis definitely should have been done for `TX_RECONSIDERABLE`. New codes are pretty rare, this one being related to package relay internals. \n\nHowever strings will be changing, and transaction check ordering will change, especially going forward with the cluster mempool rewrite. e.g., ancestor limits are no more, no more rbf carveout, different RBF checks, dropped rules, etc. I don't think it's going to be possible to make promises otherwise.\n\n\n\n",
          "created_at": "2025-09-09T14:28:30Z"
        },
        {
          "user": "ziggie1984",
          "body": "Ok thank you for the information so far, feels like there is currently no easy way for us to proceed so we continue mapping the error strings. What would be very helpful is like a release-note highlight in case the error reporting for the RPC changes. \n\nKeeping this issue open for a bit in case somebody else has a better idea.",
          "created_at": "2025-09-09T15:33:36Z"
        },
        {
          "user": "instagibbs",
          "body": "Chatting with some other devs, one other motivation for better/easier error codes would be to allow logging to be more sane.\n\nFor instance, `sendrawtransaction` may throw an error if already in mempool, which if logged is incredibly noisy and useless for fire-and-forget wallets like CLN.\n\nsubmitpackage already behaves better in that respect, returning a success instead (as it is in the mempool).",
          "created_at": "2025-09-09T15:58:10Z"
        },
        {
          "user": "Roasbeef",
          "body": "> proactively avoid violating it\n\nAvoiding violating the rules is itself a moving target. Consider that a user can set config options in `bitciond` to: affect the min relay fee, reduce the mempool size, etc (min mempool fee is itself a dynamic value). Or the user picks a fee that's below the min relay fee, and the transaction is rejected. Another example is if someone sends you some sats, and you go to spend that transaction zero conf, but get rejected as the ancestor chain is too long. Or if new policy rules are added that cause bitcoind to reject transaction that it previously accepted. \n\nIf a consumer of the RPC API can consistently detect these cases, they can safely retry (or know it isn't possible). \n\nRPC calls like `submitpackage` (or `testmempoolaccept`) help, but as there isn't an atomic transaction submission API, something can show success with `submitpacakge`, but then rejected once it actually hits the mempool. \n\nRight now without set error codes, we're forced to closely examine PRs for inadvertent breaks when error strings are \"improved\" (which typically don't make the . Here's one recent example: https://github.com/btcsuite/btcd/issues/2404: \n> \"non-mandatory-script-verify-flag\" is replaced with \"mempool-script-verify-flag-failed\"\n\n",
          "created_at": "2025-09-09T18:26:00Z"
        },
        {
          "user": "instagibbs",
          "body": "> RPC calls like submitpackage (or testmempoolaccept) help, but as there isn't an atomic transaction submission API, something can show success with submitpacakge, but then rejected once it actually hits the mempool.\n\nSorry can you elaborate? `submitpackage` *should* return an error string if it doesn't enter the local mempool",
          "created_at": "2025-09-09T18:32:08Z"
        },
        {
          "user": "Roasbeef",
          "body": "Ah, I meant `testmempoolaccept`. `testmempoolaccept` was called, but a new/different error was returned, so we weren't able to make a decisions w.r.t \"should we retry or is it hosed\". \n\nRe atomic transaction submission, what I mean is that a sort of race condition can arise between the time you call `testmempoolaccept`, and when you actually submit the package. ",
          "created_at": "2025-09-15T17:32:09Z"
        }
      ]
    },
    {
      "number": 33345,
      "title": "ci: derived LLVM version too new",
      "body": "Running the native MSAN job, it will install `clang 21.1.1`, which will result in a failure to clone the LLVM repo, as there is no 21.1.1 tag:\n```bash\ntime env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" bash -c 'MAKEJOBS=\"-j17\" FILE_ENV=\"./ci/test/00_setup_env_native_msan.sh\" ./ci/test_run_all.sh'\n<snip>\n+ [[ -n MemoryWithOrigins ]]\n+ '[' -n 21 ']'\n++ sed --silent 's@.*clang version \\([0-9.]*\\).*@\\1@p'\n++ clang --version\n+ retry -- git clone --depth=1 https://github.com/llvm/llvm-project -b llvmorg-21.1.1 /llvm-project\nCloning into '/llvm-project'...\nwarning: Could not find remote branch llvmorg-21.1.1 to clone.\nfatal: Remote branch llvmorg-21.1.1 not found in upstream origin\nBefore retry #1: sleeping 0.3 seconds\nCloning into '/llvm-project'...\nwarning: Could not find remote branch llvmorg-21.1.1 to clone.\nfatal: Remote branch llvmorg-21.1.1 not found in upstream origin\nBefore retry #2: sleeping 0.6 seconds\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-09-09T09:37:46Z",
      "updated_at": "2025-09-12T08:46:31Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33345",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "cc @maflcko ",
          "created_at": "2025-09-09T09:37:52Z"
        },
        {
          "user": "davidgumberg",
          "body": "In the apt.llvm.org packages `clang --version` includes the build commit hash, so we could do the following, although it is quite ugly:\n\n```bash\n     git init /llvm-project\n     cd /llvm-project\n     git remote add origin https://github.com/llvm/llvm-project.git\n     LLVM_SHORT_HASH=$( clang --version | sed --silent 's@.*clang version [0-9.]* (++[0-9].*+\\([0-9a-f]*\\)-.*@\\1@p')\n     ${CI_RETRY_EXE} curl -s -H \"Accept: application/vnd.github.v3+json\" \"https://api.github.com/repos/llvm/llvm-project/commits/${LLVM_SHORT_HASH}\" -o llvm_commit.json\n     LLVM_FULL_HASH=$(sed --silent \"s@.*\\\"sha\\\": \\\"\\(${LLVM_SHORT_HASH}[0-9a-f]*\\)\\\".*@\\1@p\" llvm_commit.json)\n     ${CI_RETRY_EXE} git fetch --depth=1 origin $LLVM_FULL_HASH\n     cd /\n```\n\nhttps://github.com/davidgumberg/bitcoin/commit/d3f18db4ff49dd7b421c7b0f9e82f40a1463cc22\n",
          "created_at": "2025-09-10T01:19:14Z"
        },
        {
          "user": "willcl-ark",
          "body": "This appears to have been tagged 3 hours ago, so I think we can close this? \n\nhttps://github.com/llvm/llvm-project/tags\n\n```\n+ retry -- git clone --depth=1 https://github.com/llvm/llvm-project -b llvmorg-21.1.1 /llvm-project\nCloning into '/llvm-project'...\nNote: switching to '5a86dc996c26299de63effc927075dcbfb924167'.\n```",
          "created_at": "2025-09-10T11:29:58Z"
        },
        {
          "user": "fanquake",
          "body": "Yea the tag now exists, but the potential for it to be broken is still the same for every new release.",
          "created_at": "2025-09-10T11:32:45Z"
        },
        {
          "user": "willcl-ark",
          "body": "Because they have an apt packaged version for a while before a GH tag?\n\nIs there anything else we can do about that, other than make sure we only run the latest (GH) tag, rather then the most bleeding-edge apt package?",
          "created_at": "2025-09-10T11:36:54Z"
        },
        {
          "user": "fanquake",
          "body": "I think just using the a (recent) tag is fine, and avoids this issue entirely, rather than trying to match the `libcxx` build to whichever point release of Clang is being installed via apt.",
          "created_at": "2025-09-10T11:50:19Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 4
  }
}