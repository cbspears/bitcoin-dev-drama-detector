{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:36:53.358080+00:00",
  "date": "2025-04-29",
  "pull_requests": [
    {
      "number": 32382,
      "title": "Make `cs_db` mutex non-recursive",
      "body": "Make `cs_db` mutex non-recursive (related to https://github.com/bitcoin/bitcoin/issues/19303).",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-04-29T20:28:55Z",
      "updated_at": "2025-04-30T00:27:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32382",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32382.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-29T20:28:58Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/41386311333</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is due to a lint check detecting trailing whitespace in src/wallet/bdb.h.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-04-30T00:24:27Z"
        }
      ]
    },
    {
      "number": 32381,
      "title": "policy: allow more than one OP_RETURN outputs per tx",
      "body": "Please keep conceptual discussions on the corresponding [mailing list thread](https://gnusha.org/pi/bitcoindev/rhfyCHr4RfaEalbfGejVdolYCVWIyf84PT2062DQbs5-eU8BPYty5sGyvI3hKeRZQtVC7rn_ugjUWFnWCymz9e9Chbn7FjWJePllFhZRKYk=@protonmail.com\r\n).\r\n\r\nBecause of the restriction on the number of `OP_RETURN` outputs per transaction, people are designing protocols that store data in non-pruneable and unspendable outputs. Lift this restriction to stop preventing them from using a less harmful way of achieving the same.\r\n\r\nThis is an alternative to #32359 with the smallest change that addresses the concern i raised on the mailing list thread above. Notably this does not remove any command line option and keeps the limit in place on the size of each `OP_RETURN` output. I still believe we should do #32359, as i signaled there. Hopefully this can be seen as a first step toward this goal, which addresses the short term harm without wasting everyone's time.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2025-04-29T20:21:59Z",
      "updated_at": "2025-05-01T15:40:32Z",
      "comments": 21,
      "url": "https://github.com/bitcoin/bitcoin/pull/32381",
      "labels": [
        "TX fees and policy"
      ]
    },
    {
      "number": 32380,
      "title": "Modernize use of UTF-8 in Windows code",
      "body": "The main goal is to remove [deprecated](https://github.com/bitcoin/bitcoin/issues/32361) code (removed in C++26).\r\n\r\nThis PR employs Microsoft's modern [approach](https://learn.microsoft.com/en-us/windows/apps/design/globalizing/use-utf8-code-page) to handling UTF-8:\r\n> Until recently, Windows has emphasized \"Unicode\" -W variants over -A APIs. However, recent releases have used the ANSI code page and -A APIs as a means to introduce UTF-8 support to apps. If the ANSI code page is configured for UTF-8, then -A APIs typically operate in UTF-8. This model has the benefit of supporting existing code built with -A APIs without any code changes.\r\n\r\nTODO:\r\n- [x] Handle application manifests properly when building with MSVC.\r\n- [x] Bump the minimum supported Windows version to 1903 (May 2019 Update).\r\n- [x] Remove all remaining use cases of the deprecated `std:wstring_convert`.\r\n    - The instance in `subprocess.h` will be addressed in a follow-up PR, as additional tests are likely needed.\r\n    - The usage in `common/system.cpp` is handled in https://github.com/bitcoin/bitcoin/pull/32566.\r\n\r\nResolves partially https://github.com/bitcoin/bitcoin/issues/32361.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-29T16:55:29Z",
      "updated_at": "2025-10-28T22:42:58Z",
      "comments": 19,
      "url": "https://github.com/bitcoin/bitcoin/pull/32380",
      "labels": [
        "Windows"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32380.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32380#pullrequestreview-3307401839), [laanwj](https://github.com/bitcoin/bitcoin/pull/32380#issuecomment-3422576068), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32380#pullrequestreview-3390035341) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33669](https://github.com/bitcoin/bitcoin/pull/33669) (Add libbitcoinkernel example files by w0xlt)\n* [#33247](https://github.com/bitcoin/bitcoin/pull/33247) (build: Remove CMAKE_SKIP_BUILD_RPATH and SKIP_BUILD_RPATH settings by 151henry151)\n* [#32951](https://github.com/bitcoin/bitcoin/pull/32951) (build: Explicitly set Qt's `AUTO{MOC,RCC,UIC}` property per target by hebasto)\n* [#31723](https://github.com/bitcoin/bitcoin/pull/31723) (node: Add --debug_runs/-waitfordebugger + --debug_cmd by hodlinator)\n* [#31260](https://github.com/bitcoin/bitcoin/pull/31260) (scripted-diff: Type-safe settings retrieval by ryanofsky)\n* [#30595](https://github.com/bitcoin/bitcoin/pull/30595) (kernel: Introduce C header API by TheCharlatan)\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-29T16:55:32Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased on https://github.com/bitcoin/bitcoin/pull/32383.",
          "created_at": "2025-04-30T09:45:33Z"
        },
        {
          "user": "laanwj",
          "body": "After this we should revert our custom [leveldb unicode patch](https://github.com/bitcoin-core/leveldb-subtree/commit/f8ae182c1e5176d12e816fb2217ae33a5472fdd7). This would make the `env_windows` backend go back to using the `A` functions, which then take UTF-8 as-is.\r\n\r\nEdit: After this, i could find the following uses of Windows -W WCHAR functions remaining:\r\n\r\n- LevelDB (see above)\r\n- subprocess: `CreateProcessW` (upstream issue, i guess)\r\n- `src/random.cpp`: `CryptAcquireContextW` - not actually passing strings, so no problem. Mind this function is deprecated for out-of-scope reasons: #32391\r\n- `src/util/fs.cpp`: `CreateFileW`  - converts using `file.wstring().c_str()`\r\n- `src/util/fs_helpers.cpp`: `SHGetSpecialFolderPathW` - converts using `fs::path(WCHAR*)`\r\n- `src/qt/guiutil.cpp`: `GetModuleFileNameW` - result passed directly into `ISHellLinkW` interface, might be better to leave this code (`SetStartOnSystemStartup`) as-is\r\n- `src/qt/guiutil.cpp`: `PathRemoveFileSpecW` - idem",
          "created_at": "2025-05-01T07:04:22Z"
        },
        {
          "user": "hebasto",
          "body": "Please review https://github.com/bitcoin/bitcoin/pull/32396 first.",
          "created_at": "2025-05-01T15:30:03Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased on https://github.com/bitcoin/bitcoin/pull/32396.",
          "created_at": "2025-05-01T15:36:12Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit eba5f9c4b63fe46261fbb3e71b9a94832d105b23<br>(master) | commit d039c6a5588ed563753e7dbc7598091623a6b72f<br>(pull/32380/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`dd18c4706ae0a247...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-aarch64-linux-gnu-debug.tar.gz) | [`86637bd208268bb1...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`4216933d26250c15...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-aarch64-linux-gnu.tar.gz) | [`e5bbf8a01575dffd...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`f972e0bd2981ac67...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-arm-linux-gnueabihf-debug.tar.gz) | [`8afd5f526dc8f4cf...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`3ca06111b5a591e8...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-arm-linux-gnueabihf.tar.gz) | [`d4c0fd8d5ce3ba86...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`8a9c416ffe2e3d36...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-arm64-apple-darwin-codesigning.tar.gz) | [`0697f6515271ae7d...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`216c1a1f68356c92...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-arm64-apple-darwin-unsigned.tar.gz) | [`9bca33ae11db549e...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`1f4d27d16e6c3eea...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-arm64-apple-darwin-unsigned.zip) | [`4a745d1d4ebdf725...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`8900b88ab21f9f48...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-powerpc64-linux-gnu-debug.tar.gz) | [`1eb495cd89d88ecd...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`c7ed6137d21d3e52...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-powerpc64-linux-gnu.tar.gz) | [`92b05ec45b154612...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`aad7744d23e2a136...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-riscv64-linux-gnu-debug.tar.gz) | [`6f5ce4a909e4ea0c...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`d49be6063aa6a124...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-riscv64-linux-gnu.tar.gz) | [`0af7c1a58a6167f9...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`c8973dacfc9e519c...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-x86_64-apple-darwin-codesigning.tar.gz) | [`8f70bddec78726b2...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`9ca6afb860f0b246...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-x86_64-apple-darwin-unsigned.tar.gz) | [`6525d1b7cde740ba...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`a364bd58765172cc...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-x86_64-apple-darwin-unsigned.zip) | [`174395eb35a55891...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`c11030172812a7c1...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-x86_64-linux-gnu-debug.tar.gz) | [`3f1a15b4c2c184f4...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`f288901ecf194ab8...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f-x86_64-linux-gnu.tar.gz) | [`aa602ac4c259b746...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`82d1cd8e8b352d6b...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/bitcoin-eba5f9c4b63f.tar.gz) | [`26375d232dfe0d5d...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/bitcoin-d039c6a5588e.tar.gz) |\n| SHA256SUMS.part | [`a0c3bbbfdd25fd25...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/SHA256SUMS.part) | [`fffa601b9ae5c99f...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/SHA256SUMS.part) |\n| guix_build.log | [`d4d91f9e2f775124...`](https://drahtbot.space/guix/monotree/eba5f9c4b63fe46261fbb3e71b9a94832d105b23/guix_build.log) | [`21db7fa459cab888...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/guix_build.log) |\n| guix_build.log.diff |  | [`2dadd820439d138b...`](https://drahtbot.space/guix/monotree/d039c6a5588ed563753e7dbc7598091623a6b72f/guix_build.log.diff) |\n\n",
          "created_at": "2025-05-05T09:00:46Z"
        },
        {
          "user": "hebasto",
          "body": "~Rebased on https://github.com/bitcoin/bitcoin/pull/32537.~",
          "created_at": "2025-05-16T16:34:43Z"
        },
        {
          "user": "hebasto",
          "body": "Changes overlapping with https://github.com/bitcoin/bitcoin/pull/32566 have been dropped.",
          "created_at": "2025-05-20T14:06:12Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased to refresh the CI.",
          "created_at": "2025-09-16T19:47:50Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased to resolve conflict with https://github.com/bitcoin/bitcoin/pull/33333.",
          "created_at": "2025-09-18T19:25:20Z"
        },
        {
          "user": "hebasto",
          "body": "The [feedback](https://github.com/bitcoin/bitcoin/pull/32380#discussion_r2367130713) from @hodlinator has been addressed.",
          "created_at": "2025-09-22T11:17:34Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased to resolve a conflict with the merged https://github.com/bitcoin/bitcoin/pull/33229.",
          "created_at": "2025-09-26T10:06:31Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 200150beba6601237036bc01ee10f6a0a2246c3d<br>(master) | commit bb0ee9eaadd3b4880c32eb62c25e1520779c05dc<br>(pull/32380/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`8b507518bb51691d...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-aarch64-linux-gnu-debug.tar.gz) | [`4ab7c377e0164c54...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`3c4e7eae2fbc2739...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-aarch64-linux-gnu.tar.gz) | [`29cae07c8b058970...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`d2e4797ee458ecd6...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-arm-linux-gnueabihf-debug.tar.gz) | [`fa782a9cdccdb171...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`b2663104b730e5fa...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-arm-linux-gnueabihf.tar.gz) | [`fc9f4eaf19567db3...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`df533472c5450b8d...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-arm64-apple-darwin-codesigning.tar.gz) | [`1d12ce3192a92f63...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`e44d3d269bb7a55f...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-arm64-apple-darwin-unsigned.tar.gz) | [`8b55a56af545cf3d...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`e9a9ffec43d51ab3...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-arm64-apple-darwin-unsigned.zip) | [`667b789c2d261047...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`db8029b74ba6a2c0...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-powerpc64-linux-gnu-debug.tar.gz) | [`005c703ffc2f1827...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`8cb1005f50b23f8b...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-powerpc64-linux-gnu.tar.gz) | [`7bde60156079b63f...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`5cd539b312fa646b...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-riscv64-linux-gnu-debug.tar.gz) | [`bf7966ad4b7654cf...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`0545ba10070bb97d...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-riscv64-linux-gnu.tar.gz) | [`77316131d61829a8...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`89215f0a833197e2...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-x86_64-apple-darwin-codesigning.tar.gz) | [`3a44efb30ec20c97...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`d1a2beb0aa979bcd...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-x86_64-apple-darwin-unsigned.tar.gz) | [`4786243daff83286...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`d4fc6e5c7d09193c...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-x86_64-apple-darwin-unsigned.zip) | [`bd9d28f6d032e2f5...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`0ca8f15f2aa1dbe8...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-x86_64-linux-gnu-debug.tar.gz) | [`8e79adbaf9176d29...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`ef0f5a5ac3c3f72c...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66-x86_64-linux-gnu.tar.gz) | [`bc61736a8f97d603...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`2a27334bd50da362...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/bitcoin-200150beba66.tar.gz) | [`f262471cb33415d4...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/bitcoin-bb0ee9eaadd3.tar.gz) |\n| SHA256SUMS.part | [`6c1ae9a9bb56f118...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/SHA256SUMS.part) | [`aab8188acf36aa9f...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/SHA256SUMS.part) |\n| guix_build.log | [`a4b045e1841b798a...`](https://drahtbot.space/guix/monotree/200150beba6601237036bc01ee10f6a0a2246c3d/guix_build.log) | [`6a33cf3d267b4c90...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/guix_build.log) |\n| guix_build.log.diff |  | [`c5dd1938681b09c4...`](https://drahtbot.space/guix/monotree/bb0ee9eaadd3b4880c32eb62c25e1520779c05dc/guix_build.log.diff) |\n\n",
          "created_at": "2025-09-28T22:56:50Z"
        },
        {
          "user": "hebasto",
          "body": "Friendly ping @laanwj :)",
          "created_at": "2025-09-29T11:34:53Z"
        },
        {
          "user": "hebasto",
          "body": "Rebased to resolve a conflict with the merged #33489.",
          "created_at": "2025-10-06T18:43:10Z"
        },
        {
          "user": "laanwj",
          "body": "re-ACK 53e4951a5b5b9d166d278db4240513d09b447f58\r\nEspecially now that Windows 10 is EOL, it's fine to depend on a Windows 10 feature.\r\n",
          "created_at": "2025-10-20T15:25:42Z"
        },
        {
          "user": "hebasto",
          "body": "Friendly ping @ryanofsky @davidgumberg :)",
          "created_at": "2025-10-27T11:26:17Z"
        },
        {
          "user": "hebasto",
          "body": "> Don't have access to a Windows device at the moment but I'll try and test this at some point, would there be a reasonable unit/functional test that `fsbridge::fopen` and argv can still handle non-ascii stuff on Windows? Might be nice to have, but not blocking by an means.\r\n\r\nI believe it is handled by unit and functional tests:\r\n```\r\n$ git grep ‚Çø_üèÉ\r\nsrc/test/dbwrapper_tests.cpp:    fs::path ph = m_args.GetDataDirBase() / \"test_runner_‚Çø_üèÉ_20191128_104644\";\r\nsrc/test/fs_tests.cpp:    std::string u8_str = \"fs_tests_‚Çø_üèÉ\";\r\nsrc/test/fs_tests.cpp:    std::u8string str8{u8\"fs_tests_‚Çø_üèÉ\"};\r\nsrc/test/fs_tests.cpp:    std::string test_filename = \"fs_tests_‚Çø_üèÉ.dat\";\r\nsrc/test/fs_tests.cpp:    std::string expected_stem = \"fs_tests_‚Çø_üèÉ\";\r\nsrc/test/fs_tests.cpp:    fs::path tmpfile1 = tmpfolder / fs::u8path(\"fs_tests_‚Çø_üèÉ\");\r\nsrc/test/fs_tests.cpp:    fs::path tmpfile2 = tmpfolder / fs::path(u8\"fs_tests_‚Çø_üèÉ\");\r\nsrc/test/fs_tests.cpp:        fs::path p = fsbridge::AbsPathJoin(tmpfolder, fs::u8path(\"fs_tests_‚Çø_üèÉ\"));\r\ntest/functional/test_runner.py:    tmpdir = \"%s/test_runner_‚Çø_üèÉ_%s\" % (args.tmpdirprefix, datetime.datetime.now().strftime(\"%Y%m%d_%H%M%S\"))\r\n```",
          "created_at": "2025-10-28T21:20:44Z"
        },
        {
          "user": "davidgumberg",
          "body": "> I believe it is handled by unit and functional tests:\r\n> \r\n> ```\r\n> $ git grep ‚Çø_üèÉ\r\n> src/test/dbwrapper_tests.cpp:    fs::path ph = m_args.GetDataDirBase() / \"test_runner_‚Çø_üèÉ_20191128_104644\";\r\n> [...]\r\n> ```\r\n\r\nAhh, I missed that, I thought üèÉ was just for show, but it serves a useful purpose, thanks!",
          "created_at": "2025-10-28T22:10:12Z"
        }
      ]
    },
    {
      "number": 32379,
      "title": "p2p: stop special-casing witness-stripped error for unconfirmed transactions",
      "body": "Opening as draft to facilitate discussions, this has some issues.\r\n\r\nThis special-case was introduced in #18044 to avoid hindering relay of witness transactions in adversarial situations where most connections on the network were still using txid-based relay. This is not a concern anymore. Since it is expensive to detect, get rid of the special case.\r\n\r\nThis may however cause issues for orphan resolution in adversarial situations, since fetching the parent is done using its txid. Greg Sanders pointed out to me on IRC this could be an issue for package relay. I'm opening here as draft to facilitate discussion.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2025-04-29T14:23:35Z",
      "updated_at": "2025-09-11T13:50:52Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/pull/32379",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32379.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32421](https://github.com/bitcoin/bitcoin/pull/32421) (test: refactor: overhaul (w)txid determination for `CTransaction` objects by theStack)\n* [#32317](https://github.com/bitcoin/bitcoin/pull/32317) (kernel: Separate UTXO set access from validation functions by TheCharlatan)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-29T14:23:55Z"
        },
        {
          "user": "glozow",
          "body": "> This may however cause issues for orphan resolution in adversarial situations, since fetching the parent is done using its txid. Greg Sanders pointed out to me on IRC this could be an issue for package relay.\r\n\r\nJust want to point out this is one of the motivations for (real) package relay, so we can get rid of txid-based fetching. https://github.com/bitcoin/bips/blob/master/bip-0331.mediawiki#handle-orphans-better\r\n\r\nToday however, you'd be able to block (opportunistic) \"package relay\" by sending the parent witness-stripped first.",
          "created_at": "2025-04-29T14:30:40Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-06-11T22:21:12Z"
        },
        {
          "user": "darosior",
          "body": "It took me a while to remember the context here, since we had those discussions offline. I'll try to put a short summary here for anybody else who did not participate in those discussions or doesn't remember the details.\r\n\r\nThe current behaviour in master is the following. Upon Script validation failure of an unconfirmed transaction:\r\nhttps://github.com/bitcoin/bitcoin/blob/5e6dbfd14ea9eace1c7e5ee76b140be46a0ec855/src/validation.cpp#L1238-L1240\r\n\r\nIf the transaction has no witness attached, Script validation will be performed a second and third time to detect whether it is spending a witness program:\r\nhttps://github.com/bitcoin/bitcoin/blob/5e6dbfd14ea9eace1c7e5ee76b140be46a0ec855/src/validation.cpp#L1245-L1246\r\n\r\nThis 3-step logic was introduced along with Segwit in 8b49040854be2e26b66366aeae1cba4716f93d93, to avoid adding the txid of transactions with a mutated witness to the reject filter. This was changed in https://github.com/bitcoin/bitcoin/pull/8525, after which witness transactions which failed validation were never added to the reject filter at all. This is because it would otherwise trivial for an attacker to hinder the propagation of a witness transaction until wtxid-relay (see #8279).\r\n\r\nThe witness malleation issue was fixed with wtxid-relay in #18044, since at this point inserting the wtxid of a rejected transaction in the reject filter won't prevent the same transaction with a different (valid) witness to be accepted in the future (if it is announced on wtxid relay connection). However, this 3-step script validation logic was still necessary until the network was mostly upgraded to wtxid relay. This is because otherwise one malicious peer could still interfere with the honest transaction relay of all txid-relay peers. The attack is as follows:\r\n- An honest node has N txid-relay peers and one malicious wtxid-relay peer (the malicious peer can be wtxid or txid it doesn't matter).\r\n- A valid witness transaction is broadcast. Before any of its honest txid-relay peers sends the valid witness transaction to the node, the malicious peer sends it after stripping its witness.\r\n- The honest node now has the wtxid of the witness-stripped transaction, i.e. the txid of the transaction, in its reject filter. Any honest txid-relay peer trying to announce the valid witness transaction will hit the reject filter.\r\n\r\nThis is not a concern anymore because wtxid-relay was released on 2021-01-15 with 0.21.0. Nowadays, virtually all connections on the network are wtxid-relay. Therefore we can get rid of performing 3 times the expensive Script validation on non-witness transactions relayed to us for ~free. This is the argument made by [OP](https://github.com/bitcoin/bitcoin/pull/32379#issue-3028559212).\r\n\r\nHowever, this is not the full story. Since wtxid-relay was introduced a new ~~form of~~ dependency on \"txid-based transaction resolution\" was introduced with 1p1c package relay (h/t @instagibbs and @glozow). It is still possible for a malicious peer to interfere with parent resolution in this case. That is, if this resolution checks the reject filter, which @glozow shared a branch to stop doing: https://github.com/bitcoin/bitcoin/pull/32379#pullrequestreview-2816057986.\r\n\r\nTherefore this change is in the end a tradeoff between getting rid of the 3x script validation and being able to cache rejected parents in 1p1c.",
          "created_at": "2025-06-18T18:08:03Z"
        },
        {
          "user": "darosior",
          "body": "> This doesn't fully fix the fact that 1p1c is disrupted, because the parent is still not requested (its txid is AlreadyHave).\r\n\r\nCouldn't `AlreadyHave()` be tweaked to optionally not look up the reject filter similarly to `include_reconsiderable`:\r\nhttps://github.com/bitcoin/bitcoin/blob/e872a566f251c73908de8b6d243c94a6679c2eac/src/node/txdownloadman_impl.cpp#L147\r\n\r\nIt seems like a smaller change than not checking the reject filter anymore for parent resolution, so we might as well do both so as to not affect 1p1c behaviour at all?",
          "created_at": "2025-06-18T18:17:02Z"
        },
        {
          "user": "glozow",
          "body": ">  Since wtxid-relay was introduced a new form of \"txid-based transaction resolution\" was introduced with 1p1c package relay\r\n\r\nNo, txid-based orphan resolution has been around for many years - I think before segwit. Opportunistic 1p1c just submits the parent and child together when the parent arrives.",
          "created_at": "2025-06-18T18:19:20Z"
        },
        {
          "user": "darosior",
          "body": "Yes what i meant is \"we now rely on something else for which it's pretty bad if one peer can block us from seeing a transaction\". Changed the wording, thanks.",
          "created_at": "2025-06-18T18:22:01Z"
        },
        {
          "user": "glozow",
          "body": "> Couldn't AlreadyHave() be tweaked to optionally not look up the reject filter:\r\n\r\nI assume you mean just for the check that filters `getdata`s. That means we'll then request transactions we've already rejected (we don't know whether this is an orphan resolution or a normal tx). Although maybe that won't lead to too many redownloads in practice, since the filter will still exist at `inv` receipt. Or maybe we also skip when the `getdata` is of type txid? Will have a think.",
          "created_at": "2025-06-18T18:27:32Z"
        },
        {
          "user": "glozow",
          "body": "Thanks for writeup @darosior üëç \r\n\r\n> This is not a concern anymore because wtxid-relay was released on 2021-01-15 with 0.21.0. Nowadays, virtually all connections on the network are wtxid-relay. \r\n\r\nDigging out some things from my (faint) memory, there was also some discussion about whether it's problematic if some service uses txid-based relay and an attacker tries to censor their transactions by sending everybody witness stripped versions ahead of time. I think we concluded that this level of attack (where attacker is the first person to hear about it AND manages to frontrun every single connection made by the victim) is out of scope.",
          "created_at": "2025-06-18T18:33:28Z"
        },
        {
          "user": "darosior",
          "body": "Yes, especially if we consider the costs to mitigating this. We shouldn't impose to all Bitcoin nodes on the network to perform 3 times expensive Script validation just for some company that 1) doesn't want to update their service to wtxid-relay after 5 years\\* while 2) running the risk of a somewhat sophisticated attack.\r\n\r\n*\\* If this is released in 30.0, by the time most nodes on the network upgrade it will have been more than 5 years since wtxid-relay was released.*",
          "created_at": "2025-06-18T19:53:30Z"
        },
        {
          "user": "glozow",
          "body": "Following up, this branch removes the logic to halt orphan-processing when there are rejected parents, and removes rejection cache checking by txid altogether. It also adds a new delay for peers that don't support BIP 339 (distinct from the delay for requests by txid): https://github.com/glozow/bitcoin/tree/2025-07-wtxid-only-rej It should be sufficient to address the 1p1c issue.\r\n\r\nThere is a theoretical bandwidth increase from redownloading transactions, but my guess is it's minimal. Nonsegwit transactions, peers that don't support BIP 339, and rejections in general should be fairly rare. I'll use this branch to gather some data on how big these numbers actually are and get back to you?",
          "created_at": "2025-07-10T14:52:49Z"
        },
        {
          "user": "glozow",
          "body": "I ran the above patch for a while and added logging to collect some stats and see how much more redownloading we‚Äôd do. TLDR it seems like we can definitely go ahead with it.\r\n\r\nCaveats: Traffic has been very low so I set my mempool expiry to 1 hour to try to induce more orphan-fetching. I‚Äôm a default policy node so I don‚Äôt really expect to be relayed many transactions I‚Äôll reject. There isn‚Äôt much opportunity to test reconsiderable rejections right now because of how low transaction traffic is.\r\n\r\nMy stats in the last 7 days*:\r\n- 100% of my peers have supported wtxidrelay\r\n- 2,482,307 of 2,650,818 (93.64%) of transactions I accepted to my mempool had witnesses.\r\n- 99,900 out of 2,740,857 (3.64%) of the GETDATAs I sent were by txid (we can infer that 100% of these are orphan parent fetching since all my peers were wtxidrelay).\r\n- Out of the 64,832 orphans I saw, I didn‚Äôt see any of their parents in the RecentRejects filter. So I kept all of them (which means these changes didn‚Äôt affect the number of orphans I kept).\r\n- I sent 99,900 requests for 36,319 unique parents. Of the 33,242 transactions I received, 96.20% of them had witnesses and 91.53% were accepted to mempool.\r\n\r\nThe impact of this patch is that we‚Äôll redownload a transaction that is (1) nonsegwit (2) when we are requesting by txid (in practice, always orphan resolution) and (3) we‚Äôve already rejected it.\r\nI don‚Äôt have meaningful stats on rejections, but nonsegwit orphan parents were 0.047% of the transactions I downloaded - a couple dozen per day. The fRejectedParents logic seems to have very little benefit.",
          "created_at": "2025-07-25T17:39:39Z"
        },
        {
          "user": "glozow",
          "body": "Can this be closed?",
          "created_at": "2025-08-11T17:47:16Z"
        },
        {
          "user": "darosior",
          "body": "I was waiting to see the outcome of #33066 to see what to do of this, but i'm happy to close and reopen if necessary. :man_shrugging: ",
          "created_at": "2025-08-11T18:13:20Z"
        },
        {
          "user": "darosior",
          "body": "I would be a nice cleanup to do #33066 and then this PR, but i won't make a priority of working on it. Closing for now.",
          "created_at": "2025-09-11T13:50:49Z"
        }
      ]
    },
    {
      "number": 32378,
      "title": "interfaces: refactor: move `Mining` and `BlockTemplate`  implementation to miner",
      "body": "#### Motivation\r\n\r\nIn  [Internal interface guidelines](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#internal-interface-guidelines)\r\n\r\nIt's stated that \r\n\r\n> Interface method definitions should wrap existing functionality instead of implementing new functionality. Any substantial new node or wallet functionality should be implemented in [src/node/](https://github.com/bitcoin/bitcoin/blob/master/src/node) or [src/wallet/](https://github.com/bitcoin/bitcoin/blob/master/src/wallet) and just exposed in [src/interfaces/](https://github.com/bitcoin/bitcoin/blob/master/src/interfaces) instead of being implemented there, so it can be more modular and accessible to unit tests.\r\n\r\nHowever the some methods in the newly added  `BlockTemplateImpl` and `MinerImpl`  classes partially enforces this guideline, as the implementations of the `submitSolution`, `waitNext`, and `waitTipChanged` methods reside within the class itself.\r\n\r\n#### What the PR Does\r\n\r\nThis PR introduces a simple refactor by moving certain method implementations from `BlockTemplateImpl` into the miner module. It introduces three new functions:\r\n\r\n1.  Remove rundundant coinbase fee check in `waitNext`\r\n2. **`AddMerkleRootAndCoinbase`**: Computes the block's Merkle root, inserts the coinbase transaction, and sets the Merkle root in the block. This function is called by `submitSolution` before the block is submitted for processing.\r\n\r\n3. **`WaitAndCreateNewBlock`**: Returns a new block template either when transaction fees reach a certain threshold or when a new tip is detected. If a timeout is reached, it returns `nullptr`. The `waitNext` method in `BlockTemplateImpl` now simply wraps this function.\r\n4. Move `GetTip` implementation to miner.\r\n\r\n5. **`WaitTipChanged`**: Returns the tip when the chain it changes, or `nullopt` if a timeout or interrupt occurs. The `waitTipChanged` method in `MinerImpl` now calls `GetTip` after invoking `ChainTipChanged`, and returns the tip.\r\n\r\n#### Behavior Change\r\n\r\n- We now only `Assert` for  a valid chainman and notifications pointer once.\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-04-29T13:48:42Z",
      "updated_at": "2025-05-14T21:02:01Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/pull/32378",
      "labels": [
        "interfaces"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32378.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32378#pullrequestreview-2840153694), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32378#pullrequestreview-2840779063), [achow101](https://github.com/bitcoin/bitcoin/pull/32378#issuecomment-2881360377) |\n| Stale ACK | [musaHaruna](https://github.com/bitcoin/bitcoin/pull/32378#pullrequestreview-2837998074) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\nthen -> from [incorrect comparison]\n\n",
          "created_at": "2025-04-29T13:48:46Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/41351512028</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure was caused by clang-tidy generating errors due to an unused using-declaration in testnet4_miner_tests.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-04-29T15:22:17Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "- Updated to fix recent comment by @ryanofsky  see [5fa54e2..c8a3fab](https://github.com/bitcoin/bitcoin/compare/77949ef5267e4de4e68a19560bab81e8d5fa54e2..c8a3fabe4090fa2b9a0e8cef73ed5365e8221ad6)\r\n\r\n- Also fixed tidy issues",
          "created_at": "2025-04-29T16:47:48Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "Forced pushed to address recent comments see [c8a3fabe..31e3808d](https://github.com/bitcoin/bitcoin/compare/c8a3fabe4090fa2b9a0e8cef73ed5365e8221ad6..31e3808df9c59d36a07cad07df89ae1bf9e63000)",
          "created_at": "2025-05-09T16:38:45Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/42145841028</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is due to a lint check identifying trailing whitespace in `src/node/interfaces.cpp`.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-13T15:23:33Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "Force-pushed to address recent comments by @Sjors:\r\n\r\n1. Added an explanation for why we ignore the result of `WaitTipChanged`.\r\n2. Clarified the comment for `AddMerkleRootAndCoinbase`.\r\n3. Shortened line lengths for improved readability.\r\n\r\nAdditionally, in the recent push, I added a commit that deletes the coinbase fee check during block template total fees computation in `waitNext`. This check is redundant after #31897.\r\n\r\n",
          "created_at": "2025-05-13T15:29:27Z"
        },
        {
          "user": "Sjors",
          "body": "I still found the comment a bit confusing: https://github.com/bitcoin/bitcoin/pull/32378#discussion_r2086713176\r\n\r\nMaybe it's better to also move the `GetTip()` implementation to the miner, so we call it from the WaitTipChanged implementation. See https://github.com/Sjors/bitcoin/commits/2025/05/interface/ \r\n\r\nIf you then squash the last commit into 51344920ebe1772d8dd3bece789a6510d774ab59, the result is a smaller change to the `waitTipChanged` body, see 2dae1cb16e3e32aa477713b88adcfbb6251cc779. And it preserves the comment about deadlocks. ",
          "created_at": "2025-05-14T08:05:09Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "@Sjors I've taken your suggestion in this push [0d774ab59..62fc42d475](https://github.com/bitcoin/bitcoin/compare/51344920ebe1772d8dd3bece789a6510d774ab59..62fc42d475df4f23bd93313f95ee7b7eb0d4683f)\r\n\r\nIf the `GetTip` method from the mining interface isn't going to be used by the TP, it can be deleted as well?",
          "created_at": "2025-05-14T13:02:32Z"
        },
        {
          "user": "achow101",
          "body": "ACK 62fc42d475df4f23bd93313f95ee7b7eb0d4683f",
          "created_at": "2025-05-14T19:43:38Z"
        }
      ]
    },
    {
      "number": 32370,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "LEGENDZENT",
      "created_at": "2025-04-29T02:55:33Z",
      "updated_at": "2025-04-29T02:57:47Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32370",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32370.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-29T02:55:36Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32377,
      "title": "Verify AssumeUTXO snapshot hashes during full validation as well",
      "body": "### Summary\n\nWe already hard‚Äëcode the AssumeUTXO height/UTXO-snapshot-hash/tx-count pairs (e.g. for mainnet we have heights **840,000** and **880,000**) in https://github.com/bitcoin/bitcoin/blob/master/src/kernel/chainparams.cpp#L170-L183.\nCurrently, this commitment is enforced only when a node explicitly activates a snapshot via `loadtxoutset`.\n\nDuring a regular initial block download, `-reindex`, or `-reindex-chainstate`, the node never cross‚Äëchecks the live chainstate against these values.\n\n### Proposal\n\nSince the expected UTXO set hash is known at the snapshot heights, we could verify it during full validation to cover both IBD and stored AssumeUTXO data.\nThis self‚Äëconsistency check would synchronize the outcomes of both seeding approaches.\nWhile iterating transactions we'd compute the current hash, and when reaching a snapshot height, we'd assert that the UTXO set hash and transaction count match the hardcoded values.\n\nThis cross‚Äëreference would increase confidence in both mechanisms.\n\nOptionally, we could gate this behavior behind the `assumevalid` flag.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-04-29T13:34:28Z",
      "updated_at": "2026-01-15T09:21:56Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32377",
      "labels": [
        "Feature",
        "Brainstorming",
        "Validation"
      ],
      "comment_list": [
        {
          "user": "mzumsande",
          "body": "Depending on what we do if the hash doesn't match, wouldn't this be effectively be reintroducing something similar to checkpoints (which we just got rid of in #31649)?",
          "created_at": "2025-04-29T14:46:13Z"
        },
        {
          "user": "l0rinc",
          "body": "Yes, we already have the \"checkpoints\", we're just ignoring them.\nThe difference is that we're also validating the checkpoints themselves - giving the assumeutxo scenario more credence (\"every IBD verifies these hashes\").",
          "created_at": "2025-04-29T15:03:49Z"
        },
        {
          "user": "mzumsande",
          "body": "Removing the existing checkpoints is something that has been done to a large part for ideological reasons (devs shouldn't prescribe / hardcode what the \"correct\" chain is), so introducing something similar back in (and not just historical but new ones) just for the sake of AssumeUxto would be quite contentious I think - I view AssumeUtxo as a nice feature, but a second-class citizen to normal IBD. \n\nI guess if we'd just log a warning in case of a mismatch there is no harm (except for the added time spent calculating the hash), but asserting / refusing to continue normal IBD in that case would not be something I'd want.",
          "created_at": "2025-05-05T15:29:03Z"
        },
        {
          "user": "l0rinc",
          "body": "> second-class citizen to normal IBD\n\nAgree, IBD would validate that the AssumeUTXO hashes are correct - lending its credibility to the quicker alternative.",
          "created_at": "2025-05-05T15:37:05Z"
        }
      ]
    },
    {
      "number": 32376,
      "title": "Cannot import descriptors with label and internal:false",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\n```\n$ bitcoin-cli importdescriptors '[{\"desc\":\"addr(bcrt1pm2kch7zv4tuc203tfv97yhfck3z456656u3852m03zfl8x2hnnpqw0jzka)#0ygsck2x\",\"timestamp\":\"now\",\"internal\":false,\"label\":\"l\"}]'\n[\n  {\n    \"success\": false,\n    \"error\": {\n      \"code\": -8,\n      \"message\": \"Internal addresses should not have a label\"\n    }\n  }\n]\n```\n\n### Expected behaviour\n\nSetting internal:false should not be interpreted as internal.\n\nThe problem is that `internal` is a std:optional but it is treated like a bool.\n\nThis fixes it:\n\n```\ndiff --git a/src/wallet/rpc/backup.cpp b/src/wallet/rpc/backup.cpp\nindex ac23b092d4..2c2f90002e 100644\n--- a/src/wallet/rpc/backup.cpp\n+++ b/src/wallet/rpc/backup.cpp\n@@ -1522,7 +1522,7 @@ static UniValue ProcessDescriptorImport(CWallet& wallet, const UniValue& data, c\n         }\n \n         // Internal addresses should not have a label either\n-        if (internal && data.exists(\"label\")) {\n+        if (internal.has_value() && internal.value() && data.exists(\"label\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Internal addresses should not have a label\");\n         }\n ```\n\n### Steps to reproduce\n\nAs above\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nV29.0.0\n\n### Operating system and version\n\nAny\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "gmart7t2",
      "created_at": "2025-04-29T12:38:40Z",
      "updated_at": "2025-10-28T16:08:55Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32376",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "furszy",
          "body": "The fix looks correct (could also use `value_or(false)` to shorten it). Remember to add a test case when you push it.",
          "created_at": "2025-04-29T14:17:37Z"
        },
        {
          "user": "achow101",
          "body": "#31514",
          "created_at": "2025-04-29T17:05:31Z"
        },
        {
          "user": "maflcko",
          "body": "Can be closed after https://github.com/bitcoin/bitcoin/pull/31514?",
          "created_at": "2025-10-28T07:46:17Z"
        }
      ]
    },
    {
      "number": 32375,
      "title": "Stop shipping ARM32 builds for releases?",
      "body": "Clearly there is no hurry here. This is more of a brainstorming issue than a proposal.\n\nFor:\n\n- 64-bit ARM is the standard nowadays for the type of computing hardware our users tend to have (modern Raspberry Pi's and ARM servers). While 32-bit ARM is only still used in low-power embedded systems, an unlikely combination with a bitcoin node.\n\n- 32-bit ARM is the last 32-bit architecture that we ship releases for. After removing this, we could fully focus on optimizing for large virtual address spaces. This means nearly-unrestricted `mmap`, and no need to worry about the virtual memory overhead of more thread stacks.\n\n- Is it still being properly tested at all? If no one really cares, things could break without us noticing.\n\nAgainst:\n\n- There are likely still users that use 2010-era ARM boxes for their nodes, though the number is likely to be dwindling (mine certainly died by now).\n\n- *Requiring* 64-bit even for self-built binaries is a step further, it might be wise to keep the 32-bit door open, at least i'm always hesitant with anything that limits potential hardware that can be used for bitcoin nodes.\n  - OTOH we'd be in good company. Monero *never* supported 32-bit platforms for their node (because of using lmdb).\n\nSee also bitcoin-core/bitcoincore.org#1126, where the default was recently changed to 64-bit.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2025-04-29T11:43:55Z",
      "updated_at": "2025-04-30T12:52:20Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/32375",
      "labels": [
        "Brainstorming",
        "Linux/Unix"
      ],
      "comment_list": [
        {
          "user": "achow101",
          "body": "IIRC, Raspberry Pi OS only started shipping 64-bit OSes a couple of years ago. For a while, you could buy a Pi 3 or 4 which had 64-bit hardware but the available Raspberry Pi OS image was only 32-bit. I would imagine that several of these machines are probably still in use. It also seems like the 32-bit images are still prominently shown on their [website](https://www.raspberrypi.com/software/operating-systems/) so I think it may be a bit premature to stop shipping 32-bit?",
          "created_at": "2025-04-29T17:11:44Z"
        },
        {
          "user": "willcl-ark",
          "body": "I think I heard that that the Pi 5 ARM chips are _unable_ to boot a 32bit kernel (although you can still hack about in a 32 bit userspace if you really want), so it seems that the day is definitely getting nearer.\n\nIf I am correct above the question then perhaps becomes \"how long do we want to ship release builds for Pi 3's and 4's\".",
          "created_at": "2025-04-30T09:56:28Z"
        },
        {
          "user": "maflcko",
          "body": "If this is dropped in the future, I guess we'll wholesale drop support for 32-bit architectures? If there is no release 32-bit build that we feel like is worth keeping, then I wonder if it is worth it to check and support it in CI.",
          "created_at": "2025-04-30T11:01:13Z"
        },
        {
          "user": "l0rinc",
          "body": "As mentioned before, 32 bit support isn't tested as thoroughly as 64 (e.g. https://github.com/bitcoin/bitcoin/pull/28531/files#r2036954366), it would simplify a few scenarios if we didn't have walk on eggshells when doing storage size calculations (e.g. https://github.com/bitcoin/bitcoin/blob/master/src/util/byte_units.h#L15)",
          "created_at": "2025-04-30T11:49:21Z"
        },
        {
          "user": "laanwj",
          "body": "> IIRC, Raspberry Pi OS only started shipping 64-bit OSes a couple of years ago. For a while, you could buy a Pi 3 or 4 which had 64-bit hardware but the available Raspberry Pi OS image was only 32-bit. I would imagine that several of these machines are probably still in use. It also seems like the 32-bit images are still prominently shown on their [website](https://www.raspberrypi.com/software/operating-systems/) so I think it may be a bit premature to stop shipping 32-bit?\n\nAgree, there's no hurry.\n\n> I think I heard that that the Pi 5 ARM chips are unable to boot a 32bit kernel (although you can still hack about in a 32 bit userspace if you really want), so it seems that the day is definitely getting nearer.\n\nCorrect, it's more complicated for ARM than for x86\\*, but broadly modern 64-bit SoCs don't support 32-bit kernels. Most (but not all) do support 32-bit user-space, but there's less compatibility legacy to warrant keeping even that circuitry.\n\nPerformance-wise, using 32-bit applications on hardware that supports 64-bit ARM is a really bad idea, and should be discouraged.\n\n\\* See \"AArch32\" column here https://gpages.juszkiewicz.com.pl/arm-socs-table/arm-socs.html",
          "created_at": "2025-04-30T12:43:08Z"
        }
      ]
    },
    {
      "number": 32374,
      "title": "test: interface_usdt_net.py failure under --valgrind",
      "body": "Ubuntu 24.04.2 LTS (GNU/Linux 6.8.0-58-generic x86_64)\ngcc (Ubuntu 14.2.0-4ubuntu2~24.04) 14.2.0\nvalgrind-3.25.0\n\n```bash\ncmake -B build -DWITH_USDT=ON\ncmake --build build\n./build/test/functional/test_runner.py --timeout-factor=9999 --valgrind interface_usdt_net.py\n```\n\n```bash\n/root/ci_scratch/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0'\n test  2025-04-29T11:18:32.583000Z TestFramework (INFO): PRNG seed is: 3961365374660180483 \n test  2025-04-29T11:18:32.583000Z TestFramework (DEBUG): Setting up network thread \n test  2025-04-29T11:18:32.584000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0 \n test  2025-04-29T11:18:32.584000Z TestFramework (DEBUG): Creating cache directory /root/ci_scratch/build/test/cache/node0 \n test  2025-04-29T11:18:32.585000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \n test  2025-04-29T11:18:32.842000Z TestFramework.node0 (DEBUG): RPC successfully started \n test  2025-04-29T11:18:32.844000Z TestFramework.node0 (DEBUG): RPC successfully started \n test  2025-04-29T11:18:33.046000Z TestFramework.node0 (DEBUG): Stopping node \n test  2025-04-29T11:18:33.198000Z TestFramework.node0 (DEBUG): Node stopped \n test  2025-04-29T11:18:33.200000Z TestFramework (DEBUG): Copy cache directory /root/ci_scratch/build/test/cache/node0 to node 0 \n test  2025-04-29T11:18:33.245000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \n node0 2025-04-29T11:18:36.097251Z [init] [init/common.cpp:151] [LogPackageVersion] Bitcoin Core version v29.99.0-c5e44a043563 (release build) \n node0 2025-04-29T11:18:36.105631Z [init] [init.cpp:722] [InitParameterInteraction] parameter interaction: -bind set -> setting -listen=1 \n node0 2025-04-29T11:18:36.336642Z [init] [kernel/context.cpp:20] [operator()] Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation \n node0 2025-04-29T11:18:36.633915Z [init] [random.cpp:111] [ReportHardwareRand] Using RdSeed as an additional entropy source \n node0 2025-04-29T11:18:36.634205Z [init] [random.cpp:114] [ReportHardwareRand] Using RdRand as an additional entropy source \n node0 2025-04-29T11:18:36.957186Z [init] [init/common.cpp:119] [StartLogging] Default data directory /root/.bitcoin \n node0 2025-04-29T11:18:36.959061Z [init] [init/common.cpp:120] [StartLogging] Using data directory /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest \n node0 2025-04-29T11:18:36.960101Z [init] [init/common.cpp:129] [StartLogging] Config file: /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/bitcoin.conf \n node0 2025-04-29T11:18:36.963467Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: regtest=\"1\" \n node0 2025-04-29T11:18:36.965363Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] bind=\"127.0.0.1\" \n node0 2025-04-29T11:18:36.965494Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] connect=\"0\" \n node0 2025-04-29T11:18:36.965643Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] deprecatedrpc=\"create_bdb\" \n node0 2025-04-29T11:18:36.965767Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] discover=\"0\" \n node0 2025-04-29T11:18:36.965873Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] dnsseed=\"0\" \n node0 2025-04-29T11:18:36.966446Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] fallbackfee=\"0.0002\" \n node0 2025-04-29T11:18:36.966569Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] fixedseeds=\"0\" \n node0 2025-04-29T11:18:36.966697Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] keypool=\"1\" \n node0 2025-04-29T11:18:36.966802Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] listenonion=\"0\" \n node0 2025-04-29T11:18:36.967011Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] maxconnections=\"94\" \n node0 2025-04-29T11:18:36.967152Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] natpmp=\"0\" \n node0 2025-04-29T11:18:36.967262Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] peertimeout=\"999999999\" \n node0 2025-04-29T11:18:36.967370Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] port=\"11000\" \n node0 2025-04-29T11:18:36.967478Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] printtoconsole=\"0\" \n node0 2025-04-29T11:18:36.967588Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcdoccheck=\"1\" \n node0 2025-04-29T11:18:36.967721Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcport=\"16000\" \n node0 2025-04-29T11:18:36.968178Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcservertimeout=\"99000\" \n node0 2025-04-29T11:18:36.968304Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] server=\"1\" \n node0 2025-04-29T11:18:36.968412Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] shrinkdebugfile=\"0\" \n node0 2025-04-29T11:18:36.968518Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] unsafesqlitesync=\"1\" \n node0 2025-04-29T11:18:36.969036Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: datadir=\"/tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0\" \n node0 2025-04-29T11:18:36.969364Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debug=\"\" \n node0 2025-04-29T11:18:36.969489Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"libevent\" \n node0 2025-04-29T11:18:36.969597Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"leveldb\" \n node0 2025-04-29T11:18:36.969725Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"rand\" \n node0 2025-04-29T11:18:36.969840Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: disablewallet=\"\" \n node0 2025-04-29T11:18:36.969960Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: loglevel=\"trace\" \n node0 2025-04-29T11:18:36.970069Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logsourcelocations=\"\" \n node0 2025-04-29T11:18:36.970190Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logthreadnames=\"\" \n node0 2025-04-29T11:18:36.970293Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logtimemicros=\"\" \n node0 2025-04-29T11:18:36.970398Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: maxconnections=\"32\" \n node0 2025-04-29T11:18:36.970504Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: uacomment=\"testnode0\" \n node0 2025-04-29T11:18:36.970605Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: v2transport=\"0\" \n node0 2025-04-29T11:18:36.972402Z [init] [init.cpp:1356] [AppInitMain] Using at most 32 automatic connections (1024 file descriptors available) \n node0 2025-04-29T11:18:36.999851Z [init] [wallet/init.cpp:120] [Construct] Wallet disabled! \n node0 2025-04-29T11:18:38.109153Z [init] [httpserver.cpp:239] [InitHTTPAllowList] [http] Allowing HTTP connections from: 127.0.0.0/8 ::1/128 \n node0 2025-04-29T11:18:38.128450Z [init] [httpserver.cpp:392] [HTTPBindAddresses] Binding RPC on address ::1 port 16000 \n node0 2025-04-29T11:18:38.144722Z [init] [httpserver.cpp:392] [HTTPBindAddresses] Binding RPC on address 127.0.0.1 port 16000 \n node0 2025-04-29T11:18:38.146313Z [init] [httpserver.cpp:477] [InitHTTPServer] [http] Initialized HTTP server \n node0 2025-04-29T11:18:38.148475Z [init] [httpserver.cpp:479] [InitHTTPServer] [http] creating work queue of depth 64 \n node0 2025-04-29T11:18:38.150171Z [init] [rpc/server.cpp:282] [StartRPC] [rpc] Starting RPC \n node0 2025-04-29T11:18:38.151231Z [init] [httprpc.cpp:364] [StartHTTPRPC] [rpc] Starting HTTP RPC server \n node0 2025-04-29T11:18:38.168763Z [scheduler] [util/thread.cpp:20] [TraceThread] scheduler thread start \n node0 2025-04-29T11:18:38.177590Z [init] [rpc/request.cpp:138] [GenerateAuthCookie] Generated RPC authentication cookie /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/.cookie \n node0 2025-04-29T11:18:38.178436Z [init] [rpc/request.cpp:139] [GenerateAuthCookie] Permissions used for cookie: rw------- \n node0 2025-04-29T11:18:38.179783Z [init] [httprpc.cpp:314] [InitRPCAuthentication] Using random cookie authentication. \n node0 2025-04-29T11:18:38.183825Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for / (exactmatch 1) \n node0 2025-04-29T11:18:38.186296Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for /wallet/ (exactmatch 0) \n node0 2025-04-29T11:18:38.188282Z [init] [httpserver.cpp:502] [StartHTTPServer] Starting HTTP server with 16 worker threads \n node0 2025-04-29T11:18:38.456022Z [init] [init.cpp:1477] [AppInitMain] Using /16 prefix for IP bucketing \n node0 2025-04-29T11:18:38.459956Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading P2P addresses‚Ä¶ \n node0 2025-04-29T11:18:38.505086Z [init] [addrdb.cpp:206] [LoadAddrman] Creating peers.dat because the file was not found (\"/tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/peers.dat\") \n node0 2025-04-29T11:18:38.526349Z [http] [httpserver.cpp:352] [ThreadHTTP] [http] Entering http event loop \n node0 2025-04-29T11:18:38.620591Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56180 \n node0 2025-04-29T11:18:38.676905Z [httpworker.8] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-04-29T11:18:38.715210Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading banlist‚Ä¶ \n node0 2025-04-29T11:18:38.716049Z [init] [banman.cpp:42] [LoadBanlist] Recreating the banlist database \n node0 2025-04-29T11:18:38.783159Z [init] [banman.cpp:68] [DumpBanlist] [net] Flushed 0 banned node addresses/subnets to disk  60ms \n node0 2025-04-29T11:18:38.794771Z [init] [net.cpp:2426] [SetTryNewOutboundPeer] [net] setting try another outbound peer=false \n node0 2025-04-29T11:18:38.804540Z [init] [net.cpp:3199] [SetNetworkActive] SetNetworkActive: true \n node0 2025-04-29T11:18:38.820654Z [init] [policy/fees.cpp:563] [CBlockPolicyEstimator] /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/fee_estimates.dat is not found. Continue anyway. \n node0 2025-04-29T11:18:38.835593Z [init] [init.cpp:1673] [AppInitMain] Cache configuration: \n node0 2025-04-29T11:18:38.839026Z [init] [init.cpp:1674] [AppInitMain] * Using 2.0 MiB for block index database \n node0 2025-04-29T11:18:38.841049Z [init] [init.cpp:1682] [AppInitMain] * Using 8.0 MiB for chain state database \n node0 2025-04-29T11:18:38.850586Z [init] [init.cpp:1245] [InitAndLoadChainstate] * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space) \n node0 2025-04-29T11:18:38.854553Z [init] [checkqueue.h:147] [CCheckQueue] Script verification uses 15 additional threads \n node0 2025-04-29T11:18:39.104394Z [init] [node/blockstorage.cpp:1154] [InitBlocksdirXorKey] Using obfuscation key for blocksdir *.dat files (/tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/blocks): 'bba0fb6fb6ea7766' \n node0 2025-04-29T11:18:39.112051Z [init] [dbwrapper.cpp:235] [CDBWrapper] Opening LevelDB in /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/blocks/index \n node0 2025-04-29T11:18:39.251986Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56188 \n node0 2025-04-29T11:18:39.256674Z [httpworker.12] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-04-29T11:18:39.269032Z [init] [dbwrapper.cpp:243] [CDBWrapper] Opened LevelDB successfully \n node0 2025-04-29T11:18:39.274643Z [init] [dbwrapper.cpp:268] [CDBWrapper] Using obfuscation key for /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/blocks/index: 0000000000000000 \n node0 2025-04-29T11:18:39.297762Z [init] [script/sigcache.cpp:35] [SignatureCache] Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements \n node0 2025-04-29T11:18:39.316456Z [init] [validation.cpp:2140] [ValidationCache] Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements \n node0 2025-04-29T11:18:39.319018Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading block index‚Ä¶ \n node0 2025-04-29T11:18:39.319818Z [init] [node/chainstate.cpp:150] [LoadChainstate] Validating signatures for all blocks. \n node0 2025-04-29T11:18:39.320483Z [init] [node/chainstate.cpp:152] [LoadChainstate] Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000 \n node0 2025-04-29T11:18:39.387297Z [init] [node/blockstorage.cpp:508] [LoadBlockIndexDB] LoadBlockIndexDB: last block file = 0 \n node0 2025-04-29T11:18:39.396505Z [init] [node/blockstorage.cpp:512] [LoadBlockIndexDB] LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=200, size=52530, heights=0...199, time=2011-02-02...2011-02-02) \n node0 2025-04-29T11:18:39.397605Z [init] [node/blockstorage.cpp:523] [LoadBlockIndexDB] Checking all blk files are present... \n node0 2025-04-29T11:18:39.418276Z [init] [node/chainstate.cpp:87] [CompleteChainstateInitialization] Initializing chainstate Chainstate [ibd] @ height -1 (null) \n node0 2025-04-29T11:18:39.420676Z [init] [dbwrapper.cpp:235] [CDBWrapper] Opening LevelDB in /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/chainstate \n node0 2025-04-29T11:18:39.432880Z [init] [dbwrapper.cpp:243] [CDBWrapper] Opened LevelDB successfully \n node0 2025-04-29T11:18:39.435256Z [init] [dbwrapper.cpp:268] [CDBWrapper] Using obfuscation key for /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/node0/regtest/chainstate: 6f92fc877cf4699c \n node0 2025-04-29T11:18:39.452040Z [init] [validation.cpp:4719] [LoadChainTip] Loaded best chain: hashBestChain=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c height=199 date=2011-02-02T23:17:17Z progress=1.000000 \n node0 2025-04-29T11:18:39.458142Z [init] [noui.cpp:57] [noui_InitMessage] init message: Verifying blocks‚Ä¶ \n node0 2025-04-29T11:18:39.462490Z [init] [validation.cpp:4762] [VerifyDB] Verifying last 6 blocks at level 3 \n node0 2025-04-29T11:18:39.463138Z [init] [validation.cpp:4771] [VerifyDB] Verification progress: 0% \n node0 2025-04-29T11:18:39.502551Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 16% \n node0 2025-04-29T11:18:39.507494Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 33% \n node0 2025-04-29T11:18:39.511317Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 50% \n node0 2025-04-29T11:18:39.513636Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 66% \n node0 2025-04-29T11:18:39.516569Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 83% \n node0 2025-04-29T11:18:39.519193Z [init] [validation.cpp:4779] [VerifyDB] Verification progress: 99% \n node0 2025-04-29T11:18:39.519738Z [init] [validation.cpp:4873] [VerifyDB] Verification: No coin database inconsistencies in last 6 blocks (6 transactions) \n node0 2025-04-29T11:18:39.522169Z [init] [init.cpp:1330] [InitAndLoadChainstate] Block index and chainstate loaded \n node0 2025-04-29T11:18:39.529187Z [init] [init.cpp:1779] [AppInitMain] Setting NODE_NETWORK on non-prune mode \n node0 2025-04-29T11:18:39.558905Z [init] [init.cpp:1889] [AppInitMain] block tree size = 200 \n node0 2025-04-29T11:18:39.560014Z [init] [init.cpp:1902] [AppInitMain] nBestHeight = 199 \n node0 2025-04-29T11:18:39.582910Z [init] [net.cpp:3172] [BindListenPort] Bound to 127.0.0.1:11000 \n node0 2025-04-29T11:18:39.590514Z [init] [noui.cpp:57] [noui_InitMessage] init message: Starting network threads‚Ä¶ \n node0 2025-04-29T11:18:39.621345Z [init] [net.cpp:3362] [Start] DNS seeding disabled \n node0 2025-04-29T11:18:39.665227Z [init] [noui.cpp:57] [noui_InitMessage] init message: Done loading \n node0 2025-04-29T11:18:39.670899Z [initload] [util/thread.cpp:20] [TraceThread] initload thread start \n node0 2025-04-29T11:18:39.693254Z [msghand] [util/thread.cpp:20] [TraceThread] msghand thread start \n node0 2025-04-29T11:18:39.699831Z [initload] [node/mempool_persist.cpp:47] [LoadMempool] Failed to open mempool file. Continuing anyway. \n node0 2025-04-29T11:18:39.700887Z [net] [util/thread.cpp:20] [TraceThread] net thread start \n node0 2025-04-29T11:18:39.715287Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:39.715532Z [addcon] [util/thread.cpp:20] [TraceThread] addcon thread start \n node0 2025-04-29T11:18:39.718248Z [initload] [util/thread.cpp:22] [TraceThread] initload thread exit \n node0 2025-04-29T11:18:39.727452Z [httpworker.5] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__ \n node0 2025-04-29T11:18:39.761539Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:39.762383Z [httpworker.0] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__ \n test  2025-04-29T11:18:39.824000Z TestFramework.node0 (DEBUG): RPC successfully started \n node0 2025-04-29T11:18:39.825373Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:39.830188Z [httpworker.14] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__ \n test  2025-04-29T11:18:39.879000Z TestFramework (DEBUG): Generate a block with current time \n test  2025-04-29T11:18:39.879000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress` \n node0 2025-04-29T11:18:39.880491Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:39.884083Z [httpworker.3] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=generatetoaddress user=__cookie__ \n node0 2025-04-29T11:18:39.956014Z [httpworker.3] [node/miner.cpp:168] [CreateNewBlock] CreateNewBlock(): block weight: 904 txs: 0 fees: 0 sigops 400 \n node0 2025-04-29T11:18:39.969090Z [httpworker.3] [validation.cpp:2524] [ConnectBlock] [bench]     - Sanity checks: 0.88ms [0.00s (0.88ms/blk)] \n node0 2025-04-29T11:18:39.975541Z [httpworker.3] [validation.cpp:2626] [ConnectBlock] [bench]     - Fork checks: 8.22ms [0.01s (8.22ms/blk)] \n node0 2025-04-29T11:18:39.983532Z [httpworker.3] [validation.cpp:2718] [ConnectBlock] [bench]       - Connect 1 transactions: 6.40ms (6.400ms/tx, 0.000ms/txin) [0.01s (6.40ms/blk)] \n node0 2025-04-29T11:18:39.987294Z [httpworker.3] [validation.cpp:2740] [ConnectBlock] [bench]     - Verify 0 txins: 10.17ms (0.000ms/txin) [0.01s (10.17ms/blk)] \n node0 2025-04-29T11:18:39.991337Z [httpworker.3] [node/miner.cpp:183] [CreateNewBlock] [bench] CreateNewBlock() packages: 6.10ms (0 packages, 0 updated descendants), validity: 49.97ms (total 56.08ms) \n node0 2025-04-29T11:18:39.999455Z [httpworker.3] [validation.cpp:4421] [AcceptBlockHeader] [validation] Saw new header hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf height=200 \n node0 2025-04-29T11:18:40.029510Z [httpworker.3] [validation.cpp:3187] [ConnectTip] [bench]   - Using cached block \n node0 2025-04-29T11:18:40.030315Z [httpworker.3] [validation.cpp:3196] [ConnectTip] [bench]   - Load block from disk: 0.69ms \n node0 2025-04-29T11:18:40.031000Z [httpworker.3] [validation.cpp:2524] [ConnectBlock] [bench]     - Sanity checks: 0.01ms [0.00s (0.44ms/blk)] \n node0 2025-04-29T11:18:40.031290Z [httpworker.3] [validation.cpp:2626] [ConnectBlock] [bench]     - Fork checks: 0.31ms [0.01s (4.26ms/blk)] \n node0 2025-04-29T11:18:40.031499Z [httpworker.3] [validation.cpp:2718] [ConnectBlock] [bench]       - Connect 1 transactions: 0.20ms (0.200ms/tx, 0.000ms/txin) [0.01s (3.30ms/blk)] \n node0 2025-04-29T11:18:40.031691Z [httpworker.3] [validation.cpp:2740] [ConnectBlock] [bench]     - Verify 0 txins: 0.39ms (0.000ms/txin) [0.01s (5.28ms/blk)] \n node0 2025-04-29T11:18:40.038082Z [httpworker.3] [validation.cpp:2756] [ConnectBlock] [bench]     - Write undo data: 5.80ms [0.01s (2.90ms/blk)] \n node0 2025-04-29T11:18:40.039358Z [httpworker.3] [validation.cpp:2771] [ConnectBlock] [bench]     - Index writing: 1.39ms [0.00s (0.70ms/blk)] \n node0 2025-04-29T11:18:40.042890Z [httpworker.3] [validationinterface.cpp:249] [BlockChecked] [validation] BlockChecked: block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf state=Valid \n node0 2025-04-29T11:18:40.045771Z [httpworker.3] [validation.cpp:3213] [ConnectTip] [bench]   - Connect total: 15.21ms [0.02s (7.60ms/blk)] \n node0 2025-04-29T11:18:40.052408Z [httpworker.3] [validation.cpp:3222] [ConnectTip] [bench]   - Flush: 6.76ms [0.01s (3.38ms/blk)] \n node0 2025-04-29T11:18:40.053493Z [httpworker.3] [validation.cpp:3232] [ConnectTip] [bench]   - Writing chainstate: 1.08ms [0.00s (0.54ms/blk)] \n node0 2025-04-29T11:18:40.060179Z [httpworker.3] [validationinterface.cpp:225] [MempoolTransactionsRemovedForBlock] [validation] Enqueuing MempoolTransactionsRemovedForBlock: block height=200 txs removed=0 \n node0 2025-04-29T11:18:40.063752Z [httpworker.3] [validation.cpp:2038] [IsInitialBlockDownload] Leaving InitialBlockDownload (latching to false) \n node0 2025-04-29T11:18:40.069717Z [httpworker.3] [validation.cpp:2998] [UpdateTipLog] UpdateTip: new best=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf height=200 version=0x30000000 log2_work=8.651052 tx=201 date='2025-04-29T11:18:39Z' progress=1.000000 cache=0.3MiB(1txo) \n node0 2025-04-29T11:18:40.071460Z [httpworker.3] [validation.cpp:3248] [ConnectTip] [bench]   - Connect postprocess: 17.94ms [0.02s (8.97ms/blk)] \n node0 2025-04-29T11:18:40.072213Z [httpworker.3] [validation.cpp:3252] [ConnectTip] [bench] - Connect block: 41.68ms [0.04s (20.84ms/blk)] \n node0 2025-04-29T11:18:40.076785Z [httpworker.3] [txmempool.cpp:700] [check] [mempool] Checking mempool with 0 transactions and 0 inputs \n node0 2025-04-29T11:18:40.083095Z [httpworker.3] [validationinterface.cpp:215] [BlockConnected] [validation] Enqueuing BlockConnected: block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf block height=200 \n node0 2025-04-29T11:18:40.088401Z [httpworker.3] [validationinterface.cpp:179] [UpdatedBlockTip] [validation] Enqueuing UpdatedBlockTip: new block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf fork block hash=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c (in IBD=false) \n node0 2025-04-29T11:18:40.092373Z [httpworker.3] [validationinterface.cpp:187] [ActiveTipChange] [validation] ActiveTipChange: new block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf block height=200 \n node0 2025-04-29T11:18:40.110192Z [scheduler] [validationinterface.cpp:225] [operator()] [validation] MempoolTransactionsRemovedForBlock: block height=200 txs removed=0 \n node0 2025-04-29T11:18:40.128855Z [scheduler] [policy/fees.cpp:709] [processBlock] [estimatefee] Blockpolicy estimates updated by 0 of 0 block txs, since last block 0 of 0 tracked, mempool map size 0, max target 0 from current \n node0 2025-04-29T11:18:40.135725Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.137281Z [httpworker.8] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblock user=__cookie__ \n node0 2025-04-29T11:18:40.153720Z [scheduler] [validationinterface.cpp:215] [operator()] [validation] BlockConnected: block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf block height=200 \n node0 2025-04-29T11:18:40.175129Z [scheduler] [validationinterface.cpp:179] [operator()] [validation] UpdatedBlockTip: new block hash=7e51c7ac54d64fd0027d79883558f242c696b001fd60e4a9c464136e862707cf fork block hash=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c (in IBD=false) \n node0 2025-04-29T11:18:40.184544Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.186776Z [httpworker.1] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=submitblock user=__cookie__ \n node0 2025-04-29T11:18:40.232385Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.233363Z [httpworker.2] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__ \n node0 2025-04-29T11:18:40.239458Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.240195Z [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__ \n node0 2025-04-29T11:18:40.243359Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.244314Z [httpworker.4] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__ \n node0 2025-04-29T11:18:40.253800Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:56196 \n node0 2025-04-29T11:18:40.254891Z [httpworker.10] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__ \n test  2025-04-29T11:18:40.263000Z TestFramework (INFO): hook into the net:inbound_message and net:outbound_message tracepoints \n test  2025-04-29T11:18:41.320000Z TestFramework (INFO): connect a P2P test node to our bitcoind node \n test  2025-04-29T11:18:41.321000Z TestFramework.p2p (DEBUG): Connecting to Bitcoin Node: 127.0.0.1:11000 \n test  2025-04-29T11:18:41.321000Z TestFramework.p2p (DEBUG): Connected: us=127.0.0.1:41596, them=127.0.0.1:11000 \n test  2025-04-29T11:18:41.322000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:11000: msg_version(nVersion=70016 nServices=9 nTime=Tue Apr 29 11:18:41 2025 addrTo=CAddress(nServices=1 net=IPv4 addr=127.0.0.1 port=11000) addrFrom=CAddress(nServices=1 net=IPv4 addr=0.0.0.0 port=0) nNonce=0xB7DD25BB6D9421D3 strSubVer=/python-p2p-tester:0.0.3/ nStartingHeight=-1 relay=1) \n node0 2025-04-29T11:18:41.371553Z [net] [net.cpp:3833] [CNode] [net] Added connection peer=0 \n node0 2025-04-29T11:18:41.377182Z [net] [net.cpp:1854] [CreateNodeFromAcceptedSocket] [net] connection from 127.0.0.1:41596 accepted \n test  2025-04-29T11:18:42.141000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:11000 \n test  2025-04-29T11:18:42.173000Z TestFramework (ERROR): Assertion failed \n                                   Traceback (most recent call last):\n                                     File \"/root/ci_scratch/test/functional/test_framework/test_framework.py\", line 183, in main\n                                       self.run_test()\n                                     File \"/root/ci_scratch/build/test/functional/interface_usdt_net.py\", line 259, in run_test\n                                       self.p2p_message_tracepoint_test()\n                                     File \"/root/ci_scratch/build/test/functional/interface_usdt_net.py\", line 327, in p2p_message_tracepoint_test\n                                       self.nodes[0].add_p2p_connection(test_node)\n                                     File \"/root/ci_scratch/test/functional/test_framework/test_node.py\", line 736, in add_p2p_connection\n                                       p2p_conn.wait_for_verack()\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 692, in wait_for_verack\n                                       self.wait_until(test_function, timeout=timeout)\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 601, in wait_until\n                                       wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n                                     File \"/root/ci_scratch/test/functional/test_framework/util.py\", line 311, in wait_until_helper_internal\n                                       if predicate():\n                                          ^^^^^^^^^^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 598, in test_function\n                                       assert self.is_connected\n                                              ^^^^^^^^^^^^^^^^^\n                                   AssertionError\n test  2025-04-29T11:18:42.176000Z TestFramework (DEBUG): Closing down network thread \n test  2025-04-29T11:18:42.227000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2025-04-29T11:18:42.227000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0 \n test  2025-04-29T11:18:42.227000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0/test_framework.log \n test  2025-04-29T11:18:42.227000Z TestFramework (ERROR): \n test  2025-04-29T11:18:42.228000Z TestFramework (ERROR): Hint: Call /root/ci_scratch/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250429_111832/interface_usdt_net_0' to consolidate all logs \n test  2025-04-29T11:18:42.228000Z TestFramework (ERROR): \n test  2025-04-29T11:18:42.228000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2025-04-29T11:18:42.228000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2025-04-29T11:18:42.228000Z TestFramework (ERROR): \n\n node0 stderr ==1145996== \n==1145996== Process terminating with default action of signal 5 (SIGTRAP)\n==1145996==    at 0x41EF0E6: ~basic_string (basic_string.h:809)\n==1145996==    by 0x41EF0E6: (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) (net_processing.cpp:5006)\n==1145996==    by 0x41A782D: CConnman::ThreadMessageHandler() (net.cpp:3054)\n==1145996==    by 0x4877F0E: operator() (std_function.h:591)\n==1145996==    by 0x4877F0E: util::TraceThread(std::basic_string_view<char, std::char_traits<char> >, std::function<void ()>) (thread.cpp:21)\n==1145996==    by 0x4199DC6: __invoke_impl<void, void (*)(std::basic_string_view<char>, std::function<void()>), char const*, CConnman::Start(CScheduler&, const Options&)::<lambda()> > (invoke.h:61)\n==1145996==    by 0x4199DC6: __invoke<void (*)(std::basic_string_view<char>, std::function<void()>), char const*, CConnman::Start(CScheduler&, const Options&)::<lambda()> > (invoke.h:96)\n==1145996==    by 0x4199DC6: _M_invoke<0, 1, 2> (std_thread.h:301)\n==1145996==    by 0x4199DC6: operator() (std_thread.h:308)\n==1145996==    by 0x4199DC6: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char> >, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::{lambda()#5}> > >::_M_run() (std_thread.h:253)\n==1145996==    by 0x576CDB3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.33)\n==1145996==    by 0x5AB1AA3: start_thread (pthread_create.c:447)\n==1145996==    by 0x5B3EA33: clone (clone.S:100)\n```\n\nhttps://github.com/gcc-mirror/gcc/blob/04696df09633baf97cdbbdd6e9929b9d472161d3/libstdc%2B%2B-v3/include/bits/basic_string.h#L809.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-29T11:33:15Z",
      "updated_at": "2025-05-15T09:20:46Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/32374",
      "labels": [],
      "comment_list": [
        {
          "user": "willcl-ark",
          "body": "I am able to replicate this on NixOS\n\n<details>\n<summary>Details</summary>\n\n```log\nbitcoin on ÓÇ† master [$?‚á°] via ‚ñ≥ v3.30.5 via üêç v3.12.7 via ‚ùÑÔ∏è  impure (nix-shell-env)\n‚ùØ just build -DWITH_USDT=ON\nconfigure running\nconfigure complete\nbuild running\nbuild complete\n\nbitcoin on ÓÇ† master [$?‚á°] via ‚ñ≥ v3.30.5 via üêç v3.12.7 via ‚ùÑÔ∏è  impure (nix-shell-env) took 41s\n‚ùØ sudo -E PYTHONPATH=\"/nix/store/nql0w8in8bj1i3f0xgpxr40hx2gy2lgg-bcc-0.31.0/lib/python3.12/site-packages:/nix/store/bymayrdmvq8ahkhrlcw2akjsyif8qv1g-python3.12-netaddr-1.3.0/lib/python3.12/site-packages:/nix/store/px2nj16i5gc3d4mnw5l1nclfdxhry61p-python3-3.12.7/lib/python3.12/site-packages:/nix/store/sfkwdrfqp24wyssnfc6wzrrq94jhxy8i-codespell-2.3.0/lib/python3.12/site-packages:/nix/store/xn648kkidbibpmbm97dgw4520jb05h4d-python3.12-flake8-7.1.1/lib/python3.12/site-packages:/nix/store/v0izs2ffiidns6rnvjzyg0qs8j0qcg4f-python3.12-mccabe-0.7.0/lib/python3.12/site-packages:/nix/store/9xhj6rpg5cimg5q9q2fhx6h35phpdvg4-python3.12-pycodestyle-2.12.0/lib/python3.12/site-packages:/nix/store/zz975r9r1c35w1vsijx066k4zpk6wvlw-python3.12-pyflakes-3.2.0/lib/python3.12/site-packages:/nix/store/c2yzzj4kry2c8lfrvcgzd3rrywmmcb2w-lief-0.15.1-py/lib/python3.12/site-packages:/nix/store/bzd6x228spgh76jwlh97z2z7fcjkkhhq-python3.12-mypy-1.11.2/lib/python3.12/site-packages:/nix/store/aqjkz6gkjcscafk3hrkv6g6mvvskq2lz-python3.12-mypy-extensions-1.0.0/lib/python3.12/site-packages:/nix/store/rm2lnxxw22l35n5wv579xl6prpb0lggz-python3.12-typing-extensions-4.12.2/lib/python3.12/site-packages:/nix/store/cshqmr02fi91pv7s78djpzpf95nrzwxk-python3.12-pyzmq-26.2.0/lib/python3.12/site-packages:/nix/store/a7dr8zjwjadyw9ngcn74incvkxqwkyha-python3.12-vulture-2.13/lib/python3.12/site-packages:/nix/store/famwj4wka071vad5k5rhnvh8jfdishif-libselinux-3.7/lib/python3.12/site-packages:/nix/store/plgmjfks0wb6v307dixvvcq5w4vldjzz-uv-0.4.30/lib/python3.12/site-packages:/nix/store/nql0w8in8bj1i3f0xgpxr40hx2gy2lgg-bcc-0.31.0/lib/python3.12/site-packages/bcc-0.31.0-py3.12.egg\" ./build/test/functional/test_runner.py --timeout-factor=9999 --valgrind interface_usdt_net.py\nTemporary test directory at /tmp/test_runner_‚Çø_üèÉ_20250430_130404\nRemaining jobs: [interface_usdt_net.py]\n1/1 - interface_usdt_net.py failed, Duration: 9 s\n\nstdout:\n2025-04-30T12:04:04.799000Z TestFramework (INFO): PRNG seed is: 4383659148042625286\n2025-04-30T12:04:04.799000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0\n2025-04-30T12:04:11.349000Z TestFramework (INFO): hook into the net:inbound_message and net:outbound_message tracepoints\n2025-04-30T12:04:12.884000Z TestFramework (INFO): connect a P2P test node to our bitcoind node\n2025-04-30T12:04:13.485000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/test_framework.py\", line 183, in main\n    self.run_test()\n  File \"/home/will/src/core/bitcoin/build/test/functional/interface_usdt_net.py\", line 259, in run_test\n    self.p2p_message_tracepoint_test()\n  File \"/home/will/src/core/bitcoin/build/test/functional/interface_usdt_net.py\", line 327, in p2p_message_tracepoint_test\n    self.nodes[0].add_p2p_connection(test_node)\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/test_node.py\", line 736, in add_p2p_connection\n    p2p_conn.wait_for_verack()\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 692, in wait_for_verack\n    self.wait_until(test_function, timeout=timeout)\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 601, in wait_until\n    wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/util.py\", line 311, in wait_until_helper_internal\n    if predicate():\n       ^^^^^^^^^^^\n  File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 598, in test_function\n    assert self.is_connected\n           ^^^^^^^^^^^^^^^^^\nAssertionError\n2025-04-30T12:04:13.536000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-04-30T12:04:13.536000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0\n2025-04-30T12:04:13.536000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/test_framework.log\n2025-04-30T12:04:13.536000Z TestFramework (ERROR):\n2025-04-30T12:04:13.537000Z TestFramework (ERROR): Hint: Call /home/will/src/core/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0' to consolidate all logs\n2025-04-30T12:04:13.537000Z TestFramework (ERROR):\n2025-04-30T12:04:13.537000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-04-30T12:04:13.537000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-04-30T12:04:13.537000Z TestFramework (ERROR):\n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\n\nTEST                  | STATUS    | DURATION\n\ninterface_usdt_net.py | ‚úñ Failed  | 9 s\n\nALL                   | ‚úñ Failed  | 9 s (accumulated)\nRuntime: 9 s\n\n\nbitcoin on ÓÇ† master [$?‚á°] via ‚ñ≥ v3.30.5 via üêç v3.12.7 via ‚ùÑÔ∏è  impure (nix-shell-env) took 9s\n‚ùØ sudo /home/will/src/core/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0'\n test  2025-04-30T12:04:04.799000Z TestFramework (INFO): PRNG seed is: 4383659148042625286\n test  2025-04-30T12:04:04.799000Z TestFramework (DEBUG): Setting up network thread\n test  2025-04-30T12:04:04.799000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0\n test  2025-04-30T12:04:04.799000Z TestFramework (DEBUG): Creating cache directory /home/will/src/core/bitcoin/build/test/cache/node0\n test  2025-04-30T12:04:04.800000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up\n test  2025-04-30T12:04:05.052000Z TestFramework.node0 (DEBUG): RPC successfully started\n test  2025-04-30T12:04:05.053000Z TestFramework.node0 (DEBUG): RPC successfully started\n test  2025-04-30T12:04:05.116000Z TestFramework.node0 (DEBUG): Stopping node\n test  2025-04-30T12:04:05.267000Z TestFramework.node0 (DEBUG): Node stopped\n test  2025-04-30T12:04:05.267000Z TestFramework (DEBUG): Copy cache directory /home/will/src/core/bitcoin/build/test/cache/node0 to node 0\n test  2025-04-30T12:04:05.277000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up\n node0 2025-04-30T12:04:07.780089Z [init] [init/common.cpp:151] [LogPackageVersion] Bitcoin Core version v29.99.0-14b8dfb2bd5e (release build)\n node0 2025-04-30T12:04:07.788485Z [init] [init.cpp:722] [InitParameterInteraction] parameter interaction: -bind set -> setting -listen=1\n node0 2025-04-30T12:04:07.997168Z [init] [kernel/context.cpp:20] [operator()] Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\n node0 2025-04-30T12:04:08.280800Z [init] [random.cpp:111] [ReportHardwareRand] Using RdSeed as an additional entropy source\n node0 2025-04-30T12:04:08.281000Z [init] [random.cpp:114] [ReportHardwareRand] Using RdRand as an additional entropy source\n node0 2025-04-30T12:04:08.570032Z [init] [init/common.cpp:119] [StartLogging] Default data directory /home/will/.bitcoin\n node0 2025-04-30T12:04:08.571509Z [init] [init/common.cpp:120] [StartLogging] Using data directory /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest\n node0 2025-04-30T12:04:08.572671Z [init] [init/common.cpp:129] [StartLogging] Config file: /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/bitcoin.conf\n node0 2025-04-30T12:04:08.575630Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: regtest=\"1\"\n node0 2025-04-30T12:04:08.577311Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] bind=\"127.0.0.1\"\n node0 2025-04-30T12:04:08.577440Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] connect=\"0\"\n node0 2025-04-30T12:04:08.577565Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] deprecatedrpc=\"create_bdb\"\n node0 2025-04-30T12:04:08.577686Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] discover=\"0\"\n node0 2025-04-30T12:04:08.577804Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] dnsseed=\"0\"\n node0 2025-04-30T12:04:08.578304Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] fallbackfee=\"0.0002\"\n node0 2025-04-30T12:04:08.578434Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] fixedseeds=\"0\"\n node0 2025-04-30T12:04:08.578554Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] keypool=\"1\"\n node0 2025-04-30T12:04:08.578672Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] listenonion=\"0\"\n node0 2025-04-30T12:04:08.578840Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] maxconnections=\"94\"\n node0 2025-04-30T12:04:08.578960Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] natpmp=\"0\"\n node0 2025-04-30T12:04:08.579092Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] peertimeout=\"999999999\"\n node0 2025-04-30T12:04:08.579213Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] port=\"11000\"\n node0 2025-04-30T12:04:08.579333Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] printtoconsole=\"0\"\n node0 2025-04-30T12:04:08.579456Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcdoccheck=\"1\"\n node0 2025-04-30T12:04:08.579577Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcport=\"16000\"\n node0 2025-04-30T12:04:08.579979Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] rpcservertimeout=\"99000\"\n node0 2025-04-30T12:04:08.580114Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] server=\"1\"\n node0 2025-04-30T12:04:08.580237Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] shrinkdebugfile=\"0\"\n node0 2025-04-30T12:04:08.580357Z [init] [common/args.cpp:850] [logArgsPrefix] Config file arg: [regtest] unsafesqlitesync=\"1\"\n node0 2025-04-30T12:04:08.580800Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: datadir=\"/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0\"\n node0 2025-04-30T12:04:08.581089Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debug=\"\"\n node0 2025-04-30T12:04:08.581217Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"libevent\"\n node0 2025-04-30T12:04:08.581349Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"leveldb\"\n node0 2025-04-30T12:04:08.581470Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: debugexclude=\"rand\"\n node0 2025-04-30T12:04:08.581593Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: disablewallet=\"\"\n node0 2025-04-30T12:04:08.581715Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: loglevel=\"trace\"\n node0 2025-04-30T12:04:08.581836Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logsourcelocations=\"\"\n node0 2025-04-30T12:04:08.581955Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logthreadnames=\"\"\n node0 2025-04-30T12:04:08.582082Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: logtimemicros=\"\"\n node0 2025-04-30T12:04:08.582201Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: maxconnections=\"32\"\n node0 2025-04-30T12:04:08.582321Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: uacomment=\"testnode0\"\n node0 2025-04-30T12:04:08.582439Z [init] [common/args.cpp:850] [logArgsPrefix] Command-line arg: v2transport=\"0\"\n node0 2025-04-30T12:04:08.583953Z [init] [init.cpp:1356] [AppInitMain] Using at most 32 automatic connections (1024 file descriptors available)\n node0 2025-04-30T12:04:08.607596Z [init] [wallet/init.cpp:120] [Construct] Wallet disabled!\n node0 2025-04-30T12:04:09.668717Z [init] [httpserver.cpp:239] [InitHTTPAllowList] [http] Allowing HTTP connections from: 127.0.0.0/8 ::1/128\n node0 2025-04-30T12:04:09.691201Z [init] [httpserver.cpp:392] [HTTPBindAddresses] Binding RPC on address ::1 port 16000\n node0 2025-04-30T12:04:09.703713Z [init] [httpserver.cpp:392] [HTTPBindAddresses] Binding RPC on address 127.0.0.1 port 16000\n node0 2025-04-30T12:04:09.704963Z [init] [httpserver.cpp:477] [InitHTTPServer] [http] Initialized HTTP server\n node0 2025-04-30T12:04:09.706788Z [init] [httpserver.cpp:479] [InitHTTPServer] [http] creating work queue of depth 64\n node0 2025-04-30T12:04:09.708226Z [init] [rpc/server.cpp:282] [StartRPC] [rpc] Starting RPC\n node0 2025-04-30T12:04:09.709192Z [init] [httprpc.cpp:364] [StartHTTPRPC] [rpc] Starting HTTP RPC server\n node0 2025-04-30T12:04:09.714981Z [scheduler] [util/thread.cpp:20] [TraceThread] scheduler thread start\n node0 2025-04-30T12:04:09.718912Z [init] [rpc/request.cpp:138] [GenerateAuthCookie] Generated RPC authentication cookie /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/.cookie\n node0 2025-04-30T12:04:09.719663Z [init] [rpc/request.cpp:139] [GenerateAuthCookie] Permissions used for cookie: rw-------\n node0 2025-04-30T12:04:09.720918Z [init] [httprpc.cpp:314] [InitRPCAuthentication] Using random cookie authentication.\n node0 2025-04-30T12:04:09.724557Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for / (exactmatch 1)\n node0 2025-04-30T12:04:09.727021Z [init] [httpserver.cpp:759] [RegisterHTTPHandler] [http] Registering HTTP handler for /wallet/ (exactmatch 0)\n node0 2025-04-30T12:04:09.728798Z [init] [httpserver.cpp:502] [StartHTTPServer] Starting HTTP server with 16 worker threads\n node0 2025-04-30T12:04:09.963043Z [init] [init.cpp:1477] [AppInitMain] Using /16 prefix for IP bucketing\n node0 2025-04-30T12:04:09.966726Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading P2P addresses‚Ä¶\n node0 2025-04-30T12:04:10.005410Z [init] [addrdb.cpp:206] [LoadAddrman] Creating peers.dat because the file was not found (\"/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/peers.dat\")\n node0 2025-04-30T12:04:10.021477Z [http] [httpserver.cpp:352] [ThreadHTTP] [http] Entering http event loop\n node0 2025-04-30T12:04:10.076709Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47108\n node0 2025-04-30T12:04:10.089528Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading banlist‚Ä¶\n node0 2025-04-30T12:04:10.090233Z [init] [banman.cpp:42] [LoadBanlist] Recreating the banlist database\n node0 2025-04-30T12:04:10.098113Z [init] [banman.cpp:68] [DumpBanlist] [net] Flushed 0 banned node addresses/subnets to disk  4ms\n node0 2025-04-30T12:04:10.102616Z [init] [net.cpp:2426] [SetTryNewOutboundPeer] [net] setting try another outbound peer=false\n node0 2025-04-30T12:04:10.106592Z [init] [net.cpp:3199] [SetNetworkActive] SetNetworkActive: true\n node0 2025-04-30T12:04:10.117488Z [init] [policy/fees.cpp:563] [CBlockPolicyEstimator] /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/fee_estimates.dat is not found. Continue anyway.\n node0 2025-04-30T12:04:10.131314Z [init] [init.cpp:1673] [AppInitMain] Cache configuration:\n node0 2025-04-30T12:04:10.134219Z [init] [init.cpp:1674] [AppInitMain] * Using 2.0 MiB for block index database\n node0 2025-04-30T12:04:10.135970Z [init] [init.cpp:1682] [AppInitMain] * Using 8.0 MiB for chain state database\n node0 2025-04-30T12:04:10.143810Z [init] [init.cpp:1245] [InitAndLoadChainstate] * Using 440.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n node0 2025-04-30T12:04:10.147153Z [init] [checkqueue.h:147] [CCheckQueue] Script verification uses 15 additional threads\n node0 2025-04-30T12:04:10.362392Z [init] [node/blockstorage.cpp:1154] [InitBlocksdirXorKey] Using obfuscation key for blocksdir *.dat files (/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/blocks): '391eac751cb1cdce'\n node0 2025-04-30T12:04:10.369422Z [init] [dbwrapper.cpp:235] [CDBWrapper] Opening LevelDB in /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/blocks/index\n node0 2025-04-30T12:04:10.457976Z [httpworker.12] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__\n node0 2025-04-30T12:04:10.554284Z [init] [dbwrapper.cpp:243] [CDBWrapper] Opened LevelDB successfully\n node0 2025-04-30T12:04:10.559470Z [init] [dbwrapper.cpp:268] [CDBWrapper] Using obfuscation key for /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/blocks/index: 0000000000000000\n node0 2025-04-30T12:04:10.576160Z [init] [script/sigcache.cpp:35] [SignatureCache] Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\n node0 2025-04-30T12:04:10.587458Z [init] [validation.cpp:2140] [ValidationCache] Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\n node0 2025-04-30T12:04:10.589905Z [init] [noui.cpp:57] [noui_InitMessage] init message: Loading block index‚Ä¶\n node0 2025-04-30T12:04:10.590593Z [init] [node/chainstate.cpp:150] [LoadChainstate] Validating signatures for all blocks.\n node0 2025-04-30T12:04:10.591164Z [init] [node/chainstate.cpp:152] [LoadChainstate] Setting nMinimumChainWork=0000000000000000000000000000000000000000000000000000000000000000\n node0 2025-04-30T12:04:10.654589Z [init] [node/blockstorage.cpp:508] [LoadBlockIndexDB] LoadBlockIndexDB: last block file = 0\n node0 2025-04-30T12:04:10.662815Z [init] [node/blockstorage.cpp:512] [LoadBlockIndexDB] LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=200, size=52530, heights=0...199, time=2011-02-02...2011-02-02)\n node0 2025-04-30T12:04:10.663773Z [init] [node/blockstorage.cpp:523] [LoadBlockIndexDB] Checking all blk files are present...\n node0 2025-04-30T12:04:10.683403Z [init] [node/chainstate.cpp:87] [CompleteChainstateInitialization] Initializing chainstate Chainstate [ibd] @ height -1 (null)\n node0 2025-04-30T12:04:10.685514Z [init] [dbwrapper.cpp:235] [CDBWrapper] Opening LevelDB in /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/chainstate\n node0 2025-04-30T12:04:10.722090Z [init] [dbwrapper.cpp:243] [CDBWrapper] Opened LevelDB successfully\n node0 2025-04-30T12:04:10.724089Z [init] [dbwrapper.cpp:268] [CDBWrapper] Using obfuscation key for /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/node0/regtest/chainstate: 7ba26db57efdde8a\n node0 2025-04-30T12:04:10.738922Z [init] [validation.cpp:4672] [LoadChainTip] Loaded best chain: hashBestChain=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c height=199 date=2011-02-02T23:17:17Z progress=1.000000\n node0 2025-04-30T12:04:10.744691Z [init] [noui.cpp:57] [noui_InitMessage] init message: Verifying blocks‚Ä¶\n node0 2025-04-30T12:04:10.748637Z [init] [validation.cpp:4715] [VerifyDB] Verifying last 6 blocks at level 3\n node0 2025-04-30T12:04:10.749162Z [init] [validation.cpp:4724] [VerifyDB] Verification progress: 0%\n node0 2025-04-30T12:04:10.756367Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47124\n node0 2025-04-30T12:04:10.790688Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 16%\n node0 2025-04-30T12:04:10.794756Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 33%\n node0 2025-04-30T12:04:10.796837Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 50%\n node0 2025-04-30T12:04:10.798735Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 66%\n node0 2025-04-30T12:04:10.800614Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 83%\n node0 2025-04-30T12:04:10.802140Z [httpworker.6] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__\n node0 2025-04-30T12:04:10.803224Z [init] [validation.cpp:4732] [VerifyDB] Verification progress: 99%\n node0 2025-04-30T12:04:10.803911Z [init] [validation.cpp:4826] [VerifyDB] Verification: No coin database inconsistencies in last 6 blocks (6 transactions)\n node0 2025-04-30T12:04:10.806121Z [init] [init.cpp:1330] [InitAndLoadChainstate] Block index and chainstate loaded\n node0 2025-04-30T12:04:10.812380Z [init] [init.cpp:1779] [AppInitMain] Setting NODE_NETWORK on non-prune mode\n node0 2025-04-30T12:04:10.832203Z [init] [init.cpp:1889] [AppInitMain] block tree size = 200\n node0 2025-04-30T12:04:10.832863Z [init] [init.cpp:1902] [AppInitMain] nBestHeight = 199\n node0 2025-04-30T12:04:10.846326Z [init] [net.cpp:3172] [BindListenPort] Bound to 127.0.0.1:11000\n node0 2025-04-30T12:04:10.851337Z [init] [noui.cpp:57] [noui_InitMessage] init message: Starting network threads‚Ä¶\n node0 2025-04-30T12:04:10.866473Z [init] [net.cpp:3362] [Start] DNS seeding disabled\n node0 2025-04-30T12:04:10.895658Z [init] [noui.cpp:57] [noui_InitMessage] init message: Done loading\n node0 2025-04-30T12:04:10.900176Z [net] [util/thread.cpp:20] [TraceThread] net thread start\n node0 2025-04-30T12:04:10.904576Z [initload] [util/thread.cpp:20] [TraceThread] initload thread start\n node0 2025-04-30T12:04:10.911265Z [initload] [node/mempool_persist.cpp:47] [LoadMempool] Failed to open mempool file. Continuing anyway.\n node0 2025-04-30T12:04:10.912461Z [initload] [util/thread.cpp:22] [TraceThread] initload thread exit\n node0 2025-04-30T12:04:10.915073Z [msghand] [util/thread.cpp:20] [TraceThread] msghand thread start\n node0 2025-04-30T12:04:10.916594Z [addcon] [util/thread.cpp:20] [TraceThread] addcon thread start\n node0 2025-04-30T12:04:11.054637Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.055013Z [httpworker.4] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockcount user=__cookie__\n node0 2025-04-30T12:04:11.067318Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.067668Z [httpworker.11] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getmempoolinfo user=__cookie__\n test  2025-04-30T12:04:11.088000Z TestFramework.node0 (DEBUG): RPC successfully started\n node0 2025-04-30T12:04:11.089320Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.090937Z [httpworker.2] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__\n test  2025-04-30T12:04:11.114000Z TestFramework (DEBUG): Generate a block with current time\n test  2025-04-30T12:04:11.114000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\n node0 2025-04-30T12:04:11.114651Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.115846Z [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=generatetoaddress user=__cookie__\n node0 2025-04-30T12:04:11.157065Z [httpworker.13] [node/miner.cpp:168] [CreateNewBlock] CreateNewBlock(): block weight: 904 txs: 0 fees: 0 sigops 400\n node0 2025-04-30T12:04:11.169212Z [httpworker.13] [validation.cpp:2498] [ConnectBlock] [bench]     - Sanity checks: 0.93ms [0.00s (0.93ms/blk)]\n node0 2025-04-30T12:04:11.175027Z [httpworker.13] [validation.cpp:2600] [ConnectBlock] [bench]     - Fork checks: 7.59ms [0.01s (7.59ms/blk)]\n node0 2025-04-30T12:04:11.182180Z [httpworker.13] [validation.cpp:2692] [ConnectBlock] [bench]       - Connect 1 transactions: 5.64ms (5.636ms/tx, 0.000ms/txin) [0.01s (5.64ms/blk)]\n node0 2025-04-30T12:04:11.185401Z [httpworker.13] [validation.cpp:2714] [ConnectBlock] [bench]     - Verify 0 txins: 9.13ms (0.000ms/txin) [0.01s (9.13ms/blk)]\n node0 2025-04-30T12:04:11.189313Z [httpworker.13] [node/miner.cpp:183] [CreateNewBlock] [bench] CreateNewBlock() packages: 5.84ms (0 packages, 0 updated descendants), validity: 45.47ms (total 51.31ms)\n node0 2025-04-30T12:04:11.223490Z [httpworker.13] [validation.cpp:3157] [ConnectTip] [bench]   - Using cached block\n node0 2025-04-30T12:04:11.224163Z [httpworker.13] [validation.cpp:3166] [ConnectTip] [bench]   - Load block from disk: 0.58ms\n node0 2025-04-30T12:04:11.224687Z [httpworker.13] [validation.cpp:2498] [ConnectBlock] [bench]     - Sanity checks: 0.01ms [0.00s (0.47ms/blk)]\n node0 2025-04-30T12:04:11.224958Z [httpworker.13] [validation.cpp:2600] [ConnectBlock] [bench]     - Fork checks: 0.28ms [0.01s (3.93ms/blk)]\n node0 2025-04-30T12:04:11.225174Z [httpworker.13] [validation.cpp:2692] [ConnectBlock] [bench]       - Connect 1 transactions: 0.19ms (0.191ms/tx, 0.000ms/txin) [0.01s (2.91ms/blk)]\n node0 2025-04-30T12:04:11.225444Z [httpworker.13] [validation.cpp:2714] [ConnectBlock] [bench]     - Verify 0 txins: 0.46ms (0.000ms/txin) [0.01s (4.80ms/blk)]\n node0 2025-04-30T12:04:11.230852Z [httpworker.13] [validation.cpp:2730] [ConnectBlock] [bench]     - Write undo data: 4.92ms [0.00s (2.46ms/blk)]\n node0 2025-04-30T12:04:11.232008Z [httpworker.13] [validation.cpp:2745] [ConnectBlock] [bench]     - Index writing: 1.22ms [0.00s (0.61ms/blk)]\n node0 2025-04-30T12:04:11.235148Z [httpworker.13] [validationinterface.cpp:249] [BlockChecked] [validation] BlockChecked: block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 state=Valid\n node0 2025-04-30T12:04:11.237768Z [httpworker.13] [validation.cpp:3183] [ConnectTip] [bench]   - Connect total: 13.37ms [0.01s (6.68ms/blk)]\n node0 2025-04-30T12:04:11.243752Z [httpworker.13] [validation.cpp:3192] [ConnectTip] [bench]   - Flush: 6.10ms [0.01s (3.05ms/blk)]\n node0 2025-04-30T12:04:11.244664Z [httpworker.13] [validation.cpp:3202] [ConnectTip] [bench]   - Writing chainstate: 0.93ms [0.00s (0.46ms/blk)]\n node0 2025-04-30T12:04:11.250592Z [httpworker.13] [validationinterface.cpp:225] [MempoolTransactionsRemovedForBlock] [validation] Enqueuing MempoolTransactionsRemovedForBlock: block height=200 txs removed=0\n node0 2025-04-30T12:04:11.254057Z [httpworker.13] [validation.cpp:2038] [IsInitialBlockDownload] Leaving InitialBlockDownload (latching to false)\n node0 2025-04-30T12:04:11.260853Z [httpworker.13] [validation.cpp:2972] [UpdateTipLog] UpdateTip: new best=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 height=200 version=0x30000000 log2_work=8.651052 tx=201 date='2025-04-30T12:04:11Z' progress=1.000000 cache=0.3MiB(1txo)\n node0 2025-04-30T12:04:11.262658Z [httpworker.13] [validation.cpp:3218] [ConnectTip] [bench]   - Connect postprocess: 17.90ms [0.02s (8.95ms/blk)]\n node0 2025-04-30T12:04:11.263369Z [httpworker.13] [validation.cpp:3222] [ConnectTip] [bench] - Connect block: 38.87ms [0.04s (19.44ms/blk)]\n node0 2025-04-30T12:04:11.267817Z [httpworker.13] [txmempool.cpp:700] [check] [mempool] Checking mempool with 0 transactions and 0 inputs\n node0 2025-04-30T12:04:11.273883Z [httpworker.13] [validationinterface.cpp:215] [BlockConnected] [validation] Enqueuing BlockConnected: block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 block height=200\n node0 2025-04-30T12:04:11.278865Z [httpworker.13] [validationinterface.cpp:179] [UpdatedBlockTip] [validation] Enqueuing UpdatedBlockTip: new block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 fork block hash=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c (in IBD=false)\n node0 2025-04-30T12:04:11.282646Z [httpworker.13] [validationinterface.cpp:187] [ActiveTipChange] [validation] ActiveTipChange: new block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 block height=200\n node0 2025-04-30T12:04:11.293558Z [scheduler] [validationinterface.cpp:225] [operator()] [validation] MempoolTransactionsRemovedForBlock: block height=200 txs removed=0\n node0 2025-04-30T12:04:11.299180Z [scheduler] [policy/fees.cpp:709] [processBlock] [estimatefee] Blockpolicy estimates updated by 0 of 0 block txs, since last block 0 of 0 tracked, mempool map size 0, max target 0 from current\n node0 2025-04-30T12:04:11.301776Z [scheduler] [validationinterface.cpp:215] [operator()] [validation] BlockConnected: block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 block height=200\n node0 2025-04-30T12:04:11.308353Z [scheduler] [validationinterface.cpp:179] [operator()] [validation] UpdatedBlockTip: new block hash=0fb32ed137b0a6b939705940a67cd3c9ce56da2816403fd7ae9955929adeb581 fork block hash=39455d83324a3dbbb15712ab63dd2f96b45a30f271617aa16c12483a561f721c (in IBD=false)\n node0 2025-04-30T12:04:11.311530Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.312059Z [httpworker.7] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblock user=__cookie__\n node0 2025-04-30T12:04:11.317733Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.318501Z [httpworker.1] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=submitblock user=__cookie__\n node0 2025-04-30T12:04:11.335680Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.336029Z [httpworker.9] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getblockchaininfo user=__cookie__\n node0 2025-04-30T12:04:11.337968Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.338316Z [httpworker.0] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getbestblockhash user=__cookie__\n node0 2025-04-30T12:04:11.340111Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.340445Z [httpworker.10] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getrawmempool user=__cookie__\n node0 2025-04-30T12:04:11.343720Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:47126\n node0 2025-04-30T12:04:11.344433Z [httpworker.15] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=syncwithvalidationinterfacequeue user=__cookie__\n test  2025-04-30T12:04:11.349000Z TestFramework (INFO): hook into the net:inbound_message and net:outbound_message tracepoints\n test  2025-04-30T12:04:12.884000Z TestFramework (INFO): connect a P2P test node to our bitcoind node\n test  2025-04-30T12:04:12.884000Z TestFramework.p2p (DEBUG): Connecting to Bitcoin Node: 127.0.0.1:11000\n test  2025-04-30T12:04:12.884000Z TestFramework.p2p (DEBUG): Connected: us=127.0.0.1:47156, them=127.0.0.1:11000\n test  2025-04-30T12:04:12.884000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:11000: msg_version(nVersion=70016 nServices=9 nTime=Wed Apr 30 13:04:12 2025 addrTo=CAddress(nServices=1 net=IPv4 addr=127.0.0.1 port=11000) addrFrom=CAddress(nServices=1 net=IPv4 addr=0.0.0.0 port=0) nNonce=0xF0F901511CE84AB8 strSubVer=/python-p2p-tester:0.0.3/ nStartingHeight=-1 relay=1)\n node0 2025-04-30T12:04:12.902348Z [net] [net.cpp:3833] [CNode] [net] Added connection peer=0\n node0 2025-04-30T12:04:12.906639Z [net] [net.cpp:1854] [CreateNodeFromAcceptedSocket] [net] connection from 127.0.0.1:47156 accepted\n test  2025-04-30T12:04:13.459000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:11000\n test  2025-04-30T12:04:13.485000Z TestFramework (ERROR): Assertion failed\n                                   Traceback (most recent call last):\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/test_framework.py\", line 183, in main\n                                       self.run_test()\n                                     File \"/home/will/src/core/bitcoin/build/test/functional/interface_usdt_net.py\", line 259, in run_test\n                                       self.p2p_message_tracepoint_test()\n                                     File \"/home/will/src/core/bitcoin/build/test/functional/interface_usdt_net.py\", line 327, in p2p_message_tracepoint_test\n                                       self.nodes[0].add_p2p_connection(test_node)\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/test_node.py\", line 736, in add_p2p_connection\n                                       p2p_conn.wait_for_verack()\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 692, in wait_for_verack\n                                       self.wait_until(test_function, timeout=timeout)\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 601, in wait_until\n                                       wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/util.py\", line 311, in wait_until_helper_internal\n                                       if predicate():\n                                          ^^^^^^^^^^^\n                                     File \"/home/will/src/core/bitcoin/test/functional/test_framework/p2p.py\", line 598, in test_function\n                                       assert self.is_connected\n                                              ^^^^^^^^^^^^^^^^^\n                                   AssertionError\n test  2025-04-30T12:04:13.486000Z TestFramework (DEBUG): Closing down network thread\n test  2025-04-30T12:04:13.536000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n test  2025-04-30T12:04:13.536000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0\n test  2025-04-30T12:04:13.536000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0/test_framework.log\n test  2025-04-30T12:04:13.536000Z TestFramework (ERROR):\n test  2025-04-30T12:04:13.537000Z TestFramework (ERROR): Hint: Call /home/will/src/core/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250430_130404/interface_usdt_net_0' to consolidate all logs\n test  2025-04-30T12:04:13.537000Z TestFramework (ERROR):\n test  2025-04-30T12:04:13.537000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n test  2025-04-30T12:04:13.537000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n test  2025-04-30T12:04:13.537000Z TestFramework (ERROR):\n\n node0 stderr ==307456==\n==307456== Process terminating with default action of signal 5 (SIGTRAP)\n==307456==    at 0x590156: ~basic_string (basic_string.h:809)\n==307456==    by 0x590156: (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) (net_processing.cpp:5040)\n==307456==    by 0x543DDD: CConnman::ThreadMessageHandler() (net.cpp:3054)\n==307456==    by 0xCBF40E: operator() (std_function.h:591)\n==307456==    by 0xCBF40E: util::TraceThread(std::basic_string_view<char, std::char_traits<char> >, std::function<void ()>) (thread.cpp:21)\n==307456==    by 0x535D56: __invoke_impl<void, void (*)(std::basic_string_view<char>, std::function<void()>), char const*, CConnman::Start(CScheduler&, const Options&)::<lambda()> > (invoke.h:61)\n==307456==    by 0x535D56: __invoke<void (*)(std::basic_string_view<char>, std::function<void()>), char const*, CConnman::Start(CScheduler&, const Options&)::<lambda()> > (invoke.h:96)\n==307456==    by 0x535D56: _M_invoke<0, 1, 2> (std_thread.h:301)\n==307456==    by 0x535D56: operator() (std_thread.h:308)\n==307456==    by 0x535D56: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char> >, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::{lambda()#5}> > >::_M_run() (std_thread.h:253)\n==307456==    by 0x4B70123: execute_native_thread_routine (in /nix/store/7hyxhin05law4mnxsdrmqv30h0rnqdxm-gcc-14.2.0-lib/lib/libstdc++.so.6.0.33)\n==307456==    by 0x4E9DD01: start_thread (in /nix/store/pacbfvpzqz2mksby36awvbcn051zcji3-glibc-2.40-36/lib/libc.so.6)\n==307456==    by 0x4F1D193: clone (in /nix/store/pacbfvpzqz2mksby36awvbcn051zcji3-glibc-2.40-36/lib/libc.so.6)\n```\n\n</details>\n\nSo it _appears_ most likely to be a use-after-free, double-free or buffer overflow at this tracepoint https://github.com/bitcoin/bitcoin/blob/14b8dfb2bd5e2ca2b7c0c9a7f7d50e1e60adf75c/src/net_processing.cpp#L5040-L5047 as it's crashing in the destructor...\n\nWill try and investigate a little further",
          "created_at": "2025-04-30T12:08:17Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, it reminds me of https://github.com/bitcoin/bitcoin/issues/27380#issuecomment-2284894942, which was a similar lifetime issue. `ConnectionTypeAsString` should be the only call that creates a new string object in this tracepoint here.\n\nI wonder why valgrind only traps and doesn't print more information about the kind of error.\n\n",
          "created_at": "2025-04-30T12:39:46Z"
        },
        {
          "user": "willcl-ark",
          "body": "I was not able to get this to reproduce using any of the sanitizers.\n\nConnecting with `gdb`, shows all pointers and variables as valid at the callsite. I agree that `ConnectionTypeAsString` seems the natural culprit as it returns a temporary string, but even patching that to return `const *char`,still saw `SIGTRAP` raised.\n\nStepping through the tracepoint saw it execute without error, so it does seem to be a race/lifetime issue, but not really too sure where else to go from here.",
          "created_at": "2025-05-01T12:27:21Z"
        },
        {
          "user": "0xB10C",
          "body": "Trying it with `pfrom->GetId()` as the sole tracepoint (for `net::inbound_message`, `net::outbound_message`, and `net::inbound_connection`) argument produces the same failure. I don't think it's related to `ConnectionTypeAsString`. \n\nIt seems to me that all interface_usdt_*.py tests fail under valgrind? ",
          "created_at": "2025-05-02T10:53:03Z"
        },
        {
          "user": "0xB10C",
          "body": "> still saw SIGTRAP raised.\n\nAh, every time the tracepoint is reached a SIGTRAP is fired. No matter the tracepoint contents, even with an empty one. Valgrind intercepts SIGTRAP and aborts.\n\n> ==1145996== Process terminating with default action of signal 5 (SIGTRAP)\n\nIt might be possible to add a valgrind suppression for this this, but I haven't tired it yet.",
          "created_at": "2025-05-02T13:10:27Z"
        },
        {
          "user": "willcl-ark",
          "body": "I think it would make most sense here to probably skip these tests when valgrind is enabled.\n\nI reckon that any benefits we'd get by taking the time to fix eBPF/Valgrind incompatibility (if its even fixable) wouldn't be worth the investment.\n\nThey are already being tested via `ASan + LSan + UBSan + integer, no depends, USDT`, but appear to be being skipped in `Msan, depends`, even though USDT is enabled. Perhaps we enable that instead to cover memory sanitization?",
          "created_at": "2025-05-02T14:12:50Z"
        },
        {
          "user": "fanquake",
          "body": "Opened #32492 to add skipping (for now).",
          "created_at": "2025-05-14T09:59:10Z"
        },
        {
          "user": "fanquake",
          "body": "Closed via #32492.",
          "created_at": "2025-05-15T09:20:45Z"
        }
      ]
    },
    {
      "number": 32373,
      "title": "rfc: only relay transactions to v2 encrypted peers",
      "body": "Unless we don't have any.\n\nOne of the goals of p2p traffic encryption was to make it impossible for passive observers to figure out where a transaction originates. However as long as there's enough unencrypted connections remaining, that doesn't seem very effective.\n\nAssuming v2 transport adoption has reached an acceptable level, it may be a good time to start preferring it more strongly.\n\nSpecifically I would suggest that we only relay transactions to v2 peers.\n\nIf a v1 peer asks for a transaction, we should probably just give it to them. I suspect it's break of backward compatibility if we don't?\n\nWe probably also want to continue receiving transactions from such peers, so we can't just pretend to be blocksonly.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-04-29T09:40:11Z",
      "updated_at": "2025-10-23T10:09:54Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/32373",
      "labels": [
        "Brainstorming",
        "P2P",
        "Needs Conceptual Review"
      ],
      "comment_list": [
        {
          "user": "Sjors",
          "body": "Related, but more radical: #29618\n\nThere's also #29415, but that's limited in scope to our own transactions and relies on Tor / I2P.",
          "created_at": "2025-04-29T09:50:41Z"
        },
        {
          "user": "mzumsande",
          "body": "> Related, but more radical: https://github.com/bitcoin/bitcoin/issues/29618\n\nThis proposal sounds more radical to me, assuming it's meant to be the default and not optional like #29618. Once >90% of all nodes would implement it, v1 nodes wouldn't percolate the network graph anymore, and the remaining v1 nodes (bitcoin core and alternative implementations) would become second-class citizens that wouldn't see most transactions anymore before they are included in a block.\n\nAnother aspect is that this does not help against the strategy of just connecting to all reachable nodes to find out the origin of transaction (the attacker would just use v2 for these connections).",
          "created_at": "2025-04-29T14:42:11Z"
        },
        {
          "user": "Sjors",
          "body": "Indeed this change would be less radical than a default-off #29618. I meant in reference to a default-on version of that.\n\n> the remaining v1 nodes (bitcoin core and alternative implementations) would become second-class citizens\n\nAt some point https become non-optional too. But I don't know when the right time is, probably not yet.\n\n> does not help against the strategy of just connecting to all reachable nodes\n\nv2 transport doesn't project against active attackers, only passive ones. That still seems like an improvement in theory, but maybe not in practice as long as active attacks are too easy.",
          "created_at": "2025-04-29T15:09:59Z"
        },
        {
          "user": "vasild",
          "body": "I agree with @mzumsande above, also:\n\nIf a node has even a single v2 connection that already makes it nearly impossible for a passive spying ISP to conclude it is the origin of a transaction, no?\n\nLets assume a node has only v1 connections, then the ISP can observe all transactions going to it and all transactions going out of it. As soon as a transaction is seen going out that did not come in, a conclusion can be made that it originated from the node.\n\nHowever, if there are v2 connections, even just a single one, then the spy has no way to know. If they see an outgoing transaction for the first time, they cannot know whether the node is the origin or whether the transaction came from outside via the v2 connection and the node is just relaying it.",
          "created_at": "2025-05-08T13:37:52Z"
        },
        {
          "user": "ajtowns",
          "body": "This seems inferior to private broadcast #29415 which separates the new txs from the mempool until they make it out to the wider network. Extending it to also relay via a much-less-private v2 transitory encrypted might be worth considering though?\n\n> We probably also want to continue receiving transactions from such peers, so we can't just pretend to be blocksonly.\n\n> There's also https://github.com/bitcoin/bitcoin/pull/29415, but that's limited in scope to our own transactions and relies on Tor / I2P.\n\nI don't think it makes sense to not send txs over a given connection while also requesting them over that connection -- that halves the max INV rate over the connection (since the remote node has to announce everything, rather than us announcing half, and them not announcing those txs to us due to de-duping).",
          "created_at": "2025-10-23T10:07:01Z"
        }
      ]
    },
    {
      "number": 32372,
      "title": "XOR existing mempools",
      "body": "#32359 allows for larger contiguous payloads to end up in the mempool than what can be achieved with inscriptions. This might trip a naive virus scanner into false positives.\n\nIt seems like a good precaution to XOR existing mempools, rather than only new mempools. Assuming this feature has been tested well enough by now, a migration seems relatively safe.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-04-29T09:20:50Z",
      "updated_at": "2025-04-29T12:54:24Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32372",
      "labels": [
        "Mempool"
      ],
      "comment_list": [
        {
          "user": "laanwj",
          "body": "Why don't we? Isn't the `mempool.dat` always written from scratch and not changed in place? i'm probably missing something but it seems candidate for \"use a new random XOR key on every rewrite\".",
          "created_at": "2025-04-29T10:53:49Z"
        },
        {
          "user": "Sjors",
          "body": "> Isn't the `mempool.dat` always written from scratch and not changed in place?\n\nI just realized I should check that...",
          "created_at": "2025-04-29T12:35:50Z"
        },
        {
          "user": "Sjors",
          "body": "Ah, so we have an optional `-persistmempoolv1` that's used to maintain the old version.\n\nWithout that `FastRandomContext{}.fillrand(xor_key);` is used every time. So indeed it does:\n\n> it seems candidate for \"use a new random XOR key on every rewrite\".",
          "created_at": "2025-04-29T12:54:23Z"
        }
      ]
    },
    {
      "number": 32371,
      "title": "Issue in wallet_backwards_compatibility.py                                    self.test_v22_inactivehdchain_path()                                   assert addr is not None",
      "body": "Example: https://cirrus-ci.com/task/6425957709381632?logs=ci#L2161",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-29T05:34:25Z",
      "updated_at": "2025-04-29T05:41:43Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/32371",
      "labels": [],
      "comment_list": [
        {
          "user": "achow101",
          "body": "#32369",
          "created_at": "2025-04-29T05:36:36Z"
        },
        {
          "user": "maflcko",
          "body": "Thanks. Let's just continue discussion there.",
          "created_at": "2025-04-29T05:41:42Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 6,
    "issues": 7
  }
}