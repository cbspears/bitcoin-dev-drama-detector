{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:14:12.320356+00:00",
  "date": "2025-09-13",
  "pull_requests": [
    {
      "number": 33385,
      "title": "contrib: Add bash completion for new bitcoin command",
      "body": "Adds a bash completion script for the new bitcoin command-line tool (introduced in #31375), which unifies the main Bitcoin Core executables under a single interface. This feature improves usability, reduces errors, and makes the command-line tools more easily discoverable for users working in a Linux bash environment.\r\n\r\nThe completion script dynamically lists available commands and options by parsing `bitcoin --help` and `bitcoin help`. It also incorporates the existing bash completions for `bitcoind`, `bitcoin-cli`, and `bitcoin-tx`, depending on the argument provided (`node`, `rpc`, or `tx`). This ensures that all relevant completions are available seamlessly through a single interface without modifying core functionality.\r\n\r\n**Key points:**\r\n- Improves developer and user experience on the command line.\r\n- Does not modify or replace existing functionality.\r\n- Placed under `contrib/` for easy installation by users and distributions.",
      "state": "open",
      "user": "caesrcd",
      "created_at": "2025-09-13T15:34:35Z",
      "updated_at": "2025-11-04T08:54:43Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33385",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33385.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [epcgrs](https://github.com/bitcoin/bitcoin/pull/33385#issuecomment-3393630750) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33747](https://github.com/bitcoin/bitcoin/pull/33747) (contrib: shell completions for bitcoin wrapper executable by hulxv)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- senseful -> sensible [nonstandard word \"senseful\" should be \"sensible\" to be clear]\n- save and use original argument -> save and use the original argument [missing \"the\" makes the phrase slightly ungrammatical]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-09-13T15:34:43Z"
        },
        {
          "user": "epcgrs",
          "body": "ACK [b5d45f0](https://github.com/bitcoin/bitcoin/pull/33385/commits/b5d45f060161a19d6e9286a434713d36c97b3701)\r\n\r\n<img width=\"574\" height=\"260\" alt=\"image\" src=\"https://github.com/user-attachments/assets/a67e3216-babe-4282-8f36-ed3fef4197c1\" />\r\n",
          "created_at": "2025-10-11T20:10:01Z"
        },
        {
          "user": "prusnak",
          "body": "ISTM \"bitcoin test\" is not covered",
          "created_at": "2025-10-13T06:51:02Z"
        },
        {
          "user": "caesrcd",
          "body": "@prusnak It will complete the arguments of `bitcoin` itself and the subarguments of commands that already have their own completion.\r\n\r\nTo cover `bitcoin test`, a completion script for the `test_bitcoin` command would need to be created.",
          "created_at": "2025-10-13T11:56:06Z"
        }
      ]
    },
    {
      "number": 33384,
      "title": "descriptor: fix comments in descriptor.cpp::DescriptorImpl",
      "body": "`P2TR` was missing in `m_pubkey_args` description and it was a typo in `doc/descriptors.md`\r\n",
      "state": "open",
      "user": "pythcoiner",
      "created_at": "2025-09-13T12:40:07Z",
      "updated_at": "2025-11-06T15:06:57Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33384",
      "labels": [
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33384.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- In doc/descriptors.md this is referred to as SCRIPT expressions sh(SCRIPT) -> In doc/descriptors.md, this is referred to as SCRIPT expressions: sh(SCRIPT) [Missing comma after the filename and missing colon before the example make the phrase harder to parse; adding them clarifies that sh(SCRIPT) is an example of \"SCRIPT expressions\".]\n\nNo other typos were found.\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-09-13T12:40:13Z"
        },
        {
          "user": "Sjors",
          "body": "cc @achow101 ",
          "created_at": "2025-09-26T09:57:19Z"
        }
      ]
    },
    {
      "number": 33383,
      "title": "Bash completion for the new bitcoin wrapper command",
      "body": "This PR adds a bash completion script for the new bitcoin command-line tool (introduced in #31375), which unifies the main Bitcoin Core executables under a single interface. This feature improves usability, reduces errors, and makes the command-line tools more easily discoverable for users working in a Linux bash environment.\r\n\r\nThe completion script dynamically lists available commands and options by parsing `bitcoin --help` and `bitcoin help`. It also incorporates the existing bash completions for `bitcoind`, `bitcoin-cli`, and `bitcoin-tx`, depending on the argument provided (node, rpc, or tx). This ensures that all relevant completions are available seamlessly through a single interface without modifying core functionality.\r\n\r\nNo functional changes to core code are introduced; this is an optional enhancement placed under `contrib/` for easy installation and use.\r\n\r\n**Note:**  \r\nThis PR was created as a follow-up to #33382, which was automatically closed by DrahtBot immediately after submission. This version provides a more detailed description to ensure proper review and integration.",
      "state": "closed",
      "user": "caesrcd",
      "created_at": "2025-09-13T00:07:54Z",
      "updated_at": "2025-09-15T14:26:16Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/33383",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-09-13T00:07:59Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33383.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- senseful -> sensible [‚Äúsenseful‚Äù is nonstandard; ‚Äúsensible‚Äù is the correct word here]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-09-13T00:08:01Z"
        },
        {
          "user": "caesrcd",
          "body": "DrahtBot closed this PR automatically (similar to my previous attempt in #33382), but I have since updated the commit with a detailed and properly formatted message: caesrcd/bitcoin@f03423f  \r\n\r\nCould this PR please be reopened for review?",
          "created_at": "2025-09-13T03:19:17Z"
        },
        {
          "user": "fanquake",
          "body": "@caesrcd It's no-longer possible to reopen this PR, as you've pushed to the branch since it was closed. You'll need to open a new (third) one. Apologies about the bot. You can see the kind of heuristics it's using to determine PR closures, here: https://github.com/maflcko/DrahtBot/blob/14ccfd94bc7cc584e547e09582373cb87a0e4553/webhook_features/src/features/spam_detection.rs#L118.",
          "created_at": "2025-09-13T07:21:14Z"
        },
        {
          "user": "caesrcd",
          "body": "@fanquake I opened a new (third) PR: #33385\r\nUnfortunately, the bot closed it again, likely due to the same heuristic applied to the previously closed PRs (first-time contributor + new file).\r\n\r\nHowever, as requested, the third PR has been created from a new branch. If possible, I kindly ask that this new PR be reopened.",
          "created_at": "2025-09-13T15:47:47Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33386,
      "title": "Default ASmap file path is not used unless -asmap is set",
      "body": "The `-asmap` option supposedly has a default value `ip_asn.map` (as defined by `DEFAULT_ASMAP_FILENAME`). However, when I tried to put a file with this name into my datadir, nothing happened. It turns out that this default is not actually used unless the `-asmap` option is set, which seems weird since setting the option normally overrides the default. There is a way to set it without overriding the default on the command line (`bitcoind -asmap`), but in bitcoin.conf there doesn't seem to be a way to do that (e.g. `asmap=1` sets the file path to `1`).\n\nSome ways this could be resolved:\n\n- Simply better document this behavior. The help text doesn't say that the default value is not actually used when the option is not set, and the option itself is introduced as `-asmap=<file>` which in no way indicates that it can be used without a value.\n- If the option is not set (but not explicitly disabled with `-noasmap`) try to load the ASmap file using the default path but don't abort if the file doesn't exist.\n- Remove the default value to prevent any confusion.",
      "state": "closed",
      "user": "vostrnad",
      "created_at": "2025-09-13T23:37:29Z",
      "updated_at": "2025-11-21T23:41:28Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/33386",
      "labels": [],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "@fjahr ",
          "created_at": "2025-09-16T12:00:42Z"
        },
        {
          "user": "fjahr",
          "body": "I agree that this whole default location thing is a bit odd and it's not something I think we necessarily need but it was already there when I started to get more involved in ASmap and I didn't find it so harmful that it needed to be removed. It can be easily ignored by just not putting a file there after all, so if you don't like it just don't use it, I guess.\n\n> The -asmap option supposedly has a default value ip_asn.map (as defined by DEFAULT_ASMAP_FILENAME). However, when I tried to put a file with this name into my datadir, nothing happened. It turns out that this default is not actually used unless the -asmap option is set, which seems weird since setting the option normally overrides the default. \n\nI think the behavior is correct that placing a file in the default location doesn't activate ASmap automatically. ASmap is off by default and I don't think we have another feature that gets activated with just a file being in a certain place. I prefer that the feature still needs to be explicitly activated for now.\n\nFWIW, I am reading `-asmap` documentation as \"activate the feature, then it will look for the file in the default location or the location provided\" while you read it as \"if the file is in the default location, activate the feature, otherwise also activate the feature if the default location was overridden\". Can you pinpoint which part of the docs gave you this impression? Was it the RPC help or maybe files.md (https://github.com/bitcoin/bitcoin/blob/master/doc/files.md)? Is there a different place where you think this behavior could be better documented?\n\n> Some ways this could be resolved:\n\nI would suggest to go with option one and add some more documentation. Note that this doesn't get easier to reason about when there is an additional path available with embedded data, should #28792 be merged. I am giving an explanation of the behavior here: https://github.com/bitcoin/bitcoin/pull/28792#issuecomment-2322358005 and I am expanding the documentation in the PR accordingly, also adding something explicitly on the default file location: https://github.com/bitcoin/bitcoin/pull/28792/files#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR526 There is also some more on the asmap data here: https://github.com/bitcoin/bitcoin/pull/28792/files#diff-7128095523f4b61eba067a48474bdc10b72fe13cf8843408c1154a488fcf6f60\n\n> There is a way to set it without overriding the default on the command line (bitcoind -asmap), but in bitcoin.conf there doesn't seem to be a way to do that (e.g. asmap=1 sets the file path to 1).\n\nThis is actually a bug (IMO) that is unrelated to ASmap itself, I am fixing it in the embedding PR and it's also included in this smaller prework PR that I have extracted and there was a little bit of discussion on it there as well: https://github.com/bitcoin/bitcoin/pull/33026#discussion_r2228533987 I am actually happy that you ran into this and see it as an issue too ;)",
          "created_at": "2025-09-16T13:22:59Z"
        },
        {
          "user": "ryanofsky",
          "body": "re: fjahr https://github.com/bitcoin/bitcoin/issues/33386#issuecomment-3298756998\n\n> Can you pinpoint which part of the docs gave you this impression? Was it the RPC help or maybe files.md (https://github.com/bitcoin/bitcoin/blob/master/doc/files.md)? Is there a different place where you think this behavior could be better documented?\n\nSince I noted the same issue in https://github.com/bitcoin/bitcoin/pull/30529#pullrequestreview-2516002191, the part of the doc which gave me that impression was just:\n\n```\n(default: ip_asn.map)\n```\n\nWhen docs specify a default value for an option, I think the implication is that default value is the value which will be used if the option is not specified.\n\nIn this case, no file is loaded when -asmap is not specified, so I don't think it's accurate to say that the default value is `ip_asn.map`. Could address this with a change like:\n\n```\n(default: disabled, but if -asmap or -asmap= is specified without a filename, \"ip_asn.map\" will be used)\n```\n\nre: vostmad https://github.com/bitcoin/bitcoin/issues/33386#issue-3414291236\n\n> but in bitcoin.conf there doesn't seem to be a way to do that (e.g. `asmap=1` sets the file path to `1`).\n\nI think you can actually do it by specifying `asmap=` in the configuration file, and maybe the documentation suggestion above would make that clearer. But I'm not actually sure if there is currently a use-case for that. If you have to download a file manually AND you have to update the configuration it seems rational to have to point the configuration file you edit to the file you downloaded. Supporting asmap=1 seems more useful in a future scenario where you don't have to download any file.\n\nre: fjahr https://github.com/bitcoin/bitcoin/issues/33386#issuecomment-3298756998\n\n> I think the behavior is correct that placing a file in the default location doesn't activate ASmap automatically.\n\nThis is reasonable, but not what I'd would expect given current documentation. And it does seem to me like it would be nice if the file was used by default as long as it existed and the option was not changed (similar to other files in the datadir), but maybe this is not safe.\n\n> This is actually a bug (IMO) that is unrelated to ASmap itself, I am fixing it in the embedding PR \n\nI wouldn't say it's a bug that if you specify \"1\" as a filename, it's interpreted as a filename. I do think it probably makes sense to support -asmap=1 as a special case for loading embedded data. But it would seem a little cleaner to me to have separate -asmap/-asmapfile options or some other unambiguous way of passing a filename that is just a filename.\n\nThese are just off-the-cuff opinions, though. You've thought about the asmap option more than me and I think different approaches are reasonable here.\n",
          "created_at": "2025-09-16T17:17:53Z"
        },
        {
          "user": "vostrnad",
          "body": "To clarify, the docs that confused me was the CLI help text:\n```\n  -asmap=<file>\n       Specify asn mapping used for bucketing of the peers (default:\n       ip_asn.map). Relative paths will be prefixed by the net-specific\n       datadir location.\n```\nAs ryanofsky said, this seems to imply that the default value is used when the option is not specified. I would personally be fine with that behavior (it certainly didn't raise any eyebrows when I thought that was how it worked), but maybe you're right that it's not safe.",
          "created_at": "2025-09-16T21:50:14Z"
        },
        {
          "user": "fjahr",
          "body": "> As ryanofsky said, this seems to imply that the default value is used when the option is not specified.\n\nThanks for clarifying @vostrnad @ryanofsky , I agree that this part is confusing and I didn't see that way of reading it previously.\n\nInitially I had a preference to not change the behavior of `-asmap` and introduce a separate option for the file path, but recently this has grown on me. So I have opened two alternative PRs now, one which leaves the option unchanged but improves the `=1` case and adds the documentation as discussed: [#33632](https://github.com/bitcoin/bitcoin/pull/33632). The other one splits the file path handling out, which is certainly cleaner but the change in behavior may be a bit confusing for current users of asmap: [#33631](https://github.com/bitcoin/bitcoin/pull/33631)",
          "created_at": "2025-10-14T22:31:23Z"
        },
        {
          "user": "fjahr",
          "body": "> Remove the default value to prevent any confusion.\n\n@vostrnad since you reported this issue and [#33770](https://github.com/bitcoin/bitcoin/pull/33770) implements this suggestion of your, could you say if the removal would be your preferred resolution or if you would like to keep the option around? I think you haven't said if you wanted to actually use the default path or if you just happened to stumble upon this. Thanks!",
          "created_at": "2025-11-06T13:02:33Z"
        },
        {
          "user": "vostrnad",
          "body": "@fjahr Yes, I think removing the default altogether is probably the best way forward, especially in light of a possible future release with embedded ASmap data, and it should remove any potential for confusion around how the option works.",
          "created_at": "2025-11-14T21:54:25Z"
        },
        {
          "user": "ryanofsky",
          "body": "Closing since this should be resolved with #33770",
          "created_at": "2025-11-21T23:41:28Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 3,
    "issues": 1
  }
}