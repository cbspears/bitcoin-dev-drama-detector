{
  "source": "github",
  "repo": "bitcoin/bitcoin",
  "fetched_at": "2026-02-14T08:25:34.563046+00:00",
  "date_range": {
    "since": "2026-02-07T08:25:34.562965+00:00",
    "until": "2026-02-14T08:25:34.562965+00:00"
  },
  "pull_requests": [
    {
      "id": 3119599294,
      "number": 34124,
      "title": "refactor: make `CCoinsView` a pure virtual interface",
      "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\nThis is part of ongoing coins caching cleanup efforts, see https://github.com/bitcoin/bitcoin/issues/34280.\r\n\r\n### Fix\r\nThis PR separates interface and noop behavior, and makes `CCoinsView` pure virtual in incremental steps:\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and temporary backends\r\n* Replace direct bare-`CCoinsView` test/dummy instantiations with `CCoinsViewEmpty`\r\n* Incrementally make `CCoinsView` methods pure virtual (`GetCoin`, `GetBestBlock`, `BatchWrite`, `EstimateSize`, `Cursor`, `GetHeadBlocks`)\r\n* Keep default `HaveCoin(outpoint)` behavior (`GetCoin(outpoint).has_value()`)\r\n* Remove moved legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real db-backed view and `CCoinsViewEmpty`\r\n* In `MemPoolAccept::PreChecks`, cache `best_block` before switching backend to `CCoinsViewEmpty` to avoid relying on empty-backend `GetBestBlock()`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T08:47:33Z",
      "updated_at": "2026-02-14T07:03:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34124",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1467,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 344943058,
      "number": 17580,
      "title": "refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags",
      "body": "<!-- begin based-on -->\n**This is based on #16545.** The non-base commits are:\n\n- [`44d38d5a921` common: Add support for combining ArgsManager flags](https://github.com/bitcoin/bitcoin/pull/17580/commits/44d38d5a921d2ea7f08a1ed1ef02632cc3cfcc19)\n- [`a16319602eb` scripted-diff: Add ALLOW_LIST flag to arguments retrieved with GetArgs](https://github.com/bitcoin/bitcoin/pull/17580/commits/a16319602ebab8fc3a24195aa8a809116d1a0371)\n- [`93c929ec81d` refactor: Fix more ALLOW_LIST arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/93c929ec81db112c6e850728c396d542b695923b)\n- [`a2c954b8a90` Always reject empty -blockfilterindex=\"\" arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/a2c954b8a90fa36b2131470c09f486604493f539)\n- [`c7aa26b7b79` refactor: Stop calling GetArg/IsArgSet on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17580/commits/c7aa26b7b79a0346baff7cd7961855d4c7287a3c)\n- [`d96eb990a42` refactor: Always enforce ALLOW_LIST in CheckArgFlags](https://github.com/bitcoin/bitcoin/pull/17580/commits/d96eb990a42c5e89d156881b417075807b8b38a5)<!-- end -->\n\n---\n\nExcept for two `rpcauth` and `blockfilterindex` fixes (update: rpcauth fix was merged separately in #30401) this PR does not change any behavior outside of tests. It is just supposed to enforce internal consistency and prevent bugs by ensuring that list arguments are always retrieved with GetArgs() and non-list arguments are always retrieved with GetArg(). Followup PRs could use the ALLOW_LIST flags for better documentation and error checking in the future. For example, #17493 builds on this to disallow conflicting config values. \n\nThis change was originally made as part of #17493",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:05:39Z",
      "updated_at": "2026-02-14T05:22:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17580",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1763,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 578665495,
      "number": 21283,
      "title": "Implement BIP 370 PSBTv2",
      "body": "BIP 370 PSBTv2 introduces several new fields and different invariants for PSBT. This PR implements those new fields and restructures the PSBT implementation to match PSBTv2 but still remain compatible with PSBTv0.",
      "state": "open",
      "user": "achow101",
      "created_at": "2021-02-23T18:29:20Z",
      "updated_at": "2026-02-14T05:12:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/21283",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 238,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078106843,
      "number": 34023,
      "title": "Optimized SFL cluster linearization",
      "body": "Follow-up to #32545, part of #30289.\r\n\r\nThis contains many of the optimizations that were originally part of #32545 itself.\r\n\r\nHere is a list of commits and the geometric average of the benchmark timings. Note that these aren't worst cases, but because of the nature of the optimizations here, I do expect them to apply roughly equally to all kinds of clusters. In other words, the relative improvement shown by these numbers should be representative:\r\n\r\n| commit title | ns per optimal linearization |\r\n|:--|--:|\r\n| clusterlin: split tx/chunk dep counting (preparation) | 24,760.30 |\r\n| clusterlin: count chunk deps without loop (optimization) | 24,677.64 |\r\n| scripted-diff: rename _rep -> _idx in SFL | 24,640.08 |\r\n| clusterlin: get rid of DepData, reuse sets (optimization) | 24,389.01 |\r\n| clusterlin: improve TxData::dep_top_idx type (optimization) | 22,578.58 |\r\n| clusterlin: abstract out functions from MergeStep (refactor) | 22,577.15 |\r\n| clusterlin: split up OptimizeStep (refactor) | 22,981.11 |\r\n| clusterlin: simplify PickMergeCandidate (optimization) | 22,018.63 |\r\n| clusterlin: precompute reachable sets (optimization) | 21,194.91 |\r\n| clusterlin: make MergeSequence take SetIdx (simplification) | 21,135.60 |\r\n| clusterlin: special-case self-merges (optimization) | 20,588.13 |\r\n| clusterlin: keep track of active children (optimization) | 13,911.22 |\r\n| clusterlin: track suboptimal chunks (optimization) | 13,629.42 |\r\n| clusterlin: unidirectional MakeTopological initially (optimization) | 12,796.57 |\r\n| clusterlin: inline UpdateChunk into (De)Activate (optimization) | 12,706.35 |\r\n| clusterlin: inline GetReachable into Deactivate (optimization) | 12,525.66 |\r\n\r\nAnd to show that they apply to all clusters roughly similarly:\r\n\r\n\r\n<img width=\"1239\" height=\"640\" alt=\"output(1)\" src=\"https://github.com/user-attachments/assets/edd73937-3f87-4582-b2b9-eaed7e6ff352\" />",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-06T20:21:44Z",
      "updated_at": "2026-02-14T05:03:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34023",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1928,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 991865101,
      "number": 25573,
      "title": "guix: produce a `-static-pie` bitcoind",
      "body": "Use Guix to produce a `-static-pie` bitcoind using GCC `14.3.0` and glibc `2.43`. Using glibc for static builds, would be less of a leap compared to switching to musl libc (POC in #23203).\r\n\r\n[`-static-pie`](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)\r\n> Produce a static position independent executable on targets that support it.\r\nA static position independent executable is similar to a static executable,\r\nbut can be loaded at any address without a dynamic linker.\r\n\r\n```bash\r\n# file bitcoind\r\n\tELF 64-bit LSB pie executable, x86-64, version 1 (GNU/Linux), static-pie linked, for GNU/Linux 3.2.0, stripped\r\n\r\n# ldd bitcoind\r\n\tstatically linked\r\n```\r\n\r\n`x86_64-linux-gnu` size comparison:\r\nmaster (a7e80676104b5c90c5b5e3bfab815d55a9061052) `bitcoind` is `15.35` megabytes.\r\nThis PR (597b5296d3adc693001ce39626fe32b9545eb604) `bitcoind` is `17.45` megabytes.\r\n\r\nFixes #19075.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2022-07-08T16:49:48Z",
      "updated_at": "2026-02-14T04:54:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25573",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 926,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1004149182,
      "number": 25665,
      "title": "refactor: Add util::Result failure types and ability to merge result values",
      "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/0263614685582fed2290494f5233dbe038fc350c) as an initial application. Followup PRs [#25722](https://github.com/bitcoin/bitcoin/pull/25722) and [#29700](https://github.com/bitcoin/bitcoin/pull/29700) use it more broadly to return errors and warnings from wallet and kernel functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations. See [design notes](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/util::Result-design-notes).\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Comparison with `std::expected`\r\n\r\nCurrently, the `util::Result` class is useful for error reporting—returning translated, user-facing error strings—but not as useful for error handling, where callers need structured failure information to decide how to proceed. By contrast, `std::expected` / `util::Expected` (#34005, #34006) is good for error handling but less helpful for reporting. This PR closes the gap between the two classes.\r\n\r\nWith this PR, `std::expected` remains a good choice for lower-level functions or simple functions that fail in only a few well-defined ways. Meanwhile,\r\n\r\n- `Result` becomes a better choice for operations that can fail in many different ways—loading a wallet, connecting a block, etc.—where callers may want complete error traces, not just low-level errors without context or high-level errors without detail. (Followup [#25722](https://github.com/bitcoin/bitcoin/pull/25722) applies this to wallet-loading functions.) \r\n- `Result` can also be more useful than `expected` when merging status information from multiple calls. (Followup [#29700](https://github.com/bitcoin/bitcoin/pull/29700) uses this to reliably propagate flush and fatal-error status from validation code that can internally trigger flushes or shutdowns.)\r\n- `Result` may also be a better choice than `std::expected` when returning pointer values. (Followup [#26022](https://github.com/bitcoin/bitcoin/pull/26022) adds a `ResultPtr` specialization that avoids double dereferencing.) \r\n- `Result` can be more efficient than `std::expected` when failures are rare but failure objects are large, since failure values are heap-allocated.\r\n\r\nThis PR effectively makes `Result` a superset of `expected`, making the representations compatible and allowing them to be used together.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-21T12:46:09Z",
      "updated_at": "2026-02-14T04:44:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25665",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4045,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1047758233,
      "number": 26022,
      "title": "Add util::ResultPtr class",
      "body": "<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`5142f017eaa` Add util::ResultPtr class](https://github.com/bitcoin/bitcoin/pull/26022/commits/5142f017eaa3b3f6d0109fc9f836e6243349d541)\n- [`8ef747c80fc` Use ResultPtr<unique_ptr> instead of Result<unique_ptr>](https://github.com/bitcoin/bitcoin/pull/26022/commits/8ef747c80fc3e39ecb2bb5856a489cbfc5737f48)<!-- end -->\n\n---\n\nThe `util::ResultPtr` class is a wrapper for `util::Result` providing syntax sugar to make it less awkward to use with returned pointers. Instead of needing to be deferenced twice with `**result` or `(*result)->member`, it only needs to be dereferenced once with `*result` or `result->member`. Also when it is used in a boolean context, instead of evaluating to true when there is no error and the pointer is null, it evaluates to false so it is straightforward to determine whether the result points to something.\n\nThis PR is only partial a solution to #26004 because while it makes it easier to check for null pointer values, it does not make it impossible to return a null pointer value inside a successful result. It would be possible to enforce that successful results always contain non-null pointers by using a `not_null` type (https://github.com/bitcoin/bitcoin/issues/24423) in combination with `ResultPtr`, though.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-09-06T15:57:14Z",
      "updated_at": "2026-02-14T04:34:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26022",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1358,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1071188902,
      "number": 26201,
      "title": "Remove Taproot activation height",
      "body": "Drop `DEPLOYMENT_TAPROOT` from `consensus.vDeployments`.\r\n\r\nNow that the commit (https://github.com/bitcoin/bitcoin/commit/7c08d81e119570792648fe95bbacddbb1d5f9ae2) which changes taproot to be enforced for all blocks is included in v24.0, it seems a good time to remove no longer needed non-consensus code.\r\n\r\nClarify what is considered a `BuriedDeployment`.\r\n\r\nWe drop taproot from `getdeploymentinfo` RPC, rather than mark it as `buried`, because this is not a buried deployment in the sense of [BIP 90](https://github.com/bitcoin/bips/blob/master/bip-0090.mediawiki). This is because the activation height has been completely removed from the code, rather than hard coded.\r\n\r\nSee discussion in #24737 and #26162.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2022-09-29T11:16:54Z",
      "updated_at": "2026-02-14T04:21:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26201",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 748,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3283486399,
      "number": 34588,
      "title": "refactor: decompose Peer struct into focused sub-components",
      "body": "The `Peer` struct in `net_processing.cpp` has ~40 fields protected by 6 different mutexes, mixing address relay, headers sync, block announcements, ping/pong, transaction relay, and misbehavior state into one flat struct.\r\nThis makes it hard to see which fields belong together and which mutex protects what.\r\n\r\nThis PR groups related fields into four sub-structs, each owning its mutex where applicable:\r\n\r\n| Sub-struct               | Fields | Mutex                    |\r\n|--------------------------|--------|--------------------------|\r\n| `PeerAddrRelay`          | 12     | `m_addr_send_times_mutex` |\r\n| `PeerHeadersSyncState`   | 7      | `m_headers_sync_mutex`    |\r\n| `PeerBlockAnnouncement`  | 3      | `m_block_inv_mutex`       |\r\n| `PeerLatency`            | 3      | *(all atomic)*            |\r\n\r\nAccess changes from flat (`peer.m_addrs_to_send`) to qualified (`peer.m_addr_relay.m_addrs_to_send`). No locking semantics, runtime behavior, or public interfaces change.\r\n\r\nThe first commit defines the four structs and adds them as members of `Peer`. The remaining four commits each move one group of fields and update all call sites.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-14T02:47:16Z",
      "updated_at": "2026-02-14T04:13:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34588",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1205,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1185011431,
      "number": 26812,
      "title": "test: add end-to-end tests for CConnman and PeerManager",
      "body": "Add unit tests that write data to a mocked socket and inspect what CConnman/PeerManager have written back to the socket, or check the internal state to verify that the behavior is as expected.\r\n\r\nThis is now possible, after most of https://github.com/bitcoin/bitcoin/pull/21878 has been merged - we don't do any syscalls (e.g. `connect()`, `recv()`) from the high level code and using a mocked socket allows testing the entire networking stack without opening actual network connections.",
      "state": "open",
      "user": "vasild",
      "created_at": "2023-01-04T14:39:37Z",
      "updated_at": "2026-02-14T04:10:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26812",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 543,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1230883419,
      "number": 27052,
      "title": "test: rpc: add last block announcement time to getpeerinfo result",
      "body": "This PR adds `last_block_announcement` to the per-peer `getpeerinfo` RPC result. This is the most recent time that this peer was the first to notify our node of a new block (one that we didn't already know about), or zero if this peer has never been the first to notify us of a new block. This timestamp already exists internally and is used for stale-tip eviction logic; this PR exposes it at the RPC layer.\r\n\r\nThis PR started out as a suggestion for additional test coverage, see https://github.com/bitcoin/bitcoin/pull/26172#issuecomment-1259678260. It turned out that the easiest way to test (already-merged) #26172 is to add this field to `getpeerinfo` and have a functional test verify its value. But it may also be useful to have this result in its own right, similar to that RPC's existing `last_block` field -- it indicates something about the quality of our peers. It allows one to predict which peer will be evicted when the stale tip logic activates. (I'm not sure if that would be useful, but it may be.)\r\n\r\nThe functional test added here fails without #26172, which is the main goal.\r\n\r\nThis PR does not test the actual stale-tip eviction logic; that's difficult to do with a functional test. But it does test the correctness of the timestamp that the eviction logic depends on. #23352 is an attempt to test the eviction logic using a unit test, it's not ready to be merged yet. I think having both kinds of tests would be beneficial.",
      "state": "open",
      "user": "LarryRuane",
      "created_at": "2023-02-06T18:32:56Z",
      "updated_at": "2026-02-14T03:47:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27052",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1514,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1276577083,
      "number": 27260,
      "title": "Enhanced error messages for invalid network prefix during address parsing.",
      "body": "# Improve Address Decoding Error Messages\r\n\r\n## Issue\r\n\r\n`DecodeDestination` does not properly handle errors when a user inputs a valid address for the wrong network (e.g., a testnet address while running the client on mainnet).\r\n\r\nThe previous error messages were misleading. For example, \"Invalid or unsupported Segwit (Bech32) or Base58 encoding\" was displayed for a valid Bech32 address on a different network. This occurred because the `is_bech32` variable only checked if the prefix matched the current network's HRP. If it didn't match, the code would fall through to Base58 decoding logic regardless of whether the string was actually a valid Bech32 address.\r\n\r\n## Solution\r\n\r\n### Implementation Approach\r\n\r\n1. **Decode first, then validate**: Instead of checking the prefix before decoding, we now decode the string using `bech32::Decode(str)` upfront. This takes minimal CPU cycles and is acceptable since address validation is not a frequent operation.\r\n\r\n2. **Gather decoding information**: After Bech32 decoding, we also attempt `DecodeBase58` (with a length of 100) and `DecodeBase58Check`. This provides enough information to properly diagnose errors.\r\n\r\n3. **Provide network-aware error messages**: When an address has an invalid prefix, the error message now includes the expected network values.\r\n\r\n### Changes Made\r\n\r\n#### 1. Add Base58 Encoded Prefixes to ChainParams (`src/kernel/chainparams.cpp`, `src/kernel/chainparams.h`)\r\n\r\n#### 2. Refactor Address Decoding Logic (`src/key_io.cpp`)\r\n\r\n- Decode Bech32 upfront using `bech32::Decode(str)` instead of checking prefix first\r\n- Use structured bindings for cleaner code: `auto [bech32_encoding, bech32_hrp, bech32_chars] = bech32::Decode(str)`\r\n- Improved error handling flow with clearer branching\r\n\r\n#### 3. Improved Error Messages\r\n\r\n| Scenario | Previous Error | New Error |\r\n|----------|---------------|-----------|\r\n| Base58 address with wrong prefix | \"Invalid or unsupported Base58-encoded address.\" | \"Invalid Base58 address. Expected prefix 3, or 1\" |\r\n| Bech32 address with wrong HRP | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid or unsupported prefix for Segwit (Bech32) address (expected bc, got tb)\" |\r\n| Invalid Base58 checksum | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid checksum or length of Base58 address (P2PKH or P2SH)\" |\r\n| Ambiguous invalid address | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Address is not valid Base58 or Bech32\" |\r\n| Bech32 with checksum error | N/A | \"Bech32 address decoded with error: Invalid Bech32 checksum\" |\r\n\r\n#### 4. Test Updates\r\n\r\n- Added `test/functional/data/rpc_validateaddress.json` with comprehensive test vectors for both mainnet and signet\r\n- Updated `test/functional/rpc_validateaddress.py` to use data-driven testing across multiple networks\r\n- Updated `test/functional/rpc_invalid_address_message.py` with new error message expectations\r\n\r\n### Consistency Improvements\r\n\r\n- Removed inconsistent periods at the end of some error messages\r\n- Changed \"Bech32 v0\" to \"SegWit v0\" for clarity\r\n\r\n## Reference\r\n\r\n- Issue: #26290\r\n",
      "state": "open",
      "user": "portlandhodl",
      "created_at": "2023-03-15T10:17:16Z",
      "updated_at": "2026-02-14T03:35:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27260",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 3213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1487286408,
      "number": 28333,
      "title": "wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively",
      "body": "Instead of constructing ScriptPubKeyMans with no data, and then loading data as we find it, we should gather everything first and then load it all on construction. If there actually is no data and we want to setup generation, then that should also occur in a constructor rather than afterwards.\r\n\r\nThis change is only applied to DescriptorScriptPubKeyMan and ExternalSignerScriptPubKeyMan, and should be done for any ScriptPubKeyMans added in the future. I don't think it's really worth it to do this for LegacyScriptPubKeyMan since it would make loading performance worse (or cause layer violations) and it's (supposed to be) going away soon.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-08-24T02:55:39Z",
      "updated_at": "2026-02-14T03:15:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28333",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1566486194,
      "number": 28690,
      "title": "build: Introduce internal kernel library",
      "body": "This PR introduces a new `libbitcoin_kernel` internal library. It completes the internal library design as laid out in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). Since the `util` library contains a bunch of modules that are not required by the kernel library, a new `kernel_util` library is introduced as well that only consists of the modules required by the kernel library. The external `libbitcoinkernel` library now re-uses the compiled objects from the internal libraries. \r\n\r\nThere is a trade-off to this. Since we don't manually export symbols from the kernel library yet, this would make the library unusable if `REDUCE_EXPORTS=ON`. For now this means that the patch here introduces a separate source file list for the external library that gets populated by the source files of its static dependents.",
      "state": "open",
      "user": "sedited",
      "created_at": "2023-10-20T11:01:03Z",
      "updated_at": "2026-02-14T03:06:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28690",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 906,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3280499535,
      "number": 34580,
      "title": "build: Add a compiler minimum version check",
      "body": "Adds a compiler minimum version check. If failed, it returns a fatal error.\r\nThis early stop at configure time will avoid contributors losing time trying to fix compilation errors because of not fitting the requirements.\r\n\r\nExample of the output for GCC:\r\nVersion requirement satisfied:\r\n```\r\nsliv3r@sliv3r-tuxedo:~/Documentos/Projectes/BitcoinCore/bitcoin$ cmake -B BUILD\r\n-- The CXX compiler identification is GNU 13.3.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n....\r\n```\r\nVersion requirement not satisfied:\r\n```\r\n$ cmake -B build -S .   -DCMAKE_C_COMPILER=/usr/bin/gcc-11   -DCMAKE_CXX_COMPILER=/usr/bin/g++-11\r\n-- The CXX compiler identification is GNU 11.5.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/g++-11 - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\nCMake Error at CMakeLists.txt:91 (message):\r\n  GCC >= 12.1 required.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n\r\n```\r\n\r\n\r\nExample of the output for GCC:\r\nVersion requirement satisfied:\r\n```\r\nsliv3r@sliv3r-tuxedo:~/Documentos/Projectes/BitcoinCore/bitcoin$ cmake -B build\r\n-- The CXX compiler identification is Clang 18.1.3\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n...\r\n```\r\n\r\nVersion requirement not satisfied:\r\n```\r\n$ cmake -B build -DCMAKE_C_COMPILER=clang-16       -DCMAKE_CXX_COMPILER=clang++-16\r\n-- The CXX compiler identification is Clang 16.0.6\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/clang++-16 - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\nCMake Error at CMakeLists.txt:86 (message):\r\n  Clang >= 17.0 required.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2026-02-13T11:31:21Z",
      "updated_at": "2026-02-14T02:49:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34580",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1912,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1681972231,
      "number": 29256,
      "title": "log, refactor: Allow log macros to accept context arguments",
      "body": "Allow `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` macros to accept context arguments to provide more information in log messages and more control over logging to callers.\r\n\r\nThis functionality is used in followup PRs:\r\n\r\n- [#30342](https://github.com/bitcoin/bitcoin/pull/30342) - To let libbitcoinkernel send output to specfic `BCLog::Logger` instances instead of a global instance, so output can be disambiguated and applications can have more control over logging.\r\n\r\n- [#30343](https://github.com/bitcoin/bitcoin/pull/30343) - To replace custom `WalletLogPrintf` calls with standard logging calls that automatically include wallet names and don't log everything at info level.\r\n\r\nThis PR does not change behavior of current log prints or require them to be updated. It includes tests and documentation covering the new functionality.\r\n\r\n---\r\n\r\nNote: Originally this PR also removed some restrictions around passing category constants to log macros to try to make them more consistent, but these changes were too controversial and have been dropped.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-01-16T22:09:35Z",
      "updated_at": "2026-02-14T02:21:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29256",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3239243501,
      "number": 34489,
      "title": "index: batch db writes during initial sync",
      "body": "Decouples part of #26966.\r\n\r\nRight now, index initial sync writes to disk for every block, which is not the best for HDD. This change batches those, so disk writes are less frequent during initial sync. This also cuts down `cs_main` contention by reducing the number of `NextBlockSync` calls (instead of calling it for every block, we will call it once per block window), making the node more responsive (IBD and validation) while indexes sync up. On top of that, it lays the groundwork for the bigger speedups, since part of the parallelization pre-work is already in place.\r\n\r\nJust as a small summary:\r\n\r\n* Batch DB writes instead of flushing per block, which improves sync time on HDD due to the reduced number of disk write operations.\r\n* Reduce `cs_main` lock contention, which improves the overall node responsiveness (and primarily IBD) while the indexes threads are syncing.\r\n* Lays the groundwork for the real speedups, since part of #26966 parallelization pre-work is introduced here as well.\r\n* Reduces the number of generated LDB files. See l0rinc's [comment](https://github.com/bitcoin/bitcoin/pull/34489#issuecomment-3876972773).\r\n\r\nNote:\r\nPending initial sync benchmark and further testing. I have only focused on decoupling and simplifying what was in #26966 first. Commits should be simple to digest.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-02-03T04:06:34Z",
      "updated_at": "2026-02-14T02:18:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34489",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1360,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1780312050,
      "number": 29678,
      "title": "Bugfix: Correct first-run free space checks",
      "body": "It's not clear what `m_assumed_*_size` are actually set based on, but historically it was in GB, not GiB, and that's still used in the GUI which is more user-facing.\r\n\r\nCould just as easily change the GUI if GiB is preferred.",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2024-03-19T16:36:10Z",
      "updated_at": "2026-02-14T01:35:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29678",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 269,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1785565107,
      "number": 29700,
      "title": "kernel, refactor: return error status on all fatal errors",
      "body": "Return util::Result objects from all functions that can trigger fatal errors.\n\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\n\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\n\n---\n\n<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`513065d8e05` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/513065d8e0536737806e7b64bd22caf35e9c9562)\n- [`1aca9a06118` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/1aca9a06118e98977639cc202fe85fb55688b8bd)\n- [`eab17e5853d` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/eab17e5853d5c1ba7559b9d8f04ddce17b54bc48)\n- [`0597c54a4bf` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/0597c54a4bfd2b3de177847295eef5fe1ff487a4)\n- [`924c14e8f0b` refactor, validation: Switch to result.Update](https://github.com/bitcoin/bitcoin/pull/29700/commits/924c14e8f0b8e134e43da55a28d0d563c0ce0098)\n- [`e5b6d454453` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/e5b6d45445359ee275bdf7d402d2a86567a43329)\n- [`9f89c918697` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/9f89c91869779f98dcfa1ee0baf8cb01985a8fe7)\n- [`3ccd6282fb4` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/3ccd6282fb48d734a7d4b09d5088e27e573a53e3)\n- [`5a10b1aaa47` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/5a10b1aaa47ff7c1adc640f6ae413a8856a1c0bd)\n- [`dcd3c7058ca` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/dcd3c7058caa71ee1cd42aec26fccbc1422f6eb8)\n- [`64bcb99af8e` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/64bcb99af8e77cae057c129513e466082d0db5fd)\n- [`d8ea4c652a2` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/d8ea4c652a278a30fb417a1d572660850a0d743d)\n- [`07267be89ca` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/07267be89cae97d86c0bff65d23e3f30092eec97)\n- [`54b8f6e808f` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/54b8f6e808f95a75b38c34727495b5e9dcfb40a8)\n- [`09cbe90fa5c` ci: Avoid -Wno-error=maybe-uninitialized false positives](https://github.com/bitcoin/bitcoin/pull/29700/commits/09cbe90fa5c05e56d43895948d0d4f2b771cff9f)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-03-21T23:11:56Z",
      "updated_at": "2026-02-14T01:23:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29700",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3675,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3283354264,
      "number": 34587,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "ircinco-mh",
      "created_at": "2026-02-14T01:16:13Z",
      "updated_at": "2026-02-14T01:16:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34587",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1799118469,
      "number": 29770,
      "title": "index: Check all necessary block data is available before starting to sync",
      "body": "Currently, we check that `BLOCK_HAVE_DATA` is available for all blocks an index needs to sync during startup. However, for `coinstatsindex` and `blockfilterindex` we also need the undo data for these blocks. If that data is missing in the blocks, we are currently still starting to sync each of these indices and then crash later when we encounter the missing data.\r\n\r\nThis PR adds explicit knowledge of which block data is needed for each index and then checks its availability during startup before initializing the sync process on them.\r\n\r\nThis also addresses a few open comments from #29668 in the last commit.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2024-03-30T22:55:19Z",
      "updated_at": "2026-02-14T01:10:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29770",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 689,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940576733,
      "number": 30342,
      "title": "kernel, logging: Pass Logger instances to kernel objects",
      "body": "Pass `Logger` instances to `BlockManager`, `CCoinsViewDB`, `CDBWrapper`, `Chainstate`, `ChainstateManager`, `CoinsViews`, and `CTxMemPool` classes so libbitcoinkernel applications and tests have the option to control where log output goes instead of having all output sent to the global logger.\n\nThis PR is an alternative to #30338. It is more limited because it only changes kernel code while leaving other parts of the codebase alone. It also takes the opportunity to migrate legacy LogPrint / LogPrintf calls to the new log macros introduced in #28318.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256 + #33847.** The non-base commits are:\n\n- [`bb99c4103d7` refactor: Pass Logger instances to kernel objects](https://github.com/bitcoin/bitcoin/pull/30342/commits/bb99c4103d73623b94800ec4de91b1ee3286221e)\n- [`c864c8a84fd` refactor: Log kernel output to local log instances](https://github.com/bitcoin/bitcoin/pull/30342/commits/c864c8a84fd18b3ec3056f1e521b30b320d46f03)\n- [`aa11409e59b` refactor: Pass Logger instance to CTxMemPool](https://github.com/bitcoin/bitcoin/pull/30342/commits/aa11409e59ba7cc3f86487bd940cfbb9f7eb3f11)\n- [`eeb84002a84` kernel: Drop global Logger instance](https://github.com/bitcoin/bitcoin/pull/30342/commits/eeb84002a84226614e5d3acb9013c15ba5ce71ff)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:52:24Z",
      "updated_at": "2026-02-14T00:46:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30342",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1357,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940584116,
      "number": 30343,
      "title": "wallet, logging: Replace WalletLogPrintf() with LogInfo()",
      "body": "Make new logging macros `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` compatible with wallet code and drop custom WalletLogPrintf() function. The new logging macros introduced in #28318 weren't previously useful in wallet code because wallet code prefixes most log messages with the wallet names to be be able to distinguish log output from multiple wallets. Fix this by introducing a new `WalletLogSource` class inheriting from `BCLog::Source` which can include the wallet name in log messages.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256.** The non-base commits are:\n\n- [`35ab88ce0e7` wallet, logging: Replace WalletLogPrintf() with LogInfo()](https://github.com/bitcoin/bitcoin/pull/30343/commits/35ab88ce0e7116c0a2bee2569ea1bc9eb5afffea)\n- [`f5039574576` wallet, logging: Switch LogInfo to LogWarning/LogError](https://github.com/bitcoin/bitcoin/pull/30343/commits/f5039574576f3128fe904147a53e3fcaab6c0d85)\n- [`aac55f94938` wallet, logging: Switch LogInfo to LogError in AddWalletDescriptor](https://github.com/bitcoin/bitcoin/pull/30343/commits/aac55f94938aa7ac727b840a9766adb848e998ab)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:57:15Z",
      "updated_at": "2026-02-14T00:31:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30343",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1201,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1943443355,
      "number": 30354,
      "title": "doc: external-signer, example 'createwallet' RPC call requires eight argument",
      "body": "The eight argument 'true' is necessary to invoke the external signer upon creating the wallet. The parameter defaults to 'false' otherwise.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2024-06-28T01:53:11Z",
      "updated_at": "2026-02-14T00:17:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30354",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2138649533,
      "number": 31132,
      "title": "validation: fetch block inputs on parallel threads 3x faster IBD",
      "body": "_Parts of this PR are isolated in independent smaller PRs to ease review:_\r\n\r\n* [x] _https://github.com/bitcoin/bitcoin/pull/34164_\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34165_\r\n\r\n---\r\n\r\nThis PR parallelizes fetching all input prevouts of a block during block connection, achieving over 3x faster IBD performance in some scenarios[^1][^2][^3][^4][^5].\r\n\r\n### Problem\r\n\r\nCurrently, when fetching inputs in `ConnectBlock`, each input is fetched from the cache sequentially. A cache miss requires a round trip to the disk database to fetch the outpoint and insert it into the cache. Since the database is read-only during `ConnectBlock`, we can fetch all inputs of a block in parallel on multiple threads while connecting.\r\n\r\n### Solution\r\n\r\nWe introduce a new `CoinsViewCacheAsync` `CCoinsViewCache` subclass that manages worker threads to fetch block inputs in parallel. The block is passed to the `CoinsViewCacheAsync` view before entering `ConnectBlock`, which kicks off the worker threads to begin fetching the inputs. The view is then passed to `ConnectBlock` since it provides the same API as `CCoinsViewCache`. The cache returns fetched coins as they become available via the overridden `FetchCoin` method. If not available yet, the main thread also fetches coins as it waits.\r\n\r\n### Implementation Details\r\n\r\nThe `CoinsViewCacheAsync` implements a lock-free MPSC (Multiple Producer, Single Consumer) queue design:\r\n\r\n- **Work Distribution**: Collects all input prevouts into a queue and uses a barrier to start all worker threads simultaneously\r\n- **Synchronization**: Worker threads use an atomic counter to claim which inputs to fetch, and each input has an atomic flag to signal completion to the main thread\r\n- **Main Thread Processing**: The main thread waits for inputs in order and moves their `Coin` into the `cacheCoins` map as they become available.\r\n- **Work Stealing**: If the main thread catches up to the workers, it assists with fetching to maximize parallelism\r\n- **Completion**: All threads synchronize on a barrier via a `Reset` method, which ensures all threads are parked before proceeding\r\n\r\n### Safety and Correctness\r\n\r\n- The `CoinsViewCacheAsync` works on a block that has not been fully validated, but it does not interfere or modify any of the validation during `ConnectBlock`\r\n- It simply fetches inputs in parallel, which must be fetched before a transaction is validated anyways\r\n- **Invalid blocks**: If an invalid block is mined, the temporary cache is reset without being flushed. This is an improvement over the current behavior, where existing inputs are inserted into the main `CoinsTip()` cache when pulled through for an invalid block\r\n\r\n### Performance\r\n\r\nBenchmarks show over 3x faster IBD performance in a cloud environment with network connected storage[^1], 3x faster IBD for an M4 Mac and up to 46% faster with directly connected storage[^2][^3][^4][^5]. The parallelization of expensive disk lookups provides significant speedup.\r\n\r\n[Flamegraphs show how the execution is changed](https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3617315125).\r\n\r\n### Credits\r\n\r\nInspired by [this comment](https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638553680).\r\n\r\nResolves https://github.com/bitcoin/bitcoin/issues/34121.\r\n\r\n[^1]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806\r\n[^2]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3515011880\r\n[^3]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3463894000\r\n[^4]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3347436866\r\n[^5]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3488760623",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2024-10-22T14:40:28Z",
      "updated_at": "2026-02-13T23:34:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31132",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3751,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3282013742,
      "number": 34585,
      "title": "Fix race condition in mempool fee estimation during block reorg",
      "body": "Fixes #34584\r\n\r\nThis commit addresses a critical race condition between mempool trimming (LimitMempoolSize) and transaction validation that could lead to stale UTXO cache usage and consensus divergence.\r\n\r\nChanges:\r\n- Add cache flush after LimitMempoolSize() in MaybeUpdateMempoolForReorg()\r\n- Reset m_view backend after CleanupTemporaryCoins() in single tx acceptance\r\n- Add explicit CleanupTemporaryCoins() after package mempool trimming\r\n- Ensure proper backend reset in CleanupTemporaryCoins() itself\r\n\r\nThe fix ensures that after any mempool state change, the cached coin view is properly synchronized to prevent validation using stale data. This prevents false 'mempool full' rejections and maintains mempool consistency across nodes during chain reorganizations.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "vishalharkal15",
      "created_at": "2026-02-13T18:22:05Z",
      "updated_at": "2026-02-13T23:16:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34585",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2899,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3277895355,
      "number": 34577,
      "title": "http: fix submission during shutdown race",
      "body": "Fixes #34573.\r\n\r\nAs mentioned in https://github.com/bitcoin/bitcoin/issues/34573#issuecomment-3891596958, the ThreadPool PR (#33689) revealed an existing issue.\r\n\r\nBefore that PR, we were returning an incorrect error \"Request rejected because http work queue depth exceeded\" during shutdown for unhandled requests (we were not differentiating between \"queue depth exceeded\" and \"server interrupted\" errors). Now, with the ThreadPool inclusion, we return the proper error but we don't handle it properly.\r\n\r\nThis PR improves exactly that. Handling the missing error and properly returning it to the user.\r\n\r\nThe race can be reproduced as follows:\r\n\r\n1) The server receives an http request.\r\n2) Processing of the request is delayed, and shutdown is triggered in the meantime.\r\n3) During shutdown, the libevent callback is unregistered and the threadpool interrupted.\r\n4) The delayed request (step 2) resumes and tries to submit a task to the now-interrupted server.\r\n\r\n\r\nAlso, to prevent this kind of issue from happening again, this PR changes task submission\r\nto return the error as part of the function's return value using `util::Expected` instead of\r\nthrowing the exception. Unlike exceptions, which require extra try-catch blocks and can be\r\nignored, returning `Expected` forces callers to explicitly handle failures, and attributes\r\nlike `[[nodiscard]]` allow us catch unhandled ones at compile time.\r\n\r\n",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-02-12T19:52:35Z",
      "updated_at": "2026-02-13T23:14:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34577",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1451,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2203477250,
      "number": 31382,
      "title": "kernel: Flush in ChainstateManager destructor",
      "body": "This simplifies the shutdown code a bit and reduces the amount of extra logic required in kernel/bitcoinkernel.cpp to tear down the chainman.\r\n\r\nMoving the second flush out of the Shutdown function into the ChainstateManager destructor, should be safe since there should be no new events created after the first flush. Tweak the chainman tests to actually exercise this new tear down behaviour.\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587)",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-11-27T13:18:50Z",
      "updated_at": "2026-02-13T22:22:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31382",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 549,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217053399,
      "number": 31425,
      "title": "RFC: Riscv bare metal CI job",
      "body": "This adds a CI job for building the static consensus library and linking it to an executable. It uses newlib-cygwin as a C library for the final linking step. This ensure compatibility with this target going forward and can serve as a starting point for enabling bare metal builds for the entire kernel library. This would have also caught the error fixed in #31365.",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-12-05T08:30:01Z",
      "updated_at": "2026-02-13T21:57:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31425",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2250366940,
      "number": 31560,
      "title": "rpc: allow writing UTXO set to a named pipe, introduce dump_to_sqlite.sh script",
      "body": "This PR slightly modifies the `dumptxoutset` RPC to allow writing the UTXO set dump into a [named pipe](https://askubuntu.com/a/449192), so that the output data can be consumed by another process, see #31373. Taking use of this with the utxo-to-sqlite.py tool (introduced in #27432), creating an UTXO set in SQLite3 format is possible on the fly and becomes a one-liner with a newly introduced script `dump_to_sqlite.sh`. E.g. for signet:\r\n```\r\n$ ./contrib/utxo-tools/dump_to_sqlite.sh \"./build/src/bitcoin-cli -signet\" ~/utxos.sqlite3\r\nUTXO Snapshot for Signet at block hash 000000ddc3b251483cf1ebb23e2750ba..., contains 5705634 coins\r\n1048576 coins converted [18.38%], 4.474s passed since start\r\n2097152 coins converted [36.76%], 8.793s passed since start\r\n3145728 coins converted [55.13%], 13.146s passed since start\r\n4194304 coins converted [73.51%], 17.478s passed since start\r\n5242880 coins converted [91.89%], 21.832s passed since start\r\n{\r\n  \"coins_written\": 5705634,\r\n  \"base_hash\": \"000000ddc3b251483cf1ebb23e2750ba2490701d0c547241b247a9beb85498d0\",\r\n  \"base_height\": 227678,\r\n  \"path\": \"/tmp/tmp.MFHEVqetv0/utxos.fifo\",\r\n  \"txoutset_hash\": \"f29e524c999487cbd0cfca5201dce67c2c5e5c5eb115c63ad48c2239f23eea4c\",\r\n  \"nchaintx\": 8272649\r\n}\r\nTOTAL: 5705634 coins written to /home/thestack/utxos.sqlite3, snapshot height is 227678.\r\n```\r\nNote that the `dumptxoutset` RPC calculates an UTXO set hash as a first step before any data is emitted, so especially on mainnet it takes quite a while until the conversion starts and something is happening visibly.\r\n\r\nThe new script is quite minimal and PoC-y at this point, there are some potential improvement ideas:\r\n- better error handling (e.g. detect if bitcoin-cli exists, clean up tmpdir if bitcoin-cli execution fails etc.)\r\n- allow to pass through the rollback option (now we always dump at the current height, i.e. \"latest\" parameter)",
      "state": "open",
      "user": "theStack",
      "created_at": "2024-12-24T02:42:27Z",
      "updated_at": "2026-02-13T21:47:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31560",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1968,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3282496156,
      "number": 34586,
      "title": "txorphanage: replace boost::multi_index with dual std::map",
      "body": "### Motivation\r\n\r\n`TxOrphanage` needs to look up orphan announcements in two different orders — by `(wtxid, peer)` for transaction lookups, and by `(peer, reconsider, sequence)` for per-peer iteration and eviction. \r\n\r\nCurrently this is done with `boost::multi_index_container`, one of the last remaining Boost uses in the codebase. This PR removes it in favor of standard library containers, contributing to the ongoing effort to eliminate the Boost dependency from bitcoind.\r\n\r\n### Approach\r\n\r\nReplace the `boost::multi_index_container` with a hand-rolled `AnnouncementIndex` class wrapping two `std::map` containers cross-linked by iterators:\r\n\r\n- **`m_by_wtxid`** `std::map<(Wtxid, NodeId), Announcement>` — owns the data\r\n- **`m_by_peer`** `std::map<(NodeId, bool, Seq), WtxidMap::iterator>` — stores cross-references, no data duplication\r\n\r\n`std::map` iterator stability guarantees that cross-references remain valid across insertions and erasures of other elements. All mutations go through `AnnouncementIndex` member functions (`Insert`/`Erase`/`SetReconsider`) to keep both indices in sync, with `Assume()` assertions verifying every mutation.\r\n\r\nNo behavior change. \r\n\r\n### Operation mapping\r\n\r\n| Operation | Before (boost) | After (AnnouncementIndex) |\r\n|---|---|---|\r\n| **Insert** | `m_orphans.get<ByWtxid>().emplace(tx, peer, seq)` | `m_orphans.Insert(tx, peer, seq)` |\r\n| **Erase** | `m_orphans.get<Tag>().erase(it)` | `m_orphans.Erase(it)` (overloaded) |\r\n| **Modify reconsider** | `index.modify(it, [](auto& a){ a.m_reconsider = val; })` | `m_orphans.SetReconsider(it, val)` |\r\n| **Project peer→wtxid** | `m_orphans.project<ByWtxid>(peer_it)` | `m_orphans.ToWtxid(peer_it)` |\r\n| **Access field** | `it->m_tx` | `Ann(it).m_tx` |\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-13T20:16:42Z",
      "updated_at": "2026-02-13T21:45:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34586",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2272618048,
      "number": 31644,
      "title": "leveldb: show non-default options during init",
      "body": "To help with to debugging and traceability (in alignment with displaying other non-default args such as `Command-line arg: dbcache=\"10000\"`) we can extend the LevelDB opening log with an additional debug message for the used non-default settings.\r\n\r\nTo avoid showing booleans as e.g. `create_if_missing=1`, I've added a local `ToString` lambda for `bool`.\r\nI wanted to use `util::Join` at the end, but couldn't find any way that I liked.\r\n\r\nExample output after the change:\r\n```bash\r\n2025-10-15T02:39:45Z Opened LevelDB successfully\r\n2025-10-15T02:39:45Z [leveldb] startup options: options.compression=NoCompression, options.create_if_missing=true, options.max_file_size=33554432, options.paranoid_checks=true, options.write_buffer_size=524288, readoptions.fill_cache=false, readoptions.verify_checksums=true, writeoptions.sync=true\r\n```",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-12T17:30:54Z",
      "updated_at": "2026-02-13T21:34:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31644",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 883,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3276965167,
      "number": 34575,
      "title": "test: Avoid empty errmsg in JSONRPCException",
      "body": "It is unclear why the fallback should be an empty message, when it is better to include all rpc_error details that are available.\r\n\r\nAlso, include the http status.\r\n\r\nThis allows to revert commit 6354b4fd7fe819eb13274b212e426a7d10ca75d3, because it is no longer needed.\r\n\r\n\r\nCan be tested by running this diff:\r\n\r\n```diff\r\ndiff --git a/test/functional/wallet_disable.py b/test/functional/wallet_disable.py\r\nindex dbcccd4778..9717a2d248 100755\r\n--- a/test/functional/wallet_disable.py\r\n+++ b/test/functional/wallet_disable.py\r\n@@ -18,9 +18,8 @@ class DisableWalletTest (BitcoinTestFramework):\r\n         self.extra_args = [[\"-disablewallet\"]]\r\n         self.wallet_names = []\r\n \r\n-    def run_test (self):\r\n-        # Make sure wallet is really disabled\r\n-        assert_raises_rpc_error(-32601, 'Method not found', self.nodes[0].getwalletinfo)\r\n+    def run_test(self):\r\n+        self.nodes[0].getwalletinfo()\r\n         x = self.nodes[0].validateaddress('3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy')\r\n         assert x['isvalid'] == False\r\n         x = self.nodes[0].validateaddress('mneYUmWYsuk7kySiURxCi3AGxrAqZxLgPZ')\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-12T16:12:09Z",
      "updated_at": "2026-02-13T21:26:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34575",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1158,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2294479432,
      "number": 31723,
      "title": "qa: Facilitate debugging bitcoind inside functional tests",
      "body": "Facilitates debugging specific instances of bitcoind *in the context of Python tests, inside of an editor/IDE/debugger*.\r\n\r\nMakes bitcoind spin during startup, waiting for a debugger to be attached, so that breakpoints during process init can be debugged.\r\n\r\n### Example usage\r\n\r\n1. Generate build files with `-DENABLE_WAIT_FOR_DEBUGGER=ON` & build.\r\n   \r\n   ```\r\n   cmake -B build -DCMAKE_BUILD_TYPE=Debug -DENABLE_WAIT_FOR_DEBUGGER=ON && cmake --build build -j$(nproc)\r\n   ```\r\n\r\n2. Set breakpoints in the C++ code in your editor/IDE/debugger.\r\n\r\n3. Start a Python functional test with a debugger command such as:\r\n   - LLDB inside an already started Tmux pane (append ` -o continue` to the LLDB args to have the debugger continue automatically):\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"tmux split-window -h lldb -p \\$PID\\$\"\r\n     ```\r\n   - Sublime Text Debugger, allows a running session to attach:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"subl --command \\\"debugger {\\\\\\\"action\\\\\\\": \\\\\\\"start\\\\\\\", \\\\\\\"configuration\\\\\\\": {\\\\\\\"name\\\\\\\": \\\\\\\"foo\\\\\\\", \\\\\\\"type\\\\\\\": \\\\\\\"lldb\\\\\\\", \\\\\\\"request\\\\\\\": \\\\\\\"attach\\\\\\\", \\\\\\\"program\\\\\\\": \\\\\\\"dummyprogram\\\\\\\", \\\\\\\"pid\\\\\\\": \\\\\\\"\\$PID\\$\\\\\\\"}}\\\"\"\r\n     ```\r\n   - Don't specify `--debug_cmd ...\\$PID\\$...`, instead have the test framework log which bitcoind PID you should manually attach to:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2\r\n     ```\r\n\r\n5. Experience how debugger hits breakpoints as the functional test executes RPCs.\r\n\r\nUsing `-debug_runs <RUN_INDEX>` often requires doing a dry-run of a functional test with `-ldebug` and examining the log to see which run index is the one we want to debug:\r\n```\r\n2025-...Z TestFramework.node0 (DEBUG): bitcoind started (run #1, node #0), waiting for RPC to come up\r\n``` \r\n\r\n### Alternative usage\r\n\r\nTweak functional test code to specify `wait_for_debugger` when (re)starting a node:\r\n\r\n```diff\r\n-        self.restart_node(0)\r\n+        self.restart_node(0, wait_for_debugger=True)\r\n```\r\nWhile it can be messy to modify files while moving between commits, and cumbersome inside of loops, it might be more straightforward than `-debug_runs <RUN_INDEX>` in a given case.\r\n\r\n### *Needed before merge*\r\n\r\n- [ ] Testing on Mac to confirm -waitfordebugger on the C++ side behaves as expected.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-23T13:18:06Z",
      "updated_at": "2026-02-13T20:52:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31723",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3214411194,
      "number": 34418,
      "title": "qa: Make wallet_multiwallet.py Windows crossbuild-compatible",
      "body": "Makes the functional test compatible with *Linux->Windows cross-built executables*.\r\n\r\nMain parts:\r\n* Commit \"qa: Check for platform-independent part of error message\" switches to match on platform-independent part of error message.\r\n* Commit \"qa: Test scanning errors individually\" disentangles code causing the same error message substring, based on #31410.\r\n* Commit \"qa: Disable parts of the test when running under Windows or root\" enables the test to be run on Windows, based in part on https://github.com/bitcoin/bitcoin/pull/31410#issuecomment-3554721014.\r\n\r\nAlso:\r\n* Removes unused option in wallet_multiwallet.py.\r\n* Breaks apart wallet_multiwallet.py's `run_test()` into smaller test functions.\r\n* Improves `assert_equal()` output for dicts.\r\n\r\nFixes #31409.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2026-01-27T12:35:18Z",
      "updated_at": "2026-02-13T20:40:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34418",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 830,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2336649960,
      "number": 31868,
      "title": "[IBD] specialize block serialization",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n---\r\n\r\nThis PR is drafted until I remeasure everything after the recent merges and I need to find a way to simplify the 1 byte writes more nicely, I don't like all the specializations.\r\n\r\n---\r\n\r\n### Summary\r\n\r\nThis PR contain a few different optimization I found by IBD profiling, and via the newly added block seralization benchmarks. It also takes advantage of the recently merged [`std::span` changes](https://github.com/bitcoin/bitcoin/pull/31519) enabling propagating static extents.\r\n\r\nThe commits merge similar (de)serialization methods, and separates them internally with  `if constexpr` - similarly to how it has been [done here before](https://github.com/bitcoin/bitcoin/pull/28203). This enabled further `SizeComputer` optimizations as well.\r\n\r\n### Context\r\nOther than these, since single byte writes are used very often (used for every `(u)int8_t` or `std::byte` or `bool` and for every `VarInt`'s first byte which is also needed for every `(pre)Vector`), it makes sense to avoid the generalized serialization infrastructure that isn't needed:\r\n* `AutoFile` write doesn't need to allocate 4k buffer for a single byte now;\r\n* `VectorWriter` and `DataStream` avoids memcpy/insert calls;\r\n* `CSHA256::Write` can avoid `memcpy`.\r\n\r\n`DeserializeBlock` is dominated by the hash calculations so the optimizations barely affect it.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C compiler ............................ AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          195,610.62 |            5,112.20 |    0.3% |     11.00 | `SerializeBlock`\r\n|           12,061.83 |           82,906.19 |    0.1% |     11.01 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          174,569.19 |            5,728.39 |    0.6% |     10.89 | `SerializeBlock`\r\n|           10,241.16 |           97,645.21 |    0.0% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~12.% faster\r\n> `SizeComputerBlock` - ~17.7% faster\r\n\r\n-----\r\n\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          867,857.55 |            1,152.26 |    0.0% |    8,015,883.90 |    3,116,099.08 |  2.572 |   1,517,035.87 |    0.5% |     10.81 | `SerializeBlock`\r\n|           30,928.27 |           32,332.88 |    0.0% |      221,683.03 |      111,055.84 |  1.996 |      53,037.03 |    0.8% |     11.03 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          615,000.56 |            1,626.01 |    0.0% |    8,015,883.64 |    2,208,340.88 |  3.630 |   1,517,035.62 |    0.5% |     10.56 | `SerializeBlock`\r\n|           25,676.76 |           38,945.72 |    0.0% |      159,390.03 |       92,202.10 |  1.729 |      42,131.03 |    0.9% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~41.1% faster\r\n> `SizeComputerBlock` - ~20.4% faster\r\n\r\n----\r\n\r\nWhile this wasn't the main motivation for the change, IBD on Ubuntu/GCC on SSD with i9 indicates a 2% speedup as well:\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```bash\r\nCOMMITS=\"05314bde0b06b820225f10c6529b5afae128ff81 1cd94ec2511874ec68b92db34ad7ec7d9534fed1\"; \\\r\nSTOP_HEIGHT=880000; DBCACHE=10000; \\\r\nC_COMPILER=gcc; CXX_COMPILER=g++; \\\r\nhyperfine \\\r\n--export-json \"/mnt/my_storage/ibd-${COMMITS// /-}-${STOP_HEIGHT}-${DBCACHE}-${C_COMPILER}.json\" \\\r\n--runs 3 \\\r\n--parameter-list COMMIT ${COMMITS// /,} \\\r\n--prepare \"killall bitcoind || true; rm -rf /mnt/my_storage/BitcoinData/*; git checkout {COMMIT}; git clean -fxd; git reset --hard; cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF -DCMAKE_C_COMPILER=$C_COMPILER -DCMAKE_CXX_COMPILER=$CXX_COMPILER && cmake --build build -j$(nproc) --target bitcoind && ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=1 -printtoconsole=0 || true\" \\\r\n--cleanup \"cp /mnt/my_storage/BitcoinData/debug.log /mnt/my_storage/logs/debug-{COMMIT}-$(date +%s).log || true\" \\\r\n\"COMPILER=$C_COMPILER COMMIT={COMMIT} ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -prune=550 -printtoconsole=0\"\r\nBenchmark 1: COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33647.918 s ± 508.655 s    [User: 71503.409 s, System: 4404.899 s]\r\n  Range (min … max):   33283.439 s … 34229.026 s    3 runs\r\n \r\nBenchmark 2: COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33062.491 s ± 183.335 s    [User: 71246.532 s, System: 4318.490 s]\r\n  Range (min … max):   32888.211 s … 33253.706 s    3 runs\r\n \r\nSummary\r\n  COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0 ran\r\n    1.02 ± 0.02 times faster than COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-02-14T16:48:23Z",
      "updated_at": "2026-02-13T20:24:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31868",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 6242,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3278487026,
      "number": 34578,
      "title": "depends: Update Qt to version 6.10.2",
      "body": "This PR updates the `qt` package in depends to the most recent version [6.10.2](https://www.qt.io/blog/qt-6.10.2-released).\r\n\r\nThe update includes many bugfixes that enable dropping some patches.\r\n\r\nAdditionally, [patches](https://github.com/bitcoin/bitcoin/issues/34569#issuecomment-3892793262) for compatibility with GCC 16 have been included.\r\n\r\nA [commit](https://github.com/bitcoin/bitcoin/pull/32709/changes/8f1b55d1d52fb6e44a6d2d34b506f7f309c89ad1) from https://github.com/bitcoin/bitcoin/pull/32709 is also included.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-12T22:40:52Z",
      "updated_at": "2026-02-13T20:05:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34578",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 561,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2349932670,
      "number": 31929,
      "title": "http: Make server shutdown more robust",
      "body": "- Log HTTP request pointers to be able to discover which one is stuck.\r\n- Instead of hanging indefinitely, use timeouts and abort when HTTP connections take unreasonably long to close.\r\n- Ensure we always free libevent HTTP.\r\n\r\nShould help debug #31894.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-02-21T15:32:53Z",
      "updated_at": "2026-02-13T19:59:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31929",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 292,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3249875645,
      "number": 34512,
      "title": "rpc: add coinbase_tx field to getblock",
      "body": "This adds a `coinbase_tx` field to the `getblock` RPC result, starting at verbosity level 1. It contains only fields guaranteed to be small, i.e. not the outputs.\r\n\r\nInitial motivation for this was to more efficiently scan for BIP54 compliance. Without this change, it requires verbosity level 2 to get the coinbase, which makes such scan very slow. See https://github.com/bitcoin-inquisition/bitcoin/pull/99#issuecomment-3852370506.\r\n\r\nAdding these fields should be useful in general though and hardly makes the verbosity 1 result longer.\r\n\r\n```\r\nbitcoin rpc help getblock\r\n\r\ngetblock \"blockhash\" ( verbosity )\r\n\r\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\r\nIf verbosity is 1, returns an Object with information about block <hash>.\r\nIf verbosity is 2, returns an Object with information about block <hash> and information about each transaction.\r\n...\r\nResult (for verbosity = 1):\r\n{                                 (json object)\r\n  \"hash\" : \"hex\",                 (string) the block hash (same as provided)\r\n  \"confirmations\" : n,            (numeric) The number of confirmations, or -1 if the block is not on the main chain\r\n  \"size\" : n,                     (numeric) The block size\r\n  \"strippedsize\" : n,             (numeric) The block size excluding witness data\r\n  \"weight\" : n,                   (numeric) The block weight as defined in BIP 141\r\n  \"coinbase_tx\" : {               (json object) Coinbase transaction metadata\r\n    \"version\" : n,                (numeric) The coinbase transaction version\r\n    \"locktime\" : n,               (numeric) The coinbase transaction's locktime (nLockTime)\r\n    \"sequence\" : n,               (numeric) The coinbase input's sequence number (nSequence)\r\n    \"coinbase\" : \"hex\",         (string) The coinbase input's script\r\n    \"witness\" : \"hex\"             (string, optional) The coinbase input's first (and only) witness stack element, if present\r\n  },\r\n  \"height\" : n,                   (numeric) The block height or index\r\n  \"version\" : n,                  (numeric) The block version\r\n...\r\n```\r\n\r\n```\r\nbitcoin rpc getblock 000000000000000000013c986f9aebe800a78454c835ccd07ecae2650bfad3f6 1\r\n```\r\n\r\n```json\r\n{\r\n  \"hash\": \"000000000000000000013c986f9aebe800a78454c835ccd07ecae2650bfad3f6\",\r\n  \"confirmations\": 2,\r\n  \"height\": 935113,\r\n  \"version\": 561807360,\r\n  \"...\": \"...\",\r\n  \"weight\": 3993624,\r\n  \"coinbase_tx\": {\r\n    \"version\": 2,\r\n    \"locktime\": 0,\r\n    \"sequence\": 4294967295,\r\n    \"coinbase\": \"03c9440e04307c84692f466f756e6472792055534120506f6f6c202364726f70676f6c642ffabe6d6d9a8624235259d3680c972b0dd42fa3fe1c45c5e5ae5a96fe10c182bda17080e70100000000000000184b17d3f138020000000000\",\r\n    \"witness\": \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n  },\r\n  \"tx\": [\r\n    \"70eb053340c7978c5aa1b34d75e1ba9f9d1879c09896317f306f30c243536b62\",\r\n    \"5bcf8ed2900cb70721e808b8977898e47f2c9001fcee83c3ccd29e51c7775dcd\",\r\n    \"3f1991771aef846d7bb379d2931cccc04e8421a630ec9f52d22449d028d2e7f4\",\r\n    \"...\"\r\n  ]\r\n}\r\n```\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2026-02-05T11:54:15Z",
      "updated_at": "2026-02-13T19:22:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34512",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3071,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3281186451,
      "number": 34582,
      "title": "rpc: Properly parse -rpcworkqueue/-rpcthreads",
      "body": "The integral arg parsing has many issues:\r\n\r\n* There is no way to parse an unsigned integral type at all\r\n* There is no way to parse an integral type of less width than int64_t\r\n* As a result, calling code splatters confusing c-style casts just to let the code compile. However, usually there are no range checks and proper range handling.\r\n\r\nFor example, when someone (maybe for testing) wants to set the rpc work queue to the maximum possible number, there is no easy way to do so without reading the source code and manually crafting the exact integer value. Using the \"9999 hack\" will silently set it to `-1` (!)\r\n\r\nTo test:\r\n\r\n`/bld-cmake/bin/bitcoin-qt -datadir=/tmp -regtest -rpcworkqueue=99999999999999999999999999 -printtoconsole=1 -server=1 -debug=http | grep 'set work queue of depth'`\r\n\r\nBefore:\r\n\r\n```\r\n[http] set work queue of depth -1\r\n```\r\n\r\nAfter:\r\n\r\n```\r\n[http] set work queue of depth 2147483647\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-13T14:40:20Z",
      "updated_at": "2026-02-13T19:12:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34582",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 962,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2466171613,
      "number": 32297,
      "title": "bitcoin-cli: Add -ipcconnect option",
      "body": "This implements an idea from sipa in https://github.com/bitcoin/bitcoin/issues/28722#issuecomment-2807026958 to allow `bitcoin-cli` to connect to the node via IPC instead of TCP, if the ENABLE_IPC cmake option is enabled and the node has been started with `-ipcbind`.\r\n\r\nThis feature can be tested with:\r\n\r\n```\r\nbuild/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\r\nbuild/bin/bitcoin-cli -regtest -ipcconnect=unix -getinfo\r\n```\r\n\r\nThe -ipconnect parameter can also be omitted, since this change also makes `bitcoin-cli` prefer IPC over HTTP by default, and falling back to HTTP if an IPC connection can't be established.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-17T13:55:32Z",
      "updated_at": "2026-02-13T18:41:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32297",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 772,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3123216401,
      "number": 34138,
      "title": "Cluster mempool: more accurate cost model for SFL",
      "body": "Builds on top of #34023, part of #30289.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented as of #32545 and #34023, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on an average on a number of systems.\r\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-22T14:57:53Z",
      "updated_at": "2026-02-13T18:35:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34138",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1859,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2471245988,
      "number": 32317,
      "title": "kernel: Separate UTXO set access from validation functions",
      "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API (as done [here](https://github.com/sedited/bitcoin/commit/09e05493010119fc60d310d3e7ffc388de441f9a#diff-f638e65d9278276b2a6ac42ffbbd26d079c3dba752feed5038a25a1ee565d320R947))",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-04-21T13:15:46Z",
      "updated_at": "2026-02-13T18:30:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32317",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1886,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1685623460,
      "number": 29278,
      "title": "Wallet:  Add `maxfeerate` wallet startup option",
      "body": "This PR fixes #29220\r\n\r\n- The PR adds a wallet `-maxfeerate` startup option, as the upper limit of wallet transactions fee rate.\r\n\r\n- This fixes the ambiguity of using `maxtxfee` value to check the upper limit of transactions fee rate.\r\n\r\n-  Wallet will not create a transaction with fee rate above `maxfeerate` value. And you can not set wallet fee rate with `settxfee` RPC above `maxfeerate` value.\r\n\r\n- This PR adds a functional test that ensure the behavior is enforced.\r\n \r\n\r\n\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2024-01-18T22:23:49Z",
      "updated_at": "2026-02-13T18:28:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29278",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167372056,
      "number": 34267,
      "title": "net: avoid unconditional `privatebroadcast` logging (+ warn for debug logs)",
      "body": "### Motivation\r\nThe recently merged [private broadcast](https://github.com/bitcoin/bitcoin/pull/29415) is a privacy feature, and users may share `debug.log` with support.\r\nUnconditional `LogInfo()` messages that mention private broadcast and/or include (w)txids can leak sensitive context (e.g. which transactions a user originated).\r\nSince it's meant to be a private broadcast, we should minimize leaks.\r\nIt's a best effort, it's not invalidated by other logs possibly leaking identifiable information, those can be addressed separately.\r\nWe're not promising that the logs won't ever contain data that could be used against the user, but we should still try to minimize that data, especially for a feature that's advertised as privacy-focused.\r\n\r\nFollow up to [#29415 (comment)](https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2637012294)\r\n\r\n### Changes\r\n* Move private-broadcast event logs from `LogInfo()` to `LogDebug(BCLog::PRIVBROADCAST, ...)`, so they are only emitted when `-debug=privatebroadcast` was explicitly provided.\r\n* Remove hardcoded `\"[privatebroadcast]\"` log-string prefixes (category logging already adds the prefix).\r\n* Keep warning at the default log level for startup failures.\r\n* Add an init log (not a warning since that would require excessive test framework updates) when any `-debug` categories are enabled that additional logs may contain privacy-sensitive information and should not be shared publicly.\r\n* Update a related startup arg (`-logips`) to clarify that clarify that non-debug logs can also contain IP addresses.\r\n\r\n### Reproducer\r\nThe new warning can be checked with:\r\n```bash\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 | grep 'Debug logging is enabled' | wc -l\r\n       0\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 -debug | grep 'Debug logging is enabled' | wc  -l\r\n       1\r\n```\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-12T21:25:29Z",
      "updated_at": "2026-02-13T18:08:49Z",
      "merged_at": "2026-01-27T11:59:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34267",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1976,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2501800868,
      "number": 32427,
      "title": "(RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store",
      "body": "Opening this PR mostly to get concept/approach feedback.\r\n\r\nThis is motivated by the kernel library, where the internal usage of leveldb is a limiting factor to its future use cases. Specifically it is not possible to share leveldb databases between two processes. A notable use-case for the kernel library is accessing and analyzing existing block data. Currently this can only be done by first shutting down the node writing this data. Moving away from leveldb opens the door towards doing this in parallel. A flat file based approach was chosen, since the requirements for persistence here are fairly simple (no deletion, constant-size entries). The change also offers better performance by making node startup faster, and has a smaller on-disk footprint, though this is negligible in the grand scheme of things.\r\n\r\nThe BlockTreeStore introduces a new data format for storing block indexes and headers on disk. The class is very similar to the existing CBlockTreeDB, which stores the same data in a leveldb database. Unlike CBlockTreeDB, the data stored through the BlockTreeStore is directly serialized and written to flat .dat files. The storage schema introduced\r\nis simple. It relies on the assumption that no entry is ever deleted and that no duplicate entries are written. These assumptions hold for the current users of CBlockTreeDB.\r\n\r\nA write ahead ahead log and boolean flags as file existence checks ensure write atomicity. Every data entry is also given a crc32c checksum to detect data corruption.\r\n\r\nThe change also opens the door towards getting rid of having to reindex the block tree due to corruption (though switching from pruned -> un-pruned still requires extra logic). This would simplify a lot of kernel/validation code, as can be seen in this [commit](https://github.com/TheCharlatan/bitcoin/commit/bfb2709e1d116d4e613601c3f0140f099530159d#diff-28f178018e05634ee3f8ddce3f4e0cec334ae69915cecf92be8299c749d8d470). The implementation here should be fairly robust against corruption (no parallel read/writes, no background compaction).\r\n\r\nAn alternative to this pull request, that could allow the same kernel feature, would be closing and opening the leveldb database only when reading and writing. This might incur a (negligible) performance penalty, but more importantly requires careful consideration of how to handle any contentions when opening, which might have complex side effects due to our current locking mode. It would also be possible to introduce an existing database with the required features for just the block tree, but that would introduce reliance on a new dependency and come with its own tradeoffs. For these reasons I chose this approach.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-05-06T14:27:59Z",
      "updated_at": "2026-02-13T17:55:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32427",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2759,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2532604905,
      "number": 32575,
      "title": "refactor: Remove special treatment for single threaded script checking",
      "body": "This topic has been motivated by my work on batch validation and a related conversation just happened here: https://github.com/bitcoin/bitcoin/pull/32467#discussion_r2098305199 \r\n\r\n`CheckInputScripts` currently only does what its name implies if there is no multithreading usage for validation. If there are worker threads available the function instead only creates the checks and puts them into a vector. Aside from some shared pre-checks the multithreaded code path is much simpler compared to the rest. This dual use makes the function hard to grasp and its naming confusing.\r\n\r\nThis PR refactors this code to be more readable and improves documentation aside from unifying the single threaded and the multithreaded cases by letting checkqueue handle single threaded script checking as well. The code is already suited for this and there seems to be not noticable performance overhead from this.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-05-20T20:52:49Z",
      "updated_at": "2026-02-13T17:24:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32575",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 970,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2527184806,
      "number": 32554,
      "title": "bench: replace embedded raw block with configurable block generator",
      "body": "### Problem\r\n\r\nThe [hardcoded benchmark block 413567](https://mempool.space/block/413567) has several issues:\r\n- embeds 1.1MB of binary data in the repository\r\n- mined in 2016, predates SegWit v0, Taproot, and modern script types\r\n- benchmarks cannot test different transaction patterns or script mixes\r\n- updating to a newer block (e.g., [#32457](https://github.com/bitcoin/bitcoin/pull/32457)) would still add binary bloat and would remain inflexible\r\n\r\n### Fix\r\n\r\nAdded configurable `bench/block_generator.{h,cpp}` that builds fully valid blocks at runtime providing blocks or raw serialized stream.\r\n\r\nNote that `HexStrBench` was simplified to work with random data - it doesn't need to be block-related.\r\n\r\n---\r\n\r\nThis supersedes #32457 by eliminating the need for any hardcoded block data while enabling flexible benchmark scenarios.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-18T21:39:14Z",
      "updated_at": "2026-02-13T17:22:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32554",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 907,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3184839812,
      "number": 34329,
      "title": "rpc,net: Add private broadcast RPCs",
      "body": "Follow up from #29415 \r\n\r\nSending a transaction via private broadcast does not have any way for a user to track the status of the transaction before it gets returned by another peer. The default logs have been removed as well in #34267. Nor is there any way to abort a transaction once it has been added to the private broadcast queue.\r\n\r\nThis adds two new RPCs:\r\n- `getprivatebroadastinfo` returns information about what transactions are in the private broadcast queue, including all the peers' addresses we have chosen and timestamps.\r\n- `abortprivatebroadcast` stops broadcasting a transaction in the private broadcast queue.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-01-18T01:46:20Z",
      "updated_at": "2026-02-13T17:21:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34329",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 664,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2378191350,
      "number": 32015,
      "title": "net: replace manual reference counting of CNode with shared_ptr",
      "body": "Before this change the code used to count references to `CNode` objects manually via `CNode::nRefCount`. Unneeded `CNode`s were scheduled for deletion by putting them in `CConnman::m_nodes_disconnected` and were deleted after their reference count reached zero. Deleting consists of calling `PeerManager::FinalizeNode()` and destroying the `CNode` object.\r\n\r\nReplace this scheme with `std::shared_ptr`. This simplifies the code and removes:\r\n`CNode::nRefCount`\r\n`CNode::GetRefCount()`\r\n`CNode::AddRef()`\r\n`CNode::Release()`\r\n`CConnman::m_nodes_disconnected`\r\n`CConnman::NodesSnapshot`\r\n\r\nNow creating a snapshot of `CConnman::m_nodes` is done by simply copying it (under the mutex).\r\n\r\nCall `PeerManager::FinalizeNode()` from the destructor of `CNode`, which is called when the reference count reaches 0.\r\n\r\nThis removes brittle code and replaces it by a code from the standard library which is more robust. All the below are possible with the manual reference counting and not possible with `shared_ptr`:\r\n* Use an object without adding a reference to it\r\n* Add too many references to an object, mismatch the add/remove by having more \"add\"\r\n* Forget to reduce the reference count, mismatch the add/remove by having less \"remove\"\r\n* Go with negative reference count by mistakenly having too many \"remove\"\r\n* Destroy an object while there are references to it\r\n\r\nThere is zero learning curve for the average C++ programmer who knows how `shared_ptr` works. Not so much with the manual reference counting because one has to learn about `AddRef()`, `Release()`, check and maintain where are they called and their relationship with `m_nodes_disconnected`.\r\n\r\n---\r\n\r\nThis has some history in https://github.com/bitcoin/bitcoin/pull/28222 and https://github.com/bitcoin/bitcoin/pull/10738. See below https://github.com/bitcoin/bitcoin/pull/32015#issuecomment-2717384152 and https://github.com/bitcoin/bitcoin/pull/32015#issuecomment-2717860925.\r\n\r\n---\r\n\r\nPossible followup: change `ProcessMessages()` and `SendMessages()` to take `CNode&`: https://github.com/bitcoin/bitcoin/pull/32015#discussion_r2088731770",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-03-07T09:53:01Z",
      "updated_at": "2026-02-13T17:20:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32015",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2167,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2493655301,
      "number": 32394,
      "title": "net: make m_nodes_mutex non-recursive",
      "body": "The only case of a recursive lock was a nested `ForNode()` call to trim\r\nthe size of `lNodesAnnouncingHeaderAndIDs` to `<= 3`. This need not be\r\nnested, so take it out.\r\n\r\nBefore:\r\n```\r\nfornode(newnode)\r\n    if (size >= 3)\r\n        fornode(front) handle removal of front\r\n        pop front\r\n    push back newnode\r\n```\r\n\r\nAfter:\r\n```\r\nfornode(newnode)\r\n    push back newnode\r\nif (size > 3)\r\n    fornode(front) handle removal of front\r\n    pop front\r\n```\r\n\r\n`lNodesAnnouncingHeaderAndIDs` is protected by `cs_main` which is locked\r\nduring the entire operation.\r\n\r\nPartially resolves: https://github.com/bitcoin/bitcoin/issues/19303\r\n\r\n---\r\n\r\n_This PR included https://github.com/bitcoin/bitcoin/pull/32326 (first 3 commits in this PR). That PR was merged first, so the size of this was reduced._",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-05-01T12:04:32Z",
      "updated_at": "2026-02-13T17:18:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32394",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 831,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2563709776,
      "number": 32672,
      "title": "ci: update pwsh to use custom shell that fails-fast",
      "body": "Github by default sets [fail fast](https://docs.github.com/en/actions/writing-workflows/workflow-syntax-for-github-actions#exit-codes-and-error-action-preference) behaviour on pswh shell which means that if any powershell cmdlet fails the script will stop and exit. The problem is that this behaviour doesn't apply when calling native executables, it only applies to powershell cmdlets.\r\n\r\nI think the safest thing is to whenever we use pwsh to enable `$PSNativeCommandUseErrorActionPreference = $true` which will also fail calling any exe that returns a non-zero exit code.\r\n\r\nTechnically the step `Adjust paths in test/config.ini` only uses cmdlets so this step will not benefit from this change but I feel like it's good practice to still enable this feature in case this script gets modified in the future to call an exe.\r\n\r\nHere is a CI run that has a script that fails silently (look at Windows Native, VS 2022 -> Get tool information): https://github.com/m3dwards/bitcoin/actions/runs/15415032095/job/43375709475\r\nAnd with this change applied, the script correctly fails: https://github.com/m3dwards/bitcoin/actions/runs/15416585565/job/43380685364",
      "state": "closed",
      "user": "m3dwards",
      "created_at": "2025-06-03T12:03:44Z",
      "updated_at": "2026-02-13T16:57:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32672",
      "labels": [
        "Windows",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1207,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3223998841,
      "number": 34448,
      "title": "ci, iwyu: Fix warnings in `src/util` and treat them as errors",
      "body": "This PR [continues](https://github.com/bitcoin/bitcoin/pull/33725#issuecomment-3466897433) the ongoing effort to enforce IWYU warnings.\r\n\r\nSee [Developer Notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#using-iwyu).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-29T15:38:39Z",
      "updated_at": "2026-02-13T16:47:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34448",
      "labels": [
        "Refactoring",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 305,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2743753242,
      "number": 33186,
      "title": "wallet, test: Ancient Wallet Migration from v0.14.3 (no-HD and Single Chain)",
      "body": "This PR adds test coverage for migrating legacy Bitcoin Core wallets from v0.14.3 (released in 2017) to the descriptor wallet format. The test validates that users can safely upgrade their wallets while preserving all funds, transaction history, and addresses.\r\n\r\nThis test was originally developed on top of #32977, as it was requested in reviews.\r\nHowever, since it also increases test coverage, it can be merged independently.\r\n\r\nThe test covers two wallet migration scenarios:\r\n\r\n* Non-HD Wallet Migration - Tests migration of non-HD wallets (created with `-usehd=0`)\r\n* Single Chain HD Wallet Migration - Tests migration of HD wallets from v0.14.3 (`VERSION_HD_BASE`)\r\n\r\nThe node v0.14.3 cannot be synced because it doesn't have the `syncwithvalidationinterfacequeue` RPC implemented (required by `test_framework.py`), so the solution is to copy the `block` folder to the modern node and start it with `-reindex-chainstate`. Because of this additional complexity, this testing is best managed in a separate file rather than in the existing migration test files.\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-08-13T18:50:30Z",
      "updated_at": "2026-02-13T16:20:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33186",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1147,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3281425700,
      "number": 34583,
      "title": "ci: [refactor] Drop last use of pwsh",
      "body": "The use of pwsh was a bit confusing and inconsistent around the exit code. See also https://github.com/bitcoin/bitcoin/pull/32672\r\n\r\nI think it is fine to drop it and purely use Bash/Python.\r\n\r\nThis also moves a bit of code from the github yaml to the python script.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-13T15:40:57Z",
      "updated_at": "2026-02-13T15:41:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34583",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 303,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275501062,
      "number": 34570,
      "title": "doc: update Windows MSVC build guide to utilize winget to install build requirements",
      "body": "This PR updates the Windows MSVC build guide to bring it more in line with the macOS and Unix build guides. \r\n\r\nCurrently the guide listed requirements but left users to manually do the download/installation. The macOS and the Unix guide utilize package managers to provide concrete installation commands that users can follow. By introducing  `winget`, the Windows MSVC build guide now also provides concrete installation commands.\r\n\r\nThe changes/commands can be tested on any windows machine, provided it run a  Windows 10 (version 1809 (build 17763)) or later (e.g. Windows 11 / Server 2025).",
      "state": "open",
      "user": "janb84",
      "created_at": "2026-02-12T10:23:38Z",
      "updated_at": "2026-02-13T15:23:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34570",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3190110147,
      "number": 34349,
      "title": "util: Remove brittle and confusing sp::Popen(std::string)",
      "body": "The subprocess Popen call that accepts a full `std::string` has many issues:\r\n\r\n* It promotes brittle and broken code, where spaces are not properly quoted. Example: https://github.com/bitcoin/bitcoin/pull/33929#discussion_r2590523065\r\n* The internally used `util::split` function does incorrectly split on spaces, instead of using `shlex.split`.\r\n* It is redundant and not needed, because a vector interface already exists.\r\n\r\nFix all issues by removing it and just using the vector interface.\r\n\r\nThis pull request should not change any behavior: Note that the command taken from `gArgs.GetArg(\"-signer\", \"\")` is still passed through the `sp::util::split` helper, just like before. Fixing that is left for a follow-up, so that this change here is basically just a refactor.\r\n\r\nThis also fixes a unit test bug as a side-effect: Fixes https://github.com/bitcoin/bitcoin/issues/32574.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-20T07:19:24Z",
      "updated_at": "2026-02-13T15:01:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34349",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 940,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3251388923,
      "number": 34521,
      "title": "validation: fix UB in `LoadChainTip`",
      "body": "Addresses https://github.com/bitcoin/bitcoin/issues/34503. See this issue for more details as well.\r\n\r\nFixes a bug where, under certain conditions, `setBlockIndexCandidates` had blocks in it that were worse than the tip. Removing the tip from `setBlockIndexCandidates` before modifying its `nSequenceId` avoids the undefined behavior that results from modification of the sequence id field while the tip is still in the set.\r\n\r\n",
      "state": "open",
      "user": "marcofleon",
      "created_at": "2026-02-05T18:23:00Z",
      "updated_at": "2026-02-13T14:59:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34521",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 465,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3266912797,
      "number": 34548,
      "title": "ci: Add and use ci-windows-cross.py helper",
      "body": "Currently the ci yaml has a mix of Bash and Pwsh snippets, which is problematic:\r\n\r\n* The `shellcheck` tool does not review the Bash\r\n* The ci yaml is not merged with master on re-runs, but the code is, leading to possibly confusing CI errors on re-runs\r\n* The Pwsh isn't reviewed at all by any tool\r\n* It is tedious to run the CI commands locally on Windows\r\n\r\nFix all issues by extracting them into a step-based Python script.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-10T12:09:43Z",
      "updated_at": "2026-02-13T14:52:44Z",
      "merged_at": "2026-02-13T14:32:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34548",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 471,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2659421742,
      "number": 32950,
      "title": "validation: remove BLOCK_FAILED_CHILD",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32173\r\n\r\neven though we have a distinction between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` in the codebase,\r\nwe don't use it for anything. Whenever we check for BlockStatus, we use `BLOCK_FAILED_MASK` which encompasses both of them.\r\n\r\nSince there is no functional difference between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` and it's added\r\ncode complexity to correctly categorise them (ex: https://github.com/bitcoin/bitcoin/pull/31405#discussion_r1914366243, https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-565506585), we could just remove it.\r\n\r\nLooking for conceptual feedback on whether it's better to improve handling of `BLOCK_FAILED_CHILD` in the codebase or remove `BLOCK_FAILED_CHILD`.\r\n\r\nOf less relevance, but it would also fix a `reconsiderblock` crash that could happen in the situation mentioned in https://github.com/bitcoin/bitcoin/issues/32173#issuecomment-2767030982\r\n\r\nSimilar attempt in the past in https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-568073859",
      "state": "open",
      "user": "stratospher",
      "created_at": "2025-07-11T15:04:52Z",
      "updated_at": "2026-02-13T14:28:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32950",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1096,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2486358825,
      "number": 32367,
      "title": "cmake: Check user-defined `APPEND_*FLAGS` variables early",
      "body": "For the purpose of checks performed by the build system, we strive to handle user-defined `APPEND_*FLAGS` in the same way as flags provided by other standard means. In particular, they are considered when the `try_compile()` command is used.\r\n\r\nHowever, these flags are not considered during `enable_language()` command invocation due to design limitations, which might cause issues, such as https://github.com/bitcoin/bitcoin/issues/32323.\r\n\r\nThis PR addresses the issue by introducing an additional compiler check that does consider the user-defined `APPEND_*FLAGS`.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32323:\r\n```\r\n$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init\"\r\n-- The CXX compiler identification is GNU 14.2.0\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Failed\r\nCMake Error at cmake/module/EnableLanguage.cmake:42 (message):\r\n  The CXX compiler is not able to compile a simple test program.\r\n\r\n  Check that the \"APPEND_*FLAGS\" variables are set correctly.\r\n\r\n\r\n\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:71 (bitcoincore_enable_language)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nhebasto@TS-P340:~/dev/bitcoin$ cmake -B build -DAPPEND_CXXFLAGS=\"-ftrivial-auto-var-init=zero\"\r\n-- Performing Test CXX_COMPILER_WORKS\r\n-- Performing Test CXX_COMPILER_WORKS - Success\r\n...\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-04-28T16:35:27Z",
      "updated_at": "2026-02-13T14:02:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32367",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1636,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3272293478,
      "number": 34559,
      "title": "ci: split vcpkg tools cache into restore/save",
      "body": "The vcpkg tools cache was using the combined actions/cache action, which by default saves on every run regardless of branch. Split it into the restore/save pattern used by the other caches, so that saves only happen on default branch pushes.\r\n\r\nThis will have little impact in bitcoin/bitcoin (which uses few branches), but on forks, if you don't update master branch frequently (which saves all caches), then all cache space will eventually be taken up by multiple vckpg tools caches, resulting in bad cache hit rates in all other jobs.",
      "state": "closed",
      "user": "willcl-ark",
      "created_at": "2026-02-11T15:49:52Z",
      "updated_at": "2026-02-13T13:44:34Z",
      "merged_at": "2026-02-13T11:34:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34559",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 583,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3076189471,
      "number": 34020,
      "title": "mining: add getTransactions(ByWitnessID) IPC methods",
      "body": "For Stratum v2 custom job declaration to be bandwidth efficient, the pool can request[^0] only the transactions that it doesn't know about.\r\n\r\nThe spec doesn't specify how this is achieved, but one method is to call the `getrawtransaction` RPC on each transaction id listed in [DeclareMiningJob](https://stratumprotocol.org/specification/06-Job-Declaration-Protocol?query=DeclareMiningJob#644-declareminingjob-client-server) (or a subset if the pool software maintains a cache). Using RPC is inefficient, made worse by the need to make multiple calls. It also doesn't support queuing by witness id (yet, see #34013).\r\n\r\nThis PR introduces two new IPC methods:\r\n\r\n- `getTransactions()`: takes a list of `Txid`'s\r\n- `getTransactionsByWitnessID()`: : takes a list of `Wtxid`'s\r\n\r\nBoth return a list of serialised transactions. An empty element is returned for transactions that were not found.\r\n\r\nThe `Txid` variant, just like its RPC counterpart, takes advantage of `-txindex` if enabled. The `Wtxid` variant can't do that unless we add a `-witnesstxindex`, but at least sv2 has no use for that.\r\n\r\nThe RPC additionally allows providing a `block_hash` hint. I haven't implemented that here because I don't have a need or it. It can always be added later.\r\n\r\nI thought about having a single (or overloaded) `getTransactions()` that works with both `Txid` and `Wtxid`, but I prefer that clients are intentional about which one they want.\r\n\r\nA unit and functional test cover the new functionality.\r\n\r\nSv2 probably only needs `getTransactionsByWitnessID()`, but it's easy enough to just add both.\r\n\r\nTODO:\r\n- [ ] figure out https://github.com/bitcoin-core/libmultiprocess/issues/235 (this PR is draft pending that, subtree linter failure is expected)\r\n\r\n[^0]: there's two reasons the pool requests these transactions: to approve the template and to broadcast the block if a solution is found (the miner will also broadcast via their template provider). See also https://github.com/stratum-mining/sv2-spec/issues/170",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-05T19:13:47Z",
      "updated_at": "2026-02-13T13:43:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34020",
      "labels": [
        "Mining",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2062,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3274425083,
      "number": 34568,
      "title": "mining: Break compatibility with existing IPC mining clients",
      "body": "This PR increments the field number of the `Init.makeMining` method and makes the old `makeMining` method return an error, so IPC mining clients not using the latest schema file will get an error and not be able to access the Mining interface.\r\n\r\nNormally, there shouldn't be a need to break compatibility this way, but the mining interface has evolved a lot since it was first introduced, with old clients using the original methods less stable and performant than newer clients. So now is a good time to introduce a cutoff, drop deprecated methods, and stop supporting old clients which can't function as well.\r\n\r\nBumping the field number is also an opportunity to make other improvements that would be awkward to implement compatibly:\r\n- Making Cap'n Proto default parameter and field values match default values of corresponding C++ methods and structs. \r\n- Adding missing Context parameters to Mining.createNewBlock and checkBlock methods so these methods will be executed on separate execution threads and not block the Cap'n Proto event loop thread.\r\n\r\nMore details about these changes are in the commit messages.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-02-12T04:10:23Z",
      "updated_at": "2026-02-13T13:30:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34568",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1181,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 877751403,
      "number": 24539,
      "title": "Add a \"tx output spender\" index",
      "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\nWe use a composite key with 2 parts (suggested by @romanz): hash(spent outpoint) and tx position, with an empty value. Average composite key size is 15 bytes.\r\n\r\nThe spending tx can optionally be returned by `gettxspendingprevout` (even it `-txindex is not set`).",
      "state": "open",
      "user": "sstone",
      "created_at": "2022-03-11T19:32:41Z",
      "updated_at": "2026-02-13T13:30:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24539",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 958,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2391882324,
      "number": 32061,
      "title": "Replace libevent with our own HTTP and socket-handling implementation",
      "body": "This is a major component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194), by replacing the HTTP server used for RPC and REST with one implemented entirely within the Bitcoin Core codebase. The new `HTTPServer` class runs its own I/O thread, handling socket connections with code based on #30988, but tailored specifically for HTTP.\r\n\r\nSome functional tests were added in #32408 to cover libevent behaviors that remain consistent with this branch. \r\n\r\nCommit strategy:\r\n- Implement a few helper functions for strings, timestamps, etc needed by HTTP protocol\r\n- Isolate the existing libevent-based HTTP server in a namespace `http_libevent`\r\n- Implement HTTP in a new namespace `http_bitcoin` (classes like `HTTPRequest`, `HTTPClient`, etc...)\r\n- Switch bitcoind from the libevent server to the new server\r\n- Clean up (delete `http_libevent`)\r\n\r\nI am currently seeing about a 10% speed up in the functional tests on my own arm/macos machine.\r\n\r\n## Integration testing:\r\n\r\nI am testing the new HTTP server by forking projects that integrate with bitcoin via HTTP and running their integration tests with bitcoind built from this branch (on Github actions). I will continue adding integrations over time, and re-running these CI tests as this branch gets rebased:\r\n\r\n- [NodeJS `rpc-bitcoin`](https://github.com/pinheadmz/rpc-bitcoin/pull/1)\r\n- [electrs](https://github.com/pinheadmz/electrs/pull/1)\r\n- [lnd](https://github.com/pinheadmz/lnd/pull/1)\r\n- [eclair](https://github.com/pinheadmz/eclair/pull/1)\r\n- [corepc](https://github.com/pinheadmz/corepc/pull/1)\r\n- [bitcoinjs-lib](https://github.com/pinheadmz/bitcoinjs-lib/pull/1)",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2025-03-13T19:32:14Z",
      "updated_at": "2026-02-13T13:02:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32061",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2691828975,
      "number": 33051,
      "title": "Don't fix Python patch version",
      "body": "`.python-version` always matches the minimum supported Python version.\r\nIt's main purpose is to catch accidental use of too modern syntax\r\nin scripts and functional tests.\r\n\r\nWe (currently) don't specify a minimum patch version, so it's not\r\nnecessary to do so here. The minor verion is enough.\r\n\r\nThis also avoids requiring users to keep a potentially unsafe old\r\npatch version installed.\r\n\r\nThe linter CI job used `python_build` (part of PyEnv) which requires specifying an exact Python version. The first commit changes it to use the higher level `pyenv install` which will pick the most recent patch version it knows about.\r\n\r\nThe original stated reason for using the lower level `python_build` https://github.com/bitcoin/bitcoin/pull/26716#issuecomment-1356314359 was that it allowed specifying `CC=clang` which needs fewer resources, but `pyenv install` can do that as well.  \r\n\r\nSee also https://github.com/bitcoin-core/HWI/pull/695",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-24T12:18:31Z",
      "updated_at": "2026-02-13T12:37:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33051",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 970,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2713577873,
      "number": 33117,
      "title": "Interfaces: Expose UTXO Snapshot Loading and Add Progress Notifications",
      "body": "# Add UTXO Snapshot Loading Interface and Progress Notifications\r\n\r\nThis PR implements a complete interface for loading UTXO snapshots through the GUI, including progress notifications to provide user feedback during the loading process.\r\n\r\n---\r\n\r\n## Changes\r\n\r\n### Commit 1: `interfaces: expose UTXO snapshot loading in node interface`\r\n\r\n- Added a new virtual method `loadSnapshot` to the node interface for loading UTXO snapshots.\r\n- Updated the implementation in `interfaces.cpp` to activate the snapshot using the provided file and metadata.\r\n- This change enhances the user's ability to load UTXO snapshots through the GUI.\r\n\r\n### Commit 2: `notifications: Implement snapshot load progress notifications`\r\n\r\n- Added a new signal `SnapshotLoadProgress` for snapshot load progress in the UI interface.\r\n- Updated the notifications interface to include a method for reporting snapshot loading progress.\r\n- Enhanced the `ChainstateManager` to report progress during snapshot loading.\r\n- Implemented the necessary handler in the kernel notifications to relay progress updates.\r\n- This change improves user feedback during the snapshot loading process.\r\n\r\n### Commit 3: `rpc: refactor loadtxoutset to use snapshot interface`\r\n\r\n- Updated the loadtxoutset RPC to call the new snapshot interface instead of directly working with chainstate internals.\r\n- Added getMetadata and getActivationResult methods to the snapshot interface to provide parity with the legacy RPC.\r\n- Improves modularity by consolidating snapshot handling through the interface layer.\r\n\r\n---\r\n\r\n## Technical Details\r\n\r\nThe implementation includes:\r\n\r\n- **UI Interface Enhancement**\r\n  Added `SnapshotLoadProgress` signal to `CClientUIInterface` with corresponding signal declaration and implementation.\r\n\r\n- **Node Interface**\r\n  Added `loadSnapshot` virtual method to the node interface with implementation in `interfaces.cpp`.\r\n\r\n- **Progress Notifications**\r\n  Implemented `snapshotLoadProgress` method in `KernelNotifications` class to relay progress updates to the UI.\r\n\r\n- **Base Interface**\r\n  Added `snapshotLoadProgress` virtual method to the kernel notifications interface.\r\n\r\n---\r\n\r\n## Benefits\r\n\r\n- **User Experience**\r\n  Provides real-time feedback during UTXO snapshot loading operations.\r\n\r\n- **GUI Integration**\r\n  Enables loading UTXO snapshots directly through the Bitcoin Core GUI.\r\n\r\n- **Progress Tracking**\r\n  Users can monitor the progress of snapshot loading operations.\r\n\r\n- **Consistent Interface**\r\n  Follows the existing pattern for progress notifications in the codebase.\r\n\r\n## Testing\r\n\r\n- **Daemon** build and launch `bitcoind` then with `bitcoin-cli` load a snapshot using:\r\n```bash\r\n./bitcoin-cli -rpcclienttimeout=0 -signet loadtxoutset /path/to/utxo-snapsshot.dat\r\n```\r\n- **QT Widgets**: build and run [this](https://github.com/bitcoin-core/gui/pull/870) draft PR in legacy gui repo \r\n- **QML** version: for a modern look build and run [this](https://github.com/bitcoin-core/gui-qml/pull/488) PR in the newly updated gui-qml repo \r\n",
      "state": "open",
      "user": "D33r-Gee",
      "created_at": "2025-08-01T15:31:46Z",
      "updated_at": "2026-02-13T12:23:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33117",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3107,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3276622702,
      "number": 34574,
      "title": "fix intermittent failure in interface_zmq.py",
      "body": "The `interface_zmq.py` test has been flaky due to a race condition - sometimes ZMQ messages aren't available immediately when we try to read them.\r\n\r\nThis adds a simple retry mechanism: if the message isn't ready, we'll retry up to 5 times with a 0.1s delay between attempts. Instead of crashing on `zmq.error.Again` exceptions, the test now handles them gracefully.\r\n\r\nFixes #34189\r\n",
      "state": "open",
      "user": "Hijanhv",
      "created_at": "2026-02-12T14:52:00Z",
      "updated_at": "2026-02-13T12:09:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34574",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 429,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3280570256,
      "number": 34581,
      "title": "test: Set assert_debug_log timeout to 0",
      "body": "The `assert_debug_log` helper is meant to be a context manager. However, it has a  default timeout of 2 seconds, and can act as a silent polling/wait/sync function. This is confusing and brittle, and leads to intermittent bugs such as https://github.com/bitcoin/bitcoin/pull/34571.\r\n\r\nFix all issues, by setting the default timeout to zero. Then adjust all call sites to either use this correctly like a context manager, or adjust them explicitly to specify a timeout, to document that this is a polling sync function.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-13T11:54:20Z",
      "updated_at": "2026-02-13T11:54:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34581",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 558,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3272817290,
      "number": 34562,
      "title": "ThreadPool follow-ups, proactive shutdown and HasReason dependency cleanup",
      "body": "A few follow-ups to #33689, includes:\r\n\r\n1) `ThreadPool` active-wait during shutdown:\r\nInstead of just waiting for workers to finish processing tasks, `Stop()` now helps them actively.\r\nThis speeds up the JSON-RPC and REST server shutdown, resulting in a faster node shutdown when many requests remain unhandled. This wasn't included in the original PR due to the behavior change this introduces.\r\n\r\n2) Decouple `HasReason` from the unit test framework machinery\r\nThis avoids providing the entire unit test framework dependency to low-level tests that only require access to the `HasReason` utility class. Examples are: `reverlock_tests.cpp`, `sync_tests.cpp`, `util_check_tests.cpp`, `util_string_tests.cpp`, `script_parse_tests.cpp` and `threadpool_tests.cpp`. These tests no longer gain access to unnecessary components like the chainstate, node context, caches, etc. It includes @l0rinc's `threadpool_tests.cpp` `HasReason` changes.\r\n\r\n3) Include response body in non-JSON HTTP error messages\r\nStraight from @pinheadmz [comment](https://github.com/bitcoin/bitcoin/pull/33689#discussion_r2783817192), it makes debugging CI issues easier.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-02-11T18:00:13Z",
      "updated_at": "2026-02-13T11:53:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34562",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1215,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3203071670,
      "number": 34389,
      "title": "net/log: standardize peer+addr log formatting via `LogPeer`",
      "body": "This is an alternative to #34293, but aims to address the remaining logging inconsistencies more broadly.\r\nIt extends the example fixed there to every instance, restores the original separator behavior, applies it consistently via a single helper, and adds tests for `logips` (covering both current and new behavior).\r\n\r\n### Problem\r\nAfter #28521 centralized peer address logging into `CNode::LogIP()`, the original comma separator before `peeraddr=` was lost, resulting in inconsistent formatting across net (and recent private broadcast) logs.\r\nSome lines also had double spaces, empty fields, or mismatched format specifiers.\r\n\r\n### Fix\r\nIntroduces `CNode::LogPeer(bool)` which always emits `peer=<id>` and, when `-logips=1`, appends `, peeraddr=<addr>`. This eliminates hand-rolled separators and makes peer identification predictable.\r\nMinor issues (double spaces, empty placeholders, format specifiers) are fixed along the way in separate commits.\r\n\r\n### Reproducer\r\nRun with `-debug=net -logips=1` and observe peer log lines now show `peer=<id>, peeraddr=<addr>` (comma-separated). The new assertion in `feature_logging.py` automates this check.\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-23T12:09:26Z",
      "updated_at": "2026-02-13T11:52:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34389",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1214,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3068399395,
      "number": 34001,
      "title": "test: fix test_limit_enforcement_package",
      "body": "The current test has a couple issues:\r\n\r\n1) the parent_tx_good is regenerating the exact same transaction that is already in the cluster, so it's resulting in no replacements on submission\r\n2) once fixed, the additional fee needs to be allocated to the parent transaction in the package, not the child. If the RBF fees are allocated to the child, this triggers the package RBF logic, which requires no in-mempool ancestors to be present.\r\n\r\nFix the bug and add a few assertions to protect against regressions.\r\n\r\n",
      "state": "open",
      "user": "instagibbs",
      "created_at": "2025-12-03T18:00:12Z",
      "updated_at": "2026-02-13T11:44:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34001",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 554,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1720888287,
      "number": 29418,
      "title": "rpc: provide per message stats for global traffic via new RPC 'getnetmsgstats'",
      "body": "Introduce a new RPC, `getnetmsgstats` to retrieve traffic bytes and count of messages possibly broken down by:\r\n* direction (sent or received)\r\n* network (ipv4, tor, etc)\r\n* connection type (outbound-full-relay, block-relay-only, etc)\r\n* message type (verack, ping, etc)\r\n\r\nImplements: https://github.com/bitcoin/bitcoin/issues/26337 Add per message stats to getnettotals rpc\r\n\r\n---\r\n\r\nExamples:\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"bytes\": 5392756,\r\n  \"count\": 32683\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"sendcmpct\": {\r\n    \"bytes\": 975,\r\n    \"count\": 31\r\n  },\r\n  \"sendaddrv2\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"headers\": {\r\n    \"bytes\": 1786,\r\n    \"count\": 28\r\n  },\r\n  \"feefilter\": {\r\n    \"bytes\": 816,\r\n    \"count\": 27\r\n  },\r\n  \"version\": {\r\n    \"bytes\": 4843,\r\n    \"count\": 37\r\n  },\r\n  \"ping\": {\r\n    \"bytes\": 1104,\r\n    \"count\": 36\r\n  },\r\n  \"getaddr\": {\r\n    \"bytes\": 384,\r\n    \"count\": 13\r\n  },\r\n  \"block\": {\r\n    \"bytes\": 5128467,\r\n    \"count\": 20365\r\n  },\r\n  \"getheaders\": {\r\n    \"bytes\": 29436,\r\n    \"count\": 28\r\n  },\r\n  \"pong\": {\r\n    \"bytes\": 1040,\r\n    \"count\": 34\r\n  },\r\n  \"getdata\": {\r\n    \"bytes\": 1218925,\r\n    \"count\": 20008\r\n  },\r\n  \"sendheaders\": {\r\n    \"bytes\": 447,\r\n    \"count\": 16\r\n  },\r\n  \"wtxidrelay\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"addrv2\": {\r\n    \"bytes\": 301161,\r\n    \"count\": 25\r\n  },\r\n  \"verack\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"i2p\": {\r\n    \"bytes\": 1311861,\r\n    \"count\": 8226\r\n  },\r\n  \"onion\": {\r\n    \"bytes\": 3932760,\r\n    \"count\": 24272\r\n  },\r\n  \"ipv6\": {\r\n    \"bytes\": 631265,\r\n    \"count\": 3362\r\n  },\r\n  \"ipv4\": {\r\n    \"bytes\": 1300106,\r\n    \"count\": 7773\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats</summary>\r\n\r\n```\r\n{\r\n  \"recv\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 309,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 408,\r\n          \"count\": 3\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 432950,\r\n          \"count\": 1794\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 68508,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 478479,\r\n          \"count\": 1896\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 195,\r\n          \"count\": 6\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 527,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 639,\r\n          \"count\": 5\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 1465688,\r\n          \"count\": 5957\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 120693,\r\n          \"count\": 9\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 412,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 138074,\r\n          \"count\": 583\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 93436,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 252,\r\n          \"count\": 2\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 313988,\r\n          \"count\": 1255\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 40,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"sent\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 66,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 105382,\r\n          \"count\": 1789\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 127,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 115932,\r\n          \"count\": 1884\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 162,\r\n          \"count\": 5\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 122,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 771,\r\n          \"count\": 6\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 221,\r\n          \"count\": 7\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 363478,\r\n          \"count\": 5932\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 231,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 88,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 35492,\r\n          \"count\": 584\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 254,\r\n          \"count\": 2\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 508,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 76531,\r\n          \"count\": 1231\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n---\r\n\r\nPrevious incarnations of this:\r\nhttps://github.com/bitcoin/bitcoin/pull/27534 rpc: add 'getnetmsgstats', new rpc to view network message statistics (Thank you, @satsie!)\r\nhttps://github.com/bitcoin/bitcoin/pull/28926 rpc: add 'getnetmsgstats' RPC (Thank you, @willcl-ark!)",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-02-11T09:32:51Z",
      "updated_at": "2026-02-13T11:43:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29418",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 13564,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2724706971,
      "number": 33145,
      "title": "CI: silent merge check",
      "body": "With the upcoming potential migration to cirrus runners (#32989) we need a way to periodically check for a silent merge conflict. Cirrus CI currently does this every week.\r\n\r\nThis is part of a proposal that will look for a label on a PR as a trigger to run the lint and get_previous_releases test. This label could be added manually or better, Drahtbot could periodically add (and remove) this label.\r\n\r\nAn example of this running on a test org: https://github.com/testing-cirrus-runners/bitcoin/actions/runs/16780213204/job/47516540034",
      "state": "open",
      "user": "m3dwards",
      "created_at": "2025-08-06T14:53:08Z",
      "updated_at": "2026-02-13T11:40:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33145",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 559,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3268261877,
      "number": 34550,
      "title": "guix: update time-machine to 46793f96cdfe55b695d996c0ba367e5fd37b81e4",
      "body": "Update the Guix time-machine to [46793f96cdfe55b695d996c0ba367e5fd37b81e4](https://codeberg.org/guix/guix/commit/46793f96cdfe55b695d996c0ba367e5fd37b81e4).\r\n\r\nPackage updates:\r\nbinutils 2.41 -> 2.44\r\ncmake-minimal 3.24.2 -> 3.31.10\r\ndiffutils 3.10 -> 3.12\r\nfile 5.45 -> 5.46\r\ngit-minimal 2.46.0 -> 2.52.0\r\n(base) glibc 2.39 -> 2.41\r\ngzip 1.13 -> 1.14\r\nlinux-headers 6.1.119 -> 6.1.161\r\nLLVM/Clang 19.1.4 -> 19.1.7\r\nmingw-w64 12.0.0 -> 13.0.0\r\nnsis 3.10 -> 3.11\r\npython-minimal 3.10 -> 3.11\r\n\r\nCMake 4.x becomes available.\r\nClang/LLVM 20 & 21 become available.\r\n\r\nSwitch to upstream `osslsigncode` (2.12, `python-lief` (0.17.3) and `python-oscrypto` (1.3.0) packages.\r\n\r\nCould be used for #32764.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-10T17:21:45Z",
      "updated_at": "2026-02-13T11:35:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34550",
      "labels": [
        "Build system",
        "DrahtBot Guix build requested"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 765,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2995568520,
      "number": 33841,
      "title": "cmake: Switch to `minisketch` upstream build system",
      "body": "This PR:\r\n1. Switches to `minisketch`'s own build system script.\r\n\r\n2. Does not change behaviour, except for printing \"minisketch configure summary\" in the build configuration output.\r\n\r\nFellow reviewers might also be interested in the discussion that took place in https://github.com/bitcoin/bitcoin/pull/32856.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-10T14:38:12Z",
      "updated_at": "2026-02-13T11:24:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33841",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 364,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3249198695,
      "number": 34511,
      "title": "test: fully reset the state of CConnman in tests",
      "body": "Member variables of `CConnman::m_private_broadcast` (introduced in\r\nhttps://github.com/bitcoin/bitcoin/pull/29415) could influence the tests\r\nwhich creates non-determinism if the same instance of `CConnman` is used\r\nfor repeated test iterations.\r\n\r\nSo, reset the state of `CConnman::m_private_broadcast` from\r\n`ConnmanTestMsg::Reset()`. Currently this affects the fuzz tests\r\n`process_message` and `process_messages`.\r\n\r\nReported in https://github.com/bitcoin/bitcoin/issues/34476#issuecomment-3849088794",
      "state": "closed",
      "user": "vasild",
      "created_at": "2026-02-05T08:52:48Z",
      "updated_at": "2026-02-13T11:17:34Z",
      "merged_at": "2026-02-13T11:17:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34511",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 553,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3266339115,
      "number": 34546,
      "title": "kernel: Avoid duplicating symbols in the kernel library",
      "body": "This is a revival of https://github.com/bitcoin/bitcoin/pull/31807\r\n\r\nIntroduces the [-Wunique-object-duplication](https://clang.llvm.org/docs/DiagnosticsReference.html#wunique-object-duplication) warning flag available in clang-21 for usage when building the kernel library. It warns of potential duplicate objects in shared libraries. REDUCE_EXPORTS needs to be ON to trigger it.\r\n\r\nThough we have a C API now that manages exporting symbols, I think it is prudent to also avoid any duplicate symbols on the internal c++ side in case we ever to decide to expose some of its headers. It also not clear that all linkers would handle these cases correctly even in the current internal usage.\r\n",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-02-10T09:35:22Z",
      "updated_at": "2026-02-13T11:11:21Z",
      "merged_at": "2026-02-13T11:11:21Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34546",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 747,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2756065507,
      "number": 33215,
      "title": "Fix compatibility with `-debuglogfile` command-line option",
      "body": "This PR avoids hardcoding the \"debug.log\" filename, ensuring compatibility with custom filenames provided via the `-debuglogfile` command-line option.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-08-19T10:59:57Z",
      "updated_at": "2026-02-13T11:07:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33215",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 209,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3138438378,
      "number": 34184,
      "title": "mining: add cooldown to createNewBlock() immediately after IBD",
      "body": "_Based on #34568, which contains a breaking interface change this PR needs._\r\n\r\nAs reported in #33994, connected mining clients will receive a flood of new templates if the node is still going through IBD or catching up on the last 24 hours. This PR fixes that using an _optional_ cooldown mechanism, only applied to `createNewBlock()`.\r\n\r\nFirst, cooldown waits for IBD. Then, as the tip keeps moving forward, it waits a few seconds to see if the tip updated. If so, it restarts the timer and waits again. The trade-offs for this mechanism are explained below.\r\n\r\nBecause this PR changes `createNewBlock()` from a method that returns quickly to one that can block for minutes, we rely on #34568 to fix a bug in our `.capnp` definition, adding the missing `context` to `createNewBlock` (and `checkBlock`).\r\n\r\nThe second commit then adds an `interrupt()` method so that clients can cleanly disconnect.\r\n\r\n---\r\n\r\n## Rationale\r\n\r\nThe cooldown argument is optional, and not used by internal non-IPC code, for two reasons:\r\n\r\n1. The mechanism wreaks havoc on the functional test suite, which would require very careful mock time handling to work around. But that's pointless, because only IPC clients need it.\r\n2. It needs to be optional for IPC clients too, because in some situations, like a signet with only one miner, waiting for IBD can mean being stuck forever.\r\n\r\nThe reason it's only applied to `createNewBlock()` is that this is the first method called by clients; `waitNext()` is a method on the interface returned by `createNewBlock()`, at which point the cooldown is done.\r\n\r\nAfter IBD, we wait N seconds if the header is N blocks ahead of the tip, with a minimum of 3 and a maximum of 20 seconds. The minimum waiting time is short enough that it shouldn't be annoying or confusing for someone manually starting up a client. While the maximum should be harmless if it happens spuriously (which it shouldn't).\r\n\r\nIf the minimum wait is too short, clients get a burst of templates, as observed in the original issue. We can't entirely rule this out without a lot of additional complexity (like scanning our own log file for heuristics). This PR should make it a lot less likely, and thanks to the IBD wait also limit it to one day worth of blocks (`-maxtipage`).\r\n\r\nSome test runs on an M4 MacBook Pro, where I had a node catch up on the last few days worth of blocks:\r\n\r\n<img width=\"872\" height=\"972\" alt=\"Scherm­afbeelding 2026-02-04 om 18 21 17\" src=\"https://github.com/user-attachments/assets/7902a0f2-0e0b-4604-9688-cec2da073261\" />\r\n\r\nAs the chart shows, sometimes it takes longer than 3 seconds. But it turns out that in all those cases there were quite a few headers ahead of the tip. It also demonstrates that it's important to first wait for IBD, because it's less likely a random tip update takes longer than 20 seconds.\r\n\r\n- modified sv2-apps: https://github.com/Sjors/sv2-apps/tree/2026/02/cooldown\r\n- test script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-run_mainnet_pool_loop-zsh\r\n- chart script: https://gist.github.com/Sjors/feb6122c97acc2b9e6d66b168614609c#file-tip_interval_charts-py",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-31T05:17:32Z",
      "updated_at": "2026-02-13T11:06:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34184",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3196,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2216802268,
      "number": 31424,
      "title": "build: enable libc++ hardening in debug builds",
      "body": "When compiling with libc++ in debug mode, then enable full libc++ hardening.\r\n\r\nInspired by https://github.com/bitcoin/bitcoin/issues/31272#issuecomment-2518700939\r\n\r\n---\r\n\r\nNote that `libstdc++`'s `_GLIBCXX_ASSERTIONS` (aka light debug mode) is [enabled by default](https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_macros.html) when compiling without optimizations), that is in our debug builds. But see https://github.com/bitcoin/bitcoin/pull/31424#issuecomment-2732100998.\r\n\r\n---\r\n\r\nFurther considerations:\r\n\r\n* Consider enabling `libstdc++`s `_GLIBCXX_ASSERTIONS` (aka light debug mode) also in non-debug builds. Should assess [performance impact](https://github.com/bitcoin/bitcoin/pull/31424#discussion_r1910658664).\r\n\r\n* Consider enabling `libc++`s `_LIBCPP_HARDENING_MODE=_LIBCPP_HARDENING_MODE_FAST` in non-debug builds. Should assess peformance impact as well.",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-12-05T06:18:23Z",
      "updated_at": "2026-02-13T11:02:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31424",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 922,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2578165434,
      "number": 32709,
      "title": "cmake: Fix `FindQt` module",
      "body": "This PR improves the `FindQt` module in two ways:\r\n\r\n1. Ensures that the `find_package(Qt .. MODULE REQUIRED COMPONENTS ...)` call treats any missing component as a fatal error. In the master branch, only a warning is currently issued.\r\n\r\n2. Cleans up the user-facing part of the CMake cache following the migration to Qt 6. An exception (`Qt6_DIR`) is documented.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-06-09T11:34:24Z",
      "updated_at": "2026-02-13T10:46:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32709",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 391,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3273018592,
      "number": 34564,
      "title": "COPYING: Correct start date for \"The Bitcoin Core developers\" copyright line",
      "body": "## Summary\n\nCorrects `2009` → `2014` for \"The Bitcoin Core developers\" in the COPYING file,\nreflecting when that project name came into use.\n\nCloses #34563\n\n## Change\n\n**Before:**\n```\nCopyright (c) 2009-2026 The Bitcoin Core developers\nCopyright (c) 2009-2026 Bitcoin Developers\n```\n\n**After:**\n```\nCopyright (c) 2014-2026 The Bitcoin Core developers\nCopyright (c) 2009-2026 Bitcoin Developers\n```\n\n## Rationale\n\nThe git history shows:\n- Satoshi replaced his own name with \"Bitcoin Developers\" in his final v0.3.19\n  release (Dec 2010, `fc73ad644f0b`)\n- The project was known as \"Bitcoin\" with \"Bitcoin Developers\" until the v0.9.0\n  rebrand to \"Bitcoin Core\" (March 2014; see #3203, #3408)\n- In 2015, `3b00e7c23164` replaced \"Bitcoin Developers\" with \"The Bitcoin Core\n  developers\" and backdated it to 2009\n- #11318 (gmaxwell, 2017) partially addressed this by restoring \"Bitcoin\n  Developers\" as a second line — sipa identified `3b00e7c` as having introduced\n  the naming error. However, the start date was not corrected\n\nThis is a single-number fix consistent with the project's preference for\naccurate copyright notices, as demonstrated by #11318. No change to the license\ntext itself.\n\nThis change reflects historical naming, not contributor scope — early\ncontributors' work is fully covered under \"Bitcoin Developers.\"",
      "state": "open",
      "user": "melvincarvalho",
      "created_at": "2026-02-11T18:49:38Z",
      "updated_at": "2026-02-13T10:11:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34564",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1402,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3173584131,
      "number": 34284,
      "title": "ipc, test: Add tests for unclean disconnect and thread busy behavior",
      "body": "Upcoming libmultiprocess changes are expected to alter this behavior (https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3749243782), making test coverage useful for documenting current behavior and validating the intended changes.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-01-14T13:46:24Z",
      "updated_at": "2026-02-13T10:05:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34284",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 310,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2956421896,
      "number": 33727,
      "title": "zmq: Log bind error at Error level, abort startup on init error",
      "body": "Fixes #33715",
      "state": "open",
      "user": "isrod",
      "created_at": "2025-10-28T18:59:03Z",
      "updated_at": "2026-02-13T10:01:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33727",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 76,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3265664984,
      "number": 34545,
      "title": "doc: Update Guix installation instructions for Debian/Ubuntu",
      "body": " The `guix` package was removed from Debian repositories due to security \r\n vulnerabilities (CVE-2025-46415, CVE-2025-46416) affecting guix-daemon. \r\n See https://lwn.net/Articles/1035491/\r\n     \r\n Ubuntu and Debian derivatives will likely follow.\r\n     \r\n Updates the Debian/Ubuntu section to warn users and redirect to alternative \r\n installation methods already documented in the file.\r\n\r\n\r\n Fixes #33982\r\n",
      "state": "open",
      "user": "ToRyVand",
      "created_at": "2026-02-10T06:05:27Z",
      "updated_at": "2026-02-13T09:58:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34545",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 470,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3193557787,
      "number": 34359,
      "title": "test: add test for rebroadcast of transaction received via p2p",
      "body": "The wallet doesn't only rebroadcast transactions it created, but also relevant transactions received via p2p. \r\nSince this is not self-evident, add test coverage for it.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-21T02:42:05Z",
      "updated_at": "2026-02-13T09:55:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34359",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 232,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2417478258,
      "number": 32138,
      "title": "wallet, rpc: remove settxfee and paytxfee",
      "body": "**Summary**\r\n\r\nThis PR removes the settxfee RPC and paytxfee setting (Bitcoin Core 31.0).\r\nThese two features were deprecated in https://github.com/bitcoin/bitcoin/pull/31278.",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-03-25T18:30:56Z",
      "updated_at": "2026-02-13T09:54:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32138",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2799580389,
      "number": 33306,
      "title": "index: Force database compaction in coinstatsindex",
      "body": "This PR forces full database compaction on coinstatsindex every 10,000 blocks. This does not seem to come with any considerable performance impact, though I did not test on many different systems.\r\n\r\nMotivation: Currently, coinstatsindex ends up using a lot of 55kb files if this is not the case. This is likely related to very fast writes occurring during sync but so far I could not pin down where exactly the difference in behavior is coming from. It seems to be a LevelDB internal thing though, since I can not make out any difference in configuration between coinstatsindex and the other indexes.\r\n\r\nThis was first reported here: https://github.com/bitcoin/bitcoin/pull/30469#issuecomment-3235597424",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-09-04T13:56:22Z",
      "updated_at": "2026-02-13T09:54:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33306",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 755,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2803909911,
      "number": 33324,
      "title": "blocks: add `-reobfuscate-blocks` argument to enable (de)obfuscating existing blocks",
      "body": "### Context\r\n\r\nRecent discussions highlighted that many nodes which synced before Bitcoin Core v28 have their block and undo files stored effectively in the clear (zero XOR key). This patch adds a simple, resumable maintenance tool to obfuscate previously raw block files, rotate an existing key to a fresh random one, or de-obfuscate (set key to zero) if consciously chosen, all without requiring resync. The operation can be cancelled and restarted safely.\r\n\r\n### Implementation\r\n\r\nThe new startup option `-reobfuscate-blocks[=VALUE]` accepts either 16 hex characters as an exact 8-byte XOR key (little-endian in-memory layout) or a boolean to generate a random 64-bit key. e.g. `-reobfuscate-blocks=0000000000000000` sets the key to zero, effectively removing obfuscation.\r\n\r\nIf we detect unobfuscated blocks at start time we suggest this new option in a warning.\r\n\r\nAt startup, we iterate over all undo and block files (grouping the block and undo files for more uniform iteration), read them with the old XOR key and write them back with the new key (`<name>.reobfuscated`). The implementation actually combines the two keys and reads directly into the new obfuscated version to only do a single iteration over the data. This works if the original blocks aren't obfuscated or if the new blocks aren't or if both are.\r\nAfter successful write, we immediately delete the old file. Once all files are staged, we rename them back and atomically swap `xor.dat.reobfuscated` → `xor.dat` and continue operation.\r\n\r\nWe log the old and new keys and print progress roughly per-percent as files complete (i.e. max 100 progress logs).\r\n\r\n### Constraints\r\n\r\n* Re-obfuscation resumes automatically (detected via `xor.dat.reobfuscated`) even without the flag. In worst-case a crash should only force us to redo previous work.\r\n* Single-threaded, processing one file at a time to keep code simple and avoid complexity of interleaving renames and key swaps across threads.\r\n* Fast in practice with sequential read/modify/write per blockfile - after recent obfuscation vectorization, this path is very quick.\r\n\r\n### Reproducer\r\n\r\n```bash\r\ncmake -B build -DBUILD_GUI=ON && cmake --build build -j$(nproc)\r\n# command line\r\n./build/bin/bitcoind -reobfuscate-blocks -stopatheight=1\r\n# same with GUI\r\n./build/bin/bitcoin-qt -reobfuscate-blocks -stopatheight=1\r\n```\r\n\r\n### Single-threaded Performance\r\n\r\n cpu                 | hdd/ssd | block count | size    | files  | time (min) | blocks/min \r\n---------------------|---------|-------------|---------|--------|------------|------------\r\n Apple M4 Max laptop | SSD     | ~909k       | ~707 GB | 9,982  | 8.4        | 146,613    \r\n Intel Core i9       | SSD     | ~909k       | ~725 GB | 10,238 | 23.1       | 39,351     \r\n Raspberry Pi 5      | SSD     | ~914k       | ~728 GB | 10,276 | 72.78      | 12,558     \r\n Intel Core i7       | HDD     | ~909k       | ~720 GB | 10,156 | 208.7      | 4,356      \r\n Raspberry Pi 4B     | HDD     | ~915k       | ~730 GB | 10,304 | 1467       | 624        \r\n\r\n----\r\n\r\nSimilar work:\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/32451\r\n* https://github.com/andrewtoth/blocks-xor\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-09-05T23:51:29Z",
      "updated_at": "2026-02-13T09:40:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33324",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3232,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3254836472,
      "number": 34525,
      "title": "Release: Prepare \"Open Transifex translations for v31.0\" step",
      "body": "This PR follows our [Release Process](https://github.com/bitcoin/bitcoin/blob/46e1288df2b4021969c50351e27175b4fad20f13/doc/release-process.md).\r\n\r\nIt is required to open Transifex translations for v31.0, as scheduled in https://github.com/bitcoin/bitcoin/issues/33607.\r\n\r\nFor reference, see the previous similar PR: https://github.com/bitcoin/bitcoin/pull/33152.\r\n\r\n**Note for reviewers:**\r\n\r\nTo reproduce the diff in the last commit, run:\r\n```\r\ncmake --preset dev-mode\r\ncmake --build build_dev_mode --target translate\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-02-06T13:50:56Z",
      "updated_at": "2026-02-13T09:35:07Z",
      "merged_at": "2026-02-07T13:08:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34525",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 585,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3272436536,
      "number": 34560,
      "title": "[28.x] Finalize 28.4rc1",
      "body": "Final changes for a `28.4rc1`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-02-11T16:24:09Z",
      "updated_at": "2026-02-13T08:52:30Z",
      "merged_at": "2026-02-13T08:52:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34560",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 54,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2929620815,
      "number": 33661,
      "title": "test: Add test on skip heights in CBlockIndex",
      "body": "The skip height values, used by `CBlockIndex::BuildSkip()` and `GetSkipHeight()` are not tested directly and not well documented. Indirect tests, through `GetAncestor()` exist in `skiplist_tests.cpp`. (This was noticed while reviewing #33515, recently merged.)\r\n\r\nThe motivation is to document the skip value computation through a test.\r\n\r\nThe first commit adds a test for the number of steps needed for an ancestor search, the number should be much lower than the linear distance.\r\n\r\nThe next commits add low-level tests to the `GetSkipHeight()` method. The previously internal method is exposed first.",
      "state": "open",
      "user": "optout21",
      "created_at": "2025-10-20T12:08:37Z",
      "updated_at": "2026-02-13T08:31:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33661",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 649,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2837615883,
      "number": 33421,
      "title": "node: add  `BlockTemplateCache`",
      "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify an optional template age limit in `MillisecondsDouble`:\r\n\r\n- If template age limit is `nullopt`, we create a new template and return it without adding it to the cache.\r\n- If a matching template (block template with identical block creation options) exists in the cache and hasn't exceeded the age limit, the cached version is returned.\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned. When evicting stale templates, we assume no duplicates exist since templates are evicted as soon as their age limit is reached or exceeded.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted after each insertion.\r\n\r\n\r\nCache lookup requires an exact match on ALL `BlockAssembler::Options` fields. While some fields (e.g., `test_block_validity`, `print_modified_fee`, `coinbase_output_script`) could be ignored for cache reuse, they mainly differ in tests and benchmarks. We keep the logic simple and accept cache misses in those cases.\r\n\r\n\r\nThe cache enforces at most one template per set of options. When searching for a match in `getCachedTemplate()`, if a template with matching options is found but has exceeded the age limit, it's immediately evicted before returning `nullptr`. This ensures no duplicate options exist in the cache. A `SanityCheck()` method verifies this invariant in tests by checking all cached entries for duplicates.\r\n\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\n`GetBlockTemplate()` uses double-checked locking: it first checks the cache with only `m_mutex` held, then if there's a miss, acquires both `cs_main` and `m_mutex` to create the template. Before creating, it checks again since another thread might have added a template while locks were released. \r\n\r\nThis PR removes an unused `node/context.h` import from miner to prevent a circular dependency when exposing the block template cache to the node context.",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-17T18:47:09Z",
      "updated_at": "2026-02-13T08:01:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33421",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2508,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2858375622,
      "number": 33477,
      "title": "Rollback for dumptxoutset without invalidating blocks",
      "body": "This is an alternative approach to implement `dumptxoutset` with rollback that was discussed a few times. It does not rely on `invalidateblock` and `reconsiderblock` and instead creates a temporary copy of the coins DB, modifies this copy by rolling back as many blocks as necessary and then creating the dump from this temp copy DB. See also https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1978480989, https://github.com/bitcoin/bitcoin/issues/32817#issuecomment-3012406102 and #29565 discussions.\r\n\r\nThe nice side-effects of this are that forks can not interfere with the rollback and network activity does not have to be suspended. But there are also some downsides when comparing to the current approach: this does require some additional disk space for the copied coins DB and performance is slower (master took 3m 17s vs 9m 16s in my last test with the code here, rolling back ~1500 blocks). However, there is also not much code being added here, network can stay active throughout and performance would stay constant with this approach while it would impact master if there were forks that needed to be invalidated as well (see #33444 for the alternative approach), so this could still be considered a good trade-off.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-09-24T21:15:11Z",
      "updated_at": "2026-02-13T07:39:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33477",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1289,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2876629729,
      "number": 33512,
      "title": "coins: use number of dirty cache entries in flush warnings/logs",
      "body": "Revival of https://github.com/bitcoin/bitcoin/pull/31703 with all outstanding review feedback addressed.\r\n\r\n<details>\r\n<summary>A few changes compared to the original</summary>\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/34207 resolved part of dirty counting in `SanityCheck`\r\n* `EmplaceCoinInternalDANGER` is also fuzz tested now\r\n* Warning and logging moved from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite`, ensuring `AssumeUTXO` snapshot writes also display progress warnings\r\n* Removed the redundant changed counter in `BatchWrite` since we now track `dirty_count` directly\r\n* All instances use `dirty_count` (not `num_dirty`) and parameter alignment is corrected\r\n\r\n</details>\r\n\r\n----\r\n\r\n> Since #28280 and #28233, the percentage of dirty entries in the cache when a flush happens may in practice be far from 100%. The log output, the decision to warn about a large flush (#31534), and the disk-full detection, however always use the entire size of the cache.\r\n>\r\n> Fix this by keeping track of the number of dirty entries in `CCoinsViewCache`, and using that number. We've dropped the usage of `DynamicMemoryUsage` as it's the wrong metric, even before the non-wiping flushes were introduced (if everything is dirty, memory usage is correlated with, but not the same as, the amount of disk space written or used). They could be improved by keeping track of proper write size estimates in a follow-up, but here we're just using a fixed 48 bytes per entry estimate.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-01T02:24:51Z",
      "updated_at": "2026-02-13T06:57:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33512",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 1539,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3273321979,
      "number": 34567,
      "title": "test: Add package RBF test with deduplicated parent",
      "body": "This PR adds a unit test scenario to `txpackage_tests.cpp` covering a specific edge case:\r\n\"Package RBF with a deduplicated parent\".\r\n\r\nThe test simulates a package {Parent, Child} where:\r\n1. The Parent transaction is already in the mempool (result: `MEMPOOL_ENTRY`).\r\n2. The Child transaction conflicts with another in-mempool transaction.\r\n3. The Child pays sufficient fees to effect RBF.\r\n\r\nThis ensures that the package validation logic correctly handles RBF calculations for the child even when the parent is deduplicated and not re-validated.",
      "state": "open",
      "user": "HassanFleyah",
      "created_at": "2026-02-11T20:02:48Z",
      "updated_at": "2026-02-13T06:00:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34567",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 600,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3088060609,
      "number": 34038,
      "title": "logging: replace -loglevel with -trace, various API improvements",
      "body": "Various API improvements:\r\n                                                                                                    \r\nFor users:      \r\n\r\n  - A new -trace option controls trace-level logging, using the same syntax as -debug. So `-debug=net` enables debug logs for net, `-trace=net` adds trace logs too. This replaces the `-loglevel` option, which had different syntax and had to be combined with `-debug` to take effect.\r\n - The logging RPC gains trace support: a new trace parameter enables trace-level logging per category, and the output now distinguishes excluded/debug/trace categories. (`-deprecatedrpc=logging` preserves the old format.)\r\n\r\nFor developers:\r\n\r\n  - `STDLOCK()` macro for `StdMutex`, enabling clang thread-safety analysis to catch annotation gaps.\r\n  - `util::log::NO_RATE_LIMIT` lets you write LogInfo(util::log::NO_RATE_LIMIT, \"...\") instead of using the internal `LogPrintLevel` function.\r\n  - Cleaner internals: `LogPrintLevel` moves to a `detail_` namespace, `GetLogCategory` moves into `Logger`, and more\r\n  files switch from `logging.h` to the lighter `util/log.h` (continuing the separation started in #34465).",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-10T05:56:20Z",
      "updated_at": "2026-02-13T05:30:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34038",
      "labels": [
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1215,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2925411752,
      "number": 33646,
      "title": "log: check fclose() results and report safely in logging.cpp",
      "body": "`fclose()` can report write errors (for example if the disk is full or the filesystem has a problem). Right now, some `fclose()` calls in `src/logging.cpp` ignore the return value. This means errors might go unnoticed and log lines could be lost without warning.\r\n\r\n## What this PR does:\r\n- Add a small helper that prints `fclose()` errors to `stderr` (with path and errno).\r\n- In shutdown: close `m_fileout` safely and report errors.\r\n- In reopen: open the new file, swap it in, close the old one, and report errors if closing fails.\r\n- In shrink/rotate: check all `fclose(file)` calls and report failures.\r\n\r\nNo other behavior changes. Normal logging, rotation, and console output remain unchanged.",
      "state": "open",
      "user": "cedwies",
      "created_at": "2025-10-17T19:06:08Z",
      "updated_at": "2026-02-13T05:24:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33646",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 761,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2934151848,
      "number": 33671,
      "title": "wallet: Add separate balance info for non-mempool wallet txs",
      "body": "Changes `getbalances` to report the sum of txos spent by transactions that aren't confirmed nor in the mempool (eg due to being part of too long a mempool chain, or spending non-standard outputs, or having a datacarrier output that exceeds `-datacarriersize`, etc). Those values are added to the trusted/untrusted_pending/immature/used fields as appropriate (where previously they were skipped), and subtracted from the new nonmempool field, so that the sum of all fields remains the same.\r\n\r\nFor example:\r\n\r\n```\r\n$ bitcoin-cli -regtest getbalances\r\n{\r\n  \"mine\": {\r\n    \"trusted\": 6049.99999220,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 3200.00000780,\r\n    \"nonmempool\": -100.00000000\r\n  },\r\n  \"lastprocessedblock\": {\r\n    \"hash\": \"3ab4582226d5e8ad76438db48d76e822c31bce2cdbc7ba82a5d974a277515d0d\",\r\n    \"height\": 221\r\n  }\r\n}\r\n```\r\n\r\nCloses #11887",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-10-21T16:59:13Z",
      "updated_at": "2026-02-13T04:42:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33671",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 922,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133212525,
      "number": 34165,
      "title": "coins: don't mutate main cache when connecting block",
      "body": "This is a slightly modified version of the first few commits of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nWhen accessing coins via the `CCoinsViewCache`, methods like `GetCoin` can call `FetchCoin` which actually mutate `cacheCoins` internally to cache entries when they are pulled from the backing db. This is generally a performance improvement for single threaded access patterns, but it precludes us from accessing entries in a `CCoinsViewCache` from multiple threads without a lock.\r\n\r\nAnother aspect is that when we use the resettable `CCoinsViewCache` view backed by the main cache for use in `ConnectBlock()`, we will insert entries into the main cache even if the block is determined to be invalid. This is not the biggest concern, since an invalid block requires proof-of-work. But, an attacker could craft multiple invalid blocks to fill the main cache. This would make us `Flush` the cache more often than necessary. Obviously this would be very expensive to do on mainnet.\r\n\r\nIntroduce `CoinsViewOverlay`, a `CCoinsViewCache` subclass that reads coins without mutating the underlying cache via `FetchCoin()`.\r\n\r\nAdd `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\r\n\r\nThis is the foundation for async input fetching, where worker threads must not mutate shared state.\r\n",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:32:34Z",
      "updated_at": "2026-02-13T04:12:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34165",
      "labels": [
        "UTXO Db and Indexes",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1737,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2971018954,
      "number": 33765,
      "title": "doc: update interface, --stdin flag, `signtx` (#31005)",
      "body": "Updates to documentation for External Signer.\r\n\r\n- Added mention that `signtransaction` command is no longer primary mechanism.\r\n- Document inter-process communication via `--stdin` flag followed with stdin-content.\r\n- Document `signtx` command followed by Base64-encoded PSBT.\r\n\r\nBest to squash commits when ready to merge.",
      "state": "open",
      "user": "cobratbq",
      "created_at": "2025-11-02T23:24:59Z",
      "updated_at": "2026-02-13T03:32:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33765",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 379,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2982459951,
      "number": 33796,
      "title": "kernel: Expose `CheckTransaction` consensus validation function",
      "body": "This PR exposes the consensus-level `CheckTransaction` function through the libbitcoinkernel C API and adds a corresponding C++ wrapper.\r\n\r\nCurrently, libkernel only provided script-level validation via `btck_script_pubkey_verify` and `ScriptPubkeyApi<>::Verify`. \r\n\r\nAFAIK there was no way to perform context-free consensus checks on a transaction’s structure (e.g., coinbase rules, money-range, duplicate inputs).\r\n\r\nThis change introduces a new API:\r\n\r\n```c\r\nint btck_check_transaction(const btck_Transaction* tx, btck_TxValidationState** out_state);\r\n```\r\n\r\nand a C++ convenience wrapper:\r\n\r\n```cpp\r\nstd::pair<bool, TxValidationState> btck::CheckTransaction(const Transaction& tx);\r\n```\r\n\r\nBoth follow the ownership and error-handling conventions established in `bitcoinkernel.h`.\r\n\r\nThe test suite is extended with cases covering:\r\n* coinbase scriptSig length bounds\r\n* empty vin / vout detection\r\n* negative or out-of-range output values\r\n* duplicate inputs\r\n* null prevouts in non-coinbase transactions\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-05T23:59:50Z",
      "updated_at": "2026-02-13T03:14:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33796",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1077,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1706640974,
      "number": 29365,
      "title": "Extend signetchallenge to set target block spacing",
      "body": "Inspired by https://github.com/bitcoin/bitcoin/pull/27446, this PR implements the proposal detailed in the comment https://github.com/bitcoin/bitcoin/pull/27446#issuecomment-1516600820.\r\n\r\n## Rationale\r\n\r\nIntroduce the ability to configure a custom target time between blocks in a custom Bitcoin signet network. This enhancement enables users to create a signet that is more conducive to testing. The change enhances the flexibility of signet, rendering it more versatile for various testing scenarios. For instance, I am currently working on setting up a signet with a 30-second block time. However, this caused numerous difficulty adjustments, resulting in an inconsistent network state. Regtest isn't a viable alternative for me in this context since we prefer defaults to utilize our custom signet when configured, without impeding local regtest development.\r\n\r\n## Implementation\r\n\r\nIf the challenge format is `OP_RETURN PUSHDATA<params> PUSHDATA<actual challenge>`, the actual challenge from the second data push is used as the signet challenge, and the parameters from the first push are used to configure the network. Otherwise the challenge is used as is.\r\n\r\nUnder the previous rules, such a signet challenge would always evaluate to `false`, suggesting that it is likely not in use by anyone. Updating bitcoind to a version that includes this change will not cause any disruptions — existing signet challenges will retain their original meaning without alteration.\r\n\r\nThe only parameter currently available is \"target_spacing\" (default 600 seconds). To set it, place `0x01<target_spacing as uint64_t, little endian>` in the params. Empty params are also valid. If other network parameters are added in the future, they should use `0x02<option 2 value>`, `0x03<option 3 value>`, etc., following the protobuf style.\r\n\r\nTwo public functions were added to `chainparams.h`:\r\n  - `ParseWrappedSignetChallenge`: Extracts signet params and signet challenge from a wrapped signet challenge.\r\n  - `ParseSignetParams`: Parses `<params>` bytes of the first data push.\r\n\r\nFunction `ReadSigNetArgs` calls `ParseWrappedSignetChallenge` and `ParseSignetParams` to implement the new meaning of signetchallenge.\r\n\r\nThe description of the flag `-signetchallenge` was updated to reflect the changes.\r\n\r\nA new unit tests file, `chainparams_tests.cpp`, was added, containing tests for `ParseWrappedSignetChallenge` and `ParseSignetParams`.\r\n\r\nThe test `signet_parse_tests` from the file `validation_tests.cpp` was modified to ensure proper understanding of the new logic.\r\n\r\nIn the functional test `feature_signet.py`, a test case was added with the value of `-signetchallenge` set to the wrapped challenge, setting spacing to 30 seconds and having the actual challenge `OP_TRUE`.\r\n\r\nThe Signet miner was updated, introducing a new option `--target-spacing` with a default of 600 seconds. It must be set to the value used by the network.\r\n\r\n## Example\r\n\r\nI tested this PR against [Mutinynet](https://blog.mutinywallet.com/mutinynet/), a signet running on a custom fork of Bitcoin Core, implementing 30s target spacing. I successfully synchronized the blockchain using the following config:\r\n\r\n```\r\nsignet=1\r\n[signet]\r\nsignetchallenge=6a4c09011e000000000000004c25512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\naddnode=45.79.52.207:38333\r\ndnsseed=0\r\n```\r\n\r\nThe content of this wrapped challenge:\r\n\r\n```\r\n6a OP_RETURN\r\n4c OP_PUSHDATA1\r\n09 (length of signet params = 9)\r\n011e00000000000000 (signet params: 0x01, pow_target_spacing=30)\r\n4c OP_PUSHDATA1\r\n25 (length of challenge = 37)\r\n512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\n(original Mutinynet challenge)\r\n```",
      "state": "open",
      "user": "starius",
      "created_at": "2024-02-01T16:36:21Z",
      "updated_at": "2026-02-13T02:39:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29365",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3758,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2997112498,
      "number": 33847,
      "title": "kernel: Improve logging API",
      "body": "Simplify kernel logging API and try to connect it to the rest of the kernel API by letting log options be set on `Logger` objects directly and `Logger` objects to be associated with `Context` objects directly. Also drop `logging_disable()` function and avoid having library accumulate log messages in a 1MB buffer by default.\r\n\r\nChanges are intended to make the API a little less surprising and more future proof. Rationale is described in some more detail the commit message.\r\n\r\nThis change is not backwards compatible but I'd expect it to port over pretty smoothly to the language bindings, and offer the same benefits for them as for C/C++ callers.\r\n\r\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-11-10T23:30:46Z",
      "updated_at": "2026-02-13T02:34:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33847",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 683,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2999254279,
      "number": 33854,
      "title": "fix assumevalid is ignored during reindex",
      "body": "During a reindex, the assumevalid setting may be ignored if the chainwork of the best header is below `minimumchainwork`. This happens when the previous IBD was stopped before connecting enough blocks to reach the required `minimumchainwork`. The assumevalid block will also be missing from the block index because the assumevalid block is set to match the `minimumchainwork`. See [Issue #31494](https://github.com/bitcoin/bitcoin/issues/31494).\r\n\r\nAs a result, `reindex` can take significantly longer to complete than necessary.\r\n\r\nThis PR addresses the issue by modifying reindex behaviour: if the chainwork of the `best_header` is below `minimumchainwork`, the node skips the `ActivateBestChain()` step and proceeds directly to synchronisation.\r\n\r\nThis PR takes a different approach from [PR #31615](https://github.com/bitcoin/bitcoin/pull/31615) to keep the validation path for `reindex` the same as the regular IBD validation path.\r\n\r\nDevelopers benchmarking IBD with `-reindex` may find this behaviour undesirable. In such cases, it’s recommended to use `-reindex-chainstate` instead or ensure that the available blocks have sufficient chainwork.\r\n\r\n`libbitcoinkernel` exposes the `ImportBlocks` function and expects `reindex` to connect blocks, so an attempt was made to preserve the existing behaviour for `libbitcoinkernel`.",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-11-11T14:21:14Z",
      "updated_at": "2026-02-13T02:20:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33854",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3243034362,
      "number": 34495,
      "title": "Replace boost signals with minimal compatible implementation",
      "body": "This drops our dependency on `boost::signals2`, leaving `boost::multi_index` as the only remaining boost dependency for bitcoind.\r\n\r\n`boost::signals2` is a complex beast, but we only use a small portion of it. Namely: it's a way for multiple subscribers to connect to the same event, and the ability to later disconnect individual subscribers from that event.\r\n\r\n`btcsignals` adheres to the subset of the `boost::signals2` API that we currently use, and thus is a drop-in replacement. Rather than implementing a complex `slot` tracking class that we never used anyway (and which was much more useful in the days before std::function existed), callbacks are simply wrapped directly in `std::function`s.\r\n\r\nThe new tests work with either `boost::signals2` or the new `btcsignals` implementation. Reviewers can verify\r\nfunctional equivalency by running the tests in the commit that introduces them against `boost::signals2`, then again with `btcsignals`.\r\n\r\nThe majority of the commits in this PR are preparation and cleanup. Once `boost::signals2` is no longer needed, it is removed from depends. Additionally, a few CMake targets no longer need boost includes as they were previously only required for signals.\r\n\r\nI think this is actually pretty straightforward to review. I kept things simple, including keeping types unmovable/uncopyable where possible rather than trying to define those semantics. In doing so, the new implementation has even fewer type requirements than boost, which I believe is due to a boost bug. I've opened a PR upstream for that to attempt to maintain parity between the implementations.\r\n\r\nSee individual commits for more details.\r\n\r\nCloses #26442.",
      "state": "open",
      "user": "theuni",
      "created_at": "2026-02-03T21:27:43Z",
      "updated_at": "2026-02-13T01:16:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34495",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1736,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3023781832,
      "number": 33908,
      "title": "kernel: add context‑free block validation API (`btck_check_block_context_free`) with POW/Merkle flags",
      "body": "This PR exposes Bitcoin Core’s context‑free block checks to library users via a new C API entry point, `btck_check_block_context_free`. \r\n\r\nCallers can validate a block’s structure (size/weight, coinbase rules, per‑tx context‑free checks) and optionally re‑run Proof‑of‑Work and Merkle‑root verification without touching chainstate, the block index, or the UTXO set. \r\n\r\nRationale\r\nClients embedding the kernel need a pure block sanity check without requiring node state or disk writes (candidate block validation, for example). This API offers that surface in a single call, with optional PoW/Merkle toggles to avoid redundant work when the header has already been validated or when Merkle verification is deferred.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-18T23:37:30Z",
      "updated_at": "2026-02-13T01:04:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33908",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3037988791,
      "number": 33929,
      "title": "test: Remove `system_tests/run_command` runtime dependencies",
      "body": "`system_tests` currently rely on `cat`, `echo`, `false` and `sh` being available in `PATH` at runtime.\r\n\r\nThis PR:\r\n1. Removes these dependencies.\r\n2. Reduces the number of platform-specific code paths.\r\n\r\nThe change is primarily motivated by my work on maintaining the [`bitcoin-core`](https://packages.guix.gnu.org/packages/bitcoin-core) package in Guix. It enables the removal of the existing `bash` and `coreutils` native inputs, which in turn makes it possible to drop the implicit dependency on `qtbase@5` (see https://codeberg.org/guix/guix/pulls/4386#issuecomment-8613333).\r\n\r\nBased on https://github.com/bitcoin/bitcoin/pull/34349.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-23T23:03:10Z",
      "updated_at": "2026-02-13T00:32:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33929",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 701,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3054407979,
      "number": 33966,
      "title": "refactor: disentangle miner startup defaults from runtime options",
      "body": "The interaction between node startup options like `-blockreservedweight` and runtime options, especially those passed via IPC, is confusing.\r\n\r\nThey're combined in `BlockAssembler::Options`, which this PR gets rid of in favour of two distinct structs:\r\n\r\n1. `BlockCreateOptions`: used by interface clients. As before, IPC clients have access to a safe / sane subset, whereas RPC and test code can use all fields.\r\n2. `MiningArgs`: these are set once during node startup\r\n\r\nBoth structs have a member for the maximum block height, which is not a problem since they're different structs. The one on `MiningArgs` (`block_max_weight`) matches `-maxblockheight` and is left alone. The one on `BlockCreateOptions` (`block_max_weight`) is an optional, it's set by `ApplyMiningDefaults` only if empty. \r\n\r\nThis all happens in the last commit and requires some preparation to keep things easy to review.\r\n\r\nWe get rid of `BlockAssembler::Options` but this is used in many tests. Since large churn is inevitable, we might as well switch all tests, bench and fuzzers over to the Mining interface. The first (non-base) commit does that, dramatically reducing direct use of `BlockAssembler`. Two exceptions are documented in the commit message. Because `test_block_validity` wasn't available via the interface and the block_assemble benchmark needs it, it's moved from `BlockAssembler::Options` to `BlockCreateOptions` (still not exposed via IPC).\r\n\r\nWe need access to mining related defaults and structs from both the miner and node initialization code. To avoid having to pull in all of `BlockAssembler` for the latter, the second commit introduces `node/mining.h` and moves constants and structs there from `src/node/types.h` (`BlockCreateOptions`, `BlockWaitOptions`, `BlockCheckOptions`) and `src/node/miner.h` (`DEFAULT_PRINT_MODIFIED_FEE`).\r\n\r\nI considered also moving `DEFAULT_BLOCK_MAX_WEIGHT`, `DEFAULT_BLOCK_RESERVED_WEIGHT`, `MINIMUM_BLOCK_RESERVED_WEIGHT` and `DEFAULT_BLOCK_MIN_TX_FEE` there from `policy.h`, since they are distinct from relay policy and not needed by the kernel. But this seems more appropriate for a follow-up and requires additional discussion.\r\n\r\nThe meat and potatoes of this PR is split between the three last commits for easier review:\r\n\r\n1. Adds `node/mining_args.{h,cpp}` and move the options checking out of `init.cpp`, without adding storage\r\n2. Add `block_max_weight` to `BlockCreateOptions` as explained above\r\n3. Introduce the `MiningArgs` struct, add it to the `NodeContext`, expand `mining_args.cpp` to store it, pass it to `BlockAssembler`, etc.\r\n\r\nI kept variable renaming and other formatting changes to a minimum to ease review with `--color-moved=dimmed-zebra`.\r\n\r\nThis PR builds on the bug fix in:\r\n- [ ] #33965\r\n\r\nOnce that is merged, this PR should not change behaviour.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T15:42:31Z",
      "updated_at": "2026-02-13T00:03:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33966",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2878,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3070554287,
      "number": 34004,
      "title": "Implementation of SwiftSync",
      "body": "Link to the original protocol writeup found [here](https://gist.github.com/RubenSomsen/a61a37d14182ccd78760e477c78133cd). See the [Delving Bitcoin post](https://delvingbitcoin.org/t/swiftsync-speeding-up-ibd-with-pre-generated-hints-poc/1562) for initial works and discussion.\r\n\r\n# Motivation\r\n\r\nWhile many coins are available in cache when spent, every cache miss requires a trip to the disk. Memory can be scarce for single board machines, so cache misses are expected to be far more frequent. A trip to disk is all-the-more severe on low end hardware, so any minimization of disk interactions can speed up initial block download for limited resource devices. One such example may be a block template provider serving a home miner.\r\n\r\n# Intuition\r\n\r\nThe vast majority of coins created are later spent. The cost of this observation is many coins will be written to disk, only to be removed later. The SwiftSync protocol alleviates the problem by recording what coins have been added and removed with a small, in-memory aggregate. This allows for the removal of intermediate coin states until SwiftSync has completed. The state of the aggregate is verified at a predetermined chain height, and IBD continues as usual thereafter.\r\n\r\nFor any chain height, we know `all outputs - all inputs = UTXO set`, which is equivalently `all outputs - UTXO set = all inputs`. The goal is to verify the set `all outputs - UTXO set` is equal to `all inputs`. Addition and subtraction modulo a field offers a way to do so. For any set, if we add all elements of the set and subtract them, regardless of ordering, we will arrive at zero. In the current implementation, the set elements being compared are hashed outpoints.\r\n\r\nThe SwiftSync protocol is comprised of two structures. First, the aggregate that will record the state of what outpoints have been added (created) or subtracted (spent). Next, notice that the UTXO set must be reported in order to verify `all outputs - UTXO set = all inputs`. SwiftSync introduces a hints file, which may be provided to the client at startup. This hints file is nothing more than a pointer to each unspent output by recording the block height and the indexes that will remain unspent. By using this file, a client may omit outpoints that will be in the UTXO set when updating the aggregate. Note this file is not trusted. If a malicious actor provides a faulty UTXO set, the set comparison above will fail, and the client may begin a reindex.\r\n# Implementation\r\n\r\n## Aggregate\r\n\r\nThe hash aggregate takes outpoints, hashes them with a salted hasher, and updates 4, 64-bit limbs with wrapping modulo arithmetic. The choice of 4, 64-bit limbs with no carries between limbs was made to: 1. minimize code complexity within the aggregate 2. conform to existing APIs, namely `uint256`. After adding and subtracting some arbitrary list of outpoints, we may poll if the sets were equivalent with `IsZero`.\r\n## Hintsfile\r\n\r\nThe hints file is a map of block height to the indexes of the outputs in that block that _will_ be in the UTXO set. To construct this file for a particular UTXO set state, each block must be read and queried to find the outputs in that block that remain unspent. Because this is a read-only operation, this may be done on parallel threads in the future. To allow for parallelization, the hints file contains a \"contents\" section, which denotes the height and corresponding file position to find the hints for that block.\r\n\r\nTo save space when representing the indexes that remain unspent in a block, an easy choice is to take the difference between the last coin that was unspent and the next one in the block. AFICT this is a version of run-length-encoding. These indexes are encoded using `compactSize` to further save space, the run-lengths should normally fit into at least 16 bits, often 8 bits.\r\n## Parameter Interaction\r\n\r\nA side effect of omitting intermediate UTXO states while performing IBD is the \"undo data\" cannot be derived. There are already configurations that do not have full undo data history, namely pruned nodes. To avoid additional complexity in this PR, this version of accelerated IBD is only made available to pruned nodes, as the undo data would have been removed regardless of the this setting.\r\n\r\nOther parameter interactions, not yet implemented:\r\n- `assumeutxo`: Startup should fail if both are configured. A hints file will have no effect, as the UTXO set is already present.\r\n- `assumevalid`: A natural choice is to only allow SwiftSync when using `assumevalid`, and to only allow a hints file that commits to the `assumevalid` block. Similar to `assumeutxo`, a hash of the hints file may be committed to in the binary, which would be resistant to griefing attacks.\r\n# Testing [Linux example]\r\n\r\nIn your `bitcoin` directory, download the hints from the test server:\r\n\r\n```bash\r\ncurl -o signet.hints https://utxohints.store/hints/signet\r\n```\r\n\r\nVerify the hash of the file:\r\n\r\n```bash\r\necho \"2b625392ecb2adba2b5f9d7b00c8f3a8adca0d3c  signet.hints\" | sha1sum --check -\r\n```\r\n\r\nBuild the branch:\r\n\r\n```bash\r\ncmake -B build && cmake --build build -j $(nproc)\r\n```\r\n\r\nRemove existing chain state:\r\n\r\n```bash\r\nrm -rf ~/.bitcoin/signet/\r\n```\r\n\r\nProvide the file at startup:\r\n\r\n```bash\r\n./build/bin/bitcoind --chain=signet --utxohints=./signet.hints --prune=550\r\n```\r\n\r\n# Open Questions\r\n\r\n- Given the outcome of SwiftSync is pass/fail, and there is no use of intermediate states, should blocks be persisted to disk at all during the protocol?\r\n- To what degree should a hints file be committed to in the binary. No commitment allows for a server to provide hints for an arbitrary height, providing a convenience for the client, but opens up the possibility of a grief attack. Of course the server risks losing reputation for serving faulty files.\r\n\r\n# Future Iteration\r\n\r\nThis is the first iteration of the SwiftSync proposal, however more optimizations may be made. Namely, because set elements may be added or subtracted from the aggregate in any order, blocks may be downloaded in parallel from multiple peers. If you are interested in benchmarking the performance of a fully-parallel version, see the [Rust implementation](https://github.com/2140-dev/swiftsync).\r\n",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2025-12-04T09:50:39Z",
      "updated_at": "2026-02-12T23:13:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34004",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 6261,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3087630130,
      "number": 34037,
      "title": "wallet, doc: clarify the coin selection filters that enforce cluster count",
      "body": "Followup to #33629.\r\n\r\nFix misleading docs and variable names. Namely, `getTransactionAncestry` returns the cluster count, not max descendant count of ancestor set (not worth reimplementing as it is merely a heuristic). No behavior changes - I don’t think much needs to be changed for the first release containing cluster mempool. \r\n\r\nCurrent `CoinEligibilityFilter`s enforce a maximum ancestor count (summed across all outputs, potentially overestimating) and max descendant count across ancestors of the output.\r\n\r\nSince #33629, these filters have started using cluster count instead of max desc count across ancestors. The change isn’t dangerous, as the cluster count bounds descendant count as well. Currently, the wallet is essentially enforcing a mixture of both limits - this is good while we are transitioning. Note that the cluster count enforced is 25, not 64, since it's grabbing the node's descendant count limit. While it is not an apples-to-apples comparison, a cluster count limit of 25 helps us avoid busting legacy descendant limits (which will be common on the network for a while).\r\n\r\nPotential things for the future, out of scope for this PR:\r\n- When we get rid of the ancestor/descendant config options, `getPackageLimits` can probably be replaced with hard-coded values.\r\n- Change the `OutputGroup`s to track the actual cluster count that results from spending these outputs and merging their clusters.\r\n- Loosen from 25 after that policy is no longer common.\r\n- Clean up `getPackageLimits`.",
      "state": "open",
      "user": "glozow",
      "created_at": "2025-12-10T01:28:11Z",
      "updated_at": "2026-02-12T22:13:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34037",
      "labels": [
        "Docs",
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1588,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2420947155,
      "number": 32150,
      "title": "coinselection: Optimize BnB exploration",
      "body": "This PR rewrites the implementation of the BnB coinselection algorithm\r\nto skip the duplicate evaluation of previously visited input selections.\r\n\r\nIn the original implementation of BnB, the state of the search is\r\nbacktracked by explicitly walking back to the omission branch and then\r\ntesting again. This retests an equivalent candidate set as before, e.g.,\r\nafter backtracking from {ABC}, it would evaluate {AB_}, before trying\r\n{AB_D}, but {AB_} is equivalent to {AB} which was tested before.\r\n\r\nCoinGrinder tracks the state of the search instead by remembering which\r\nUTXO was last added and explicitly shifting from that UTXO directly to\r\nthe next, so after {ABC}, it will immediately move on to {AB_D}. We\r\nreplicate this approach here.\r\n\r\nAs fewer nodes are visited, this approach will enumerate more possible\r\ncombinations than the original implementation given the same limit for \r\niterations.",
      "state": "open",
      "user": "murchandamus",
      "created_at": "2025-03-27T02:33:51Z",
      "updated_at": "2026-02-12T21:09:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32150",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 943,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3096669232,
      "number": 34059,
      "title": "refactor: Use NodeClock::time_point for m_addr_token_timestamp",
      "body": "It is a bit confusing to have some code use the deprecated `GetTime`, which returns a duration and not a time point, and other code to use `NodeClock` time points.\r\n\r\nFix one place `m_addr_token_timestamp` to use `NodeClock::time_point`.\r\n\r\nAlso:\r\n\r\n* Extract a `ProcessAddrs` helper, similar to the other `Process*()` helpers, to cut down the `ProcessMessage` with a massive scope.\r\n* Rename the confusing `current_a_time` to `now_seconds`. (The `a` in this context refers to the removed \"adjusted\" time, see commit fadd8b2676f6d68ec87189871461c9a6a6aa3cac, which removed adjusted time here)\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-12T14:15:29Z",
      "updated_at": "2026-02-12T21:05:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34059",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 657,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3102178109,
      "number": 34075,
      "title": "fees: Introduce Mempool Based Fee Estimation to reduce overestimation",
      "body": "This PR is another attempt to fix #27995 using a better approach.\r\n\r\nFor background and motivation, see #27995 and the discussion in the Delving Bitcoin post [Mempool Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\r\nThis PR is currently limited to using the mempool only to lower what is recommended by the Block Policy Estimator.\r\nAccurate and safe fee estimation using the mempool is challenging. There are open questions about how to prevent mempool games that are theoretically possible for miners [(a variant of the Finney attack)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6)\r\n\r\nThis is one of the reasons I opted to use the mempool only to lower the Block Policy Estimator, which itself is not gameable, and therefore this mechanism is not susceptible to this attack.\r\n\r\nThe underlying assumption here is that, with the current tools and work done to make RBF and CPFP feasible and guarantee (TRUC transaction relay, ephemeral anchors, cluster size 2 package rbf), it is safer to underestimate rather than overestimate.\r\nWe now assume it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that.\r\n\r\nAnother open question when using the mempool for fee estimation is how to account for incoming transaction inflow.\r\n[Bitcoin Augur](https://github.com/block/bitcoin-augur) does this by using past inflow plus a constant expected inflow to predict future inflow. I find this unconvincing for fee estimation and potentially prone to more overestimation, as past conditions are not always representative of the future. See my [review of the Augur fee rate estimator and open questions](https://github.com/block/bitcoin-augur/issues/3).\r\n\r\nThis PR uses a much simpler approach based on current user behavior, similar to the widely used method employed by mempool.space: looking at the top block of the mempool and selecting a percentile feerate depending on whether the user is economical or conservative.\r\n\r\nEmpirical data from both myself and Clara Shikhelman shows that the 75th percentile feerate for economical users and the 50th percentile feerate for conservative users provide positive confirmation guarantees, hence this is what is used in this PR.\r\n\r\nParallel research by René Pickhardt and his student suggests that using the [average fee per byte of the block template performs well](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12).\r\n\r\nAll of these are constants that can be adjusted, there is parallel work exploring these constants and running benchmarks across fee estimators to find a sweet spot.\r\n\r\nSee also work in LND, the [LND Budget Sweeper](https://delvingbitcoin.org/t/lnds-deadline-aware-budget-sweeper/1512), which applies this idea successfully. Their approach is to estimate fees initially with bitcoind, then increment gradually as the confirmation deadline approaches, using a fixed fee budget.\r\n\r\nHistorical data indicates that by doing only the approach in this PR, we are able to [reduce overestimation quite significantly (~29%)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8).\r\n\r\nThis is particularly useful in scenarios where the Block Policy Estimator recommends a high feerate while the mempool is empty.\r\n<img width=\"1800\" height=\"1090\" alt=\"56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" src=\"https://github.com/user-attachments/assets/c035c40c-8ece-42a7-b290-d29f1ac9bf4d\" />\r\n\r\nAs seen in the image above, there is only one remaining unfixed case: when there is a sudden inflow of transactions and the feerate rises, the Block Policy Estimator takes time to reflect this. In that case, users will continue to see a low feerate estimate until it slowly updates. From the historical data linked above, [this occurs about ~26% of the time](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8)).\r\n\r\nOverall, we observe a **73% success rate with 0% overestimation, and 26% underestimation** with this approach.\r\n\r\nThis PR also includes refactors that enable this work. Rather than splitting the PR and implementing changes incrementally, I opted for an end-to-end implementation:\r\n\r\n### 1. Refactors\r\n\r\n* Separation of feerate format from the fee estimate mode enumerator (separation of concerns, as they are semantically distinct)\r\n* Move logging after fee estimation estimateSmartFee from the wallet to the Block Policy Estimator internal method (also separation of concerns and avoiding leaking fee estimator internals). This change also comes with updating `createTransactionInternal` to log only the fee and its source (fee estimator, fallback fee, etc.), which is more appropriate.\r\n* Separate the fee estimate mode enum from the fee source enumerator (separation of concerns, as they are semantically distinct). This introduces a minor breaking change: the wallet RPCs now return fee *source* instead of fee *reason*, which is more accurate. Let me know if we prefer to keep the field name unchanged while returning the fee source.\r\n* Move the `StringForReason` enum from `common` to the Block Policy Estimator (also separation of concerns)\r\n* Various test file updates and renames for improved accuracy\r\n* Update Block Policy Estimator unit tests to be independent of the mempool and the validation interface\r\n\r\n### 2. Introduce Mempool-Based Fee Estimator and Fee Estimator Manager\r\n\r\n* Introduce a new abstract fee estimator base class that all fee estimators must implement\r\n\r\n* Introduce `FeeRateEstimateResult` as the response type, containing metadata and avoiding the use of out-parameters. This is easily extensible and makes future changes less invasive, as method signatures do not need to change.\r\n\r\n* Add `FeeEstimatorType` enum to identify different fee estimators\r\n\r\n* Make `CBlockPolicyEstimator` derive from the new fee estimator base class\r\n\r\n* Add `FeeRateEstimatorManager`, responsible for managing all fee estimators\r\n\r\n* Update the node context to store a `unique_ptr` to `FeeRateEstimatorManager` instead of `CBlockPolicyEstimator`\r\n\r\n* Update `CBlockPolicyEstimator` to no longer subscribe directly to the validation interface; instead, `FeeRateEstimatorManager` subscribes and forwards relevant notifications\r\n\r\n* Add a percentile calculation function that takes the chunk feerates of a block template and returns feerate percentiles; this can also be reused by the `getblockstats` RPC\r\n\r\n* Add a mempool fee estimator that generates a block template when called, calculates a percentile feerate, and returns the 75th percentile for economical mode or the 50th percentile for conservative mode\r\n\r\n* Add caching to the mempool estimator so that new estimates are generated only every 7 seconds, assuming enough [transactions have propagated](https://bitcoin.stackexchange.com/questions/125776/how-long-does-it-take-for-a-transaction-to-propagate-through-the-network/125777#125777) to make a meaningful difference.\r\n  This heuristic will likely be replaced by requesting block templates via the general-purpose block template cache proposed here: [https://github.com/bitcoin/bitcoin/issues/33389](https://github.com/bitcoin/bitcoin/issues/33389)\r\n\r\n* Update `MempoolTransactionRemovedForBlock` to return the actual block transactions as well\r\n\r\n* Track the weight of block transactions and evicted transactions after each block connection\r\n  This data is tracked for the last 6 mined blocks. A mempool feerate estimate is returned only when the average ratio of mempool transaction weight evicted due to `BLOCK` reasons to block transaction weight is greater than 75%. This heuristic provides rough confidence that the node’s mempool matches that of the majority of the hashrate. The 75% threshold is arbitrary and can be adjusted.\r\n\r\nThere is a caveat when transactions in the local mempool are consistently not mined by the network, as described in #27995 (e.g., due to filtering).\r\nAccounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself (see #33510). Handling this again within fee estimation would be redundant.\r\n\r\n* Persist statistics for the 6 most recent blocks to disk during periodic flushes and shutdown, so this data is available after restarts\r\n* Expose this data to users when running `estimatesmartfee` with verbosity > 2\r\n\r\n<details>\r\n<summary>see example output</summary>\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n```\r\n\r\n```\r\n{\r\n  \"feerate\": 0.00002133,\r\n  \"errors\": [],\r\n  \"blocks\": 2,\r\n  \"mempool_health_statistics\": [\r\n    {\r\n      \"block_height\": 927953,\r\n      \"block_weight\": 3991729,\r\n      \"mempool_txs_weight\": 3942409,\r\n      \"ratio\": 0.987644451815241\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-12-15T11:53:35Z",
      "updated_at": "2026-02-12T20:57:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34075",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 8927,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3277360664,
      "number": 34576,
      "title": "threadpool: add SubmitMany",
      "body": "The current `ThreadPool::Submit` is not very efficient when we have a use case where we need to submit multiple tasks immediately. The `Submit` method must take the lock for each task, and notifies only a single worker thread. This will cause lock contention with the awakened worker thread trying to take the lock and the caller trying to submit the next task.\r\n\r\nIntroduce `SubmitMany`, which takes the lock once and submits a vector of tasks, then notifies all worker threads after the lock is released.\r\n\r\nThis is needed for #31132 to be able to use `ThreadPool`.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-02-12T17:39:40Z",
      "updated_at": "2026-02-12T20:17:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34576",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 594,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3120160595,
      "number": 34132,
      "title": "coins: drop error catcher, centralize fatal read handling",
      "body": "### Problem\r\nThe current coins database read-error handling adds unnecessary complexity to the critical path:\r\n* `CCoinsViewErrorCatcher` sits between the cache and database views, wrapping every read operation\r\n* `ExecuteBackedWrapper` adds another function call layer with lambda captures on each database read\r\n* Uses `std::vector<std::function<void()>>` for callbacks when there's only ever one callback registered\r\n* The error callback is set after database initialization rather than during construction (requiring a `cs_main` lock)\r\n\r\nThis adds unnecessary stack depth and bookkeeping overhead on every coins database read operation (`GetCoin`). Also note that `CCoinsViewDB::HaveCoin` isn't even on the hot path as far as I can tell.\r\n\r\n### Context\r\nThis is part of ongoing coins caching cleanup efforts, see https://github.com/bitcoin/bitcoin/issues/34280.\r\n\r\n### Fix\r\n**Behavior change:** Treat deserialization failures in `CDBWrapper::Read()` as fatal instead of catching and returning `false`. This makes corruption visible and avoids ambiguous missing-vs-unreadable handling at call sites: on decode failure, `CDBWrapper` logs the error, executes a provided callback, and then calls `std::abort()`.\r\n\r\nWith read-failure handling centralized in `CDBWrapper`, collapse the `CCoinsViewErrorCatcher` layer entirely by removing `ExecuteBackedWrapper` and `CCoinsViewErrorCatcher` which also enables making coins view lookups `noexcept`.\r\n\r\nA new test verifies the node aborts with a clear error message on a few database corruption paths.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T22:56:45Z",
      "updated_at": "2026-02-12T19:56:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34132",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1604,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3132300728,
      "number": 34158,
      "title": "torcontrol: Remove libevent usage",
      "body": "This is part of the effort to remove the libevent dependency from our code base: https://github.com/bitcoin/bitcoin/issues/31194\r\n\r\nThe current approach tries to reuse existing code and follows roughly similar design decisions. It replaces the libevent-based async I/O with blocking I/O utilizing the existing `Sock` and `CThreadInterrupt`. The controller runs in a dedicated thread.\r\n\r\nThere are some optional code modernizations thrown in made along the way (namings, constexpr etc.). These are not strictly necessary but make the end result with the new code more consistent.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-27T14:20:31Z",
      "updated_at": "2026-02-12T19:26:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34158",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 612,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3264847922,
      "number": 34544,
      "title": "wallet: Disallow wallet names that are paths including `..` and `.` elements",
      "body": "Wallet names including `..` and `.` are unintuitive and can lead to various issues, see #34497\r\n\r\nThis disallows creating or loading wallets that have any path elements that are `..` or `.`, including any present in an absolute path. This does not disallow relative paths altogether but rather limits them to only being subdirectories of the wallets directory.",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-09T23:28:03Z",
      "updated_at": "2026-02-12T18:36:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34544",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 437,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3142897675,
      "number": 34193,
      "title": "wallet: make migration more robust against failures",
      "body": "This is just me finding a few more edge cases after #34156 and #34176\r\n\r\nThe goal of the PR is to handle failures in a controlled way. Just so the process can automatically restore the original wallet without requiring user manual intervention.\r\n\r\nThe covered cases are:\r\n\r\n1. During `DoMigration()`: There are methods that can throw exceptions and abruptly abort the process. \r\nInstead of crashing (GUI) or returning a generic exception, we now will catch and return the error gracefully. This lets the process restore the original wallet automatically.\r\n\r\n2. Trying to migrate a wallet in a read-only directory throws a filesystem exception and skips cleanup.\r\n Now the process will fail gracefully with a clear error msg, and automatically restore the original wallet.\r\n\r\n3. Any failure during `MigrateToSQLite` requires user manual intervention. \r\nNow the original wallet db will remain untouched, and only be updated once the sqlite db creation fully succeeds.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-01-02T20:59:40Z",
      "updated_at": "2026-02-12T18:06:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34193",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1017,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149207404,
      "number": 34208,
      "title": "bench: add fluent API for untimed `setup` steps in nanobench",
      "body": "### Context\r\nAs described in https://github.com/martinus/nanobench/issues/130, we have a few benchmarks where we have to reset the state between runs, otherwise the repetitions will do something else than the first iteration.\r\n\r\n### Upstream\r\nI have opened a PR to `nanobench` to introduce an untimed setup phase, see: https://github.com/martinus/nanobench/pull/136\r\nUnfortunately the author has health issues and couldn't contribute to it in the past 2 years.\r\n\r\n### Tests\r\n\r\nTests were only added upstream, would be a bit awkward to wire in `nanobench.h` outside the benchmarking setup:\r\nhttps://github.com/martinus/nanobench/pull/136/changes/58350cfe5912d7e0533ccfcd759eea5d62eb55bb#diff-88160f647ce57661afe7d755fa70a5fa342a2b79d72d3511596878e69ed5cdc3\r\n\r\n### Fix\r\nI have moved the changes here as well and applied it to a few simple benchmarks as demonstration.\r\nWe can revert ones that are controversial and add other ones in follow-ups, this PR is mostly meant to add the `setup` feature.\r\n\r\n### Benchmarks\r\nMost benchmarks show a modest \"speedup\", others a \"slowdown\" - but it's only the effect of the setup that's not measured anymore - and a `run` phase which does the same operation in each epoch iteration (wallet benchmark changes were reverted since for simplicity):\r\n<img width=\"1496\" height=\"882\" alt=\"image\" src=\"https://github.com/user-attachments/assets/34c14565-f3df-41e5-9a86-95b2ca21703a\" />\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:45:35Z",
      "updated_at": "2026-02-12T17:47:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34208",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163535277,
      "number": 34254,
      "title": "validation: Prevent duplicate logging and looping in invalid block handling",
      "body": "`InvalidChainFound()` is called from 3 spots:\r\n1. from `InvalidBlockFound()`\r\n2. from `ActivateBestChain()`, with the highest connectable block of the chain\r\nas an arg (after having called `InvalidBlockFound()` already for the block that failed in `ConnectTip()`)\r\n3. from `InvalidateBlock()` (rpc-only)\r\n\r\nMost of the logic in `InvalidChainFound()` is not required for 2) and 3):\r\nIn `ActivateBestChain()`, the previous call to `InvalidChainFound()` before via `InvalidBlockFound` did the flag updates, best header calculation and logging, so only `m_best_invalid` could need additional updating.\r\nIn `InvalidateBlock()` (which doesn't call `InvalidBlockFound()`), we do most of the accounting manually.\r\n\r\nTherefore move of all logic but the `m_best_invalid` update into `InvalidBlockFound()`, avoiding duplicate logging and unnecessary work (the loops over the block index in `SetBlockFailureFlags()` and `RecalculateBestHeader()`\r\nwere done twice before).\r\n\r\nThe second commit renames `InvalidChainFound` to `UpdateBestInvalid` to adjust to its remaining role.\r\n\r\nThis addresses past discussions about repeated work in `InvalidateBlock()` (https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2135717500) and `ActivateBestChain()` (https://github.com/bitcoin/bitcoin/pull/31533#discussion_r2607189790)",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-11T16:59:21Z",
      "updated_at": "2026-02-12T16:44:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34254",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2940741002,
      "number": 33689,
      "title": "http: replace WorkQueue and single threads handling for ThreadPool",
      "body": "This has been a recent discovery; the general thread pool class created for #26966, cleanly \r\nintegrates into the HTTP server. It simplifies init, shutdown and requests execution logic.\r\nReplacing code that was never unit tested for code that is properly unit and fuzz tested.\r\nAlthough our functional test framework extensively uses this RPC interface (that’s how\r\nwe’ve been ensuring its correct behavior so far - which is not the best).\r\n\r\nThis clearly separates the responsibilities:\r\nThe HTTP server now focuses solely on receiving and dispatching requests, while ThreadPool handles\r\nconcurrency, queuing, and execution.\r\n\r\nThis will also allows us to experiment with further performance improvements at the task queuing and\r\nexecution level, such as a lock-free structure or task prioritization or any other implementation detail\r\nlike coroutines in the future, without having to deal with HTTP code that lives on a different layer.\r\n\r\nNote:\r\nThe rationale behind introducing the ThreadPool first is to be able to easily cherry-pick it across different\r\nworking paths. Some of the ones that are benefited from it are #26966 for the parallelization of the indexes\r\ninitial sync, #31132 for the parallelization of the inputs fetching procedure, #32061 for the libevent replacement,\r\nthe kernel API #30595 (https://github.com/bitcoin/bitcoin/pull/30595#discussion_r2413702370) to avoid blocking validation among others use cases not publicly available.\r\n\r\nNote 2:\r\nI could have created a wrapper around the existing code and replaced the `WorkQueue` in a subsequent\r\ncommit, but it didn’t seem worth the extra commits and review effort. The `ThreadPool` implements\r\nessentially the same functionality in a more modern and cleaner way.",
      "state": "closed",
      "user": "furszy",
      "created_at": "2025-10-23T14:36:44Z",
      "updated_at": "2026-02-12T16:15:44Z",
      "merged_at": "2026-02-11T17:04:50Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33689",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3169361001,
      "number": 34271,
      "title": "net_processing: make m_tx_for_private_broadcast optional",
      "body": "Make `PeerManagerImpl::m_tx_for_private_broadcast` optional because it is needed for in private broadcast mode (`-privatebroadcast=1`).\r\n\r\nA followup to #29415, requested in:\r\nhttps://github.com/bitcoin/bitcoin/pull/29415#discussion_r2620864832\r\nhttps://github.com/bitcoin/bitcoin/pull/29415/files#r2620864832",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-01-13T11:32:27Z",
      "updated_at": "2026-02-12T16:04:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34271",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 366,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2748998057,
      "number": 33199,
      "title": "fees: enable `CBlockPolicyEstimator` return sub 1 sat/vb fee rate estimates",
      "body": "This is a simple PR that updates the block policy estimator’s `MIN_BUCKET_FEERATE` constant to be 100, which is identical to the policy `DEFAULT_MIN_RELAY_TX_FEE`. \r\n\r\nThis change enables the block policy fee rate estimator to return sub-1 sat/vB fee rate estimates.\r\n\r\nThe change is correct because the estimator creates buckets of fee rates from\r\n`MIN_BUCKET_FEERATE`,\r\n`MIN_BUCKET_FEERATE` + `FEE_SPACING`,\r\n`MIN_BUCKET_FEERATE` + `2 * FEE_SPACING`,\r\n… up to `MAX_BUCKET_FEERATE`.\r\n\r\nThis means it will record sub-1 sat/vB fee rates in the buckets and may return them as a fee rate estimate when that bucket is the lowest one with sufficient transactions for a given target.\r\n\r\n---\r\n\r\nWhile touching this part of the fee estimator code, this PR got rid of the dummy value persisted in the file",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-08-15T15:15:26Z",
      "updated_at": "2026-02-12T16:01:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33199",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 872,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2237045890,
      "number": 31507,
      "title": "build: Use clang-cl to build on Windows natively",
      "body": "Building on Windows using Clang instead of the MS compiler may be beneficial, considering the issues with the latter, as outlined in https://github.com/bitcoin/bitcoin/issues/31456:\r\n\r\n>    * non-optimized codegen: [build: remove need to test for endianness #29852 (comment)](https://github.com/bitcoin/bitcoin/pull/29852#issuecomment-2049803970)\r\n> \r\n>    * compile failure: [MSVC 17.12.0 internal compiler error  #31303](https://github.com/bitcoin/bitcoin/issues/31303)\r\n> \r\n>    * legal, but brittle stdlib: [util: Drop boost posix_time in ParseISO8601DateTime #31391 (comment)](https://github.com/bitcoin/bitcoin/pull/31391#issuecomment-2510762011)\r\n> \r\n>    * unspecified issue: [refactor: Check translatable format strings at compile-time #31061 (comment)](https://github.com/bitcoin/bitcoin/pull/31061#issuecomment-2531244463)\r\n\r\nAdditionally, MSVC does not [support](https://learn.microsoft.com/en-us/cpp/assembler/inline/inline-assembler) inline assembly on the ARM and x64 processors.\r\n\r\nSo this PR:\r\n1. Closes https://github.com/bitcoin/bitcoin/issues/31456 (and addresses https://github.com/bitcoin/bitcoin/issues/14118).\r\n2. Could be an alternative to https://github.com/bitcoin/bitcoin/pull/24773.\r\n\r\n---\r\n\r\nAdditionally, clang-cl:\r\n1. Produces binaries with [better](https://github.com/bitcoin-core/secp256k1/pull/1681) performance. For example:\r\n\r\n| MSVC, block/s | clang-cl, block/s | benchmark |\r\n|--------------:|------------------:|:----------|\r\n|          7.40 |             11.52 | `ConnectBlockAllEcdsa`\r\n|          7.32 |             11.81 | `ConnectBlockAllSchnorr`\r\n|          7.38 |             11.45 | `ConnectBlockMixedEcdsaSchnorr`\r\n|         91.86 |            143.12 | `DeserializeAndCheckBlockTest`\r\n|        121.46 |            189.04 | `DeserializeBlockTest`\r\n\r\n2. Builds faster on the CI:\r\n    - [MSVC](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575846787) - 20m 35s\r\n    - [clang-cl](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575849680) - 12m 43s\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-12-16T10:58:38Z",
      "updated_at": "2026-02-12T15:35:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31507",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2081,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3272437576,
      "number": 34561,
      "title": "wallet: rpc: manpage: fix example missing `fee_rate` argument",
      "body": "The function signature for the `send` RPC is:\r\n```\r\nsend [{\"address\":amount,...},{\"data\":\"hex\"},...] ( conf_target \"estimate_mode\" fee_rate options version )\r\n```\r\n\r\nThe last example in the manpage is missing the `fee_rate` arg, but is trying to specify the `options` arg, by index. The parser confuses the intended `options` arg as the missing `fee_rate` arg.\r\n\r\nSee:\r\n```\r\n$ bitcoin-cli -rpcuser=doggman -rpcpassword=donkey -rpcport=18554 -regtest send '{\"bcrt1qusm48zmlzwr32csxdw4ar7atw260h22c9ten9l\": 0.1}' 1 economical '{\"add_to_wallet\": false, \"inputs\": [{\"txid\":\"0b7e1a471dc948b7a6187936b16e6d7d9833629b2f9dd8a392eb89928f63aaad\", \"vout\":0}]}'\r\nerror code: -8\r\nerror message:\r\nCannot specify both conf_target and fee_rate. Please provide either a confirmation target in blocks for automatic fee estimation, or an explicit fee rate.\r\n```\r\nvs\r\n```\r\n$ bitcoin-cli -rpcuser=doggman -rpcpassword=donkey -rpcport=18554 -regtest send '{\"bcrt1qusm48zmlzwr32csxdw4ar7atw260h22c9ten9l\": 0.1}' 1 economical null '{\"add_to_wallet\": false, \"inputs\": [{\"txid\":\"0b7e1a471dc948b7a6187936b16e6d7d9833629b2f9dd8a392eb89928f63aaad\", \"vout\":0}]}'\r\n{\r\n  \"psbt\": \"cHNidP8BAHECAAAAAa2qY4+SieuSo9idL5tiM5h9bW6xNnkYprdIyR1HGn4LAAAAAAD9////AkR2DwQAAAAAFgAUpLDwJu+wFRHLQAgKAb0psk7UVd2AlpgAAAAAABYAFOQ3U4t/E4cVYgZrq9H7q3K0+6lYAAAAAAABAIUCAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////wQC4wMA/////wLIF6gEAAAAABYAFLMY1zihXrefAA0DA5nld4MCPjkrAAAAAAAAAAAmaiSqIant4vYcP3HR3v0/qZnfo2lTdVxpBol5mWK0i+vYNpdOjPkAAAAAAQEfyBeoBAAAAAAWABSzGNc4oV63nwANAwOZ5XeDAj45KwEIawJHMEQCIElTV4pbUrsPR9qHWcioowVv3QVWHizxwevfD0u/I8YyAiBCY3OzF81PSLM00h4ueQkehYuxDFZu7Jk51iejphKnnwEhA0VKdYVSyBpWoxBwTDOupB58Fi3mEBs+u+OOqEYVd2sZACICA98YLWyH7dBCfXVxe7woiLSTgV1mJN8Zc8KgZ77pVSg+GNBMeT5UAACAAQAAgAAAAIABAAAAbAAAAAAA\",\r\n  \"txid\": \"625b71b314a6ac4f738634e29dc007cd5edc0427c1ae96ab706d06a62910cea2\",\r\n  \"hex\": \"02000000000101adaa638f9289eb92a3d89d2f9b6233987d6d6eb1367918a6b748c91d471a7e0b0000000000fdffffff0244760f0400000000160014a4b0f026efb01511cb40080a01bd29b24ed455dd8096980000000000160014e437538b7f13871562066babd1fbab72b4fba9580247304402204953578a5b52bb0f47da8759c8a8a3056fdd05561e2cf1c1ebdf0f4bbf23c6320220426373b317cd4f48b334d21e2e79091e858bb10c566eec9939d627a3a612a79f012103454a758552c81a56a310704c33aea41e7c162de6101b3ebbe38ea84615776b1900000000\",\r\n  \"complete\": true\r\n}\r\n```\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "SomberNight",
      "created_at": "2026-02-11T16:24:24Z",
      "updated_at": "2026-02-12T15:25:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34561",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4463,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3270697766,
      "number": 34557,
      "title": "test: fix intermittent failure in interface_zmq.py",
      "body": "The `interface_zmq.py` functional test was failing intermittently due to a race condition where ZMQ messages weren't immediately available when checked.\r\n\r\nThis PR adds a retry mechanism (5 attempts with 0.1s delay) to handle transient timing issues in ZMQ message delivery. The test now properly handles `zmq.error.Again` exceptions instead of failing immediately.\r\n\r\nFixes #34189",
      "state": "closed",
      "user": "Hijanhv",
      "created_at": "2026-02-11T09:09:39Z",
      "updated_at": "2026-02-12T15:24:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34557",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 432,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2818039408,
      "number": 33362,
      "title": "Run feature_bind_port_(discover|externalip).py in CI",
      "body": "This PR includes https://github.com/bitcoin/bitcoin/pull/32757 (first two commits here).\r\n\r\nThen, on top of that:\r\n\r\n`feature_bind_port_discover.py` and `feature_bind_port_externalip.py` require a routable address on the machine to run. Since that was not predictably available on CI, those tests required a manual setting up of IP addresses (e.g. using `ifconfig`) and then running the tests with a command line option telling them that the addresses are set up. The tests were not run in CI and [got rot](https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2497792487).\r\n\r\nChange that to auto-detect, from the tests, whether the needed IP addresses are present and if yes, run the test, otherwise skip it. Also change the CI to configure the needed addresses when running the functional tests. This way the tests will be run regularly on CI.\r\n\r\nFixes: https://github.com/bitcoin/bitcoin/issues/31293\r\nFixes: https://github.com/bitcoin/bitcoin/issues/31336\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-09-11T07:50:42Z",
      "updated_at": "2026-02-12T15:10:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33362",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1021,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181854676,
      "number": 34320,
      "title": "coins: remove redundant and confusing `CCoinsViewDB::HaveCoin`",
      "body": "Split out of https://github.com/bitcoin/bitcoin/pull/34132#discussion_r2692307054.\r\n\r\n### Problem\r\nWe have two ways to check if a coin exists in the db.\r\nOne tries to deserialize, the other just returns whether any value is associated with the key.\r\nBut we usually need the full value we probed for, and `HaveCoin` cannot cache the returned value, so it can trigger an extra lookup if `HaveCoin` uses `Exists` and the caller later needs the actual value.\r\nWe're already delegating most `HaveCoin` calls to `GetCoin` anyway for the above reasons, so the `CCoinsViewDB` implementation of `HaveCoin` is redundant.\r\n\r\n### Fix\r\nRemove `CCoinsViewDB::HaveCoin` (falls back to the base `CCoinsView::HaveCoin` which delegates to `GetCoin`) and simplify `CCoinsViewCache::HaveCoin` to use `AccessCoin`.\r\n\r\n### Testing\r\nA unit test was added to confirm that `HaveInputs` calls the database's `::GetCoin` (not `::HaveCoin`) on cache miss and checks cache first.\r\nAlso added a benchmark to track throughput before/after changes to ensure no regression.\r\n\r\n----\r\n\r\nNote: the latest version of the change keeps most `HaveCoin` calls for convenience, a previous version removed all of them.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-16T16:17:29Z",
      "updated_at": "2026-02-12T14:57:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34320",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1238,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2594396603,
      "number": 32757,
      "title": "net: Fix Discover() not running when using -bind=0.0.0.0:port",
      "body": "  This PR fixes two related issues with address discovery when using explicit bind addresses in Bitcoin Core:\r\n\r\n  -  #31293\r\n  -  #31336\r\n\r\nWhen using `-bind=0.0.0.0:port` (or `-bind=::`), the `Discover()` function was not being executed because the code only checked the `bind_on_any` flag. This led to two problems:\r\n- The node would not discover its own local addresses if an explicit \"any\" bind was used.\r\n- The functional test `feature_bind_port_discover.py` would fail, as it expects local addresses to be discovered in these cases.\r\n\r\nThis PR:\r\n1. Checks both `bind_on_any` and any bind addresses using `IsBindAny()`\r\n   Ensures `Discover()` runs when binding to 0.0.0.0 or ::, even if specified explicitly.\r\n2. Ensures correct address discovery\r\n   The node will now discover its own addresses when using explicit \"any\" binds, matching user expectations and fixing the test.\r\n3. Maintains backward compatibility\r\n   The semantic meaning of `bind_on_any` is preserved as defined in `net.h`:  \r\n   > \"True if the user did not specify -bind= or -whitebind= and thus we should bind on 0.0.0.0 (IPv4) and :: (IPv6)\"\r\n4. Updates the test to use dynamic ports\r\n   The functional test `feature_bind_port_discover.py` is updated to use dynamic ports instead of hardcoded ones, improving reliability.\r\n\r\nHow this PR Differs from #31492\r\n\r\n- Preserves the semantic meaning of `bind_on_any` (see `net.h`).\r\n- Uses a simpler approach: checks `IsBindAny()` on bind addresses, without modifying `GetListenPort()`.\r\n- Avoids code duplication with `DefaultOnionServiceTarget()`.\r\n\r\nReferences\r\n\r\n- Implementation follows the approach proposed in my [review comment on #31492](https://github.com/bitcoin/bitcoin/pull/31492#issuecomment-2941773645).\r\n\r\nCloses #31293\r\n\r\nThe #31336 has the overall test failure and requires both this PR and #33362 to be fully resolved.\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-06-16T04:28:44Z",
      "updated_at": "2026-02-12T14:49:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32757",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1922,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3182788993,
      "number": 34324,
      "title": "Add utxo_to_csv.py tool",
      "body": "This adds a new conversion tool, heavily based on `utxo_to_sqlite.py`, to produce a CSV file for the UTXO set.\r\n\r\nI created this because I wanted something that produced a greppable UTXO set, and am upstreaming it as it may benefit others.\r\n\r\nUnlike the sqlite version, it also dumps addresses/descriptors for the outputs.",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-16T21:37:36Z",
      "updated_at": "2026-02-12T14:43:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34324",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 346,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275774710,
      "number": 34572,
      "title": "cmake: Fix NetBSD-specific workaround for Boost",
      "body": "The recently merged https://github.com/bitcoin/bitcoin/pull/34143 broke builds with depends on NetBSD due to a workaround introduced in 5a5ddbd78922236402df378c8588a7b0b3f83a13.\r\n\r\nThe upstream [bug](https://gnats.netbsd.org/59856) has been fixed, and the entire workaround can be removed once the fixed Boost package becomes generally available.\r\n\r\nHowever, it seems prudent to amend the workaround now to have it workable in the 31.0 release.\r\n\r\nHere are CI runs:\r\n- broken: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21933683654\r\n- fixed: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21933683654",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-12T11:27:01Z",
      "updated_at": "2026-02-12T14:32:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34572",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3268498638,
      "number": 34552,
      "title": "fees: refactor: separate feerate format from fee estimate mode",
      "body": "### Motivation\r\n\r\nPart of #34075\r\n\r\n- The `FeeEstimateMode` enum was responsible for both selecting the fee estimation algorithm and specifying the fee rate' format. \r\n\r\n####  Changes in this PR:\r\n   * The `FeeEstimateMode` enum (`UNSET`, `ECONOMICAL`, `CONSERVATIVE`) is moved to a new util/fees.h header.\r\n   * A new `FeeRateFormat `enum (`BTC_KVB`, `SAT_VB`) is introduced in `policy/feerate.h` for feerate formatting.\r\n   * The `CFeeRate::ToString()` method is updated to use `FeeRateFormat`.\r\n   * All relevant function calls have been updated to use the new `FeeRateFormat` enum for formatting and `FeeEstimateMode` for fee estimation mode.\r\n\r\n This refactoring separates these unrelated responsibilities to improve code clarity.",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2026-02-10T18:21:41Z",
      "updated_at": "2026-02-12T14:07:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34552",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 798,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187823761,
      "number": 34342,
      "title": "cli: Replace libevent usage with simple http client",
      "body": "Part of the effort to remove the libevent dependency altogether, see #31194\r\n\r\nThis takes the [`HTTPHeaders` class](https://github.com/bitcoin/bitcoin/pull/32061/commits/d549f01caab659f1c431ccabf0f5ff1800debcfe) from #32061 and puts it into [`common/http.h|cpp`](https://github.com/bitcoin/bitcoin/pull/34342/commits/634d4dcfa428f17f0a12c2e2742c2c08e2345033). While it would not be strictly required for that PR to go in first, it might be better to review it first or simultaneously.\r\n\r\nOtherwise the change itself replaces the libevent-based HTTP client with a simple synchronous implementation which uses the `Sock` class directly.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-01-19T13:27:54Z",
      "updated_at": "2026-02-12T14:02:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34342",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 686,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3266545660,
      "number": 34547,
      "title": "lint: modernise lint tooling",
      "body": "Modernise our lint tooling by:\r\n\r\n\\- Replacing pyenv + pip with [uv](https://docs.astral.sh/uv/) for better Python environment and dependency management\r\n\\- Replacing mypy with https://github.com/astral-sh/ty\r\n\\- Replacing the 01_install.sh runtime install script with COPY --from multi-stage Docker image imports for uv, ruff, shellcheck, mlc, and ty\r\n\\- Moving ruff lint rules from hardcoded Rust array (in lint_py.rs) into a top-level ruff.toml, and add ty.toml for the type checker\r\n\\- Extracting all remaining pip dependencies into dedicated ci/lint/requirements.txt\r\n\r\nExtra rationale:\r\n\r\n`COPY --from` pulls pre-built binaries from upstream images instead of compiling/downloading at runtime. Containerfile layer optimisations reduce rebuild frequency further.\r\n\r\n`ty` is significantly faster/more modern/maintained than `mypy`, and configured declaratively.\r\n\r\nAdding root-level `[ty|ruff].toml` config files means contributors can easily run `ty check` or `ruff check` locally without running the full linter, along with being accessible to other tooling (similarly for requriements.txt).\r\n\r\nPinning tool versions in the dockerfile makes it more excplicit and easier to find.\r\n\r\nThe tradeoff we make here is that there is no longer a bare install script to install tooling on a local machine. However I think this is OK, as it currently only works for `apt`-based OSes anyway, and I don't think running the linter outside of the container is such a valuable use-case as it is with some of the other CI jobs.\r\n\r\nFurther work can drop individual rules from `ty.toml` fixing up the infringing code as necessary.\r\n\r\nI can split this up if wanted, but IMO it makes sense to do it altogether.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-10T10:25:27Z",
      "updated_at": "2026-02-12T14:01:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34547",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1724,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3124280596,
      "number": 34141,
      "title": "miniscript: Use Func and Expr when parsing keys, hashes, and locktimes",
      "body": "The miniscript parser currently only looks for the next `)` when parsing key, hash, and locktime expressions. This fails to parse when the expressions contain a nested expression. Currently, this is only possible with `musig()` inside of key expressions. However, this pattern can be generalized to handling hashes and locktimes, so I implemented those too.\r\n\r\nFixes #34076",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-12-22T21:36:58Z",
      "updated_at": "2026-02-12T13:36:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34141",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1814496897,
      "number": 29838,
      "title": "Feature: Use different datadirs for different signets",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/27494\r\n\r\nWhen the `-signetchallenge` argument is provided, the hash-160 of the challenge is appended to the data directory name. This ensures that each signet has its own distinct data directory, following the naming convention `signet_XXXXXXX`.\r\n\r\nNote:\r\nThe behaviour of the default signet remains unchanged\r\n\r\n### Update:\r\n\r\nWhen the `-signetchallenge` argument is provided, `the first 8 characters of the hash-160 of the challenge` are appended to the data directory name. This ensures that each signet has its own distinct data directory, following the naming convention `signet_XXXXXXX`.\r\n\r\n",
      "state": "closed",
      "user": "BrandonOdiwuor",
      "created_at": "2024-04-09T16:25:32Z",
      "updated_at": "2026-02-12T12:59:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29838",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 699,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3257065528,
      "number": 34533,
      "title": "wallet: resubmit transactions with private broadcast if enabled",
      "body": "The wallet keeps track of transactions related to it and periodically rebroadcasts them every 12-36 hours if they are not mined.\r\n\r\nIf `-privatebroadcast=1` and a transaction is submitted locally with the `sendrawtransaction` RPC and it is related to the wallet, then the rebroadcasts would use the send-to-all method. Change that to use the private broadcast method.\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-02-07T05:35:17Z",
      "updated_at": "2026-02-13T09:36:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34533",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 433,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3273253766,
      "number": 34566,
      "title": "feature: Use different datadirs for different signets",
      "body": "closes #27494\r\n\r\nThis adds support for syncing multiple signets.\r\n\r\nEach custom signet is stored in a different datadir, using the first 8 bytes of the signet challenge in hex as the suffix.\r\n\r\nThe default signet is always stored without a suffix for backward compatibility, even if the default challenge is provided explicitly via `-signetchallenge`.\r\n\r\nThis builds upon #29838.\r\n\r\nFor those already familiar with #29838, here are the differences between #29838 and this that are visible to the user:\r\n\r\n* The suffix does not use the first 4 bytes of hash160(challenge), but rather the first 8 bytes of the unhashed challenge. If desired, I can use the message start instead as suggested in [#29838 (comment)](https://github.com/bitcoin/bitcoin/pull/29838#discussion_r1557976175).\r\n* If the default challenge is provided to `-signetchallenge`, [#29838](https://github.com/bitcoin/bitcoin/pull/29838) added a suffix to the datadir, whereas this PR does not. This includes backward compatibility when the default signet is used explicitly, not only implicitly, even though [the default signet consensus parameters aren't used in the explicit case](https://github.com/bitcoin/bitcoin/pull/29838#issuecomment-2742830552).[^1] A test was added for this case.\r\n\r\n[^1]: could be something for a follow-up PR, or maybe it's intentional to not mix explicit with implicit options?\r\n\r\nUnlike #29838, this PR does not update tests that didn't break (`rpc_bind.py`, `interface_bitcoin_cli.py`). I have found other tests where `datadir_path` is used in combination with `self.chain` (regexp: `datadir_path.*chain`). I considered it inconsistent to update some tests but not all of them. I've decided to not update all of them to keep the scope of this PR low until feedback. I can go through all tests in a follow-up PR to make sure they don't break when they are ever used with (custom) signet, however unlikely that might be.\r\n\r\nI have done some manual testing like this:\r\n\r\n<details>\r\n<summary>manual testing</summary>\r\n\r\n* `bitcoind -signet`: 'signet' directory is used, IBD\r\n* `bitcoind -signet -signetchallenge=512103ad5e0edad18cb1f0fc0d28a3d4f1f3e445640337489abb10404f2d1e086be430210359ef5021964fe22d6f8e05b2463c9540ce96883fe3b278760f048f5189f2e6c452ae`: 'signet' directory is used, no IBD without `-addnode` (see [#29838 (comment)](https://github.com/bitcoin/bitcoin/pull/29838#issuecomment-2742830552))\r\n* `bitcoind -conf=\"signet_default.conf\"`: 'signet' directory is used\r\n* `bitcoind -conf=\"signet_custom.conf\"`: 'signet_0014d4528367459d' directory is used\r\n* `bitcoin-cli getblockchaininfo` with the same options (`-signet`, `-conf`, or `-signet -signetchallenge`)\r\n\r\n```\r\n# signet_default.conf\r\nsignet=1\r\n[signet]\r\nsignetchallenge=512103ad5e0edad18cb1f0fc0d28a3d4f1f3e445640337489abb10404f2d1e086be430210359ef5021964fe22d6f8e05b2463c9540ce96883fe3b278760f048f5189f2e6c452ae\r\n```\r\n\r\n```\r\n# signet_custom.conf\r\nsignet=1\r\n[signet]\r\nsignetchallenge=0014d4528367459d54e1545b0d0a677d2a7d71d648e0\r\n```\r\n\r\n</details>\r\n\r\nI'm new to contributing to Bitcoin Core so it's entirely possible that I've missed something obvious.\r\n\r\nFeedback welcome on where to best define the default signet challenge for the functional tests and the C++ code to avoid duplication.\r\n",
      "state": "open",
      "user": "ekzyis",
      "created_at": "2026-02-11T19:46:48Z",
      "updated_at": "2026-02-12T12:57:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34566",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3306,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3196205347,
      "number": 34372,
      "title": "QA: wallet_migration: Test several more weird scenarios",
      "body": "Includes the \"survive\" file test from #34222 ",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2026-01-21T17:44:07Z",
      "updated_at": "2026-02-12T12:42:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34372",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 101,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3079464109,
      "number": 34028,
      "title": "p2p: Prevent integer overflow in LocalServiceInfo::nScore",
      "body": "The `nScore` field in `LocalServiceInfo` could overflow during version handshakes that wrap from `INT_MAX to INT_MIN` triggering undefined behavior in address selection\r\n\r\n`SeenLocal()` now saturates `nScore` at `std::numeric_limits <int>::max()`, so further increments stay capped\r\n\r\nThe test `LocalAddress_nScore_Overflow` covers the saturation behavior \r\n\r\nThis should fix the issue #24049",
      "state": "open",
      "user": "codeabysss",
      "created_at": "2025-12-07T20:08:41Z",
      "updated_at": "2026-02-12T11:49:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34028",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 450,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3207254787,
      "number": 34400,
      "title": "wallet: parallel fast rescan (approx 5x speed up with 16 threads)",
      "body": "This PR uses the [ThreadPool](https://github.com/bitcoin/bitcoin/blob/master/src/util/threadpool.h) to implement parallel fast rescan.\r\n\r\nThis PR:\r\n- Adds a `ThreadPool` to the `WalletContext` to be shared by all the wallets\r\n- Adds `-walletpar` parameter to configure the number of threads to be used for parallel scanning \r\n- Updates the `wallet_fast_rescan.py` test to ensure it catches cases where the FastRescan filter wasn't properly updated. This is crucial to ensure that changes in the PR do not cause newly added output scripts to be missed.\r\n- Refactors `ScanForWalletTransactions` to make the implementation of parallel scanning easier.\r\n- Implements parallel scanning\r\n\r\nBenchmarks:\r\n**NOTE: to reproduce, please tune your system with `pyperf system tune`**\r\n\r\n_EDIT\r\nSet up your node to use block filters by setting `blockfilterindex=1` in your bitcoin.conf file and ensure your blockfilterindex is synced to tip before attempting to reproduce._\r\n\r\nUsing the following command on mainnet with a wallet with no scripts and hyperfine version `1.20.0`:\r\n```\r\nhyperfine --show-output --export-markdown results.md --export-json results.json  \\\r\n--sort command \\\r\n--runs 3 \\\r\n-L commit ef847e8,37d356b \\\r\n-L num_threads 1,2,4,8,16 \\\r\n--prepare 'git checkout {commit} && cmake --build build -j 20 && build/bin/bitcoind -blockfilterindex=1 -walletpar={num_threads} && sleep 10 && build/bin/bitcoin-cli loadwalllet <wallet-name>' \\\r\n--conclude 'build/bin/bitcoin-cli stop && sleep 10' \\\r\n'build/bin/bitcoin-cli rescanblockchain 500000 900000'\r\n```\r\nI obtained the following results:\r\n| Command | Mean [s] | Min [s] | Max [s] | Relative |\r\n|:---|---:|---:|---:|---:|\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = baseline, num_threads = ..)` | 536.996 ± 0.722 | 536.257 | 537.701 | 4.64 ± 0.01 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 1)` | 540.210 ± 2.696 | 537.172 | 542.320 | 4.67 ± 0.03 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 2)` | 358.190 ± 0.515 | 357.675 | 358.706 | 3.10 ± 0.01 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 4)` | 230.217 ± 2.321 | 228.814 | 232.896 | 1.99 ± 0.02 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 8)` | 151.144 ± 1.748 | 149.506 | 152.984 | 1.31 ± 0.02 |\r\n| `build/bin/bitcoin-cli rescanblockchain 500000 900000 (commit = parallel_scan, num_threads = 16)` | 115.642 ± 0.305 | 115.390 | 115.982 | 1.00 |\r\n\r\nSystem information:\r\n```\r\nArchitecture:             x86_64\r\n  CPU op-mode(s):         32-bit, 64-bit\r\n  Address sizes:          46 bits physical, 48 bits virtual\r\n  Byte Order:             Little Endian\r\nCPU(s):                   20\r\n  On-line CPU(s) list:    0-19\r\nVendor ID:                GenuineIntel\r\n  Model name:             Intel(R) Core(TM) Ultra 7 265\r\n    CPU family:           6\r\n    Model:                198\r\n    Thread(s) per core:   1\r\n    Core(s) per socket:   1\r\n    Socket(s):            20\r\n    Stepping:             2\r\n    CPU(s) scaling MHz:   41%\r\n    CPU max MHz:          4800.0000\r\n    CPU min MHz:          800.0000\r\n    BogoMIPS:             4761.60\r\n```\r\n\r\nFurther benchmarks were performed using a [python script](https://github.com/Eunovo/rescan-benchmark) with custom chains designed with payments at specified intervals, and the following graph was produced:\r\n\r\n<img width=\"4760\" height=\"8950\" alt=\"benchmark_comparison\" src=\"https://github.com/user-attachments/assets/1ba8c64d-cfca-4360-af06-1f034a30e307\" />\r\n\r\nThis graph was produced from a laptop with the following CPU specifications:\r\n```\r\nArchitecture:                x86_64\r\n  CPU op-mode(s):            32-bit, 64-bit\r\n  Address sizes:             48 bits physical, 48 bits virtual\r\n  Byte Order:                Little Endian\r\nCPU(s):                      16\r\n  On-line CPU(s) list:       0-15\r\nVendor ID:                   AuthenticAMD\r\n  Model name:                AMD Ryzen 9 8945HS w/ Radeon 780M Graphics\r\n    CPU family:              25\r\n    Model:                   117\r\n    Thread(s) per core:      2\r\n    Core(s) per socket:      8\r\n    Socket(s):               1\r\n    Stepping:                2\r\n    Frequency boost:         enabled\r\n    CPU(s) scaling MHz:      63%\r\n    CPU max MHz:             5263.0000\r\n    CPU min MHz:             400.0000\r\n```\r\n\r\nAll materials for the custom benchmarks can be found [here](https://github.com/Eunovo/rescan-benchmark).\r\n\r\nAlthough not explicitly checked with Valgrind, hyperfine reported that memory usage stayed the same across all runs. I'm not sure to what degree hyperfine's memory usage report can be trusted, but the PR limits the amount of block hashes that can be held in memory for processing to `1000` (not configurable by the user).\r\n\r\n\r\nAll benchmarks were performed against https://github.com/bitcoin/bitcoin/pull/34400/commits/37d356bbbe3efed3c7c9e64fae1bac3f4d0ec6eb instead of master because `-walletpar` is implemented here, and the benchmark scripts would otherwise break, or more complicated scripts would be required to accommodate master.\r\n",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2026-01-24T19:46:16Z",
      "updated_at": "2026-02-12T11:39:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34400",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 5257,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3209325275,
      "number": 34405,
      "title": "wallet: skip APS when no partial spend exists",
      "body": "Fixes #25150\n\nAPS (Avoid Partial Spends) runs a second coin selection pass to fully spend\nUTXOs sharing a scriptPubKey. This currently runs unconditionally, even when\nthe first selection has no partial spend. Running APS unnecessarily wastes\ncomputation and can produce a worse result when there was nothing to fix.\n\nDetect partial spends by comparing selected vs available UTXO counts per\nscriptPubKey, reusing available_coins. Skip APS if none found.\n\nTest updated to create partial spend scenarios so tracepoints fire.\n\n---\n\n*Supersedes #34362 which was corrupted by a shallow clone force-push.*",
      "state": "open",
      "user": "8144225309",
      "created_at": "2026-01-26T04:36:55Z",
      "updated_at": "2026-02-12T11:33:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34405",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 644,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3054115118,
      "number": 33965,
      "title": "mining: fix -blockreservedweight shadows IPC option",
      "body": "Also enforce `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients.\r\n\r\nThe `-blockreservedweight` startup option should only affect RPC code, because IPC clients (currently) do not have a way to signal their intent to use the node default (the `BlockCreateOptions` struct defaults merely document a recommendation for client software).\r\n\r\nBefore this PR however, if the user set `-blockreservedweight` then `ApplyArgsManOptions` would cause the `block_reserved_weight` option passed by IPC clients to be ignored. _Users who don't set this value were not affected._\r\n\r\nFix this by making BlockCreateOptions::block_reserved_weight an std::optional.\r\n\r\nInternal interface users, such as the RPC call sites, don't set a value so -blockreservedweight is used. Whereas IPC clients do set a value which is no longer ignored.\r\n\r\nTest coverage is added, with a preliminary commit that refactors the `create_block_template` and `wait_next_template` helpers.\r\n\r\n`mining_basic.py` already ensured `-blockreservedweight` is enforced by mining RPC methods. The second commit adds coverage for Mining interface IPC clients. It also verifies that `-blockreservedweight` has no effect on them.\r\n\r\nThe third commit enforces `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients. Previously lower values were quietly clamped.\r\n\r\n---\r\n\r\nMerge order preference: #34452 should ideally go first.",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-28T13:38:33Z",
      "updated_at": "2026-02-12T11:32:10Z",
      "merged_at": "2026-02-12T02:22:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33965",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1412,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1494552054,
      "number": 28366,
      "title": "Fix waste calculation in SelectionResult",
      "body": "PR #26152 moved waste calculation into SelectionResult to be able to correct the waste score on basis of the bump_fee_group_discount for overlapping ancestries. This left two functions with largely overlapping purpose, where one was simply a wrapper of the other. This PR cleans up the overlap, and fixes the double-meaning of `change_cost` where the `GetChange()` function assumed that no change was created when `change_cost` was set to 0. This behavior was exploited in a bunch of tests, but is problematic, because a `change_cost` of 0 is permitted with custom settings for feerate and discard_feerate (i.e. when they’re both 0).",
      "state": "closed",
      "user": "murchandamus",
      "created_at": "2023-08-29T22:17:50Z",
      "updated_at": "2026-02-12T11:11:25Z",
      "merged_at": "2024-06-04T22:37:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28366",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 674,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2002875068,
      "number": 30584,
      "title": "depends: Make default `host` and `build` comparable",
      "body": "To detect cross-compiling, the host and build platforms are compared. The `build` variable is always an output of `config.sub`, but the `host` is not. This can lead to false results. For example, on OpenBSD:\r\n - host=amd64-unknown-openbsd7.5\r\n - build=x86_64-unknown-openbsd7.5\r\n\r\nThis PR sets the default value of the `host` variable to the value of `build`, ensuring cross-compiling won't be triggered when the `HOST` variable is not set.\r\n\r\nThis PR fixes needless triggering of cross-compiling for CMake-built packages in depends on OpenBSD due to this code:https://github.com/bitcoin/bitcoin/blob/eb85cacd2969caaea682104f498f6b2e6cfb80f8/depends/funcs.mk#L193-L197\r\n\r\nNo changes in Guix build.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-08-04T22:29:20Z",
      "updated_at": "2026-02-12T11:11:24Z",
      "merged_at": "2025-02-12T10:18:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30584",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 749,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2284197308,
      "number": 31678,
      "title": "ci: Skip read-write of default env vars",
      "body": "If they remain unset, they use the default anyway. Except for `USER`, but this seems unused anyway.\r\n\r\nCan be checked via:\r\n\r\n```\r\nsh-5.2# touch /tmp/empty_env\r\nsh-5.2# podman run --rm --env-file /tmp/empty_env 'ubuntu:24.04' env\r\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\ncontainer=podman\r\nHOME=/root\r\nHOSTNAME=19ece5c9e052\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-17T12:13:07Z",
      "updated_at": "2026-02-12T11:11:23Z",
      "merged_at": "2025-02-12T14:54:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31678",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 391,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2235201413,
      "number": 31500,
      "title": "depends: Fix compiling `libevent` package on NetBSD",
      "body": "Libevent [introduced](https://github.com/libevent/libevent/pull/909) the [`typeof`](https://gcc.gnu.org/onlinedocs/gcc/Typeof.html) C language extension in the NetBSD-specific code, which was pulled into our depends in https://github.com/bitcoin/bitcoin/pull/21991.\r\n\r\nHowever, GCC [states](https://gcc.gnu.org/onlinedocs/gcc/Alternate-Keywords.html):\r\n> the various `-std` options disable certain keywords.\r\n\r\nDue to our use of https://github.com/bitcoin/bitcoin/blob/b042c4f0538c6f9cdf8efbcef552796851e38a85/depends/hosts/netbsd.mk#L1\r\n\r\nthe `typeof` keyword is disabled, resulting in a compilation error:\r\n```\r\n$ gmake -C depends libevent CC=/usr/pkg/gcc14/bin/gcc CXX=/usr/pkg/gcc14/bin/g++\r\n<snip>\r\n[ 37%] Building C object CMakeFiles/event_core_static.dir/kqueue.c.o\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c: In function 'kq_setup_kevent':\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:56:27: error: implicit declaration of function 'typeof' [-Wimplicit-function-declaration]\r\n   56 | #define INT_TO_UDATA(x) ((typeof(((struct kevent *)0)->udata))(intptr_t)(x))\r\n      |                           ^~~~~~\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:190:30: note: in expansion of macro 'INT_TO_UDATA'\r\n  190 |                 out->udata = INT_TO_UDATA(ADD_UDATA);\r\n      |                              ^~~~~~~~~~~~\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:56:64: error: expected expression before 'intptr_t'\r\n   56 | #define INT_TO_UDATA(x) ((typeof(((struct kevent *)0)->udata))(intptr_t)(x))\r\n      |                                                                ^~~~~~~~\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:190:30: note: in expansion of macro 'INT_TO_UDATA'\r\n  190 |                 out->udata = INT_TO_UDATA(ADD_UDATA);\r\n      |                              ^~~~~~~~~~~~\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:56:27: error: called object is not a function or function pointer\r\n   56 | #define INT_TO_UDATA(x) ((typeof(((struct kevent *)0)->udata))(intptr_t)(x))\r\n      |                          ~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/home/hebasto/dev/bitcoin/depends/work/build/x86_64-unknown-netbsd10.0/libevent/2.1.12-stable-ca6b96ec97c/kqueue.c:190:30: note: in expansion of macro 'INT_TO_UDATA'\r\n  190 |                 out->udata = INT_TO_UDATA(ADD_UDATA);\r\n      |                              ^~~~~~~~~~~~\r\ngmake[3]: *** [CMakeFiles/event_core_static.dir/build.make:328: CMakeFiles/event_core_static.dir/kqueue.c.o] Error 1\r\n<snip>\r\n```\r\n\r\nThis PR resolves this issue by following GCC's [recommendation](https://gcc.gnu.org/onlinedocs/gcc/Typeof.html):\r\n> write `__typeof__` instead of `typeof`.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-14T15:41:04Z",
      "updated_at": "2026-02-12T11:11:23Z",
      "merged_at": "2025-02-12T15:38:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31500",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3114,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2313554406,
      "number": 31792,
      "title": "Double check all block rules in `ConnectBlock`, not only `CheckBlock`",
      "body": "We currently only sanity check `CheckBlock()` in `ConnectBlock()`. Not running the rest of the block\r\nchecks makes it hard to reason about upgrade edge cases if we were to introduce new consensus rules\r\n(which would necessarily be context-dependent checks). For instance a timewarp fix or a BIP34\r\nsupplementation.\r\n\r\nThis is fine to do as the expensive check in `ContextualCheckBlock()` is cached since\r\n1ec6bbeb8d27d31647d1433ccb87b362f6d81f90 and the future-timestamp check is split out of\r\n`ContextualCheckBlockHeader()` beforehand.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2025-02-03T20:12:44Z",
      "updated_at": "2026-02-12T11:11:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31792",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 606,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2292917958,
      "number": 31711,
      "title": "build: set build type and per-build-type flags as early as possible",
      "body": "This ensures that most compiler tests are not run with the wrong build type's flags. The initial c++ checks are an exception to that because many internal CMake variables are unset until a language is selected, so it's problematic to change our build type before that.\r\n\r\nThe difference can be seen in `build/CMakeFiles/CMakeConfigureLog.yaml`. Before, `Debug` was used for many of the earlly checks. After this PR, it's only the first 2 checks.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-01-22T19:05:16Z",
      "updated_at": "2026-02-12T11:11:21Z",
      "merged_at": "2025-02-12T09:41:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31711",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 513,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2322594932,
      "number": 31818,
      "title": "guix: remove test-security/symbol-check scripts",
      "body": "These scripts are becoming more of nuisance, than a value-add; particularly since we've been building releases using Guix. Adding new (release bin) tests can be harder, because it requires constructing a failing test, which is becoming less easy, e.g trying to disable a feature or protection that has been built into the compiler/toolchain by default.\r\n\r\nIn the pre-Guix days, these were valuable to sanity-check the environment, because we were pulling that pre-built from Ubuntu, with little control. At this point, it's less clear what these scripts are (sanity) checking.\r\n\r\nNote that these also weren't completely ported to CMake (#31698), see also #31715 which contains other fixes that would be needed for these test-tests, to accomodate future changes.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-02-07T15:57:54Z",
      "updated_at": "2026-02-12T11:11:20Z",
      "merged_at": "2025-02-12T08:48:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31818",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 809,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2331216937,
      "number": 31847,
      "title": "[WIP] build: name install targets as components",
      "body": "Adds component names to the CMake install targets to allow for component-based installs. Such installs are helpful when a user only wants to install `bitcoind` or `bitcoin-cli` executables specifically, for example.\r\n\r\nAt present, the component names use Pascal case to follow the existing convention for the only pre-existing named component `Kernel`, however, there is a convincing case to be made for using kebab-case to more intuitively match the names of the executable binaries.\r\n\r\nComponent based installs can be performed using:\r\n```\r\ncmake -B build\r\ncmake --build build --target bitcoind bitcoin-cli\r\ncmake --install build --component BitcoinD BitcoinCli\r\n```\r\n\r\nSupported targets:\r\n- `BitcoinWallet`\r\n- `BitcoinD`\r\n- `BitcoinNode`\r\n- `BitcoinCli`\r\n- `BitcoinTx`\r\n- `BitcoinUtil`\r\n\r\nAttempts to close #31745.\r\n\r\nPossible improvements:\r\n- Scour other nested `CMakeLists.txt` files for additional targets.\r\n- Switch to kebab-case\r\n\r\nNew contributor here; new to Bitcoin, new to CMake, happy to help, learn and receive feedback.\r\n\r\nCurrently submitted as a draft to inspect build results as a PoC.",
      "state": "closed",
      "user": "s373nZ",
      "created_at": "2025-02-12T12:54:02Z",
      "updated_at": "2026-02-12T11:11:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31847",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1151,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3224735849,
      "number": 34452,
      "title": "test: split interface_ipc.py",
      "body": "This test has been growing too large, making it difficult to maintain. Especially when multiple pull requests change it.\r\n\r\n- move helper functions to `ipc_util.py`\r\n- move mining test to `interface_ipc_mining.py`, keeping only an interface sanity check in `interface_ipc.py`\r\n- split the tests in `interface_ipc_mining.py`\r\n- misc tweaks (to reduce churn in the above commits)\r\n\r\nReview hint:\r\n\r\n```sh\r\ngit show --color-moved=dimmed-zebra --color-moved-ws=ignore-space-change\r\n```",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2026-01-29T19:08:43Z",
      "updated_at": "2026-02-12T11:09:58Z",
      "merged_at": "2026-02-07T09:07:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34452",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 510,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3236402146,
      "number": 34480,
      "title": "wallet: don't back-date locktime below input locktime",
      "body": "Fixes #26527\r\n\r\nThe Bitcoin Core wallet implements an anti-fee-sniping mechanism that sets a transaction's nLockTime to the current block height, and occasionally to an earlier height.\r\n\r\nPreviously, when creating a transaction, the wallet could choose an nLockTime that was lower than the nLockTime of one of its inputs. This creates an unrealistic \"transaction signed earlier but only broadcast now\" scenario and may act as a wallet fingerprint.\r\n\r\nThis PR fixes the issue by adding a `min_allowed_locktime` parameter to `DiscourageFeeSniping`. When creating a transaction, the wallet now sets this minimum to the highest locktime among all parent transactions. This ensures that while the locktime can still be backdated for anti-fee-sniping, it won't go below any input's locktime.\r\n\r\n`DiscourageFeeSniping` is invoked by the following RPCs:\r\n- `sendall`\r\n- `send`\r\n- `sendtoaddress`\r\n- `sendmany`\r\n- `fundrawtransaction`\r\n- `walletcreatefundedpsbt`\r\n\r\nTests are added for `sendall`, `send`, `sendtoaddress` and `sendmany`.\r\n\r\n`fundrawtransaction` and `walletcreatefundedpsbt` can't hit this edge case, because they don't use the anti-fee-sniping logic and instead always set nLockTime to 0 unless explicitly provided by the user.",
      "state": "open",
      "user": "danielabrozzoni",
      "created_at": "2026-02-02T12:47:55Z",
      "updated_at": "2026-02-12T10:57:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34480",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1288,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3216048052,
      "number": 34422,
      "title": "Update libmultiprocess subtree to be more stable with rust IPC client",
      "body": "**This is based on #34284 + https://github.com/bitcoin-core/libmultiprocess/pull/240 so is currently a draft PR.** It's open to make sure the changes work together and there are no issues in CI.\r\n\r\nIncludes:\r\n\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/241\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/240\r\n\r\nThe latter change fixes issues with asynchronous requests (https://github.com/bitcoin/bitcoin/issues/33923) and unclean disconnects (https://github.com/bitcoin/bitcoin/issues/34250) that happen with the rust mining client.\r\n\r\nThe changes can be verified by running `test/lint/git-subtree-check.sh src/ipc/libmultiprocess` as described in [developer notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees) and [lint instructions](https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh)\r\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-01-27T20:06:40Z",
      "updated_at": "2026-02-12T10:57:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34422",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 942,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3275524332,
      "number": 34571,
      "title": "test: Fix intermittent issues in feature_assumevalid.py",
      "body": "The test has many issues:\r\n\r\n* The `send_blocks_until_disconnected` seems to imply to wait until a disconnect happens. However, in reality it will blindly send all blocks and then return early, when done or when a disconnect happens. This will cause test failures when python is running faster than Bitcoin Core, for example when using sanitizers.\r\n* The `assert_debug_log` scopes are bloated, which makes finding the above issue harder. This is, because a test failure will basically print the 1000+ line debug log excerpt twice, with the second instance stripped of useful python test logs. Also, the checks are less precise, if they happen over a larger scope/snippet.\r\n\r\nFix all issues, by:\r\n\r\n* Removing `send_blocks_until_disconnected` and just sending the blocks that are needed to get the disconnect and then explicitly waiting for the disconnect.\r\n* Reduce the scopes of the debug log checks. This can be reviewed with the git options `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-12T10:29:24Z",
      "updated_at": "2026-02-12T10:52:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34571",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1063,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3218102916,
      "number": 34427,
      "title": "lint: Flatten lint image entry points",
      "body": "Two fixups to the lint container:\r\n\r\n* Add a missing `--platform=linux` to avoid running a non-native arch, like s390x, which happens with podman if such a container was most recently used.\r\n* Flatten the entry points to remove the bash-based one:\r\n\r\nPreviously, an additional entry point into the container that spawned a bash was supported. The bash had an alias `lint` to run all lint scripts. However, such a use-case seems limited (because it only runs inside the container), inflexible (because it only allows running all lint scripts), and possibly brittle (because it can miss re-building the image when the cache is stale). So remove it and just offer the single entry point via the `./ci/lint.py` script.\r\n\r\nIf there is a use-case to skip the image building, it should be trivial to add an env var setting the the lint Python script like `DANGER_SKIP_IMAGE_RE_BUILD=1` (or so) in the future.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-28T10:09:18Z",
      "updated_at": "2026-02-12T10:49:25Z",
      "merged_at": "2026-02-12T09:43:34Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34427",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 939,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3220617054,
      "number": 34435,
      "title": "refactor: use `_MiB`/`_GiB` consistently for byte conversions",
      "body": "### Problem\r\nByte-size conversions in the codebase currently show up in many equivalent formats (multiplication/division chains, shifts, hex/binary literals), which creates a maintenance burden and makes review error-prone - especially considering the architectural differences of `size_t`.\r\nInspired by https://github.com/bitcoin/bitcoin/pull/34305#discussion_r2734720002, it seemed appropriate to unify `Mebibyte` usage across the codebase and add `Gibibyte` support with 32/64 bit `size_t` validation.\r\n\r\n### Fix\r\nThis PR refactors those call sites to use `\"\"_MiB` (existing) and `\"\"_GiB` (new), and adds the encountered value/pattern replacements to unit tests to make review straightforward, and to ensure the conversions remain valid.\r\nThe literals are overflow-checked when converting to `size_t`, and unit tests cover the 32-bit boundary cases.\r\n\r\nConcretely, it replaces patterns such as:\r\n* `1024*1024`, `1<<20`, `0x100000`, `1048576`, `/ 1024 / 1024`, `* (1.0 / 1024 / 1024)` → `1_MiB` or `double(1_MiB)`\r\n* `1024*1024*1024`, `1<<30`, `0x40000000`, `1024_MiB`, `>> 30` → `1_GiB`\r\n\r\n### Note\r\nIn the few places where arithmetic involves signed values, the result is identical to the previous code assuming those quantities never become negative.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-28T21:26:10Z",
      "updated_at": "2026-02-12T10:45:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34435",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1317,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3220693682,
      "number": 34436,
      "title": "refactor: add overflow-safe `CeilDiv` helper and use it in unsigned callsites",
      "body": "### Problem\r\nThe codebase has many open-coded ceiling-division expressions (for example `(x+y-1)/y`) scattered across files.\r\nThese are less readable, duplicate logic, and can be overflow-prone in edge cases.\r\n\r\n### Fix\r\nIntroduce a small overflow-safe integer helper, `CeilDiv()`, and use it in existing **unsigned** callsites where the conversion is straightforward and noise-free.\r\n\r\n### What this PR does\r\n* Adds `CeilDiv()` to `src/util/overflow.h` for unsigned integral inputs.\r\n* Keeps the precondition check `assert(divisor > 0)`.\r\n* Replaces selected unsigned ceiling-division expressions with `CeilDiv(...)`.\r\n* Adds focused unit tests in `src/test/util_tests.cpp` for the migrated patterns.\r\n\r\n---\r\n\r\nThis is a pure refactor with no intended behavioral change.\r\nSigned arithmetic callsites are intentionally left unchanged in this PR.\r\nThis PR changed a few more things originally but based on feedback reverted to the simplest cases only.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-28T21:47:06Z",
      "updated_at": "2026-02-12T10:41:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34436",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1028,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3256320620,
      "number": 34528,
      "title": "test: Fix intermittent failure in `feature_assumevalid.py` by ensuring invalid block was processed before checking debug.log",
      "body": "Prior to merging a PR, I run 4 different build configurations and their tests in parallel, and consistently one of those will have `feature_assumevalid.py` fail. The failure is because the `assert_debug_log` context exits before the invalid block is processed, so the lines it is looking for don't appear in the part of the log that it is examining.\r\n\r\nThis PR should resolve that issue by waiting for `getchaintips` to report that the invalid chain is invalid before exiting the `assert_debug_log` context.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-02-06T22:07:00Z",
      "updated_at": "2026-02-12T10:38:43Z",
      "merged_at": "2026-02-07T14:08:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34528",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 632,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3221659481,
      "number": 34439,
      "title": "qa: Drop recursive deletes from test code, add lint checks.",
      "body": "Both `fs::remove_all` and `shutil::rmtree()` are a bit dangerous, and most of their uses are not necessary, this PR removes most instances of both.\r\n\r\n`remove_all()` is still used in in `src/test/util/setup_common.cpp` as part of `BasicTestingSetup::BasicTestingSetup`'s constructor and destructor, and it is used in the kernel test code's [`TestDirectory`](https://github.com/bitcoin/bitcoin/blob/4ae00e9a7183cb15877c3014bf46f2e36470c304/src/test/kernel/test_kernel.cpp#L100-L112):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/734899a4c404f24379d0597744465c147d9ad024/src/test/kernel/test_kernel.cpp#L100-L112\r\n\r\nIn both cases, `remove_all` is likely necessary, but the kernel's test code is RAII, ideally `BasicTestingSetup` could be made similar in a follow-up or in this PR if reviewers think it is important.\r\n\r\nSimilarly in the python code, most usage was unnecessary, but there are a few places where `rmtree()` was necessary, I have added sanity checks to make sure these are inside of the `tmpdir` before doing recursive delete there.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-01-29T03:59:52Z",
      "updated_at": "2026-02-12T10:37:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34439",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1101,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3127249876,
      "number": 34143,
      "title": "build: Prevent system header fallback and include path pollution",
      "body": "Currently, header-only dependencies in the depends subsystem are installed into the standard `include/` subdirectory. This inadvertently exposes their headers to the compiler via `-I` flags brought in by other dependencies (e.g., `libevent` or `sqlite`). This \"include path pollution\" masks missing dependencies in the build configuration. While the build might succeed by accident due to this overlap, it creates a fragile state. If the overlapping library is removed, the build will break, or, worse, the compiler may silently fall back to the host system's default paths (e.g., `/usr/include`).\r\n\r\nThis PR improves build system security and hygiene by enforcing strict, distinguished include paths for header-only dependencies. The missing dependencies revealed by this change (`Boost::headers`, `USDT::headers`) have been fixed in separate commits.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-23T22:17:29Z",
      "updated_at": "2026-02-12T10:34:37Z",
      "merged_at": "2026-02-11T17:43:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34143",
      "labels": [
        "Bug",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 917,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3222520742,
      "number": 34440,
      "title": "Refactor CChain methods to use references, tests",
      "body": "Refactor `CChain` methods (`Contains()`, `Next()`, etc.) to use references instead of pointers, to minimize the risk of accidental `nullptr` dereference (memory access violation). Also add missing unit tests to the `CChain` class.\r\n\r\nThe `CChain::Contains()` method (in `src/chain.h`) dereferences its input without checking. The `Next()` method also calls into this with a `nullptr` if invoked with `nullptr`. While most call sites have indirect guarantee that the input is not `nullptr`, it's not easy to establish this to all call sites with high confidence. These methods are publicly available. There is no known high-level use case to trigger this error, but the fix is easy, and makes the code safer.\r\n\r\nChanges:\r\n\r\n- Add basic unit tests for `CChain` class methods\r\n- Refactor `CChain::Contains()` to take reference\r\n- Refactor `CChain::Next()` to take reference\r\n- Add unit tests for `CChain::FindFork()`\r\n- Change `PeerManagerImpl::BlockRequestAllowed()` to take reference\r\n\r\nTODO:\r\n\r\n- ? /Change `CChain` internals to store references instead of pointers/\r\n- ? /Explore the change to always have at least one element (genesis), that way there is always genesis and tip./\r\n- Check related methods to change to reference -- `FindFork`, `FindEarliestAtLeast`, `FindForkInGlobalIndex`, `blockman.AddToBlockIndex`, etc.\r\n\r\nAlternative. A simpler change is to stick with pointers, with extra checks where needed, see #34416 .\r\n\r\nThis change is remotely related to and indirectly triggered by #32875 .\r\n",
      "state": "open",
      "user": "optout21",
      "created_at": "2026-01-29T09:21:03Z",
      "updated_at": "2026-02-12T10:34:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34440",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1556,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1841534940,
      "number": 29963,
      "title": "depends: Do not consider `CC` environment variable for detecting system",
      "body": "On the master branch @ 3c88eac28e8984893746caebb313dc3b2fca90db, consider the following commands in the `depends` subdirectory:\r\n```sh\r\n$ make print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=x86_64-pc-linux-gnu\r\n$ make print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```\r\nThe printed variable values are expected.\r\n\r\nHowever, switching the `CC` variable context from Makefile to the shell environment breaks expectations:\r\n```sh\r\n$ CC=\"clang -m32\" make print-build HOST=i686-pc-linux-gnu\r\nbuild=i686-pc-linux-gnu\r\n$ CC=\"clang -m32\" make print-host HOST=i686-pc-linux-gnu\r\nhost=i686-pc-linux-gnu\r\n```\r\n\r\nThis PR fixes this issue.\r\n\r\n#### UPDATE 2026-01-20\r\n\r\nOn the master branch @ 7f5ebef56a0f2bad7df30252b11da3e33cb3c144:\r\n```\r\n$ gmake print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=i686-pc-linux-gnu\r\n$ gmake print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-04-25T19:01:29Z",
      "updated_at": "2026-02-12T10:15:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29963",
      "labels": [
        "Build system",
        "DrahtBot Guix build requested"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1009,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3226824452,
      "number": 34457,
      "title": "wallet: add private broadcast support for wallet transactions",
      "body": "## Summary\r\n\r\nExtends the private broadcast feature (#29415) to wallet transactions. When `-privatebroadcast=1` is enabled, wallet RPCs (`sendtoaddress`, `send`, `sendall`, `sendmany`) now broadcast transactions through short-lived Tor/I2P connections instead of announcing to all connected peers.\r\n\r\n## Key Changes\r\n\r\n**Centralized availability check** (commit 1)\r\n- Moves the Tor/I2P reachability check from `sendrawtransaction` RPC to `BroadcastTransaction()`\r\n- All broadcast callers now get consistent error handling\r\n\r\n**Wallet integration** (commit 2)\r\n- `CommitTransaction()`: Uses private broadcast when enabled, fails loudly if Tor/I2P unavailable\r\n- `ResubmitWalletTransactions()`: Rebroadcasts using the original broadcast method\r\n- Persists a `private_broadcast` flag in the wallet transaction's `mapValue`\r\n\r\n**Functional tests** (commits 3-4)\r\n- Tests wallet send via SOCKS5 proxy\r\n- Tests flag persistence across restarts\r\n- Tests error handling when Tor/I2P unavailable\r\n\r\n## Behavior Matrix\r\n\r\n| Scenario | TX Flag | Node Setting | Expected Behavior | Tested |\r\n|----------|---------------|--------------|-------------------|--------|\r\n| New tx | Private | - | Via SOCKS5, flag set | Test 1 ✓ |\r\n| Resubmit | Private | Public | Skip | Test 2 ✓ |\r\n| Resubmit | Public | Private | Skip | Test 3 ✓ |\r\n| Resubmit | Private | Private | Rebroadcast | Test 3 ✓ |\r\n| New tx | Private | - (no Tor) | RPC error | Test 4 ✓ |\r\n| Resubmit | Private | Private (no Tor) | Log error | Test 4 ✓ |\r\n\r\n**Why skip on mode mismatch?** Rebroadcasting via a different method than originally used may allow correlation of transaction to origin, or may indicate origin has `-privatebroadcast` enabled.\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-01-30T08:06:34Z",
      "updated_at": "2026-02-12T10:13:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34457",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1758,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154398787,
      "number": 34226,
      "title": "wallet: test: Relative wallet failed migration cleanup",
      "body": "Prior to https://github.com/bitcoin/bitcoin/pull/34156, an issue existed where if migration of a wallet with a relative pathname failed, the relatively specified path where the legacy wallet is would be deleted. This issue predates #32273, because the relative pathnames get stacked together, e.g. \"../../\", the copy conflict bug that caused migration to abort early instead of getting far enough to attempt clean-up that was fixed in #32273 is avoided.\r\n\r\nThis is a functional test demonstrating that we handle failed migration clean-up correctly for relatively-named wallets. To see the issue, you can backport this test onto 29.x: https://github.com/davidgumberg/bitcoin/tree/2026-01-07-rel-migration-test-backport\r\n\r\nI've also added an absolute path failed migration cleanup test. WRT this and #34156, absolute paths exhibit similar behavior to unnamed wallets. Because of the name-conflict bug prior to #32273 an absolute-path migration would fail no matter what because migration would attempt to copy a file to a destination that already exists. But after #32273, absolute-path migration gets past there, and if it fails for some other reason, the same behavior that's fixed in #34156 occurs where the directory containing the wallet file is deleted.",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2026-01-08T01:01:49Z",
      "updated_at": "2026-02-12T10:00:33Z",
      "merged_at": "2026-01-09T10:02:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34226",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1312,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3150991170,
      "number": 34215,
      "title": "wallettool: fix unnamed createfromdump failure walletsdir deletion",
      "body": "As pointed out in https://github.com/bitcoin/bitcoin/pull/34156#issuecomment-3716728670, it is possible for `createfromdump` to also accidentally delete the entire wallets directory if the wallet name is the empty string and the dumpfile contains a checksum error.\r\n\r\nThis is also fixed by removing the files created by only removing the directory for named wallets, and avoiding the use of `fs::remove_all`.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-07T00:15:45Z",
      "updated_at": "2026-02-12T09:58:30Z",
      "merged_at": "2026-01-07T14:32:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34215",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3237671040,
      "number": 34486,
      "title": "net: Reduce local network activity when networkactive=0",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/34190\r\n\r\nWhen `networkactive=0` is set, NAT-PMP port mapping and Tor **control connections**\r\nstill run in the background, mapping ports and logging retry attempts despite\r\nthe node being \"inactive.\"\r\n\r\nThis wires both subsystems to CConnman::SetNetworkActive so they start and stop\r\nwith the network state:\r\n\r\n- mapport: EnableMapPort is injected as a callback via CConnman::Options.\r\n  SetNetworkActive and SetMapPortEnabled both gate on network state.\r\n\r\n- torcontrol: is injected similarly. The callback dispatches onto the tor event loop via \r\n  event_base_once to respect thread ownership. `EVLOOP_NO_EXIT_ON_EMPTY` is \r\n  used to keep the event loop alive without keepalive timers, so the controller starts disconnected and waits for CConnman::Start() to signal.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-02T17:46:47Z",
      "updated_at": "2026-02-12T09:47:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34486",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 873,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3245237633,
      "number": 34502,
      "title": "wallet: remove most asserts of `WALLET_FLAG_DESCRIPTORS` flag",
      "body": "Reasons:\r\n1. Few of the wallet methods are descriptors specific as suggested\r\nby their names, these assertions seems redundant within them.\r\n2. Since the legacy wallet can't be loaded anymore, few of these\r\nassertions are outdated now.\r\n3. Seeing too many of these assertions in the `CWallet` class while\r\nreading the code is cognitively loaded, and after a while becomes\r\nannoying for the reader.\r\n\r\nNote: Such assertions in the migration specific functions have been\r\nleft untouched because they seem necessary there.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "rkrux",
      "created_at": "2026-02-04T10:42:07Z",
      "updated_at": "2026-02-12T09:20:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34502",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2647,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3250214855,
      "number": 34514,
      "title": "refactor: remove unnecessary std::move for trivially copyable types",
      "body": "Inspired by https://github.com/bitcoin/bitcoin/pull/34320#discussion_r2751764873.\r\n\r\n### Problem\r\nA few function signatures in the codebase use rvalue references for trivially copyable types, forcing callers to `std::move()` values where there is no benefit - for trivially copyable types, moving is semantically identical to copying (see https://godbolt.org/z/hdrn17v9b).\r\n\r\nAdditionally, some call sites use `std::move()` on plain enums and primitive types where it is basically just noise.\r\n\r\nNote: `CheckTriviallyCopyableMove` remains `false` - `std::move()` on trivially copyable types is still permitted where it serves as intent documentation (e.g. signaling that a value should not be reused after a call).\r\n\r\n### Fix\r\n* Document why `CheckTriviallyCopyableMove` is kept disabled (to preserve `bugprone-use-after-move` coverage on trivially copyable types where `std::move` signals intent), cherry-picked from #34523\r\n* Change `EmplaceCoinInternalDANGER` to take `const COutPoint&` instead of `COutPoint&&`\r\n* Change logging functions to take `const SourceLocation&` instead of `SourceLocation&&`\r\n* Remove `std::move()` on enum types in RPC constructors and on `bool`/`int` members in `txgraph.cpp`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-02-05T13:27:48Z",
      "updated_at": "2026-02-12T09:07:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34514",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1275,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3251091686,
      "number": 34520,
      "title": "refactor: Add [[nodiscard]] to functions returning bool+mutable ref",
      "body": "Legacy code often used a function signature of the form `bool Get...(const& in, mut& in_out);` to implement a getter that optionally returns a value.\r\n\r\nIn modern code, this can be replaced by `std::optional<_> Get...(const& in);`.\r\n\r\nHowever, some legacy code remains. To ensure that the \"imaginary optional\" is not unwrapped when the getter returns false, add a C++17 `[[nodiscard]]` attribute to all those legacy functions.\r\n\r\nThere were only a few places that ignored the return value. I've fixed them in separate commits.\r\n\r\nThis should be easy to review via `--word-diff-regex=.` and then confirming that the attribute was added to such a getter.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-05T16:58:07Z",
      "updated_at": "2026-02-12T09:02:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34520",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 720,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3273035746,
      "number": 34565,
      "title": "refactor: extract BlockDownloadManager from PeerManagerImpl",
      "body": "### Motivation\r\n\r\n`net_processing.cpp` is the largest file in the codebase (~6200 lines) and `PeerManagerImpl` mixes several largely independent subsystems into a single class: transaction relay, address gossip, headers sync, compactblocks, and block download. This makes the file difficult to review, test in isolation, and reason about lock ordering.\r\n\r\n #30110 successfully extracted transaction download logic into `TxDownloadManager`. This PR applies the same approach to block download, continuing the incremental decomposition of `PeerManagerImpl`.\r\n \r\n### What this PR does\r\n\r\nExtract all block download state and scheduling logic into a new `BlockDownloadManager` module:\r\n\r\n**Global state moved** (from `PeerManagerImpl`): `mapBlocksInFlight`, `mapBlockSource`, `nSyncStarted`, `m_block_stalling_timeout`, `m_last_tip_update`, `m_num_preferred_download_peers`, `m_peers_downloading_from`.\r\n\r\n**Per-peer state moved** (from `CNodeState`): `pindexBestKnownBlock`, `hashLastUnknownBlock`, `pindexLastCommonBlock`, `pindexBestHeaderSent`, `fSyncStarted`, `vBlocksInFlight`, `m_downloading_since`, `m_stalling_since`, `fPreferredDownload`.\r\n\r\n**Methods moved** (from `PeerManagerImpl`): `FindNextBlocksToDownload`, `TryDownloadingHistoricalBlocks`, `ProcessBlockAvailability`, `UpdateBlockAvailability`, `BlockRequested`, `RemoveBlockRequest`, `IsBlockRequested`, `IsBlockRequestedFromOutbound`, `TipMayBeStale`.\r\n\r\n### The result:\r\n* `net_processing.cpp` shrinks from 6193 to 5751 lines (−442 net)\r\n* `CNodeState` loses 10 fields, retaining only compact block relay and chain sync timeout state\r\n* Block download logic becomes unit-testable in isolation (8 test cases added)\r\n\r\n### Design\r\n\r\nFollows the `TxDownloadManager` pimpl pattern:\r\n* `blockdownloadman.h` — public interface\r\n* `blockdownloadman_impl.h` — implementation class with per-peer state\r\n* `blockdownloadman_impl.cpp` — implementation\r\n\r\n Unlike `TxDownloadManager`, no new mutex is introduced. Block download is inherently tied to chain state through `CBlockIndex*` pointers, so `cs_main` remains the synchronizing lock. The extraction is for code organization and testability, not lock granularity.\r\n \r\n ### Commits\r\n\r\n1. **Add BlockDownloadManager class with pimpl skeleton**: all new module files, no call sites changed\r\n2. **Add unit tests**: exercises the module in isolation\r\n3. **Migrate call sites**: ~150 call sites in `net_processing.cpp` rewired through `m_blockdownloadman`, pure mechanical replacement",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-02-11T18:54:52Z",
      "updated_at": "2026-02-12T06:49:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34565",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2548,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2647773300,
      "number": 32895,
      "title": "wallet: Prepare for future upgrades by recording versions of last client to open and decrypt",
      "body": "When a wallet is automatically upgraded, we always do so in a way that allows the user to load their wallet in an older version. When the user loads their wallet into an upgraded version again, the wallet may not perform the automatic upgrade and end up with upgraded and non-upgraded material in the wallet.\r\n\r\nIf we write some information about the last client to open the wallet, we would be able to detect these upgrade-downgrade-upgrade situations and perform another upgrade if so. However, in order for this to work, we need to have implemented writing such information into versions prior to the ones which introduce new automatic upgrades.\r\n\r\nWe are already writing the CLIENT_VERSION into all wallets in a \"version\" record, although this record is not updated in the same way across all previous versions. Since v24.0, we are always updating the record when the client version differs, but prior to that, the record would only be updated when the client version is newer. Even so, we can use this record to store the last client version.\r\n\r\nThe first commit decouples the written client version from the node version. This aids in development of new features. The version is entirely decoupled from previous versions by requiring all versions to have bit 30 set, and the initial version being `0 | (1 << 30)`. The versions just need to be at least 299900, and forcing bit 30 to be set was an easy way to achieve this.\r\n\r\nHowever, using version numbers is not as flexible as feature flags, so the second commit introduces the concept of Wallet Client Features. These flags are distinct from the existing Wallet Feature Flags since they are conceptually different. These are written in a separate record, and the wallet client version is incremented to `(1 << 0) | (1 << 30)`.\r\n\r\nLastly, since some upgrades may need private keys and can only occur after the wallet is decrypted, the third commit also adds a last decrypted features flags record to record the features of the last client to decrypt the wallet.\r\n\r\nThe result is that we will now be able to detect a downgrade down to v24.0 and be able to implement in parallel multiple features that require automatic upgrades.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-07T20:13:08Z",
      "updated_at": "2026-02-11T23:43:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32895",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2668970573,
      "number": 32985,
      "title": "wallet: Always rewrite tx records during migration",
      "body": "Since loading a wallet may change some parts of tx records (e.g. adding nOrderPos), we should rewrite the records instead of copying them so that the automatic upgrade does not need to be performed again when the wallet is loaded.\r\n\r\nThis is useful for future PRs I'm working on where we need to be sure about what data exists in a tx record in descriptor wallets.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-16T00:01:46Z",
      "updated_at": "2026-02-11T22:25:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32985",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 415,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1588144092,
      "number": 28802,
      "title": "ArgsManager: support command-specific options",
      "body": "Adds the ability to link particular options to one or more (`OptionsCategory::COMMANDS`) commands, and uses this feature\r\nin `bitcoin-wallet`. Separates out the help information for these command-specific options (duplicating it if an option applies to multiple commands), and provides a function for checking at runtime if some options have been specified by the user that only apply to other commands.\r\n\r\n#### Motivation\r\n\r\nCurrently, `ArgsManager` supports commands like `bitcoin-wallet dump` but while some of the options are command-specific (like `-dumpfile`), `ArgsManager` itself doesn't know that.  As a result, `-dumpfile` is listed in the global help rather than under the relevant commands, and if you use `-dumpfile` with a different command that doesn't support it, `ArgsManager` cannot automatically report that as an error, resulting in the commands that don't support the option having to have error-handling specific to all the options they don't support.\r\n\r\n#### Changes\r\n\r\nHelp output moves command-specific options under their associated commands:\r\n\r\nBefore:\r\n\r\n```\r\nOptions:\r\n  -dumpfile=<file name>\r\n       When used with 'dump', writes out the records to this file. When used\r\n       with 'createfromdump', loads the records into a new wallet.\r\n  ...\r\n\r\nCommands:\r\n  createfromdump\r\n       Create new wallet file from dumped records\r\n\r\n  dump\r\n       Print out all of the wallet key-value records\r\n```\r\n\r\nAfter:\r\n\r\n```\r\nCommands:\r\n  createfromdump\r\n       Create new wallet file from dumped records\r\n\r\n       -dumpfile=<file name>\r\n            When used with 'dump', writes out the records to this file. When\r\n            used with 'createfromdump', loads the records into a new wallet.\r\n\r\n  dump\r\n       Print out all of the wallet key-value records\r\n\r\n       -dumpfile=<file name>\r\n            When used with 'dump', writes out the records to this file. When\r\n            used with 'createfromdump', loads the records into a new wallet.\r\n```\r\n\r\nError messages are now generated automatically by `ArgsManager` rather than ad-hoc wallet code for each option:\r\n\r\nBefore:\r\n```c++\r\n    if (args.IsArgSet(\"-dumpfile\") && command != \"dump\" && command != \"createfromdump\") {\r\n        tfm::format(std::cerr, \"The -dumpfile option can only be used with the \\\"dump\\\" and \\\"createfromdump\\\" commands.\\n\");\r\n        return false;\r\n    }\r\n```\r\n\r\nAfter:\r\n```c++\r\n    std::vector<std::string> details;\r\n    if (!args.CheckCommandOptions(command, &details)) {\r\n        tfm::format(std::cerr, \"Error: Invalid arguments provided:\\n%s\\n\", util::MakeUnorderedList(details));\r\n        return false;\r\n    }\r\n```\r\n\r\n#### Limitations\r\n\r\n- If an option applies to multiple commands, it shares the same help text. There's no way to provide per-command descriptions.\r\n- Option parsing rules are unchanged — options still cannot appear after the command.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2023-11-06T09:00:47Z",
      "updated_at": "2026-02-11T19:19:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28802",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2897,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2627187986,
      "number": 32828,
      "title": "build, docs: Fix Boost-related issues on NetBSD",
      "body": "The recently merged https://github.com/bitcoin/bitcoin/pull/32667 broke builds on NetBSD due to the following issues:\r\n\r\n1. The `boost-headers` package does not provide CMake configuration files now required since https://github.com/bitcoin/bitcoin/pull/32667.\r\n\r\n   The first commit updates the Build Guide to recommend using the `boost` package instead.\r\n\r\n2. The CMake configuration file provided by the `boost` package is [broken](https://github.com/NetBSD/pkgsrc/issues/167).\r\n\r\n   The second commit adds a workaround for this issue.\r\n\r\nUpstream issues:\r\n- https://github.com/NetBSD/pkgsrc/issues/167\r\n- https://github.com/NetBSD/pkgsrc/issues/168\r\n\r\nSuccessful CI job: https://github.com/hebasto/bitcoin-core-nightly/actions/runs/15958818914/job/45008576879.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-06-29T19:05:45Z",
      "updated_at": "2026-02-11T19:04:09Z",
      "merged_at": "2025-07-02T12:29:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32828",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 812,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1216590444,
      "number": 26966,
      "title": "index: initial sync speedup, parallelize process",
      "body": "Work is currently happening on #33689.\r\n\r\n------------------------------------------------\r\n\r\nThe current procedure for building the block filter index involves processing filters one at a time;\r\nReading blocks, undo data, and previous headers from disk sequentially.\r\n\r\nThis PR introduces a new mechanism to perform the work concurrently. Dividing the filters\r\ngeneration workload among a pool of workers that can be configured by the user,\r\nsignificantly increasing the speed of the index construction process.\r\n\r\nThe same concurrent processing model has been applied to the transactions index as well.\r\n\r\nThe newly introduced init flag `-indexworkers=<n>` enables the concurrent sync\r\nbehavior.\r\nWhere \"n\" is the number of worker threads that will be spawned at startup to create ranges\r\nof block filters during the initial sync process. Destroying the workers pool once the\r\ninitial sync completes.\r\nNote: by default, the parallelized sync process is not enabled.\r\n\r\nNow the juicy part:\r\nIn my computer, with the node in debug mode and on IBD, with `-indexworkers=4`, the\r\nblock filter index generation took less than an hour. While, in master, the sync took more than 7 hours.\r\n\r\nImportant Note:\r\nAs the access to the block data on disk is protected by `cs_main`, this new feature runs substantially\r\nfaster when the node is not in IBD.\r\n\r\n#### Testing Notes:\r\n\r\n1. Sync your node without any index.\r\n2. Restart the node with one of the indexes (`-blockfilterindex` or `-txindex`) and `-connect=0` (to sync only the index, without running the net/validation threads. Since threads won't be competing for `cs_main`, this will give you a more accurate result).\r\n\r\n   You’ll see a \"[index name] is enabled at height [height]\" log entry once it finishes. Then it’s just a matter of subtracting the index startup time from the \"index synced\" log time.\r\n\r\n  Keep in mind that threads are shared among all indexes you start. So if you run both indexes at the same time, your benchmark results cannot be compared against single-index runs.\r\n\r\n#### Fuzz Test Coverage Report\r\nCoverage diff for the fuzz test can be found on https://brunoerg.xyz/bitcoin-core-coverage/26966/coverage_report/",
      "state": "open",
      "user": "furszy",
      "created_at": "2023-01-25T13:36:23Z",
      "updated_at": "2026-02-11T18:22:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26966",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2234,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3210441228,
      "number": 34411,
      "title": "[POC] Full Libevent removal",
      "body": "This builds on all the work being done by pinheadmz and fjahr (#32061, #34342, #34158), to demo a libevent-less bitcoind.\r\n\r\nOne thing we could decide to change, or not, is the `libevent` logging catergory. Other than that, any remaining references to libevent, should be in documentation/code comments.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-26T12:35:26Z",
      "updated_at": "2026-02-11T18:01:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34411",
      "labels": [
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3114050841,
      "number": 34103,
      "title": "cmake: Add missed `Boost::headers`",
      "body": "On Fedora 43:\r\n```\r\n$ gmake -C depends NO_LIBEVENT=1 NO_QT=1 NO_ZMQ=1 NO_WALLET=1 NO_USDT=1 NO_IPC=1\r\n$ cmake -B build -DBoost_ROOT=depends/x86_64-pc-linux-gnu --preset dev-mode\r\n<snip>\r\n[363/1092] Building CXX object src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o\r\nFAILED: [code=1] src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o \r\n/usr/bin/ccache /usr/lib64/ccache/c++ -DKJ_USE_FIBERS -I/home/hebasto/dev/bitcoin/build/src -I/home/hebasto/dev/bitcoin/src -I/home/hebasto/dev/bitcoin/build/src/ipc -I/home/hebasto/dev/bitcoin/src/ipc/libmultiprocess/include -I/home/hebasto/dev/bitcoin/build/src/ipc/libmultiprocess/include -I/home/hebasto/dev/bitcoin/src/univalue/include -O2 -g -std=c++20 -fPIC -pthread -fno-extended-identifiers -fdebug-prefix-map=/home/hebasto/dev/bitcoin/src=. -fmacro-prefix-map=/home/hebasto/dev/bitcoin/src=. -fstack-reuse=none -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wleading-whitespace=spaces -Wtrailing-whitespace=any -Wno-unused-parameter -MD -MT src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o -MF src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o.d -o src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/mining.cpp.o -c /home/hebasto/dev/bitcoin/src/ipc/capnp/mining.cpp \r\nIn file included from /home/hebasto/dev/bitcoin/src/node/miner.h:13,\r\n                 from /home/hebasto/dev/bitcoin/src/ipc/capnp/mining-types.h:12,\r\n                 from /home/hebasto/dev/bitcoin/src/ipc/capnp/mining.cpp:5:\r\n/home/hebasto/dev/bitcoin/src/txmempool.h:28:10: fatal error: boost/multi_index/hashed_index.hpp: No such file or directory\r\n   28 | #include <boost/multi_index/hashed_index.hpp>\r\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n<snip>\r\n```\r\n\r\nThis PR fixes the issue.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-18T14:44:31Z",
      "updated_at": "2026-02-11T17:46:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34103",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2102,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3241050380,
      "number": 34491,
      "title": "ci: add FreeBSD Clang cross job",
      "body": "Alternative to #33562, which was adding a native FreeBSD job; however that had issues with permissions/caching, as well as potential determinism issues. This adds a FreeBSD cross job using Linux and Clang.\r\n\r\nThis is using FreeBSD 14,3, which avoids the issue in #34093.\r\n\r\nWould close #33438. The same changes here could also be used to produce FreeBSD binaries out of Guix.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-03T12:28:36Z",
      "updated_at": "2026-02-11T17:45:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34491",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3164120126,
      "number": 34257,
      "title": "txgraph: deterministic optimal transaction order",
      "body": "Part of #30289.\r\n\r\nTxGraph's fundamental responsibility is deciding the order of transactions in the mempool. It relies on the `cluster_linearize.h` code to optimize it, but there can and often will be many different orderings that are essentially equivalent from a quality perspective, so we have to pick one. At a high level, the solution will involve one or more of:\r\n* Deciding based on **internal identifiers** (`Cluster::m_sequence`, `DepGraphIndex`). This is very simple, but risks leaking information about transaction receive order.\r\n* Deciding **randomly**, which is private, but may interfere with relay expectations, block propagation, and ability to monitor network behavior.\r\n* Deciding **based on txid**, which is private and deterministic, but risks incentivizing grinding to get an edge (though we haven't really seen such behavior).\r\n* Deciding **based on size** (e.g. prefer smaller transactions), which is somewhat related to quality, but not unconditionally (depending on mempool layout, the ideal ordering might call for smaller transactions first, last, or anywhere in between). It's also not a strong ordering as there can be many identically-sized transactions. However, if it were to encourage grinding behavior, incentivizing smaller transactions is probably not a bad thing.\r\n\r\nAs of #32545, the current behavior is primarily picking randomly, though inconsistently, as some code paths also use internal identifiers and size. #33335 sought to change it to use random (preferring size in a few places), with the downsides listed above.\r\n\r\nThis PR is an alternative to that, which changes the order to tie-break based on size everywhere possible, and use lowest-txid-first as final fallback. This is fully deterministic: for any given set of mempool transactions, if all linearized optimally, the transaction order exposed by TxGraph is deterministic.\r\n\r\nThe transactions within a chunk are sorted according to:\r\n1. `PostLinearize` (which improves sub-chunk order), using an initial linearization created using the rules 2-5 below.\r\n2. Topology (parents before children).\r\n3. Individual transaction feerate (high to low)\r\n4. Individual transaction weight (small to large)\r\n5. Txid (low to high txid)\r\n\r\nThe chunks within a cluster are sorted according to:\r\n1. Topology (chunks after their dependencies)\r\n2. Chunk feerate (high to low)\r\n3. Chunk weight (small to large)\r\n4. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe chunks across clusters are sorted according to:\r\n1. Feerate (high to low)\r\n2. Equal-feerate-chunk-prefix weight (small to large)\r\n3. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe equal-feerate-chunk-prefix weight of a chunk C is defined as the sum of the weights of all chunks in the same cluster as C, with the same feerate as C, up to and including C itself, in linearization order (but excluding such chunks that appear after C). This is a well-defined approximation of sorting chunks from small to large across clusters, while remaining consistent with intra-cluster linearization order.\r\n",
      "state": "closed",
      "user": "sipa",
      "created_at": "2026-01-11T23:56:09Z",
      "updated_at": "2026-02-11T17:40:49Z",
      "merged_at": "2026-02-11T17:40:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34257",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3105,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3267434865,
      "number": 34549,
      "title": "net: reduce log level for PCP/NAT-PMP NOT_AUTHORIZED failures",
      "body": "Cherry-picks (and tweaks) a commit from #34117 which the ANAVHEOBA\r\ndid not follow up with when changes were requested.\r\n\r\nThe tweak here is to log once at `LogWarning`, so that users have a chance\r\nto spot misconfiguration.\r\n\r\n----\r\n\r\nUsers running on home networks with routers that don't support PCP (Port\r\nControl Protocol) or NAT-PMP port mapping receive frequent warning-level\r\nlog messages every few minutes:\r\n\r\n  \"pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\"\r\n\r\nThis is expected behavior for many consumer routers that have PCP\r\ndisabled by default, not an actionable error.\r\n\r\nAdd explicit constants for the NOT_AUTHORIZED result code (value 2)\r\nfor both NAT-PMP and PCP protocols. Log the first NOT_AUTHORIZED\r\nfailure at warning level for visibility, then downgrade subsequent\r\noccurrences to LogDebug to avoid log noise. Other failure types\r\ncontinue to warn unconditionally.\r\n\r\nFixes #34114\r\n",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-10T14:12:45Z",
      "updated_at": "2026-02-11T16:56:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34549",
      "labels": [
        "P2P",
        "Needs backport (30.x)"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 979,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3154093541,
      "number": 34223,
      "title": "[28.x] Backport wallets directory deletion fixes",
      "body": "Backports #34222 to 28.x",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-07T22:03:05Z",
      "updated_at": "2026-02-11T16:19:37Z",
      "merged_at": "2026-02-11T16:19:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34223",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 73,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2543342215,
      "number": 32617,
      "title": "[Draft/POC] Add secp256k1-based HPKE (Hybrid Public Key Encryption) For Payjoin v2",
      "body": "This PR introduces an implementation of Hybrid Public Key Encryption (HPKE) using a secp256k1-based Diffie-Hellman KEM (per RFC 9180 and \"secp256k1-based DHKEM for HPKE\" specification). It provides the core cryptographic component needed to enable the Payjoin v2 protocol.\r\n\r\nThis is an exploratory PR intended to kickstart discussion on adding Payjoin v2 support to Bitcoin Core – feedback and reviews are very welcome.\r\n\r\nPayjoin v2 makes use of a protocol called Oblivious HTTP (OHTTP) to strip client-identifying metadata from the request. This protocol use a binary-encoded HTTP message encapsulated through HPKE.\r\n\r\nThe core implementation is contained in the new files `src/dhkem_secp256k1.h` and `src/dhkem_secp256k1.cpp`:\r\n\r\n* Full HPKE Modes: All four HPKE modes are supported – `Base`, `PSK`, `Auth`, and `AuthPSK`.\r\n* Secp256k1 DHKEM: Uses secp256k1 for Diffie-Hellman key exchange. The `Encap()` and `Decap()` functions perform the base mode KEM (ephemeral ECDH using the receiver’s public key), while `AuthEncap()` and `AuthDecap()` extend this to authenticated mode (including the sender’s static key in the shared secret derivation). Internally, the shared secret is derived as specified by HPKE using HKDF (SHA256) extraction and expansion.\r\n* Key Schedule & Nonce Derivation: After KEM, the implementation runs the HPKE key schedule to derive the `encryption key`, `base nonce`, and `exporter secret`. It follows RFC 9180 §7.1, hashing the `info` and `psk_id` contexts and deriving the AEAD key and nonce. Per-message nonces are computed by XOR-ing the base nonce with a message sequence number as specified in RFC 9180 §5.2.\r\n* AEAD Encryption (ChaCha20-Poly1305): The HPKE context uses `ChaCha20-Poly1305` as the authenticated encryption scheme. The code provides `Seal()` and `Open()` functions to encrypt and decrypt data using the derived context key and a given nonce. It uses Bitcoin Core’s existing ChaCha20Poly1305 implementation.\r\n\r\nThe test file validates all the functions mentioned above: Encapsulation/Decapsulation, Encryption/Decryption, Nonce and Key Schedule Logic. This uses the PDK (Payjoin Dev Kit) test vectors. The tests also show how to use the HPKE functions.\r\n\r\nThis implementation only uses HKDF-SHA256 as Key Derivation Functions and ChaCha20-Poly1305 as AEAD, since these already exist in the Bitcoin Core codebase. It does not support other KDFs (such as HKDF-SHA384 and HKDF-SHA512) or other AEADs (such as AES-128-GCM and AES-256-GCM).\r\n\r\nTo run the tests:\r\n`build/bin/test_bitcoin --log_level=all --run_test=dhkem_secp256k1_tests`",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-05-26T08:04:21Z",
      "updated_at": "2026-02-11T15:47:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32617",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2664,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2902028046,
      "number": 33592,
      "title": "contrib: remove deprecated --deep signing from macdeployqtplus",
      "body": "Removed the deprecated `--deep` flag from codesign in macdeployqtplus and replaced it with an explicit recursive signing process for all binaries, frameworks, and plugins.\r\n\r\nFixes #32486",
      "state": "open",
      "user": "amishhaa",
      "created_at": "2025-10-09T21:11:13Z",
      "updated_at": "2026-02-11T14:46:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33592",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 250,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3269124223,
      "number": 34554,
      "title": "build: avoid exporting secp256k1 symbols",
      "body": "Take advantage of the [new secp256k1 option to avoid visibility attributes](https://github.com/bitcoin-core/secp256k1/pull/1696) on API functions.\r\n\r\nWhile most users of a shared libsecp always want API functions exported so that they can actually be linked against, we always build it statically. When that static lib is linked into a (static or shared) libbitcoinkernel, by default its symbols end up exported there as well.\r\n\r\nAs libsecp is an implementation detail of the kernel (and any future Core lib), its symbols should never be exported.\r\n\r\n[This was the intended use for the above PR](https://github.com/bitcoin-core/secp256k1/pull/1696#issuecomment-3028838988), looks like we just forgot to follow-up and actually hook it up.\r\n\r\nThis is most easily tested by building with `-DBUILD_KERNEL_LIB=ON -DBUILD_SHARED_LIBS=ON` (with or without `-DREDUCE_EXPORTS=ON`) and inspecting via:\r\n```bash\r\nnm -CD lib/libbitcoinkernel.so | grep secp\r\n```\r\n\r\nBefore this change, secp's symbols will show up there. After, they should be absent.\r\n\r\nThis should finally solve secp symbol visibility once and for all :)",
      "state": "closed",
      "user": "theuni",
      "created_at": "2026-02-10T21:29:37Z",
      "updated_at": "2026-02-11T13:59:50Z",
      "merged_at": "2026-02-11T13:53:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34554",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1150,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3271560786,
      "number": 34558,
      "title": "Fix overflow handling for private key loading",
      "body": "This pull request makes a small but important change to the handling of invalid private keys in the `secp256k1_ellswift_xdh` function. The update ensures that the overflow flag properly reflects both cases: when the scalar is invalid due to overflow and when it is zero.\r\n\r\n* Improved private key validation logic: The overflow check now combines both overflow and zero checks using a bitwise OR, ensuring that invalid keys are consistently replaced with a safe default. (`src/secp256k1/src/modules/ellswift/main_impl.h`, [src/secp256k1/src/modules/ellswift/main_impl.hL567-R567](diffhunk://#diff-2857d428b5ca14b0aa07242782c12e45fa67c765e9f19d0720be35adfe1d24a1L567-R567))",
      "state": "closed",
      "user": "gzJx0DuTRHytnHe7P5RmMbPf3wKy2BztweVGXTf",
      "created_at": "2026-02-11T13:04:52Z",
      "updated_at": "2026-02-11T13:38:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34558",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 718,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2368554207,
      "number": 31974,
      "title": "Drop testnet3",
      "body": "Testnet3 was deprecated in v28 with the introduction of testnet4. It will be dropped in v30 _or later_, please discuss in #31975.\r\n\r\nThere is no more `[test]` network section. The user is expected to set testnet4 explicitly, which should make future rotation of testnets easier.\r\n\r\nIf a `[test]` or `[testnet3]` section is present in `bitcoin.conf` a warning is issued:\r\n\r\n```\r\nWarning: .../bitcoin.conf:18 Section [test] is not recognized.\r\n```\r\n\r\nStarting with `-testnet3` will be greeted with an error message:\r\n\r\n```\r\nError: Testnet3 was dropped in version 30.0. Consider using '-testnet4' instead.\r\n```\r\n\r\nThis also prevents a fallback to mainnet.\r\n\r\nStarting with `-test` was already not possible with testnet3.\r\n\r\nReview hints:\r\n- make a (Windows) Guix build and test the (un)installer\r\n\r\nGuix hashes:\r\n\r\n```\r\n(todo)\r\n```",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-03T16:22:11Z",
      "updated_at": "2026-02-11T13:22:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31974",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 842,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3250522410,
      "number": 34515,
      "title": "doc: Extend Windows build  msvc doc to use winget for VS 2022 install",
      "body": "This PR adds a simple copy and paste-able instruction to meet the requirements to build on Windows (sans git). \r\n\r\nWith the introduction of Visual Studio 2026, Microsoft made is not so easy to find the community edition of visual studio 2022 on it's download page. The professional and Enterprise 2022 versions are behind a login and need a license / microsoft account. The 2022 community edition version is stil available to install via winget. \r\nThis PR extends the documentation to include the relevant winget command. \r\n\r\nAlso, moving to Visual Studio 2026 (Community edition) is currently not an option, it ships with a [unusable vcpkg version](https://developercommunity.visualstudio.com/t/10998815).",
      "state": "closed",
      "user": "janb84",
      "created_at": "2026-02-05T14:42:08Z",
      "updated_at": "2026-02-11T12:24:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34515",
      "labels": [
        "Docs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 776,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3003195750,
      "number": 33861,
      "title": "build: Bump VS minimum supported version to 18.3",
      "body": "The new [VS 18.0](https://learn.microsoft.com/en-us/visualstudio/releases/2026/release-notes) release includes numerous bug fixes.\r\n\r\nBumped to v18.3.0 where [this](https://github.com/microsoft/vcpkg/issues/22074) bug in the builtin vcpkg is [fixed](https://github.com/microsoft/vcpkg/issues/22074#issuecomment-3880320585).",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-12T15:09:54Z",
      "updated_at": "2026-02-11T11:25:24Z",
      "merged_at": "2026-02-11T11:20:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33861",
      "labels": [
        "Refactoring",
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 372,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2013322319,
      "number": 30623,
      "title": "test: Fuzz the human-readable part of bech32 as well",
      "body": "Instead of the static \"bc\" human-readable part, it's now randomly generated based on https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki and the extra restrictions in the code:\r\n\r\n> The human-readable part, which is intended to convey the type of data, or anything else that is relevant to the reader. This part MUST contain 1 to 83 US-ASCII characters, with each character having a value in the range [33-126]. HRP validity may be further restricted by specific applications.\r\n\r\nSince `bech32::Encode` rejects uppercase letters, we're actually generating values in the `[33-126] - ['A'-'Z']` range.\r\n\r\nSplit out of https://github.com/bitcoin/bitcoin/pull/30596/files#r1706957219",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-08-10T07:56:51Z",
      "updated_at": "2026-02-11T11:10:52Z",
      "merged_at": "2025-02-11T00:05:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30623",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 743,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2104295782,
      "number": 31022,
      "title": "test: Add mockable steady clock, tests for PCP and NATPMP implementations",
      "body": "Add a NodeSteadyClock, a steady_clock that can be mocked with millisecond precision. Use this in the PCP implementation.\r\n\r\nThen add a mock for a simple scriptable UDP server,, which is used to test various code paths (including successful mappings, timeouts and errors) in the PCP and NATPMP implementations.\r\n\r\nIncludes \"net: Add optional length checking to CService::SetSockAddr\" from #31014 as a prerequisite.",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2024-10-02T20:52:40Z",
      "updated_at": "2026-02-11T11:10:51Z",
      "merged_at": "2025-02-11T19:04:58Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31022",
      "labels": [
        "Tests",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 487,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2263597101,
      "number": 31614,
      "title": "test: expect that files may disappear from /proc/PID/fd/",
      "body": "`get_socket_inodes()` calls `os.listdir()` and then iterates on the results using `os.readlink()`. However a file may disappear from the directory after `os.listdir()` and before `os.readlink()` resulting in a `FileNotFoundError` exception.\r\n\r\nIt is expected that this may happen for `bitcoind` which is running and could open or close files or sockets at any time. Thus ignore the `FileNotFoundError` exception.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-01-07T10:45:33Z",
      "updated_at": "2026-02-11T11:10:50Z",
      "merged_at": "2025-02-10T23:58:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31614",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 469,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2326060978,
      "number": 31834,
      "title": "build: disable bitcoin-node if daemon is not built",
      "body": "When building for fuzzing with multiprocess enabled, we were still trying to build `bitcoin-node`. This PR fixes that, by applying a similar check as for `bitcoin-gui`.\r\n\r\nBefore:\r\n\r\n```\r\ncmake -B build -DBUILD_FOR_FUZZING=ON -DWITH_MULTIPROCESS=ON\r\n\r\n...\r\n\r\nConfigure summary\r\n=================\r\nExecutables:\r\n  bitcoind ............................ OFF\r\n  bitcoin-node (multiprocess) ......... ON\r\n  bitcoin-qt (GUI) .................... OFF\r\n  bitcoin-gui (GUI, multiprocess) ..... OFF\r\n\r\n...\r\n\r\ncmake --build build\r\n\r\n...\r\n\r\n[ 84%] Built target bitcoin-node\r\n```\r\n\r\nAfter:\r\n\r\n```\r\n  bitcoin-node (multiprocess) ......... OFF\r\n```\r\n\r\nAnd no `bitcoin-node` target gets built (not to be confused with `bitcoin_node`).",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-02-10T13:29:31Z",
      "updated_at": "2026-02-11T11:10:49Z",
      "merged_at": "2025-02-11T12:48:36Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31834",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 769,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2327511677,
      "number": 31839,
      "title": "streams: Add stream position validation in BufferedFile::AdvanceStream",
      "body": "Description:\r\nAdd safety check in BufferedFile::AdvanceStream to prevent potential integer overflow when calculating bytes_until_source_pos. This ensures that m_read_pos never exceeds nSrcPos, which could lead to undefined behavior.\r\n\r\nThe change:\r\n- Adds validation before calculating (nSrcPos - m_read_pos)\r\n- Throws std::ios_base::failure if invalid state is detected",
      "state": "closed",
      "user": "crStiv",
      "created_at": "2025-02-11T00:41:30Z",
      "updated_at": "2026-02-11T11:10:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31839",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 441,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2326868162,
      "number": 31837,
      "title": "test: add missing sync to p2p_tx_download.py",
      "body": "If the node hasn't processed the inv from the outbound peer before the mocktime bump, the peer won't be preferred after the other inv timeouts, failing the test . Therefore, add a sync, just  like there is one after the `send_message` calls in the previous lines.\r\n\r\nFixes #31833",
      "state": "closed",
      "user": "mzumsande",
      "created_at": "2025-02-10T18:41:30Z",
      "updated_at": "2026-02-11T11:10:48Z",
      "merged_at": "2025-02-11T08:58:53Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31837",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 324,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3270362139,
      "number": 34555,
      "title": "doc: archive release notes for v29.3",
      "body": "Archive v29.3 release notes.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-02-11T07:11:52Z",
      "updated_at": "2026-02-11T10:39:22Z",
      "merged_at": "2026-02-11T10:39:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34555",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 65,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3263038158,
      "number": 34539,
      "title": "test: Fixup TODO comment in feature_dbcrash.py; remove unnecessary sleep",
      "body": "Fixup some stale comments:\r\n\r\n* The `60 seconds` is outdated. It should say 120 seconds. However, just clarify that there is a timeout.\r\n* The TODO seems to imply that a timeout (failure to restart) can happen. However, I don't think we've seen it happen. So there isn't anything to do right now. Just remove the `TODO`, but keep the advice.\r\n\r\nAlso, remove an unnecessary `time.sleep(1)`. If there is a need for it, a comment should explain why.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-09T14:03:32Z",
      "updated_at": "2026-02-11T10:38:07Z",
      "merged_at": "2026-02-11T09:25:43Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34539",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 519,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3268274939,
      "number": 34551,
      "title": "ci: Extend diff context for clang-format",
      "body": "This PR ensures `clang-format` can properly restore empty lines between header groups that were previously stripped by `fix_includes.py`.\r\n\r\nAddresses [this](https://github.com/bitcoin/bitcoin/pull/34448#issuecomment-3876394168) comment.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-02-10T17:24:33Z",
      "updated_at": "2026-02-11T09:35:28Z",
      "merged_at": "2026-02-11T09:03:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34551",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 278,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3248824084,
      "number": 34508,
      "title": "test: fix intermittent failure in interface_zmq.py",
      "body": "Add retry mechanism to handle race conditions where ZMQ notifications aren't immediately available after blockchain operations, preventing zmq.error.Again exceptions that cause test failures on slower systems.\r\n\r\nFixes #34189\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Hijanhv",
      "created_at": "2026-02-05T06:52:05Z",
      "updated_at": "2026-02-11T08:24:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34508",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2342,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3118113953,
      "number": 34117,
      "title": "net: reduce log level for PCP/NAT-PMP NOT_AUTHORIZED failures",
      "body": "Users running Bitcoin Core on home networks with routers that don't support PCP (Port Control Protocol) or NAT-PMP port mapping receive frequent warning-level log messages every few minutes:\r\n\r\n  \"pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\"\r\n\r\nThis is expected behavior for many consumer routers that have PCP disabled by default, not an actionable error. The repeated warnings create unnecessary log noise.\r\n\r\nThis change:\r\n- Adds explicit constants for NOT_AUTHORIZED result code (value 2) for both NAT-PMP and PCP protocols\r\n- Downgrades NOT_AUTHORIZED failures from LogWarning to LogDebug since this is an expected condition on many networks\r\n- Keeps LogWarning for other failure types that may indicate actual configuration or network issues\r\n\r\nThe NOT_AUTHORIZED message will still be visible when running with -debug=net for users who need to troubleshoot port mapping issues.\r\n\r\nFixes #34114\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "ANAVHEOBA",
      "created_at": "2025-12-19T16:35:45Z",
      "updated_at": "2026-02-11T05:03:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34117",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3040,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3244919791,
      "number": 34500,
      "title": "ci: Print verbose Windows CI build failure",
      "body": "Just like all the other CI configs, the Windows one should print a single and readable build failure at the end.\r\n\r\nAlso, includes a bunch of Windows CI refactors.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-04T09:14:58Z",
      "updated_at": "2026-02-10T19:14:20Z",
      "merged_at": "2026-02-09T19:06:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34500",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 206,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1010047865,
      "number": 25722,
      "title": "refactor: Use util::Result class for wallet loading",
      "body": "<!-- begin based-on -->\n**This is based on #25665 + #26022.** The non-base commits are:\n\n- [`b95a073fe6b` Add temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/b95a073fe6b39cf80af99e8001552d95b67d420a)\n- [`630e0ce7a75` refactor: Use util::Result class in wallet/sqlite](https://github.com/bitcoin/bitcoin/pull/25722/commits/630e0ce7a750441836880725180ac52970d541a0)\n- [`cf041379692` refactor: Use util::Result class in wallet/migrate](https://github.com/bitcoin/bitcoin/pull/25722/commits/cf0413796925d7a17fd3321c25cd40c08440d179)\n- [`30145822730` refactor: Use util::Result class in wallet::MakeDatabase](https://github.com/bitcoin/bitcoin/pull/25722/commits/301458227305e1878ee29df5abc3825baf564cdb)\n- [`a24563e6c48` refactor: Use util::Result class in wallet/dump](https://github.com/bitcoin/bitcoin/pull/25722/commits/a24563e6c48cc72648d2d5e95c2c20cdf8fd1576)\n- [`2ae21b65007` refactor: Use util::Result class in wallet/wallettool](https://github.com/bitcoin/bitcoin/pull/25722/commits/2ae21b65007fc62684350a800117946182d33b7f)\n- [`b5c51c10e85` refactor: Use util::Result class in wallet/wallet](https://github.com/bitcoin/bitcoin/pull/25722/commits/b5c51c10e85035c74b0bce271ced7980adbec74c)\n- [`b2657763a84` refactor: Use util::Result class in wallet/load](https://github.com/bitcoin/bitcoin/pull/25722/commits/b2657763a8496b49de43a27db2cf1ebbbb792735)\n- [`79d70c031a0` refactor: Use util::Result class in wallet/rpc](https://github.com/bitcoin/bitcoin/pull/25722/commits/79d70c031a0676573c87c8d0dfef01b0bf1aeffa)\n- [`6b102ca2962` refactor: Use util::Result class in wallet/interfaces](https://github.com/bitcoin/bitcoin/pull/25722/commits/6b102ca2962acfc4bc6079f2a4c941b4ec09adec)\n- [`ac0f23c62da` refactor: Use util::Result class in wallet/test](https://github.com/bitcoin/bitcoin/pull/25722/commits/ac0f23c62da1d81133dd7d184a4fb7846b7449d9)\n- [`ca1ff5639b8` Drop temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/ca1ff5639b8bb592ce596af72bbfa8dfe742374d)\n- [`ed99efe7df9` scripted-diff: replace wallet DatabaseStatus with DatabaseError](https://github.com/bitcoin/bitcoin/pull/25722/commits/ed99efe7df920ddeb19b69d07ea6fc3920f51853)\n- [`8253c7087f2` iwyu fix for base 25665](https://github.com/bitcoin/bitcoin/pull/25722/commits/8253c7087f2cd7f5d0e3e35f39120e29557be846)<!-- end -->\n\n---\n\nWallet loading functions up and down the stack have lots of error and warning parameters, and return error information in different ways. This PR makes them uniformly return `util::Result`, without changing behavior.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-27T19:26:58Z",
      "updated_at": "2026-02-10T17:41:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25722",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2693,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2712708880,
      "number": 33112,
      "title": "wallet: relax external_signer flag constraints",
      "body": "The `external_signer` indicates that an external signer device may be called via [HWI](https://github.com/bitcoin-core/HWI) or [equivalent](https://github.com/bitcoin/bitcoin/blob/master/doc/external-signer.md#signer-api) application.\r\n\r\nWhen it was initially introduced some additional constraints were placed on wallets with this flag: it had to be a descriptor wallet and watch-only. Also the flag could not be added or removed later.\r\n\r\nThe constraints aren't a problem for the main supported and documented use case of connecting a single hardware wallet and using it just like a normal single sig Bitcoin Core wallet.\r\n\r\nBut they get in the way of more advanced constructions, which are becoming increasingly practical especially once MuSig2 support lands with #29675. See https://github.com/Sjors/bitcoin/pull/91 and https://github.com/bitcoin-core/HWI/pull/794 for a collection of changes on top of that which facilitate MuSig2 with a hardware wallet. And see #24861.\r\n\r\nThis pull requests drops the following constraints:\r\n\r\n- `disable_private_keys` is no longer mandatory (but still default)\r\n- `external_signer` flag is now mutable\r\n\r\nAdditionally it does the following:\r\n\r\n- make the `blank` option for `createwallet` consistent with regular wallets by _not_ importing keys from the connected signer\r\n- avoid going through `createTransaction` for external signers (otherwise the GUI breaks)\r\n- update `external-signer.md` mainly to use named arguments and point out a GUI setting\r\n\r\n\r\nThis should no noticeable effect on the default single sig use case described above.\r\n\r\n \r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-08-01T10:11:18Z",
      "updated_at": "2026-02-10T17:31:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33112",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3210251998,
      "number": 34407,
      "title": "guix: use osslsigncode 2.12",
      "body": "Update osslsigncode used in Guix to [2.12](https://github.com/mtrojnar/osslsigncode/releases/tag/2.12).\r\n\r\nAdd zlib as an input, its a hard dependency since\r\nhttps://github.com/mtrojnar/osslsigncode/pull/303.\r\n\r\nAdd `python-cryptography` and `python-minimal` for running the tests.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-26T11:28:30Z",
      "updated_at": "2026-02-10T17:22:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34407",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 309,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2882266509,
      "number": 33522,
      "title": "guix: use LIEF 0.17.3",
      "body": "Update LIEF in Guix & the CI to 0.17.3: https://lief.re/doc/stable/changelog.html#january-24th-2026",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-02T15:57:55Z",
      "updated_at": "2026-02-10T17:22:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33522",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 121,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2663459083,
      "number": 32966,
      "title": "Silent Payments: Receiving",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. Status and tracking for the project is managed in https://github.com/bitcoin/bitcoin/issues/28536\r\nThis PR is based on https://github.com/bitcoin/bitcoin/pull/28201 and will remain in draft until https://github.com/bitcoin/bitcoin/pull/28201 is merged.\r\n\r\nThis PR:\r\n- Adds a Silent Payments descriptor implemenation\r\n- Adds a `SilentPaymentsDescriptorScriptPubKeyMan` Impl that is a subclass of `DescriptorScriptPubKeyMan`\r\n- Implements Silent Payments scanning for the wallet\r\n- Updates sending logic to use `silent-payments` destination for change when sending to `silent-payments` destination\r\n- Adds unit and functional tests for silent payments-related functionality\r\n\r\n**Follow-ups**\r\n- Silent Payments Label functionality is incomplete in this PR and will be added as a follow-up PR.\r\n",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-07-14T08:30:35Z",
      "updated_at": "2026-02-10T15:49:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32966",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 885,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3256734552,
      "number": 34530,
      "title": "wallet: guard against negative bump fee discount from mempool race",
      "body": "## Human View\n\nThe bump fee discount (`summed_bump_fees - combined_bump_fee`) can become negative when the mempool state changes between the two MiniMiner calculations. Each MiniMiner only holds `cs_main` for the duration of its constructor, so fee deltas, new transactions, or evictions in between cause the values to diverge.\n\nWhen the combined fee exceeds the sum of individual fees, the difference is negative. The truthiness check `if (bump_fee_overestimate)` passes (non-zero), and `SetBumpFeeDiscount` hits `assert(discount >= 0)`, crashing the node.\n\n**Fix:** Change the condition from `if (bump_fee_overestimate)` to `if (bump_fee_overestimate > 0)` so negative overestimates are simply skipped. The discount is a waste-metric optimisation, not a correctness requirement.\n\nFixes #34232\n\n---\n\n## AI View (DCCE Protocol v1.0)\n\n### Metadata\n- **Generator**: Claude (Anthropic) via Cursor IDE\n- **Methodology**: AI-assisted development with human oversight and review\n\n### AI Contribution Summary\n- Solution design and implementation\n\n### Verification Steps Performed\n1. Reproduced the reported issue\n2. Analyzed source code to identify root cause\n3. Implemented and tested the fix\n\n### Human Review Guidance\n- Review the implementation for correctness and completeness\n- Verify test coverage matches the described scenarios\n\nMade with M7 [Cursor](https://cursor.com)\n",
      "state": "closed",
      "user": "DukeDeSouth",
      "created_at": "2026-02-07T01:48:26Z",
      "updated_at": "2026-02-10T14:58:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34530",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1440,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3233731791,
      "number": 34471,
      "title": "refactor: Use aliasing shared_ptr in Sock::Wait",
      "body": "Currently, a no-op lambda is used as the deleter for the temporary shared pointer helper in `Sock::Wait`. This is perfectly fine, but has a few style issues:\r\n\r\n* The lambda needs to be allocated on the heap\r\n* It triggers a false-positive upstream GCC-16-trunk bug: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=123912\r\n\r\nFix all issues by just using an aliasing shared pointer, which points to `this`, but is otherwise empty (sits on the stack without any heap allocations).",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-01T18:37:53Z",
      "updated_at": "2026-02-10T13:56:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34471",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 523,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3264278635,
      "number": 34541,
      "title": "doc: Add documentation explaining release artifacts",
      "body": "Add a document (`doc/release-artifacts.md`) describing the different\r\nfile types distributed on the Bitcoin Core download page and in\r\nrelease torrents.\r\n\r\nCovers: release binaries, debug symbols, unsigned builds, codesigning\r\narchives, source tarball, verification files (SHA256SUMS, .asc, .ots),\r\nand supported platforms.\r\n\r\nThe focus is on the practical utility of each artifact type — when and\r\nwhy a user or developer would use each one.\r\n\r\nCloses #33316",
      "state": "closed",
      "user": "PauloAAlmeida",
      "created_at": "2026-02-09T20:27:14Z",
      "updated_at": "2026-02-10T12:08:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34541",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 511,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3244900897,
      "number": 34499,
      "title": "miniscript: Use valid script in test, etc (#31713 follow-ups)",
      "body": "* Add missing move https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722771821\r\n* Document reason behind moving entire `vector`s https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722932391\r\n* Make miniscript valid and improve test name https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722121348\r\n* Check for miniscript node depth rather than script size https://github.com/bitcoin/bitcoin/pull/31713#discussion_r2722062298",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2026-02-04T09:09:54Z",
      "updated_at": "2026-02-10T11:42:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34499",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 512,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2098862199,
      "number": 31001,
      "title": "refactor: ensure type safety for txid and wtxid in `RelayTransaction`",
      "body": "This PR updates the `RelayTransaction` function to replace `uint256` with the `Txid` and `Wtxid` types, improving type safety and helping with the gradual transition to using these types throughout the codebase.",
      "state": "closed",
      "user": "marcofleon",
      "created_at": "2024-09-30T11:24:07Z",
      "updated_at": "2026-02-10T11:10:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31001",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 281,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2315594478,
      "number": 31793,
      "title": "ci: Use clang-20 for sanitizer tasks",
      "body": "A new clang version generally comes with bugfixes, new (sanitizer) features, and deprecations.\r\n    \r\nUpgrade the sanitizer tasks to use the new version.\r\n\r\nThis was also suggested in https://github.com/bitcoin/bitcoin/pull/31691#issuecomment-2602517116",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-04T16:01:51Z",
      "updated_at": "2026-02-10T11:10:11Z",
      "merged_at": "2025-02-10T10:40:23Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31793",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 290,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2215504157,
      "number": 31419,
      "title": "test: fix MIN macro redefinition",
      "body": "Renames the `MIN` macro to `_TRACEPOINT_TEST_MIN`.\r\n\r\nFrom #31418:\r\n\r\n```\r\nstderr:\r\n/virtual/main.c:70:9: warning: 'MIN' macro redefined [-Wmacro-redefined]\r\n   70 | #define MIN(a,b) ({ __typeof__ (a) _a = (a); __typeof__ (b) _b = (b); _a < _b ? _a : _b; })\r\n      |         ^\r\ninclude/linux/minmax.h:329:9: note: previous definition is here\r\n  329 | #define MIN(a,b) __cmp(min,a,b)\r\n      |         ^\r\n1 warning generated.\r\n```\r\n\r\nfixes: https://github.com/bitcoin/bitcoin/issues/31418\r\n\r\n",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2024-12-04T14:57:08Z",
      "updated_at": "2026-02-10T11:10:11Z",
      "merged_at": "2024-12-04T17:13:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31419",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 523,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2320538471,
      "number": 31813,
      "title": "build: fix MSVC ccache reporting",
      "body": "\r\nFixes #31771\r\n\r\n### Summary\r\nThis PR resolves the incorrect reporting of `ccache` usage for MSVC builds by:  \r\n1. Removing forced compiler launcher configuration  \r\n2. Improving status message accuracy  \r\n3. Documenting proper MSVC+ccache workflows  \r\n\r\n### Key Changes\r\n- **Deleted**: `cmake/ccache.cmake` (Eliminates conflicts with user/CI configurations like `sccache`)  \r\n- **Updated**: `CMakeLists.txt` status reporting  \r\n  ```cmake\r\n  if(CMAKE_CXX_COMPILER_LAUNCHER)\r\n    message(STATUS \"Compiler launcher .............. ${CMAKE_CXX_COMPILER_LAUNCHER}\")\r\n  else()\r\n    message(STATUS \"Use ccache for compiling .............. NO\")\r\n  endif()\r\n  ```\r\n- **Added Documentation**:  \r\n  - **Requires**: Ninja generator  \r\n  - **Configure**: `cmake -B build -G Ninja -DCMAKE_CXX_COMPILER_LAUNCHER=ccache`  \r\n  - **Use**: `/Z7` debug flags (not `/Zi`)  \r\n\r\n### Testing\r\n```sh\r\n# MSVC 2022 + Ninja\r\ncmake -B build -G Ninja -DCMAKE_CXX_COMPILER_LAUNCHER=ccache\r\ncmake --build build\r\nccache -s  # Verified cache hits\r\n\r\n# User override test\r\ncmake -B build -DCMAKE_CXX_COMPILER_LAUNCHER=sccache  # No conflicts\r\n```",
      "state": "closed",
      "user": "vijayabhaskar78",
      "created_at": "2025-02-06T17:54:55Z",
      "updated_at": "2026-02-10T11:10:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31813",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1146,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2322618681,
      "number": 31819,
      "title": "doc: swap CPPFLAGS for APPEND_CPPFLAGS",
      "body": "`APPEND_CPPFLAGS` will be understood by our CMake, whereas `CPPFLAGS` will not. Attempting what is currently documented will just give:\r\n```bash\r\nCMake Warning:\r\n  Ignoring extra path from command line:\r\n\r\n   \"CPPFLAGS=-DDEBUG_LOCKCONTENTION\"\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-02-07T16:09:50Z",
      "updated_at": "2026-02-10T11:10:09Z",
      "merged_at": "2025-02-10T14:56:16Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31819",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 286,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2322118122,
      "number": 31815,
      "title": "multiprocess: Lock CapnpProtocol::m_loop with mutex",
      "body": "This change is intended to fix intermittent failures in `ipc_tests` unit test and `rpc_misc.py` functional tests that happen on mac os, which sometimes fail with error `terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument` as reported https://github.com/chaincodelabs/libmultiprocess/issues/154\r\n\r\nThis error could happen when [`m_loop.reset();`](https://github.com/bitcoin/bitcoin/blob/81eb6cc2c609b2fb3af53a53749e6162fecb34e2/src/ipc/capnp/protocol.cpp#L92) in `CapnpProtocol::startLoop` executes before the [`m_loop->removeClient(lock);`](https://github.com/bitcoin/bitcoin/blob/81eb6cc2c609b2fb3af53a53749e6162fecb34e2/src/ipc/capnp/protocol.cpp#L46) method returns in the `~CapnpProtocol` destructor , causing an failure to reacquire the `EventLoop::m_mutex` inside the [`EventLoop::removeClient`](https://github.com/chaincodelabs/libmultiprocess/blob/9558ceb0d47ac1f62f88d29ec55f8f3099e32b20/src/mp/proxy.cpp#L240-L251) method, and the [\"mutex lock failed\"](https://github.com/llvm/llvm-project/blob/f5c4f271abe757ae49ca97475b7b77de56d24f69/libcxx/src/mutex.cpp#L31) exception to be thrown.\r\n\r\nFix this error by adding a new mutex to guard the `CapnpProtocol::m_loop` variable and making sure [`m_loop.reset();`](https://github.com/bitcoin/bitcoin/blob/81eb6cc2c609b2fb3af53a53749e6162fecb34e2/src/ipc/capnp/protocol.cpp#L92) cannot be called until after [`m_loop->removeClient(lock);`](https://github.com/bitcoin/bitcoin/blob/81eb6cc2c609b2fb3af53a53749e6162fecb34e2/src/ipc/capnp/protocol.cpp#L46) returns.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-02-07T11:55:35Z",
      "updated_at": "2026-02-10T11:10:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31815",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1731,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2322630943,
      "number": 31820,
      "title": "build: consistently use `CLIENT_NAME` in libbitcoinkernel.pc.in",
      "body": "Follows up from when the `pc.in` was added.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-02-07T16:15:46Z",
      "updated_at": "2026-02-10T11:10:08Z",
      "merged_at": "2025-02-10T10:00:55Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31820",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 107,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3210348402,
      "number": 34410,
      "title": "test: let connections happen in any order in p2p_private_broadcast.py",
      "body": "If the following two events happen:\r\n\r\n* (likely) the automatic 10 initial connections are not made to all \r\n  networks\r\n* (unlikely) the network-specific logic kicks in almost immediately.\r\n  It is using exponential distribution with a mean of 5 minutes\r\n  (`rng.rand_exp_duration(EXTRA_NETWORK_PEER_INTERVAL)`).\r\n\r\nSo if both happen, then the 11th connection may not be the expected\r\nprivate broadcast, but a network-specific connection.\r\n\r\nFix this by retrieving the connection type from\r\n`destinations_factory()`. This is more flexible because it allows\r\nconnections to happen in any order and does not break if e.g. the 11th\r\nconnection is not the expected first private broadcast.\r\n\r\nThis also makes the test run faster:\r\nbefore: 19-44 sec \r\nnow: 10-25 sec \r\nbecause for example there is no need to wait for the initial 10\r\nautomatic outbound connections to be made in order to proceed.\r\n\r\nFixes: https://github.com/bitcoin/bitcoin/issues/34387\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-01-26T12:05:26Z",
      "updated_at": "2026-02-10T10:54:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34410",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1022,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2224317475,
      "number": 31449,
      "title": "coins,refactor: Reduce `getblockstats` RPC UTXO overhead estimation",
      "body": "The [`getblockstats` RPC](https://github.com/bitcoin/bitcoin/pull/10757) currently overestimates UTXO overhead by treating the `fCoinBase` bitfield as an additional `bool` in `PER_UTXO_OVERHEAD`.\r\nHowever, `fCoinBase` and `nHeight` are stored as bitfields and effectively packed into a single 32-bit value; counting an extra bool in the overhead calculation is unnecessary.\r\n\r\nThis PR introduces the following changes across three commits:\r\n* Store `fCoinBase` as a bool bitfield to reduce implicit conversions at call sites.\r\n* Use a consistent height/coinbase packing style across Coin serialization, undo serialization, and coinstats hashing (casting `nHeight` to `uint32_t` before shifting to avoid signed-promotion UB).\r\n* Adjust UTXO overhead estimation to match the actual Coin layout and update the related tests accordingly.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2024-12-09T17:36:50Z",
      "updated_at": "2026-02-10T09:34:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31449",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 901,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3259815827,
      "number": 34534,
      "title": "rpc: Manual prune lock management (Take 2)",
      "body": "This is a refreshed version of #19463, which was closed after inactivity but there was some mentions of users/external applications at the last CoreDev that would be interested in using this. Unfortunately, I can not recall who was mentioned as a potential user but I would appreciate if someone could ping them to take a look if this is still relevant to them.\r\n\r\nThis PR leverages the existing prune locks system we already have. The interface of the RPCs of the old PR has been slightly updated, it now matches the pattern used by `setban`/`listbanned` exactly. The locks are prefixed to distinguish them from the systems locks and prevent naming colissions. They are not persisted across restarts.\r\n\r\nUsage of temporary prune locking may also be helpful in other functional test scenarios but I didn't spend time to check where might apply.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-02-08T14:01:05Z",
      "updated_at": "2026-02-10T06:56:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34534",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 887,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2792670917,
      "number": 33281,
      "title": "clang-tidy: disable clang-analyzer UndefinedBinaryOperatorResult warning",
      "body": "Disable `clang-analyzer-core.UndefinedBinaryOperatorResult` warning because it produces a false positive in a Cap'n Proto header:\r\n\r\n```c++\r\n/usr/include/kj/async-inl.h:609:37: warning: The left operand of '+' is a garbage value [clang-analyzer-core.UndefinedBinaryOperatorResult]\r\n  609 |       return *(void**)(*(char**)obj + voff);\r\n```\r\n\r\nThis was reported by fanquake in https://github.com/bitcoin/bitcoin/issues/33256 and was previously addressed in https://github.com/bitcoin-core/libmultiprocess/pull/184/commits/76313450c2c4aa70cf5c443dc2b33c621a565fb5 which changed the analyzer result to be a warning instead of an error. PR https://github.com/capnproto/capnproto/pull/2334 was also merged upstream to prevent this in future versions of Cap'n Proto.\r\n\r\nUnfortunately it does not seem possible suppress the false-positive warning from this header without turning off the check for bitcoin code as well. The header is included with `-isystem` so it is treated as a third party header, but clang-tidy has a longstanding issue discussed in https://reviews.llvm.org/D26418 where it ignores `-isystem` and ignores `HeaderFilterRegex` and `ExcludeHeaderFilterRegex` directives if it decides that errors are associated with the \"main file\" of the translation unit, which is the case here. (See `isInMainFile` in https://github.com/llvm/llvm-project/pull/91400/files)\r\n\r\nThe tidy error is a false positive from clang-analyzer (https://clang-analyzer.llvm.org/) warning that the vtable pointer `*(char**)obj` is a garbage value rather than a valid memory address. The analyzer has no way of knowing it could be a valid address since it's only valid due to assumptions about the ABI.\r\n\r\nThe purpose of the code is to get a starting function address that can be passed to addr2line from a lambda or function object. The function `GetFunctorStartAddress` calls a helper `PtmfHelper::apply` to get the starting function address from a pointer-to-member-function value pointing at the operator() method. The helper needs to handle virtual methods, so it checks if the pointer is virtual by testing its low-order bit, and if set, assumes the first bytes of the object are a vtable pointer, and does pointer arithmetic with the vtable address. Clang-tidy complains about this because it does not know the vtable address is valid, assuming incorrectly it is a \"garbage value\".\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-09-02T13:21:05Z",
      "updated_at": "2026-02-10T01:06:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33281",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2554,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3264843937,
      "number": 34543,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "fermacsal1987-droid",
      "created_at": "2026-02-09T23:26:06Z",
      "updated_at": "2026-02-09T23:26:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34543",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3264110540,
      "number": 34540,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "uniaolives",
      "created_at": "2026-02-09T19:30:52Z",
      "updated_at": "2026-02-09T19:33:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34540",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3228775708,
      "number": 34465,
      "title": "refactor: separate log generation from log handling",
      "body": "This is a mostly move-only change. It's a small refactoring that allows logging macros to be used by including a simple `util/log.h` header instead of the full `logging.h` logging implementation. Most of the changes here were cherry-picked from #34374.\r\n\r\nOriginal motivation for this change was to reduce the size and complexity of #34374 (kernel structured logging PR) and reduce the number of conflicts it causes with other PRs. But this should also make sense as a standalone change to have a clearer separation of concerns between log generation and log handling, and avoid needing to depend on the whole logging framework in call sites that only emit log messages.\r\n\r\nRecommended to review with `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2026-01-30T17:59:41Z",
      "updated_at": "2026-02-09T19:32:18Z",
      "merged_at": "2026-02-07T22:01:24Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34465",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 815,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3214791387,
      "number": 34419,
      "title": "mining: add coinbase locktime, sequence and version fields to getblocktemplate RPC",
      "body": "[BIP54](https://github.com/bitcoin/bips/blob/master/bip-0054.md) proposes contraining the cointbase transaction `nLockTime` and `nSequence` fields. Our internal mining code has been doing this since #32155, but currently the fields are only communicated to IPC clients (see e.g. #33819).\r\n\r\nThis PR extends the `getblocktemplate` RPC to provide these fields.\r\n\r\nAdditionally it adds the `nVersion` field. Although unrelated to BIP54, it's trivial to add and makes `getblocktemplate` now cover all coinbase transaction fields.\r\n\r\nAccompanying proposed extension to BIP54: https://github.com/bitcoin/bips/pull/2097\r\n\r\nEven if BIP54 never activates, it makes sense to serve these new fields.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2026-01-27T14:17:17Z",
      "updated_at": "2026-02-09T19:25:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34419",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 771,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2589913550,
      "number": 32745,
      "title": "scripted-diff: Update DeriveType enum values to mention ranged derivations",
      "body": "While reviewing the MuSig2 descriptors PR #31244, I realized that the enum\r\n`DeriveType` here logically refers to the derive type for ranged descriptors.\r\nThis became evident to me while going through the implementations of `IsRange`\r\n & `IsHardened` functions of `BIP32PubkeyProvider`, and the `ParsePubkeyInner`\r\nfunction. Initially I got confused by reading `IsRange` translating to\r\n`!= DeriveType::NO`, but later realised it specifically referred to the presence\r\n of ranged derivations. I propose explicitly mentioning \"ranged\" in the values\r\nof the `DeriveType` enum would make it easier to parse the descriptors code.\r\n\r\nThis enum is used in one file only - `script/descriptors.cpp`. That's why I\r\nexplicitly passed it as the argument in the `sed` command in the script.",
      "state": "open",
      "user": "rkrux",
      "created_at": "2025-06-13T10:56:00Z",
      "updated_at": "2026-02-09T18:29:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32745",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 853,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163940035,
      "number": 34256,
      "title": "test: support `get_bind_addrs` and `feature_bind_extra` on macOS",
      "body": "### Problem\r\n\r\nSome functional tests are shown as skipped when running on macOS because `test_framework/netutil.py` only implemented the Linux-specific logic for checking which TCP sockets a node is listening on.\r\n\r\n### Fix\r\n\r\nAdd macOS implementations in `test/functional/test_framework/netutil.py` so tests can query:\r\n\r\n* which TCP sockets a node is listening on (`get_bind_addrs()`, via `lsof`)\r\n* a non-loopback interface address (`all_interfaces()`, via `ifconfig`)\r\n\r\nThen enable the previously Linux-only tests by switching to a shared platform guard.\r\n\r\n### Commands\r\n<details>\r\n<summary><code>get_bind_addrs()</code> (<code>lsof</code> + regex)</summary>\r\n\r\n> Command used\r\n```bash\r\nlsof -nP -a -p <pid> -iTCP -sTCP:LISTEN -Ftn\r\n```\r\n\r\n> Flags\r\n\r\n- -n: no hostname resolution\r\n- -P: no service/port-name resolution\r\n- -a: AND all conditions\r\n- -p <pid>: filter by process ID\r\n- -iTCP: TCP sockets only\r\n- -sTCP:LISTEN: listening sockets only\r\n- -Ftn: machine-readable output (fields: type t, name n)\r\n\r\n> Regex parser\r\n\r\n```regex\r\nt(IPv[46])\\nn(\\*|\\[.+?]|[^:]+):(\\d+)\r\n```\r\n> Captured groups\r\n\r\n- group 1: IPv4 / IPv6 (used to disambiguate *)\r\n- group 2: host (*, [::1], 127.0.0.1, …)\r\n- group 3: port\r\n</details>\r\n\r\n<details>\r\n<summary><code>all_interfaces()</code> (<code>ifconfig</code> + regex)</summary>\r\n\r\n> Command used\r\n\r\n```bash\r\nifconfig -au\r\n```\r\n\r\n> Regex parsing\r\n\r\nInterface blocks:\r\n```regex\r\n(?m)^(?P<iface>\\S+):(?P<block>[^\\n]*(?:\\n[ \\t]+[^\\n]*)*)\r\n```\r\n\r\nIPv4 extraction within each block:\r\n```regex\r\ninet (\\S+)\r\n```\r\n</details>\r\n\r\n### Notes\r\n\r\nThe only remaining platform skips on macOS are the USDT/BPF tracing tests (interface_usdt_*.py).\r\n\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-11T21:42:11Z",
      "updated_at": "2026-02-09T17:15:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34256",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1738,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3234431586,
      "number": 34472,
      "title": "bench: add script verification benchmark for P2TR key path spends",
      "body": "We currently benchmark Schnorr signature verification only in the context of block validation ([`ConectBlock*`](https://github.com/bitcoin/bitcoin/blob/8bb77f348ef390b7f7c7fb6b57fdc7e86ddb4ce7/src/bench/connectblock.cpp#L107) benchmarks), but not individually for single inputs [1]. This PR adds a script verification benchmark for P2TR key path spends accordingly, by generalizing the already existing one for P2WPKH spends.\r\n\r\nThis should make it easier to quantify potential performance improvements like e.g. https://github.com/bitcoin-core/secp256k1/pull/1777, which allows to plug in our HW-optimized SHA256 functions to be used in libsecp256k1 (see the linked example commit https://github.com/furszy/bitcoin-core/commit/f68bef06d95a589859f98fc898dd80ab2e35eb39). IIRC from last CoreDev, the main speedup from this is expected for ECDSA signing though (as this involves quite a lot of hashing), but it still makes sense to have verification benchmarks available for both signature types as well.\r\n\r\n(An alternative way could be to add benchmarks for the signing/verifying member functions `CKey::Sign{,Schnorr}`, `CPubKey::Verify` and `XOnlyPubKey::VerifySchnorr` directly, if we prefer that.) \r\n\r\n[1] this claim can be practically verified by putting an `assert(false);` into `XOnlyPubKey::VerifySchnorr`: the three benchmarks crashing are `ConnectBlockAllSchnorr`, `ConnectBlockMixedEcdsaSchnorr` and `SignTransactionSchnorr` (as signing includes verification)",
      "state": "open",
      "user": "theStack",
      "created_at": "2026-02-02T01:11:08Z",
      "updated_at": "2026-02-09T15:52:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34472",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1535,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3096470479,
      "number": 34057,
      "title": "test: add tests for cluster chunks",
      "body": "Add tests for cluster chunks, including:\r\n    - txgraph_chunk_chain test: test chunk implementation for a simple chain style graph .\r\n    - txgraph_staging test: test the staging feature for a basic graph.\r\n",
      "state": "closed",
      "user": "HowHsu",
      "created_at": "2025-12-12T13:04:16Z",
      "updated_at": "2026-02-09T15:44:48Z",
      "merged_at": "2026-02-09T15:44:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34057",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 242,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3018324242,
      "number": 33889,
      "title": "guix: update per-host disk-space estimates in build gate",
      "body": "Today, the build gates are obsolete. I found this out after seeing someone flag this on a commit setting `-static-libgcc`. Note that the Linux builds came in at the expected amount of disk space utilization, so I did not touch the values for them.\r\n\r\nThis PR aims to readjust the build gate disk space per-host estimates for darwin and mingw based on some testing I did locally in my build VM.\r\n\r\nDetails:\r\n(Copied from https://github.com/kevkevinpal/bitcoin/issues/200):\r\n\r\nI ran `HOSTS=\"x86_64-w64-mingw32\" ./contrib/guix/guix-build`\r\n\r\nAfter (+10 GiB):\r\n```\r\nFilesystem     1G-blocks  Used Available Use% Mounted on\r\n/dev/sda5           512G   98G      393G  20% /gnu/store\r\n```\r\n\r\nThese numbers makes this change seem reasonable (1.5x safety factor):\r\n```\r\n-        *mingw*)  required_KiB=7600000 ;;\r\n+        *mingw*)  required_KiB=15728640 ;;\r\n```\r\n\r\n---\r\n\r\nThen I ran `HOSTS=\"aarch64-linux-gnu\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+6 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  104G  387G  22% /gnu/store\r\n```\r\n\r\n---\r\n\r\nThen I setup the SDK for macOS. This established a new *before* snapshot of disk use:\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  116G  375G  24% /gnu/store\r\n```\r\n\r\nThen I ran `HOSTS=\"x86_64-apple-darwin\" ./contrib/guix/guix-build`.\r\n\r\nAfter (+5 GiB):\r\n```\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda5       512G  121G  370G  25% /gnu/store\r\n```\r\n\r\nIMO, this is grounds for updating this (5 GiB * 1.5x safety factor):\r\n```\r\n-        *darwin*) required_KiB=440000 ;;\r\n+        *darwin*) required_KiB=8388608 ;;\r\n```\r\n",
      "state": "open",
      "user": "djkazic",
      "created_at": "2025-11-17T17:21:07Z",
      "updated_at": "2026-02-09T14:53:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33889",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1692,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1358174069,
      "number": 27710,
      "title": "ci, iwyu: Update mappings",
      "body": "This PR reduces false warnings, especially for unit tests.\r\n\r\nFrom the Boost.Test's [point of view](https://github.com/boostorg/test/blob/d2895ebfdfdf16074c58c9801d53e190c4654fcb/include/boost/test/unit_test.hpp#L11), the `boost/test/unit_test.hpp` header:\r\n```\r\n... should be the only header necessary to include to start using the framework\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2023-05-21T10:23:15Z",
      "updated_at": "2026-02-09T14:45:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27710",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 373,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3203363765,
      "number": 34393,
      "title": "rpc: Fix off-by-one error in getblockchaininfo help",
      "body": "Correct the `headers` field description in `getblockchaininfo`.\r\n\r\n\"The current number of headers we have validated\" is wrong - the field reports the height of the best known header.\r\n\r\nI'm open to suggestions regarding the exact wording.\r\n\r\nSample output:\r\n```\r\n{\r\n  \"chain\": \"main\",\r\n  \"blocks\": 933527,\r\n  \"headers\": 933527,\r\n  ...\r\n}\r\n```",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2026-01-23T13:46:44Z",
      "updated_at": "2026-02-09T14:38:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34393",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 394,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3227556540,
      "number": 34459,
      "title": "[30.x] Backports",
      "body": "Backports:\r\n* #34409\r\n* #34434\r\n* #34445\r\n* #34453\r\n* #34461\r\n* #34510",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-30T11:55:58Z",
      "updated_at": "2026-02-09T14:31:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34459",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 87,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3262020416,
      "number": 34536,
      "title": "[29.x] Finalise v29.3",
      "body": "Bump version in build and doc, and regenerate the man pages in preparation for the release of v29.3.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-02-09T09:34:55Z",
      "updated_at": "2026-02-09T14:24:49Z",
      "merged_at": "2026-02-09T14:24:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34536",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 122,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2598874149,
      "number": 32764,
      "title": "guix: Build for macOS using Clang only",
      "body": "This PR makes macOS builds Clang-only by switching the build compiler in depends to `clang` + `libc++`.\r\n\r\nSee: https://github.com/bitcoin/bitcoin/issues/30206.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-06-17T13:39:41Z",
      "updated_at": "2026-02-09T14:17:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32764",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 199,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3253567659,
      "number": 34523,
      "title": "doc: Clarify why performance-move-const-arg.CheckTriviallyCopyableMove=false",
      "body": "Without this doc, there is a risk that the setting will be turned off, see https://github.com/bitcoin/bitcoin/pull/34514.\r\n\r\nThe reason to disable it is to catch logic bugs, even on trivially copyable types:\r\n\r\n```cpp\r\n#include <utility>\r\nvoid Eat(int&& food) { food = 0; };\r\nint main() {\r\n  int food{2};\r\n  Eat(std::move(food));\r\n  Eat(std::move(food));  // This should err\r\n}\r\n```",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-06T07:49:13Z",
      "updated_at": "2026-02-09T14:06:14Z",
      "merged_at": "2026-02-09T13:54:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34523",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 459,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2901201712,
      "number": 33585,
      "title": "cmake: Use builtin support for .manifest files",
      "body": "Remove some redundant logic from the CMake code:\r\n\r\n* The `WIN32_EXECUTABLE` target property only has an effect when building for `WIN32`. Checking `WIN32` is redundant.\r\n* CMake has builtin support for `.rc` and `.manifest` files. Both may be added to sources unconditionally. They only have an effect when building for `WIN32`.\r\n",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-10-09T15:44:53Z",
      "updated_at": "2026-02-09T13:59:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33585",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 378,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2661268700,
      "number": 32953,
      "title": "[POC] ci: Skip compilation when running static code analysis",
      "body": "This PR is a proof of concept for using a compilation database with static analysis tools such as clang-tidy or IWYU. The idea was suggested in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2935293250:\r\n> Shouldn't this be excluded in the tidy CI task as well?\r\n\r\nAdditionally, this PR makes use of the `codegen` target, following the suggestion in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2991861497:\r\n> It does seem nice to be able to run clang-tidy on generated files... Maybe more ideally there could be ...  target like `make --build build -t codegen` that only runs code generation steps and doesn't compile the sources.\r\n\r\nA few tasks remain to be addressed. Here's the current TODO list:\r\n- [ ] Implement the `codegen` target for CMake versions older than 3.31.\r\n- [ ] Handle files generated by the `mpgen` tool.\r\n- [ ] Handle files generated by Qt tools.\r\n- [ ] Enable `RUN_CHECK_DEPS=true` elsewhere.\r\n\r\nWhile https://github.com/bitcoin/bitcoin/issues/31965 is still under discussion, it may make sense to move this CI job to GHA to provide quicker feedback.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-07-12T12:51:19Z",
      "updated_at": "2026-02-09T13:39:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32953",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1160,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3254517062,
      "number": 34524,
      "title": "refactor: [rpc] Remove confusing and brittle integral casts (take 2)",
      "body": "Second take for cases which I seem to have missed in commit 94ddc2dced5736612e358a3b80f2bc718fbd8161.\r\n\r\nWhen constructing an UniValue from integral values, historically (long ago), in some cases casts where needed. With the current UniValue constructor, only very few are actually needed.\r\n\r\nKeeping the unused casts around is:\r\n\r\n* confusing, because code readers do not understand why they are needed\r\n* brittle, because some may copy them into new places, where they will lead to hard-to-find logic bugs, such as the ones fixed in pull https://github.com/bitcoin/bitcoin/pull/34112\r\n\r\nSo fix all issues by removing them, except for a few cases, where casting was required:\r\n* `static_cast<bool>(fCoinBase)`, because `bool{fCoinBase}` only works on modern compilers.\r\n\r\nThis hardening refactor does not fix any bugs and does not change any behavior.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-06T12:26:32Z",
      "updated_at": "2026-02-09T13:35:29Z",
      "merged_at": "2026-02-09T13:32:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34524",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 921,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3160217990,
      "number": 34241,
      "title": "test: Check that interrupt results in EXIT_SUCCESS",
      "body": "This is a test for https://github.com/bitcoin/bitcoin/pull/34224. The test can be tested by reverting that pull request and observing the test failure.\r\n\r\n\r\nAlso, includes a small test cleanup/refactor.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-09T16:30:25Z",
      "updated_at": "2026-02-09T13:14:17Z",
      "merged_at": "2026-02-09T13:10:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34241",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 253,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3118781384,
      "number": 34122,
      "title": "script: Default script_verify_flags comparisons",
      "body": "Replace the manual operator== and friend operator<=> in src/script/verify_flags.h with a defaulted member operator<=>.\r\n\r\nThis reduces boilerplate while preserving the existing semantics (m_value comparison) and continues to provide ==, <, >, <=, and >= via the compiler-generated comparison operators.\r\n\r\n**Note**: This is a small refactor, but it removes duplicated comparison logic and reduces the chance of == and <=> diverging in future edits. If that’s not considered worthwhile, I can close/drop it.",
      "state": "closed",
      "user": "Brotcrunsher",
      "created_at": "2025-12-19T20:50:34Z",
      "updated_at": "2026-02-09T12:56:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34122",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 554,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999849822,
      "number": 33856,
      "title": "kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState",
      "body": "## Motivation\r\n\r\nThis PR refactors `ProcessNewBlockHeaders()` to return `BlockValidationState` by value instead of using out-parameters or boolean returns. This follows the pattern established in #31981 (commit 74690f4) which refactored `TestBlockValidity()` in a similar manner.\r\n\r\n### Current Issues\r\n **ProcessNewBlockHeaders()**: Uses an out-parameter `BlockValidationState& state`, making the API less intuitive.\r\n\r\nAs noted by @theCharlatan in #33822 [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508065115) and can be a fix for that too:\r\n> One thing that could be considered here is returning the BlockValidationState directly instead of having an in/out param. To safely do that I think we'd need to refactor ProcessNewBlockHeaders though, similarly to what was done in 74690f4.\r\n\r\nThe changes are split into two commits, see individual commit message for more info.",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-11T17:23:59Z",
      "updated_at": "2026-02-09T12:49:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33856",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 981,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2680024170,
      "number": 33023,
      "title": "test: Add functional tests for blockreconstructionextratxn and extra pool (compactblocks)",
      "body": "This tests the -blockreconstructionextratxn parameter and extra pool memory (ring buffer) behavior used specifically for compact block reconstruction. The \"extra transaction pool\" stores transactions that were rejected from the mempool for policy reasons (dust, low fees, non-standard scripts), txs replaced via rbf, etc…\r\n\r\nThere is no test coverage for this. (no unit tests either as the code being tested - in PeerManagerImpl - isn't publicly accessible in the net_processing.h file)\r\n\r\nThe code being tested is in src/net_processing.cpp - look for vExtraTxnForCompact, AddToCompactExtraTransactions and -blockreconstructionextratxn start arg.\r\n\r\nThis tests\r\n\r\nPolicy-rejected transactions are stored in the extra pool: Transactions rejected for being dust, having low fees, or using non-standard scripts are kept in the extra pool\r\nPool capacity limits work correctly: Tests various pool sizes. Default is 100.\r\nEviction behavior: When the extra pool is full, the oldest transactions are evicted (FIFO)\r\nWraparound behavior: The extra pool correctly wraps around when adding new transactions\r\nCompact block reconstruction: These extra transactions are actually used during block reconstruction\r\n\r\nUses policy rejected transactions to populate the extra pool for tests.\r\n\r\n(Updated 08/29/25: rebased to currrent master and fixed tests to accommodate new low-fee rate policy)",
      "state": "open",
      "user": "bigshiny90",
      "created_at": "2025-07-20T16:40:28Z",
      "updated_at": "2026-02-09T12:38:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33023",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1467,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3262031023,
      "number": 34537,
      "title": "crypto: fix incorrect variable names in SHA-256 ARM intrinsics",
      "body": "ARM SHA256 intrinsics take state in natural order: ABCD + EFGH (hash_abcd/hash_efgh). [Documented here](https://developer.arm.com/architectures/instruction-sets/intrinsics/#f:@navigationhierarchiesinstructiongroup=[Cryptography,SHA256]) \r\nThe code already uses that layout, only the `ABEF_SAVE`/`CDGH_SAVE` names were wrong.  \r\n\r\nRename to `ABCD_SAVE`/`EFGH_SAVE`. No logic change.\r\nFix in original C code (Jeffrey): https://github.com/noloader/SHA-Intrinsics/pull/14",
      "state": "open",
      "user": "jrakibi",
      "created_at": "2026-02-09T09:37:28Z",
      "updated_at": "2026-02-09T12:28:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34537",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 530,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3231429938,
      "number": 34469,
      "title": "consensus/test/doc: cover errors in `CheckTxInputs` with unit tests",
      "body": "### Problem\r\nCoverage reports indicate that a few consensus related validations aren't exercised in unit-, and some not even in the functional-tests:\r\nInspired by the coverage reports:\r\n* [\"bad-txns-premature-spend-of-coinbase\"](https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/consensus/tx_verify.cpp.gcov.html#L180): Only covered in functional tests\r\n* [\"bad-txns-inputvalues-outofrange\"](https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/consensus/tx_verify.cpp.gcov.html#L187): Unreachable in functional tests [1], uncovered in unit tests\r\n* [\"bad-txns-in-belowout\"](https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/consensus/tx_verify.cpp.gcov.html#L193): Only covered in functional tests\r\n* [\"GetValueOut: value out of range\"](https://maflcko.github.io/b-c-cov/test_bitcoin.coverage/src/primitives/transaction.cpp.gcov.html#L103) and [total coverage report](https://maflcko.github.io/b-c-cov/total.coverage/src/primitives/transaction.cpp.gcov.html#L103)\r\n\r\nReplacing them with explicit throws still passes all unit (and sometimes even functional) tests, confirming those branches are not being exercised, see: https://github.com/l0rinc/bitcoin/pull/112\r\n\r\n### Fixes\r\n\r\nAdd minimal unit test coverage for `Consensus::CheckTxInputs` invalid outcomes for `bad-txns-premature-spend-of-coinbase`, `bad-txns-inputvalues-outofrange`, `bad-txns-in-belowout`.\r\nAdd a unit test covering `CTransaction::GetValueOut()` throwing for out of range values.\r\nAfter the prerequisits are tested, document why `bad-txns-fee-outofrange` is unreachable - while keeping the check in place because it is consensus-critical code.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-31T20:14:32Z",
      "updated_at": "2026-02-09T12:21:18Z",
      "merged_at": "2026-02-09T12:13:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34469",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1710,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3262624734,
      "number": 34538,
      "title": "net: advertise -externalip addresses",
      "body": "...regardless of -onlynet.\r\n\r\n-onlynet is documented to only affect automatic outbound connections (this naming is not ideal!), but it also currently prevents -externalip addresses from being advertised when their network isn't in the -onlynet set, which _will_ affect inbound behaviour/performance. This is because of the g_reachable_nets.Contains() check in AddLocal(), which rejects all addresses outside the reachable set, regardless of how they were specified.\r\n\r\nPrevious attempts to fix this (#24835 and #25690) both tried removal of the g_reachable_nets check from AddLocal(). A concern raised was that IsPeerAddrLocalGood() would also need adjusting for consistency. I am not sure this applies though, because [-externalip sets fDiscover=false](https://github.com/bitcoin/bitcoin/blob/7e5e0b20ea3e010cb8a79a67a83e5f41c100d322/src/init.cpp#L802-L806), so IsPeerAddrLocalGood() is [short-circuited](https://github.com/bitcoin/bitcoin/blob/7e5e0b20ea3e010cb8a79a67a83e5f41c100d322/src/net.cpp#L236) before its g_reachable_nets check is reached. In the -listenonion path (where fDiscover may be true), g_reachable_nets.Contains() still returns false for the excluded network, but this is correct — IsPeerAddrLocalGood() is checking whether to replace our \"known\" address with a peer's claim, and there doesn't seem any reason to override an address that tor control already knows?\r\n\r\nIn the approach in this changeset, instead of removing the check entirely, skip it only when nScore >= LOCAL_MANUAL. This limits the bypass to addresses _explicitly provided by the user_ (-externalip, -torcontrol).\r\n\r\nThis also means that we would not advertise non-onlynet discovered addresses, only those which are manually specified, which I believe addresses https://github.com/bitcoin/bitcoin/pull/25690#issuecomment-1193405395:\r\n\r\n> I think it might also be weird for a user to activate -onlynet and keep on advertising their clearnet address to the network\r\n\r\nFixes: #25336\r\n",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2026-02-09T12:16:46Z",
      "updated_at": "2026-02-09T12:18:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34538",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 2008,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174053537,
      "number": 34286,
      "title": "test: verify node state after restart in assumeutxo",
      "body": "## Summary\n\nThis PR replaces the TODO comment in `wallet_assumeutxo.py` (line 242) with actual test assertions that verify node and wallet behavior after a restart during assumeutxo background sync.\n\n## Changes\n\nThe new tests verify:\n- Two chainstates exist (background validation not complete)\n- Background chainstate is still at `START_HEIGHT`\n- Snapshot chainstate has synced to at least `PAUSE_HEIGHT`\n- Wallets cannot be loaded after restart (expected behavior)\n- Wallet backup from before snapshot height cannot be restored\n\n## Motivation\n\nDuring implementation, I discovered that **wallets cannot be loaded after a node restart during assumeutxo background sync**. This is expected behavior because:\n- The wallet loading code checks if required blocks are available for rescanning\n- During assumeutxo background sync, blocks before the snapshot are not available\n- This applies to all wallets, including watch-only wallets created at the snapshot height\n\nThis is a valuable test addition because it documents this expected behavior and ensures it doesn't regress. Users should be aware that if they restart their node during assumeutxo background sync, they won't be able to load their wallets until the background sync completes.\n\n## Related\n\nrefs #28648\n\nAddresses the TODO comment that was originally added as part of the assumeutxo wallet test implementation.",
      "state": "open",
      "user": "yashbhutwala",
      "created_at": "2026-01-14T15:55:59Z",
      "updated_at": "2026-02-09T11:55:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34286",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1422,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3236363653,
      "number": 34479,
      "title": "fuzz: Add and use NodeClockContext",
      "body": "Iterating over fuzz inputs will usually be done in the same process. As the mocktime is global, it can theoretically leak from one fuzz input run into the next run, making it less deterministic.\r\n\r\nFix this issue, by adding and using a context manager to handle the mocktime and reset it before the end.\r\n\r\nThis refactor should not change any behavior.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-02-02T12:36:06Z",
      "updated_at": "2026-02-09T11:34:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34479",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 387,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2864932636,
      "number": 33483,
      "title": "CMake: Add dynamic test discovery",
      "body": "Instead of parsing the test names from the source code at configure time, query the list of tests from the test executables at testing time.\r\n\r\nThis should be upstreamed to CMake: https://gitlab.kitware.com/cmake/cmake/-/issues/26920\r\n\r\nLeft to do: The `test_bitcoin-qt` executable should be fixed to support the `-function` option documented here: https://doc.qt.io/qt-6/qtest-overview.html#testing-options so that its test cases can be discovered as well.",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-26T17:21:02Z",
      "updated_at": "2026-02-09T11:27:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33483",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 491,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2318382567,
      "number": 31807,
      "title": "kernel: Avoid duplicating symbols in the kernel and downstream users",
      "body": "The possibility of this happening came up in the discussion here: https://github.com/bitcoin/bitcoin/pull/31158#issuecomment-2635223309, and it turned that we already had a case of it in our code.\r\n\r\ntl;dr: Certain symbols when defined in headers may end up existing in both the shared lib and the application using it, leading to subtle bugs. More info can be found [here](https://www.mail-archive.com/cfe-commits@lists.llvm.org/msg503669.html).\r\n\r\nThe solution is generally to avoid defining static/inline vars in headers if they aren't meant to be shared with downstream kernel users.\r\n\r\nClang has recently added a warning for this (see link above), so this PR enables that too. It adds a new place to specify warnings which only apply to the kernel. In this case, it's warnings that only apply to shared libs. But I can also imagine wanting to enable more aggressive warnings for the kernel than the rest of the code.\r\n\r\nThe warning is only enabled by clang 21 (which is not yet released), and only useful when our [kernel symbol visibility hack](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/CMakeLists.txt#L100) is disabled, which we can't do yet. So it's mostly a placeholder for the future. In the meantime it can be used manually by building clang from git and disabling our hack, which I've done, and can confirm that after this change there are no more warnings.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-02-05T19:32:42Z",
      "updated_at": "2026-02-09T11:25:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31807",
      "labels": [
        "Build system",
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1454,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2528993305,
      "number": 32566,
      "title": "Use subprocess library for notifications",
      "body": "Builds on #29868 (to have windows support).\r\n\r\nThis switches the `-*notify` options to use the subprocess library, which is currently used for only the external signer. The main advantage of this is that file descriptor leaks are avoided (#32343). This could also add future flexibility in notifications, for example to bypass the shell (and launch commands with their arguments directly[1]), or do something with command output (like log it). But for now, this is meant to be one-to-one.\r\n\r\n- Generalize `ENABLE_EXTERNAL_SIGNER` build option to `ENABLE_SUBPROCESS`.\r\n- Unify everything dealing with external commands in `common/run_command.cpp`. Use the new functions `RunShell` and `RunShellInThread`.\r\n- Remove `HAVE_SYSTEM`.\r\n\r\n--------------------------\r\n\r\n[1] There's a long-running issue on Windows where it can't pass the wallet name because there's no way to escape it for the shell.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2025-05-19T14:55:35Z",
      "updated_at": "2026-02-09T11:24:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32566",
      "labels": [
        "Build system",
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 933,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3260481659,
      "number": 34535,
      "title": "test: Add wallet reorg test during assumeutxo background sync",
      "body": "This PR adds a test that verifies wallet balance consistency when a chain reorg occurs while assumeutxo background validation is in progress\r\n\r\nmotivation\r\ncurrently test file tests wallet functionality with snapshots but there is no test covering what happens when reorg occurs during background validation phase.\r\n\r\nso what it tests\r\n- wallet state remains consistent through reorg\r\n- balance updates when coins are orphaned",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-02-08T21:23:58Z",
      "updated_at": "2026-02-09T11:15:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34535",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 488,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3136708013,
      "number": 34181,
      "title": "refactor: [p2p] Make ProcessMessage private again, Use references when non-null",
      "body": "There is a single unit test, which calls the internal `ProcessMessage` function. This is problematic, because it makes future changes harder, since they will need to carry over this public internal interface each time.\r\n\r\nAlso, there is a mixed use of pointers and references in p2p code, where just based on context, a pointer may sometimes assumed to be null, or non-null. This is confusing when reading the code, or making or reading future changes.\r\n\r\nFix both issues in a series of commits, to:\r\n\r\n* refactor the single unit test to call higher-level functions\r\n* Make `ProcessMessage` private again\r\n* Use references instead of implicit non-null pointers, mostly in a scripted-diff",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-30T12:31:30Z",
      "updated_at": "2026-02-09T11:14:20Z",
      "merged_at": "2026-02-07T01:10:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34181",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 767,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2602754583,
      "number": 32773,
      "title": "cmake: Create subdirectories in build tree in advance",
      "body": "While reviewing https://github.com/bitcoin/bitcoin/pull/32697, I noticed that symlink creation fails when the target subdirectory does not exist. In such cases, `file(CREATE_LINK ... COPY_ON_ERROR SYMBOLIC)` falls back to copying, which implicitly creates the required path. As a result, a single file is copied instead of symlinked for subdirectories in `test/functional`. \r\n\r\nThis PR ensures that necessary subdirectories are created in advance, so that subsequent symlink creation does not fail due to missing paths.\r\n\r\nFor example:\r\n- on the master branch:\r\n```\r\n$ cmake -B build\r\n$ ls -l build/test/functional/mocks/\r\ntotal 8\r\n-rwxrwxr-x 1 hebasto hebasto 2683 Jul  3 14:11 invalid_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto   64 Jul  3 14:11 multi_signers.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/multi_signers.py\r\nlrwxrwxrwx 1 hebasto hebasto   60 Jul  3 14:11 no_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/no_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto   57 Jul  3 14:11 signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/signer.py\r\n```\r\n- with this PR:\r\n```\r\n$ cmake -B build\r\n$ ls -l build/test/functional/mocks/\r\ntotal 4\r\nlrwxrwxrwx 1 hebasto hebasto 65 Jul  3 13:51 invalid_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/invalid_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto 64 Jul  3 13:51 multi_signers.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/multi_signers.py\r\nlrwxrwxrwx 1 hebasto hebasto 60 Jul  3 13:51 no_signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/no_signer.py\r\nlrwxrwxrwx 1 hebasto hebasto 57 Jul  3 13:51 signer.py -> /home/hebasto/dev/bitcoin/test/functional/mocks/signer.py\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-06-18T19:52:41Z",
      "updated_at": "2026-02-09T11:14:01Z",
      "merged_at": "2026-02-09T11:04:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32773",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1728,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2348103116,
      "number": 31920,
      "title": "build: create Depends build type for depends and use it by default for depends builds",
      "body": "As discussed a good bit with fanquake and hebasto. Would be nice to have for v29, but it's very late, so no worries if it doesn't make it.\r\n\r\nFundamentally, this creates a \"Depends\" build type which represents the flags that were used to build depends as opposed to colliding with the other types.\r\n\r\nThis allows the forwarding of optional flags into the CMake build for the \"Depends\" build type, but the user can now optionally use an existing (Debug/RelWitDebInfo/etc.) type to ignore the optimization flags set by depends and use the ones from that type instead.\r\n\r\nAs an example, a user may do:\r\nmake -C depends\r\ncmake --toolchain depends/arm64-apple-darwin/toolchain.cmake -DCMAKE_BUILD_TYPE=Debug\r\n\r\nThis would compile depends with the default optimization flags for depends (-O2) but build Core with the default debug optimization flags from CMake\r\n\r\nDepends note:\r\nFor hosts, $host_*FLAGS variables now represent the mandatory flags for compiling and will be forwarded to all Core builds via the toolchain file, regardless of the build type. For most platforms they should be empty, but are useful at least for darwin.\r\n\r\nWhen setting (for example) CFLAGS from the command line when building depends, these flags will be stored in $host_release_CFLAGS (or _debug_), and will only be forwarded to the Depends build type.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-02-20T21:08:17Z",
      "updated_at": "2026-02-09T11:12:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31920",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1413,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3237226837,
      "number": 34483,
      "title": "refactor: Use SpanReader over DataStream",
      "body": "This changes all places, where possible, to use SpanReader over DataStream. This makes the code easier to read and reason about, because `SpanReader` can never write data. Also, the code should be minimally faster, because it avoids a full redundant copy of the whole vector of bytes.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-02-02T15:54:28Z",
      "updated_at": "2026-02-09T11:12:33Z",
      "merged_at": "2026-02-07T02:00:31Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34483",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 325,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1639622439,
      "number": 29056,
      "title": "refactor: Print verbose serialize compiler error messages",
      "body": "Currently, trying to serialize an object that can't be serialized will fail with a short error message. For example, the diff and the error message:\r\n\r\n```diff\r\ndiff --git a/src/test/serialize_tests.cpp b/src/test/serialize_tests.cpp\r\nindex d75eb499b4..773f49845b 100644\r\n--- a/src/test/serialize_tests.cpp\r\n+++ b/src/test/serialize_tests.cpp\r\n@@ -62,6 +62,8 @@ public:\r\n \r\n BOOST_AUTO_TEST_CASE(sizes)\r\n {\r\n+    int b[4];\r\n+    DataStream{} << b << Span{b};\r\n     BOOST_CHECK_EQUAL(sizeof(unsigned char), GetSerializeSize((unsigned char)0));\r\n     BOOST_CHECK_EQUAL(sizeof(int8_t), GetSerializeSize(int8_t(0)));\r\n     BOOST_CHECK_EQUAL(sizeof(uint8_t), GetSerializeSize(uint8_t(0)));\r\n```\r\n\r\n```\r\n./serialize.h:765:6: error: member reference base type 'const int[4]' is not a structure or union\r\n  765 |     a.Serialize(os);\r\n      |     ~^~~~~~~~~~\r\n```\r\n```\r\n./serialize.h:277:109: error: no matching function for call to 'UCharCast'\r\n  277 | template <typename Stream, typename B> void Serialize(Stream& s, Span<B> span) { (void)/* force byte-type */UCharCast(span.data()); s.write(AsBytes(span)); }\r\n      |                                                                                                             ^~~~~~~~~\r\n```\r\n\r\nThis is fine. However, it would be more helpful for developers and more accurate by the compiler to explain why each function is not selected.\r\n\r\nFix this by using C++20 concepts where appropriate.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2023-12-11T21:21:21Z",
      "updated_at": "2026-02-09T11:09:35Z",
      "merged_at": "2023-12-21T17:27:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29056",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1494,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1718068294,
      "number": 29412,
      "title": "p2p: Don't process mutated blocks",
      "body": "This PR proposes to check for mutated blocks early as a defense-in-depth mitigation against attacks leveraging mutated blocks.\r\n\r\nWe introduce `IsBlockMutated` which catches all known forms of block malleation and use it to do an early mutation check whenever we receive a `block` message.\r\n\r\nWe have observed attacks that abused mutated blocks in the past, which could have been prevented by simply not processing mutated blocks (e.g. https://github.com/bitcoin/bitcoin/pull/27608 for which a regression test is included in this PR).",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-02-08T17:18:35Z",
      "updated_at": "2026-02-09T11:09:34Z",
      "merged_at": "2024-02-28T22:55:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29412",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 568,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3230404793,
      "number": 34468,
      "title": "build: Fix debug prefix map for generated source files",
      "body": "This PR fixes an issue where debug paths were inconsistent for generated files residing in the build tree. #34414\r\n\r\nCurrently, the debug prefix map is restricted to `${DISTSRC}/src=.`. This configuration fails to correctly map generated files that exist outside of the `src` directory (e.g., Cap'n Proto definitions), resulting in inconsistent file paths during debugging.\r\n\r\n**Changes:**\r\n- Updated `HOST_CFLAGS` in `contrib/guix/libexec/build.sh` to map the entire `${DISTSRC}` to `.` instead of restricting it to `${DISTSRC}/src`.\r\n\r\nThis ensures all source files, including generated ones, have correct relative paths in the debug information.\r\n\r\n",
      "state": "closed",
      "user": "BharathC0",
      "created_at": "2026-01-31T08:48:13Z",
      "updated_at": "2026-02-09T10:48:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34468",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 707,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2293116283,
      "number": 31713,
      "title": "miniscript refactor: Remove unique_ptr-indirection",
      "body": "Removes one level of unnecessary indirection, which was a change that originally [aided in finding one issue](https://github.com/bitcoin/bitcoin/pull/30866#pullrequestreview-2434704657) in #30866. Simplifies the code one step further than 09a1875ad8cddeb17c19af34b8282d37fed0937e belonging to aforementioned PR.\r\n\r\nAlso adds test which verifies resistance to stack overflow when it comes to `~Node()` and `Node::Clone()`.\r\n\r\nNo observed difference when running benchmarks: ExpandDescriptor/WalletIsMineDescriptors/WalletIsMineMigratedDescriptors/WalletLoadingDescriptors.\r\n\r\nFollowup to #30866.",
      "state": "closed",
      "user": "hodlinator",
      "created_at": "2025-01-22T21:16:33Z",
      "updated_at": "2026-02-09T10:42:54Z",
      "merged_at": "2026-01-30T23:18:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31713",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 645,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3090774381,
      "number": 34047,
      "title": "cmake: Add fail pattern to `try_append_cxx_flags`",
      "body": "This PR addresses scenarios where the build environment, such as OSS-Fuzz, provides the `-Wno-error=unknown-warning-option` flag, which undermines our use of `-Werror` when checking compiler flags.\r\n\r\nTo reproduce the issue on the master branch @ c1f0a89d9caeb62a0a5f3462b454746941e626e6:\r\n```\r\n$ env CXX=clang++ CC=clang CXXFLAGS=\"-Wno-error=unknown-warning-option\" cmake -B build 2>&1 | grep WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES - Success\r\n```\r\n\r\nThis output shows that the `-Wduplicated-branches` flag is incorrectly treated as recognised by the compiler.\r\n\r\nNoticed while working on the [migration](https://github.com/google/oss-fuzz/pull/14457) to Ubuntu 24.04 in OSS-Fuzz.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-10T21:14:51Z",
      "updated_at": "2026-02-09T10:18:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34047",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 822,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2829220023,
      "number": 33390,
      "title": "cmake: exclude secp256k1 from all",
      "body": "Instead of setting the EXCLUDE_FROM_ALL target property, pass EXCLUDE_FROM_ALL to `add_subdirectory()`.\r\n\r\nThis has the following advanteges:\r\n\r\n* It is shorter (obviously).\r\n* Target properties are set only in the `CMakeLists.txt` file that defines the target.\r\n* Install rules defined in the subdirectory are excluded as well. This is what we want, because secp256k1 is linked statically.",
      "state": "closed",
      "user": "purpleKarrot",
      "created_at": "2025-09-15T13:11:00Z",
      "updated_at": "2026-02-09T10:17:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33390",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 424,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3256881734,
      "number": 34532,
      "title": "doc: discourage Tor-only node operation in tor.md",
      "body": "Adds a section to `doc/tor.md` warning against running `-onlynet=onion`. Covers eclipse attack risk, Tor centralization, on-chain privacy misconceptions, and documents the `dnsseed`/`dns` gotchas for anyone who proceeds anyway.\n\nReworked based on feedback from luke-jr and pinheadmz. Originally started as a how-to guide after hitting the undocumented `dnsseed` incompatibility on a Pi 5 setup.\n\nDocumentation only, no code changes.",
      "state": "closed",
      "user": "Jhackman2019",
      "created_at": "2026-02-07T03:28:14Z",
      "updated_at": "2026-02-09T10:14:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34532",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 482,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3125987114,
      "number": 34142,
      "title": "policy: Check Taproot control block size correctly in `IsWitnessStandard`",
      "body": "I'd like to improve the Taproot [control size check](https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/src/policy/policy.cpp#L321) in `IsWitnessStandard`. Rather than just checking emptiness, we should perform all three checks implemented in `VerifyTaprootControlBlockSize` (see below). This way we can invalidate the transaction earlier when it's clear that the control size is incompatible with consensus rules (saving compute).\r\n\r\nOld checks:\r\n-  `control.size() > 0`\r\n\r\nNew checks:\r\n- `control.size() >= TAPROOT_CONTROL_BASE_SIZE`\r\n- `control.size() <= TAPROOT_CONTROL_MAX_SIZE`\r\n- `(control.size() - TAPROOT_CONTROL_BASE_SIZE) % TAPROOT_CONTROL_NODE_SIZE == 0`\r\n\r\nFor example, a single byte control block wouldn't be empty, but it would be invalid because it's shorter than `TAPROOT_CONTROL_BASE_SIZE` (33). `IsWitnessStandard` should return false in that case.\r\n\r\nThis PR also adds a helper function for the control block size check to reduce repetition and to improve readability of the (rather heavy) functions that call it. We have four instances of the same check.\r\n\r\nI ran:\r\n`cmake -B build -DENABLE_WALLET=OFF && cmake --build build -j 8 && ctest --test-dir build -j 8`\r\n\r\nLooking forward to your feedback.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2025-12-23T12:43:00Z",
      "updated_at": "2026-02-09T10:08:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34142",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1323,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3228581236,
      "number": 34464,
      "title": "Change BlockRequestAllowed() to take ref (minor refactor)",
      "body": "As [suggested here](https://github.com/bitcoin/bitcoin/pull/34416#discussion_r2745302958), a minor refactor of `PeerManagerImpl::BlockRequestAllowed()` to take reference parameter (instead of pointer). The motivation is to make the code safer, by minimizing the risk of null-dereference, and to be more consistent.\r\nThe change is local to the `PeerManagerImpl::BlockRequestAllowed()` class.\r\nRelated to #34440.\r\n",
      "state": "closed",
      "user": "optout21",
      "created_at": "2026-01-30T16:57:17Z",
      "updated_at": "2026-02-09T10:05:30Z",
      "merged_at": "2026-02-05T10:56:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34464",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 470,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1389230610,
      "number": 27865,
      "title": "wallet: Track no-longer-spendable TXOs separately",
      "body": "In #27286, the wallet keeps track of all of its transaction outputs, even if they are already spent or are otherwise unspendable. This TXO set is iterated for balance checking and coin selection preparation, which can still be slow for wallets that have had a lot of activity. This PR aims to improve the performance of such wallets by moving UTXOs that are definitely no longer spendable to a different map in the wallet so that far fewer TXOs need to be iterated for the aforementioned functions.\r\n\r\nUnspendable TXOs (not to be confused with Unspent TXOs) are those which have a spending transaction that has been confirmed, or are no longer valid due to reorgs. TXOs that are spent in unconfirmed transactions remain in the primary TXO set, and are filtered out of balance and coin selection as before.\r\n\r\nDepends on #27286",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-06-12T18:40:10Z",
      "updated_at": "2026-02-09T09:06:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27865",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 876,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2640910930,
      "number": 32875,
      "title": "index: handle case where pindex_prev equals chain tip in NextSyncBlock()",
      "body": "# Background\r\nNextSyncBlock() is used in BaseIndex::Sync() to get the next block index to be synced, so that BaseIndex::Sync() can build the index for that block.\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/index/base.cpp#L150-L151\r\n\r\nIt normally calls chain.Next(pindex_prev) to get the next block index on the active chain. If that fails, pindex_prev is on a fork. In that case, chain.FindFork(pindex_prev) is called to return the fork point, and then chain.Next(fork point) is returned for the caller to handle.\r\nThe latter logic is referred to as the fork code below.\r\n\r\n# Issue:\r\nThe current master implementation of NextSyncBlock() handles a specific case implicitly in the fork code.\r\n\r\nThe special case is pindex_prev == chain tip (simplified as the special case below). This means the input block is already the tip of the active chain, and there is no next block to be indexed anymore. Thus, NextSyncBlock() should return nullptr. This expectation is also implied in BaseIndex::Sync():\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/index/base.cpp#L220-L221\r\n\r\nAlthough NextSyncBlock() does return nullptr in this case, it is handled in a confusing code flow:\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/index/base.cpp#L150-L166\r\n\r\ncalls line 158: chain.Next(pindex_prev) returns nullptr because the below code flow:\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/chain.h#L417-L423\r\n\r\ncalls line 419: chain.Contains():\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/chain.h#L411-L414\r\n\r\ncalls line 405:\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/chain.h#L403-L408\r\n\r\nThus in `NextSyncBlock` line 159, because pindex is nullptr, it finally falls into the fork code.\r\nit is handled only coincidentally by the fork code:\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/index/base.cpp#L163-L165\r\n\r\nin this code, FindFork() is called,\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/chain.cpp#L50-L59\r\nand because pindex is the active chain tip, the `while` loop on line 56 is not iterated. It finally returns pindex itself.\r\nSo at last `chain.Next(pindex_prev)` is called again to return nullptr.\r\n\r\nHowever, the fork code is designed to handle reorgs, not this special case. This seems to be an oversight rather than something by design.\r\n\r\n# How to test it\r\n\r\nBecause `NextSyncBlock()` returns nullptr in the special case anyway, some debug code like `assert()` or `std::cout` or log sematics has to be added into this method to see the code flow in this method. The caller can be this unit test:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1d3243806da6db8bd13e6b20906628ed434362b6/src/test/txindex_tests.cpp#L16-L33\r\n\r\nLine 32 calls `Sync()` and it calls `NextSyncBlock()` \r\n\r\n# Solution:\r\nRather than modifying the comments on lines 163–164 to make them consistent with the fork code behavior, it would be better to handle this special case explicitly and early in NextSyncBlock().\r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-07-04T10:03:17Z",
      "updated_at": "2026-02-09T08:30:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32875",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3285,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3239542097,
      "number": 34490,
      "title": "wallet: Follow-ups to create/load split (#32636)",
      "body": "This adds documentation for `PopulateWalletFromDB()` and improves documentation for `LoadExisting()` and `CreateNew()`, and makes `WalletBatch::WriteVersion(int client_version)` respect the argument that it's passed, addressing issues reviewers pointed in #32636.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-02-03T06:02:55Z",
      "updated_at": "2026-02-09T08:09:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34490",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 312,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2846279392,
      "number": 33444,
      "title": "rpc: Fix dumptxoutset rollback with competing forks",
      "body": "Fixes dumptxoutset rollback functionality when competing forks exist.\r\n\r\n**Problem:**\r\ndumptxoutset rollback fails when competing forks are present at the target height, even though it should work on the active chain regardless of forks.\r\n\r\n**Solution:**\r\nWhen competing forks exist, the current implementation's `InvalidateBlock` call causes a reorg to the competing fork instead of rolling back to the desired main chain block. \r\n\r\nThis PR fixes the issue by enhancing the `TemporaryRollback` class to:\r\n- Identify all competing fork blocks at heights above the target\r\n- Invalidate fork blocks first to prevent reorg during main chain invalidation\r\n- Then invalidate the main chain block for clean rollback\r\n- Restore all invalidated blocks in the destructor\r\n\r\n**Changes:**\r\n- Fix `TemporaryRollback` class in `src/rpc/blockchain.cpp` to handle competing forks\r\n- Add comprehensive functional test `rpc_dumptxoutset_forks.py` that verifies the fix\r\n- Update test to confirm `dumptxoutset` works correctly with competing forks present\r\n\r\n**Testing:**\r\nThe test creates competing forks and verifies that `dumptxoutset rollback` now works correctly, creating snapshots from the intended main chain block rather than failing or using the wrong chain.\r\n\r\nFixes #32817.",
      "state": "closed",
      "user": "enirox001",
      "created_at": "2025-09-20T13:45:44Z",
      "updated_at": "2026-02-09T07:52:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33444",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1319,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3213105614,
      "number": 34416,
      "title": "Add nullptr-check to CChain::Contains(), tests",
      "body": "Add unit tests to the `CChain` class, and add a nullptr-check to `CChain::Contains()` to avoid potential memory access violation by `nullptr` dereference.\r\n\r\nThe `CChain::Contains()` method (in `src/chain.h`) dereferences its input without checking. The `Next()` method also calls into this with a `nullptr` if invoked with `nullptr`. While most call sites have indirect guarantee that the input is not `nullptr`, it's not easy to establish this to all call sites with high confidence. These methods are publicly available. There is no known high-level use case to trigger this error, but the fix is easy, and makes the code safer.\r\n\r\nAlso, unit tests were added to the `CChain` class, filling a gap.\r\n\r\nChanges:\r\n\r\n- Add basic unit tests for `CChain` class methods\r\n- Add a nullptr-check to `CChain::Contains()`\r\n\r\nAlternative. I have considered changing `Contains()` to take a reference instead of pointer, however, when applying that to various methods, it grew to a much bigger changeset -- see #34440. Having in mind the friction of larger PRs, I think the present minimal one-check solution (with the tests) makes sense on its own.\r\n\r\nThis change is remotely related to and indirectly triggered by #32875 .\r\n",
      "state": "open",
      "user": "optout21",
      "created_at": "2026-01-27T05:25:08Z",
      "updated_at": "2026-02-09T07:40:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34416",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1261,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 445927635,
      "number": 19463,
      "title": "Prune locks",
      "body": "This adds the ability to have any number of internal or external locks to prevent pruning specific block ranges.\r\n\r\nSome examples where this would be useful:\r\n\r\n* Ensuring any known Core wallet won't become unable to sync due to pruning when it is unloaded. (Included in this PR)\r\n* Ensuring pruning doesn't go too far for a desired-functional wallet backup. (Questionable, since you probably lose the node if you need the backup anyway?)\r\n* Allowing users to temporarily disable block indexes and filters, without pruning cutting them off from catching up later.\r\n* Avoiding pruning out from under external wallets (Armory, EPS, etc) that might need block data.\r\n* External block indexes/filters, etc.\r\n\r\nBy design, users retain complete control over prune locks, and can delete them out from under applications using them. This is to avoid circumstances where a prune lock has been set, by an application that may no longer be used.\r\n",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2020-07-08T04:03:17Z",
      "updated_at": "2026-02-09T06:43:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19463",
      "labels": [
        "RPC/REST/ZMQ",
        "Block storage"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 948,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2517768893,
      "number": 32489,
      "title": "wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet",
      "body": "Currently, if a user wants to use an airgapped setup, they need to manually create the watchonly wallet that will live on the online node by importing the public descriptors. This PR introduces `exportwatchonlywallet` which will create a wallet file with the public descriptors to avoid exposing the specific internals to the user. Additionally, this RPC will copy any existing labels, transactions, and wallet flags. This ensures that the exported watchonly wallet is almost entirely a copy of the original wallet but without private keys.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-05-13T22:22:00Z",
      "updated_at": "2026-02-09T06:14:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32489",
      "labels": [
        "Wallet",
        "Review club"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 622,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2677577590,
      "number": 33008,
      "title": "wallet: support bip388 policy with external signer",
      "body": "External signers such as Ledger, BitBox02 and Jade, when used with multisig, use [BIP388](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki) to display (and constrain) descriptor policies to their users.\r\n\r\nAt least in the case of Ledger (no others so far, see https://github.com/bitcoin/bitcoin/pull/33008#issuecomment-3165080503) this requires us to hold on to an hmac, which proves to the device that the user previously reviewed and approved it.\r\n\r\nThis PR adds a new RPC call `registerpolicy` which converts our descriptor(s) into a BIP388 policy (_partially implemented_), calls a new HWI method `register` (_implemented_) and stores the resulting HMAC (_implemented_).\r\n\r\nWhen signing a transaction using HWI's `signtx` it passes the HMAC along with the PSBT (_TODO_).\r\n\r\nFor convenience the HMAC can be retrieved via `getwalletinfo` (_implemented_). This is useful for scenario's where we can't (yet) complete a transaction via HWI calls.\r\n\r\nNote that the HMAC itself is not specified in BIP388 and may be different for different hardware vendors. So we'll store and echo any hex string the device gives us.\r\n\r\nAn alternative approach to directly supporting BIP388 policies would be to pass the involved descriptors to HWI and have it figure out how to derive a policy.\r\n\r\nTesting:\r\n- make a multisig wallet with a Ledger or other [supported device](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki#reference-implementation)\r\n  - try https://github.com/Sjors/bitcoin/pull/91 if you're feeling adventurous, it includes this PR\r\n- install https://github.com/bitcoin-core/HWI/pull/791 HWI branch\r\n- call `bitcoin rpc registerpolicy`\r\n- call `bitcoin rpc getwalletinfo` to see the hmac\r\n\r\nTODO:\r\n- [ ] derive policy using `Descriptor` class instead regex madness, implement all constraints\r\n- [ ] pass hmac along when signing\r\n\r\nDepends on:\r\n- [ ] HWI `register` command: https://github.com/bitcoin-core/HWI/pull/791\r\n- [ ] HWI optional `--hmac` argument for `signtx` (if set, bypass the current auto-registration workaround)\r\n\r\nPotential followups:\r\n- pass hmac along when displaying an address. This provides some extra assurance to the user. See https://github.com/bitcoin-core/HWI/pull/647\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-18T15:31:45Z",
      "updated_at": "2026-02-09T04:51:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33008",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2678738082,
      "number": 33014,
      "title": "rpc: Fix internal bug in descriptorprocesspsbt when encountering invalid signatures",
      "body": "Fixes #32849\r\nThe descriptorprocesspsbt RPC was crashing with an internal bug assertion when processing PSBTs with invalid signatures (like invalid Schnorr signatures with SIGHASH_SINGLE | ANYONECANPAY flags). Instead of returning a helpful error message, it would just crash.\r\nThis change replaces the CHECK_NONFATAL call with proper error handling that catches the failure and returns a JSONRPCError with a clear message to the user.\r\nTested with Bitcoin Core v29.0.0 using the exact PSBT from the issue report. The fix now returns proper error messages instead of crashing.",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-07-19T05:15:00Z",
      "updated_at": "2026-02-09T04:47:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33014",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 660,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2679273445,
      "number": 33018,
      "title": "coins: remove SetFresh method from CCoinsCacheEntry",
      "body": "There is plenty of test code that exercises the code path for FRESH-but-not-DIRTY coins in CCoinsViewCache. However, we can see there is only one place in production code where we call `SetFresh` that is not preceded by `SetDirty`. This is in `CCoinsViewCache::FetchCoin` and we can see that this is called if the coin retrieved from `base->GetCoin` is spent. The `base` in this case can be another `CCoinsViewCache` or a `CCoinsViewDB`. In `CCoinsViewCache::GetCoin` we can see that we do not return spent coins, and in `CCoinsViewDB` we don't ever store spent coins so there are none to return.\r\n\r\nThus, we can safely remove this dead code, and now we can see that there are never any calls to `SetFresh` not preceded by `SetDirty`. This PR removes this dead code and replaces `SetFresh` by passing a `fresh` boolean flag to `SetDirty`. This simplifies the logic of `CCoinsViewCache` and lets us remove test cases checking for FRESH-but-not-DIRTY coins. It removes the possibility of FRESH-but-not-DIRTY coins being called from any code path, so we can eliminate this state entirely and reduce the cognitive load of having to consider it.\r\n\r\nThis is pulled out from https://github.com/bitcoin/bitcoin/pull/30673 to make the change simpler.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-07-19T19:21:35Z",
      "updated_at": "2026-02-09T04:44:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33018",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1293,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2776641246,
      "number": 33259,
      "title": "rpc, logging: add backgroundvalidation to getblockchaininfo",
      "body": "`getblockchaininfo` returns `verificationprogress=1` and `initialblockdownload=false` even if there's background validation.\r\nThis PR adds information about background validation to rpc `getblockchaininfo` in a similar way to `validationprogress` does.\r\n\r\nIf assume utxo was used the output of a \"sync\" node performing background validation:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756933740,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": true,\r\n  \"background\": {\r\n    \"snapshotheight\": 880000,\r\n    \"blocks\": 527589,\r\n    \"bestblockhash\": \"0000000000000000002326308420fa5ccd28a9155217f4d1896ab443d84148fa\",\r\n    \"mediantime\": 1529076654,\r\n    \"chainwork\": \"0000000000000000000000000000000000000000020c92fab9e5e1d8ed2d8dbc\",\r\n    \"verificationprogress\": 0.2815790617966284\r\n  },\r\n  \"chainwork\": \"0000000000000000000000000000000000000000df97866c410b0302954919d2\",\r\n  \"size_on_disk\": 61198817285,\r\n\r\n...\r\n```\r\n\r\nIf assume utxo was not used the progress is hidden and background validation is set to false:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756245700,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": false,\r\n  \"chainwork\": \"00000000000000000000000000000000000000000000000000000656d6bb052b\",\r\n  \"size_on_disk\": 3964972194,\r\n...\r\n```\r\n\r\nThe PR also updates the way we estimate the verification progress returning a 100% on the snapshot block and not on the tip as we will stop doing background validation when reaching it.\r\n",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-08-26T23:02:29Z",
      "updated_at": "2026-02-09T03:46:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33259",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1639,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2902093523,
      "number": 33593,
      "title": "guix: Use UCRT runtime for Windows release binaries",
      "body": "This PR:\r\n1. Switches Windows release binaries to UCRT.\r\n2. Update docs.\r\n3. Drops MSVCRT workarounds.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/30210.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-10-09T21:46:43Z",
      "updated_at": "2026-02-09T02:22:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33593",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2919092278,
      "number": 33637,
      "title": "refactor: optimize block index comparisons (1.4-6.8x faster)",
      "body": "### Context\r\nThe comparator is often called either directly or for the sorting of [setBlockIndexCandidates](https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L637), a red-black tree-set containing valid block headers where the comparator is invoked extensively.\r\nBesided the sorted set usages, the comparator is used directly in `Chainstate` in `FindMostWorkChain`, `PruneBlockIndexCandidates`, `ActivateBestChain` and `InvalidateBlock`; and in `ChainstateManager` in `LoadBlockIndex`, `CheckBlockIndex`, `ActivateSnapshot` and `PopulateAndValidateSnapshot`.\r\n\r\nIt was profiled during the investigation of https://github.com/bitcoin/bitcoin/issues/33618#issuecomment-3402229976. \r\n\r\n### Testing\r\nTo ensure the optimized implementations are both fast and correct, the first commit adds a dedicated benchmark to measure `CBlockIndexWorkComparator` performance, and the second commit adds randomized tests comparing the new implementation with the original one.\r\n\r\n### Results\r\n\r\n> GCC 15.0.1:\r\n\r\n* `CBlockIndexWorkComparator`: 100,772,511 cmp/s → 656,674,205 cmp/s = 6.51x faster\r\n* `CheckBlockIndex`: 9,091 ops/s → 14,765 ops/s = 1.62x faster\r\n\r\n> Clang 22.0.0:\r\n\r\n* `CBlockIndexWorkComparator`: 100,451,893 cmp/s → 683,414,234 cmp/s = 6.8x faster\r\n* `CheckBlockIndex`: 10,322 ops/s → 14,376 ops/s = 1.39x faster\r\n\r\nSee https://corecheck.dev/bitcoin/bitcoin/pulls/33637 for the CI's `CheckBlockIndex` performance.\r\n\r\n<details>\r\n<summary>gcc and clang measurements</summary>\r\n\r\n> Compiler: gcc 15.0.1\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.92 |      100,772,511.62 |    0.0% |           63.98 |           35.64 |  1.795 |          14.17 |    1.9% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          109,996.46 |            9,091.20 |    0.2% |    1,014,421.11 |      394,979.29 |  2.568 |     313,025.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.48 |      154,439,491.66 |    0.0% |           31.01 |           23.25 |  1.334 |           7.16 |    3.8% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          105,754.86 |            9,455.83 |    0.1% |      913,130.11 |      379,588.20 |  2.406 |     276,692.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.37 |      156,990,488.06 |    0.0% |           28.85 |           22.87 |  1.261 |           8.61 |    3.2% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           83,803.10 |           11,932.73 |    0.0% |      743,565.09 |      300,824.84 |  2.472 |     232,646.08 |    0.0% |      5.56 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.52 |      656,674,205.98 |    0.0% |           13.18 |            5.47 |  2.410 |           3.06 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           67,726.84 |           14,765.19 |    0.2% |      585,826.07 |      243,155.90 |  2.409 |     181,920.07 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n> Compiler: clang 22.0.0\r\n\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.96 |      100,451,893.46 |    0.0% |           61.28 |           35.75 |  1.714 |          13.62 |    2.1% |      5.52 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           96,878.70 |           10,322.19 |    0.1% |      802,827.10 |      347,679.01 |  2.309 |     234,823.10 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.13 |      163,183,693.10 |    0.0% |           25.74 |           22.01 |  1.170 |           6.10 |    4.6% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           86,307.94 |           11,586.42 |    1.2% |      646,229.09 |      309,785.33 |  2.086 |     195,119.09 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.36 |      157,330,900.16 |    1.0% |           26.20 |           22.61 |  1.159 |           6.55 |    4.4% |      5.53 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           75,031.66 |           13,327.71 |    1.0% |      650,604.15 |      266,934.04 |  2.437 |     149,967.14 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.46 |      683,414,234.14 |    0.0% |           16.12 |            5.25 |  3.067 |           4.02 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           69,559.70 |           14,376.14 |    0.1% |      559,208.07 |      249,654.28 |  2.240 |     132,342.07 |    0.0% |      5.51 | `CheckBlockIndex`\r\n\r\n</details>\r\n\r\n### Reproducer\r\n\r\nRun the equivalence tests with:\r\n```bash\r\ncmake -B build && cmake --build build && ./build/bin/test_bitcoin --run_test=arith_uint256_tests,blockchain_tests\r\n```\r\n\r\nEach commit shows how it changes the relevant benchmarks.\r\n\r\n<details>\r\n<summary>Benchmark script</summary>\r\n\r\n```bash\r\nfor compiler in gcc clang; do \\\r\n  if [ \"$compiler\" = \"gcc\" ]; then CC=gcc; CXX=g++; COMP_VER=$(gcc -dumpfullversion); \\\r\n  else CC=clang; CXX=clang++; COMP_VER=$(clang -dumpversion); fi && \\\r\n  echo \"> Compiler: $compiler $COMP_VER\" && \\\r\n  for commit in 70c6244b709fcf6a853ea44b91b9ed219609ac90 516e05cd7d8dbb61b05854c59f5393367e502284 d053b27c06d06cccbc6395b0aa7dc1c4193a6fc3 8ef4ce2cb3ac80cbe58b8cf76e183f9eca6fafe4 703165e6d3b9fbd58b9c31ddce0e961047fc5e71; do \\\r\n    git fetch origin $commit >/dev/null 2>&1 && git checkout $commit >/dev/null 2>&1 && git log -1 --pretty='%h %s' && \\\r\n    rm -rf build && \\\r\n    cmake -B build -DBUILD_BENCH=ON -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX >/dev/null 2>&1 && \\\r\n    cmake --build build -j$(nproc) >/dev/null 2>&1 && \\\r\n    for i in 1; do \\\r\n      build/bin/bench_bitcoin -filter='CBlockIndexWorkComparator|CheckBlockIndex' -min-time=5000; \\\r\n    done; \\\r\n  done; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\nNote: something similar was already started in https://github.com/bitcoin/bitcoin/pull/33334, but this is a broader optimization that doesn't use the same technique.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-16T01:54:31Z",
      "updated_at": "2026-02-09T02:15:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33637",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11214,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3091431534,
      "number": 34049,
      "title": "rpc: Disallow captures in RPCMethodImpl",
      "body": "When defining `RPCHelpMan` objects, we usually return a lambda, and mostly we define those via `[&](...) { ... }` which explicitly captures any parameters or local variables by reference. If we were to actually use any of those captures (we don't), we would invoke undefined behaviour. So instead, convert all the `[&]` to `[]` to avoid capturing, and as part of `RPCHelpMan` check that the function we provide is convertible to a bare function pointer, so that any attempts to capture anything (even if it's by-copy, which is safe) results in an error.\r\n\r\nWhile we're at it, rename `RPCHelpMan` to `RPCMethod`, reflecting it's greater responsibility since #19386.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-11T03:25:25Z",
      "updated_at": "2026-02-08T23:59:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34049",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3135104327,
      "number": 34176,
      "title": "wallet: crash fix, handle non-writable db directories",
      "body": "Make wallet creation and load fail with a clear error when the db directory isn’t writable.\r\n\r\n#### 1) For Wallet Creation\r\n\r\nBefore: creating a wallet would return a generic error:\r\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\r\n\r\nAfter: creating a wallet returns:\r\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\r\n\r\n#### 2) For Wallet Loading\r\n\r\nWe currently allow loading wallets located on non-writable directories. This is problematic\r\nbecause the node crashes on any subsequent write; generating a block is enough to trigger it.\r\nCan be verified just by running the following test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\n\r\nAlso, to check directory writability, this creates a tmp file rather than relying on the\r\n`permissions()` functions, since perms bits alone may not reliably reflect actual writability\r\nin some systems.\r\n\r\nTesting Note:\r\nPushed the tests in separate commits so they can be cherry-picked on master for comparison.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-12-29T19:44:56Z",
      "updated_at": "2026-02-08T22:50:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34176",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1125,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3182466003,
      "number": 34322,
      "title": "node: Persist private broadcast transactions over node restarts",
      "body": "Follow-up from #29415 \r\n\r\nCurrently private broadcast transactions are stored in peer manager and do not persist over restarts. A submitted transaction can be lost if the node restarts before it is privately broadcast.\r\n\r\nThis change dumps the set of private broadcast transactions to a `privatebroadcast.dat` file on shutdown, and adds the transactions back to the private broadcast data structure on restart.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-01-16T19:37:05Z",
      "updated_at": "2026-02-08T21:41:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34322",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 474,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1587218477,
      "number": 28792,
      "title": "build: Embedded ASMap [3/3]: Build binary dump header file",
      "body": "This is the final in a series of PRs that implement the necessary changes for embedding of asmap data into the binary. This last part add the initial asmap data, implements the build changes and adds further documentation.\r\n\r\nCurrently an asmap file needs to be acquired by there user from some location or the user needs to generate one themselves. Then they need to move the file to the right place in datadir or pass the path to the file as `-asmap=PATH` in order to use the asmap feature. The change here allows for builds to embed asmap data into the bitcoind binary which makes it possible to use the feature without handling of the asmap file by the user. If the user starts bitcoind with `-asmap` the embedded data will be used for bucketing of nodes.\r\n\r\nThe data lives in the repository at `src/node/data/ip_asn.dat` and can be replaced with a new version at any time. The idea is that the data should be updated with every release. By default the data at that location is embedded into the binary but there is also a build option to prevent this (`-DWITH_EMBEDDED_ASMAP=OFF`). In this case the original behavior of the `-asmap` option is maintained.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2023-11-04T22:13:31Z",
      "updated_at": "2026-02-08T14:07:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28792",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1218,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2285701879,
      "number": 31682,
      "title": "[IBD] specialize CheckBlock's input & coinbase checks",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n### Context, concerns\r\n\r\nAs noted by Sipa in https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162, this is consensus-critical code (especially since we've had an actual inflation bug related to duplicate checking).\r\nHowever, the changes here are very confined to a single function, easily reviewed, and I have a general preference for avoiding `std::set` when sorted `std::vector` works too as well.\r\n\r\nThe goal of this change is to [make block validation faster](https://github.com/bitcoin/bitcoin/pull/14387#issuecomment-442748969) via a low-risk alternative.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C++ compiler .......................... AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\r\n|            9,585.10 |          104,328.55 |    0.1% |     11.03 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\r\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 2.07x faster `CheckBlockBench`\r\n* 3.4x faster `DuplicateInputs`\r\n* 1.8% faster `ProcessTransactionBench`\r\n\r\n-----\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`\r\n|           56,199.57 |           17,793.73 |    0.1% |      229,263.01 |      178,766.31 |  1.282 |      15,509.97 |    0.5% |     10.91 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\r\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 31% faster `CheckBlockBench`\r\n* 2x faster `DuplicateInputs`\r\n* 0.5% faster `ProcessTransactionBench`\r\n\r\n----\r\n\r\nWhile the point of the change isn't necessarily to speed up IBD, but you can see the measurements at https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2606765689\r\n\r\n----\r\n\r\nRelated PRs: \r\n* https://github.com/bitcoin/bitcoin/pull/14397 - very similar solution, I only found it after pushing the PR (was closed for inactivity)\r\n* https://github.com/bitcoin/bitcoin/pull/14837 - a faster, but a lot more complex alternative (was closed for complexity and inactivity).",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-18T15:03:56Z",
      "updated_at": "2026-02-08T12:38:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31682",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5734,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2545149066,
      "number": 32621,
      "title": "contrib: utxo_to_sqlite.py: add option to store txid/spk as BLOBs",
      "body": "This PR is a late follow-up to https://github.com/bitcoin/bitcoin/pull/27432, introducing an option for the utxo-to-sqlite script to store the txid/scriptPubKey columns as bytes (= `BLOB` storage class in sqlite, see e.g. https://www.sqlite.org/datatype3.html in sqlite) rather than hex strings. This was proposed in earlier reviews (https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1516857024, https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1653739351) and has the obvious advantage of a significantly smaller size of the resulting database (and with that, faster conversion) and the avoidance of hex-to-bytes conversion for further processing of the data [1]. The rationale on why hex strings were chosen back then (and still stays the default, if only for compatibility reasons) is laid out in https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1516922824 [2].\r\n\r\nThe approach taken is introducing new parameters `--spk` and `--txid` which can either have the values \"hex\", \"raw\" (for scriptpubkey) and \"hex\", \"raw\", \"rawle\" (for txid). Thanks to ajtowns for providing this suggestion. Happy to take further inputs on naming and thoughts on future extensibility etc.\r\n\r\n[1] For a concrete example, I found that having these columns as bytes would be nice while working on a SwiftSync hints generator tool (https://github.com/theStack/swiftsync-hints-gen), which takes the result of the utxo-to-sqlite tool as input.\r\n[2] note that in contrast what I wrote back then, I think there is no ambiguity on byte-string-serialization of txids; they are ultimately just hash results and hence, they should be stored as such, and adding a big/little endian knob wouldn't make much sense. The drawback of not being able to immediately show txid-strings (as one would need to do the bytes-reversal step first, which is not possible in sqlite, see e.g. https://github.com/bitcoin/bitcoin/pull/24952#issuecomment-1165499803) still remains though.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-05-27T03:03:35Z",
      "updated_at": "2026-02-08T12:21:32Z",
      "merged_at": "2026-02-08T09:37:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32621",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2031,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2322755847,
      "number": 31822,
      "title": "fixing-link-Update dependencies.md",
      "body": "old link :\r\nhttps://www.oracle.com/technetwork/database/database-technologies/berkeleydb/downloads/index.html\r\n\r\nnew link :\r\nhttps://www.oracle.com/database/technologies/related/berkeleydb-downloads.html\r\n\r\nhope it was helpful\r\n",
      "state": "closed",
      "user": "dedyshkaPexto",
      "created_at": "2025-02-07T17:13:42Z",
      "updated_at": "2026-02-08T11:09:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31822",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 263,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2584507258,
      "number": 32729,
      "title": "test,refactor: extract script template helpers & widen sigop count coverage",
      "body": "### Summary\r\n\r\nThis PR extracts a set of cheap, inline helpers for recognizing the most common script templates, clarifies the definition of valid op-codes for pre-Taproot scripts, and splits the existing \"deserialize + check-block\" benchmark into three orthogonal micro-benchmarks.  \r\nThe change is behavior-neutral for consensus and policy - every modified call-site performs the same checks as before, just through clearer helper functions.\r\n\r\n### Context\r\n\r\nWhile working on [`GetSigOpCount` optimizations for known script templates](https://github.com/bitcoin/bitcoin/pull/32532) I noticed that feature-test coverage was [thin for this code path](https://maflcko.github.io/b-c-cov/total.coverage/src/script/script.cpp.gcov.html).  \r\nThis PR therefore adds tests for error cases (malformed push-data encodings) and for the expected sigop totals of the various script templates (including edge cases like a sigop after an `OP_RETURN`).\r\n\r\nGiven the difficulty of reviewing the [original optimizations themselves](https://github.com/bitcoin/bitcoin/pull/32532#issuecomment-2950665350), I split all test / benchmark work into this standalone PR.  \r\nThe recent burst of sigops related refactor activity ([#31624](https://github.com/bitcoin/bitcoin/pull/31624), [#32521](https://github.com/bitcoin/bitcoin/pull/32521), [#32533](https://github.com/bitcoin/bitcoin/pull/32533)) underlines the need for extra safety.\r\n\r\nThe refactors here eliminate magic numbers, deduplicate template checks, and lay groundwork for future performance work.\r\n\r\n### Structure\r\n\r\n* **Benchmarks** - first commits separate deserialization+hashing, validation, and sigop counting so each cost can be measured independently.  \r\n* **Template helpers** - tiny, mechanical commits move each script-template check into `script.h`, replace all ad-hoc byte-checks, and add tests where necessary.  \r\n* **Tests** - a full script-test suite covering malformed `PUSHDATA` sequences and the pre-taproot / accurate sigop totals for every standard template.  \r\n* **pre-taproot opcode ceiling** - documents, enforces, and tests that `OP_CHECKSIGADD` > `MAX_OPCODE`.\r\n* **Extra fuzzing** - enabled all possible opcodes in `ConsumeOpcodeType`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-06-11T14:44:28Z",
      "updated_at": "2026-02-08T10:59:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32729",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2276,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2597079174,
      "number": 32763,
      "title": "wallet: Replace CWalletTx::mapValue and vOrderForm with explicit class members",
      "body": "`mapValue` and `vOrderForm` are opaque data structures that contain transaction metadata. It is hard to determine what actual data each field contains, and they can ostensibly be misused where metadata is added in the future without developers realizing that such metadata exists.\r\n\r\nIt's much clearer to have all of that metadata live in their own explicit member variables within `CWalletTx`. This PR implements that change.\r\n\r\nSince the serialization format of `CWalletTx` depends on `mapValue` and `vOrderForm`, the serialization remains unchanged, so when serializing these new members, they need to be shoved/extracted from a temporary `mapValue` or `vOrderForm`.\r\n\r\nThis does end up breaking forwards compatibility as unknown fields in `mapValue` and `vOrderForm` are stripped out if the record is rewritten. However, I don't expect that we would continue to use these fields for future metadata, so I think that risk is low.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-06-16T22:37:34Z",
      "updated_at": "2026-02-08T10:45:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32763",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1011,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683376326,
      "number": 33034,
      "title": "wallet: Store transactions in a separate sqlite table",
      "body": "The wallet uses SQLite as a key-value store even though SQLite is a powerful relational database engine. This causes us numerous headaches due to the need to serialize multiple fields together, and since record read from the database during loading can come in any order.\r\n\r\nNotably, for transactions, if we were able to load them in the transaction order assigned by the wallet, PRs like #27865 would be a bit simpler and easier to reason about.\r\n\r\nThis PR makes it possible for us to do that by storing transactions in a separate table. This table has a column for each field in `CWalletTx`, which lets us use a SQL statement like `SELECT * FROM transactions ORDER BY pos` which guarantees us the order in which the transactions are loaded into the wallet.\r\n\r\nThe eventual goal is to use SQLite as a relational database with tables that store our keys and other metadata that can reference each other so that the wallet doesn't just use the database as a storage mechanism. But that is still a work in progress.\r\n\r\nThis PR makes use of the last client opened features introduced in #32895 to determine when the old record style needs to be upgraded to the new transactions table. This should give us sufficient upgrade-downgrade-upgrade handling to not lose any funds.\r\n\r\nDepends on #32763, #32895, #32985, #33032, #33033",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:52:54Z",
      "updated_at": "2026-02-08T09:41:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33034",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1377,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2784259944,
      "number": 33270,
      "title": "stabilize translations by reverting old ids by text content",
      "body": "### Summary\r\n\r\nRegenerating the Qt translation template (`src/qt/locale/bitcoin_en.xlf`) previously used sequential `_msg<N>` IDs. When strings moved within the sorted message list, IDs shifted, creating large diffs and making translation platforms treat unchanged strings as new.\r\n\r\nThis PR switches XLF `<trans-unit id=...>` values to stable IDs derived from a SHA256 hash of the message context and source text.\r\n\r\n### Details\r\n\r\nAs mentioned in https://github.com/bitcoin/bitcoin/pull/33224#issuecomment-3234820665, any change that moves a translatable string within the sorted messages can renumber subsequent entries when IDs are sequential.\r\n\r\nSome English texts can appear in multiple places (e.g. “Clear”) with different meanings depending on the Qt context. To avoid collisions, the hash includes the `<group resname=...>` context.\r\n\r\n### Fix\r\n\r\nThe `translate` target already runs `contrib/devtools/stabilize_xlf_ids.py`. Instead of trying to preserve/renumber `_msg<N>` IDs by matching old/new units, the script now rewrites every `<trans-unit id>` to:\r\n\r\n- `sha256(resname + \"\\0\" + source-text)` (hex)\r\n- keeping the existing plural `[N]` suffix for plural forms\r\n\r\nThe script also checks for duplicate IDs and aborts if any are detected.\r\n\r\nNote: this is a one-time mass change from `_msg<N>` IDs to hashes; after that, rerunning `translate` on an unchanged tree should not churn IDs.\r\n\r\nWith this PR applied, IDs become stable hashes so ordering changes no longer cause renumbering churn.\r\n\r\n### Reproducer\r\n\r\nYou can test the replacer by changing any translatable text:\r\n```patch\r\ndiff --git a/src/qt/bitcoingui.cpp b/src/qt/bitcoingui.cpp\r\n--- a/src/qt/bitcoingui.cpp\t(revision a38b8cf788922174538161cda81ce28f2ac462ec)\r\n+++ b/src/qt/bitcoingui.cpp\t(date 1767310724675)\r\n@@ -258,7 +258,7 @@\r\n     connect(modalOverlay, &ModalOverlay::triggered, tabGroup, &QActionGroup::setEnabled);\r\n \r\n     overviewAction = new QAction(platformStyle->SingleColorIcon(\":/icons/overview\"), tr(\"&Overview\"), this);\r\n-    overviewAction->setStatusTip(tr(\"Show general overview of wallet\"));\r\n+    overviewAction->setStatusTip(tr(\"Show general overview of Wallet\"));\r\n     overviewAction->setToolTip(overviewAction->statusTip());\r\n     overviewAction->setCheckable(true);\r\n     overviewAction->setShortcut(QKeySequence(QStringLiteral(\"Alt+1\")));\r\n```\r\nand regenerating the translations\r\n```bash\r\ncmake --preset dev-mode -DWITH_USDT=OFF && cmake --build build_dev_mode --target translate\r\n```\r\nYou will notice that the new text moved to a different place with a different hash, but all other messages retained their IDs.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-08-29T09:23:56Z",
      "updated_at": "2026-02-08T08:56:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33270",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2676,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1444867984,
      "number": 28122,
      "title": "Silent Payments: Implement BIP352",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. The project is tracked in https://github.com/bitcoin/bitcoin/issues/28536\r\n\r\nBased on https://github.com/bitcoin-core/secp256k1/pull/1698\r\n\r\n## BIP352\r\n\r\nThis PR focuses strictly on the BIP logic and attempts to separate it from the wallet and transaction implementation details. This is accomplished by working directly with public and private keys, instead of needing a wallet backend and transactions for testing. Labels for the receiver are optional and thus deferred for a later PR.\r\n\r\nTest vectors from the BIP are included as unit tests.\r\n",
      "state": "open",
      "user": "josibake",
      "created_at": "2023-07-21T18:36:37Z",
      "updated_at": "2026-02-08T05:20:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28122",
      "labels": [
        "Wallet",
        "Privacy",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 646,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 837470043,
      "number": 24230,
      "title": "indexes: Stop using node internal types and locking cs_main, improve sync logic",
      "body": "This PR lets indexing code mostly run outside of the node process. It also improves indexing sync logic, which is moved out of indexing code to a new [`node::SyncChain()`](https://github.com/ryanofsky/bitcoin/blob/cf6d99bed842361fb06986780097fb80c9e879e4/src/node/chain.h#L21-L36) function.\r\n\r\nAlmost all the commits in this PR are small refactoring changes that move code from `src/index/` to `src/node/`, or replace references to node types like `CBlockIndex`, `CChain`, `CChainState` in index code. There are only two commits affecting indexing sync logic which make complicated or substantive changes:\r\n\r\n- [`8862eddeb68b` indexes: Rewrite chain sync logic, simplify index sync code](https://github.com/bitcoin/bitcoin/pull/24230/commits/8862eddeb68b8871421e8aa4e69c7fa567df4da5)\r\n- [`f458cf8a4ce1` indexes: Initialize indexes without holding cs_main](https://github.com/bitcoin/bitcoin/pull/24230/commits/f458cf8a4ce1c9a21633439122df929dbee53946)\r\n\r\nThe commit messages have more details about these and other changes. Followups to this PR will reuse indexing sync code for wallets (#15719, #11756) and let indexes run in separate processes (#10102)",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-02-01T16:56:28Z",
      "updated_at": "2026-02-08T00:16:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24230",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1234,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 304070624,
      "number": 16545,
      "title": "refactor: Implement missing error checking for ArgsManager flags",
      "body": "Trigger startup errors if bitcoin is configured with bad setting values according to flags. Also raise internal errors if settings are registered and retrieved with inconsistent flags.\n\nThis change has no effect on behavior because the new ArgsManager flags added here are not used outside of tests yet.\n\nIt'll probably be easier to start applying type checking flags to _new_ options than _existing_ options. But for examples of how type checking flags can make sense applied to existing options, see the new [example_options unit test](https://github.com/ryanofsky/bitcoin/blob/pr/argcheck/src/test/argsman_tests.cpp#L27) added in this PR.\n\n---\n\nFollowups:\n\n- Support for flag combinations is possible and is added in commit c919f51c044f0e80ecd301f9c9d396ddff2331ba ([branch](https://github.com/ryanofsky/bitcoin/commits/pr/argcomb))\n- ALLOW_LIST flags are added and enforced in [#17580](https://github.com/bitcoin/bitcoin/pull/17580)\n- Bad IsArgSet usages with ALLOW_LIST are removed in [#30529](https://github.com/bitcoin/bitcoin/pull/30529) and prevented in [#17783](https://github.com/bitcoin/bitcoin/pull/17783)\n- Confusing and ignored multiple assignments in config files are disallowed in [#17493](https://github.com/bitcoin/bitcoin/pull/17493)\n- Confusing reverse-precedence settings merging code is removed in [#17581](https://github.com/bitcoin/bitcoin/pull/17581)\n- Type flags added in this PR implement runtime part of a change to add more compile-time checking in [#22978](https://github.com/bitcoin/bitcoin/pull/22978)\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-08-04T14:13:12Z",
      "updated_at": "2026-02-07T21:28:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/16545",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1600,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1640676570,
      "number": 29060,
      "title": "Policy: Report debug message why inputs are non standard",
      "body": "This PR is another attempt at  #13525.\r\n\r\nTransactions that fail `PreChecks` Validation due to non-standard inputs now  returns invalid validation state`TxValidationResult::TX_INPUTS_NOT_STANDARD` along with a debug error message.\r\n\r\nPreviously, the debug error message for non-standard inputs do not specify why the inputs were considered non-standard. \r\nInstead, the same error string, `bad-txns-nonstandard-inputs`, used for all types of non-standard input scriptSigs.\r\n\r\nThis PR updates the `AreInputsStandard`  to include the reason why inputs are non-standard in the debug message.\r\nThis improves the `Precheck` debug message to be more descriptive.\r\n\r\nFurthermore, I have addressed all remaining comments from #13525 in this PR.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2023-12-12T13:16:05Z",
      "updated_at": "2026-02-07T20:24:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29060",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 794,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2607107167,
      "number": 32784,
      "title": "wallet: derivehdkey RPC to get xpub at arbitrary path",
      "body": "Given a (blank) wallet with an `unused(KEY)` descriptor, `derivehdkey \"m/87h/0h/0h\"` gets the xpub or xpriv at any given path.\r\n\r\nThis is particularly useful for multisig setup where it's not desirable to use our default derivations (e.g. 44h).\r\n\r\nI updated the multisig tutorial and the functional test.\r\n\r\nBased on:\r\n- #29136",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-06-20T11:04:39Z",
      "updated_at": "2026-02-07T16:50:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32784",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 381,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2293151984,
      "number": 31715,
      "title": "build: CMake security checks workarounds",
      "body": "This includes 2 hackish workarounds for our security checks, which are themselves quite hackish. It's unclear exactly what they're supposed to be testing and why.\r\n\r\nRegardless, these changes are enough to fix the checks when no CXXFLAGS are passed in.\r\n\r\nFrom what I can tell, the tests are intended to be self-contained and have a default set of flags, then each tests disables a default and verifies that security is weakened as intended. I'm not sure what the utility of that is, but in that spirit I've fixed up the default flags/compiles to work on their own.\r\n\r\nThe first is a real fix for the test source that gives us a better guarantee that fortification will be turned on. The second adds the flag that fortification requires rather than taking it from our build CXXFLAGS.",
      "state": "closed",
      "user": "theuni",
      "created_at": "2025-01-22T21:41:46Z",
      "updated_at": "2026-02-07T11:08:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31715",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 824,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2317832800,
      "number": 31800,
      "title": "depends: Avoid using the `-ffile-prefix-map` compiler option",
      "body": "This PR is similar to https://github.com/bitcoin/bitcoin/pull/31337 and applies analogous changes to all dependency packages.\r\n\r\nThe issue was [recently noticed](https://github.com/bitcoin/bitcoin/pull/31661#discussion_r1923896475) when `-ffile-prefix-map` was added to the `libevent` package, which is built in OSS-Fuzz.\r\n\r\nThis PR replaces `-ffile-prefix-map` in all packages for consistency.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31770.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-02-05T14:56:12Z",
      "updated_at": "2026-02-07T11:08:47Z",
      "merged_at": "2025-02-07T11:10:02Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31800",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 513,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2319593945,
      "number": 31809,
      "title": "Prepare \"Open Transifex translations for v29.0\" release step",
      "body": "This PR follows our [Release Process](https://github.com/bitcoin/bitcoin/blob/864386a7444fb5cf16613956ce8bf335f51b67d5/doc/release-process.md).\r\n\r\nIt is required to open Transifex translations for v29.0, as scheduled in https://github.com/bitcoin/bitcoin/issues/31029.\r\n\r\nThe previous similar PR: https://github.com/bitcoin/bitcoin/pull/30548.\r\n\r\n**Notes for reviewers:**\r\n\r\n1. This is the first release process conducted after migrating the build system to CMake. This revealed a bug, which is fixed in the second commit\r\n\r\n2. To reproduce the diff in the third commit, follow these steps:\r\n```\r\ngmake -C depends -j $(nproc) MULTIPROCESS=1\r\ncmake --preset dev-mode --toolchain depends/$(./depends/config.guess)/toolchain.cmake\r\ncmake --build build_dev_mode --target translate\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-02-06T10:44:36Z",
      "updated_at": "2026-02-07T11:08:46Z",
      "merged_at": "2025-02-06T20:22:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31809",
      "labels": [
        "GUI"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 842,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2320911080,
      "number": 31814,
      "title": "ci: Bump fuzz task timeout",
      "body": "The fuzz task seems to be the most CPU intense task (going through GB of data through all fuzz inputs for all fuzz targets).\r\n\r\nNormally, the task takes 44 minutes (example https://cirrus-ci.com/task/5077976091459584), but under higher load, it may take longer (https://cirrus-ci.com/task/5966231095738368).\r\n\r\nI tried to move it to GHA to see how it compares, but it will be even slower there: https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/13182526514/job/36796629409.\r\n\r\nThe CI machines were recently updated to increase the CI performance, so in theory they could be updated again, but this can take some time and seems like the wrong fix anyway, because it will just hide the problem:\r\n\r\nIdeally fuzzing is fast and when evaluating a fuzz input takes more than 10 seconds, it feels more like a slow unit test loop. So ideally fuzz timeouts should be fixed (https://github.com/bitcoin/bitcoin/issues/31066, https://github.com/bitcoin/bitcoin/issues/30498, ...). However, this can also take time.\r\n\r\nSo temporarily bump the fuzz timeout for now.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-06T21:18:29Z",
      "updated_at": "2026-02-07T11:08:45Z",
      "merged_at": "2025-02-07T09:47:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31814",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1089,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2320375231,
      "number": 31811,
      "title": "test: test_inv_block, use mocktime instead of waiting",
      "body": "Performance issue reported in https://github.com/bitcoin/bitcoin/pull/31437#issuecomment-2640221382\r\n\r\nIt seems that code as-is waits for wall-clock time to pass to synchronize mempools. Locally, sometimes the subtest takes a couple seconds, sometimes it takes an additional minute.\r\n\r\nJust use mocktime?",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-02-06T16:37:02Z",
      "updated_at": "2026-02-07T11:08:45Z",
      "merged_at": "2025-02-07T16:30:35Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31811",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 358,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1966370491,
      "number": 30437,
      "title": "ipc: add bitcoin-mine test program",
      "body": "Add [`bitcoin-mine`](https://github.com/ryanofsky/bitcoin/blob/pr/mine/src/bitcoin-mine.cpp#L20-L37) executable to test connecting to the `bitcoin-node` process over a unix socket and calling [`interface::Mining`](https://github.com/ryanofsky/bitcoin/blob/pr/mine/src/interfaces/mining.h) methods.\r\n\r\nThis is useful as discussed in https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-2222418506 to work on getting mining code working in an external process.\r\n\r\nThis PR initially supported spawning a new `bitcoin-node` process if a connection could not be established with an existing process, but it was dropped to simplify the code. A branch building on this PR and adding that support is\r\n[pr/mine-detach](https://github.com/ryanofsky/bitcoin/commits/pr/mine-detach).\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-07-12T10:37:28Z",
      "updated_at": "2026-02-07T10:54:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30437",
      "labels": [
        "Needs rebase",
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 924,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3034182041,
      "number": 33922,
      "title": "mining: add getMemoryLoad() and track template non-mempool memory footprint",
      "body": "Implements a way to track the memory footprint of all non-mempool transactions that are still being referenced by block templates, see discussion in  #33899. It does not impose a limit.\r\n\r\nIPC clients can query this footprint (total, across all clients) using the `getMemoryLoad()` IPC method. Its client-side usage is demonstrated here:\r\n- https://github.com/stratum-mining/sv2-tp/pull/63\r\n\r\nAdditionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client drops references to them, or calls the template destroy method, or disconnects. The destroy method is called automatically by clients using [libmultiprocess](https://github.com/bitcoin-core/libmultiprocess), as [sv2-tp](https://github.com/stratum-mining/sv2-tp) does. In the Python tests it also happens when references are destroyed or go out of scope.\r\n\r\nThe PR starts with preparation refactor commits:\r\n\r\n1. Tweaks `interface_ipc.py` so `destroy()` calls happen in an order that's useful to later demonstrate memory management\r\n2. Change `std::unique_ptr<BlockTemplate> block_template` from a `static` defined in `rpc/mining.cpp` to `NodeContext`. This prevents a crash when we switch to a non-trivial destructor later (which uses `m_node`).\r\n\r\nThen the main commits:\r\n\r\n3. Add `template_tx_refs` to `NodeContext` to track how many templates contain any given transaction. This map is updated by the `BlockTemplate` constructor and destructor.\r\n4. Add `GetTemplateMemoryUsage()` which loops over this map and sums up the memory footprint for transactions outside the mempool\r\n5. Expose this information to IPC clients via `getMemoryLoad()` and add test coverage\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-21T15:34:14Z",
      "updated_at": "2026-02-07T10:42:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33922",
      "labels": [
        "Mining",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1801,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3224372522,
      "number": 34450,
      "title": "[29.x] backports + final changes for 29.3rc2",
      "body": "Backport:\r\n\r\n* #34236\r\n\r\nAnd finalize 29.3rc2.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2026-01-29T17:13:26Z",
      "updated_at": "2026-02-07T09:39:45Z",
      "merged_at": "2026-01-30T11:41:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34450",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 91,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3193617894,
      "number": 34360,
      "title": "bench: add WalletBalanceManySpent for high-history wallet scenario",
      "body": "This PR introduces a new benchmark that measures `GetBalance()` performance on wallets with extensive transaction history where the majority of outputs have already been spent.\r\n\r\nIt was created to test #27865, which separates spent TXOs from spendable ones.\r\nThis pattern mirrors real-world usage in high-activity wallets such as Lightning nodes, exchanges, hot wallets, and payment processors.\r\n\r\n**Setup:**\r\n- Creates 500 blocks × 100 coinbase outputs = 50,000 wallet TXOs\r\n- Matures all coinbases with COINBASE_MATURITY additional blocks\r\n- Spends 49,950 outputs in batched transactions (confirmed in blocks)\r\n- Consolidation outputs go to a burn script to avoid inflating wallet TXO count\r\n                                                                                                                                         \r\nTo keep the setup time reasonable, the benchmark uses the fast “fake block” approach, similar to `wallet_create_tx.cpp`.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-01-21T03:15:17Z",
      "updated_at": "2026-02-07T08:57:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34360",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1021,
        "has_nack": false,
        "has_ack": false
      }
    }
  ],
  "issues": [
    {
      "id": 854937077,
      "number": 21647,
      "title": "RPC importprunedfunds doesn't allow importing spending txs, only receiving txs",
      "body": "I noticed one of my wallets shows that I own funds that I really don't. I identified the spending transaction and tried to import it using 'importprunedfunds' but was told:\r\n\r\n`No addresses in wallet correspond to included transaction`\r\n\r\nIt turns out that 'importprunedfunds' only allows you to import txs which credit an address owned by your wallet. It won't let you import txs which spend from addresses owned by your wallet.\r\n\r\nI made the following change and then was able to import the missing transaction:\r\n\r\n    --- a/src/wallet/rpcdump.cpp\r\n    +++ b/src/wallet/rpcdump.cpp\r\n    @@ -372,7 +372,7 @@ RPCHelpMan importprunedfunds()\r\n         CWalletTx::Confirmation confirm(CWalletTx::Status::CONFIRMED, height, merkleBlock.header.GetHash(), txnIndex);\r\n     \r\n         CTransactionRef tx_ref = MakeTransactionRef(tx);\r\n    -    if (pwallet->IsMine(*tx_ref)) {\r\n    +    if (pwallet->IsMine(*tx_ref) || pwallet->IsFromMe(*tx_ref)) {\r\n             pwallet->AddToWallet(std::move(tx_ref), confirm);\r\n             return NullUniValue;\r\n         }",
      "state": "open",
      "user": "dooglus",
      "created_at": "2021-04-10T00:36:28Z",
      "updated_at": "2026-02-13T18:33:00Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/21647",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 3898711517,
          "user": "ShirshenduR",
          "body": "@dooglus Can i work on this issue and raise PR",
          "created_at": "2026-02-13T18:33:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 46,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1130,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3938408116,
      "number": 34584,
      "title": "Bug: Race Condition in Mempool Fee Estimation Leading to Consensus Failure",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen transactions are re-admitted to the mempool during block reorganizations, a race condition exists between [UpdateTransactionsFromBlock()](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) and [LimitMempoolSize()](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) that causes:\n\nStale UTXO cache ([m_view](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) data used for transaction validation\nValid transactions incorrectly rejected with \"mempool full\"\nInconsistent mempool state across nodes during reorg windows\nPotential consensus divergence between peers\nAffected Code: [validation.cpp](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) lines 300-400 ([MaybeUpdateMempoolForReorg](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) and lines 585-900 ([MemPoolAccept](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) class)\n\nExpected Behaviour\nUTXO cache should be properly synchronized after mempool state changes\nTransaction validation must use current, accurate coin data\nAll nodes should reach consistent mempool state regardless of timing\nNo race conditions between mempool trimming and transaction acceptance\n\n### Expected behaviour\n\nMempool fee calculations should remain consistent and accurate during block reorganizations\nUTXO cache ([m_view](vscode-file://vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)) must be properly synchronized after any mempool state change\nTransaction validation should use fresh, accurate coin data\nNo race conditions should exist between mempool trimming and fee estimation\nAll nodes should reach consensus on mempool contents regardless of timing\n\n### Steps to reproduce\n\nRun Bitcoin Core with near-full mempool: bitcoind -maxmempool=300 -debug=mempool -regtest\n\n2.Generate blocks and fill mempool to ~90% capacity\n3.Trigger manual reorg (2-3 blocks deep): bitcoin-cli invalidateblock <block_hash>\nbitcoin-cli reconsiderblock <block_hash>\n3.During the reorg window, broadcast transactions with borderline fees (near mempool minimum)\n4.Observe inconsistent acceptance across nodes - some accept, others reject as \"mempool full\"\n\n### Relevant log output\n\n2026-02-13T10:23:45Z [mempool] replacing mempool tx abc123... (fees=500, vsize=250)\n2026-02-13T10:23:45Z [validation] AcceptToMemoryPool: tx REJECTED (reason: mempool full)\n2026-02-13T10:23:45Z [validation] BUG! PLEASE REPORT THIS! CheckInputScripts failed\n2026-02-13T10:23:46Z [mempool] transaction failed: mempool full (code 64)\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core version v30.99.0-dev\n\n### Operating system and version\n\nUbuntu 22.04 LTS Also reproducible on macOS 13+ and Windows 10/11\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "vishalharkal15",
      "created_at": "2026-02-13T18:10:56Z",
      "updated_at": "2026-02-13T18:19:19Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34584",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3540,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3901573586,
      "number": 34513,
      "title": "CMake 4.1.0+ fails to configure cross-build for macOS with Ninja generator",
      "body": "When cross-compiling for macOS on Linux, the configuration step fails when using the Ninja generator:\n```\n$ gmake -j $(nproc) -C depends HOST=x86_64-apple-darwin NO_QT=1\n$ cmake -B build -G Ninja --toolchain depends/x86_64-apple-darwin/toolchain.cmake\n<snip>\nCMake Error at src/CMakeLists.txt:301 (add_executable):\n  The install of the bitcoind target requires changing an RPATH from the\n  build tree, but this is not supported with the Ninja generator unless on an\n  ELF-based or XCOFF-based platform.  The CMAKE_BUILD_WITH_INSTALL_RPATH\n  variable may be set to avoid this relinking step.\n\n\n<snip>\n```\n\nThis behavior is observed with CMake starting from version 4.1.0.\n\nThis issue does not occur when building with depends on macOS.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-05T13:25:18Z",
      "updated_at": "2026-02-13T18:10:31Z",
      "closed_at": null,
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/issues/34513",
      "labels": [
        "macOS",
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3870643123,
          "user": "fanquake",
          "body": "> If this issue started happening with cmake 4.1.0, maybe it is a new bug or limitation of that cmake version. \n\nYea. I'd think the first thing to look at would be the release notes for that version, as I'd a assume a change in behaviour like this would be documented. If not, maybe another issue can be opened upstream.",
          "created_at": "2026-02-09T09:52:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 320,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3877125243,
          "user": "fanquake",
          "body": "I also cannot recreate this issue using the steps provided, and CMake `4.2.3`:\n```bash\ngmake -j15 -C depends HOST=x86_64-apple-darwin NO_QT=1\ncmake -B build -G Ninja --toolchain depends/x86_64-apple-darwin/toolchain.cmake\ncmake --build build -j15\n```\nWorks fine, building on arm64 macOS.",
          "created_at": "2026-02-10T11:50:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 287,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3883129727,
          "user": "hebasto",
          "body": "> I also cannot recreate this issue using the steps provided, and CMake `4.2.3`:\n> \n> gmake -j15 -C depends HOST=x86_64-apple-darwin NO_QT=1\n> cmake -B build -G Ninja --toolchain depends/x86_64-apple-darwin/toolchain.cmake\n> cmake --build build -j15\n> \n> Works fine, building on arm64 macOS.\n\nRight, the issue only manifests when building on Linux.",
          "created_at": "2026-02-11T09:00:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 348,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3883147476,
          "user": "fanquake",
          "body": "> only manifests when building on Linux.\n\nCan you put all of the relevant information, and required steps into the issue description. As well as test with the latest available version of CMake?",
          "created_at": "2026-02-11T09:04:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 193,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3883398936,
          "user": "hebasto",
          "body": "> > only manifests when building on Linux.\n> \n> Can you put all of the relevant information, and required steps into the issue description. As well as test with the latest available version of CMake?\n\nUpdated.\n\nThe issue is caused by this code:https://github.com/bitcoin/bitcoin/blob/fd625d84ae9e73cb2ce98cceca199ed831d8b0f4/CMakeLists.txt#L72-L76",
          "created_at": "2026-02-11T09:58:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 347,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3883751359,
          "user": "fanquake",
          "body": "> The issue is caused by this code:\n\nThat code has existed since we migrated to CMake, so it looks like you'll need to investigate what has changed upstream, to now cause this change in behaviour.",
          "created_at": "2026-02-11T11:10:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 196,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3898600856,
          "user": "hebasto",
          "body": "> > The issue is caused by this code:\n> \n> That code has existed since we migrated to CMake, so it looks like you'll need to investigate what has changed upstream, to now cause this change in behaviour.\n\nBisecting pointed at commit [`eb8facd39606e9472f9ff6de40d7caf76767d0da`](https://gitlab.kitware.com/cmake/cmake/-/commit/eb8facd39606e9472f9ff6de40d7caf76767d0da) from [MR10721](https://gitlab.kitware.com/cmake/cmake/-/merge_requests/10721).\n\ncc @purpleKarrot ",
          "created_at": "2026-02-13T18:10:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 464,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 809,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3586989882,
      "number": 33777,
      "title": "Mining interface tracking issue",
      "body": "The mining interface is defined in:\n- https://github.com/bitcoin/bitcoin/blob/master/src/interfaces/mining.h\n- https://github.com/bitcoin/bitcoin/blob/master/src/ipc/capnp/mining.capnp\n\nClients that are known to depend on it:\n- https://github.com/stratum-mining/sv2-tp\n- https://github.com/stratum-mining/sv2-apps/tree/main/bitcoin-core-sv2\n\nThe changes below are not breaking, unless mentioned otherwise. Adding new methods or new arguments to existing methods is not a breaking change.\n\n- [x] #33965 \n  - [ ] #33966\n- [ ] #34568\n  - [ ] #34184\n- [x] #33819\n- [x] #32420 \n- [ ] #34020\n- [ ] #33899\n  - [ ] #33922\n- [ ] #33756 \n\nAt this state it's OK to make breaking changes, such as deleting a method or changing its signature. But ideally we should do so once in a major release, collecting a bunch of fixes.\n\n- [ ] low priority breaking change(s): https://github.com/Sjors/bitcoin/pull/106\n  - https://github.com/Sjors/bitcoin/pull/106/changes/2ece972a3f78cb7faaf75b6271016316ead572f4: clear dummy coinbase by default\n  - https://github.com/Sjors/bitcoin/pull/106/changes/40d1886584d3d7c89fa5656e325222edd51c2f89: `alwaysAddCoinbaseCommitment`: need to check if this already done\n\nMisc related:\n\n- [ ] #30437",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-04T15:05:33Z",
      "updated_at": "2026-02-13T14:45:01Z",
      "closed_at": null,
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/issues/33777",
      "labels": [
        "Mining",
        "interfaces",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3897568585,
          "user": "Sjors",
          "body": "Remaining bucket list for v31:\n- #34568 (split out from the cooldown PR, also drops previously deprecated methods and adds defaults)\n- #34184\n- https://github.com/bitcoin-core/libmultiprocess/pull/240",
          "created_at": "2026-02-13T14:38:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 200,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1244,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3776199105,
      "number": 34189,
      "title": "qa: Intermittent failure in `interface_zmq.py`",
      "body": "On NetBSD 10.1, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20650397747/job/59294288757:\n```\n83/282 - interface_zmq.py failed, Duration: 24 s\n\nstdout:\n2026-01-02T07:12:07.928049Z TestFramework (INFO): PRNG seed is: 38669556040563964\n2026-01-02T07:12:07.929628Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208\n2026-01-02T07:12:08.575045Z TestFramework (INFO): Running basic test with tcp protocol\n2026-01-02T07:12:09.507193Z TestFramework (INFO): Generate 5 blocks (and 5 coinbase txes)\n2026-01-02T07:12:09.530057Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:10.562029Z TestFramework (INFO): Test the getzmqnotifications RPC\n2026-01-02T07:12:10.564742Z TestFramework (INFO): Running basic test with ipc protocol\n2026-01-02T07:12:11.856205Z TestFramework (INFO): Generate 5 blocks (and 5 coinbase txes)\n2026-01-02T07:12:12.058310Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:13.083968Z TestFramework (INFO): Test the getzmqnotifications RPC\n2026-01-02T07:12:13.086669Z TestFramework (INFO): Testing 'sequence' publisher\n2026-01-02T07:12:14.885021Z TestFramework (INFO): Wait for tx from second node\n2026-01-02T07:12:15.908518Z TestFramework (INFO): Testing sequence notifications with mempool sequence values\n2026-01-02T07:12:15.908753Z TestFramework (INFO): Testing RBF notification\n2026-01-02T07:12:18.053138Z TestFramework (INFO): Testing reorg notifications\n2026-01-02T07:12:21.179247Z TestFramework (INFO): Evict mempool transaction by block conflict\n2026-01-02T07:12:21.227439Z TestFramework (INFO): Testing 'mempool sync' usage of sequence notifier\n2026-01-02T07:12:31.964971Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 130, in run_test\n    self.test_reorg()\n    ~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 291, in test_reorg\n    assert_equal(self.nodes[1].getbestblockhash(), hashblock.receive().hex())\n                                                   ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 70, in receive\n    return self._receive_from_publisher_and_check()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/interface_zmq.py\", line 57, in _receive_from_publisher_and_check\n    topic, body, seq = self.socket.recv_multipart()\n                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/usr/pkg/lib/python3.13/site-packages/zmq/sugar/socket.py\", line 799, in recv_multipart\n    parts = [self.recv(flags, copy=copy, track=track)]\n             ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"zmq/backend/cython/_zmq.py\", line 1218, in zmq.backend.cython._zmq.Socket.recv\n  File \"zmq/backend/cython/_zmq.py\", line 1253, in zmq.backend.cython._zmq.Socket.recv\n  File \"zmq/backend/cython/_zmq.py\", line 1413, in zmq.backend.cython._zmq._recv_copy\n  File \"zmq/backend/cython/_zmq.py\", line 1408, in zmq.backend.cython._zmq._recv_copy\n  File \"zmq/backend/cython/_zmq.py\", line 186, in zmq.backend.cython._zmq._check_rc\nzmq.error.Again: Resource temporarily unavailable\n2026-01-02T07:12:32.029675Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2026-01-02T07:12:32.029851Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208\n2026-01-02T07:12:32.029981Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208/test_framework.log\n2026-01-02T07:12:32.030241Z TestFramework (ERROR): \n2026-01-02T07:12:32.030452Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260102_070533/interface_zmq_208' to consolidate all logs\n2026-01-02T07:12:32.030546Z TestFramework (ERROR): \n2026-01-02T07:12:32.030632Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2026-01-02T07:12:32.030825Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2026-01-02T07:12:32.030973Z TestFramework (ERROR): \n\n\nstderr:\n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-02T11:43:19Z",
      "updated_at": "2026-02-13T10:46:13Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34189",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3896496795,
          "user": "Hijanhv",
          "body": "@hebasto please review my pr \n",
          "created_at": "2026-02-13T10:46:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 30,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5037,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 29027200,
      "number": 3828,
      "title": "Clients leak IPs if they are recipients of a transaction",
      "body": "So, this paper http://ifca.ai/fc14/papers/fc14_submission_71.pdf got me thinking about the current rules for transaction rebroadcasting:\n\nOnce a transaction has been broadcast, you stop rebroadcasting. Unless you own txins or txouts in the transaction. \n\nSo, you use the paper's techniques. But you can be much more speculative than they are, and get a low-likelihood but possible IP match for an address, connect your client up, and issue a transaction paying yourself and a small amount to the address you're interested in, just over the dust amount.\n\nThe transaction should be constructed so it's unlikely to be mined.\n\nThe transaction traverses the network, then it stops being rebroadcast, _except_ by the recipient and you. If your client is connected to the wallet that owns the address, it will see rebroadcasting for some time, providing a very strong link between the two.\n\nThis seems like a bad outcome. \n\nI speculate that the 1Sochi transactions may have this motivation -- mapping addresses to determine IPs at large in Bitcoin. \n\nIt seems like the simplest thing would be to not re-re-broadcast to clients you've already spoken to, but I'll wait for smarter people than me to work out the right fix.\n",
      "state": "open",
      "user": "vessenes",
      "created_at": "2014-03-08T18:36:48Z",
      "updated_at": "2026-02-13T09:51:17Z",
      "closed_at": null,
      "comments": 26,
      "url": "https://github.com/bitcoin/bitcoin/issues/3828",
      "labels": [
        "Wallet",
        "Privacy"
      ],
      "comment_data": [
        {
          "id": 3896147766,
          "user": "vasild",
          "body": "https://github.com/bitcoin/bitcoin/pull/34533 engages the [private broadcast method](https://github.com/bitcoin/bitcoin/pull/29415) for wallet re-broadcasts. That would solve the issue from the PR description, alas only if `-privatebroadcast` is enabled.\n\nA more generic approach would be to not treat own transactions specially. That does not mean to not re-broadcast them, but to also re-broadcast all other transactions that should have been mined.",
          "created_at": "2026-02-13T09:51:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 451,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1271,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3928090465,
      "number": 34563,
      "title": "COPYING: Correct start date for \"The Bitcoin Core developers\" copyright line",
      "body": "## Summary\n\nThe COPYING file dates \"The Bitcoin Core developers\" from 2009, but that\nproject name didn't exist until the v0.9.0 rebrand in March 2014.\n\nThis change reflects historical naming, not contributor scope — early\ncontributors' work is fully covered under \"Bitcoin Developers.\"\n\n## Evidence from git history\n\n| Commit | Date | Author | Copyright Notice |\n|--------|------|--------|-----------------|\n| `e071a3f6c06f` | 2009-08-30 | sirius-m | `Copyright (c) 2009 Satoshi Nakamoto` |\n| `98500d70a8cf` | 2010-02-12 | s_nakamoto | `Copyright (c) 2009-2010 Satoshi Nakamoto` |\n| `fc73ad644f0b` | 2010-12-13 | s_nakamoto | `Copyright (c) 2009-2010 Bitcoin Developers` |\n| `3b00e7c23164` | 2015-04-22 | sandakersmann | `Copyright (c) 2009-2015 The Bitcoin Core developers` |\n| `d552ed678c26` | 2017-09-13 | Paul Berg (committed by gmaxwell) | Restored `Bitcoin Developers` as 2nd line |\n\nKey points:\n- Satoshi replaced his own name with \"Bitcoin Developers\" in his final v0.3.19\n  release (Dec 2010, `fc73ad644f0b`)\n- The project was known as \"Bitcoin\" with \"Bitcoin Developers\" until the v0.9.0\n  rebrand to \"Bitcoin Core\" (March 2014; see #3203, #3408)\n- In 2015, `3b00e7c23164` replaced \"Bitcoin Developers\" with \"The Bitcoin Core\n  developers\" and backdated it to 2009\n- #11318 (gmaxwell, 2017) partially addressed this by restoring \"Bitcoin\n  Developers\" as a second line — sipa identified `3b00e7c` as having introduced\n  the naming error. However, the start date was not corrected\n\n## Current state\n\n```\nCopyright (c) 2009-2026 The Bitcoin Core developers\nCopyright (c) 2009-2026 Bitcoin Developers\n```\n\n## Proposed fix\n\n```\nCopyright (c) 2014-2026 The Bitcoin Core developers\nCopyright (c) 2009-2026 Bitcoin Developers\n```\n\nThe only change is `2009` → `2014` on the first line, correcting it to reflect\nwhen the \"Bitcoin Core\" name came into use. Line order is unchanged.\n\nThis is a single-number fix consistent with the project's preference for\naccurate copyright notices, as demonstrated by #11318. No change to the license\ntext itself.",
      "state": "closed",
      "user": "melvincarvalho",
      "created_at": "2026-02-11T18:45:01Z",
      "updated_at": "2026-02-13T09:37:18Z",
      "closed_at": "2026-02-13T09:37:18Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34563",
      "labels": [],
      "comment_data": [
        {
          "id": 3896034088,
          "user": "maflcko",
          "body": "I don't understand the issue here. What is the downside or harm this is fixing? I wasn't around at that time, but there are certainly developers that contributed to this git repo after 2015, who have also contributed to it before. So if this is changed now, in 5 years someone else is going to change it back again. I just don't see the point here.\n\nIn any case, I'll go ahead and close this for now. The discussion can continue in the pull request. There is no need to have two threads.",
          "created_at": "2026-02-13T09:37:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 487,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2125,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2938722929,
      "number": 32111,
      "title": "wallet: migratewallet crashes \"Assertion `m_wallet_flags == 0' failed\"",
      "body": "`migratewallet` crashes on malformed `wallet.dat`s which is unlikely to happen with wallets created by old Bitcoin Core versions but we should probably return an error to the user instead of crashing.\n\n<details>\n\n<summary>Base64 encoded `wallet.dat` that causes a crash</summary>\n\n```\nAAAAAAEAAAAAAAAAYjEFAAkAAAAAEAAAAAkAAAAAAAADAAAAAAAAAAAAAAAAAAAAIAAAAHsA+AEBAwEAQ0PCvWvWAgAAAAAAAAAAAAIAAAAAAAAAIAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAgDwDwEF+A/wDwAAAQAAAAAAAAAAAAAAAAAAACAAAAB7APgBAQMBAENDwr1r1gIAAAAAAAAAAAACAAAAAAAAACAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAQAAAAIABAABbWFpbgAAAAAAAQAAAAIAAABiMQUACQAAAAAQAAAACQAAAAAAAAIAAAAAAAAAAAAAAAAAAAAgAAAAewD4AQEDAQBDQ8K9a9YCAAAAAAAAAAAAAgAAAAAAAAAgAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAAKAGQPAQXID7wP9A/sD6wPpA/cD9QPjA9kDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUAAYARAQABBiJuRhEaC1nKrxJgQ+tbvyjDTzpeMyofx7K3PPGIkQ8TAAESYmVzdGJsb2PEX25vbWVya2xlAAAFAAGAEQEAAAoAAQliZXN0YmxvY2sAAAAIAAF/AGQAAAAAAAAGAAEFZmxhZ3MZAAAEAAGslwIAAAsAAQptaW52ZXJzaW9uAAAEAAEUHwQAAAgAAQd2ZXJzaW9uAA==\n```\n\n</details>\n\n```\nbitcoind: wallet/wallet.cpp:1772: void wallet::CWallet::InitWalletFlags(uint64_t): Assertion `m_wallet_flags == 0' failed.\nAddressSanitizer:DEADLYSIGNAL\n=================================================================\n==2322018==ERROR: AddressSanitizer: ABRT on unknown address 0x000000236e62 (pc 0x7f761dfe2eec bp 0x7f76194f46c0 sp 0x7f76194f29f0 T3)\n    #0 0x7f761dfe2eec  (/lib/x86_64-linux-gnu/libc.so.6+0x8aeec) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #1 0x7f761df93fb1 in raise (/lib/x86_64-linux-gnu/libc.so.6+0x3bfb1) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #2 0x7f761df7e471 in abort (/lib/x86_64-linux-gnu/libc.so.6+0x26471) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #3 0x7f761df7e394  (/lib/x86_64-linux-gnu/libc.so.6+0x26394) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #4 0x7f761df8cec1 in __assert_fail (/lib/x86_64-linux-gnu/libc.so.6+0x34ec1) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #5 0x560e8c463c9d in wallet::CWallet::InitWalletFlags(unsigned long) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:1772:5\n    #6 0x560e8c41cbaa in wallet::CWallet::Create(wallet::WalletContext&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::unique_ptr<wallet::WalletDatabase, std::default_delete<wallet::WalletDatabase>>, unsigned long, bilingual_str&, std::vector<bilingual_str, std::allocator<bilingual_str>>&) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:3070:25\n    #7 0x560e8c4c4db9 in wallet::MigrateLegacyToDescriptor(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::__cxx11::basic_string<char, std::char_traits<char>, secure_allocator<char>> const&, wallet::WalletContext&) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:4463:45\n    #8 0x560e8c29f469 in wallet::migratewallet()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /bitcoin/build_fuzz/src/wallet/./wallet/rpc/wallet.cpp:802:49\n```",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2025-03-21T15:16:50Z",
      "updated_at": "2026-02-13T07:27:54Z",
      "closed_at": "2026-02-13T07:27:54Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32111",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3890434583,
          "user": "fanquake",
          "body": "Was this fixed by https://github.com/bitcoin/bitcoin/pull/32636?",
          "created_at": "2026-02-12T11:41:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 64,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3895331245,
          "user": "davidgumberg",
          "body": "I've tested that this no longer occurs on master (with a debug build):\n\n\n```bash\nBAD_DAT=\"AAAAAAEAAAAAAAAAYjEFAAkAAAAAEAAAAAkAAAAAAAADAAAAAAAAAAAAAAAAAAAAIAAAAHsA+AEBAwEAQ0PCvWvWAgAAAAAAAAAAAAIAAAAAAAAAIAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAgDwDwEF+A/wDwAAAQAAAAAAAAAAAAAAAAAAACAAAAB7APgBAQMBAENDwr1r1gIAAAAAAAAAAAACAAAAAAAAACAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAQAAAAIABAABbWFpbgAAAAAAAQAAAAIAAABiMQUACQAAAAAQAAAACQAAAAAAAAIAAAAAAAAAAAAAAAAAAAAgAAAAewD4AQEDAQBDQ8K9a9YCAAAAAAAAAAAAAgAAAAAAAAAgAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAAKAGQPAQXID7wP9A/sD6wPpA/cD9QPjA9kDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUAAYARAQABBiJuRhEaC1nKrxJgQ+tbvyjDTzpeMyofx7K3PPGIkQ8TAAESYmVzdGJsb2PEX25vbWVya2xlAAAFAAGAEQEAAAoAAQliZXN0YmxvY2sAAAAIAAF/AGQAAAAAAAAGAAEFZmxhZ3MZAAAEAAGslwIAAAsAAQptaW52ZXJzaW9uAAAEAAEUHwQAAAgAAQd2ZXJzaW9uAA==\"\nmkdir -p /tmp/temp_datadir/regtest/bad_wallet\necho $BAD_DAT | base64 -d > /tmp/temp_datadir/regtest/bad_wallet/wallet.dat\n\n./build/bin/bitcoind -regtest -datadir=/tmp/temp_datadir -daemonwait\n./build/bin/bitcoin-cli -regtest -datadir=/tmp/temp_datadir migratewallet bad_wallet\n```\n\nbut this crashes on e.g. `29.x` so #32636 fixed this.",
          "created_at": "2026-02-13T07:22:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 22275,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 24220,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2938736424,
      "number": 32112,
      "title": "wallet: migratewallet crashes \"Assertion `legacy_spkm' failed\"",
      "body": "`migratewallet` crashes on malformed `wallet.dat`s which is unlikely to happen with wallets created by old Bitcoin Core versions but we should probably return an error to the user instead of crashing.\n\n<details>\n\n<summary>Base64 encoded `wallet.dat` that causes a crash</summary>\n\n```\nAAAAAAEAAAAAAAAAYjEFAAkAAAAAEAAAAAkAAAAAAAADAAAAAAAAAAAAAAAAAAAAIAAAAHsA+AEBAwEAQ0PCvWvWAgAAAAAAAAAAAAIAAAAAAAAAIAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADe////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAgDwDwEF+A/wDwAAAQAAAAAAAAAAAAAAAAAAACAAAAB7APgBAQMBAENDwr1r1gIAAAAAAAAAAAACAAAAAAAAACAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAQAAAAIABAABbWFpbgAAAAAAAQAAAAIAAABiMQUACQAAAAAQAAAACQAAAAAAAAIAAAAAAAAAAAAAAAAAAAAgAAAAewD4AQEDAQBDQ8K9a9YCAAAAAAAAAAAAAgAAAAAAAAAgAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAAKAGQPAQXID7wP9A/sD4wPpA/cD9QPjA9kDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUAAYARAQABBiJuRhEaC1nKrxJgQ+tbvyjDTzpeMyofx7K3PPGIkQ8TAgESYmVzdGJsb2NrX25vbWVya2xlAAAFAAGAEQEAAAoAAQliZXN0YmxvY2sAAAAIAAEA4P//AQAAAAAGAAEFZmxhZ3MZAAAEAAGslwIAAAsAAQptaW52ZXJzaW9uAAAEAAEUHwQAAAgAAQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB2ZXJzaW9uAA==\n```\n\n</details>\n\n```\nwallet/wallet.cpp:4085 GetDescriptorsForLegacy: Assertion `legacy_spkm' failed.\nAddressSanitizer:DEADLYSIGNAL\n=================================================================\n==2388446==ERROR: AddressSanitizer: ABRT on unknown address 0x0000002471de (pc 0x7fd9934f7eec bp 0x7fd98d9f26c0 sp 0x7fd98d9f0830 T5)\n    #0 0x7fd9934f7eec  (/lib/x86_64-linux-gnu/libc.so.6+0x8aeec) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #1 0x7fd9934a8fb1 in raise (/lib/x86_64-linux-gnu/libc.so.6+0x3bfb1) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #2 0x7fd993493471 in abort (/lib/x86_64-linux-gnu/libc.so.6+0x26471) (BuildId: 79005c16293efa45b441fed45f4f29b138557e9e)\n    #3 0x563bae137c5b in assertion_fail(std::basic_string_view<char, std::char_traits<char>>, int, std::basic_string_view<char, std::char_traits<char>>, std::basic_string_view<char, std::char_traits<char>>) /bitcoin/build_fuzz/src/util/./util/check.cpp:34:5\n    #4 0x563bad5fb48d in wallet::LegacyDataSPKM*& inline_assertion_check<false, wallet::LegacyDataSPKM*&>(wallet::LegacyDataSPKM*&, char const*, int, char const*, char const*) /bitcoin/build_fuzz/src/wallet/./util/check.h:59:13\n    #5 0x563bad5fb48d in wallet::CWallet::GetDescriptorsForLegacy(bilingual_str&) const /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:4085:10\n    #6 0x563bad607a1f in wallet::DoMigration(wallet::CWallet&, wallet::WalletContext&, bilingual_str&, wallet::MigrationResult&) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:4305:48\n    #7 0x563bad61923d in wallet::MigrateLegacyToDescriptor(std::shared_ptr<wallet::CWallet>, std::__cxx11::basic_string<char, std::char_traits<char>, secure_allocator<char>> const&, wallet::WalletContext&, bool) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:4538:23\n    #8 0x563bad61206b in wallet::MigrateLegacyToDescriptor(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::__cxx11::basic_string<char, std::char_traits<char>, secure_allocator<char>> const&, wallet::WalletContext&) /bitcoin/build_fuzz/src/wallet/./wallet/wallet.cpp:4468:12\n    #9 0x563bad3ec469 in wallet::migratewallet()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /bitcoin/build_fuzz/src/wallet/./wallet/rpc/wallet.cpp:802:49\n```",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2025-03-21T15:22:13Z",
      "updated_at": "2026-02-13T07:18:59Z",
      "closed_at": "2026-02-13T07:18:59Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/32112",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3890431833,
          "user": "fanquake",
          "body": "Was this fixed by #32636?",
          "created_at": "2026-02-12T11:41:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 25,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3895311763,
          "user": "davidgumberg",
          "body": "I've tested that this bug no longer occurs on master doing the same repro steps from [above](https://github.com/bitcoin/bitcoin/issues/32112#issuecomment-2750254947)  on a debug build, no crash.",
          "created_at": "2026-02-13T07:16:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 194,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 25840,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3935486058,
      "number": 34579,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "ircinco-mh",
      "created_at": "2026-02-13T05:46:09Z",
      "updated_at": "2026-02-13T05:50:21Z",
      "closed_at": "2026-02-13T05:50:17Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34579",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3930968827,
      "number": 34569,
      "title": "build: Qt depends build broken with GCC 16",
      "body": "GCC 16 is in it's \"stabilization\" phase, and `16.1` should be released [~soon](https://gcc.gnu.org/pipermail/gcc/2026-January/247347.html). Doing a depends build / compile currently works, other than building Qt in depends:\n```bash\ngcc (GCC) 16.0.1 20260209 (Red Hat 16.0.1-0)\nmake -C depends/ -j15\n<snip>\nBuilding qt...\n[3/1319] Building CXX object qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o\nFAILED: [code=1] qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o \n/usr/lib64/ccache/g++ -DPCRE2_CODE_UNIT_WIDTH=16 -DQT_ASCII_CAST_WARNINGS -DQT_BUILDING_QT -DQT_BUILD_CORE_LIB -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_UP_TO=0x050000 -DQT_EXPLICIT_QFILE_CONSTRUCTION_FROM_PATH -DQT_LEAN_HEADERS=1 -DQT_MOC_COMPAT -DQT_NO_AS_CONST -DQT_NO_CAST_TO_ASCII -DQT_NO_CONTEXTLESS_CONNECT -DQT_NO_DEBUG -DQT_NO_FOREACH -DQT_NO_JAVA_STYLE_ITERATORS -DQT_NO_NARROWING_CONVERSIONS_IN_CONNECT -DQT_NO_QEXCHANGE -DQT_NO_QPAIR -DQT_NO_USING_NAMESPACE -DQT_TYPESAFE_FLAGS -DQT_USE_QSTRINGBUILDER -DQT_WARN_DEPRECATED_UP_TO=0x070000 -DQT_ZLIB_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/Core_autogen/include -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/include -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/include/QtCore -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/kernel -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/../3rdparty/tinycbor/src -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/include/QtCore/6.7.3 -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/include/QtCore/6.7.3/QtCore -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/../3rdparty/double-conversion/double-conversion -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/../3rdparty/double-conversion -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/.rcc -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/mkspecs/linux-g++ -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/include/QtZlib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/3rdparty/zlib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/3rdparty/pcre2/src -I/root/bitcoin/depends/aarch64-unknown-linux-gnu/include  -ffile-prefix-map=/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257=/usr -O2 -std=c++20 -fPIC -fvisibility=hidden -fvisibility-inlines-hidden -Wall -Wextra -fexceptions -ffunction-sections -fdata-sections -Wsuggest-override -Winvalid-pch -include /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/CMakeFiles/Core.dir/cmake_pch.hxx -MD -MT qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o -MF qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o.d -o qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o -c /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global/qcompare.cpp\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global/qcompare.cpp:17:19: error: static assertion failed\n   17 |                   == Qt:: type ## _ordering :: flag); \\\n      |                   ^\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global/qcompare.cpp:21:1: note: in expansion of macro ‘CHECK’\n   21 | CHECK(partial, unordered);\n      | ^~~~~\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global/qcompare.cpp:19:19: error: static assertion failed\n   19 |                   == std:: type ## _ordering :: flag) \\\n      |                   ^\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/qtbase/src/corelib/global/qcompare.cpp:21:1: note: in expansion of macro ‘CHECK’\n   21 | CHECK(partial, unordered);\n      | ^~~~~\n[17/1319] Building CXX object qtbase/src/corelib/CMakeFiles/Core.dir/global/qlogging.cpp.o\nninja: build stopped: subcommand failed.\nmake: *** [funcs.mk:343: /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-933b44e1257/./.stamp_built] Error 1\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-02-12T10:12:51Z",
      "updated_at": "2026-02-12T22:42:15Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34569",
      "labels": [
        "GUI",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3890527668,
          "user": "fanquake",
          "body": "The same happens with Clang (`clang version 21.1.8 (Fedora 21.1.8-6.fc44)`):\n```bash\nFAILED: [code=1] qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o \n/usr/lib64/ccache/clang++ -DPCRE2_CODE_UNIT_WIDTH=16 -DQT_ASCII_CAST_WARNINGS -DQT_BUILDING_QT -DQT_BUILD_CORE_LIB -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_UP_TO=0x050000 -DQT_EXPLICIT_QFILE_CONSTRUCTION_FROM_PATH -DQT_LEAN_HEADERS=1 -DQT_MOC_COMPAT -DQT_NO_AS_CONST -DQT_NO_CAST_TO_ASCII -DQT_NO_CONTEXTLESS_CONNECT -DQT_NO_DEBUG -DQT_NO_FOREACH -DQT_NO_JAVA_STYLE_ITERATORS -DQT_NO_NARROWING_CONVERSIONS_IN_CONNECT -DQT_NO_QEXCHANGE -DQT_NO_QPAIR -DQT_NO_USING_NAMESPACE -DQT_TYPESAFE_FLAGS -DQT_USE_QSTRINGBUILDER -DQT_WARN_DEPRECATED_UP_TO=0x070000 -DQT_ZLIB_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/Core_autogen/include -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/include -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/include/QtCore -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/kernel -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/../3rdparty/tinycbor/src -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/include/QtCore/6.7.3 -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/include/QtCore/6.7.3/QtCore -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/../3rdparty/double-conversion/double-conversion -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/../3rdparty/double-conversion -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/.rcc -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/mkspecs/linux-clang -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/include/QtZlib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/3rdparty/zlib -I/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/3rdparty/pcre2/src -I/root/bitcoin/depends/aarch64-unknown-linux-gnu/include  -ffile-prefix-map=/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba=/usr -O2 -std=c++20 -fPIC -fvisibility=hidden -fvisibility-inlines-hidden -Wall -Wextra -fexceptions -ffunction-sections -fdata-sections -Winvalid-pch -Xclang -include-pch -Xclang /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/CMakeFiles/Core.dir/cmake_pch.hxx.pch -Xclang -include -Xclang /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/CMakeFiles/Core.dir/cmake_pch.hxx -MD -MT qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o -MF qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o.d -o qtbase/src/corelib/CMakeFiles/Core.dir/global/qcompare.cpp.o -c /root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global/qcompare.cpp\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global/qcompare.cpp:21:1: error: static assertion failed due to requirement 'std::bit_cast(std::partial_ordering::unordered) == Qt::partial_ordering::unordered'\n   21 | CHECK(partial, unordered);\n      | ^~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global/qcompare.cpp:16:19: note: expanded from macro 'CHECK'\n   16 |     static_assert(std::bit_cast<Qt:: type ## _ordering>(std:: type ## _ordering:: flag) \\\n      |                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   17 |                   == Qt:: type ## _ordering :: flag); \\\n      |                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global/qcompare.cpp:21:1: error: static assertion failed due to requirement 'std::bit_cast(Qt::partial_ordering::unordered) == std::partial_ordering::unordered'\n   21 | CHECK(partial, unordered);\n      | ^~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/depends/work/build/aarch64-unknown-linux-gnu/qt/6.7.3-e3d4d1dbdba/qtbase/src/corelib/global/qcompare.cpp:18:19: note: expanded from macro 'CHECK'\n   18 |     static_assert(std::bit_cast<std:: type ## _ordering>(Qt:: type ## _ordering:: flag) \\\n      |                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n   19 |                   == std:: type ## _ordering :: flag) \\\n      |                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n2 errors generated.\n```\n\n`-stdlib=libc++` can be used as a workaround.",
          "created_at": "2026-02-12T12:00:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 5235,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3892793262,
          "user": "theuni",
          "body": "Qt has the gcc16 fixes in their main `dev` branch. Backporting all necessary fixes to 6.8 is non-trivial though.\n\n@hebasto has a WIP branch for a bump to 6.10. I managed to cleanly port all necessary patches to 6.10, so I think it's reasonable to consider bumping in order to fix builds with bleeding-edge gcc/clang.\n\nHere's my branch build on top of @hebasto's WIP: https://github.com/theuni/bitcoin/commits/qt6.10/\n\nAs a quick summary, to fix build (errors as well as annoying warnings), we need:\n\nQCompare fix:\nhttps://github.com/qt/qtbase/commit/7fccc79dd5744ea837ffe200bbfc9f2756870220\n\nSFINAE fixes:\nhttps://github.com/qt/qtbase/commit/679e8bda1eb0cc98acb981e9a10204bed1c179f2\nhttps://github.com/qt/qtbase/commit/3312e89b47f8c2ea0b4263b39841c25b83a37332\nhttps://github.com/qt/qtbase/commit/05f201a3d559452287b20becb960de3a50249540\nhttps://github.com/qt/qtbase/commit/d68fc6ecc88a0e4532754b1a9f209881a248f4ee",
          "created_at": "2026-02-12T18:52:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 913,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3892815901,
          "user": "fanquake",
          "body": "> so I think it's reasonable to consider bumping in order to fix builds with bleeding-edge gcc/clang.\n\nBumping for `31.x` seems ok, but something will need backporting, as the build is still going to be broken on the current release branch (`30.x`). I don't know if `29.x` and `28.x` are also broken, but if so, we might need to do something for `29.x` at least.",
          "created_at": "2026-02-12T18:56:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 362,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3892849896,
          "user": "theuni",
          "body": "Makes sense. There's probably a subset of those changes that could be backported more easily, as some just fix annoying warnings.",
          "created_at": "2026-02-12T19:03:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 129,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3893791227,
          "user": "hebasto",
          "body": "> Qt has the gcc16 fixes in their main `dev` branch. Backporting all necessary fixes to 6.8 is non-trivial though.\n> \n> [@hebasto](https://github.com/hebasto) has a WIP branch for a bump to 6.10. I managed to cleanly port all necessary patches to 6.10, so I think it's reasonable to consider bumping in order to fix builds with bleeding-edge gcc/clang.\n> \n> Here's my branch build on top of [@hebasto](https://github.com/hebasto)'s WIP: https://github.com/theuni/bitcoin/commits/qt6.10/\n> \n> As a quick summary, to fix build (errors as well as annoying warnings), we need:\n> \n> QCompare fix: [qt/qtbase@7fccc79](https://github.com/qt/qtbase/commit/7fccc79dd5744ea837ffe200bbfc9f2756870220)\n> \n> SFINAE fixes: [qt/qtbase@679e8bd](https://github.com/qt/qtbase/commit/679e8bda1eb0cc98acb981e9a10204bed1c179f2) [qt/qtbase@3312e89](https://github.com/qt/qtbase/commit/3312e89b47f8c2ea0b4263b39841c25b83a37332) [qt/qtbase@05f201a](https://github.com/qt/qtbase/commit/05f201a3d559452287b20becb960de3a50249540) [qt/qtbase@d68fc6e](https://github.com/qt/qtbase/commit/d68fc6ecc88a0e4532754b1a9f209881a248f4ee)\n\nPicked to https://github.com/bitcoin/bitcoin/pull/34578.",
          "created_at": "2026-02-12T22:42:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1158,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4928,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3834142125,
      "number": 34354,
      "title": "test `wallet_assumeutxo.py` is failing intermittently: wallet.cpp:543  RestoreWallet  Assertion `fs::is_empty(wallet_path)' failed. ",
      "body": "ISTM that the [Windows, ucrt, test cross-built CI failure](https://github.com/bitcoin/bitcoin/actions/runs/21172425203/job/60894641918?pr=33014) is unrelated, a restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.\r\n\r\n<details open>\r\n<summary>From the logs:</summary>\r\n\r\n```zsh\r\n2026-01-20T13:41:07.2385503Z 2026-01-20T13:41:04.152353Z TestFramework (INFO): Ensuring wallet can't be restored from a backup that was created before the pruneheight (pruned node)\r\n2026-01-20T13:41:07.2386535Z \r\n2026-01-20T13:41:07.2386839Z 2026-01-20T13:41:06.479889Z TestFramework (ERROR): Unexpected exception\r\n2026-01-20T13:41:07.2387306Z \r\n2026-01-20T13:41:07.2387503Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2387815Z \r\n2026-01-20T13:41:07.2388269Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 166, in try_rpc\r\n2026-01-20T13:41:07.2388901Z \r\n2026-01-20T13:41:07.2389049Z     fun(*args, **kwds)\r\n2026-01-20T13:41:07.2389318Z \r\n2026-01-20T13:41:07.2389432Z     ~~~^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2389660Z \r\n2026-01-20T13:41:07.2390180Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n2026-01-20T13:41:07.2390808Z \r\n2026-01-20T13:41:07.2391156Z     return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n2026-01-20T13:41:07.2391651Z \r\n2026-01-20T13:41:07.2392093Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 156, in __call__\r\n2026-01-20T13:41:07.2392771Z \r\n2026-01-20T13:41:07.2392996Z     raise JSONRPCException(response['error'], status)\r\n2026-01-20T13:41:07.2393424Z \r\n2026-01-20T13:41:07.2395532Z test_framework.authproxy.JSONRPCException: filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\\node3\\regtest\\w2\\wallet.dat] (-1)\r\n2026-01-20T13:41:07.2397271Z \r\n2026-01-20T13:41:07.2397277Z \r\n2026-01-20T13:41:07.2397281Z \r\n2026-01-20T13:41:07.2397613Z During handling of the above exception, another exception occurred:\r\n2026-01-20T13:41:07.2398102Z \r\n2026-01-20T13:41:07.2398107Z \r\n2026-01-20T13:41:07.2398112Z \r\n2026-01-20T13:41:07.2398334Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2398622Z \r\n2026-01-20T13:41:07.2399135Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\r\n2026-01-20T13:41:07.2399796Z \r\n2026-01-20T13:41:07.2399922Z     self.run_test()\r\n2026-01-20T13:41:07.2400161Z \r\n2026-01-20T13:41:07.2400286Z     ~~~~~~~~~~~~~^^\r\n2026-01-20T13:41:07.2400474Z \r\n2026-01-20T13:41:07.2400948Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 267, in run_test\r\n2026-01-20T13:41:07.2401587Z \r\n2026-01-20T13:41:07.2401827Z     self.test_restore_wallet_pruneheight(n3)\r\n2026-01-20T13:41:07.2402338Z \r\n2026-01-20T13:41:07.2402476Z     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\r\n2026-01-20T13:41:07.2402806Z \r\n2026-01-20T13:41:07.2403384Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\r\n2026-01-20T13:41:07.2404151Z \r\n2026-01-20T13:41:07.2404691Z     assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2\", \"backup_w2.dat\")\r\n2026-01-20T13:41:07.2405294Z \r\n2026-01-20T13:41:07.2405553Z     ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2405970Z \r\n2026-01-20T13:41:07.2406496Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 157, in assert_raises_rpc_error\r\n2026-01-20T13:41:07.2407238Z \r\n2026-01-20T13:41:07.2407544Z     assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n2026-01-20T13:41:07.2408097Z \r\n2026-01-20T13:41:07.2408261Z            ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2408598Z \r\n2026-01-20T13:41:07.2409048Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 170, in try_rpc\r\n2026-01-20T13:41:07.2409645Z \r\n2026-01-20T13:41:07.2410041Z     raise AssertionError(\"Unexpected JSONRPC error code %i\" % e.error[\"code\"])\r\n2026-01-20T13:41:07.2410583Z \r\n2026-01-20T13:41:07.2410797Z AssertionError: Unexpected JSONRPC error code -1\r\n2026-01-20T13:41:07.2411215Z \r\n2026-01-20T13:41:07.2411925Z 2026-01-20T13:41:06.484138Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2026-01-20T13:41:07.2412795Z \r\n2026-01-20T13:41:07.2413676Z 2026-01-20T13:41:06.484270Z TestFramework (WARNING): Not cleaning up dir D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\r\n2026-01-20T13:41:07.2414525Z \r\n2026-01-20T13:41:07.2415646Z 2026-01-20T13:41:06.484375Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56/test_framework.log\r\n2026-01-20T13:41:07.2416737Z \r\n\r\n2026-01-20T13:42:33.3464929Z wallet_assumeutxo.py                                                             | ✖ Failed  | 8 s\r\n2026-01-20T13:42:33.3465209Z \r\n2026-01-20T13:42:33.3465460Z ALL                                                                              | ✖ Failed  | 2893 s (accumulated) \r\n2026-01-20T13:42:33.3465784Z Runtime: 796 s\r\n\r\n```\r\n</details>\r\n\r\n_Originally posted by @rkrux in https://github.com/bitcoin/bitcoin/issues/33014#issuecomment-3773073528_\r\n            ",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-20T15:07:00Z",
      "updated_at": "2026-02-12T21:57:30Z",
      "closed_at": null,
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/34354",
      "labels": [
        "Bug",
        "Wallet",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3891488420,
          "user": "maflcko",
          "body": "The same error happens on Linux, hitting an internal assert:\n\n```\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n```\n\n\n\nTo reproduce, saturate all CPU threads of the machine at 100%, then run\ncmd to reproduce:\n\n```\nwhile ./bld-cmake/test/functional/wallet_assumeutxo.py ; do true ; done\n```\n\n\n```\n test  2026-02-12T15:02:36.624276Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 166, in try_rpc\n                                       fun(*args, **kwds)\n                                       ~~~^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ~~~~~~~~~~~~~~~~~~^^\n                                     File \"/b-c/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                     File \"/usr/lib/python3.13/http/client.py\", line 1450, in getresponse\n                                       response.begin()\n                                       ~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 336, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ~~~~~~~~~~~~~~~~~^^\n                                     File \"/usr/lib/python3.13/http/client.py\", line 305, in _read_status\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\n                                                                \" response\")\n                                   http.client.RemoteDisconnected: Remote end closed connection without response\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/b-c/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/b-c/./bld-cmake/test/functional/wallet_assumeutxo.py\", line 267, in run_test\n                                       self.test_restore_wallet_pruneheight(n3)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\n                                     File \"/b-c/./bld-cmake/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\n                                       assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2_pruneheight\", \"backup_w2.dat\")\n                                       ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 157, in assert_raises_rpc_error\n                                       assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\n                                              ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/b-c/test/functional/test_framework/util.py\", line 177, in try_rpc\n                                       raise AssertionError(\"Unexpected exception raised: \" + type(e).__name__)\n                                   AssertionError: Unexpected exception raised: RemoteDisconnected\n test  2026-02-12T15:02:36.638897Z TestFramework (DEBUG): Closing down network thread \n test  2026-02-12T15:02:36.689925Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2026-02-12T15:02:36.690597Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_noubmcc_ \n test  2026-02-12T15:02:36.690935Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_noubmcc_/test_framework.log \n test  2026-02-12T15:02:36.691366Z TestFramework (ERROR): \n test  2026-02-12T15:02:36.691757Z TestFramework (ERROR): Hint: Call /b-c/test/functional/combine_logs.py '/tmp/bitcoin_func_test_noubmcc_' to consolidate all logs \n test  2026-02-12T15:02:36.691961Z TestFramework (ERROR): \n test  2026-02-12T15:02:36.692121Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2026-02-12T15:02:36.692375Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2026-02-12T15:02:36.692613Z TestFramework (ERROR): \n\n node3 stderr wallet/wallet.cpp:543 std::shared_ptr<CWallet> wallet::RestoreWallet(WalletContext &, const fs::path &, const std::string &, std::optional<bool>, DatabaseStatus &, bilingual_str &, std::vector<bilingual_str> &, bool, bool): Assertion `fs::is_empty(wallet_path)' failed. \n",
          "created_at": "2026-02-12T15:06:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 5982,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3893030510,
          "user": "maflcko",
          "body": "Not sure if this diff helps to reproduce it faster:\n\n```diff\ndiff --git a/src/validationinterface.cpp b/src/validationinterface.cpp\nindex c7be6ab..aacb7b6 100644\n--- a/src/validationinterface.cpp\n+++ b/src/validationinterface.cpp\n@@ -14,2 +14,3 @@\n #include <primitives/transaction.h>\n+#include <random.h>\n #include <util/check.h>\n@@ -156,2 +157,4 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n \n+static FastRandomContext g_rnd{};\n+\n // Use a macro instead of a function for conditional logging to prevent\n@@ -166,2 +169,3 @@ void ValidationSignals::SyncWithValidationInterfaceQueue()\n             LOG_EVENT(fmt, local_name, __VA_ARGS__);           \\\n+            if(g_rnd.randrange(2)<1)UninterruptibleSleep(15ms);\\\n             event();                                           \\\n",
          "created_at": "2026-02-12T19:44:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 799,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3893570221,
          "user": "fjahr",
          "body": "> To reproduce, saturate all CPU threads of the machine at 100%\n\nOh, do you think that is what is actually happening in the CI? Then I guess every check we have that asserts that a file was deleted could run into this issue if the circumstances are right?",
          "created_at": "2026-02-12T21:47:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3893615398,
          "user": "maflcko",
          "body": "> Oh, do you think that is what is actually happening in the CI? Then I guess every check we have that asserts that a file was deleted could run into this issue if the circumstances are right?\n\nThe assume that fails is in the line before the remove, so I think there is a logic error somewhere",
          "created_at": "2026-02-12T21:57:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 293,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5540,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3931343578,
      "number": 34573,
      "title": "bug: uncaught exception from RPC invocation during shutdown",
      "body": "The new thread pool introduced in https://github.com/bitcoin/bitcoin/pull/33689 [will throw an exception](https://github.com/bitcoin/bitcoin/blob/07b924775e4ff5dbfb9f2e7549fd13db8ec5c61b/src/util/threadpool.h#L162) (which will not be caught and lead to an unclean exit) if an RPC is called during shutdown.\n\n```\n2026-02-11T18:56:34Z [http:debug] Received a POST request for / from 10.89.0.6:58998\n2026-02-11T18:56:34Z [http:debug] Interrupting HTTP server\n2026-02-11T18:56:34Z [rpc:debug] Interrupting HTTP RPC server\n2026-02-11T18:56:34Z [all:info] http_pool_1 thread exit\n2026-02-11T18:56:34Z [all:info] http_pool_0 thread exit\n2026-02-11T18:56:34Z [rpc:debug] Interrupting RPC\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  No active workers; cannot accept new tasks\n```\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*\n",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-02-12T11:31:49Z",
      "updated_at": "2026-02-12T20:29:58Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/34573",
      "labels": [],
      "comment_data": [
        {
          "id": 3890390468,
          "user": "fanquake",
          "body": "cc @furszy ",
          "created_at": "2026-02-12T11:34:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 11,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3890440924,
          "user": "pinheadmz",
          "body": "I'm not familiar with Antihesis, are you able to reliably reproduce the crash? And if so, can you test [this branch](github.com/pinheadmz/bitcoin/tree/http-rewrite-threadpool) which is #32061 rebased on threadpool, just not cleaned up yet.",
          "created_at": "2026-02-12T11:42:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 239,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3890477854,
          "user": "dergoegge",
          "body": "There is no reproducer testcase that I can quickly run to verify, it's more like the test running on antithesis itself is the reproducer (as it will very likely be able to re-find the issue). You can read more about their methodology here https://antithesis.com/resources/deterministic_simulation_testing/.\n\nIt would probably be fairly easy to write a functional test to reproduce this (perhaps combined with a strategically places sleep on the c++ side).\n\nI will run the Antithesis test on your PR changes, but I'm not sure if it would be the right fix unless that PR is ready to be merged soon for v31.",
          "created_at": "2026-02-12T11:51:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 604,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3890536156,
          "user": "pinheadmz",
          "body": "I just wonder if its the same as https://github.com/bitcoin/bitcoin/pull/31929 which is addressed in #32061 ",
          "created_at": "2026-02-12T12:01:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 108,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3890554495,
          "user": "dergoegge",
          "body": "This only popped up now with the new thread pool, so I don't think so but I could be wrong of course.",
          "created_at": "2026-02-12T12:04:55Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 101,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3891596958,
          "user": "furszy",
          "body": "Cool tool @dergoegge. This just uncovers an existing issue.\n\nBefore, this would have returned an incorrect error: \"Request rejected because http work queue depth exceeded\" during shutdown, because the previous [`Enqueue()`](https://github.com/bitcoin/bitcoin/blob/45930a79412dc45f9d391cd7689d029fa4f0189e/src/httpserver.cpp#L96) method was returning false both when the queue exceeded the max size **and** when it was interrupted. Now we have split these two cases to handle errors better, but miss to handle the latter one properly.\n\nWe can either catch the exception or change submission to retrieve `std::expected`/`util::Result` with the error.\n\nReproducing it should also be straightforward:\n\n1) Receive an http request.\n2) sleep() during request processing, before pool submission.\n3) Trigger shutdown, sleep() after unregistering the libevent callback and interrupting the pool.\n4) Let step (2) resume. This attempts to submit a task to an interrupted pool.\n\nWill fix it. Thanks.",
          "created_at": "2026-02-12T15:25:06Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 986,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3893192161,
          "user": "furszy",
          "body": "#34577",
          "created_at": "2026-02-12T20:21:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 6,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 946,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3918326723,
      "number": 34542,
      "title": "RFC: Erlay Conceptual Discussion",
      "body": "As suggested during the IRC meeting last week ([logs](https://www.erisian.com.au/bitcoin-core-dev/log-2026-02-05.html#l-251)), this issue is for discussing recent progress on [Erlay](https://github.com/bitcoin/bips/blob/master/bip-0330.mediawiki), evaluating its trade-offs and goals, and ultimately deciding whether it's worth continuing to pursue.\n\nThe current project tracking issue is https://github.com/bitcoin/bitcoin/issues/30249, though some of the performance research results shown there may be outdated. We can gather updated data here and discuss.\n\nCouple questions on my mind:\n\n- What does the bandwidth/latency trade-off look like as we scale the number of connections?\n- Do the benefits outweigh the added code complexity?\n\nOf course, discussion isn't limited to the above. Feel free to bring up any other points that come to mind.",
      "state": "open",
      "user": "marcofleon",
      "created_at": "2026-02-09T21:53:28Z",
      "updated_at": "2026-02-12T18:55:12Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/34542",
      "labels": [
        "Brainstorming"
      ],
      "comment_data": [
        {
          "id": 3884345863,
          "user": "sr-gi",
          "body": "Thanks for opening this @marcofleon.\n\nI'd like to give a refresher and overview of Erlay, and explain some of the details of the experimentation and current approach. I also have a few questions/points that I'd like to discuss with people in the project.\n\n## Overview\n\nErlay is an alternative method of announcing transactions between peers in the Bitcoin P2P network. Erlay’s main goal is to reduce bandwidth utilization when propagating transaction data by minimizing the amount of redundant inventory messages (`INV`) exchanged between peers.\n\nIn our current transaction relaying approach (we'll be calling _txflood_ or _fanout_ from now on), every transaction is announced on every transaction relaying link in the peer-to-peer network at least once. That is, for each transaction relaying connection in the network, each side of the connection will either send or receive an `INV` message containing the given transaction. Most of these announcements (`n-1/n`) are actually redundant, but it is impossible for the announcer to know until the announcement has been sent.\n\nErlay tries to solve this issue by using set reconciliation to work out the transaction differences between two nodes connected to each other instead of just announcing all transactions through all links. To do so, nodes keep a set of transactions to be reconciled (or reconciliation set) between each of their Erlay-enabled peers, and reconciliation is performed at regular intervals. Once it is time to reconcile, peers exchange _sketches_ of their reconciliation sets, which can be used to optimally compute the symmetrical difference between their reconciliation sets and, therefore, identify which transactions need to be sent by each end of the connection.\n\nErlay works optimally (sketches are smaller and sketch differences are cheaper to compute) when the differences between sets are small. This means that, even if all peers of a given node are Erlay-enabled, some transactions will still be exchanged using fanout. Finally, as we will expand on later on, fanout is more efficient and considerably faster than set reconciliation provided the receiving node does not know about the transaction being announced.\n\n## Fanout: The current approach\n\nBefore jumping into Erlay, its important to understand how fanout works in Core, so we can reason about the proposed changes and tradeoffs. \n\nTransactions are exchanged between network peers using a 3-step protocol (`INV/GETDATA/TX`). The first round-trip of this protocol (`INV/GETDATA`) can be seen as the announcement/request phase, here is where both sides of the connection are made aware of what the other side knows. The last half-round trip (`TX`) is where the actual transaction is exchanged, if necessary. Given transactions are significantly bigger than transaction ids, the `INV/GETDATA` part of the protocol is used to minimize the amount of potentially redundant information exchanged between peers. If I don't know if you know something, I'd better make sure first before dumping a lot of data on you. Hence, if the announcement receiver knows about the target transaction, we waste a minimal amount of bandwidth, and if not, we add a minimal amount of overhead to sending the transaction.\n\nTransactions are announced between peers at random intervals following a Poisson process. The expected delay between announcements depends on the type of connection: outbounds have an independent clock per connection with an expected value of **2 seconds**, whereas inbounds share a timer with an expected value of **5 seconds**. Transactions are queued to be announced until the timer goes off, and then announced using as many inventory messages as needed to clear the queue (each INV message can hold up to 50.000 entries IIRC). These timers are in place to obfuscate when a node learns about a transaction, in order to make it harder for a global network observer to pinpoint the transaction origin.\n\nWhen a node learns about a new transaction via an inventory message, it may request it back from the announcer. Announcements are requested back in order of arrival, prioritizing outbound peers. If a peer takes too long to respond to a request, we may ask the next peer and so on. Inbound peers are de-prioritized here, by giving them a **2-second** delay before requesting. This is to prevent them from stalling us (e.g., sending multiple announcements of the same transaction from different connections to delay us from learning the announced transaction).\n\nLast but not least, when a transaction is being purposely delayed (in the `to_be_announced` queue), a node will pretend not to know about it, so it won’t reply to `GETDATA` messages requesting it. This is to prevent probing.\n\n**Pros: fast (artificially slower for privacy/DoS protection purposes)**\n\n**Cons: each transaction is announced at least once per link (too redundant)**\n\n## Erlay: The second take\n\nErlay is not a drop-in replacement for fanout, but a protocol that works alongside it. This is obvious for backwards compatibility reasons: nodes are not forced to implement or adopt the change, but it’s not the only reason why. Set reconciliation is really good at fixing small differences between sets (both fast and efficient), but it becomes way less optimal when the differences in the sets to reconcile are big: sketches become big (they grow with the size of the diffs they can compute), and the diffs are expensive to compute. This is why set reconciliation works best alongside fanout, and why our approach to implement Erlay is as a hybrid between both.\n\nOnce this becomes clear, the main question to answer when implementing Erlay is: **how we partition peers between fanout and reconciliation, and how big is the split?** This is the question that has led most of the experimentation in the project and that most of the simulations have tried to answer. To answer this question, we need to understand the properties of each group:\n\n- Fanout peers are good at propagating the transaction fast, but too much use of them leads to redundant announcements\n- Reconciliation peers are good at fixing small differences between peers, but they are, **inherently, slower at propagating transactions.**\n\nThe reason why reconciliation is slower lies in how transaction announcement is implemented in Core. When a transaction is propagated using set reconciliation, we need to go over an additional 1.5 round-trips (`REQRECON/SKETCH/RECONDIFF`) to learn if the target peer knows about a certain transaction **AND THEN,** if it doesn’t, default to `INV/GETDATA/TX` to send it. Therefore, 3 round-trips in total. This may seem a bit counter intuitive, why can we not just send the transaction straightaway once we learn the peer doesn’t have it? Because another peer could have announced the transaction before us, and the target peer may already have selected them for download. \n\nIn order to answer this question, I built a discrete-time network event simulator for Bitcoin (you can find it [here](https://github.com/sr-gi/hyperion)) so I could quickly iterate over different configurations in significantly big networks. \n\n### Experimentation and findings\n\nThe initial approach was to simply answer the following question: how small can we keep fanout so that network latency remains similar while maximizing the bandwidth savings of set reconciliation? This proved tricky right out of the bat: set reconciliation is much slower than I originally imagined, and deciding what’s acceptable in terms of latency is hard to assess. As a matter of example, here are some simulation results with no optimizations:\n\n**Network:** 110K nodes (100K unreachable, 10K reachable), random topology, 8 outbounds.\n\n| No optimizations  | Full recon | Erlay 1 (out), 10%(ins) | Full fanout |\n| ------------- | ------------- | ------------- | ------------- |\n| T-90%  | 25.07007s  | 20.413506s | 8.676374s | \n| T-100%  |32.31443s  | 27.577503s | 14.88974s | \ndata-volume (reachable) | 1038.9468 messages (4589.844 bytes)  | 846.8382 messages (4876.821 bytes) | 119.51961 messages (6120.7563 bytes) | \ndata-volume (unreachable) | 87.36723 messages (405.09848 bytes) | 71.30196 messages (429.1808 bytes) | 10.086697 messages (524.5129 bytes)  | \n\nThis shows the difference between doing full reconciliation (no fanout involved), doing minimal reconciliation (using similar parameters defined as “best” in the previous [Erlay attempt](https://github.com/naumenkogs/txrelaysim/issues/7#issuecomment-902165806), and full fanout (the current state of things). It becomes pretty clear that the impact on latency is more than significant when no optimizations are being applied, but it also raises the question: **What is acceptable in terms of latency and at what cost?**\n\nOne of the first attempts to reduce latency while maximizing our bandwidth savings was to reduce the previously mentioned expected values for the peer-announcement Poisson process sampling. Halving those artificially reduces latency with almost no effect on bandwidth (if any). This was the approach in the original [Erlay implementation](https://github.com/naumenkogs/bitcoin/blob/89de0f71dce11e29c4c115a3021e97da62ba3ce6/src/net_processing.cpp#L155-L162), but I never felt too comfortable with it. **There is little documentation (if any) of why the broadcast intervals were picked as {5s, 2s}, and if that’s the route we want to take, I think it comes from a well-reasoned discussion.**\n\n### Fine-tuning the approach\n\nThere have been several experiments and theories being tested to try to optimize the aforementioned approach to make it more latency-efficient while preserving the bandwidth savings. For an extended and more detailed explanation of some of these, I’d recommend checking the series I wrote on [Delving](https://delvingbitcoin.org/tag/erlay). Here, I’ll be highlighting the two optimizations that have shown to work in simulation.\n\n### Reconcile on trickle\n\nOne of the main reasons why Erlay is slow has to do with when data is made available to our peers. As we’ve mentioned earlier, this happens when we trickle for them (their timer has gone off, so we will try to send them whatever we have available). However, adding reconciliation on top of this means that now both need to synchronize; otherwise, if data is being purposely delayed for a peer when they request reconciliation, they will have to wait until the next reconciliation cycle to get it (FYI, this is once every 8 seconds per outbound peer at the moment). \n\nA solution for this problem is not to reply to reconciliation requests straightaway. Instead, the request can be recorded, and replied to when we trickle for that peer, ensuring that they get all transactions we have received up to that point. Here are the simulation results using the same network as before, but applying this optimization:\n\n| Recon on trickle  | Full recon | Erlay 1 (out), 10%(ins) | Full fanout |\n| ------------- | ------------- | ------------- | ------------- |\n| T-90%  | 22.339193s  | 16.797455s | 8.654676s | \n| T-100%  | 29.805967s | 23.903776s | 14.878592s | \ndata-volume (reachable) | 713.03534 messages (4071.1865 bytes)  | 562.6937 messages (4548.8276 bytes)  | 119.527855 messages (6121.74 bytes) | \ndata-volume (unreachable) |  59.583134 messages (350.2714 bytes) | 47.12237 messages (395.96457 bytes)  | 10.085797 messages (524.41187 bytes) | \n\n### INV-based fanout\n\nThe second optimization worth mentioning has to do with how we pick nodes for fanout and reconciliation. So far, nodes have been picked as a static split. We select some for reconciliation and some for fanout, making the latter big enough so a big chunk of the network can be reached fast, but not big enough so it starts being redundant, and leave the rest to reconciliation. The specific numbers here come from simulating different partitions and seeing what seems to perform better in random networks.\n\nHowever, we can do better than this. In an ideal world, if we knew how long the transaction has been propagating and what fraction of the network it has reached, we could use that to turn our fanout/reconciliation up or down. Unfortunately, we don’t have that information, but we know one thing: fanout is faster than reconciliation, therefore if we receive a transaction via fanout, we are likely to be amongst the first peers to receive it, whereas if we receive it via reconciliation, it is likely that we are further down the line.\n\nWe can use this to tweak our fanout rates:\n\n- When receiving a transaction via fanout, keep fanning out until we reach a certain threshold, and reconcile with the rest of your peers\n- If a transaction is received via reconciliation, see it as being late and keep reconciling with the rest of your peers\n\nThis approach applies to outbound connections only, given that anything learnt from an inbound connection is easy to fake, so it’s better not to be trusted. Applying this optimization on top of the previous one, and simulating for the same network, we obtain:\n\n| on-trickle + inv-based-fanout  | Full recon | Erlay 1 (out), 10%(ins) | Full fanout |\n| ------------- | ------------- | ------------- | ------------- |\n| T-90%  | 21.70218s | 14.427859s | 8.654676s | \n| T-100%  | 28.977697s  | 21.619083s | 14.878592s | \ndata-volume (reachable) | 695.2272 messages (4085.9502 bytes)   | 493.16547 messages (4593.411 bytes) | 119.527855 messages (6121.74 bytes) | \ndata-volume (unreachable) | 58.117065 messages (349.74905 bytes) | 41.418915 messages (401.29572 bytes) | 10.085797 messages (524.41187 bytes) | \n\n### Conclusions and questions\n\nWith the two presented optimizations, we are able to achieve savings of ~25% in bandwidth for the cost of ~ 67% more latency. Some of these combinations have also been tested on smaller networks with actual Bitcoin nodes implementing Erlay (using Warnet) and the obtained results have been similar. However, things are far harder (and more expensive) to test like that. \n\nI personally think the design space for improvements and optimizations may still be substantial. However, I also think I’d be good to define what is acceptable in terms of bandwidth and latency tradeoffs, and what things are open to change:\n\n- Are the expected values for the poisson processes set to stone? Is it OK to reduce them? How can we reason about the implications?\n- What are acceptable transaction propagation times? Are we OK with increasing them at all? If so, by how much?\n- What would be acceptable bandwidth savings given the additional complexity brought by this change?\n\nI’ve tried to give as much context and information as possible while keeping this digestible. I’m happy to extend on any of the directions others are curious about, explain things that may have fallen of and provide additional data.",
          "created_at": "2026-02-11T13:09:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 14776,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3884356816,
          "user": "sr-gi",
          "body": "> Couple questions on my mind:\n> \n> * What does the bandwidth/latency trade-off look like as we scale the number of connections?\n\nI'm going to reserve this spot to extend on the tradeoffs when the number of connections is increased, since I did not touch that on the original post, but it's one of the main goals of the project (the write-up was already pretty lengthy). I may need to re-run some of the simulations for it.",
          "created_at": "2026-02-11T13:11:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 423,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3884592388,
          "user": "stickies-v",
          "body": "> Erlay’s main goal is to reduce bandwidth utilization when propagating transaction data by minimizing the amount of redundant inventory messages (`INV`) exchanged between peers.\n\nI'm not excited about this amount of research and code complexity for having bandwidth reduction as a goal. Bandwidth reduction by itself is nice, and obviously it is something we should improve where possible, but I don't see the current bandwidth consumption as problematic for users who wish to run without `blocksonly`? Is it possible that, with this project going on for so long and with a couple of reboots, we kinda lost track of why we were doing this in the first place?\n\nIt's been a while since I initially read the Erlay paper, but IIRC the reason I found this interesting at the time was that Erlay allows having more connections with acceptable bandwidth trade-offs, improving eclipse attack resistance. Even if it seems we currently already have reasonable eclipse attack resistance, this security benefit to me seems like much more worthy goal of investigating and - if Erlay turns out to be a worthwhile improvement - pursuing? I've not been following this project closely, so apologies if this has been covered already, I'm just not seeing it mentioned in the [current write-up](https://github.com/bitcoin/bitcoin/issues/34542#issuecomment-3884345863).",
          "created_at": "2026-02-11T13:55:29Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 1349,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3884755099,
          "user": "dergoegge",
          "body": "To add to Stephan's comment: simpler proposals seem to achieve (for the most part at least) the same goal of increased network security: https://github.com/bitcoin/bitcoin/pull/28463, https://github.com/bitcoin/bitcoin/issues/28462 and it's not clear to me that the additional benefits that erlay offers over these (increased full-outbound relay connections instead of block-relay-only & bandwidth reduction) are worth the complexity (minisketch, reconciliation module, extra protocol messages).",
          "created_at": "2026-02-11T14:23:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 495,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3885128011,
          "user": "sr-gi",
          "body": "Thanks for your comments @stickies-v @dergoegge .\n\nI think there are two conflicting goals being discussed here. If what we want to achieve is simply increase the network connectivity using any connection type, then sure, blocksonly are always going to be a cheaper and simpler solution. This can make Eclipse harder and will have a way smaller code complexity.\n\nIf, on the other hand, we want to be able to scale the network without having to scale it's backbone of reachable nodes (or at least not linearly), then allowing nodes to accept more tx-relaying connections with little to no impact to their bandwidth is important, and what Erlay is trying to achieve.\n\nI think it's important to agree on what the goal is, because that will affect the complexity of the solution.\n\n@stickies-v I'll expand on the network scaling bit on my second comment. I've parked it there for that reason.",
          "created_at": "2026-02-11T15:19:58Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 887,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3885338062,
          "user": "mzumsande",
          "body": "As mentioned in IRC, one reason to increase connectivity with Erlay is to increase resistance specifically against transaction censorship (as opposed to only resistance against eclipse attacks).\nWith the recent attempts to censor valid fee-paying transactions deemed undesirable for ideological reasons, not forwarding them to peers, this has become more relevant than it was in the past. \n\nHowever, even with the current connectivity, the threshold is quite low (a minority of ~10% of random reachable nodes should suffice to get transactions to miners)  - plus there is always the possibility of preferential peering so I'm not sure how important it is to lower that threshold even more. ",
          "created_at": "2026-02-11T15:53:35Z",
          "drama_signals": {
            "drama_keywords": 3,
            "positive_keywords": 1,
            "text_length": 690,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3885427451,
          "user": "sipa",
          "body": "Let me take a step back, because I think the results don't paint the full picture.\n\n**The primary goal is increasing partition-resistance of the network.** In what follows I'm going to assume 16 connections per node is the desired number, but this is just for presentation purposes. I'll get back to the number later.\n\nWe could add 8 more outbound **extra full connections**. But that also means simultaneously increasing the number of (default) permitted inbound connections for listening peers (say from 125 to 250), to not make the network run out of connection slots or making it easy for an attacker with tons of inbound slots to grab a large share of them. Unfortunately, with the current transaction relay design, *every* transaction INV announcement (36 bytes) goes over *every* connection at least once (and sometimes twice), so it scales with $\\mathcal{O}(\\mathrm{txrate} \\times \\mathrm{peers})$. The more tx-carrying connections a node has (including inbound), the larger the percentage of their bandwidth is taken by INVs. And this is in a way accomplishing too much, because in addition to better partition resistance, it'll also reduce the tail latency for transactions to reach nodes in the network - something that isn't actually desired.\n\nIt's possible instead just add 8 extra **block-only connections**. These obviously do not cause a bandwidth increase due to INVs, and additionally impose less memory and CPU usage on the node. However, they also only improve block-relay partition resistance. This means that an eclipse attack on just the tx-carrying connections might be successful still, which would result in bad transaction propagation, potentially bad block reconstruction/propagation if severe, and in extreme cases, transaction censorship.\n\nWhat if there was something in between the two, that has a lower bandwidth impact than full connections, improves tx-partition-resistance unlike block-only connections, but didn't care about improving tail latency? As a thought experiment, add 8 extra **reconciliation-connections**. These are not full Erlay as proposed; they're an entirely separate connection class, and exclusively use reconciliation for transaction relay on a slower time schedule than normal transaction propagation (+ normal block/addr relay). These connections should have very low bandwidth usage in non-adversarial settings because the large majority of transaction relay is done by the normal full connections, and reconciliation bandwidth scales with the amount of transactions being reconciled. They don't worse propagation latency at all, because these 8 connections are just added on top of the existing 8 full ones. However, in adversarial settings, rather than transactions not propagating at all, they cause reconciliation to take over when normal relay fails. This will happen at the cost of extra latency as it's a second-stage fallback mechanism, but it's better than not propagating at all.\n\nSo where we are at this point is that reconciliation-based connections are an **alternative to (some of the) extra block-only connections** that also improves tx-partition-resistance, but without the $\\mathcal{O}(\\mathrm(peers))$ factor in bandwidth effect that full connections have.\n\nThe full Erlay idea is to not have these reconciliation connections be separate from the normal full outbound connections, but have both mechanisms (flooding and reconciliation) inside all the normal connections, and intelligently pick between them: use flooding when you guess a peer is unlikely to have already heard of the transaction, and use reconciliation otherwise. This is where I think the majority of the conceptual complexity of Erlay comes in, as it involves intricate relay policy decisions to make these guesses well, and it's also where most of @sr-gi's efforts have been in the past year, because it just feels that with good decisions, you should be able to do better than two entirely separate connection classes.\n\nBack to the number-of-connection question. There is no reason to assume that today, 8 connections is the right number for both tx propagation delay and tx-partition resistance. It's a limitation of the existing technology that forces both numbers to be the same. If we didn't care about partition resistance, would we consider reducing the number of outbound connections to reduce bandwidth (especially for incoming nodes with ~100 connections)? It's not unreasonable to me we might conclude that 4 connections is actually sufficient for transaction propagation purposes; this may be especially true with [BIP-153 block template sharing](https://github.com/bitcoin/bips/pull/1937). And if so, we could consider today replacing 4 of the normal outbound connections with Erlay (or similar) connections. It'd worsen propagation delay, but perhaps in an acceptable way, and not worsen partition resistance. Of course, I'm not suggesting actually doing that, but as a demonstration that what reconciliation offers is **untangling tx-propagation and tx-partition-resistance from connection-count decisions**.\n\nHowever, with the effort to integrate flooding and reconciliation into one, and thus considering the possibility of replacing (all) normal connections with mixed flood-reconciliation connections, we maybe lost sight of the fact that the goal is increasing partition resistance (without unnecessary bandwidth and propagation-delay improvements), rather than bandwidth reduction per se.\n\nMaybe it's worth reevaluating the need for combining the two. If we already had (say) 8 extra block-only connections, and it was proposed to replace some of those with reconciliation-based ones, I think it would look like a fairly interesting picture: a slight bandwidth increase, extra memory/CPU for the nodes that choose to participate, but we upgrade the partition-resistance offered by them from block-only to also cover transactions. And maybe the complexity of trying to integrate flooding and reconciliation isn't worth it here, as it's an improvement even without it.",
          "created_at": "2026-02-11T16:09:49Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 1,
            "text_length": 6035,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3890024563,
          "user": "sr-gi",
          "body": "> Is it possible that, with this project going on for so long and with a couple of reboots, we kinda lost track of why we were doing this in the first place?\n\n> However, with the effort to integrate flooding and reconciliation into one, and thus considering the possibility of replacing (all) normal connections with mixed flood-reconciliation connections, we maybe lost sight of the fact that the goal is increasing partition resistance (without unnecessary bandwidth and propagation-delay improvements), rather than bandwidth reduction per se.\n\nMy understanding of why the project didn't move along in the previous iteration was that the latency/bandwidth tradeoff was not worth the change. I may have gotten that wrong, and missed the forest for the trees while retaking this, putting too much effort into optimizing the bandwidth/latency improvements instead of focusing on the partition resistance. \n\n> Maybe it's worth reevaluating the need for combining the two. If we already had (say) 8 extra block-only connections, and it was proposed to replace some of those with reconciliation-based ones, I think it would look like a fairly interesting picture: a slight bandwidth increase, extra memory/CPU for the nodes that choose to participate, but we upgrade the partition-resistance offered by them from block-only to also cover transactions. And maybe the complexity of trying to integrate flooding and reconciliation isn't worth it here, as it's an improvement even without it.\n\nI agree that this would be an interesting thing to try out, and it would significantly simplify the design of the approach. This would still require the added complexity of minisketch, the set reconciliation module, and the extra network messages, but the design would be much cleaner. For those concerned about the additional complexity, would this be an acceptable tradeoff (@marcofleon, @dergoegge, @stickies-v )?\n\n ",
          "created_at": "2026-02-12T10:27:36Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 2,
            "text_length": 1905,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3891730768,
          "user": "dergoegge",
          "body": "I'd like to understand the current state of partition resistance and what concrete improvement Erlay would bring (and what metric best captures this). Since the papers cited by Erlay (regarding partitioning attacks) have been published, we've deployed several mitigations (e.g. anchors, asmap, v2 transport, etc.), and the theoretical attacks in the literature often rely on simplifying assumptions that seem to understate the engineering/operational cost to an attacker. Given all that, how much of the gap has already been closed, and how much does Erlay still improve the situation?\n\nIf we'd just be doing this to improve partition resistance (because increased connectivity is obviously better in that regard) while it's not clear that improvements are needed, then I'm not sure if I'd make this a priority myself. Given a project of this size, we'd need some momentum and at least a couple dedicated reviewers, otherwise we'll still be discussing this in 5 years.",
          "created_at": "2026-02-12T15:48:43Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 968,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3892809196,
          "user": "marcofleon",
          "body": "Still digesting and reading some more, but clarifying Erlay's ultimate goal and walking through the different approaches has already been helpful to me. Thanks sipa.\n\n> If, on the other hand, we want to be able to scale the network without having to scale it's backbone of reachable nodes\n\nInteresting, I hadn't thought of this before. This would entail enabling more inbound slots without increasing outbound connections as much. So a listening node would be able to support more than the current ~11 fully-connected nodes and not take a meaningful bandwidth hit.\n\n> For those concerned about the additional complexity, would this be an acceptable tradeoff\n\nIf the simpler approach, which iiuc could look something like 8 full, 4 reconciliation, and 4 blocks-only, improves the tx relay network's partition resistance without significant drawbacks, then I would prefer that over Erlay. I'm interested in seeing what that implementation would look like in comparison.\n\nI'd still like to see the updated Erlay bandwidth and latency data with increased connection counts (no rush, just clarifying). However, unless there's a compelling reason to take on the extra complexity, I'd rather go with a simpler design that achieves a similar outcome.",
          "created_at": "2026-02-12T18:55:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1242,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 879,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3611510737,
      "number": 33848,
      "title": "ci: failure in `wallet_basic.py` KeyError: 'ischange'",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/19238750700/job/54998849583?pr=33842#step:12:208:\n```bash\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_basic.py\", line 550, in run_test\n\n    assert vout[\"ischange\"]\n\n           ~~~~^^^^^^^^^^^^\n\nKeyError: 'ischange'\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-11T09:43:11Z",
      "updated_at": "2026-02-12T17:05:31Z",
      "closed_at": "2026-02-12T17:05:31Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33848",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3892151492,
          "user": "maflcko",
          "body": "Wasn't able to reproduce this so far. And this was only seen once?",
          "created_at": "2026-02-12T17:01:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 66,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3892178684,
          "user": "fanquake",
          "body": "I don't think I've seen it again. Can close for now, and reopen a new issue if it happens again.",
          "created_at": "2026-02-12T17:05:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 96,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 328,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2353376259,
      "number": 30289,
      "title": "Cluster mempool tracking issue",
      "body": "What to review next:\n\n* #34023 \n\n---\n\nPlan:\n* Lowest level: generic utilities:\n  * [x] [#29242 FeeFrac type](https://github.com/bitcoin/bitcoin/pull/29242)\n    * [x] [#30535 Add FeeFrac::EvaluateFee](https://github.com/bitcoin/bitcoin/pull/30535)\n      * [x] [#32240 Fix integer overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32240)\n      * [x] [#32300 Fix different overflow in FeeFrac fuzz test](https://github.com/bitcoin/bitcoin/pull/32300)\n  * [x] [#30160 BitSet type](https://github.com/bitcoin/bitcoin/pull/30160)\n  * [x] [#30161 VecDeque type](https://github.com/bitcoin/bitcoin/pull/30161)\n* Low level: operations on `DepGraph` type (dependencies/linearizations for a single cluster)\n  * [x] [#30126 Base linearization algorithm](https://github.com/bitcoin/bitcoin/pull/30126)\n    * [x] [#30605 Split tests from tests-of-tests](https://github.com/bitcoin/bitcoin/pull/30605)\n    * [x] [#30857 Extend `DepGraph` functionality](https://github.com/bitcoin/bitcoin/pull/30857)\n  * [x] [#30285 Merging and postprocessing of linearizations](https://github.com/bitcoin/bitcoin/pull/30285)\n  * [x] [#30286 Optimized candidate search](https://github.com/bitcoin/bitcoin/pull/30286)\n  * [x] [#32545 Replace linearization with SFL](https://github.com/bitcoin/bitcoin/pull/32545)\n    * [x] [#34259 SFL chunk minimization](https://github.com/bitcoin/bitcoin/pull/34259)\n  * [ ] [#34023 SFL optimizations](https://github.com/bitcoin/bitcoin/pull/34023)\n    * [ ] [#34138 SFL cost model](https://github.com/bitcoin/bitcoin/pull/34138)\n* Intermediate level: operations on `TxGraph` type (dependencies/linearizations for the entire mempool)\n  * [x] [#31363 TxGraph basics](https://github.com/bitcoin/bitcoin/pull/31363)\n    * [x] [#32151 TxGraph basics follow-up](https://github.com/bitcoin/bitcoin/pull/32151)\n    * [x] [#32177 TxGraph increase fuzz coverage](https://github.com/bitcoin/bitcoin/pull/32177)\n    * [x] [#32191 Make TxGraph fuzzing more deterministic](https://github.com/bitcoin/bitcoin/pull/32191)\n    * [x] [#33354 Use enum Level instead of bool main_only](https://github.com/bitcoin/bitcoin/pull/33354)\n    * [x] [#33862 Drop support for `TxGraph::Ref` move assignment](https://github.com/bitcoin/bitcoin/pull/33862)\n    * ~~[#33335 Randomize order of transactions](https://github.com/bitcoin/bitcoin/pull/33335)~~\n    * [x] [#34257 Deterministic order of transactions](https://github.com/bitcoin/bitcoin/pull/34257)\n  * [x] [#31444 TxGraph mining/eviction](https://github.com/bitcoin/bitcoin/pull/31444)\n    * [x] [#33469 Use `std::unordered_set` for skipped clusters](https://github.com/bitcoin/bitcoin/pull/33469)\n  * [x] [#31553 TxGraph reorgs](https://github.com/bitcoin/bitcoin/pull/31553)\n  * [x] [#32263 TxGraph work controls](https://github.com/bitcoin/bitcoin/pull/32263)\n  * [x] [#33157 TxGraph memory usage](https://github.com/bitcoin/bitcoin/pull/33157)\n  * [x] [#34085 TxGraph exploiting SFL better](https://github.com/bitcoin/bitcoin/pull/34085)\n* High level: changes to mempool/validation\n  * [x] [#31122 Changesets for mempool](https://github.com/bitcoin/bitcoin/pull/31122)\n  * [x] [#33629 Cluster mempool implementation](https://github.com/bitcoin/bitcoin/pull/33629)\n    * ~~[#28676 Old version](https://github.com/bitcoin/bitcoin/pull/28676)~~\n  * [x] [#33591 Cluster mempool optimizations and cleanups](https://github.com/bitcoin/bitcoin/pull/33591)\n  * [x] [#34384 Remove epoch-based graph traversal](https://github.com/bitcoin/bitcoin/pull/34384)\n\n---\n\nIdeas for future follow-ups:\n* Clean up the comparison operators of `FeeFrac`, especially the `operator<<` and `operator>>`: https://github.com/bitcoin/bitcoin/pull/34257#discussion_r2780475893",
      "state": "open",
      "user": "sipa",
      "created_at": "2024-06-14T13:21:36Z",
      "updated_at": "2026-02-12T16:02:32Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/30289",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3735,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2801579793,
      "number": 31698,
      "title": "contrib: Autoconf fragments left in test-*-check scripts",
      "body": "The [`test-security-check`](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/test-security-check.py) and [`test-symbol-check`](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/test-symbol-check.py) scripts still reference Autoconf and it's behaviour:\n```python\ndef env_flags() -> list[str]:\n    # This should behave the same as AC_TRY_LINK, so arrange well-known flags\n    # in the same order as autoconf would.\n    #\n    # See the definitions for ac_link in autoconf's lib/autoconf/c.m4 file for\n    # reference.\n```\n\nThe also expect `CPPFLAGS` to be passed into them, but this isn't happening from CMake:\n\nhttps://github.com/bitcoin/bitcoin/blob/d7f56cc5d9e12ad31dd1ce8b34c3ff4ec5c1b70c/cmake/module/Maintenance.cmake#L40",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-01-21T11:40:14Z",
      "updated_at": "2026-02-12T11:11:22Z",
      "closed_at": "2025-02-12T08:48:02Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31698",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 810,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3434544542,
      "number": 33438,
      "title": "ci: add (atleast one) *BSD job to the CI",
      "body": "See https://github.com/bitcoin/bitcoin/pull/33333#discussion_r2362493046 & #33435. BSDs are being tested in nightly repos, but merging code here, just to have it reported as broken after the fact, which then requires more changes to fix, isn't ideal. Issues should be caught in this repo, before merging.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-09-19T14:12:56Z",
      "updated_at": "2026-02-12T11:01:30Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/33438",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3890169354,
          "user": "fanquake",
          "body": "Apparently recent changes have broken the NetBSD build: https://github.com/bitcoin/bitcoin/pull/34143#discussion_r2798064509",
          "created_at": "2026-02-12T10:56:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 124,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3890199126,
          "user": "maflcko",
          "body": "I guess we'll have to add https://github.com/bitcoin/bitcoin/pull/34491 for netbsd and openbsd as well, if they are so diverse?",
          "created_at": "2026-02-12T11:01:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 127,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 345,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 513520983,
      "number": 17289,
      "title": "contrib: Autogenerate bash completion",
      "body": "We have a bash completion file, which needs to be updated manually: https://github.com/bitcoin/bitcoin/pull/17282#issuecomment-547020006\r\n\r\nHowever, given our argparse module and RPCHelpMan, I believe it should be possible to autogenerate it with maybe a python script.\r\n\r\nIf it should be necessary to run a bitcoind instance as an http server for rpc request to auto-generate the bash completion, this could be implemented as a functional test (written in python).",
      "state": "open",
      "user": "maflcko",
      "created_at": "2019-10-28T19:51:28Z",
      "updated_at": "2026-02-12T08:15:00Z",
      "closed_at": null,
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/17289",
      "labels": [
        "Feature"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 503,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 524388328,
      "number": 17506,
      "title": "gen-manpages output depends on build options, so needs to check them",
      "body": "The [gen-manpages.py](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/gen-manpages.py) generates UNIX manual pages based on the `-help` output from the binairies that result from the build.\n\nThis means that the options documented vary based on the build system settings. In the manual pages that are checked in, we would like to document as many options as possible.\n\nIdeally the script needs to check for:\n\n- `HAVE_SYSTEM` so that `-alertnotify` and other notifications are documented\n- `ENABLE_WALLET` so that wallet specific arguments are documented\n- `WITH_ZMQ` so that ZMQ arguments are documented\n\nAn alternative would be to generate the manual page from the source code instead (e.g. pick up and parse `AddArg`). This is much more complicated, though, due to use of `strprintf` and such.\n\n## Good first issue\n\nThe purpose of the `good first issue` label is to highlight which issues are suitable for a new contributor without a deep understanding of the codebase.\n\nUseful skills: *shell scripting*\n\n\nWant to work on this issue?\n\nYou do not need to request permission to start working on this. You are encouraged to comment on the issue if you are planning to work on it. This will help other contributors monitor which issues are actively being addressed and is also an effective way to request assistance if and when you need it.\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "open",
      "user": "laanwj",
      "created_at": "2019-11-18T14:04:12Z",
      "updated_at": "2026-02-12T08:14:42Z",
      "closed_at": null,
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/issues/17506",
      "labels": [
        "Scripts and tools"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1582,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1359424165,
      "number": 25980,
      "title": "combinerawtransaction confusing with distinct transactions",
      "body": "If passed two unrelated transactions, `combinerawtransaction` seems to take the first and ignore the rest.\r\n\r\nWe should probably either throw an error or actually combine them somehow?",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2022-09-01T21:21:36Z",
      "updated_at": "2026-02-12T08:12:57Z",
      "closed_at": null,
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/25980",
      "labels": [
        "Bug"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 243,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1941676471,
      "number": 28648,
      "title": "test: Write assumeutxo tests",
      "body": "### Motivation\n\nTests are useful to catch bugs, so they should be written.\n\n### Possible solution\n\nWrite tests, similar to https://github.com/bitcoin/bitcoin/pull/28647\r\n\r\nRefer to the `TODO` comments in `./test/functional/feature_assumeutxo.py`, or to the uncovered lines in the AssumeUtxo code via a coverage report. For example, https://maflcko.github.io/b-c-cov/total.coverage/src/validation.cpp.gcov.html\n\n### Useful Skills\n\n* Compiling Bitcoin Core from source\r\n* Running the C++ unit tests and the Python functional tests\r\n* Basic AssumeUtxo understanding\r\n* Bitcoin Core serialization and test framework understanding\r\n* Python serialization understanding\n\n### Guidance for new contributors\n\nWant to work on this issue?\r\n\r\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2023-10-13T10:24:00Z",
      "updated_at": "2026-02-12T08:12:25Z",
      "closed_at": null,
      "comments": 23,
      "url": "https://github.com/bitcoin/bitcoin/issues/28648",
      "labels": [
        "Wallet",
        "Tests",
        "Consensus"
      ],
      "comment_data": [
        {
          "id": 3889198198,
          "user": "pratikshmalik05",
          "body": "can i try to do or pr is already done ?\n",
          "created_at": "2026-02-12T07:53:53Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 40,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 919,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2661291513,
      "number": 31293,
      "title": "Discover() will not run if listening on any address with an explicit bind=0.0.0.0",
      "body": "### Current behaviour\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/85bcfeea23568053ea09013fb8263fa1511d7123/src/init.cpp#L1890-L1892\r\n\r\n`Discover()` will run only if we are listening on all addresses (`bind_on_any` is `true`). However if `-bind=0.0.0.0:port` is explicitly given, then `bind_on_any` will end up being `false` and thus `Discover()` will not run when it should.\r\n\r\n### Expected behaviour\r\n\r\nDiscover own addresses even if `-bind=0.0.0.0:port` is given.\r\n\r\n### Steps to reproduce\r\n\r\nUse `-bind=0.0.0.0:port`.\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@85bcfeea23568053ea09013fb8263fa1511d7123\r\n\r\n### Operating system and version\r\n\r\nWindows 3.11\r\n\r\n### Background\r\n\r\nSee https://github.com/bitcoin/bitcoin/issues/31133#issuecomment-2477231557",
      "state": "open",
      "user": "vasild",
      "created_at": "2024-11-15T08:54:02Z",
      "updated_at": "2026-02-12T08:11:53Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/31293",
      "labels": [
        "P2P"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 915,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 501439297,
      "number": 17020,
      "title": "contrib: makeseeds.py improvements",
      "body": "Some suggestions for improvements, or at least for discussion between major releases:\r\n\r\n\r\n- [x] Read [suspicious hosts](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536869449)  from a file (done in #17823, removed completely in #24862)\r\n- [x] [Determinism](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-537070141) could be improved (this is useful for cross-checking)\r\n    - [x] Read ASNs from a file (Done in #24864)\r\n    - [x] Per-ASN limit [isn't consistently enforced?](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-537173086)\r\n- [x] [A max of 2 seeds per ASN seems a bit strict](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536999544) at lest for IPv6 (done in #24818)\r\n- [x] [Should we bump MIN_BLOCKS?](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536999544) (done in #24818)\r\n- [x] Some [typos](https://github.com/bitcoin/bitcoin/pull/16999#pullrequestreview-295794240) in the comments\r\n- [x] Handle and hardcode TorV3 peers (after #19954), see #20239\r\n- [ ] Bring back onion functionality past TorV3 switch\r\n    - [ ] We need a source of non-hardcoded V3 peers, currently the only ones are hardcoded and the seeder hasn't been updated to crawl v3 nodes yet (see sipa/bitcoin-seeder#92)\r\n    - [ ] Consider increasing uptime requirements for Tor nodes from 10% as there [appear to be enough](#issuecomment-718622693)\r\n\r\n#7398 was a previous attempt to improve this script, but was abandoned, maybe some changes are useful.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2019-10-02T11:46:27Z",
      "updated_at": "2026-02-12T08:10:02Z",
      "closed_at": null,
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/issues/17020",
      "labels": [
        "P2P",
        "Scripts and tools"
      ],
      "comment_data": [
        {
          "id": 3889195440,
          "user": "pratikshmalik05",
          "body": "can i work on or pr is already done?\n",
          "created_at": "2026-02-12T07:53:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 37,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1534,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3923539750,
      "number": 34553,
      "title": "wallet, rpc: createwalletdescriptors ignores BIP44 accounts",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nIf I import a descriptor with a non-zero BIP44 account path, then run the createwalletdescriptor command for the same address type it creates the index 0 account and deactivates the one I imported. Other address types also use account 0.\n```shell\nbitcoin rpc -testnet createwallet \"blank_wallet\" blank=true\nbitcoin rpc -testnet importdescriptors '[{\"desc\": \"pkh(tprv8ZgxMBicQKsPehov3DbrnoRUPSX6DpANYfqcZX6RCaux8pMHhDPLm1NMsiJVPRLZccrsDcDo4b8182oJ9zbTQE6uvM6VznTjqCsezwb51MT/44h/1h/1h/<0;1>/*)#c63vt4ly\", \"active\": true, \"timestamp\": \"now\"}]'\nbitcoin rpc -testnet gethdkeys\nbitcoin rpc -testnet createwalletdescriptor legacy\nbitcoin rpc -testnet createwalletdescriptor bech32m\nbitcoin rpc -testnet gethdkeys\n```\n```json\n{\n  \"name\": \"blank_wallet\"\n}\n[\n  {\n    \"success\": true,\n    \"warnings\": [\n      \"Range not given, using default keypool range\"\n    ]\n  }\n]\n[\n  {\n    \"xpub\": \"tpubD6NzVbkrYhZ4YAqhvsGTCD5axU32P9MH7ySPr38icriLyJc4KcCvwVzE3rsiXaAHBC8QtYWhiBGdc6aZRmroQShGcWygQfErbvLULfJSi8j\",\n    \"has_private\": true,\n    \"descriptors\": [\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/0/*)#4q2dlgt8\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/1/*)#y50vzaml\",\n        \"active\": true\n      }\n    ]\n  }\n]\n{\n  \"descs\": [\n    \"pkh([3f3521a6/44h/1h/0h]tpubDC96eSBUJsfwQLgFycrHgLCvgxy7BM6hbp65t1Tn9ajLQhDTHmtgWQjmgdWgyZxfNY4nGJztAYK7CYh83pNvj1V72Fe2cogcd2WJFwZK9EB/0/*)#5470vsc4\",\n    \"pkh([3f3521a6/44h/1h/0h]tpubDC96eSBUJsfwQLgFycrHgLCvgxy7BM6hbp65t1Tn9ajLQhDTHmtgWQjmgdWgyZxfNY4nGJztAYK7CYh83pNvj1V72Fe2cogcd2WJFwZK9EB/1/*)#9pmw39gd\"\n  ]\n}\n{\n  \"descs\": [\n    \"tr([3f3521a6/86h/1h/0h]tpubDCW7vJKTJGE1e5WTX7mWDmafQmsEMpaVbqFkZih8uQympr8a1FZkw7paeNXkVgE28jdZd13aexRzuCzF3NfuzQNFgAqmSU9p1DDrYeRUUoE/0/*)#e7freggd\",\n    \"tr([3f3521a6/86h/1h/0h]tpubDCW7vJKTJGE1e5WTX7mWDmafQmsEMpaVbqFkZih8uQympr8a1FZkw7paeNXkVgE28jdZd13aexRzuCzF3NfuzQNFgAqmSU9p1DDrYeRUUoE/1/*)#g2vzyac4\"\n  ]\n}\n[\n  {\n    \"xpub\": \"tpubD6NzVbkrYhZ4YAqhvsGTCD5axU32P9MH7ySPr38icriLyJc4KcCvwVzE3rsiXaAHBC8QtYWhiBGdc6aZRmroQShGcWygQfErbvLULfJSi8j\",\n    \"has_private\": true,\n    \"descriptors\": [\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/0h]tpubDC96eSBUJsfwQLgFycrHgLCvgxy7BM6hbp65t1Tn9ajLQhDTHmtgWQjmgdWgyZxfNY4nGJztAYK7CYh83pNvj1V72Fe2cogcd2WJFwZK9EB/0/*)#5470vsc4\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/0h]tpubDC96eSBUJsfwQLgFycrHgLCvgxy7BM6hbp65t1Tn9ajLQhDTHmtgWQjmgdWgyZxfNY4nGJztAYK7CYh83pNvj1V72Fe2cogcd2WJFwZK9EB/1/*)#9pmw39gd\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/0/*)#4q2dlgt8\",\n        \"active\": false\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/1/*)#y50vzaml\",\n        \"active\": false\n      },\n      {\n        \"desc\": \"tr([3f3521a6/86h/1h/0h]tpubDCW7vJKTJGE1e5WTX7mWDmafQmsEMpaVbqFkZih8uQympr8a1FZkw7paeNXkVgE28jdZd13aexRzuCzF3NfuzQNFgAqmSU9p1DDrYeRUUoE/0/*)#e7freggd\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"tr([3f3521a6/86h/1h/0h]tpubDCW7vJKTJGE1e5WTX7mWDmafQmsEMpaVbqFkZih8uQympr8a1FZkw7paeNXkVgE28jdZd13aexRzuCzF3NfuzQNFgAqmSU9p1DDrYeRUUoE/1/*)#g2vzyac4\",\n        \"active\": true\n      }\n    ]\n  }\n]\n```\n\nRelated to: https://github.com/bitcoin/bitcoin/pull/29129\n\n### Expected behaviour\n\nBased on the `createwalletdescriptor` help text,\n> Creates the wallet's descriptor for the given address type. The address type must be one that the wallet does not already have a descriptor for.\n\nI expected:\n\n-  an error given an address type the wallet already has a descriptor for\n- the active account to propagate to other address types\n\n```shell\n{\n  \"name\": \"blank_wallet\"\n}\n[\n  {\n    \"success\": true,\n    \"warnings\": [\n      \"Range not given, using default keypool range\"\n    ]\n  }\n]\n[\n  {\n    \"xpub\": \"tpubD6NzVbkrYhZ4YAqhvsGTCD5axU32P9MH7ySPr38icriLyJc4KcCvwVzE3rsiXaAHBC8QtYWhiBGdc6aZRmroQShGcWygQfErbvLULfJSi8j\",\n    \"hd_account\": 1,\n    \"has_private\": true,\n    \"descriptors\": [\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/0/*)#4q2dlgt8\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/1/*)#y50vzaml\",\n        \"active\": true\n      }\n    ]\n  }\n]\nerror code: -4\nerror message:\nDescriptor already exists\n{\n  \"descs\": [\n    \"tr([3f3521a6/86h/1h/1h]tpub.../0/*)...\",\n    \"tr([3f3521a6/86h/1h/1h]tpub.../1/*)...\"\n  ]\n}\n[\n  {\n    \"xpub\": \"tpubD6NzVbkrYhZ4YAqhvsGTCD5axU32P9MH7ySPr38icriLyJc4KcCvwVzE3rsiXaAHBC8QtYWhiBGdc6aZRmroQShGcWygQfErbvLULfJSi8j\",\n    \"hd_account\": 1,\n    \"has_private\": true,\n    \"descriptors\": [\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/0/*)#4q2dlgt8\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"pkh([3f3521a6/44h/1h/1h]tpubDC96eSBUJsfwSkkQFtdwCv2sYs3BNDVpBn7RqnpP2e1BSZDzojUT9J5SyEpZXJJtmm1mGRfpyipjQ1XhzrnxUoRT17BhWGw4G6UQimL4t42/1/*)#y50vzaml\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"tr([3f3521a6/86h/1h/1h]tpub.../0/*)...\",\n        \"active\": true\n      },\n      {\n        \"desc\": \"tr([3f3521a6/86h/1h/1h]tpub.../1/*)...\",\n        \"active\": true\n      }\n    ]\n  }\n]\n```\n\nThis issue could be avoided by an `hd_account` option for createwalletdescriptor (see unimplemented https://github.com/bitcoin/bitcoin/pull/29130#discussion_r1435607572):\n>It could make sense to add an ... `hd_account` option (see https://github.com/bitcoin/bitcoin/pull/29129#issuecomment-1869859432) for ... wallets :\n> ```shell\n> # Add descriptors from the external signer with the specified BIP44 account\n> createwalletdescriptor hd_account=1\n>```\nProposed solution:\n`createwalletdescriptor help`:\n```\nNamed Arguments:\ninternal    (boolean, optional, default=Both external and internal will be generated unless this parameter is specified) Whether to only make one descriptor that is internal (if parameter is true) or external (if parameter is false)\nhdkey       (string, optional, default=The HD key used by all other active descriptors) The HD key that the wallet knows the private key of, listed using 'gethdkeys', to use for this descriptor's key\nhd_account  (numeric, optional, default=The BIP44 account used by all other active descriptors) The BIP44 account, listed using 'gethdkeys', to use for this descriptor's derivation path.\nProposed solution:\n```\n`gethdkeys help`:\n```\nResult:\n[                                  (json array)\n  {                                (json object)\n    \"xpub\" : \"str\",                (string) The extended public key\n    \"hd_account\": n,               (numeric, optional) The HD account used by all active descriptors if the wallet follows BIP44\n    \"has_private\" : true|false,    (boolean) Whether the wallet has the private key for this xpub\n    \"xprv\" : \"str\",                (string, optional) The extended private key if \"private\" is true\n    \"descriptors\" : [              (json array) Array of descriptor objects that use this HD key\n      {                            (json object)\n        \"desc\" : \"str\",            (string) Descriptor string representation\n        \"active\" : true|false      (boolean) Whether this descriptor is currently used to generate new addresses\n      },\n      ...\n    ]\n  },\n  ...\n]\n```\n\nThe following behavior may also be expected for non-0 BIP44 accounts:\n>Software should prevent a creation of an account if a previous account does not have a transaction history (meaning none of its addresses have been used before).\n>\n>Software needs to discover all used accounts after importing the seed from an external source. Such an algorithm is described in \"[Account discovery](github.com/bitcoin/bips/blob/master/bip-0044.mediawiki#account-discovery)\" chapter.\n\nHowever this is problematic for external signers so it should warn rather than prevent if it cannot scan the chain.\n\n### Steps to reproduce\n\n```shell\nbitcoin rpc -testnet createwallet \"blank_wallet\" blank=true\nbitcoin rpc -testnet importdescriptors '[{\"desc\": \"pkh(tprv8ZgxMBicQKsPehov3DbrnoRUPSX6DpANYfqcZX6RCaux8pMHhDPLm1NMsiJVPRLZccrsDcDo4b8182oJ9zbTQE6uvM6VznTjqCsezwb51MT/44h/1h/1h/<0;1>/*)#c63vt4ly\", \"active\": true, \"timestamp\": \"now\"}]'\nbitcoin rpc -testnet gethdkeys\nbitcoin rpc -testnet createwalletdescriptor legacy\nbitcoin rpc -testnet createwalletdescriptor bech32m\nbitcoin rpc -testnet gethdkeys\n```\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv30.2.0\n\n### Operating system and version\n\nDebian 13\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "BenWestgate",
      "created_at": "2026-02-10T20:58:26Z",
      "updated_at": "2026-02-12T03:54:45Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34553",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3880772304,
          "user": "achow101",
          "body": "This is the intended and expected behavior.\n\n`createwalletdescriptor` uses only the keys that are known to the wallet, it does not know about nor account for any derivation information attached to those keys.\n\n> I also expected an hd_account option for createwalletdescriptor (see https://github.com/bitcoin/bitcoin/pull/29130#discussion_r1435607572):\n\nThat was not implemented, and is not stated in the help text. There is no reason to expect that.\n\n> `createwalletdescriptor help`:\n> \n> ```\n> Named Arguments:\n> internal    (boolean, optional, default=Both external and internal will be generated unless this parameter is specified) Whether to only make one descriptor that is internal (if parameter is true) or external (if parameter is false)\n> hdkey       (string, optional, default=The HD key used by all other active descriptors) The HD key that the wallet knows the private key of, listed using 'gethdkeys', to use for this descriptor's key\n> hd_account  (numeric, optional, default=The BIP44 account used by all other active descriptors) The BIP44 account, listed using 'gethdkeys', to use for this descriptor's derivation path.\n> ```\n\nI don't know where you got that from, but that is not what the help says.\n\n***\n\nThe help text should be corrected to remove the sentence \"The address type must be one that the wallet does not already have a descriptor for.\". The intention is for `createwalletdescriptor` to be able to rotate keys in the future, so this sentence is no longer correct.",
          "created_at": "2026-02-10T21:19:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1495,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3882063075,
          "user": "BenWestgate",
          "body": "> `createwalletdescriptor` uses only the keys that are known to the wallet, it does not know about nor account for any derivation information attached to those keys.\n\nIt should know about account to use it by default, otherwise it makes descriptors with different active accounts per address type for one HD key which is unexpected.\n\n> > I also expected an hd_account option for createwalletdescriptor...\n> \n> That was not implemented, and is not stated in the help text.\n\nThen consider this issue a feature request for a \"`createwalletdescriptor` `hd_account` option\".\n\n> I don't know where you got that from, but that is not what the help says.\n\nI wrote it as a mock up for a potential solution which adds an `hd_account` option.\n\n> ***\n> \n> The help text should be corrected to remove the sentence \"The address type must be one that the wallet does not already have a descriptor for.\". The intention is for `createwalletdescriptor` to be able to rotate keys in the future, so this sentence is no longer correct.\n\nIs the correct sentence:\n\n\"The address type must be one that the HD key does not already have a descriptor for.\"?\n\nLet's fix the help text to close this issue and move `hd_account` to a feature request.\n\nI think `createwalletdescriptors` should support creating/rotating accounts, and default to the first unimported account index per address type per HD key.\n\nThis helps restore privacy if [deadbeef/purpose'/0'/0'] xpubs were compromised by rotating to [deadbeef/purpose'/0'/1'] and allows managing segregated funds with one HD key.",
          "created_at": "2026-02-11T04:33:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1550,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3888529168,
          "user": "Torqued-codes",
          "body": "I was able to successfully reproduce this behavior on my local machine. Confirming that `createwalletdescriptor` deactivates previously imported non-zero BIP44 accounts.\n\ni)Environment Details:\nOS : Version 24H2 (OS Build 26100.7623)\nii)Bitcoin Core Version: v28.0.0\niii)Network : Testnet\n\nSteps Performed:\n1. Created a blank descriptor wallet using `createwallet`.\n2. Imported a BIP44 descriptor with a non-zero account path (index 1).\n3. Verified the imported descriptor was `active: true` via `gethdkeys`.\n4. Ran `createwalletdescriptor legacy` and `createwalletdescriptor bech32m`.\n5. Checked `gethdkeys` again.\n\nActual Results: \nThe previously active descriptor (account 1) was set to `active: false`. It was replaced by a new active descriptor for account 0, which matches the reporter's findings.\n\nSupporting Logs:\n```json\n[\n  {\n    \"hd_account\": 1,\n    \"descriptors\": [\n      {\n        \"desc\": \"pkh(.../44h/1h/1h...)#4q2dlgt8\",\n        \"active\": false\n      }\n    ]\n  }\n]\n",
          "created_at": "2026-02-12T03:54:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 980,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 9343,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1511892753,
      "number": 26757,
      "title": "Unit tests skip code paths for `parallel_script_checks==false`",
      "body": "The `Chainstate::ConnectBlock()` function is implemented in a way that different code paths are used during runtime depending on the `parallel_script_checks` flag's value.\r\n\r\nOTOH, the current test suit implementation with the following lines:https://github.com/bitcoin/bitcoin/blob/e9262ea32a6e1d364fb7974844fadc36f931f8c6/src/test/util/setup_common.cpp#L189-L190 sets the `parallel_script_checks` to `true` for all cases.\r\n\r\nFor example, the outcome of `miner_tests` is affected by the `parallel_script_checks` flag's value.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2022-12-27T15:13:00Z",
      "updated_at": "2026-02-11T19:11:13Z",
      "closed_at": "2026-02-11T19:11:13Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/26757",
      "labels": [
        "Tests",
        "Consensus"
      ],
      "comment_data": [
        {
          "id": 3884574704,
          "user": "fanquake",
          "body": "What is the status of this? The `parallel_script_checks` variable no-longer exists.",
          "created_at": "2026-02-11T13:52:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 83,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 589,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3510034192,
      "number": 33607,
      "title": "Release Schedule for 31.0",
      "body": "Here is a proposed release schedule for `v31.0`, the next major release of Bitcoin Core.\nThe dates are set to target a release in early April.\n\n## 2026-02-06 :heavy_check_mark:\n- Open Transifex translations for `v31.0`\n- Soft translation string freeze (no large or non-critical string changes until release)\n- Finalize and close translations for `v29.0`\n\n## 2026-02-20 :construction:\n- Feature freeze (bug fixes only until release)\n- Translation string freeze (no more source language changes until release)\n\n## 2026-03-10 :construction:\n- Anything needed before branch-off, see https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md\n- Split off `31.x` branch from `master`\n- Start RC cycle, tag and release `v31.0rc1`\n- Start merging for `32.x` on `master` branch\n\n## 2026-04-10 :construction:\n- Tag `v31.0` (aim).\n\nIf any specific dates are a problem for you, please leave a comment.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-10-13T13:14:55Z",
      "updated_at": "2026-02-11T18:50:28Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33607",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3867197035,
          "user": "hebasto",
          "body": "> ## 2026-02-06 🚧\n> \n>    * Open Transifex translations for `v31.0`\n> \n>    * Soft translation string freeze (no large or non-critical string changes until release)\n> \n>    * Finalize and close translations for `v29.0`\n\nThe first set of tasks has been completed.\n\nSee the translation opening announcement:\n- https://app.transifex.com/bitcoin/communication/d:80e7e2cf-b9e6-495b-b2be-1aa3cac75663/\n- https://groups.google.com/g/bitcoin-translators/c/EZy3Mq499Z4",
          "created_at": "2026-02-08T13:43:31Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 459,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3871054650,
          "user": "hebasto",
          "body": "> See the translation opening announcement:\n> \n>    * https://app.transifex.com/bitcoin/communication/d:80e7e2cf-b9e6-495b-b2be-1aa3cac75663/\n> \n>    * https://groups.google.com/g/bitcoin-translators/c/EZy3Mq499Z4\n\nFriendly ping Transifex language coordinators: @aandia, @AO-LocLab, @BitByBitByBitByBit, @cryptomeow, @Emzy, @jesterhodl, @krvi, @ostruvek.\n\n",
          "created_at": "2026-02-09T11:04:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 356,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3884874318,
          "user": "AO-LocLab",
          "body": "Hi @hebasto \nFrench is done but for the strings I asked you about on Transifex:\nhttps://app.transifex.com/bitcoin/bitcoin/translate/#fr/qt-translation-031x?q=reviewed%3Ano%20comment%3Ahebasto",
          "created_at": "2026-02-11T14:41:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 191,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3886282849,
          "user": "jesterhodl",
          "body": "> > See the translation opening announcement:\n> > \n> > * https://app.transifex.com/bitcoin/communication/d:80e7e2cf-b9e6-495b-b2be-1aa3cac75663/\n> > * https://groups.google.com/g/bitcoin-translators/c/EZy3Mq499Z4\n> \n> Friendly ping Transifex language coordinators: [@aandia](https://github.com/aandia), [@AO-LocLab](https://github.com/AO-LocLab), [@BitByBitByBitByBit](https://github.com/BitByBitByBitByBit), [@cryptomeow](https://github.com/cryptomeow), [@Emzy](https://github.com/Emzy), [@jesterhodl](https://github.com/jesterhodl), [@krvi](https://github.com/krvi), [@ostruvek](https://github.com/ostruvek).\n\nFor Polish: I translated the brand new labels. I went to review everything for completeness. I found some typos and errors and fixed them, but I also found some translated gaps (about 150 out of 1200+) which I'll translate.\nI should have it tomorrow'ish.",
          "created_at": "2026-02-11T18:50:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 866,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 926,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 625207902,
      "number": 19075,
      "title": "build: Investigate aarch64 pointer authentication",
      "body": "This would entail adding `-mbranch-protection=standard` to our hardening flags. We should also check if this feature requires kernel/glibc support that our ABI doesn't include.\r\n\r\nMore info: https://fedoraproject.org/wiki/Changes/Aarch64_PointerAuthentication",
      "state": "open",
      "user": "dongcarl",
      "created_at": "2020-05-26T21:22:51Z",
      "updated_at": "2026-02-11T15:00:34Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/19075",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3870973348,
          "user": "willcl-ark",
          "body": "Has this been completed as part of https://github.com/bitcoin/bitcoin/pull/32071/changes/00ba3ba30341a9073049125334f176d6c05d1b54 ?\n\nISTM that that change resulted in our current `aarch64/arm64` cmake configuration:\n\nhttps://github.com/bitcoin/bitcoin/blob/6d625af2831b7c36d59f245a65df3f70f2110f69/CMakeLists.txt#L532-L538\n\n...where we use `bti` on `Darwin` and `standard` on all other `aarch64/arm64` systems.",
          "created_at": "2026-02-09T10:48:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 410,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3870983553,
          "user": "fanquake",
          "body": "> Has this been completed as part of https://github.com/bitcoin/bitcoin/commit/00ba3ba30341a9073049125334f176d6c05d1b54 ?\n\nNo, but I do have a branch that does complete this, which I'll open this week.",
          "created_at": "2026-02-09T10:50:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 201,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3885009037,
          "user": "fanquake",
          "body": "Sorry, thought this was (#30677 which I do have a branch to finish), my PR to finish fixing this issue was #24123, which I closed, in favour of #25573, given that it requires a glibc bump to `2.33`+. If do we end up bumping our glibc in the interim, then this would still be solved. ",
          "created_at": "2026-02-11T15:00:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 283,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 309,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3515047935,
      "number": 33628,
      "title": "Minor Release 29.3",
      "body": "🚧 Milestone: https://github.com/bitcoin/bitcoin/milestone/80\n\nBackports and other changes\n- #33623\n- #33611\n- #34222\n- #33788\n- #34268\n- https://github.com/bitcoin/bitcoin/pull/34370\n\n\nRC 1\n- [x] final changes #34268\n- [x] binaries https://bitcoincore.org/bin/bitcoin-core-29.3/test.rc1/\n\nRC 2\n- [x] final changes #34450\n- [x] binaries https://bitcoincore.org/bin/bitcoin-core-29.3/test.rc2/\n\nRelease\n- [x] final changes #34536\n- [x] binaries https://bitcoincore.org/bin/bitcoin-core-29.3/\n- [ ] announcements\n\n\nSee [release process docs](https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md) for more details. This issue can be used to track status updates. Please feel free to suggest backports in the comments.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2025-10-14T18:35:27Z",
      "updated_at": "2026-02-11T14:20:19Z",
      "closed_at": "2026-02-11T14:20:18Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/33628",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3883614484,
          "user": "fanquake",
          "body": "29.3 bins are up: https://bitcoincore.org/bin/bitcoin-core-29.3/.\nRelease notes are archived: https://github.com/bitcoin/bitcoin/pull/34555",
          "created_at": "2026-02-11T10:40:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 139,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3883615963,
          "user": "fanquake",
          "body": "Website has also been updated: https://bitcoincore.org/en/2026/02/10/release-29.3/.",
          "created_at": "2026-02-11T10:41:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 83,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3884191106,
          "user": "fanquake",
          "body": "GH release: https://github.com/bitcoin/bitcoin/releases/tag/v29.3.",
          "created_at": "2026-02-11T12:42:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 66,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3884737165,
          "user": "fanquake",
          "body": "Closing this & https://github.com/bitcoin/bitcoin/milestone/80.",
          "created_at": "2026-02-11T14:20:18Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 63,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 749,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3322502078,
      "number": 33188,
      "title": "asan: GCC warning about use-after-free",
      "body": "GCC is warning about use-after-free in the recently added ASAN unpoisoning:\n```bash\n# gcc (GCC) 15.2.1 20250808 (Red Hat 15.2.1-1)\n# cmake -B build -DSANITIZERS=address\nIn file included from /root/bitcoin/src/util/check.h:131,\n                 from /root/bitcoin/src/random.h:13,\n                 from /root/bitcoin/src/test/util/random.h:9,\n                 from /root/bitcoin/src/test/util/setup_common.h:19,\n                 from /root/bitcoin/src/test/util/setup_common.cpp:5:\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘std::pair<CMutableTransaction, long int> TestChain100Setup::CreateValidTransaction(const std::vector<std::shared_ptr<const CTransaction> >&, const std::vector<COutPoint>&, int, const std::vector<CKey>&, const std::vector<CTxOut>&, const std::optional<CFeeRate>&, const std::optional<unsigned int>&)’ at /root/bitcoin/src/test/util/setup_common.cpp:486:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /root/bitcoin/src/memusage.h:10,\n                 from /root/bitcoin/src/core_memusage.h:10,\n                 from /root/bitcoin/src/kernel/mempool_entry.h:10,\n                 from /root/bitcoin/src/test/util/setup_common.cpp:18:\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘std::pair<CMutableTransaction, long int> TestChain100Setup::CreateValidTransaction(const std::vector<std::shared_ptr<const CTransaction> >&, const std::vector<COutPoint>&, int, const std::vector<CKey>&, const std::vector<CTxOut>&, const std::optional<CFeeRate>&, const std::optional<unsigned int>&)’ at /root/bitcoin/src/test/util/setup_common.cpp:486:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n<snip>\nIn file included from /root/bitcoin/src/util/check.h:131,\n                 from /root/bitcoin/src/random.h:13,\n                 from /root/bitcoin/src/test/util/random.h:9,\n                 from /root/bitcoin/src/test/util/setup_common.h:19,\n                 from /root/bitcoin/src/test/transaction_tests.cpp:7:\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /root/bitcoin/src/memusage.h:10,\n                 from /root/bitcoin/src/core_memusage.h:10,\n                 from /root/bitcoin/src/coins.h:10,\n                 from /root/bitcoin/src/script/sign.h:10,\n                 from /root/bitcoin/src/test/transaction_tests.cpp:23:\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::max_standard_legacy_sigops::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1150:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::spends_witness_prog::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1305:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::test_Get::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:450:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn destructor ‘PoolResource<MAX_BLOCK_SIZE_BYTES, ALIGN_BYTES>::~PoolResource() [with long unsigned int MAX_BLOCK_SIZE_BYTES = 152; long unsigned int ALIGN_BYTES = 8]’,\n    inlined from ‘virtual CCoinsViewCache::~CCoinsViewCache()’ at /root/bitcoin/src/coins.h:362:7,\n    inlined from ‘void transaction_tests::test_IsStandard::test_method()’ at /root/bitcoin/src/test/transaction_tests.cpp:1055:1:\n/root/bitcoin/src/support/allocators/pool.h:210:13: warning: pointer ‘chunk’ used after ‘void operator delete(void*, std::align_val_t)’ [-Wuse-after-free]\n  210 |             ASAN_UNPOISON_MEMORY_REGION(chunk, m_chunk_size_bytes);\n      |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/root/bitcoin/src/support/allocators/pool.h:209:31: note: call to ‘void operator delete(void*, std::align_val_t)’ here\n  209 |             ::operator delete ((void*)chunk, std::align_val_t{ELEM_ALIGN_BYTES});\n      |             ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\ncc @dergoegge ",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-08-14T14:45:19Z",
      "updated_at": "2026-02-11T14:19:22Z",
      "closed_at": "2026-02-11T14:19:22Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33188",
      "labels": [
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3884730852,
          "user": "fanquake",
          "body": "Not seeing this with `gcc (GCC) 16.0.1 20260127 (Red Hat 16.0.1-0)`",
          "created_at": "2026-02-11T14:19:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 67,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 9531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 640455898,
      "number": 19303,
      "title": "Replace all of the RecursiveMutex instances with the Mutex ones",
      "body": "**UPD 2023-04-18**. See a shortlist [here](https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-1513337566).\n\n---\n\nThis is a tracking issue for the long-term goal to replace all of the `RecursiveMutex` instances with the `Mutex` ones throughout the code base.\n\nAnthony Williams (_C++ Concurrency in Action_, 2019, 3.3.3 Recursive locking):\n> Most of the time, if you think you want a recursive mutex, you probably need to change your design instead.\n\nAnthony Towns, https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-646956780:\n> ... the actual goal is \"make locking logic easier to follow\" rather than \"remove RecurviseMutex\"\n\nShould be noted, to insure that mutex locking policy has not been changed by accident in non-trivial cases, all of the related code branches must be covered by appropriate lock assertions: `AssertLockHeld()` or `AssertLockNotHeld()`.\n\nAlso Clang Thread Safety Analysis annotations with [Negative Capabilities](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#negative) are very useful (see #19249) but are not a panacea, of course :)\n\n---\n\n- [x] `RecursiveMutex cs_Shutdown` (#19180)\n- [x] `RecursiveMutex cs_nTimeOffset` (#19189)\n- [x] `RecursiveMutex cs_proxyInfos` (#19190)\n- ~`RecursiveMutex csPathCached` (#19213)~\n- [x] `RecursiveMutex cs_warnings` (#19220)\n- [x] `RecursiveMutex CAddrMan::cs` (#19238)\n- [x] `RecursiveMutex BanMan::m_cs_banned` (#24092, #24097)\n- [x] `RecursiveMutex cs_mapLocalHost` (#24099)\n- [x] `RecursiveMutex CConnman::cs_totalBytesRecv` (#22829)\n- [x] `RecursiveMutex CConnman::cs_totalBytesSent` (#24157)\n- [x] `RecursiveMutex CConnman::m_addr_fetches_mutex` (#22829)\n- [x] `RecursiveMutex CConnman::cs_vAddedNodes` (#22829)\n- [ ] `RecursiveMutex CConnman::m_nodes_mutex` (#32394)\n- [x] `RecursiveMutex CNode::cs_vSend` (#19915)\n- [x] `RecursiveMutex CNode::cs_hSocket` (#19915)\n- [x] `RecursiveMutex CNode::cs_vRecv` (#19915)\n- ~`RecursiveMutex CNode::cs_vProcessMsg` (#24122)~\n- ~`RecursiveMutex CNode::cs_sendProcessing` (#25597)~\n- [x] `RecursiveMutex CNode::cs_SubVer` (#24079)\n- [x] `RecursiveMutex CNode::cs_inventory` (#19347)\n- [x] `RecursiveMutex CNode::cs_addrName` (removed in #22782)\n- [x] `RecursiveMutex CNode::cs_addrLocal` #24108\n- [ ] `RecursiveMutex Peer::TxRelay::m_bloom_filter_mutex`\n- [ ] `RecursiveMutex Peer::TxRelay::m_tx_inventory_mutex` (#24125)\n- [x] `RecursiveMutex CNode::TxRelay::cs_feeFilter` (#18819)\n- ~`RecursiveMutex g_cs_orphans`~\n- [x] `RecursiveMutex g_cs_recent_confirmed_transactions` (#19378)\n- [x] `RecursiveMutex cs_most_recent_block` (#24062)\n- [x] `RecursiveMutex CBlockPolicyEstimator::m_cs_fee_estimator` (#22014)\n- [x] `RecursiveMutex cs_rpcWarmup` (#19399)\n- [x] `RecursiveMutex SingleThreadedSchedulerClient::m_cs_callbacks_pending` (#24069)\n- [ ] `RecursiveMutex BlockManager::cs_LastBlockFile`\n- [ ] `RecursiveMutex FillableSigningProvider::cs_KeyStore`\n- [ ] `RecursiveMutex ArgsManager::cs_args`\n- [x] `RecursiveMutex CChainState::cs_nBlockSequenceId` (#22824)\n- [x] `RecursiveMutex CChainState::m_cs_chainstate` (#24103)\n- ~`RecursiveMutex cs_db`~\n- [ ] `RecursiveMutex DescriptorScriptPubKeyMan::cs_desc_man`\n- [x] `RecursiveMutex cs_wallets` (#19101)\n- [x] `RecursiveMutex CWallet::cs_wallet` (#19773,  #19833)\n\nand\n\n- `RecursiveMutex CTxMemPool::cs` (#19306, ~#19647~, #19652, #19854, #19872, #19901, #19909, #19917)\n- `RecursiveMutex cs_main`\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2020-06-17T13:45:18Z",
      "updated_at": "2026-02-11T13:55:51Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/19303",
      "labels": [
        "Brainstorming",
        "Refactoring"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3451,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2841890801,
      "number": 31833,
      "title": "ci: intermittent p2p_tx_download.py timeout (test_preferred_tiebreaker_inv)",
      "body": "Seen in: https://github.com/bitcoin/bitcoin/actions/runs/13236532677/job/36942441812?pr=30975 (#30975)\n\n```\ntest  2025-02-10T09:21:22.592000Z TestFramework (INFO): Test that preferred peers are always selected over non-preferred when ready \n test  2025-02-10T09:21:22.592000Z TestFramework.node0 (DEBUG): Stopping node \n node0 2025-02-10T09:21:22.593102Z [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:57336 \n node0 2025-02-10T09:21:22.593212Z [httpworker.6] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=stop user=__cookie__ \n node0 2025-02-10T09:21:22.593261Z [init] [httpserver.cpp:508] [InterruptHTTPServer] [http] Interrupting HTTP server \n node0 2025-02-10T09:21:22.593478Z [init] [httprpc.cpp:382] [InterruptHTTPRPC] [rpc] Interrupting HTTP RPC server \n node0 2025-02-10T09:21:22.593490Z [init] [rpc/server.cpp:291] [operator()] [rpc] Interrupting RPC \n node0 2025-02-10T09:21:22.593517Z [init] [init.cpp:286] [Shutdown] Shutdown: In progress... \n node0 2025-02-10T09:21:22.593529Z [shutoff] [httprpc.cpp:387] [StopHTTPRPC] [rpc] Stopping HTTP RPC server \n node0 2025-02-10T09:21:22.593536Z [shutoff] [httpserver.cpp:770] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for / (exactmatch 1) \n node0 2025-02-10T09:21:22.593545Z [shutoff] [httpserver.cpp:770] [UnregisterHTTPHandler] [http] Unregistering HTTP handler for /wallet/ (exactmatch 0) \n node0 2025-02-10T09:21:22.593553Z [shutoff] [rpc/server.cpp:303] [operator()] [rpc] Stopping RPC \n node0 2025-02-10T09:21:22.593636Z [shutoff] [rpc/server.cpp:306] [operator()] [rpc] RPC stopped. \n node0 2025-02-10T09:21:22.593646Z [shutoff] [httpserver.cpp:520] [StopHTTPServer] [http] Stopping HTTP server \n node0 2025-02-10T09:21:22.593653Z [shutoff] [httpserver.cpp:522] [StopHTTPServer] [http] Waiting for HTTP worker threads to exit \n node0 2025-02-10T09:21:22.593976Z [addcon] [util/thread.cpp:22] [TraceThread] addcon thread exit \n node0 2025-02-10T09:21:22.594367Z [shutoff] [httpserver.cpp:550] [StopHTTPServer] [http] Waiting for HTTP event thread to exit \n node0 2025-02-10T09:21:22.594396Z [http] [httpserver.cpp:355] [ThreadHTTP] [http] Exited http event loop \n node0 2025-02-10T09:21:22.594482Z [shutoff] [httpserver.cpp:556] [StopHTTPServer] [http] Stopped HTTP server \n node0 2025-02-10T09:21:22.643280Z [net] [util/thread.cpp:22] [TraceThread] net thread exit \n node0 2025-02-10T09:21:22.643367Z [msghand] [util/thread.cpp:22] [TraceThread] msghand thread exit \n test  2025-02-10T09:21:22.644000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:14456 \n test  2025-02-10T09:21:22.644000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:14456 \n test  2025-02-10T09:21:22.644000Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:14456 \n node0 2025-02-10T09:21:22.644215Z [shutoff] [net.cpp:2391] [DumpAddresses] [net] Flushed 0 addresses to peers.dat  0ms \n node0 2025-02-10T09:21:22.644227Z [shutoff] [net.cpp:3477] [StopNodes] [net] Stopping node, disconnecting peer=1 \n node0 2025-02-10T09:21:22.644234Z [shutoff] [net.cpp:565] [CloseSocketDisconnect] [net] Resetting socket for peer=1 \n test  2025-02-10T09:21:24.705000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:49138: msg_pong(nonce=3365597ad9b5dc7f) \n test  2025-02-10T09:21:24.705000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:49138: msg_getheaders(locator=CBlockLocator(vHave=[25904390216175313194312162455780078753009692101200952252992871177711616225820, 10439194800033568075353954394040901046437382900627609508673849620975391395575, 40446225147528968444488730747006358517695899943732003474923480031726915305221, 32881632053604177249247854545860335098773301364214891775874295669143030708145, 8274383136340278425284592751131987282275833971901249227378370713913292132329, 91375339536865810244115815573593171857986770160039248524702050... (msg truncated) \n test  2025-02-10T09:21:24.705000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:49138: msg_feefilter(feerate=000003e8) \n node0 2025-02-10T09:21:24.705018Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: verack (0 bytes) peer=11 \n node0 2025-02-10T09:21:24.705027Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:3625] [ProcessMessage] New outbound-full-relay v1 peer connected: version: 70016, blocks=-1, peer=11 \n node0 2025-02-10T09:21:24.705036Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending sendcmpct (9 bytes) peer=11 \n node0 2025-02-10T09:21:24.705062Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending ping (8 bytes) peer=11 \n node0 2025-02-10T09:21:24.705100Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending getheaders (645 bytes) peer=11 \n node0 2025-02-10T09:21:24.705124Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:5508] [SendMessages] [net] initial getheaders (199) to peer=11 (startheight:-1) \n node0 2025-02-10T09:21:24.705144Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending feefilter (8 bytes) peer=11 \n node0 2025-02-10T09:21:24.705878Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: pong (8 bytes) peer=11 \n test  2025-02-10T09:21:24.753000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:49138: msg_ping(nonce=00000000) \n test  2025-02-10T09:21:24.754000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:49138: msg_ping(nonce=00000001) \n test  2025-02-10T09:21:24.754000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:49138: msg_pong(nonce=00000000) \n test  2025-02-10T09:21:24.754000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:49138: msg_pong(nonce=00000001) \n node0 2025-02-10T09:21:24.754344Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: ping (8 bytes) peer=11 \n node0 2025-02-10T09:21:24.754365Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending pong (8 bytes) peer=11 \n node0 2025-02-10T09:21:24.754415Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: ping (8 bytes) peer=11 \n node0 2025-02-10T09:21:24.754438Z (mocktime: 2025-02-10T09:21:24Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending pong (8 bytes) peer=11 \n test  2025-02-10T09:21:24.804000Z TestFramework.p2p (DEBUG): Send message to 127.0.0.1:49138: msg_inv(inv=[CInv(type=WTX hash=00000000000000000000000000000000000000000000000000000000ff00ff00)]) \n node0 2025-02-10T09:21:24.805809Z (mocktime: 2025-02-10T09:21:24Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:57432 \n node0 2025-02-10T09:21:24.805870Z (mocktime: 2025-02-10T09:21:24Z) [httpworker.1] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=getpeerinfo user=__cookie__ \n test  2025-02-10T09:21:24.809000Z TestFramework.p2p (DEBUG): Received message from 127.0.0.1:14456: msg_getdata(inv=[CInv(type=WTX hash=00000000000000000000000000000000000000000000000000000000ff00ff00)]) \n node0 2025-02-10T09:21:24.809051Z (mocktime: 2025-02-10T09:21:24Z) [http] [httpserver.cpp:306] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:57432 \n node0 2025-02-10T09:21:24.809106Z (mocktime: 2025-02-10T09:21:24Z) [httpworker.0] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=setmocktime user=__cookie__ \n node0 2025-02-10T09:21:24.809392Z (mocktime: 2025-02-10T09:22:22Z) [msghand] [node/txdownloadman_impl.cpp:277] [GetRequestsToSend] [net] timeout of inflight wtx 00000000000000000000000000000000000000000000000000000000ff00ff00 from peer=0 \n node0 2025-02-10T09:21:24.809423Z (mocktime: 2025-02-10T09:22:22Z) [msghand] [node/txdownloadman_impl.cpp:282] [GetRequestsToSend] [net] Requesting wtx 00000000000000000000000000000000000000000000000000000000ff00ff00 peer=10 \n node0 2025-02-10T09:21:24.809433Z (mocktime: 2025-02-10T09:22:22Z) [msghand] [net.cpp:3875] [PushMessage] [net] sending getdata (37 bytes) peer=10 \n node0 2025-02-10T09:21:24.809628Z (mocktime: 2025-02-10T09:22:22Z) [msghand] [net_processing.cpp:3380] [ProcessMessage] [net] received: inv (37 bytes) peer=11 \n node0 2025-02-10T09:21:24.809657Z (mocktime: 2025-02-10T09:22:22Z) [msghand] [net_processing.cpp:3943] [ProcessMessage] [net] got inv: wtx 00000000000000000000000000000000000000000000000000000000ff00ff00  new peer=11 \n test  2025-02-10T09:21:34.852000Z TestFramework.utils (ERROR): wait_until() failed. Predicate: '''' \n                                           def test_function():\n                                               if check_connected:\n                                                   assert self.is_connected\n                                               return test_function_in()\n                                   '''\n test  2025-02-10T09:21:34.852000Z TestFramework (ERROR): Assertion failed \n                                   Traceback (most recent call last):\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n                                       self.run_test()\n                                     File \"/home/runner/work/bitcoin/bitcoin/build/test/functional/p2p_tx_download.py\", line 385, in run_test\n                                       self.test_preferred_tiebreaker_inv()\n                                     File \"/home/runner/work/bitcoin/bitcoin/build/test/functional/p2p_tx_download.py\", line 283, in test_preferred_tiebreaker_inv\n                                       pref_peer.wait_until(lambda: pref_peer.tx_getdata_count >= 1, timeout=10)\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/p2p.py\", line 594, in wait_until\n                                       wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n                                     File \"/home/runner/work/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 317, in wait_until_helper_internal\n                                       raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\n                                   AssertionError: Predicate ''''\n                                           def test_function():\n                                               if check_connected:\n                                                   assert self.is_connected\n                                               return test_function_in()\n                                   ''' not true after 10 seconds\n test  2025-02-10T09:21:34.854000Z TestFramework (DEBUG): Closing down network thread \n```",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-02-10T09:50:59Z",
      "updated_at": "2026-02-11T11:10:49Z",
      "closed_at": "2025-02-11T08:58:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31833",
      "labels": [
        "CI failed"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 10998,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2845656906,
      "number": 31842,
      "title": "Wallet symlinks are not rejected as expected",
      "body": "Since https://github.com/bitcoin/bitcoin/pull/10885, `bitcoind` is expected to reject symlinks to wallets. This behaviour is also intended to be tested in the following test:https://github.com/bitcoin/bitcoin/blob/86528937e5c4da2e12c46085fc41e87ed759258e/test/functional/wallet_multiwallet.py#L168-L170\n\nHowever, this is not the case:\n```\n$ ls -l ~/.bitcoin/regtest/wallets/\ntotal 3\ndrwx------ 2 hebasto hebasto  3 Feb 11 14:49 w8\nlrwxrwxrwx 1 hebasto hebasto 41 Feb 11 14:11 w8_symlink_abs -> /home/hebasto/.bitcoin/regtest/wallets/w8\nlrwxrwxrwx 1 hebasto hebasto  2 Feb 11 14:31 w8_symlink_rel -> w8\n$ ./build/src/bitcoind -regtest -wallet=w8_symlink_abs\n$ ./build/src/bitcoin-cli -regtest listwallets\n[\n  \"w8_symlink_abs\"\n]\n$ ./build/src/bitcoind -regtest -wallet=w8_symlink_rel\n$ ./build/src/bitcoin-cli -regtest listwallets\n[\n  \"w8_symlink_rel\"\n]\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-02-11T15:03:19Z",
      "updated_at": "2026-02-11T11:10:47Z",
      "closed_at": "2025-02-11T21:23:51Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31842",
      "labels": [
        "Wallet"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 900,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3925274697,
      "number": 34556,
      "title": "`BlockFilterIndexSync` benchmark runtime failure",
      "body": "On NetBSD 10.1, from https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21892939332/job/63202716004:\n```\n22/457 - tool_bench_sanity_check.py --bench=BlockFilterIndexSync failed, Duration: 1 s\n\nstdout:\n2026-02-11T05:17:28.338054Z TestFramework (INFO): PRNG seed is: 4354116727530332520\n2026-02-11T05:17:28.339313Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260211_051724/tool_bench_sanity_check_430\n2026-02-11T05:17:28.339571Z TestFramework (INFO): Starting: /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/bin/bench_bitcoin -filter=BlockFilterIndexSync -sanity-check\nRunning with -sanity-check option, output is being suppressed as benchmark results will be useless.\n2026-02-11T05:17:28.989444Z TestFramework (ERROR): Called Process failed with stdout='None'; stderr='None';\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/tool_bench_sanity_check.py\", line 36, in run_test\n    subprocess.run(cmd, check=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/usr/pkg/lib/python3.13/subprocess.py\", line 577, in run\n    raise CalledProcessError(retcode, process.args,\n                             output=stdout, stderr=stderr)\nsubprocess.CalledProcessError: Command '['/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/bin/bench_bitcoin', '-filter=BlockFilterIndexSync', '-sanity-check']' died with <Signals.SIGSEGV: 11>.\n2026-02-11T05:17:29.052681Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2026-02-11T05:17:29.053385Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260211_051724/tool_bench_sanity_check_430\n2026-02-11T05:17:29.053918Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260211_051724/tool_bench_sanity_check_430/test_framework.log\n2026-02-11T05:17:29.054973Z TestFramework (ERROR): \n2026-02-11T05:17:29.055777Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260211_051724/tool_bench_sanity_check_430' to consolidate all logs\n2026-02-11T05:17:29.056178Z TestFramework (ERROR): \n2026-02-11T05:17:29.056490Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2026-02-11T05:17:29.057174Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2026-02-11T05:17:29.057580Z TestFramework (ERROR): \n\n\nstderr:\n\n\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-02-11T08:11:02Z",
      "updated_at": "2026-02-11T08:18:15Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34556",
      "labels": [],
      "comment_data": [
        {
          "id": 3882966338,
          "user": "maflcko",
          "body": "Does it happen consistently? If not, maybe this is OOM?\n\nWhat is the traceback? E.g from Command `'['valgrind', '--tool=none', '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/bin/bench_bitcoin', '-filter=BlockFilterIndexSync', '-sanity-check']` (or equivalent)",
          "created_at": "2026-02-11T08:18:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 279,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3044,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1173662670,
      "number": 24612,
      "title": "[flatpak]  - I cannot choose or change datadir when running from flatpak",
      "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\nThe -choosedatadir Should allow me to choose the datadir. But it is not. It immediately starts downloading headers from the peers.\r\nThe chooses a predefined datadir in \r\n\r\n```\r\n~/.var/app/org.bitcoincore.bitcoin-qt$ ls\r\ncache  config  data\r\n```\r\n\r\n* I am unable to modify the datadir location when I run the client using flatpak (on PopOS).\r\n\r\n**To reproduce**\r\n\r\n1. Install flatpak client\r\n2. try the command\r\n\r\nflatpak run org.bitcoincore.bitcoin-qt -choosedatadir \r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\nEverytime.\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n1. PopOS, Flatpak version. Client information\r\n```\r\n$ flatpak run org.bitcoincore.bitcoin-qt -version\r\nBitcoin Core version v22.0.0\r\nCopyright (C) 2009-2021 The Bitcoin Core developers\r\n\r\nPlease contribute if you find Bitcoin Core useful. Visit\r\n<https://bitcoincore.org/> for further information about the software.\r\nThe source code is available from <https://github.com/bitcoin/bitcoin>.\r\n\r\nThis is experimental software.\r\nDistributed under the MIT software license, see the accompanying file COPYING\r\nor <https://opensource.org/licenses/MIT>\r\n\r\n```\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
      "state": "open",
      "user": "orsenthil",
      "created_at": "2022-03-18T14:35:49Z",
      "updated_at": "2026-02-10T23:35:24Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/24612",
      "labels": [
        "Bug",
        "GUI"
      ],
      "comment_data": [
        {
          "id": 3881290018,
          "user": "holocronweaver",
          "body": "I tend to think the flatpak wrapper script should use `-choosedatadir` only on first run, then after that not hardcode any paths. Leave it up to the user if they want to use bitcoin.conf, a command flag, or whatnot to specify `datadir`.\n\nAt the very least some documentation of this and other quirks on flathub would save people time finding this issue or digging around in the source repo.\n\nIt is odd to me that the GUI doesn't allow changing the `datadir` in its settings, that would make this problem much simpler.",
          "created_at": "2026-02-10T23:35:24Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 517,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2465,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3386707641,
      "number": 33316,
      "title": "builds: add README with build flags",
      "body": "### Please describe the feature you'd like to see added.\n\nFor the torrents for Bitcoin Core, as well as the [downloads on the site](https://bitcoincore.org/bin/bitcoin-core-29.1/), it would be useful to have a (small) readme with some information what the different binaries/targzs are.\n\n<img width=\"423\" height=\"745\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/222b0a0c-6f18-417d-9903-ffa4aa1f2abb\" />\n\nApparently there are **unsigned**, **signed**, **debug** and **codesigning** versions. \n\nWhat do they mean?\n\n`magnet:?xt=urn:btih:DSUYRPFMOPSLI7EZFH7VZ4QKT4GUU57A&dn=bitcoin-core-29.1&tr.1=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr.2=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr.3=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr.4=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969%2Fannounce&tr.5=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969%2Fannounce&tr.6=udp%3A%2F%2Fexplodie.org%3A6969%2Fannounce&tr.7=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr.8=udp%3A%2F%2Ftracker.bitcoin.sprovoost.nl%3A6969`\n\n### Describe the solution you'd like\n\nPlease add a readme\n\n### Describe any alternatives you've considered\n\nI have found [some guides](https://github.com/fjahr/debugging_bitcoin), but I am not sure what flags were used for these.\n",
      "state": "closed",
      "user": "AbelLykens",
      "created_at": "2025-09-05T08:22:49Z",
      "updated_at": "2026-02-10T12:12:10Z",
      "closed_at": "2026-02-10T12:12:10Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/33316",
      "labels": [
        "Docs"
      ],
      "comment_data": [
        {
          "id": 3868478182,
          "user": "PauloAAlmeida",
          "body": "I noticed PR #33355 addressing this was closed. I'm interested in picking this up to ensure we have clear, concise documentation for these build types.\n\nI've reviewed the feedback on the previous PR and, instead of a purely descriptive text, I plan to focus on the practical utility of each artifact (e.g., when to use debug builds for troubleshooting or how to handle codesigning archives during verification). This will be a manually written, technical guide aligned with the project's standards.\n\nA quick question before I start: should this documentation remain as a README in the build/release folder or be integrated as a dedicated file into the existing /doc directory?",
          "created_at": "2026-02-08T22:46:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 676,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3870645199,
          "user": "AbelLykens",
          "body": "I'd suggest keep docs close to the download location. A reference/link to /docs is fine too, ofc.",
          "created_at": "2026-02-09T09:52:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 97,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3873503084,
          "user": "PauloAAlmeida",
          "body": "> I'd suggest keep docs close to the download location. A reference/link to /docs is fine too, ofc.\n\nThanks for the direction. I'll add a doc/release-artifacts.md covering the practical purpose of each artifact type (release, debug, unsigned, codesigning, source, verification files), with a focus on when and why someone would use each one. Will reference the issue in the PR.",
          "created_at": "2026-02-09T19:46:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 377,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3876783054,
          "user": "fanquake",
          "body": "~0. This seems like its in the wrong repo, and any documentation should be added to https://github.com/bitcoin-core/bitcoincore.org/, or to the website directly.",
          "created_at": "2026-02-10T10:35:40Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 161,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3877185196,
          "user": "PauloAAlmeida",
          "body": "Fair point. I'll close the current PR on bitcoin/bitcoin and open one against bitcoin-core/bitcoincore.org instead.",
          "created_at": "2026-02-10T12:03:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 115,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3877222568,
          "user": "fanquake",
          "body": "Moved this over to https://github.com/bitcoin-core/bitcoincore.org/issues/1220.",
          "created_at": "2026-02-10T12:12:10Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 79,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1310,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3848905564,
      "number": 34394,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "crackedhandle",
      "created_at": "2026-01-23T19:42:54Z",
      "updated_at": "2026-02-10T11:56:32Z",
      "closed_at": "2026-01-23T19:45:26Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34394",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3902469771,
      "number": 34518,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "admin1douyin",
      "created_at": "2026-02-05T16:30:41Z",
      "updated_at": "2026-02-10T11:56:05Z",
      "closed_at": "2026-02-05T16:40:06Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34518",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3902470285,
      "number": 34519,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "admin1douyin",
      "created_at": "2026-02-05T16:30:45Z",
      "updated_at": "2026-02-10T11:55:59Z",
      "closed_at": "2026-02-05T16:40:26Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34519",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 892169248,
      "number": 21950,
      "title": "Duplicate coinbase transaction space reservation in CreateNewBlock",
      "body": "In `BlockAssembler::CreateNewBlock`, we initiate `nBlockWeight` to 4000 WU, reserving space for\r\ncoinbase transaction.\r\n\r\nLatter on, while iterating on transactions for block inclusion in `addPackagesTxs`, we verify that candidate package doesn't overflow the max block weight. This check is done in `TestPackage` against `nBlockMaxWeight`. However, default value is DEFAULT_BLOCK_MAX_WEIGHT which is equal to MAX_BLOCK_WEIGHT - 4000 (L20 in `src/policy/policy.cpp`). So block weight assembled is starting at 4000 WU and can't overflow 3996000 WU.\r\n\r\nDo we have duplicated coinbase transaction space reservation ? I can see this a safety margin to avoid creating invalid blocks if you create inflated coinbase transaction, at the price of few weight units leftover.\r\n\r\nIf so, maybe we should leave it as it is but document this behavior, I was surprised hitting this while scratching unrelated tests.\r\n\r\nSee [comment](https://github.com/bitcoin/bitcoin/pull/11100#discussion_r135124178) in #11100",
      "state": "closed",
      "user": "ariard",
      "created_at": "2021-05-14T19:07:22Z",
      "updated_at": "2026-02-10T11:10:13Z",
      "closed_at": "2025-02-10T13:26:48Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/21950",
      "labels": [
        "Bug"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1063,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2841679368,
      "number": 31832,
      "title": "Wallets not automatically loaded",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nafter starting `bitcoind` the wallets are not automatically loaded\n\n### Expected behaviour\n\nthe wallets should be  automatically loaded\n\n### Steps to reproduce\n\nMy bitcoin.conf\n```\npid=/run/bitcoin/bitcoind.pid\nnodebuglogfile=1\ndatadir=/var/bitcoin\nloglevel=info\nproxy=127.0.0.1:9050\ntestnet4=1\n\n[testnet4]\nwalletdir=/var/wallet\n\nserver=1\nrpcuser=satobox\nrpcport=8332\nrpcconnect=127.0.0.1\nrpcauth=satobox:c7eadc9121b2af62e92df69f1$3eecb49b2600f152f728a9f66ab38028e8c710a04ea06c69e4a2f291e7d6eee3\n\n```\n\nmy wallet dir:\n\n```\nls -l /var/wallet/\ntotal 28\ndrwx------ 2 64874 64874  4096 Feb 10 08:19 Wallet-01\ndrwx------ 2 64874 64874  4096 Feb  9 14:55 Wallet-02\ndrwx------ 2 64874 64874  4096 Feb  9 14:56 Wallet-03\n\n```\n\n\nwhen I start bitcoind:\n\n`/usr/bin/bitcoind -conf=/etc/bitcoin/bitcoin.conf`\n\n\nNothing shows up:\n\n```\n# bitcoin-cli listwallets\n[\n]\n```\n\nI have to load them manually:\n\n`bitcoin-cli loadwallet \"Wallet-01\"\n`\n\n```\n# bitcoin-cli listwallets\n[\n  \"Wallet-01\"\n]\n```\n\n\n\n### Relevant log output\n\nsee above\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster\n\n### Operating system and version\n\nUbuntu 24.04\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "embetrix",
      "created_at": "2025-02-10T08:25:50Z",
      "updated_at": "2026-02-10T11:10:07Z",
      "closed_at": "2025-02-10T10:23:57Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31832",
      "labels": [
        "Wallet",
        "Questions and Help"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1362,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3893710679,
      "number": 34497,
      "title": "[rfc] Disallow loading and creating wallets by paths",
      "body": "A discussion that has come up several times at the Localhost office over the past several weeks has been whether it makes sense to load wallets by paths. In particular, supporting wallets by path has been the source of a couple issues, and has also had some involvement in the recent wallet deletion issue.\n\nFor some background, the name of a wallet can always be interpreted as a path. If it is not an absolute path, then it is a path relative to the wallets directory, e.g. a wallet named `mywallet` is always located at `<walletsdir>/mywallet`. But when referring to wallets named by relative path, I mean wallets which actually include `/` in their name which turns the name into a path specifier, rather than a logical name that happens to map to a path relative to the walletsdir. Otherwise, the path is an absolute path. An important note is that with the exception of BDB files stored directly in the walletsdir, the file actually opened is always `<path>/wallet.dat`.\n\nFor absolute paths, this seems mostly ok, if just a bit odd. This has the potential to be problematic when mixing wallet names with filenames and paths. However, I don't recall any specific issues with absolute paths off the top of my head.\n\nOn the other hand, relative paths that include additional directories (e.g.` <walletdir>/<subdir>/mywallet` or `../<more path>/mywallet`) have been a major source of headaches in wallet filesystem code:\n- #32273 pointed out a flaw in how wallet names and paths were being combined in relative paths to produce nonsensical paths\n- The root issue in #31409 is searching subdirectories for additional wallets to have their name by relative path\n\nFurthermore, from a user perspective, relative path wallets are really weird in that the path is relative to the walletsdir, which itself is not always consistent relative to the datadir (excluding when set explicitly). Given that the actual location of the walletsdir is basically never surfaced to the user, I don't really see any situation where a user would want to name a wallet `../<path>`. I can see `<sub>/mywallet`, ~but that really doesn't need to be a path, and the wallet could actually be in a directory named `<sub>/mywallet` where the `/` is escaped so it doesn't become a path.~ Edit: `/` can't be escaped.\n\nI propose that we should remove support for wallets with by relative path, but retain support for wallets by absolute path.\n\nBut I'd like to get some feedback from contributors and users before moving forward with this.\n\n***\n\nThere has also been the suggestion that we should go all the way and just remove support for both relative and absolute paths. I push back on this a bit as I think absolute paths can still be useful, e.g. if a user has wallets both in the walletsdir and on external media, they could want to load wallets from both locations at the same time without needing to change the walletsdir by specifying wallets by absolute path. However, I am open to being convinced that remove absolute path support could be a good idea.",
      "state": "open",
      "user": "achow101",
      "created_at": "2026-02-03T23:20:47Z",
      "updated_at": "2026-02-09T23:46:37Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34497",
      "labels": [
        "Wallet",
        "Needs Conceptual Review"
      ],
      "comment_data": [
        {
          "id": 3873921700,
          "user": "darosior",
          "body": "> I don't recall any specific issues with absolute paths off the top of my head.\n\n> I push back on this a bit as I think absolute paths can still be useful\n\nAbsolute paths are also particularly useful for applications leveraging the Bitcoin Core wallet to more robustly be internally consistent. For instance a wallet like [Liana](https://github.com/wizardsardine/liana/) using a watchonly wallet at an absolute path under its own data dir to track its coins, can run against any `bitcoind` the user may have set up, and may be using for other applications or reinstall or otherwise tamper with its (`bitcoind`'s) datadir. Using a wallet under Bitcoin Core's `wallet/` subdirectory bakes into the wallet this brittle assumption that Bitcoin Core's datadir will not change.\n\nSuch applications can nowadays probably be rewritten to use BDK instead (although in this case pruning support becomes complicated), and i don't mean to imply that wallet contributors should bear the burden of supporting this project if they think absolute path support ought to be deprecated. But i hope this reflects that absolute paths support is useful to downstream projects and that dropping support for them is not a free lunch.\n\nI have a harder time thinking of a reasonable use case for supporting wallet paths relative to Core's `wallet` sub-directory. Another brittleness of using relative wallet paths is that such use would not be portable across networks nor installations. Networks because for test networks the `wallet/` sub-directory would be one level deeper, which may lead to code that works during testing breaking subtly in production. And across installations, because for existing Bitcoin Core datadirs with no `wallet/` sub-directory, the root datadir (for this network) will be used.",
          "created_at": "2026-02-09T21:19:17Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1783,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3873970445,
          "user": "gmart7t2",
          "body": "I have my wallets organized into nested subdirectories under ~/.bitcoin/wallets/ to keep groups of wallets separate from each other.\n\nFor example, when I am finished using a wallet, rather than deleting it I \"bitcoin unloadeallet name\" then move it into a subdirectory of wallets called \"empty/\". Then I \"bitcoin-cli loadwallet empty/name\". It shows up as \"empty/name\" in the wallet list and I can easily check all my \"empty\" wallets to see if they are still empty\n\n```\n$ bitcoin-cli listwallets | jq -r .[] | grep '^empty/' | while read x; do bitcoin-cli -rpcwallet=$x getbalance; done | uniq -c\n389 0.00000000\n```\n\nI guess I could stop using subdirectories and just rename wallets/empty/name/ to wallets/empty-name/ or something but that's not as clean",
          "created_at": "2026-02-09T21:31:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 754,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3874481401,
          "user": "davidgumberg",
          "body": " I think that there is lurking danger in a string that is at times a name, and at other times a path with path specifiers and symlinks being resolved by the filesystem. I wonder if a reasonable solution would just be to separate these two, allowing a user to load a wallet with a name, and optionally provide a path, e.g.:\n\n```bash\nbitcoin-cli -named loadwallet name=\"mywallet\" path=\"/path/to/my/wallet\"\n```",
          "created_at": "2026-02-09T23:46:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 407,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 3082,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3470172634,
      "number": 33510,
      "title": "Mempool Expiry eviction might remove txs that could be mined in the next block",
      "body": "`LimitMempoolSize` always try to remove transactions from the mempool whose age has passed the mempool expiry time limit, which is 336 hours (i.e., two weeks) by default.\n\nThere might be a case where you evict something that might be mined next. For example, the mempool was cleared and some low feerate transaction that has been in the mempool and has not confirmed in a long time due to having a low feerate is now at the top of the mempool.\nHowever, when we want to limit the mempool size, we will evict such transactions.\n\nWe can limit the harm of this by only expiring when the mempool is full now then post Cluster mempool, in addition to the transaction entry time, it would be possible to keep track of how many times you expect the transaction to confirm and it has not. If it has reached some threshold and the expiry time of the tx has been reached, then drop the transaction from the mempool because you know the transaction is likely deliberately ignored by miners (On the assumption that the node policy rules is sane and miners use tx fee as incentive for selection of transaction into their block template) hence no need to save it in the nodes mempool.\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-30T16:15:15Z",
      "updated_at": "2026-02-09T11:57:11Z",
      "closed_at": null,
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/33510",
      "labels": [
        "Mempool"
      ],
      "comment_data": [
        {
          "id": 3871289344,
          "user": "HowHsu",
          "body": "> One potential issue I see that whenever we expire, we also need to expire all descendants. What if you have a very old transaction that isn't confirming (for whatever reason) but it has a very recent child? Should the child be permitted to keep its parent alive longer? This might matter in CPFP settings, if the child somehow helps the parent getting confirmed.\n> \n\nSeems the package has to be removed at all, otherwise attackers can use this to keep the bigger and bigger package.\n",
          "created_at": "2026-02-09T11:57:11Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 485,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1249,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3698469264,
      "number": 34014,
      "title": "mptest hangs, when run in a loop",
      "body": "Initially ci ran into a segfault in https://github.com/maflcko/bitcoin-core-nightly/actions/runs/19882806964/job/56984144564#step:6:4040: \n\n```\n  3/152 Test   #3: mptest ...............................***Failed    0.05 sec\n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (18106 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (744 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (819 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (793 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (1329 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n*** Received signal #11: Segmentation fault\nstack: 588ddc67 587839bb 5877e6ef 588667a8 58858975 58861e3d 58784940 58780828 5868c5fb 5868c0c8 f5b62d20 f57b0136 f5844c05\n```\n\nWhen trying to reproduce it locally, I'd see mptest hang, when run in a loop (and the CPUs on the machine were made busy via other means). To reproduce on a fresh `podman run -it --rm --platform=linux alpine:3.23`:\n\n`apk update && apk add rsync screen python3 git bash vim && git clone --depth=1 https://github.com/bitcoin/bitcoin ./b-c-ci && cd ./b-c-ci`\n\n`RUN_UNIT_TESTS=false RUN_FUNCTIONAL_TESTS=false CCACHE_DIR=/ccache_dir CCACHE_MAXSIZE=5500M USER=dummy_user DANGER_RUN_CI_ON_HOST=\"1\" MAKEJOBS=\"-j$(nproc)\" FILE_ENV=\"./ci/test/00_setup_env_native_alpine_musl.sh\" ./ci/test_run_all.sh`\n\n`while /ci_container_base/ci/scratch/build-*/src/ipc/libmultiprocess/test/mptest ; do true ; done`\n\n\nAfter some time it just hangs forever:\n\n```\n...\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (83659 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6884 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (9762 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (8612 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (13144 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\nmp/proxy.cpp:45: error: Uncaught exception in daemonized task.; exception = (unknown):-1: failed: std::exception: std::future_error: Promise already satisfied\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (16464 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (53144 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (7757 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (7552 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (7087 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (11442 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (11951 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (57813 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6301 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (7153 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (8374 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (11935 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (15253 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (98583 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (6840 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (6811 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (6656 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (12740 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n[ PASS ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error (14853 μs)\n6 test(s) passed \n[ TEST ] test.cpp:117: Call FooInterface methods\n[ PASS ] test.cpp:117: Call FooInterface methods (45695 μs)\n[ TEST ] test.cpp:209: Call IPC method after client connection is closed\n[ PASS ] test.cpp:209: Call IPC method after client connection is closed (7465 μs)\n[ TEST ] test.cpp:226: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:226: Calling IPC method after server connection is closed (5967 μs)\n[ TEST ] test.cpp:243: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:243: Calling IPC method and disconnecting during the call (7727 μs)\n[ TEST ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:263: Calling IPC method, disconnecting and blocking during the call (9699 μs)\n[ TEST ] test.cpp:312: Make simultaneous IPC calls to trigger 'thread busy' error\n... (hang)\n```\n\nThe bt looks like this:\n\n```\n(gdb) thread apply all bt\n\nThread 3 (LWP 106816 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=281, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=8) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f689896c in epoll_pwait (fd=3, ev=0x7f21f6449ae0, cnt=16, to=-1, sigs=0x0) at src/linux/epoll.c:28\n#3  0x00005638a3067426 in kj::UnixEventPort::wait (this=0x7f21f68fb4b8) at /usr/src/kj/io.h:284\n#4  0x00005638a2fd0228 in kj::EventLoop::wait (this=this@entry=0x7f21f68fb590) at /usr/src/kj/async.c++:1850\n#5  0x00005638a2fd594c in kj::_::waitImpl (node=..., result=..., waitScope=..., location=...) at /usr/src/kj/async.c++:1984\n#6  0x00005638a2ed3eb6 in kj::Promise<unsigned long>::wait (this=0x7f21f644a070, waitScope=..., location=...) at /ci_container_base/depends/x86_64-pc-linux-musl/include/kj/async-inl.h:1357\n#7  mp::EventLoop::loop (this=this@entry=0x7f21f644a7b0) at ./ipc/libmultiprocess/src/mp/proxy.cpp:240\n#8  0x00005638a2dbcf58 in mp::test::TestSetup::TestSetup(bool)::{lambda()#1}::operator()() const (__closure=<optimized out>) at ./ipc/libmultiprocess/test/mp/test/test.cpp:99\n#9  0x00005638a2dbd1a9 in std::__invoke_impl<void, mp::test::TestSetup::TestSetup(bool)::{lambda()#1}>(std::__invoke_other, mp::test::TestSetup::TestSetup(bool)::{lambda()#1}&&) (__f=...) at /usr/include/c++/15.2.0/bits/invoke.h:63\n#10 std::__invoke<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}>(mp::test::TestSetup::TestSetup(bool)::{lambda()#1}&&) (__fn=...) at /usr/include/c++/15.2.0/bits/invoke.h:98\n#11 std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:303\n#12 std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> >::operator()() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:310\n#13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<mp::test::TestSetup::TestSetup(bool)::{lambda()#1}> > >::_M_run() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:255\n#14 0x00007f21f6695680 in ?? () from /usr/lib/libstdc++.so.6\n#15 0x00007f21f68bc573 in start (p=<optimized out>) at src/thread/pthread_create.c:207\n#16 0x00007f21f68bdec1 in __clone () at src/thread/x86_64/clone.s:22\nBacktrace stopped: frame did not save the PC\n\nThread 2 (LWP 106817 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=202, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=0) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f68bad24 in __futex4_cp (addr=0x7f21f63d27a4, op=0, val=2, to=<optimized out>) at src/thread/__timedwait.c:24\n#3  __timedwait_cp (addr=addr@entry=0x7f21f63d27a4, val=val@entry=2, clk=clk@entry=0, at=at@entry=0x0, priv=128, priv@entry=1) at src/thread/__timedwait.c:52\n#4  0x00007f21f68bbc05 in __pthread_cond_timedwait (c=0x7f21f659a708, m=0x7f21f659a6e0, ts=0x0) at src/thread/pthread_cond_timedwait.c:100\n#5  0x00007f21f668b39d in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib/libstdc++.so.6\n#6  0x00005638a2ed3548 in std::condition_variable::wait<mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()> >(mp::Lock&, mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()>)::<lambda()> > (this=0x7f21f659a708, __lock=..., __p=...) at /usr/include/c++/15.2.0/condition_variable:107\n#7  mp::Waiter::wait<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()>::<lambda()> > (this=0x7f21f659a6e0, lock=..., pred=...) at ./ipc/libmultiprocess/include/mp/proxy-io.h:343\n#8  operator() (__closure=<optimized out>) at ./ipc/libmultiprocess/src/mp/proxy.cpp:419\n#9  0x00005638a2ed3733 in std::__invoke_impl<void, mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > (__f=...) at /usr/include/c++/15.2.0/bits/invoke.h:63\n#10 std::__invoke<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > (__fn=...) at /usr/include/c++/15.2.0/bits/invoke.h:98\n#11 std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > >::_M_invoke<0> (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:303\n#12 std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > >::operator() (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:310\n#13 std::thread::_State_impl<std::thread::_Invoker<std::tuple<mp::ProxyServer<mp::ThreadMap>::makeThread(mp::ThreadMap::Server::MakeThreadContext)::<lambda()> > > >::_M_run(void) (this=<optimized out>) at /usr/include/c++/15.2.0/bits/std_thread.h:255\n#14 0x00007f21f6695680 in ?? () from /usr/lib/libstdc++.so.6\n#15 0x00007f21f68bc573 in start (p=<optimized out>) at src/thread/pthread_create.c:207\n#16 0x00007f21f68bdec1 in __clone () at src/thread/x86_64/clone.s:22\nBacktrace stopped: frame did not save the PC\n\nThread 1 (LWP 106803 \"mptest\"):\n#0  __cp_end () at src/thread/x86_64/syscall_cp.s:29\n#1  0x00007f21f68bb868 in __syscall_cp_c (nr=202, u=<optimized out>, v=<optimized out>, w=<optimized out>, x=<optimized out>, y=0, z=0) at src/thread/pthread_cancel.c:33\n#2  0x00007f21f68bad24 in __futex4_cp (addr=0x7ffd73a69134, op=0, val=2, to=<optimized out>) at src/thread/__timedwait.c:24\n#3  __timedwait_cp (addr=addr@entry=0x7ffd73a69134, val=val@entry=2, clk=clk@entry=0, at=at@entry=0x0, priv=128, priv@entry=1) at src/thread/__timedwait.c:52\n#4  0x00007f21f68bbc05 in __pthread_cond_timedwait (c=0x7f21f659a608, m=0x7f21f659a5e0, ts=0x0) at src/thread/pthread_cond_timedwait.c:100\n#5  0x00007f21f668b39d in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib/libstdc++.so.6\n#6  0x00005638a2da84ac in std::condition_variable::wait<mp::Waiter::wait<mp::test::TestCase312::run()::<lambda()> >(mp::Lock&, mp::test::TestCase312::run()::<lambda()>)::<lambda()> > (this=0x7f21f659a608, __lock=..., __p=...) at /usr/include/c++/15.2.0/condition_variable:107\n#7  mp::Waiter::wait<mp::test::TestCase312::run()::<lambda()> > (this=0x7f21f659a5e0, lock=..., pred=...) at ./ipc/libmultiprocess/include/mp/proxy-io.h:343\n#8  mp::test::TestCase312::run (this=<optimized out>) at ./ipc/libmultiprocess/test/mp/test/test.cpp:373\n#9  0x00005638a2ede23b in kj::TestRunner::run()::{lambda()#1}::operator()() const (__closure=<optimized out>) at /usr/src/kj/test.c++:318\n#10 kj::runCatchingExceptions<kj::TestRunner::run()::{lambda()#1}>(kj::TestRunner::run()::{lambda()#1}&&) (func=...) at /usr/src/kj/exception.h:371\n#11 kj::TestRunner::run (this=0x7ffd73a6a040) at /usr/src/kj/test.c++:318\n#12 0x00005638a2edf2e3 in kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}::operator()<kj::TestRunner>(kj::TestRunner&) (__closure=<optimized out>, s=...) at /usr/src/kj/test.c++:217\n#13 kj::_::BoundMethod<kj::TestRunner&, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#8}>::operator()<>() (this=<optimized out>) at /usr/src/kj/function.h:263\n#14 kj::Function<kj::MainBuilder::Validity ()>::Impl<kj::_::BoundMethod<kj::TestRunner&, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#7}, kj::TestRunner::getMain()::{lambda(auto:1&, (auto:2&&)...)#8}> >::operator()() (this=<optimized out>) at /usr/src/kj/function.h:142\n#15 0x00005638a308cd48 in kj::Function<kj::MainBuilder::Validity()>::operator() (this=<optimized out>) at /usr/src/kj/function.h:119\n#16 kj::MainBuilder::MainImpl::operator() (this=<optimized out>, programName=..., params=...) at /usr/src/kj/main.c++:623\n#17 0x00005638a3091b95 in kj::Function<void(kj::StringPtr, kj::ArrayPtr<kj::StringPtr const>)>::Impl<kj::MainBuilder::MainImpl>::operator() (this=<optimized out>, params#0=..., params#1=...) at /usr/src/kj/function.h:142\n#18 0x00005638a308d1cb in kj::Function<void(kj::StringPtr, kj::ArrayPtr<kj::StringPtr const>)>::operator() (this=0x7ffd73a6a050, params#0=..., params#1=...) at /usr/src/kj/function.h:119\n#19 operator() (__closure=<optimized out>) at /usr/src/kj/main.c++:228\n#20 kj::runCatchingExceptions<kj::runMainAndExit(ProcessContext&, MainFunc&&, int, char**)::<lambda()> > (func=...) at /usr/src/kj/exception.h:371\n#21 kj::runMainAndExit (context=..., func=..., argc=<optimized out>, argc@entry=1, argv=argv@entry=0x7ffd73a6a0f8) at /usr/src/kj/main.c++:228\n#22 0x00005638a2edc4c9 in main (argc=1, argv=0x7ffd73a6a0f8) at /usr/src/kj/test.c++:381\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-05T10:48:01Z",
      "updated_at": "2026-02-09T11:35:28Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/34014",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3871197689,
          "user": "fanquake",
          "body": "Might have just seen this in #34418 (https://github.com/bitcoin/bitcoin/actions/runs/21820908595/job/62953694277?pr=34418#step:11:2700):\n```bash\n\n153/154 Test   #5: secp256k1_tests ......................   Passed   62.81 sec\n154/154 Test   #3: mptest ...............................***Timeout 2400.06 sec\n[ TEST ] spawn_tests.cpp:44: SpawnProcess does not run callback in child\n[ PASS ] spawn_tests.cpp:44: SpawnProcess does not run callback in child (51488 μs)\n[ TEST ] test.cpp:125: Call FooInterface methods\n[ PASS ] test.cpp:125: Call FooInterface methods (13624 μs)\n[ TEST ] test.cpp:217: Call IPC method after client connection is closed\n[ PASS ] test.cpp:217: Call IPC method after client connection is closed (579 μs)\n[ TEST ] test.cpp:234: Calling IPC method after server connection is closed\n[ PASS ] test.cpp:234: Calling IPC method after server connection is closed (677 μs)\n[ TEST ] test.cpp:251: Calling IPC method and disconnecting during the call\n[ PASS ] test.cpp:251: Calling IPC method and disconnecting during the call (648 μs)\n[ TEST ] test.cpp:271: Calling IPC method, disconnecting and blocking during the call\n[ PASS ] test.cpp:271: Calling IPC method, disconnecting and blocking during the call (2768 μs)\n[ TEST ] test.cpp:320: Make simultaneous IPC calls to trigger 'thread busy' error\n\nErrors while running CTest\n\n99% tests passed, 1 tests failed out of 154\n\nTotal Test time (real) = 2400.07 sec\n\nThe following tests FAILED:\n\t  3 - mptest (Timeout)\n\n```",
          "created_at": "2026-02-09T11:35:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1480,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 15779,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2840366222,
      "number": 31828,
      "title": "Hellobtc",
      "body": "I trying for learn how works crypto",
      "state": "closed",
      "user": "onlinesipahimithu",
      "created_at": "2025-02-09T01:33:34Z",
      "updated_at": "2026-02-09T11:09:34Z",
      "closed_at": "2025-02-09T02:27:13Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31828",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 44,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3698296242,
      "number": 34012,
      "title": "ci: failure in Windows native job",
      "body": "Has been re-run multiple times.\nhttps://github.com/bitcoin/bitcoin/actions/runs/19800578606/job/57234826268?pr=33973#step:9:900:\n```bash\n\nCompleted submission of libevent[core,thread]:x64-windows@2.1.12#7 to 1 binary cache(s) in 248 ms\nWaiting for 1 remaining binary cache submissions...\nCompleted submission of sqlite3[core,json1]:x64-windows@3.50.4 to 1 binary cache(s) in 399 ms (1/1)\nAll requested installations completed successfully in: 2.4 min\n-- Running vcpkg install - done\n-- Selecting Windows SDK version 10.0.26100.0 to target Windows 10.0.20348.\n-- The CXX compiler identification is MSVC 19.44.35221.0\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Enterprise/VC/Tools/MSVC/14.44.35207/bin/Hostx64/x64/cl.exe - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Performing Test CXX_SUPPORTS__WX__OPTIONS_STRICT\n-- Performing Test CXX_SUPPORTS__WX__OPTIONS_STRICT - Success\nCMake Error at C:/Program Files/CMake/share/cmake-3.31/Modules/FindPackageHandleStandardArgs.cmake:233 (message):\n  Could NOT find PkgConfig (missing: PKG_CONFIG_EXECUTABLE)\nCall Stack (most recent call first):\n  C:/Program Files/CMake/share/cmake-3.31/Modules/FindPackageHandleStandardArgs.cmake:603 (_FPHSA_FAILURE_MESSAGE)\n  C:/Program Files/CMake/share/cmake-3.31/Modules/FindPkgConfig.cmake:114 (find_package_handle_standard_args)\n  C:/vcpkg/scripts/buildsystems/vcpkg.cmake:908 (_find_package)\n  cmake/module/FindZeroMQ.cmake:31 (find_package)\n  C:/vcpkg/scripts/buildsystems/vcpkg.cmake:908 (_find_package)\n  CMakeLists.txt:127 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nError: Process completed with exit code 1.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-05T09:59:32Z",
      "updated_at": "2026-02-08T16:28:25Z",
      "closed_at": "2026-02-08T16:28:20Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34012",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3867318050,
          "user": "TharakaUJ",
          "body": "Hello! I'd like to work on this issue. \nI'm new to this repo, so any advice would be much appreciated.",
          "created_at": "2026-02-08T14:36:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 102,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1809,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1913356976,
      "number": 28536,
      "title": "BIP352 tracking issue",
      "body": "This issue will be updated to reflect the current state of [BIP352](https://github.com/bitcoin/bips/blob/master/bip-0352.mediawiki) integration.\n\nPRs ready for review:\n\n* https://github.com/bitcoin-core/secp256k1/pull/1698\n\nOverall plan:\n\n* Pre-work / Refactors\n  - [x] https://github.com/bitcoin/bitcoin/pull/28244\n  - [x] https://github.com/bitcoin/bitcoin/pull/28246\n  - [x] https://github.com/bitcoin/bitcoin/pull/25273\n  - [x] https://github.com/bitcoin/bitcoin/pull/28560\n  - [x] https://github.com/bitcoin/bitcoin/pull/30047\n  - [x] https://github.com/bitcoin/bitcoin/pull/30048\n  - [x] https://github.com/bitcoin/bitcoin/pull/30050\n  - [x] https://github.com/bitcoin/bitcoin/pull/30051\n* Send and receive support in the Bitcoin Core wallet:\n  - [ ] libsecp module (cryptographic portion of the protocol: https://github.com/bitcoin-core/secp256k1/pull/1698\n  - [ ] Base protocol: https://github.com/bitcoin/bitcoin/pull/28122\n  - [ ] Sending: https://github.com/bitcoin/bitcoin/pull/28201\n  - [ ] Receiving: https://github.com/bitcoin/bitcoin/pull/32966\n\n* Light client support:\n  - [ ] Index for silent payment tweaks (depends on 28122): https://github.com/bitcoin/bitcoin/pull/28241\n  - [ ] New BIP157 filter type for tweak data (not started)\n  - [ ] Serve new filter type (not started)\n\n<details>\n  <summary>Older stuff</summary>\n\n\n  <ul>\n  <li>Closed / Superseded:\n     <ul>\n     <li>Tracking PR (superseded by this issue): #27827</li>\n     <li>Receiving (superseded by 28453): #28202</li>\n      <li>Original draft implementation: #24897</li>\n     <li>Original libsecp256k1 module (superseded by 1519): bitcoin-core/secp256k1/pull/1471</li>\n     <li>https://github.com/bitcoin-core/secp256k1/pull/1519 , (superseded by #1698)\n     <li> Original receiving PR: https://github.com/bitcoin/bitcoin/pull/28453</li>\n      </ul>\n  </li>\n  </ul>\n</details>\n",
      "state": "open",
      "user": "josibake",
      "created_at": "2023-09-26T11:59:59Z",
      "updated_at": "2026-02-08T11:43:04Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/28536",
      "labels": [
        "Feature",
        "Wallet",
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3865259493,
          "user": "PedroRosalba",
          "body": "hey guys what is the status of this? If there are blockers can someone describe them?\n",
          "created_at": "2026-02-07T20:22:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 86,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3865519757,
          "user": "furszy",
          "body": "> hey guys what is the status of this? If there are blockers can someone describe them?\n\nPlease read the message that is just above yours.",
          "created_at": "2026-02-07T21:33:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 138,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3867045836,
          "user": "multicryptobank",
          "body": "We started trying out/testing silent payments on Bitcoin Core last year.\n\n<img width=\"939\" height=\"452\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/29353977-570d-41eb-8706-9209f0ae3305\" />\n\n<img width=\"939\" height=\"421\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/695fc161-d8fa-428c-91e9-c6a9b73c6926\" />\n\n<img width=\"940\" height=\"119\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/03d53405-fcf8-4cff-bbc9-f00b954ab714\" />\n\nAny assistance, please reach out to us.\n\nCheers.",
          "created_at": "2026-02-08T11:43:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 518,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1882,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2564450350,
      "number": 31027,
      "title": "Unable to cross compile on linux for macos (28.x branch)",
      "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nRunning the command `make HOST=x86_64-apple-darwin -C depends` on Bitcoin Core 28.x no longer compiles the dependencies as expected. It fails.\r\n\r\n### Expected behaviour\r\n\r\nThe command `make HOST=x86_64-apple-darwin -C depends` should successfully compile all required dependencies without errors, as it did in previous versions of Bitcoin Core.\r\n\r\n### Steps to reproduce\r\n\r\nmake HOST=x86_64-apple-darwin -C depends -j32\r\n\r\n### Relevant log output\r\n```\r\nroot@localhost:~/.build/bitcoin-untouched# make HOST=x86_64-apple-darwin -C depends -j32\r\nmake: Entering directory '/root/.build/bitcoin-untouched/depends'\r\nFetching boost_1_81_0.tar.gz from https://archives.boost.io/release/1.81.0/source/\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  133M  100  133M    0     0  1221k      0  0:01:52  0:01:52 --:--:-- 1183k\r\n/root/.build/bitcoin-untouched/depends/work/download/boost-1.81.0/boost_1_81_0.tar.gz.temp: OK\r\nExtracting boost...\r\n/root/.build/bitcoin-untouched/depends/sources/boost_1_81_0.tar.gz: OK\r\nPreprocessing boost...\r\nConfiguring boost...\r\nBuilding boost...\r\nStaging boost...\r\nPostprocessing boost...\r\nCaching boost...\r\nFetching libevent-2.1.12-stable.tar.gz from https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r\n100 1075k  100 1075k    0     0   389k      0  0:00:02  0:00:02 --:--:--  885k\r\n/root/.build/bitcoin-untouched/depends/work/download/libevent-2.1.12-stable/libevent-2.1.12-stable.tar.gz.temp: OK\r\nExtracting libevent...\r\n/root/.build/bitcoin-untouched/depends/sources/libevent-2.1.12-stable.tar.gz: OK\r\nPreprocessing libevent...\r\npatching file CMakeLists.txt\r\npatching file cmake/AddEventLibrary.cmake\r\npatching file CMakeLists.txt\r\nConfiguring libevent...\r\n-- The C compiler identification is Clang 14.0.6\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - failed\r\n-- Check for working C compiler: /usr/bin/clang\r\n-- Check for working C compiler: /usr/bin/clang - broken\r\nCMake Error at /usr/share/cmake-3.25/Modules/CMakeTestCCompiler.cmake:70 (message):\r\n  The C compiler\r\n\r\n    \"/usr/bin/clang\"\r\n\r\n  is not able to compile a simple test program.\r\n\r\n  It fails with the following output:\r\n\r\n    Change Dir: /root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg\r\n\r\n    Run Build Command(s):/usr/bin/gmake -f Makefile cmTC_bccc1/fast && gmake[1]: Entering directory '/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg'\r\n    /usr/bin/gmake  -f CMakeFiles/cmTC_bccc1.dir/build.make CMakeFiles/cmTC_bccc1.dir/build\r\n    gmake[2]: Entering directory '/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg'\r\n    Building C object CMakeFiles/cmTC_bccc1.dir/testCCompiler.c.o\r\n    /usr/bin/clang  --target=x86_64-apple-darwin -isysroot/root/.build/bitcoin-untouched/depends/SDKs/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers -nostdlibinc -iwithsysroot/usr/include -iframeworkwithsysroot/System/Library/Frameworks --target=x86_64-apple-darwin   -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include  -I/root/.build/bitcoin-untouched/depends/x86_64-apple-darwin/include -D_GNU_SOURCE -D_FORTIFY_SOURCE=3  -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include  -fPIE -MD -MT CMakeFiles/cmTC_bccc1.dir/testCCompiler.c.o -MF CMakeFiles/cmTC_bccc1.dir/testCCompiler.c.o.d -o CMakeFiles/cmTC_bccc1.dir/testCCompiler.c.o -c /root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg/testCCompiler.c\r\n    Linking C executable cmTC_bccc1\r\n    /usr/bin/cmake -E cmake_link_script CMakeFiles/cmTC_bccc1.dir/link.txt --verbose=1\r\n    /usr/bin/clang  --target=x86_64-apple-darwin -isysroot/root/.build/bitcoin-untouched/depends/SDKs/Xcode-15.0-15A240d-extracted-SDK-with-libcxx-headers -nostdlibinc -iwithsysroot/usr/include -iframeworkwithsysroot/System/Library/Frameworks --target=x86_64-apple-darwin -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include  -I/root/.build/bitcoin-untouched/depends/x86_64-apple-darwin/include -D_GNU_SOURCE -D_FORTIFY_SOURCE=3  -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include -I/usr/local/python-3.12.6/include -I/usr/local/node-v22.9.0/include  -Wl,-headerpad_max_install_names -L/usr/local/python-3.12.6/lib -L/usr/local/node-v22.9.0/lib -L/usr/local/python-3.12.6/lib -L/usr/local/node-v22.9.0/lib  -L/root/.build/bitcoin-untouched/depends/x86_64-apple-darwin/lib  CMakeFiles/cmTC_bccc1.dir/testCCompiler.c.o -o cmTC_bccc1\r\n    clang: warning: argument unused during compilation: '-nostdlibinc' [-Wunused-command-line-argument]\r\n    /usr/bin/ld: unrecognised emulation mode: acosx_version_min\r\n    Supported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu i386pep i386pe\r\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n    gmake[2]: *** [CMakeFiles/cmTC_bccc1.dir/build.make:100: cmTC_bccc1] Error 1\r\n    gmake[2]: Leaving directory '/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg'\r\n    gmake[1]: *** [Makefile:127: cmTC_bccc1/fast] Error 2\r\n    gmake[1]: Leaving directory '/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeScratch/TryCompile-Y3lnvg'\r\n\r\n\r\n\r\n\r\n\r\n  CMake will not be able to correctly generate this project.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:47 (project)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeOutput.log\".\r\nSee also \"/root/.build/bitcoin-untouched/depends/work/build/x86_64-apple-darwin/libevent/2.1.12-stable-66fa9a79555/build/CMakeFiles/CMakeError.log\".\r\nmake: *** [funcs.mk:302: /root/.build/bitcoin-untouched/depends/x86_64-apple-darwin/.libevent_stamp_configured] Error 1\r\nmake: Leaving directory '/root/.build/bitcoin-untouched/depends'\r\n```\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n28.x\r\n\r\n### Operating system and version\r\n\r\nDebian 12.7.0\r\n\r\n### Machine specifications\r\n\r\n_No response_",
      "state": "closed",
      "user": "JayBitron",
      "created_at": "2024-10-03T16:17:09Z",
      "updated_at": "2026-02-08T11:09:11Z",
      "closed_at": "2024-10-06T22:36:46Z",
      "comments": 17,
      "url": "https://github.com/bitcoin/bitcoin/issues/31027",
      "labels": [
        "Build system"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 7274,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2140928642,
      "number": 29445,
      "title": "Proposal: Adopt simple SPDX-License-Identifier Across Bitcoin Codebase",
      "body": "I propose replacing the [diverse](https://github.com/bitcoin/bitcoin/blob/master/src/chainparamsseeds.h), [hard](https://github.com/bitcoin/bitcoin/blob/master/src/leveldb/util/arena_test.cc)-[to](https://github.com/bitcoin/bitcoin/blob/master/src/bech32.cpp)-[maintain](https://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp) copyright headers in Bitcoin source files with a uniform, concise [SPDX identifier](https://www.kernel.org/doc/html/v4.18/process/license-rules.html#license-identifier-syntax) to ensure clarity and consistency, thereby streamlining licensing while reducing noise and focusing on modern, efficient license declaration.\r\n\r\nThis aligns with practices in projects like the Linux Kernel [the Linux Kernel](https://raw.githubusercontent.com/torvalds/linux/master/kernel/trace/trace_btf.c), reducing noise, inconsistency, enhancing clarity and reducing inconsistency.\r\n\r\nA similar change was already opined by the [Bitcoin Legal Defense Fund](https://github.com/bitcoin/bitcoin/pull/26817#issuecomment-1381109694), emphasizing that version control already preserves historical data and legal integrity.\r\n\r\nFor further details on related discussions and proposals, see:\r\n- https://github.com/bitcoin/bitcoin/pull/26817#issuecomment-1381109694\r\n- https://github.com/bitcoin/bitcoin/pull/26817#issuecomment-1417509500\r\n- https://github.com/bitcoin/bitcoin/pull/22975#issuecomment-920814487\r\n\r\nDiffs:\r\n<img alt=\"image\" src=\"https://github.com/bitcoin/bitcoin/assets/1841944/8e84759b-3080-4596-b4fb-16bcb6c45ff3\">\r\n\r\nor\r\n\r\n<img alt=\"image\" src=\"https://github.com/bitcoin/bitcoin/assets/1841944/a2efcbe4-63a2-46f4-a7de-f7eb56e87d09\">\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-02-18T11:09:51Z",
      "updated_at": "2026-02-07T11:08:49Z",
      "closed_at": "2025-02-07T18:15:39Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/29445",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1733,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2605866645,
      "number": 31136,
      "title": "Support validating a PoW-free block over over RPC",
      "body": "Not entirely sure if `TestBlockValidity` tests all types of block validity, but it looks like it nearly does, making this kinda easy? If it does, its generally quite useful to have a way to as Bitcoin Core if a block would be valid, ignoring its PoW, so having that be public would be nice.",
      "state": "closed",
      "user": "TheBlueMatt",
      "created_at": "2024-10-22T15:56:11Z",
      "updated_at": "2026-02-07T11:08:48Z",
      "closed_at": "2024-11-02T17:28:39Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31136",
      "labels": [
        "Feature",
        "RPC/REST/ZMQ",
        "Mining"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 340,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2823509936,
      "number": 31770,
      "title": "fuzz: oss-fuzz coverage build is failing",
      "body": "It first failed on the 25th (https://oss-fuzz-build-logs.storage.googleapis.com/log-7da28be4-dcf5-4e23-a6ca-153f67ad2f60.txt):\n```bash\nStep #7: \u001b[0m\u001b[0;31mwarning: The file '/usr/evmap.c' isn't covered.\nStep #7: \u001b[0m\u001b[0;31merror: /workspace/out/libfuzzer-coverage-x86_64/usr/arc4random.c: No such file or directory\nStep #7: \u001b[0m\u001b[0;31mwarning: The file '/usr/arc4random.c' isn't covered.\nStep #7: \u001b[0m\u001b[0;31merror: /workspace/out/libfuzzer-coverage-x86_64/usr/buffer.c: No such file or directory\nStep #7: \u001b[0m\u001b[0;31mwarning: The file '/usr/buffer.c' isn't covered.\nStep #7: \u001b[0m\u001b[0;31merror: /workspace/out/libfuzzer-coverage-x86_64/usr/util-internal.h: No such file or directory\nStep #7: \u001b[0m\u001b[0;31mwarning: The file '/usr/util-internal.h' isn't covered.\nStep #7: \u001b[0m[2025-01-31 07:01:44,276 DEBUG] Finished generating per-file code coverage summary.\nStep #7: [2025-01-31 07:01:44,277 DEBUG] Generating file view html index file as: \"/workspace/out/libfuzzer-coverage-x86_64/report/linux/file_view_index.html\".\nStep #7: Traceback (most recent call last):\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 829, in <module>\nStep #7:     sys.exit(Main())\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 823, in Main\nStep #7:     return _CmdPostProcess(args)\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 780, in _CmdPostProcess\nStep #7:     processor.PrepareHtmlReport()\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 577, in PrepareHtmlReport\nStep #7:     self.GenerateFileViewHtmlIndexFile(per_file_coverage_summary,\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 450, in GenerateFileViewHtmlIndexFile\nStep #7:     self.GetCoverageHtmlReportPathForFile(file_path),\nStep #7:   File \"/opt/code_coverage/coverage_utils.py\", line 422, in GetCoverageHtmlReportPathForFile\nStep #7:     assert os.path.isfile(\nStep #7: AssertionError: \"/usr/arc4random.c\" is not a file.\nStep #7: ********************************************************************************\nStep #7: Code coverage report generation failed.\nStep #7: To reproduce, run:\nStep #7: python infra/helper.py build_image bitcoin-core\nStep #7: python infra/helper.py build_fuzzers --sanitizer coverage bitcoin-core\nStep #7: python infra/helper.py coverage bitcoin-core\nStep #7: ********************************************************************************\nFinished Step #7\nERROR\nERROR: build step 7 \"gcr.io/oss-fuzz-base/base-runner\" failed: step exited with non-zero status: 1\n```\n\nSee also: https://issues.oss-fuzz.com/issues/391974928.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-01-31T13:33:00Z",
      "updated_at": "2026-02-07T11:08:47Z",
      "closed_at": "2025-02-07T11:09:59Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/31770",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2602,
        "has_nack": false,
        "has_ack": true
      }
    }
  ],
  "summary": {
    "total_prs": 306,
    "total_issues": 51,
    "total_comments": 81,
    "unique_participants": 110
  }
}