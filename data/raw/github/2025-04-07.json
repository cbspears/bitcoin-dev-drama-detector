{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:31:05.147121+00:00",
  "date": "2025-04-07",
  "pull_requests": [
    {
      "number": 32234,
      "title": ".",
      "body": "I successfully implemented test utility functions for `AddCoin()` and `SpendCoin()` in the Bitcoin Core codebase. Here's a summary of the changes made:\r\n\r\n## Added Test Utility Functions\r\n\r\nI added two new test functions to `src/test/util/coins.cpp`:\r\n\r\n- **`TestAddCoin()`**: Tests the `CCoinsViewCache::AddCoin()` function with various parameters\r\n- **`TestSpendCoin()`**: Tests the `CCoinsViewCache::SpendCoin()` function with different scenarios\r\n\r\n## Updated Header File\r\n\r\nI updated `src/test/util/coins.h` with declarations for these new functions, including detailed documentation of their parameters and return values.\r\n\r\n## Implemented Test Cases\r\n\r\nAdded a comprehensive test case `util_coins_tests` in `src/test/coins_tests.cpp` that:\r\n\r\n- Tests adding coins with different parameters\r\n- Tests coin overwrite behavior (with and without permission)\r\n- Tests spending coins with and without the moveout parameter\r\n- Tests error handling when spending non-existent coins\r\n- Tests batch operations by adding and spending multiple coins\r\n\r\n## Test Coverage\r\n\r\nThe tests verify several important aspects of coin handling:\r\n\r\n- ‚úì Coins are added correctly with the correct properties\r\n- ‚úì Coin overwrite protection works as expected\r\n- ‚úì Spent coins are properly marked as spent\r\n- ‚úì The moveout parameter correctly captures coin data\r\n- ‚úì Non-existent coins cannot be spent\r\n\r\nThese tests complement the existing coin-related tests in the codebase and provide additional coverage for the `AddCoin()` and `SpendCoin()` functions, strengthening the test suite for Bitcoin Core's UTXO handling.\r\n",
      "state": "closed",
      "user": "gap-editor",
      "created_at": "2025-04-07T21:07:18Z",
      "updated_at": "2025-04-16T15:22:15Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32234",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32234.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-07T21:07:20Z"
        },
        {
          "user": "glozow",
          "body": "Doesn't compile, code and description look AI-generated, is from master branch, opened right after the last PR by author was closed. Closing as spam - sincere apologies if I'm mischaracterizing.",
          "created_at": "2025-04-07T21:35:42Z"
        }
      ]
    },
    {
      "number": 32233,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Pekis-crypto",
      "created_at": "2025-04-07T20:30:00Z",
      "updated_at": "2025-04-08T00:45:26Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32233",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32233.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-07T20:30:03Z"
        },
        {
          "user": "DrahtBot",
          "body": "üìÅ Archived release notes are archived and should not be modified.",
          "created_at": "2025-04-07T20:30:32Z"
        },
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-04-07T20:30:33Z"
        }
      ]
    },
    {
      "number": 32232,
      "title": "fix: #32098",
      "body": "closes #32098 \r\n\r\nAt present, only coinbase UTXOs that have matured by block height h are eligible for coin selection. This pull request extends eligibility to include UTXOs that will mature at block height h+1.\r\n\r\nGiven that a transaction spending such outputs would be valid and accepted into the mempool, they should be considered for selection.\r\n\r\nThis approach aligns with the logic implemented by BDK, which appears to be the correct and intended behavior. \r\n\r\n```bash\r\n$ bitcoin-cli -regtest createwallet wallet\r\n{\r\n  \"name\": \"wallet\"\r\n}\r\n\r\n$ export ADDRESS=$(bitcoin-cli -regtest -rpcwallet=wallet getnewaddress)\r\n\r\n$ bitcoin-cli -regtest generatetoaddress 101 $ADDRESS\r\n[\r\n  \"467fd440d0ed89d0cad64fa64d0320968b33a32c681b6c3f5a5ed1d1c016f45a\",\r\n  \"1b2246eaa35689710acc5d1bb2923197993233fb9186f0bd561cb546c7667ca7\",\r\n  ...\r\n  \"5d5ee44ada395ab1d978a77596ed3893be750840229e7234a85a01984057798a\",\r\n  \"7f8a573a6824edc5342cf86e5e7c0a6ea5664305ef21808456fc98b2621b41cf\"\r\n]\r\n$ bitcoin-cli -regtest -rpcwallet=wallet getbalance\r\n- 50.00000000\r\n+ 100.00000000",
      "state": "closed",
      "user": "gap-editor",
      "created_at": "2025-04-07T18:02:34Z",
      "updated_at": "2025-04-16T15:22:47Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32232",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32232.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32232#issuecomment-2784226570) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-07T18:02:37Z"
        },
        {
          "user": "l0rinc",
          "body": "@gap-editor, your commits should tell a story, to help us guide through your work. Please look at other PRs before pushing.",
          "created_at": "2025-04-07T18:06:14Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40122862258</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-07T18:32:52Z"
        },
        {
          "user": "l0rinc",
          "body": "NACK",
          "created_at": "2025-04-07T18:35:59Z"
        },
        {
          "user": "glozow",
          "body": "duplicate of #32123",
          "created_at": "2025-04-07T20:16:39Z"
        }
      ]
    },
    {
      "number": 32231,
      "title": "coins: Fix GetCoin to not return spent coins in CoinsViewBottom",
      "body": "This commit modifies the GetCoin method in the CoinsViewBottom test class to \r\nnot return spent coins. Previously, it would return any coin found in the map,\r\nregardless of whether it was spent or not. Now it checks the IsSpent() status\r\nbefore returning and only returns unspent coins, ensuring consistent behavior\r\nwith other implementations of the CCoinsView interface.",
      "state": "closed",
      "user": "VolodymyrBg",
      "created_at": "2025-04-07T17:29:39Z",
      "updated_at": "2025-04-07T17:36:25Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32231",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32231.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32231#issuecomment-2784091193) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-07T17:29:42Z"
        },
        {
          "user": "l0rinc",
          "body": "NACK, you've only changed the fuzz test.\r\n\r\nThere's already an actual fix as well, see: https://github.com/bitcoin/bitcoin/pull/30673/files#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77cL54",
          "created_at": "2025-04-07T17:35:11Z"
        }
      ]
    },
    {
      "number": 32230,
      "title": "depends: Make native package paths platform-agnostic",
      "body": "This PR makes native package paths platform-agnostic, allowing native packages to be reused across different hosts.\r\n\r\nThis is useful in scenarios such as building within a Guix environment.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-07T16:50:24Z",
      "updated_at": "2025-04-08T21:32:53Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32230",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32230.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32215](https://github.com/bitcoin/bitcoin/pull/32215) (depends: Fix cross-compiling on macOS by hebasto)\n* [#31741](https://github.com/bitcoin/bitcoin/pull/31741) (multiprocess: Add libmultiprocess git subtree by ryanofsky)\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-07T16:50:27Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40118602689</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-07T19:12:00Z"
        }
      ]
    },
    {
      "number": 32229,
      "title": "tests: Add unix timestamp tests for OP_CLTV",
      "body": "This PR adds tests for the UNIX timestamp portion of [BIP65](https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki). I don't believe this is currently tested in the python test suite (not sure about c++).\r\n\r\nApologies if this is actually tested somewhere else and this is duplicate. \r\n\r\nThere is some interesting interplay between median-time-past consensus rules ([BIP113](https://github.com/bitcoin/bips/blob/master/bip-0113.mediawiki)) and lock times. This PR attempts to test that logic as well - for instance I don't believe it is possible to spend a UTXO that has a output script with locktime `0xffff_ffff` or `0xffff_fffe`\r\n\r\nUnfortunately it does seem like these tests aren't necessarily always testing OP_CLTV logic as median-time-past ends up being the reason blocks cannot be mined for edge cases.",
      "state": "open",
      "user": "Christewart",
      "created_at": "2025-04-07T16:44:37Z",
      "updated_at": "2025-12-03T11:02:52Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32229",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32229.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-07T16:44:41Z"
        },
        {
          "user": "Christewart",
          "body": "Hi @mabu44 . Thanks for taking a look at this.\r\n\r\n>  Do your test cover scenarios that are not covered in the existing tests?\r\n\r\nYes I believe so. I took a look at the values in `tx_valid.json` and `tx_invalid.json`. Here is a table\r\n\r\n| OP_CLTV parameter | Transaction locktime field | Valid |\r\n|-------------------|----------------------------|--------|\r\n| 0                 | 0                          | true   |\r\n| 499999999         | 499999999                  | true   |\r\n| 0                 | 499999999                  | true   |\r\n| 500000000         | 500000000                  | true   |\r\n| 4294967295        | 4294967295                 | true   |\r\n| 500000000         | 4294967295                 | true   |\r\n| 0                 | 0                          | true   |\r\n| -11               | 500000000                  | true   |\r\n| -19               | 4294967294                 | true   |\r\n| 0                 | 0                          | true   |\r\n| 1                 | 0                          | false  |\r\n| 499999999         | 499999998                  | false  |\r\n| 500000001         | 500000000                  | false  |\r\n| 4294967295        | 4294967294                 | false  |\r\n| -1                | 0                          | false  |\r\n| -1                | 500000000                  | false  |\r\n| 0                 | 0                          | false  |\r\n| 0                 | 0                          | false  |\r\n| 0                 | 500000000                  | false  |\r\n| 499999999         | 500000000                  | false  |\r\n| 500000000         | 0                          | false  |\r\n| 500000000         | 499999999                  | false  |\r\n| 4294967296        | 4294967295                 | false  |\r\n| 2147483648        | 2147483647                 | false  |\r\n| 0                 | 0                          | false  |\r\n\r\nThis test also directly tests the median-time-past logic. This is not tested in `tx_{valid,invalid}.json` as we just [directly call `VerifyScript()`](https://github.com/bitcoin/bitcoin/blob/cfe025ff0e1dcf984179a5a9b01dc8b865d95409/src/test/transaction_tests.cpp#L129) for individual transactions in the test files.\r\n\r\nInterestingly, i think there may be one test case overlap with `tx_valid.json`. While this transaction could be valid with relay policy I don't believe a transaction with these locktimes would be allowed to be included in a block? This is because median-time-past logic for a block with this transaction could be not be satisfied as per my last test case [here](https://github.com/Christewart/bitcoin/blob/69b6bb9438095f84ce90aecfc4e76b0ff21cc2b8/test/functional/feature_cltv.py#L256).\r\n\r\n>| 4294967295        | 4294967295                 | true   |\r\n\r\nSome more eyes on this could be good as I may be making a mistake.\r\n\r\n\r\n\r\n\r\n\r\n",
          "created_at": "2025-04-08T16:23:11Z"
        },
        {
          "user": "Christewart",
          "body": "Thank you again for the careful review. I've integrated your code review in 024c3bf\r\n\r\n> So this is an integration test of:\r\n> \r\n>     * _Transaction validity based on input script and transaction locktime_: currently tested in [transactions_tests.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/test/transaction_tests.cpp);\r\n> \r\n>     * _Transaction validity based on median block time_: currently tested in [miner_tests.cpp (lines 525-534)](https://github.com/bitcoin/bitcoin/blob/b8cefeb221490868d62b7a0695f8b5ea392d3654/src/test/miner_tests.cpp#L525-L534) and [feature_csv_activation.py (lines 340-355)](https://github.com/bitcoin/bitcoin/blob/b8cefeb221490868d62b7a0695f8b5ea392d3654/test/functional/feature_csv_activation.py#L340-L355)\r\n> \r\n> \r\n> with some more edge cases relative to the year 2106. Right?\r\n\r\nYes.\r\n\r\n> > Interestingly, i think there may be one test case overlap with tx_valid.json. While this transaction could be valid with relay policy I don't believe a transaction with these locktimes would be allowed to be included in a block? This is because median-time-past logic for a block with this transaction could be not be satisfied as per my last test case [here](https://github.com/Christewart/bitcoin/blob/69b6bb9438095f84ce90aecfc4e76b0ff21cc2b8/test/functional/feature_cltv.py#L256).\r\n> \r\n> > > | 4294967295 | 4294967295 | true |\r\n> \r\n> I think that such a transaction will become relay-valid in 2106, but, unless consensus changes, it will never be mined because no blocks will be produced to mine it.\r\n\r\nThat is my understanding as well :+1:\r\n\r\n",
          "created_at": "2025-04-10T17:11:59Z"
        },
        {
          "user": "fanquake",
          "body": "cc @petertodd ",
          "created_at": "2025-12-03T11:02:51Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 6,
    "issues": 0
  }
}