{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:15:15.898480+00:00",
  "date": "2025-02-06",
  "pull_requests": [
    {
      "number": 31814,
      "title": "ci: Bump fuzz task timeout",
      "body": "The fuzz task seems to be the most CPU intense task (going through GB of data through all fuzz inputs for all fuzz targets).\r\n\r\nNormally, the task takes 44 minutes (example https://cirrus-ci.com/task/5077976091459584), but under higher load, it may take longer (https://cirrus-ci.com/task/5966231095738368).\r\n\r\nI tried to move it to GHA to see how it compares, but it will be even slower there: https://github.com/maflcko/bitcoin-core-with-ci/actions/runs/13182526514/job/36796629409.\r\n\r\nThe CI machines were recently updated to increase the CI performance, so in theory they could be updated again, but this can take some time and seems like the wrong fix anyway, because it will just hide the problem:\r\n\r\nIdeally fuzzing is fast and when evaluating a fuzz input takes more than 10 seconds, it feels more like a slow unit test loop. So ideally fuzz timeouts should be fixed (https://github.com/bitcoin/bitcoin/issues/31066, https://github.com/bitcoin/bitcoin/issues/30498, ...). However, this can also take time.\r\n\r\nSo temporarily bump the fuzz timeout for now.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-06T21:18:29Z",
      "updated_at": "2025-02-07T13:31:55Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/31814",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31814.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/31814#issuecomment-2642410797) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-06T21:18:32Z"
        },
        {
          "user": "dergoegge",
          "body": "ACK faca7ac13215fd88b420feea8f06d7404f8fd067",
          "created_at": "2025-02-07T09:31:24Z"
        },
        {
          "user": "0xB10C",
          "body": "fwiw: duration of the `fuzzer,address,undefined,integer, no depends` task over the last few months in MM:SS\r\n![image](https://github.com/user-attachments/assets/3cd3a0bb-f2db-4faa-b069-585b813f7d62)\r\n",
          "created_at": "2025-02-07T11:48:04Z"
        },
        {
          "user": "maflcko",
          "body": "Interesting. For context, the \"speedup\" after Jan 12 is likely due to fuzz input invalidation after commit 37af8bfb34d685bfd5d9a9ba6b35b4705e021535. And the \"slowdown\" after Dec 13th is likely due to adding fuzz inputs after commit https://github.com/bitcoin-core/qa-assets/commit/5c026e2a97b5f447a863734fb1c2566c33738d01. ",
          "created_at": "2025-02-07T12:28:21Z"
        },
        {
          "user": "dergoegge",
          "body": "Something we could also do is stop using libfuzzer's coverage instrumentation in that task, as it makes things slower too. We aren't using instrumentation in the other fuzz jobs either.\r\n\r\nWe could still compile with libfuzzer but disable the instrumentation with `-fsanitize-coverage-allowlist=allowlist.txt` where the allow list is empty (i think).\r\n\r\nNot sure how much impact it has compared to the other sanitizers.",
          "created_at": "2025-02-07T13:30:48Z"
        }
      ]
    },
    {
      "number": 31813,
      "title": "build: fix MSVC ccache reporting",
      "body": "\r\nFixes #31771\r\n\r\n### Summary\r\nThis PR resolves the incorrect reporting of `ccache` usage for MSVC builds by:  \r\n1. Removing forced compiler launcher configuration  \r\n2. Improving status message accuracy  \r\n3. Documenting proper MSVC+ccache workflows  \r\n\r\n### Key Changes\r\n- **Deleted**: `cmake/ccache.cmake` (Eliminates conflicts with user/CI configurations like `sccache`)  \r\n- **Updated**: `CMakeLists.txt` status reporting  \r\n  ```cmake\r\n  if(CMAKE_CXX_COMPILER_LAUNCHER)\r\n    message(STATUS \"Compiler launcher .............. ${CMAKE_CXX_COMPILER_LAUNCHER}\")\r\n  else()\r\n    message(STATUS \"Use ccache for compiling .............. NO\")\r\n  endif()\r\n  ```\r\n- **Added Documentation**:  \r\n  - **Requires**: Ninja generator  \r\n  - **Configure**: `cmake -B build -G Ninja -DCMAKE_CXX_COMPILER_LAUNCHER=ccache`  \r\n  - **Use**: `/Z7` debug flags (not `/Zi`)  \r\n\r\n### Testing\r\n```sh\r\n# MSVC 2022 + Ninja\r\ncmake -B build -G Ninja -DCMAKE_CXX_COMPILER_LAUNCHER=ccache\r\ncmake --build build\r\nccache -s  # Verified cache hits\r\n\r\n# User override test\r\ncmake -B build -DCMAKE_CXX_COMPILER_LAUNCHER=sccache  # No conflicts\r\n```",
      "state": "closed",
      "user": "vijayabhaskar78",
      "created_at": "2025-02-06T17:54:55Z",
      "updated_at": "2025-02-10T10:22:19Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/31813",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31813.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31665](https://github.com/bitcoin/bitcoin/pull/31665) (build: Make config warnings fatal if -DWCONFIGURE_ERROR=ON by davidgumberg)\n* [#30861](https://github.com/bitcoin/bitcoin/pull/30861) (build: Enhance Ccache performance across worktrees and build trees by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-02-06T17:54:59Z"
        },
        {
          "user": "vijayabhaskar78",
          "body": "@hebasto @ben-kaufman  Can you help me regarding this PR please",
          "created_at": "2025-02-06T18:17:53Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/36804595890</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-02-06T18:36:06Z"
        },
        {
          "user": "pinheadmz",
          "body": "@vijayabhaskar78 posting external social media links isn't really appropriate here.",
          "created_at": "2025-02-06T19:22:03Z"
        },
        {
          "user": "hebasto",
          "body": "@vijayabhaskar78 \r\n\r\n> ### Testing\r\n> \r\n> ```shell\r\n> cmake -B build -G Ninja -DCMAKE_CXX_COMPILER_LAUNCHER=ccache\r\n> ```\r\n\r\nAll CI job failed. Does this work locally for you?\r\n\r\nWhat are cache hit rates in the following scenarios:\r\n- different build trees\r\n- different git work-trees\r\n\r\n?\r\n\r\n(for more details, please see https://github.com/bitcoin/bitcoin/pull/30811#issuecomment-2331096969 and https://github.com/bitcoin/bitcoin/pull/30861)",
          "created_at": "2025-02-06T20:11:06Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like there are several general problems:\r\n\r\n* The summary is just AI generated to repeat the code changes (which are also AI generated?). This is problematic, because if someone wanted to look at AI summaries or generations, they could just ask an LLM themselves.\r\n* The summary repeats the code changes. This is problematic, because the code changes should be explained: Why they are the correct approach (in light of alternatives) and why they fix the problem.\r\n* All tests are failing. This is problematic, because contributors are expected to at least compile their changes locally before opening a pull request.\r\n\r\nMy recommendation would be to close this pull and then start from scratch, ensuring that the changes pass locally on Linux and Windows and yield the expected result. Then, you should explain the changes in the commit message. Finally, you can open a new pull request.\r\n\r\n",
          "created_at": "2025-02-07T10:26:48Z"
        }
      ]
    },
    {
      "number": 31811,
      "title": "test: test_inv_block, use mocktime instead of waiting",
      "body": "Performance issue reported in https://github.com/bitcoin/bitcoin/pull/31437#issuecomment-2640221382\r\n\r\nIt seems that code as-is waits for wall-clock time to pass to synchronize mempools. Locally, sometimes the subtest takes a couple seconds, sometimes it takes an additional minute.\r\n\r\nJust use mocktime?",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-02-06T16:37:02Z",
      "updated_at": "2025-02-07T16:30:36Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31811",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31811.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sr-gi](https://github.com/bitcoin/bitcoin/pull/31811#issuecomment-2640735224), [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/31811#pullrequestreview-2599781783), [rishkwal](https://github.com/bitcoin/bitcoin/pull/31811#issuecomment-2642617401) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-06T16:37:06Z"
        },
        {
          "user": "sr-gi",
          "body": "tACK [2706c5b](https://github.com/bitcoin/bitcoin/pull/31811/commits/2706c5b7c8eee7ffd8c3b23a8012f346165ddb93)\r\n\r\nRun the test several times and it seems to be consistent around ~30s now, whereas it previously fluctuated between ~30-90s",
          "created_at": "2025-02-06T18:54:31Z"
        },
        {
          "user": "stark-3k",
          "body": "tACK 2706c5b\r\n\r\nTested multiple times. Previously took anywhere between 36 to 96 seconds. Now consistently taking around 35 to 37 seconds. Agree that `test_inv_block` does not need real-time delay.",
          "created_at": "2025-02-07T11:11:44Z"
        }
      ]
    },
    {
      "number": 31810,
      "title": "TxOrphanage: account for size of orphans and count announcements",
      "body": "Part of orphan resolution project, see #27463.\r\n\r\nDefinitions:\r\n- **Announcement** is a unique pair (wtxid, nodeid). We can have multiple announcers for the same orphan since #31397.\r\n- **Size** is the weight of an orphan. I'm calling it \"size\" and \"bytes\" because I think we can refine it in the future to be memusage or be otherwise more representative of the orphan's actual cost on our memory. However, I am open to naming changes.\r\n\r\nThis is part 1/2 of a project to also add limits on orphan size and count. However, this PR **does not change behavior**, just adds internal counters/tracking and a fuzzer. I will also open a second PR that adds behavior changes, which requires updating a lot of our tests and careful thinking about DoS.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2025-02-06T14:14:05Z",
      "updated_at": "2025-07-02T13:02:19Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/31810",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31810.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [marcofleon](https://github.com/bitcoin/bitcoin/pull/31810#pullrequestreview-2602619218), [instagibbs](https://github.com/bitcoin/bitcoin/pull/31810#issuecomment-2643844830), [sipa](https://github.com/bitcoin/bitcoin/pull/31810#pullrequestreview-2602898410) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-06T14:14:10Z"
        },
        {
          "user": "glozow",
          "body": "> nit: I believe that CheckInvariants() could be outside of the loop in the txdownloadman_impl harness\r\n\r\nthe checks are now out of the loop",
          "created_at": "2025-02-07T18:57:56Z"
        },
        {
          "user": "instagibbs",
          "body": "reACK https://github.com/bitcoin/bitcoin/pull/31810/commits/e107bf78f9d722fcdeb5c1fba5a784dd7747e12f",
          "created_at": "2025-02-07T19:27:25Z"
        },
        {
          "user": "glozow",
          "body": "Next PR is #31829",
          "created_at": "2025-02-10T13:13:37Z"
        }
      ]
    },
    {
      "number": 31809,
      "title": "Prepare \"Open Transifex translations for v29.0\" release step",
      "body": "This PR follows our [Release Process](https://github.com/bitcoin/bitcoin/blob/864386a7444fb5cf16613956ce8bf335f51b67d5/doc/release-process.md).\r\n\r\nIt is required to open Transifex translations for v29.0, as scheduled in https://github.com/bitcoin/bitcoin/issues/31029.\r\n\r\nThe previous similar PR: https://github.com/bitcoin/bitcoin/pull/30548.\r\n\r\n**Notes for reviewers:**\r\n\r\n1. This is the first release process conducted after migrating the build system to CMake. This revealed a bug, which is fixed in the second commit\r\n\r\n2. To reproduce the diff in the third commit, follow these steps:\r\n```\r\ngmake -C depends -j $(nproc) MULTIPROCESS=1\r\ncmake --preset dev-mode --toolchain depends/$(./depends/config.guess)/toolchain.cmake\r\ncmake --build build_dev_mode --target translate\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-02-06T10:44:36Z",
      "updated_at": "2025-02-07T02:33:22Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31809",
      "labels": [
        "GUI"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31809.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/31809#pullrequestreview-2599059064) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-06T10:44:39Z"
        },
        {
          "user": "hebasto",
          "body": "cc @stickies-v @pablomartin4btc @johnny9 @jarolrod as regular reviewers of similar previous PRs.\r\n\r\ncc @l0rinc as the author of https://github.com/bitcoin/bitcoin/pull/31731.\r\n\r\ncc @glozow as the 29.0 release manager.",
          "created_at": "2025-02-06T10:49:36Z"
        },
        {
          "user": "jarolrod",
          "body": "post merge ack",
          "created_at": "2025-02-07T02:33:21Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 31812,
      "title": "Networking tests fail on emulated big-endian systems",
      "body": "Running the test with an emulated big-endian system (via `docker run --platform linux/s390x -it ubuntu:24.10 /bin/bash`, as described in https://github.com/bitcoin/bitcoin/issues/31344#issuecomment-2493612110), I'm seeing mismatched byte orders in IP address representations.\nI've noticed this in https://github.com/bitcoin/bitcoin/pull/29852#issuecomment-2614010124, but it reproduces on master as well.\n\nThe problems seems to be that the kernel file `/proc/net/tcp` always stores addresses in little-endian order, regardless of the system's architecture, so we should likely adjust the `addr_to_hex` or `_convert_ip_port` methods:\n\n```bash\nTEST                                                     | STATUS    | DURATION\n\nexample_test.py                                          | ‚úì Passed  | 6 s\nfeature_abortnode.py                                     | ‚úì Passed  | 3 s\nfeature_addrman.py                                       | ‚úì Passed  | 10 s\nfeature_anchors.py                                       | ‚úì Passed  | 6 s\nfeature_asmap.py                                         | ‚úì Passed  | 11 s\nfeature_assumeutxo.py                                    | ‚úì Passed  | 77 s\nfeature_assumevalid.py                                   | ‚úì Passed  | 63 s\nfeature_bip68_sequence.py                                | ‚úì Passed  | 62 s\nfeature_block.py                                         | ‚úì Passed  | 662 s\nfeature_blocksdir.py                                     | ‚úì Passed  | 3 s\nfeature_blocksxor.py                                     | ‚úì Passed  | 8 s\nfeature_cltv.py                                          | ‚úì Passed  | 3 s\nfeature_coinstatsindex.py                                | ‚úì Passed  | 13 s\nfeature_config_args.py                                   | ‚úì Passed  | 38 s\nfeature_csv_activation.py                                | ‚úì Passed  | 53 s\nfeature_dersig.py                                        | ‚úì Passed  | 3 s\nfeature_dirsymlinks.py                                   | ‚úì Passed  | 3 s\nfeature_discover.py                                      | ‚úì Passed  | 6 s\nfeature_fastprune.py                                     | ‚úì Passed  | 3 s\nfeature_fee_estimation.py                                | ‚úì Passed  | 176 s\nfeature_filelock.py                                      | ‚úì Passed  | 5 s\nfeature_framework_miniwallet.py                          | ‚úì Passed  | 51 s\nfeature_framework_unit_tests.py                          | ‚úì Passed  | 86 s\nfeature_help.py                                          | ‚úì Passed  | 2 s\nfeature_includeconf.py                                   | ‚úì Passed  | 6 s\nfeature_init.py                                          | ‚úì Passed  | 29 s\nfeature_loadblock.py                                     | ‚úì Passed  | 6 s\nfeature_logging.py                                       | ‚úì Passed  | 9 s\nfeature_maxtipage.py                                     | ‚úì Passed  | 25 s\nfeature_maxuploadtarget.py                               | ‚úì Passed  | 214 s\nfeature_minchainwork.py                                  | ‚úì Passed  | 13 s\nfeature_notifications.py                                 | ‚úì Passed  | 11 s\nfeature_nulldummy.py                                     | ‚úì Passed  | 5 s\nfeature_port.py                                          | ‚úì Passed  | 7 s\nfeature_posix_fs_permissions.py                          | ‚úì Passed  | 2 s\nfeature_presegwit_node_upgrade.py                        | ‚úì Passed  | 4 s\nfeature_proxy.py                                         | ‚úì Passed  | 12 s\nfeature_rbf.py                                           | ‚úì Passed  | 38 s\nfeature_reindex.py                                       | ‚úì Passed  | 27 s\nfeature_reindex_readonly.py                              | ‚úì Passed  | 3 s\nfeature_remove_pruned_files_on_startup.py                | ‚úì Passed  | 11 s\nfeature_segwit.py --descriptors --v1transport            | ‚úì Passed  | 17 s\nfeature_segwit.py --descriptors --v2transport            | ‚úì Passed  | 16 s\nfeature_segwit.py --legacy-wallet                        | ‚úì Passed  | 39 s\nfeature_settings.py                                      | ‚úì Passed  | 11 s\nfeature_shutdown.py                                      | ‚úì Passed  | 3 s\nfeature_signet.py                                        | ‚úì Passed  | 14 s\nfeature_startupnotify.py                                 | ‚úì Passed  | 3 s\nfeature_taproot.py                                       | ‚úì Passed  | 542 s\nfeature_uacomment.py                                     | ‚úì Passed  | 7 s\nfeature_utxo_set_hash.py                                 | ‚úì Passed  | 4 s\nfeature_versionbits_warning.py                           | ‚úì Passed  | 8 s\ninterface_http.py                                        | ‚úì Passed  | 3 s\ninterface_rest.py                                        | ‚úì Passed  | 7 s\ninterface_rpc.py                                         | ‚úì Passed  | 5 s\ninterface_zmq.py                                         | ‚úì Passed  | 29 s\nmempool_accept.py                                        | ‚úì Passed  | 16 s\nmempool_accept_wtxid.py                                  | ‚úì Passed  | 16 s\nmempool_datacarrier.py                                   | ‚úì Passed  | 4 s\nmempool_dust.py                                          | ‚úì Passed  | 14 s\nmempool_ephemeral_dust.py                                | ‚úì Passed  | 67 s\nmempool_expiry.py                                        | ‚úì Passed  | 5 s\nmempool_limit.py                                         | ‚úì Passed  | 89 s\nmempool_package_limits.py                                | ‚úì Passed  | 11 s\nmempool_package_onemore.py                               | ‚úì Passed  | 4 s\nmempool_package_rbf.py                                   | ‚úì Passed  | 43 s\nmempool_packages.py                                      | ‚úì Passed  | 8 s\nmempool_persist.py --descriptors                         | ‚úì Passed  | 26 s\nmempool_reorg.py                                         | ‚úì Passed  | 7 s\nmempool_resurrect.py                                     | ‚úì Passed  | 3 s\nmempool_sigoplimit.py                                    | ‚úì Passed  | 11 s\nmempool_spend_coinbase.py                                | ‚úì Passed  | 3 s\nmempool_truc.py                                          | ‚úì Passed  | 22 s\nmempool_unbroadcast.py                                   | ‚úì Passed  | 20 s\nmempool_updatefromblock.py                               | ‚úì Passed  | 156 s\nmining_basic.py                                          | ‚úì Passed  | 38 s\nmining_getblocktemplate_longpoll.py                      | ‚úì Passed  | 70 s\nmining_mainnet.py                                        | ‚úì Passed  | 24 s\nmining_prioritisetransaction.py                          | ‚úì Passed  | 19 s\np2p_1p1c_network.py                                      | ‚úì Passed  | 37 s\np2p_add_connections.py                                   | ‚úì Passed  | 10 s\np2p_addr_relay.py                                        | ‚úì Passed  | 24 s\np2p_addrfetch.py                                         | ‚úì Passed  | 2 s\np2p_addrv2_relay.py                                      | ‚úì Passed  | 3 s\np2p_block_sync.py --v1transport                          | ‚úì Passed  | 5 s\np2p_block_sync.py --v2transport                          | ‚úì Passed  | 4 s\np2p_blockfilters.py                                      | ‚úì Passed  | 65 s\np2p_blocksonly.py                                        | ‚úì Passed  | 16 s\np2p_compactblocks.py                                     | ‚úì Passed  | 16 s\np2p_compactblocks_blocksonly.py                          | ‚úì Passed  | 4 s\np2p_compactblocks_hb.py --v1transport                    | ‚úì Passed  | 21 s\np2p_compactblocks_hb.py --v2transport                    | ‚úì Passed  | 25 s\np2p_disconnect_ban.py --v1transport                      | ‚úì Passed  | 5 s\np2p_disconnect_ban.py --v2transport                      | ‚úì Passed  | 5 s\np2p_dns_seeds.py                                         | ‚úì Passed  | 39 s\np2p_dos_header_tree.py                                   | ‚úì Passed  | 5 s\np2p_eviction.py                                          | ‚úì Passed  | 6 s\np2p_feefilter.py                                         | ‚úì Passed  | 9 s\np2p_filter.py                                            | ‚úì Passed  | 8 s\np2p_fingerprint.py                                       | ‚úì Passed  | 3 s\np2p_getaddr_caching.py                                   | ‚úì Passed  | 34 s\np2p_getdata.py                                           | ‚úì Passed  | 2 s\np2p_handshake.py                                         | ‚úì Passed  | 5 s\np2p_handshake.py --v2transport                           | ‚úì Passed  | 9 s\np2p_headers_sync_with_minchainwork.py                    | ‚úì Passed  | 127 s\np2p_i2p_ports.py                                         | ‚úì Passed  | 2 s\np2p_i2p_sessions.py                                      | ‚úì Passed  | 2 s\np2p_ibd_stalling.py --v1transport                        | ‚úì Passed  | 26 s\np2p_ibd_stalling.py --v2transport                        | ‚úì Passed  | 46 s\np2p_ibd_txrelay.py                                       | ‚úì Passed  | 4 s\np2p_initial_headers_sync.py                              | ‚úì Passed  | 3 s\np2p_invalid_block.py --v1transport                       | ‚úì Passed  | 4 s\np2p_invalid_block.py --v2transport                       | ‚úì Passed  | 5 s\np2p_invalid_locator.py                                   | ‚úì Passed  | 4 s\np2p_invalid_messages.py                                  | ‚úì Passed  | 47 s\np2p_invalid_tx.py --v1transport                          | ‚úì Passed  | 10 s\np2p_invalid_tx.py --v2transport                          | ‚úì Passed  | 19 s\np2p_leak.py                                              | ‚úì Passed  | 8 s\np2p_leak_tx.py --v1transport                             | ‚úì Passed  | 11 s\np2p_leak_tx.py --v2transport                             | ‚úì Passed  | 12 s\np2p_message_capture.py                                   | ‚úì Passed  | 2 s\np2p_mutated_blocks.py                                    | ‚úì Passed  | 4 s\np2p_net_deadlock.py --v1transport                        | ‚úì Passed  | 6 s\np2p_net_deadlock.py --v2transport                        | ‚úì Passed  | 6 s\np2p_nobloomfilter_messages.py                            | ‚úì Passed  | 3 s\np2p_node_network_limited.py --v1transport                | ‚úì Passed  | 23 s\np2p_node_network_limited.py --v2transport                | ‚úì Passed  | 24 s\np2p_opportunistic_1p1c.py                                | ‚úì Passed  | 87 s\np2p_orphan_handling.py                                   | ‚úì Passed  | 29 s\np2p_outbound_eviction.py                                 | ‚úì Passed  | 8 s\np2p_permissions.py                                       | ‚úì Passed  | 21 s\np2p_ping.py                                              | ‚úì Passed  | 3 s\np2p_seednode.py                                          | ‚úì Passed  | 5 s\np2p_segwit.py                                            | ‚úì Passed  | 242 s\np2p_sendheaders.py                                       | ‚úì Passed  | 39 s\np2p_sendtxrcncl.py                                       | ‚úì Passed  | 10 s\np2p_timeouts.py --v1transport                            | ‚úì Passed  | 3 s\np2p_timeouts.py --v2transport                            | ‚úì Passed  | 4 s\np2p_tx_download.py                                       | ‚úì Passed  | 139 s\np2p_tx_privacy.py                                        | ‚úì Passed  | 3 s\np2p_unrequested_blocks.py                                | ‚úì Passed  | 9 s\np2p_v2_encrypted.py                                      | ‚úì Passed  | 23 s\np2p_v2_misbehaving.py                                    | ‚úì Passed  | 5 s\np2p_v2_transport.py                                      | ‚úì Passed  | 11 s\nrpc_blockchain.py --v1transport                          | ‚úì Passed  | 30 s\nrpc_blockchain.py --v2transport                          | ‚úì Passed  | 30 s\nrpc_createmultisig.py                                    | ‚úì Passed  | 35 s\nrpc_decodescript.py                                      | ‚úì Passed  | 2 s\nrpc_deprecated.py                                        | ‚úì Passed  | 3 s\nrpc_deriveaddresses.py                                   | ‚úì Passed  | 2 s\nrpc_deriveaddresses.py --usecli                          | ‚úì Passed  | 4 s\nrpc_dumptxoutset.py                                      | ‚úì Passed  | 2 s\nrpc_estimatefee.py                                       | ‚úì Passed  | 2 s\nrpc_generate.py                                          | ‚úì Passed  | 12 s\nrpc_getblockfilter.py                                    | ‚úì Passed  | 4 s\nrpc_getblockfrompeer.py                                  | ‚úì Passed  | 19 s\nrpc_getblockstats.py                                     | ‚úì Passed  | 3 s\nrpc_getchaintips.py                                      | ‚úì Passed  | 7 s\nrpc_getdescriptoractivity.py                             | ‚úì Passed  | 6 s\nrpc_getdescriptorinfo.py                                 | ‚úì Passed  | 3 s\nrpc_help.py                                              | ‚úì Passed  | 4 s\nrpc_invalid_address_message.py                           | ‚úì Passed  | 3 s\nrpc_invalidateblock.py                                   | ‚úì Passed  | 3 s\nrpc_mempool_info.py                                      | ‚úì Passed  | 3 s\nrpc_misc.py                                              | ‚úì Passed  | 4 s\nrpc_named_arguments.py                                   | ‚úì Passed  | 3 s\nrpc_net.py --v1transport                                 | ‚úì Passed  | 55 s\nrpc_net.py --v2transport                                 | ‚úì Passed  | 54 s\nrpc_orphans.py                                           | ‚úì Passed  | 4 s\nrpc_packages.py                                          | ‚úì Passed  | 31 s\nrpc_preciousblock.py                                     | ‚úì Passed  | 4 s\nrpc_psbt.py --descriptors                                | ‚úì Passed  | 34 s\nrpc_psbt.py --legacy-wallet                              | ‚úì Passed  | 33 s\nrpc_rawtransaction.py --legacy-wallet                    | ‚úì Passed  | 22 s\nrpc_scanblocks.py                                        | ‚úì Passed  | 4 s\nrpc_scantxoutset.py                                      | ‚úì Passed  | 103 s\nrpc_setban.py --v1transport                              | ‚úì Passed  | 7 s\nrpc_setban.py --v2transport                              | ‚úì Passed  | 7 s\nrpc_signer.py                                            | ‚úì Passed  | 6 s\nrpc_signmessagewithprivkey.py                            | ‚úì Passed  | 2 s\nrpc_signrawtransactionwithkey.py                         | ‚úì Passed  | 3 s\nrpc_txoutproof.py                                        | ‚úì Passed  | 8 s\nrpc_uptime.py                                            | ‚úì Passed  | 2 s\nrpc_users.py                                             | ‚úì Passed  | 24 s\nrpc_validateaddress.py                                   | ‚úì Passed  | 3 s\nrpc_whitelist.py                                         | ‚úì Passed  | 4 s\ntool_signet_miner.py --descriptors                       | ‚úì Passed  | 9 s\ntool_signet_miner.py --legacy-wallet                     | ‚úì Passed  | 6 s\ntool_wallet.py --descriptors                             | ‚úì Passed  | 100 s\ntool_wallet.py --legacy-wallet                           | ‚úì Passed  | 140 s\ntool_wallet.py --legacy-wallet --bdbro                   | ‚úì Passed  | 142 s\ntool_wallet.py --legacy-wallet --bdbro --swap-bdb-endian | ‚úì Passed  | 102 s\nwallet_abandonconflict.py --descriptors                  | ‚úì Passed  | 13 s\nwallet_abandonconflict.py --legacy-wallet                | ‚úì Passed  | 14 s\nwallet_address_types.py --descriptors                    | ‚úì Passed  | 33 s\nwallet_address_types.py --legacy-wallet                  | ‚úì Passed  | 56 s\nwallet_assumeutxo.py --descriptors                       | ‚úì Passed  | 21 s\nwallet_avoid_mixing_output_types.py --descriptors        | ‚úì Passed  | 8 s\nwallet_avoidreuse.py --descriptors                       | ‚úì Passed  | 84 s\nwallet_avoidreuse.py --legacy-wallet                     | ‚úì Passed  | 379 s\nwallet_backup.py --descriptors                           | ‚úì Passed  | 46 s\nwallet_backup.py --legacy-wallet                         | ‚úì Passed  | 71 s\nwallet_balance.py --descriptors                          | ‚úì Passed  | 15 s\nwallet_balance.py --legacy-wallet                        | ‚úì Passed  | 15 s\nwallet_basic.py --descriptors                            | ‚úì Passed  | 53 s\nwallet_basic.py --legacy-wallet                          | ‚úì Passed  | 59 s\nwallet_blank.py --descriptors                            | ‚úì Passed  | 3 s\nwallet_blank.py --legacy-wallet                          | ‚úì Passed  | 4 s\nwallet_bumpfee.py --descriptors                          | ‚úì Passed  | 66 s\nwallet_bumpfee.py --legacy-wallet                        | ‚úì Passed  | 66 s\nwallet_change_address.py --descriptors                   | ‚úì Passed  | 17 s\nwallet_change_address.py --legacy-wallet                 | ‚úì Passed  | 23 s\nwallet_coinbase_category.py --descriptors                | ‚úì Passed  | 4 s\nwallet_coinbase_category.py --legacy-wallet              | ‚úì Passed  | 4 s\nwallet_conflicts.py --descriptors                        | ‚úì Passed  | 54 s\nwallet_conflicts.py --legacy-wallet                      | ‚úì Passed  | 78 s\nwallet_create_tx.py --descriptors                        | ‚úì Passed  | 22 s\nwallet_create_tx.py --legacy-wallet                      | ‚úì Passed  | 31 s\nwallet_createwallet.py --descriptors                     | ‚úì Passed  | 7 s\nwallet_createwallet.py --legacy-wallet                   | ‚úì Passed  | 6 s\nwallet_createwallet.py --usecli                          | ‚úì Passed  | 15 s\nwallet_createwalletdescriptor.py --descriptors           | ‚úì Passed  | 4 s\nwallet_crosschain.py                                     | ‚úì Passed  | 4 s\nwallet_descriptor.py --descriptors                       | ‚úì Passed  | 46 s\nwallet_disable.py                                        | ‚úì Passed  | 2 s\nwallet_dump.py --legacy-wallet                           | ‚úì Passed  | 43 s\nwallet_encryption.py --descriptors                       | ‚úì Passed  | 10 s\nwallet_encryption.py --legacy-wallet                     | ‚úì Passed  | 9 s\nwallet_fallbackfee.py --descriptors                      | ‚úì Passed  | 6 s\nwallet_fallbackfee.py --legacy-wallet                    | ‚úì Passed  | 4 s\nwallet_fundrawtransaction.py --descriptors               | ‚úì Passed  | 137 s\nwallet_gethdkeys.py --descriptors                        | ‚úì Passed  | 5 s\nwallet_groups.py --descriptors                           | ‚úì Passed  | 37 s\nwallet_groups.py --legacy-wallet                         | ‚úì Passed  | 82 s\nwallet_hd.py --descriptors                               | ‚úì Passed  | 13 s\nwallet_hd.py --legacy-wallet                             | ‚úì Passed  | 20 s\nwallet_implicitsegwit.py --legacy-wallet                 | ‚úì Passed  | 16 s\nwallet_import_rescan.py --legacy-wallet                  | ‚úì Passed  | 147 s\nwallet_import_with_label.py --legacy-wallet              | ‚úì Passed  | 4 s\nwallet_importmulti.py --legacy-wallet                    | ‚úì Passed  | 29 s\nwallet_importprunedfunds.py --descriptors                | ‚úì Passed  | 5 s\nwallet_importprunedfunds.py --legacy-wallet              | ‚úì Passed  | 6 s\nwallet_keypool.py --descriptors                          | ‚úì Passed  | 12 s\nwallet_keypool.py --legacy-wallet                        | ‚úì Passed  | 15 s\nwallet_keypool_topup.py --descriptors                    | ‚úì Passed  | 48 s\nwallet_keypool_topup.py --legacy-wallet                  | ‚úì Passed  | 43 s\nwallet_labels.py --descriptors                           | ‚úì Passed  | 10 s\nwallet_labels.py --legacy-wallet                         | ‚úì Passed  | 16 s\nwallet_listdescriptors.py --descriptors                  | ‚úì Passed  | 4 s\nwallet_listreceivedby.py --descriptors                   | ‚úì Passed  | 12 s\nwallet_listreceivedby.py --legacy-wallet                 | ‚úì Passed  | 10 s\nwallet_listsinceblock.py --descriptors                   | ‚úì Passed  | 17 s\nwallet_listsinceblock.py --legacy-wallet                 | ‚úì Passed  | 17 s\nwallet_listtransactions.py --descriptors                 | ‚úì Passed  | 73 s\nwallet_multisig_descriptor_psbt.py --descriptors         | ‚úì Passed  | 19 s\nwallet_multiwallet.py --descriptors                      | ‚úì Passed  | 29 s\nwallet_multiwallet.py --legacy-wallet                    | ‚úì Passed  | 28 s\nwallet_multiwallet.py --usecli                           | ‚úì Passed  | 55 s\nwallet_orphanedreward.py                                 | ‚úì Passed  | 20 s\nwallet_reindex.py --descriptors                          | ‚úì Passed  | 9 s\nwallet_reindex.py --legacy-wallet                        | ‚úì Passed  | 9 s\nwallet_reorgsrestore.py                                  | ‚úì Passed  | 11 s\nwallet_rescan_unconfirmed.py --descriptors               | ‚úì Passed  | 3 s\nwallet_resendwallettransactions.py --descriptors         | ‚úì Passed  | 4 s\nwallet_resendwallettransactions.py --legacy-wallet       | ‚úì Passed  | 5 s\nwallet_send.py --descriptors                             | ‚úì Passed  | 49 s\nwallet_send.py --legacy-wallet                           | ‚úì Passed  | 87 s\nwallet_sendmany.py --descriptors                         | ‚úì Passed  | 4 s\nwallet_sendmany.py --legacy-wallet                       | ‚úì Passed  | 3 s\nwallet_signer.py --descriptors                           | ‚úì Passed  | 19 s\nwallet_signmessagewithaddress.py                         | ‚úì Passed  | 3 s\nwallet_signrawtransactionwithwallet.py --descriptors     | ‚úì Passed  | 10 s\nwallet_signrawtransactionwithwallet.py --legacy-wallet   | ‚úì Passed  | 6 s\nwallet_simulaterawtx.py --descriptors                    | ‚úì Passed  | 5 s\nwallet_simulaterawtx.py --legacy-wallet                  | ‚úì Passed  | 5 s\nwallet_spend_unconfirmed.py                              | ‚úì Passed  | 12 s\nwallet_startup.py                                        | ‚úì Passed  | 7 s\nwallet_taproot.py --descriptors                          | ‚úì Passed  | 410 s\nwallet_timelock.py                                       | ‚úì Passed  | 3 s\nwallet_transactiontime_rescan.py --descriptors           | ‚úì Passed  | 49 s\nwallet_transactiontime_rescan.py --legacy-wallet         | ‚úì Passed  | 136 s\nwallet_txn_clone.py                                      | ‚úì Passed  | 8 s\nwallet_txn_clone.py --mineblock                          | ‚úì Passed  | 8 s\nwallet_txn_clone.py --segwit                             | ‚úì Passed  | 6 s\nwallet_txn_doublespend.py --descriptors                  | ‚úì Passed  | 7 s\nwallet_txn_doublespend.py --legacy-wallet                | ‚úì Passed  | 8 s\nwallet_txn_doublespend.py --mineblock                    | ‚úì Passed  | 7 s\nwallet_watchonly.py --legacy-wallet                      | ‚úì Passed  | 4 s\nwallet_watchonly.py --usecli --legacy-wallet             | ‚úì Passed  | 9 s\nfeature_bind_port_discover.py                            | ‚óã Skipped | 1 s\nfeature_bind_port_externalip.py                          | ‚óã Skipped | 1 s\nfeature_unsupported_utxo_db.py                           | ‚óã Skipped | 1 s\ninterface_usdt_coinselection.py                          | ‚óã Skipped | 1 s\ninterface_usdt_mempool.py                                | ‚óã Skipped | 2 s\ninterface_usdt_net.py                                    | ‚óã Skipped | 2 s\ninterface_usdt_utxocache.py                              | ‚óã Skipped | 1 s\ninterface_usdt_validation.py                             | ‚óã Skipped | 2 s\nmempool_compatibility.py                                 | ‚óã Skipped | 1 s\nwallet_backwards_compatibility.py --descriptors          | ‚óã Skipped | 1 s\nwallet_backwards_compatibility.py --legacy-wallet        | ‚óã Skipped | 1 s\nwallet_inactive_hdchains.py --legacy-wallet              | ‚óã Skipped | 1 s\nwallet_migration.py                                      | ‚óã Skipped | 1 s\nwallet_upgradewallet.py --legacy-wallet                  | ‚óã Skipped | 1 s\nfeature_bind_extra.py                                    | ‚úñ Failed  | 2 s\ninterface_bitcoin_cli.py --descriptors                   | ‚úñ Failed  | 6 s\ninterface_bitcoin_cli.py --legacy-wallet                 | ‚úñ Failed  | 6 s\nrpc_bind.py --ipv4                                       | ‚úñ Failed  | 2 s\nrpc_bind.py --ipv6                                       | ‚úñ Failed  | 2 s\nrpc_bind.py --nonloopback                                | ‚úñ Failed  | 2 s\nwallet_fast_rescan.py --descriptors                      | ‚úñ Failed  | 69 s\nwallet_fundrawtransaction.py --legacy-wallet             | ‚úñ Failed  | 155 s\nwallet_importdescriptors.py --descriptors                | ‚úñ Failed  | 105 s\nwallet_listtransactions.py --legacy-wallet               | ‚úñ Failed  | 45 s\nwallet_miniscript.py --descriptors                       | ‚úñ Failed  | 116 s\nwallet_sendall.py --descriptors                          | ‚úñ Failed  | 42 s\nwallet_sendall.py --legacy-wallet                        | ‚úñ Failed  | 48 s\n\nALL                                                      | ‚úñ Failed  | 9500 s (accumulated)\nRuntime: 1028 s\n```\n\n### Operating system and version\n\nmacOS 15.3",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-02-06T16:43:47Z",
      "updated_at": "2025-06-13T15:02:53Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/31812",
      "labels": [
        "macOS",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "I suspect this is a macOS issue, because on my local CI system using Linux the s390x task was last reported to have passed on Feb 2nd.",
          "created_at": "2025-02-06T20:44:06Z"
        },
        {
          "user": "l0rinc",
          "body": "I ran it on an `Ubuntu 24.04` Hetzner server as well and basically got the same result (that `0100007f` is not equal to `7f000001`):\n\n```bash\n# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 24.04.1 LTS\nRelease:        24.04\nCodename:       noble\n```\n\n```\n1/3 - rpc_bind.py --ipv4 failed, Duration: 2 s                                                                                                     \n                                                                                                                                                   \nstdout:                                                                                                                                            \n2025-02-10T18:56:42.927000Z TestFramework (INFO): PRNG seed is: 1808665840999458851                                                                \n2025-02-10T18:56:42.938000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_2                     \n2025-02-10T18:56:42.943000Z TestFramework (INFO): Check for ipv6                                                                                   \n2025-02-10T18:56:42.945000Z TestFramework (INFO): Check for non-loopback interface                                                                 \n2025-02-10T18:56:42.949000Z TestFramework (INFO): Bind test for ['127.0.0.1']                                                                      \n2025-02-10T18:56:43.814000Z TestFramework (ERROR): Assertion failed                                                                                \nTraceback (most recent call last):                                                                                                                 \n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main                                                          \n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 99, in run_test\n    self._run_loopback_tests()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 110, in _run_loopback_tests\n    self.run_bind_test(['127.0.0.1'], '127.0.0.1', ['127.0.0.1'],\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 45, in run_bind_test\n    assert_equal(set(get_bind_addrs(pid)), set(expected))\n  File \"/mnt/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not({('0100007f', 16024)} == {('7f000001', 16024)})\n2025-02-10T18:56:43.879000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-02-10T18:56:43.880000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_2\n2025-02-10T18:56:43.880000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_2/test_fra\nmework.log\n2025-02-10T18:56:43.881000Z TestFramework (ERROR): \n2025-02-10T18:56:43.882000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250210_185638/r\npc_bind_2' to consolidate all logs\n2025-02-10T18:56:43.883000Z TestFramework (ERROR): \n2025-02-10T18:56:43.883000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or\n upload of the combined log.\n2025-02-10T18:56:43.883000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-02-10T18:56:43.884000Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\n2/3 - rpc_bind.py --nonloopback failed, Duration: 2 s                                                                                              \n                                                                                                                                                   \nstdout:\n2025-02-10T18:56:42.950000Z TestFramework (INFO): PRNG seed is: 9124635531833716420\n2025-02-10T18:56:42.962000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_0\n2025-02-10T18:56:42.967000Z TestFramework (INFO): Check for ipv6\n2025-02-10T18:56:42.969000Z TestFramework (INFO): Check for non-loopback interface\n2025-02-10T18:56:42.973000Z TestFramework (INFO): Using interface 172.17.0.2 for testing\n2025-02-10T18:56:42.973000Z TestFramework (INFO): Bind test for ['172.17.0.2']\n2025-02-10T18:56:43.828000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 105, in run_test\n    self._run_nonloopback_tests()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 136, in _run_nonloopback_tests\n    self.run_bind_test([self.non_loopback_ip], self.non_loopback_ip, [self.non_loopback_ip],\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 45, in run_bind_test\n    assert_equal(set(get_bind_addrs(pid)), set(expected))\n  File \"/mnt/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not({('020011ac', 16000)} == {('ac110002', 16000)})\n2025-02-10T18:56:43.893000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-02-10T18:56:43.894000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_0\n2025-02-10T18:56:43.894000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_0/test_fra\nmework.log\n2025-02-10T18:56:43.895000Z TestFramework (ERROR): \n2025-02-10T18:56:43.897000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250210_185638/r\npc_bind_0' to consolidate all logs\n2025-02-10T18:56:43.897000Z TestFramework (ERROR): \n2025-02-10T18:56:43.897000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or\n upload of the combined log.\n2025-02-10T18:56:43.898000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-02-10T18:56:43.898000Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\nRemaining jobs: [rpc_bind.py --ipv6]                                                                                                               \n3/3 - rpc_bind.py --ipv6 failed, Duration: 3 s                                                                                                     \n                                                                                                                                                   \nstdout:                                                                                                                                            \n2025-02-10T18:56:42.927000Z TestFramework (INFO): PRNG seed is: 1670193901987373299                                                                \n2025-02-10T18:56:42.938000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_1                     \n2025-02-10T18:56:42.943000Z TestFramework (INFO): Check for ipv6                                                                                   \n2025-02-10T18:56:42.945000Z TestFramework (INFO): Check for non-loopback interface                                                                 \n2025-02-10T18:56:42.949000Z TestFramework (INFO): Bind test for []                                                                                 \n2025-02-10T18:56:43.820000Z TestFramework (ERROR): Assertion failed                                                                                \nTraceback (most recent call last):                                                                                                                 \n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main                                                          \n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 99, in run_test\n    self._run_loopback_tests()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 120, in _run_loopback_tests\n    self.run_bind_test(None, '127.0.0.1', [],\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/rpc_bind.py\", line 45, in run_bind_test\n    assert_equal(set(get_bind_addrs(pid)), set(expected))\n  File \"/mnt/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not({('0100007f', 16012)} == {('00000000000000000000000000000001', 16012), ('7f000001', 16012)})\n2025-02-10T18:56:43.885000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-02-10T18:56:43.885000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_1\n2025-02-10T18:56:43.886000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_1/test_framework.log\n2025-02-10T18:56:43.887000Z TestFramework (ERROR): \n2025-02-10T18:56:43.888000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250210_185638/rpc_bind_1' to consolidate all logs\n2025-02-10T18:56:43.888000Z TestFramework (ERROR): \n2025-02-10T18:56:43.889000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-02-10T18:56:43.889000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-02-10T18:56:43.890000Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\n\nTEST                      | STATUS    | DURATION\n\nrpc_bind.py --ipv4        | ‚úñ Failed  | 2 s\nrpc_bind.py --ipv6        | ‚úñ Failed  | 3 s\nrpc_bind.py --nonloopback | ‚úñ Failed  | 2 s\n\nALL                       | ‚úñ Failed  | 7 s (accumulated) \nRuntime: 3 s\n```",
          "created_at": "2025-02-10T19:01:10Z"
        },
        {
          "user": "maflcko",
          "body": "Ah, I see you are manually running the tests. I thought you were running the s390x ci task.\n\nIn the task, the rpc_bind test is excluded:\n\nhttps://github.com/bitcoin/bitcoin/blob/79f02d56ef78c22caff39713d660cabf54d452ac/ci/test/00_setup_env_s390x.sh#L14\n\nThe comment links to https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\n\nSo the exclusion back then may have been due to a permission error on aarch64 or s390x, looking at the discussion. Also, the qemu wrapping back then was done on bitcoind only (similar to the valgrind wrapping), but today the wrapping is taken care of by the container engine. Albeit, the valgrind exclusion seems to exist as well, still:\n\nhttps://github.com/bitcoin/bitcoin/blob/79f02d56ef78c22caff39713d660cabf54d452ac/ci/test/00_setup_env_native_valgrind.sh#L14\n\nMoreover, the unrelated `--ipv6` issue remains as well (unchanged).\n\nFinally, on macOS, you report `wallet_sendall.py --descriptors                          | ‚úñ Failed  | 42 s`. This seems to be unrelated to networking?",
          "created_at": "2025-02-11T08:25:50Z"
        },
        {
          "user": "l0rinc",
          "body": "I reran the whole thing, the failures on Mac are:\n```bash\nfeature_bind_extra.py                                                | ‚úñ Failed  | 1 s\ninterface_bitcoin_cli.py --descriptors                               | ‚úñ Failed  | 3 s\ninterface_bitcoin_cli.py --legacy-wallet                             | ‚úñ Failed  | 3 s\nrpc_bind.py --ipv4                                                   | ‚úñ Failed  | 1 s\nrpc_bind.py --ipv6                                                   | ‚úñ Failed  | 1 s\nrpc_bind.py --nonloopback                                            | ‚úñ Failed  | 1 s\nwallet_importdescriptors.py --descriptors                            | ‚úñ Failed  | 72 s\nwallet_miniscript.py --descriptors                                   | ‚úñ Failed  | 104 s\n```\n\n`wallet_sendall.py` was passing this time.\n\n`rpc_bind` and `feature_bind_extra` fail with the mentioned endian differences:\n<details>\n<summary>Details</summary>\n\n```bash\n87/318 - feature_bind_extra.py failed, Duration: 1 s\n\nstdout:\n2025-03-04T18:12:12.808000Z TestFramework (INFO): PRNG seed is: 3039912222751199635\n2025-03-04T18:12:12.814000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250304_180603/feature_bind_extra_223\n2025-03-04T18:12:13.412000Z TestFramework (INFO): Checking listening ports of node 0 with ['-bind=127.0.0.1:13679=onion']\n2025-03-04T18:12:13.429000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/feature_bind_extra.py\", line 88, in run_test\n    assert_equal(binds, set(expected_services))\n  File \"/mnt/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not({('0100007f', 13679)} == {('7f000001', 13679)})\n2025-03-04T18:12:13.489000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-03-04T18:12:13.489000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250304_180603/feature_bind_extra_223\n2025-03-04T18:12:13.489000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250304_180603/feature_bind_extra_223/test_framework.log\n2025-03-04T18:12:13.490000Z TestFramework (ERROR):\n2025-03-04T18:12:13.490000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250304_180603/feature_bind_extra_223' to consolidate all logs\n2025-03-04T18:12:13.490000Z TestFramework (ERROR):\n2025-03-04T18:12:13.491000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-03-04T18:12:13.491000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-03-04T18:12:13.491000Z TestFramework (ERROR):\n\n\nstderr:\n[node 2] Cleaning up leftover process\n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n```\n\n</details>\n\nthe `interface_bitcoin_cli` tests are likely also related to the IPv6 big-endian failures:\n<details>\n<summary>Details</summary>\n\n```bash\nroot@40fcec3d6cdf:/mnt/bitcoin# build_dev_mode/test/functional/test_runner.py \"interface_bitcoin_cli.py --descriptors\" \"interface_bitcoin_cli.py --legacy-wallet\"\nTemporary test directory at /tmp/test_runner_‚Çø_üèÉ_20250304_185252\nRemaining jobs: [interface_bitcoin_cli.py --descriptors, interface_bitcoin_cli.py --legacy-wallet]\n1/2 - interface_bitcoin_cli.py --descriptors failed, Duration: 3 s\n\nstdout:\n2025-03-04T18:52:54.902000Z TestFramework (INFO): PRNG seed is: 4498386837476113083\n2025-03-04T18:52:54.908000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_1\n2025-03-04T18:52:55.726000Z TestFramework (INFO): Compare responses from getblockchaininfo RPC and `bitcoin-cli getblockchaininfo`\n2025-03-04T18:52:55.779000Z TestFramework (INFO): Test named arguments\n2025-03-04T18:52:55.924000Z TestFramework (INFO): Test that later cli named arguments values silently overwrite earlier ones\n2025-03-04T18:52:56.019000Z TestFramework (INFO): Test -stdinrpcpass option\n2025-03-04T18:52:56.374000Z TestFramework (INFO): Test -stdin and -stdinrpcpass\n2025-03-04T18:52:56.730000Z TestFramework (INFO): Test connecting to a non-existing server\n2025-03-04T18:52:56.776000Z TestFramework (INFO): Test handling of invalid ports in rpcconnect\n2025-03-04T18:52:56.929000Z TestFramework (INFO): Checking for IPv6\n2025-03-04T18:52:57.082000Z TestFramework (INFO): Test handling of invalid ports in rpcport\n2025-03-04T18:52:57.232000Z TestFramework (INFO): Test port usage preferences\n2025-03-04T18:52:57.412000Z TestFramework (ERROR): Called Process failed with 'Warning: Port specified in both -rpcconnect and -rpcport. Using -rpcport 16012\nerror: timeout on transient error: Could not connect to the server ::1:16012\n\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\nUse \"bitcoin-cli -help\" for more info.\n'\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/interface_bitcoin_cli.py\", line 152, in run_test\n    assert_equal(BLOCKS, self.nodes[0].cli(\"-rpcconnect=[::1]:18999\", f'-rpcport={node_rpc_port}').getblockcount())\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 849, in __call__\n    return self.cli.send_cli(self.command, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 914, in send_cli\n    raise subprocess.CalledProcessError(returncode, self.binary, output=cli_stderr)\nsubprocess.CalledProcessError: Command '/mnt/bitcoin/build_dev_mode/src/bitcoin-cli' returned non-zero exit status 1.\n2025-03-04T18:52:57.475000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-03-04T18:52:57.475000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_1\n2025-03-04T18:52:57.475000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_1/test_framework.log\n2025-03-04T18:52:57.476000Z TestFramework (ERROR): \n2025-03-04T18:52:57.476000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_1' to consolidate all logs\n2025-03-04T18:52:57.477000Z TestFramework (ERROR): \n2025-03-04T18:52:57.477000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-03-04T18:52:57.477000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-03-04T18:52:57.477000Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\nRemaining jobs: [interface_bitcoin_cli.py --legacy-wallet]\n2/2 - interface_bitcoin_cli.py --legacy-wallet failed, Duration: 4 s\n\nstdout:\n2025-03-04T18:52:54.905000Z TestFramework (INFO): PRNG seed is: 8805266175087139086\n2025-03-04T18:52:54.912000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_0\n2025-03-04T18:52:55.780000Z TestFramework (INFO): Compare responses from getblockchaininfo RPC and `bitcoin-cli getblockchaininfo`\n2025-03-04T18:52:55.835000Z TestFramework (INFO): Test named arguments\n2025-03-04T18:52:55.978000Z TestFramework (INFO): Test that later cli named arguments values silently overwrite earlier ones\n2025-03-04T18:52:56.072000Z TestFramework (INFO): Test -stdinrpcpass option\n2025-03-04T18:52:56.417000Z TestFramework (INFO): Test -stdin and -stdinrpcpass\n2025-03-04T18:52:56.766000Z TestFramework (INFO): Test connecting to a non-existing server\n2025-03-04T18:52:56.811000Z TestFramework (INFO): Test handling of invalid ports in rpcconnect\n2025-03-04T18:52:56.964000Z TestFramework (INFO): Checking for IPv6\n2025-03-04T18:52:57.118000Z TestFramework (INFO): Test handling of invalid ports in rpcport\n2025-03-04T18:52:57.270000Z TestFramework (INFO): Test port usage preferences\n2025-03-04T18:52:57.452000Z TestFramework (ERROR): Called Process failed with 'Warning: Port specified in both -rpcconnect and -rpcport. Using -rpcport 16000\nerror: timeout on transient error: Could not connect to the server ::1:16000\n\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\nUse \"bitcoin-cli -help\" for more info.\n'\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/interface_bitcoin_cli.py\", line 152, in run_test\n    assert_equal(BLOCKS, self.nodes[0].cli(\"-rpcconnect=[::1]:18999\", f'-rpcport={node_rpc_port}').getblockcount())\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 849, in __call__\n    return self.cli.send_cli(self.command, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 914, in send_cli\n    raise subprocess.CalledProcessError(returncode, self.binary, output=cli_stderr)\nsubprocess.CalledProcessError: Command '/mnt/bitcoin/build_dev_mode/src/bitcoin-cli' returned non-zero exit status 1.\n2025-03-04T18:52:57.514000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-03-04T18:52:57.515000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_0\n2025-03-04T18:52:57.515000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_0/test_framework.log\n2025-03-04T18:52:57.516000Z TestFramework (ERROR): \n2025-03-04T18:52:57.516000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250304_185252/interface_bitcoin_cli_0' to consolidate all logs\n2025-03-04T18:52:57.516000Z TestFramework (ERROR): \n2025-03-04T18:52:57.516000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-03-04T18:52:57.517000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-03-04T18:52:57.517000Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n\n\nTEST                                     | STATUS    | DURATION\n\ninterface_bitcoin_cli.py --descriptors   | ‚úñ Failed  | 3 s\ninterface_bitcoin_cli.py --legacy-wallet | ‚úñ Failed  | 4 s\n\nALL                                      | ‚úñ Failed  | 7 s (accumulated) \nRuntime: 4 s\n```\n\n</details>\n\n\nWhile `wallet_importdescriptors` seem to be timing out:\n<details>\n<summary>Details</summary>\n\n```bash\nbuild_dev_mode/test/functional/test_runner.py \"wallet_importdescriptors.py --descriptors\"\n\n2025-03-04T19:04:22.466000Z TestFramework (INFO): PRNG seed is: 1967788660642355360\n2025-03-04T19:04:22.467000Z TestFramework (DEBUG): Setting up network thread\n2025-03-04T19:04:22.472000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0\n2025-03-04T19:04:22.481000Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up\n2025-03-04T19:04:22.485000Z TestFramework.node1 (DEBUG): bitcoind started, waiting for RPC to come up\n2025-03-04T19:04:23.020000Z TestFramework.node0 (DEBUG): RPC successfully started\n2025-03-04T19:04:23.036000Z TestFramework.node1 (DEBUG): RPC successfully started\n2025-03-04T19:04:23.135000Z TestFramework (INFO): Setting up wallets\n2025-03-04T19:04:23.317000Z TestFramework (INFO): Mining coins\n2025-03-04T19:04:24.839000Z TestFramework (INFO): Import should fail if a descriptor is not provided\n2025-03-04T19:04:24.868000Z TestFramework (INFO): Should import a p2pkh descriptor\n2025-03-04T19:04:24.895000Z TestFramework (INFO): Test can import same descriptor with public key twice\n2025-03-04T19:04:24.907000Z TestFramework (INFO): Test can update descriptor label\n2025-03-04T19:04:24.920000Z TestFramework (INFO): Internal addresses cannot have labels\n2025-03-04T19:04:24.922000Z TestFramework (INFO): Internal addresses should be detected as such\n2025-03-04T19:04:24.986000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor without checksum\n2025-03-04T19:04:24.989000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor that has range specified\n2025-03-04T19:04:24.993000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor and have it set to active\n2025-03-04T19:04:24.995000Z TestFramework (INFO): Should import a (non-active) p2sh-p2wpkh descriptor\n2025-03-04T19:04:25.087000Z TestFramework (INFO): Should import a 1-of-2 bare multisig from descriptor\n2025-03-04T19:04:25.103000Z TestFramework (INFO): Should not treat individual keys from the imported bare multisig as watchonly\n2025-03-04T19:04:25.105000Z TestFramework (INFO): Ranged descriptors cannot have labels\n2025-03-04T19:04:25.109000Z TestFramework (INFO): Private keys required for private keys enabled wallet\n2025-03-04T19:04:25.116000Z TestFramework (INFO): Ranged descriptor import should warn without a specified range\n2025-03-04T19:04:25.140000Z TestFramework (INFO): Should not import a ranged descriptor that includes xpriv into a watch-only wallet\n2025-03-04T19:04:25.144000Z TestFramework (INFO): Should not import a descriptor with hardened derivations when private keys are disabled\n2025-03-04T19:04:25.169000Z TestFramework (INFO): Verify we can only extend descriptor's range\n2025-03-04T19:04:25.451000Z TestFramework (INFO): Check we can change descriptor internal flag\n2025-03-04T19:04:25.632000Z TestFramework (INFO): Key ranges should be imported in order\n2025-03-04T19:04:25.816000Z TestFramework (INFO): Check we can change next_index\n2025-03-04T19:04:25.952000Z TestFramework (INFO): Check imported descriptors are not active by default\n2025-03-04T19:04:25.973000Z TestFramework (INFO): Check can activate inactive descriptor\n2025-03-04T19:04:25.998000Z TestFramework (INFO): Check can deactivate active descriptor\n2025-03-04T19:04:26.020000Z TestFramework (INFO): Verify activation state is persistent\n2025-03-04T19:04:26.089000Z TestFramework (INFO): Should import a descriptor with a WIF private key as spendable\n2025-03-04T19:04:26.104000Z TestFramework (INFO): Test can import same descriptor with private key twice\n2025-03-04T19:04:27.258000Z TestFramework (INFO): Test that multisigs can be imported, signed for, and getnewaddress'd\n2025-03-04T19:04:33.073000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\n2025-03-04T19:04:40.275000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\n2025-03-04T19:04:47.396000Z TestFramework (INFO): Multisig with distributed keys\n2025-03-04T19:05:00.035000Z TestFramework (INFO): We can create and use a huge multisig under P2WSH\n2025-03-04T19:05:44.856000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\n2025-03-04T19:05:45.096000Z TestFramework (INFO): Under P2SH, multisig are standard with up to 15 compressed keys\n2025-03-04T19:06:18.502000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\n2025-03-04T19:06:19.764000Z TestFramework (INFO): Amending multisig with new private keys\n2025-03-04T19:06:26.270000Z TestFramework (INFO): Combo descriptors cannot be active\n2025-03-04T19:06:26.274000Z TestFramework (INFO): Descriptors with no type cannot be active\n2025-03-04T19:06:26.297000Z TestFramework (INFO): Test importing a descriptor to an encrypted wallet\n2025-03-04T19:06:56.664000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/wallet_importdescriptors.py\", line 692, in run_test\n    with self.nodes[0].assert_debug_log(expected_msgs=[\"Rescan started from block 0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206... (slow variant inspecting all blocks)\"], timeout=10):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/contextlib.py\", line 144, in __exit__\n    next(self.gen)\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 519, in assert_debug_log\n    self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 198, in _raise_assertion_error\n    raise AssertionError(self._node_msg(msg))\nAssertionError: [node 0] Expected messages \"['Rescan started from block 0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206... (slow variant inspecting all blocks)']\" does not partially match log:\n\n - 2025-03-04T19:06:37.823007Z [http] [httpserver.cpp:305] [http_request_cb] [http] Received a POST request for /wallet/encrypted_wallet from 127.0.0.1:34374\n - 2025-03-04T19:06:37.823296Z [httpworker.13] [rpc/request.cpp:241] [parse] [rpc] ThreadRPCServer method=importdescriptors user=__cookie__\n - 2025-03-04T19:06:37.830911Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: INSERT INTO main VALUES(?, ?)\n - 2025-03-04T19:06:37.831192Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: DELETE FROM main WHERE key = ?\n - 2025-03-04T19:06:37.831465Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: BEGIN TRANSACTION\n - 2025-03-04T19:06:37.838855Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?)\n - 2025-03-04T19:06:37.847305Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?)\n[...]\n - 2025-03-04T19:06:47.827776Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?)\n - 2025-03-04T19:06:47.830586Z [httpworker.13] [wallet/sqlite.cpp:55] [TraceSqlCallback] [walletdb:trace] [/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/node0/regtest/wallets/encrypted_wallet/wallet.dat] SQLite Statement: INSERT or REPLACE into main values(?, ?)\n\n\n2025-03-04T19:06:56.757000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-03-04T19:06:56.758000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0\n2025-03-04T19:06:56.758000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0/test_framework.log\n2025-03-04T19:06:56.758000Z TestFramework (ERROR): \n2025-03-04T19:06:56.759000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250304_190421/wallet_importdescriptors_0' to consolidate all logs\n2025-03-04T19:06:56.759000Z TestFramework (ERROR): \n2025-03-04T19:06:56.759000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-03-04T19:06:56.759000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-03-04T19:06:56.759000Z TestFramework (ERROR): \n\n\nstderr:\n[node 1] Cleaning up leftover process\n[node 0] Cleaning up leftover process\n\n\n\nTEST                                      | STATUS    | DURATION\n\nwallet_importdescriptors.py --descriptors | ‚úñ Failed  | 154 s\n\nALL                                       | ‚úñ Failed  | 154 s (accumulated) \nRuntime: 154 s\n```\n\n</details>\n\nbut increasing the timeout to `... (slow variant inspecting all blocks)\"], timeout=100):` made it pass again.\n\n\nAnd lastly `build_dev_mode/test/functional/test_runner.py \"wallet_miniscript.py --descriptors\"` seems to time out for an RPC call that I couldn't find the timeout value for:\n<details>\n<summary>Details</summary>\n\n```bash\n2025-03-04T19:32:28.629000Z TestFramework (INFO): Generating an address for it and testing it detects funds\n2025-03-04T19:36:41.460000Z TestFramework (ERROR): JSONRPC error\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/authproxy.py\", line 164, in *get*response\n    http_response = self.__conn.getresponse()\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/http/client.py\", line 1428, in getresponse\n    response.begin()\n  File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\n    version, status, reason = self._read_status()\n                              ^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/http/client.py\", line 292, in *read*status\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/socket.py\", line 720, in readinto\n    return self._sock.recv_into(b)\n           ^^^^^^^^^^^^^^^^^^^^^^^\nTimeoutError: timed out\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/wallet_miniscript.py\", line 386, in run_test\n    self.signing_test(desc, None, None, 1, 3, None)\n  File \"/mnt/bitcoin/build_dev_mode/test/functional/wallet_miniscript.py\", line 277, in signing_test\n    utxo = self.ms_sig_wallet.listunspent(addresses=[addr])[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/coverage.py\", line 50, in **call**\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/authproxy.py\", line 127, in **call**\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/authproxy.py\", line 106, in _request\n    return self._get_response()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/authproxy.py\", line 166, in *get*response\n    raise JSONRPCException({\ntest_framework.authproxy.JSONRPCException: 'listunspent' RPC took longer than 150.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\n2025-03-04T19:36:41.531000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-03-04T19:36:41.531000Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_‚Çø_üèÉ_20250304_193008/wallet_miniscript_0\n2025-03-04T19:36:41.531000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_‚Çø_üèÉ_20250304_193008/wallet_miniscript_0/test_framework.log\n2025-03-04T19:36:41.532000Z TestFramework (ERROR): \n2025-03-04T19:36:41.532000Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/test_runner_‚Çø_üèÉ_20250304_193008/wallet_miniscript_0' to consolidate all logs\n2025-03-04T19:36:41.533000Z TestFramework (ERROR): \n2025-03-04T19:36:41.533000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-03-04T19:36:41.533000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-03-04T19:36:41.533000Z TestFramework (ERROR): \nstderr:\n[node 0] Cleaning up leftover process\nTEST                               | STATUS    | DURATION\nwallet_miniscript.py --descriptors | ‚úñ Failed  | 393 s\nALL                                | ‚úñ Failed  | 393 s (accumulated) \nRuntime: 393 s\n```\n\n</details>\n",
          "created_at": "2025-03-04T19:57:33Z"
        },
        {
          "user": "maflcko",
          "body": "> I couldn't find the timeout value for:\n\nThe test framework has a timeout factor. You can simply increase it to avoid having to manually adjust each timeout. See `./bld-cmake/test/functional/test_runner.py --help | grep factor`",
          "created_at": "2025-05-06T09:12:52Z"
        },
        {
          "user": "maflcko",
          "body": "> the `interface_bitcoin_cli` tests are likely also related to the IPv6 big-endian failures:\n\nWhat are the exact steps to reproduce? Ideally, starting from a fresh install? I guess it happens on macOS and on the Hetzner box equally?",
          "created_at": "2025-05-06T09:17:36Z"
        },
        {
          "user": "maflcko",
          "body": "> > the `interface_bitcoin_cli` tests are likely also related to the IPv6 big-endian failures:\n> \n> What are the exact steps to reproduce? Ideally, starting from a fresh install? I guess it happens on macOS and on the Hetzner box equally?\n\ncc @l0rinc ",
          "created_at": "2025-06-04T14:48:51Z"
        },
        {
          "user": "l0rinc",
          "body": "I reran to verify (only on Mac, my Hetzner boxes are busy):\n```bash\ndocker run --platform linux/s390x -it ubuntu:latest /bin/bash\n```\nand inside I did something like:\n```bash\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install -y git build-essential cmake ccache pkg-config libevent-dev libboost-dev libzmq3-dev systemtap-sdt-dev qtbase5-dev qttools5-dev qttools5-dev-tools libqrencode-dev libsqlite3-dev python3 && \\\ncd /mnt && git clone --depth=1 https://github.com/bitcoin/bitcoin.git && cd bitcoin && \\\ncmake -B build && cmake --build build -j$(nproc) && \\\n./build/test/functional/interface_bitcoin_cli.py\n```\nwhich fails with:\n```bash\n2025-06-12T11:55:02.197829Z TestFramework (INFO): PRNG seed is: 4129686365544516907\n2025-06-12T11:55:02.203966Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_b8u6pbls\n2025-06-12T11:55:02.987327Z TestFramework (INFO): Compare responses from getblockchaininfo RPC and `bitcoin-cli getblockchaininfo`\n2025-06-12T11:55:03.036137Z TestFramework (INFO): Test named arguments\n2025-06-12T11:55:03.164192Z TestFramework (INFO): Test that later cli named arguments values silently overwrite earlier ones\n2025-06-12T11:55:03.250554Z TestFramework (INFO): Test -stdinrpcpass option\n2025-06-12T11:55:03.605082Z TestFramework (INFO): Test -stdin and -stdinrpcpass\n2025-06-12T11:55:03.979192Z TestFramework (INFO): Test connecting to a non-existing server\n2025-06-12T11:55:04.038435Z TestFramework (INFO): Test handling of invalid ports in rpcconnect\n2025-06-12T11:55:04.175171Z TestFramework (INFO): Checking for IPv6\n2025-06-12T11:55:04.312470Z TestFramework (INFO): Test handling of invalid ports in rpcport\n2025-06-12T11:55:04.442041Z TestFramework (INFO): Test port usage preferences\n2025-06-12T11:55:04.605616Z TestFramework (ERROR): Called Process failed with 'Warning: Port specified in both -rpcconnect and -rpcport. Using -rpcport 19468\nerror: timeout on transient error: Could not connect to the server ::1:19468\n\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\nUse \"bitcoin-cli -help\" for more info.\n'\nTraceback (most recent call last):\n  File \"/mnt/bitcoin/test/functional/test_framework/test_framework.py\", line 190, in main\n    self.run_test()\n  File \"/mnt/bitcoin/./build/test/functional/interface_bitcoin_cli.py\", line 150, in run_test\n    assert_equal(BLOCKS, self.nodes[0].cli(\"-rpcconnect=[::1]:18999\", f'-rpcport={node_rpc_port}').getblockcount())\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 871, in __call__\n    return self.cli.send_cli(self.command, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/bitcoin/test/functional/test_framework/test_node.py\", line 936, in send_cli\n    raise subprocess.CalledProcessError(returncode, p_args, output=cli_stderr)\nsubprocess.CalledProcessError: Command '['/mnt/bitcoin/build/bin/bitcoin-cli', '-nonamed', '-datadir=/tmp/bitcoin_func_test_b8u6pbls/node0', '-rpcconnect=[::1]:18999', '-rpcport=19468', 'getblockcount']' returned non-zero exit status 1.\n2025-06-12T11:55:04.668694Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-06-12T11:55:04.669258Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_b8u6pbls\n2025-06-12T11:55:04.669534Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_b8u6pbls/test_framework.log\n2025-06-12T11:55:04.670146Z TestFramework (ERROR): \n2025-06-12T11:55:04.670967Z TestFramework (ERROR): Hint: Call /mnt/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_b8u6pbls' to consolidate all logs\n2025-06-12T11:55:04.671213Z TestFramework (ERROR): \n2025-06-12T11:55:04.671425Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-06-12T11:55:04.671722Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-06-12T11:55:04.671943Z TestFramework (ERROR): \n[node 0] Cleaning up leftover process\n```\n\nedit:\n```bash\n ./build/test/functional/test_runner.py -j$(nproc)\n```\nproduces:\n```bash\n...\nwallet_txn_doublespend.py                              | ‚úì Passed  | 6 s                                                                                                                          \nwallet_txn_doublespend.py --mineblock                  | ‚úì Passed  | 7 s                                                                                                                          \nfeature_bind_port_discover.py                          | ‚óã Skipped | 1 s                                                                                                                          \nfeature_bind_port_externalip.py                        | ‚óã Skipped | 1 s\nfeature_unsupported_utxo_db.py                         | ‚óã Skipped | 1 s\ninterface_usdt_coinselection.py                        | ‚óã Skipped | 1 s\ninterface_usdt_mempool.py                              | ‚óã Skipped | 1 s\ninterface_usdt_net.py                                  | ‚óã Skipped | 1 s\ninterface_usdt_utxocache.py                            | ‚óã Skipped | 1 s\ninterface_usdt_validation.py                           | ‚óã Skipped | 1 s\ninterface_zmq.py                                       | ‚óã Skipped | 1 s\nmempool_compatibility.py                               | ‚óã Skipped | 1 s\ntool_bitcoin_chainstate.py                             | ‚óã Skipped | 1 s\nwallet_backwards_compatibility.py                      | ‚óã Skipped | 1 s\nwallet_migration.py                                    | ‚óã Skipped | 1 s\nfeature_bind_extra.py                                  | ‚úñ Failed  | 2 s\ninterface_bitcoin_cli.py                               | ‚úñ Failed  | 5 s                                                                                                                          \nrpc_bind.py --ipv4                                     | ‚úñ Failed  | 2 s                                                                                                                          \nrpc_bind.py --ipv6                                     | ‚úñ Failed  | 1 s                                                                                                                          \nrpc_bind.py --nonloopback                              | ‚úñ Failed  | 1 s                                                                                                                          \nwallet_importdescriptors.py                            | ‚úñ Failed  | 85 s                                                                                                                         \nwallet_miniscript.py                                   | ‚úñ Failed  | 106 s                                                                                                                        \n                                                                                                                                                                                                  \nALL                                                    | ‚úñ Failed  | 5621 s (accumulated)  ",
          "created_at": "2025-06-12T11:58:30Z"
        },
        {
          "user": "maflcko",
          "body": "> docker run --platform linux/s390x -it ubuntu:latest /bin/bash\n> \n> \n>     \n>   \n> \n> and inside I did something like:\n> \n> export DEBIAN_FRONTEND=noninteractive && apt update && apt install -y git build-essential cmake ccache pkg-config libevent-dev libboost-dev libzmq3-dev systemtap-sdt-dev qtbase5-dev qttools5-dev qttools5-dev-tools libqrencode-dev libsqlite3-dev python3 \\\n> cd /mnt && git clone --depth=1 https://github.com/bitcoin/bitcoin.git && cd bitcoin && \\\n> cmake -B build && cmake --build build -j$(nproc) && \\\n> ./build/test/functional/interface_bitcoin_cli.py\n> \n> \n>     \n>   \n> \n> which fails with:\n\nThanks. I just spun up a fresh Hetzner VM and installed podman-docker. Running the exact same commands passes for me:\n\n\n```\n...\n2025-06-12T14:03:58.781252Z TestFramework (INFO): Tests successful\nroot@27fb5a951403:/bitcoin# history \n    1  export DEBIAN_FRONTEND=noninteractive && apt update && apt install -y git build-essential cmake ccache pkg-config libevent-dev libboost-dev libzmq3-dev systemtap-sdt-dev qtbase5-dev qttools5-dev qttools5-dev-tools libqrencode-dev libsqlite3-dev python3 && git clone --depth=1 https://github.com/bitcoin/bitcoin.git && cd bitcoin &&  cmake -B build && cmake --build build -j$(nproc) && ./build/test/functional/interface_bitcoin_cli.py \n    2  history \n",
          "created_at": "2025-06-12T14:07:57Z"
        },
        {
          "user": "l0rinc",
          "body": "So it does look like an incomplete virtualization in Docker of the underlying network adapter - or something similar I guess.\nIs there anything we should do here (comment the code, open an issue anywhere)? If not, please close it.",
          "created_at": "2025-06-12T14:29:12Z"
        },
        {
          "user": "maflcko",
          "body": "It would be nice to exactly find the issue and fix it, but I won't be working on this for now üòÖ ",
          "created_at": "2025-06-12T14:38:25Z"
        },
        {
          "user": "fanquake",
          "body": "> Running the exact same commands passes for me:\n\nI ran the same commands, on a macOS machine, using podman, and it also worked fine.",
          "created_at": "2025-06-12T16:02:58Z"
        },
        {
          "user": "l0rinc",
          "body": "I reran the whole thing, updated everything, including Docker Desktop to the latest version released a week ago, having the promising change `Expanded network compatibility with IPv6 support` - https://docs.docker.com/desktop/release-notes/#4420\n\nUnfortunately it didn't help, the build is still failing. The logs state:\n>   node0 2025-06-13T14:28:30.318821Z [init] [httpserver.cpp:241] [InitHTTPAllowList] [http] Allowing HTTP connections from: 127.0.0.0/8 ::1/128 \n node0 2025-06-13T14:28:30.320386Z [init] [httpserver.cpp:394] [HTTPBindAddresses] Binding RPC on address ::1 port 19754 \n node0 2025-06-13T14:28:30.320979Z [init] [httpserver.cpp:440] [libevent_log_cb] [libevent:warning] getaddrinfo: address family for nodename not supported \n node0 2025-06-13T14:28:30.321081Z [init] [httpserver.cpp:409] [HTTPBindAddresses] Binding RPC on address ::1 port 19754 failed. \n node0 2025-06-13T14:28:30.321104Z [init] [httpserver.cpp:394] [HTTPBindAddresses] Binding RPC on address 127.0.0.1 port 19754 \n\nManually disabling ipv6 via `have_ipv6 = False # test_ipv6_local()` makes the test pass for me.\n\n@fanquake, can you please post your logs? Does it contain `Skipping IPv6 tests`?",
          "created_at": "2025-06-13T15:02:53Z"
        }
      ]
    },
    {
      "number": 31808,
      "title": "nSequence is not set when spending from satisfiable descriptor with relative timelock",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhile experimenting with miniscript expressions on regtest (on commit [a43f08c4ae](https://github.com/bitcoin/bitcoin/commits/a43f08c4ae3235f2fa460dd17a7f5f9f9842efd9/)) with the cli, I imported a descriptor with the `older` fragment:\n`wsh(and_v(v:older(2),pk(tprv8ZgxMBicQKsPe5EVQ3cw3S1GdWyKxTeVvgVujejwFgJYGPucrUyPhsR2Zd4ngq3QSfB4HehpXqSPtwdoV7b8JYunU2kPai1AWUUxvb5gkrf/84h/1h/0h/1/*)))#tcaf9v8u`\n\nAfter sending money to an address made from this descriptor using `sendtoaddress` with an amount, I received the error message:\n```\nerror code: -6\nerror message:\nSigning transaction failed\n```\n\nAfter stepping through the code in debug mode I found it was failing on [the following line within `CheckSequence`](https://github.com/bitcoin/bitcoin/blob/a43f08c4ae3235f2fa460dd17a7f5f9f9842efd9/src/script/interpreter.cpp#L1742):\n`const int64_t txToSequence = (int64_t)txTo->vin[nIn].nSequence;`\n\nThis is because the nSequence on the input isn't being set according to the value specified in `older`. \n\nThe easy workaround to this is to use `createrawtransaction` and manually set nSequence\n\n### Expected behaviour\n\nThe expected behavior is a transaction is made with the descriptor-locked input. I'm split between labeling this as a bug or feature request, but chose to file as a bug because the wallet has everything it needs to spend the input. Please reclassify this as a feature request if you do find it fits better with that label.\n\n### Steps to reproduce\n\n- Create a new wallet\n- Import the descriptor and derive an address:\n```\nexport desc=\"wsh(and_v(v:older(2),pk(tprv8ZgxMBicQKsPe5EVQ3cw3S1GdWyKxTeVvgVujejwFgJYGPucrUyPhsR2Zd4ngq3QSfB4HehpXqSPtwdoV7b8JYunU2kPai1AWUUxvb5gkrf/84h/1h/0h/1/*)))#tcaf9v8u\"\nexport descriptors=\"[{\\\"desc\\\":\\\"$desc\\\",\\\"timestamp\\\":\\\"now\\\"}]\"\nb importdescriptors $descriptors\nb deriveaddresses $desc \"[1,1]\"\n```\n- Send money to the generated address from another wallet\n- Generate 3 blocks\n-  Switch back to the wallet with the above descriptor and try to send funds out\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@a43f08c4ae\n\n### Operating system and version\n\nUbuntu\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "Randy808",
      "created_at": "2025-02-06T00:36:29Z",
      "updated_at": "2025-03-20T20:35:02Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/31808",
      "labels": [
        "Wallet",
        "TX fees and policy",
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "sipa",
          "body": "We discussed this a bit off-line.\n\nThere are a number of issues here, and the simple ones can be solved in specialized cases, but the general problem is really a sign of a deeper issue.\n\nThe superficial problems are at least these, which stem from the specific order decisions are made: (1) coin selection, (2) transaction building, (3) input signing.\n* Coin selection may be picking coins which are not (yet) spendable (assuming the intent is to spend right now, and not something to be presigned and broadcast later).\n* Fees may be too wrong because a different spending path is expected to be used at coin selection time then the one actually signed for (which has a different weight), see also https://github.com/bitcoin/bitcoin/pull/26573.\n* Transaction building may be setting nLockTime / nSequence values which aren't actually compatible with what we can sign for.\n\nIn the \"simple\" case, where the signing keys are part of the wallet doing coin selection and transaction building itself, this is in theory solvable (for the locktime/sequence part at least a default could be provided based on the selected coins, but it may still need to be overridden for transactions intended to be broadcast later). I do wonder how common these cases are, though; I expect that most situations that involve multiple branches, locktimes, ... also involve multiple parties. Can you elaborate on your use case?\n\nThe more fundamental issue, I think, is that the descriptors-centric structuring of the wallet isn't well-equiped to reason about \"which keys/spending paths/... will be available at signing time\". It offers a way to derive a set of scriptPubKeys to watch (\"we may have access to a group of participants/wallets which together can spend these coins, but unsure how\") and a way to actually sign after coin-selection and transaction building is already complete.\n\nBut in the general case, one would need a way to provide additional information, in the wallet, or at transaction building time, about which signers/keys one expects the be available. With that information, coin selection can avoid coins which aren't spendable by those parties, locktimes/sequences can be set appropriately for those coins, and fee estimation can be done more correctly. This feels like something [wallet policies](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki) are more appropriate for, which are not implemented in Bitcoin Core.",
          "created_at": "2025-02-06T16:32:28Z"
        },
        {
          "user": "darosior",
          "body": ">  I have searched the existing issues\n\nHmm https://github.com/bitcoin/bitcoin/issues/27527. :)\n\n> Transaction building may be setting nLockTime / nSequence values which aren't actually compatible with what we can sign for.\n\nTo add to this, the coin selection algorithm right now may even be selecting coins that are incompatible with each other: https://github.com/bitcoin/bitcoin/issues/27526.",
          "created_at": "2025-02-06T17:06:43Z"
        },
        {
          "user": "Randy808",
          "body": "@sipa My original usecase was a decaying multisig using `thresh` like your \"A 3-of-3 that turns into a 2-of-3 after 90 days\" example on https://bitcoin.sipa.be/miniscript/ except I was doing a 2-of-2 that turned into a 1-of-2. In this case my wallet would have one of the private keys available at the time of spending with the `older` clause met. Also, to re-iterate, I can still spend the utxo if I construct the transaction using `createrawtransaction`, `signrawtransactionwithwallet`, and `sendrawtransaction` given I set a compatible `sequence` value for the input in `createrawtransaction`.\n\n@darosior For the record, https://github.com/bitcoin/bitcoin/issues/27527 title scopes it to coin selection while this problem falls into the 3rd point \"Transaction building may be setting nLockTime / nSequence values which aren't actually compatible with what we can sign for.\" The wallet I'm using is full of spendable utxos and the amounts associated with my attempted spend could be satisfied by any one of them.  ",
          "created_at": "2025-02-06T21:25:39Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 5,
    "issues": 2
  }
}