{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:38:22.526776+00:00",
  "date": "2025-12-09",
  "pull_requests": [
    {
      "number": 34036,
      "title": "contrib: update macOS SDK to Xcode-26.1.1-17B100",
      "body": "Would close #34034.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-12-09T16:45:55Z",
      "updated_at": "2026-01-15T14:35:05Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34036",
      "labels": [
        "Scripts and tools",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34036.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theuni](https://github.com/bitcoin/bitcoin/pull/34036#issuecomment-3751106918) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-09T16:46:06Z"
        },
        {
          "user": "maflcko",
          "body": "Forgot to bump the CI, according to the touched files of the last bump: `git show 8ea45e626e5a0482ee11d4376f961d8126ce7c7b --stat`?",
          "created_at": "2025-12-09T16:52:52Z"
        },
        {
          "user": "fanquake",
          "body": "Yea. However no point until the SDK is uploaded, and no point doing that until we've got determinism.",
          "created_at": "2025-12-09T16:54:20Z"
        },
        {
          "user": "theuni",
          "body": "Concept ACK.",
          "created_at": "2026-01-14T18:55:33Z"
        },
        {
          "user": "fanquake",
          "body": "The new tarball should become available some time today.",
          "created_at": "2026-01-15T14:35:04Z"
        }
      ]
    },
    {
      "number": 34033,
      "title": "scripted-diff: Unify error and warning log formatting",
      "body": "Errors and warnings should normally not happen. However, if they do happen, it is easier to spot them, if they are all logged in the same format via `LogError` or `LogWarning`.\r\n\r\nSo do that with a scripted-diff.\r\n\r\nThis is a minimal behavior change and unifies the log output from:\r\n\r\n    [net:error] Something bad happened\r\n    [net:warning] Something problematic happened\r\n\r\nto either\r\n\r\n    [error] Something bad happened\r\n    [warning] Something problematic happened\r\n\r\nor, when `-loglevelalways=1` is enabled:\r\n\r\n    [all:error] Something bad happened\r\n    [all:warning] Something problematic happened\r\n\r\nSuch a behavior change is desired, because all warning and error logs are written in the same style in the source code and they are logged in the same format for log consumers.\r\n\r\nRemoving the category should be harmless, because warning and error messages should be descriptive and unique anyway.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-09T09:55:54Z",
      "updated_at": "2025-12-11T19:09:59Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34033",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34033.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34033#pullrequestreview-3557189288), [rkrux](https://github.com/bitcoin/bitcoin/pull/34033#pullrequestreview-3558829150), [ajtowns](https://github.com/bitcoin/bitcoin/pull/34033#issuecomment-3634805723) |\n| Concept ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/34033#pullrequestreview-3559297971) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32061](https://github.com/bitcoin/bitcoin/pull/32061) (Replace libevent with our own HTTP and socket-handling implementation by pinheadmz)\n* [#30116](https://github.com/bitcoin/bitcoin/pull/30116) (p2p: Fill reconciliation sets (Erlay) attempt 2 by sr-gi)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-09T09:56:31Z"
        },
        {
          "user": "maflcko",
          "body": "thx, for the suggestion. I want to focus only on error/warning logs here. I can pick up other logs in a follow-up, once and if there is one.",
          "created_at": "2025-12-09T13:50:47Z"
        },
        {
          "user": "ajtowns",
          "body": "ACK fa89f60e31d18b6c17d372f1cec26a4440e3d8b3\r\n\r\nThis is doing Debug in the first commit (which has no behaviour change), and Warning and Error in the second, but missing a couple of cases of Info in i2p.cpp and mapport.cpp. I'm assuming that's intentional.",
          "created_at": "2025-12-10T00:11:00Z"
        },
        {
          "user": "maflcko",
          "body": "> something like https://github.com/stickies-v/bitcoin/commits/2025-12/separate-log-print-level/ seems worth doing. As a bonus, it prevents issues such as in #34008 where debug logs can lead to unconditional logs being ratelimited.\r\n\r\nThx, created a pull request with your bugfix commits in https://github.com/bitcoin/bitcoin/pull/34051",
          "created_at": "2025-12-11T19:09:48Z"
        }
      ]
    },
    {
      "number": 34032,
      "title": "util: Add some more Unexpected and Expected methods",
      "body": "Reviewers requested more member functions In https://github.com/bitcoin/bitcoin/pull/34006.\r\n\r\nThey are currently unused, but bring the port closer to the original `std::expected` implementation:\r\n\r\n* Make `Expected::value()` throw when no value exists\r\n* Add `Unexpected::error()` methods\r\n* Add `Expected<void, E>` specialization\r\n* Add `Expected::value()&&` and `Expected::error()&&` methods\r\n* Add `Expected::swap()`\r\n\r\nAlso, include a tiny tidy fixup:\r\n\r\n* tidy: Set `AllowCastToVoid` in the `bugprone-unused-return-value` check",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-09T08:01:34Z",
      "updated_at": "2026-01-15T19:44:46Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34032",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34032.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3666214871) |\n| Stale ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3626015857), [hodlinator](https://github.com/bitcoin/bitcoin/pull/34032#pullrequestreview-3631380557) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34264](https://github.com/bitcoin/bitcoin/pull/34264) (fuzz: Extend `spend` coverage by Chand-ra)\n* [#34208](https://github.com/bitcoin/bitcoin/pull/34208) (bench: add fluent API for untimed `setup` steps in nanobench by l0rinc)\n* [#33689](https://github.com/bitcoin/bitcoin/pull/33689) (http: replace WorkQueue and single threads handling for ThreadPool by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-09T08:01:41Z"
        },
        {
          "user": "maflcko",
          "body": "> I'd probably replace `std::variant<std::monostate, E>` with `std::optional<E>` but both seem reasonable.\r\n\r\nI kept the variant, because it is more consistent and shows that the `error()` methods are just 1:1 copy-pasted between both templates.",
          "created_at": "2025-12-09T14:00:08Z"
        },
        {
          "user": "maflcko",
          "body": "pushed a commit, so that the two compile and behave identically:\r\n\r\n```cpp\r\n    const auto moved{*std::move(no_copy)};\r\n    const auto moved{std::move(*no_copy)};\r\n```\r\n\r\nSorry for missing it earlier, but I think now all `&&` methods are implemented completely and correctly.",
          "created_at": "2025-12-09T16:38:26Z"
        },
        {
          "user": "maflcko",
          "body": "Force pushed something. Should be trivial to re-review, because nothing changed:\r\n\r\n```\r\n$ git diff faebb16547 faa59b3679 | wc -l\r\n0\r\n",
          "created_at": "2026-01-15T15:17:04Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 34035,
      "title": "qa: Assertion in `p2p_v2_misbehaving.py`",
      "body": "From the CI [log](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20051004575/job/57506810574) in OmniOS CI job:\n```\n\n169/281 - p2p_v2_misbehaving.py failed, Duration: 40 s\n\nstdout:\n2025-12-09T04:30:26.705442Z TestFramework (INFO): PRNG seed is: 8231439354065845951\n2025-12-09T04:30:26.706779Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_‚Çø_üèÉ_20251209_041712/p2p_v2_misbehaving_132\n2025-12-09T04:30:27.106102Z TestFramework (INFO): Sending ellswift bytes in parts to ensure that response from responder is received only when\n2025-12-09T04:30:27.106393Z TestFramework (INFO): ellswift bytes have a mismatch from the 16 bytes(network magic followed by \"version\\x00\\x00\\x00\\x00\\x00\")\n2025-12-09T04:30:27.107282Z TestFramework (INFO): Sending first 4 bytes of ellswift which match network magic\n2025-12-09T04:30:27.107449Z TestFramework (INFO): If a response is received, assertion failure would happen in our custom data_received() function\n2025-12-09T04:30:27.162726Z TestFramework (INFO): Sending remaining ellswift and garbage which are different from V1_PREFIX. Since a response is\n2025-12-09T04:30:27.163083Z TestFramework (INFO): expected now, our custom data_received() function wouldn't result in assertion failure\n2025-12-09T04:30:27.218285Z TestFramework (INFO): successful disconnection since modified ellswift was sent as response\n2025-12-09T04:31:07.237755Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 142, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_v2_misbehaving.py\", line 134, in run_test\n    self.test_v2disconnection()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/p2p_v2_misbehaving.py\", line 177, in test_v2disconnection\n    with node0.assert_debug_log(expected_debug_message[test_type.value], timeout=5):\n         ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 148, in __exit__\n    next(self.gen)\n    ~~~~^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 576, in assert_debug_log\n    self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 229, in _raise_assertion_error\n    raise AssertionError(self._node_msg(msg))\nAssertionError: [node 0] Expected messages \"['V2 transport error: missing garbage terminator, peer=1']\" does not partially match log:\n\n - 2025-12-09T04:30:27.219068Z (mocktime: 2025-12-09T04:30:31Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.219261Z (mocktime: 2025-12-09T04:30:31Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=setmocktime user=__cookie__\n - 2025-12-09T04:30:27.224046Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:3858] [CNode::CNode(NodeId, std::shared_ptr<Sock>, const CAddress&, uint64_t, uint64_t, const CService&, const std::string&, ConnectionType, bool, uint64_t, CNodeOptions&&)] [net] Added connection peer=1\n - 2025-12-09T04:30:27.224092Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1860] [void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&&, NetPermissionFlags, const CService&, const CService&)] [net] connection from 127.0.0.1:44555 accepted\n - 2025-12-09T04:30:27.225456Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:3858] [CNode::CNode(NodeId, std::shared_ptr<Sock>, const CAddress&, uint64_t, uint64_t, const CService&, const std::string&, ConnectionType, bool, uint64_t, CNodeOptions&&)] [net] Added connection peer=2\n - 2025-12-09T04:30:27.225490Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1860] [void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&&, NetPermissionFlags, const CService&, const CService&)] [net] connection from 127.0.0.1:44830 accepted\n - 2025-12-09T04:30:27.290527Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:1191] [bool V2Transport::ProcessReceivedGarbageBytes()] [net] V2 transport error: missing garbage terminator, peer=2\n - 2025-12-09T04:30:27.290568Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:2183] [void CConnman::SocketHandlerConnected(const std::vector<CNode*>&, const Sock::EventsPerSock&)] [net] receiving message bytes failed, disconnecting peer=2\n - 2025-12-09T04:30:27.290582Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: version (111 bytes) peer=1\n - 2025-12-09T04:30:27.290635Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending version (114 bytes) peer=1\n - 2025-12-09T04:30:27.290746Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:1542] [void {anonymous}::PeerManagerImpl::PushNodeVersion(CNode&, const {anonymous}::Peer&)] [net] send version message: version 70016, blocks=200, txrelay=1, peer=1\n - 2025-12-09T04:30:27.290770Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending wtxidrelay (0 bytes) peer=1\n - 2025-12-09T04:30:27.290791Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending sendaddrv2 (0 bytes) peer=1\n - 2025-12-09T04:30:27.291319Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending verack (0 bytes) peer=1\n - 2025-12-09T04:30:27.291363Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3623] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] receive version message: /python-p2p-tester:0.0.3/: version 70016, blocks=-1, us=127.0.0.1:12584, txrelay=1, peer=1\n - 2025-12-09T04:30:27.292113Z (mocktime: 2025-12-09T04:30:27Z) [net] [net.cpp:560] [void CNode::CloseSocketDisconnect()] [net] Resetting socket for peer=2\n - 2025-12-09T04:30:27.292174Z (mocktime: 2025-12-09T04:30:27Z) [net] [net_processing.cpp:1660] [virtual void {anonymous}::PeerManagerImpl::FinalizeNode(const CNode&)] [net] Cleared nodestate for peer=2\n - 2025-12-09T04:30:27.296338Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: wtxidrelay (0 bytes) peer=1\n - 2025-12-09T04:30:27.296374Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: verack (0 bytes) peer=1\n - 2025-12-09T04:30:27.296395Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3666] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] New inbound v2 peer connected: version: 70016, blocks=-1, peer=1\n - 2025-12-09T04:30:27.296418Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending sendcmpct (9 bytes) peer=1\n - 2025-12-09T04:30:27.296450Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.296524Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending getheaders (645 bytes) peer=1\n - 2025-12-09T04:30:27.296558Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:5550] [virtual bool {anonymous}::PeerManagerImpl::SendMessages(CNode*)] [net] initial getheaders (199) to peer=1 (startheight:-1)\n - 2025-12-09T04:30:27.296586Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending feefilter (8 bytes) peer=1\n - 2025-12-09T04:30:27.296615Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: getaddr (0 bytes) peer=1\n - 2025-12-09T04:30:27.296674Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [addrman.cpp:849] [std::vector<CAddress> AddrManImpl::GetAddr_(size_t, size_t, std::optional<Network>, bool) const] [addrman] GetAddr returned 0 random addresses\n - 2025-12-09T04:30:27.301877Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.329896Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.329925Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.329985Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net_processing.cpp:3426] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=1\n - 2025-12-09T04:30:27.330004Z (mocktime: 2025-12-09T04:30:27Z) [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=1\n - 2025-12-09T04:30:27.380276Z (mocktime: 2025-12-09T04:30:27Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.380464Z (mocktime: 2025-12-09T04:30:27Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=getpeerinfo user=__cookie__\n - 2025-12-09T04:30:27.381597Z (mocktime: 2025-12-09T04:30:27Z) [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:36185\n - 2025-12-09T04:30:27.381776Z (mocktime: 2025-12-09T04:30:27Z) [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=setmocktime user=__cookie__\n\n\n2025-12-09T04:31:07.294475Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-12-09T04:31:07.294652Z TestFramework (WARNING): Not cleaning up dir /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_‚Çø_üèÉ_20251209_041712/p2p_v2_misbehaving_132\n2025-12-09T04:31:07.294764Z TestFramework (ERROR): Test failed. Test logging available at /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_‚Çø_üèÉ_20251209_041712/p2p_v2_misbehaving_132/test_framework.log\n2025-12-09T04:31:07.295209Z TestFramework (ERROR): \n2025-12-09T04:31:07.295373Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_‚Çø_üèÉ_20251209_041712/p2p_v2_misbehaving_132' to consolidate all logs\n2025-12-09T04:31:07.295454Z TestFramework (ERROR): \n2025-12-09T04:31:07.295511Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2025-12-09T04:31:07.295791Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2025-12-09T04:31:07.295864Z TestFramework (ERROR): \n\n\nstderr:\n[node 0] Cleaning up leftover process\n\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-09T11:50:12Z",
      "updated_at": "2025-12-16T13:55:59Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34035",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "mzumsande",
          "body": "In the failed run the peer that the test framework connects second is seen by the node as the first peer, so that the log message `V2 transport error: missing garbage terminator` is logged for `peer=2` and not `peer=1` as the test expects.\nFYI @stratospher ",
          "created_at": "2025-12-09T16:42:14Z"
        },
        {
          "user": "stratospher",
          "body": "ok looks like python event loop asynchronous behaviour.\n- it's scheduling connection to `peer1` and then scheduling a connection to `peer2`\n- but it is actually connecting to `peer2` first (which gets assigned peer id = 1 on c++ side) and only later connecting to the peer we're interested in `peer1` (which gets assigned peer id = 2 on c++ side) and we're seeing a log mismatch\n\nideally, we let the event loop do whatever it wants and then use the actual peer id in `expected_debug_message` - as in we check for `V2 transport error: missing garbage terminator, peer={}` instead of `V2 transport error: missing garbage terminator, peer=1`. but it would require more invasive changes in the test framework code since peer id is assigned on the C++ side.\n\ni think simplest solution is just removing the hard-coded peer id from the debug message - as in just checking `V2 transport error: missing garbage terminator` instead of `V2 transport error: missing garbage terminator, peer=1`. since we're checking that `peer2` in the functional test remains connected, disconnection should come from  the peer (`peer1`) which we're expecting to disconnect.\n\nwill open a fix.",
          "created_at": "2025-12-12T10:01:05Z"
        }
      ]
    },
    {
      "number": 34034,
      "title": "build: Bump macOS SDK for release builds?",
      "body": "Currently, the macOS SDK Xcode version is set to 15.0 in the guix release builds.\n\nMy understanding is that it should be harmless to bump. Though, it involves a bit of effort to check for determinism. C.f. https://github.com/bitcoin/bitcoin/pull/32009\n\nSo I wonder if it seems appropriate to bump the SDK to the latest version for the next 31.x release, or if it should wait for the 32.x release?\n\nThe main visible benefit would be that `lexicographical_compare_three_way` will be available. C.f. https://github.com/bitcoin/bitcoin/pull/33772#issuecomment-3481100244, and also cc @l0rinc .",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-09T10:24:22Z",
      "updated_at": "2025-12-30T04:03:45Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34034",
      "labels": [
        "Brainstorming",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "Sjors",
          "body": "I'll take #34036 for a spin.",
          "created_at": "2025-12-30T04:03:45Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 3,
    "issues": 2
  }
}