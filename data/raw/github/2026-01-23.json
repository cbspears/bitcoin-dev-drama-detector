{
  "source": "github",
  "repo": "bitcoin/bitcoin",
  "fetched_at": "2026-01-23T01:15:57.816530+00:00",
  "date_range": {
    "since": "2026-01-16T01:15:57.816475+00:00",
    "until": "2026-01-23T01:15:57.816475+00:00"
  },
  "pull_requests": [
    {
      "id": 2170572223,
      "number": 31260,
      "title": "scripted-diff: Type-safe settings retrieval",
      "body": "This PR changes the way settings are registered and retrieved to provide more compile-time safety. Currently settings are [registered](https://github.com/ryanofsky/bitcoin/blob/03cff2c1421e5db59963eba1a845ef5dd318c275/src/init.cpp#L504) and [retrieved](https://github.com/ryanofsky/bitcoin/blob/03cff2c1421e5db59963eba1a845ef5dd318c275/src/init.cpp#L173) like:\n\n```c++\n// Register setting\nargsman.AddArg(\"-pid=<file>\", strprintf(\"Specify pid file. Relative paths will be prefixed by a net-specific datadir location. (default: %s)\", BITCOIN_PID_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n\n// Retrieve setting\nargs.GetPathArg(\"-pid\", BITCOIN_PID_FILENAME)\n```\n\nBut this is not ideal because nothing checks that setting names are spelled correctly, or that default values (`BITCOIN_PID_FILENAME`) are used consistently in the help string and retrieval sites, or that settings are retrieved with consistent types (bool, int, string, path, or list). This PR addresses these issues by adding setting [declarations](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init_settings.h#L267-L270) which allow settings to be [registered](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init.cpp#L484) and [retrieved](https://github.com/ryanofsky/bitcoin/blob/416860fc360b3d5aa1a0782ab8f8454b46e6d657/src/init.cpp#L164C38-L164C59) like:\n\n```c++\n// Declare setting\nusing PidSetting = common::Setting<\n    \"-pid=<file>\", fs::path, {.legacy = true},\n    \"Specify pid file. Relative paths will be prefixed by a net-specific datadir location. (default: %s)\">\n    ::DefaultFn<[] { return BITCOIN_PID_FILENAME; }>;\n\n// Register setting\nPidSetting::Register(argsman);\n\n// Retrieve setting\nPidSetting::Get(args)\n```\n\n---\n\n#### Suggestions for review\n\nAll the real changes in this PR are in the last scripted-diff commit:\n\n- [scripted-diff: Replace AddArgs / GetArgs calls with Setting Register / Get calls](https://github.com/bitcoin/bitcoin/pull/31260/commits/fc2591a35b0640adc0df686b0f8bed5f50ada9ce)\n\nIf you take a few minutes to look at the changes applied in this scripted-diff commit, you'll understand everything this PR is doing. A good place to start looking around in this commit is the generated [`src/init_settings.h`](https://github.com/ryanofsky/bitcoin/blob/pr/scripty/src/init_settings.h) file which declares the settings that get registered in [src/init.cpp](https://github.com/ryanofsky/bitcoin/blob/pr/scripty/src/init.cpp). Then you can look at the surrounding diffs and see they are just replacing `AddArg` and `GetArg` calls.\n\nThe other notable commit is second commit, which implements the `Setting` class:\n\n- [common: Add Setting class to support typed Settings](https://github.com/bitcoin/bitcoin/pull/31260/commits/e1f016180746db0eebc2c2e1e0786f0cc5da8a43)\n\nThe other commits do minor things like moving code or updating linters. The python script that implements the scripted diff is a temporary artifact that gets deleted. The python script is complicated because it does things like parsing c++ code to extract help strings, and figuring out the right types to declare settings with so code compiles. But the entire scope of the script is to (1) generate Setting type definitions, (2) add #includes, and (3) replace `AddArg()` calls with `Register()` calls and `GetArg()` calls with `Get()` calls. So there is not much the script can actually do wrong without triggering build and test failures.\n\n---\n\n#### Extensions\n\nThis PR only adds the ability to declare individual settings with built-in types. It doesn't provide any new runtime behavior, but a branch in issue #22978 extends the `Setting` class implemented here to support runtime setting validation, additional types like `std::variant`, additional conversion options, custom types, custom validation, and groups of settings declared as options structs.\n\nThis change is mostly orthogonal to #16545. #16545 only provides runtime type checking while this PR only provides compile-time checking with no new runtime behavior. But this change does allow a nicer way of declaring types in #16545, using c++ types like `int` instead of flags like `ALLOW_INT`, or`std::vector<std::string>` instead of `ALLOW_STRING | ALLOW_LIST`.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-11-08T22:34:46Z",
      "updated_at": "2026-01-23T01:05:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31260",
      "labels": [
        "Refactoring",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 4326,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2946400797,
      "number": 33701,
      "title": "test: add case where `TOTAL_TRIES` is exceeded yet solution remains",
      "body": "Show that `CoinGrider` halts searching when the number of attempts exceeds `TOTAL_TRIES`.  To do so, show that a solution is found, then add one more entry to the same set of inputs.  Since the search orders by `effective_value`, the solution is constructed such that only values with the lowest `effective_value` have the least weight.  Only the lowest weight values will not exceed the `max_selection_weight`. Therefore, `CoinGrinder` will not evaluate all lowest weight solutions together before exceeding `TOTAL_TRIES` since they are last found.\r\n\r\nThis test case was inspired by a similar test for `BnB` currently named `bnb_test`.",
      "state": "open",
      "user": "yancyribbens",
      "created_at": "2025-10-25T00:30:30Z",
      "updated_at": "2026-01-23T00:45:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33701",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1940576733,
      "number": 30342,
      "title": "kernel, logging: Pass Logger instances to kernel objects",
      "body": "Pass `Logger` instances to `BlockManager`, `CCoinsViewDB`, `CDBWrapper`, `Chainstate`, `ChainstateManager`, `CoinsViews`, and `CTxMemPool` classes so libbitcoinkernel applications and tests have the option to control where log output goes instead of having all output sent to the global logger.\n\nThis PR is an alternative to #30338. It is more limited because it only changes kernel code while leaving other parts of the codebase alone. It also takes the opportunity to migrate legacy LogPrint / LogPrintf calls to the new log macros introduced in #28318.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256 + #33847.** The non-base commits are:\n\n- [`4050e4667f6` refactor: Pass Logger instances to kernel objects](https://github.com/bitcoin/bitcoin/pull/30342/commits/4050e4667f63f7eb7d903f1e0179f167d790ae95)\n- [`b7952dc9bcc` refactor: Log kernel output to local log instances](https://github.com/bitcoin/bitcoin/pull/30342/commits/b7952dc9bccd86e594bc88690386b5807e3d461a)\n- [`3fd9bec3be5` refactor: Pass Logger instance to CTxMemPool](https://github.com/bitcoin/bitcoin/pull/30342/commits/3fd9bec3be5819ed1b130c632c8a693b5b7b0938)\n- [`75e1e958f5e` kernel: Drop global Logger instance](https://github.com/bitcoin/bitcoin/pull/30342/commits/75e1e958f5e8a27491723aa88c69bf3cd8de7509)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:52:24Z",
      "updated_at": "2026-01-23T00:34:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30342",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1357,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2138649533,
      "number": 31132,
      "title": "validation: fetch block inputs on parallel threads 3x faster IBD",
      "body": "_Parts of this PR are isolated in independent smaller PRs to ease review:_\r\n\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34164_\r\n* [ ] _https://github.com/bitcoin/bitcoin/pull/34165_\r\n\r\n---\r\n\r\nThis PR parallelizes fetching all input prevouts of a block during block connection, achieving over 3x faster IBD performance in some scenarios[^1][^2][^3][^4][^5].\r\n\r\n### Problem\r\n\r\nCurrently, when fetching inputs in `ConnectBlock`, each input is fetched from the cache sequentially. A cache miss requires a round trip to the disk database to fetch the outpoint and insert it into the cache. Since the database is read-only during `ConnectBlock`, we can fetch all inputs of a block in parallel on multiple threads while connecting.\r\n\r\n### Solution\r\n\r\nWe introduce a new `CoinsViewCacheAsync` `CCoinsViewCache` subclass that manages worker threads to fetch block inputs in parallel. The block is passed to the `CoinsViewCacheAsync` view before entering `ConnectBlock`, which kicks off the worker threads to begin fetching the inputs. The view is then passed to `ConnectBlock` since it provides the same API as `CCoinsViewCache`. The cache returns fetched coins as they become available via the overridden `FetchCoin` method. If not available yet, the main thread also fetches coins as it waits.\r\n\r\n### Implementation Details\r\n\r\nThe `CoinsViewCacheAsync` implements a lock-free MPSC (Multiple Producer, Single Consumer) queue design:\r\n\r\n- **Work Distribution**: Collects all input prevouts into a queue and uses a barrier to start all worker threads simultaneously\r\n- **Synchronization**: Worker threads use an atomic counter to claim which inputs to fetch, and each input has an atomic flag to signal completion to the main thread\r\n- **Main Thread Processing**: The main thread waits for inputs in order and moves their `Coin` into the `cacheCoins` map as they become available.\r\n- **Work Stealing**: If the main thread catches up to the workers, it assists with fetching to maximize parallelism\r\n- **Completion**: All threads synchronize on a barrier via a `Reset` method, which ensures all threads are parked before proceeding\r\n\r\n### Safety and Correctness\r\n\r\n- The `CoinsViewCacheAsync` works on a block that has not been fully validated, but it does not interfere or modify any of the validation during `ConnectBlock`\r\n- It simply fetches inputs in parallel, which must be fetched before a transaction is validated anyways\r\n- **Invalid blocks**: If an invalid block is mined, the temporary cache is reset without being flushed. This is an improvement over the current behavior, where existing inputs are inserted into the main `CoinsTip()` cache when pulled through for an invalid block\r\n\r\n### Performance\r\n\r\nBenchmarks show over 3x faster IBD performance in a cloud environment with network connected storage[^1], 3x faster IBD for an M4 Mac and up to 46% faster with directly connected storage[^2][^3][^4][^5]. The parallelization of expensive disk lookups provides significant speedup.\r\n\r\n[Flamegraphs show how the execution is changed](https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3617315125).\r\n\r\n### Credits\r\n\r\nInspired by [this comment](https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638553680).\r\n\r\nResolves https://github.com/bitcoin/bitcoin/issues/34121.\r\n\r\n[^1]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806\r\n[^2]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3515011880\r\n[^3]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3463894000\r\n[^4]: https://github.com/bitcoin/bitcoin/pull/31132#pullrequestreview-3347436866\r\n[^5]: https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3488760623",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2024-10-22T14:40:28Z",
      "updated_at": "2026-01-23T00:32:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31132",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3751,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2997112498,
      "number": 33847,
      "title": "kernel: Improve logging API",
      "body": "Simplify kernel logging API and try to connect it to the rest of the kernel API by letting log options be set on `Logger` objects directly and `Logger` objects to be associated with `Context` objects directly. Also drop `logging_disable()` function and avoid having library accumulate log messages in a 1MB buffer by default.\r\n\r\nChanges are intended to make the API a little less surprising and more future proof. Rationale is described in some more detail the commit message.\r\n\r\nThis change is not backwards compatible but I'd expect it to port over pretty smoothly to the language bindings, and offer the same benefits for them as for C/C++ callers.\r\n\r\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-11-10T23:30:46Z",
      "updated_at": "2026-01-23T00:30:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33847",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 683,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3201053750,
      "number": 34383,
      "title": "ci: compile remaining untested ancestor commits",
      "body": "### Problem\r\n\r\nOther CI jobs fully test only the most recent 7 commits, so failures in older commits might be missed.\r\nThis new CI job compiles the remaining older untested commits, without running any tests.\r\n\r\n### Fix\r\n\r\nThis job is a simplified version of `test-each-commit` and `ci-test-each-commit-exec.py`, without the max-count limit and without running tests.\r\n\r\n### Example\r\n\r\nExample failure 10 commits deep: https://github.com/l0rinc/bitcoin/actions/runs/21264144306/job/61198917527?pr=105\r\nExample pass with >7 commits: https://github.com/l0rinc/bitcoin/actions/runs/21265449642/job/61203379647?pr=106\r\n\r\n<details>\r\n<summary>Note</summary>\r\n\r\nThe failure above was generated with a few extra dummy commits, see: https://github.com/l0rinc/bitcoin/pull/105/commits\r\nWe also copied the per-commit compile helper to `/tmp` because older commits in the rebase range do not contain it.\r\n\r\n</details>\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-22T21:38:21Z",
      "updated_at": "2026-01-23T00:16:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34383",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 955,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187784182,
      "number": 34341,
      "title": "wallet: only log `txid` when `-debug=wallet` is explicit",
      "body": "Extracted from: https://github.com/bitcoin/bitcoin/pull/34267#discussion_r2693741105\r\n\r\n### Problem\r\n\r\nAll wallet logging was written to `debug.log` by default, so it can leak sensitive wallet context (`txids` and full transaction strings) when shared.\r\nAlso, `WalletLogPrintf` is a leftover name from the removed `LogPrintf` API and does not reflect the current behavior (unconditional info-level logging).\r\n\r\n### Fix\r\n\r\nAfter a refactor commit to rename `WalletLogPrintf` to `WalletLogInfo` (`scripted-diff` only) to reflect that it logs unconditionally at info level, redact txids and full transaction strings from info-level wallet logs, and add a new `-debug=wallet` category for sensitive context (txid/full tx string) logged as indented follow-up lines via the new `WalletLogDebug()`.\r\n\r\n### Reproducer\r\n\r\nWe can easily exercises the common create wallet, mine, and send paths to demonstrate the info-level redaction vs `-debug=wallet` behavior.\r\nIt does not attempt to trigger rare error paths (e.g. database write failures, unexpected script types, conflicts/double-spends, broadcast failures, rescans/migrations), which would require additional setup and can be deduced from the code.\r\n\r\nBuild and run this once \"before\" and once \"after\", then compare grepped log output.\r\n\r\n```bash\r\ncmake -B build >/dev/null 2>&1 && cmake --build build --target bitcoind bitcoin-cli -j$(nproc) >/dev/null 2>&1\r\n\r\nDATA_DIR=$(mktemp -d)\r\n\r\n./build/bin/bitcoind -regtest -datadir=\"$DATA_DIR\" -daemon -connect=0 -fallbackfee=0.0002 >/dev/null 2>&1\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwait getblockchaininfo >/dev/null\r\n\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" createwallet w0 >/dev/null\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" createwallet w1 >/dev/null\r\nADDR0=$(./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwallet=w0 getnewaddress)\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwallet=w0 generatetoaddress 101 \"$ADDR0\" >/dev/null\r\nADDR1=$(./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwallet=w1 getnewaddress)\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwallet=w0 sendtoaddress \"$ADDR1\" 1 >/dev/null\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwallet=w1 -rpcwait getbalances >/dev/null\r\n\r\nrg -n \"CommitTransaction|AddToWallet|Submitting wtx|txid=|CTransaction\\\\(\" \"$DATA_DIR/regtest/debug.log\" || true\r\n\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" stop >/dev/null\r\n```\r\n\r\n<details>\r\n<summary>Before (info-level wallet logs include txids and transaction dump)</summary>\r\n\r\n```bash\r\n113:2026-01-19T12:51:04Z [w0] AddToWallet d9a81836a9a2e8158ca6aa49278b70305a07614df420d980abe2028366407731  new Confirmed (block=24fd805ca35464a95530674f8434c3af34111409e5e3477ae4ba4b46f085baac, height=1, index=0)\r\n...\r\n411:2026-01-19T12:51:05Z [w0] AddToWallet 3d72f6d5f6829a070b0d9766a672b158b6a1fd87bea0f6959ab0ec4b44ebb7ef  new Confirmed (block=2e937f886897ccd9345fc859ebedde9be981a831aa55786286dae69b21a36007, height=101, index=0)\r\n417:2026-01-19T12:51:05Z [w0] CommitTransaction:\r\n418:CTransaction(hash=14daa63ec9, ver=2, vin.size=1, vout.size=2, nLockTime=3)\r\n423:2026-01-19T12:51:05Z [w0] AddToWallet 14daa63ec9de552d7260ab2cd3e993ba41cd1eadc2e525eec8e017b26ebd5a4c  newupdate Inactive (abandoned=0)\r\n424:2026-01-19T12:51:05Z [w0] Submitting wtx 14daa63ec9de552d7260ab2cd3e993ba41cd1eadc2e525eec8e017b26ebd5a4c to mempool and for broadcast to peers\r\n425:2026-01-19T12:51:05Z [w0] AddToWallet 14daa63ec9de552d7260ab2cd3e993ba41cd1eadc2e525eec8e017b26ebd5a4c   InMempool\r\n426:2026-01-19T12:51:05Z [w1] AddToWallet 14daa63ec9de552d7260ab2cd3e993ba41cd1eadc2e525eec8e017b26ebd5a4c  new InMempool\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>After (info-level wallet logs redact txids and transaction dump)</summary>\r\n\r\n```bash\r\n115:2026-01-19T12:52:46Z [w0] AddToWallet new Confirmed (block=7f0cdb7a15da25963eb2276592aefb99596011a3288f08a8598c87046e5d1f2f, height=1, index=0)\r\n...\r\n411:2026-01-19T12:52:47Z [w0] AddToWallet new Confirmed (block=0a02dcb2e58029c5e665bad29ae90f69f813527bb41f6c74e7600ada7194019c, height=101, index=0)\r\n417:2026-01-19T12:52:47Z [w0] CommitTransaction\r\n418:2026-01-19T12:52:47Z [w0] AddToWallet newupdate Inactive (abandoned=0)\r\n419:2026-01-19T12:52:47Z [w0] Submitting wtx to mempool and for broadcast to peers\r\n420:2026-01-19T12:52:47Z [w0] AddToWallet  InMempool\r\n421:2026-01-19T12:52:47Z [w1] AddToWallet new InMempool\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>After with <code>-debug=wallet</code> (txids and transaction dump only in <code>[wallet]</code> debug lines)</summary>\r\n\r\nAdding wallet debug logging:\r\n```bash\r\n./build/bin/bitcoind -regtest -datadir=\"$DATA_DIR\" -daemon -connect=0 -fallbackfee=0.0002 -debug=wallet >/dev/null 2>&1\r\n```\r\n\r\n```bash\r\n114:2026-01-19T12:54:47Z [w0] AddToWallet new Confirmed (block=511c1230d47d8d70c87f01b1b2274a4c04a8304f826f500af90ac36d3953544d, height=1, index=0)\r\n115:2026-01-19T12:54:47Z [wallet] [w0]   txid=7d8e6900d4f3815291f5c80c24067d71867e605bc1ac96bc302174fc7c22c38f\r\n...\r\n512:2026-01-19T12:54:47Z [w0] AddToWallet new Confirmed (block=2c1aa6e5312f1b0213e5d8a32807baba845e5b1f19998e9ae5366ccc6ffce3b0, height=101, index=0)\r\n513:2026-01-19T12:54:47Z [wallet] [w0]   txid=eb8521e70116f366541ab8202375b3ec145e29e7271779baa4eff066ccd1e9ac\r\n519:2026-01-19T12:54:47Z [w0] CommitTransaction\r\n520:2026-01-19T12:54:47Z [wallet] [w0]   CTransaction(hash=b56f816d0c, ver=2, vin.size=1, vout.size=2, nLockTime=101)\r\n525:2026-01-19T12:54:47Z [w0] AddToWallet newupdate Inactive (abandoned=0)\r\n526:2026-01-19T12:54:47Z [wallet] [w0]   txid=b56f816d0cf7fdc5ae34eb09bcfdfefe66e57e3f76be86e46ffebd046eaa8ed2\r\n527:2026-01-19T12:54:47Z [w0] Submitting wtx to mempool and for broadcast to peers\r\n528:2026-01-19T12:54:47Z [wallet] [w0]   txid=b56f816d0cf7fdc5ae34eb09bcfdfefe66e57e3f76be86e46ffebd046eaa8ed2\r\n529:2026-01-19T12:54:47Z [w0] AddToWallet  InMempool\r\n530:2026-01-19T12:54:47Z [wallet] [w0]   txid=b56f816d0cf7fdc5ae34eb09bcfdfefe66e57e3f76be86e46ffebd046eaa8ed2\r\n531:2026-01-19T12:54:47Z [w1] AddToWallet new InMempool\r\n532:2026-01-19T12:54:47Z [wallet] [w1]   txid=b56f816d0cf7fdc5ae34eb09bcfdfefe66e57e3f76be86e46ffebd046eaa8ed2\r\n```\r\n\r\n</details>\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-19T13:15:38Z",
      "updated_at": "2026-01-23T00:05:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34341",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6286,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3187823761,
      "number": 34342,
      "title": "cli: Replace libevent usage with simple http client",
      "body": "Part of the effort to remove the libevent dependency altogether, see #31194\r\n\r\nDraft for now since it depends on a few other PRs in varying ways:\r\n- Uses `LineReader` from #34242 (first commit is cherry-picked from there)\r\n- Uses similar approach to #34158 and this has seen limited review so far\r\n- Could potentially reuse `HTTPHeaders` class from #32061 (TODO in code)\r\n\r\nSo, please review the PRs above first since the code here might change depending on review feedback there :)\r\n\r\nThe change itself replaces the libevent-based HTTP client with a simple synchronous implementation which uses the `Sock` class directly.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2026-01-19T13:27:54Z",
      "updated_at": "2026-01-22T23:52:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34342",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 674,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1010047865,
      "number": 25722,
      "title": "refactor: Use util::Result class for wallet loading",
      "body": "<!-- begin based-on -->\n**This is based on #25665 + #26022.** The non-base commits are:\n\n- [`9c8facf50f2` Add temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/9c8facf50f210e8327ac1e96fbec265916a74f2f)\n- [`1d46b7bd1fc` refactor: Use util::Result class in wallet/sqlite](https://github.com/bitcoin/bitcoin/pull/25722/commits/1d46b7bd1fcac1166869c40cd1eb5771ac701116)\n- [`c577b636d33` refactor: Use util::Result class in wallet/migrate](https://github.com/bitcoin/bitcoin/pull/25722/commits/c577b636d33b9fbdc9cb8b03e8ee05d90caf8ecd)\n- [`8f1f60f9343` refactor: Use util::Result class in wallet::MakeDatabase](https://github.com/bitcoin/bitcoin/pull/25722/commits/8f1f60f93438d7a0f557128c52cee8d05b8c9f82)\n- [`e9d0495b0a8` refactor: Use util::Result class in wallet/dump](https://github.com/bitcoin/bitcoin/pull/25722/commits/e9d0495b0a8a76aa3a8231d6595cff3f15960821)\n- [`a85d65598e3` refactor: Use util::Result class in wallet/wallettool](https://github.com/bitcoin/bitcoin/pull/25722/commits/a85d65598e30e3a0d7be08b426b7c3b7a8cbf807)\n- [`1efcdbe42c4` refactor: Use util::Result class in wallet/wallet](https://github.com/bitcoin/bitcoin/pull/25722/commits/1efcdbe42c445885ce42fa51fd209e9e0779ef11)\n- [`1db7b970d89` refactor: Use util::Result class in wallet/load](https://github.com/bitcoin/bitcoin/pull/25722/commits/1db7b970d89117c9c539d4b40f814e7c542d51c2)\n- [`e5db02940d7` refactor: Use util::Result class in wallet/rpc](https://github.com/bitcoin/bitcoin/pull/25722/commits/e5db02940d7d8d1874fbe63ec5067ae127e088a7)\n- [`c3c1e9c9ed1` refactor: Use util::Result class in wallet/interfaces](https://github.com/bitcoin/bitcoin/pull/25722/commits/c3c1e9c9ed19210f05c41cccea91b544663ec11a)\n- [`ee403e83522` refactor: Use util::Result class in wallet/test](https://github.com/bitcoin/bitcoin/pull/25722/commits/ee403e8352271b8b220a711f3e51b2abf96a4c88)\n- [`89d92070b11` Drop temporary ResultExtract helper for porting to util::Result](https://github.com/bitcoin/bitcoin/pull/25722/commits/89d92070b11f6de516105ffa9e561b4c34c0e2fa)\n- [`23df7666d1c` scripted-diff: replace wallet DatabaseStatus with DatabaseError](https://github.com/bitcoin/bitcoin/pull/25722/commits/23df7666d1cfae87609b0054e7184bfad71467dd)\n- [`93828179010` iwyu fix https://github.com/bitcoin/bitcoin/actions/runs/21266012856/job/61207857203?pr=25722](https://github.com/bitcoin/bitcoin/pull/25722/commits/9382817901067c57b5ff4044d4c7aa09aee25376)<!-- end -->\n\n---\n\nWallet loading functions up and down the stack have lots of error and warning parameters, and return error information in different ways. This PR makes them uniformly return `util::Result`, without changing behavior.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-27T19:26:58Z",
      "updated_at": "2026-01-22T23:47:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25722",
      "labels": [
        "Refactoring",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2763,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3188672071,
      "number": 34346,
      "title": "test: use IP_PORTRANGE_HIGH on FreeBSD for dynamic port allocation",
      "body": "Reopening #34336. I’ve now tested it on FreeBSD and confirmed it works.\r\n\r\nOn FreeBSD, the default ephemeral port range (10000-65535) overlaps with the test framework's static port range (11000-26000), possibly causing intermittent \"address already in use\" failures when tests use dynamic port allocation (`port=0`).\r\n\r\nThis PR adds a helper that sets `IP_PORTRANGE_HIGH` via `setsockopt()` before binding, requesting ports from 49152-65535 instead, which avoids the overlap, as suggested in https://github.com/bitcoin/bitcoin/issues/34331#issuecomment-3767161843 by @maflcko .\r\n\r\nFrom FreeBSD's [sys/netinet/in.h](https://cgit.freebsd.org/src/tree/sys/netinet/in.h):                                                          \r\n  ```c\r\n  #define IP_PORTRANGE         19\r\n  #define IP_PORTRANGE_HIGH    1\r\n  #define IPPORT_EPHEMERALFIRST 10000  /* default range start */\r\n  #define IPPORT_HIFIRSTAUTO   49152   /* high range start */\r\n```\r\n\r\nSee also: FreeBSD https://man.freebsd.org/cgi/man.cgi?query=ip&sektion=4 man page.\r\n\r\nFixes #34331",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-01-19T17:57:22Z",
      "updated_at": "2026-01-22T23:39:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34346",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1105,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3201135611,
      "number": 34384,
      "title": "Remove epoch logic from mempool",
      "body": "Since #33591, the epoch-based graph traversal optimization logic is only used for `CTxMempool::GetChildren()`, a function that is only used in RPC code and tests. Rewrite it without epochs, and remove `util/epochguard.h` itself, as that was its last use.\r\n\r\nThis allows us to reduce per-transaction memory usage by 8 bytes, for no material loss. With the new TxGraph-based mempool implementation, I also don't foresee future uses for it, as TxGraph can do even better by using BitSet-based traversal tracking.",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-22T22:12:00Z",
      "updated_at": "2026-01-22T23:27:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34384",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 541,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3190110147,
      "number": 34349,
      "title": "util: Remove brittle and confusing sp::Popen(std::string)",
      "body": "The subprocess Popen call that accepts a full `std::string` has many issues:\r\n\r\n* It promotes brittle and broken code, where spaces are not properly quoted. Example: https://github.com/bitcoin/bitcoin/pull/33929#discussion_r2590523065\r\n* The internally used `util::split` function does incorrectly split on spaces, instead of using `shlex.split`.\r\n* It is redundant and not needed, because a vector interface already exists.\r\n\r\nFix all issues by removing it and just using the vector interface.\r\n\r\nThis pull request should not change any behavior: Note that the command taken from `gArgs.GetArg(\"-signer\", \"\")` is still passed through the `sp::util::split` helper, just like before. Fixing that is left for a follow-up, so that this change here is basically just a refactor.\r\n\r\nThis also fixes a unit test bug as a side-effect: Fixes https://github.com/bitcoin/bitcoin/issues/32574.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-20T07:19:24Z",
      "updated_at": "2026-01-22T23:12:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34349",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 940,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3127249876,
      "number": 34143,
      "title": "build: Prevent system header fallback and include path pollution",
      "body": "Currently, header-only dependencies in the depends subsystem are installed into the standard `include/` subdirectory. This inadvertently exposes their headers to the compiler via `-I` flags brought in by other dependencies (e.g., `libevent` or `sqlite`). This \"include path pollution\" masks missing dependencies in the build configuration. While the build might succeed by accident due to this overlap, it creates a fragile state. If the overlapping library is removed, the build will break, or, worse, the compiler may silently fall back to the host system's default paths (e.g., `/usr/include`).\r\n\r\nThis PR improves build system security and hygiene by enforcing strict, distinguished include paths for header-only dependencies. The missing dependencies revealed by this change (`Boost::headers`, `USDT::headers`) have been fixed in separate commits.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-23T22:17:29Z",
      "updated_at": "2026-01-22T22:50:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34143",
      "labels": [
        "Bug",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 917,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3200991905,
      "number": 34382,
      "title": "test: wallet: Check fallbackfee default argument behavior.",
      "body": "In an unmerged branch of #32636 (https://github.com/bitcoin/bitcoin/commit/097e00f90765915b0f8353a4eb5ebb18ceae2a66) I unintentionally broke default `-fallbackfee` behavior, but this was not caught by any tests. See https://github.com/bitcoin/bitcoin/pull/32636#discussion_r2706178076.\r\n\r\nSomething like the following diff does not cause any test failures on master despite causing a behavior change:\r\n\r\n```diff\r\ndiff --git a/src/wallet/wallet.cpp b/src/wallet/wallet.cpp\r\nindex bc27018cd2..079610fba0 100644\r\n--- a/src/wallet/wallet.cpp\r\n+++ b/src/wallet/wallet.cpp\r\n@@ -3048,24 +3048,24 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\r\n     if (const auto arg{args.GetArg(\"-fallbackfee\")}) {\r\n         std::optional<CAmount> fallback_fee = ParseMoney(*arg);\r\n         if (!fallback_fee) {\r\n             error = strprintf(_(\"Invalid amount for %s=<amount>: '%s'\"), \"-fallbackfee\", *arg);\r\n             return nullptr;\r\n         } else if (fallback_fee.value() > HIGH_TX_FEE_PER_KB) {\r\n             warnings.push_back(AmountHighWarn(\"-fallbackfee\") + Untranslated(\" \") +\r\n                                _(\"This is the transaction fee you may pay when fee estimates are not available.\"));\r\n         }\r\n         walletInstance->m_fallback_fee = CFeeRate{fallback_fee.value()};\r\n+        // Disable fallback fee in case value was set to 0, enable if non-null value\r\n+        walletInstance->m_allow_fallback_fee = walletInstance->m_fallback_fee.GetFeePerK() != 0;\r\n     }\r\n\r\n-    // Disable fallback fee in case value was set to 0, enable if non-null value\r\n-    walletInstance->m_allow_fallback_fee = walletInstance->m_fallback_fee.GetFeePerK() != 0;\r\n```\r\n\r\nThis PR adds a functional test check that when no `-fallbackfee` argument is set and fee estimation is not possible, that sending fails because `-fallbackfee` is disabled by default.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2026-01-22T21:15:04Z",
      "updated_at": "2026-01-22T22:48:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34382",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1935,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2237045890,
      "number": 31507,
      "title": "build: Use clang-cl to build on Windows natively",
      "body": "Building on Windows using Clang instead of the MS compiler may be beneficial, considering the issues with the latter, as outlined in https://github.com/bitcoin/bitcoin/issues/31456:\r\n\r\n>    * non-optimized codegen: [build: remove need to test for endianness #29852 (comment)](https://github.com/bitcoin/bitcoin/pull/29852#issuecomment-2049803970)\r\n> \r\n>    * compile failure: [MSVC 17.12.0 internal compiler error  #31303](https://github.com/bitcoin/bitcoin/issues/31303)\r\n> \r\n>    * legal, but brittle stdlib: [util: Drop boost posix_time in ParseISO8601DateTime #31391 (comment)](https://github.com/bitcoin/bitcoin/pull/31391#issuecomment-2510762011)\r\n> \r\n>    * unspecified issue: [refactor: Check translatable format strings at compile-time #31061 (comment)](https://github.com/bitcoin/bitcoin/pull/31061#issuecomment-2531244463)\r\n\r\nAdditionally, MSVC does not [support](https://learn.microsoft.com/en-us/cpp/assembler/inline/inline-assembler) inline assembly on the ARM and x64 processors.\r\n\r\nSo this PR:\r\n1. Closes https://github.com/bitcoin/bitcoin/issues/31456 (and addresses https://github.com/bitcoin/bitcoin/issues/14118).\r\n2. Could be an alternative to https://github.com/bitcoin/bitcoin/pull/24773.\r\n\r\n---\r\n\r\nAdditionally, clang-cl:\r\n1. Produces binaries with [better](https://github.com/bitcoin-core/secp256k1/pull/1681) performance. For example:\r\n\r\n| MSVC, block/s | clang-cl, block/s | benchmark |\r\n|--------------:|------------------:|:----------|\r\n|          7.40 |             11.52 | `ConnectBlockAllEcdsa`\r\n|          7.32 |             11.81 | `ConnectBlockAllSchnorr`\r\n|          7.38 |             11.45 | `ConnectBlockMixedEcdsaSchnorr`\r\n|         91.86 |            143.12 | `DeserializeAndCheckBlockTest`\r\n|        121.46 |            189.04 | `DeserializeBlockTest`\r\n\r\n2. Builds faster on the CI:\r\n    - [MSVC](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575846787) - 20m 35s\r\n    - [clang-cl](https://github.com/bitcoin/bitcoin/actions/runs/13792522864/job/38575849680) - 12m 43s\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-12-16T10:58:38Z",
      "updated_at": "2026-01-22T22:38:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31507",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2081,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3192195239,
      "number": 34356,
      "title": "doc: clarify -bind behavior with Tor",
      "body": "Clarify the -bind help text to explain the interaction with Tor and why incoming Tor connections may be counted as regular IPv4 connections in -netinfo.\r\n\r\nFixes #33458",
      "state": "open",
      "user": "crackedhandle",
      "created_at": "2026-01-20T17:47:30Z",
      "updated_at": "2026-01-22T22:31:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34356",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 205,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3201168043,
      "number": 34385,
      "title": "subprocess: Fix `-Wunused-private-field` when building with clang-cl on Windows",
      "body": "This PR is a prerequisite for https://github.com/bitcoin/bitcoin/pull/31507.\r\n\r\nContext and details can be found in https://github.com/bitcoin/bitcoin/pull/31507#discussion_r2576643197.\r\n\r\nOnly the second commit has been [submitted](https://github.com/arun11299/cpp-subprocess/pull/127) upstream. The first commit is specific to this repository and not applicable upstream.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-22T22:26:40Z",
      "updated_at": "2026-01-22T22:27:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34385",
      "labels": [
        "Refactoring",
        "Windows"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 453,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3193524455,
      "number": 34357,
      "title": "rpc: Handle nullptr from createNewBlock in getblocktemplate",
      "body": "Fixes #34262\r\n\r\ngetblocktemplate currently asserts when miner.createNewBlock() returns nullptr. This can happen during shutdown or when the mining subsystem is unavailable.\r\n\r\nReplace the assertion with proper error handling that returns RPC_CLIENT_NOT_CONNECTED instead, indicating the service is temporarily unavailable.",
      "state": "open",
      "user": "DevPatel-11",
      "created_at": "2026-01-21T02:26:28Z",
      "updated_at": "2026-01-22T22:16:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34357",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 382,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3180151419,
      "number": 34314,
      "title": "wallet: Fix MaxSatisfactionWeight calculation for Taproot descriptors",
      "body": "This PR fixes a bug in the `MaxSatisfactionWeight` calculation for Taproot descriptors. Previously, the implementation contained a FIXME comment and only calculated keypath spend weight, leading to significant underestimations for script path spending.\r\n\r\n### What Changed:\r\n\r\n**1. TaprootDescriptor::MaxSatisfactionWeight** - Replaced the placeholder implementation with proper script path weight calculation:\r\n   - Now iterates through all subdescriptors to find the heaviest script path\r\n   - Uses `MaxSatSize()` instead of `MaxSatisfactionWeight()` for subdescriptors (Taproot SegWit v1 has a 1:1 ratio between witness bytes and weight units, unlike the 4:1 ratio in legacy SegWit v0)\r\n   - Accounts for satisfaction size, script size, and control block size\r\n   - Returns the maximum of keypath (66 weight units) and all script paths\r\n\r\n**2. PKDescriptor::MaxSatSize** - Corrected Schnorr signature size from 65 to 64 bytes (SIGHASH_DEFAULT is omitted in Schnorr signatures)\r\n\r\n**3. MultiADescriptor::MaxSatSize** - Corrected Schnorr signature size from 65 to 64 bytes\r\n\r\n**4. Added comprehensive unit tests** - New test case `descriptor_tr_max_satisfaction_weight` with:\r\n   - Test for `tr(key, pk(key))` verifying script path weight (134) exceeds keypath weight (66)\r\n   - Test for `tr(key, sortedmulti_a(2, K1, K2))` verifying complex script path calculation (235 weight units)\r\n   - Detailed comments explaining the weight calculations for each component\r\n\r\n### Why:\r\n\r\nAccurate weight estimation for Taproot descriptors is critical for:\r\n- **Fee calculation** - Underestimated weights lead to insufficient fees and transaction rejection\r\n- **Transaction size estimation** - Affects PSBT construction and validation\r\n- **Wallet coin selection** - Incorrect weights cause suboptimal UTXO selection\r\n\r\nThe tests demonstrate the bug (old code would return 66 for both cases) and prove the fix produces correct weight estimates.",
      "state": "closed",
      "user": "tboy1337",
      "created_at": "2026-01-16T07:17:28Z",
      "updated_at": "2026-01-22T22:06:55Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34314",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 3,
        "positive_keywords": 0,
        "text_length": 2003,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3189081036,
      "number": 34348,
      "title": "lib: call RandFailure() if RDRAND fails",
      "body": "While the risk of the RDRAND instruction failing in such a fashion is minor, the current implementation allows the process to continue if such an occurrence happens.\r\n\r\nChecking for such an occurrence and calling RandFailure() if it occurs is a safer alternative than failing silently.",
      "state": "open",
      "user": "michaellappas",
      "created_at": "2026-01-19T20:50:55Z",
      "updated_at": "2026-01-22T22:04:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34348",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 325,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2989452954,
      "number": 33822,
      "title": "kernel: Add block header support and validation",
      "body": "Adds a new `btck_BlockHeader` type and associated functions to create, access, and validate block headers. Block headers will have their own type (`btck_BlockHeader`) that can be created from raw data, copied, and queried for all the standard header fields (hash, prev hash, timestamp, bits, version, nonce). We can also extract headers from full blocks or block tree entries.\r\n\r\nThe first commit here refactors `BlockValidationState` to use Handle/View pattern so external code can own them, which is required for the header processing in the API.\r\n\r\n #### New Block Header API\r\n\r\n  - **`btck_BlockHeader` type**: Opaque handle for block headers\r\n  - **Header methods**:\r\n    - `btck_block_header_create()`: Create header from 80-byte serialized data\r\n    - `btck_block_header_copy()`: Copy block headers\r\n    - `btck_block_header_destroy()`: Destroy header object\r\n    - `btck_block_header_get_hash()`: Calculate block hash\r\n    - `btck_block_header_get_prev_hash()`: Get previous block hash\r\n    - `btck_block_header_get_timestamp()`: Get block timestamp\r\n    - `btck_block_header_get_bits()`: Get difficulty target (compact format)\r\n    - `btck_block_header_get_version()`: Get block version\r\n    - `btck_block_header_get_nonce()`: Get proof-of-work nonce\r\n    \r\n    - `btck_block_get_header()`: Extract header from a full block\r\n    - `btck_block_tree_entry_get_block_header()`: Get header associated with a block tree entry\r\n  \r\n  - **Header Processing Methods:**\r\n    - **`btck_chainstate_manager_process_block_header()`**: Validates and processes a block header without requiring the full block. This performs proof-of-work verification, timestamp validation, and updates the internal chain state.\r\n    - **`btck_chainstate_manager_get_best_entry()`**: Returns the block tree entry with the most cumulative proof-of-work.\r\n\r\nWhy `btck_chainstate_manager_get_best_entry()` is included alongside header validation? Just as we have logic to get the tip for block validation (so you can request more blocks extending your best from your peers), we need the equivalent for header validation. To make header validation worthwhile, knowing what the best current header is seems useful—it tells you what headers to request next from peers.\r\n\r\n\r\n\r\n  ### Testing\r\n\r\n  Added tests in `test_kernel.cpp` that cover creating headers from raw data, extracting all header fields, and processing headers through the chainstate manager.\r\n  \r\n  CC sedited",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-07T17:16:01Z",
      "updated_at": "2026-01-22T21:50:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33822",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2492,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3197036941,
      "number": 34376,
      "title": "bench/test: clarify merkle bench and witness test intent",
      "body": "Follow-up to #32497.\r\n\r\nClarify why the witness merkle test uses an odd leaf count (it exercises leaf duplication in `ComputeMerkleRoot()`), and make the coinbase witness hash initialization explicit.\r\n\r\nAlso simplify the leaf-copy loop in the `MerkleRoot` benchmark for readability.\r\n\r\nNo production code is changed in this follow-up, for simplicity and safety.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2026-01-21T22:31:01Z",
      "updated_at": "2026-01-22T21:49:57Z",
      "merged_at": "2026-01-22T21:49:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34376",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 419,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3193617894,
      "number": 34360,
      "title": "bench: add WalletBalanceManySpent for high-history wallet scenario",
      "body": "This PR introduces a new benchmark that measures `GetBalance()` performance on wallets with extensive transaction history where the majority of outputs have already been spent.\r\n\r\nIt was created to test #27865, which separates spent TXOs from spendable ones.\r\nThis pattern mirrors real-world usage in high-activity wallets such as Lightning nodes, exchanges, hot wallets, and payment processors.\r\n\r\n**Setup:**\r\n- Creates 500 blocks × 100 coinbase outputs = 50,000 wallet TXOs\r\n- Matures all coinbases with COINBASE_MATURITY additional blocks\r\n- Spends 49,950 outputs in batched transactions (confirmed in blocks)\r\n- Consolidation outputs go to a burn script to avoid inflating wallet TXO count\r\n                                                                                                                                         \r\nTo keep the setup time reasonable, the benchmark uses the fast “fake block” approach, similar to `wallet_create_tx.cpp`.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2026-01-21T03:15:17Z",
      "updated_at": "2026-01-22T21:48:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34360",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1021,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3143827627,
      "number": 34198,
      "title": "wallet: fix ancient wallets migration",
      "body": "We currently fail migration if the wallet does not contain the best block locator.\r\nThis is a problem for wallets created before https://github.com/bitcoin/bitcoin/pull/152, which are not storing such record.\r\n\r\nMissing this record is not an error. it simply means the wallet will scan the chain prior\r\nto finish migration.\r\n\r\nNote:\r\nOriginally I wrote the test using a BDB library (`bsddb3`) but I wasn't happy with the\r\nnew dependency, and ended up zeroing the record length manually. I'm not sure this\r\nwill work on every platform. If it doesn't, we can just just drop the test as this can be\r\ntested manually on any ancient wallet too.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-01-03T20:03:34Z",
      "updated_at": "2026-01-22T21:46:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34198",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 677,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2550873429,
      "number": 32636,
      "title": "Split `CWallet::Create()` into `CreateNew` and `LoadExisting`",
      "body": "This PR is mostly a refactor which splits out logic used for creating wallets and for loading wallets, both of which are presently contained in `CWallet::Create()` into `CWallet::CreateNew()` and `CWallet::LoadExisting()`\r\n\r\nThe real win of this PR is that `CWallet::Create()` uses a very bad heuristic for trying to guess whether or not it is supposed to be creating a new wallet or loading an existing wallet:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/370c59261269fd9043674e0f4fd782a89e724473/src/wallet/wallet.cpp#L2882-L2885\r\n\r\nThis heuristic assumes that wallets with no `ScriptPubKeyMans` are being created, which sounds reasonable, but as demonstrated in #32112 and #32111, this can happen when the user tries to load a wallet file that is corrupted, both issues are fixed by this PR and any other misbehavior for wallet files which succeeded the broken heuristic's sniff test for new wallets.\r\n\r\nIt was already the case that every caller of `CWallet::Create()` knows whether it is creating a wallet or loading one, so we can avoid replacing this bad heuristic with another one, and just shift the burden to the caller.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-29T00:37:09Z",
      "updated_at": "2026-01-22T21:33:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32636",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1189,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3195778555,
      "number": 34370,
      "title": "[29.x] Fix #34222 backport bugs",
      "body": "",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2026-01-21T15:47:10Z",
      "updated_at": "2026-01-22T21:20:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34370",
      "labels": [
        "Wallet",
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 32,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3193751838,
      "number": 34362,
      "title": "wallet: skip APS when no partial spend exists",
      "body": "Skip the APS coin selection pass when the initial selection contains no partial\r\nspend—APS cannot improve privacy in this case.\r\n\r\nDetection compares selected vs available UTXO counts per scriptPubKey, reusing\r\n`available_coins`. Test updated to create an actual partial spend scenario.\r\n\r\nFixes #25150",
      "state": "open",
      "user": "8144225309",
      "created_at": "2026-01-21T04:38:49Z",
      "updated_at": "2026-01-22T21:19:54Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34362",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 348,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181854676,
      "number": 34320,
      "title": "coins: replace remaining `HaveCoin` calls with `GetCoin`",
      "body": "Split out of https://github.com/bitcoin/bitcoin/pull/34132#discussion_r2692307054.\r\n\r\n### Problem\r\n\r\nWe have two ways to check a coin exists in the db.\r\nOne tries to deserialize, the other just returns whether any value is associated with the key.\r\nBut we usually need the full value we probed for, and `HaveCoin` cannot cache the returned value, so it can trigger an extra lookup if `HaveCoin` uses `Exists` and the caller later needs the actual value.\r\nWe're already delegating most `HaveCoin` calls to `GetCoin` anyway for the above reasons, so the current implementation of `HaveCoin` is redundant.\r\n\r\n### Fix\r\n\r\nReplace `HaveCoin` calls with `GetCoin`, reuse `ReadRaw` in `dbwrapper`, stop ignoring deserialization failures, and readjust tests to this simpler state.\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\nSee https://github.com/bitcoin/bitcoin/blob/cd0959ce9b7c5b80ebd45b652d557630b4dc604b/src/dbwrapper.cpp#L304-L331 and https://github.com/bitcoin/bitcoin/blob/a9b7f5614c24fe6f386448604c325ec4fa6c98a5/src/dbwrapper.h#L206-L241\r\n\r\n</details>\r\n\r\n### Notes\r\n* It seems https://github.com/bitcoin/bitcoin/pull/26331 did not fix https://github.com/bitcoin/bitcoin/issues/26112.\r\n* After this PR deserialization failures will crash the app, see https://github.com/bitcoin/bitcoin/pull/33866 for similar cleanups. This is deliberate to fail early instead of trying to recover.\r\n\r\n### Reproducers\r\nThis isn't meant as an optimization but it's important to make sure there are no regressions.\r\n\r\n<details>\r\n<summary>assumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```bash\r\nCOMMITS=\"0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-910000.dat\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor DBCACHE in 4500; do \\\r\n  (echo \"assumeutxo load | 910000 blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\";) &&\\\r\n  hyperfine \\\r\n  --sort command \\\r\n  --runs 3 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$DBCACHE-$CC-$(date +%s).json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall -9 bitcoind 2>/dev/null; rm -f ./build/bin/bitcoind; rm -rf $DATA_DIR/blocks $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git clean -fxd; git reset --hard {COMMIT} && \\\r\n             cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo && ninja -C build bitcoind bitcoin-cli -j2 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 20 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 20\" \\\r\n   --conclude \"build/bin/bitcoin-cli -datadir=$DATA_DIR stop || true; killall bitcoind || true; sleep 10; \\\r\n               echo '{COMMIT} | dbcache=$DBCACHE | chainstate: $(find $DATA_DIR/chainstate_snapshot -type f 2>/dev/null | wc -l) files, $(du -sb $DATA_DIR/chainstate_snapshot 2>/dev/null | cut -f1) bytes' >> $DATA_DIR/debug.log; \\\r\n               cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log\" \\\r\n    \"COMPILER=$CC DBCACHE=$DBCACHE ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n0ffb20dee1 Merge bitcoin/bitcoin#34282: qa: Fix Windows logging bug\r\n9b4e0448b2 coins: replace remaining `HaveCoin` calls with `GetCoin()` and remove the former\r\n\r\nassumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n  Time (mean ± σ):     414.640 s ±  4.562 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   411.946 s … 419.907 s    3 runs\r\n \r\n  Warning: Statistical outliers were detected. Consider re-running this benchmark on a quiet system without any interferences from other programs. It might help to use the '--warmup' or '--prepare' options.\r\n \r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n  Time (mean ± σ):     417.815 s ±  3.844 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min … max):   413.440 s … 420.653 s    3 runs\r\n \r\nRelative speed comparison\r\n        1.00          COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n        1.01 ±  0.01  COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n<summary>2026-01-20 | reindex-chainstate | 932239 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD</summary>\r\n\r\n```bash\r\nfor DBCACHE in 450 4500; do \\                                                                                                                                     \r\n  COMMITS=\"0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972\"; \\\r\n  STOP=932239; CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -f ./build/bin/bitcoind; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind -j1 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20; rm -f $DATA_DIR/debug.log\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log && grep 'Bitcoin Core version' $DATA_DIR/debug.log | grep -q \"$(printf %.12s {COMMIT})\"; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n\r\n0ffb20dee1 Merge bitcoin/bitcoin#34282: qa: Fix Windows logging bug\r\n9b4e0448b2 coins: replace remaining `HaveCoin` calls with `GetCoin()` and remove the former\r\n\r\n2026-01-20 | reindex-chainstate | 932239 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n  Time (abs ≡):        21792.702 s               [User: 50404.736 s, System: 2993.346 s]\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n  Time (abs ≡):        21806.403 s               [User: 50228.797 s, System: 3049.315 s]\r\n \r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n\r\n0ffb20dee1 Merge bitcoin/bitcoin#34282: qa: Fix Windows logging bug\r\n9b4e0448b2 coins: replace remaining `HaveCoin` calls with `GetCoin()` and remove the former\r\n\r\n2026-01-21 | reindex-chainstate | 932239 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n  Time (abs ≡):        17483.617 s               [User: 34266.506 s, System: 941.755 s]\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n  Time (abs ≡):        17375.956 s               [User: 34053.656 s, System: 953.146 s]\r\n \r\nRelative speed comparison\r\n        1.01          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=932239 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>2026-01-20 | pruned IBD | 932239 blocks | dbcache 450 | pruning 550 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD</summary>\r\n\r\n```\r\nCOMMITS=\"0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972\"; \\                                                      \r\nSTOP=932239; DBCACHE=450; PRUNE=550; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n(echo \"\" && echo \"$(date -I) | pruned IBD | ${STOP} blocks | dbcache ${DBCACHE} | pruning ${PRUNE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/ibd-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall -9 bitcoind 2>/dev/null; rm -rf $DATA_DIR/*; git clean -fxd; git reset --hard {COMMIT} && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -prune=$PRUNE -printtoconsole=0; sleep 20\" \\\r\n  --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log && grep 'Bitcoin Core version' $DATA_DIR/debug.log | grep -q \"$(printf %.12s {COMMIT})\"; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -blocksonly -prune=$PRUNE -printtoconsole=0\"\r\n\r\n0ffb20dee1 Merge bitcoin/bitcoin#34282: qa: Fix Windows logging bug\r\n9b4e0448b2 coins: replace remaining `HaveCoin` calls with `GetCoin()` and remove the former\r\n\r\n2026-01-20 | pruned IBD | 932239 blocks | dbcache 450 | pruning 550 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=932239 -dbcache=450 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n  Time (mean ± σ):     46504.109 s ± 107.376 s    [User: 67620.317 s, System: 4548.654 s]\r\n  Range (min … max):   46428.183 s … 46580.036 s    2 runs\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=932239 -dbcache=450 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n  Time (mean ± σ):     46099.327 s ± 273.054 s    [User: 67100.985 s, System: 4465.216 s]\r\n  Range (min … max):   45906.249 s … 46292.406 s    2 runs\r\n \r\nRelative speed comparison\r\n        1.01 ±  0.01  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=932239 -dbcache=450 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/ShallowBitcoinData -stopatheight=932239 -dbcache=450 -blocksonly -prune=550 -printtoconsole=0 (COMMIT = 9b4e0448b2cd4b0b5a3db231472a2e3d16a97972)\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-16T16:17:29Z",
      "updated_at": "2026-01-22T20:50:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34320",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 14490,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3160483005,
      "number": 34242,
      "title": "Prepare string and net utils for future HTTP operations",
      "body": "This is a component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194). It is the first six commits of #32061 and provides a string-parsing utility (`LineReader`) that is also consumed by #34158.\r\n\r\nThese are the functions that are added / updated for HTTP and Torcontrol:\r\n\r\n- `GetBindAddress()`: Given a socket, provides the bound address as a CService. Currently used by p2p but moved from `net` to `netbase` so other modules can call it.\r\n- `ToIntegral()`: Already used to parse numbers from strings, added new argument `base = 10` so it can also be used to parse hexadecimal integers. HTTP chunked transfer-encoding uses hex-encoded integers to specify payload size: https://datatracker.ietf.org/doc/html/rfc7230.html#section-4.1\r\n- `AsciiCaseInsensitive` comparators: Needed to store HTTP headers in an `unordered_map`. Headers are key-value pairs that are parsed with case-insensitive keys: https://httpwg.org/specs/rfc9110.html#rfc.section.5.1\r\n- `FormatRFC1123DateTime()`: The required datetime format for HTTP headers (e.g. `Fri, 31 May 2024 19:18:04 GMT`)\r\n- `LineReader`: Fields in HTTP requests are newline-terminated. This struct is given an input buffer and provides methods to read lines as strings.\r\n",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2026-01-09T18:11:27Z",
      "updated_at": "2026-01-22T20:48:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34242",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1325,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3196490786,
      "number": 34373,
      "title": "refactor: Remove remaining std::bind, check via clang-tidy",
      "body": "`std::bind` has many issues:\r\n\r\n* It is verbose in a meaningless way\r\n* Overriden args are silently accepted and dropped at runtime without a compile error. Same for accidental duplicates.\r\n\r\nOne could use `std::bind_front` similar to commit fa267551c4eaef577db92e248c4b6d31d0c8bc77. Though, I think the remaining cases are better off with lambdas.\r\n\r\nSo do that here, and enable the `modernize-avoid-bind` clang-tidy rule to avoid `std::bind` bugs in the future.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-21T19:14:44Z",
      "updated_at": "2026-01-22T20:40:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34373",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 522,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3150717332,
      "number": 34213,
      "title": "net: do not read/dump anchors if network is not active",
      "body": "We currently save 2 block-relay-only (anchor) connections when stopping a node and connect to them right after starting it. However, if you start a node with network disabled (setting -networkactive=0 or disabling using the RPC), it will read the anchors, obviously will not be able to connect to them and then, when stopping the node, considering it will have 0 block-relay-only connections, it will save 0 anchors, basically deleting the previous ones. With this PR, we will only read and write the anchors if the network is active. It will avoid losing the anchors when using the node without network activity and also avoid unecessary actions (like reading the anchors even knowing we have no network activity).",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2026-01-06T21:26:09Z",
      "updated_at": "2026-01-22T20:27:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34213",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 770,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3196609350,
      "number": 34374,
      "title": "kernel: use structured logging and simplify logging interface",
      "body": "tl;dr: kernel logging is cumbersome. This PR enables structured logging and a much simplified kernel logging interface. Closes #34062.\r\n\r\n## Motivation\r\n\r\nThe `bitcoinkernel` library (#27587) [exposes](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L698-L778) functionality to interface with the kernel logging. This includes registering callbacks for log statements, level/category filtering, string formatting options, and more.\r\n\r\nKernel logging has a few problems:\r\n- [callbacks](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L304) operate on formatted strings, so users need to parse the string to get the timestamp, category, level, ... based on which options are set. This is cumbersome, brittle, and inefficient.\r\n- the [filtering interface](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L737) is not really intuitive, requiring users to call combinations of `btck_logging_set_level_category` and `btck_logging_enable_category` when they want to produce `debug` or `trace` logs. The level/category system makes sense for node, because it directly controls what gets written to disk and stdout, and there are quite a lot more categories producing logs. Kernel doesn't really need this - users control what happens to the logs, and can do any filtering/manipulation in the callback they provide.\r\n- the node logging infrastructure has quite a bit more functionality than is necessary for a library, including ratelimiting, log formatting, outputting, buffering, ... This introduces unnecessary code and interface complexity.\r\n\r\n## Approach\r\n\r\nMost of the logic in `logging.h` is not necessary for `bitcoinkernel`, so we first separate it into `util/log.h` and `logging.h` (`common`), then upgrade the `bitcoinkernel` logging interface, and finally remove the `logging.cpp` dependency from kernel entirely.\r\n\r\n1. **Separate log generation**: Add a minimal `util::log::Dispatcher` that is used to generate logs, and forwards structured log entries to registered callbacks. No formatting, rate-limiting, or output handling - that's the consumer's responsibility. Dispatcher can be configured with a `filter` predicate (e.g. `WillLogCategoryLevel()` for `node`, or a simpler levels-based filter for `bitcoinkernel`) to avoid unnecessary string formatting and other overhead.\r\n2. **Register `BCLog::Logger` on Dispatcher**: Register a callback on the global Dispatcher to receive entries and handle node-specific concerns (formatting, rate-limiting, file output) without changing most of its logic.\r\n3. **Move logging macros to `util/log.h`**: Allows the entire codebase (including kernel code) to use the same macros without depending on `logging.h`.\r\n4. **Update bitcoinkernel C API**: Replace the string-based callback with `btck_LogEntry` containing full metadata. Remove `btck_LoggingOptions` and category enable/disable functions. Add `btck_logging_set_min_level()` for early filtering.\r\n5. Move **`logging.cpp` to `common`**: remove it as a kernel dependency entirely.\r\n\r\n## Appendix\r\n\r\n### `bitcoinkernel` C logging interface\r\n\r\n```c\r\nstruct btck_LogEntry {\r\n    const char* message;       //!< Log message\r\n    size_t message_len;        //!< Log message length\r\n    const char* file_name;     //!< Source file name\r\n    size_t file_name_len;      //!< Source file name length\r\n    const char* function_name; //!< Source function name\r\n    size_t function_name_len;  //!< Source function name length\r\n    const char* thread_name;   //!< Thread name\r\n    size_t thread_name_len;    //!< Thread name length\r\n    int64_t timestamp_ns;      //!< Timestamp in nanoseconds since epoch\r\n    uint32_t line;             //!< Source line number\r\n    btck_LogLevel level;       //!< Log level\r\n    btck_LogCategory category; //!< Log category\r\n};\r\n\r\ntypedef void (*btck_LogCallback)(void* user_data, const btck_LogEntry* entry);\r\n\r\nBITCOINKERNEL_API void btck_logging_set_min_level(btck_LogLevel level);\r\n\r\nBITCOINKERNEL_API btck_LoggingConnection* BITCOINKERNEL_WARN_UNUSED_RESULT btck_logging_connection_create(\r\n    btck_LogCallback log_callback,\r\n    void* user_data,\r\n    btck_DestroyCallback user_data_destroy_callback) BITCOINKERNEL_ARG_NONNULL(1);\r\n\r\nBITCOINKERNEL_API void btck_logging_connection_destroy(btck_LoggingConnection* logging_connection);\r\n```\r\n\r\n",
      "state": "open",
      "user": "stickies-v",
      "created_at": "2026-01-21T19:56:44Z",
      "updated_at": "2026-01-22T20:25:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34374",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 4513,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2991771825,
      "number": 33828,
      "title": "Check required interfaces before generating manpages",
      "body": "Guard manpage generation by reading CMakeCache.txt and exiting if HAVE_SYSTEM, ENABLE_WALLET, or WITH_ZMQ are off, and provide a short hint so contributors rebuild with the right flags instead of committing incomplete manpages.\n\nFixes #17506 \n\nOverride by using the SKIP_BUILD_OPTIONS_CHECK environment variable if you really need a custom-fit manpage (see bitcoin/bitcoin#29457 (comment)).",
      "state": "open",
      "user": "151henry151",
      "created_at": "2025-11-08T20:50:34Z",
      "updated_at": "2026-01-22T20:11:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33828",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 443,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181018875,
      "number": 34317,
      "title": "fuzz: Exclude too expensive inputs in descriptor_parse targets",
      "body": "Accepting \"expensive\" fuzz inputs which have no real use-case is problematic, because it prevents the fuzz engine from spending time on the next useful fuzz input.\r\n\r\nFor example, those will take several seconds (!) and the flamegraph shows that base58 encoding is the cause:\r\n\r\n```\r\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/mocked_descriptor_parse/f5abf41608addcef3538da61d8096c2050235032'\r\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/descriptor_parse/78cb3175467f53b467b949883ee6072e92dbb267'\r\n\r\nFUZZ=mocked_descriptor_parse ./bld-cmake/bin/fuzz ./f5abf41608addcef3538da61d8096c2050235032\r\nFUZZ=descriptor_parse ./bld-cmake/bin/fuzz ./78cb3175467f53b467b949883ee6072e92dbb267\r\n```\r\n\r\nThis will also break 32-bit fuzzing, see https://github.com/bitcoin/bitcoin/issues/34110#issuecomment-3759461248.\r\n\r\nFix all issues by checking for `HasTooLargeLeafSize`.\r\n\r\nSorry for creating several pull requests to fix this class of issue, but I think this one should be the last one. :sweat_smile: ",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-16T12:00:14Z",
      "updated_at": "2026-01-22T20:10:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34317",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1188,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2517768893,
      "number": 32489,
      "title": "wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet",
      "body": "Currently, if a user wants to use an airgapped setup, they need to manually create the watchonly wallet that will live on the online node by importing the public descriptors. This PR introduces `exportwatchonlywallet` which will create a wallet file with the public descriptors to avoid exposing the specific internals to the user. Additionally, this RPC will copy any existing labels, transactions, and wallet flags. This ensures that the exported watchonly wallet is almost entirely a copy of the original wallet but without private keys.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-05-13T22:22:00Z",
      "updated_at": "2026-01-22T19:58:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32489",
      "labels": [
        "Wallet",
        "Review club"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 622,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3166250753,
      "number": 34264,
      "title": "fuzz: Extend `spend` coverage",
      "body": "Make the `wallet/spend` fuzz target stateful and extend coverage for several missing methods.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2026-01-12T15:12:26Z",
      "updated_at": "2026-01-22T19:55:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34264",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 123,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2466171613,
      "number": 32297,
      "title": "bitcoin-cli: Add -ipcconnect option",
      "body": "This implements an idea from sipa in https://github.com/bitcoin/bitcoin/issues/28722#issuecomment-2807026958 to allow `bitcoin-cli` to connect to the node via IPC instead of TCP, if the ENABLE_IPC cmake option is enabled and the node has been started with `-ipcbind`.\r\n\r\nThis feature can be tested with:\r\n\r\n```\r\nbuild/bin/bitcoin-node -regtest -ipcbind=unix -debug=ipc\r\nbuild/bin/bitcoin-cli -regtest -ipcconnect=unix -getinfo\r\n```\r\n\r\nThe -ipconnect parameter can also be omitted, since this change also makes `bitcoin-cli` prefer IPC over HTTP by default, and falling back to HTTP if an IPC connection can't be established.\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2025-04-17T13:55:32Z",
      "updated_at": "2026-01-22T19:30:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32297",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 772,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3199348260,
      "number": 34381,
      "title": "script: return proper error for `CScriptNum` errors",
      "body": "When evaluating a script, the current code is bad for analyzing some errors because it returns `SCRIPT_ERR_UNKNOWN_ERROR` for errors that are clearly known. \r\n\r\n`CScriptNum` has two well defined errors: number overflow and non-minimally encoded number. However, for both errors we return as unknown. This PR changes it by adding a new ScriptError that is used for any `CScriptNum` error.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2026-01-22T13:16:34Z",
      "updated_at": "2026-01-22T19:27:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34381",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 439,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3176419903,
      "number": 34297,
      "title": "p2p: add validation checks for initial self-announcement",
      "body": "This is a follow up to #34146 . Adds validation check to the initial self-announcement code path. `IsAddrCompatible()` check can prevent sending non-routable addresses to peers that don't support addrv2.",
      "state": "closed",
      "user": "frankomosh",
      "created_at": "2026-01-15T08:26:00Z",
      "updated_at": "2026-01-22T18:43:09Z",
      "merged_at": "2026-01-22T11:01:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34297",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 260,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3102178109,
      "number": 34075,
      "title": "fees: Introduce Mempool Based Fee Estimation to reduce overestimation",
      "body": "This PR is another attempt to fix #27995 using a better approach.\r\n\r\nFor background and motivation, see #27995 and the discussion in the Delving Bitcoin post [Mempool Based Fee Estimation on Bitcoin Core](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\r\nThis PR is currently limited to using the mempool only to lower what is recommended by the Block Policy Estimator.\r\nAccurate and safe fee estimation using the mempool is challenging. There are open questions about how to prevent mempool games that are theoretically possible for miners [(a variant of the Finney attack)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6)\r\n\r\nThis is one of the reasons I opted to use the mempool only to lower the Block Policy Estimator, which itself is not gameable, and therefore this mechanism is not susceptible to this attack.\r\n\r\nThe underlying assumption here is that, with the current tools and work done to make RBF and CPFP feasible and guarantee (TRUC transaction relay, ephemeral anchors, cluster size 2 package rbf), it is safer to underestimate rather than overestimate.\r\nWe now assume it is relatively easy to fee-bump later if a transaction does not confirm, whereas once a fee is overestimated there is no way to recover from that.\r\n\r\nAnother open question when using the mempool for fee estimation is how to account for incoming transaction inflow.\r\n[Bitcoin Augur](https://github.com/block/bitcoin-augur) does this by using past inflow plus a constant expected inflow to predict future inflow. I find this unconvincing for fee estimation and potentially prone to more overestimation, as past conditions are not always representative of the future. See my [review of the Augur fee rate estimator and open questions](https://github.com/block/bitcoin-augur/issues/3).\r\n\r\nThis PR uses a much simpler approach based on current user behavior, similar to the widely used method employed by mempool.space: looking at the top block of the mempool and selecting a percentile feerate depending on whether the user is economical or conservative.\r\n\r\nEmpirical data from both myself and Clara Shikhelman shows that the 75th percentile feerate for economical users and the 50th percentile feerate for conservative users provide positive confirmation guarantees, hence this is what is used in this PR.\r\n\r\nParallel research by René Pickhardt and his student suggests that using the [average fee per byte of the block template performs well](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/12).\r\n\r\nAll of these are constants that can be adjusted, there is parallel work exploring these constants and running benchmarks across fee estimators to find a sweet spot.\r\n\r\nSee also work in LND, the [LND Budget Sweeper](https://delvingbitcoin.org/t/lnds-deadline-aware-budget-sweeper/1512), which applies this idea successfully. Their approach is to estimate fees initially with bitcoind, then increment gradually as the confirmation deadline approaches, using a fixed fee budget.\r\n\r\nHistorical data indicates that by doing only the approach in this PR, we are able to [reduce overestimation quite significantly (~29%)](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8).\r\n\r\nThis is particularly useful in scenarios where the Block Policy Estimator recommends a high feerate while the mempool is empty.\r\n<img width=\"1800\" height=\"1090\" alt=\"56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" src=\"https://github.com/user-attachments/assets/c035c40c-8ece-42a7-b290-d29f1ac9bf4d\" />\r\n\r\nAs seen in the image above, there is only one remaining unfixed case: when there is a sudden inflow of transactions and the feerate rises, the Block Policy Estimator takes time to reflect this. In that case, users will continue to see a low feerate estimate until it slowly updates. From the historical data linked above, [this occurs about ~26% of the time](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8)).\r\n\r\nOverall, we observe a **73% success rate with 0% overestimation, and 26% underestimation** with this approach.\r\n\r\nThis PR also includes refactors that enable this work. Rather than splitting the PR and implementing changes incrementally, I opted for an end-to-end implementation:\r\n\r\n### 1. Refactors\r\n\r\n* Separation of feerate format from the fee estimate mode enumerator (separation of concerns, as they are semantically distinct)\r\n* Move logging after fee estimation estimateSmartFee from the wallet to the Block Policy Estimator internal method (also separation of concerns and avoiding leaking fee estimator internals). This change also comes with updating `createTransactionInternal` to log only the fee and its source (fee estimator, fallback fee, etc.), which is more appropriate.\r\n* Separate the fee estimate mode enum from the fee source enumerator (separation of concerns, as they are semantically distinct). This introduces a minor breaking change: the wallet RPCs now return fee *source* instead of fee *reason*, which is more accurate. Let me know if we prefer to keep the field name unchanged while returning the fee source.\r\n* Move the `StringForReason` enum from `common` to the Block Policy Estimator (also separation of concerns)\r\n* Various test file updates and renames for improved accuracy\r\n* Update Block Policy Estimator unit tests to be independent of the mempool and the validation interface\r\n\r\n### 2. Introduce Mempool-Based Fee Estimator and Fee Estimator Manager\r\n\r\n* Introduce a new abstract fee estimator base class that all fee estimators must implement\r\n\r\n* Introduce `FeeRateEstimateResult` as the response type, containing metadata and avoiding the use of out-parameters. This is easily extensible and makes future changes less invasive, as method signatures do not need to change.\r\n\r\n* Add `FeeEstimatorType` enum to identify different fee estimators\r\n\r\n* Make `CBlockPolicyEstimator` derive from the new fee estimator base class\r\n\r\n* Add `FeeRateEstimatorManager`, responsible for managing all fee estimators\r\n\r\n* Update the node context to store a `unique_ptr` to `FeeRateEstimatorManager` instead of `CBlockPolicyEstimator`\r\n\r\n* Update `CBlockPolicyEstimator` to no longer subscribe directly to the validation interface; instead, `FeeRateEstimatorManager` subscribes and forwards relevant notifications\r\n\r\n* Add a percentile calculation function that takes the chunk feerates of a block template and returns feerate percentiles; this can also be reused by the `getblockstats` RPC\r\n\r\n* Add a mempool fee estimator that generates a block template when called, calculates a percentile feerate, and returns the 75th percentile for economical mode or the 50th percentile for conservative mode\r\n\r\n* Add caching to the mempool estimator so that new estimates are generated only every 7 seconds, assuming enough [transactions have propagated](https://bitcoin.stackexchange.com/questions/125776/how-long-does-it-take-for-a-transaction-to-propagate-through-the-network/125777#125777) to make a meaningful difference.\r\n  This heuristic will likely be replaced by requesting block templates via the general-purpose block template cache proposed here: [https://github.com/bitcoin/bitcoin/issues/33389](https://github.com/bitcoin/bitcoin/issues/33389)\r\n\r\n* Update `MempoolTransactionRemovedForBlock` to return the actual block transactions as well\r\n\r\n* Track the weight of block transactions and evicted transactions after each block connection\r\n  This data is tracked for the last 6 mined blocks. A mempool feerate estimate is returned only when the average ratio of mempool transaction weight evicted due to `BLOCK` reasons to block transaction weight is greater than 75%. This heuristic provides rough confidence that the node’s mempool matches that of the majority of the hashrate. The 75% threshold is arbitrary and can be adjusted.\r\n\r\nThere is a caveat when transactions in the local mempool are consistently not mined by the network, as described in #27995 (e.g., due to filtering).\r\nAccounting for these transactions during fee estimation is not necessary, as they should be evicted from the mempool itself (see #33510). Handling this again within fee estimation would be redundant.\r\n\r\n* Persist statistics for the 6 most recent blocks to disk during periodic flushes and shutdown, so this data is available after restarts\r\n* Expose this data to users when running `estimatesmartfee` with verbosity > 2\r\n\r\n<details>\r\n<summary>see example output</summary>\r\n\r\n```\r\nbitcoin-cli estimatesmartfee 1 \"conservative\" 2\r\n```\r\n\r\n```\r\n{\r\n  \"feerate\": 0.00002133,\r\n  \"errors\": [],\r\n  \"blocks\": 2,\r\n  \"mempool_health_statistics\": [\r\n    {\r\n      \"block_height\": 927953,\r\n      \"block_weight\": 3991729,\r\n      \"mempool_txs_weight\": 3942409,\r\n      \"ratio\": 0.987644451815241\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-12-15T11:53:35Z",
      "updated_at": "2026-01-22T18:41:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34075",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 8927,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3135104327,
      "number": 34176,
      "title": "wallet: crash fix, handle non-writable db directories",
      "body": "Make wallet creation and load fail with a clear error when the db directory isn’t writable.\r\n\r\n#### 1) For Wallet Creation\r\n\r\nBefore: creating a wallet would return a generic error:\r\n\"SQLiteDatabase: Failed to open database: unable to open database file\"\r\n\r\nAfter: creating a wallet returns:\r\n\"SQLiteDatabase: Failed to open database in directory <dir_path>: directory is not writable\"\r\n\r\n#### 2) For Wallet Loading\r\n\r\nWe currently allow loading wallets located on non-writable directories. This is problematic\r\nbecause the node crashes on any subsequent write; generating a block is enough to trigger it.\r\nCan be verified just by running the following test on master: https://github.com/furszy/bitcoin-core/commit/85fa4e2910f0a8f43d4ee5a1322cbb69656d85e9 \r\n\r\nAlso, to check directory writability, this creates a tmp file rather than relying on the\r\n`permissions()` functions, since perms bits alone may not reliably reflect actual writability\r\nin some systems.\r\n\r\nTesting Note:\r\nPushed the tests in separate commits so they can be cherry-picked on master for comparison.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-12-29T19:44:56Z",
      "updated_at": "2026-01-22T18:28:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34176",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1125,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1542161958,
      "number": 28591,
      "title": "kernel: chainparams updates for 26.x",
      "body": "Update chainparams pre `26.x` branch off.\r\n\r\nNote: Remember that some variance is expected in the m_assumed_* sizes.\r\n\r\nCloses #28572.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2023-10-04T16:19:29Z",
      "updated_at": "2026-01-22T18:21:28Z",
      "merged_at": "2023-10-09T13:54:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28591",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 171,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2635595853,
      "number": 32857,
      "title": "wallet: allow skipping script paths",
      "body": "While testing MuSig2 integration in #29675 I ran into a Ledger bug https://github.com/LedgerHQ/app-bitcoin-new/issues/329 that was triggered because we signed for a script path in addition to the key path. The bug itself will be fixed, but it seems useful in general to be able to skip script path signing.\r\n\r\nFor example, you may have a 2-of-2 musig() descriptor with some sort of fallback after coins are N blocks old. For both on chain privacy and fee reasons, you don't want to use this path unless absolutely necessary. But our wallet can't know if our co-signer still has their key, so we sign the script path at all times. This could lead to accidental broadcast.\r\n\r\nThis PR introduces a `keypath_only` option (default `false` for now) to:\r\n- the `send` RPC \r\n- the `walletprocesspsbt` RPC.\r\n\r\nThe resulting PSBT won't include `taproot_script_path_sigs`. It does still have `taproot_bip32_derivs` and `musig2_participant_pubkeys`.\r\n\r\nThe `wallet_taproot.py` tests are expanded to cover this behavior.\r\n\r\nIt can also be tested with https://github.com/Sjors/bitcoin/pull/91 and a slightly modified [Moosig](https://github.com/LedgerHQ/moosig). See https://github.com/LedgerHQ/app-bitcoin-new/issues/329 for the rough steps.\r\n\r\nBased on:\r\n- [ ] #32876\r\n\r\nTODO:\r\n- [ ] maybe refactor `MutableTransactionSignatureCreator`\r\n- [ ] add test coverage for `send`\r\n\r\nPotential followups:\r\n- make this default for `musig()` (after #29675)",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-02T14:13:31Z",
      "updated_at": "2026-01-22T17:48:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32857",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1469,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3185680005,
      "number": 34333,
      "title": "fuzz:wallet: add target for wallet receive",
      "body": "Tracking issue (https://github.com/bitcoin/bitcoin/issues/29901)\r\n\r\nthis add fuzz target for wallet receive...\r\n\r\nAlso,  for block height handling for unknown heights\r\n\r\nAllowing `-1` for `conflicting_block_height` in `TxStateBlockConflicted` which is a valid state when deserializing old wallet data where block heights weren't stored. This helps sorting an assertion failure that would occur when `GetTxDepthInMainChain()` encounters transactions with unknown conflicting block heights.\r\n\r\n discovered that `GetTxDepthInMainChain()` would crash with `assert(conf->conflicting_block_height >= 0)` when handling transactions with `-1` (unknown height), even though this is used elsewhere in the codebase.\r\n\r\n**Code inconsistency here below:**\r\n\r\nIn `src/wallet/transaction.h:94`, `-1` is  used for unknown heights:\r\n\r\n```cpp\r\n} else if (data.index == -1) {\r\n    return TxStateBlockConflicted{data.block_hash, /*height=*/-1};  \r\n}\r\n```\r\n\r\nIn `src/wallet/wallet.cpp:1320`, negative heights are handled \r\n\r\n```cpp\r\n// If number of conflict confirms cannot be determined, this means\r\n// that the block is still unknown or not yet part of the main chain,\r\n// for example when loading the wallet during a reindex. Do nothing in that\r\n// case.\r\nif (m_last_block_processed_height < 0 || conflicting_height < 0) {\r\n    return; \r\n}\r\n```\r\n\r\nBut in `src/wallet/wallet.cpp:3299`, the assertion requires `>= 0`:\r\n\r\n```cpp\r\n} else if (auto* conf = wtx.state<TxStateBlockConflicted>()) {\r\n    assert(conf->conflicting_block_height >= 0);  // here it crashes\r\n    return -1 * (GetLastBlockHeight() - conf->conflicting_block_height + 1);\r\n}\r\n```\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-01-18T19:38:24Z",
      "updated_at": "2026-01-22T17:27:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34333",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1672,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2584507258,
      "number": 32729,
      "title": "test,refactor: extract script template helpers & widen sigop count coverage",
      "body": "### Summary\r\n\r\nThis PR extracts a set of cheap, inline helpers for recognizing the most common script templates, clarifies the definition of valid op-codes for pre-Taproot scripts, and splits the existing \"deserialize + check-block\" benchmark into three orthogonal micro-benchmarks.  \r\nThe change is behavior-neutral for consensus and policy - every modified call-site performs the same checks as before, just through clearer helper functions.\r\n\r\n### Context\r\n\r\nWhile working on [`GetSigOpCount` optimizations for known script templates](https://github.com/bitcoin/bitcoin/pull/32532) I noticed that feature-test coverage was [thin for this code path](https://maflcko.github.io/b-c-cov/total.coverage/src/script/script.cpp.gcov.html).  \r\nThis PR therefore adds tests for error cases (malformed push-data encodings) and for the expected sigop totals of the various script templates (including edge cases like a sigop after an `OP_RETURN`).\r\n\r\nGiven the difficulty of reviewing the [original optimizations themselves](https://github.com/bitcoin/bitcoin/pull/32532#issuecomment-2950665350), I split all test / benchmark work into this standalone PR.  \r\nThe recent burst of sigops related refactor activity ([#31624](https://github.com/bitcoin/bitcoin/pull/31624), [#32521](https://github.com/bitcoin/bitcoin/pull/32521), [#32533](https://github.com/bitcoin/bitcoin/pull/32533)) underlines the need for extra safety.\r\n\r\nThe refactors here eliminate magic numbers, deduplicate template checks, and lay groundwork for future performance work.\r\n\r\n### Structure\r\n\r\n* **Benchmarks** - first commits separate deserialization+hashing, validation, and sigop counting so each cost can be measured independently.  \r\n* **Template helpers** - tiny, mechanical commits move each script-template check into `script.h`, replace all ad-hoc byte-checks, and add tests where necessary.  \r\n* **Tests** - a full script-test suite covering malformed `PUSHDATA` sequences and the pre-taproot / accurate sigop totals for every standard template.  \r\n* **pre-taproot opcode ceiling** - documents, enforces, and tests that `OP_CHECKSIGADD` > `MAX_OPCODE`.\r\n* **Extra fuzzing** - enabled all possible opcodes in `ConsumeOpcodeType`",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-06-11T14:44:28Z",
      "updated_at": "2026-01-22T17:18:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32729",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2276,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3104076541,
      "number": 34079,
      "title": "kernel: Remove non-kernel module includes",
      "body": "Found these while attempting to isolate the kernel library sources into their own repository. There still is no mechanism for preventing including headers into the kernel library that don't belong to kernel modules, but it is also fairly straight forward to correct manually for now. However, the changes here might be incomplete.",
      "state": "closed",
      "user": "sedited",
      "created_at": "2025-12-15T21:30:55Z",
      "updated_at": "2026-01-22T16:28:03Z",
      "merged_at": "2025-12-22T14:07:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34079",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 372,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3177864654,
      "number": 34309,
      "title": "guix: stop passing depends sources to codesigning",
      "body": "I think this is just a copy-pasta from the build container (which has existed since this file was introduced in 38eb91eb0616ed6dbe34c23e11588d130fef07f8). I don't see why we'd need the depends sources available when performing codesigning.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-15T15:58:51Z",
      "updated_at": "2026-01-22T16:22:31Z",
      "merged_at": "2026-01-22T16:20:51Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34309",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 289,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 877751403,
      "number": 24539,
      "title": "Add a \"tx output spender\" index",
      "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\nWe use a composite key with 2 parts (suggested by @romanz): hash(spent outpoint) and tx position, with an empty value. Average composite key size is 15 bytes.\r\n\r\nThe spending tx can optionally be returned by `gettxspendingprevout` (even it `-txindex is not set`).",
      "state": "open",
      "user": "sstone",
      "created_at": "2022-03-11T19:32:41Z",
      "updated_at": "2026-01-22T16:16:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24539",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 958,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3199113515,
      "number": 34379,
      "title": "wallet: fix `gethdkeys` RPC for descriptors with partial xprvs",
      "body": "Fixes #34378\r\n\r\nA non-watch-only wallet allows to import descriptors with partial private keys, eg: a multisig descriptor with one private key and one public key. In case an xpub is imported in any such descriptors whose private key the wallet doesn't have, then the `gethdkeys` RPC throws an unhandled error like below when the private keys are requested.\r\n\r\nThis fix ensures that such calls are properly handled by conditionally finding the corresponding xprv and the related functional test is accordingly updated.\r\n\r\n```\r\n➜ bitcoincli -named gethdkeys private=true\r\nerror code: -1\r\nerror message:\r\nmap::at:  key not found\r\n```\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "rkrux",
      "created_at": "2026-01-22T12:08:36Z",
      "updated_at": "2026-01-22T15:59:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34379",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2759,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3128861568,
      "number": 34146,
      "title": "p2p: send first addr self-announcement in separate message 🎄",
      "body": "This makes sure the initial address self-announcement a node sends to a peer happends in a separate P2P message. This has benefits for both inbound and outbound connections:\r\n\r\nFor inbound connections from a peer to us, previously, we might send the self-announcement along with our response to a GETADDR request. However, the self-announcement might replace an address from the GETADDR response. This isn't clean.\r\n\r\nFor outbound connections from us to a peer, previously, it could have happend that we send the self-announcement along with other addresses. Since shortly after connection open, the peer might only have one rate-limiting token for us, and the addresses are shuffeld on arrival, it's possible that the self-announcement gets rate-limited. However, note that these rate-limitings seem to be rare in practice.\r\n\r\nThis is inspired by and based on https://github.com/bitcoin/bitcoin/pull/33699#issuecomment-3462287763. The discussion there should be helpful for reviewers. ",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-12-24T15:38:31Z",
      "updated_at": "2026-01-22T15:23:29Z",
      "merged_at": "2026-01-14T22:16:49Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34146",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1047,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3184839812,
      "number": 34329,
      "title": "rpc,net: Add private broadcast RPCs",
      "body": "Follow up from #29415 \r\n\r\nSending a transaction via private broadcast does not have any way for a user to track the status of the transaction before it gets returned by another peer. The default logs will likely be removed as well in #34267. Nor is there any way to abort a transaction once it has been added to the private broadcast queue.\r\n\r\nThis adds two new RPCs:\r\n- `getprivatebroadastinfo` returns information about what transactions are in the private broadcast queue, including how many times and how recently the transactions have been sent and acknowledged by peers.\r\n- `abortprivatebroadcast` removes a transaction from the private broadcast queue.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-01-18T01:46:20Z",
      "updated_at": "2026-01-22T15:19:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34329",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 695,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2641394506,
      "number": 32876,
      "title": "refactor: use options struct for signing and PSBT operations",
      "body": "Replace the `sign`, `finalize` , `bip32derivs` and `sighash_type` arguments that are passed to `FillPSBT()` and `SignPSBTInput()` with a `PSBTFillOptions` struct.\r\n\r\n```cpp\r\nstruct PSBTFillOptions {\r\n    bool sign{true};\r\n    std::optional<int> sighash_type{std::nullopt};\r\n    bool finalize{true};\r\n    bool bip32_derivs{true};\r\n};\r\n```\r\n\r\nAdditionally this PR introduces:\r\n\r\n```cpp\r\nstruct SignOptions {\r\n    int sighash_type{SIGHASH_DEFAULT};\r\n};\r\n```\r\n\r\nThis is used by `SignTransaction` and the `MutableTransactionSignatureCreator` constructor.\r\n\r\nThese changes make it easier to add additional options later without large code churn, such as `avoid_script_path` proposed in #32857. It also makes the use of default boolean options safer compared to positional arguments that can easily get mixed up.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-04T12:40:44Z",
      "updated_at": "2026-01-22T15:16:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32876",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 866,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2281150274,
      "number": 31668,
      "title": "Added rescan option for import descriptors",
      "body": "Fix related to issue: https://github.com/bitcoin/bitcoin/issues/31263\r\n",
      "state": "open",
      "user": "saikiran57",
      "created_at": "2025-01-16T08:11:27Z",
      "updated_at": "2026-01-22T15:13:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31668",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 114,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2678738082,
      "number": 33014,
      "title": "rpc: Fix internal bug in descriptorprocesspsbt when encountering invalid signatures",
      "body": "Fixes #32849\r\nThe descriptorprocesspsbt RPC was crashing with an internal bug assertion when processing PSBTs with invalid signatures (like invalid Schnorr signatures with SIGHASH_SINGLE | ANYONECANPAY flags). Instead of returning a helpful error message, it would just crash.\r\nThis change replaces the CHECK_NONFATAL call with proper error handling that catches the failure and returns a JSONRPCError with a clear message to the user.\r\nTested with Bitcoin Core v29.0.0 using the exact PSBT from the issue report. The fix now returns proper error messages instead of crashing.",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-07-19T05:15:00Z",
      "updated_at": "2026-01-22T15:12:45Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33014",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 660,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3193554767,
      "number": 34358,
      "title": "wallet: fix removeprunedfunds bug with conflicting transactions",
      "body": "`removeprunedfunds` removes all entries from `mapTxSpends` for the inputs of the pruned tx. However, this is incorrect, because there could be multiple entries from conflicting transactions (that shouldn't be removed as well). This could lead to the wallet creating invalid transactions, trying to double spend utxos.\r\nThe bug persists when the conflicting tx was mined, because the wallet trusts its internal accounting instead of calling `AddToSpends` again.\r\n\r\nThe added test should fail on master.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-21T02:40:34Z",
      "updated_at": "2026-01-22T15:04:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34358",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 565,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3196671528,
      "number": 34375,
      "title": "doc: mempool: fix  `removeUnchecked` incorrect comment",
      "body": "`CTxMemPool::removeUnchecked` description comment is stale and incorrect; the behaviour being described no longer applies in the post-cluster world.  This PR is a simple fix that attempts to correctly describe what is being done in removeUnchecked.\r\n\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2026-01-21T20:16:52Z",
      "updated_at": "2026-01-22T14:48:23Z",
      "merged_at": "2026-01-22T14:45:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34375",
      "labels": [
        "Docs",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 307,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3199200577,
      "number": 34380,
      "title": "test: Fix P2PK script test",
      "body": "I found another script_tests case that isn't behaving the way it was meant to. It's a P2PK spend where we add an `OP_NOP8` to the scriptSig to make it non-push-only. The test should check that [`scriptSig.IsPushOnly()`](https://github.com/bitcoin/bitcoin/blob/691dc830c669061923a7eec677415013f75fd5d8/src/script/interpreter.cpp#L2055) is only enforced in P2SH mode when the scriptPubKey actually matches the P2SH pattern. To test this, we need to **turn on the P2SH flag**.",
      "state": "open",
      "user": "billymcbip",
      "created_at": "2026-01-22T12:35:44Z",
      "updated_at": "2026-01-22T14:44:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34380",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 500,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3174053537,
      "number": 34286,
      "title": "test: verify node state after restart in assumeutxo",
      "body": "## Summary\n\nThis PR replaces the TODO comment in `wallet_assumeutxo.py` (line 242) with actual test assertions that verify node and wallet behavior after a restart during assumeutxo background sync.\n\n## Changes\n\nThe new tests verify:\n- Two chainstates exist (background validation not complete)\n- Background chainstate is still at `START_HEIGHT`\n- Snapshot chainstate has synced to at least `PAUSE_HEIGHT`\n- Wallets cannot be loaded after restart (expected behavior)\n- Wallet backup from before snapshot height cannot be restored\n\n## Motivation\n\nDuring implementation, I discovered that **wallets cannot be loaded after a node restart during assumeutxo background sync**. This is expected behavior because:\n- The wallet loading code checks if required blocks are available for rescanning\n- During assumeutxo background sync, blocks before the snapshot are not available\n- This applies to all wallets, including watch-only wallets created at the snapshot height\n\nThis is a valuable test addition because it documents this expected behavior and ensures it doesn't regress. Users should be aware that if they restart their node during assumeutxo background sync, they won't be able to load their wallets until the background sync completes.\n\n## Related\n\nrefs #28648\n\nAddresses the TODO comment that was originally added as part of the assumeutxo wallet test implementation.",
      "state": "open",
      "user": "yashbhutwala",
      "created_at": "2026-01-14T15:55:59Z",
      "updated_at": "2026-01-22T14:35:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34286",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1422,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1685623460,
      "number": 29278,
      "title": "Wallet:  Add `maxfeerate` wallet startup option",
      "body": "This PR fixes #29220\r\n\r\n- The PR adds a wallet `-maxfeerate` startup option, as the upper limit of wallet transactions fee rate.\r\n\r\n- This fixes the ambiguity of using `maxtxfee` value to check the upper limit of transactions fee rate.\r\n\r\n-  Wallet will not create a transaction with fee rate above `maxfeerate` value. And you can not set wallet fee rate with `settxfee` RPC above `maxfeerate` value.\r\n\r\n- This PR adds a functional test that ensure the behavior is enforced.\r\n \r\n\r\n\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2024-01-18T22:23:49Z",
      "updated_at": "2026-01-22T14:06:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29278",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 531,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2417478258,
      "number": 32138,
      "title": "wallet, rpc: remove settxfee and paytxfee",
      "body": "**Summary**\r\n\r\nThis PR removes the settxfee RPC and paytxfee setting (Bitcoin Core 31.0).\r\nThese two features were deprecated in https://github.com/bitcoin/bitcoin/pull/31278.",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-03-25T18:30:56Z",
      "updated_at": "2026-01-22T13:57:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32138",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 217,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3023781832,
      "number": 33908,
      "title": "kernel: add context‑free block validation API (`btck_check_block_context_free`) with POW/Merkle flags",
      "body": "This PR exposes Bitcoin Core’s context‑free block checks to library users via a new C API entry point, `btck_check_block_context_free`. \r\n\r\nCallers can validate a block’s structure (size/weight, coinbase rules, per‑tx context‑free checks) and optionally re‑run Proof‑of‑Work and Merkle‑root verification without touching chainstate, the block index, or the UTXO set. \r\n\r\nRationale\r\nClients embedding the kernel need a pure block sanity check without requiring node state or disk writes (candidate block validation, for example). This API offers that surface in a single call, with optional PoW/Merkle toggles to avoid redundant work when the header has already been validated or when Merkle verification is deferred.",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-11-18T23:37:30Z",
      "updated_at": "2026-01-22T13:40:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33908",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 818,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3192005892,
      "number": 34355,
      "title": "doc: Fix wrong code in WITH_LOCK doxygen comment",
      "body": "The typo is harmless, but a bit confusing every time i read it",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-20T16:52:27Z",
      "updated_at": "2026-01-22T13:07:28Z",
      "merged_at": "2026-01-22T11:23:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34355",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 111,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2677577590,
      "number": 33008,
      "title": "wallet: support bip388 policy with external signer",
      "body": "External signers such as Ledger, BitBox02 and Jade, when used with multisig, use [BIP388](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki) to display (and constrain) descriptor policies to their users.\r\n\r\nAt least in the case of Ledger (no others so far, see https://github.com/bitcoin/bitcoin/pull/33008#issuecomment-3165080503) this requires us to hold on to an hmac, which proves to the device that the user previously reviewed and approved it.\r\n\r\nThis PR adds a new RPC call `registerpolicy` which converts our descriptor(s) into a BIP388 policy (_partially implemented_), calls a new HWI method `register` (_implemented_) and stores the resulting HMAC (_implemented_).\r\n\r\nWhen signing a transaction using HWI's `signtx` it passes the HMAC along with the PSBT (_TODO_).\r\n\r\nFor convenience the HMAC can be retrieved via `getwalletinfo` (_implemented_). This is useful for scenario's where we can't (yet) complete a transaction via HWI calls.\r\n\r\nNote that the HMAC itself is not specified in BIP388 and may be different for different hardware vendors. So we'll store and echo any hex string the device gives us.\r\n\r\nAn alternative approach to directly supporting BIP388 policies would be to pass the involved descriptors to HWI and have it figure out how to derive a policy.\r\n\r\nTesting:\r\n- make a multisig wallet with a Ledger or other [supported device](https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki#reference-implementation)\r\n  - try https://github.com/Sjors/bitcoin/pull/91 if you're feeling adventurous, it includes this PR\r\n- install https://github.com/bitcoin-core/HWI/pull/791 HWI branch\r\n- call `bitcoin rpc registerpolicy`\r\n- call `bitcoin rpc getwalletinfo` to see the hmac\r\n\r\nTODO:\r\n- [ ] derive policy using `Descriptor` class instead regex madness, implement all constraints\r\n- [ ] pass hmac along when signing\r\n\r\nDepends on:\r\n- [ ] HWI `register` command: https://github.com/bitcoin-core/HWI/pull/791\r\n- [ ] HWI optional `--hmac` argument for `signtx` (if set, bypass the current auto-registration workaround)\r\n\r\nPotential followups:\r\n- pass hmac along when displaying an address. This provides some extra assurance to the user. See https://github.com/bitcoin-core/HWI/pull/647\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-18T15:31:45Z",
      "updated_at": "2026-01-22T12:55:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33008",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3193557787,
      "number": 34359,
      "title": "test: add test for rebroadcast of transaction received via p2p",
      "body": "The wallet doesn't only rebroadcast transactions it created, but also relevant transactions received via p2p. \r\nSince this is not self-evident, add test coverage for it.\r\n\r\nWill keep this in draft for now, because the added test fails intermittently on master. After debugging this I think it is due to a wallet bug, which is fixed in the separate PR #34358.",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-21T02:42:05Z",
      "updated_at": "2026-01-22T12:03:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34359",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 421,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2471245988,
      "number": 32317,
      "title": "kernel: Separate UTXO set access from validation functions",
      "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API (as done [here](https://github.com/sedited/bitcoin/commit/09e05493010119fc60d310d3e7ffc388de441f9a#diff-f638e65d9278276b2a6ac42ffbbd26d079c3dba752feed5038a25a1ee565d320R947))",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-04-21T13:15:46Z",
      "updated_at": "2026-01-22T12:01:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32317",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1886,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3197178191,
      "number": 34377,
      "title": "test: Rename wallet in restore attempt in wallet_assumeutxo",
      "body": "I hope this fixes #34354\r\n\r\nBased on this error from the logs `filesystem error: cannot remove: The process cannot access the file because it is being used by another process` it looks like there still exists a wallet file by the same name from the previous test case hasn't been cleaned up yet by it's process fully. This should be fixed by giving the failing `restorewallet` case a different wallet name and this shouldn't have any further effects on the rest of the test because is expected to fail anyway. The following (successful) call already uses a different wallet name.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2026-01-21T23:31:00Z",
      "updated_at": "2026-01-22T11:59:46Z",
      "merged_at": "2026-01-22T11:59:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34377",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 639,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3110306931,
      "number": 34090,
      "title": "net: Fix `-Wmissing-braces`",
      "body": "On some non-POSIX platforms, Clang emits `-Wmissing-braces` warnings for the `IN6ADDR_ANY_INIT` and `IN6ADDR_LOOPBACK_INIT` macros. For example, on OpenIndiana / illumos:\r\n```\r\n$ uname -srv\r\nSunOS 5.11 illumos-325e0fc8bb\r\n$ clang --version\r\nclang version 21.1.7 (https://github.com/OpenIndiana/oi-userland.git 36a81bf5e5d307d4e85893422600678d46328010)\r\nTarget: x86_64-pc-solaris2.11\r\nThread model: posix\r\nInstalledDir: /usr/clang/21/bin\r\n$ cmake -B build -DCMAKE_GENERATOR=Ninja -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ -DENABLE_IPC=OFF -DAPPEND_CXXFLAGS='-Wno-unused-command-line-argument'\r\n$ cmake --build build\r\n[284/573] Building CXX object src/CMakeFiles/bitcoin_node.dir/net.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/net.cpp:3309:42: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n 3309 |         const CService ipv6_any{in6_addr(IN6ADDR_ANY_INIT), GetListenPort()}; // ::\r\n      |                                          ^~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:479:32: note: expanded from macro 'IN6ADDR_ANY_INIT'\r\n  479 | #define IN6ADDR_ANY_INIT            {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  480 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  481 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  482 |                                         0, 0, 0, 0 }\r\n      |                                         ~~~~~~~~~~\r\n1 warning generated.\r\n[467/573] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/i2p_tests.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/test/i2p_tests.cpp:116:34: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  116 |     const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), /*port=*/7656};\r\n      |                                  ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/i2p_tests.cpp:159:38: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  159 |         const CService addr{in6_addr(IN6ADDR_LOOPBACK_INIT), /*port=*/7656};\r\n      |                                      ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n2 warnings generated.\r\n[483/573] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/netbase_tests.cpp.o\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:505:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  505 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:510:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  510 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0x00f1 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n/export/home/hebasto/dev/bitcoin/src/test/netbase_tests.cpp:515:36: warning: suggest braces around initialization of subobject [-Wmissing-braces]\r\n  515 |         CService(CNetAddr(in6_addr(IN6ADDR_LOOPBACK_INIT)), 0xf1f2 /* port */),\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~\r\n/usr/include/netinet/in.h:484:37: note: expanded from macro 'IN6ADDR_LOOPBACK_INIT'\r\n  484 | #define IN6ADDR_LOOPBACK_INIT       {   0, 0, 0, 0,     \\\r\n      |                                         ^~~~~~~~~~~~~~~~~\r\n  485 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  486 |                                         0, 0, 0, 0,     \\\r\n      |                                         ~~~~~~~~~~~~~~~~~\r\n  487 |                                         0, 0, 0, 0x1U }\r\n      |                                         ~~~~~~~~~~~~~\r\n3 warnings generated.\r\n[573/573] Linking CXX executable bin/test_bitcoin\r\n```\r\n\r\nThe same issue is observed on Windows. For further details, see https://github.com/bitcoin/bitcoin/pull/31507.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-17T14:53:51Z",
      "updated_at": "2026-01-22T11:49:07Z",
      "merged_at": "2026-01-22T11:40:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34090",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 6596,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2829220023,
      "number": 33390,
      "title": "cmake: exclude secp256k1 from all",
      "body": "Instead of setting the EXCLUDE_FROM_ALL target property, pass EXCLUDE_FROM_ALL to `add_subdirectory()`.\r\n\r\nThis has the following advanteges:\r\n\r\n* It is shorter (obviously).\r\n* Target properties are set only in the `CMakeLists.txt` file that defines the target.\r\n* Install rules defined in the subdirectory are excluded as well. This is what we want, because secp256k1 is linked statically.",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-15T13:11:00Z",
      "updated_at": "2026-01-22T11:23:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33390",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 424,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3150016853,
      "number": 34211,
      "title": "build: Alt restore cross-compilation for Android",
      "body": "# build, qt, doc: Add Android GUI support and APK packaging\r\n\r\nThis PR restores cross-compilation for Android (previously removed in #30049 and proposed in #32262) and extends it to support the Bitcoin-Qt GUI and Android Application Package (APK) generation.\r\n\r\nUnlike #32262, which focused on restoring the base cross-compilation, this PR provides a complete path to a functional Android application. It achieves this by updating the `depends` system to handle Android-specific requirements (shared Qt libraries, JNI support), integrating `androiddeployqt` into the CMake build system, and providing a standard Android entry point.\r\n\r\n### Alternatives\r\nThis PR is offered as an alternative to #32262. It incorporates and builds upon the `depends` fixes introduced there while adding the necessary components for a full GUI application and automated APK packaging.\r\n\r\n### Key Changes (mostly from #32262)\r\n- **build**: Restored and updated Android cross-compilation support in the `depends` system. This includes handling Android ABIs and mapping them to Bitcoin Core's `HOST` triples.\r\n- **build**: Added APK generation support via a new `apk_package` CMake target. This target automates the generation of `deploy.json` and the execution of `androiddeployqt` to produce ready-to-install `.apk` files.\r\n- **qt**: Added Android-specific GUI configurations, including a Java entry point (`BitcoinQtActivity.java`), high-resolution icons, and a manifest template.\r\n- **doc**: Added `doc/build-android.md` with detailed instructions for setting up the Android SDK/NDK and building the GUI.\r\n- **util**: Added a deduction guide for `util::Overloaded` to ensure compatibility with modern Android C++ toolchains.\r\n- **depends**: Applied several patches to Qt to fix JNI static linking issues and duplicate symbols encountered during Android builds.\r\n\r\n### Testing\r\nThe changes have been tested on Ubuntu 22.04 targeting `x86_64-linux-android` (API level 34) with NDK r26b and Qt 6.7.3. The resulting APK has been verified to install and run correctly on an Android emulator (see screenshot at the bottom).\r\nAlso it has been tested on a real devices with Android 13 (API level 33) for both abis `arm64-v8a` (aarch64) and `armv7a`.\r\n\r\n**Build Example:**\r\n```bash\r\n# Set environment\r\nexport ANDROID_SDK_ROOT=/path/to/Android/Sdk\r\nexport ANDROID_NDK_ROOT=$ANDROID_SDK_ROOT/ndk/26.1.10909125\r\n\r\n# Build dependencies\r\ngmake -C depends HOST=x86_64-linux-android ANDROID_SDK=$ANDROID_SDK_ROOT ANDROID_NDK=$ANDROID_NDK_ROOT ANDROID_API_LEVEL=34 NO_IPC=1  -j$(nproc)\r\n\r\n# Configure and build APK\r\ncmake -G Ninja -B build --toolchain depends/x86_64-linux-android/toolchain.cmake \\\r\n      -DBUILD_GUI=ON -DANDROID_API_LEVEL=34  -j$(nproc)\r\ncmake --build build --target apk_package  -j$(nproc)\r\n```\r\n\r\n### Note for Reviewers\r\n- Android does not support the system-wide IPC mechanisms used by Bitcoin Core's multiprocess support, so `NO_IPC=1` is currently required.\r\n- CI integration for the Android build is not included in this PR and will be addressed in a follow-up task if deemed necessary.\r\n\r\n### Emulator Screenshot\r\n<details>\r\n  <summary>Click to expand</summary>\r\n  \r\n<img width=\"968\" height=\"2187\" alt=\"Screenshot 2026-01-06 082824\" src=\"https://github.com/user-attachments/assets/9d7b0130-b624-4817-adf4-f5825c8e4c9d\" />\r\n\r\n</details>\r\n\r\n",
      "state": "closed",
      "user": "D33r-Gee",
      "created_at": "2026-01-06T16:48:55Z",
      "updated_at": "2026-01-22T11:22:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34211",
      "labels": [
        "Build system",
        "Android"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 3378,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2089458493,
      "number": 30961,
      "title": "ci: add `LLVM_SYMBOLIZER_PATH` to Valgrind fuzz job",
      "body": "Otherwise:\r\n```bash\r\n\tNEW_FUNC[1/23]: ==4710==WARNING: invalid path to external symbolizer!\r\n==4710==WARNING: Failed to use and restart external symbolizer!\r\n0xb72010  (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0xa6a010) (BuildId: 2087ad415cb752eea259ed750f3b78a7fcb0b43b)\r\n\tNEW_FUNC[2/23]: 0xb72240  (/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/src/test/fuzz/fuzz+0xa6a240) (BuildId: 2087ad415cb752eea259ed750f3b78a7fcb0b43b)\r\n\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-09-24T16:06:30Z",
      "updated_at": "2026-01-22T10:58:18Z",
      "merged_at": "2024-09-26T08:59:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30961",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 530,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2064363526,
      "number": 30866,
      "title": "descriptor: Add proper Clone function to miniscript::Node",
      "body": "Multipath descriptors requires performing a deep copy, so a Clone function that does that is added to miniscript::Node instead of the current shallow copy.\r\n\r\nFixes #30864",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-09-10T19:52:31Z",
      "updated_at": "2026-01-22T10:58:18Z",
      "merged_at": "2025-01-22T11:23:17Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30866",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 229,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2246906275,
      "number": 31548,
      "title": "fuzz: Abort when global PRNG is used before SeedRand::ZEROS",
      "body": "This adds one more check to abort when global PRNG is used before SeedRand::ZEROS in fuzz tests. This is achieved by carving out the two remaining uses. First, `g_rng_temp_path_init`, and second the random fallback for `RANDOM_CTX_SEED`, which isn't used in fuzz tests anyway.\r\n\r\nRequested in https://github.com/bitcoin/bitcoin/pull/31521#issuecomment-2554669015\r\n\r\nCan be tested by reverting fadd568931a2d21e0f80e1efaf2281f5164fa20e and observing an abort when running the `utxo_total_supply` fuzz target.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-12-20T15:30:16Z",
      "updated_at": "2026-01-22T10:58:17Z",
      "merged_at": "2025-01-22T17:40:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31548",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 566,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2287458917,
      "number": 31690,
      "title": "doc: Amend notes on benchmarking",
      "body": "This gives some more context on the motivation and larger picture of benchmarks.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-20T11:46:45Z",
      "updated_at": "2026-01-22T10:58:16Z",
      "merged_at": "2025-01-22T16:45:07Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31690",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 113,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2292810508,
      "number": 31710,
      "title": "Typo fix release-notes-0.10.0.md",
      "body": "# Typo Fix in `release-notes-0.10.0.md`\r\n\r\n## Description\r\nThis pull request corrects the typo in the release notes from \"actualy\" to \"actually.\"\r\n\r\n## Changes\r\n- Fixed the typo \"actualy\" to \"actually\" in the release notes for version 0.10.0.\r\n",
      "state": "closed",
      "user": "BorisNaum",
      "created_at": "2025-01-22T18:00:45Z",
      "updated_at": "2026-01-22T10:58:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31710",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2501800868,
      "number": 32427,
      "title": "(RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store",
      "body": "Opening this PR mostly to get concept/approach feedback.\r\n\r\nThis is motivated by the kernel library, where the internal usage of leveldb is a limiting factor to its future use cases. Specifically it is not possible to share leveldb databases between two processes. A notable use-case for the kernel library is accessing and analyzing existing block data. Currently this can only be done by first shutting down the node writing this data. Moving away from leveldb opens the door towards doing this in parallel. A flat file based approach was chosen, since the requirements for persistence here are fairly simple (no deletion, constant-size entries). The change also offers better performance by making node startup faster, and has a smaller on-disk footprint, though this is negligible in the grand scheme of things.\r\n\r\nThe BlockTreeStore introduces a new data format for storing block indexes and headers on disk. The class is very similar to the existing CBlockTreeDB, which stores the same data in a leveldb database. Unlike CBlockTreeDB, the data stored through the BlockTreeStore is directly serialized and written to flat .dat files. The storage schema introduced\r\nis simple. It relies on the assumption that no entry is ever deleted and that no duplicate entries are written. These assumptions hold for the current users of CBlockTreeDB.\r\n\r\nA write ahead ahead log and boolean flags as file existence checks ensure write atomicity. Every data entry is also given a crc32c checksum to detect data corruption.\r\n\r\nThe change also opens the door towards getting rid of having to reindex the block tree due to corruption (though switching from pruned -> un-pruned still requires extra logic). This would simplify a lot of kernel/validation code, as can be seen in this [commit](https://github.com/TheCharlatan/bitcoin/commit/bfb2709e1d116d4e613601c3f0140f099530159d#diff-28f178018e05634ee3f8ddce3f4e0cec334ae69915cecf92be8299c749d8d470). The implementation here should be fairly robust against corruption (no parallel read/writes, no background compaction).\r\n\r\nAn alternative to this pull request, that could allow the same kernel feature, would be closing and opening the leveldb database only when reading and writing. This might incur a (negligible) performance penalty, but more importantly requires careful consideration of how to handle any contentions when opening, which might have complex side effects due to our current locking mode. It would also be possible to introduce an existing database with the required features for just the block tree, but that would introduce reliance on a new dependency and come with its own tradeoffs. For these reasons I chose this approach.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-05-06T14:27:59Z",
      "updated_at": "2026-01-22T10:58:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32427",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2759,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3138438378,
      "number": 34184,
      "title": "mining: add cooldown to createNewBlock() immediately after IBD",
      "body": "At startup `isInitialBlockDownload()` stops returning true once there’s less than a day of blocks left to sync. Connected mining clients will receive a flood of new templates as these last blocks are connected.\r\n\r\nFix this by briefly pausing block template creation while the best header chain is ahead of the tip. If no tip update happens for one second, we stop waiting.\r\n\r\nIt's not safe to keep waiting, because a malicious miner could announce a header and delay revealing the block, causing all other miners using this software to stall.\r\n\r\nThe cooldown only applies to `createNewBlock()`, which is typically called once per connected client; `waitNext()` remains unchanged.\r\n\r\nFixes #33994\r\n\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-12-31T05:17:32Z",
      "updated_at": "2026-01-22T10:23:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34184",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 762,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2571509113,
      "number": 32685,
      "title": "wallet: Allow read-only database access for info and dump commands",
      "body": "## Problem\r\n\r\nFixes #29559\r\n\r\nThe `bitcoin-wallet info` and `bitcoin-wallet dump` commands currently fail when wallet files are write-protected, throwing \"Database opened in readonly mode but read-write permissions are needed\" errors. This prevents users from safely inspecting write-protected wallet files, which is important for:\r\n\r\n- Security-conscious setups where wallets are stored on read-only filesystems\r\n- Forensic analysis of wallet files without risk of modification\r\n- Backup verification without accidentally corrupting wallet data\r\n- Compliance with principle of least privilege (read-only operations should only require read access)\r\n\r\n## Solution\r\n\r\nThis PR adds comprehensive read-only database support to enable `bitcoin-wallet info` and `dump` commands to work with write-protected wallet files.\r\n\r\n### Key Changes\r\n\r\n**Database Layer (`src/wallet/db.h`, `src/wallet/sqlite.h`, `src/wallet/sqlite.cpp`)**\r\n- Add `read_only` boolean option to `DatabaseOptions` structure  \r\n- Add `IsReadOnly()` virtual method to `WalletDatabase` interface\r\n- Modify `SQLiteDatabase` to properly handle read-only mode:\r\n  - Use `SQLITE_OPEN_READONLY` flag when `read_only=true`\r\n  - Skip write operations (pragma settings, table creation) in read-only mode\r\n  - Maintain full read capability for queries and data retrieval\r\n\r\n**Wallet Tool (`src/wallet/wallettool.cpp`)**\r\n- Update `bitcoin-wallet info` command to use `options.read_only = true`\r\n- Update `bitcoin-wallet dump` command to use `options.read_only = true`\r\n\r\n**Wallet Loading (`src/wallet/walletdb.cpp`)**\r\n- Enhance `LoadWallet()` to detect read-only mode via `database.IsReadOnly()`\r\n- Skip version updates and other write operations when in read-only mode\r\n- Prevent \"Wallet corrupted\" errors during read-only access\r\n\r\n**Legacy Support (`src/wallet/migrate.h`)**\r\n- Add `IsReadOnly()` method to `BerkeleyRODatabase` for consistency\r\n\r\n## Testing\r\n\r\nThe implementation has been thoroughly tested:\r\n\r\n### Manual Testing\r\n- ✅ Created test wallets and made them read-only (`chmod 444`)\r\n- ✅ Verified `bitcoin-wallet info` works with read-only files\r\n- ✅ Verified `bitcoin-wallet dump` works with read-only files\r\n- ✅ Confirmed identical output between read-write and read-only access\r\n- ✅ Verified normal read-write operations remain unaffected\r\n\r\n### Unit Tests\r\nAll existing wallet tests continue to pass, confirming no regression in normal wallet operations.\r\n\r\n### Safety Verification\r\n- File permissions are respected (no writes attempted on read-only files)\r\n- Data integrity maintained (read-only access produces identical results)\r\n- Backwards compatibility preserved (existing workflows unaffected)\r\n\r\n## Security Considerations\r\n\r\nThis change **improves** security by:\r\n- Enabling inspection of wallet files without write access (principle of least privilege)\r\n- Preventing accidental wallet corruption during read-only operations\r\n- Supporting secure forensic analysis workflows\r\n- Reducing attack surface for read-only operations\r\n\r\nThe implementation is conservative and safe:\r\n- Only affects explicitly read-only operations (`info` and `dump` commands)\r\n- No changes to consensus or validation logic\r\n- No impact on normal wallet operations\r\n- Uses SQLite's built-in read-only mode for safety\r\n\r\n## Backwards Compatibility\r\n\r\nFull backwards compatibility is maintained:\r\n- Existing wallet operations work identically\r\n- No API changes for normal use cases  \r\n- No changes to wallet file formats\r\n- No impact on other Bitcoin Core components\r\n\r\n## Related Work\r\n\r\nThis builds upon existing read-only database patterns in Bitcoin Core, particularly the `BerkeleyRODatabase` class used for wallet migration scenarios. \r\n\r\n#28116 ",
      "state": "open",
      "user": "PeterWrighten",
      "created_at": "2025-06-05T20:36:09Z",
      "updated_at": "2026-01-22T09:49:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32685",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 3773,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2607107167,
      "number": 32784,
      "title": "wallet: derivehdkey RPC to get xpub at arbitrary path",
      "body": "Given a (blank) wallet with an `unused(KEY)` descriptor, `derivehdkey \"m/87h/0h/0h\"` gets the xpub or xpriv at any given path.\r\n\r\nThis is particularly useful for multisig setup where it's not desirable to use our default derivations (e.g. 44h).\r\n\r\nI updated the multisig tutorial and the functional test.\r\n\r\nBased on:\r\n- #29136",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-06-20T11:04:39Z",
      "updated_at": "2026-01-22T09:16:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32784",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 381,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3194930713,
      "number": 34366,
      "title": "test: switch order of error code and message check",
      "body": "I feel it'd be easier to debug intermittent test failures if the error message is present in the logs instead of error code. So, switching order of error code and message in the `try_rpc` function to aid error debugging.\r\n\r\nShould help in debugging #34354 IMO. It's an intermittent failure on Windows that I can't reproduce and it's more difficult to figure out what could have gone wrong only by seeing the error code like below in the CI logs. Given that the functional tests pass, I don't see a harm in checking for error message first and throwing it in case of a mismatch.\r\n\r\n```python\r\nAssertionError: Unexpected JSONRPC error code -1\r\n```\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2026-01-21T11:56:12Z",
      "updated_at": "2026-01-22T09:13:41Z",
      "merged_at": "2026-01-21T22:09:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34366",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 2762,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2637847621,
      "number": 32861,
      "title": "Have createwalletdescriptor auto-detect an unused(KEY)",
      "body": "The `createwalletdescriptor` was introduced in #29130 to let users add a `tr()` descriptor to an existing SegWit wallet. The new `addhdkey` method from #29136 introduces a new potential workflow: start from a blank wallet, generate an HD and then add only the descriptors you need, e.g.:\r\n\r\n```sh\r\nbitcoin rpc createwallet TaprootMaxi blank=true\r\nbitcoin rpc addhdkey\r\nbitcoin rpc createwalletdescriptor bech32m\r\n```\r\n\r\nBefore this PR the last line would fail, requiring the user to call `gethdkeys` and copy-paste the xpub.\r\n\r\nThis PR makes `createwalletdescriptor` a bit smarter so it just finds the `unused(KEY)` generated by `hdkey` and uses that.\r\n\r\nIf multiple `unused(KEY)` descriptors are present the user still has to pick one.\r\n\r\nA potential followup is to make our [multisig tutorial](https://github.com/bitcoin/bitcoin/blob/master/doc/multisig-tutorial.md) slightly safer to use. Rather than creating a full wallet, the instruction could be changed to start with a blank wallet and only generate the default legacy descriptor. This avoids accidental use of single sig `p2sh-segwit` and `bech32` addresses.\r\n\r\n(I might do that in #32784, which introduces some other improvements to the tutorial. The situation is still not great; ideally the `importdescriptors` RPC is enhanced to detect when an `xpub` is a child of an hd key and then treats it as if an xpriv was imported.)\r\n\r\nBuilds on #29136.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-03T08:55:40Z",
      "updated_at": "2026-01-22T09:07:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32861",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1462,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2962918038,
      "number": 33745,
      "title": "mining: check witness commitment in submitBlock",
      "body": "When an IPC client requests a new block template via the Mining interface, we hold on to its `CBlock`. That way when they call `submitSolution()` we can modify it in place, rather than having to reconstruct the full block like the `submitblock` RPC does.\r\n\r\nBefore this commit however we forgot to invalidate `m_checked_witness_commitment`, which we should since the client brings a new coinbase.\r\n\r\nThis would cause us to accept an invalid chaintip.\r\n\r\nFix this and add a test to confirm that we now reject such a block. As a sanity check, we add a second node to the test and confirm that will accept our mined block.\r\n\r\nAs first noticed in #33374 the IPC code takes the coinbase as provided, unlike the `submitblock` RPC which calls `UpdateUncommittedBlockStructures()` and adds witness commitment to the coinbase if it was missing.\r\n\r\nAlthough that could have been an alternative fix, we instead document that IPC clients are expected to provide the full coinbase including witness commitment.\r\n\r\nPatch to produce the original issue:\r\n\r\n```diff\r\ndiff --git a/src/node/miner.cpp b/src/node/miner.cpp\r\nindex b988e28a3f..28e9048a4d 100644\r\n--- a/src/node/miner.cpp\r\n+++ b/src/node/miner.cpp\r\n@@ -450,15 +450,10 @@ void AddMerkleRootAndCoinbase(CBlock& block, CTransactionRef coinbase, uint32_t\r\n     }\r\n     block.nVersion = version;\r\n     block.nTime = timestamp;\r\n     block.nNonce = nonce;\r\n     block.hashMerkleRoot = BlockMerkleRoot(block);\r\n-\r\n-    // Reset cached checks\r\n-    block.m_checked_witness_commitment = false;\r\n-    block.m_checked_merkle_root = false;\r\n-    block.fChecked = false;\r\n }\r\n\r\n std::unique_ptr<CBlockTemplate> WaitAndCreateNewBlock(ChainstateManager& chainman,\r\n                                                       KernelNotifications& kernel_notifications,\r\n                                                       CTxMemPool* mempool,\r\ndiff --git a/test/functional/interface_ipc.py b/test/functional/interface_ipc.py\r\nindex cce56e3294..bf1b7048ab 100755\r\n--- a/test/functional/interface_ipc.py\r\n+++ b/test/functional/interface_ipc.py\r\n@@ -216,22 +216,22 @@ class IPCInterfaceTest(BitcoinTestFramework):\r\n             assert_equal(res.result, True)\r\n\r\n             # The remote template block will be mutated, capture the original:\r\n             remote_block_before = await self.parse_and_deserialize_block(template, ctx)\r\n\r\n-            self.log.debug(\"Submitted coinbase must include witness\")\r\n+            self.log.debug(\"Submitted coinbase with missing witness is accepted\")\r\n             assert_not_equal(coinbase.serialize_without_witness().hex(), coinbase.serialize().hex())\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize_without_witness())\r\n-            assert_equal(res.result, False)\r\n+            assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Even a rejected submitBlock() mutates the template's block\")\r\n             # Can be used by clients to download and inspect the (rejected)\r\n             # reconstructed block.\r\n             remote_block_after = await self.parse_and_deserialize_block(template, ctx)\r\n             assert_not_equal(remote_block_before.serialize().hex(), remote_block_after.serialize().hex())\r\n\r\n-            self.log.debug(\"Submit again, with the witness\")\r\n+            self.log.debug(\"Submit again, with the witness - does not replace the invalid block\")\r\n             res = await template.result.submitSolution(ctx, block.nVersion, block.nTime, block.nNonce, coinbase.serialize())\r\n             assert_equal(res.result, True)\r\n\r\n             self.log.debug(\"Block should propagate\")\r\n             assert_equal(self.nodes[1].getchaintips()[0][\"height\"], current_block_height + 1)\r\n```\r\n",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-10-30T12:02:55Z",
      "updated_at": "2026-01-22T09:01:05Z",
      "merged_at": "2025-11-12T15:04:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33745",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3799,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2647773300,
      "number": 32895,
      "title": "wallet: Prepare for future upgrades by recording versions of last client to open and decrypt",
      "body": "When a wallet is automatically upgraded, we always do so in a way that allows the user to load their wallet in an older version. When the user loads their wallet into an upgraded version again, the wallet may not perform the automatic upgrade and end up with upgraded and non-upgraded material in the wallet.\r\n\r\nIf we write some information about the last client to open the wallet, we would be able to detect these upgrade-downgrade-upgrade situations and perform another upgrade if so. However, in order for this to work, we need to have implemented writing such information into versions prior to the ones which introduce new automatic upgrades.\r\n\r\nWe are already writing the CLIENT_VERSION into all wallets in a \"version\" record, although this record is not updated in the same way across all previous versions. Since v24.0, we are always updating the record when the client version differs, but prior to that, the record would only be updated when the client version is newer. Even so, we can use this record to store the last client version.\r\n\r\nThe first commit decouples the written client version from the node version. This aids in development of new features. The version is entirely decoupled from previous versions by requiring all versions to have bit 30 set, and the initial version being `0 | (1 << 30)`. The versions just need to be at least 299900, and forcing bit 30 to be set was an easy way to achieve this.\r\n\r\nHowever, using version numbers is not as flexible as feature flags, so the second commit introduces the concept of Wallet Client Features. These flags are distinct from the existing Wallet Feature Flags since they are conceptually different. These are written in a separate record, and the wallet client version is incremented to `(1 << 0) | (1 << 30)`.\r\n\r\nLastly, since some upgrades may need private keys and can only occur after the wallet is decrypted, the third commit also adds a last decrypted features flags record to record the features of the last client to decrypt the wallet.\r\n\r\nThe result is that we will now be able to detect a downgrade down to v24.0 and be able to implement in parallel multiple features that require automatic upgrades.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-07T20:13:08Z",
      "updated_at": "2026-01-22T08:53:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32895",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683353492,
      "number": 33033,
      "title": "wallet, sqlite: Encapsulate SQLite statements in a RAII class",
      "body": "SQLite statements are C objects which can be long lived, so having them be initialized in a constructor, and cleanup everything in a destructor, makes the sqlite code cleaner and easier to read. This also lets us have the various functions needed to interact with sqlite statements be member functions.\r\n\r\nThis will be particularly useful in future work which makes use of more complicated SQL statements.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:43:08Z",
      "updated_at": "2026-01-22T08:29:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33033",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 467,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2856019872,
      "number": 33472,
      "title": "guix: documented shasum gathering command",
      "body": "When a PR requires proof of Guix builds (sha256sums), the PR author or reviewer uses a not well documented command to collect the sha256sums of build outputs or manually gathers them from files.\r\n\r\nThis pull request introduces a new section in the documentation, providing some documentation on the command's functionality and usage.",
      "state": "open",
      "user": "janb84",
      "created_at": "2025-09-24T08:41:36Z",
      "updated_at": "2026-01-22T08:28:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33472",
      "labels": [
        "Build system",
        "DrahtBot Guix build requested"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683376326,
      "number": 33034,
      "title": "wallet: Store transactions in a separate sqlite table",
      "body": "The wallet uses SQLite as a key-value store even though SQLite is a powerful relational database engine. This causes us numerous headaches due to the need to serialize multiple fields together, and since record read from the database during loading can come in any order.\r\n\r\nNotably, for transactions, if we were able to load them in the transaction order assigned by the wallet, PRs like #27865 would be a bit simpler and easier to reason about.\r\n\r\nThis PR makes it possible for us to do that by storing transactions in a separate table. This table has a column for each field in `CWalletTx`, which lets us use a SQL statement like `SELECT * FROM transactions ORDER BY pos` which guarantees us the order in which the transactions are loaded into the wallet.\r\n\r\nThe eventual goal is to use SQLite as a relational database with tables that store our keys and other metadata that can reference each other so that the wallet doesn't just use the database as a storage mechanism. But that is still a work in progress.\r\n\r\nThis PR makes use of the last client opened features introduced in #32895 to determine when the old record style needs to be upgraded to the new transactions table. This should give us sufficient upgrade-downgrade-upgrade handling to not lose any funds.\r\n\r\nDepends on #32763, #32895, #32985, #33032, #33033",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:52:54Z",
      "updated_at": "2026-01-22T08:26:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33034",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1377,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2712708880,
      "number": 33112,
      "title": "wallet: relax external_signer flag constraints",
      "body": "The `external_signer` indicates that an external signer device may be called via [HWI](https://github.com/bitcoin-core/HWI) or [equivalent](https://github.com/bitcoin/bitcoin/blob/master/doc/external-signer.md#signer-api) application.\r\n\r\nWhen it was initially introduced some additional constraints were placed on wallets with this flag: it had to be a descriptor wallet and watch-only. Also the flag could not be added or removed later.\r\n\r\nThe constraints aren't a problem for the main supported and documented use case of connecting a single hardware wallet and using it just like a normal single sig Bitcoin Core wallet.\r\n\r\nBut they get in the way of more advanced constructions, which are becoming increasingly practical especially once MuSig2 support lands with #29675. See https://github.com/Sjors/bitcoin/pull/91 and https://github.com/bitcoin-core/HWI/pull/794 for a collection of changes on top of that which facilitate MuSig2 with a hardware wallet. And see #24861.\r\n\r\nThis pull requests drops the following constraints:\r\n\r\n- `disable_private_keys` is no longer mandatory (but still default)\r\n- `external_signer` flag is now mutable\r\n\r\nAdditionally it does the following:\r\n\r\n- make the `blank` option for `createwallet` consistent with regular wallets by _not_ importing keys from the connected signer\r\n- avoid going through `createTransaction` for external signers (otherwise the GUI breaks)\r\n- update `external-signer.md` mainly to use named arguments and point out a GUI setting\r\n\r\n\r\nThis should no noticeable effect on the default single sig use case described above.\r\n\r\n \r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-08-01T10:11:18Z",
      "updated_at": "2026-01-22T08:15:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33112",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3090774381,
      "number": 34047,
      "title": "cmake: Add fail pattern to `try_append_cxx_flags`",
      "body": "This PR addresses scenarios where the build environment, such as OSS-Fuzz, provides the `-Wno-error=unknown-warning-option` flag, which undermines our use of `-Werror` when checking compiler flags.\r\n\r\nTo reproduce the issue on the master branch @ c1f0a89d9caeb62a0a5f3462b454746941e626e6:\r\n```\r\n$ env CXX=clang++ CC=clang CXXFLAGS=\"-Wno-error=unknown-warning-option\" cmake -B build 2>&1 | grep WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES\r\n-- Performing Test CXX_SUPPORTS__WDUPLICATED_BRANCHES - Success\r\n```\r\n\r\nThis output shows that the `-Wduplicated-branches` flag is incorrectly treated as recognised by the compiler.\r\n\r\nNoticed while working on the [migration](https://github.com/google/oss-fuzz/pull/14457) to Ubuntu 24.04 in OSS-Fuzz.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-10T21:14:51Z",
      "updated_at": "2026-01-22T08:08:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34047",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 822,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3149207404,
      "number": 34208,
      "title": "bench: add fluent API for untimed `setup` steps in nanobench",
      "body": "### Context\r\nAs described in https://github.com/martinus/nanobench/issues/130, we have a few benchmarks where we have to reset the state between runs, otherwise the repetitions will do something else than the first iteration.\r\n\r\n### Upstream\r\nI have opened a PR to `nanobench` to introduce an untimed setup phase, see: https://github.com/martinus/nanobench/pull/136\r\nUnfortunately the author has health issues and couldn't contribute to it in the past 2 years.\r\n\r\n### Tests\r\n\r\nTests were only added upstream, would be a bit awkward to wire in `nanobench.h` outside the benchmarking setup:\r\nhttps://github.com/martinus/nanobench/pull/136/changes/58350cfe5912d7e0533ccfcd759eea5d62eb55bb#diff-88160f647ce57661afe7d755fa70a5fa342a2b79d72d3511596878e69ed5cdc3\r\n\r\n### Fix\r\nI have moved the changes here as well and applied it to a few simple benchmarks as demonstration.\r\nWe can revert ones that are controversial and add other ones in follow-ups, this PR is mostly meant to add the `setup` feature.\r\n\r\n### Benchmarks\r\nMost benchmarks show a modest \"speedup\", others a \"slowdown\" - but it's only the effect of the setup that's not measured anymore - and a `run` phase which does the same operation in each epoch iteration (wallet benchmark changes were reverted since for simplicity):\r\n<img width=\"1496\" height=\"882\" alt=\"image\" src=\"https://github.com/user-attachments/assets/34c14565-f3df-41e5-9a86-95b2ca21703a\" />\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:45:35Z",
      "updated_at": "2026-01-22T07:37:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34208",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1475,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2803909911,
      "number": 33324,
      "title": "blocks: add `-reobfuscate-blocks` argument to enable (de)obfuscating existing blocks",
      "body": "### Context\r\n\r\nRecent discussions highlighted that many nodes which synced before Bitcoin Core v28 have their block and undo files stored effectively in the clear (zero XOR key). This patch adds a simple, resumable maintenance tool to obfuscate previously raw block files, rotate an existing key to a fresh random one, or de-obfuscate (set key to zero) if consciously chosen, all without requiring resync. The operation can be cancelled and restarted safely.\r\n\r\n### Implementation\r\n\r\nThe new startup option `-reobfuscate-blocks[=VALUE]` accepts either 16 hex characters as an exact 8-byte XOR key (little-endian in-memory layout) or a boolean to generate a random 64-bit key. e.g. `-reobfuscate-blocks=0000000000000000` sets the key to zero, effectively removing obfuscation.\r\n\r\nIf we detect unobfuscated blocks at start time we suggest this new option in a warning.\r\n\r\nAt startup, we iterate over all undo and block files (grouping the block and undo files for more uniform iteration), read them with the old XOR key and write them back with the new key (`<name>.reobfuscated`). The implementation actually combines the two keys and reads directly into the new obfuscated version to only do a single iteration over the data. This works if the original blocks aren't obfuscated or if the new blocks aren't or if both are.\r\nAfter successful write, we immediately delete the old file. Once all files are staged, we rename them back and atomically swap `xor.dat.reobfuscated` → `xor.dat` and continue operation.\r\n\r\nWe log the old and new keys and print progress roughly per-percent as files complete (i.e. max 100 progress logs).\r\n\r\n### Constraints\r\n\r\n* Re-obfuscation resumes automatically (detected via `xor.dat.reobfuscated`) even without the flag. In worst-case a crash should only force us to redo previous work.\r\n* Single-threaded, processing one file at a time to keep code simple and avoid complexity of interleaving renames and key swaps across threads.\r\n* Fast in practice with sequential read/modify/write per blockfile - after recent obfuscation vectorization, this path is very quick.\r\n\r\n### Reproducer\r\n\r\n```bash\r\ncmake -B build -DENABLE_IPC=ON -DBUILD_GUI=ON\r\ncmake --build build -j$(nproc)\r\n# command line\r\n./build/bin/bitcoind -reobfuscate-blocks -stopatheight=1\r\n# same with GUI\r\n./build/bin/bitcoin-qt -reobfuscate-blocks -stopatheight=1\r\n```\r\n\r\n### Single-threaded Performance\r\n\r\n cpu                 | hdd/ssd | block count | size    | files  | time (min) | blocks/min \r\n---------------------|---------|-------------|---------|--------|------------|------------\r\n Apple M4 Max laptop | SSD     | ~909k       | ~707 GB | 9,982  | 8.4        | 146,613    \r\n Intel Core i9       | SSD     | ~909k       | ~725 GB | 10,238 | 23.1       | 39,351     \r\n Raspberry Pi 5      | SSD     | ~914k       | ~728 GB | 10,276 | 72.78      | 12,558     \r\n Intel Core i7       | HDD     | ~909k       | ~720 GB | 10,156 | 208.7      | 4,356      \r\n Raspberry Pi 4B     | HDD     | ~915k       | ~730 GB | 10,304 | 1467       | 624        \r\n\r\n----\r\n\r\nSimilar work:\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/32451\r\n* https://github.com/andrewtoth/blocks-xor\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-09-05T23:51:29Z",
      "updated_at": "2026-01-22T05:44:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33324",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3246,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3190306599,
      "number": 34350,
      "title": "wallet: fix importprunedfunds to allow importing spending txs",
      "body": "Fixes #21647\r\n\r\nThis PR fixes an issue where the `importprunedfunds` RPC only allowed importing\r\ntransactions that credit the wallet, but rejected transactions that spend from\r\nthe wallet.\r\n\r\nThis could lead to incorrect wallet balance in pruned or partially-synced setups\r\nwhere a spending transaction is missing: the wallet would remember receiving\r\nfunds but forget that they were already spent.\r\n\r\nThe fix extends the check to also allow transactions that are `IsFromMe()`.\r\n\r\nA functional test is added to cover importing a spending transaction and ensure\r\nit is correctly accepted and restored to the wallet.\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "crackedhandle",
      "created_at": "2026-01-20T08:25:41Z",
      "updated_at": "2026-01-22T04:19:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34350",
      "labels": [
        "Wallet",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 684,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2876629729,
      "number": 33512,
      "title": "coins: use number of dirty cache entries in flush warnings/logs",
      "body": "Revival of https://github.com/bitcoin/bitcoin/pull/31703 with all outstanding review feedback addressed.\r\n\r\n<details>\r\n<summary>Changes compared to the original</summary>\r\n\r\n* `EmplaceCoinInternalDANGER` is also fuzz tested now\r\n* Warning and logging moved from `FlushStateToDisk` to `CCoinsViewDB::BatchWrite`, ensuring `AssumeUTXO` snapshot writes also display progress warnings\r\n* Removed the redundant changed counter in `BatchWrite` since we now track `dirty_count` directly\r\n* All instances use `dirty_count` (not num_dirty) and parameter alignment is corrected\r\n\r\n</details>\r\n\r\n----\r\n\r\n> Since #28280 and #28233, the percentage of dirty entries in the cache when a flush happens may in practice be far from 100%. The log output, the decision to warn about a large flush (#31534), and the disk-full detection, however always use the entire size of the cache.\r\n>\r\n> Fix this by keeping track of the number of dirty entries in `CCoinsViewCache`, and using that number. We've dropped the usage of `DynamicMemoryUsage` as it's the wrong metric, even before the non-wiping flushes were introduced (if everything is dirty, memory usage is correlated with, but not the same as, the amount of disk space written or used). They could be improved by keeping track of proper write size estimates in a follow-up, but here we're just using a fixed 48 bytes per entry estimate.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-01T02:24:51Z",
      "updated_at": "2026-01-22T02:54:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33512",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 1433,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2902028046,
      "number": 33592,
      "title": "contrib: remove deprecated --deep signing from macdeployqtplus",
      "body": "**Description**\r\nRemoved the deprecated --deep flag from codesign in macdeployqtplus and replaced it with an explicit recursive signing process for all binaries, frameworks, and plugins.\r\nFixes #32486 \r\n\r\n<img width=\"624\" height=\"370\" alt=\"Screenshot 2025-10-10 at 2 36 16 AM\" src=\"https://github.com/user-attachments/assets/6329b67e-e400-4d8d-947c-25bceab4cb55\" />\r\n\r\n\r\n**Steps To Reproduce**\r\nN/A since not a bug only deprecating an arg\r\n\r\n**Steps To Test**\r\n- Set up the app normally.\r\n- Signing would be logged\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "amishhaa",
      "created_at": "2025-10-09T21:11:13Z",
      "updated_at": "2026-01-22T02:05:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33592",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2641,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3119599294,
      "number": 34124,
      "title": "refactor: make `CCoinsView` a purely virtual abstract base class",
      "body": "### Problem\r\n`CCoinsView` serves as the interface for the coins database layer, but historically had a dual nature that caused confusion:\r\n\r\n* It provided default noop implementations (returning `std::nullopt`, `uint256()`, `false`, `nullptr`) instead of being pure virtual\r\n* Callers could instantiate a bare `CCoinsView` and get silent no-op behavior\r\n* Mixing the interface definition with a built-in dummy implementation blurred the abstraction boundary\r\n\r\n### Context\r\n\r\nThis is part of ongoing coins caching cleanup efforts such as #34132, #33866, #33018, and #33512.\r\n\r\n### Fix\r\n\r\nThis PR makes `CCoinsView` a pure abstract interface and introduces an explicit noop implementation, in tiny incremental steps to ease review:\r\n\r\n* Add `CCoinsViewEmpty` as an explicit noop coins view for tests, benchmarks, and dummy backends\r\n* Replace all direct `CCoinsView` instantiations with `CCoinsViewEmpty`\r\n* Incrementally make all `CCoinsView` methods pure virtual (`GetCoin`, `GetBestBlock`, `BatchWrite`, `EstimateSize`, `Cursor`, `GetHeadBlocks`, `HaveCoin`)\r\n* Remove the legacy default implementations from `coins.cpp`\r\n* Update the coins view fuzzer to switch between a real database-backed view and `CCoinsViewEmpty`\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T08:47:33Z",
      "updated_at": "2026-01-22T00:52:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34124",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1289,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2925411752,
      "number": 33646,
      "title": "log: check fclose() results and report safely in logging.cpp",
      "body": "`fclose()` can report write errors (for example if the disk is full or the filesystem has a problem). Right now, some `fclose()` calls in `src/logging.cpp` ignore the return value. This means errors might go unnoticed and log lines could be lost without warning.\r\n\r\n## What this PR does:\r\n- Add a small helper that prints `fclose()` errors to `stderr` (with path and errno).\r\n- In shutdown: close `m_fileout` safely and report errors.\r\n- In reopen: open the new file, swap it in, close the old one, and report errors if closing fails.\r\n- In shrink/rotate: check all `fclose(file)` calls and report failures.\r\n\r\nNo other behavior changes. Normal logging, rotation, and console output remain unchanged.",
      "state": "open",
      "user": "cedwies",
      "created_at": "2025-10-17T19:06:08Z",
      "updated_at": "2026-01-22T00:50:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33646",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 761,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2937452835,
      "number": 33680,
      "title": "validation: do not wipe utxo cache for stats/scans/snapshots",
      "body": "Revival of https://github.com/bitcoin/bitcoin/pull/30610#issuecomment-3432564955 with the remaining comments applied on top\r\n\r\n> Since #28280, the cost of a non-wiping sync of the UTXO cache is only proportional to the number of dirty entries, rather than proportional to the size of the entire cache. Because of that, there is no reason to perform a wiping flush in case the contents of the cache is still useful.\r\n> \r\n> Split the `FlushStateMode::ALWAYS` mode into a FORCE_SYNC (non-wiping) and a FORCE_FLUSH (wiping), and then use the former in `scantxoutset`, `gettxoutsetinfo`, snapshot creation.\r\n\r\n(slightly updated after #30214)",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-22T14:46:09Z",
      "updated_at": "2026-01-22T00:06:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33680",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 697,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3196205347,
      "number": 34372,
      "title": "QA: wallet_migration: Test several more weird scenarios",
      "body": "Includes the \"survive\" file test from #34222 ",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2026-01-21T17:44:07Z",
      "updated_at": "2026-01-21T23:44:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34372",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 101,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1389230610,
      "number": 27865,
      "title": "wallet: Track no-longer-spendable TXOs separately",
      "body": "In #27286, the wallet keeps track of all of its transaction outputs, even if they are already spent or are otherwise unspendable. This TXO set is iterated for balance checking and coin selection preparation, which can still be slow for wallets that have had a lot of activity. This PR aims to improve the performance of such wallets by moving UTXOs that are definitely no longer spendable to a different map in the wallet so that far fewer TXOs need to be iterated for the aforementioned functions.\r\n\r\nUnspendable TXOs (not to be confused with Unspent TXOs) are those which have a spending transaction that has been confirmed, or are no longer valid due to reorgs. TXOs that are spent in unconfirmed transactions remain in the primary TXO set, and are filtered out of balance and coin selection as before.\r\n\r\nDepends on #27286",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-06-12T18:40:10Z",
      "updated_at": "2026-01-21T23:24:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27865",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 876,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3161267008,
      "number": 34246,
      "title": "verify-commits: Allow specific commits to allow sha1",
      "body": "Allow specific commits to not require the sha1 check.\r\n\r\nFixes the CI for aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9 which uses SHA1 somewhere in the key's self signatures.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-10T00:29:36Z",
      "updated_at": "2026-01-21T22:34:24Z",
      "merged_at": "2026-01-13T23:02:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34246",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 223,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2519262912,
      "number": 32497,
      "title": "merkle: pre‑reserve leaves to prevent reallocs with odd vtx count",
      "body": "#### Summary\r\n\r\n`ComputeMerkleRoot` [duplicates the last hash](https://github.com/bitcoin/bitcoin/blob/39b6c139bd6be33699af781f1d71f6fed303d468/src/consensus/merkle.cpp#L54-L56) when the input size is odd. If the caller provides a `std::vector` whose capacity equals its size, that extra `push_back` forces a reallocation, doubling its capacity (causing peak memory usage of 3x the necessary size).\r\n\r\nThis affects roughly half of the created blocks (those with odd transaction counts), causing unnecessary memory fragmentation during every block validation.\r\n\r\n#### Fix\r\n\r\n* Pre-reserves vector capacity to account for the odd-count duplication using `(size + 1) & ~1ULL`.\r\n    * This syntax produces [optimal assembly](https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2553107836) across x86/ARM and 32/64-bit platforms for GCC & Clang.\r\n* Eliminates default construction of `uint256` objects that are immediately overwritten by switching from `resize` to `reserve` + `push_back`.\r\n\r\n#### Memory Impact\r\n\r\n[Memory profiling](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3563724551) shows **50% reduction in peak allocation** (576KB → 288KB) and elimination of reallocation overhead.\r\n\r\n#### Validation\r\n\r\nThe benchmark was updated to use an odd leaf count to demonstrate the real-world scenario where the reallocation occurs.\r\n\r\nA full `-reindex-chainstate` up to block **896 408** ran without triggering the asserts.\r\n\r\n<details>\r\n<summary>Validation asserts</summary>\r\n\r\nTemporary asserts (not included in this PR) confirm that `push_back` never reallocates and that the coinbase witness hash remains null:\r\n```cpp\r\nif (hashes.size() & 1) {\r\n    assert(hashes.size() < hashes.capacity()); // TODO remove\r\n    hashes.push_back(hashes.back());\r\n}\r\n\r\nleaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even\r\nleaves.emplace_back();\r\nassert(leaves.back().IsNull()); // TODO remove\r\n```\r\n\r\n</details>\r\n\r\n#### Benchmark Performance\r\n\r\nWhile the main purpose is to improve predictability, the reduced memory operations also improve hashing throughput slightly.\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-05-14T13:01:42Z",
      "updated_at": "2026-01-21T22:31:40Z",
      "merged_at": "2026-01-20T23:47:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32497",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2169,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3132300728,
      "number": 34158,
      "title": "torcontrol: Remove libevent usage",
      "body": "This is part of the effort to remove the libevent dependency from our code base: https://github.com/bitcoin/bitcoin/issues/31194\r\n\r\nThere is a dependency on #32061 but it only really needs one commit which is cherry-picked here in first position (add `LineReader`). I hope that a first chunk of that PR can be sliced off and reviewed independently so this PR here is not blocked by it.\r\n\r\nThe current approach tries to reuse existing code and follows roughly similar design decisions. It replaces the libevent-based async I/O with blocking I/O utilizing the existing `Sock` and `CThreadInterrupt`. The controller runs in a dedicated thread.\r\n\r\nThere are some optional code modernizations thrown in made along the way (namings, constexpr etc.). These are not strictly necessary but make the end result with the new code more consistent.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-27T14:20:31Z",
      "updated_at": "2026-01-21T22:30:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34158",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 869,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167650906,
      "number": 34269,
      "title": "wallet: disallow creating new or restoring to an unnamed (default) wallet",
      "body": "We've been moving in the direction that all wallets must have a name. Therefore, we shouldn't allow creating new unnamed wallets. `createwallet`, `restorewallet`, and the wallet tool's `create` and `createfromdump` all now require the user to provide a non-empty wallet name when creating/restoring a wallet.\r\n\r\nThe GUI is already enforcing this, but we were not enforcing it for RPCs or in the underlying `CreateWallet` and `RestoreWallet` functions.\r\n\r\nWallet migration does still need to be able to restore unnamed wallets, so there is a new argument to `RestoreWallet` to explicitly allow that behavior for migration only.",
      "state": "closed",
      "user": "achow101",
      "created_at": "2026-01-12T23:39:06Z",
      "updated_at": "2026-01-21T21:57:14Z",
      "merged_at": "2026-01-21T21:57:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34269",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 700,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999254279,
      "number": 33854,
      "title": "fix assumevalid is ignored during reindex",
      "body": "During a reindex, the assumevalid setting may be ignored if the chainwork of the best header is below `minimumchainwork`. This happens when the previous IBD was stopped before connecting enough blocks to reach the required `minimumchainwork`. The assumevalid block will also be missing from the block index because the assumevalid block is set to match the `minimumchainwork`. See [Issue #31494](https://github.com/bitcoin/bitcoin/issues/31494).\r\n\r\nAs a result, `reindex` can take significantly longer to complete than necessary.\r\n\r\nThis PR addresses the issue by modifying reindex behaviour: if the chainwork of the `best_header` is below `minimumchainwork`, the node skips the `ActivateBestChain()` step and proceeds directly to synchronisation.\r\n\r\nThis PR takes a different approach from [PR #31615](https://github.com/bitcoin/bitcoin/pull/31615) to keep the validation path for `reindex` the same as the regular IBD validation path.\r\n\r\nDevelopers benchmarking IBD with `-reindex` may find this behaviour undesirable. In such cases, it’s recommended to use `-reindex-chainstate` instead or ensure that the available blocks have sufficient chainwork.\r\n\r\n`libbitcoinkernel` exposes the `ImportBlocks` function and expects `reindex` to connect blocks, so an attempt was made to preserve the existing behaviour for `libbitcoinkernel`.",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-11-11T14:21:14Z",
      "updated_at": "2026-01-21T21:29:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33854",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1375,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3037988791,
      "number": 33929,
      "title": "test: Remove `system_tests/run_command` runtime dependencies",
      "body": "`system_tests` currently rely on `cat`, `echo`, `false` and `sh` being available in `PATH` at runtime.\r\n\r\nThis PR:\r\n1. Removes these dependencies.\r\n2. Reduces the number of platform-specific code paths.\r\n\r\nThe change is primarily motivated by my work on maintaining the [`bitcoin-core`](https://packages.guix.gnu.org/packages/bitcoin-core) package in Guix. It enables the removal of the existing `bash` and `coreutils` native inputs, which in turn makes it possible to drop the implicit dependency on `qtbase@5` (see https://codeberg.org/guix/guix/pulls/4386#issuecomment-8613333).\r\n\r\nBased on https://github.com/bitcoin/bitcoin/pull/34349.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-23T23:03:10Z",
      "updated_at": "2026-01-21T19:36:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33929",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 701,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2913595315,
      "number": 33622,
      "title": "docs: add doc comment for SRD selection algorithm",
      "body": "The params documentation is missing `change_fee` and the description is lacking recent changes.",
      "state": "open",
      "user": "yancyribbens",
      "created_at": "2025-10-14T13:05:59Z",
      "updated_at": "2026-01-21T18:46:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33622",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 145,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3054407979,
      "number": 33966,
      "title": "refactor: disentangle miner startup defaults from runtime options",
      "body": "The interaction between node startup options like `-blockreservedweight` and runtime options, especially those passed via IPC, is confusing.\r\n\r\nThey're combined in `BlockAssembler::Options`, which this PR gets rid of in favour of two distinct structs:\r\n\r\n1. `BlockCreateOptions`: used by interface clients. As before, IPC clients have access to a safe / sane subset, whereas RPC and test code can use all fields.\r\n2. `MiningArgs`: these are set once during node startup\r\n\r\nBoth structs have a member for the maximum block height, which is not a problem since they're different structs. The one on `MiningArgs` (`block_max_weight`) matches `-maxblockheight` and is left alone. The one on `BlockCreateOptions` (`block_max_weight`) is an optional, it's set by `ApplyMiningDefaults` only if empty. \r\n\r\nThis all happens in the last commit and requires some preparation to keep things easy to review.\r\n\r\nWe get rid of `BlockAssembler::Options` but this is used in many tests. Since large churn is inevitable, we might as well switch all tests, bench and fuzzers over to the Mining interface. The first (non-base) commit does that, dramatically reducing direct use of `BlockAssembler`. Two exceptions are documented in the commit message. Because `test_block_validity` wasn't available via the interface and the block_assemble benchmark needs it, it's moved from `BlockAssembler::Options` to `BlockCreateOptions` (still not exposed via IPC).\r\n\r\nWe need access to mining related defaults and structs from both the miner and node initialization code. To avoid having to pull in all of `BlockAssembler` for the latter, the second commit introduces `node/mining.h` and moves constants and structs there from `src/node/types.h` (`BlockCreateOptions`, `BlockWaitOptions`, `BlockCheckOptions`) and `src/node/miner.h` (`DEFAULT_PRINT_MODIFIED_FEE`).\r\n\r\nI considered also moving `DEFAULT_BLOCK_MAX_WEIGHT`, `DEFAULT_BLOCK_RESERVED_WEIGHT`, `MINIMUM_BLOCK_RESERVED_WEIGHT` and `DEFAULT_BLOCK_MIN_TX_FEE` there from `policy.h`, since they are distinct from relay policy and not needed by the kernel. But this seems more appropriate for a follow-up and requires additional discussion.\r\n\r\nThe meat and potatoes of this PR is split between the three last commits for easier review:\r\n\r\n1. Adds `node/mining_args.{h,cpp}` and move the options checking out of `init.cpp`, without adding storage\r\n2. Add `block_max_weight` to `BlockCreateOptions` as explained above\r\n3. Introduce the `MiningArgs` struct, add it to the `NodeContext`, expand `mining_args.cpp` to store it, pass it to `BlockAssembler`, etc.\r\n\r\nI kept variable renaming and other formatting changes to a minimum to ease review with `--color-moved=dimmed-zebra`.\r\n\r\nThis PR builds on the bug fix in:\r\n- [ ] #33965\r\n\r\nOnce that is merged, this PR should not change behaviour.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T15:42:31Z",
      "updated_at": "2026-01-21T18:38:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33966",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2878,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3056547139,
      "number": 33974,
      "title": "cmake: Check dependencies after build option interaction",
      "body": "At present, `CMakeLists.txt` interleaves configuration-option handling with dependency discovery. As a result, unnecessary checks may be performed. For example:\r\n```\r\n$ cmake -B build --preset dev-mode -DBUILD_FOR_FUZZING=ON\r\n<snip>\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"2.3.0\")\r\n-- Found ZeroMQ: /usr/lib64 (found suitable version \"4.3.5\", minimum required is \"4.0.0\")\r\n-- Performing Test HAVE_USDT_H\r\n-- Performing Test HAVE_USDT_H - Success\r\n-- Found USDT: /usr/include\r\n-- Found QRencode: /usr/lib64/libqrencode.so (found version \"4.1.1\")\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\r\n-- Found Threads: TRUE\r\n-- Performing Test HAVE_STDATOMIC\r\n-- Performing Test HAVE_STDATOMIC - Success\r\n-- Found WrapAtomic: TRUE\r\n-- Found OpenGL: /usr/lib64/libOpenGL.so\r\n-- Found WrapOpenGL: TRUE\r\n-- Found WrapVulkanHeaders: /usr/include\r\n-- Found Qt: /usr/lib64/cmake/Qt6 (found suitable version \"6.10.1\", minimum required is \"6.2\")\r\nCMake Warning at CMakeLists.txt:206 (message):\r\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\r\n  BUILD_FUZZ_BINARY=ON.\r\n\r\n<snip>\r\n```\r\n\r\nThis PR restructures the code to ensure that all dependencies are checked only after the final build option interaction.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-30T15:50:06Z",
      "updated_at": "2026-01-21T18:23:47Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33974",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1331,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3191565524,
      "number": 34353,
      "title": "refactor: Use std::bind_front over std::bind",
      "body": "`std::bind` has many issues:\r\n\r\n* It is verbosely listing all placeholders, but in a meaningless way, because it doesn't name the args or their types.\r\n* It silently ignores args passed to it, when one arg is overridden. For example [1] compiles fine on current master.\r\n* Accidentally duplicated placeholders compile fine as well.\r\n* Usually the placeholders aren't even needed.\r\n* This makes it hard to review, understand, and maintain.\r\n\r\nFix all issues by using `std::bind_front` from C++20, which allows to drop the brittle `_1, _2, ...` placeholders. The replacement should be correct, if the trailing placeholders are ordered.\r\n\r\nIntroducing the same silent bug on top of this pull request [2] will now lead to a compile failure.\r\n\r\n----\r\n\r\n[1]\r\n\r\n```diff\r\ndiff --git a/src/qt/walletmodel.cpp b/src/qt/walletmodel.cpp\r\nindex 694fb535b5..7661dd361e 100644\r\n--- a/src/qt/walletmodel.cpp\r\n+++ b/src/qt/walletmodel.cpp\r\n@@ -412,3 +412,3 @@ void WalletModel::subscribeToCoreSignals()\r\n     m_handler_status_changed = m_wallet->handleStatusChanged(std::bind(&NotifyKeyStoreStatusChanged, this));\r\n-    m_handler_address_book_changed = m_wallet->handleAddressBookChanged(std::bind(NotifyAddressBookChanged, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3, std::placeholders::_4, std::placeholders::_5));\r\n+    m_handler_address_book_changed = m_wallet->handleAddressBookChanged(std::bind(NotifyAddressBookChanged, this, CTxDestination{}, std::placeholders::_2, std::placeholders::_3, std::placeholders::_4, std::placeholders::_5));\r\n     m_handler_transaction_changed = m_wallet->handleTransactionChanged(std::bind(NotifyTransactionChanged, this, std::placeholders::_1, std::placeholders::_2)); \r\n```\r\n\r\n[2]\r\n\r\n```diff\r\ndiff --git a/src/qt/walletmodel.cpp b/src/qt/walletmodel.cpp\r\nindex 578713c0ab..84cced741c 100644\r\n--- a/src/qt/walletmodel.cpp\r\n+++ b/src/qt/walletmodel.cpp\r\n@@ -412,3 +412,3 @@ void WalletModel::subscribeToCoreSignals()\r\n     m_handler_status_changed = m_wallet->handleStatusChanged(std::bind_front(&NotifyKeyStoreStatusChanged, this));\r\n-    m_handler_address_book_changed = m_wallet->handleAddressBookChanged(std::bind_front(NotifyAddressBookChanged, this));\r\n+    m_handler_address_book_changed = m_wallet->handleAddressBookChanged(std::bind_front(NotifyAddressBookChanged, this, CTxDestination{}));\r\n     m_handler_transaction_changed = m_wallet->handleTransactionChanged(std::bind_front(NotifyTransactionChanged, this));\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-20T14:48:59Z",
      "updated_at": "2026-01-21T18:17:09Z",
      "merged_at": "2026-01-21T14:59:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34353",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2520,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3195680966,
      "number": 34369,
      "title": "test: Scale NetworkThread close timeout with timeout_factor",
      "body": "Not sure if this fixes https://github.com/bitcoin/bitcoin/issues/34248, but scaling here probably makes sense, considering some CI setups run in nested VMs with a different arch system-qemu.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-21T15:22:24Z",
      "updated_at": "2026-01-21T18:16:40Z",
      "merged_at": "2026-01-21T16:42:26Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34369",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 250,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3070554287,
      "number": 34004,
      "title": "Implementation of SwiftSync",
      "body": "Link to the original protocol writeup found [here](https://gist.github.com/RubenSomsen/a61a37d14182ccd78760e477c78133cd). See the [Delving Bitcoin post](https://delvingbitcoin.org/t/swiftsync-speeding-up-ibd-with-pre-generated-hints-poc/1562) for initial works and discussion.\r\n\r\n# Motivation\r\n\r\nWhile many coins are available in cache when spent, every cache miss requires a trip to the disk. Memory can be scarce for single board machines, so cache misses are expected to be far more frequent. A trip to disk is all-the-more severe on low end hardware, so any minimization of disk interactions can speed up initial block download for limited resource devices. One such example may be a block template provider serving a home miner.\r\n\r\n# Intuition\r\n\r\nThe vast majority of coins created are later spent. The cost of this observation is many coins will be written to disk, only to be removed later. The SwiftSync protocol alleviates the problem by recording what coins have been added and removed with a small, in-memory aggregate. This allows for the removal of intermediate coin states until SwiftSync has completed. The state of the aggregate is verified at a predetermined chain height, and IBD continues as usual thereafter.\r\n\r\nFor any chain height, we know `all outputs - all inputs = UTXO set`, which is equivalently `all outputs - UTXO set = all inputs`. The goal is to verify the set `all outputs - UTXO set` is equal to `all inputs`. Addition and subtraction modulo a field offers a way to do so. For any set, if we add all elements of the set and subtract them, regardless of ordering, we will arrive at zero. In the current implementation, the set elements being compared are hashed outpoints.\r\n\r\nThe SwiftSync protocol is comprised of two structures. First, the aggregate that will record the state of what outpoints have been added (created) or subtracted (spent). Next, notice that the UTXO set must be reported in order to verify `all outputs - UTXO set = all inputs`. SwiftSync introduces a hints file, which may be provided to the client at startup. This hints file is nothing more than a pointer to each unspent output by recording the block height and the indexes that will remain unspent. By using this file, a client may omit outpoints that will be in the UTXO set when updating the aggregate. Note this file is not trusted. If a malicious actor provides a faulty UTXO set, the set comparison above will fail, and the client may begin a reindex.\r\n# Implementation\r\n\r\n## Aggregate\r\n\r\nThe hash aggregate takes outpoints, hashes them with a salted hasher, and updates 4, 64-bit limbs with wrapping modulo arithmetic. The choice of 4, 64-bit limbs with no carries between limbs was made to: 1. minimize code complexity within the aggregate 2. conform to existing APIs, namely `uint256`. After adding and subtracting some arbitrary list of outpoints, we may poll if the sets were equivalent with `IsZero`.\r\n## Hintsfile\r\n\r\nThe hints file is a map of block height to the indexes of the outputs in that block that _will_ be in the UTXO set. To construct this file for a particular UTXO set state, each block must be read and queried to find the outputs in that block that remain unspent. Because this is a read-only operation, this may be done on parallel threads in the future. To allow for parallelization, the hints file contains a \"contents\" section, which denotes the height and corresponding file position to find the hints for that block.\r\n\r\nTo save space when representing the indexes that remain unspent in a block, an easy choice is to take the difference between the last coin that was unspent and the next one in the block. AFICT this is a version of run-length-encoding. These indexes are encoded using `compactSize` to further save space, the run-lengths should normally fit into at least 16 bits, often 8 bits.\r\n## Parameter Interaction\r\n\r\nA side effect of omitting intermediate UTXO states while performing IBD is the \"undo data\" cannot be derived. There are already configurations that do not have full undo data history, namely pruned nodes. To avoid additional complexity in this PR, this version of accelerated IBD is only made available to pruned nodes, as the undo data would have been removed regardless of the this setting.\r\n\r\nOther parameter interactions, not yet implemented:\r\n- `assumeutxo`: Startup should fail if both are configured. A hints file will have no effect, as the UTXO set is already present.\r\n- `assumevalid`: A natural choice is to only allow SwiftSync when using `assumevalid`, and to only allow a hints file that commits to the `assumevalid` block. Similar to `assumeutxo`, a hash of the hints file may be committed to in the binary, which would be resistant to griefing attacks.\r\n# Testing [Linux example]\r\n\r\nIn your `bitcoin` directory, download the hints from the test server:\r\n\r\n```bash\r\ncurl -o signet.hints http://utxohints.store/hints/signet\r\n```\r\n\r\nVerify the hash of the file:\r\n\r\n```bash\r\necho \"2b625392ecb2adba2b5f9d7b00c8f3a8adca0d3c  signet.hints\" | sha1sum --check -\r\n```\r\n\r\nBuild the branch:\r\n\r\n```bash\r\ncmake -B build && cmake --build build -j $(nproc)\r\n```\r\n\r\nRemove existing chain state:\r\n\r\n```bash\r\nrm -rf ~/.bitcoin/signet/\r\n```\r\n\r\nProvide the file at startup:\r\n\r\n```bash\r\n./build/bin/bitcoind --chain=signet --utxohints=./signet.hints --prune=550\r\n```\r\n\r\n#### Other networks:\r\n- ~Testnet4: endpoint `http://utxohints.store/hints/testnet4`, expected checksum `7acbb25b651ffc5ebc59c46fd065a510c149f00e  testnet4.hints`~\r\n\r\n# Open Questions\r\n\r\n- Given the outcome of SwiftSync is pass/fail, and there is no use of intermediate states, should blocks be persisted to disk at all during the protocol?\r\n- To what degree should a hints file be committed to in the binary. No commitment allows for a server to provide hints for an arbitrary height, providing a convenience for the client, but opens up the possibility of a grief attack. Of course the server risks losing reputation for serving faulty files.\r\n\r\n# Future Iteration\r\n\r\nThis is the first iteration of the SwiftSync proposal, however more optimizations may be made. Namely, because set elements may be added or subtracted from the aggregate in any order, blocks may be downloaded in parallel from multiple peers. If you are interested in benchmarking the performance of a fully-parallel version, see the [Rust implementation](https://github.com/2140-dev/swiftsync).\r\n",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2025-12-04T09:50:39Z",
      "updated_at": "2026-01-21T17:27:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34004",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 6426,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3088060609,
      "number": 34038,
      "title": "logging: API improvements",
      "body": "A few changes:\r\n\r\n * Provide `STDLOCK(m_cs)` instead of `StdLockGuard g(m_cs)` for the logging mutexes, so that we can get better warnings from clang if annotations have been missed\r\n * Allow writing `LogInfo(BCLog::NO_RATE_LIMIT, \"log message\")` to avoid rate limiting, rather than having to supply a false argument to `LogPrintLevel_(...)`\r\n * Replace the `-loglevel` parameter with a new `-trace` parameter that works the same as `-debug`\r\n * Change the `logging` RPC to allow enabling trace debugging, and to differentiate trace vs debug levels\r\n ",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-10T05:56:20Z",
      "updated_at": "2026-01-21T16:08:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34038",
      "labels": [
        "Needs release note"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 577,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3195808515,
      "number": 34371,
      "title": "wallet: allow importprunedfunds for spending transactions",
      "body": "`importprunedfunds` only accepted receiving transactions (via `IsMine`).\r\nAdd `IsFromMe` to also accept spending transactions.\r\n\r\nTest covers a transaction with wallet inputs but no wallet outputs.\r\n\r\nFixes #21647",
      "state": "open",
      "user": "8144225309",
      "created_at": "2026-01-21T15:54:39Z",
      "updated_at": "2026-01-21T15:55:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34371",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 271,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2797425845,
      "number": 33300,
      "title": "fuzz: compact block harness",
      "body": "Posting up to get feedback, there are some design flaws with the approach in this PR. Coverage is [here](https://crypt-iq.github.io/fuzz_coverage_reports/cmpctblock-aflpp-inputs-09182025/) (look in `src/blockencodings.cpp`, relevant compact block bits in `src/net_processing.cpp`).\r\n\r\nThis harness can make (in)valid blocks, reconstruct blocks with in-mempool txns, mark peers as HB, and has high stability in AFL++ (~98-99%).\r\n\r\nThe main downside is that there are filesystem operations. In the `.init` function `initialize_cmpctblock`, a chain of 200 blocks is created. Each fuzzing iteration then copies this statically-named, \"cached\" data directory to a temporary directory that gets deleted at the end of the iteration. If each fuzzing iteration instead mines its own chain, the execs/s slows down to a crawl (~0.5/s or less, which would also make CI runs really slow).",
      "state": "open",
      "user": "Crypt-iQ",
      "created_at": "2025-09-03T22:33:44Z",
      "updated_at": "2026-01-21T15:44:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33300",
      "labels": [
        "Tests",
        "Needs rebase",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 903,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3185742901,
      "number": 34334,
      "title": "fix: check event loop state before stopping in NetworkThread.close()",
      "body": "Fixes #34248\r\n\r\nAdd is_running() check in NetworkThread.close() to prevent timeout when event loop is already stopped on NetBSD.",
      "state": "closed",
      "user": "forkfury",
      "created_at": "2026-01-18T20:43:41Z",
      "updated_at": "2026-01-21T15:41:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34334",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 197,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3175030867,
      "number": 34294,
      "title": "test: Remove redundant STRICTENC flag from script_tests",
      "body": "Remove the `STRICTENC` flag from hundreds of `script_tests` cases that have nothing to do with signature or pubkey encoding. It's a readability improvement and it makes it easier to find the actual test cases for `STRICTENC` behavior (those are untouched). Also, `STRICTENC` is a policy flag, we should default to consensus flags in `script_tests`.\r\n\r\nThe diff is large but mechanical as I'm only removing `STRICTENC` from flags. That said, if reviewers feel this cleanup is not worthwhile, I am fine dropping it.\r\n\r\n`script_tests` pass on my end.",
      "state": "closed",
      "user": "billymcbip",
      "created_at": "2026-01-14T21:21:03Z",
      "updated_at": "2026-01-21T16:31:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34294",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 603,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3193769253,
      "number": 34363,
      "title": "Update libmultiprocess subtree to avoid occasional rpc_misc.py timeout",
      "body": "Includes:\r\n\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/229\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/223\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/225\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/228\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/230\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/236\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/234\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/196\r\n- https://github.com/bitcoin-core/libmultiprocess/pull/237\r\n\r\nThe last change https://github.com/bitcoin-core/libmultiprocess/pull/237 is expected to fix issue #34187 occasional `rpc_misc.py` test hang. The other changes are just documentation & ci updates.\r\n\r\nThe changes can be verified by running `test/lint/git-subtree-check.sh src/ipc/libmultiprocess` as described in [developer notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees) and [lint instructions](https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh)",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2026-01-21T04:48:08Z",
      "updated_at": "2026-01-21T15:07:29Z",
      "merged_at": "2026-01-21T15:07:29Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34363",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1136,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2696299919,
      "number": 33067,
      "title": "test: refactor ValidWitnessMalleatedTx class to helper function",
      "body": "This PR refactors ` ValidWitnessMalleatedTx` class into a `build_malleated_tx_package` function. As a result, two tests are updated:  `mempool_accept_wtxid` and `p2p_p2p_private_broadcast`. Also included are a  few small refactors in mempool_accept_wtxid , (switching to MiniWallet, using a pre-mined chain, using txid directly.)\r\n\r\nTogether, these changes reduce complexity and improve test runtime.\r\n\r\n\r\n",
      "state": "open",
      "user": "naiyoma",
      "created_at": "2025-07-26T00:34:36Z",
      "updated_at": "2026-01-21T14:49:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33067",
      "labels": [
        "Refactoring",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 470,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2940741002,
      "number": 33689,
      "title": "http: replace WorkQueue and single threads handling for ThreadPool",
      "body": "This has been a recent discovery; the general thread pool class created for #26966, cleanly \r\nintegrates into the HTTP server. It simplifies init, shutdown and requests execution logic.\r\nReplacing code that was never unit tested for code that is properly unit and fuzz tested.\r\nAlthough our functional test framework extensively uses this RPC interface (that’s how\r\nwe’ve been ensuring its correct behavior so far - which is not the best).\r\n\r\nThis clearly separates the responsibilities:\r\nThe HTTP server now focuses solely on receiving and dispatching requests, while ThreadPool handles\r\nconcurrency, queuing, and execution.\r\n\r\nThis will also allows us to experiment with further performance improvements at the task queuing and\r\nexecution level, such as a lock-free structure or task prioritization or any other implementation detail\r\nlike coroutines in the future, without having to deal with HTTP code that lives on a different layer.\r\n\r\nNote:\r\nThe rationale behind introducing the ThreadPool first is to be able to easily cherry-pick it across different\r\nworking paths. Some of the ones that are benefited from it are #26966 for the parallelization of the indexes\r\ninitial sync, #31132 for the parallelization of the inputs fetching procedure, #32061 for the libevent replacement,\r\nthe kernel API #30595 (https://github.com/bitcoin/bitcoin/pull/30595#discussion_r2413702370) to avoid blocking validation among others use cases not publicly available.\r\n\r\nNote 2:\r\nI could have created a wrapper around the existing code and replaced the `WorkQueue` in a subsequent\r\ncommit, but it didn’t seem worth the extra commits and review effort. The `ThreadPool` implements\r\nessentially the same functionality in a more modern and cleaner way.",
      "state": "open",
      "user": "furszy",
      "created_at": "2025-10-23T14:36:44Z",
      "updated_at": "2026-01-21T14:16:08Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33689",
      "labels": [
        "RPC/REST/ZMQ",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1804,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2837615883,
      "number": 33421,
      "title": "node: add  `BlockTemplateCache`",
      "body": "This PR implements the first step of #33758 by adding a cache layer for node block templates.\r\n\r\nThe cache stores newly created block templates along with their configuration options. When clients request a block template, they specify the maximum age in `MillisecondsDouble`:\r\n- If a matching template exists in the cache and hasn't exceeded the age limit, the cached version is returned (if multiple exist, the most recent one is returned).\r\n- If no matching template exists or the age limit has been exceeded, a new template is generated, cached, and returned.\r\n\r\nThe cache maintains a configurable maximum size (default: 10 templates). When this limit is exceeded, the oldest template is evicted. This is usually checked after each insertion.\r\n\r\nThe cache subscribes to the validation interface and clears itself when blocks are connected (to non-historical chainstate to avoid clearing during assumeutxo background validation) or disconnected from the active chain (during reorgs), preventing stale or invalid templates from being served.\r\n\r\nWhen `test_block_validity` is set to `true` in the block creation options, any cached template that hasn't been validated will be checked before being returned. We also then update the cached block validity to indicate it has been checked.\r\n\r\nThis PR also removes an unused `node/context.h` import from miner to prevent a potential circular dependency during exposing the block template cache to the node context.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-09-17T18:47:09Z",
      "updated_at": "2026-01-21T14:11:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33421",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1494,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3184483208,
      "number": 34328,
      "title": "rpc: make `uptime` monotonic across NTP jumps",
      "body": "### Problem\r\n`bitcoin-cli uptime` was derived from wall-clock time, so it could jump by large amounts when the system clock is corrected after `bitcoind` starts (e.g. on RTC-less systems syncing NTP).\r\nThis breaks the expectation that uptime reflects process runtime.\r\n\r\n### Fix\r\nCompute uptime from a [monotonic clock](https://en.cppreference.com/w/cpp/chrono/steady_clock.html) so it is immune to wall-clock jumps, and use that monotonic uptime for the RPC.\r\nGUI startup time is derived from wall clock time minus monotonic uptime so it remains sensible after clock corrections.\r\n\r\n### Reproducer\r\nRevert the fix commit and run the `rpc_uptime` functional test (it should fail with `AssertionError: uptime should not jump with wall clock`):\r\n\r\nOr alternatively:\r\n\r\n```bash\r\ncmake -B build && cmake --build build --target bitcoind bitcoin-cli -j$(nproc)\r\nDATA_DIR=$(mktemp -d)\r\n./build/bin/bitcoind -regtest -datadir=\"$DATA_DIR\" -connect=0 -daemon\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwait uptime\r\nsleep 1\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" setmocktime $(( $(date +%s) + 20000000 ))\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" uptime\r\n./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" stop\r\n```\r\n\r\n<details>\r\n<summary>Before (uptime jumps with wall clock)</summary>\r\n\r\n```bash\r\nBitcoin Core starting\r\n0\r\n20000001\r\nBitcoin Core stopping\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>After (uptime stays monotonic)</summary>\r\n\r\n```bash\r\nBitcoin Core starting\r\n0\r\n1\r\nBitcoin Core stopping\r\n```\r\n</details>\r\n\r\n----------\r\n\r\nIssue: https://github.com/bitcoin/bitcoin/issues/34326",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-17T20:01:46Z",
      "updated_at": "2026-01-21T13:49:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34328",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1674,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3084582953,
      "number": 34032,
      "title": "util: Add some more Unexpected and Expected methods",
      "body": "Reviewers requested more member functions In https://github.com/bitcoin/bitcoin/pull/34006.\r\n\r\nThey are currently unused, but bring the port closer to the original `std::expected` implementation:\r\n\r\n* Make `Expected::value()` throw when no value exists\r\n* Add `Unexpected::error()` methods\r\n* Add `Expected<void, E>` specialization\r\n* Add `Expected::value()&&` and `Expected::error()&&` methods\r\n* Add `Expected::swap()`\r\n\r\nAlso, include a tiny tidy fixup:\r\n\r\n* tidy: Set `AllowCastToVoid` in the `bugprone-unused-return-value` check",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-09T08:01:34Z",
      "updated_at": "2026-01-21T12:35:35Z",
      "merged_at": "2026-01-21T12:24:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34032",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 585,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3120160595,
      "number": 34132,
      "title": "refactor: inline `CCoinsViewErrorCatcher` into `CCoinsViewDB`",
      "body": "drafting until https://github.com/bitcoin/bitcoin/pull/34320 is merged to clarify the scope of this change\r\n\r\n-------\r\n\r\n### Problem\r\n\r\nThe current coins database read-error handling adds unnecessary complexity to the critical path:\r\n\r\n- `CCoinsViewErrorCatcher` sits between the cache and database views, wrapping every read operation with a generic error handler\r\n- `ExecuteBackedWrapper` adds another function call layer with lambda captures on each database read\r\n-  Uses `std::vector<std::function<void()>>` for callbacks when there's only ever one callback registered\r\n-  The error callback is set after database initialization rather than during construction (requiring a `cs_main` lock)\r\n\r\nThis adds unnecessary stack depth and bookkeeping overhead on every coins database read operation (`GetCoin`). Also note that `CCoinsViewDB::HaveCoin` isn't even called from production code as far as I can tell.\r\n\r\n### Context\r\n\r\nThis is part of ongoing coins caching cleanup efforts like #34124, #33866, #33018, and #33512.\r\n\r\n### Fix\r\n\r\nThis PR collapses the `CCoinsViewErrorCatcher` layer entirely and moves error handling directly into `CCoinsViewDB`:\r\n\r\n- Remove `ExecuteBackedWrapper` and `CCoinsViewErrorCatcher`, placing try-catch blocks directly in `CCoinsViewDB::GetCoin` and `CCoinsViewDB::HaveCoin`\r\n- Replace `std::vector<std::function<void()>>` with a single `std::function<void()>` member, initialized in the constructor\r\n- The read error callback is now passed to `Chainstate::InitCoinsDB` and forwarded to `CCoinsViewDB` constructor\r\n\r\nA new test is also added to reproduce the behavior in case of database corruption. It's added as a first commit to demonstrate that the behavior stays unchanged.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T22:56:45Z",
      "updated_at": "2026-01-21T12:28:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34132",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1774,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 837470043,
      "number": 24230,
      "title": "indexes: Stop using node internal types and locking cs_main, improve sync logic",
      "body": "This PR lets indexing code mostly run outside of the node process. It also improves indexing sync logic, which is moved out of indexing code to a new [`node::SyncChain()`](https://github.com/ryanofsky/bitcoin/blob/cf6d99bed842361fb06986780097fb80c9e879e4/src/node/chain.h#L21-L36) function.\r\n\r\nAlmost all the commits in this PR are small refactoring changes that move code from `src/index/` to `src/node/`, or replace references to node types like `CBlockIndex`, `CChain`, `CChainState` in index code. There are only two commits affecting indexing sync logic which make complicated or substantive changes:\r\n\r\n- [`8862eddeb68b` indexes: Rewrite chain sync logic, simplify index sync code](https://github.com/bitcoin/bitcoin/pull/24230/commits/8862eddeb68b8871421e8aa4e69c7fa567df4da5)\r\n- [`f458cf8a4ce1` indexes: Initialize indexes without holding cs_main](https://github.com/bitcoin/bitcoin/pull/24230/commits/f458cf8a4ce1c9a21633439122df929dbee53946)\r\n\r\nThe commit messages have more details about these and other changes. Followups to this PR will reuse indexing sync code for wallets (#15719, #11756) and let indexes run in separate processes (#10102)",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-02-01T16:56:28Z",
      "updated_at": "2026-01-21T12:11:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/24230",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1234,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2136628940,
      "number": 31125,
      "title": "depends: add *FLAGS to gen_id",
      "body": "The depends cache should be busted when flags change, the same as any other tooling change. I'd also like to start passing `*FLAGS` into depends inside the Guix env, which, without this change, doesn't bust the cache.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-10-21T17:10:27Z",
      "updated_at": "2026-01-21T10:57:45Z",
      "merged_at": "2025-01-20T16:25:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31125",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 247,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2257371417,
      "number": 31590,
      "title": "descriptors: Try pubkeys of both parities when retrieving the private keys for an xonly pubkey in a descriptor",
      "body": "When a `ConstPubkeyProvider` is xonly, the stored pubkey does not necessarily have the correct parity bit. `ToPrivateString()` is correctly handling this by looking up the keys for both parity bits, but `GetPrivKey` does not. This results in not finding the private key when it is actually available if its pubkey has the other parity bit value.\r\n\r\nTo fix this, this key finding is refactored into `GetPrivKey()` so that its behavior is corrected, and `ToPrivateString()` is changed to use `GetPrivKey()` as well.\r\n\r\nAdditionally, the descriptor test checks are updated to include a check for `ExpandPrivate()` to verify that both the parsed public and private descriptors produce `SigningProvider`s with the same contents.\r\n\r\nFixes #31589",
      "state": "closed",
      "user": "achow101",
      "created_at": "2025-01-02T05:04:40Z",
      "updated_at": "2026-01-21T10:57:44Z",
      "merged_at": "2025-01-21T10:20:56Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31590",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 850,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2288459221,
      "number": 31693,
      "title": "bench: fix used file that is not opened",
      "body": "Fixes\r\n```\r\nsrc/bench/load_external.cpp:57:17: error: Used file that is not opened. [useClosedFile]\r\n            if (fwrite(ss.data(), 1, ss.size(), file) != ss.size()) {\r\n                ^\r\nsrc/bench/load_external.cpp:61:9: error: Used file that is not opened. [useClosedFile]\r\n        fclose(file);\r\n        ^\r\n```",
      "state": "closed",
      "user": "rex4539",
      "created_at": "2025-01-20T19:18:40Z",
      "updated_at": "2026-01-21T10:57:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31693",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 356,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187452713,
      "number": 34337,
      "title": "fuzz: Return chrono point from ConsumeTime(), Add ConsumeDuration()",
      "body": "Returning a raw i64 is a bit confusing when it comes to chrono types. For example, in the addrman fuzz tests, the `time_penalty` is not a time point, but a duration.\r\n\r\nAlso, all call-sites assume second resolution right now, so document that better by returning `NodeSeconds` from `ConsumeTime(...)` and `std::chrono::seconds` from `ConsumeDuration(...)`.\r\n\r\n",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-19T11:38:51Z",
      "updated_at": "2026-01-21T10:54:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34337",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 428,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3194470827,
      "number": 34364,
      "title": "contrib: add initial zsh completion for bitcoin-cli",
      "body": "Bitcoin Core currently provides shell completion scripts for bash and fish in contrib/completions/, but zsh (which is the default shell on macOS and widely used by developers) does not have any native completion support for Bitcoin Core command-line tools.\r\n\r\nThis means users of zsh do not get tab-completion for bitcoin-cli, making it harder to discover commands and increasing the chance of typing mistakes.\r\n\r\nThis was reported in Issue #33404:\r\n“Add zsh completion scripts for Bitcoin Core command-line tools”\r\n\r\nWhat was needed\r\n\r\nA native zsh completion script (not bash-compat mode)\r\n\r\nLocated in contrib/completions/zsh/\r\n\r\nA minimal, correct starting point that can be extended incrementally\r\n\r\n\r\nWhat this PR does\r\n\r\nAdds a new directory:\r\ncontrib/completions/zsh/\r\n\r\nAdds an initial zsh completion script:\r\ncontrib/completions/zsh/_bitcoin-cli\r\n\r\nProvides:\r\n\r\nSubcommand completion for common bitcoin-cli commands\r\n\r\nBasic argument and file-path completion\r\n\r\nThe implementation is intentionally conservative and minimal, and can be extended in follow-up PRs to reach feature parity with the bash completion.\r\n\r\nWhy this approach\r\n\r\nKeeps the change small, reviewable, and safe\r\n\r\nAvoids large auto-generated or brittle completion logic\r\n\r\nEstablishes the correct structure and location for future zsh completions\r\n\r\nFixes #33404\r\n<img width=\"1024\" height=\"1536\" alt=\"ChatGPT Image Jan 21, 2026, 02_59_08 PM\" src=\"https://github.com/user-attachments/assets/fa4675f0-4caf-4c92-9f60-f598059ef8a4\" />\r\n\r\n",
      "state": "closed",
      "user": "crackedhandle",
      "created_at": "2026-01-21T09:32:46Z",
      "updated_at": "2026-01-21T10:47:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34364",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1565,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1587218477,
      "number": 28792,
      "title": "build: Embedded ASMap [3/3]: Build binary dump header file",
      "body": "Depends on https://github.com/bitcoin/bitcoin/pull/33878. This is the third in a tripled of PRs that implement the necessary changes for embedding of asmap data into the binary. This last part add the initial asmap data, implements the build changes and adds further documentation.\r\n\r\nCurrently an asmap file needs to be acquired by there user from some location or the user needs to generate one themselves. Then they need to move the file to the right place in datadir or pass the path to the file as `-asmap=PATH` in order to use the asmap feature. The change here allows for builds to embed asmap data into the bitcoind binary which makes it possible to use the feature without handling of the asmap file by the user. If the user starts bitcoind with `-asmap` the embedded data will be used for bucketing of nodes.\r\n\r\nThe data lives in the repository at `src/node/data/ip_asn.dat` and can be replaced with a new version at any time. The idea is that the data should be updated with every release. By default the data at that location is embedded into the binary but there is also a build option to prevent this (`-DWITH_EMBEDDED_ASMAP=OFF`). In this case the original behavior of the `-asmap` option is maintained.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2023-11-04T22:13:31Z",
      "updated_at": "2026-01-21T10:43:15Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28792",
      "labels": [
        "Build system",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1277,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133089501,
      "number": 34162,
      "title": "net: Avoid undershooting in GetAddressesUnsafe",
      "body": "This is demonstrating an alternative approach to #33663. The author didn't seem to like by suggestion so I am putting it here to be considered by reviewers. I personally prefer this approach due to it's simplicity.\r\n\r\n`GetAddressesUnsafe` filters banned and discouraged addresses if those exist. If addresses are filtered the returned list of addresses can be shorter than originally requested because the list isn't backfilled with more valid addresses. These results end up in `GETADDR` responses as well as the `getnodeaddresses` RPC.\r\n\r\nFix this by requesting all available addresses and filter them, then only trim them to the requested `max_addresses` afterwards. Also adds a functional test which checks the new behavior via `getnodeaddresses` RPC.",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-12-28T17:01:53Z",
      "updated_at": "2026-01-21T09:52:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34162",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 802,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3136708013,
      "number": 34181,
      "title": "refactor: [p2p] Make ProcessMessage private again, Use references when non-null",
      "body": "There is a single unit test, which calls the internal `ProcessMessage` function. This is problematic, because it makes future changes harder, since they will need to carry over this public internal interface each time.\r\n\r\nAlso, there is a mixed use of pointers and references in p2p code, where just based on context, a pointer may sometimes assumed to be null, or non-null. This is confusing when reading the code, or making or reading future changes.\r\n\r\nFix both issues in a series of commits, to:\r\n\r\n* refactor the single unit test to call higher-level functions\r\n* Make `ProcessMessage` private again\r\n* Use references instead of implicit non-null pointers, mostly in a scripted-diff",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-12-30T12:31:30Z",
      "updated_at": "2026-01-21T09:49:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34181",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 767,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1841534940,
      "number": 29963,
      "title": "depends: Do not consider `CC` environment variable for detecting system",
      "body": "On the master branch @ 3c88eac28e8984893746caebb313dc3b2fca90db, consider the following commands in the `depends` subdirectory:\r\n```sh\r\n$ make print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=x86_64-pc-linux-gnu\r\n$ make print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```\r\nThe printed variable values are expected.\r\n\r\nHowever, switching the `CC` variable context from Makefile to the shell environment breaks expectations:\r\n```sh\r\n$ CC=\"clang -m32\" make print-build HOST=i686-pc-linux-gnu\r\nbuild=i686-pc-linux-gnu\r\n$ CC=\"clang -m32\" make print-host HOST=i686-pc-linux-gnu\r\nhost=i686-pc-linux-gnu\r\n```\r\n\r\nThis PR fixes this issue.\r\n\r\n#### UPDATE 2026-01-20\r\n\r\nOn the master branch @ 7f5ebef56a0f2bad7df30252b11da3e33cb3c144:\r\n```\r\n$ gmake print-build HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nbuild=i686-pc-linux-gnu\r\n$ gmake print-host HOST=i686-pc-linux-gnu CC=\"clang -m32\"\r\nhost=i686-pc-linux-gnu\r\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2024-04-25T19:01:29Z",
      "updated_at": "2026-01-21T09:46:05Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29963",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1009,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3142897675,
      "number": 34193,
      "title": "wallet: make migration more robust against failures",
      "body": "This is just me finding a few more edge cases after #34156 and #34176\r\n\r\nThe goal of the PR is to handle failures in a controlled way. Just so the process can automatically restore the original wallet without requiring user manual intervention.\r\n\r\nThe covered cases are:\r\n\r\n1. During `DoMigration()`: There are methods that can throw exceptions and abruptly abort the process. \r\nInstead of crashing (GUI) or returning a generic exception, we now will catch and return the error gracefully. This lets the process restore the original wallet automatically.\r\n\r\n2. Trying to migrate a wallet in a read-only directory throws a filesystem exception and skips cleanup.\r\n Now the process will fail gracefully with a clear error msg, and automatically restore the original wallet.\r\n\r\n3. Any failure during `MigrateToSQLite` requires user manual intervention. \r\nNow the original wallet db will remain untouched, and only be updated once the sqlite db creation fully succeeds.",
      "state": "open",
      "user": "furszy",
      "created_at": "2026-01-02T20:59:40Z",
      "updated_at": "2026-01-21T09:35:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34193",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1017,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2864932636,
      "number": 33483,
      "title": "CMake: Add dynamic test discovery",
      "body": "Instead of parsing the test names from the source code at configure time, query the list of tests from the test executables at testing time.\r\n\r\nThis should be upstreamed to CMake: https://gitlab.kitware.com/cmake/cmake/-/issues/26920\r\n\r\nLeft to do: The `test_bitcoin-qt` executable should be fixed to support the `-function` option documented here: https://doc.qt.io/qt-6/qtest-overview.html#testing-options so that its test cases can be discovered as well.",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-26T17:21:02Z",
      "updated_at": "2026-01-21T09:26:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33483",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 491,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3013940276,
      "number": 33878,
      "title": "refactor, docs: Embedded ASMap [2/3]: Refactor asmap internals and add documentation",
      "body": "This is a second slice carved out of #28792. It contains the following changes that are crucial for the embedding of asmap data which is added the following PR in the series (probably this will remain in #28792).\r\n\r\nThe changes are:\r\n- Modernizes and simplifies the asmap code by operating on `std::byte` instead of bits\r\n- Unifies asmap version calculation and naming (previously it was called version and checksum interchangeably)\r\n- Operate on a `span` rather than a vector in the asmap internal to prevent holding the asmap data in memory twice\r\n- Add more extensive documentation to the asmap implementation\r\n- Unify asmap casing in implemetation function names\r\n\r\nThe first three commits were already part of #28792, the others are new.\r\n\r\nThe documentation commit came out of feedback gathered at the latest CoreDev. The primary input for the documentation was the documentation that already existed in the Python implementation (`contrib/asmap/asmap.py`) but there are several other comments as well. Please note: I have also asked several LLMs to provide suggestions on how to explain pieces of the implementation and better demonstrate how the parts work together. I have copied bits and pieces that I liked but everything has been edited further by me and obviously all mistakes here are my own. ",
      "state": "open",
      "user": "fjahr",
      "created_at": "2025-11-15T20:50:29Z",
      "updated_at": "2026-01-21T09:22:51Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33878",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1392,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3167372056,
      "number": 34267,
      "title": "net: avoid unconditional `privatebroadcast` logging (+ warn for debug logs)",
      "body": "### Motivation\r\nThe recently merged [private broadcast](https://github.com/bitcoin/bitcoin/pull/29415) is a privacy feature, and users may share `debug.log` with support.\r\nUnconditional `LogInfo()` messages that mention private broadcast and/or include (w)txids can leak sensitive context (e.g. which transactions a user originated).\r\nSince it's meant to be a private broadcast, we should minimize leaks.\r\nIt's a best effort, it's not invalidated by other logs possibly leaking identifiable information, those can be addressed separately.\r\nWe're not promising that the logs won't ever contain data that could be used against the user, but we should still try to minimize that data, especially for a feature that's advertised as privacy-focused.\r\n\r\nFollow up to [#29415 (comment)](https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2637012294)\r\n\r\n### Changes\r\n* Move private-broadcast event logs from `LogInfo()` to `LogDebug(BCLog::PRIVBROADCAST, ...)`, so they are only emitted when `-debug=privatebroadcast` was explicitly provided.\r\n* Remove hardcoded `\"[privatebroadcast]\"` log-string prefixes (category logging already adds the prefix).\r\n* Keep warning at the default log level for startup failures.\r\n* Add an init log (not a warning since that would require excessive test framework updates) when any `-debug` categories are enabled that additional logs may contain privacy-sensitive information and should not be shared publicly.\r\n* Update a related startup arg (`-logips`) to clarify that clarify that non-debug logs can also contain IP addresses.\r\n\r\n### Reproducer\r\nThe new warning can be checked with:\r\n```bash\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 | grep 'Debug logging is enabled' | wc -l\r\n       0\r\n./build/bin/bitcoind -printtoconsole=1 -stopatheight=1 -listen=0 -connect=0 -debug | grep 'Debug logging is enabled' | wc  -l\r\n       1\r\n```\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-12T21:25:29Z",
      "updated_at": "2026-01-21T08:30:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34267",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1976,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2849782359,
      "number": 33455,
      "title": "CPack",
      "body": "The goal is to build all packages (both archives and installers) from a single configuration in CMake.\r\n\r\n### Packaging Instruction\r\n\r\nGet a list of supported CPack generators for your platform with:\r\n\r\n```sh\r\ncpack --help\r\n```\r\n\r\nRun `cpack` from the build directory after a successful build to select multiple package generators:\r\n\r\n```sh\r\ncmake --build .\r\ncpack -G '7Z;NSIS64'\r\n```\r\n\r\nOr build the `package` and/or `package_source` targets:\r\n\r\n```sh\r\ncmake --build . --target package\r\ncmake --build . --target package_source\r\n```\r\n\r\nTODO:\r\n\r\n- [ ] Windows start menu entries\r\n- [ ] Option to launch after install\r\n- [ ] Component descriptions / dependencies / groups\r\n- [ ] Auxiliary files (readme, config)\r\n\r\n<img width=\"732\" height=\"560\" alt=\"Screenshot 2025-10-14 at 17 35 47\" src=\"https://github.com/user-attachments/assets/6f7dbe57-78d8-435f-b4e0-0508a1ac3832\" />\r\n",
      "state": "open",
      "user": "purpleKarrot",
      "created_at": "2025-09-22T14:28:28Z",
      "updated_at": "2026-01-21T07:36:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33455",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 879,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3163366332,
      "number": 34253,
      "title": "validation: cache tip recency for lock-free `IsInitialBlockDownload()`",
      "body": "This PR is a follow-up to the stale #32885.\r\n\r\n### Problem\r\n`ChainstateManager::IsInitialBlockDownload()` currently acquires `cs_main` internally, even though most existing call sites already hold the lock. This becomes relevant for proposals like #34054, which would call `IsInitialBlockDownload()` from the scheduler thread without holding `cs_main`, potentially introducing lock contention.\r\n\r\n### Fix\r\nMake `ChainstateManager::IsInitialBlockDownload()` lock-free by caching its result in a single atomic `m_cached_is_ibd` (true while in IBD, latched to false on exit).\r\nMove the IBD exit checks out of `IsInitialBlockDownload()` (reader-side) into a new `ChainstateManager::UpdateIBDStatus()` (writer-side, called under cs_main).\r\n\r\nCall UpdateIBDStatus() at strategic points where IBD exit conditions may change, after active chain tip updates in `ConnectTip()`, `DisconnectTip()`, and `LoadChainTip()`, and after `ImportBlocks()` returns.\r\n\r\nWith this, `IsInitialBlockDownload()` becomes a lock-free atomic read, avoiding internal `cs_main` acquisition on hot paths.\r\n\r\n### Testing and Benchmarks\r\nThis isn't strictly an optimization (though some usecases might benefit from it), so rather as a sanity check I ran a reindex-chainstate and an `AssumeUTXO` load (without background validation).\r\n\r\n<details>\r\n<summary>assumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"595504a43209bead162da54a204df7d140a25f0e 63e822b637f67242e3689adedc0155b34100e651\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-910000.dat\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor DBCACHE in 4500; do \\\r\n  (echo \"assumeutxo load | 910000 blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\";) &&\\\r\n  hyperfine \\\r\n  --sort command \\\r\n  --runs 3 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$DBCACHE-$CC-$(date +%s).json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall -9 bitcoind 2>/dev/null; rm -rf $DATA_DIR/blocks $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git clean -fxd; git reset --hard {COMMIT} && \\\r\n             cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo && ninja -C build bitcoind bitcoin-cli -j2 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 20 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 20\" \\\r\n   --conclude \"build/bin/bitcoin-cli -datadir=$DATA_DIR stop || true; killall bitcoind || true; sleep 10; \\\r\n               echo '{COMMIT} | dbcache=$DBCACHE | chainstate: $(find $DATA_DIR/chainstate_snapshot -type f 2>/dev/null | wc -l) files, $(du -sb $DATA_DIR/chainstate_snapshot 2>/dev/null | cut -f1) bytes' >> $DATA_DIR/debug.log; \\\r\n               cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log\" \\\r\n    \"COMPILER=$CC DBCACHE=$DBCACHE ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n595504a432 Merge bitcoin/bitcoin#34236: Add sedited to trusted-keys\r\n63e822b637 validation: make `IsInitialBlockDownload()` lock-free\r\n\r\nassumeutxo load | 910000 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n  Time (mean ± σ):     418.452 s ±  0.461 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   418.070 s … 418.964 s    3 runs\r\n \r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n  Time (mean ± σ):     415.994 s ±  0.294 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min … max):   415.788 s … 416.330 s    3 runs\r\n \r\nRelative speed comparison\r\n        1.01 ±  0.00  COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n        1.00          COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-910000.dat (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>2026-01-12 | reindex-chainstate | 931139 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD</summary>\r\n\r\n```\r\nfor DBCACHE in 4500; do \\                                                                                                                           \r\n  COMMITS=\"595504a43209bead162da54a204df7d140a25f0e 63e822b637f67242e3689adedc0155b34100e651\"; \\\r\n  STOP=931139; CC=gcc; CXX=g++; \\\r\n  BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n  (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n  (echo \"\" && echo \"$(date -I) | reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | SSD\"; echo \"\") &&\\\r\n  hyperfine \\\r\n    --sort command \\\r\n    --runs 1 \\\r\n    --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n    --parameter-list COMMIT ${COMMITS// /,} \\\r\n    --prepare \"killall -9 bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git clean -fxd; git reset --hard {COMMIT} && \\\r\n      cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release -DENABLE_IPC=OFF && ninja -C build bitcoind -j1 && \\\r\n      ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20; rm -f $DATA_DIR/debug.log\" \\\r\n    --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n                cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n    \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\";\r\ndone\r\n\r\n595504a432 Merge bitcoin/bitcoin#34236: Add sedited to trusted-keys\r\n63e822b637 validation: make `IsInitialBlockDownload()` lock-free\r\n\r\n2026-01-12 | reindex-chainstate | 931139 blocks | dbcache 4500 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n  Time (abs ≡):        17187.310 s               [User: 33104.415 s, System: 937.548 s]\r\n \r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n  Time (abs ≡):        17240.300 s               [User: 33164.803 s, System: 976.485 s]\r\n \r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 595504a43209bead162da54a204df7d140a25f0e)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=931139 -dbcache=4500 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 63e822b637f67242e3689adedc0155b34100e651)\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-11T15:15:32Z",
      "updated_at": "2026-01-21T07:10:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34253",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 8682,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3163535277,
      "number": 34254,
      "title": "validation: Prevent duplicate logging and looping in invalid block handling",
      "body": "`InvalidChainFound()` is called from 3 spots:\r\n1. from `InvalidBlockFound()`\r\n2. from `ActivateBestChain()`, with the highest connectable block of the chain\r\nas an arg (after having called `InvalidBlockFound()` already for the block that failed in `ConnectTip()`)\r\n3. from `InvalidateBlock()` (rpc-only)\r\n\r\nMost of the logic in `InvalidChainFound()` is not required for 2) and 3):\r\nIn `ActivateBestChain()`, the previous call to `InvalidChainFound()` before via `InvalidBlockFound` did the flag updates, best header calculation and logging, so only `m_best_invalid` could need additional updating.\r\nIn `InvalidateBlock()` (which doesn't call `InvalidBlockFound()`), we do most of the accounting manually.\r\n\r\nTherefore move of all logic but the `m_best_invalid` update into `InvalidBlockFound()`, avoiding duplicate logging and unnecessary work (the loops over the block index in `SetBlockFailureFlags()` and `RecalculateBestHeader()`\r\nwere done twice before).\r\n\r\nThe second commit renames `InvalidChainFound` to `UpdateBestInvalid` to adjust to its remaining role.\r\n\r\nThis addresses past discussions about repeated work in `InvalidateBlock()` (https://github.com/bitcoin/bitcoin/pull/31405#discussion_r2135717500) and `ActivateBestChain()` (https://github.com/bitcoin/bitcoin/pull/31533#discussion_r2607189790)",
      "state": "open",
      "user": "mzumsande",
      "created_at": "2026-01-11T16:59:21Z",
      "updated_at": "2026-01-21T06:56:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34254",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1386,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3132941994,
      "number": 34161,
      "title": "refactor: avoid possible UB from `std::distance` for `nullptr` args",
      "body": "### Problem\r\n\r\nCalling `std::distance(nullptr, nullptr)` has ambiguous status in the C++ standard [iterator.requirements.general](https://eel.is/c++draft/iterator.requirements.general#7):\r\n> Iterators can also have singular values that are not associated with any sequence. Results of most expressions are undefined for singular values.\r\n\r\nIt seems to work correctly in every implementation we use, but [LWG 1213](https://cplusplus.github.io/LWG/issue1213) (\"Meaning of valid and singular iterator underspecified\") has been Open since 2009, acknowledging that the standard's wording on this topic is unclear.\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\nThe [iterator.requirements.general](https://eel.is/c++draft/iterator.requirements.general#7) states:\r\n> Iterators can also have singular values that are not associated with any sequence. Results of most expressions are undefined for singular values.\r\n\r\nAnd [LWG 208](https://cplusplus.github.io/LWG/issue208)'s rationale explicitly confirms:\r\n> Null pointers are singular.\r\n\r\nTherefore they cannot form a valid range required by [std::distance](https://eel.is/c++draft/iterator.operations#4):\r\n> Preconditions: last is reachable from first, or InputIterator meets the Cpp17RandomAccessIterator requirements and first is reachable from last.\r\n\r\n</details>\r\n\r\n### Fix\r\n\r\nA previous version of this PR checked both values for `nullptr`, the current one uses unambiguously well-defined pointer subtraction instead, which is per [expr.add](https://eel.is/c++draft/expr.add#5):\r\n> If P and Q both evaluate to null pointer values, the value is 0.\r\n\r\nThis applies on the first call before any memory is allocated, when both pointers are `nullptr`.\r\nUsing `operator-` directly is simpler and avoids the ambiguity entirely.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-28T13:01:04Z",
      "updated_at": "2026-01-21T06:47:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34161",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1834,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3193702464,
      "number": 34361,
      "title": "test: clean up tx resurrection (re-org) test in feature_block.py",
      "body": "The following comment about ECDSA signatures created with the test framework not passing mempool policy has been obsolete for a long time (at least since 2019, see PR #15826):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8c07800b193e94740a20f40d3e7c6626a59dd21f/test/functional/feature_block.py#L1167-L1172\r\n\r\nso remove it. While at it, change the resurrected txs to be indeed standard valid, so the `acceptnonstdtxn=1` parameter can also be removed from the functional test.\r\n\r\nKudos to stratospher, who (IIRC) mentioned this outdated comment a while ago.",
      "state": "open",
      "user": "theStack",
      "created_at": "2026-01-21T04:08:53Z",
      "updated_at": "2026-01-21T05:28:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34361",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 619,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173584131,
      "number": 34284,
      "title": "ipc, test: Add tests for unclean disconnect and thread busy behavior",
      "body": "Upcoming libmultiprocess changes are expected to alter this behavior (https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3749243782), making test coverage useful for documenting current behavior and validating the intended changes.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2026-01-14T13:46:24Z",
      "updated_at": "2026-01-21T04:15:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34284",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 310,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3176742789,
      "number": 34301,
      "title": "wallet: remove outdated `RewriteDB` calls from SPKM & `DBErrors::NEED_REWRITE` enum value",
      "body": "ISTM that there is no implementation left of the `RewriteDB` method in any of the SPKMs, and thus, its call sites can be removed safely.\r\n\r\nAlso remove `DBErrors::NEED_REWRITE` enum value as its usage is outdated now.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "open",
      "user": "rkrux",
      "created_at": "2026-01-15T10:11:36Z",
      "updated_at": "2026-01-21T03:37:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34301",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 2373,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3176535463,
      "number": 34299,
      "title": "wallet: re-activate \"AmountWithFeeExceedsBalance\" error",
      "body": "picks up https://github.com/bitcoin/bitcoin/pull/25269.\r\n\r\n`AmountWithFeeExceedsBalance` error inside `WalletModel::prepareTransaction` is never thrown and remains an unused code path. This is because `createTransaction` does not retrieve the fee when the process fails. The fee return arg is set only at the end of the process, when the transaction is successfully created. Therefore, if the transaction creation fails, the fee is not available inside `WalletModel::prepareTransaction` to trigger the `AmountWithFeeExceedsBalance` error.\r\n\r\nThis PR re-implements the feature inside `CreateTransactionInternal` and adds test coverage for it.\r\n\r\n| on master | on PR |\r\n|-----------|-------|\r\n| <img src=\"https://github.com/user-attachments/assets/a903e687-2466-42c7-b898-5dec24bfe515\" width=\"750\" alt=\"Insufficient funds\" /> | <img src=\"https://github.com/user-attachments/assets/74bb3c83-6132-4c09-91f0-0a446618b3c8\" width=\"750\" alt=\"AmountWithFeeExceedsBalance\" /> |\r\n\r\nthe unreachable code path is removed in https://github.com/bitcoin-core/gui/pull/807 which requires this PR.\r\n",
      "state": "open",
      "user": "stratospher",
      "created_at": "2026-01-15T09:06:21Z",
      "updated_at": "2026-01-21T02:16:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34299",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1137,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2540992851,
      "number": 32606,
      "title": "p2p: Drop unsolicited CMPCTBLOCK from non-HB peer",
      "body": "Processing unsolicited `CMPCTBLOCK`'s from a peer that has not been marked high bandwidth is not well-specified behavior in BIP-0152, in fact the BIP seems to imply that it is not permitted:\r\n\r\n> \"[...] method is not useful for compact blocks because `cmpctblock` blocks can be sent unsolicitedly in high-bandwidth mode\"\r\n\r\nSee https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki#separate-version-for-segregated-witness\r\n\r\nThis partially mitigates a mempool leak described in #28272, making it only possible for peers selected as high bandwidth to discover a node's mempool.",
      "state": "open",
      "user": "davidgumberg",
      "created_at": "2025-05-23T21:58:15Z",
      "updated_at": "2026-01-21T01:18:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32606",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 635,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2393065673,
      "number": 32065,
      "title": "i2p: make a time gap between creating transient sessions and using them",
      "body": "Connecting to an I2P peer consists of creating a session (the\r\n`SESSION CREATE` command) and then connecting to the peer using that\r\nsession (`STREAM CONNECT ID=session_id ...`).\r\n\r\nThis change is only relevant for transient sessions because when a\r\npersistent session is used it is created once and used for all\r\nconnections.\r\n\r\nBefore this change Bitcoin Core would create the session and use it in\r\nquick succession. That is, the `SESSION CREATE` command would be\r\nimmediately followed by `STREAM CONNECT`. This could ease network\r\nactivity monitoring by an adversary.\r\n\r\nTo mitigate that, this change creates sessions upfront without an\r\nimmediate demand for new sessions and later uses them. This creates a\r\ntime gap between `SESSION CREATE` and `STREAM CONNECT`. Note that there\r\nis always some demand for new I2P connections due to disconnects.\r\n\r\n---\r\n\r\nSummary of the changes in the code:\r\n\r\n* Create the session from the `Session` constructor (send `SESSION CREATE`\r\n  to the I2P SAM proxy). This constructor was only called when transient\r\n  sessions were needed and was immediately followed by `Connect()` which\r\n  would have created the session. So this is a noop change if viewed\r\n  in isolation.\r\n\r\n* Every time we try to connect to any peer (not just I2P) create a new\r\n  I2P session, up to a limit (currently 10). This way a bunch of\r\n  sessions are created (`SESSION CREATE`) at times that are decoupled\r\n  from the time when sessions will be used (`STREAM CONNECT`).\r\n\r\n* Tweak the code in `CConnman::ConnectNode()` to avoid creating session\r\n  objects while holding `m_unused_i2p_sessions_mutex` because now\r\n  creating `i2p::sam::Session` involves network activity and could take\r\n  a few seconds.\r\n\r\n---\r\n\r\nBefore (note the timestamps):\r\n\r\n2025-03-13T09:23:40Z [opencon] [i2p:info] Transient SAM session cd7ea49a7e created\r\n2025-03-13T09:23:43Z [opencon] [i2p] -> STREAM CONNECT ID=cd7ea49a7e DESTINATION=...\r\n\r\n2025-03-13T09:23:51Z [opencon] [i2p:info] Transient SAM session cb0956207e created\r\n2025-03-13T09:23:52Z [opencon] [i2p] -> STREAM CONNECT ID=cb0956207e DESTINATION=...\r\n\r\n2025-03-13T09:24:04Z [opencon] [i2p:info] Transient SAM session 35ad67f343 created\r\n2025-03-13T09:24:04Z [opencon] [i2p] -> STREAM CONNECT ID=35ad67f343 DESTINATION=...\r\n\r\nAfter:\r\n\r\n2025-03-13T17:08:58Z [opencon] [i2p:info] Transient SAM session 16098cd4ea created\r\n2025-03-13T17:09:34Z [opencon] [i2p] -> STREAM CONNECT ID=16098cd4ea DESTINATION=...\r\n\r\n2025-03-13T17:09:38Z [opencon] [i2p:info] Transient SAM session 5d209bf1bc created\r\n2025-03-13T17:09:59Z [opencon] [i2p] -> STREAM CONNECT ID=5d209bf1bc DESTINATION=...\r\n\r\n2025-03-13T17:09:50Z [opencon] [i2p:info] Transient SAM session e78aa6d2e7 created\r\n2025-03-13T17:12:09Z [opencon] [i2p] -> STREAM CONNECT ID=e78aa6d2e7 DESTINATION=...\r\n\r\n---\r\n\r\nThis was suggested by @eyedeekay some time ago (in 2023 actually) and has been lingering in my TODO since then :eyes:. A further suggestion is to also add a time gap between the activity cease and the closing of the session. For this, when `CNode` is destroyed `CNode::m_i2p_sam_session` would have to be moved elsewhere and destroyed at a later time. cc @zzzi2p",
      "state": "open",
      "user": "vasild",
      "created_at": "2025-03-14T08:29:59Z",
      "updated_at": "2026-01-21T00:58:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32065",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3245,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1185011431,
      "number": 26812,
      "title": "test: add end-to-end tests for CConnman and PeerManager",
      "body": "Add unit tests that write data to a mocked socket and inspect what CConnman/PeerManager have written back to the socket, or check the internal state to verify that the behavior is as expected.\r\n\r\nThis is now possible, after most of https://github.com/bitcoin/bitcoin/pull/21878 has been merged - we don't do any syscalls (e.g. `connect()`, `recv()`) from the high level code and using a mocked socket allows testing the entire networking stack without opening actual network connections.",
      "state": "open",
      "user": "vasild",
      "created_at": "2023-01-04T14:39:37Z",
      "updated_at": "2026-01-21T00:58:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26812",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 543,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3187604599,
      "number": 34338,
      "title": "ci, iwyu: Fix warnings in `src/zmq` and treat them as errors",
      "body": "This PR [continues](https://github.com/bitcoin/bitcoin/pull/33725#issuecomment-3466897433) the ongoing effort to enforce IWYU warnings.\r\n\r\nPrevious PRs:\r\n- https://github.com/bitcoin/bitcoin/pull/33810\r\n- https://github.com/bitcoin/bitcoin/pull/31308\r\n- https://github.com/bitcoin/bitcoin/pull/34079\r\n- https://github.com/bitcoin/bitcoin/pull/33779\r\n\r\nFor accompanying documentation, please see [Developer Notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#using-iwyu).\r\n\r\nAdditionally, this adds a new include category to `src/.clang-format`.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-19T12:24:27Z",
      "updated_at": "2026-01-21T00:08:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34338",
      "labels": [
        "Refactoring",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 630,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2961054510,
      "number": 33738,
      "title": "log: avoid collecting `GetSerializeSize` data when compact block logging is disabled",
      "body": "### Context\r\n\r\nThe new accounting options introduced in https://github.com/bitcoin/bitcoin/pull/32582 can be quite heavy, and are not needed when debug logging is disabled.\r\n\r\n### Problem\r\n`PartiallyDownloadedBlock::FillBlock()` and `PeerManagerImpl::SendBlockTransactions()` accumulate transaction sizes for debug logging by calling `ComputeTotalSize()` in loops, which invokes expensive `GetSerializeSize()` serializations.\r\nThe block header hash is also only computed for the debug log.\r\n\r\n### Fixes\r\n\r\nGuard the size and hash calculations with `LogAcceptCategory()` checks so the serialization and hashing work only occurs when compact block debug logging is enabled.\r\n\r\nAlso modernized the surrounding code a bit since the change is quite trivial.\r\n\r\n### Reproducer\r\n\r\nYou can test the change by starting an up-to-date `bitcoind` node with `-debug=cmpctblock` and observing compact block log lines such as:\r\n\r\n> [cmpctblock] Successfully reconstructed block 00000000000000000001061eaa6c0fe79258e7f79606e67ac495765cb121a520 with 1 txn prefilled, 3122 txn from mempool (incl at least 3 from extra pool) and 641 txn (352126 bytes) requested\r\n\r\n<details>\r\n<summary>Test patch</summary>\r\n\r\n```patch\r\ndiff --git a/src/blockencodings.cpp b/src/blockencodings.cpp\r\nindex 58620c93cc..f16eb38fa5 100644\r\n--- a/src/blockencodings.cpp\r\n+++ b/src/blockencodings.cpp\r\n@@ -186,6 +186,7 @@ bool PartiallyDownloadedBlock::IsTxAvailable(size_t index) const\r\n\r\n ReadStatus PartiallyDownloadedBlock::FillBlock(CBlock& block, const std::vector<CTransactionRef>& vtx_missing, bool segwit_active)\r\n {\r\n+    LogInfo(\"PartiallyDownloadedBlock::FillBlock called\");\r\n     if (header.IsNull()) return READ_STATUS_INVALID;\r\n\r\n     block = header;\r\n@@ -218,6 +219,7 @@ ReadStatus PartiallyDownloadedBlock::FillBlock(CBlock& block, const std::vector<\r\n     }\r\n\r\n     if (LogAcceptCategory(BCLog::CMPCTBLOCK, BCLog::Level::Debug)) {\r\n+        LogInfo(\"debug log enabled\");\r\n         const uint256 hash{block.GetHash()}; // avoid cleared header\r\n         uint32_t tx_missing_size{0};\r\n         for (const auto& tx : vtx_missing) tx_missing_size += tx->ComputeTotalSize(); // avoid cleared txn_available\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 5600c8d389..c081825f77 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2470,6 +2470,7 @@ uint32_t PeerManagerImpl::GetFetchFlags(const Peer& peer) const\r\n\r\n void PeerManagerImpl::SendBlockTransactions(CNode& pfrom, Peer& peer, const CBlock& block, const BlockTransactionsRequest& req)\r\n {\r\n+    LogInfo(\"PeerManagerImpl::SendBlockTransactions called\");\r\n     BlockTransactions resp(req);\r\n     for (size_t i = 0; i < req.indexes.size(); i++) {\r\n         if (req.indexes[i] >= block.vtx.size()) {\r\n@@ -2480,6 +2481,7 @@ void PeerManagerImpl::SendBlockTransactions(CNode& pfrom, Peer& peer, const CBlo\r\n     }\r\n\r\n     if (LogAcceptCategory(BCLog::CMPCTBLOCK, BCLog::Level::Debug)) {\r\n+        LogInfo(\"debug log enabled\");\r\n         uint32_t tx_requested_size{0};\r\n         for (const auto i : req.indexes) tx_requested_size += block.vtx[i]->ComputeTotalSize();\r\n         LogDebug(BCLog::CMPCTBLOCK, \"Peer %d sent us a GETBLOCKTXN for block %s, sending a BLOCKTXN with %u txns. (%u bytes)\\n\", pfrom.GetId(), block.GetHash().ToString(), resp.txn.size(), tx_requested_size);\r\n```\r\n\r\n</details>\r\n",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-10-29T22:57:43Z",
      "updated_at": "2026-01-20T23:41:41Z",
      "merged_at": "2026-01-20T23:41:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33738",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2582853972,
      "number": 32724,
      "title": "Musig2 tests",
      "body": "Built on https://github.com/bitcoin/bitcoin/pull/31244\r\n\r\nThis PR adds explicit tests for Bitcoin Core's MuSig2 interface.\r\n\r\nAny issues in musig2.{cpp,h} will likely also be caught by the descriptor tests, but having more detailed tests for the MuSig2 class itself improves test reporting/coverage.\r\n\r\nIt uses BIP 328 test vectors.",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-06-11T02:08:39Z",
      "updated_at": "2026-01-20T23:24:11Z",
      "merged_at": "2026-01-20T23:24:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32724",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 345,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2293116283,
      "number": 31713,
      "title": "miniscript refactor: Remove unique_ptr-indirection",
      "body": "Removes one level of unnecessary indirection, which was a change that originally [aided in finding one issue](https://github.com/bitcoin/bitcoin/pull/30866#pullrequestreview-2434704657) in #30866. Simplifies the code one step further than 09a1875ad8cddeb17c19af34b8282d37fed0937e belonging to aforementioned PR.\r\n\r\nAlso adds test which verifies resistance to stack overflow when it comes to `~Node()` and `Node::Clone()`.\r\n\r\nNo observed difference when running benchmarks: ExpandDescriptor/WalletIsMineDescriptors/WalletIsMineMigratedDescriptors/WalletLoadingDescriptors.\r\n\r\nFollowup to #30866.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-22T21:16:33Z",
      "updated_at": "2026-01-20T22:57:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31713",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 645,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2930696206,
      "number": 33663,
      "title": "net: Filter addrman during address selection via AddrPolicy to avoid underfill",
      "body": "This PR introduces `AddrMan::AddrPolicy`, a predicate that allows callers to\r\nexclude addresses during selection. The policy returns true to skip a given\r\nentry and is evaluated while holding `AddrMan::cs`.\r\n\r\nThe mechanism is used in `CConnman::GetAddressesUnsafe()` to filter out\r\nbanned and discouraged peers during address selection instead of removing\r\nthem afterward. This prevents P2P responses (`GETADDR`) and RPCs (`getnodeaddresses)` from\r\nreturning fewer results than requested when large portions of the address space are filtered.\r\n\r\nAdditional improvements:\r\n- Logs the number of filtered entries for diagnostics\r\n- Avoids redundant filtering passes in higher-level callers\r\n- Keeps locking behavior unchanged (the policy runs under `AddrMan::cs`)\r\n\r\n**Testing**\r\n- Repro: ban or discourage a large set of addresses, then call\r\n  `getnodeaddresses 1`,  previously underfilled.\r\n- After this change, the RPC returns up to the requested count as expected.\r\n\r\nNo behavior change for unaffected callers.\r\n",
      "state": "open",
      "user": "waketraindev",
      "created_at": "2025-10-20T18:03:51Z",
      "updated_at": "2026-01-20T22:54:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33663",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1094,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3191559491,
      "number": 34352,
      "title": "ci, iwyu: Fix warnings in `src/primitives` and treat them as errors",
      "body": "This PR [continues](https://github.com/bitcoin/bitcoin/pull/33725#issuecomment-3466897433) the ongoing effort to enforce IWYU warnings.\r\n\r\nPrevious PRs:\r\n- https://github.com/bitcoin/bitcoin/pull/33810\r\n- https://github.com/bitcoin/bitcoin/pull/31308\r\n- https://github.com/bitcoin/bitcoin/pull/34079\r\n- https://github.com/bitcoin/bitcoin/pull/33779\r\n- https://github.com/bitcoin/bitcoin/pull/34338\r\n\r\nFor accompanying documentation, please see [Developer Notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#using-iwyu).",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-20T14:47:11Z",
      "updated_at": "2026-01-20T22:42:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34352",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 612,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3124280596,
      "number": 34141,
      "title": "miniscript: Use Func and Expr when parsing keys, hashes, and locktimes",
      "body": "The miniscript parser currently only looks for the next `)` when parsing key, hash, and locktime expressions. This fails to parse when the expressions contain a nested expression. Currently, this is only possible with `musig()` inside of key expressions. However, this pattern can be generalized to handling hashes and locktimes, so I implemented those too.\r\n\r\nFixes #34076",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-12-22T21:36:58Z",
      "updated_at": "2026-01-20T22:22:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34141",
      "labels": [
        "Descriptors"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 444,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2713577873,
      "number": 33117,
      "title": "Interfaces: Expose UTXO Snapshot Loading and Add Progress Notifications",
      "body": "# Add UTXO Snapshot Loading Interface and Progress Notifications\r\n\r\nThis PR implements a complete interface for loading UTXO snapshots through the GUI, including progress notifications to provide user feedback during the loading process.\r\n\r\n---\r\n\r\n## Changes\r\n\r\n### Commit 1: `interfaces: expose UTXO snapshot loading in node interface`\r\n\r\n- Added a new virtual method `loadSnapshot` to the node interface for loading UTXO snapshots.\r\n- Updated the implementation in `interfaces.cpp` to activate the snapshot using the provided file and metadata.\r\n- This change enhances the user's ability to load UTXO snapshots through the GUI.\r\n\r\n### Commit 2: `notifications: Implement snapshot load progress notifications`\r\n\r\n- Added a new signal `SnapshotLoadProgress` for snapshot load progress in the UI interface.\r\n- Updated the notifications interface to include a method for reporting snapshot loading progress.\r\n- Enhanced the `ChainstateManager` to report progress during snapshot loading.\r\n- Implemented the necessary handler in the kernel notifications to relay progress updates.\r\n- This change improves user feedback during the snapshot loading process.\r\n\r\n### Commit 3: `rpc: refactor loadtxoutset to use snapshot interface`\r\n\r\n- Updated the loadtxoutset RPC to call the new snapshot interface instead of directly working with chainstate internals.\r\n- Added getMetadata and getActivationResult methods to the snapshot interface to provide parity with the legacy RPC.\r\n- Improves modularity by consolidating snapshot handling through the interface layer.\r\n\r\n---\r\n\r\n## Technical Details\r\n\r\nThe implementation includes:\r\n\r\n- **UI Interface Enhancement**\r\n  Added `SnapshotLoadProgress` signal to `CClientUIInterface` with corresponding signal declaration and implementation.\r\n\r\n- **Node Interface**\r\n  Added `loadSnapshot` virtual method to the node interface with implementation in `interfaces.cpp`.\r\n\r\n- **Progress Notifications**\r\n  Implemented `snapshotLoadProgress` method in `KernelNotifications` class to relay progress updates to the UI.\r\n\r\n- **Base Interface**\r\n  Added `snapshotLoadProgress` virtual method to the kernel notifications interface.\r\n\r\n---\r\n\r\n## Benefits\r\n\r\n- **User Experience**\r\n  Provides real-time feedback during UTXO snapshot loading operations.\r\n\r\n- **GUI Integration**\r\n  Enables loading UTXO snapshots directly through the Bitcoin Core GUI.\r\n\r\n- **Progress Tracking**\r\n  Users can monitor the progress of snapshot loading operations.\r\n\r\n- **Consistent Interface**\r\n  Follows the existing pattern for progress notifications in the codebase.\r\n\r\n## Testing\r\n\r\n- **Daemon** build and launch `bitcoind` then with `bitcoin-cli` load a snapshot using:\r\n```bash\r\n./bitcoin-cli -rpcclienttimeout=0 -signet loadtxoutset /path/to/utxo-snapsshot.dat\r\n```\r\n- **QT Widgets**: build and run [this](https://github.com/bitcoin-core/gui/pull/870) draft PR in legacy gui repo \r\n- **QML** version: for a modern look build and run [this](https://github.com/bitcoin-core/gui-qml/pull/488) PR in the newly updated gui-qml repo \r\n",
      "state": "open",
      "user": "D33r-Gee",
      "created_at": "2025-08-01T15:31:46Z",
      "updated_at": "2026-01-20T20:32:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33117",
      "labels": [
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 3107,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2513877394,
      "number": 32471,
      "title": "wallet/rpc: fix listdescriptors RPC fails to return descriptors with private key information when wallet contains descriptors missing any key",
      "body": "_TLDR:\r\nCurrently, `listdescriptors [private=true]` will fail for a non-watch-only wallet if any descriptor has a missing private key(e.g `tr()`, `multi()`, etc.). This PR changes that while making sure `listdescriptors [private=true]` still fails if there no private keys. Closes #32078_ \r\n\r\nIn non-watch-only wallets, it's possible to import descriptors as long as at least one private key is included. It's important that users can still view these descriptors when they need to create a backup—even if some private keys are missing ([#32078 (comment)](https://github.com/bitcoin/bitcoin/issues/32078#issuecomment-2781428475)). This change makes it possible to do so.\r\n\r\nThis change also helps prevent `listdescriptors true` from failing completely, because one descriptor is missing some private keys.\r\n\r\n### Notes\r\n- The new behaviour is applied to all descriptors including miniscript descriptors\r\n- `listdescriptors true` still fails for watch-only wallets to preserve existing behaviour https://github.com/bitcoin/bitcoin/pull/24361#discussion_r920801352\r\n- Wallet migration logic previously used `Descriptor::ToPrivateString()` to determine which descriptor was watchonly. This means that modifying the `ToPrivateString()` behaviour caused descriptors that were previously recognized as \"watchonly\" to be \"non-watchonly\". **In order to keep the scope of this PR limited to the RPC behaviour, this PR uses a different method to determine `watchonly` descriptors for the purpose of wallet migration.** A follow-up PR can be opened to update migration logic to exclude descriptors with some private keys from the `watchonly` migration wallet. \r\n\r\n### Relevant PRs\r\nhttps://github.com/bitcoin/bitcoin/pull/24361\r\nhttps://github.com/bitcoin/bitcoin/pull/32186\r\n\r\n### Testing\r\nFunctional tests were added to test the new behaviour\r\n\r\nEDIT\r\n**`listdescriptors [private=true]` will still fail when there are no private keys because non-watchonly wallets must have private keys and calling `listdescriptors [private=true]` for watchonly wallet returns an error**",
      "state": "closed",
      "user": "Eunovo",
      "created_at": "2025-05-12T13:26:20Z",
      "updated_at": "2026-01-20T20:17:42Z",
      "merged_at": "2026-01-20T20:17:42Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32471",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2204,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3149157644,
      "number": 34207,
      "title": "coins/refactor: enforce `GetCoin()` returns only unspent coins",
      "body": "This PR is split out from #33018 to keep that PR focused on removing the `FRESH-but-not-DIRTY` cache state.\r\n\r\n### Problem \r\n`::GetCoin()` is an interface for querying the UTXO set, so production implementations should only ever return unspent coins. Tests should mimic this to provide useful feedback.\r\n\r\n### Fix:\r\n* Add a fail-fast assertion that `CCoinsViewDB::GetCoin()` never returns a spent coin.\r\n* Align unit tests and fuzz simulations with the production `GetCoin()` contract by never returning spent coins.\r\n* Replace the unreachable “spent coin returned by parent” handling in `CCoinsViewCache::FetchCoin()` with `Assert(!coin.IsSpent())`, drop outdated `spent+FRESH` docs, and tighten `SanityCheck()` invariants.\r\n\r\nBehavior is unchanged, it just aligns our tests to exercise valid states.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-06T11:24:58Z",
      "updated_at": "2026-01-20T18:55:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34207",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 864,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3164120126,
      "number": 34257,
      "title": "txgraph: deterministic optimal transaction order",
      "body": "Part of #30289.\r\n\r\nTxGraph's fundamental responsibility is deciding the order of transactions in the mempool. It relies on the `cluster_linearize.h` code to optimize it, but there can and often will be many different orderings that are essentially equivalent from a quality perspective, so we have to pick one. At a high level, the solution will involve one or more of:\r\n* Deciding based on **internal identifiers** (`Cluster::m_sequence`, `DepGraphIndex`). This is very simple, but risks leaking information about transaction receive order.\r\n* Deciding **randomly**, which is private, but may interfere with relay expectations, block propagation, and ability to monitor network behavior.\r\n* Deciding **based on txid**, which is private and deterministic, but risks incentivizing grinding to get an edge (though we haven't really seen such behavior).\r\n* Deciding **based on size** (e.g. prefer smaller transactions), which is somewhat related to quality, but not unconditionally (depending on mempool layout, the ideal ordering might call for smaller transactions first, last, or anywhere in between). It's also not a strong ordering as there can be many identically-sized transactions. However, if it were to encourage grinding behavior, incentivizing smaller transactions is probably not a bad thing.\r\n\r\nAs of #32545, the current behavior is primarily picking randomly, though inconsistently, as some code paths also use internal identifiers and size. #33335 sought to change it to use random (preferring size in a few places), with the downsides listed above.\r\n\r\nThis PR is an alternative to that, which changes the order to tie-break based on size everywhere possible, and use lowest-txid-first as final fallback. This is fully deterministic: for any given set of mempool transactions, if all linearized optimally, the transaction order exposed by TxGraph is deterministic.\r\n\r\nThe order of transactions within a chunk is tie-broken using:\r\n1. The output of `PostLinearize` (which improves sub-chunk order), using an initial linearization created using the rules 2-4 below.\r\n2. Individual transaction feerate (high to low)\r\n3. Individual transaction weight (small to large)\r\n4. Txid (low to high txid)\r\n\r\nThe order of chunks within a cluster is tie-broken using:\r\n1. Chunk feerate (high to low)\r\n2. Chunk weight (small to large)\r\n3. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe order of chunks across clusters is tie-broken using:\r\n1. Feerate (high to low)\r\n2. Equal-feerate-chunk-prefix weight (small to large)\r\n3. Max-txid (chunk with lowest maximum-txid first)\r\n\r\nThe equal-feerate-chunk-prefix weight of a chunk C is defined as the sum of the weights of all chunks in the same cluster as C, with the same feerate as C, up to and including C itself, in linearization order (but excluding such chunks that appear after C). This is a well-defined approximation of sorting chunks from small to large across clusters, while remaining consistent with intra-cluster linearization order.\r\n",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-11T23:56:09Z",
      "updated_at": "2026-01-20T18:52:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34257",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3047,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2418138719,
      "number": 32143,
      "title": "Fix 11-year-old mis-categorized error code in OP_IF evaluation",
      "body": "This was introduced by commit ab9edbd6b6eb3efbca11f16fa467c3c0ef905708.\r\n\r\nIt appears the original author may have gotten tired and pasted the wrong error code into this 1 place. Every other situation where the value stack lacks the required number of arguments for the op-code, SCRIPT_ERR_INVALID_STACK_OPERATION is reported. Not so here.  \r\n\r\nThis commit fixes the situation.\r\n\r\nEDIT: Note this turns out to be a dupe of the abandoned #30359 .  \r\n",
      "state": "closed",
      "user": "cculianu",
      "created_at": "2025-03-26T01:46:27Z",
      "updated_at": "2026-01-20T18:26:41Z",
      "merged_at": "2026-01-20T00:40:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32143",
      "labels": [
        "Validation",
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 512,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3191299722,
      "number": 34351,
      "title": "util: Remove `FilterHeaderHasher`",
      "body": "With respect to `std::unordered_map` documentation, the `Hash` type defined in the template is over the `Key` and not `T`, the value. This hasher is incorrectly named as the `FilterHeader` is the value within this map. I consider this a bug as opposed to a refactor as the key and value relationship is implied to be `filter header -> block hash` when it is the opposite.\r\n\r\nref: https://en.cppreference.com/w/cpp/container/unordered_map.html",
      "state": "open",
      "user": "rustaceanrob",
      "created_at": "2026-01-20T13:30:33Z",
      "updated_at": "2026-01-20T17:48:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34351",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 476,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3152436690,
      "number": 34219,
      "title": "psbt: validate pubkeys in MuSig2 pubnonce/partial sig deserialization",
      "body": "The previous fix for invalid MuSig2 pubkeys (bitcoin/bitcoin#34010) only\r\naddressed the PSBT_IN_MUSIG2_PARTICIPANT_PUBKEYS field. However, the\r\nPSBT_IN_MUSIG2_PUB_NONCE and PSBT_IN_MUSIG2_PARTIAL_SIG fields also\r\ndeserialize pubkeys without validation, which could lead to crashes when\r\ninvalid pubkeys are processed.\r\n\r\nThis commit adds validation to the DeserializeMuSig2ParticipantDataIdentifier\r\nfunction to ensure all pubkeys in MuSig2 pubnonce and partial signature\r\nfields are fully valid elliptic curve points.\r\n\r\nThe fix:\r\n- Validates both aggregate and participant pubkeys in MuSig2 pubnonce and\r\n  partial signature deserialization\r\n- Throws std::ios_base::failure with descriptive error messages for invalid\r\n  pubkeys\r\n- Prevents potential crashes from invalid elliptic curve points\r\n- Maintains backward compatibility for valid PSBTs\r\n\r\nThis completes the fix for issues [#33999](https://github.com/bitcoin/bitcoin/issues/33999) and [#34201](https://github.com/bitcoin/bitcoin/issues/34201).",
      "state": "open",
      "user": "tboy1337",
      "created_at": "2026-01-07T12:41:30Z",
      "updated_at": "2026-01-20T17:41:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34219",
      "labels": [
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1075,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 112846431,
      "number": 10102,
      "title": "Multiprocess bitcoin",
      "body": "<!-- begin based-on -->\n**This is based on #29409.** The non-base commits are:\n\n- [`93f471464dd` test: Increase feature_block.py and feature_taproot.py timeouts](https://github.com/bitcoin/bitcoin/pull/10102/commits/93f471464dda67bf59ec474979e5e04989616ff2)\n- [`9c2f8ce25b2` test: Fix multiprocess test for unclean shutdown on kill](https://github.com/bitcoin/bitcoin/pull/10102/commits/9c2f8ce25b263eddcd5e33986626e98d5f391430)\n- [`3582e4a12a3` util: Add util::Result workaround to be compatible with libmultiprocess](https://github.com/bitcoin/bitcoin/pull/10102/commits/3582e4a12a341376e0fcb1d67cda5cc510bb1ae9)\n- [`f1d2d87c6d8` multiprocess: Add capnp serialization code for bitcoin types](https://github.com/bitcoin/bitcoin/pull/10102/commits/f1d2d87c6d87c58749f0f2fb100e184a3ab11303)\n- [`65e4390dcaa` interfaces, refactor: Change WalletLoader::restoreWallet parameter order](https://github.com/bitcoin/bitcoin/pull/10102/commits/65e4390dcaa23ab347a832e3f1ff130650efd2be)\n- [`0e436699c59` multiprocess: Add capnp wrapper for Wallet interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/0e436699c59b537a5948389613dacb5c68fc2872)\n- [`0381cc5dc99` multiprocess: Add capnp wrapper for Node interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/0381cc5dc999795aa1f5bcb77e8d429a9f5221e6)\n- [`88f3246ae7f` multiprocess: Make bitcoin-gui spawn a bitcoin-node process](https://github.com/bitcoin/bitcoin/pull/10102/commits/88f3246ae7f2c0cf79c3f22ba002967dda7a0b16)\n- [`aebc163451b` multiprocess: Make bitcoin-node spawn a bitcoin-wallet process](https://github.com/bitcoin/bitcoin/pull/10102/commits/aebc163451bc8c5fa8cbbcc66b553e17e06e1d82)\n- [`c5b9fe54c9c` multiprocess: Add debug.log .wallet/.gui suffixes](https://github.com/bitcoin/bitcoin/pull/10102/commits/c5b9fe54c9cc367b81487f5c9a4574243e33e7f8)\n- [`a73f70fac8d` doc: Multiprocess misc doc and comment updates](https://github.com/bitcoin/bitcoin/pull/10102/commits/a73f70fac8d396a8d719cafe10853390c53f687b)\n- [`2503f57e93c` combine_logs: Handle multiprocess wallet log files](https://github.com/bitcoin/bitcoin/pull/10102/commits/2503f57e93c32158f837e1c9f0dc9f1061b84346)<!-- end -->\n\n---\n\nThis PR adds an `--enable-multiprocess` configure option which builds new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables with relevant functionality isolated into different processes. See [doc/design/multiprocess.md](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md) for usage details and future plans.\n\nThe change is implemented by adding a new [`Init`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/init.h) interface that spawns new wallet and node subprocesses that can be controlled over a [socketpair](http://man7.org/linux/man-pages/man2/socketpair.2.html) by calling [`Node`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/node.h), [`Wallet`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/wallet.h), and [`ChainClient`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/chain.h) methods. When running with split processes, you can see the IPC messages going back and forth in `-debug=1` output. Followup PR's #19460 and #19461 add `-ipcbind` and `-ipcconnect` options that allow more flexibility in how processes are connected.\n\nThe IPC protocol used is Cap'n Proto, but this could be swapped out for another protocol. Cap'n Proto types and libraries are only accessed in the [src/ipc/capnp/](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/src/ipc/capnp) directory, and not in any public headers or other parts of bitcoin code.\n\nSlides from a presentation describing this change are available on [google drive](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit). Demo code used in the presentation was from an older version this PR (tag [ipc.21](https://github.com/ryanofsky/bitcoin/releases/tag/pr%2Fipc.21), [commits](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21)).\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2017-03-27T21:48:26Z",
      "updated_at": "2026-01-20T16:19:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/10102",
      "labels": [
        "GUI",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 4142,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 304070624,
      "number": 16545,
      "title": "refactor: Implement missing error checking for ArgsManager flags",
      "body": "Trigger startup errors if bitcoin is configured with bad setting values according to flags. Also raise internal errors if settings are registered and retrieved with inconsistent flags.\n\nThis change has no effect on behavior because the new ArgsManager flags added here are not used outside of tests yet.\n\nIt'll probably be easier to start applying type checking flags to _new_ options than _existing_ options. But for examples of how type checking flags can make sense applied to existing options, see the new [example_options unit test](https://github.com/ryanofsky/bitcoin/blob/pr/argcheck/src/test/argsman_tests.cpp#L27) added in this PR.\n\n---\n\nFollowups:\n\n- Support for flag combinations is possible and is added in commit c919f51c044f0e80ecd301f9c9d396ddff2331ba ([branch](https://github.com/ryanofsky/bitcoin/commits/pr/argcomb))\n- ALLOW_LIST flags are added and enforced in [#17580](https://github.com/bitcoin/bitcoin/pull/17580)\n- Bad IsArgSet usages with ALLOW_LIST are removed in [#30529](https://github.com/bitcoin/bitcoin/pull/30529) and prevented in [#17783](https://github.com/bitcoin/bitcoin/pull/17783)\n- Confusing and ignored multiple assignments in config files are disallowed in [#17493](https://github.com/bitcoin/bitcoin/pull/17493)\n- Confusing reverse-precedence settings merging code is removed in [#17581](https://github.com/bitcoin/bitcoin/pull/17581)\n- Type flags added in this PR implement runtime part of a change to add more compile-time checking in [#22978](https://github.com/bitcoin/bitcoin/pull/22978)\n",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-08-04T14:13:12Z",
      "updated_at": "2026-01-20T16:13:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/16545",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1600,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 341661607,
      "number": 17493,
      "title": "util: Forbid ambiguous multiple assignments in config file",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580.** The non-base commits are:\n\n- [`d8dd3ef3144` util: Forbid ambiguous multiple assignments in config file](https://github.com/bitcoin/bitcoin/pull/17493/commits/d8dd3ef314407b1c13f2b5d6e8c7608878736ca5)\n- [`24078e372fa` test: Extend util_ArgsMerge test to check for \"Multiple values specified\" errors](https://github.com/bitcoin/bitcoin/pull/17493/commits/24078e372fa35717e3330721914136ab14a19834)<!-- end -->\n\n---\n\nEnable error \"Multiple values specified for -setting in same section of config file.\", for ALLOW_ANY settings that don't specify ALLOW_LIST.\n\nInstead of silently ignoring settings, this change makes it an error to provide an ambiguous config file that provides assigns multiple values to a single-value setting. Change includes release notes.\n\nPart of the motivation for this change is to improve usability and prevent settings that look valid from being silently ignored. Another motivation is to be able to remove confusing \"reverse precedence\" logic in #17581",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-15T22:11:44Z",
      "updated_at": "2026-01-20T16:08:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17493",
      "labels": [
        "Refactoring",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1096,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3182466003,
      "number": 34322,
      "title": "node: Persist private broadcast transactions over node restarts",
      "body": "Follow-up from #29415 \r\n\r\nCurrently private broadcast transactions are stored in peer manager and do not persist over restarts. A submitted transaction can be lost if the node restarts before it is privately broadcast.\r\n\r\nThis change dumps the set of private broadcast transactions to a `privatebroadcast.dat` file on shutdown, and adds the transactions back to the private broadcast data structure on restart.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2026-01-16T19:37:05Z",
      "updated_at": "2026-01-20T16:05:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34322",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 474,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 344943058,
      "number": 17580,
      "title": "refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags",
      "body": "<!-- begin based-on -->\n**This is based on #16545.** The non-base commits are:\n\n- [`5e3583b295d` common: Add support for combining ArgsManager flags](https://github.com/bitcoin/bitcoin/pull/17580/commits/5e3583b295d3b47466bff325b49ee6219cc88a3a)\n- [`2d9f706e7ab` scripted-diff: Add ALLOW_LIST flag to arguments retrieved with GetArgs](https://github.com/bitcoin/bitcoin/pull/17580/commits/2d9f706e7ab09f6c21bf9e080616a1c607a3aea9)\n- [`482989ddee6` refactor: Fix more ALLOW_LIST arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/482989ddee6c0f0be0cb1184930c5a675da61728)\n- [`ef344f8b706` Always reject empty -blockfilterindex=\"\" arguments](https://github.com/bitcoin/bitcoin/pull/17580/commits/ef344f8b70640f8ebc179e09943f654f54b8756b)\n- [`07bdd5ac3e5` refactor: Stop calling GetArg/IsArgSet on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17580/commits/07bdd5ac3e541e2c8f40c91de24cdbd8d5a8d179)\n- [`6f506623804` refactor: Always enforce ALLOW_LIST in CheckArgFlags](https://github.com/bitcoin/bitcoin/pull/17580/commits/6f5066238047501d3d9d9f8eb2da7f55f6c32dd7)<!-- end -->\n\n---\n\nExcept for two `rpcauth` and `blockfilterindex` fixes (update: rpcauth fix was merged separately in #30401) this PR does not change any behavior outside of tests. It is just supposed to enforce internal consistency and prevent bugs by ensuring that list arguments are always retrieved with GetArgs() and non-list arguments are always retrieved with GetArg(). Followup PRs could use the ALLOW_LIST flags for better documentation and error checking in the future. For example, #17493 builds on this to disallow conflicting config values. \n\nThis change was originally made as part of #17493",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:05:39Z",
      "updated_at": "2026-01-20T16:02:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17580",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1763,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 344944113,
      "number": 17581,
      "title": "refactor: Remove settings merge reverse precedence code",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580 + #17493.** The non-base commits are:\n\n- [`f50e5fe9bed` refactor: Remove settings merge reverse precedence code](https://github.com/bitcoin/bitcoin/pull/17581/commits/f50e5fe9bedcb6f4a204d9e46812d506ae1f3533)<!-- end -->\n\n---\n\nThis has no effect on behavior because as of https://github.com/bitcoin/bitcoin/pull/17493 it's not possible to specify multiple values for single value settings in the config file.\n\nThis change implements one of the settings simplifications listed in #17508",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-11-24T20:17:13Z",
      "updated_at": "2026-01-20T15:57:03Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17581",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 600,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3176493415,
      "number": 34298,
      "title": "ci: Add and use ci/test/modernize-deprecated-headers.py",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/34237\r\n\r\nCurrently, there is a massive iwyu patch to try to implement `modernize-deprecated-headers`.\r\n\r\nHowever, it does not work. For example https://github.com/bitcoin/bitcoin/actions/runs/21012214401/job/60409645985#step:11:35548:\r\n\r\n```diff\r\n\r\n+#include <assert.h>\r\n #include <bench/bench.h>\r\n```\r\n\r\nFix all issues by removing the patch and using a trivial and fast `modernize-deprecated-headers.py` instead.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-15T08:52:45Z",
      "updated_at": "2026-01-20T15:55:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34298",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 517,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3177024290,
      "number": 34302,
      "title": "fuzz: Restore SendMessages coverage in process_message(s) fuzz targets",
      "body": "*Found and reported by Crypt-iQ (thanks!)*\r\n\r\nCurrently the process_message(s) fuzz targets do not have any meaningful `SendMessages` code coverage. This is not ideal.\r\n\r\nFix the problem by adding back the coverage, and by hardening the code here, so that the problem hopefully does not happen again in the future.\r\n\r\n### Historic context for this regression\r\n\r\nThe regression was introduced in commit fa11eea4059a608f591db4469c07a341fd33a031, which built a new deterministic peerman object. However, the patch was incomplete, because it was missing one hunk to replace `g_setup->m_node.peerman->SendMessages(&p2p_node);` with `peerman->SendMessages(&p2p_node);`.\r\n\r\nThis means the stale and empty peerman from the node context and not the freshly created and deterministic peerman was used.\r\n\r\nA simple fix would be to just submit the missing patch hunk. However, this still leaves the risk that the issue is re-introduced at any time in the future. So instead, I think the stale and empty peerman should be de-constructed, so that any call to it will lead to a hard sanitizer error and fuzz failure.\r\n\r\nDoing that also uncovered another issue: The connman was holding on to a reference to a stale and empty addrman.\r\n\r\nSo fix all issues by:\r\n\r\n* Allowing the addrman reference in connman to be re-seatable\r\n* Clearing all stale objects, before creating new objects, and then using references to the new objects in all code\r\n\r\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-15T11:45:59Z",
      "updated_at": "2026-01-20T15:53:46Z",
      "merged_at": "2026-01-20T15:46:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34302",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1499,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 355780577,
      "number": 17783,
      "title": "common: Disallow calling IsArgSet() on ALLOW_LIST options",
      "body": "<!-- begin based-on -->\n**This is based on #16545 + #17580.** The non-base commits are:\n\n- [`e327e592703` Normalize inconsistent -noonlynet behavior with -privatebroadcast and -listenonion](https://github.com/bitcoin/bitcoin/pull/17783/commits/e327e592703602a4d4faf2d1c135836c7d709b2a)\n- [`bf609a93e61` common: Disallow calling IsArgSet() on ALLOW_LIST options](https://github.com/bitcoin/bitcoin/pull/17783/commits/bf609a93e61feb55b77996c324cfb6e70ca49b9f)<!-- end -->\n\n---\n\nDisallow calling IsArgSet() function on ALLOW_LIST options. Code that uses IsArgSet() with list options is confusing and leads to bugs when IsArgSet() returns true, but GetArgs() returns an empty list, so the option is considered enabled even though it is empty. This led to a number of bugs which are fixed in #30529",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2019-12-20T15:36:53Z",
      "updated_at": "2026-01-20T15:51:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/17783",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 851,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 445592053,
      "number": 19460,
      "title": "multiprocess: Add bitcoin-wallet -ipcconnect option",
      "body": "<!-- begin based-on -->\n**This is based on #29409 + #10102.** The non-base commits are:\n\n- [`5124e765ad6` multiprocess: Add bitcoin-wallet -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19460/commits/5124e765ad63cfa8e6ae2dec27d427e4f9012018)<!-- end -->\n\n---\n\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-wallet` and an `-ipcbind` option to `bitcoin-node` (both enabled by default in multiprocess builds) so bitcoin node will listen on a `<datadir>/sockets/node.sock` unix socket, and `bitcoin-wallet` will connect to it.\n\nThe idea is that `bitcoin-wallet` can be extended in the future to have some online functionality. For example, there could be a `bitcoin-wallet sync` command that will update balances and sync latest transactions to an unloaded wallet, or a `bitcoin-wallet serve` subcommand that loads a wallet and serves RPC requests, or a `bitcoin-wallet shell` subcommand that allows running RPC methods interactively like the GUI console, or just general support for `bitcoin-wallet <rpc method> <rpc params>` invocations suggested https://github.com/bitcoin/bitcoin/pull/13926#issuecomment-455187379.\n\nThis PR is small and doesn't do much. The only visible change is that `bitcoin-wallet` now checks whether a node socket exists on startup and prints \"Connected to IPC address\" if it can connect it it.\n\nThe default `bitcoin-wallet` connect option is `-ipcconnect=auto`, which connects if possible as described above, and proceeds offline if not possible. Other supported options are `-noipcconnect` to disable ipc, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\n\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2020-07-07T18:53:19Z",
      "updated_at": "2026-01-20T15:45:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19460",
      "labels": [
        "Wallet",
        "Build system",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2117,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 445595297,
      "number": 19461,
      "title": "multiprocess: Add bitcoin-gui -ipcconnect option",
      "body": "<!-- begin based-on -->\n**This is based on #29409 + #10102 + #19460.** The non-base commits are:\n\n- [`86eb8268426` multiprocess: Add bitcoin-gui -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19461/commits/86eb826842691ed52057a1aada702a5c1eb7c262)<!-- end -->\n\n---\n\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-gui` that connects the GUI to an existing `bitcoin-node` process already running in the background instead of spawning a new `bitcoin-node` process. This allows the GUI to be started and stopped independently of the node. By default with this change, `bitcoin-gui` will check if a `<datadir>/sockets/node.sock` socket exists and try to connect to that. If that doesn't work, it will spawn a new node process and start up the same way it did before this PR.\n\nThe default `bitcoin-gui` connect option is `-ipcconnect=auto`, which tries to connect if possible as described above, and spawns a new `bitcoin-node` process if not possible. Other supported options are `-noipcconnect` to never connect to an existing node and always spawn a new one, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\n\nWith this PR, basic functionality works and gui instances can connect and disconnect from a running node. But there are rough edges: If a gui process doesn't shut down cleanly, the node can see unhandled IpcExceptions, and if node command line options are passed to `bitcoin-gui` and `bitcoin-gui` connects to an exiting bitcoin-node process instead of spawning a new one, the node options will be silently ignored. \n\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\n\n---\n\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2020-07-07T19:00:11Z",
      "updated_at": "2026-01-20T15:39:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/19461",
      "labels": [
        "GUI",
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2057,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1971928542,
      "number": 30455,
      "title": "test: assumeutxo: add missing tests in wallet_assumeutxo.py",
      "body": "Adding tests in `./test/functional/wallet_assumeutxo.py` to cover the following scenario:\r\n- test loading a wallet (backup) on a pruned node",
      "state": "closed",
      "user": "alfonsoromanz",
      "created_at": "2024-07-16T16:11:06Z",
      "updated_at": "2026-01-20T15:07:40Z",
      "merged_at": "2025-12-03T10:09:47Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30455",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 200,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2977401488,
      "number": 33779,
      "title": "ci, iwyu: Fix warnings in `src/kernel` and treat them as errors",
      "body": "Now seems like a good time to update the includes in `src/kernel`.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-04T17:03:05Z",
      "updated_at": "2026-01-20T15:04:11Z",
      "merged_at": "2026-01-19T11:47:37Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33779",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 130,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3177617343,
      "number": 34308,
      "title": "doc: Document IWYU workaround",
      "body": "This PR addresses the following comments:\r\n- https://github.com/bitcoin/bitcoin/pull/34079#discussion_r2640003086:\r\n  > it would be good to reduce and report this bug upstream. Otherwise, wide-spread use of iwyu in this code-base seems risky.\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/34079#discussion_r2640035350:\r\n  > Would have been good if it was documented, rather than adding undocumented workarounds for buggy tools.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-15T14:47:47Z",
      "updated_at": "2026-01-20T15:03:00Z",
      "merged_at": "2026-01-20T09:51:48Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34308",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 456,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181450896,
      "number": 34319,
      "title": "Drop some `IWYU pragma: export` and document IWYU usage",
      "body": "First two commits address comments from discussion in https://github.com/bitcoin/bitcoin/pull/33779:\r\n- https://github.com/bitcoin/bitcoin/pull/33779#discussion_r2697579248\r\n- https://github.com/bitcoin/bitcoin/pull/33779#discussion_r2697707343\r\n\r\nThe last commit adds a new section to the Developer Notes to document IWYU usage.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-16T14:19:15Z",
      "updated_at": "2026-01-20T15:02:03Z",
      "merged_at": "2026-01-20T10:37:27Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34319",
      "labels": [
        "Refactoring",
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 385,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3178134777,
      "number": 34310,
      "title": "iwyu: Add missed line to IWYU patch",
      "body": "This PR makes IWYU suggest `<cassert>` over `<assert.h>`.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/34237.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-15T17:23:58Z",
      "updated_at": "2026-01-20T15:01:23Z",
      "merged_at": "2026-01-20T14:57:15Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34310",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 151,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1004149182,
      "number": 25665,
      "title": "refactor: Add util::Result failure types and ability to merge result values",
      "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/0263614685582fed2290494f5233dbe038fc350c) as an initial application. Followup PRs [#25722](https://github.com/bitcoin/bitcoin/pull/25722) and [#29700](https://github.com/bitcoin/bitcoin/pull/29700) use it more broadly to return errors and warnings from wallet and kernel functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations. See [design notes](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/util::Result-design-notes).\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Comparison with `std::expected`\r\n\r\nCurrently, the `util::Result` class is useful for error reporting—returning translated, user-facing error strings—but not as useful for error handling, where callers need structured failure information to decide how to proceed. By contrast, `std::expected` / `util::Expected` (#34005, #34006) is good for error handling but less helpful for reporting. This PR closes the gap between the two classes.\r\n\r\nWith this PR, `std::expected` remains a good choice for lower-level functions or simple functions that fail in only a few well-defined ways. Meanwhile,\r\n\r\n- `Result` becomes a better choice for operations that can fail in many different ways—loading a wallet, connecting a block, etc.—where callers may want complete error traces, not just low-level errors without context or high-level errors without detail. (Followup [#25722](https://github.com/bitcoin/bitcoin/pull/25722) applies this to wallet-loading functions.) \r\n- `Result` can also be more useful than `expected` when merging status information from multiple calls. (Followup [#29700](https://github.com/bitcoin/bitcoin/pull/29700) uses this to reliably propagate flush and fatal-error status from validation code that can internally trigger flushes or shutdowns.)\r\n- `Result` may also be a better choice than `std::expected` when returning pointer values. (Followup [#26022](https://github.com/bitcoin/bitcoin/pull/26022) adds a `ResultPtr` specialization that avoids double dereferencing.) \r\n- `Result` can be more efficient than `std::expected` when failures are rare but failure objects are large, since failure values are heap-allocated.\r\n\r\nThis PR effectively makes `Result` a superset of `expected`, making the representations compatible and allowing them to be used together.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-07-21T12:46:09Z",
      "updated_at": "2026-01-20T14:58:28Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25665",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4045,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3119768347,
      "number": 34125,
      "title": "refactor: reuse `should_empty` check for chainstate flush",
      "body": "Minor follow-up to https://github.com/bitcoin/bitcoin/pull/33866\r\n\r\nReuse the `should_empty` predicate for both the write decision and for selecting `CoinsTip().Flush()` vs `CoinsTip().Sync()`.\r\nThis is a pure refactor, no behavior is changed.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-12-20T12:14:47Z",
      "updated_at": "2026-01-20T14:53:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34125",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 301,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3188542853,
      "number": 34344,
      "title": "ci: update GitHub Actions versions",
      "body": "This PR updates outdated GitHub Action versions to ensure compatibility and improve functionality. The following changes are made to the GitHub Actions:\r\n- `actions/upload-artifact` updated from v4 to v6\r\n- `actions/cache` updated from v4 to v5\r\n- `actions/download-artifact` updated from v5 to v7\r\n\r\nThe updates are necessary to support newer environments and features, and ensure consistent behavior across different workflows. The changes will be tested in the CI pipeline of the pull request.\r\n",
      "state": "closed",
      "user": "pgoslatara",
      "created_at": "2026-01-19T17:02:36Z",
      "updated_at": "2026-01-20T14:49:44Z",
      "merged_at": "2026-01-20T14:49:44Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34344",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 533,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1047758233,
      "number": 26022,
      "title": "Add util::ResultPtr class",
      "body": "<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`5142f017eaa` Add util::ResultPtr class](https://github.com/bitcoin/bitcoin/pull/26022/commits/5142f017eaa3b3f6d0109fc9f836e6243349d541)\n- [`8ef747c80fc` Use ResultPtr<unique_ptr> instead of Result<unique_ptr>](https://github.com/bitcoin/bitcoin/pull/26022/commits/8ef747c80fc3e39ecb2bb5856a489cbfc5737f48)<!-- end -->\n\n---\n\nThe `util::ResultPtr` class is a wrapper for `util::Result` providing syntax sugar to make it less awkward to use with returned pointers. Instead of needing to be deferenced twice with `**result` or `(*result)->member`, it only needs to be dereferenced once with `*result` or `result->member`. Also when it is used in a boolean context, instead of evaluating to true when there is no error and the pointer is null, it evaluates to false so it is straightforward to determine whether the result points to something.\n\nThis PR is only partial a solution to #26004 because while it makes it easier to check for null pointer values, it does not make it impossible to return a null pointer value inside a successful result. It would be possible to enforce that successful results always contain non-null pointers by using a `not_null` type (https://github.com/bitcoin/bitcoin/issues/24423) in combination with `ResultPtr`, though.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2022-09-06T15:57:14Z",
      "updated_at": "2026-01-20T14:31:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26022",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1358,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1220771563,
      "number": 26988,
      "title": "cli: rework -addrinfo cli to use addresses which aren’t filtered for quality/recency",
      "body": "Rework of `-addrinfo` CLI is done using `getaddrmaninfo` RPC proposed in https://github.com/bitcoin/bitcoin/pull/27511. This would be useful for users who want to know the total number of addresses the node knows about and can make connections to. \r\n\r\nCurrently, `-addrinfo` returns total number of addresses the node knows about after filtering them for quality + recency using [`isTerrible`](https://github.com/bitcoin/bitcoin/blob/4b51290f719559b8506425177f7758abe66fe2c3/src/addrman.cpp#L808). However `isTerrible`addresses [don't matter](https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1147725684) when selecting outbound peers to connect to. Total number of addresses the node knows about could be higher than what `-addrinfo` currently displays. See https://github.com/bitcoin/bitcoin/pull/24370.",
      "state": "open",
      "user": "stratospher",
      "created_at": "2023-01-29T21:25:28Z",
      "updated_at": "2026-01-20T14:12:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26988",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 898,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3141522772,
      "number": 34188,
      "title": "test: Add multiple transactions and error handling tests for getreceivedbyaddress",
      "body": "This PR adds comprehensive functional test coverage for the `getreceivedbyaddress` RPC method.\r\n",
      "state": "closed",
      "user": "b-l-u-e",
      "created_at": "2026-01-02T05:56:38Z",
      "updated_at": "2026-01-20T13:55:52Z",
      "merged_at": "2026-01-20T01:04:10Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34188",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 178,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1487286408,
      "number": 28333,
      "title": "wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively",
      "body": "Instead of constructing ScriptPubKeyMans with no data, and then loading data as we find it, we should gather everything first and then load it all on construction. If there actually is no data and we want to setup generation, then that should also occur in a constructor rather than afterwards.\r\n\r\nThis change is only applied to DescriptorScriptPubKeyMan and ExternalSignerScriptPubKeyMan, and should be done for any ScriptPubKeyMans added in the future. I don't think it's really worth it to do this for LegacyScriptPubKeyMan since it would make loading performance worse (or cause layer violations) and it's (supposed to be) going away soon.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-08-24T02:55:39Z",
      "updated_at": "2026-01-20T13:42:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28333",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 725,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1588144092,
      "number": 28802,
      "title": "ArgsManager: support subcommand-specific options",
      "body": "Adds the ability to link particular options to one or more subcommands, and uses this feature in `bitcoin-wallet`. Separates out the help information for subcommand-specific options (duplicating it if an option applies to multiple subcommands), and provides a function for checking if some options have been specified that only apply to different subcommands.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2023-11-06T09:00:47Z",
      "updated_at": "2026-01-20T13:03:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28802",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 408,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3161681681,
      "number": 34247,
      "title": "security: harden CI actions and subprocess calls",
      "body": "Harden several CI and deployment scripts against potential injection vectors.\n\n### Changes\n\n- **.github/actions/configure-docker/action.yml**: Migrated direct `github` context interpolation to intermediate environment variables to prevent potential script injection from untrusted context data.\n- **contrib/macdeploy/macdeployqtplus**: Refactored the `codesign` subprocess call to use `shell=False` and list-based arguments. Fixed several linting issues (E401, F841).\n- **contrib/verify-binaries/verify.py**:\n    - Replaced `wget` with `urllib.request` for file retrieval, enforcing HTTP(S) protocols to mitigate potential LFI risks.\n    - Fixed a bug in `verify_with_gpg` where an empty string was passed to the `--output` argument when no output file was specified.\n    - Removed unused imports and cleaned up code.\n- **contrib/verify-binaries/test.py**: Updated `run_verify` to execute via `shell=False`.\n\nThese changes reduce the attack surface for command injection in automated environments and local deployment scripts while improving code quality and reliability.",
      "state": "closed",
      "user": "RinZ27",
      "created_at": "2026-01-10T07:33:15Z",
      "updated_at": "2026-01-20T13:02:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34247",
      "labels": [
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1120,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2168265902,
      "number": 31252,
      "title": "rpc: print P2WSH and P2SH redem Script in (get/decode)rawtransaction",
      "body": "This PR is motivated by https://github.com/bitcoin/bitcoin/issues/27391.\r\nAnd inspired by a previous PR https://github.com/bitcoin/bitcoin/pull/8849 that proposed something similar. \r\n\r\nThis is an example with a real mainnet transaction (3-5 multisig) and using ``decoderawtransaction`` (also works for ``getrawtransaction 'txid' 2``).\r\n\r\nVerbosity must be set to 2.\r\n\r\n```json\r\n$ bitcoin-cli getrawtransaction 44f5ab666cb9dccef69120fe5b51757a647c1f96882931a9faa0b2b5781ddfd2 2 000000000000000000018fa64b5e32335f7d3ac14b9e5553db20f2909c902c34\r\n{\r\n  \"in_active_chain\": true,\r\n  \"txid\": \"44f5ab666cb9dccef69120fe5b51757a647c1f96882931a9faa0b2b5781ddfd2\",\r\n  \"hash\": \"53836d2a4fb1e14356eac69fe1dad8be5dfd9a1b8101bc8aeb04ea2a320aa398\",\r\n  \"version\": 1,\r\n  \"size\": 382,\r\n  \"vsize\": 192,\r\n  \"weight\": 766,\r\n  \"locktime\": 0,\r\n  \"vin\": [\r\n    {\r\n      \"txid\": \"d15236206fbe06d6f38505656a2006a9a5a1ddf189a2647750091fd218d59581\",\r\n      \"vout\": 2,\r\n      \"scriptSig\": {\r\n        \"asm\": \"\",\r\n        \"hex\": \"\"\r\n      },\r\n      \"txinwitness\": [\r\n        \"\",\r\n        \"304402204d91eb67d798d071278ea0570973f3488d60c3ec98a611856f6a813b2e35df3202200bb36403ebd2dcc96b236efaf07db4f1da26b1031fc854548634ff44a340dc6601\",\r\n        \"3044022046abaa75082c2d1cdef57f8ef59a0046729220eabe2c2a229d1d592b89ccf1b0022028954703f13d836b1b77acd1eb72639a7a918d756fdd3ddef1d42a28567403ed01\",\r\n        \"522102f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7210333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f2103be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e753ae\"\r\n      ],\r\n      \"witnessScript\": {\r\n        \"asm\": \"2 02f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7 0333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f 03be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e7 3 OP_CHECKMULTISIG\",\r\n        \"desc\": \"multi(2,02f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7,0333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f,03be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e7)#sll5t8hh\",\r\n        \"type\": \"multisig\"\r\n      },\r\n      \"prevout\": {\r\n        ... bla bla bla prev output info ...\r\n        }\r\n      },\r\n      \"sequence\": 4294967293\r\n    }\r\n  ],\r\n  \"vout\": [ ... bla bla bla outputs ...  ],\r\n  \"fee\": 0.00000594,\r\n  \"hex\": \"010000000001018195d518d21f09507764a289f1dda1a5a906206a650585f3d606be6f203652d10200000000fdffffff025b730500000000001976a914381d46badae879d1c6037a03da52074e3914812c88ac38088000000000002200205ab691555ede8432ed7765585edb1c9b285532daf639e3e5ccd4843ff3b04cdf040047304402204d91eb67d798d071278ea0570973f3488d60c3ec98a611856f6a813b2e35df3202200bb36403ebd2dcc96b236efaf07db4f1da26b1031fc854548634ff44a340dc6601473044022046abaa75082c2d1cdef57f8ef59a0046729220eabe2c2a229d1d592b89ccf1b0022028954703f13d836b1b77acd1eb72639a7a918d756fdd3ddef1d42a28567403ed0169522102f69779f4bb466a8c0aa7d6bf2a2dde34e44bae29d5186ee0c3bed4d903d57fa7210333c337637453164d5fd0dc31787a614a74d2acca5c08710937b9b831bd41b11f2103be7c86e40ad380b33f9abd653c6d04b95b818abd5653b63402678fcc45a017e753ae00000000\",\r\n  \"blockhash\": \"000000000000000000018fa64b5e32335f7d3ac14b9e5553db20f2909c902c34\",\r\n  \"confirmations\": 1,\r\n  \"time\": 1746727602,\r\n  \"blocktime\": 1746727602\r\n}\r\n\r\n```",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2024-11-07T20:39:24Z",
      "updated_at": "2026-01-20T11:34:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31252",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3342,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3188571369,
      "number": 34345,
      "title": "clang-format: use AngleBracket for main includes",
      "body": "This project uses angle brackets instead of quotes for project-specific headers. Setting [`MainIncludeChar`](https://clang.llvm.org/docs/ClangFormatStyleOptions.html#mainincludechar) enables `clang-format` to automatically detect the main header, so it can be kept as the top group of includes.\r\n\r\nFor example, without this change, `clang-format` would demote `<signet.h>` from being the main header in `src/signet.cpp`. With this change, the order is preserved.\r\n\r\nOn 5e49f5d63c74512c8f46fe7de7deb0341f13244a:\r\n```\r\n% clang-format src/signet.cpp | head -n 15\r\n// Copyright (c) 2019-present The Bitcoin Core developers\r\n// Distributed under the MIT software license, see the accompanying\r\n// file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n\r\n#include <consensus/merkle.h>\r\n#include <consensus/params.h>\r\n#include <consensus/validation.h>\r\n#include <logging.h>\r\n#include <primitives/block.h>\r\n#include <primitives/transaction.h>\r\n#include <script/interpreter.h>\r\n#include <script/script.h>\r\n#include <signet.h>\r\n#include <streams.h>\r\n#include <uint256.h>\r\n\r\n```\r\n\r\nWith this PR:\r\n```\r\n% clang-format src/signet.cpp | head -n 10\r\n// Copyright (c) 2019-present The Bitcoin Core developers\r\n// Distributed under the MIT software license, see the accompanying\r\n// file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n\r\n#include <signet.h>\r\n\r\n#include <consensus/merkle.h>\r\n#include <consensus/params.h>\r\n#include <consensus/validation.h>\r\n#include <logging.h>\r\n\r\n```\r\n\r\nNote: `AngleBracket` `requires clang-format 19`, and will cause older versions (including our current minimum llvm version `17`) to fail\r\n",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2026-01-19T17:13:30Z",
      "updated_at": "2026-01-20T11:21:35Z",
      "merged_at": "2026-01-20T09:39:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34345",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1689,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1785565107,
      "number": 29700,
      "title": "kernel, refactor: return error status on all fatal errors",
      "body": "Return util::Result objects from all functions that can trigger fatal errors.\n\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\n\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\n\n---\n\n<!-- begin based-on -->\n**This is based on #25665.** The non-base commits are:\n\n- [`c58e61f9911` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/c58e61f9911dbbf2e1e7b43896cccad3e4c07bc1)\n- [`be34dd34d3f` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/be34dd34d3f62f86a2bd742795d12fd645ab32fd)\n- [`b9f6a3666d5` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/b9f6a3666d5f64a0ada4092b507e8fe5fddbbe08)\n- [`ca795bf4b17` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/ca795bf4b1740df978f586b353fe308dc9b01ac3)\n- [`85078c8dbfe` refactor, validation: Switch to result.Update](https://github.com/bitcoin/bitcoin/pull/29700/commits/85078c8dbfe5631f735d1f58b78c79900d29e857)\n- [`431621bde28` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/431621bde2822b216926988699441837b14b5cb4)\n- [`8f2d7139167` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/8f2d7139167e5162ca45988ff844cd58becc78c8)\n- [`b5686de0da5` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/b5686de0da5540acb2aec035f5dfbf0f554283fe)\n- [`9eeab948953` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/9eeab948953330050fc10b044a9bc4cf3eff16cf)\n- [`08200e60968` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/08200e6096878b85f3150d033bb9f9f9ed133ffb)\n- [`1910899d0b1` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/1910899d0b13fa7d3db7358c1150cd9ed80d4dba)\n- [`7cefb824939` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/7cefb824939c3d114176f21b515520d8646a4991)\n- [`7cd8dac6b81` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/7cd8dac6b815636b5ffab9d4a5c309e058c3854a)\n- [`01ea9da0f4e` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/01ea9da0f4e991e683a65ee2ebcd2164764feeaa)\n- [`f81a1a468d8` ci: Avoid -Wno-error=maybe-uninitialized false positives](https://github.com/bitcoin/bitcoin/pull/29700/commits/f81a1a468d89689524a37a27384110aa69257386)\n- [`871651378ca` tidy: Set bugprone-unused-return-value.AllowCastToVoid](https://github.com/bitcoin/bitcoin/pull/29700/commits/871651378ca0af03365040f60858a2939e4bdf68)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-03-21T23:11:56Z",
      "updated_at": "2026-01-20T11:12:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29700",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3844,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1181482615,
      "number": 26781,
      "title": "Release `LockData::dd_mutex` before calling `*_detected` functions",
      "body": "Both `double_lock_detected()` and `potential_deadlock_detected()` functions call `LogPrintf()` which in turn implies locking of the `Logger::m_cs` mutex. To avoid a deadlock, the latter must not have the `Mutex` type (see https://github.com/bitcoin/bitcoin/pull/16112).\r\n\r\nWith this PR the mentioned restriction has been lifted, and it is possible now to use our regular `Mutex` type for the `Logger::m_cs` mutex instead of a dedicated `StdMutex` type (not introducing that change here, as its diff is much bigger than a few lines, and the currently proposed diff seems valuable by itself).\r\n\r\n**Note for reviewers:** Make sure the code is configured and built with `CPPFLAGS=-DDEBUG_LOCKORDER`.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2022-12-31T15:38:49Z",
      "updated_at": "2026-01-20T11:06:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/26781",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 762,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1739954474,
      "number": 29468,
      "title": "rpc: method removeprunedfunds should take an array of txids",
      "body": "This PR addresses issue [#29466](https://github.com/bitcoin/bitcoin/issues/29466) by updating the `removeprunedfunds` RPC method to accept an array of transaction IDs (txids). This enhancement allows for batch removal of transactions, improving usability for pruned wallets. The change includes updates to the RPC method signature and the corresponding functional test adjustments to align with the new input format. This feature simplifies wallet management by enabling more efficient transaction handling.",
      "state": "closed",
      "user": "leo-aa88",
      "created_at": "2024-02-23T01:33:52Z",
      "updated_at": "2026-01-20T10:57:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29468",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 567,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2046887423,
      "number": 30774,
      "title": "depends: Qt 5.15.16",
      "body": "Contains a handful of miscellaneous bug fixes.\r\nWe can drop a few of our patches.\r\n\r\nSee https://github.com/qt/qtbase/compare/v5.15.14-lts-lgpl...v5.15.16-lts-lgpl.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-08-30T17:03:12Z",
      "updated_at": "2026-01-20T10:57:05Z",
      "merged_at": "2025-01-20T14:04:05Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30774",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 184,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2146020688,
      "number": 31153,
      "title": "bench: Remove various extraneous benchmarks",
      "body": "Measuring performance of components that do not meaningfully impact the performance of critical aspects of the system (e.g. block validation or mining) seems extraneous.\r\n\r\nMaintaining extraneous benchmark tests incentivizes non-impactful improvements. This frequently comes up with new contributors and they can't be blamed for thinking that e.g. hex parsing should be made faster if a benchmark test exists.",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-10-25T14:27:53Z",
      "updated_at": "2026-01-20T10:57:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31153",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 453,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2231533853,
      "number": 31483,
      "title": "kernel: Move kernel-related cache constants to kernel cache",
      "body": "Carrying non-kernel related fields in the cache sizes for the indexes is confusing for kernel library users. The cache sizes are set currently with magic numbers in bitcoin-chainstate. The comments for the cache size calculations are not completely clear. The constants for the cache sizes are also currently in `txdb.h`, which is not an ideal place for holding all cache size related constants.\r\n\r\nSolve these things by moving the kernel-specific cache size fields to their own struct and moving the constants to either the node or the kernel cache sizes.\r\n\r\nThis slightly changes the way the cache is allocated if (and only if) the txindex and/or blockfilterindex is used. Since they are now given precedence over the block tree db cache, this results in a bit less cache being allocated to the block tree db, coinsdb and coins caches. The effect is negligible though, i.e. cache sizes with default dbcache reported through the logs are:\r\n\r\nmaster:\r\n```\r\nCache configuration:\r\n* Using 2.0 MiB for block index database\r\n* Using 56.0 MiB for transaction index database\r\n* Using 49.0 MiB for basic block filter index database\r\n* Using 8.0 MiB for chain state database\r\n* Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```\r\n\r\nthis PR:\r\n```\r\nCache configuration:\r\n* Using 2.0 MiB for block index database\r\n* Using 56.2 MiB for transaction index database\r\n* Using 49.2 MiB for basic block filter index database\r\n* Using 8.0 MiB for chain state database\r\n* Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```\r\n\r\n---\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587).",
      "state": "closed",
      "user": "sedited",
      "created_at": "2024-12-12T12:17:56Z",
      "updated_at": "2026-01-20T10:57:03Z",
      "merged_at": "2025-01-16T15:05:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31483",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1750,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2224256023,
      "number": 31448,
      "title": "fuzz: add cstdlib to FuzzedDataProvider",
      "body": "Same as https://github.com/llvm/llvm-project/pull/113951.\r\n\r\nAvoids compile failures under clang-20 & `D_LIBCPP_REMOVE_TRANSITIVE_INCLUDES`:\r\n```bash\r\nIn file included from /bitcoin/src/test/fuzz/addition_overflow.cpp:5:\r\n/bitcoin/src/test/fuzz/FuzzedDataProvider.h:209:5: error: use of undeclared identifier 'abort'\r\n  209 |     abort();\r\n      |     ^\r\n/bitcoin/src/test/fuzz/FuzzedDataProvider.h:250:5: error: use of undeclared identifier 'abort'\r\n  250 |     abort();\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2024-12-09T17:09:04Z",
      "updated_at": "2026-01-20T10:57:03Z",
      "merged_at": "2024-12-10T09:33:41Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31448",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 516,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2257857870,
      "number": 31593,
      "title": "ci: Bump centos stream 10",
      "body": "This is a follow-up to fa47baa03bcfcf44fb2ed05f009a32d32f860c45, which bumped the gcc version to avoid a warning bloat in the CI log. However, it is also required to bump python3, see https://github.com/bitcoin/bitcoin/issues/31476#issue-2735206340\r\n\r\n> This will uncover an issue in the centos task that the correct python version is missing. I guess this should be fixed by installing and activating an acceptable python version.\r\n\r\nInstead of bumping the packages individually in centos stream 9, just bump to stream 10.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-02T13:06:40Z",
      "updated_at": "2026-01-20T10:57:02Z",
      "merged_at": "2025-01-20T16:12:04Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31593",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 549,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2277952008,
      "number": 31657,
      "title": "ci: Supply `--platform` argument to `docker` commands.",
      "body": "I ran into this issue when following the instructions in `ci/README.md` for running CI locally.\r\n\r\nNewer versions of docker require a `--platform` argument when building from a platform-specific image that differs from the host platform, I'm not sure when this change took place, but trying to build any of the cross-platform CI images on Docker 27.5.0 fails in the following manner:\r\n```console\r\n$ # From ci/README.md\r\n$ env -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" bash -c 'FILE_ENV=\"./ci/test/00_setup_env_arm.sh\" ./ci/test_run_all.sh'\r\nWARNING: The requested image's platform (linux/arm64/v8) does not match the detected host platform (linux/amd64/v4) and no specific platform was requested\r\nCreating docker.io/arm64v8/debian:bookworm container to run in\r\n+ docker build --file $BITCOIN_SRC/ci/test_imagefile --build-arg CI_IMAGE_NAME_TAG=docker.io/arm64v8/debian:bookworm --build-arg FILE_ENV=./ci/test/00_setup_env_arm.sh --label=bitcoin-ci-test --tag=ci_arm_linux $BITCOIN_SRC\r\n[+] Building 0.6s (2/2) FINISHED                                                                                                                                                 docker:default\r\n => [internal] load build definition from test_imagefile                                                                                                                                   0.0s\r\n => => transferring dockerfile: 600B                                                                                                                                                       0.0s\r\n => WARN: InvalidDefaultArgInFrom: Default value for ARG ${CI_IMAGE_NAME_TAG} results in empty or invalid base image name (line 8)                                                         0.0s\r\n => ERROR [internal] load metadata for docker.io/arm64v8/debian:bookworm                                                                                                                   0.5s\r\n------\r\n > [internal] load metadata for docker.io/arm64v8/debian:bookworm:\r\n------\r\n\r\n 1 warning found (use docker --debug to expand):\r\n - InvalidDefaultArgInFrom: Default value for ARG ${CI_IMAGE_NAME_TAG} results in empty or invalid base image name (line 8)\r\ntest_imagefile:8\r\n--------------------\r\n   6 |\r\n   7 |     ARG CI_IMAGE_NAME_TAG\r\n   8 | >>> FROM ${CI_IMAGE_NAME_TAG}\r\n   9 |\r\n  10 |     ARG FILE_ENV\r\n--------------------\r\nERROR: failed to solve: docker.io/arm64v8/debian:bookworm: failed to resolve source metadata for docker.io/arm64v8/debian:bookworm: no match for platform in manifest: not found\r\n```\r\n\r\nThis branch fixes this by setting the `--platform` argument of `docker build` and `docker run` with an environment variable `CI_IMAGE_PLATFORM` for each platform specific job, and `linux/{$cpuarch}` for any native jobs.\r\n\r\nThi\r\n\r\n## Steps to reproduce\r\n1. Install relevant dependencies, on Ubuntu:\r\n```bash\r\nsudo apt install bash docker.io python3 qemu-user-static\r\n```\r\n2. Run one of the platform-specific CI images, e.g.:\r\n```bash\r\nenv -i HOME=\"$HOME\" PATH=\"$PATH\" USER=\"$USER\" bash -c 'FILE_ENV=\"./ci/test/00_setup_env_arm.sh\" ./ci/test_run_all.sh'\r\n```\r\n",
      "state": "closed",
      "user": "davidgumberg",
      "created_at": "2025-01-14T23:17:39Z",
      "updated_at": "2026-01-20T10:57:01Z",
      "merged_at": "2025-01-20T16:10:45Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31657",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3185,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2287711659,
      "number": 31691,
      "title": "util: fix compiler warning about deprecated space before _MiB",
      "body": "```\r\nsrc/util/byte_units.h:13:29: error: identifier '_MiB' preceded by whitespace in a literal operator declaration is deprecated [-Werror,-Wdeprecated-literal-operator]\r\n   13 | constexpr size_t operator\"\" _MiB(unsigned long long mebibytes)\r\n      |                  ~~~~~~~~~~~^~~~\r\n      |                  operator\"\"_MiB\r\n1 error generated.\r\n```\r\n\r\nClang 20.0.0",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-01-20T13:50:03Z",
      "updated_at": "2026-01-20T10:57:00Z",
      "merged_at": "2025-01-20T14:09:06Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31691",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 427,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3177133582,
      "number": 34305,
      "title": "log: correct size output in disk space check",
      "body": "The output should be the additional space needed, otherwise we are always warning that 810GB will be stored, even when a user is pruning.\r\n\r\nFor example on machine with ~20GB free disk, pruning to 40GB:\r\n```bash\r\n./build/bin/bitcoind -prune=40000\r\n...\r\n2026-01-15T11:45:33Z [warning] Disk space for \"/root/.bitcoin/blocks\" may not accommodate the block files. Approximately 810 GB of data will be stored in this directory.\r\nWarning: Disk space for \"/root/.bitcoin/blocks\" may not accommodate the block files. Approximately 810 GB of data will be stored in this directory.\r\n```\r\n\r\nThis PR:\r\n```bash\r\n./build/bin/bitcoind -prune=40000\r\n...\r\n2026-01-15T11:41:49Z [warning] Disk space for \"/root/.bitcoin/blocks\" may not accommodate the block files. Approximately 39 GB of data will be stored in this directory.\r\nWarning: Disk space for \"/root/.bitcoin/blocks\" may not accommodate the block files. Approximately 39 GB of data will be stored in this directory.\r\n```",
      "state": "open",
      "user": "fanquake",
      "created_at": "2026-01-15T12:26:05Z",
      "updated_at": "2026-01-20T10:46:14Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34305",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1005,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2534144808,
      "number": 32577,
      "title": "subprocess: Let shell parse command on non-Windows systems",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32574.\r\n\r\nThe `subprocess::Popen` constructor has two overloads: https://github.com/bitcoin/bitcoin/blob/7763e86afa045910a14ac9b2cd644927a447370b/src/util/subprocess.h#L938-L941\r\n\r\nDuring the migration from Boost.Process in https://github.com/bitcoin/bitcoin/pull/28981, the second was chosen for two reasons: (1) it minimized changes at the call sites, and (2) it [addressed](https://github.com/bitcoin/bitcoin/pull/28981#issuecomment-1837238921) quoting issues on Windows. This approach internally uses the `subprocess::util::split()` function, which currently fails to handle quoted tokens, such as in subshell invocations like `sh -c 'ls; echo'`.\r\n\r\nThis issue was not caught by our tests as they are broken. The last commit fixes the `system_tests/run_command` test. This commit can be applied on top of the master branch to reproduce the existing failure in `subprocess`.\r\n\r\nThe second commit is intended to be upstreamed. However, I'm seeking code review feedback first (please note that the `src/util/subprocess.h` code is C++11 compatible).",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-21T11:45:24Z",
      "updated_at": "2026-01-20T10:30:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32577",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1156,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1940584116,
      "number": 30343,
      "title": "wallet, logging: Replace WalletLogPrintf() with LogInfo()",
      "body": "Make new logging macros `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` compatible with wallet code and drop custom WalletLogPrintf() function. The new logging macros introduced in #28318 weren't previously useful in wallet code because wallet code prefixes most log messages with the wallet names to be be able to distinguish log output from multiple wallets. Fix this by introducing a new `WalletLogSource` class inheriting from `BCLog::Source` which can include the wallet name in log messages.\n\n---\n\n<!-- begin based-on -->\n**This is based on #29256.** The non-base commits are:\n\n- [`2d5c5f0e905` wallet, logging: Replace WalletLogPrintf() with LogInfo()](https://github.com/bitcoin/bitcoin/pull/30343/commits/2d5c5f0e90514e4ef4b6343124c827aea1d0eeab)\n- [`4fb99c22c1c` wallet, logging: Switch LogInfo to LogWarning/LogError](https://github.com/bitcoin/bitcoin/pull/30343/commits/4fb99c22c1c0f242dfdda38832a4814b421273d4)\n- [`a08c9bc808e` wallet, logging: Switch LogInfo to LogError in AddWalletDescriptor](https://github.com/bitcoin/bitcoin/pull/30343/commits/a08c9bc808ef19accc90335fb115f791a66e0158)<!-- end -->",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-06-26T17:57:15Z",
      "updated_at": "2026-01-20T09:57:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30343",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1201,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2086428775,
      "number": 30951,
      "title": "net: option to disallow v1 connection on ipv4 and ipv6 peers",
      "body": "resolves #29618.\r\n\r\nThis PR adds a config flag option `-v2onlyclearnet` which disallows outbound v1 connections on ipv4 and ipv6 networks since they're unencrypted. outbound v1 connections are still possible from tor/i2p/cjdns peers since they're encrypted networks.\r\n\r\n- v1 outbound connections to peers are not attempted\r\n- v1 reconnections are not attempted (if peer is falsely advertised as v2 peer and we attempt a v2 connection but it fails, we do not attempt a v1 reconnection when `-v2onlyclearnet` is switched on)\r\n\r\nCurrently 70% of reachable nodes in network supporting v2 (according to https://21.ninja/reachable-nodes/node-service-share/ and https://bitnodes.io/nodes). Also found 81% of addresses supporting v2 in the addrman of nodes I checked - personal node and the nodes in [peer.observer](https://peer.observer/addrman/alice). (You can use [this branch ](https://github.com/stratospher/bitcoin/commits/addrinfo_service_display/)to check the % of v2 addresses in a node's addrman.)",
      "state": "open",
      "user": "stratospher",
      "created_at": "2024-09-23T12:23:48Z",
      "updated_at": "2026-01-20T09:13:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30951",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1060,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2203477250,
      "number": 31382,
      "title": "kernel: Flush in ChainstateManager destructor",
      "body": "This simplifies the shutdown code a bit and reduces the amount of extra logic required in kernel/bitcoinkernel.cpp to tear down the chainman.\r\n\r\nMoving the second flush out of the Shutdown function into the ChainstateManager destructor, should be safe since there should be no new events created after the first flush. Tweak the chainman tests to actually exercise this new tear down behaviour.\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587)",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-11-27T13:18:50Z",
      "updated_at": "2026-01-20T07:40:01Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31382",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 549,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2217053399,
      "number": 31425,
      "title": "RFC: Riscv bare metal CI job",
      "body": "This adds a CI job for building the static consensus library and linking it to an executable. It uses newlib-cygwin as a C library for the final linking step. This ensure compatibility with this target going forward and can serve as a starting point for enabling bare metal builds for the entire kernel library. This would have also caught the error fixed in #31365.",
      "state": "open",
      "user": "sedited",
      "created_at": "2024-12-05T08:30:01Z",
      "updated_at": "2026-01-20T07:11:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31425",
      "labels": [
        "Build system",
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 395,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2272618048,
      "number": 31644,
      "title": "leveldb: show non-default options during init",
      "body": "To help with to debugging and traceability (in alignment with displaying other non-default args such as `Command-line arg: dbcache=\"10000\"`) we can extend the LevelDB opening log with an additional debug message for the used non-default settings.\r\n\r\nTo avoid showing booleans as e.g. `create_if_missing=1`, I've added a local `ToString` lambda for `bool`.\r\nI wanted to use `util::Join` at the end, but couldn't find any way that I liked.\r\n\r\nExample output after the change:\r\n```bash\r\n2025-10-15T02:39:45Z Opened LevelDB successfully\r\n2025-10-15T02:39:45Z [leveldb] startup options: options.compression=NoCompression, options.create_if_missing=true, options.max_file_size=33554432, options.paranoid_checks=true, options.write_buffer_size=524288, readoptions.fill_cache=false, readoptions.verify_checksums=true, writeoptions.sync=true\r\n```",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-12T17:30:54Z",
      "updated_at": "2026-01-20T06:17:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31644",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 883,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2275111412,
      "number": 31650,
      "title": "refactor: Avoid copies by using const references or by move-construction",
      "body": "Top level `const` in declarations is problematic for many reasons:\r\n\r\n* It is often a typo, where one wanted to denote a const reference. For example `bool PSBTInputSignedAndVerified(const PartiallySignedTransaction psbt, ...` is missing the `&`. This will create a redundant copy of the value.\r\n* In constructors it prevents move construction.\r\n* It can incorrectly imply some data is const, like in an imaginary example `std::span<int> Shuffle(const std::span<int>);`, where the `int`s are *not* const.\r\n* The compiler ignores the `const` from the declaration in the implementation.\r\n* It isn't used consistently anyway, not even on the same line.\r\n\r\nFix some issues by:\r\n\r\n* Using a const reference to avoid a copy, where read-only of the value is intended. This is only done for values that may be expensive to copy.\r\n* Using move-construction to avoid a copy\r\n* Applying `readability-avoid-const-params-in-decls` via clang-tidy",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-13T20:41:34Z",
      "updated_at": "2026-01-20T06:04:24Z",
      "merged_at": "2026-01-19T11:04:40Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31650",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1005,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2698741395,
      "number": 33072,
      "title": "[p2p] Fix signed integer overflow in LocalServiceInfo::nScore",
      "body": "The `nScore` field in `LocalServiceInfo` struct was defined as `int` (32-bit signed integer), which could overflow from `INT_MAX` (2,147,483,647) to `INT_MIN` (-2,147,483,648) when incremented by `SeenLocal()` during version handshakes. This is undefined behavior in C++ and could affect address selection logic.\r\n\r\nImplement saturation in `SeenLocal()` to cap `nScore` at `std::numeric_limits<int>::max()` instead of allowing overflow. This prevents undefined behavior while maintaining memory efficiency and logical correctness - after 2 billion connections, the matter is settled.\r\n\r\nFixes #24049\r\n",
      "state": "closed",
      "user": "b-l-u-e",
      "created_at": "2025-07-28T01:33:57Z",
      "updated_at": "2026-01-20T05:06:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33072",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 663,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2294479432,
      "number": 31723,
      "title": "qa: Facilitate debugging bitcoind inside functional tests",
      "body": "Facilitates debugging specific instances of bitcoind *in the context of Python tests, inside of an editor/IDE/debugger*.\r\n\r\nMakes bitcoind spin during startup, waiting for a debugger to be attached, so that breakpoints during process init can be debugged.\r\n\r\n### Example usage\r\n\r\n1. Generate build files with `-DENABLE_WAIT_FOR_DEBUGGER=ON` & build.\r\n   \r\n   ```\r\n   cmake -B build -DCMAKE_BUILD_TYPE=Debug -DENABLE_WAIT_FOR_DEBUGGER=ON && cmake --build build -j$(nproc)\r\n   ```\r\n\r\n2. Set breakpoints in the C++ code in your editor/IDE/debugger.\r\n\r\n3. Start a Python functional test with a debugger command such as:\r\n   - LLDB inside an already started Tmux pane (append ` -o continue` to the LLDB args to have the debugger continue automatically):\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"tmux split-window -h lldb -p \\$PID\\$\"\r\n     ```\r\n   - Sublime Text Debugger, allows a running session to attach:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2 --debug_cmd \"subl --command \\\"debugger {\\\\\\\"action\\\\\\\": \\\\\\\"start\\\\\\\", \\\\\\\"configuration\\\\\\\": {\\\\\\\"name\\\\\\\": \\\\\\\"foo\\\\\\\", \\\\\\\"type\\\\\\\": \\\\\\\"lldb\\\\\\\", \\\\\\\"request\\\\\\\": \\\\\\\"attach\\\\\\\", \\\\\\\"program\\\\\\\": \\\\\\\"dummyprogram\\\\\\\", \\\\\\\"pid\\\\\\\": \\\\\\\"\\$PID\\$\\\\\\\"}}\\\"\"\r\n     ```\r\n   - Don't specify `--debug_cmd ...\\$PID\\$...`, instead have the test framework log which bitcoind PID you should manually attach to:\r\n     ```\r\n     ./build/test/functional/feature_loadblock.py --debug_runs 2\r\n     ```\r\n\r\n5. Experience how debugger hits breakpoints as the functional test executes RPCs.\r\n\r\nUsing `-debug_runs <RUN_INDEX>` often requires doing a dry-run of a functional test with `-ldebug` and examining the log to see which run index is the one we want to debug:\r\n```\r\n2025-...Z TestFramework.node0 (DEBUG): bitcoind started (run #1, node #0), waiting for RPC to come up\r\n``` \r\n\r\n### Alternative usage\r\n\r\nTweak functional test code to specify `wait_for_debugger` when (re)starting a node:\r\n\r\n```diff\r\n-        self.restart_node(0)\r\n+        self.restart_node(0, wait_for_debugger=True)\r\n```\r\nWhile it can be messy to modify files while moving between commits, and cumbersome inside of loops, it might be more straightforward than `-debug_runs <RUN_INDEX>` in a given case.\r\n\r\n### *Needed before merge*\r\n\r\n- [ ] Testing on Mac to confirm -waitfordebugger on the C++ side behaves as expected.",
      "state": "open",
      "user": "hodlinator",
      "created_at": "2025-01-23T13:18:06Z",
      "updated_at": "2026-01-20T05:04:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31723",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2460,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2368554207,
      "number": 31974,
      "title": "Drop testnet3",
      "body": "Testnet3 was deprecated in v28 with the introduction of testnet4. It will be dropped in v30 _or later_, please discuss in #31975.\r\n\r\nThere is no more `[test]` network section. The user is expected to set testnet4 explicitly, which should make future rotation of testnets easier.\r\n\r\nIf a `[test]` or `[testnet3]` section is present in `bitcoin.conf` a warning is issued:\r\n\r\n```\r\nWarning: .../bitcoin.conf:18 Section [test] is not recognized.\r\n```\r\n\r\nStarting with `-testnet3` will be greeted with an error message:\r\n\r\n```\r\nError: Testnet3 was dropped in version 30.0. Consider using '-testnet4' instead.\r\n```\r\n\r\nThis also prevents a fallback to mainnet.\r\n\r\nStarting with `-test` was already not possible with testnet3.\r\n\r\nReview hints:\r\n- make a (Windows) Guix build and test the (un)installer\r\n\r\nGuix hashes:\r\n\r\n```\r\n(todo)\r\n```",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-03-03T16:22:11Z",
      "updated_at": "2026-01-20T03:52:20Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31974",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 842,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2391882324,
      "number": 32061,
      "title": "Replace libevent with our own HTTP and socket-handling implementation",
      "body": "This is a major component of [removing libevent as a dependency of the project](https://github.com/bitcoin/bitcoin/issues/31194), by replacing the HTTP server used for RPC and REST with one implemented entirely within the Bitcoin Core codebase. The new `HTTPServer` class runs its own I/O thread, handling socket connections with code based on #30988, but tailored specifically for HTTP.\r\n\r\nSome functional tests were added in #32408 to cover libevent behaviors that remain consistent with this branch. \r\n\r\nCommit strategy:\r\n- Implement a few helper functions for strings, timestamps, etc needed by HTTP protocol\r\n- Isolate the existing libevent-based HTTP server in a namespace `http_libevent`\r\n- Implement HTTP in a new namespace `http_bitcoin` (classes like `HTTPRequest`, `HTTPClient`, etc...)\r\n- Switch bitcoind from the libevent server to the new server\r\n- Clean up (delete `http_libevent`)\r\n\r\nI am currently seeing about a 10% speed up in the functional tests on my own arm/macos machine.\r\n\r\n## Integration testing:\r\n\r\nI am testing the new HTTP server by forking projects that integrate with bitcoin via HTTP and running their integration tests with bitcoind built from this branch (on Github actions). I will continue adding integrations over time, and re-running these CI tests as this branch gets rebased:\r\n\r\n- [NodeJS `rpc-bitcoin`](https://github.com/pinheadmz/rpc-bitcoin/pull/1)\r\n- [electrs](https://github.com/pinheadmz/electrs/pull/1)\r\n- [lnd](https://github.com/pinheadmz/lnd/pull/1)\r\n- [eclair](https://github.com/pinheadmz/eclair/pull/1)\r\n- [corepc](https://github.com/pinheadmz/corepc/pull/1)\r\n- [bitcoinjs-lib](https://github.com/pinheadmz/bitcoinjs-lib/pull/1)",
      "state": "open",
      "user": "pinheadmz",
      "created_at": "2025-03-13T19:32:14Z",
      "updated_at": "2026-01-20T03:40:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32061",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1752,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2091884190,
      "number": 30972,
      "title": "Wallet: \"listreceivedby*\" fix",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/16159, \r\n\r\nThis PR builds on https://github.com/bitcoin/bitcoin/pull/25973, fixing `listreceivedby*` RPCs by filtering out `send` addresses using `IsMine` (see https://github.com/bitcoin/bitcoin/pull/25973#discussion_r1269477246). It also breaks down the `listreceivedby` tests into subtests and adds a test to verify 'listreceivedby*' does not return `send` addresses",
      "state": "open",
      "user": "BrandonOdiwuor",
      "created_at": "2024-09-25T16:59:35Z",
      "updated_at": "2026-01-20T02:42:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30972",
      "labels": [
        "Wallet",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 446,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2594396603,
      "number": 32757,
      "title": "net: Fix Discover() not running when using -bind=0.0.0.0:port",
      "body": "  This PR fixes two related issues with address discovery when using explicit bind addresses in Bitcoin Core:\r\n\r\n  -  #31293\r\n  -  #31336\r\n\r\nWhen using `-bind=0.0.0.0:port` (or `-bind=::`), the `Discover()` function was not being executed because the code only checked the `bind_on_any` flag. This led to two problems:\r\n- The node would not discover its own local addresses if an explicit \"any\" bind was used.\r\n- The functional test `feature_bind_port_discover.py` would fail, as it expects local addresses to be discovered in these cases.\r\n\r\nThis PR:\r\n1. Checks both `bind_on_any` and any bind addresses using `IsBindAny()`\r\n   Ensures `Discover()` runs when binding to 0.0.0.0 or ::, even if specified explicitly.\r\n2. Ensures correct address discovery\r\n   The node will now discover its own addresses when using explicit \"any\" binds, matching user expectations and fixing the test.\r\n3. Maintains backward compatibility\r\n   The semantic meaning of `bind_on_any` is preserved as defined in `net.h`:  \r\n   > \"True if the user did not specify -bind= or -whitebind= and thus we should bind on 0.0.0.0 (IPv4) and :: (IPv6)\"\r\n4. Updates the test to use dynamic ports\r\n   The functional test `feature_bind_port_discover.py` is updated to use dynamic ports instead of hardcoded ones, improving reliability.\r\n\r\nHow this PR Differs from #31492\r\n\r\n- Preserves the semantic meaning of `bind_on_any` (see `net.h`).\r\n- Uses a simpler approach: checks `IsBindAny()` on bind addresses, without modifying `GetListenPort()`.\r\n- Avoids code duplication with `DefaultOnionServiceTarget()`.\r\n\r\nReferences\r\n\r\n- Implementation follows the approach proposed in my [review comment on #31492](https://github.com/bitcoin/bitcoin/pull/31492#issuecomment-2941773645).\r\n\r\nCloses #31293\r\n\r\nThe #31336 has the overall test failure and requires both this PR and #33362 to be fully resolved.\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2025-06-16T04:28:44Z",
      "updated_at": "2026-01-19T23:23:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32757",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1922,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2182611991,
      "number": 31298,
      "title": "rpc: combinerawtransaction now rejects unmergeable transactions",
      "body": "Previously, combinerawtransaction would silently return the first tx when asked to combine unrelated txs. Now, it will check tx mergeability and throws a descriptive error if tx cannot be merged.\r\n\r\nfixes  #25980",
      "state": "open",
      "user": "adamandrews1",
      "created_at": "2024-11-15T21:24:12Z",
      "updated_at": "2026-01-19T23:12:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31298",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 276,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1566486194,
      "number": 28690,
      "title": "build: Introduce internal kernel library",
      "body": "This PR introduces a new `libbitcoin_kernel` internal library. It completes the internal library design as laid out in [doc/design/libraries.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/libraries.md). Since the `util` library contains a bunch of modules that are not required by the kernel library, a new `kernel_util` library is introduced as well that only consists of the modules required by the kernel library. The external `libbitcoinkernel` library now re-uses the compiled objects from the internal libraries. \r\n\r\nThere is a trade-off to this. Since we don't manually export symbols from the kernel library yet, this would make the library unusable if `REDUCE_EXPORTS=ON`. For now this means that the patch here introduces a separate source file list for the external library that gets populated by the source files of its static dependents.",
      "state": "open",
      "user": "sedited",
      "created_at": "2023-10-20T11:01:03Z",
      "updated_at": "2026-01-19T22:10:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28690",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 906,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2683340623,
      "number": 33032,
      "title": "wallet, test: Replace MockableDatabase with in-memory SQLiteDatabase",
      "body": "`MockableDatabase` was introduced for the tests to avoid tying non-database tests to a particular database type. However, since the only database type now is sqlite, and because the mockable behavior is no longer used by the tests, we can replace usage of the `MockabeDatabase` with a SQLite database that lives only in memory.\r\n\r\nThis is particularly useful for future work that has the wallet make use of SQLite's capabilities more, which are less conducive to having a separate mock database implementation.",
      "state": "open",
      "user": "achow101",
      "created_at": "2025-07-21T22:36:32Z",
      "updated_at": "2026-01-19T20:39:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33032",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 579,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2224317475,
      "number": 31449,
      "title": "coins,refactor: Reduce `getblockstats` RPC UTXO overhead estimation",
      "body": "The [`getblockstats` RPC](https://github.com/bitcoin/bitcoin/pull/10757) currently overestimates UTXO overhead by treating the `fCoinBase` bitfield as an additional `bool` in `PER_UTXO_OVERHEAD`.\r\nHowever, `fCoinBase` and `nHeight` are stored as bitfields and effectively packed into a single 32-bit value; counting an extra bool in the overhead calculation is unnecessary.\r\n\r\nThis PR introduces the following changes across three commits:\r\n* Store `fCoinBase` as a bool bitfield to reduce implicit conversions at call sites.\r\n* Use a consistent height/coinbase packing style across Coin serialization, undo serialization, and coinstats hashing (casting `nHeight` to `uint32_t` before shifting to avoid signed-promotion UB).\r\n* Adjust UTXO overhead estimation to match the actual Coin layout and update the related tests accordingly.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2024-12-09T17:36:50Z",
      "updated_at": "2026-01-19T20:02:40Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31449",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 901,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3136120149,
      "number": 34179,
      "title": "refactor: Enable transparent lookup for setBlockIndexCandidates to remove const_cast",
      "body": "### Rationale\r\n\r\nThis PR improves code safety by removing a `const_cast` in `src/validation.cpp`.\r\n\r\nCurrently, `setBlockIndexCandidates` stores mutable `CBlockIndex*`. However, validation logic (like `CVerifyDB`) often holds `const CBlockIndex*`. Previously, checking for existence in the set required casting away constness. While currently benign, this bypasses compiler safety checks and could mask accidental modifications in future refactors.\r\n\r\n### Description\r\n\r\n1.  **Enable Heterogeneous Lookup:** Added `using is_transparent = void;` to `CBlockIndexWorkComparator` in `src/node/blockstorage.h`. This allows the `std::set` to natively accept `const CBlockIndex*` for lookup (utilizing C++14 heterogeneous lookup).\r\n2.  **Remove Cast:** Removed the now unnecessary `const_cast<CBlockIndex*>` in `src/validation.cpp`, allowing the compiler to strictly enforce const-correctness.\r\n\r\n### Notes\r\n\r\n- **Refactoring only:** No behavioral change.\r\n- **Verification:** `validation_tests` and `blockmanager_tests` pass.",
      "state": "open",
      "user": "joaonevess",
      "created_at": "2025-12-30T07:40:16Z",
      "updated_at": "2026-01-19T19:05:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34179",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1104,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3188763798,
      "number": 34347,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "sparpana",
      "created_at": "2026-01-19T18:38:27Z",
      "updated_at": "2026-01-19T18:39:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34347",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187225590,
      "number": 34336,
      "title": "test: use `IP_PORTRANGE_HIGH` on FreeBSD for dynamic port allocation",
      "body": "On FreeBSD, the default ephemeral port range (10000-65535) overlaps with the test framework's static port range (11000-26000), possibly causing intermittent \"address already in use\" failures when tests use dynamic port allocation (`port=0`).\r\n\r\nThis PR adds a helper that sets `IP_PORTRANGE_HIGH` via `setsockopt()` before binding, requesting ports from 49152-65535 instead, which avoids the overlap, as suggested in https://github.com/bitcoin/bitcoin/issues/34331#issuecomment-3767161843 by @maflcko .\r\n\r\nFrom FreeBSD's [sys/netinet/in.h](https://cgit.freebsd.org/src/tree/sys/netinet/in.h):                                                          \r\n  ```c\r\n  #define IP_PORTRANGE         19\r\n  #define IP_PORTRANGE_HIGH    1\r\n  #define IPPORT_EPHEMERALFIRST 10000  /* default range start */\r\n  #define IPPORT_HIFIRSTAUTO   49152   /* high range start */\r\n```\r\n\r\nSee also: FreeBSD https://man.freebsd.org/cgi/man.cgi?query=ip&sektion=4 man page.\r\n\r\nI’ll leave the PR as a draft since I haven’t tested it on FreeBSD yet and would like to gather feedback on the approach.\r\n\r\nFixes #34331",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2026-01-19T10:32:44Z",
      "updated_at": "2026-01-19T17:56:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34336",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 1156,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2670706297,
      "number": 32993,
      "title": "fuzz: wallet: add target for tx scanning",
      "body": "Tracking issue (#29901)\r\n\r\nThis PR adds a fuzz target for wallet tx scanning (`ScanForWalletTransactions`). Unfortunately, it's not a regression test for the issue #31474 since it would require a more complex scenario/async operations.",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2025-07-16T13:15:08Z",
      "updated_at": "2026-01-19T17:39:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32993",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 276,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2986611773,
      "number": 33810,
      "title": "ci: Add IWYU job",
      "body": "This PR separates the IWYU checks into its own CI job to provide faster feedback to developers. No other changes are made to the treatment of IWYU warnings. The existing “tidy” CI job will no longer run IWYU.\r\n\r\nSee also the discussion of https://github.com/bitcoin/bitcoin/pull/33779, specifically this [comment](https://github.com/bitcoin/bitcoin/pull/33779#issuecomment-3491515263):\r\n> Maybe a better approach would be to run the enforced sections in a separate, faster job? Some of the linters are already a bit annoying to invoke locally, so I usually just run the lint job. Doing the same for the includes seems fine to me.\r\n\r\nBased on ideas from https://github.com/bitcoin/bitcoin/pull/32953.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-06T23:27:52Z",
      "updated_at": "2026-01-19T17:15:57Z",
      "merged_at": "2025-12-22T17:39:46Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33810",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 716,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2502815894,
      "number": 32430,
      "title": "test: Add and use ElapseTime helper",
      "body": "Currently mocktime is written to a global, which may leak between sub-tests (albeit some tests try to reset the mocktime on a best-effort basis). Also, when advancing it, one has to keep a counter variable around.\r\n\r\nFix both issues by a new `ElapseTime` helper, which resets the mocktime once it goes out of scope. Also, it has a method to advance the mocktime by a delta.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2025-05-06T22:39:14Z",
      "updated_at": "2026-01-19T17:05:49Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32430",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 409,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3176275662,
      "number": 34296,
      "title": "refactor: [move-only] Merge core_io module, remove from libkernel",
      "body": "Currently the core_io module is split across two translation units. This will confuse code readers and tooling about the real state of the module.\r\n\r\nFix that by merging the module and removing the mapping workarounds.\r\n\r\nAlso, remove the module from the kernel lib, because it is not used there: The kernel does not use any json or string parsing or formatting.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-15T07:31:40Z",
      "updated_at": "2026-01-19T16:57:51Z",
      "merged_at": "2026-01-19T16:45:57Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34296",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 428,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3181350550,
      "number": 34318,
      "title": "contrib: Revert \"verify-commits sha1 exceptions\"",
      "body": "This reverts commit 8ac134be5e57680eb1c6ef596e5de085825e83ee, because it is no longer needed.\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/34245#issuecomment-3759448369\r\n\r\nAlso, use the shorter pathlib `read_text`, which is available since Python 3.5",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-16T13:49:49Z",
      "updated_at": "2026-01-19T16:38:46Z",
      "merged_at": "2026-01-16T18:02:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34318",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 301,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173345068,
      "number": 34281,
      "title": "build: Temporarily remove confusing and brittle `-fdebug-prefix-map`",
      "body": "The compiler option `-fdebug-prefix-map` is unconditionally set by the build system. This is problematic for many reasons:\r\n\r\n* Users and devs have no easy way to disable it without modifying the build system source code\r\n* The mapping is broken since the cmake migration, and requires manual fixups such as https://github.com/bitcoin/bitcoin/issues/31204 or https://github.com/bitcoin/bitcoin/issues/31957\r\n\r\nFix all issues by temporarily removing it.\r\n\r\nThough, the option is kept for the guix build, so that no change in behavior is observed for the release binaries.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/31957\r\nFixes https://github.com/bitcoin/bitcoin/issues/31204\r\n\r\n\r\nThe option can be added back in the future, if there is any need to. Though, adding it back should ideally work out of the box, or at least provide easy workarounds for all commonly used tooling.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-14T12:31:05Z",
      "updated_at": "2026-01-22T11:21:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34281",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 952,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3182337108,
      "number": 34321,
      "title": "3x the same typo (I'm sorry, I don't speak French and I don't know wh…",
      "body": "3x the same typo (I'm sorry, I don't speak French and I don't know where I could comit this in transifex, but I want to report it)",
      "state": "closed",
      "user": "benediktjohannes",
      "created_at": "2026-01-16T19:03:58Z",
      "updated_at": "2026-01-19T16:20:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34321",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 201,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187756139,
      "number": 34340,
      "title": "[ignore] ci_test_b",
      "body": "",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-19T13:06:47Z",
      "updated_at": "2026-01-19T16:13:18Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34340",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 19,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3187755738,
      "number": 34339,
      "title": "[ignore]  ci_test_a",
      "body": "",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-19T13:06:40Z",
      "updated_at": "2026-01-19T16:12:57Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34339",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 20,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2563709776,
      "number": 32672,
      "title": "ci: update pwsh to use custom shell that fails-fast",
      "body": "Github by default sets [fail fast](https://docs.github.com/en/actions/writing-workflows/workflow-syntax-for-github-actions#exit-codes-and-error-action-preference) behaviour on pswh shell which means that if any powershell cmdlet fails the script will stop and exit. The problem is that this behaviour doesn't apply when calling native executables, it only applies to powershell cmdlets.\r\n\r\nI think the safest thing is to whenever we use pwsh to enable `$PSNativeCommandUseErrorActionPreference = $true` which will also fail calling any exe that returns a non-zero exit code.\r\n\r\nTechnically the step `Adjust paths in test/config.ini` only uses cmdlets so this step will not benefit from this change but I feel like it's good practice to still enable this feature in case this script gets modified in the future to call an exe.\r\n\r\nHere is a CI run that has a script that fails silently (look at Windows Native, VS 2022 -> Get tool information): https://github.com/m3dwards/bitcoin/actions/runs/15415032095/job/43375709475\r\nAnd with this change applied, the script correctly fails: https://github.com/m3dwards/bitcoin/actions/runs/15416585565/job/43380685364",
      "state": "open",
      "user": "m3dwards",
      "created_at": "2025-06-03T12:03:44Z",
      "updated_at": "2026-01-19T15:51:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32672",
      "labels": [
        "Windows",
        "Tests",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1207,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2776641246,
      "number": 33259,
      "title": "rpc, logging: add backgroundvalidation to getblockchaininfo",
      "body": "`getblockchaininfo` returns `verificationprogress=1` and `initialblockdownload=false` even if there's background validation.\r\nThis PR adds information about background validation to rpc `getblockchaininfo` in a similar way to `validationprogress` does.\r\n\r\nIf assume utxo was used the output of a \"sync\" node performing background validation:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756933740,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": true,\r\n  \"background\": {\r\n    \"snapshotheight\": 880000,\r\n    \"blocks\": 527589,\r\n    \"bestblockhash\": \"0000000000000000002326308420fa5ccd28a9155217f4d1896ab443d84148fa\",\r\n    \"mediantime\": 1529076654,\r\n    \"chainwork\": \"0000000000000000000000000000000000000000020c92fab9e5e1d8ed2d8dbc\",\r\n    \"verificationprogress\": 0.2815790617966284\r\n  },\r\n  \"chainwork\": \"0000000000000000000000000000000000000000df97866c410b0302954919d2\",\r\n  \"size_on_disk\": 61198817285,\r\n\r\n...\r\n```\r\n\r\nIf assume utxo was not used the progress is hidden and background validation is set to false:\r\n```\r\n$ ./build/bin/bitcoin-cli getblockchaininfo\r\n...\r\n  \"mediantime\": 1756245700,\r\n  \"verificationprogress\": 1,\r\n  \"initialblockdownload\": false,\r\n  \"backgroundvalidation\": false,\r\n  \"chainwork\": \"00000000000000000000000000000000000000000000000000000656d6bb052b\",\r\n  \"size_on_disk\": 3964972194,\r\n...\r\n```\r\n\r\nThe PR also updates the way we estimate the verification progress returning a 100% on the snapshot block and not on the tip as we will stop doing background validation when reaching it.\r\n",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-08-26T23:02:29Z",
      "updated_at": "2026-01-19T15:48:11Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33259",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1639,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2756065507,
      "number": 33215,
      "title": "Fix compatibility with `-debuglogfile` command-line option",
      "body": "This PR avoids hardcoding the \"debug.log\" filename, ensuring compatibility with custom filenames provided via the `-debuglogfile` command-line option.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-08-19T10:59:57Z",
      "updated_at": "2026-01-19T14:05:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33215",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 209,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1276577083,
      "number": 27260,
      "title": "Enhanced error messages for invalid network prefix during address parsing.",
      "body": "# Improve Address Decoding Error Messages\r\n\r\n## Issue\r\n\r\n`DecodeDestination` does not properly handle errors when a user inputs a valid address for the wrong network (e.g., a testnet address while running the client on mainnet).\r\n\r\nThe previous error messages were misleading. For example, \"Invalid or unsupported Segwit (Bech32) or Base58 encoding\" was displayed for a valid Bech32 address on a different network. This occurred because the `is_bech32` variable only checked if the prefix matched the current network's HRP. If it didn't match, the code would fall through to Base58 decoding logic regardless of whether the string was actually a valid Bech32 address.\r\n\r\n## Solution\r\n\r\n### Implementation Approach\r\n\r\n1. **Decode first, then validate**: Instead of checking the prefix before decoding, we now decode the string using `bech32::Decode(str)` upfront. This takes minimal CPU cycles and is acceptable since address validation is not a frequent operation.\r\n\r\n2. **Gather decoding information**: After Bech32 decoding, we also attempt `DecodeBase58` (with a length of 100) and `DecodeBase58Check`. This provides enough information to properly diagnose errors.\r\n\r\n3. **Provide network-aware error messages**: When an address has an invalid prefix, the error message now includes the expected network values.\r\n\r\n### Changes Made\r\n\r\n#### 1. Add Base58 Encoded Prefixes to ChainParams (`src/kernel/chainparams.cpp`, `src/kernel/chainparams.h`)\r\n\r\n#### 2. Refactor Address Decoding Logic (`src/key_io.cpp`)\r\n\r\n- Decode Bech32 upfront using `bech32::Decode(str)` instead of checking prefix first\r\n- Use structured bindings for cleaner code: `auto [bech32_encoding, bech32_hrp, bech32_chars] = bech32::Decode(str)`\r\n- Improved error handling flow with clearer branching\r\n\r\n#### 3. Improved Error Messages\r\n\r\n| Scenario | Previous Error | New Error |\r\n|----------|---------------|-----------|\r\n| Base58 address with wrong prefix | \"Invalid or unsupported Base58-encoded address.\" | \"Invalid Base58 address. Expected prefix 3, or 1\" |\r\n| Bech32 address with wrong HRP | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid or unsupported prefix for Segwit (Bech32) address (expected bc, got tb)\" |\r\n| Invalid Base58 checksum | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Invalid checksum or length of Base58 address (P2PKH or P2SH)\" |\r\n| Ambiguous invalid address | \"Invalid or unsupported Segwit (Bech32) or Base58 encoding.\" | \"Address is not valid Base58 or Bech32\" |\r\n| Bech32 with checksum error | N/A | \"Bech32 address decoded with error: Invalid Bech32 checksum\" |\r\n\r\n#### 4. Test Updates\r\n\r\n- Added `test/functional/data/rpc_validateaddress.json` with comprehensive test vectors for both mainnet and signet\r\n- Updated `test/functional/rpc_validateaddress.py` to use data-driven testing across multiple networks\r\n- Updated `test/functional/rpc_invalid_address_message.py` with new error message expectations\r\n\r\n### Consistency Improvements\r\n\r\n- Removed inconsistent periods at the end of some error messages\r\n- Changed \"Bech32 v0\" to \"SegWit v0\" for clarity\r\n\r\n## Reference\r\n\r\n- Issue: #26290\r\n",
      "state": "open",
      "user": "portlandhodl",
      "created_at": "2023-03-15T10:17:16Z",
      "updated_at": "2026-01-19T12:52:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27260",
      "labels": [
        "RPC/REST/ZMQ",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 0,
        "text_length": 3213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3177081870,
      "number": 34303,
      "title": "test: addrman: test self-announcement time penalty handling",
      "body": "This PR adds a test case for addrman that verifies that addresses announcing themselves (addr == source) are exempt from time penalties, while addresses announced by others receive the expected penalty. \r\n\r\nIt fixes the following mutant (https://corecheck.dev/mutation/src/addrman.cpp#L561):\r\n```diff\r\ndiff --git a/src/addrman.cpp b/src/addrman.cpp\r\nindex 206b54118e..c6a045fd8d 100644\r\n--- a/src/addrman.cpp\r\n+++ b/src/addrman.cpp\r\n@@ -558,7 +558,7 @@ bool AddrManImpl::AddSingle(const CAddress& addr, const CNetAddr& source, std::c\r\n     AddrInfo* pinfo = Find(addr, &nId);\r\n\r\n     // Do not set a penalty for a source's self-announcement\r\n-    if (addr == source) {\r\n+    if (addr != source) {\r\n         time_penalty = 0s;\r\n     }\r\n```\r\n",
      "state": "open",
      "user": "brunoerg",
      "created_at": "2026-01-15T12:07:32Z",
      "updated_at": "2026-01-19T12:42:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34303",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 800,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2809021284,
      "number": 33343,
      "title": "help: enrich help text for `-loadblock`",
      "body": "`-loadblock` doesn't support XOR-ed files, mention it in its help text to avoid troubles for users.",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-09-08T17:41:11Z",
      "updated_at": "2026-01-19T12:34:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33343",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 139,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2662308871,
      "number": 32958,
      "title": "wallet/refactor: change PSBTError to PSBTResult and remove std::optional<common::PSBTResult> and return common::PSBTResult",
      "body": "### Description\r\nThis is a follow-up to https://github.com/bitcoin/bitcoin/pull/31622#discussion_r2092030045 and https://github.com/bitcoin/bitcoin/pull/31622#discussion_r2092035407\r\n\r\n### What this changes\r\n- Updates `PSBTError` to `PSBTResult`\r\nbecause we now have `PSBTResult::OK`\r\n\r\n- Updates `PSBTErrorString` to `PSBTResultString`\r\n\r\n- Updates `RPCErrorFromPSBTError` to `RPCErrorFromPSBTResult`\r\n\r\n- Removes `std::optional<common::PSBTResult>` and instead returns just `common::PSBTResult`\r\nreplacing when we return `null` with `PSBTResult::OK`\r\n    \r\n    ",
      "state": "open",
      "user": "kevkevinpal",
      "created_at": "2025-07-13T14:06:28Z",
      "updated_at": "2026-01-19T12:11:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32958",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 686,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2015890161,
      "number": 30643,
      "title": "coins: Add move operations to Coin and CCoinsCacheEntry",
      "body": "Related to https://github.com/bitcoin/bitcoin/pull/28280#discussion_r1703187118, the CI build had a Sonar warning, namely:\r\n> \"std::move\" should not be called on an object of a type with neither move constructor nor move-assignment operator.\r\n\r\nAdded defaulted move constructor and move assignment operator to `CCoinsCacheEntry`.\r\n\r\nBased on comments I've also added explicit special member functions to `Coin`.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-08-12T21:14:44Z",
      "updated_at": "2026-01-19T10:56:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30643",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 467,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2041914050,
      "number": 30732,
      "title": "build: improve cxx and linker flag caching",
      "body": "Migration of https://github.com/hebasto/bitcoin/pull/340\r\n\r\n`try_append_cxx_flags` and `try_append_linker_flag` are CMake functions used to test and conditionally apply compiler and linker flags to ensure compatibility with the build environment.\r\n\r\nCurrently the only case when the `SOURCE` parameter was overwritten was [bitcoin/bitcoin@8b6f1c4/CMakeLists.txt#L383-L389](https://github.com/bitcoin/bitcoin/blob/8b6f1c4353836bae6aa683cbc65251165bd031ba/CMakeLists.txt#L383-L389).\r\nSo currently the values would be unique without the hash, but overwriting a source in the future would cause a false hit, so I kept the full (uppercase) hash - and also added the `werror_flag` to the cache key, since the result of the compilation depends on it as well.\r\n\r\nAfter this change we will have logs such as:\r\n```\r\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER\r\n-- Performing Test CXX_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER - Success\r\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER__WL__FATAL_WARNINGS_A797852B32447D9D3594B7F06EFE65790DAAEFCBEFCE4144D7B1F480F6FA4B6A\r\n-- Performing Test LINKER_SUPPORTS__FSANITIZE_UNDEFINED_ADDRESS_FUZZER__WL__FATAL_WARNINGS_A797852B32447D9D3594B7F06EFE65790DAAEFCBEFCE4144D7B1F480F6FA4B6A - Success\r\n-- Performing Test FUZZ_BINARY_LINKS_WITHOUT_MAIN_FUNCTION\r\n-- Performing Test FUZZ_BINARY_LINKS_WITHOUT_MAIN_FUNCTION - Success\r\n```\r\n\r\nOn top of that, `try_append_cxx_flags` currently doesn't even need a `SOURCE` parameter - I've removed it for now, we can add it back once we need it.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-08-28T13:05:55Z",
      "updated_at": "2026-01-19T10:56:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30732",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1608,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2082789840,
      "number": 30936,
      "title": "doc: Add `nproc` support for Mac through `coreutils`",
      "body": "See: https://www.gnu.org/software/coreutils/manual/html_node/nproc-invocation.html\r\n\r\nRevival of a failed attempt in https://github.com/bitcoin/bitcoin/pull/30619\r\n\r\nYou can test on your mac via:\r\n```bash\r\n% echo $(nproc)\r\ncommand not found: nproc\r\n```\r\n```bash\r\n% brew install coreutils\r\n...\r\n% echo $(nproc)\r\n10\r\n```",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2024-09-20T09:44:04Z",
      "updated_at": "2026-01-19T10:56:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30936",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 371,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2887599768,
      "number": 33540,
      "title": "argsman, cli: GNU-style command-line option parsing (allows options after non-option arguments)",
      "body": "This PR simplifies the argument parsing logic and resolves practical issues for `bitcoin-cli` and similar binaries (e.g. `bitcoin-wallet`) making their usage more consistent and predictable, enabling valid patterns such as mixing commands with wallet- or RPC-specific options—without relying on argument ordering quirks.\r\n\r\n<details>\r\n<summary>What's changed in ArgsManager that allows the above.</summary>\r\n\r\n- Previously, `ArgsManager` stopped interpreting options once a non-option argument was encountered (non-GNU parsing). For example:\r\n\r\n        bitcoind -a -b param -c\r\n\r\n  would ignore `-c` because it followed the non-option argument `param`. In some cases '-c' is interpreted as an argument for 'param', producing unexpected behavior (eg empty arrays for listtransactions command).\r\n\r\n- This PR changes the behavior so that options following non-option argument are recognized and processed (GNU parsing). This is needed for workflows for tools like CLI where command arguments may be followed by wallet- or RPC-specific\r\noptions, e.g.:\r\n\r\n        bitcoin-cli -rpcwallet=\"\" listtransactions -rpcwallet=mywallet\r\n    \r\n        bitcoin-cli getaddressinfo <address> -rpcwallet=mywallet\r\n\r\n- (other binaries could also benefit from this change,  e.g. `bitcoin-wallet`)\r\n\r\n        bitcoin-wallet create -wallet=newname\r\n\r\n- Invalid options passed after non-options will be treated as RPC arguments that begin with a `-` character (so no\r\nbehavioural change against `master`), e.g.:\r\n\r\n        bitcoin-cli -regtest -datadir=/tmp/btc createwallet -mywallet\r\n        {\r\n            \"name\": \"-mywallet\"\r\n        }\r\n\r\n</details>\r\n\r\n<details><summary>Before and after outputs running RPC commands from <code>CLI</code>/ <code>bitcoin-cli</code>.</summary><ul>\r\n     <li><details><summary>wallet commands using <code>CLI</code>:</summary><ul> \r\n           <li><details><summary><code>getaddressinfo</code></summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc getaddressinfo bcrt1qrnz5xlcwz5d85n3fag6v0vc4lryjc90jhqtpsh -rpcwallet=nonExistent\r\nerror message:\r\ngetaddressinfo \"address\"\r\n...\r\n```\r\n</li>\r\n           <li>after\r\n\r\n```\r\n./build/bin/bitcoin-cli -regtest -datadir=/tmp/btc getaddressinfo bcrt1qrnz5xlcwz5d85n3fag6v0vc4lryjc90jhqtpsh -rpcwallet=nonExistent\r\nerror code: -18\r\nerror message:\r\nRequested wallet does not exist or is not loaded\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n           <li><details><summary><code>listtransactions</code></summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=nonExistent\r\n[\r\n]\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n\r\n```\r\n./build/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=nonExistent\r\nerror code: -18\r\nerror message:\r\nRequested wallet does not exist or is not loaded\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n           <li><details><summary>any command that needs an option to be specifed, it can be added at the end directly instead of before the command</summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions\r\nerror code: -19\r\nerror message:\r\nMultiple wallets are loaded. Please select which wallet to use by requesting the RPC through the /wallet/<walletname> URI path. Or for the CLI, specify the \"-rpcwallet=<walletname>\" option before the command (run \"bitcoin-cli -h\" for help or \"bitcoin-cli listwallets\" to see which wallets are currently loaded).\r\n```\r\n\r\n```\r\n./build_master/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=\"\"\r\nerror code: -19\r\nerror message:\r\nMultiple wallets are loaded. Please select which wallet to use by requesting the RPC through the /wallet/<walletname> URI path. Or for the CLI, specify the \"-rpcwallet=<walletname>\" option before the command (run \"bitcoin-cli -h\" for help or \"bitcoin-cli listwallets\" to see which wallets are currently loaded).\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n```\r\n/build/bin/bitcoin-cli -regtest -datadir=/tmp/btc listtransactions -rpcwallet=\"\"\r\n[\r\n  {\r\n    \"address\": \"bcrt1q5pqkrlfrp9rvsg43sxxagrees7r7ul6uyskhs4\",\r\n    \"parent_descs\": [\r\n      \"wpkh([76a11ab0/84h/1h/0h]tpubDCDCuyC1Rtm1weZ5kfBYtdchcmqa2t8db7M68wsPHbWhUrYnzFTrHu7ufVVRydt3FdWQy8iNmKbZYbgpWWcEKPAj896x53UbS6i2xRD1qct/0/*)#kuff3m9t\"\r\n    ],\r\n    \"category\": \"immature\",\r\n    \"amount\": 50.00000000,\r\n    \"label\": \"\",\r\n...\r\n```\r\n\r\n</li>\r\n           </ul></details></li>\r\n     </ul></details></li>\r\n     <li><details><summary>other binaries could benefit from it, e.g. <code>bitcoin-wallet:</code></summary><ul> \r\n           <li><details><summary><code>create</code> command</summary><ul>\r\n           <li>before/ <code>master</code>\r\n\r\n```\r\n./build_master/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create\r\nWallet name must be provided when creating a new wallet.\r\n```\r\n_(`-wallet` option has to be passed before the `create` command in order to work)_\r\n```\r\n./build_master/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create -wallet=newWalletName\r\nError: Additional arguments provided (-wallet=newWalletName). Methods do not take arguments. Please refer to `-help`.\r\n```\r\n\r\n</li>\r\n           <li>after\r\n\r\n```\r\n./build/bin/bitcoin-wallet -regtest -datadir=/tmp/btc create -wallet=newWallet\r\nTopping up keypool...\r\nWallet info\r\n===========\r\nName: newWallet\r\nFormat: sqlite\r\nDescriptors: yes\r\nEncrypted: no\r\nHD (hd seed available): yes\r\nKeypool Size: 8000\r\nTransactions: 0\r\nAddress Book: 0\r\n```\r\n</li>\r\n           </ul></details></li>\r\n     </ul></details></li>\r\n     </ul> <!-- End -->\r\n</details>\r\n\r\n-<ins>_**Notes**_</ins>:\r\n\r\n- <ins>Backwards compatibility</ins>:\r\nThis PR is backward compatible in the sense that it allows new valid invocations that were previously rejected (failed or somehow ignored).\r\nIn `master`, any valid option following a command is treated as a positional argument. This can lead to unexpected RPC errors or help messages due to mismatched argument types. With this PR, those cases are parsed as proper options when applicable.\r\n\r\n- `bitcoin-cli` continues to accept RPC arguments that begin with a `-` character as currently in `master` (check `createwallet` example in _\"What's change in ArgsManager\"_ section above).\r\n\r\n- `bitcoin-cli` could distinguish between options that begin with single and double dashes, and treat options after the RPC method name that begin with double dashes as RPC named parameters (check example in 4th [commit](https://github.com/bitcoin/bitcoin/pull/33540/commits/a101bbb61fdf5563337334d63a10432432ee3625) message body).\r\n\r\n- Refactored both `ArgsManager::ProcessOptionKey` (new function added in this PR) and `ArgsManager::ParseParameters` in separated commits making the code clearer and the PR much easier to follow and review.",
      "state": "open",
      "user": "pablomartin4btc",
      "created_at": "2025-10-04T22:43:06Z",
      "updated_at": "2026-01-19T10:50:50Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33540",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 6987,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2743753242,
      "number": 33186,
      "title": "wallet, test: Ancient Wallet Migration from v0.14.3 (no-HD and Single Chain)",
      "body": "This PR adds test coverage for migrating legacy Bitcoin Core wallets from v0.14.3 (released in 2017) to the descriptor wallet format. The test validates that users can safely upgrade their wallets while preserving all funds, transaction history, and addresses.\r\n\r\nThis test was originally developed on top of #32977, as it was requested in reviews.\r\nHowever, since it also increases test coverage, it can be merged independently.\r\n\r\nThe test covers two wallet migration scenarios:\r\n\r\n* Non-HD Wallet Migration - Tests migration of non-HD wallets (created with `-usehd=0`)\r\n* Single Chain HD Wallet Migration - Tests migration of HD wallets from v0.14.3 (`VERSION_HD_BASE`)\r\n\r\nThe node v0.14.3 cannot be synced because it doesn't have the `syncwithvalidationinterfacequeue` RPC implemented (required by `test_framework.py`), so the solution is to copy the `block` folder to the modern node and start it with `-reindex-chainstate`. Because of this additional complexity, this testing is best managed in a separate file rather than in the existing migration test files.\r\n\r\n",
      "state": "open",
      "user": "w0xlt",
      "created_at": "2025-08-13T18:50:30Z",
      "updated_at": "2026-01-19T10:02:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33186",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1147,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3057433137,
      "number": 33977,
      "title": "script: Remove dead code from OP_CHECKMULTISIG",
      "body": "The stack size check before the dummy element check in OP_CHECKMULTISIG is redundant. The stack is previously validated to have least *i* elements (where *i* is number of pubkeys + number of signatures + 3), and then *i* - 1 elements are popped off the stack, leaving at least one element still in.\r\n\r\nThe redundant check was added in #3843 (commit 6380180821917c22ecfd89128ee60aae6f4cac33). There it's easy to see why it's redundant – it's inserted into a code path where another `popstack` would previously follow.\r\n\r\nNote the missing code coverage: https://maflcko.github.io/b-c-cov/total.coverage/src/script/interpreter.cpp.gcov.html#L1200",
      "state": "open",
      "user": "vostrnad",
      "created_at": "2025-12-01T02:29:46Z",
      "updated_at": "2026-01-19T09:57:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33977",
      "labels": [
        "Consensus"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 690,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3054115118,
      "number": 33965,
      "title": "mining: fix -blockreservedweight shadows IPC option",
      "body": "Also enforce `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients.\r\n\r\nThe `-blockreservedweight` startup option should only affect RPC code, because IPC clients (currently) do not have a way to signal their intent to use the node default (the `BlockCreateOptions` struct defaults merely document a recommendation for client software).\r\n\r\nBefore this PR however, if the user set `-blockreservedweight` then `ApplyArgsManOptions` would cause the `block_reserved_weight` option passed by IPC clients to be ignored. _Users who don't set this value were not affected._\r\n\r\nFix this by making BlockCreateOptions::block_reserved_weight an\r\nstd::optional.\r\n\r\nInternal interface users, such as the RPC call sites, don't set a\r\nvalue so -blockreservedweight is used. Whereas IPC clients do set\r\na value which is no longer ignored.\r\n\r\nTest coverage is added, with a preliminary commit that refactors the `create_block_template` and `wait_next_template` helpers.\r\n\r\n`mining_basic.py` already ensured `-blockreservedweight` is enforced by mining RPC methods. The second commit adds coverage for Mining interface IPC clients. It also verifies that `-blockreservedweight` has no effect on them.\r\n\r\nThe third commit enforces `MINIMUM_BLOCK_RESERVED_WEIGHT` for IPC clients. Previously lower values were quietly clamped.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-28T13:38:33Z",
      "updated_at": "2026-01-19T08:55:29Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33965",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1349,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3087630130,
      "number": 34037,
      "title": "wallet, doc: clarify the coin selection filters that enforce cluster count",
      "body": "Followup to #33629.\r\n\r\nFix misleading docs and variable names. Namely, `getTransactionAncestry` returns the cluster count, not max descendant count of ancestor set (not worth reimplementing as it is merely a heuristic). No behavior changes - I don’t think much needs to be changed for the first release containing cluster mempool. \r\n\r\nCurrent `CoinEligibilityFilter`s enforce a maximum ancestor count (summed across all outputs, potentially overestimating) and max descendant count across ancestors of the output.\r\n\r\nSince #33629, these filters have started using cluster count instead of max desc count across ancestors. The change isn’t dangerous, as the cluster count bounds descendant count as well. Currently, the wallet is essentially enforcing a mixture of both limits - this is good while we are transitioning. Note that the cluster count enforced is 25, not 64, since it's grabbing the node's descendant count limit. While it is not an apples-to-apples comparison, a cluster count limit of 25 helps us avoid busting legacy descendant limits (which will be common on the network for a while).\r\n\r\nPotential things for the future, out of scope for this PR:\r\n- When we get rid of the ancestor/descendant config options, `getPackageLimits` can probably be replaced with hard-coded values.\r\n- Change the `OutputGroup`s to track the actual cluster count that results from spending these outputs and merging their clusters.\r\n- Loosen from 25 after that policy is no longer common.\r\n- Clean up `getPackageLimits`.",
      "state": "open",
      "user": "glozow",
      "created_at": "2025-12-10T01:28:11Z",
      "updated_at": "2026-01-19T08:21:12Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34037",
      "labels": [
        "Docs",
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1588,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3139411374,
      "number": 34186,
      "title": "test: use dynamic port allocation in proxy tests",
      "body": "Use `port=0` for dynamic port allocation in test framework components to avoid intermittent \"address already in use\" errors when running tests concurrently or when ports are stuck in TIME_WAIT state. Example: https://github.com/bitcoin/bitcoin/pull/29415#discussion_r2634509304\r\n\r\nChanges:\r\n\r\n  - Update `socks5.py` and `p2p.py` to support dynamic port allocation\r\n  - Convert `feature_proxy.py` and `feature_anchors.py` to use `port=0`",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-12-31T17:03:39Z",
      "updated_at": "2026-01-19T08:18:02Z",
      "merged_at": "2026-01-14T22:40:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34186",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 485,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2452084628,
      "number": 32247,
      "title": "BIP-348 (OP_CHECKSIGFROMSTACK) (regtest only)",
      "body": "This implements [BIP-348 (`OP_CHECKSIGFROMSTACK`)](https://github.com/bitcoin/bips/blob/master/bip-0348.md), but only specifies a regtest deployment. There is no effective policy change, since the SCRIPT_VERIFY_* flags (as used) result in the same OP_SUCCESS-like behavior.\r\n\r\nThis change can be composed with other opcode specifications (e.g. CTV, see #31989) and bundled into the same deployment (yet to be specified).\r\n\r\nI encourage more general, conceptual discussion to happen on [Delving Bitcoin](https://delvingbitcoin.org/) and not on this pull request.\r\n\r\nSome related discussion on Delving Bitcoin here:\r\n- https://delvingbitcoin.org/t/ctv-csfs-can-we-reach-consensus-on-a-first-step-towards-covenants/\r\n\r\nSee also:\r\n- https://bitcoinops.org/en/topics/op_checksigfromstack/",
      "state": "open",
      "user": "jamesob",
      "created_at": "2025-04-10T19:41:43Z",
      "updated_at": "2026-01-19T00:25:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32247",
      "labels": [
        "Consensus",
        "Needs rebase",
        "Needs Conceptual Review"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 829,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1300349444,
      "number": 27409,
      "title": "Make GUI and CLI tools use the same datadir",
      "body": "**This is based on #27302.** The non-base commits are:\r\n\r\n- [`ae5fc323b24` bitcoin-wallet: make bitcoin-wallet tool load config file](https://github.com/bitcoin/bitcoin/pull/27409/commits/ae5fc323b2441bc45c38737f1ffb40d777b134d8)\r\n- [`b091d9b0762` init: Allow bitcoin default datadir to point at an external datadir](https://github.com/bitcoin/bitcoin/pull/27409/commits/b091d9b076204f69cc814353139d5bf0df412bae)\r\n- [`5855150efae` Make GUI and CLI tools use the same datadir](https://github.com/bitcoin/bitcoin/pull/27409/commits/5855150efae74d10e0eaf3bd08b06e8655a0f1ba)\r\n\r\n---\r\n\r\nCurrently if your choose a non-default datadir in the GUI intro screen, the datadir is ignored by CLI tools.\r\n\r\nThis PR makes GUI and CLI tools the same datadir setting by default. It is followup to https://github.com/bitcoin-core/gui/pull/602 which made GUI and CLI tools use the same settings as long as they loaded the same datadir.\r\n\r\nThe reason GUI and CLI tools use inconsistent datadirs is that GUI stores the datadir path in a `strDataDir` field in `.config/Bitcoin/Bitcoin-Qt.conf`[^1] which CLI tools ignore. This PR changes the GUI to instead store the datadir path at the default datadir location `~/.bitcoin`[^2] as a symlink that CLI tools will already follow, or as a text file if the filesystem does not support symlinks.\r\n\r\nIf upgrading from a previous version of the GUI and there is only a GUI datadir, the `strDataDir` setting will be automatically migrated to a symlink so CLI tools will start using it as well.\r\n\r\nIf upgrading and GUI and CLI tools are using different datadirs, the GUI will show a prompt allowing either of the datadirs to be loaded on startup, with an option to set one as the default going forward.\r\n\r\n[^1]: `strDataDir` value is stored in `.config/Bitcoin/Bitcoin-Qt.conf` on linux, in property list files on macos, and in registry keys on windows.\r\n[^2]: The default datadir location is `~/.bitcoin` on linux, `~/Library/Application Support/Bitcoin` on macos, and `%APPDATA%\\Bitcoin` on windows",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2023-04-03T16:21:47Z",
      "updated_at": "2026-01-19T00:25:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/27409",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2064,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2528993305,
      "number": 32566,
      "title": "Use subprocess library for notifications",
      "body": "Builds on #29868 (to have windows support).\r\n\r\nThis switches the `-*notify` options to use the subprocess library, which is currently used for only the external signer. The main advantage of this is that file descriptor leaks are avoided (#32343). This could also add future flexibility in notifications, for example to bypass the shell (and launch commands with their arguments directly[1]), or do something with command output (like log it). But for now, this is meant to be one-to-one.\r\n\r\n- Generalize `ENABLE_EXTERNAL_SIGNER` build option to `ENABLE_SUBPROCESS`.\r\n- Unify everything dealing with external commands in `common/run_command.cpp`. Use the new functions `RunShell` and `RunShellInThread`.\r\n- Remove `HAVE_SYSTEM`.\r\n\r\n--------------------------\r\n\r\n[1] There's a long-running issue on Windows where it can't pass the wallet name because there's no way to escape it for the shell.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2025-05-19T14:55:35Z",
      "updated_at": "2026-01-19T00:25:52Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32566",
      "labels": [
        "Build system",
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 933,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1681972231,
      "number": 29256,
      "title": "log, refactor: Allow log macros to accept context arguments",
      "body": "Allow `LogDebug()`, `LogTrace()`, `LogInfo()`, `LogWarning()`, and `LogError()` macros to accept context arguments to provide more information in log messages and more control over logging to callers.\r\n\r\nThis functionality is used in followup PRs:\r\n\r\n- [#30342](https://github.com/bitcoin/bitcoin/pull/30342) - To let libbitcoinkernel send output to specfic `BCLog::Logger` instances instead of a global instance, so output can be disambiguated and applications can have more control over logging.\r\n\r\n- [#30343](https://github.com/bitcoin/bitcoin/pull/30343) - To replace custom `WalletLogPrintf` calls with standard logging calls that automatically include wallet names and don't log everything at info level.\r\n\r\nThis PR does not change behavior of current log prints or require them to be updated. It includes tests and documentation covering the new functionality.\r\n\r\n---\r\n\r\nNote: Originally this PR also removed some restrictions around passing category constants to log macros to try to make them more consistent, but these changes were too controversial and have been dropped.",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2024-01-16T22:09:35Z",
      "updated_at": "2026-01-19T00:18:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29256",
      "labels": [
        "Utils/log/libs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1142,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3091431534,
      "number": 34049,
      "title": "rpc: Disallow captures in RPCMethodImpl",
      "body": "When defining `RPCHelpMan` objects, we usually return a lambda, and mostly we define those via `[&](...) { ... }` which explicitly captures any parameters or local variables by reference. If we were to actually use any of those captures (we don't), we would invoke undefined behaviour. So instead, convert all the `[&]` to `[]` to avoid capturing, and as part of `RPCHelpMan` check that the function we provide is convertible to a bare function pointer, so that any attempts to capture anything (even if it's by-copy, which is safe) results in an error.\r\n\r\nWhile we're at it, rename `RPCHelpMan` to `RPCMethod`, reflecting it's greater responsibility since #19386.",
      "state": "open",
      "user": "ajtowns",
      "created_at": "2025-12-11T03:25:25Z",
      "updated_at": "2026-01-18T15:06:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34049",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 704,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2999849822,
      "number": 33856,
      "title": "kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState",
      "body": "## Motivation\r\n\r\nThis PR refactors `ProcessNewBlockHeaders()` to return `BlockValidationState` by value instead of using out-parameters or boolean returns. This follows the pattern established in #31981 (commit 74690f4) which refactored `TestBlockValidity()` in a similar manner.\r\n\r\n### Current Issues\r\n **ProcessNewBlockHeaders()**: Uses an out-parameter `BlockValidationState& state`, making the API less intuitive.\r\n\r\nAs noted by @theCharlatan in #33822 [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508065115) and can be a fix for that too:\r\n> One thing that could be considered here is returning the BlockValidationState directly instead of having an in/out param. To safely do that I think we'd need to refactor ProcessNewBlockHeaders though, similarly to what was done in 74690f4.\r\n\r\nThe changes are split into two commits, see individual commit message for more info.",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-11T17:23:59Z",
      "updated_at": "2026-01-18T14:43:36Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33856",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 981,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3086363450,
      "number": 34036,
      "title": "contrib: update macOS SDK to Xcode-26.1.1-17B100",
      "body": "Would close #34034.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2025-12-09T16:45:55Z",
      "updated_at": "2026-01-18T11:26:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34036",
      "labels": [
        "Scripts and tools",
        "CI failed"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 68,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2282546380,
      "number": 31675,
      "title": "[test] fix p2p_orphan_handling.py empty orphanage check",
      "body": "Fix CI: https://cirrus-ci.com/task/4584274617171968?logs=ci#L2784",
      "state": "closed",
      "user": "glozow",
      "created_at": "2025-01-16T18:58:24Z",
      "updated_at": "2026-01-18T10:55:58Z",
      "merged_at": "2025-01-17T09:37:30Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31675",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 121,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 578665495,
      "number": 21283,
      "title": "Implement BIP 370 PSBTv2",
      "body": "BIP 370 PSBTv2 introduces several new fields and different invariants for PSBT. This PR implements those new fields and restructures the PSBT implementation to match PSBTv2 but still remain compatible with PSBTv0.",
      "state": "open",
      "user": "achow101",
      "created_at": "2021-02-23T18:29:20Z",
      "updated_at": "2026-01-18T08:08:39Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/21283",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 238,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1640676570,
      "number": 29060,
      "title": "Policy: Report debug message why inputs are non standard",
      "body": "This PR is another attempt at  #13525.\r\n\r\nTransactions that fail `PreChecks` Validation due to non-standard inputs now  returns invalid validation state`TxValidationResult::TX_INPUTS_NOT_STANDARD` along with a debug error message.\r\n\r\nPreviously, the debug error message for non-standard inputs do not specify why the inputs were considered non-standard. \r\nInstead, the same error string, `bad-txns-nonstandard-inputs`, used for all types of non-standard input scriptSigs.\r\n\r\nThis PR updates the `AreInputsStandard`  to include the reason why inputs are non-standard in the debug message.\r\nThis improves the `Precheck` debug message to be more descriptive.\r\n\r\nFurthermore, I have addressed all remaining comments from #13525 in this PR.\r\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2023-12-12T13:16:05Z",
      "updated_at": "2026-01-18T07:27:23Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29060",
      "labels": [
        "TX fees and policy"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 794,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1655695603,
      "number": 29136,
      "title": "wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor",
      "body": "It is sometimes useful for the wallet to have keys that it can sign with but are not (initially) involved in any scripts, e.g. for setting up a multisig. Ryanofsky [suggested](https://github.com/bitcoin/bitcoin/pull/26728#issuecomment-1867721948) A `unused(KEY)` descriptor which allows for a key to be specified, but produces no scripts. These can be imported into the wallet, and subsequently retrieved with `gethdkeys`. Additionally, `listdescriptors` will output these descriptors so that they can be easily backed up.\r\n\r\nIn order to make it easier for people to add HD keys to their wallet, and to generate a new one if they want to rotate their descriptors, an `addhdkey` RPC is also added. Without arguments, it will generate a new HD key and add it to the wallet via a `unused(KEY)` descriptor. If provided a private key, it will construct the descriptor and add it to the wallet.\r\n\r\nSee also: https://github.com/bitcoin/bitcoin/pull/26728#issuecomment-1866961865\r\n\r\nBased on #29130 as `gethdkeys` is useful for testing this.",
      "state": "open",
      "user": "achow101",
      "created_at": "2023-12-22T23:40:15Z",
      "updated_at": "2026-01-18T07:24:22Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29136",
      "labels": [
        "Wallet"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1117,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1939750059,
      "number": 30341,
      "title": "Permit Combiner to strip bip32_deriv information",
      "body": "Closes: #30294\r\n\r\nLooking for approach (N)ACK.\r\n\r\nPreviously setting the `bip32derivs` flag to false with the `walletprocesspsbt` RPC correctly does not include `bip32_derivs` for inputs in the PSBT, but does include `bip32_derivs` for outputs.\r\n\r\nUser may want to actively strip all bip32 derivation paths from a PSBT for privacy reasons however. It may make sense to do this after signing your inputs and outputs during a manual coinjoin as demonstrated in the [BIP174 example](https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#manual-coinjoin-workflow).\r\n\r\nTo me, this makes more sense to include in the [`Combiner`](https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki#combiner) PSBT role. It's then separated from signing done by the `Signers`. \r\n\r\nTherefore add functionality to `combinepsbt` permitting stripping of **all** `bip32_derivation` paths found in all provided psbts' inputs and outputs.\r\n\r\nAs this RPC can be called with a single PSBT, it can be used to strip derivation paths from a PSBT with any number of participants.\r\n",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2024-06-26T11:01:47Z",
      "updated_at": "2026-01-18T06:57:30Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30341",
      "labels": [
        "PSBT"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1113,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2250366940,
      "number": 31560,
      "title": "rpc: allow writing UTXO set to a named pipe, introduce dump_to_sqlite.sh script",
      "body": "This PR slightly modifies the `dumptxoutset` RPC to allow writing the UTXO set dump into a [named pipe](https://askubuntu.com/a/449192), so that the output data can be consumed by another process, see #31373. Taking use of this with the utxo-to-sqlite.py tool (introduced in #27432), creating an UTXO set in SQLite3 format is possible on the fly and becomes a one-liner with a newly introduced script `dump_to_sqlite.sh`. E.g. for signet:\r\n```\r\n$ ./contrib/utxo-tools/dump_to_sqlite.sh \"./build/src/bitcoin-cli -signet\" ~/utxos.sqlite3\r\nUTXO Snapshot for Signet at block hash 000000ddc3b251483cf1ebb23e2750ba..., contains 5705634 coins\r\n1048576 coins converted [18.38%], 4.474s passed since start\r\n2097152 coins converted [36.76%], 8.793s passed since start\r\n3145728 coins converted [55.13%], 13.146s passed since start\r\n4194304 coins converted [73.51%], 17.478s passed since start\r\n5242880 coins converted [91.89%], 21.832s passed since start\r\n{\r\n  \"coins_written\": 5705634,\r\n  \"base_hash\": \"000000ddc3b251483cf1ebb23e2750ba2490701d0c547241b247a9beb85498d0\",\r\n  \"base_height\": 227678,\r\n  \"path\": \"/tmp/tmp.MFHEVqetv0/utxos.fifo\",\r\n  \"txoutset_hash\": \"f29e524c999487cbd0cfca5201dce67c2c5e5c5eb115c63ad48c2239f23eea4c\",\r\n  \"nchaintx\": 8272649\r\n}\r\nTOTAL: 5705634 coins written to /home/thestack/utxos.sqlite3, snapshot height is 227678.\r\n```\r\nNote that the `dumptxoutset` RPC calculates an UTXO set hash as a first step before any data is emitted, so especially on mainnet it takes quite a while until the conversion starts and something is happening visibly.\r\n\r\nThe new script is quite minimal and PoC-y at this point, there are some potential improvement ideas:\r\n- better error handling (e.g. detect if bitcoin-cli exists, clean up tmpdir if bitcoin-cli execution fails etc.)\r\n- allow to pass through the rollback option (now we always dump at the current height, i.e. \"latest\" parameter)",
      "state": "open",
      "user": "theStack",
      "created_at": "2024-12-24T02:42:27Z",
      "updated_at": "2026-01-18T06:09:00Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31560",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1968,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2285701879,
      "number": 31682,
      "title": "[IBD] specialize CheckBlock's input & coinbase checks",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n### Summary\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n### Context, concerns\r\n\r\nAs noted by Sipa in https://github.com/bitcoin/bitcoin/pull/31682#pullrequestreview-2570273162, this is consensus-critical code (especially since we've had an actual inflation bug related to duplicate checking).\r\nHowever, the changes here are very confined to a single function, easily reviewed, and I have a general preference for avoiding `std::set` when sorted `std::vector` works too as well.\r\n\r\nThe goal of this change is to [make block validation faster](https://github.com/bitcoin/bitcoin/pull/14387#issuecomment-442748969) via a low-risk alternative.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C++ compiler .......................... AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\r\n|            9,585.10 |          104,328.55 |    0.1% |     11.03 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\r\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 2.07x faster `CheckBlockBench`\r\n* 3.4x faster `DuplicateInputs`\r\n* 1.8% faster `ProcessTransactionBench`\r\n\r\n-----\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`\r\n|           56,199.57 |           17,793.73 |    0.1% |      229,263.01 |      178,766.31 |  1.282 |      15,509.97 |    0.5% |     10.91 | `ProcessTransactionBench`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\r\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`\r\n\r\n</details>\r\n\r\n* 31% faster `CheckBlockBench`\r\n* 2x faster `DuplicateInputs`\r\n* 0.5% faster `ProcessTransactionBench`\r\n\r\n----\r\n\r\nWhile the point of the change isn't necessarily to speed up IBD, but you can see the measurements at https://github.com/bitcoin/bitcoin/pull/31682#issuecomment-2606765689\r\n\r\n----\r\n\r\nRelated PRs: \r\n* https://github.com/bitcoin/bitcoin/pull/14397 - very similar solution, I only found it after pushing the PR (was closed for inactivity)\r\n* https://github.com/bitcoin/bitcoin/pull/14837 - a faster, but a lot more complex alternative (was closed for complexity and inactivity).",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-01-18T15:03:56Z",
      "updated_at": "2026-01-18T05:54:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31682",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5734,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2336649960,
      "number": 31868,
      "title": "[IBD] specialize block serialization",
      "body": "This change is part of [[IBD] - Tracking PR for speeding up Initial Block Download](https://github.com/bitcoin/bitcoin/pull/32043)\r\n\r\n---\r\n\r\nThis PR is drafted until I remeasure everything after the recent merges and I need to find a way to simplify the 1 byte writes more nicely, I don't like all the specializations.\r\n\r\n---\r\n\r\n### Summary\r\n\r\nThis PR contain a few different optimization I found by IBD profiling, and via the newly added block seralization benchmarks. It also takes advantage of the recently merged [`std::span` changes](https://github.com/bitcoin/bitcoin/pull/31519) enabling propagating static extents.\r\n\r\nThe commits merge similar (de)serialization methods, and separates them internally with  `if constexpr` - similarly to how it has been [done here before](https://github.com/bitcoin/bitcoin/pull/28203). This enabled further `SizeComputer` optimizations as well.\r\n\r\n### Context\r\nOther than these, since single byte writes are used very often (used for every `(u)int8_t` or `std::byte` or `bool` and for every `VarInt`'s first byte which is also needed for every `(pre)Vector`), it makes sense to avoid the generalized serialization infrastructure that isn't needed:\r\n* `AutoFile` write doesn't need to allocate 4k buffer for a single byte now;\r\n* `VectorWriter` and `DataStream` avoids memcpy/insert calls;\r\n* `CSHA256::Write` can avoid `memcpy`.\r\n\r\n`DeserializeBlock` is dominated by the hash calculations so the optimizations barely affect it.\r\n\r\n### Measurements\r\n\r\n<details>\r\n<summary>C compiler ............................ AppleClang 16.0.0.16000026</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          195,610.62 |            5,112.20 |    0.3% |     11.00 | `SerializeBlock`\r\n|           12,061.83 |           82,906.19 |    0.1% |     11.01 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          174,569.19 |            5,728.39 |    0.6% |     10.89 | `SerializeBlock`\r\n|           10,241.16 |           97,645.21 |    0.0% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~12.% faster\r\n> `SizeComputerBlock` - ~17.7% faster\r\n\r\n-----\r\n\r\n\r\n<details>\r\n<summary>C++ compiler .......................... GNU 13.3.0</summary>\r\n\r\n> Before:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          867,857.55 |            1,152.26 |    0.0% |    8,015,883.90 |    3,116,099.08 |  2.572 |   1,517,035.87 |    0.5% |     10.81 | `SerializeBlock`\r\n|           30,928.27 |           32,332.88 |    0.0% |      221,683.03 |      111,055.84 |  1.996 |      53,037.03 |    0.8% |     11.03 | `SizeComputerBlock`\r\n\r\n> After:\r\n\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          615,000.56 |            1,626.01 |    0.0% |    8,015,883.64 |    2,208,340.88 |  3.630 |   1,517,035.62 |    0.5% |     10.56 | `SerializeBlock`\r\n|           25,676.76 |           38,945.72 |    0.0% |      159,390.03 |       92,202.10 |  1.729 |      42,131.03 |    0.9% |     11.00 | `SizeComputerBlock`\r\n\r\n</details>\r\n\r\n> `SerializeBlock` - ~41.1% faster\r\n> `SizeComputerBlock` - ~20.4% faster\r\n\r\n----\r\n\r\nWhile this wasn't the main motivation for the change, IBD on Ubuntu/GCC on SSD with i9 indicates a 2% speedup as well:\r\n\r\n<details>\r\n<summary>Details</summary>\r\n\r\n```bash\r\nCOMMITS=\"05314bde0b06b820225f10c6529b5afae128ff81 1cd94ec2511874ec68b92db34ad7ec7d9534fed1\"; \\\r\nSTOP_HEIGHT=880000; DBCACHE=10000; \\\r\nC_COMPILER=gcc; CXX_COMPILER=g++; \\\r\nhyperfine \\\r\n--export-json \"/mnt/my_storage/ibd-${COMMITS// /-}-${STOP_HEIGHT}-${DBCACHE}-${C_COMPILER}.json\" \\\r\n--runs 3 \\\r\n--parameter-list COMMIT ${COMMITS// /,} \\\r\n--prepare \"killall bitcoind || true; rm -rf /mnt/my_storage/BitcoinData/*; git checkout {COMMIT}; git clean -fxd; git reset --hard; cmake -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_WALLET=OFF -DCMAKE_C_COMPILER=$C_COMPILER -DCMAKE_CXX_COMPILER=$CXX_COMPILER && cmake --build build -j$(nproc) --target bitcoind && ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=1 -printtoconsole=0 || true\" \\\r\n--cleanup \"cp /mnt/my_storage/BitcoinData/debug.log /mnt/my_storage/logs/debug-{COMMIT}-$(date +%s).log || true\" \\\r\n\"COMPILER=$C_COMPILER COMMIT={COMMIT} ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=$STOP_HEIGHT -dbcache=$DBCACHE -prune=550 -printtoconsole=0\"\r\nBenchmark 1: COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33647.918 s ± 508.655 s    [User: 71503.409 s, System: 4404.899 s]\r\n  Range (min … max):   33283.439 s … 34229.026 s    3 runs\r\n \r\nBenchmark 2: COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n  Time (mean ± σ):     33062.491 s ± 183.335 s    [User: 71246.532 s, System: 4318.490 s]\r\n  Range (min … max):   32888.211 s … 33253.706 s    3 runs\r\n \r\nSummary\r\n  COMPILER=gcc COMMIT=1cd94ec2511874ec68b92db34ad7ec7d9534fed1 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0 ran\r\n    1.02 ± 0.02 times faster than COMPILER=gcc COMMIT=05314bde0b06b820225f10c6529b5afae128ff81 ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=880000 -dbcache=10000 -prune=550 -printtoconsole=0\r\n```\r\n\r\n</details>",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-02-14T16:48:23Z",
      "updated_at": "2026-01-18T05:42:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31868",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 6242,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2498563333,
      "number": 32420,
      "title": "miner: drop dummy extraNonce in coinbase scriptSig for templates requested via IPC",
      "body": "Our miner code adds `OP_0` as a dummy `extraNonce` to the coinbase `scriptSig`. This has been in place since v0.1.0 and removing it entirely would trigger the `bad-cb-length` consensus error on test networks for blocks 1 through 16 (`OP1` through `OP_16`).\r\n\r\nPreviously the coinbase transaction generated by our miner code was not used downstream, because the `getblocktemplate` RPC excludes it. Since the Mining IPC interface was introduced in #30200 we do expose this dummy coinbase transaction. In Stratum v2 several parts of it are communicated downstream, including the `scriptSig`.\r\n\r\nThis PR adds a `include_dummy_extranonce` option which is `false` by default, but for the time being all test code opts in to it. This avoids churning hardcoded block and transaction hashes.\r\n\r\nThe effect of having the default `false` for IPC callers is that we remove the dummy `extraNonce` from the coinbase `scriptSig` in block templates requested that way. This limits the `scriptSig` to what is essential for consensus (BIP34) and removes the need for external mining software to remove the dummy, or even ignore the `scriptSig` we provide and generate it some other way. This could cause problems if a future soft fork requires additional data to be committed here.\r\n\r\n`test/functional/interface_ipc.py` is expanded to verify the new IPC behavior.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-05-05T12:01:31Z",
      "updated_at": "2026-01-18T04:47:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32420",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1428,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2527184806,
      "number": 32554,
      "title": "bench: replace embedded raw block with configurable block generator",
      "body": "### Problem\r\n\r\nThe [hardcoded benchmark block 413567](https://mempool.space/block/413567) has several issues:\r\n- embeds 1.1MB of binary data in the repository\r\n- mined in 2016, predates SegWit v0, Taproot, and modern script types\r\n- benchmarks cannot test different transaction patterns or script mixes\r\n- updating to a newer block (e.g., [#32457](https://github.com/bitcoin/bitcoin/pull/32457)) would still add binary bloat and would remain inflexible\r\n\r\n### Fix\r\n\r\nAdded configurable `bench/block_generator.{h,cpp}` that builds fully valid blocks at runtime providing blocks or raw serialized stream.\r\n\r\nNote that `HexStrBench` was simplified to work with random data - it doesn't need to be block-related.\r\n\r\n---\r\n\r\nThis supersedes #32457 by eliminating the need for any hardcoded block data while enabling flexible benchmark scenarios.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-05-18T21:39:14Z",
      "updated_at": "2026-01-18T04:23:48Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32554",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 907,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2545149066,
      "number": 32621,
      "title": "contrib: utxo_to_sqlite.py: add option to store txid/spk as BLOBs",
      "body": "This PR is a late follow-up to https://github.com/bitcoin/bitcoin/pull/27432, introducing an option for the utxo-to-sqlite script to store the txid/scriptPubKey columns as bytes (= `BLOB` storage class in sqlite, see e.g. https://www.sqlite.org/datatype3.html in sqlite) rather than hex strings. This was proposed in earlier reviews (https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1516857024, https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1653739351) and has the obvious advantage of a significantly smaller size of the resulting database (and with that, faster conversion) and the avoidance of hex-to-bytes conversion for further processing of the data [1]. The rationale on why hex strings were chosen back then (and still stays the default, if only for compatibility reasons) is laid out in https://github.com/bitcoin/bitcoin/pull/27432#issuecomment-1516922824 [2].\r\n\r\nThe approach taken is introducing new parameters `--spk` and `--txid` which can either have the values \"hex\", \"raw\" (for scriptpubkey) and \"hex\", \"raw\", \"rawle\" (for txid). Thanks to ajtowns for providing this suggestion. Happy to take further inputs on naming and thoughts on future extensibility etc.\r\n\r\n[1] For a concrete example, I found that having these columns as bytes would be nice while working on a SwiftSync hints generator tool (https://github.com/theStack/swiftsync-hints-gen), which takes the result of the utxo-to-sqlite tool as input.\r\n[2] note that in contrast what I wrote back then, I think there is no ambiguity on byte-string-serialization of txids; they are ultimately just hash results and hence, they should be stored as such, and adding a big/little endian knob wouldn't make much sense. The drawback of not being able to immediately show txid-strings (as one would need to do the bytes-reversal step first, which is not possible in sqlite, see e.g. https://github.com/bitcoin/bitcoin/pull/24952#issuecomment-1165499803) still remains though.",
      "state": "open",
      "user": "theStack",
      "created_at": "2025-05-27T03:03:35Z",
      "updated_at": "2026-01-18T04:12:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32621",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2031,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2871349366,
      "number": 33500,
      "title": "p2p: implement sender-initiated package relay",
      "body": "[BIP 331](https://github.com/bitcoin/bips/blob/master/bip-0331.mediawiki) implements receiver-initiated package relay, where receivers can request missing information about packages. However, this requires excessive round trips. If the sender knows that it is giving the receiver a transaction for which it doesn't have the ancestors, it should be able to just send a package (containing the transaction and the unknown ancestor(s)) instead. \r\n\r\nThis PR could potentially reduce some bandwidth, and could also reduce the number of transactions in the orphanage. However, if a node is sending packages that the receiver already knows about, this could increase significant bandwidth. As a result, this PR needs more testing. I did some initial testing between two nodes with `sendpackages` enabled, and it showed that no redundant packages were sent, which indicates that this may be a useful feature. \r\n\r\nThis PR implements the following:\r\n- signaling support for `sendpackages` and the corresponding negotiation logic\r\n- a node will send a `pkgtxns` message to the receiver node if the ancestor of a transaction that has been requested is not in the receiver node's `m_tx_inventory_known_filter`\r\n- nodes can process `pkgtxns` messages\r\n- the maximum number of transactions that can be sent through sender-initialized package relay has been set to 2, although this can be changed in the future\r\n- adds logging, functional tests, and fuzzing (for `ReceivedPackage`)\r\n\r\nThank you to glozow for her help with this PR! ",
      "state": "open",
      "user": "ishaanam",
      "created_at": "2025-09-29T16:47:55Z",
      "updated_at": "2026-01-18T01:16:06Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33500",
      "labels": [
        "P2P",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1562,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2919092278,
      "number": 33637,
      "title": "refactor: optimize block index comparisons (1.4-6.8x faster)",
      "body": "### Context\r\nThe comparator is often called either directly or for the sorting of [setBlockIndexCandidates](https://github.com/bitcoin/bitcoin/blob/master/src/validation.h#L637), a red-black tree-set containing valid block headers where the comparator is invoked extensively.\r\nBesided the sorted set usages, the comparator is used directly in `Chainstate` in `FindMostWorkChain`, `PruneBlockIndexCandidates`, `ActivateBestChain` and `InvalidateBlock`; and in `ChainstateManager` in `LoadBlockIndex`, `CheckBlockIndex`, `ActivateSnapshot` and `PopulateAndValidateSnapshot`.\r\n\r\nIt was profiled during the investigation of https://github.com/bitcoin/bitcoin/issues/33618#issuecomment-3402229976. \r\n\r\n### Testing\r\nTo ensure the optimized implementations are both fast and correct, the first commit adds a dedicated benchmark to measure `CBlockIndexWorkComparator` performance, and the second commit adds randomized tests comparing the new implementation with the original one.\r\n\r\n### Results\r\n\r\n> GCC 15.0.1:\r\n\r\n* `CBlockIndexWorkComparator`: 100,772,511 cmp/s → 656,674,205 cmp/s = 6.51x faster\r\n* `CheckBlockIndex`: 9,091 ops/s → 14,765 ops/s = 1.62x faster\r\n\r\n> Clang 22.0.0:\r\n\r\n* `CBlockIndexWorkComparator`: 100,451,893 cmp/s → 683,414,234 cmp/s = 6.8x faster\r\n* `CheckBlockIndex`: 10,322 ops/s → 14,376 ops/s = 1.39x faster\r\n\r\nSee https://corecheck.dev/bitcoin/bitcoin/pulls/33637 for the CI's `CheckBlockIndex` performance.\r\n\r\n<details>\r\n<summary>gcc and clang measurements</summary>\r\n\r\n> Compiler: gcc 15.0.1\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.92 |      100,772,511.62 |    0.0% |           63.98 |           35.64 |  1.795 |          14.17 |    1.9% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          109,996.46 |            9,091.20 |    0.2% |    1,014,421.11 |      394,979.29 |  2.568 |     313,025.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.48 |      154,439,491.66 |    0.0% |           31.01 |           23.25 |  1.334 |           7.16 |    3.8% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|          105,754.86 |            9,455.83 |    0.1% |      913,130.11 |      379,588.20 |  2.406 |     276,692.11 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.37 |      156,990,488.06 |    0.0% |           28.85 |           22.87 |  1.261 |           8.61 |    3.2% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           83,803.10 |           11,932.73 |    0.0% |      743,565.09 |      300,824.84 |  2.472 |     232,646.08 |    0.0% |      5.56 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.52 |      656,674,205.98 |    0.0% |           13.18 |            5.47 |  2.410 |           3.06 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           67,726.84 |           14,765.19 |    0.2% |      585,826.07 |      243,155.90 |  2.409 |     181,920.07 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n> Compiler: clang 22.0.0\r\n\r\nb60450fae8 bench: add benchmark to measure `CBlockIndexWorkComparator` performance\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                9.96 |      100,451,893.46 |    0.0% |           61.28 |           35.75 |  1.714 |          13.62 |    2.1% |      5.52 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           96,878.70 |           10,322.19 |    0.1% |      802,827.10 |      347,679.01 |  2.309 |     234,823.10 |    0.0% |      5.50 | `CheckBlockIndex`\r\n\r\ne2e02177ba refactor: inline `arith_uint256` comparison operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.13 |      163,183,693.10 |    0.0% |           25.74 |           22.01 |  1.170 |           6.10 |    4.6% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           86,307.94 |           11,586.42 |    1.2% |      646,229.09 |      309,785.33 |  2.086 |     195,119.09 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\n85b74b01de refactor: optimize `arith_uint256` comparison with spaceship operator\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                6.36 |      157,330,900.16 |    1.0% |           26.20 |           22.61 |  1.159 |           6.55 |    4.4% |      5.53 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           75,031.66 |           13,327.71 |    1.0% |      650,604.15 |      266,934.04 |  2.437 |     149,967.14 |    0.0% |      5.54 | `CheckBlockIndex`\r\n\r\ndeb58eea2f refactor: optimize `CBlockIndexWorkComparator` with std::tie\r\n\r\n|              ns/cmp |               cmp/s |    err% |         ins/cmp |         cyc/cmp |    IPC |        bra/cmp |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|                1.46 |      683,414,234.14 |    0.0% |           16.12 |            5.25 |  3.067 |           4.02 |    0.1% |      5.50 | `CBlockIndexWorkComparator`\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|           69,559.70 |           14,376.14 |    0.1% |      559,208.07 |      249,654.28 |  2.240 |     132,342.07 |    0.0% |      5.51 | `CheckBlockIndex`\r\n\r\n</details>\r\n\r\n### Reproducer\r\n\r\nRun the equivalence tests with:\r\n```bash\r\ncmake -B build && cmake --build build && ./build/bin/test_bitcoin --run_test=arith_uint256_tests,blockchain_tests\r\n```\r\n\r\nEach commit shows how it changes the relevant benchmarks.\r\n\r\n<details>\r\n<summary>Benchmark script</summary>\r\n\r\n```bash\r\nfor compiler in gcc clang; do \\\r\n  if [ \"$compiler\" = \"gcc\" ]; then CC=gcc; CXX=g++; COMP_VER=$(gcc -dumpfullversion); \\\r\n  else CC=clang; CXX=clang++; COMP_VER=$(clang -dumpversion); fi && \\\r\n  echo \"> Compiler: $compiler $COMP_VER\" && \\\r\n  for commit in b60450fae83970daa9dc2da0706bf126a2f41515 e2e02177ba6f7fac34eda9696dad2e8ecd44e6cd 85b74b01de7e914d07630138eaa78f09a083b85b deb58eea2fdd2712a28aa6b81417087426b19f5b; do \\\r\n    git fetch origin $commit >/dev/null 2>&1 && git checkout $commit >/dev/null 2>&1 && git log -1 --pretty='%h %s' && \\\r\n    rm -rf build && \\\r\n    cmake -B build -DBUILD_BENCH=ON -DENABLE_IPC=OFF -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX >/dev/null 2>&1 && \\\r\n    cmake --build build -j$(nproc) >/dev/null 2>&1 && \\\r\n    for i in 1; do \\\r\n      build/bin/bench_bitcoin -filter='CBlockIndexWorkComparator|CheckBlockIndex' -min-time=5000; \\\r\n    done; \\\r\n  done; \\\r\ndone\r\n```\r\n\r\n</details>\r\n\r\nNote: something similar was already started in https://github.com/bitcoin/bitcoin/pull/33334, but this is a broader optimization that doesn't use the same technique: added as coauthor regardless.",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-10-16T01:54:31Z",
      "updated_at": "2026-01-18T00:58:58Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33637",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 11203,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2925353202,
      "number": 33645,
      "title": "refactor: optimize: avoid allocations in script & policy verification",
      "body": "Currently, some policy and script related methods are inefficiently allocating/reallocating containers where it is completely unnecessary. \r\n\r\nThis PR aims at optimizing policy verifications by reducing redundant heap allocations without losing performance even in worst case scenarios, effectively reducing the overall memory footprint.",
      "state": "open",
      "user": "Raimo33",
      "created_at": "2025-10-17T18:43:21Z",
      "updated_at": "2026-01-18T00:56:24Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33645",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078106843,
      "number": 34023,
      "title": "Optimized SFL cluster linearization",
      "body": "Follow-up to #32545, part of #30289.\r\n\r\nThis contains many of the optimizations that were originally part of #32545 itself.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-06T20:21:44Z",
      "updated_at": "2026-01-17T23:08:31Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34023",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 159,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3123216401,
      "number": 34138,
      "title": "Cluster mempool: more accurate cost model for SFL",
      "body": "Builds on top of #34023, part of #30289.\r\n\r\nThis introduces a more accurate cost model for SFL, to control how much CPU time is spent inside the algorithm for clusters that cannot be linearized perfectly within a reasonable amount of time.\r\n\r\nThe goal is having a metric for the amount of work performed, so that txmempool can impose limits on that work: a lower bound that is always performed (unless optimality is reached before that point, of course), and an upper bound to limit the latency and total CPU time spent on this. There are conflicting design goals here:\r\n* On the one hand, it seems ideal if this metric is closely correlated to actual CPU time, because otherwise the limits become inaccurate.\r\n* On the other hand, it seems a nightmare to have the metric be platform/system dependent, as it makes network-wide reasoning nearly impossible. It's expected that slower systems take longer to do the same thing; this holds for everything, and we don't need to compensate for this.\r\n\r\nThere are multiple solutions to this:\r\n* One extreme is just measuring the time. This is very accurate, but extremely platform dependent, and also non-deterministic due to random scheduling/cache effects.\r\n* The other extreme is using a very abstract metric like counting how many times certain loops/function inside the algorithm run. That is what is implemented as of #32545 and #34023, just counting the sum of the numbers of transactions updated across all `UpdateChunks()` calls. It however necessarily fails to account for significant portions of runtime spent elsewhere, resulting in a rather wide range of \"ns per cost\" values.\r\n* This PR takes a middle ground, counting many function calls / branches / loops, with weights that were determined through benchmarking on a reference system (Zen 4 based).\r\n\r\nThis is draft because:\r\n* The weights used are outdated, as several non-trivial improvements were made to #32545 and #34023 since.\r\n* I don't know if it is the right middle ground, and it seems good to have some conceptual discussion first:\r\n  * Using benchmarks on a reference system inherently captures some platform specifics, making it possible that the metric is not very accurate on other systems.\r\n  * A benchmark-based metric is nontrivial to maintain.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-22T14:57:53Z",
      "updated_at": "2026-01-17T21:56:44Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34138",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2320,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3022278484,
      "number": 33902,
      "title": "doc: Document compiler configuration for native depends packages",
      "body": "Fixes: #33859\r\n\r\nPreviously one had to read the Makefile (and various *.mk configuration\r\nfiles) to see how to correctly override CC and CXX when building native\r\ndepends packages.\r\n\r\nDetail this in README.md to make it clearer.",
      "state": "open",
      "user": "willcl-ark",
      "created_at": "2025-11-18T15:23:18Z",
      "updated_at": "2026-01-17T21:55:04Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33902",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 293,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3133196135,
      "number": 34164,
      "title": "validation: add reusable coins view for ConnectBlock",
      "body": "This is the first commit of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nAdd a `Reset()` method to `CCoinsViewCache` that clears `cacheCoins`, `cachedCoinsUsage`, and `hashBlock` without flushing to the `base` view. This allows efficiently reusing a cache instance across multiple blocks.\r\n\r\nIntroduce `CoinsViewCacheController` to wrap a `CCoinsViewCache` and provide scoped access through a `Handle`. The `Handle` dereferences to the cache and automatically calls `Reset()` on destruction. This RAII pattern ensures the cache is always properly reset between blocks.\r\n\r\nAdd `m_connect_block_controller` as a persistent controller for `ConnectBlock`, avoiding repeated memory allocations.",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:05:04Z",
      "updated_at": "2026-01-17T21:35:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34164",
      "labels": [
        "Validation"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 836,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3133212525,
      "number": 34165,
      "title": "coins: don't mutate main cache when connecting block",
      "body": "This is a slightly modified version of the second commit of #31132, which can be merged as an independent change. It has a small benefit on its own, but will help in moving the parent PR forward.\r\n\r\nWhen accessing coins via the `CCoinsViewCache`, the const methods like `GetCoin` actually mutate `cacheCoins` internally to cache entries when they are pulled from the backing db. This is generally a performance improvement for single threaded access patterns, but it precludes us from accessing entries in a `CCoinsViewCache` from multiple threads without a lock.\r\n\r\nAnother aspect is that when we add an ephemeral `CCoinsViewCache` view backed by the main cache for use in `ConnectBlock()`, we will insert entries into the main cache even if the block is determined to be invalid. This is not the biggest concern, since an invalid block requires proof-of-work. But, an attacker could craft multiple invalid blocks to fill the main cache. This would make us `Flush` the cache more often than necessary. Obviously this would be very expensive to do on mainnet.\r\n\r\nIntroduce `CoinsViewCacheNonMutating`, a `CCoinsViewCache` subclass that reads coins without mutating the underlying cache via `FetchCoin()`.\r\n\r\nAdd `PeekCoin()` to look up a Coin through a stack of `CCoinsViewCache` layers without populating parent caches. This prevents the main cache from caching inputs pulled from disk for a block that has not yet been fully validated. Once `Flush()` is called on the view, these inputs will be added as spent to `coinsCache` in the main cache via `BatchWrite()`.\r\n\r\nThis is the foundation for async input fetching, where worker threads must not mutate shared state.\r\n",
      "state": "open",
      "user": "andrewtoth",
      "created_at": "2025-12-28T20:32:34Z",
      "updated_at": "2026-01-17T21:32:26Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34165",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1723,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3169361001,
      "number": 34271,
      "title": "net_processing: make m_tx_for_private_broadcast optional",
      "body": "Make `PeerManagerImpl::m_tx_for_private_broadcast` optional because it is needed for in private broadcast mode (`-privatebroadcast=1`).\r\n\r\nA followup to #29415, requested in:\r\nhttps://github.com/bitcoin/bitcoin/pull/29415#discussion_r2620864832\r\nhttps://github.com/bitcoin/bitcoin/pull/29415/files#r2620864832",
      "state": "open",
      "user": "vasild",
      "created_at": "2026-01-13T11:32:27Z",
      "updated_at": "2026-01-17T20:17:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34271",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 366,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3184472862,
      "number": 34327,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "rami-mahdi647",
      "created_at": "2026-01-17T19:53:47Z",
      "updated_at": "2026-01-17T19:54:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34327",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3182788993,
      "number": 34324,
      "title": "Add utxo_to_csv.py tool",
      "body": "This adds a new conversion tool, heavily based on `utxo_to_sqlite.py`, to produce a CSV file for the UTXO set.\r\n\r\nI created this because I wanted something that produced a greppable UTXO set, and am upstreaming it as it may benefit others.\r\n\r\nUnlike the sqlite version, it also dumps addresses/descriptors for the outputs.",
      "state": "open",
      "user": "sipa",
      "created_at": "2026-01-16T21:37:36Z",
      "updated_at": "2026-01-17T19:02:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34324",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 346,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 991865101,
      "number": 25573,
      "title": "guix: produce a `-static-pie` bitcoind",
      "body": "Use Guix to produce a `-static-pie` bitcoind using GCC 14.3.0 and glibc 2.42. Using glibc for static builds, would be less of a leap compared to switching to musl libc (POC in #23203).\r\n\r\n[`-static-pie`](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)\r\n> Produce a static position independent executable on targets that support it.\r\nA static position independent executable is similar to a static executable,\r\nbut can be loaded at any address without a dynamic linker.\r\n\r\n```bash\r\n# file bitcoind\r\n\tELF 64-bit LSB pie executable, x86-64, version 1 (GNU/Linux), static-pie linked, for GNU/Linux 3.2.0, stripped\r\n\r\n# ldd bitcoind\r\n\tstatically linked\r\n```\r\n\r\n`x86_64-linux-gnu` size comparison:\r\nmaster (a7e80676104b5c90c5b5e3bfab815d55a9061052) `bitcoind` is `15.35` megabytes.\r\nThis PR (597b5296d3adc693001ce39626fe32b9545eb604) `bitcoind` is `17.45` megabytes.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2022-07-08T16:49:48Z",
      "updated_at": "2026-01-17T13:44:17Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/25573",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 905,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2208562627,
      "number": 31397,
      "title": "p2p: track and use all potential peers for orphan resolution",
      "body": "Part of #27463.\r\n\r\n(Transaction) **orphan resolution** is a process that kicks off when we are missing UTXOs to validate an unconfirmed transaction. We currently request missing parents by txid; BIP 331 also defines a way to [explicitly request ancestors](https://github.com/bitcoin/bips/blob/master/bip-0331.mediawiki#handle-orphans-better).\r\n\r\nCurrently, when we find that a transaction is an orphan, we only try to resolve it with the peer who provided the `tx`. If this doesn't work out (e.g. they send a `notfound` or don't respond), we do not try again. We actually can't, because we've already forgotten who else could resolve this orphan (i.e. all the other peers who announced the transaction).\r\n\r\nWhat is wrong with this? It makes transaction download less reliable, particularly for 1p1c packages which must go through orphan resolution in order to be downloaded.\r\n\r\nCan we fix this with BIP 331 / is this \"duct tape\" before the real solution?\r\nBIP 331 (receiver-initiated ancestor package relay) is also based on the idea that there is an orphan that needs resolution, but it's just a new way of communicating information. It's not inherently more honest; you can request ancestor package information and get a `notfound`. So ancestor package relay still requires some kind of procedure for retrying when an orphan resolution attempt fails. See the #27742 implementation which builds on this orphan resolution tracker to keep track of what packages to download (it just isn't rebased on this exact branch). The difference when using BIP 331 is that we request `ancpkginfo` and then `pkgtxns` instead of the parent txids.\r\n\r\nZooming out, we'd like orphan handling to be:\r\n- Bandwidth-efficient: don't have too many requests out at once. As already implemented today, transaction requests for orphan parents and regular download both go through the `TxRequestTracker` so that we don't have duplicate requests out.\r\n- Not vulnerable to censorship: don't give up too easily, use all candidate peers. See e.g. https://bitcoincore.org/en/2024/07/03/disclose_already_asked_for/\r\n- Load-balance between peers: don't overload peers; use all peers available. This is also useful for when we introduce per-peer orphan protection, since each peer will have limited slots.\r\n\r\nThe approach taken in this PR is to think of each peer who announces an orphan as a potential \"orphan resolution candidate.\" These candidates include:\r\n- the peer who sent us the orphan tx\r\n- any peers who announced the orphan prior to us downloading it\r\n- any peers who subsequently announce the orphan after we have started trying to resolve it\r\nFor each orphan resolution candidate, we treat them as having \"announced\" all of the missing parents to us at the time of receipt of this orphan transaction (or at the time they announced the tx if they do so after we've already started tracking it as an orphan). We add the missing parents as entries to `m_txrequest`, incorporating the logic of typical txrequest processing, which means we prefer outbounds, try not to have duplicate requests in flight, don't overload peers, etc.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2024-11-30T21:06:45Z",
      "updated_at": "2026-01-17T10:55:39Z",
      "merged_at": "2025-01-16T13:42:39Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31397",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 3166,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2259629686,
      "number": 31601,
      "title": "refactor: modernize recent `ByteType` usages and read/write functions",
      "body": "Follow-up to https://github.com/bitcoin/bitcoin/pull/31524, applying a few of the review suggestions to the affected code, while enabling more trivial reads/writes to use the new `std::byte` interface.",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-01-03T18:24:46Z",
      "updated_at": "2026-01-17T10:55:38Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31601",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 271,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2245377079,
      "number": 31543,
      "title": "cmake: Always provide `RPATH` on NetBSD",
      "body": "Apparently, runtime paths cannot be skipped on NetBSD, even for system-wide packages.\r\n\r\nOn NetBSD 10.0:\r\n- on the master branch @ bb57017b2945d5e0bbd95c7f1a9369a8ab7c6fcd:\r\n```\r\n$ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\"\r\n$ cmake --build build\r\n$ ./build/src/bitcoin-wallet -version\r\n./build/src/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found\r\n$ cmake --install build --prefix /home/hebasto/INSTALL\r\n$ /home/hebasto/INSTALL/bin/bitcoin-wallet -version \r\n/home/hebasto/INSTALL/bin/bitcoin-wallet: Shared object \"libsqlite3.so.0\" not found\r\n```\r\n- with this PR:\r\n```\r\n$ cmake -B build -DCMAKE_C_COMPILER=\"/usr/pkg/gcc14/bin/gcc\" -DCMAKE_CXX_COMPILER=\"/usr/pkg/gcc14/bin/g++\"\r\n$ cmake --build build\r\n$ ./build/src/bitcoin-wallet -version | head -1\r\nBitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845\r\n$ cmake --install build --prefix /home/hebasto/INSTALL\r\n$ /home/hebasto/INSTALL/bin/bitcoin-wallet -version | head -1\r\nBitcoin Core bitcoin-wallet utility version v28.99.0-11115e9aa845\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2024-12-19T19:37:24Z",
      "updated_at": "2026-01-17T10:55:38Z",
      "merged_at": "2025-01-17T14:11:38Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31543",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1118,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2268263664,
      "number": 31626,
      "title": "depends: Use base system's `sha256sum` utility on FreeBSD",
      "body": "On FreeBSD, the `shasum` utility is provided by the [`perl5`](https://ports.freebsd.org/cgi/ports.cgi?query=%5Eperl5&stype=all&sektion=all) port, which is not part of the base system and must be [installed](https://github.com/hebasto/bitcoin-core-nightly/blob/0e3518579a02e6c79bafc67817136220579a0d5c/.github/workflows/freebsd.yml#L104) separately. Note that this requirement is currently not documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/master/depends/README.md).\r\n\r\nThis PR switches to using the [`sha256sum`](https://man.freebsd.org/cgi/man.cgi?query=sha256sum&apropos=0&sektion=0&manpath=FreeBSD+14.2-RELEASE+and+Ports&arch=default&format=html) utility, which is included in the base system.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-01-09T12:22:40Z",
      "updated_at": "2026-01-17T10:55:37Z",
      "merged_at": "2025-01-17T14:02:09Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31626",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 784,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2267358513,
      "number": 31621,
      "title": "doc: Update dependency installation for Debian/Ubuntu",
      "body": "This is similar to the recently-pushed 8d20348 and results in slightly cleaner systems for future Debian/Ubuntu builds. \r\n\r\nAccording to the description for pkg-config, \"pkgconf is a replacement for pkg-config, providing additional functionality while also maintaining compatibility. This package only provides a dependency link to the pkgconf package to help with package upgrades. It can be safely removed.\"\r\n\r\nThus the relevant sections of `doc/build-unix.md` and `depends/README.md` are updated.",
      "state": "closed",
      "user": "adlai",
      "created_at": "2025-01-09T02:05:34Z",
      "updated_at": "2026-01-17T10:55:37Z",
      "merged_at": "2025-01-17T11:03:22Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31621",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 553,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2275403328,
      "number": 31651,
      "title": "ci: Turn CentOS task into native one",
      "body": "Cross-compiling to `i686-pc-linux-gnu` on CentOS in the CI is mostly redundant with the `ci/test/00_setup_env_i686_multiprocess.sh` task (albeit it using clang):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/35bf426e02210c1bbb04926f4ca2e0285fbfcd11/ci/test/00_setup_env_i686_multiprocess.sh#L9-L12\r\n\r\nOne task seems sufficient as a sanity check, given that there seems to be no real demand for this architecture anyway.\r\n\r\nTurning the task into a native one makes it possible to run the task natively on aarch64 or any other supported architecture.\r\n\r\nAlso, remove the install of the `lbzip2` package, which is unused since commit a46065e36cf868265c909dc5edf29dc17be53c1f\r\n\r\nAlso, remove the `CONFIG_SHELL` env var, which is unused since the cmake migration. (`CONFIG_SHELL` in depends is still kept).",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-13T22:55:45Z",
      "updated_at": "2026-01-17T10:55:36Z",
      "merged_at": "2025-01-17T11:42:54Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31651",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 835,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2277569883,
      "number": 31655,
      "title": "refactor: Avoid UB in SHA3_256::Write",
      "body": "It is UB to apply a distance to a pointer or iterator further than the\r\nend itself, even if the distance is (partially) revoked later on.\r\n\r\nFix the issue by advancing the data pointer at most to the end.\r\n\r\nThis fix is required to adopt C++ safe buffers https://github.com/bitcoin/bitcoin/issues/31272.\r\n\r\nAlso included is a somewhat unrelated commit.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-01-14T18:46:07Z",
      "updated_at": "2026-01-17T10:55:35Z",
      "merged_at": "2025-01-16T12:20:13Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31655",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 390,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1780312050,
      "number": 29678,
      "title": "Bugfix: Correct first-run free space checks",
      "body": "It's not clear what `m_assumed_*_size` are actually set based on, but historically it was in GB, not GiB, and that's still used in the GUI which is more user-facing.\r\n\r\nCould just as easily change the GUI if GiB is preferred.",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2024-03-19T16:36:10Z",
      "updated_at": "2026-01-17T10:28:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29678",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 269,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3183402461,
      "number": 34325,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "maximtea64",
      "created_at": "2026-01-17T06:06:31Z",
      "updated_at": "2026-01-17T06:07:02Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34325",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2426922942,
      "number": 32162,
      "title": "depends: Switch from multilib to platform-specific toolchains",
      "body": "Using the multilib GCC toolchain, as currently documented in [`depends/README.md`](https://github.com/bitcoin/bitcoin/blob/4c1906a500cacab385b09e780b54271b0addaf4b/depends/README.md), has several issues, such as:\r\n\r\n1. The [`g++-multilib`](https://packages.ubuntu.com/noble/g++-multilib) package conflicts with platform-specific cross-compiler packages. This means it is not possible to cross compile for `i686` and other platforms using the same set of installed packages.\r\n\r\n2. The [`g++-multilib`](https://packages.ubuntu.com/noble/g++-multilib) package is not available for `arm64`:\r\n```sh\r\n$ sudo apt install g++-multilib\r\nReading package lists... Done\r\nBuilding dependency tree... Done\r\nReading state information... Done\r\nE: Unable to locate package g++-multilib\r\n```\r\n\r\n3. Managing the multilib GCC toolchain requires additional code in both depends and Guix scripts.\r\n\r\nThis PR addresses all the issues mentioned above by switching from multilib to platform-specific toolchains.\r\n\r\nAlso see https://github.com/bitcoin/bitcoin/pull/22456.\r\n\r\n---\r\n\r\nHere are examples of building for different scenarions:\r\n\r\n- Linux, `x86_64` or `arm64`, building with depends natively:\r\n```sh\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build --toolchain depends/$(./depends/config.sub $(./depends/config.guess))/toolchain.cmake\r\n$ cmake --build build -j $(nproc)\r\n```\r\n\r\n- Linux, `x86_64` or `arm64`, cross compiling for `i686-pc-linux-gnu`:\r\n```sh\r\n$ sudo apt install g++-i686-linux-gnu binutils-i686-linux-gnu\r\n$ export HOST=i686-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n\r\n- Linux, `x86_64`, cross compiling for `arm64`:\r\n```sh\r\n$ sudo apt install g++-aarch64-linux-gnu binutils-aarch64-linux-gnu\r\n$ export HOST=aarch64-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n\r\n- Linux, `arm64`, cross compiling for `x86_64`:\r\n```sh\r\n$ sudo apt install g++-x86-64-linux-gnu binutils-x86-64-linux-gnu\r\n$ export HOST=x86_64-linux-gnu\r\n$ gmake -C depends -j $(nproc)\r\n$ cmake -B build-${HOST} --toolchain depends/${HOST}/toolchain.cmake\r\n$ cmake --build build-${HOST} -j $(nproc)\r\n```\r\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-03-29T13:34:59Z",
      "updated_at": "2026-01-17T03:35:16Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32162",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2364,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2511642895,
      "number": 32468,
      "title": "rpc: generateblock to allow multiple outputs",
      "body": "## Generatetomany\r\n\r\nFirst approach was to create a `generatetomany` rpc call. That approach can be seen here https://github.com/polespinasa/bitcoin/pull/3\r\n\r\n## Generateblock\r\nModifies `generateblock` to allow a user to set multiple outputs in the coinbase transaction. If an empty set is provided, the block will be empty. If no set of transactions is provided, the block will mine the mempool. If a set of transactions is provided only that set of txs will be mined.\r\n\r\n```\r\n$./bitcoin-cli -rpcport=18443 generateblock bcrt1qw6qkj8wtw5hraxwxjp08m4aymkntms3yhqyacj\r\n{\r\n  \"hash\": \"7359a3ed7af0f18f4016e6cb29193bd787a2452c584781135c585d5204b9ec5b\"\r\n}\r\n\r\n$ ./bitcoin-cli -rpcport=18443 generateblock '[\"bcrt1qal6p633hvwz2yp5mav0qy7u2az8gkn2xywnj6v\", \"bcrt1qvr3qgyhw6y0e0zj97v0j5yc40xtpea4wqj0g43\"]'\r\n{\r\n  \"hash\": \"6db028454b26d6667dd6df45be2772844121fb44f86433f6bbfbafa429974684\"\r\n}\r\n\r\n$ ./bitcoin-cli -rpcport=18443 generateblock '[\"bcrt1qal6p633hvwz2yp5mav0qy7u2az8gkn2xywnj6v\", \"bcrt1qvr3qgyhw6y0e0zj97v0j5yc40xtpea4wqj0g43\"]' []\r\n\r\n{\r\n  \"hash\": \"33e2ddc52546ddb0edf28bef5b295ee8fbd487b8aca19c97018467e2477877df\"\r\n}\r\n\r\n```\r\n\r\n### Motivation\r\nhttps://x.com/SuperTestnet/status/1921220086645342550\r\n\r\nCitating @supertestnet \r\n> When mining a block on regtest, the command \"generatetoaddress\" is available if you want to send the entire coinbase to 1 address. Let's add generatetomany in case you want to split up the coinbase among multiple addresses, similar to how the \"sendtoaddress\" and \"sendmany\" commands both exist and let you send money to (1) one address or (2) multiple addresses. The generatetomany command would be particularly useful for simulating protocols that send money to multiple recipients directly from a coinbase, as several pools do now, like ocean and braidpool.\r\n\r\n### Notes\r\n- ~Needs release note~\r\n- ~Changes on `generateblock` are not backwards compatible as now it takes an array of outputs instead a single output. This should not be critical as it is a test RPC.~ ",
      "state": "open",
      "user": "polespinasa",
      "created_at": "2025-05-10T17:34:29Z",
      "updated_at": "2026-01-17T01:18:21Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32468",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2041,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3182778687,
      "number": 34323,
      "title": "test: Add comprehensive tests for GetNewChangeDestination",
      "body": "Add comprehensive tests for GetNewChangeDestination\r\n\r\nMotivation\r\n\r\nThis PR adds test coverage for `CWallet::GetNewChangeDestination()`, which currently lacks dedicated unit tests despite being called during every transaction creation.\r\n\r\n**Test improvements:**\r\n- Adds comprehensive coverage for a previously untested function\r\n- Tests all 4 Bitcoin address output types (BECH32, LEGACY, P2SH_SEGWIT, BECH32M)\r\n- Verifies privacy-critical behavior for (address uniqueness, keypool separation)",
      "state": "closed",
      "user": "b-l-u-e",
      "created_at": "2026-01-16T21:34:12Z",
      "updated_at": "2026-01-16T23:00:25Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34323",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 2,
        "text_length": 552,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2598874149,
      "number": 32764,
      "title": "guix: Build for macOS using Clang only",
      "body": "This PR makes macOS builds Clang-only by switching the build compiler in depends to `clang` + `libc++`.\r\n\r\nSee: https://github.com/bitcoin/bitcoin/issues/30206.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-06-17T13:39:41Z",
      "updated_at": "2026-01-16T22:07:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32764",
      "labels": [
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 199,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3156512426,
      "number": 34233,
      "title": "test: fix Windows CI failures in wallet_multiwallet and old binary tests (ancient wallets)",
      "body": "Currently, the `wallet_multiwallet.py` and `feature_unsupported_utxo_db.py` functional tests are disabled on CI because they rely on legacy wallet binaries that do not correctly handle Unicode paths. \r\n\r\nThis is tracked as a `TODO` in `.github/workflows/ci.yml`. The limitation also blocks efforts to expand ancient wallet test coverage (e.g. bitcoin/bitcoin#33186).\r\n\r\nThis PR restores functional test coverage on Windows CI by addressing two root causes:\r\n\r\n1. **Skip Windows-incompatible tests in `wallet_multiwallet`**: Several test cases depend on Unix-specific filesystem behavior that is not supported on Windows:\r\n     - Directory permission tests using chmod (Windows ignores `os.chmod(path, 0)`)\r\n     - Recursive directory symlink tests (unsupported by listwalletdir)\r\n     - File symlink detection tests (Windows handles file symlinks differently)\r\n\r\n  2. **Use ASCII-only tmpdir for old binary tests**: When running tests against previous releases (`feature_unsupported_utxo_db`, `wallet_multiwallet`) on Windows, an ASCII-only temporary directory name (`test_runner_btc_run_`) is used instead of `test_runner_₿_🏃_`. This avoids failures caused by older binaries lacking proper Unicode path support.",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2026-01-08T15:17:11Z",
      "updated_at": "2026-01-16T19:35:13Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34233",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1303,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3134270217,
      "number": 34170,
      "title": "fuzz: Extend `scriptpubkeyman` coverage",
      "body": "Add fuzzing coverage for several missing `DescriptorScriptPubKeyMan` methods.",
      "state": "open",
      "user": "Chand-ra",
      "created_at": "2025-12-29T12:04:50Z",
      "updated_at": "2026-01-16T18:20:41Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34170",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 117,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2410059028,
      "number": 32116,
      "title": "contrib: refactor: dedup deserialization routines in utxo-to-sqlite script",
      "body": "The compact-size/varint/amount deserialization routines already exist in the functional test framework (with the advantage of having proper unit tests executed in CI), so we can just import them from there instead of leaving duplicated code in the repository.",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-03-21T17:10:17Z",
      "updated_at": "2026-01-16T17:15:37Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32116",
      "labels": [
        "Scripts and tools"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 334,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3170621319,
      "number": 34276,
      "title": "Remove empty caption from user interface (noui, gui)",
      "body": "Currently, the user interface (noui, gui) has a caption for each message. However, the caption has many issues:\r\n\r\n* It is always hard-coded to the empty string.\r\n* This is confusing and tedious when reading or maintaining the code.\r\n* It is redundant, because `noui` will ignore the caption and set the logging prefix (error, warning, info) based on the `style`.\r\n* The gui does prefer to set the title based on the caption, but since it the caption is always empty, the fallback will always be used.\r\n\r\nFix all issues by removing it.",
      "state": "open",
      "user": "maflcko",
      "created_at": "2026-01-13T17:34:40Z",
      "updated_at": "2026-01-16T17:04:32Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34276",
      "labels": [
        "Utils/log/libs",
        "interfaces"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 588,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3154286083,
      "number": 34225,
      "title": "refactor, key: move `CreateMuSig2{Nonce,PartialSig}` functions to `musig.{h,cpp}` module",
      "body": "This PR is a follow-up of #29675, see https://github.com/bitcoin/bitcoin/pull/29675#discussion_r2265077463. It moves all MuSig2 functions that currently live in `CKey` and call secp256k1 musig module API functions (i.e. `secp256k1_musig_...`) to the `musig.{h,cpp}` module, as this seems to be a better place. One small drawback of doing this is that the `secp256k1_context_signing` object needs to be accessed from the outside; this is currently solved by changing the linkage from `static` to `extern` to expose the symbol globally [1]. Happy to add an access function if that is preferred instead. \r\n\r\nAs the patch is mostly move-only, it can be best reviewed via the git option `--color-moved=dimmed-zebra`\r\n\r\n[1] note that the same approach is used in the Silent Payments sending PR #28201, though having a TODO comment added, see https://github.com/bitcoin/bitcoin/pull/28201/commits/a4ebd7da5aaaa567fa9c613666513341f2aea241#diff-e5cbd40011e760f175b82d7ec44ad512bdb3d9108068b660642204da9c9187b1R25",
      "state": "open",
      "user": "theStack",
      "created_at": "2026-01-07T23:45:38Z",
      "updated_at": "2026-01-16T17:02:56Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34225",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1092,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3095820892,
      "number": 34054,
      "title": "net processing: Add ibd check before processing block for txdownloadman",
      "body": "Calculating the rolling bloom filters for the txorphanage takes some CPU time from the scheduler thread. This can be observed for example in [this flamegraph](https://bitcoin-dev-tools.github.io/benchcoin/results/pr-172/20066462508/mainnet-default-instrumented-base-flamegraph.svg?x=920203898521&y=780), where handling the filter takes about 2.6% of total time (and most of the scheduler thread's time). \r\n\r\nDuring ibd the entries in the tx download bloom filter are just continuously rolled over and aren't consumed, since no mempool entries are created by incoming transactions from peers during ibd. The mempool does accept transactions via RPC, or the wallet at the time, however these don't interact with the orphanage and the txdownloadman, because adding anything to those is guarded by IsInitialBlockDownload() checks as well.\r\n\r\nWe're usually latching ibd to false a few blocks before catching up to the tip, so this should also not significantly degrade the performance of the filter once fully caught up.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-12-12T09:06:28Z",
      "updated_at": "2026-01-16T15:00:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34054",
      "labels": [
        "P2P"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1087,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2640910930,
      "number": 32875,
      "title": "index: handle case where pindex_prev equals chain tip in NextSyncBlock()",
      "body": "When pindex_prev is the chain tip, return early rather than mixing it\r\nwith the reorg case.\r\n",
      "state": "open",
      "user": "HowHsu",
      "created_at": "2025-07-04T10:03:17Z",
      "updated_at": "2026-01-16T14:10:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/32875",
      "labels": [
        "UTXO Db and Indexes"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 166,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3163940035,
      "number": 34256,
      "title": "test: support `get_bind_addrs` and `feature_bind_extra` on macOS",
      "body": "### Problem\r\n\r\nSome functional tests are shown as skipped when running on macOS because `test_framework/netutil.py` only implemented the Linux-specific logic for checking which TCP sockets a node is listening on.\r\n\r\n### Fix\r\n\r\nAdd macOS implementations in `test/functional/test_framework/netutil.py` so tests can query:\r\n\r\n* which TCP sockets a node is listening on (`get_bind_addrs()`, via `lsof`)\r\n* a non-loopback interface address (`all_interfaces()`, via `ifconfig`)\r\n\r\nThen enable the previously Linux-only tests by switching to a shared platform guard.\r\n\r\n### Commands\r\n<details>\r\n<summary><code>get_bind_addrs()</code> (<code>lsof</code> + regex)</summary>\r\n\r\n> Command used\r\n```bash\r\nlsof -nP -a -p <pid> -iTCP -sTCP:LISTEN -Ftn\r\n```\r\n\r\n> Flags\r\n\r\n- -n: no hostname resolution\r\n- -P: no service/port-name resolution\r\n- -a: AND all conditions\r\n- -p <pid>: filter by process ID\r\n- -iTCP: TCP sockets only\r\n- -sTCP:LISTEN: listening sockets only\r\n- -Ftn: machine-readable output (fields: type t, name n)\r\n\r\n> Regex parser\r\n\r\n```regex\r\nt(IPv[46])\\nn(\\*|\\[.+?]|[^:]+):(\\d+)\r\n```\r\n> Captured groups\r\n\r\n- group 1: IPv4 / IPv6 (used to disambiguate *)\r\n- group 2: host (*, [::1], 127.0.0.1, …)\r\n- group 3: port\r\n</details>\r\n\r\n<details>\r\n<summary><code>all_interfaces()</code> (<code>ifconfig</code> + regex)</summary>\r\n\r\n> Command used\r\n\r\n```bash\r\nifconfig -au\r\n```\r\n\r\n> Regex parsing\r\n\r\nInterface blocks:\r\n```regex\r\n(?m)^(?P<iface>\\S+):(?P<block>[^\\n]*(?:\\n[ \\t]+[^\\n]*)*)\r\n```\r\n\r\nIPv4 extraction within each block:\r\n```regex\r\ninet (\\S+)\r\n```\r\n</details>\r\n\r\n### Notes\r\n\r\nThe only remaining platform skips on macOS are the USDT/BPF tracing tests (interface_usdt_*.py).\r\n\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-11T21:42:11Z",
      "updated_at": "2026-01-16T12:24:46Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34256",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1738,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3174426479,
      "number": 34288,
      "title": "fuzz: Exclude too expensive inputs in miniscript_string target",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/30498\r\n\r\nAccepting \"expensive\" fuzz inputs which have no real use-case is problematic, because it prevents the fuzz engine from spending time on the next useful fuzz input.\r\n\r\nFor example this one will take several seconds (the flamegraph shows the time is spent in minscipt `NoDupCheck`):\r\n\r\n```\r\ncurl -fLO 'https://raw.githubusercontent.com/bitcoin-core/qa-assets/eac1c57614d7823bcd6079814749f72018aea438/fuzz_corpora/miniscript_string/41bae50cffd1741150a1b330d02ab09f46ff8cd1'\r\nFUZZ=miniscript_string /usr/bin/time   ./bld-cmake/bin/fuzz  ./41bae50cffd1741150a1b330d02ab09f46ff8cd1\r\n```\r\n\r\nInspecting the inputs shows that it has many sub frags, so rejecting based on `HasTooManySubFrag` should be sufficient.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-14T17:49:39Z",
      "updated_at": "2026-01-16T12:01:58Z",
      "merged_at": "2026-01-15T13:55:33Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34288",
      "labels": [
        "Fuzzing"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 823,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2902093523,
      "number": 33593,
      "title": "guix: Use UCRT runtime for Windows release binaries",
      "body": "This PR:\r\n1. Switches Windows release binaries to UCRT.\r\n2. Update docs.\r\n3. Drops MSVCRT workarounds.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/30210.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-10-09T21:46:43Z",
      "updated_at": "2026-01-16T11:55:27Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33593",
      "labels": [
        "Windows",
        "Build system"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 213,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3161187473,
      "number": 34245,
      "title": "verify-commits: temporarily allow sha1 signatures for merge commits",
      "body": "This is to unbreak CI after a merge commit (aeaa67a9eac0decb89c60a67f9755ca10cbcc1d9) with a signature indirectly involving SHA1 was pushed to master.",
      "state": "closed",
      "user": "darosior",
      "created_at": "2026-01-09T23:37:35Z",
      "updated_at": "2026-01-16T11:51:34Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34245",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 218,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 705964116,
      "number": 22663,
      "title": "dbwrapper: properly destroy objects in case CDBWrapper ctor throws",
      "body": "There are two main changes: introduce LevelDbOptions to manage the leveldb::Options struct and changing CDBWrapper's penv member to a unique_ptr. The first allows LevelDbOptions to destroy leveldb::Options members without CDBWrapper having to directly. The second change allows the leveldb::Env to be managed by penv. Both of these changes prevent a LeakSanitizer exception if the CDBWrapper ctor throws.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/22592\r\n",
      "state": "closed",
      "user": "Crypt-iQ",
      "created_at": "2021-08-08T00:42:24Z",
      "updated_at": "2026-01-16T11:42:42Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/22663",
      "labels": [
        "UTXO Db and Indexes",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 530,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2081209565,
      "number": 30928,
      "title": "tinyformat: refactor: increase compile-time checks and don't throw for tfm::format_error",
      "body": "Avoid unexpected run-time crashes from string formatting by enforcing compile-time format string checks for most* `tfm::format` and `strprintf` usage, and by returning an error string instead of throwing for a run-time tfm::format_error so callsites don't need to implement this error handling.\r\n\r\nThis PR should introduce no behaviour change.\r\nThe main changes are:\r\n- remove the `const std::string&` `tfm::format` overload since it's not necessary. Usage of this overload is removed by one of:\r\n  - replacing string concatenation in the format string with just an extra parameter\r\n  - using the `bilingual_str` overload\r\n  - using the `tfm::format_raw` functions (only for tinyformat implementation or tests)\r\n- rename the non-compile-time-validated `tfm::format` overloads to `tfm::format_raw`, so existing callsites by default use the safer `util::ConstevalFormatString` `tfm::format` overloads. Callsites that for some reason don't pass the compile-time checks (such as in `bitcoin-cli.cpp`) can use `tfm::format_raw`.\r\n- make `tfm::format_error` internal to `tinyformat` and just return error strings instead, so callsites don't need to implement error handling to prevent crashing. \r\n\r\n*The `bilingual_str format(const bilingual_str& fmt, const Args&... args)` is not yet compile-time checked, which means the `lint-format-strings.py` test can't be removed yet.\r\n\r\n Follow-up on https://github.com/bitcoin/bitcoin/pull/30889#discussion_r1766633746, an alternative to #15926.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2024-09-19T14:45:20Z",
      "updated_at": "2026-01-16T10:55:07Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/30928",
      "labels": [
        "Utils/log/libs",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1570,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2115066966,
      "number": 31061,
      "title": "refactor: Check translatable format strings at compile-time",
      "body": "All translatable format strings are fixed. This change surfaces errors in them at compile-time.\r\n\r\nThe implementation achieves this by allowing to delay the translation (or `std::string` construction) that previously happened in `_()` by returning a new type from this function. The new type can be converted to `bilingual_str` where needed.\r\n\r\nThis can be tested by adding a format string error in an original string literal and observing a new compile-time failure.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/30530",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-10-09T11:35:14Z",
      "updated_at": "2026-01-16T10:55:06Z",
      "merged_at": "2025-01-15T15:47:19Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31061",
      "labels": [
        "Refactoring"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 584,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2167882014,
      "number": 31242,
      "title": "wallet, desc spkm: Return SigningProvider only if we have the privkey",
      "body": "If we know about a pubkey that's in our descriptor, but we don't have the private key, don't return a SigningProvider for that pubkey.\r\n\r\nThis is specifically an issue for Taproot outputs that use the H point as the resulting PSBTs may end up containing irrelevant information because the H point was detected as a pubkey each unrelated descriptor knew about.\r\n\r\nSplit from #29675",
      "state": "closed",
      "user": "achow101",
      "created_at": "2024-11-07T16:52:10Z",
      "updated_at": "2026-01-16T10:55:05Z",
      "merged_at": "2025-01-16T17:31:18Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31242",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 450,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2273355015,
      "number": 31646,
      "title": "test: avoid internet traffic",
      "body": "Avoid generating outbound traffic on a non-loopback interface during tests. Fix all tests, including ones that generate DNS traffic.\r\n\r\n---\r\n\r\nThis is a subset of https://github.com/bitcoin/bitcoin/pull/31349 containing only the changes to the tests, without the CI changes to detect future regressions.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-01-13T09:24:28Z",
      "updated_at": "2026-01-16T10:55:04Z",
      "merged_at": "2025-01-14T21:02:01Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31646",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 332,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2282170133,
      "number": 31673,
      "title": "doc: fix minor typos in comments",
      "body": "In the unrelated PR #31621 the linter reported a few typos, that are fixed in this commit. I used the \"doc\" prefix as it only modifies comments, so none of the more significant prefixes seem appropriate.",
      "state": "closed",
      "user": "adlai",
      "created_at": "2025-01-16T15:39:20Z",
      "updated_at": "2026-01-16T10:55:03Z",
      "merged_at": "2025-01-16T16:21:20Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/31673",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 236,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3173535621,
      "number": 34282,
      "title": "qa: Fix Windows logging bug",
      "body": "The regex `(.*)` was capturing `\\r` from subprocess output on Windows, causing the closing parenthesis in logs to wrap to the next line.\r\n\r\nFor [example](https://github.com/hebasto/bitcoin/actions/runs/20993438084/job/60350204808):\r\n```\r\n208/454 - feature_bip68_sequence.py passed, Duration: 10 s\r\n209/454 - rpc_bind.py --ipv4 skipped (not on a Linux system\r\n)\r\n210/454 - rpc_bind.py --ipv6 skipped (not on a Linux system\r\n)\r\n211/454 - rpc_packages.py passed, Duration: 8 s\r\n212/454 - rpc_bind.py --nonloopback skipped (not on a Linux system\r\n)\r\n213/454 - p2p_feefilter.py passed, Duration: 4 s\r\n```\r\n\r\nStripping whitespace from the regex match fixes the formatting. [See](https://github.com/hebasto/bitcoin/actions/runs/20993564177/job/60350024373):\r\n```\r\n208/454 - feature_bip68_sequence.py passed, Duration: 9 s\r\n209/454 - rpc_bind.py --ipv4 skipped (not on a Linux system)\r\n210/454 - rpc_bind.py --ipv6 skipped (not on a Linux system)\r\n211/454 - rpc_bind.py --nonloopback skipped (not on a Linux system)\r\n212/454 - rpc_packages.py passed, Duration: 7 s\r\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-14T13:29:56Z",
      "updated_at": "2026-01-16T09:31:19Z",
      "merged_at": "2026-01-15T15:12:12Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34282",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1089,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3178421415,
      "number": 34313,
      "title": "Update bitcoin_de.ts",
      "body": "Fixes #34312\r\n\r\n\"Bitte mit der neueste Softwareversion auszuführen.\" is wrong in two senses, it has to be \"neuesten\" and \"ausführen\", I'm from Germany.",
      "state": "closed",
      "user": "benediktjohannes",
      "created_at": "2026-01-15T19:03:59Z",
      "updated_at": "2026-01-16T09:30:19Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34313",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 172,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3178153988,
      "number": 34311,
      "title": "test: add unit tests for wallet interface getter basic method",
      "body": "This PR adds a unit test for basic wallet interface getter methods in `src/wallet/interfaces.cpp`  test verifies that `WalletImpl` correctly returns wallet properties and configuration values.\r\n\r\nAdded test case `wallet_interface_getters_basic` in `src/wallet/test/wallet_tests.cpp` that tests the following methods:\r\n\r\n1. **`getWalletName()`** \r\n2. **`isCrypted()`** \r\n3. **`isLocked()`**\r\n4. **`getDefaultAddressType()`**\r\n5. **`getDefaultMaxTxFee()`** \r\n6. **`getConfirmTarget()`**\r\n\r\ngetter methods are  untested. regressions in these methods could go undetected. The test catches the following types of bugs:\r\n\r\n```\r\n./bin/test_bitcoin --run_test=wallet_tests/wallet_interface_getters_basic\r\nRunning 1 test case...\r\n./wallet/test/wallet_tests.cpp(745): error: in \"wallet_tests/wallet_interface_getters_basic\": check wallet_name == \"test_wallet\" has failed [default != test_wallet]\r\n./wallet/test/wallet_tests.cpp(747): error: in \"wallet_tests/wallet_interface_getters_basic\": check wallet_interface->isCrypted() == false has failed [true != false]\r\n./wallet/test/wallet_tests.cpp(749): error: in \"wallet_tests/wallet_interface_getters_basic\": check wallet_interface->isLocked() == false has failed [true != false]\r\n./wallet/test/wallet_tests.cpp(752): error: in \"wallet_tests/wallet_interface_getters_basic\": check default_type == OutputType::BECH32 || default_type == OutputType::LEGACY || default_type == OutputType::P2SH_SEGWIT || default_type == OutputType::BECH32M has failed\r\n./wallet/test/wallet_tests.cpp(756): error: in \"wallet_tests/wallet_interface_getters_basic\": check max_fee > 0 has failed\r\n./wallet/test/wallet_tests.cpp(759): error: in \"wallet_tests/wallet_interface_getters_basic\": check confirm_target > 0 has failed\r\n\r\n*** 6 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n```\r\n",
      "state": "open",
      "user": "b-l-u-e",
      "created_at": "2026-01-15T17:30:22Z",
      "updated_at": "2026-01-16T08:22:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34311",
      "labels": [
        "Tests"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 1885,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3180205533,
      "number": 34315,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "maximtea64",
      "created_at": "2026-01-16T07:40:13Z",
      "updated_at": "2026-01-16T07:40:43Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34315",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3034182041,
      "number": 33922,
      "title": "mining: add getMemoryLoad() and track template non-mempool memory footprint",
      "body": "Implements a way to track the memory footprint of all non-mempool transactions that are still being referenced by block templates, see discussion in  #33899. It does not impose a limit.\r\n\r\nIPC clients can query this footprint (total, across all clients) using the `getMemoryLoad()` IPC method. Its client-side usage is demonstrated here:\r\n- https://github.com/stratum-mining/sv2-tp/pull/63\r\n\r\nAdditionally, the functional test in `interface_ipc.py` is expanded to demonstrate how template memory management works: templates are not released until the client drops references to them, or calls the template destroy method, or disconnects. The destroy method is called automatically by clients using [libmultiprocess](https://github.com/bitcoin-core/libmultiprocess), as [sv2-tp](https://github.com/stratum-mining/sv2-tp) does. In the Python tests it also happens when references are destroyed or go out of scope.\r\n\r\nThe PR starts with preparation refactor commits:\r\n\r\n1. Tweaks `interface_ipc.py` so `destroy()` calls happen in an order that's useful to later demonstrate memory management\r\n2. Change `std::unique_ptr<BlockTemplate> block_template` from a `static` defined in `rpc/mining.cpp` to `NodeContext`. This prevents a crash when we switch to a non-trivial destructor later (which uses `m_node`).\r\n\r\nThen the main commits:\r\n\r\n3. Add `template_tx_refs` to `NodeContext` to track how many templates contain any given transaction. This map is updated by the `BlockTemplate` constructor and destructor.\r\n4. Add `GetTemplateMemoryUsage()` which loops over this map and sums up the memory footprint for transactions outside the mempool\r\n5. Expose this information to IPC clients via `getMemoryLoad()` and add test coverage\r\n",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-21T15:34:14Z",
      "updated_at": "2026-01-16T06:50:35Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33922",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1801,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3039837291,
      "number": 33936,
      "title": "mining: pass missing context to createNewBlock() and checkBlock()",
      "body": "Adding a `context` parameter ensures that these methods are run in their own thread and don't block other calls.\r\n\r\nFor `createNewBlock()` this is not expected to have much impact, because block template creation is fast.\r\n\r\nFor `checkBlock()` this ensures that if we receive a slow to validate block from an untrusted origin (the IPC connection itself is assumed to trusted), it will not block the IPC server. But since validation itself blocks `cs_main` this is also not a huge performance win.\r\n\r\nThis is a breaking change both ways:\r\n- clients must use the updated capnp file\r\n- updated clients can't call these methods on an unupgraded node\r\n\r\n---\r\n\r\nBecause it's a breaking change, but not really important, this PR is marked pending some other more important breaking change. See #33777.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-11-24T12:36:43Z",
      "updated_at": "2026-01-16T06:24:59Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33936",
      "labels": [
        "Mining"
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 860,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3059986313,
      "number": 33986,
      "title": "doc: improvements to doc/descriptors.md",
      "body": "This brings doc/descriptors.md up to date:\r\n* Stop trying to exhaustively list all RPCs that involve descriptors. They're used everywhere.\r\n* Stop trying to give the history of descriptor support, we have release notes for that.\r\n* Mention that wallets are now built around descriptors (especially with legacy wallets gone).\r\n* Mention `musig()` KEY expressions in the specification part.\r\n* Reference the relevant output descriptor BIPs in the text.",
      "state": "open",
      "user": "sipa",
      "created_at": "2025-12-01T16:25:09Z",
      "updated_at": "2026-01-16T05:04:33Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33986",
      "labels": [
        "Docs"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 490,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3167553868,
      "number": 34268,
      "title": "[29.x] backports + final changes for 29.3",
      "body": "Backports:\r\n\r\n- #34227 \r\n- #33723 \r\n- #33475 \r\n- #33268 \r\n\r\nAnd final changes for 29.3rc1",
      "state": "closed",
      "user": "glozow",
      "created_at": "2026-01-12T22:47:22Z",
      "updated_at": "2026-01-16T03:14:31Z",
      "merged_at": "2026-01-15T10:23:14Z",
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/34268",
      "labels": [
        "Backport"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 131,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2806431312,
      "number": 33335,
      "title": "txgraph: randomize order of same-feerate distinct-cluster transactions",
      "body": "Part of #30289.\r\n\r\nBefore, the implicit ordering of transactions in a TxGraph's main graph is sorted by:\r\n- feerate, high to low\r\n- `Cluster`, low to high `m_sequence`\r\n- linearization order within clusters\r\n\r\nHowever, since `m_sequence` values are assigned deterministically and predictably, the ordering of same-feerate distinct-Cluster transactions can reveal something about the order they were inserted into `TxGraph`.\r\n\r\nIn #28676, this ordering (through `TxGraph::CompareMainOrder`) is used to decide the order of to-be-announced transactions. These should not expose information about insertion order.\r\n\r\nTo deal with this, do not compare the `m_sequence` values directly, but hash them with a fixed but random key first. In case this yields a collision (which needs ~192000 clusters to have a probability of 10^-9 of existing), fall back to comparing the `m_sequence` values directly.\r\n\r\nAlternatives: we could instead use the pre-cluster-mempool approach of sorting by wtxid in case of ties, which is equally non-revealing, and deterministic. I find it cleaner to have a randomized internal total ordering rather than needing a partial ordering within `TxGraph` that needs to be complemented by tie-breaking logic inside the mempool, however, and I don't think the determinism is that valuable.\r\n\r\nFor context: https://github.com/bitcoin/bitcoin/pull/28676#discussion_r2328804847\r\n",
      "state": "closed",
      "user": "sipa",
      "created_at": "2025-09-07T23:43:53Z",
      "updated_at": "2026-01-16T02:11:53Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/33335",
      "labels": [
        "Mempool"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1462,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1444867984,
      "number": 28122,
      "title": "Silent Payments: Implement BIP352",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. The project is tracked in https://github.com/bitcoin/bitcoin/issues/28536\r\n\r\nBased on https://github.com/bitcoin-core/secp256k1/pull/1698\r\n\r\n## BIP352\r\n\r\nThis PR focuses strictly on the BIP logic and attempts to separate it from the wallet and transaction implementation details. This is accomplished by working directly with public and private keys, instead of needing a wallet backend and transactions for testing. Labels for the receiver are optional and thus deferred for a later PR.\r\n\r\nTest vectors from the BIP are included as unit tests.\r\n",
      "state": "open",
      "user": "josibake",
      "created_at": "2023-07-21T18:36:37Z",
      "updated_at": "2026-01-16T02:00:10Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28122",
      "labels": [
        "Wallet",
        "Privacy",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 646,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1746125849,
      "number": 29491,
      "title": "[EXPERIMENTAL] Schnorr batch verification for blocks",
      "body": "This is a simple draft implementation of Schnorr signature batch verification in blocks, put here for conceptual discussion, and collaborative benchmarking. Most of code added here is from the `secp256k1` implementation.\r\n\r\nThe `secp256k1` code is still under review itself, please spend some time giving feedback on the API etc. if you can:\r\n- [Original PR](https://github.com/bitcoin-core/secp256k1/pull/1134)\r\n- [My rebase used here including fixes and adds cmake support](https://github.com/fjahr/secp256k1/tree/pr1134-rebase-2024)\r\n\r\nTODOs\r\n- [ ] Fix `functional/feature_taproot.py`\r\n- [x] Extensive benchmarking using `ConnectBlock()` tracing\r\n- [x] Add unit tests\r\n- [ ] Batch taproot tweak verification as well\r\n- [ ] Conceptual discussion in what form this realistically could be introduced into the code base, and later, a release",
      "state": "open",
      "user": "fjahr",
      "created_at": "2024-02-27T17:06:26Z",
      "updated_at": "2026-01-16T02:00:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/29491",
      "labels": [
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 893,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1460109729,
      "number": 28201,
      "title": "Silent Payments: sending",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. Status and tracking for the project is managed in https://github.com/bitcoin/bitcoin/issues/28536\r\n\r\nThis PR depends on #28122 and is marked as a draft until it is merged. If interested in those commits, please review on #28122\r\n\r\n## Sending \r\n### Silent Payments logic\r\n\r\nThe main focus of this PR is:\r\n\r\n* Applying the Taptweak to a taproot internal private key (this is a copy-paste of the code for applying the taptweak in the signing process)\r\n* Getting a private key from a given `scriptPubKey`\r\n* Creating silent payment outputs\r\n* Applying the created scriptPubKeys back to the vector of `CRecipients`\r\n\r\nThe functions are then used together to create silent payment outputs during `CreateTransactionInternal`.\r\n\r\n### Final steps\r\n\r\nThe last commits ensure that:\r\n\r\n* Coin selection is silent payments aware and knows to exclude taproot script path spends and inputs with unknown witness when funding a transaction which pays to a silent payment address\r\n* The change output type is correctly chosen when paying to a silent payment address\r\n* Functional tests\r\n",
      "state": "open",
      "user": "josibake",
      "created_at": "2023-08-02T16:37:04Z",
      "updated_at": "2026-01-16T02:00:09Z",
      "merged_at": null,
      "comments": 0,
      "review_comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/pull/28201",
      "labels": [
        "Wallet",
        "Privacy",
        "Needs rebase"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1160,
        "has_nack": false,
        "has_ack": true
      }
    }
  ],
  "issues": [
    {
      "id": 640455898,
      "number": 19303,
      "title": "Replace all of the RecursiveMutex instances with the Mutex ones",
      "body": "**UPD 2023-04-18**. See a shortlist [here](https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-1513337566).\n\n---\n\nThis is a tracking issue for the long-term goal to replace all of the `RecursiveMutex` instances with the `Mutex` ones throughout the code base.\n\nAnthony Williams (_C++ Concurrency in Action_, 2019, 3.3.3 Recursive locking):\n> Most of the time, if you think you want a recursive mutex, you probably need to change your design instead.\n\nAnthony Towns, https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-646956780:\n> ... the actual goal is \"make locking logic easier to follow\" rather than \"remove RecurviseMutex\"\n\nShould be noted, to insure that mutex locking policy has not been changed by accident in non-trivial cases, all of the related code branches must be covered by appropriate lock assertions: `AssertLockHeld()` or `AssertLockNotHeld()`.\n\nAlso Clang Thread Safety Analysis annotations with [Negative Capabilities](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#negative) are very useful (see #19249) but are not a panacea, of course :)\n\n---\n\n- [x] `RecursiveMutex cs_Shutdown` (#19180)\n- [x] `RecursiveMutex cs_nTimeOffset` (#19189)\n- [x] `RecursiveMutex cs_proxyInfos` (#19190)\n- ~`RecursiveMutex csPathCached` (#19213)~\n- [x] `RecursiveMutex cs_warnings` (#19220)\n- [x] `RecursiveMutex CAddrMan::cs` (#19238)\n- [x] `RecursiveMutex BanMan::m_cs_banned` (#24092, #24097)\n- [x] `RecursiveMutex cs_mapLocalHost` (#24099)\n- [x] `RecursiveMutex CConnman::cs_totalBytesRecv` (#22829)\n- [x] `RecursiveMutex CConnman::cs_totalBytesSent` (#24157)\n- [x] `RecursiveMutex CConnman::m_addr_fetches_mutex` (#22829)\n- [x] `RecursiveMutex CConnman::cs_vAddedNodes` (#22829)\n- [ ] `RecursiveMutex CConnman::m_nodes_mutex` (#32394)\n- [x] `RecursiveMutex CNode::cs_vSend` (#19915)\n- [x] `RecursiveMutex CNode::cs_hSocket` (#19915)\n- [x] `RecursiveMutex CNode::cs_vRecv` (#19915)\n- ~`RecursiveMutex CNode::cs_vProcessMsg` (#24122)~\n- ~`RecursiveMutex CNode::cs_sendProcessing` (#25597)~\n- [x] `RecursiveMutex CNode::cs_SubVer` (#24079)\n- [x] `RecursiveMutex CNode::cs_inventory` (#19347)\n- [x] `RecursiveMutex CNode::cs_addrName` (removed in #22782)\n- [x] `RecursiveMutex CNode::cs_addrLocal` #24108\n- [ ] `RecursiveMutex Peer::TxRelay::m_bloom_filter_mutex`\n- [ ] `RecursiveMutex Peer::TxRelay::m_tx_inventory_mutex` (#24125)\n- [x] `RecursiveMutex CNode::TxRelay::cs_feeFilter` (#18819)\n- ~`RecursiveMutex g_cs_orphans`~\n- [x] `RecursiveMutex g_cs_recent_confirmed_transactions` (#19378)\n- [x] `RecursiveMutex cs_most_recent_block` (#24062)\n- [x] `RecursiveMutex CBlockPolicyEstimator::m_cs_fee_estimator` (#22014)\n- [x] `RecursiveMutex cs_rpcWarmup` (#19399)\n- [x] `RecursiveMutex SingleThreadedSchedulerClient::m_cs_callbacks_pending` (#24069)\n- [ ] `RecursiveMutex BlockManager::cs_LastBlockFile`\n- [ ] `RecursiveMutex FillableSigningProvider::cs_KeyStore`\n- [ ] `RecursiveMutex ArgsManager::cs_args`\n- [x] `RecursiveMutex CChainState::cs_nBlockSequenceId` (#22824)\n- [x] `RecursiveMutex CChainState::m_cs_chainstate` (#24103)\n- ~`RecursiveMutex cs_db`~\n- [ ] `RecursiveMutex DescriptorScriptPubKeyMan::cs_desc_man`\n- [x] `RecursiveMutex cs_wallets` (#19101)\n- [ ] `RecursiveMutex CWallet::cs_wallet` (#19773,  #19833)\n\nand\n\n- `RecursiveMutex CTxMemPool::cs` (#19306, ~#19647~, #19652, #19854, #19872, #19901, #19909, #19917)\n- `RecursiveMutex cs_main`\n",
      "state": "open",
      "user": "hebasto",
      "created_at": "2020-06-17T13:45:18Z",
      "updated_at": "2026-01-22T16:06:56Z",
      "closed_at": null,
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/issues/19303",
      "labels": [
        "Brainstorming",
        "Refactoring"
      ],
      "comment_data": [
        {
          "id": 3785239184,
          "user": "fanquake",
          "body": "[> Steps to reproduce on a fresh install of Fedora 42:](https://github.com/bitcoin/bitcoin/issues/19303#issuecomment-1514926359)\n\nStill reproduces with master (7041648ee5bde974c2361e326dabe624c13059a6) on Fedora 44:\n```bash\nnode0 2026-01-22T16:01:44.726576Z [msghand] [validationinterface.cpp:256] [BlockChecked] [validation] BlockChecked: block hash=3105cec1deeb7460133412e353df1d14e0190438e9efeac81c97e17375dded11 state=Valid \n node1 2026-01-22T16:01:45.040219Z [net] [net.cpp:2213] [SocketHandlerConnected] [net] socket closed, disconnecting peer=0 \n test  2026-01-22T16:01:45.040285Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:11278 \n node1 2026-01-22T16:01:45.040356Z [net] [net.cpp:572] [CloseSocketDisconnect] [net] Resetting socket for peer=0 \n test  2026-01-22T16:01:45.040523Z TestFramework.p2p (DEBUG): Closed connection to: 127.0.0.1:11278 \n node1 2026-01-22T16:01:45.041358Z [net] [net_processing.cpp:1745] [FinalizeNode] [net] Cleared nodestate for peer=0 \n test  2026-01-22T16:01:45.075641Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/root/ci_scratch/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"/root/ci_scratch/./build/test/functional/p2p_segwit.py\", line 263, in run_test\n                                       self.test_v0_outputs_arent_spendable()\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n                                     File \"/root/ci_scratch/./build/test/functional/p2p_segwit.py\", line 113, in func_wrapper\n                                       func(self, *args, **kwargs)\n                                       ~~~~^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/./build/test/functional/p2p_segwit.py\", line 481, in test_v0_outputs_arent_spendable\n                                       test_witness_block(self.nodes[0], self.test_node, block, accepted=True, with_witness=False)\n                                       ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/./build/test/functional/p2p_segwit.py\", line 146, in test_witness_block\n                                       p2p.send_and_ping(msg_block(block) if with_witness else msg_no_witness_block(block))\n                                       ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 703, in send_and_ping\n                                       self.sync_with_ping(timeout=timeout)\n                                       ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 716, in sync_with_ping\n                                       self.wait_until(test_function, timeout=timeout)\n                                       ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 601, in wait_until\n                                       wait_until_helper_internal(test_function, timeout=timeout, lock=p2p_lock, timeout_factor=self.timeout_factor, check_interval=check_interval)\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/util.py\", line 410, in wait_until_helper_internal\n                                       if predicate():\n                                          ~~~~~~~~~^^\n                                     File \"/root/ci_scratch/test/functional/test_framework/p2p.py\", line 598, in test_function\n                                       assert self.is_connected\n                                              ^^^^^^^^^^^^^^^^^\n                                   AssertionError\n test  2026-01-22T16:01:45.078950Z TestFramework (DEBUG): Closing down network thread \n test  2026-01-22T16:01:45.129629Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \n test  2026-01-22T16:01:45.129902Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_0ugn7oru \n test  2026-01-22T16:01:45.130065Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_0ugn7oru/test_framework.log \n test  2026-01-22T16:01:45.130371Z TestFramework (ERROR): \n test  2026-01-22T16:01:45.130583Z TestFramework (ERROR): Hint: Call /root/ci_scratch/test/functional/combine_logs.py '/tmp/bitcoin_func_test_0ugn7oru' to consolidate all logs \n test  2026-01-22T16:01:45.130682Z TestFramework (ERROR): \n test  2026-01-22T16:01:45.130766Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \n test  2026-01-22T16:01:45.130886Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \n test  2026-01-22T16:01:45.130978Z TestFramework (ERROR): \n\n node0 stderr ==================\nWARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=9169)\n  Cycle in lock order graph: M0 (0xffffad23e630) => M1 (0xffffaf007390) => M2 (0xffffae2cba58) => M0\n\n  Mutex M1 acquired here while holding mutex M0 in thread T8:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x23ae84) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:857:10 (bitcoind+0x23ae84)\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/mutex:127:17 (bitcoind+0x23ae84)\n    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x23ae84)\n    #5 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x23ae84)\n    #6 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::UniqueLock(AnnotatedMixin<std::recursive_mutex>&, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:177:13 (bitcoind+0x23ae84)\n    #7 (anonymous namespace)::PeerManagerImpl::InitiateTxBroadcastToAll(transaction_identifier<false> const&, transaction_identifier<true> const&) /root/ci_scratch/build/src/./net_processing.cpp:2223:9 (bitcoind+0x23ae84)\n    #8 (anonymous namespace)::PeerManagerImpl::ProcessValidTx(long, std::shared_ptr<CTransaction const> const&, std::__cxx11::list<std::shared_ptr<CTransaction const>, std::allocator<std::shared_ptr<CTransaction const>>> const&) /root/ci_scratch/build/src/./net_processing.cpp:3133:5 (bitcoind+0x25c710) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #9 (anonymous namespace)::PeerManagerImpl::ProcessMessage(CNode&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, DataStream&, std::chrono::duration<long, std::ratio<1l, 1000000l>>, std::atomic<bool> const&) /root/ci_scratch/build/src/./net_processing.cpp:4512:13 (bitcoind+0x2425bc) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp:5242:9 (bitcoind+0x249a0c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #11 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e308) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #12 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3156:49 (bitcoind+0x2066a8) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #13 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #14 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #15 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #16 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #17 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #18 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #19 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #20 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #21 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #22 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #23 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #24 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Mutex M0 previously acquired by the same thread here:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x23add0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 std::mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_mutex.h:116:17 (bitcoind+0x23add0)\n    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x23add0)\n    #4 UniqueLock<AnnotatedMixin<std::mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x23add0)\n    #5 UniqueLock<AnnotatedMixin<std::mutex>>::UniqueLock(AnnotatedMixin<std::mutex>&, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:177:13 (bitcoind+0x23add0)\n    #6 (anonymous namespace)::PeerManagerImpl::InitiateTxBroadcastToAll(transaction_identifier<false> const&, transaction_identifier<true> const&) /root/ci_scratch/build/src/./net_processing.cpp:2217:5 (bitcoind+0x23add0)\n    #7 (anonymous namespace)::PeerManagerImpl::ProcessValidTx(long, std::shared_ptr<CTransaction const> const&, std::__cxx11::list<std::shared_ptr<CTransaction const>, std::allocator<std::shared_ptr<CTransaction const>>> const&) /root/ci_scratch/build/src/./net_processing.cpp:3133:5 (bitcoind+0x25c710) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #8 (anonymous namespace)::PeerManagerImpl::ProcessMessage(CNode&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, DataStream&, std::chrono::duration<long, std::ratio<1l, 1000000l>>, std::atomic<bool> const&) /root/ci_scratch/build/src/./net_processing.cpp:4512:13 (bitcoind+0x2425bc) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #9 (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp:5242:9 (bitcoind+0x249a0c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e308) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #11 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3156:49 (bitcoind+0x2066a8) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #12 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #13 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #14 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #15 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #16 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #17 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #18 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #19 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #20 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #21 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #22 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #23 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Mutex M2 acquired here while holding mutex M1 in thread T8:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x1ca20c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:857:10 (bitcoind+0x1ca20c)\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/mutex:127:17 (bitcoind+0x1ca20c)\n    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x1ca20c)\n    #5 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x1ca20c)\n    #6 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::UniqueLock(AnnotatedMixin<std::recursive_mutex>&, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:177:13 (bitcoind+0x1ca20c)\n    #7 (anonymous namespace)::PeerManagerImpl::SendMessages(CNode*) /root/ci_scratch/build/src/./net_processing.cpp:6058:21 (bitcoind+0x24c5f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #8 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::SendMessages(CNode*) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e3a0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #9 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3161:28 (bitcoind+0x206710) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #11 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #12 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #13 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #14 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #15 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #16 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #17 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #18 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #19 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #20 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #21 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Mutex M1 previously acquired by the same thread here:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x1ca20c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:857:10 (bitcoind+0x1ca20c)\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/mutex:127:17 (bitcoind+0x1ca20c)\n    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x1ca20c)\n    #5 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x1ca20c)\n    #6 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::UniqueLock(AnnotatedMixin<std::recursive_mutex>&, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:177:13 (bitcoind+0x1ca20c)\n    #7 (anonymous namespace)::PeerManagerImpl::SendMessages(CNode*) /root/ci_scratch/build/src/./net_processing.cpp:5950:17 (bitcoind+0x24bc6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #8 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::SendMessages(CNode*) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e3a0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #9 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3161:28 (bitcoind+0x206710) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #11 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #12 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #13 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #14 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #15 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #16 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #17 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #18 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #19 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #20 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #21 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Mutex M0 acquired here while holding mutex M2 in thread T8:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x23801c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 std::mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_mutex.h:116:17 (bitcoind+0x23801c)\n    #3 std::unique_lock<std::mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x23801c)\n    #4 UniqueLock<AnnotatedMixin<std::mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x23801c)\n    #5 UniqueLock<AnnotatedMixin<std::mutex>>::UniqueLock(AnnotatedMixin<std::mutex>&, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:177:13 (bitcoind+0x23801c)\n    #6 (anonymous namespace)::PeerManagerImpl::GetPeerRef(long) const /root/ci_scratch/build/src/./net_processing.cpp:1767:5 (bitcoind+0x23801c)\n    #7 (anonymous namespace)::PeerManagerImpl::MaybeSetPeerAsAnnouncingHeaderAndIDs(long) /root/ci_scratch/build/src/./net_processing.cpp:1280:18 (bitcoind+0x23801c)\n    #8 (anonymous namespace)::PeerManagerImpl::BlockChecked(std::shared_ptr<CBlock const> const&, BlockValidationState const&) /root/ci_scratch/build/src/./net_processing.cpp:2192:13 (bitcoind+0x23801c)\n    #9 ValidationSignals::BlockChecked(std::shared_ptr<CBlock const> const&, BlockValidationState const&)::$_0::operator()(CValidationInterface&) const /root/ci_scratch/build/src/./validationinterface.cpp:257:75 (bitcoind+0x67290c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 void ValidationSignalsImpl::Iterate<ValidationSignals::BlockChecked(std::shared_ptr<CBlock const> const&, BlockValidationState const&)::$_0>(ValidationSignals::BlockChecked(std::shared_ptr<CBlock const> const&, BlockValidationState const&)::$_0&&) /root/ci_scratch/build/src/./validationinterface.cpp:90:17 (bitcoind+0x67290c)\n    #11 ValidationSignals::BlockChecked(std::shared_ptr<CBlock const> const&, BlockValidationState const&) /root/ci_scratch/build/src/./validationinterface.cpp:257:18 (bitcoind+0x67290c)\n    #12 Chainstate::ConnectTip(BlockValidationState&, CBlockIndex*, std::shared_ptr<CBlock const>, ConnectTrace&, DisconnectedBlockTransactions&) /root/ci_scratch/build/src/./validation.cpp:3099:43 (bitcoind+0x615ccc) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #13 Chainstate::ActivateBestChainStep(BlockValidationState&, CBlockIndex*, std::shared_ptr<CBlock const> const&, bool&, ConnectTrace&) /root/ci_scratch/build/src/./validation.cpp:3295:18 (bitcoind+0x617dec) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #14 Chainstate::ActivateBestChain(BlockValidationState&, std::shared_ptr<CBlock const>) /root/ci_scratch/build/src/./validation.cpp:3435:22 (bitcoind+0x618730) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #15 ChainstateManager::ProcessNewBlock(std::shared_ptr<CBlock const> const&, bool, bool, bool*) /root/ci_scratch/build/src/./validation.cpp:4494:29 (bitcoind+0x6232b0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #16 (anonymous namespace)::PeerManagerImpl::ProcessBlock(CNode&, std::shared_ptr<CBlock const> const&, bool, bool) /root/ci_scratch/build/src/./net_processing.cpp:3400:16 (bitcoind+0x260cb0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #17 (anonymous namespace)::PeerManagerImpl::ProcessMessage(CNode&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, DataStream&, std::chrono::duration<long, std::ratio<1l, 1000000l>>, std::atomic<bool> const&) /root/ci_scratch/build/src/./net_processing.cpp:4873:9 (bitcoind+0x2445d4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #18 (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp:5242:9 (bitcoind+0x249a0c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #19 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e308) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #20 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3156:49 (bitcoind+0x2066a8) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #21 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #22 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #23 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #24 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #25 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #26 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #27 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #28 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #29 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #30 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #31 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #32 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Mutex M2 previously acquired by the same thread here:\n    #0 pthread_mutex_lock <null> (bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 __gthread_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:795:12 (bitcoind+0x618588) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #2 __gthread_recursive_mutex_lock(pthread_mutex_t*) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/aarch64-redhat-linux/bits/gthr-default.h:857:10 (bitcoind+0x618588)\n    #3 std::recursive_mutex::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/mutex:127:17 (bitcoind+0x618588)\n    #4 std::unique_lock<std::recursive_mutex>::lock() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/unique_lock.h:144:17 (bitcoind+0x618588)\n    #5 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::Enter(char const*, char const*, int) /root/ci_scratch/build/src/./sync.h:158:15 (bitcoind+0x618588)\n    #6 UniqueLock<AnnotatedMixin<std::recursive_mutex>>::UniqueLock(AnnotatedMixin<std::recursive_mutex>*, char const*, char const*, int, bool) /root/ci_scratch/build/src/./sync.h:188:13 (bitcoind+0x618588)\n    #7 Chainstate::ActivateBestChain(BlockValidationState&, std::shared_ptr<CBlock const>) /root/ci_scratch/build/src/./validation.cpp:3411:13 (bitcoind+0x618588)\n    #8 ChainstateManager::ProcessNewBlock(std::shared_ptr<CBlock const> const&, bool, bool, bool*) /root/ci_scratch/build/src/./validation.cpp:4494:29 (bitcoind+0x6232b0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #9 (anonymous namespace)::PeerManagerImpl::ProcessBlock(CNode&, std::shared_ptr<CBlock const> const&, bool, bool) /root/ci_scratch/build/src/./net_processing.cpp:3400:16 (bitcoind+0x260cb0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #10 (anonymous namespace)::PeerManagerImpl::ProcessMessage(CNode&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, DataStream&, std::chrono::duration<long, std::ratio<1l, 1000000l>>, std::atomic<bool> const&) /root/ci_scratch/build/src/./net_processing.cpp:4873:9 (bitcoind+0x2445d4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #11 (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp:5242:9 (bitcoind+0x249a0c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #12 non-virtual thunk to (anonymous namespace)::PeerManagerImpl::ProcessMessages(CNode*, std::atomic<bool>&) /root/ci_scratch/build/src/./net_processing.cpp (bitcoind+0x24e308) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #13 CConnman::ThreadMessageHandler() /root/ci_scratch/build/src/./net.cpp:3156:49 (bitcoind+0x2066a8) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #14 CConnman::Start(CScheduler&, CConnman::Options const&)::$_6::operator()() const /root/ci_scratch/build/src/./net.cpp:3560:80 (bitcoind+0x214a6c) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #15 void std::__invoke_impl<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(std::__invoke_other, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214a6c)\n    #16 std::enable_if<is_invocable_r_v<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>, void>::type std::__invoke_r<void, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&>(CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:113:2 (bitcoind+0x214a6c)\n    #17 std::_Function_handler<void (), CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::_M_invoke(std::_Any_data const&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:295:9 (bitcoind+0x214a6c)\n    #18 std::function<void ()>::operator()() const /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_function.h:581:9 (bitcoind+0xc0d0f4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #19 util::TraceThread(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>) /root/ci_scratch/build/src/util/./util/thread.cpp:21:9 (bitcoind+0xc0d0f4)\n    #20 void std::__invoke_impl<void, void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(std::__invoke_other, void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:63:14 (bitcoind+0x214988) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #21 std::__invoke_result<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>::type std::__invoke<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>(void (*&&)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*&&, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6&&) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/invoke.h:98:14 (bitcoind+0x214988)\n    #22 void std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:303:13 (bitcoind+0x214988)\n    #23 std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>::operator()() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:310:11 (bitcoind+0x214988)\n    #24 std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(std::basic_string_view<char, std::char_traits<char>>, std::function<void ()>), char const*, CConnman::Start(CScheduler&, CConnman::Options const&)::$_6>>>::_M_run() /usr/bin/../lib/gcc/aarch64-redhat-linux/16/../../../../include/c++/16/bits/std_thread.h:255:13 (bitcoind+0x214988)\n    #25 <null> <null> (libstdc++.so.6+0xe429c) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n\n  Thread T8 'b-msghand' (tid=9189, running) created by main thread at:\n    #0 pthread_create <null> (bitcoind+0x108580) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State>>, void (*)()) <null> (libstdc++.so.6+0xe4424) (BuildId: 2abb65e0f3f4e72b932c9437bf468850d633f626)\n    #2 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /root/ci_scratch/build/src/./init.cpp:2233:24 (bitcoind+0x1bf1b4) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #3 AppInit(node::NodeContext&) /root/ci_scratch/build/src/./bitcoind.cpp:242:43 (bitcoind+0x19cbd0) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d)\n    #4 main /root/ci_scratch/build/src/./bitcoind.cpp:283:10 (bitcoind+0x19cbd0)\n\nSUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (/root/ci_scratch/build/bin/bitcoind+0x10a890) (BuildId: 9a0d0366f47b56c997e67da32c10136af2c5df6d) in pthread_mutex_lock\n```\n\n",
          "created_at": "2026-01-22T16:06:56Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 46682,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3451,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3680657459,
      "number": 33982,
      "title": "build: `guix` package was removed from debian",
      "body": "Apparently the `guix` debian package was no longer maintained, and was removed from debian recently (see https://lwn.net/Articles/1035491/). Ubuntu and other debian derivatives will likely follow.\n\nThis means we need new setup instructions for guix on debian in `contrib/guix/INSTALL.md`.",
      "state": "open",
      "user": "laanwj",
      "created_at": "2025-12-01T11:58:44Z",
      "updated_at": "2026-01-22T14:51:05Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33982",
      "labels": [
        "Docs",
        "Build system"
      ],
      "comment_data": [
        {
          "id": 3784813664,
          "user": "fanquake",
          "body": "`v1.5.0` has been tagged: https://codeberg.org/guix/guix/src/tag/v1.5.0.",
          "created_at": "2026-01-22T14:51:05Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 72,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 334,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3842642077,
      "number": 34378,
      "title": "gethdkeys RPC throws for descriptors with partial xprvs",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nA non-watch-only wallet allows to import descriptors with partial\n    private keys, eg: a multisig descriptor with one private key and\n    one public key. In case an xpub is imported in any such descriptors\n    whose private key the wallet doesn't have, then the `gethdkeys` RPC\n    throws an unhandled error like below when the private keys are\n    requested.\n```\n    ➜ bitcoincli -named gethdkeys private=true\n    error code: -1\n    error message:\n    map::at:  key not found\n```\n\n### Expected behaviour\n\nThe RPC should properly handle the request and not throw.\n\n### Steps to reproduce\n\n1. Create a non watch only wallet.\n2. Call `importdescriptors` RPC with partial private keys, eg:\n```\n[{'desc': 'wsh(multi(2,tprv8ZgxMBicQKsPdaTnUf1FUTUtnupv4pHiwFLsVHPnNHhJtACT3sdj7eMRx1ixLchduVUD4XQzN5qNyZri9NYkrS4kt4tvgyhnW7byhxHzSHw/*,tpubD6NzVbkrYhZ4WzibfNc8tzv6GtMzQ4LnP5YRgM8X5Dia9iPdBdrx3QujdD9fzkwxnGQaBh3q4eFENqJxr8Fzj9bNZhwGndoWJgQQeKTNRWE/*))#m5xlzyqz', 'timestamp': 'now'}]\n```\n3. Call `gethdkeys` RPC.\n```\nbitcoincli -named gethdkeys private=true\n```\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@d7fd8c6952f288685bf16151b6c1139aad74ffea\n\n### Operating system and version\n\nMacOS\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "rkrux",
      "created_at": "2026-01-22T12:08:22Z",
      "updated_at": "2026-01-22T12:08:22Z",
      "closed_at": null,
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34378",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1499,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3834142125,
      "number": 34354,
      "title": "Windows CI failure: restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.",
      "body": "ISTM that the [Windows, ucrt, test cross-built CI failure](https://github.com/bitcoin/bitcoin/actions/runs/21172425203/job/60894641918?pr=33014) is unrelated, a restore wallet test case related to pruned blockchain in `wallet_assumeutxo.py` is failing.\r\n\r\n<details open>\r\n<summary>From the logs:</summary>\r\n\r\n```zsh\r\n2026-01-20T13:41:07.2385503Z 2026-01-20T13:41:04.152353Z TestFramework (INFO): Ensuring wallet can't be restored from a backup that was created before the pruneheight (pruned node)\r\n2026-01-20T13:41:07.2386535Z \r\n2026-01-20T13:41:07.2386839Z 2026-01-20T13:41:06.479889Z TestFramework (ERROR): Unexpected exception\r\n2026-01-20T13:41:07.2387306Z \r\n2026-01-20T13:41:07.2387503Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2387815Z \r\n2026-01-20T13:41:07.2388269Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 166, in try_rpc\r\n2026-01-20T13:41:07.2388901Z \r\n2026-01-20T13:41:07.2389049Z     fun(*args, **kwds)\r\n2026-01-20T13:41:07.2389318Z \r\n2026-01-20T13:41:07.2389432Z     ~~~^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2389660Z \r\n2026-01-20T13:41:07.2390180Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n2026-01-20T13:41:07.2390808Z \r\n2026-01-20T13:41:07.2391156Z     return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n2026-01-20T13:41:07.2391651Z \r\n2026-01-20T13:41:07.2392093Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 156, in __call__\r\n2026-01-20T13:41:07.2392771Z \r\n2026-01-20T13:41:07.2392996Z     raise JSONRPCException(response['error'], status)\r\n2026-01-20T13:41:07.2393424Z \r\n2026-01-20T13:41:07.2395532Z test_framework.authproxy.JSONRPCException: filesystem error: cannot remove: The process cannot access the file because it is being used by another process [D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\\node3\\regtest\\w2\\wallet.dat] (-1)\r\n2026-01-20T13:41:07.2397271Z \r\n2026-01-20T13:41:07.2397277Z \r\n2026-01-20T13:41:07.2397281Z \r\n2026-01-20T13:41:07.2397613Z During handling of the above exception, another exception occurred:\r\n2026-01-20T13:41:07.2398102Z \r\n2026-01-20T13:41:07.2398107Z \r\n2026-01-20T13:41:07.2398112Z \r\n2026-01-20T13:41:07.2398334Z Traceback (most recent call last):\r\n2026-01-20T13:41:07.2398622Z \r\n2026-01-20T13:41:07.2399135Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\r\n2026-01-20T13:41:07.2399796Z \r\n2026-01-20T13:41:07.2399922Z     self.run_test()\r\n2026-01-20T13:41:07.2400161Z \r\n2026-01-20T13:41:07.2400286Z     ~~~~~~~~~~~~~^^\r\n2026-01-20T13:41:07.2400474Z \r\n2026-01-20T13:41:07.2400948Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 267, in run_test\r\n2026-01-20T13:41:07.2401587Z \r\n2026-01-20T13:41:07.2401827Z     self.test_restore_wallet_pruneheight(n3)\r\n2026-01-20T13:41:07.2402338Z \r\n2026-01-20T13:41:07.2402476Z     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\r\n2026-01-20T13:41:07.2402806Z \r\n2026-01-20T13:41:07.2403384Z   File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_assumeutxo.py\", line 99, in test_restore_wallet_pruneheight\r\n2026-01-20T13:41:07.2404151Z \r\n2026-01-20T13:41:07.2404691Z     assert_raises_rpc_error(-4, error_message, n3.restorewallet, \"w2\", \"backup_w2.dat\")\r\n2026-01-20T13:41:07.2405294Z \r\n2026-01-20T13:41:07.2405553Z     ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2405970Z \r\n2026-01-20T13:41:07.2406496Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 157, in assert_raises_rpc_error\r\n2026-01-20T13:41:07.2407238Z \r\n2026-01-20T13:41:07.2407544Z     assert try_rpc(code, message, fun, *args, **kwds), \"No exception raised\"\r\n2026-01-20T13:41:07.2408097Z \r\n2026-01-20T13:41:07.2408261Z            ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n2026-01-20T13:41:07.2408598Z \r\n2026-01-20T13:41:07.2409048Z   File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\util.py\", line 170, in try_rpc\r\n2026-01-20T13:41:07.2409645Z \r\n2026-01-20T13:41:07.2410041Z     raise AssertionError(\"Unexpected JSONRPC error code %i\" % e.error[\"code\"])\r\n2026-01-20T13:41:07.2410583Z \r\n2026-01-20T13:41:07.2410797Z AssertionError: Unexpected JSONRPC error code -1\r\n2026-01-20T13:41:07.2411215Z \r\n2026-01-20T13:41:07.2411925Z 2026-01-20T13:41:06.484138Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2026-01-20T13:41:07.2412795Z \r\n2026-01-20T13:41:07.2413676Z 2026-01-20T13:41:06.484270Z TestFramework (WARNING): Not cleaning up dir D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56\r\n2026-01-20T13:41:07.2414525Z \r\n2026-01-20T13:41:07.2415646Z 2026-01-20T13:41:06.484375Z TestFramework (ERROR): Test failed. Test logging available at D:\\a\\_temp\\test_runner_₿_🏃_20260120_132914\\wallet_assumeutxo_56/test_framework.log\r\n2026-01-20T13:41:07.2416737Z \r\n\r\n2026-01-20T13:42:33.3464929Z wallet_assumeutxo.py                                                             | ✖ Failed  | 8 s\r\n2026-01-20T13:42:33.3465209Z \r\n2026-01-20T13:42:33.3465460Z ALL                                                                              | ✖ Failed  | 2893 s (accumulated) \r\n2026-01-20T13:42:33.3465784Z Runtime: 796 s\r\n\r\n```\r\n</details>\r\n\r\n_Originally posted by @rkrux in https://github.com/bitcoin/bitcoin/issues/33014#issuecomment-3773073528_\r\n            ",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-20T15:07:00Z",
      "updated_at": "2026-01-22T11:59:45Z",
      "closed_at": "2026-01-22T11:59:45Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34354",
      "labels": [
        "Wallet",
        "Windows",
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3783234678,
          "user": "fjahr",
          "body": "I proposed a fix here: [#34377](https://github.com/bitcoin/bitcoin/pull/34377)",
          "created_at": "2026-01-22T08:47:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 78,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5519,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2517082860,
      "number": 30864,
      "title": "fuzz: `scriptpubkeyman`: heap-buffer-overflow miniscript.cpp in CScript BuildScript",
      "body": "```\r\n$ echo \"dHIoJTE3LzwyOzM+LGw6cGsoJTA4KSk=\" | base64 --decode > scriptpubkeyman.crash\r\n$ FUZZ=scriptpubkeyman src/test/fuzz/fuzz scriptpubkeyman.crash\r\n...\r\nSUMMARY: AddressSanitizer: heap-buffer-overflow miniscript.cpp in CScript BuildScript<opcodetype, CScript&, opcodetype, CScript&, opcodetype>(opcodetype&&, CScript&, opcodetype&&, CScript&, opcodetype&&)\r\n...\r\n```",
      "state": "closed",
      "user": "dergoegge",
      "created_at": "2024-09-10T17:25:37Z",
      "updated_at": "2026-01-22T10:58:19Z",
      "closed_at": "2025-01-22T11:23:13Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/30864",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 457,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2802724063,
      "number": 31705,
      "title": "-usehd=1 no longer works",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nHello! Tried to search through issues but I guess bitcoin uses a new kind of wallet I am not really familiar with. I am not sure how to generate the hd seed im used to, should I try an older version? Thanks for any help. I dont want to use the new kind of wallet. I want to use bitcoin to generate a seed phrase. \n\n### Expected behaviour\n\nim used to it working bitcoin forks\n\n### Steps to reproduce\n\nbitcoin/build/src/qt/bitcoin-qt --usehd=1\n\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n Bitcoin Core 28.1\n\n### Operating system and version\n\nubuntu 22\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "ghost",
      "created_at": "2025-01-21T20:15:03Z",
      "updated_at": "2026-01-22T10:58:16Z",
      "closed_at": "2025-01-22T07:57:20Z",
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/31705",
      "labels": [
        "Wallet",
        "Questions and Help"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 831,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2804643253,
      "number": 31707,
      "title": "Clear documentation on the bitcoin/bitcoin docker images on Dockerhub and their build process",
      "body": "### Please describe the feature you'd like to see added.\n\nExplanations around the Docker Images being built in the GitHub workflows.\n\n### Is your feature related to a problem, if so please describe it.\n\nAs of now, I was not able to find some clear reference of how the Docker images which are available [here](https://hub.docker.com/r/bitcoin/bitcoin) are being built. It would also be nice to have a short explanation for newcomers about the risks of using a pre-built image. And most importantly: How can I make sure that the DockerHub images are actually built from this repository? I can see some GitHub actions [here](https://github.com/bitcoin/bitcoin/blob/523520f8279987cd528a9e2db6db13dc56641eff/src/secp256k1/.github/actions/run-in-docker-action/action.yml), but I only found them by digging deep into the repo.\n\n### Describe the solution you'd like\n\nA clear explanation on how the Docker images are being built (referencing the GitHub workflows would be nice!) and also a clear statement about whether [this DockerHub page](https://hub.docker.com/r/bitcoin/bitcoin) is owned by the maintainers of this project.\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\nI am willing to contribute, if necessary.",
      "state": "closed",
      "user": "raweber42",
      "created_at": "2025-01-22T15:08:16Z",
      "updated_at": "2026-01-22T10:58:15Z",
      "closed_at": "2025-01-22T15:40:06Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31707",
      "labels": [
        "Questions and Help"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1362,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2265800207,
      "number": 29972,
      "title": "qa: Support git worktrees when running the linters locally via Docker",
      "body": "I discovered that running this command (from `test/lint/README.md`):\r\n```\r\nDOCKER_BUILDKIT=1 docker build -t bitcoin-linter --file \"./ci/lint_imagefile\" ./ && docker run --rm -v $(pwd):/bitcoin -it bitcoin-linter\r\n```\r\ndoesn't work when trying to run it out of a git worktree:\r\n```\r\nfatal: not a git repository: /home/sdaftuar/bitcoin/.git/worktrees/2024-04-cluster-mempool-txgraph-rebased\r\n```\r\n (Though it did work for me when I tried checking out my branch in a regular git repo).  \r\n\r\nI don't know anything about these scripts, but if there's an easy way to support worktrees I think it would be useful!",
      "state": "open",
      "user": "sdaftuar",
      "created_at": "2024-04-26T13:32:11Z",
      "updated_at": "2026-01-22T09:00:28Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/29972",
      "labels": [
        "Feature",
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3783284789,
          "user": "Sjors",
          "body": "A tangential problem I often run into is that I use symlinks, e.g. `releases` points to a folder that has the previous release binaries (so I don't accidentally wipe them).\n\nPresumably both issues can be solved by copying things into a (temporary) volume?",
          "created_at": "2026-01-22T09:00:28Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 255,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 677,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3629644627,
      "number": 33882,
      "title": "Standardness policy rules for legacy Multisig script is incoherent",
      "body": "Over the years policy surrounding multisig scripts, particularly for legacy multisig scripts, has evolved in a haphazard way with various PRs affecting  legacy multisig script policy without considering the ramifications.\n\nThe current status of legacy multisig script policy is as follows:\n\n* Legacy multisig outputs in transactions can be at most *m*-of-3.  All pubkeys in such outputs must be of the form of a compressed pubkey, or uncompressed pubkey, or a hybrid pubkey.\n* Legacy multisig inputs being redeemed in transaction can be *m*-of-*n* with *m* and *n* 20 or less.  Any public keys processed by OP_CHECKMULTISIG must be compressed or uncompressed pubkeys.  hybrid or other data blobs are only allowed in the unprocessed part of the public key list.\n\nWhile it is acceptable for legacy multisig output creation policy to be stricter than redemption policy, it makes no sense to allow hybrid keys in outputs by policy, but then to disallow them as inputs by policy.\n\nHowever, there are further issues. Legacy multisig policy has evolved over time.  In the beginning when legacy multisig outputs were introduced as standard by BIP 11, \"pubkeys\" were allowed by policy to be any value between 33 and 120 bytes.  Some Bitcoin users have taken advantage of those liberal policies and created legacy multisig script UTXOs that were redeemable by policy at the time they were created, but are no longer redeemable by policy today.  The UTXO 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 from 2014-01-12 is but one example.  @ajtowns's analysis in #33755 suggests there are at least 147,470 such UTXOs that have become *soft-confiscated* over time, meaning that when they were created they were redeemable by policy, but become no longer redeemable by policy and would require direct miner assistance to be spent.\n\nBased on my research, I believe there are 4 tasks that need to be done to make legacy Multisig policy coherent again.\n\n### 1. Ban hybrid keys in legacy outputs\n\nWe should strengthen the rules surrounding creating legacy multisig (and legacy single sig) to ban the use of hybrid keys.  Such keys are nearly irredeemable.  However, we should only strengthen policy around the creating new legacy script outputs without further restricting policy around redeeming legacy script UTXOs.\n\n### 2. Bring legacy script redemption policy in line with P2SH redeem script policy.\n\nP2SH redeem script policy has also evolved over time.  Current policy for P2SH redemption allow any scripts so long as they have a limited number of CHECKSIG related operations.  I see no reason why legacy script should be subject to significantly more stringent constraints than P2SH redeem scripts are.\n\n### 3. Relax `SCRIPT_VERIFY_STRICTENC` policy to only ban hybrid keys.\n\nPR #5247 went unnecessarily overboard in its quest to stomp out uses of hybrid keys and made UTXOs that already existed at the time unspendable.  PR #33755 partially reverts this change so that only hybrid keys are excluded from processing in  CHECKMULTISIG.\n\n### 4. Bring `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE` policy in line with BIP 143 requirements.\n\nThis task is technically unrelated to legacy multisig policy, being instead about Segwit V0 multisig policy.  However the policy implemented in Bitcoin Core does not match the policy stated in BIP 143, and they ought to be brought into agreement. Either by implementing the policy correctly (as #33759 does), or by amending BIP 143 to describe the current policy as implemented.\n\nIn particular, both tasks 2 and 3 need to be completed in order to make stuck UTXOs, such as 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 spendable by policy again.\n\nI want to make it clear that UTXOs such as the above are not particularly abusive.  They were simply caught up incidentally in the policy changes of PR #5247, which was only about banning the use of hybrid keys.  4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1 has no hybrid nor hybrid looking pubkeys in it.\n\n```\t\nOP_PUSHNUM_1\nOP_PUSHBYTES_33 035bceeb417f25beaa28d133ee7b28faa1e4f5c2f76b8daf12c3fab18261718790\nOP_PUSHBYTES_33 1c434e545250525459000000000000000000000001000000004190ab0000000000\nOP_PUSHNUM_2\nOP_CHECKMULTISIG\n```\n*The script from UTXO 4dacd03d73cb497229dbfe2e7209adc4221540efe0e4c57f408b09b2fd36ece6:1*",
      "state": "open",
      "user": "roconnor-blockstream",
      "created_at": "2025-11-16T02:09:46Z",
      "updated_at": "2026-01-22T03:35:46Z",
      "closed_at": null,
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/33882",
      "labels": [
        "Brainstorming",
        "TX fees and policy"
      ],
      "comment_data": [
        {
          "id": 3765612745,
          "user": "151henry151",
          "body": "So, have I got this right?\n\nKeeping strict template matching reserves legacy script space for future upgrades but leaves soft-confiscated UTXOs unsolvable by policy.\n\nUsing sigop-based checks, as implemented in my PR, accepts scripts when Solver() recognizes them or when they have acceptable sigop counts. This uses more of that reserved space but allows those UTXOs to be spent.\n\nThe third option is separating the \"can we parse this\" and \"is this stupid\" parts of Solver(). This would require more refactoring but could improve separation.",
          "created_at": "2026-01-18T19:02:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 542,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3768003259,
          "user": "ajtowns",
          "body": "We do template matching for three things: (a) figuring out known address types that the wallet can/should spend, (b) verifying newly created outputs are sane, (c) verifying existing outputs are spendable. For (a), using uncompressed/hybrid keys for a new change address would be nuts, eg, and that's also true to some (much lesser) extent for (b). But (c) is a very different case, and code reuse there has led us a bit astray, IMO anyway.\n\nI'm supportive of allowing existing utxos to be spent, particularly if they were once easily spendable using Bitcoin Core (or the satoshi client prior to the name change), and there's no ambiguity as to the validity of spending them; but outside of that, I think it makes more sense to deprecate/discourage legacy script and bare multisig (ie, scriptPubKeys for which there's no address format) rather than to support/encourage it further.\n\nFor stuff encoded in p2sh, p2wsh or tapscript, I think the only reason to make consensus-valid things unspendable is the same motive as for making inscriptions unspendable. I don't think it makes much sense to do that by default (having it be a configurable behaviour is another matter), so I guess that means I don't think BIP 143's policy-level prohibition on uncompressed/hybrid keys makes sense in the first place. The [original discussion](https://github.com/bitcoin/bitcoin/pull/8499#issuecomment-250497587) included the comment \"If we don't use this opportunity now to get rid of them, we probably won't ever be until a new script revision entirely.\" but we do have a new script revision now without them (ie, tapscript), so maintaining the difference between policy and consensus there doesn't seem to have much value to me. Likewise it doesn't really seem worth it to propose a consensus change at this point to upgrade 143's default policy to being enforced as consensus. Maybe others mileage varies? Changing the policy rule while still diverging from consensus doesn't make much sense to me. It would probably be good if someone ran a reindex with both the current and proposed policies for non-compressed keys in p2wsh enforced as a consensus rule, to see if there are any transactions in the blockchain violating those rules...\n\nAnyway, that's my (current) take, for whatever that's worth.",
          "created_at": "2026-01-19T12:05:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2285,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3774289261,
          "user": "151henry151",
          "body": "Running a reindex with SCRIPT_VERIFY_WITNESS_PUBKEYTYPE enforced as a consensus rule in GetBlockScriptFlags() after segwit activation. Monitoring for consensus failures; will update once the reindex completes.\n\n> It would probably be good if someone ran a reindex with both the current and proposed policies for non-compressed keys in p2wsh enforced as a consensus rule, to see if there are any transactions in the blockchain violating those rules...\n\nJust to confirm: since the current state is policy-only (not consensus), I'm only testing the proposed consensus enforcement. Is there a specific reason to also test the current policies as consensus, or is this sufficient?",
          "created_at": "2026-01-20T18:14:13Z",
          "drama_signals": {
            "drama_keywords": 2,
            "positive_keywords": 0,
            "text_length": 675,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776205952,
          "user": "ajtowns",
          "body": "> Just to confirm: since the current state is policy-only (not consensus), I'm only testing the proposed consensus enforcement. Is there a specific reason to also test the current policies as consensus, or is this sufficient?\n\nI'm not sure what you're asking; this issue (and #33759) proposes changing the meaning of `SCRIPT_VERIFY_WITNESS_PUBKEYTYPE`. Knowing whether any confirmed txs violate policy as-is, or the proposed change would both be interesting, though if nothing violates with the proposed change, nothing should violate under the current policy either.",
          "created_at": "2026-01-21T05:19:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 567,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3781700801,
          "user": "151henry151",
          "body": "@ajtowns I guess my language there was not very clear, sorry about that. My confusion was simply about this line of your previous reply:\n\n> It would probably be good if someone ran a reindex with **both the current and proposed policies** for non-compressed keys in p2wsh enforced as a consensus rule, to see if there are any transactions in the blockchain violating those rules\n\nI am running a reindex to determine whether any existing transactions violate the proposed policy, but was just confused about the idea of checking to see if any transactions violate the **existing** policy. I understand some UTXOs are soft confiscated by the current policy, but thought it would be impossible for a transaction to be confirmed on the blockchain and yet also in violation of the current policy. I just want to be sure I'm understanding everything to the best of my ability. ",
          "created_at": "2026-01-21T23:53:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 871,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3782320432,
          "user": "ajtowns",
          "body": "If some miners accepted txs out of band and didn't enforce the policy specified by BIP143, there might by confirmed txs in the blockchain that violate the existing policy.",
          "created_at": "2026-01-22T03:24:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 171,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3782344464,
          "user": "151henry151",
          "body": "Ah, I see now. Thanks for explaining. My workstation is slow and old, so I'm only 65% through the reindex with the changed policy, but when I'm finished with that I'll check with current policy as well and share my results (and methodology) for review.",
          "created_at": "2026-01-22T03:35:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 252,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 1,
        "text_length": 4407,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1959828375,
      "number": 28722,
      "title": "Multiprocess tracking issue",
      "body": "This issue will be updated to reflect the current state of bitcoin core [multiprocess support](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md).\n\n---\n\nPRs for review related to building & releasing:\n\n- [ ] #34284\n- [ ] #33795\n- [ ] #32387\n- [ ] Upstream [libmultiprocess pulls](https://github.com/chaincodelabs/libmultiprocess/pulls)\n\nPRs for review related to mining:\n\n- [ ] #32420\n- [ ] #33922 \n- [ ] #33936\n- [ ] #30437\n- [ ] #33421\n- [ ] #33965\n- [ ] #33966\n- [ ] #34020\n- [ ] Tracking issue #33777\n\nPRs for review related wallet & gui & cli:\n\n- [ ] #29409\n- [ ] #10102\n- [ ] #19460\n- [ ] #19461\n- [ ] #32297\n- [ ] #32898\n\nIssues:\n\n- [ ] #32669\n- [ ] #32802\n- [ ] #33341\n- [ ] #33387\n- [ ] #33756\n- [ ] #33897\n- [ ] #33899 \n- [ ] #33923 \n- [ ] #33940\n- [ ] #33994\n- [ ] #34014\n- [ ] #34250\n\nPRs / issues closed:\n\n- [X] ~#10242~\n- [X] ~#10295~\n- [X] ~#10600~\n- [X] ~#10244~\n- [X] ~#10605~\n- [X] ~#14636~\n- [X] ~#14437~\n- [X] ~#14711~\n- [X] ~#15342~\n- [X] ~#15373~\n- [X] ~#15288~\n- [X] ~#15531~\n- [X] ~#10973~\n- [X] ~#16839~\n- [X] ~#17906~\n- [X] ~#18278~\n- [X] ~#16367~\n- [X] ~#17999~\n- [X] ~#18743~\n- [X] ~#18587~\n- [X] ~#18677~\n- [X] ~#20494~\n- [X] ~#20046~\n- [X] ~#21035~\n- [X] ~#21732~\n- [X] ~#19160~\n- [X] ~#22216~\n- [X] ~#22214~\n- [X] ~#22218~\n- [X] ~bitcoin-core/gui#360~\n- [X] ~#22215~\n- [X] ~#22217~\n- [X] ~#19101~\n- [X] ~#22848~\n- [X] ~#22219~\n- [X] ~#23003~\n- [X] ~#23006~\n- [X] ~#23004~\n- [X] ~#23005~\n- [X] ~#23499~\n- [X] ~#28721~\n- [X] ~#28907~\n- [X] ~#28978~\n- [X] ~#28921~\n- [X] ~#28929~\n- [X] ~#30509~\n- [X] ~#30510~\n- [X] ~#31196~\n- [X] ~#31197~\n- [X] ~#30940~\n- [X] ~#30955~\n- [X] ~#31105~\n- [X] ~#31003~\n- [X] ~#31288~\n- [X] ~#31480~\n- [X] ~#31318~\n- [X] ~#31196~\n- [X] ~#31740~\n- [X] ~#31151~\n- [X] ~#31455~\n- [X] ~#31763~\n- [X] ~#31815~\n- [X] ~#31945~\n- [X] ~#31283~\n- [X] ~#31827~\n- [X] ~#31564~\n- [X] ~#31866~\n- [X] ~#31992~\n- [X] ~#31741~\n- [X] ~#30975~\n- [X] ~#31785~\n- [X] ~#32271~\n- [X] ~#32378~\n- [X] ~#31375~\n- [X] ~#32634~\n- [X] ~#32641~\n- [X] ~#32690~ \n- [X] ~#31981~\n- [X] ~#32760~\n- [X] ~#32781~\n- [X] ~#31679~\n- [X] ~#31802~\n- [X] ~#32345~\n- [X] ~#33190~\n- [X] ~#33322~\n- [X] ~#33222~\n- [X] ~#33233~\n- [X] ~#33241~\n- [X] ~#33219~\n- [X] ~#33235~\n- [X] ~#33290~\n- [X] ~#33315~\n- [X] ~#33201~\n- [X] ~#33176~\n- [X] ~#33308~\n- [X] ~#33279~\n- [X] ~#33281~\n- [X] ~#33312~\n- [X] ~#33256~\n- [X] ~#33342~\n- [X] ~#33348~\n- [X] ~#33412~\n- [X] ~#33244~\n- [X] ~#33277~\n- [X] ~#33380~\n- [X] ~#33372~\n- [X] ~#33374~\n- [X] ~#33459~\n- [X] ~#33229~\n- [X] ~#31618~\n- [X] ~#33417~\n- [X] ~#33420~\n- [X] ~#33518~\n- [X] ~#33519~\n- [X] ~#33517~\n- [X] ~#33647~\n- [X] ~#32275~\n- [X] ~#30983~\n- [X] ~#31109~\n  - caused by #31003\n  - resolved by #31283\n- [X] ~#31756~\n- [X] ~#33439~\n- [X] ~#31098~\n- [X] ~#33749~\n- [X] ~#33445~\n- [X] ~#33676~\n- [X] ~#33575~\n- [X] ~#33745~\n- [X] ~#33511~\n- [X] ~#33554~\n- [X] ~#33884~\n- [X] ~#33880~\n- [X] ~#33890~\n- [X] ~#33463~\n- [X] ~#33774~\n- [X] ~#33623~\n- [X] ~#34030~\n- [X] ~#34003~ \n- [X] ~#34102~\n- [X] ~#33819~\n- [X] ~#34363~\n- [X] ~#34187~\n- [X] ~#33576~\n\nLinks:\n\n* [Documentation](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md)\n* [Project board](https://github.com/bitcoin/bitcoin/projects/10)\n* [Wiki](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Process-Separation)\n* [Presentation](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit) ([code shown](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21))\n* [Working group](https://signal.group/#CjQKIJBeCC9-Jbnd_3sPDFPy7TB6ZPkW3k1J5tjwQ-IN_Gu1EhDV_4urKfbKiNIAhdblAulp)\n* [List of working groups](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Working-Groups)",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2023-10-24T18:22:37Z",
      "updated_at": "2026-01-22T01:37:52Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/28722",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3711,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3496106332,
      "number": 33576,
      "title": "29.x: using a local libmultiprocess install will no-longer work",
      "body": "Given that the `29.x` branch doesn't have the changes to accomodate upstream changes in libmultiprocess, anyone who builds and installs libmultiprocess, and then tries to build Core with `-DWITH_MULTIPROCESS=ON`, will get a compile failure:\n```bash\n[ 34%] Building CXX object src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/protocol.cpp.o\n/bitcoin/src/ipc/capnp/protocol.cpp: In destructor 'virtual ipc::capnp::{anonymous}::CapnpProtocol::~CapnpProtocol()':\n/bitcoin/src/ipc/capnp/protocol.cpp:45:62: error: no matching function for call to 'std::unique_lock<std::mutex>::unique_lock(mp::Mutex&)'\n   45 |             std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                              ^\nIn file included from /usr/include/c++/13/mutex:46,\n                 from /bitcoin/src/threadsafety.h:9,\n                 from /bitcoin/src/logging.h:10,\n                 from /bitcoin/src/interfaces/node.h:10,\n                 from /bitcoin/src/interfaces/init.h:11,\n                 from /bitcoin/src/ipc/capnp/protocol.cpp:5:\n/usr/include/c++/13/bits/unique_lock.h:68:16: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   68 |       explicit unique_lock(mutex_type& __m)\n      |                ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:68:40: note:   no known conversion for argument 1 from 'mp::Mutex' to 'std::unique_lock<std::mutex>::mutex_type&' {aka 'std::mutex&'}\n   68 |       explicit unique_lock(mutex_type& __m)\n      |                            ~~~~~~~~~~~~^~~\n/usr/include/c++/13/bits/unique_lock.h:97:9: note: candidate: 'template<class _Rep, class _Period> std::unique_lock<_Mutex>::unique_lock(mutex_type&, const std::chrono::duration<_Rep, _Period>&) [with _Period = _Rep; _Mutex = std::mutex]'\n   97 |         unique_lock(mutex_type& __m,\n      |         ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:97:9: note:   template argument deduction/substitution failed:\n/bitcoin/src/ipc/capnp/protocol.cpp:45:62: note:   candidate expects 2 arguments, 1 provided\n   45 |             std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                              ^\n/usr/include/c++/13/bits/unique_lock.h:90:9: note: candidate: 'template<class _Clock, class _Duration> std::unique_lock<_Mutex>::unique_lock(mutex_type&, const std::chrono::time_point<_Clock, _Duration>&) [with _Duration = _Clock; _Mutex = std::mutex]'\n   90 |         unique_lock(mutex_type& __m,\n      |         ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:90:9: note:   template argument deduction/substitution failed:\n/bitcoin/src/ipc/capnp/protocol.cpp:45:62: note:   candidate expects 2 arguments, 1 provided\n   45 |             std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                              ^\n/usr/include/c++/13/bits/unique_lock.h:112:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(std::unique_lock<_Mutex>&&) [with _Mutex = std::mutex]'\n  112 |       unique_lock(unique_lock&& __u) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:112:33: note:   no known conversion for argument 1 from 'mp::Mutex' to 'std::unique_lock<std::mutex>&&'\n  112 |       unique_lock(unique_lock&& __u) noexcept\n      |                   ~~~~~~~~~~~~~~^~~\n/usr/include/c++/13/bits/unique_lock.h:83:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::adopt_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   83 |       unique_lock(mutex_type& __m, adopt_lock_t) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:83:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:79:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::try_to_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   79 |       unique_lock(mutex_type& __m, try_to_lock_t)\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:79:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:75:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::defer_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   75 |       unique_lock(mutex_type& __m, defer_lock_t) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:75:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:64:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock() [with _Mutex = std::mutex]'\n   64 |       unique_lock() noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:64:7: note:   candidate expects 0 arguments, 1 provided\n/bitcoin/src/ipc/capnp/protocol.cpp:46:21: error: 'class mp::EventLoop' has no member named 'removeClient'\n   46 |             m_loop->removeClient(lock);\n      |                     ^~~~~~~~~~~~\n/bitcoin/src/ipc/capnp/protocol.cpp: In lambda function:\n/bitcoin/src/ipc/capnp/protocol.cpp:87:66: error: no matching function for call to 'std::unique_lock<std::mutex>::unique_lock(mp::Mutex&)'\n   87 |                 std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                                  ^\n/usr/include/c++/13/bits/unique_lock.h:68:16: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   68 |       explicit unique_lock(mutex_type& __m)\n      |                ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:68:40: note:   no known conversion for argument 1 from 'mp::Mutex' to 'std::unique_lock<std::mutex>::mutex_type&' {aka 'std::mutex&'}\n   68 |       explicit unique_lock(mutex_type& __m)\n      |                            ~~~~~~~~~~~~^~~\n/usr/include/c++/13/bits/unique_lock.h:97:9: note: candidate: 'template<class _Rep, class _Period> std::unique_lock<_Mutex>::unique_lock(mutex_type&, const std::chrono::duration<_Rep, _Period>&) [with _Period = _Rep; _Mutex = std::mutex]'\n   97 |         unique_lock(mutex_type& __m,\n      |         ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:97:9: note:   template argument deduction/substitution failed:\n/bitcoin/src/ipc/capnp/protocol.cpp:87:66: note:   candidate expects 2 arguments, 1 provided\n   87 |                 std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                                  ^\n/usr/include/c++/13/bits/unique_lock.h:90:9: note: candidate: 'template<class _Clock, class _Duration> std::unique_lock<_Mutex>::unique_lock(mutex_type&, const std::chrono::time_point<_Clock, _Duration>&) [with _Duration = _Clock; _Mutex = std::mutex]'\n   90 |         unique_lock(mutex_type& __m,\n      |         ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:90:9: note:   template argument deduction/substitution failed:\n/bitcoin/src/ipc/capnp/protocol.cpp:87:66: note:   candidate expects 2 arguments, 1 provided\n   87 |                 std::unique_lock<std::mutex> lock(m_loop->m_mutex);\n      |                                                                  ^\n/usr/include/c++/13/bits/unique_lock.h:112:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(std::unique_lock<_Mutex>&&) [with _Mutex = std::mutex]'\n  112 |       unique_lock(unique_lock&& __u) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:112:33: note:   no known conversion for argument 1 from 'mp::Mutex' to 'std::unique_lock<std::mutex>&&'\n  112 |       unique_lock(unique_lock&& __u) noexcept\n      |                   ~~~~~~~~~~~~~~^~~\n/usr/include/c++/13/bits/unique_lock.h:83:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::adopt_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   83 |       unique_lock(mutex_type& __m, adopt_lock_t) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:83:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:79:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::try_to_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   79 |       unique_lock(mutex_type& __m, try_to_lock_t)\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:79:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:75:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock(mutex_type&, std::defer_lock_t) [with _Mutex = std::mutex; mutex_type = std::mutex]'\n   75 |       unique_lock(mutex_type& __m, defer_lock_t) noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:75:7: note:   candidate expects 2 arguments, 1 provided\n/usr/include/c++/13/bits/unique_lock.h:64:7: note: candidate: 'std::unique_lock<_Mutex>::unique_lock() [with _Mutex = std::mutex]'\n   64 |       unique_lock() noexcept\n      |       ^~~~~~~~~~~\n/usr/include/c++/13/bits/unique_lock.h:64:7: note:   candidate expects 0 arguments, 1 provided\n/bitcoin/src/ipc/capnp/protocol.cpp:88:25: error: 'class mp::EventLoop' has no member named 'addClient'\n   88 |                 m_loop->addClient(lock);\n      |                         ^~~~~~~~~\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc.dir/build.make:178: src/ipc/CMakeFiles/bitcoin_ipc.dir/capnp/protocol.cpp.o] Error 1\ngmake[1]: *** [CMakeFiles/Makefile2:1208: src/ipc/CMakeFiles/bitcoin_ipc.dir/all] Error 2\ngmake: *** [Makefile:146: all] Error 2\n```\n\nUnless we backport a number of ipc related changes to this branch (unlikely), this will be broken for the rest of this branches life. This seems like something we might want to document.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-10-08T16:21:43Z",
      "updated_at": "2026-01-22T01:36:11Z",
      "closed_at": "2026-01-22T01:36:11Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/33576",
      "labels": [
        "Docs",
        "Build system",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3782006642,
          "user": "ryanofsky",
          "body": "I think this is resolved with #33623. The dependencies document now mentions which versions are compatible https://github.com/bitcoin/bitcoin/blob/29.x/doc/dependencies.md#optional",
          "created_at": "2026-01-22T01:36:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 180,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 9781,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3723882082,
      "number": 34062,
      "title": "RFC: separate kernel logging infrastructure",
      "body": "tl;dr: kernel logging is cumbersome. I propose we layer logging so we can enable structured logging and a much simplified kernel logging interface without overcomplicating node logging.\n\n## Motivation\n\nThe `bitcoinkernel` library (#27587) [exposes](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L698-L778) functionality to interface with the kernel logging. This includes registering callbacks for log statements, level/category filtering, string formatting options, and more.\n\nKernel logging has a few problems:\n- **P1**: [callbacks](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L304) operate on formatted strings, so users need to parse the string to get the timestamp, category, level, ... based on which options are set. This is cumbersome, brittle, and inefficient.\n- **P2**: the [filtering interface](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.h#L737) is not really intuitive, requiring users to call combinations of `btck_logging_set_level_category` and `btck_logging_enable_category` when they want to produce `debug` or `trace` logs. The level/category system makes sense for node, because it directly controls what gets written to disk and stdout, and there are quite a lot more categories producing logs. Kernel doesn't really need this - users control what happens to the logs, and can do any filtering/manipulation in the callback they provide.\n- **P3**: the node logging infrastructure has quite a bit more functionality than is necessary for a library, including ratelimiting, log formatting, outputting, buffering, ... This introduces unnecessary code and interface complexity.\n- **P4**: it [uses](https://github.com/bitcoin/bitcoin/blob/b26762bdcb941096ccc6f53c3fb5a7786ad735e7/src/kernel/bitcoinkernel.cpp#L237) the global (node) logger, which goes against the otherwise context local (or stateless) design of the `bitcoinkernel` interface.\n\n## Approach\n\nI propose we address problems P1, P2 and P3 by layering the logging infrastructure. Roughly, this would mean:\n1. Implement a minimal `util::log::Logger` class (see [Appendix](#Appendix)) that dispatches structured log entries to registered callbacks. This is a low-level logger that does not perform formatting, rate limiting, or category filtering - it simply dispatches to callbacks.\n2. Refactor `BCLog::Logger` into `BCLog::Sink`, which registers a callback on `util::log::GetLogger()` and handles all node-specific functionality (category filtering, rate limiting, file output, formatting, ...).\n3. Update kernel code to include `util/log.h` instead of `logging.h`. The existing logging macros (`LogInfo`, `LogDebug`, etc.) continue to work unchanged.\n4. Simplify `bitcoinkernel` C API to reflect the simpler `util::log::Logger` interface (structured logging, level-based, ...), we can now completely remove `btck_LoggingOptions`.\n5. Remove `logging.h` and `logging.cpp` from the kernel library completely.\n\n**Note:** I'm leaving problem P4 out of scope for this proposal. I think it already has sufficient merit with a global logger, and I want to keep scope limited. However, I do believe layered logging infrastructure will make implementing P4 easier.\n\n## Balance\n\nThe main benefits and downsides of this approach:\n\n**Benefits:**\n- **B1:** a kernel-native structured logging interface that minimizes complexity and makes for a much more ergonomic interface, enabling structured logging instead of string parsing.\n- **B2:** doesn't complicate node logging purely for the purpose of accommodating diverging requirements for kernel. For example, I suspect projects like #30342 should be much easier with layered kernel logging.\n- **B3:** reduces friction if/when node migrates to use the public `bitcoinkernel` interface by having already completely decoupled logging.\n- ... (what have I missed?)\n\n**Downsides:**\n- **D1:** levels-based filtering has some performance overhead by formatting all (kernel) debug log strings instead of just the subset of categories specified. Note that this _only_ applies when debug is enabled, and that kernel has a lot less logging than node.\n- ... (what have I missed?)\n\n## Scope\n\nI have implemented this approach in https://github.com/bitcoin/bitcoin/compare/master...stickies-v:bitcoin:2025-12/kernel-logging-layering. Most of the changes are quite straightforward, including refactoring `BCLog::Logger` to `BCLog::Sink`, adding tests, and adding a `util::log::Logger` interface.\n\n## Appendix\n\n### Interfaces\n#### util::log::Logger\n\n```cpp\nclass Logger\n{\npublic:\n    using Callback = std::function<void(const Entry&)>;\n    using CallbackHandle = std::list<Callback>::iterator;\n\n    //! Register a callback to receive log entries. Returns a handle for unregistration.\n    [[nodiscard]] CallbackHandle RegisterCallback(Callback callback);\n\n    //! Unregister a previously registered callback.\n    void UnregisterCallback(CallbackHandle handle);\n\n    //! Set the minimum log level. Messages below this level are discarded.\n    void SetMinLevel(Level level);\n\n    //! Get the current minimum log level.\n    Level GetMinLevel() const;\n\n    //! Returns true if a message at the given level would be logged.\n    bool WillLog(Level level) const;\n\n    //! Returns true if any callbacks are registered.\n    bool Enabled() const;\n\n    //! Format message and dispatch to all registered callbacks. No-op if minimum log level not met.\n    template <typename... Args>\n    void Log(Level level, uint64_t category, std::source_location loc, bool should_ratelimit,\n             util::ConstevalFormatString<sizeof...(Args)> fmt, const Args&... args);\n};\n```\n\n#### `bitcoinkernel` C logging interface\n\n```c\ntypedef void (*btck_LogCallback)(void* user_data, const btck_LogEntry* entry);\n\nstruct btck_LogEntry {\n    const char* message;       //!< Log message\n    size_t message_len;        //!< Log message length\n    const char* file_name;     //!< Source file name\n    size_t file_name_len;      //!< Source file name length\n    const char* function_name; //!< Source function name\n    size_t function_name_len;  //!< Source function name length\n    const char* thread_name;   //!< Thread name\n    size_t thread_name_len;    //!< Thread name length\n    int64_t timestamp_ns;      //!< Timestamp in nanoseconds since epoch\n    uint32_t line;             //!< Source line number\n    btck_LogLevel level;       //!< Log level\n    btck_LogCategory category; //!< Log category\n};\n\nBITCOINKERNEL_API void btck_logging_set_min_level(btck_LogLevel level);\n\nBITCOINKERNEL_API btck_LoggingConnection* BITCOINKERNEL_WARN_UNUSED_RESULT btck_logging_connection_create(\n    btck_LogCallback log_callback,\n    void* user_data,\n    btck_DestroyCallback user_data_destroy_callback) BITCOINKERNEL_ARG_NONNULL(1);\n\nBITCOINKERNEL_API void btck_logging_connection_destroy(btck_LoggingConnection* logging_connection);\n```\n",
      "state": "open",
      "user": "stickies-v",
      "created_at": "2025-12-12T15:43:10Z",
      "updated_at": "2026-01-21T20:08:32Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/34062",
      "labels": [
        "Brainstorming",
        "Utils/log/libs"
      ],
      "comment_data": [
        {
          "id": 3780922349,
          "user": "stickies-v",
          "body": "I've now opened https://github.com/bitcoin/bitcoin/pull/34374 to address this issue. Compared to the [previous approach](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3667169341), the main changes are:\n- `Dispatcher` (previously `util::log::Logger`) is now instantiated with a `FilterFunc filter` predicate, that enables `util` to remain oblivious to the `logging.h` level/category setting logic whilst still allowing log consumers (such as `BCLog::Logger`) to avoid overhead (e.g string formatting, lambda evaluation) when logs don't pass the filter. I think this should address @ajtowns' main outstanding [concern](https://github.com/bitcoin/bitcoin/issues/34062#issuecomment-3677360573)? It also avoids the need for `BCLog::Logger` to synchronize its minimum levels with `util::log::Dispatcher`'s minimum level, simplifying the implementation in some ways (but complicating it in others, e.g. requiring a new global `Dispatcher`).\n- rename `util::log::Logger` to `util::log::Dispatcher` so we can keep the `BCLog::Logger` name unchanged and minimize unnecessary code churn.\n\nI'd be grateful to hear your feedback on this new approach on the PR. Also thanks to @ryanofsky for giving me ideas (offline) to refine the approach.",
          "created_at": "2026-01-21T20:08:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1242,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 2,
        "text_length": 7027,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3799701007,
      "number": 34248,
      "title": "qa: `tool_bench_sanity_check.py --bench=MempoolCheck` failure",
      "body": "On NetBSD 10.1, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/20872235098/job/59975888965:\n```\n90/455 - tool_bench_sanity_check.py --bench=MempoolCheck failed, Duration: 26 s\n\nstdout:\n2026-01-10T04:19:37.691064Z TestFramework (INFO): PRNG seed is: 4615966168349338210\n2026-01-10T04:19:37.692250Z TestFramework (INFO): Initializing test directory /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test_runner_₿_🏃_20260110_041921/tool_bench_sanity_check_363\n2026-01-10T04:19:37.692513Z TestFramework (INFO): Starting: /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/bin/bench_bitcoin -filter=MempoolCheck -sanity-check\nRunning with -sanity-check option, output is being suppressed as benchmark results will be useless.\n2026-01-10T04:19:38.567933Z TestFramework (INFO): Success!\n2026-01-10T04:20:03.637759Z TestFramework.utils (ERROR): wait_until() failed. Predicate: ''''\n        wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n'''\n\n\nstderr:\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/build/test/functional/tool_bench_sanity_check.py\", line 41, in <module>\n    BenchSanityCheck(__file__).main()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 154, in main\n    exit_code = self.shutdown()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 281, in shutdown\n    self.network_thread.close()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/p2p.py\", line 749, in close\n    wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/util.py\", line 420, in wait_until_helper_internal\n    raise AssertionError(\"Predicate {} not true after {} seconds\".format(predicate_source, timeout))\nAssertionError: Predicate ''''\n        wait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n''' not true after 10.0 seconds\n\n\n```",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2026-01-10T13:16:07Z",
      "updated_at": "2026-01-21T16:42:25Z",
      "closed_at": "2026-01-21T16:42:25Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34248",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3778605098,
          "user": "vasild",
          "body": "@maflcko, I think yes, after https://github.com/bitcoin/bitcoin/commit/39ca01525977e5aab078198874f6bf035b552b3b a stop() will always be called on a running loop. I think what is happening here is:\n\n```python\nself.network_event_loop.call_soon_threadsafe(self.network_event_loop.stop)\nwait_until_helper_internal(lambda: not self.network_event_loop.is_running(), timeout=timeout)\n```\nthe second line times out, \"not true after 10.0 seconds\". So it just did not stop in 10 seconds? In other words, that \"soon\" in `call_soon_threadsafe()` is not soon enough?",
          "created_at": "2026-01-21T15:03:55Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 553,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3778799615,
          "user": "maflcko",
          "body": "Heh, the simplest cause could be the correct one. A 10 second delay due to resource contention seems a bit high, but this is running a VM (bsd) inside another VM (GHA), so it seems plausible.\n\nI guess scaling here with the timeout factor may be correct anyway. Done in https://github.com/bitcoin/bitcoin/pull/34369\n\nIf this happens the next time in the nightly repo, the timeout should be 80 seconds here. If that happens, we can start looking again.",
          "created_at": "2026-01-21T15:23:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 450,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2459,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3827821755,
      "number": 34335,
      "title": "Request: Support for Vietnamese localization of Bitcoin Core source/documents",
      "body": "Hi Bitcoin Core community 👋\n\nI’m a developer and member of the Vietnamese Bitcoin community. We greatly appreciate all the work done by the contributors of Bitcoin Core and the open-source ecosystem.\n\nWe would like to help make Bitcoin more accessible to Vietnamese speakers by providing Vietnamese translations of:\n\nUser-facing strings in the Bitcoin Core UI (translation of menu items, labels, messages, etc.)\n\nEnd-user documentation (README, Bitcoin.org docs, guides)\n\nDeveloper documentation (API docs, examples)\n\nVietnamese is spoken by over 95 million people, and having localized docs and UI would make Bitcoin more useful and easier to adopt for Vietnamese developers and users.\n\nBefore starting work, we would like to ask for guidance and community support:\n\nIs there an existing localization process for Bitcoin Core that we should follow?\n\nShould translations be maintained in a specific format/tool (e.g., gettext .po, Crowdin, Weblate, etc.)?\n\nAre there maintainers willing to review and merge Vietnamese translations?\n\nDo you recommend guidelines for terminology (e.g., how to translate technical terms like UTXO, fee bumping, mempool, PSBT)?\n\nWe are happy to start a working group and coordinate the translation effort. Any pointers, best practices, or existing localization infrastructure would be very helpful.\n\nThanks so much for your time and for all the contributions to Bitcoin! ❤️\n\nBest,\n\nLong Ngo",
      "state": "closed",
      "user": "adminvsrm",
      "created_at": "2026-01-19T03:20:35Z",
      "updated_at": "2026-01-21T16:23:16Z",
      "closed_at": "2026-01-21T15:41:41Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34335",
      "labels": [
        "Docs"
      ],
      "comment_data": [
        {
          "id": 3767381375,
          "user": "maflcko",
          "body": "> End-user documentation (README, Bitcoin.org docs, guides)\n\nThis seems the wrong place to discuss third-party translations. `bitcoin.org` is a separate website, tracked in another repo. You'll have to reach out to the respective other places to discuss translations with them.\n\n\n\n> User-facing strings in the Bitcoin Core UI (translation of menu items, labels, messages, etc.)\n\nThe GUI translations are tracked on transifex, see the docs. They also contain a \"glossary\" with terminology. \n\nAs for Bitcoin Core RPC doc translations and markdown files, I don't think there is currently any infra to support this.",
          "created_at": "2026-01-19T09:42:29Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 1,
            "text_length": 611,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3778970473,
          "user": "fanquake",
          "body": "Thanks. I think @hebasto is best placed to answer any questions. However closing this for now.",
          "created_at": "2026-01-21T15:41:41Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 94,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3779363705,
          "user": "hebasto",
          "body": "> I think [@hebasto](https://github.com/hebasto) is best placed to answer any questions. However closing this for now.\n\nI have nothing to add to @maflcko's exhaustive [comment](https://github.com/bitcoin/bitcoin/issues/34335#issuecomment-3767381375).",
          "created_at": "2026-01-21T16:23:16Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 250,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1497,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3775045982,
      "number": 34187,
      "title": "Intermittent issue in rpc_misc.py:                                    test_framework.authproxy.JSONRPCException: 'echoipc' RPC took longer than 1200.000000 seconds.",
      "body": "Not sure why this hits this long timeout. The logs are https://github.com/bitcoin/bitcoin/actions/runs/20618562716/job/59216177088?pr=33775#step:11:3901:\n\n```\ntest  2025-12-31T12:48:06.476897Z TestFramework (INFO): test echoipc (testing spawned process in multiprocess build) \n node0 2025-12-31T12:48:06.477022Z [http] [httpserver.cpp:307] [http_request_cb] [http] Received a POST request for / from 127.0.0.1:50326 \n node0 2025-12-31T12:48:06.477055Z [httpworker.0] [rpc/request.cpp:243] [parse] [rpc] ThreadRPCServer method=echoipc user=__cookie__ \n node0 2025-12-31T12:48:06.478285Z [httpworker.0] [ipc/interfaces.cpp:64] [spawnProcess] [ipc] Process bitcoin-node pid 17479 launched \n node0 2025-12-31T12:48:06.478605Z [httpworker.0] [ipc/capnp/protocol.cpp:53] [IpcLogFn] ipc: {bitcoin-node-17465/b-httpworker.0-17468} IPC client first request from current thread, constructing waiter \n node0 2025-12-31T12:48:06.478652Z [capnp-loop] [ipc/capnp/protocol.cpp:50] [IpcLogFn] [ipc] {bitcoin-node-17465/b-httpworker.0-17468} IPC client send Init.construct$Params \n node0 2025-12-31T12:48:06.478677Z [capnp-loop] [ipc/capnp/protocol.cpp:47] [IpcLogFn] [ipc:trace] send data: (threadMap = <external capability>) \n node0 2025-12-31T12:48:50.987744Z [scheduler] [net.cpp:2439] [StartExtraBlockRelayPeers] [net] enabling extra block-relay-only peers \n node0 2025-12-31T12:52:04.064058Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:52:04.064130Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T12:52:42.016032Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:52:42.016107Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (8μs) \n node0 2025-12-31T12:53:06.019385Z [addcon] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:2924 started \n node0 2025-12-31T12:53:06.019463Z [addcon] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:2924 completed (7μs) \n node0 2025-12-31T12:59:30.084915Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T12:59:30.084991Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:01:13.165088Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:01:13.165160Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:03:05.989149Z [scheduler] [net.cpp:2401] [DumpAddresses] [net] Flushed 0 addresses to peers.dat  1ms \n node0 2025-12-31T13:04:09.110919Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:04:09.110995Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (7μs) \n node0 2025-12-31T13:04:39.009903Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 started \n node0 2025-12-31T13:04:39.009991Z [net] [logging/timer.h:58] [Log] [lock] Enter: lock contention m_nodes_mutex, ./net.cpp:1919 completed (8μs) \n test  2025-12-31T13:08:06.577668Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 174, in _get_response\n                                       http_response = self.__conn.getresponse()\n                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 1430, in getresponse\n                                       response.begin()\n                                     File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\n                                       version, status, reason = self._read_status()\n                                                                 ^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/http/client.py\", line 292, in _read_status\n                                       line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/usr/lib/python3.12/socket.py\", line 720, in readinto\n                                       return self._sock.recv_into(b)\n                                              ^^^^^^^^^^^^^^^^^^^^^^^\n                                   TimeoutError: timed out\n                                   During handling of the above exception, another exception occurred:\n                                   Traceback (most recent call last):\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/test_framework.py\", line 142, in main\n                                       self.run_test()\n                                     File \"/home/admin/actions-runner/_work/_temp/build/test/functional/rpc_misc.py\", line 96, in run_test\n                                       assert_equal(node.echoipc(\"hello\"), \"hello\")\n                                                    ^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/coverage.py\", line 50, in __call__\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 137, in __call__\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 111, in _request\n                                       return self._get_response()\n                                              ^^^^^^^^^^^^^^^^^^^^\n                                     File \"/home/admin/actions-runner/_work/_temp/test/functional/test_framework/authproxy.py\", line 176, in _get_response\n                                       raise JSONRPCException({\n                                   test_framework.authproxy.JSONRPCException: 'echoipc' RPC took longer than 1200.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\n",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-01T19:00:59Z",
      "updated_at": "2026-01-21T15:07:36Z",
      "closed_at": "2026-01-21T15:07:36Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/34187",
      "labels": [
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3767407092,
          "user": "maflcko",
          "body": "> [bitcoin-core/libmultiprocess#237](https://github.com/bitcoin-core/libmultiprocess/pull/237) probably fixes this\n\nI guess the subtree would have to be bumped ",
          "created_at": "2026-01-19T09:48:46Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 160,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776139626,
          "user": "ryanofsky",
          "body": "> I guess the subtree would have to be bumped\n\nThanks, created #34363 for this. I may create another PR for 30.x as well to go along with prior #33439 backport discussion",
          "created_at": "2026-01-21T04:51:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 170,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3778641578,
          "user": "fanquake",
          "body": "Closing now that #34363 is merged. Can reopen if we see this again.",
          "created_at": "2026-01-21T15:07:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 67,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 7241,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3838595861,
      "number": 34368,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "wm97artsociety",
      "created_at": "2026-01-21T14:45:37Z",
      "updated_at": "2026-01-21T14:45:49Z",
      "closed_at": "2026-01-21T14:45:46Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34368",
      "labels": [],
      "comment_data": [
        {
          "id": 3778513776,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM\n\nThe submission is not a coherent bug report or feature request: the title and body contain rambling, unrelated personal commentary and numeric claims rather than a clear technical issue or proposal. It also includes untouched template boilerplate and lacks actionable details, reproducible steps, or code changes, indicating an irrelevant/noisy submission.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2026-01-21T14:45:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 625,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3837993054,
      "number": 34367,
      "title": "intermittent issue in wallet_txn_clone.py (Windows ucrt) while starting network thread?",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/20090968443/job/57638966158?pr=32800#step:13:203:\n\n```\n77/276 - wallet_txn_clone.py failed, Duration: 1 s\n\nstdout:\n2025-12-10T08:04:27.500134Z TestFramework (INFO): PRNG seed is: 4018092284830106117\n\n\n\nstderr:\n\n\nCombine the logs and print the last 99999999 lines ...\n\n============\nCombined log for D:\\a\\_temp/test_runner_₿_🏃_20251210_075632/wallet_txn_clone_196:\n============\n\n test  2025-12-10T08:04:27.500134Z TestFramework (INFO): PRNG seed is: 4018092284830106117 \n test  2025-12-10T08:04:27.500433Z TestFramework (DEBUG): Setting up network thread \n```\n\n\nGiven that nothing else is printed on stdout, and stderr, the test must have failed before `setup_chain`, because that should log as well.\n\nThis leaves something with the network thread. However, if the thread throws an exception, it should still print to stderr. If it kills the program silently, it seems like an upstream python bug.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-21T12:17:39Z",
      "updated_at": "2026-01-21T12:40:51Z",
      "closed_at": "2026-01-21T12:40:51Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34367",
      "labels": [
        "Windows",
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3777795478,
          "user": "maflcko",
          "body": "> So this seems like an upstream Python bug.\n\nClosing for now, but discussion can continue, if someone finds something.",
          "created_at": "2026-01-21T12:18:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 119,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1031,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3837861134,
      "number": 34365,
      "title": "intermittent issue in mining_getblocktemplate_longpoll.py on Windows (ucrt?) line 48, in run_test                                        assert thr.is_alive()                                                                          AssertionError",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/20098915295/job/57665466725#step:13:1441:\n\n```\ntest  2025-12-10T12:59:26.888110Z TestFramework (INFO): Test that longpoll waits if we do nothing \n node0 2025-12-10T12:59:26.889941Z [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:62763 \n node0 2025-12-10T12:59:26.889991Z [httpworker.1] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=getblocktemplate user=__cookie__ \n node0 2025-12-10T12:59:26.891931Z [http] [httpserver.cpp:307] [void http_request_cb(evhttp_request*, void*)] [http] Received a POST request for / from 127.0.0.1:62777 \n node0 2025-12-10T12:59:26.891986Z [httpworker.0] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue&)] [rpc] ThreadRPCServer method=getblocktemplate user=__cookie__ \n node1 2025-12-10T13:00:10.571041Z [scheduler] [net.cpp:2438] [void CConnman::StartExtraBlockRelayPeers()] [net] enabling extra block-relay-only peers \n node0 2025-12-10T13:00:10.571042Z [scheduler] [net.cpp:2438] [void CConnman::StartExtraBlockRelayPeers()] [net] enabling extra block-relay-only peers \n node0 2025-12-10T13:01:25.759403Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node1 2025-12-10T13:01:25.759596Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node1 2025-12-10T13:01:25.759630Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:01:25.759804Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node0 2025-12-10T13:01:25.759858Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node0 2025-12-10T13:01:25.759918Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:01:25.759930Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:01:25.760024Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node0 2025-12-10T13:03:25.855676Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node1 2025-12-10T13:03:25.855784Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node1 2025-12-10T13:03:25.855886Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:03:25.855928Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:03:25.855956Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:03:25.855965Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:03:25.856070Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node0 2025-12-10T13:03:25.856081Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node1 2025-12-10T13:05:25.868748Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node0 2025-12-10T13:05:25.868933Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:05:25.868954Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node0 2025-12-10T13:05:25.869002Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node1 2025-12-10T13:05:25.869050Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node1 2025-12-10T13:05:25.869078Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node1 2025-12-10T13:05:25.869089Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node0 2025-12-10T13:05:25.869183Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node0 2025-12-10T13:07:25.900477Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node1 2025-12-10T13:07:25.900477Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node0 2025-12-10T13:07:25.900704Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node1 2025-12-10T13:07:25.900711Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:07:25.900725Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:07:25.900734Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:07:25.900896Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node0 2025-12-10T13:07:25.900907Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node1 2025-12-10T13:09:25.903436Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node0 2025-12-10T13:09:25.903443Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending ping (8 bytes) peer=0 \n node0 2025-12-10T13:09:25.903665Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node1 2025-12-10T13:09:25.903671Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: ping (8 bytes) peer=0 \n node0 2025-12-10T13:09:25.903687Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node1 2025-12-10T13:09:25.903705Z [msghand] [net.cpp:3902] [void CConnman::PushMessage(CNode*, CSerializedNetMsg&&)] [net] sending pong (8 bytes) peer=0 \n node0 2025-12-10T13:09:25.903838Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n node1 2025-12-10T13:09:25.903863Z [msghand] [net_processing.cpp:3433] [virtual void {anonymous}::PeerManagerImpl::ProcessMessage(CNode&, const std::string&, DataStream&, std::chrono::microseconds, const std::atomic<bool>&)] [net] received: pong (8 bytes) peer=0 \n test  2025-12-10T13:09:26.919928Z TestFramework (ERROR): Unexpected exception \n                                   Traceback (most recent call last):\n                                     File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 142, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"D:\\a\\bitcoin\\bitcoin/test/functional/mining_getblocktemplate_longpoll.py\", line 48, in run_test\n                                       assert thr.is_alive()\n                                              ~~~~~~~~~~~~^^\n                                   AssertionError\n```\n\nI fail to see how this could happen, because the join has a 5 second timeout, but the test failed after the 600 seconds authproxy timeout.\n\nSo this seems like an upstream Python bug.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2026-01-21T11:43:28Z",
      "updated_at": "2026-01-21T12:18:08Z",
      "closed_at": "2026-01-21T11:44:06Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34365",
      "labels": [
        "Windows",
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3777653240,
          "user": "maflcko",
          "body": "> So this seems like an upstream Python bug.\n\nClosing for now, but discussion can continue, if someone finds something.",
          "created_at": "2026-01-21T11:44:06Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 119,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 10716,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2765361630,
      "number": 31589,
      "title": "P2TR Spending Bug - Signing Transaction Failed",
      "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nSome Segwit Version 1 Addresses generated with [Achow101's Rust-Vanitygen](https://github.com/achow101/rust-vanitygen), or more generally some random Addresses imported using the `tr(<WIF Private Key>)` Descriptor, cause an issue when spending coins using them. Generally, the \"Signing transaction failed\" error occurs and the transaction is not created. Though, a workaround still allows to spend the coins.\n\nI don't know if the issue is exclusive to P2TR, but never encountered such problems with Vanity Version 0 Addresses in the past... I also did not encounter such issue with P2TR Addresses directly generated in Bitcoin Core with `getnewaddress` or so.\n\nMaybe it is the same issue as #5828, which was however not been reported with a concrete and reproducible example, and was closed since long... If so, then it would mean that other Address Types may be affected as TapRoot did not exist at this time. I have not found other duplicates, but sorry if I missed one...\n\n### Expected behaviour\n\nBeing able to spend using these Addresses without workarounds.\n\n### Steps to reproduce\n\n* Optional: Generate a Vanity P2TR Address with the [Achow101's Rust-Vanitygen](https://github.com/achow101/rust-vanitygen), modding it or converting the Private Key from Mainnet to Testnet if necessary. Or simply some [random WIF Private Key](https://learnmeabitcoin.com/technical/keys/private-key/wif/). Some Addresses will work, others exhibit the present issue... It seems that there is a significant proportion falling in the second case...\n* For convenience, you can simply use this one made for this Bug Report:\n```\ninternal_privkey: cNKAo2ZRsaWKcP481cEfj3astPyBrfq56JBtLeRhHUvTSuk2z4MR\ninternal_pubkey: ac414af4b822d67307fe81bef0a72ddf0be9e6ff129eb1270b1168126f619619\nAddress: tb1ptestamfzz5zguhrad6xuf7afua0csz5m6k2qclpnpkvsl20t856sxz2d89\n```\n* Import the Address, for example in Testnet4 via the Bitcoin-Qt Console: \n```\nimportdescriptors '[{\"desc\": \"tr(cNKAo2ZRsaWKcP481cEfj3astPyBrfq56JBtLeRhHUvTSuk2z4MR)#vhsk8sfh\", \"timestamp\":0}]'\n```\n* Optional: get some coins from a Testnet4 Faucet (or any other source) for this tb1ptestamfzz5zguhrad6xuf7afua0csz5m6k2qclpnpkvsl20t856sxz2d89 Address. When I submitted the Issue, there were some coins left...\n* Optional: Send some amount involving this Address. Immediately after importing the Address, it appears that there is no particular issue. See Transaction [a301d660523de70542d30490052f9e04ba3f9b5e26482745c7dbdc952802f103](https://mempool.space/testnet4/tx/a301d660523de70542d30490052f9e04ba3f9b5e26482745c7dbdc952802f103).\n* Restart Bitcoin Core, and try sending again some amount. The interface now shows a \"Signing transaction failed\" dialog followed by \"Transaction creation failed!\". Or, in the Console,\n```\nsendtoaddress tb1qn9rvr53m7qvrpysx48svuxsgahs88xfsskx367 0.0001\nSigning transaction failed (code -6)\n```\n* However, if a new Wallet is created, and the Descriptor is imported again as above, sending coins is possible again (until Bitcoin Core is restarted again). The process can be repeated to further reuse the Address (which is obviously not practical).\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@228aba2c4d9ac0b2ca3edd3c2cdf0a92e55f669b\n\n### Operating system and version\n\nDebian 13 Testing\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "Pttn",
      "created_at": "2025-01-02T02:04:22Z",
      "updated_at": "2026-01-21T10:57:45Z",
      "closed_at": "2025-01-21T10:20:51Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31589",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 3566,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2030192714,
      "number": 29018,
      "title": "fuzz: Fix stability, determinism issues",
      "body": "It would be good to track fuzz \"stability\" and determinism, and fix any issues.\r\n\r\nIs there an easy way to generate a table for this metric for each fuzz target, maybe as a side effect of CI, or in another way?\r\n\r\nedit: oss-fuzz link https://oss-fuzz.com/fuzzer-stats?group_by=by-fuzzer&fuzzer=afl&job=afl_asan_bitcoin-core&project=bitcoin-core",
      "state": "open",
      "user": "maflcko",
      "created_at": "2023-12-07T08:42:49Z",
      "updated_at": "2026-01-21T10:35:09Z",
      "closed_at": null,
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/29018",
      "labels": [
        "Brainstorming",
        "Tests",
        "Fuzzing"
      ],
      "comment_data": [
        {
          "id": 3427502588,
          "user": "maflcko",
          "body": "> edit: oss-fuzz link https://oss-fuzz.com/fuzzer-stats?group_by=by-fuzzer&fuzzer=afl&job=afl_asan_bitcoin-core&project=bitcoin-core\n\nCurrently the link just returns a stability of 100 for all fuzz targets, so something is probably off at the oss-fuzz side.\n\nedit: Reported on https://github.com/google/oss-fuzz/issues/14199",
          "created_at": "2025-10-21T16:19:21Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 324,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 384,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3441918983,
      "number": 33458,
      "title": "Documentation trap when using -bind in conjunction with (automatically configured) Tor hidden services",
      "body": "To start with the conclusion: everything appears to work as _intended_, so this should probably not be considered a bug as such, but some logging and telemetry output could be improved to make things clearer.\n\nIf you use -bind to manually specify which (public) IPs to listen to, Bitcoin Core will also no longer create the (local) default socket for incoming Tor connections at 127.0.01:8334 unless you specify it manually in your list - this is probably working as intended. When automatically creating a Tor hidden service, it will instead be routed to the public IPv4 port, and incoming Tor connections still work just fine.\n\nHowever, without the dedicated Tor socket, Bitcoin Core is unable to distinguish between regular IPv4 connections and Tor connections, so all of the latter will be counted as the former.\n\nThe specific case that had me scratching my head for a bit: -netinfo reported zero incoming Tor connections\n\n```\n         ipv4    ipv6   onion   total   block\nin        291      28       0     319\nout         5       3       2      10       2\ntotal     296      31       2     329\n```\n\nwhile the true number of incoming Tor connections was 29.\n\n```\nss -tupan | grep tor | grep 8333 | wc -l\n29\n```\n\nAs expected, removing the -bind statements from the config and restarting fixed it.\n\n```\n         ipv4    ipv6   onion   total   block\nin         25       4       5      34\nout         4       1       5      10       2\ntotal      29       5      10      44\n```\n\nWhile the documentation for -bind hints towards why this is the case, Bitcoin Core gives no indication in the logs or the -netinfo output that the configuration is suboptimal, and I feel like maybe it should do that just to save people (like me) from getting confused.\n\nMaybe during startup, if no Tor socket is created and a Tor hidden service is created, it should add something like \"Warning: -bind was specified but lacks a dedicated Tor socket; incoming Tor connections will be counted as regular connections\", and when using -netinfo it should show a \"?\" or \"-\" instead of \"0\".",
      "state": "open",
      "user": "ArmchairCryptologist",
      "created_at": "2025-09-22T17:08:17Z",
      "updated_at": "2026-01-21T09:13:00Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/33458",
      "labels": [
        "Docs"
      ],
      "comment_data": [
        {
          "id": 3774001423,
          "user": "crackedhandle",
          "body": "Hi, I’d like to work on improving the documentation and/or adding a warning for this case. \nIs anyone currently working on this or can I take it?\n",
          "created_at": "2026-01-20T17:07:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 146,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776949162,
          "user": "ArmchairCryptologist",
          "body": "I haven't heard otherwise so I believe it's up for grabs, thanks!",
          "created_at": "2026-01-21T09:02:33Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 65,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776992465,
          "user": "crackedhandle",
          "body": "Thanks! I’ve opened a PR (#34356) to address this.\n",
          "created_at": "2026-01-21T09:13:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 51,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2164,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 484836881,
      "number": 16712,
      "title": "Signature must be zero for failed CHECK(MULTI)SIG operation",
      "body": "## start bicoind\r\n```\r\nbitcoind -rpcuser=test -rpcpassword=test -rpcport=18443 -rpcbind=0.0.0.0 -datadir=btc_private -txindex -regtest=1 -listenonion=0 -debug -daemon\r\n```\r\n```\r\nalias btccli=\"bitcoin-cli -regtest -rpcuser=test -rpcpassword=test\"\r\n```\r\n\r\n## get 3 new address \r\n```\r\naddress: 2N8VaTaHNq4GPt1rbvaEAEPFwoSZ8CgDUM9\r\npubkey: 0355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c93\r\nprivatekey: cPZdtTsenRcKbmthFBcQB4QerVSut6Z9hMPyKo6zMeGRBGSxDGMM\r\n\r\naddress: 2N3yHeRmfNaqsR5rBVUk4fZhmfmiZswH5Rh\r\npubkey: 021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c\r\nprivatekey: cQxcb3foiTWKBfKT1B8fxWALzgD1SpS2QM6JcsCdFnXM5ebY5zNX\r\n\r\naddress: 2N7T4f6CAEHPyV4RfUD6NUz36AzT7J48nrz\r\npubkey: 033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de\r\nprivatekey: cNpLyk4X6PSyUDiJ7tPwQXRHzYPXsVCzg72g47ZW5yVyfVkmqWSt\r\n```\r\n## get multisig address\r\n```\r\nbtccli addmultisigaddress 2 '[\"2N8VaTaHNq4GPt1rbvaEAEPFwoSZ8CgDUM9\",\"2N3yHeRmfNaqsR5rBVUk4fZhmfmiZswH5Rh\",\"2N7T4f6CAEHPyV4RfUD6NUz36AzT7J48nrz\"]'\r\n\r\n{\r\n  \"address\": \"2MwabVCD88Uz7gBWyUd4mA2cXyEBMuN7w93\",\r\n  \"redeemScript\": \"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\"\r\n}\r\n```\r\n\r\n```\r\nbtccli listunspent 1 99999999 '[\"2MwabVCD88Uz7gBWyUd4mA2cXyEBMuN7w93\"]'\r\n\r\n[\r\n  {\r\n    \"txid\": \"66a370cb1fa86f706d3c1ff581ee80ab0c6ef69403cb09ba2eb262a27e4c0643\",\r\n    \"vout\": 0,\r\n    \"address\": \"2MwabVCD88Uz7gBWyUd4mA2cXyEBMuN7w93\",\r\n    \"label\": \"\",\r\n    \"redeemScript\": \"0020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bd\",\r\n    \"witnessScript\": \"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\",\r\n    \"scriptPubKey\": \"a9142f8a5a37a7ff99fd8671d2dcd7e62d7b4d0fd97b87\",\r\n    \"amount\": 50.00000000,\r\n    \"confirmations\": 102,\r\n    \"spendable\": true,\r\n    \"solvable\": true,\r\n    \"desc\": \"sh(wsh(multi(2,[696a000f/0'/0'/0']0355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c93,[696a000f/0'/0'/1']021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c,[696a000f/0'/0'/2']033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de)))#3cvzvrcg\",\r\n    \"safe\": true\r\n  },\r\n  {\r\n    \"txid\": \"9eaa9439244b18def82abd3f85aca817126653d20add52ad2208aaa4e4f43891\",\r\n    \"vout\": 0,\r\n    \"address\": \"2MwabVCD88Uz7gBWyUd4mA2cXyEBMuN7w93\",\r\n    \"label\": \"\",\r\n    \"redeemScript\": \"0020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bd\",\r\n    \"witnessScript\": \"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\",\r\n    \"scriptPubKey\": \"a9142f8a5a37a7ff99fd8671d2dcd7e62d7b4d0fd97b87\",\r\n    \"amount\": 50.00000000,\r\n    \"confirmations\": 101,\r\n    \"spendable\": true,\r\n    \"solvable\": true,\r\n    \"desc\": \"sh(wsh(multi(2,[696a000f/0'/0'/0']0355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c93,[696a000f/0'/0'/1']021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c,[696a000f/0'/0'/2']033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de)))#3cvzvrcg\",\r\n    \"safe\": true\r\n  }\r\n]\r\n```\r\n\r\n```\r\nbtccli createrawtransaction '[{\"txid\":\"9eaa9439244b18def82abd3f85aca817126653d20add52ad2208aaa4e4f43891\",\"vout\":0,\"scriptPubKey\":\"a9142f8a5a37a7ff99fd8671d2dcd7e62d7b4d0fd97b87\",\"redeemScript\":\"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\"}]' '{\"2MzycLC1fr83bHGiGhARtYbkaQ8iXoULN76\":49.999}'\r\n\r\n02000000019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000000ffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e8700000000\r\n```\r\n\r\n```\r\nbtccli signrawtransactionwithkey '02000000019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000000ffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e8700000000' '[\"cPZdtTsenRcKbmthFBcQB4QerVSut6Z9hMPyKo6zMeGRBGSxDGMM\"]' '[{\"txid\":\"9eaa9439244b18def82abd3f85aca817126653d20add52ad2208aaa4e4f43891\",\"vout\":0,\"scriptPubKey\":\"a9142f8a5a37a7ff99fd8671d2dcd7e62d7b4d0fd97b87\",\"redeemScript\":\"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\",\"amount\":50}]'\r\n\r\n{\r\n  \"hex\": \"020000000001019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000023220020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bdffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e87040047304402205ac40d5e704b78d044798e0b8b7f8bc7afb259fb5806bf0e4cb387f3d2d2dfd2022052c39670918c38cf3d5815f4d6c50af88b84614715043b3f92e4fcbce29a228201006952210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae00000000\",\r\n  \"complete\": false,\r\n  \"errors\": [\r\n    {\r\n      \"txid\": \"9eaa9439244b18def82abd3f85aca817126653d20add52ad2208aaa4e4f43891\",\r\n      \"vout\": 0,\r\n      \"witness\": [\r\n        \"\",\r\n        \"304402205ac40d5e704b78d044798e0b8b7f8bc7afb259fb5806bf0e4cb387f3d2d2dfd2022052c39670918c38cf3d5815f4d6c50af88b84614715043b3f92e4fcbce29a228201\",\r\n        \"\",\r\n        \"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\"\r\n      ],\r\n      \"scriptSig\": \"220020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bd\",\r\n      \"sequence\": 4294967295,\r\n      \"error\": \"Signature must be zero for failed CHECK(MULTI)SIG operation\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n```\r\nbtccli signrawtransactionwithkey '020000000001019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000023220020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bdffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e87040047304402205ac40d5e704b78d044798e0b8b7f8bc7afb259fb5806bf0e4cb387f3d2d2dfd2022052c39670918c38cf3d5815f4d6c50af88b84614715043b3f92e4fcbce29a228201006952210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae00000000' '[\"cQxcb3foiTWKBfKT1B8fxWALzgD1SpS2QM6JcsCdFnXM5ebY5zNX\"]' '[{\"txid\":\"9eaa9439244b18def82abd3f85aca817126653d20add52ad2208aaa4e4f43891\",\"vout\":0,\"scriptPubKey\":\"a9142f8a5a37a7ff99fd8671d2dcd7e62d7b4d0fd97b87\",\"redeemScript\":\"52210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae\",\"amount\":50}]'\r\n\r\n{\r\n  \"hex\": \"020000000001019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000023220020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bdffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e87040047304402205ac40d5e704b78d044798e0b8b7f8bc7afb259fb5806bf0e4cb387f3d2d2dfd2022052c39670918c38cf3d5815f4d6c50af88b84614715043b3f92e4fcbce29a228201473044022072d263ac076bb5647c9cbcefc7fda411a9208cd1a8a75148b090a24b929ac590022034a230442504d91fe561004e64b0eba403b80e42afb12afaa7808b916ff3e54a016952210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae00000000\",\r\n  \"complete\": true\r\n}\r\n```\r\n\r\n```\r\nbtccli sendrawtransaction 020000000001019138f4e4a4aa0822ad52dd0ad253661217a8ac853fbd2af8de184b243994aa9e0000000023220020e4a6d84b97591a2812a4909e6cfc35429975957e674c4e92ad9054b3cca445bdffffffff01606b042a0100000017a91454cd00871f090949693d111080b290b18db4637e87040047304402205ac40d5e704b78d044798e0b8b7f8bc7afb259fb5806bf0e4cb387f3d2d2dfd2022052c39670918c38cf3d5815f4d6c50af88b84614715043b3f92e4fcbce29a228201473044022072d263ac076bb5647c9cbcefc7fda411a9208cd1a8a75148b090a24b929ac590022034a230442504d91fe561004e64b0eba403b80e42afb12afaa7808b916ff3e54a016952210355479b300b217d781cf058941cc1677283c24460665d27dbfced339b29428c9321021e2ef4e12c9d13fc45e709469de0ea8fe556bdbd436f13e936346f6dd267455c21033bebbfa8539df7d9b381d6bb34fabe3fc660c3c7a2f69047ac850575597ee8de53ae00000000\r\nerror code: -26\r\nerror message:\r\nnon-mandatory-script-verify-flag (Signature must be zero for failed CHECK(MULTI)SIG operation) (code 64)\r\n```\r\n\r\nwhy i got a error like above? i need help, thanks!\r\n",
      "state": "closed",
      "user": "xiangjianmeng",
      "created_at": "2019-08-24T15:56:58Z",
      "updated_at": "2026-01-21T08:50:54Z",
      "closed_at": "2026-01-21T08:50:54Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/16712",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3759663977,
          "user": "willcl-ark",
          "body": "I dont' think this happens any more when using descriptor wallets using the `createmultisig` flow.\n\n@achow101 perhaps you could confirm whether we want to keep this open any longer?",
          "created_at": "2026-01-16T11:42:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 181,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776879475,
          "user": "maflcko",
          "body": "Yeah, the legacy RPCs have been removed, so this one can be closed as well.",
          "created_at": "2026-01-21T08:50:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 75,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 9077,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3800461331,
      "number": 34250,
      "title": "crash during IPC cleanup after `interruptWait()` is called",
      "body": "while working on https://github.com/stratum-mining/sv2-apps/pull/177, I'm noticing a new crash\n\nsteps to reproduce:\n- run Bitcoin Core `v30.2` on `mainnet`\n- `git clone https://github.com/plebhash/sv2-apps -b 2026-01-09-bitcoin-core-v30-2`\n- edit `sv2-apps/pool-apps/pool/config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml` so that `unix_socket_path` field points to `node.sock`\n- launch Pool via: `cd sv2-apps/pool-apps/pool; cargo run -- -c config-examples/mainnet/pool-config-bitcoin-core-ipc-example.toml`\n- let Pool run for a while\n- kill Pool with ctrl+c\n\nthis does not happen deterministically, so a few attempts of launching then killing Pool might be needed \n\nbut eventually Bitcoin Core crashes with a few different log variations:\n```\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server recv request  #96 BlockTemplate.getCoinbaseMerklePath$Params\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server post request  #96 {bitcoin-node-35006/206817 (from )}\n2026-01-10T22:48:03Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server send response #96 BlockTemplate.getCoinbaseMerklePath$Results\n2026-01-10T22:48:07Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server recv request  #97 BlockTemplate.waitNext$Params\n2026-01-10T22:48:07Z [ipc] {bitcoin-node-35006/b-capnp-loop-203488} IPC server post request  #97 {bitcoin-node-35006/206817 (from )}\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages6MiningEEE\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server: socket disconnected.\n2026-01-10T22:48:07Z [ipc:info] {bitcoin-node-35006/b-capnp-loop-203488} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2026-01-10T22:48:08Z CreateNewBlock(): block weight: 3998742 txs: 599 fees: 515599 sigops 13307\nlibc++abi: terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument\n[1]    35006 abort      ./bitcoin-30.2/bin/bitcoin -m node -ipcbind=unix -prune=555 -debug=ipc\n```\n\n```\n2026-01-10T22:22:02Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server send response #134 BlockTemplate.getCoinbaseMerklePath$Results\n2026-01-10T22:22:03Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server recv request  #135 BlockTemplate.waitNext$Params\n2026-01-10T22:22:03Z [ipc] {bitcoin-node-19528/b-capnp-loop-144717} IPC server post request  #135 {bitcoin-node-19528/147843 (from )}\n2026-01-10T22:22:04Z CreateNewBlock(): block weight: 3998510 txs: 4931 fees: 315281 sigops 999\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages13BlockTemplateEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages6MiningEEE\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server: socket disconnected.\n2026-01-10T22:22:04Z [ipc:info] {bitcoin-node-19528/b-capnp-loop-144717} IPC server destroy N2mp11ProxyServerIN3ipc5capnp8messages4InitEEE\n2026-01-10T22:22:05Z CreateNewBlock(): block weight: 3998649 txs: 4928 fees: 336652 sigops 1030\nAssertion failed: (m_loop), function operator*, file proxy.h, line 59.\n[1]    19528 abort      ./bitcoin-30.2/bin/bitcoin -m node -ipcbind=unix -prune=555 -debug=ipc \n```\n\ncc @ryanofsky @ismaelsadeeq ",
      "state": "open",
      "user": "plebhash",
      "created_at": "2026-01-10T22:51:23Z",
      "updated_at": "2026-01-21T04:31:45Z",
      "closed_at": null,
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/34250",
      "labels": [
        "Bug",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3776090376,
          "user": "ryanofsky",
          "body": "The fix from last week is now generalized and part of second commit https://github.com/bitcoin-core/libmultiprocess/commit/ba865d9d7bffc391f66566ccea18f0a2b6be84e0 in https://github.com/bitcoin-core/libmultiprocess/pull/240. There's also some python test code to trigger this crash added in #34284",
          "created_at": "2026-01-21T04:31:45Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 297,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 5017,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3653223188,
      "number": 33923,
      "title": "should concurrent IPC requests directed to the same thread cause a crash?",
      "body": "recently I reported https://github.com/bitcoin/bitcoin/issues/33554, which was fixed by the introduction of `interruptWait` via #33575\n\nthen I noticed crashes for similar reasons (although unrelated to `waitNext`), which I explain in detail here: https://github.com/stratum-mining/sv2-apps/issues/88#issuecomment-3558003166\n\nTLDR: I was trying to do a `getBlock` while a `submitSolution` was happening at the same time, both against the same Bitcoin Core thread\n\nthis made me realize that regardless of whether the call is going to block for a long time (like `waitNext`), I simply cannot leave room for concurrent calls against the same Bitcoin Core thread\n\nwhich feels a bit contradictory to what @ryanofsky suggested here: https://github.com/bitcoin/bitcoin/issues/33554#issuecomment-3382354366\n\n> More broadly, I think I'd try just having a c++ \"waiter\" thread dedicated to running waitNext calls, and a c++ \"worker\" thread to run all other IPC operations besides waitNext. The \"waiter\" thread should be mostly blocked monitoring mempool and network, and the \"worker\" thread should be available to do anything else you might need like fetching and submitting block data.\n\nand it's making me re-evaluate some assumptions I had when I started https://github.com/stratum-mining/sv2-apps/pull/59\n\noverall, I'm getting to a place where I'm having to go great lengths in terms of defensive programming just to avoid crashing Bitcoin Core\n\nI'm still evaluating the trade-offs of potential defensive strategies, namely:\n- having synchronization primitives that avoid overlapping requests against the same Bitcoin Core thread\n- instantiating multiple Bitcoin Core threads, one dedicated for each potentially concurrent request\n\nbut I digress... the main point I wanted to articulate here was: shouldn't Bitcoin Core simply not crash if two requests arrive for the same thread?\n\nideally, a naive client should simply be forced to wait a bit longer if they send concurrent requests against the same Bitcoin Core thread, instead of being forced to avoid doing this at all cost because it could cause havoc on the other side of the IPC connection",
      "state": "open",
      "user": "plebhash",
      "created_at": "2025-11-21T22:05:01Z",
      "updated_at": "2026-01-21T04:27:11Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/33923",
      "labels": [
        "Brainstorming",
        "Bug",
        "interfaces"
      ],
      "comment_data": [
        {
          "id": 3768263258,
          "user": "ismaelsadeeq",
          "body": "re https://github.com/bitcoin/bitcoin/issues/34250#issuecomment-3749243782\n\nI agree with @Sjors that we should just expose those values in one call to avoid the round trip, @plebhash it would also be nice to benchmark what @Sjors suggests.\n\nI also agree on the potential of throttling if we allow an arbitrary number of threads. It should definitely be rate-limited.",
          "created_at": "2026-01-19T13:09:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 366,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3770320747,
          "user": "plebhash",
          "body": "> > to be honest, we could have gotten away with only 2 by forcing `getHeader`, `getCoinbaseTx`, `getCoinbaseMerklePath` and waitNext to be done sequentially under the same server thread\n> \n> I think you should bench this before deciding if it needs optimising and also check whether it's _actually_ faster and not e.g. slowing the node responses down with overhead.\n\n---\n\n> I agree with @Sjors that we should just expose those values in one call to avoid the round trip, @plebhash it would also be nice to benchmark what @Sjors suggests.\n\n---\n\nhere's a benchmarking suite: https://github.com/plebhash/sv2-bitcoin-core/tree/2026-01-19-benchmark-fetch-template-strategies\n\nthe methodology consists of:\n\ncollect 100 samples of fetching template data under two different strategies:\n- sequentially execute `getHeader`, then `getCoinbaseTx`, then `getCoinbaseMerklePath`, all against the same pre-allocated server thread\n- concurrently execute `getHeader`, `getCoinbaseTx`, and `getCoinbaseMerklePath`, against 3 different pre-allocated server threads\n\nnotes:\n- node was Bitcoin Core `v30.2` running on `mainnet`\n- all requests were done against the same `BlockTemplate` (I wonder if that could skew or bias the results in any meaningful way?)\n\nhere's the results:\n\n```\nfetch_template/sequential/single_thread\n                        time:   [505.89 µs 507.80 µs 509.73 µs]\nFound 5 outliers among 100 measurements (5.00%)\n  4 (4.00%) high mild\n  1 (1.00%) high severe\nfetch_template/concurrent/multiple_threads\n                        time:   [367.33 µs 368.71 µs 370.15 µs]\nFound 4 outliers among 100 measurements (4.00%)\n  3 (3.00%) high mild\n  1 (1.00%) high severe\n```\n\n<img width=\"1024\" height=\"1086\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/666e5d7a-d30f-4cfb-bda5-bf002d569ba5\" />",
          "created_at": "2026-01-19T22:32:37Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1802,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3776081076,
          "user": "ryanofsky",
          "body": "Note: The first commit https://github.com/bitcoin-core/libmultiprocess/commit/8fe9da2a0dceaa95917b3a8514dd8ba8d57ef9e1 from https://github.com/bitcoin-core/libmultiprocess/pull/240 removes restriction on clients sending many requests at the same time to the same server thread. With that change the server just queues requests and executes them in the order received.\n\nI went ahead and implemented this after realizing the server-side queuing could be implemented by just chaining promises together without needing to add new data structure, and after realizing the client-side queuing I suggested earlier was inherently less efficient because it requires clients to wait to receive responses from previous requests before sending new requests.\n\nThere is also some new python code in #34284 testing this behavior.\n\n",
          "created_at": "2026-01-21T04:27:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 815,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 2211,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 29027200,
      "number": 3828,
      "title": "Clients leak IPs if they are recipients of a transaction",
      "body": "So, this paper http://ifca.ai/fc14/papers/fc14_submission_71.pdf got me thinking about the current rules for transaction rebroadcasting:\n\nOnce a transaction has been broadcast, you stop rebroadcasting. Unless you own txins or txouts in the transaction. \n\nSo, you use the paper's techniques. But you can be much more speculative than they are, and get a low-likelihood but possible IP match for an address, connect your client up, and issue a transaction paying yourself and a small amount to the address you're interested in, just over the dust amount.\n\nThe transaction should be constructed so it's unlikely to be mined.\n\nThe transaction traverses the network, then it stops being rebroadcast, _except_ by the recipient and you. If your client is connected to the wallet that owns the address, it will see rebroadcasting for some time, providing a very strong link between the two.\n\nThis seems like a bad outcome. \n\nI speculate that the 1Sochi transactions may have this motivation -- mapping addresses to determine IPs at large in Bitcoin. \n\nIt seems like the simplest thing would be to not re-re-broadcast to clients you've already spoken to, but I'll wait for smarter people than me to work out the right fix.\n",
      "state": "open",
      "user": "vessenes",
      "created_at": "2014-03-08T18:36:48Z",
      "updated_at": "2026-01-21T02:49:50Z",
      "closed_at": null,
      "comments": 25,
      "url": "https://github.com/bitcoin/bitcoin/issues/3828",
      "labels": [
        "Wallet",
        "Privacy"
      ],
      "comment_data": [
        {
          "id": 3759965110,
          "user": "vasild",
          "body": "Yes, I was wrong. I was looking at `CTxMemPool::m_unbroadcast_txids`.",
          "created_at": "2026-01-16T13:11:14Z",
          "drama_signals": {
            "drama_keywords": 1,
            "positive_keywords": 0,
            "text_length": 69,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3765598040,
          "user": "mzumsande",
          "body": "> There is `./test/functional/wallet_resendwallettransactions.py`, so this behavior still exists in all versions and commits since this issue was opened, until today.\n\nWhat changed is the frequency of rebroadcast, from every 15 minutes to ~1/day (#18038).\nThis is not perfect, but it makes it more practical to avoid leaking IPs through own transactions by choosing an appropriate fee, such that rebroadcast never happens (or implement special measures such as onion-only if it hasn't confirmed after 11 hours or so).\n\nHowever, I had never realized that txns where the wallet is not the originator but is getting paid are also affected. I think this makes things much worse, because it allows third parties (who can choose the fee) to trigger the rebroadcasts of our nodes.\nThis case is also missing from `wallet_resendwallettransactions.py`, I am working on adding test coverage for that.\n\nTo prevent this, we could revive #21061 or do something similar - a simpler option would be to completely delegate the task of rebroadcasting to the sender and just disable rebroadcast of transactions where our wallet controls no inputs.\nThis would have the downside that nodes getting paid would no longer rebroadcast, which might be against their interest, but it would prevent the privacy issues.",
          "created_at": "2026-01-18T18:46:42Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1290,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3769366743,
          "user": "maflcko",
          "body": "There's also https://github.com/bitcoin/bips/pull/1937, which IIUC was proposed after the recent divergence of mempool policies, but it may also allow to drop wallet re-broadcast.",
          "created_at": "2026-01-19T16:57:25Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 179,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3775887388,
          "user": "mzumsande",
          "body": "See #34359 for test coverage of the status quo.",
          "created_at": "2026-01-21T02:49:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 47,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1271,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3826622158,
      "number": 34330,
      "title": "Contributor Retention and Participation Metrics in Bitcoin Core (Project Health Observability)",
      "body": "Note: I’m approaching this from a research and analysis perspective rather than as a code contributor.\n\nThis issue shares descriptive, non-normative metrics related to contributor retention and participation patterns in the Bitcoin Core repository, derived from publicly observable GitHub activity over time.\n\nLong-lived open-source projects commonly track indicators such as review latency, bus factor, CI reliability, and test coverage. Contributor retention and participation depth are complementary project-health signals, particularly for repositories with high review load and long-lived maintenance requirements.\n\nRecent longitudinal analysis of participation data suggests:\nA large fraction of historical participants become inactive within a year of their last recorded activity.\nLong-term active contributors represent a small fraction of total historical participants.\nHigh exit rates are observable even among contributors whose pull requests were frequently merged.\n\nThese observations are purely descriptive and do not assert intent, motivation, or off-repository contribution. “Inactive” refers only to the absence of observable GitHub activity within a defined time window.\n\nThis issue does not propose:\nChanges to Bitcoin Core policy or consensus rules\nModifications to maintainership or decision authority\nNormative claims about how governance should function\n\nThe purpose is limited to:\n1. Assessing whether retention and participation metrics are useful additions to existing project-health observability.\n2. Determining if existing tooling already captures these signals adequately, or if gaps exist.\n3. Enabling reproducible discussion around contributor lifecycle dynamics that may affect review capacity, onboarding, and long-term maintenance load.\n\nIf this repository considers contributor retention metrics out of scope, that clarification would itself be useful for aligning expectations around which project-health signals are tracked here versus elsewhere.\n\nMethodology, assumptions, and raw aggregation logic can be shared or adjusted for comparison if helpful.\nThank you.",
      "state": "closed",
      "user": "Conrad8910",
      "created_at": "2026-01-18T10:41:47Z",
      "updated_at": "2026-01-20T20:37:54Z",
      "closed_at": "2026-01-19T08:09:14Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/34330",
      "labels": [],
      "comment_data": [
        {
          "id": 3766997226,
          "user": "maflcko",
          "body": "Usually the issue tracker is used to track technical issues related to the Bitcoin Core code base.\n\nMeta tracking of meta metrics seems ideal to do elsewhere.\n\n\nThere is https://groups.google.com/g/bitcoindev, or https://delvingbitcoin.org/, or any other place that you feel is well suited.\n",
          "created_at": "2026-01-19T08:09:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 291,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3767744433,
          "user": "maflcko",
          "body": "<img width=\"767\" height=\"805\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c9ab4538-59df-495c-ad22-cfe55d36d2d2\" />\n\nAlso, looking at the LFX retention metric, it seems mostly stable over the last decade, and at least this (highly volatile) metric did not seem to worsen over the timespan.",
          "created_at": "2026-01-19T11:03:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 304,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3774837843,
          "user": "Conrad8910",
          "body": "Thanks for the clarification and for the pointer to LFX Insights.\n\nUnderstood that contributor retention and participation metrics are considered out of scope for the Bitcoin Core issue tracker and better discussed in other venues such as bitcoin-dev or Delving Bitcoin.\n\nI’ll take the discussion there. Appreciate the reference to existing retention dashboards.",
          "created_at": "2026-01-20T20:37:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 362,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2197,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2922436094,
      "number": 32078,
      "title": "listdescriptors true fails with 'Can't get descriptor string' in non-watch-only descriptor wallet",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nWhen running the command:\n```\nbitcoin-cli listdescriptors true\n```\nit fails with the error:\n```\nerror code: -4\nerror message:\nCan't get descriptor string.\n```\neven though the wallet is not watch-only and is a descriptor wallet.\n\nHowever, when running:\n```\nbitcoin-cli listdescriptors false\n\n```\nthe command works fine and returns descriptor information, but without private keys.\n\n\n\n### Expected behaviour\n\nSince the wallet is not watch-only and is a descriptor wallet, the command should succeed, just like listdescriptors false, but with the private key information included.\n\n### Steps to reproduce\n\nVerify that the wallet is a descriptor wallet:\n\n```\n{\n  \"walletname\": \"BTC\",\n  \"walletversion\": 169900,\n  \"format\": \"sqlite\",\n  \"keypoolsize_hd_internal\": 4000,\n  \"private_keys_enabled\": true,\n  \"descriptors\": true,\n  \"external_signer\": false,\n  \"blank\": false,\n}\n```\n\n### Relevant log output\n\nI didn't find any related errors in the debug file, but I listed my descriptor for reference\n\n```\n{\n  \"descriptors\": [\n    {\n      \"desc\": \"pkh([761f1ef4/44h/1h/0h]tpubDDeGeaPE1STPq4dQFhc5grg8pn6pqyttBtX6Pkw8cAVKesnJr7wYFF7LKy2ysifbPSKDyBT3hHjAg9rftJdPVKLUrGgan7pmML9CFeDuua6/0/*)#cnspa9u5\"\n    },\n    {\n      \"desc\": \"pkh([761f1ef4/44h/1h/0h]tpubDDeGeaPE1STPq4dQFhc5grg8pn6pqyttBtX6Pkw8cAVKesnJr7wYFF7LKy2ysifbPSKDyBT3hHjAg9rftJdPVKLUrGgan7pmML9CFeDuua6/1/*)#f84qqsvv\"\n    },\n    {\n      \"desc\": \"pkh([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/100)#t96q85nr\"\n    },\n    {\n      \"desc\": \"sh(wpkh([761f1ef4/49h/1h/0h]tpubDDohgQvP57jvmvVzmKFo1JjZjwWRAaYyL7aPG4ZPiiNjnbSDKBHxgPSBmBx9Esjf4HxxeEeRVdkiGRaJmVRofHBMLtQzHxKmRbAg9oMxEmw/0/*))#h40wmz6r\"\n    },\n    {\n      \"desc\": \"sh(wpkh([761f1ef4/49h/1h/0h]tpubDDohgQvP57jvmvVzmKFo1JjZjwWRAaYyL7aPG4ZPiiNjnbSDKBHxgPSBmBx9Esjf4HxxeEeRVdkiGRaJmVRofHBMLtQzHxKmRbAg9oMxEmw/1/*))#z5pcra0u\"\n    },\n    {\n      \"desc\": \"sh(wsh(multi(2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/3)))#3455mcsd\"\n    },\n    {\n      \"desc\": \"tr([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/*)#rrrwmyl6\"\n    },\n    {\n      \"desc\": \"tr([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/1,multi_a(2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/3))#teu9thwc\"\n    },\n    {\n      \"desc\": \"tr([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/1,{pk([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/2),pk([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/1)})#597an7jq\"\n    },\n    {\n      \"desc\": \"tr([761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/1/*)#jhx0x30z\"\n    },\n    {\n      \"desc\": \"tr(ca46e9fad132afe73c7efcc02039225d2f4626cf476f6ca91ab56ad2d1956029,multi_a(2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/2,[761f1ef4/86h/1h/0h]tpubDDRksBabSitMWcvdvWwVzhEvwFC9Bf77ASZRGHtoMhYr6AFDChuQtNxEvWqtjNy5Vqmd7DKwh5b41NM1oT3YfNRWBMrbcw53da4NwmJ12Td/0/3))#guq2rvkj\"\n    },\n    {\n      \"desc\": \"wpkh([761f1ef4/84h/1h/0h]tpubDCSU3vbXvSzLszkaX4dBv5bsovXH5JqoR6rpCToEJZJ8kiZb3VZkWpoKnf5Sr5aGjxCqbDhfR6Z8JtT5rT3CLj7aC8NfLUjEtxhZB9PNHxs/0/*)#lf9s05rn\"\n    },\n    {\n      \"desc\": \"wpkh([761f1ef4/84h/1h/0h]tpubDCSU3vbXvSzLszkaX4dBv5bsovXH5JqoR6rpCToEJZJ8kiZb3VZkWpoKnf5Sr5aGjxCqbDhfR6Z8JtT5rT3CLj7aC8NfLUjEtxhZB9PNHxs/1/*)#waq3jpnt\"\n    }\n  ]\n}\n\n```\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core RPC client version v28.1.0\n\n### Operating system and version\n\nWindows 11 Home 26100.3476\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "mrtnetwork",
      "created_at": "2025-03-15T18:40:24Z",
      "updated_at": "2026-01-20T20:17:43Z",
      "closed_at": "2026-01-20T20:17:43Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/32078",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 4745,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3825454472,
      "number": 34326,
      "title": "node uptime wrong",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nSystem is freshly booted but bitcoind show wrong uptime:\n\n```\nroot@raspberrypi5-c8-bf-64:~# bitcoin-cli -conf=/etc/bitcoin/bitcoin.conf uptime\n20120688\n\n```\n\nMy real uptime:\n```\nroot@raspberrypi5-c8-bf-64:~# uptime \n 15:53:22 up 10 min,  0 user,  load average: 0.61, 0.56, 0.31\n```\nversion:\n```\nroot@raspberrypi5-c8-bf-64:~# bitcoind --version\nBitcoin Core daemon version v30.2.0 bitcoind\nCopyright (C) 2009-2026 The Bitcoin Core developers\n\nPlease contribute if you find Bitcoin Core useful. Visit\n<https://bitcoincore.org/> for further information about the software.\nThe source code is available from <https://github.com/bitcoin/bitcoin>.\n\nThis is experimental software.\nDistributed under the MIT software license, see the accompanying file COPYING\nor <https://opensource.org/license/MIT>\n\n```\nbitcoin conf file:\n```\nroot@raspberrypi5-c8-bf-64:~# cat /etc/bitcoin/bitcoin.conf \n#############################################################\n# Bitcoin configuration file\n#############################################################\npid=/run/bitcoin/bitcoind.pid\nnodebuglogfile=1\ndatadir=/var/bitcoin\nloglevel=info\nproxy=127.0.0.1:9050\nsigner=/usr/bin/hwi\n\n# Settings for signet Network\nsignet=1\n\n[signet]\nwalletdir=/var/wallets\nlisten=1\nbind=127.0.0.1\nport=38333\n\n# RPC Settings\nrpcuser=satobox\nrpcport=38332\nrpcbind=127.0.0.1\nrpcallowip=127.0.0.1\nrpcauth=satobox:3381456077fa06cabce053c62a368693$263f4f1cbdc1b4b25233385b931807508f5d8bd59d2c46dc418e4ea2b23dfd09\nrpccookiefile=/run/bitcoin/cookie\nrpccookieperms=group\nserver=1\ndeprecatedrpc=warnings\n```\n\n### Expected behaviour\n\nshould show correct uptime\n\n### Steps to reproduce\n\njust build new bitcoin core and test with commands above\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv30.2\n\n### Operating system and version\n\nlinux \n\n### Machine specifications\n\nraspberrypi5",
      "state": "open",
      "user": "embetrix",
      "created_at": "2026-01-17T15:56:13Z",
      "updated_at": "2026-01-20T16:34:41Z",
      "closed_at": null,
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34326",
      "labels": [
        "Bug"
      ],
      "comment_data": [
        {
          "id": 3764064658,
          "user": "pinheadmz",
          "body": "Just to be sure... is the clock on your system correct?",
          "created_at": "2026-01-17T16:10:20Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 55,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3764069251,
          "user": "embetrix",
          "body": "@pinheadmz correct the rpi5 does not have an RTC backed up with a battery so if `bitcoind` start before the NTP is synchronized the` bitcoin-cli uptime` shows incorrect uptime",
          "created_at": "2026-01-17T16:15:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 175,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3764108689,
          "user": "pinheadmz",
          "body": "What happens if the clock is correct when you start Bitcoin and still correct when you make the RPC?",
          "created_at": "2026-01-17T17:02:09Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 100,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3764113111,
          "user": "l0rinc",
          "body": "I was able to reproduce the reported behavior on an RPi5 by simulating a large clock correction using regtest `setmocktime` (and also via explicit `timedatectl set-ntp false`)\n\n```bash\n$ cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=Release && ninja -C build bitcoind bitcoin-cli -j$(nproc)\n# ...\n$ DATA_DIR=$(mktemp -d)\n$ ./build/bin/bitcoind -regtest -datadir=\"$DATA_DIR\" -connect=0 -daemon\nBitcoin Core starting\n$ ./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" -rpcwait uptime\n1\n$ ./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" setmocktime $(( $(date +%s) + 20000000 ))\n$ ./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" uptime\n20000001\n$ ./build/bin/bitcoin-cli -regtest -datadir=\"$DATA_DIR\" stop\nBitcoin Core stopping\n```\n\nI will push a fix for this to use a `std::chrono::steady_clock` instead.",
          "created_at": "2026-01-17T17:07:04Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 816,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3764276602,
          "user": "l0rinc",
          "body": "Thanks for the report, fixed it in https://github.com/bitcoin/bitcoin/pull/34328 - if you can, please try it out locally to confirm",
          "created_at": "2026-01-17T20:02:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 131,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 2053,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3796644705,
      "number": 34237,
      "title": "ci: IWYU job giving incorrect suggestions",
      "body": "As pointed out here: https://github.com/bitcoin/bitcoin/pull/33810#discussion_r2672640164:\n> +#include <assert.h>\n\nSuggesting `<assert.h>` is incorrect, and if the dev applied that diff, `clang-tidy` will fail with `modernize-deprecated-headers`.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2026-01-09T11:45:31Z",
      "updated_at": "2026-01-20T14:57:14Z",
      "closed_at": "2026-01-20T14:57:14Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34237",
      "labels": [
        "Tests"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 288,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3078112840,
      "number": 32574,
      "title": "subprocess: `sh -c 'echo err 1>&2 && false'` must return `1`",
      "body": "On OpenIndiana:\n```\n./test/system_tests.cpp(54): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned\", command)) != std::string::npos has failed\n./test/system_tests.cpp(55): error: in \"system_tests/run_command\": check what.find(expected) != std::string::npos has failed\n```\n\nSame on [OmniOS](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/15121791773/job/42505618501):\n```\n./test/system_tests.cpp(54): error: in \"system_tests/run_command\": check what.find(tfm::format(\"RunCommandParseJSON error: process(%s) returned\", command)) != std::string::npos has failed\n./test/system_tests.cpp(55): error: in \"system_tests/run_command\": check what.find(expected) != std::string::npos has failed\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-05-20T20:07:00Z",
      "updated_at": "2026-01-20T10:29:52Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32574",
      "labels": [
        "Tests"
      ],
      "comment_data": [
        {
          "id": 3772154395,
          "user": "maflcko",
          "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/34349",
          "created_at": "2026-01-20T10:29:52Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 54,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 827,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3109973560,
      "number": 32661,
      "title": "wallet, node: Redundant opt-in RBF wallet config and RPC parameters",
      "body": "\nFollowing the removal of the `-mempoolfullrbf` node option in [#30592](https://github.com/bitcoin/bitcoin/pull/30592), the Bitcoin Core wallet still retains the `-walletrbf` option.\nThis option determines whether transactions are marked as opt-in RBF (i.e., using sequence numbers `MAX - 1` or `MAX - 2`).\n\nWith full-RBF now the default behavior, `-walletrbf` is effectively redundant and should be removed.\n\nHowever, removing `-walletrbf` alone is not sufficient, as several wallet RPCs also support a `replaceable` parameter that overrides the option:\n\n* `send`\n* `sendall`\n* `sendtoaddress`\n* `sendmany`\n* `fundrawtransaction`\n* `walletcreatefundedpsbt`\n* `createpsbt`\n* `bumpfee`\n* `psbtbumpfee`\n\nAdditionally, the node-level `createrawtransaction` RPC also accepts a `replaceable` argument.\n\nSeveral RPCs—such as `gettransaction` (wallet), `getmempoolentry` (node), and others—expose a `bip125-replaceable` field. The chain interface also includes an `isRBFOptIn` method, which is used by both wallet and node code.\n\n---\n\n**I think it will can be cleaned up in a few releases using the following method:**\n\n* Remove the `-walletrbf` configuration option.\n* Deprecate the `replaceable` parameter from all affected RPCs.\n* Always use sequence number `MAX - 2` when creating transactions.\n* Deprecate the `bip125-replaceable` field from transaction info returned by RPCs for some period marked for removal.\n* Add release note that wallet option is removed and RPC parameter and return values are deprecated.\n\nIn future release\n* Remove the `replaceable` parameter from RPC's\n* Remove the `bip125-replaceable` field from transaction info.\n* Remove the `isRBFOptIn` logic from the codebase and `Chain` interface.\n* Note in release notes that `bip125-replaceable` field will no longer be reported in affected RPC's and also RPC's now don't accept `replaceable` parameter .\n\n---\n\n**Questions:**\n\n1. **Fingerprinting Risk:**\n   Using a consistent sequence value (e.g., `MAX - 2`) could further narrow the wallet’s transaction fingerprint. Is this acceptable from a privacy perspective?\n   cc: [https://github.com/achow101/wallet-fingerprinting/blob/main/fingerprints.md](https://github.com/achow101/wallet-fingerprinting/blob/main/fingerprints.md)\n\n2. **Field Removal:**\n   Should we fully remove the `bip125-replaceable` field from transaction info RPCs, or hardcode it to `true` for backward compatibility?\n   (Note: Retaining the field might require keeping the `isRBFOptIn` logic if we dont want to hardcode.)\n",
      "state": "open",
      "user": "ismaelsadeeq",
      "created_at": "2025-06-02T12:27:30Z",
      "updated_at": "2026-01-20T09:43:38Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32661",
      "labels": [
        "Brainstorming",
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [
        {
          "id": 3771940122,
          "user": "crackedhandle",
          "body": "Hi, I went through the issue and the context around the removal of -mempoolfullrbf and the current -walletrbf / replaceable handling.\n\nFrom my understanding, a staged approach like this seems reasonable:\n\nFirst deprecate the -walletrbf option and the replaceable RPC parameter, and default to using MAX-2 sequence numbers when creating transactions.\n\nKeep reporting bip125-replaceable in RPCs for one release (marked deprecated), and remove it in a later release.\n\nIn a follow-up, remove the remaining isRBFOptIn logic once the RPC surface no longer exposes or accepts replaceable.\n\nFor the fingerprinting concern: is always using MAX-2 considered acceptable, or would maintainers prefer to keep some variability at the wallet level?\n\nFor the bip125-replaceable field: should the plan be to fully remove it from RPC results eventually rather than hardcoding it to true?\n\nIf this direction makes sense, I’d be happy to start by preparing a PR that deprecates -walletrbf and the replaceable parameter and updates the relevant RPC help + tests.",
          "created_at": "2026-01-20T09:43:38Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 1041,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2580,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 854937077,
      "number": 21647,
      "title": "RPC importprunedfunds doesn't allow importing spending txs, only receiving txs",
      "body": "I noticed one of my wallets shows that I own funds that I really don't. I identified the spending transaction and tried to import it using 'importprunedfunds' but was told:\r\n\r\n`No addresses in wallet correspond to included transaction`\r\n\r\nIt turns out that 'importprunedfunds' only allows you to import txs which credit an address owned by your wallet. It won't let you import txs which spend from addresses owned by your wallet.\r\n\r\nI made the following change and then was able to import the missing transaction:\r\n\r\n    --- a/src/wallet/rpcdump.cpp\r\n    +++ b/src/wallet/rpcdump.cpp\r\n    @@ -372,7 +372,7 @@ RPCHelpMan importprunedfunds()\r\n         CWalletTx::Confirmation confirm(CWalletTx::Status::CONFIRMED, height, merkleBlock.header.GetHash(), txnIndex);\r\n     \r\n         CTransactionRef tx_ref = MakeTransactionRef(tx);\r\n    -    if (pwallet->IsMine(*tx_ref)) {\r\n    +    if (pwallet->IsMine(*tx_ref) || pwallet->IsFromMe(*tx_ref)) {\r\n             pwallet->AddToWallet(std::move(tx_ref), confirm);\r\n             return NullUniValue;\r\n         }",
      "state": "open",
      "user": "dooglus",
      "created_at": "2021-04-10T00:36:28Z",
      "updated_at": "2026-01-20T07:49:57Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/21647",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ",
        "good first issue"
      ],
      "comment_data": [
        {
          "id": 3771502686,
          "user": "crackedhandle",
          "body": "I’d like to work on this. Is anyone currently working on it?",
          "created_at": "2026-01-20T07:49:57Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 60,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1130,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3724650829,
      "number": 34064,
      "title": "Wallet: gettransaction(txid).details changes after confirmation of RBF replacement",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nFor a replaced transaction (txA), the output of gettransaction(txA, true).details\nchanges after the replacement transaction (txB) is confirmed.\n\nSpecifically, a 'receive' entry present after bumpfee disappears once txB is\nconfirmed, even though the queried txid remains txA.\n\nAfter confirmation, repeated calls are stable.\n\n\n### Expected behaviour\n\nFor a given txid, gettransaction(txid).details should be stable once the\nreplacement transaction has been confirmed, or at minimum should not\nretroactively add or remove details entries in a way that changes accounting\ninterpretation for the same transaction id.\n\n\n### Steps to reproduce\n\n1. Create a transaction (txA) from a descriptor wallet.\n2. Replace txA using bumpfee, creating txB.\n3. Query gettransaction(txA, true) and record details.\n4. Mine blocks to confirm txB.\n5. Query gettransaction(txA, true) again and compare details.\n\nA minimal reproduction package and proof artifacts are attached below.\n\n[x3_mini_package.tar.gz](https://github.com/user-attachments/files/24134210/x3_mini_package.tar.gz)\n\nSHA-256 (x3_mini_package.tar.gz):\n47413632eab190a2c2477b0d2f8128bc956326ae3765d8fbf6b2a9da5046a617\n\n### Relevant log output\n\nNo debug.log output is required; the issue is observable via wallet RPC output.\n\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n27.0\n\n### Operating system and version\n\nUbuntu 22.04 LTS (regtest environment)\n\n### Machine specifications\n\nStandard x86_64 Linux host, SSD storage, regtest environment.",
      "state": "closed",
      "user": "husstege-e",
      "created_at": "2025-12-12T19:53:39Z",
      "updated_at": "2026-01-19T19:14:17Z",
      "closed_at": "2026-01-19T19:14:17Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34064",
      "labels": [
        "Wallet",
        "RPC/REST/ZMQ"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1735,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3826722076,
      "number": 34331,
      "title": "qa: Failure in `p2p_fingerprint.py`",
      "body": "On FreeBSD 15.0, https://github.com/hebasto/bitcoin-core-nightly/actions/runs/21105606197/job/60696569283:\n```\n386/456 - p2p_fingerprint.py failed, Duration: 0 s\n\nstdout:\n2026-01-18T04:34:49.101209Z TestFramework (INFO): PRNG seed is: 4679507874993432966\n2026-01-18T04:34:49.102528Z TestFramework (INFO): Initializing test directory /tmp/test_runner_₿_🏃_20260118_042715/p2p_fingerprint_63\n2026-01-18T04:34:49.360239Z TestFramework (ERROR): Unexpected exception\nTraceback (most recent call last):\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 138, in main\n    self.setup()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 269, in setup\n    self.setup_network()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 360, in setup_network\n    self.setup_nodes()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 382, in setup_nodes\n    self.start_nodes()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_framework.py\", line 528, in start_nodes\n    node.wait_for_rpc_connection()\n  File \"/home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/test_framework/test_node.py\", line 316, in wait_for_rpc_connection\n    raise FailedToStartError(self._node_msg(\ntest_framework.test_node.FailedToStartError: [node 0] bitcoind exited with status 1 during initialization. Error: Unable to bind to 127.0.0.1:11756 on this computer. Bitcoin Core is probably already running.\nError: Failed to listen on any port. Use -listen=0 if you want this.\n************************\n\n2026-01-18T04:34:49.423831Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2026-01-18T04:34:49.424142Z TestFramework (WARNING): Not cleaning up dir /tmp/test_runner_₿_🏃_20260118_042715/p2p_fingerprint_63\n2026-01-18T04:34:49.424336Z TestFramework (ERROR): Test failed. Test logging available at /tmp/test_runner_₿_🏃_20260118_042715/p2p_fingerprint_63/test_framework.log\n2026-01-18T04:34:49.424671Z TestFramework (ERROR): \n2026-01-18T04:34:49.425017Z TestFramework (ERROR): Hint: Call /home/runner/work/bitcoin-core-nightly/bitcoin-core-nightly/test/functional/combine_logs.py '/tmp/test_runner_₿_🏃_20260118_042715/p2p_fingerprint_63' to consolidate all logs\n2026-01-18T04:34:49.425220Z TestFramework (ERROR): \n2026-01-18T04:34:49.425516Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\n2026-01-18T04:34:49.425685Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\n2026-01-18T04:34:49.425795Z TestFramework (ERROR): \n\n\n```",
      "state": "open",
      "user": "hebasto",
      "created_at": "2026-01-18T12:22:44Z",
      "updated_at": "2026-01-19T18:07:51Z",
      "closed_at": null,
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/issues/34331",
      "labels": [
        "Tests",
        "CI failed"
      ],
      "comment_data": [
        {
          "id": 3767024448,
          "user": "maflcko",
          "body": "From the netinet/in.h:\n\n\n```\n/*\n * Local port number conventions:\n *\n * When a user does a bind(2) or connect(2) with a port number of zero,\n * a non-conflicting local port address is chosen.\n * The default range is IPPORT_HIFIRSTAUTO through\n * IPPORT_HILASTAUTO, although that is settable by sysctl.\n *\n * A user may set the IPPROTO_IP option IP_PORTRANGE to change this\n * default assignment range.\n *\n * The value IP_PORTRANGE_DEFAULT causes the default behavior.\n *\n * The value IP_PORTRANGE_HIGH changes the range of candidate port numbers\n * into the \"high\" range.  These are reserved for client outbound connections\n * which do not want to be filtered by any firewalls.\n *\n * The value IP_PORTRANGE_LOW changes the range to the \"low\" are\n * that is (by convention) restricted to privileged processes.  This\n * convention is based on \"vouchsafe\" principles only.  It is only secure\n * if you trust the remote host to restrict these ports.\n *\n * The default range of ports and the high range can be changed by\n * sysctl(3).  (net.inet.ip.portrange.{hi,low,}{first,last})\n *\n * Changing those values has bad security implications if you are\n * using a stateless firewall that is allowing packets outside of that\n * range in order to allow transparent outgoing connections.\n *\n * Such a firewall configuration will generally depend on the use of these\n * default values.  If you change them, you may find your Security\n * Administrator looking for you with a heavy object.\n *\n * For a slightly more orthodox text view on this:\n *\n *            ftp://ftp.isi.edu/in-notes/iana/assignments/port-numbers\n *\n *    port numbers are divided into three ranges:\n *\n *                0 -  1023 Well Known Ports\n *             1024 - 49151 Registered Ports\n *            49152 - 65535 Dynamic and/or Private Ports\n *\n */\n\n/*\n * Ports < IPPORT_RESERVED are reserved for\n * privileged processes (e.g. root).         (IP_PORTRANGE_LOW)\n */\n#define\tIPPORT_RESERVED\t\t1024\n\n/*\n * Default local port range, used by IP_PORTRANGE_DEFAULT\n */\n#define IPPORT_EPHEMERALFIRST\t10000\n#define IPPORT_EPHEMERALLAST\t65535\n\n/*\n * Dynamic port range, used by IP_PORTRANGE_HIGH.\n */\n#define\tIPPORT_HIFIRSTAUTO\t49152\n#define\tIPPORT_HILASTAUTO\t65535\n```\n\n\nSo I guess this may have been broken after https://github.com/bitcoin/bitcoin/pull/34186?",
          "created_at": "2026-01-19T08:17:19Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2316,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3767119641,
          "user": "w0xlt",
          "body": "Yes, possibly. FreeBSD’s ephemeral port range (10000–65535) overlaps with the test framework’s static port range (11000–26000).\nSetting `TEST_RUNNER_PORT_MIN=2000` in the external bitcoin-core-nightly FreeBSD CI workflow should mitigate this.",
          "created_at": "2026-01-19T08:42:15Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 242,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3767161843,
          "user": "maflcko",
          "body": "An alternative could be to set `IP_PORTRANGE_HIGH`, but I don't know how to do this on freebsd.",
          "created_at": "2026-01-19T08:53:30Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 95,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3767580324,
          "user": "hebasto",
          "body": "cc @vasild ",
          "created_at": "2026-01-19T10:26:32Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 11,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3767612122,
          "user": "w0xlt",
          "body": "A suggestion: https://github.com/bitcoin/bitcoin/pull/34336",
          "created_at": "2026-01-19T10:33:22Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 59,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3768512788,
          "user": "vasild",
          "body": "Is it correct that the failing test `p2p_fingerprint.py` (ran as 386/456) is not using `port=0` which was introduced in https://github.com/bitcoin/bitcoin/pull/34186?\n\nSo, it is probably because `feature_proxy.py` (280/456) ran before it and used port `11756` and left it in `TIME_WAIT` state (`p2p_private_broadcast.py` was 398/456 and `feature_anchors.py` was 425/456, after the failure of `p2p_fingerprint.py`), right?",
          "created_at": "2026-01-19T14:07:23Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 421,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3768753363,
          "user": "maflcko",
          "body": "> So, it is probably because `feature_proxy.py` (280/456) ran before it and used port `11756` and left it in `TIME_WAIT` state (`p2p_private_broadcast.py` was 398/456 and `feature_anchors.py` was 425/456, after the failure of `p2p_fingerprint.py`), right?\n\nAh, good observation. I'd presume that the port was still in use, but it being in `TIME_WAIT` sounds plausible.\n\n> `root# sysctl net.inet.ip.portrange.first=32768`\n\n>  Setting TEST_RUNNER_PORT_MIN=2000 ...\n\nI think if this only affects freebsd, and all freebsd people are fine to use one of the workarounds, this seems fine. However, I think ideally the tests work out of the box as-is.",
          "created_at": "2026-01-19T15:01:01Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 643,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3769590197,
          "user": "w0xlt",
          "body": "> ideally the tests work out of the box as-is.\n\nUpdated the solution in #34346 to cover IPv6 sockets used by  `feature_proxy.py`.",
          "created_at": "2026-01-19T18:07:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 129,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2957,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3830414066,
      "number": 34343,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "deallanem-oss",
      "created_at": "2026-01-19T16:22:40Z",
      "updated_at": "2026-01-19T16:22:54Z",
      "closed_at": "2026-01-19T16:22:51Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34343",
      "labels": [],
      "comment_data": [
        {
          "id": 3769191163,
          "user": "DrahtBot",
          "body": "\nLLM spam detection (✨ experimental): SPAM. The submission contains only a one-word/placeholder title and template boilerplate with no substantive description, requirements, or actionable details, indicating a non-legitimate or filler post rather than a real issue or contribution.\n\n♻️ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2026-01-19T16:22:51Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 506,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3826801758,
      "number": 34332,
      "title": "BTC Node Sync time",
      "body": "I am currently trying once again to do a BTC core sync. This is proceeding at a pace of around 2% per day and after around 40 days has reached 80% - is this normal. ",
      "state": "closed",
      "user": "pcliff069",
      "created_at": "2026-01-18T13:45:29Z",
      "updated_at": "2026-01-19T12:42:27Z",
      "closed_at": "2026-01-19T00:01:26Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/34332",
      "labels": [],
      "comment_data": [
        {
          "id": 3765320058,
          "user": "l0rinc",
          "body": "Can you please provide more details?\nWhat are your specs (CPU, memory, number of processing units available, backing storage (SSD/HDD/SD/Network-attached storage) and its connection type (USB/PCIe), operating system, Core version, command line options, internet connection speed, etc)?\nAre you using a node-in-a-box solution (Umbrel, RaspiBlitz, Start9, NODL, etc.)?\nIs Tor enabled?\nWhat's your dbcache setting?\nAre any other services running simultaneously (Electrs, Fulcrum, Lightning indexing)?\nIf possible, could you share your `debug.log` file (or relevant portions) - just check it first for any private information like IP addresses you'd prefer not to share.",
          "created_at": "2026-01-18T13:59:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 666,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3765358473,
          "user": "pcliff069",
          "body": "It's a Start9 OS on a BMAX dedicated mini computer. I have never done one of these before and am unsure of the information you are after. Bitcoin Core has service logs - but I have no idea where they are stored when I dowbload them. It's a 2TB SSD, my internet is 1TB down. There are TOR logs so I guess Tor is enabled. Every time I check progress it seems to be Synced Timed out. REtrying soon. I moved from a 1TB SSD system because afrer  spent over a month syncing it I got nothing - Electrs just failed to load. DBcache 5000 Batch 33554432 - not touched by me. I'll try and load whatever logs I can from my main machine tomorrow..\nAnd thanks for the response.",
          "created_at": "2026-01-18T14:33:50Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 663,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3765366638,
          "user": "l0rinc",
          "body": "I have pinged Matt from Start9, maybe he can help you get the details for us, otherwise this is too vague.\nIt would help if you could paste the relevant parts of the `debug.log` for us here.",
          "created_at": "2026-01-18T14:42:39Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 190,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3766038703,
          "user": "MattDHill",
          "body": "This can only be a hardware issue, either extremely slow disk or not enought RAM. There are no known issues related to Bitcoin sync on StartOS. To confirm you can flash the hardware with another other Linux distro and sync.",
          "created_at": "2026-01-19T01:35:13Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 223,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3768153373,
          "user": "yancyribbens",
          "body": "> This can only be a hardware issue, either extremely slow disk or not enought RAM.\n\nSlowness could also be a software problem, and in this case, it seems not unlikely if Start9 uses TOR by default.  It would be best to investigate the fork of startos https://github.com/Start9Labs/start-os since this seems like a custom configuration of OS and software, including Bitcoin.",
          "created_at": "2026-01-19T12:42:27Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 374,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 184,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2797621842,
      "number": 31685,
      "title": "Let's go to PoUW!!!",
      "body": "### Please describe the feature you'd like to see added.\n\nRather than PoW (Proof of Work), why not go on PoUW (Proof of Useful Work)??? If bitcoin should do something useful, then why not? \n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "sojoyork",
      "created_at": "2025-01-19T13:17:55Z",
      "updated_at": "2026-01-19T10:56:24Z",
      "closed_at": "2025-01-19T13:26:10Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/31685",
      "labels": [
        "Feature"
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 466,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3804432320,
      "number": 34262,
      "title": "rpc: Assertion 'block_template' failed in `getblocktemplate` (during shutdown or startup)",
      "body": "The `CHECK_NONFATAL`  check [here](https://github.com/bitcoin/bitcoin/blob/abc6a3a4eb9814a7f17e40f7a4d330cbef86bff0/src/rpc/mining.cpp#L875) may fail when `getblocktemplate` is called during shutdown or during startup.\n\n```\nrpc/mining.cpp:875 auto getblocktemplate()::(anonymous class)::operator()(const RPCHelpMan &, const JSONRPCRequest &) const: Assertion `block_template' failed.\n```\n\nSee attached debug logs of two examples.\n\n[getblocktemplate_during_startup.log](https://github.com/user-attachments/files/24565879/getblocktemplate_during_startup.log)\n[getblocktemplate_during_shutdown.log](https://github.com/user-attachments/files/24565880/getblocktemplate_during_shutdown.log)\n\n*This was found with a test running on [Antithesis](https://antithesis.com/).*",
      "state": "open",
      "user": "dergoegge",
      "created_at": "2026-01-12T13:55:10Z",
      "updated_at": "2026-01-19T10:41:57Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34262",
      "labels": [
        "RPC/REST/ZMQ",
        "Mining"
      ],
      "comment_data": [
        {
          "id": 3763836134,
          "user": "DevPatel-11",
          "body": "I'd like to work on this. Looking at the code now.",
          "created_at": "2026-01-17T14:04:43Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 50,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3766580269,
          "user": "DevPatel-11",
          "body": "I tried reproducing this locally by spamming `getblocktemplate` calls during startup and shutdown, but couldn't trigger the race condition (given the timing window).\n\nLooking at the debug logs:\n- Shutdown case: \"Shutdown in progress...\" message appears right before the assertion failure\n- Startup case: Assertion fails while node is still initializing (network threads just starting)\n\nBoth show `Assertion 'block_template' failed`, which means `createNewBlock()` returned nullptr when the mining subsystem wasn't available.\n\nThe issue is that `CHECK_NONFATAL` assumes this should never happen, but nullptr is actually a valid return during these states. The fix is to replace the assertion with a proper null check and return an RPC error instead.\n\nI'll open a PR with the fix.",
          "created_at": "2026-01-19T06:14:07Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 778,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 854,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 378920700,
      "number": 14692,
      "title": "Can't configure bitocoind to only send tx via Tor but receive clearnet transactions",
      "body": "<!-- Describe the issue -->\r\nThere does not seen to be a way to enable onlynet=onion for sending only and regular clearnet for receiving only.\r\n\r\n<!--- What behavior did you expect? -->\r\nI expected that onlynet=onion would mean outbound connections from only onion nodes. This sort of works but I need to manually add nodes and then if a node is not open also to the outside I am in an isolate Bitcoin network. I also do not seem to be getting any inbound connections with onlynet=onion is this because my IP is always different under Tor and I need to post my .onion domain somewhere for people to find?\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n0.17\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nUbuntu 18.04\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
      "state": "open",
      "user": "ultimatevert",
      "created_at": "2018-11-08T21:17:55Z",
      "updated_at": "2026-01-19T09:23:17Z",
      "closed_at": null,
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/14692",
      "labels": [
        "Feature",
        "Wallet"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1298,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1280635065,
      "number": 25450,
      "title": "Ability to broadcast wallet transactions only via dedicated oneshot Tor connections",
      "body": "It would be nice to have an option to never add your own transactions to the mempool directly and/or broadcast them individually only via a oneshot Tor connection.\r\n\r\nThis is essentially important for users who need blocksonly mode, who would otherwise be forced to choose between being unable to send transactions at all or harming their privacy by only broadcasting their own.\r\n\r\nRelated Twitter thread: https://twitter.com/alpacasw/status/1539660524543045633?t=5DSn3bUEb-AvQ-pPb0GXXg&s=19",
      "state": "closed",
      "user": "luke-jr",
      "created_at": "2022-06-22T17:46:21Z",
      "updated_at": "2026-01-19T09:22:56Z",
      "closed_at": "2026-01-19T09:22:56Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/25450",
      "labels": [
        "Feature",
        "Wallet",
        "P2P"
      ],
      "comment_data": [
        {
          "id": 3767292474,
          "user": "maflcko",
          "body": "> duplicate of [#24557 (comment)](https://github.com/bitcoin/bitcoin/issues/24557#issuecomment-1066663937) ?\n\nClosing as duplicate of https://github.com/bitcoin/bitcoin/issues/14692",
          "created_at": "2026-01-19T09:22:56Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 181,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 575,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2978404475,
      "number": 32235,
      "title": "Tor: TX circuit isolation",
      "body": "Create an option that would forcefully terminate any connection that just sent a locally originating transaction.\n\n-proxyrandomize ensures that each connection corresponds to a tor circuit, therefore terminating connection = terminating circuit\n\nthe same circuit will not send more than 1 transaction. achieving desirable privacy properties.\n\nthis is a preferable solution to the proposed overengineered mess of https://github.com/bitcoin/bitcoin/pull/29415\n",
      "state": "closed",
      "user": "learnwayback",
      "created_at": "2025-04-08T02:08:42Z",
      "updated_at": "2026-01-19T09:15:01Z",
      "closed_at": "2026-01-19T09:15:01Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/32235",
      "labels": [
        "Feature"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 484,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3812548980,
      "number": 34280,
      "title": "Coins Cache Cleanup checklist",
      "body": "The coins cache (the `CCoinsView*` stack, `CCoinsViewCache`, and friends) is a correctness- and performance-critical part of validation, IBD, and assumeutxo.\nOver time it has accumulated subtle invariants and legacy states (around cache entry flags, spent coin handling, and error catching), and we have been chipping away at it through focused refactors, bugfixes, tests, and performance work.\n\nThis issue tracks the related PRs to help reviewers see how they fit together.\nThe overall aim is fewer error cases, cleaner cache layering, and parallel validation.\n\n## PRs needing review\n\n### Remove invalid cache states\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34207 - ensure `GetCoin()` only returns unspent coins, align tests with production.\n* [ ] https://github.com/bitcoin/bitcoin/pull/33018 - remove unreachable FRESH-but-not-DIRTY state.\n\n### Simplify view hierarchy\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34124 - make `CCoinsView` purely virtual, add explicit `CCoinsViewEmpty`.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34320 - replace `HaveCoin()` with `GetCoin()`.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34132 - inline error catcher into `CCoinsViewDB`, simplify hot path.\n\n### Isolate block connection\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34165 - add non-mutating `PeekCoin()` to avoid polluting the main cache.\n* [ ] https://github.com/bitcoin/bitcoin/pull/34164 - add `Reset()` and reusable view to discard failed connects cheaply.\n\n### Flush behavior\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/34125 - consistent `Sync()` vs `Flush()` decision (no behavior change).\n* [ ] https://github.com/bitcoin/bitcoin/pull/33680 - split `FORCE_SYNC`/`FORCE_FLUSH`, keep cache warm for `scantxoutset`/`gettxoutsetinfo`/snapshots.\n* [ ] https://github.com/bitcoin/bitcoin/pull/33512 - track dirty entries so flush progress reflects actual writes.\n\n### Parallel coin fetching\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/31132 - async input prefetch during `ConnectBlock`.\n\n### Other\n\n* [ ] https://github.com/bitcoin/bitcoin/pull/33854 - fix assumevalid ignored during reindex (see #31494).\n* [ ] https://github.com/bitcoin/bitcoin/pull/32317 - move UTXO access to `SpendBlock` (kernel API, Utreexo, SwiftSync).\n\n## Recently merged\n\n* https://github.com/bitcoin/bitcoin/pull/33866 - remove always-true return from `BatchWrite`.\n* https://github.com/bitcoin/bitcoin/pull/33657 - allow reading partial block data (useful for bindex).\n* https://github.com/bitcoin/bitcoin/pull/33602 - reduce map lookups in `BatchWrite`.\n* https://github.com/bitcoin/bitcoin/pull/33333 - warn when `-dbcache` exceeds RAM cap.\n\nIRC context: https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2026-01-08",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2026-01-14T10:23:16Z",
      "updated_at": "2026-01-18T18:27:22Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34280",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3765542029,
          "user": "sedited",
          "body": "The issue seems a bit overladen - I don't think listing all these PRs is useful. Maybe distill this down to just the coins-related PRs? The benefit I would expect from this issue is that I can connect the various PRs touching the coins and see how they relate to each other. Maybe to add to the benefits in the opening paragraph a bit: Fewer error cases, more ergonomic cache layering, and preparation for asynchronous operations. ",
          "created_at": "2026-01-18T17:48:54Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 431,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3765578555,
          "user": "l0rinc",
          "body": "Thanks for the suggestions @sedited and @andrewtoth.\nUpdated the tracker and grouped the PRs - hopefully this helps reviewers see the structure (though many conflict or overlap depending on merge order).\nI put cleanups first since they'd let us avoid ugly hacks in the larger PRs, culminating in the parallel input fetcher.\nLet me know what else to adjust.\n",
          "created_at": "2026-01-18T18:27:02Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 357,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2752,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 957290337,
      "number": 22592,
      "title": "LeakSanitizer detects memory leak if CDBWrapper ctor fails",
      "body": "While running the functional tests under LSAN and 8 parallel jobs, `CDBWrapper` ctor would regularly throw via `HandleError` because of low disk space.  This would make LSAN error because the destructor for `CDBWrapper` was never called and so the `options.block_cache` and some other parameters wouldn't be destructed.\r\n\r\nLSAN output (I deleted the file, but managed to take a picture of it, so log is kind of truncated):\r\n```\r\n==1204791==ERROR:  LeakSanitizer: detected memory leaks\r\n\r\nDirect leak of 3520 byte(s) in 1 object(s) allocated from:\r\n       #0 0x55f632912679 in operator new(unsigned long)\r\n       #1 0x55f6342936d6 in leveldb::NewLRUCache(unsigned long)\r\n       #2 0x55f6335f66f8 in GetOptions(unsigned long)\r\n       #3 0x55f6335f4ec7 in CDBWrapper::CDBWrapper(boost::filesystem::path const&, unsigned long, bool, bool, bool)\r\n       #4 0x55f6332e32cf in std::_MakeUniq<CDBWrapper>::__single_object std::make_unique<CoinsViews ...truncated...\r\n       #5 0x55f6332d2781 in CCoinsViewDB::CCoinsViewDB(boost::filesystem::path, unsigned long, bool, bool)\r\n       #6 0x55f6333ec6e2 in CoinsViews::CoinsViews(std::__cxx11::basic_string<char, std::char_traits<char>, ...truncated...\r\n       #7 0x55f63346a111 in std::_MakeUniq<CoinsViews>::__single_object std::make_unique<CoinsViews, ...truncated...\r\n       #8 0x55f6333ed379 in CChainState::InitCoinsDB(unsigned long, bool, bool, std::__cxx11::basic_string ...truncated...\r\n       #9 0x55f6329699e0 in AppInitMain(NodeContext&, interfaces::BlockAndHeaderTipInfo*)\r\n       #10 0x55f63291868e in AppInit(NodeContext&, int, char**)\r\n       #11 0x55f632915e2f in main\r\n       #12 0x7f86b6f7fb24 in __libc_start_main\r\n```",
      "state": "open",
      "user": "Crypt-iQ",
      "created_at": "2021-07-31T17:44:31Z",
      "updated_at": "2026-01-16T18:14:44Z",
      "closed_at": null,
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/22592",
      "labels": [
        "Bug"
      ],
      "comment_data": [
        {
          "id": 3759572369,
          "user": "willcl-ark",
          "body": "@Crypt-iQ do you think this is likely still an issue? It seems to be difficult to hit (I can't reproduce on a few tries locally), and the PR didn't get enough time dedicated to it to see it through.\n\nDo you think it's worth keeping open to see if someone else will pick it up? ",
          "created_at": "2026-01-16T11:19:11Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 277,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3759661609,
          "user": "maflcko",
          "body": "> It seems to be difficult to hit (I can't reproduce on a few tries locally)\n\nI think IO fault injection could help here as well, ignoring any program state and program exit code, and only looking for sanitizer issues.\n\nI wanted to implement this for a long time. cc @dergoegge you may also want to try this in your infra?",
          "created_at": "2026-01-16T11:41:59Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 322,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3759666248,
          "user": "maflcko",
          "body": "(also removed the 'up for grabs' from the pull, as this issue is open, so it is clear that this may be up-for-grabs, as long as the issue is open)",
          "created_at": "2026-01-16T11:43:29Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 146,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3761238495,
          "user": "Crypt-iQ",
          "body": "> [@Crypt-iQ](https://github.com/Crypt-iQ) do you think this is likely still an issue? It seems to be difficult to hit (I can't reproduce on a few tries locally), and the PR didn't get enough time dedicated to it to see it through.\n> \n> Do you think it's worth keeping open to see if someone else will pick it up?\n\nI'm still able to reproduce by running under address sanitizer and `ASAN_OPTIONS=\"detect_leaks=1\"` with the following diff on top of 0ffb20dee17858e0f13b23fce3dd0ec06cbeb9a2 (latest commit should work as well):\n\n<details>\n<summary>Diff</summary>\n\n```\ndiff --git a/src/dbwrapper.cpp b/src/dbwrapper.cpp\nindex b3f08cb20d..ebee13d120 100644\n--- a/src/dbwrapper.cpp\n+++ b/src/dbwrapper.cpp\n@@ -240,7 +240,8 @@ CDBWrapper::CDBWrapper(const DBParams& params)\n     // on Windows it converts from UTF-8 to UTF-16 before calling ::CreateFileW\n     // (see env_posix.cc and env_windows.cc).\n     leveldb::Status status = leveldb::DB::Open(DBContext().options, fs::PathToString(params.path), &DBContext().pdb);\n-    HandleError(status);\n+    const std::string errmsg = \"Fatal!\";\n+    throw dbwrapper_error(errmsg);\n     LogInfo(\"Opened LevelDB successfully\");\n \n     if (params.options.force_compact) {\n```\n</details>\n\nI think it's pretty benign but it's good to not have false positives so I think this should stay open?",
          "created_at": "2026-01-16T18:14:44Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 1325,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1735,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 3515047935,
      "number": 33628,
      "title": "Minor Release 29.3",
      "body": "🚧 Milestone: https://github.com/bitcoin/bitcoin/milestone/80\n\nBackports and other changes\n- #33623\n- #33611\n- #34222\n- #33788\n- #34268\n\n\nRC 1\n- [x] final changes #34268\n- [x] tag\n- [] upload binaries\n- [] announcements\n\n\nSee [release process docs](https://github.com/bitcoin/bitcoin/blob/master/doc/release-process.md) for more details. This issue can be used to track status updates. Please feel free to suggest backports in the comments.",
      "state": "open",
      "user": "glozow",
      "created_at": "2025-10-14T18:35:27Z",
      "updated_at": "2026-01-16T18:05:47Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/33628",
      "labels": [
        "Tracking Issue"
      ],
      "comment_data": [
        {
          "id": 3761208349,
          "user": "glozow",
          "body": "rc1 has been tagged https://github.com/bitcoin/bitcoin/releases/tag/v29.3rc1",
          "created_at": "2026-01-16T18:05:36Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 76,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 458,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3746547140,
      "number": 34110,
      "title": "scriptpubkeyman fuzz target creates Base58 too large; Fails on 32-bit (armhf, ...)",
      "body": "Decoding should not behave differently on different architectures. See also the related commit 3789215f73466606eb111714f596a2a5e9bb1933.\n\nHowever, the `scriptpubkeyman` fuzz target seems to create base58 strings so large that `uint32_t` overflows for calculations in base58.cpp.\n\nThis is a bit hard to reproduce, because 32-bit platforms are rare and most of them don't support running the unsigned integer overflow sanitizer. So the possible options to reproduce are:\n\n* Run on armhf and manually annotate the code to detect the overflow\n* Run on i386 with the integer sanitizer (possibly via `podman run -it --rm --platform linux/i386 'debian:trixie'`)\n* Run the integer sanitizer on any 64-bit platform and manually replace type in the affected line by `uint32_t`\n\nAfterwards, the steps to reproduce are:\n\n```\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y\n\ncmake -B ./bld-cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero --preset=dev-mode\n\ncmake --build ./bld-cmake --parallel  $(nproc)\n\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/scriptpubkeyman/1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5'\n\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=scriptpubkeyman ./bld-cmake/bin/fuzz ./1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5\n```\n\nThe output will be something like:\n\n```\n/b-c/src/base58.cpp:54:28: runtime error: unsigned integer overflow: 8744655 * 733 cannot be represented in type 'size_t' (aka 'unsigned int')\n    #0 0x5985f849 in DecodeBase58(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:54:28\n    #1 0x59860a8b in DecodeBase58Check(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:148:10\n    #2 0x5986093b in DecodeBase58Check(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:168:12\n    #3 0x599c4fc8 in DecodeSecret(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) /b-c/bld-cmake/src/./key_io.cpp:217:9\n    #4 0x59b05478 in (anonymous namespace)::ParsePubkeyInner(unsigned int, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, bool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1789:20\n    #5 0x59af4256 in (anonymous namespace)::ParsePubkey(unsigned int&, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1978:16\n    #6 0x59adc3af in (anonymous namespace)::ParseScript(unsigned int&, std::span<char const, 4294967295u>&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:2148:24\n    #7 0x59adbc65 in Parse(std::basic_string_view<char, std::char_traits<char>>, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&, bool) /b-c/bld-cmake/src/./script/descriptor.cpp:2751:16\n    #8 0x597ad5de in wallet::(anonymous namespace)::CreateWalletDescriptor(FuzzedDataProvider&) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:73:61\n    #9 0x597ac489 in wallet::(anonymous namespace)::scriptpubkeyman_fuzz_target(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:104:22\n    #10 0x58950a8e in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\n    #11 0x589508eb in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\n    #12 0x5895044b in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\n    #13 0x5982ac95 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\n    #14 0x5981f0da in test_one_input(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\n    #15 0x59821b80 in main /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:271:13\n    #16 0xf75a8cc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #17 0xf75a8d87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #18 0x58917db6 in _start (/b-c/bld-cmake/bin/fuzz+0x235ddb6) (BuildId: 7d8d83a77923f14e99c0de64acbc5f5bfc2cce9b)\n\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /b-c/src/base58.cpp:54:28 \n```\n\n\nObviously, it would be trivial to fix this by using the same type on 64-bit and 32-bit:\n\n```diff\n    refactor: Use uint64_t over size_t for multiplications in DecodeBase58\n\ndiff --git a/src/base58.cpp b/src/base58.cpp\nindex 19a5bd3e55..5364b8276b 100644\n--- a/src/base58.cpp\n+++ b/src/base58.cpp\n@@ -51,7 +51,7 @@ static const int8_t mapBase58[256] = {\n         psz++;\n     }\n     // Allocate enough space in big-endian base256 representation.\n-    int size = strlen(psz) * 733 /1000 + 1; // log(58) / log(256), rounded up.\n+    int size(uint64_t{std::strlen(psz)} * 733 / 1000 + 1); // log(58) / log(256), rounded up.\n     std::vector<unsigned char> b256(size);\n     // Process the characters.\n     static_assert(std::size(mapBase58) == 256, \"mapBase58.size() should be 256\"); // guarantee not out of range\n```\n\nHowever, this seems like the wrong fix. A string of size `8744655` seems a bit large and should probably be rejected by the wallet code (if applicable), or by the fuzz target, if the condition is unreachable in  a production wallet.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T08:12:11Z",
      "updated_at": "2026-01-16T11:57:00Z",
      "closed_at": "2026-01-13T23:28:47Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/34110",
      "labels": [
        "Wallet"
      ],
      "comment_data": [
        {
          "id": 3759461248,
          "user": "maflcko",
          "body": "Same for `mocked_descriptor_parse`: \n\n```\nINFO: Running with entropic power schedule (0xFF, 100).\nINFO: Seed: 1714490762\nINFO: Loaded 1 modules   (657270 inline 8-bit counters): 657270 [0x6387296c, 0x639130e2), \nINFO: Loaded 1 PC tables (657270 PCs): 657270 [0x639130e4,0x63e16c94), \nINFO:     5257 files found in /ci_container_base/ci/scratch/qa-assets/fuzz_corpora/mocked_descriptor_parse\nINFO: -max_len is not provided; libFuzzer will not generate inputs larger than 974352 bytes\nINFO: seed corpus: files: 5257 min: 1b max: 974352b total: 9424368b rss: 107Mb\n#512\tpulse  cov: 20310 ft: 76934 corp: 456/6161b exec/s: 128 rss: 127Mb\n#1024\tpulse  cov: 22356 ft: 110101 corp: 892/17Kb exec/s: 51 rss: 150Mb\n#2048\tpulse  cov: 23009 ft: 140010 corp: 1708/60Kb exec/s: 18 rss: 267Mb\nSlowest unit: 10 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-ae69994a5ca2f513b9be415b80a63c2bec327907\nSlowest unit: 14 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-56da48177d25572299ddf60d57a42d7bce5e317b\n#4096\tpulse  cov: 23542 ft: 163125 corp: 3119/324Kb exec/s: 2 rss: 692Mb\nSlowest unit: 19 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-692b9a7c56b3023f2d1ae3cd2a2e262c063ca1d0\nSlowest unit: 22 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-7f143ed30724b1f950b1effcac76186fb0c2316e\nSlowest unit: 27 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-f7551d1ab2f84f2272498105ddc4846698084e91\nSlowest unit: 30 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-48e2486446d2af625b8da9509e58e367431961fc\nSlowest unit: 37 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-d08c06428a2372c0b2a66de0904f87676fef8b5a\nSlowest unit: 49 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-aacf8a4bfdedd7722dfcb9018cc1ff35eef35081\nSlowest unit: 59 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-cbbf542b2ab8048d07baf5b4f6c0b7d8f669f68e\nSlowest unit: 85 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-8d1c813c5535443d942e829beb3b0d5665556d02\nSlowest unit: 96 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-80b3d5daccb3bb0dfc7b4e03dd0b50d36e59b6de\nSlowest unit: 109 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-01a60537d94e3dd0d5e51c1f8a6ade5128760511\nSlowest unit: 206 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-3e2a547e30dcd94a988ce20e8f632f1f75443626\nSlowest unit: 294 s:\nartifact_prefix='./'; Test unit written to ./slow-unit-53c9e6f4c21acda451de97231976f05ea46d6c35\n/ci_container_base/src/base58.cpp:54:28: runtime error: unsigned integer overflow: 8388989 * 733 cannot be represented in type 'size_t' (aka 'unsigned int')\n    #0 0x6035da73 in DecodeBase58(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./base58.cpp:54:28\n    #1 0x6035e8c8 in DecodeBase58Check(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./base58.cpp:148:10\n    #2 0x6035e8c8 in DecodeBase58Check(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./base58.cpp:168:12\n    #3 0x604b34c4 in DecodeSecret(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./key_io.cpp:217:9\n    #4 0x60617343 in (anonymous namespace)::ParsePubkeyInner(unsigned int, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, bool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./script/descriptor.cpp:1818:20\n    #5 0x605f5a2b in (anonymous namespace)::ParsePubkey(unsigned int&, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./script/descriptor.cpp:2007:16\n    #6 0x605dfbf2 in (anonymous namespace)::ParseScript(unsigned int&, std::span<char const, 4294967295u>&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./script/descriptor.cpp:2363:30\n    #7 0x605d981d in Parse(std::basic_string_view<char, std::char_traits<char>>, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&, bool) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/./script/descriptor.cpp:2780:16\n    #8 0x5fad4625 in mocked_descriptor_parse_fuzz_target(std::span<unsigned char const, 4294967295u>) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/test/fuzz/./test/fuzz/descriptor_parse.cpp:97:27\n    #9 0x5f6b965a in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\n    #10 0x5f6b965a in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\n    #11 0x5f6b965a in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\n    #12 0x6032e266 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\n    #13 0x6032e266 in test_one_input(std::span<unsigned char const, 4294967295u>) /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\n    #14 0x6032e266 in LLVMFuzzerTestOneInput /ci_container_base/ci/scratch/build-i686-pc-linux-gnu/src/test/fuzz/util/./test/fuzz/fuzz.cpp:216:5\n    #15 0x5f5b7b28 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned int) (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe1ab28) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #16 0x5f5b7092 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned int, bool, fuzzer::InputInfo*, bool, bool*) (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe1a092) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #17 0x5f5b8f59 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe1bf59) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #18 0x5f5b9482 in fuzzer::Fuzzer::Loop(std::vector<fuzzer::SizedFile, std::allocator<fuzzer::SizedFile>>&) (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe1c482) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #19 0x5f5a5adb in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned int)) (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe08adb) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #20 0x5f5d1ee7 in main (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xe34ee7) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n    #21 0xf3b39cc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: fe186cb7d4de911234b23072a67be9931a6e562e)\n    #22 0xf3b39d87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: fe186cb7d4de911234b23072a67be9931a6e562e)\n    #23 0x5f59a406 in _start (/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz+0xdfd406) (BuildId: 4a3bad9138f9ac2be12a27f4001cebe27687bcce)\n\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /ci_container_base/src/base58.cpp:54:28 \nMS: 0 ; base unit: 0000000000000000000000000000000000000000\nartifact_prefix='./'; Test unit written to ./crash-f5abf41608addcef3538da61d8096c2050235032\n\n⚠️ Failure generated from target with exit code 1: ['/ci_container_base/ci/scratch/build-i686-pc-linux-gnu/bin/fuzz', '-runs=1', PosixPath('/ci_container_base/ci/scratch/qa-assets/fuzz_corpora/mocked_descriptor_parse')]\n```\n\nSame for ",
          "created_at": "2026-01-16T10:56:12Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 2,
            "text_length": 8971,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3759708490,
          "user": "maflcko",
          "body": "Can be reproduced locally with a 32-bit \"simulation patch\":\n\n```diff\ndiff --git a/src/base58.cpp b/src/base58.cpp\nindex 19a5bd3e55..bce2994db0 100644\n--- a/src/base58.cpp\n+++ b/src/base58.cpp\n@@ -53,3 +53,3 @@ static const int8_t mapBase58[256] = {\n     // Allocate enough space in big-endian base256 representation.\n-    int size = strlen(psz) * 733 /1000 + 1; // log(58) / log(256), rounded up.\n+    int size(uint32_t(std::strlen(psz)) * 733 / 1000 + 1); // log(58) / log(256), rounded up.\n     std::vector<unsigned char> b256(size);\n```\n\nAnd then:\n\n```\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/mocked_descriptor_parse/f5abf41608addcef3538da61d8096c2050235032'\n\nFUZZ=mocked_descriptor_parse UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" ./bld-cmake/bin/fuzz ./f5abf41608addcef3538da61d8096c2050235032\n```\n\n",
          "created_at": "2026-01-16T11:57:00Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 957,
            "has_nack": false,
            "has_ack": true
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 2,
        "positive_keywords": 1,
        "text_length": 7488,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 3821539981,
      "number": 34316,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Fleinsopp",
      "created_at": "2026-01-16T11:02:00Z",
      "updated_at": "2026-01-16T11:05:57Z",
      "closed_at": "2026-01-16T11:05:48Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/34316",
      "labels": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 3,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1642095164,
      "number": 27343,
      "title": "-Wmaybe-uninitialized warnings under LTO",
      "body": "Building under GCC `14.0.1` with `-flto` (Fedora Rawhide) currently results in a number of `-Wmaybe-uninitialized` warnings. Some of these are things we might not want to \"fix\", i.e in test code. Some come from leveldb etc. Open this issue to document them, as some exist with current versions of GCC, and GCC 14.0 will be released soon:\r\n\r\n```bash\r\nleveldb/db/memtable.cc: In function 'GetLengthPrefixedSlice':\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nIn function 'GetLengthPrefixedSlice',\r\n    inlined from 'operator()' at leveldb/db/memtable.cc:32:35,\r\n    inlined from 'KeyIsAfterNode' at ./leveldb/db/skiplist.h:257:37,\r\n    inlined from 'FindGreaterOrEqual' at ./leveldb/db/skiplist.h:268:23:\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc: In member function 'FindGreaterOrEqual':\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nleveldb/db/memtable.cc: In member function 'Get':\r\nleveldb/db/memtable.cc:119:39: warning: 'key_length' may be used uninitialized [-Wmaybe-uninitialized]\r\n  119 |             Slice(key_ptr, key_length - 8), key.user_key()) == 0) {\r\n      |                                       ^\r\nleveldb/db/memtable.cc:116:14: note: 'key_length' was declared here\r\n  116 |     uint32_t key_length;\r\n      |              ^\r\nIn member function 'operator=',\r\n    inlined from '__ct ' at test/prevector_tests.cpp:215:49,\r\n    inlined from 'test_method.isra' at test/prevector_tests.cpp:222:34:\r\nrandom.cpp:749:19: warning: 'D.58376.bitbuf' is used uninitialized [-Wuninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/prevector_tests.cpp: In function 'test_method.isra':\r\ntest/prevector_tests.cpp:215:22: note: '<anonymous>' declared here\r\n  215 |         rand_cache = FastRandomContext(rand_seed);\r\n      |                      ^\r\nleveldb/db/memtable.cc: In function 'GetLengthPrefixedSlice':\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nleveldb/db/memtable.cc: In function 'GetLengthPrefixedSlice':\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nIn function 'GetLengthPrefixedSlice',\r\n    inlined from 'operator()' at leveldb/db/memtable.cc:32:35,\r\n    inlined from 'KeyIsAfterNode' at ./leveldb/db/skiplist.h:257:37,\r\n    inlined from 'FindGreaterOrEqual' at ./leveldb/db/skiplist.h:268:23:\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc: In member function 'FindGreaterOrEqual':\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nIn function 'GetLengthPrefixedSlice',\r\n    inlined from 'operator()' at leveldb/db/memtable.cc:32:35,\r\n    inlined from 'KeyIsAfterNode' at ./leveldb/db/skiplist.h:257:37,\r\n    inlined from 'FindGreaterOrEqual' at ./leveldb/db/skiplist.h:268:23:\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc: In member function 'FindGreaterOrEqual':\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nleveldb/db/memtable.cc: In member function 'Get':\r\nleveldb/db/memtable.cc:119:39: warning: 'key_length' may be used uninitialized [-Wmaybe-uninitialized]\r\n  119 |             Slice(key_ptr, key_length - 8), key.user_key()) == 0) {\r\n      |                                       ^\r\nleveldb/db/memtable.cc:116:14: note: 'key_length' was declared here\r\n  116 |     uint32_t key_length;\r\n      |              ^\r\nIn member function 'operator=',\r\n    inlined from 'Seed.constprop' at test/util/random.cpp:32:33:\r\nrandom.cpp:749:19: warning: 'D.69037.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/util/random.cpp: In function 'Seed.constprop':\r\ntest/util/random.cpp:32:33: note: '<anonymous>' declared here\r\n   32 |     ctx = FastRandomContext(seed);\r\n      |                                 ^\r\nleveldb/db/memtable.cc: In member function 'Get':\r\nleveldb/db/memtable.cc:119:39: warning: 'key_length' may be used uninitialized [-Wmaybe-uninitialized]\r\n  119 |             Slice(key_ptr, key_length - 8), key.user_key()) == 0) {\r\n      |                                       ^\r\nleveldb/db/memtable.cc:116:14: note: 'key_length' was declared here\r\n  116 |     uint32_t key_length;\r\n      |              ^\r\nIn member function 'operator=',\r\n    inlined from 'Seed' at test/util/random.cpp:32:33,\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:41:13,\r\n    inlined from '__ct_base ' at test/util/setup_common.cpp:184:21:\r\nrandom.cpp:749:19: warning: 'D.40691.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/util/random.cpp: In member function '__ct_base ':\r\ntest/util/random.cpp:32:33: note: '<anonymous>' declared here\r\n   32 |     ctx = FastRandomContext(seed);\r\n      |                                 ^\r\nleveldb/db/memtable.cc: In function 'GetLengthPrefixedSlice':\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nIn function 'GetLengthPrefixedSlice',\r\n    inlined from 'operator()' at leveldb/db/memtable.cc:32:35,\r\n    inlined from 'KeyIsAfterNode' at ./leveldb/db/skiplist.h:257:37,\r\n    inlined from 'FindGreaterOrEqual' at ./leveldb/db/skiplist.h:268:23:\r\nleveldb/db/memtable.cc:18:22: warning: 'len' may be used uninitialized [-Wmaybe-uninitialized]\r\n   18 |   return Slice(p, len);\r\n      |                      ^\r\nleveldb/db/memtable.cc: In member function 'FindGreaterOrEqual':\r\nleveldb/db/memtable.cc:15:12: note: 'len' was declared here\r\n   15 |   uint32_t len;\r\n      |            ^\r\nleveldb/db/memtable.cc: In member function 'Get':\r\nleveldb/db/memtable.cc:119:39: warning: 'key_length' may be used uninitialized [-Wmaybe-uninitialized]\r\n  119 |             Slice(key_ptr, key_length - 8), key.user_key()) == 0) {\r\n      |                                       ^\r\nleveldb/db/memtable.cc:116:14: note: 'key_length' was declared here\r\n  116 |     uint32_t key_length;\r\n      |              ^\r\ntest/fuzz/float.cpp: In function 'float_fuzz_target':\r\ntest/fuzz/float.cpp:49:40: warning: 'tmp' may be used uninitialized [-Wmaybe-uninitialized]\r\n   49 |         uint64_t encoded = EncodeDouble(d);\r\n      |                                        ^\r\ntest/fuzz/float.cpp:21:20: note: 'tmp' was declared here\r\n   21 |             double tmp;\r\n      |                    ^\r\nIn member function 'operator=',\r\n    inlined from 'operator()' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from '__ct ' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from 'addrman_serdeser_fuzz_target' at test/fuzz/addrman.cpp:295:69:\r\nrandom.cpp:749:19: warning: 'D.36455.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/fuzz/addrman.cpp: In function 'addrman_serdeser_fuzz_target':\r\ntest/fuzz/addrman.cpp:127:9: note: '<anonymous>' declared here\r\n  127 |         WITH_LOCK(m_impl->cs, m_impl->insecure_rand = FastRandomContext{ConsumeUInt256(fuzzed_data_provider)});\r\n      |         ^\r\nIn member function 'operator=',\r\n    inlined from 'operator()' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from '__ct ' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from 'addrman_serdeser_fuzz_target' at test/fuzz/addrman.cpp:296:69:\r\nrandom.cpp:749:19: warning: 'D.36632.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/fuzz/addrman.cpp: In function 'addrman_serdeser_fuzz_target':\r\ntest/fuzz/addrman.cpp:127:9: note: '<anonymous>' declared here\r\n  127 |         WITH_LOCK(m_impl->cs, m_impl->insecure_rand = FastRandomContext{ConsumeUInt256(fuzzed_data_provider)});\r\n      |         ^\r\nIn member function 'operator=',\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:39:72,\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:36:20,\r\n    inlined from 'test_method' at test/cuckoocache_tests.cpp:40:21,\r\n    inlined from 'test_cuckoocache_no_fakes_invoker' at test/cuckoocache_tests.cpp:38:1:\r\nrandom.cpp:749:19: warning: 'D.46810.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\n./test/util/random.h: In function 'test_cuckoocache_no_fakes_invoker':\r\n./test/util/random.h:39:72: note: '<anonymous>' declared here\r\n   39 |         g_insecure_rand_ctx = FastRandomContext(/*fDeterministic=*/true);\r\n      |                                                                        ^\r\nIn member function 'operator=',\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:39:72,\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:36:20,\r\n    inlined from 'test_cache' at test/cuckoocache_tests.cpp:58:21,\r\n    inlined from 'test_method' at test/cuckoocache_tests.cpp:117:84,\r\n    inlined from 'cuckoocache_hit_rate_ok_invoker' at test/cuckoocache_tests.cpp:109:1:\r\nrandom.cpp:749:19: warning: 'D.48398.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\n./test/util/random.h: In function 'cuckoocache_hit_rate_ok_invoker':\r\n./test/util/random.h:39:72: note: '<anonymous>' declared here\r\n   39 |         g_insecure_rand_ctx = FastRandomContext(/*fDeterministic=*/true);\r\n      |                                                                        ^\r\nIn member function 'operator=',\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:39:72,\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:36:20,\r\n    inlined from 'test_cache_erase' at test/cuckoocache_tests.cpp:129:21,\r\n    inlined from 'test_method' at test/cuckoocache_tests.cpp:185:72,\r\n    inlined from 'cuckoocache_erase_ok_invoker' at test/cuckoocache_tests.cpp:182:1:\r\nrandom.cpp:749:19: warning: 'D.50490.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\n./test/util/random.h: In function 'cuckoocache_erase_ok_invoker':\r\n./test/util/random.h:39:72: note: '<anonymous>' declared here\r\n   39 |         g_insecure_rand_ctx = FastRandomContext(/*fDeterministic=*/true);\r\n      |                                                                        ^\r\nIn function '__fill_a1',\r\n    inlined from '__fill_a1' at /usr/include/c++/14/bits/stl_algobase.h:981:21,\r\n    inlined from '__fill_a' at /usr/include/c++/14/bits/stl_algobase.h:998:21,\r\n    inlined from 'fill' at /usr/include/c++/14/bits/stl_algobase.h:1029:20,\r\n    inlined from 'PollutePubKey' at wallet/test/wallet_tests.cpp:503:14:\r\n/usr/include/c++/14/bits/stl_algobase.h:952:18: warning: '__builtin_memset' specified bound 18446744073709551615 exceeds maximum object size 9223372036854775807 [-Wstringop-overflow=]\r\n  952 |         *__first = __tmp;\r\n      |                  ^\r\nIn member function 'operator=',\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:39:0,\r\n    inlined from 'test_method' at test/util_tests.cpp:448:21,\r\n    inlined from 'util_seed_insecure_rand_invoker' at test/util_tests.cpp:446:1:\r\nrandom.cpp:749:19: warning: 'D.49511.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\n./test/util/random.h: In function 'util_seed_insecure_rand_invoker':\r\n./test/util/random.h:39: note: '<anonymous>' declared here\r\n   39 |         g_insecure_rand_ctx = FastRandomContext(/*fDeterministic=*/true);\r\nIn member function 'operator=',\r\n    inlined from 'operator()' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from '__ct ' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from 'make_unique' at /usr/include/c++/14/bits/unique_ptr.h:1076:30,\r\n    inlined from 'addrman_fuzz_target' at test/fuzz/addrman.cpp:228:97:\r\nrandom.cpp:749:19: warning: 'D.38104.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/fuzz/addrman.cpp: In function 'addrman_fuzz_target':\r\ntest/fuzz/addrman.cpp:127:9: note: '<anonymous>' declared here\r\n  127 |         WITH_LOCK(m_impl->cs, m_impl->insecure_rand = FastRandomContext{ConsumeUInt256(fuzzed_data_provider)});\r\n      |         ^\r\nIn member function 'operator=',\r\n    inlined from 'operator()' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from '__ct ' at test/fuzz/addrman.cpp:127:9,\r\n    inlined from 'make_unique' at /usr/include/c++/14/bits/unique_ptr.h:1076:30,\r\n    inlined from 'addrman_fuzz_target' at test/fuzz/addrman.cpp:235:66:\r\nrandom.cpp:749:19: warning: 'D.41251.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/fuzz/addrman.cpp: In function 'addrman_fuzz_target':\r\ntest/fuzz/addrman.cpp:127:9: note: '<anonymous>' declared here\r\n  127 |         WITH_LOCK(m_impl->cs, m_impl->insecure_rand = FastRandomContext{ConsumeUInt256(fuzzed_data_provider)});\r\n      |         ^\r\nIn member function 'operator=',\r\n    inlined from 'Seed' at test/util/random.cpp:32:33,\r\n    inlined from 'SeedInsecureRand' at ./test/util/random.h:41:13,\r\n    inlined from '__ct_base ' at test/util/setup_common.cpp:184:21:\r\nrandom.cpp:749:19: warning: 'D.39055.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/util/random.cpp: In member function '__ct_base ':\r\ntest/util/random.cpp:32:33: note: '<anonymous>' declared here\r\n   32 |     ctx = FastRandomContext(seed);\r\n      |                                 ^\r\nIn member function 'operator=',\r\n    inlined from 'test_method' at test/orphanage_tests.cpp:57:56,\r\n    inlined from 'DoS_mapOrphans_invoker' at test/orphanage_tests.cpp:49:1:\r\nrandom.cpp:749:19: warning: 'D.45887.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  749 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/orphanage_tests.cpp: In function 'DoS_mapOrphans_invoker':\r\ntest/orphanage_tests.cpp:57:56: note: '<anonymous>' declared here\r\n   57 |     g_insecure_rand_ctx = FastRandomContext{uint256{33}};\r\n      |                                                        ^\r\nIn member function '__ct ',\r\n    inlined from 'construct_at' at /usr/include/c++/14/bits/stl_construct.h:97:14,\r\n    inlined from 'construct' at /usr/include/c++/14/bits/alloc_traits.h:536:21,\r\n    inlined from '_M_realloc_append' at /usr/include/c++/14/bits/vector.tcc:634:26,\r\n    inlined from 'emplace_back' at /usr/include/c++/14/bits/vector.tcc:123:21,\r\n    inlined from 'test_method' at test/logging_tests.cpp:166:45,\r\n    inlined from 'logging_LogPrintMacros_CategoryName_invoker' at test/logging_tests.cpp:156:1:\r\n/usr/include/c++/14/bits/stl_pair.h:444:11: warning: 'category' may be used uninitialized [-Wmaybe-uninitialized]\r\n  444 |         : first(std::forward<_U1>(__x)), second(std::forward<_U2>(__y))\r\n      |           ^\r\ntest/logging_tests.cpp: In function 'logging_LogPrintMacros_CategoryName_invoker':\r\ntest/logging_tests.cpp:163:25: note: 'category' was declared here\r\n  163 |         BCLog::LogFlags category;\r\n      |                         ^\r\n\r\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2023-03-27T13:43:17Z",
      "updated_at": "2026-01-16T11:05:40Z",
      "closed_at": "2026-01-16T11:05:40Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/27343",
      "labels": [
        "Build system",
        "Upstream"
      ],
      "comment_data": [
        {
          "id": 3759305276,
          "user": "willcl-ark",
          "body": "Is this still an issue worth keeping open? I have tried using:\n\n```dockerfile\nFROM fedora:rawhide\n\nRUN dnf install -y \\\n    gcc14 \\\n    gcc14-c++ \\\n    cmake \\\n    make \\\n    python3 \\\n    libevent-devel \\\n    boost-devel \\\n    sqlite-devel \\\n    git \\\n    && dnf clean all\n\nENV CC=gcc-14\nENV CXX=g++-14\n\nRUN git clone --depth=1 https://github.com/bitcoin/bitcoin.git /bitcoin\n\nWORKDIR /bitcoin\n\nRUN cmake -B build -DENABLE_IPC=FALSE -DCMAKE_C_FLAGS=\"-flto\" -DCMAKE_CXX_FLAGS=\"-flto\" \\\n    && cmake --build build --parallel\n```\n\n...which installs gcc 14.3.1:\n\n```log\n#8 9.737 C++ compiler .......................... GNU 14.3.1, /usr/sbin/g++-14\n#8 9.737 CMAKE_BUILD_TYPE ...................... RelWithDebInfo\n#8 9.738 Preprocessor defined macros ...........\n#8 9.738 C++ compiler flags .................... -flto -O2 -g -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/bitcoin/src=. -fmacro-prefix-map=/bitcoin/src=. -fstack-reuse=none -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter\n#8 9.738 Linker flags .......................... -flto -O2 -g -fstack-reuse=none -fstack-protector-all -fcf-protection=full -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\n```\n\nand, with the exception of some lto warnings:\n\n```log\n#8 100.0 [ 99%] Building CXX object src/test/CMakeFiles/test_bitcoin.dir/__/wallet/test/wallet_transaction_tests.cpp.o\n#8 119.5 lto-wrapper: warning: using serial compilation of 20 LTRANS jobs\n#8 119.5 lto-wrapper: note: see the '-flto' option documentation for more information\n#8 126.5 [ 99%] Built target bitcoin\n#8 148.5 [ 99%] Linking CXX executable ../bin/bitcoind\n#8 151.0 [ 99%] Built target bitcoin-util\nc#8 163.9 [100%] Linking CXX executable ../bin/bitcoin-wallet\n#8 168.9 [100%] Built target bitcoin-cli\n#8 169.1 lto-wrapper: warning: using serial compilation of 37 LTRANS jobs\n#8 169.1 lto-wrapper: note: see the '-flto' option documentation for more information\n#8 169.8 [100%] Linking CXX executable ../../bin/test_bitcoin\n#8 173.3 lto-wrapper: warning: using serial compilation of 128 LTRANS jobs\n#8 173.3 lto-wrapper: note: see the '-flto' option documentation for more information\n#8 184.8 [100%] Built target bitcoin-tx\n#8 186.0 lto-wrapper: warning: using serial compilation of 128 LTRANS jobs\n#8 186.0 lto-wrapper: note: see the '-flto' option documentation for more information\n#8 212.3 [100%] Built target bitcoin-wallet\n#8 334.0 [100%] Built target bitcoind\n#8 485.2 [100%] Built target test_bitcoin\n#8 DONE 485.3s\n```\n\nI don't see the `-Wmaybe-uninitialized` warnings any more.\n\nunrelated: whew lto really takes a long while!",
          "created_at": "2026-01-16T10:26:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 1,
            "text_length": 2947,
            "has_nack": false,
            "has_ack": true
          }
        },
        {
          "id": 3759362621,
          "user": "maflcko",
          "body": "https://gcc.gnu.org/bugzilla/show_bug.cgi?id=24639 is pretty filled, so I don't expect those warnings to generally go away any time soon. I think we can just point to https://gcc.gnu.org/bugzilla/show_bug.cgi?id=24639 if someone complains, but I'd presume that no user is using LTO, is there one?",
          "created_at": "2026-01-16T10:37:14Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 296,
            "has_nack": false,
            "has_ack": false
          }
        },
        {
          "id": 3759509599,
          "user": "fanquake",
          "body": "Yea I think it's fine to close. There are still various warnings, depending on the target, but not much for us to do. FWIW I am building with LTO fairly often.",
          "created_at": "2026-01-16T11:05:40Z",
          "drama_signals": {
            "drama_keywords": 0,
            "positive_keywords": 0,
            "text_length": 159,
            "has_nack": false,
            "has_ack": false
          }
        }
      ],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 16310,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1027271193,
      "number": 23285,
      "title": "Missing CheckMinimalPush check in MatchMultisig: largest IsStandard multisig n-of-3 is 12 bytes too large?",
      "body": "The following four equivalent scripts all pass standardness check (`IsStandard`):\r\n\r\n* `1 0x21 0x020000000000000000000000000000000000000000000000000000000000000000 1 CHECKMULTISIG`\r\n* `1 0x4c21 0x020000000000000000000000000000000000000000000000000000000000000000 1 CHECKMULTISIG`\r\n* `1 0x4d2100 0x020000000000000000000000000000000000000000000000000000000000000000 1 CHECKMULTISIG`\r\n* `1 0x4e21000000 0x020000000000000000000000000000000000000000000000000000000000000000 1 CHECKMULTISIG`\r\n\r\nWhere `0x4c == OP_PUSHDATA1`, `0x4d == OP_PUSHDATA2` and `0x4e == OP_PUSHDATA4`.\r\n\r\nOnly the first one would pass the standardness check if minimal representation was enforced.\r\n\r\nAFAICT we check for minimal representation in all other `IsStandard` standardness checks. Is there any particular reason we're not doing it for `CHECKMULTISIG` in `MatchMultisig`? :)",
      "state": "open",
      "user": "practicalswift",
      "created_at": "2021-10-15T09:44:55Z",
      "updated_at": "2026-01-16T11:00:48Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/23285",
      "labels": [
        "Validation",
        "Needs Conceptual Review"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 958,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1096320067,
      "number": 24003,
      "title": "Derive individual index descriptor",
      "body": "Given a `Descriptor` of the form `tr(xpub/0/*)#checksumA`, derive  `tr(xpub/0/i)#checksumB`. Currently this requires either string manipulation or inferring a fresh descriptor from a wallet script. The latter is not a 1-to-1 mapping, so e.g. a `sorted_multi` descriptor can't be inferred this way.\r\n\r\nThis can create a problem when trying to display an address on an external signer device:\r\nhttps://github.com/bitcoin/bitcoin/blob/a0988140b71485ad12c3c3a4a9573f7c21b1eff8/src/wallet/external_signer_scriptpubkeyman.cpp#L51-L57\r\n\r\nSome devices, e.g. the Blockstream Jade https://github.com/bitcoin-core/HWI/pull/559#issuecomment-1007399463, can't display an address based on just the derivation info and a public key, they need the `xpub` too.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2022-01-07T13:31:16Z",
      "updated_at": "2026-01-16T11:00:30Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/24003",
      "labels": [
        "Wallet",
        "Descriptors"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 778,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1205500556,
      "number": 24861,
      "title": "Awesome multisig PR labyrinth guide",
      "body": "@ryanofsky recently suggested that I should write an overview of how the various pull requests spread over different repositories relate to some bigger picture view.\n\nSee the [multisig tutorial](https://github.com/bitcoin/bitcoin/blob/master/doc/multisig-tutorial.md) for how things currently work.\n\nI typically have the following future multisig wallet in mind to guide my thinking:\n1. a computer running Bitcoin Core holding one master key (key 1)\n2. one or more hardware wallets with additional keys, via HWI (keys 2 ... n)\n3. taproot keypath using n-of-n MuSig2\n4. a fallback with fewer keys after some time elapsed\n5. a GUI wizard to set this up (simple Python command line tool until then)\n\nThe descriptors for this could be hand crafted, but it would be nice to have:\n6. Miniscript compiler that can generate this\n\n**What's Missing?**\n\n- Taproot support for external signers:\n  - [x] #22558 (PSBT fields)\n  - [x] #23578 (External signer support)\n- [x] Timelock support for descriptors: this will be added along with full [MiniScript](https://bitcoin.sipa.be/miniscript/) support in #24148 & #24149 (@darosior).\n- [ ] Ability to handle descriptors for which we have 1-of-N keys. Descriptor wallets currently expect the wallet to be either watch-only and have no keys, or to have all the keys.\n  - [x] #29130 makes it possible to create a wallet _with_ a seed, but without any descriptors.\n  - [ ] The user would grab an xpub from it (#22341,#32784) to construct a multisig descriptor and then import that.\n    - [x] #29130 added `gethdkeys`, helpful but doesn't support arbitrary derivation paths\n- [ ] MuSig2 setup and signing support, which requires:\n  - [x] a BIP to specify new PSBT fields (tracked in #23326)\n  - [ ] #31247\n  - [ ] Bitcoin Core MuSig2 support: #29675\n  - [ ] At least one other (hardware) wallet to support it\n    - [ ] Ledger demo app, see [#29675](https://github.com/bitcoin/bitcoin/pull/29675#issuecomment-2152172999)\n  - HWI changes: probably none needed\n- [ ] a simple Python setup wizard\n   * right now [Specter Desktop](https://github.com/cryptoadvance/specter-desktop) is by far the easiest way to setup a multisig wallet. But it's a huge dependency (including a bunch of NPM packages for their web interface). A simple Python script in contrib/ could call HWI to get a list of signers, ask what threshold to use, call `createwallet` to generate a blank wallet, fetch an xpub from it, and then call `importdescriptors`.\n   * the script could use [BIP 129 / BSMS](https://github.com/bitcoin/bips/blob/master/bip-0129.mediawiki) (perhaps initially without encryption)\n   * Specter doesn't set the external_signer wallet flag, so I have a trivial PR to do that manually: #21928 (up for grabs)\n- [ ] a GUI setup wizard: once we have an established work flow, we would implement that in the GUI\n\n**Misc**\n\nI have a PR that improves address display handling on the device:\n\n- [x] https://github.com/bitcoin/bitcoin/pull/24313\n\nEven better would be if we had a feature to ask the wallet for a signature to prove it has the private key (without passing that information to the outside world of course, see #24186). This requires BIP-322 support on our end (#24058), at least one hardware wallet to support it, and a new HWI `signmessage` command. Perhaps this can later be expanded to allow your device to prove that it (still) has the keys it needs as a co-signer.\n\nMiniscript compilers currently doesn't support Taproot (e.g. to find the optimal tree structure), but I'm assuming you can still hand craft a leaf containing MiniScript. ",
      "state": "open",
      "user": "Sjors",
      "created_at": "2022-04-15T11:17:53Z",
      "updated_at": "2026-01-16T11:00:14Z",
      "closed_at": null,
      "comments": 20,
      "url": "https://github.com/bitcoin/bitcoin/issues/24861",
      "labels": [
        "Docs",
        "Wallet",
        "Tracking Issue"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3601,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1361257796,
      "number": 26004,
      "title": "util::Result has confusing interface for std::*_ptr T",
      "body": "`util::Result<std::unique_ptr<...>>` treats a nullptr as a `true` value. This has caused at least one bug so far.\r\n\r\nCan we easily forbid passing nullptr in this way? Is there a better/safer solution?",
      "state": "open",
      "user": "luke-jr",
      "created_at": "2022-09-04T21:31:49Z",
      "updated_at": "2026-01-16T10:59:45Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/26004",
      "labels": [
        "interfaces"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 254,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 996573480,
      "number": 22978,
      "title": "RFC: ArgsManager type and range checking",
      "body": "This issue exists to explore ways of improving the ArgsManager interface to be more convenient and add compile-time type safety.\r\n\r\n#16545 adds runtime type checking for ArgsManager options, but it isn't changing ArgsManager `AddArg` / `GetArg` interface, only adding new flags and behaviors to the existing interface, so it is not taking advantage of C++'s type safety to enforce at compile time that options are always retrieved with the same types they were registered with. A branch that implements this feature is being developed at:\r\n\r\n- https://github.com/ryanofsky/bitcoin/commits/pr/argtype\r\n\r\nAnd is described in [(comment)](https://github.com/bitcoin/bitcoin/issues/22978#issuecomment-2265757710) and [(comment)](https://github.com/bitcoin/bitcoin/issues/22978#issuecomment-2273576739).\r\n\r\nPlanned additional features are:\r\n\r\n- Dropping dependency on [#16545](https://github.com/bitcoin/bitcoin/pull/16545) and making new interface backwards compatible with existing arguments.\r\n- Writing a scripted diff to port all current ArgsManager AddArg and GetArg calls to use the new interface and be backwards compatible, without changing any behavior\r\n- Adding helpers to read arguments directly into Options structs like BlockManager::Options MemPoolOptions without needing to list types or struct members more than once.\r\n- Adding support for custom types (enums, structs, and classes) so Options structs are not limited to reading bool, int, and string options.\r\n- Adding documentation about the implementation and how to use the interface.\r\n\r\n---\r\n\r\nThis issue description has been edited since the issue was opened. The original description was:\r\n\r\n_Originally posted by @ryanofsky in https://github.com/bitcoin/bitcoin/pull/22766#discussion_r694969613_:\r\n\r\nThe way I would like range checking to work in the future would be to rely more on C++ types and `std::numeric_limits`. The idea is arguments would be registered using explicit C++ types:\r\n\r\n```c++\r\nconst Setting<int> SETTING_myint(\"-myint\", \"description\");\r\nconst Setting<std::string> SETTING_mystring(\"-mystring\", \"description\");\r\nconst Setting<std::vector<std::string>> SETTING_mylist(\"-mylist\", \"description\");\r\nconst Setting<std::optional<std::uint16_t>> SETTING_myopt(\"-myopt\", \"description\");\r\nconst Setting<SettingsValue> SETTING_mylegacy(\"-mylegacy\", \"description\");\r\n\r\nvoid RegisterArgs(ArgsManager& args)\r\n{\r\n    args.Register({SETTING_myint, SETTING_mystring, SETTING_mylist, SETTING_myopt, SETTING_mylegacy});\r\n}\r\n```\r\n\r\nand then they could be retrieved in a type safe way:\r\n\r\n```\r\nargs.Get(SETTING_myint);    // returns int\r\nargs.Get(SETTING_mystring); // returns std::string\r\nargs.Get(SETTING_mylist);   // returns std::vector<std::string>\r\nargs.Get(SETTING_myopt);    // returns std::optional<uint16_t>\r\nargs.GetArg/GetArgs/GetIntArg/GetBoolArg(SETTING_mylegacy); // returns requested type\r\n```\r\n\r\nTo get to this point, this PR cleans up existing misused flags and misnamed functions. PR #16545 adds type validation and runtime semantics without changing the ArgsManager API, and a followup PR can improve the API and update call sites without changing the semantics. (There is a direct correspondence between the `ALLOW_` flags from #16545 and the useful C++ settings types `bool`/`int`/`std::string`/`std::optional`/`std::variant`/`std::vector`)\r\n\r\n_Originally posted by @ajtowns https://github.com/bitcoin/bitcoin/pull/22766#discussion_r701448785_:\r\n\r\nI think I finally figured out how you can go a little bit further than the above, ending up with something like:\r\n\r\n```c++\r\nstruct NetSettings\r\n{\r\n    int64_t blockreconstructionextratxn;\r\n    int64_t maxorphantx;\r\n    bool capturemessages;\r\n\r\n    template<typename C, typename... Args>\r\n    static inline void F(Args&... args) {\r\n        return C::Do(args...,\r\n            C::Defn( &NetSettings::blockreconstructionextratxn, \"-blockreconstructionextratxn=<n>\", strprintf(\"Extra transactions to keep in memory for compact block reconstructions (default: %u)\", DEFAULT_BLOCK_RECONSTRUCTION_EXTRA_TXN), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS, DEFAULT_BLOCK_RECONSTRUCTION_EXTRA_TXN ),\r\n            C::Defn( &NetSettings::maxorphantx, \"-maxorphantx=<n>\", strprintf(\"Keep at most <n> unconnectable transactions in memory (default: %u)\", DEFAULT_MAX_ORPHAN_TRANSACTIONS), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS, DEFAULT_MAX_ORPHAN_TRANSACTIONS ),\r\n            C::Defn( &NetSettings::capturemessages, \"-capturemessages\", \"Capture all P2P messages to disk\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST, false )\r\n        );\r\n    }\r\n};\r\n\r\nvoid RegisterNetProcessingArgs(ArgsManager& args)\r\n{\r\n    SettingsRegister<NetSettings>::Register(args);\r\n}\r\n\r\nNetSettings GetNetSettings(const ArgsManager& args)\r\n{\r\n    return SettingsRegister<NetSettings>::Get(args);\r\n}\r\n\r\nclass PeerManagerImpl\r\n{\r\nprivate:\r\n    const NetSettings m_settings;\r\n    PeerManagerImpl(..., const ArgsManager& args) : m_settings{GetNetSettings(args)), ... { ... }\r\n    ...\r\n};\r\n```\r\n\r\nThe idea being that this way:\r\n * it can infer the argument type directly from the type of the struct member so that you can't accidentally specify different types between `args.AddArg<int>` and `Get<bool>`\r\n  * that the settings are const at runtime so can be accessed without any additional locks\r\n  * you only have to access the ArgsManager (and do string parsing) at setup time\r\n  * you don't have to make up lots of new names for everything or add too much boilerplate\r\n\r\nBranch built on top of this PR that has the above working at https://github.com/ajtowns/bitcoin/tree/202109-settings_struct",
      "state": "open",
      "user": "ryanofsky",
      "created_at": "2021-09-15T01:42:09Z",
      "updated_at": "2026-01-16T10:59:23Z",
      "closed_at": null,
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/issues/22978",
      "labels": [
        "Needs Conceptual Review",
        "interfaces"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 5680,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2432345503,
      "number": 30530,
      "title": "Nuke format linter",
      "body": "The linter is impossible to maintain, because it is not possible to parse C++ with a simple regex. When it produces nonsense, like https://github.com/bitcoin/bitcoin/runs/27958379841, it is mostly annoying, because the code is perfectly fine, but the red CI is a blocker for the pull request. Also, fixing it isn't trivially possible, so the only solution is to juggle with the code until the regex in the linter is pleased.\r\n\r\nIt would be better to write it as a clang-tidy plugin, however that isn't ideal either, because that will (normally) only run in CI and takes a long time.\r\n\r\nIdeally, it is implemented in `consteval` C++, directly in the source code. (Similar to Rust `std::fmt` or C++20 `std::format`, but they aren't available yet on supported compilers and would be a breaking change in all format strings anyway) \r\n\r\n\r\n\r\n<!-- https://github.com/bitcoin/bitcoin/pull/30386#discussion_r1684380835",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2024-07-26T14:18:05Z",
      "updated_at": "2026-01-16T10:55:08Z",
      "closed_at": "2025-01-15T15:47:13Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/30530",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 928,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 2789211485,
      "number": 31660,
      "title": "The 28.1 release is not tagged in github",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nIn GitHub releases, 28.0 is still marked as latest. We are holding from updating in Homebrew until this is resolved: https://github.com/Homebrew/homebrew-core/pull/204066\n\n### Expected behaviour\n\n28.1 should be marked as latest release, to confirm it is authentic.\n\n### Steps to reproduce\n\n1. Go to https://github.com/bitcoin/bitcoin\n2. Observe that latest release is 28.0\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\n28.1\n\n### Operating system and version\n\nmacOS 15\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "fxcoudert",
      "created_at": "2025-01-15T08:58:12Z",
      "updated_at": "2026-01-16T10:55:04Z",
      "closed_at": "2025-01-15T10:45:44Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/31660",
      "labels": [],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 762,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1237690862,
      "number": 25150,
      "title": "Coin Selection tracepoint overreports use of APS",
      "body": "> > I'm not sure about the original intention (maybe also the documentation is imprecise?), but if `aps_create_tx_internal` is called irrespective of the second `CreateTransactionInternal` result now, I don't see a point in having the `attempting_aps_create_tx` tracepoint anymore.\r\n> \r\n> It helps us know whether the selected_coins tracepoint (that will happen within CreateTransactionInternal) is for the APS CreateTransactionInternal without having to look backwards when `aps_create_tx_internal` is seen.\r\n\r\nIf I understand this correctly, the way this tracepoint is activated, it would log a result as having been produced per APS, whenever the APS result is preferred. Among other things, this would include if there are two equivalent (or even matching) solutions, or if there wasn't any partial-spend concern with the original solution in the first place.\r\nThis results in three different concerns:\r\n1. This feels like a potential footgun for someone trying to understand coin selection outcomes. They might want to know a) how often partial-spends even occurred in the first place, and b) how often the opportunistic APS protected them from it. From what I understand, they cannot actually learn either of these numbers. Instead, a subscriber of the tracepoint would get an inflated sense of how often they were protected from partial spends.\r\n2. Since the APS solution is preferred even when it has a slightly worse fee, when the general coin selection result and the opportunistic APS result differ, the APS result may actually have a worse waste score and get preferred for the transaction building, disimproving the outcome for the user _even when there was no partial-spend in the original solution_.\r\n3. The coin selection is run twice while that might be completely unnecessary in many cases.\r\n\r\nAll together, I think both the design for this tracepoint and the design for the opportunistic APS may have the same solution: only run the opportunistic APS if the original selection result _includes a partial  spend_: this would speed up coin selection, remove the potential for disimproving the selection result, and give useful numbers to the subscribers of the tracepoint.\r\n\r\nWhile I think this PR improves over the original deployment, if I got the above right, it might be better to remove this tracepoint due to not providing a clear signal instead.\r\n\r\n_Originally posted by @Xekyo in https://github.com/bitcoin/bitcoin/issues/25003#issuecomment-1122685021_",
      "state": "open",
      "user": "murchandamus",
      "created_at": "2022-05-16T20:37:48Z",
      "updated_at": "2026-01-16T10:29:48Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/25150",
      "labels": [
        "Wallet",
        "Scripts and tools"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 2526,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1637683536,
      "number": 27315,
      "title": "tidy: enable `cppcoreguidelines-pro-type-member-init`",
      "body": "https://clang.llvm.org/extra/clang-tidy/checks/cppcoreguidelines/pro-type-member-init.html\r\n> The check flags user-defined constructor definitions that do not initialize all fields that would be left in an undefined state by default construction, e.g. builtins, pointers and record types without user-provided default constructors containing at least one such type. If these fields aren’t initialized, the constructor will leave some of the memory in an undefined state.\r\n\r\nHave been multiple calls to add this, i.e https://github.com/bitcoin/bitcoin/pull/26762#issuecomment-1409699173.\r\n\r\nAlso related to #26296.",
      "state": "open",
      "user": "fanquake",
      "created_at": "2023-03-23T14:42:34Z",
      "updated_at": "2026-01-16T10:26:51Z",
      "closed_at": null,
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/27315",
      "labels": [
        "Feature",
        "Scripts and tools"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 667,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1681671983,
      "number": 27526,
      "title": "wallet coin selection: don't mixup coins with absolute timelocks of different types",
      "body": "We now support spending from coins containing `CHECKLOCKTIMEVERIFY` instructions. `CLTV` is a check on the value of the `nLockTime` field of the spending transaction. There are two types of timelocks possible: by timestamp and by block. Both are incompatible, the `nLockTime` field cannot satisfy both a timestamp and a block timelock.\r\n\r\nThe coin selection is at the moment completely unaware of timelocks. If we have two coins for two different descriptors, one with a timestamp absolute timelock and the other with a block count absolute timelock, the coin selection algorithm may select both of them in a single transaction.\r\n\r\nTo be clear i don't think this should be treated as a bug that needs resolving for 25.0. As mentioned in #24149 the wallet needs a lot more logic to correctly handle managing coins with more complex scripts. (For instance, the wallet doesn't know what timelocked coins would be spendable at the next block, let alone set the `nSequence`, `nLockTime` according to the required value.)\r\n\r\nFrom a conversation with @sanket1729. Also cc @ishaanam.",
      "state": "open",
      "user": "darosior",
      "created_at": "2023-04-24T16:48:24Z",
      "updated_at": "2026-01-16T10:08:33Z",
      "closed_at": null,
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/27526",
      "labels": [
        "Feature",
        "Wallet"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 0,
        "text_length": 1159,
        "has_nack": false,
        "has_ack": false
      }
    },
    {
      "id": 1647446127,
      "number": 27369,
      "title": "Fix net grouping of non-IP networks",
      "body": "### Current behaviour\r\n\r\n`NetGroupManager::GetGroup()` was designed with IP networks in mind, where for example `10.20.30.40` and `10.20.30.45` are \"close\" and likely to belong to the same entity, while `100.20.30.40` is \"distant\" from them. This does not apply however for Tor, I2P and CJDNS where the address is \"random\" bytes. Actually, Tor, I2P and CJDNS addresses that have common prefix are _harder_ to obtain than ones that don't have a common prefix (the opposite compared to IP).\r\n\r\nCurrently `NetGroupManager::GetGroup()` is doing prefixing on Tor, I2P and CJDNS addresses and assumes same properties apply as for IP addresses. This magically \"works\" to some extent but has drawbacks. Some serious changes are needed to remove that assumption from the code.\r\n\r\nSee\r\nhttps://github.com/bitcoin/bitcoin/pull/22563\r\nhttps://github.com/bitcoin/bitcoin/pull/27264#issuecomment-1481322628\r\n\r\n### Expected behaviour\r\n\r\n* Don't do prefixing on Tor, I2P and CJDNS and don't assume proximity based on that.\r\n* Treat all addresses from Tor as one group (because it is very easy to obtain huge amount of them). Same for I2P and CJDNS.\r\n* Make sure addrman can still store enough addresses from those networks.\r\n* Make sure a single source from Tor, I2P and CJDNS cannot flood addrman with junk due to the previous point.\r\n",
      "state": "open",
      "user": "vasild",
      "created_at": "2023-03-30T11:39:20Z",
      "updated_at": "2026-01-16T10:08:29Z",
      "closed_at": null,
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/27369",
      "labels": [
        "Net"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 1356,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 1750050240,
      "number": 27843,
      "title": "ThreadI2PAcceptIncoming temporarily bypasses 125 connection ceiling",
      "body": "- The i2p accept code is in `ThreadI2PAcceptIncoming`, instead of in `ThreadSocketHandler` like the non-i2p accept code.\r\n- When accepting non-i2p connections, a connection is accepted in `AcceptConnection` and if there are more than `maxInbound` outstanding connections, one is marked for disconnect. The next iteration of the loop in `ThreadSocketHandler` will call `DisconnectNodes` and remove it.\r\n-  Since the i2p code resides in its own thread, it's possible for i2p connections to stack up past 125 (I was able to hit 190 outstanding connections when running a local script to connect to my bitcoind i2p address). I think the higher numbered fd's could cause a slight slowdown in `select`.\r\n- How many connections it can go past 125 is a race between `DisconnectNodes` and `ThreadI2PAcceptIncoming`.\r\n\r\n<details>\r\n<summary>Local test</summary>\r\n<br>\r\n\r\n```\r\ndiff --git a/src/test/i2p_tests.cpp b/src/test/i2p_tests.cpp\r\nindex b2e1ae43b..f1f0b2a60 100644\r\n--- a/src/test/i2p_tests.cpp\r\n+++ b/src/test/i2p_tests.cpp\r\n@@ -10,14 +10,52 @@\r\n #include <test/util/net.h>\r\n #include <test/util/setup_common.h>\r\n #include <util/threadinterrupt.h>\r\n+#include <netbase.h>\r\n+#include <protocol.h>\r\n+\r\n+#include <chrono>\r\n+#include <thread>\r\n \r\n #include <boost/test/unit_test.hpp>\r\n \r\n #include <memory>\r\n #include <string>\r\n+#include <stdio.h>\r\n \r\n BOOST_FIXTURE_TEST_SUITE(i2p_tests, BasicTestingSetup)\r\n \r\n+BOOST_AUTO_TEST_CASE(spam)\r\n+{\r\n+    CThreadInterrupt interrupt;\r\n+\r\n+    in_addr ipv4Addr;\r\n+    ipv4Addr.s_addr = inet_addr(\"127.0.0.1\");\r\n+\r\n+    Proxy p = Proxy(CService(ipv4Addr, 7656), false);\r\n+\r\n+    auto i2p_transient_session = std::make_unique<i2p::sam::Session>(p.proxy, &interrupt);\r\n+\r\n+    const char* pszDest = \"tfshhokzifn2g46dc6dxwrwwxwbeo4l5eeepequ52kpvrflm3foq.b32.i2p\";\r\n+\r\n+    const std::vector<CService> resolved{Lookup(pszDest, 0, false, 256)};\r\n+\r\n+    CAddress addrConnect = CAddress(resolved[0], NODE_NONE);\r\n+\r\n+    std::vector<std::unique_ptr<Sock>> v;\r\n+    v.reserve(1000);\r\n+\r\n+    for (int i = 0; i < 1000; i++) {\r\n+        i2p::Connection conn;\r\n+        bool proxy_error;\r\n+        auto connected = i2p_transient_session->Connect(addrConnect, conn, proxy_error);\r\n+        if (connected) {\r\n+            v.push_back(std::move(conn.sock));\r\n+        }\r\n+    }\r\n+\r\n+    std::this_thread::sleep_for(std::chrono::milliseconds(50000));\r\n+}\r\n+\r\n BOOST_AUTO_TEST_CASE(unlimited_recv)\r\n {\r\n     const auto prev_log_level{LogInstance().LogLevel()};\r\n```\r\n\r\nI then called it from a script:\r\n```\r\n#!/bin/bash\r\n#\r\nfor i in {1..10}\r\ndo\r\n\t./src/test/test_bitcoin --log_level=all --run_test=i2p_tests/spam &\r\ndone\r\n```\r\n\r\n</details>\r\n\r\nWhen testing this, I also ran into a reproducible error when simultaneously using `bitcoin-cli`:\r\n```\r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:18443 (error code 1 - \"EOF reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n```\r\n\r\nWireshark showed that a TCP port was reused which led to a RST being sent back to bitcoin-cli. It happened when the i2p sam bridge ran out of memory, but as far as I can tell the rpc server should be totally unaffected by that. This error message also appeared in bitcoind's logs at the same time:\r\n `2023-06-09T15:02:58Z connect() to 127.0.0.1:7656 failed: Can't assign requested address (49)`",
      "state": "open",
      "user": "Crypt-iQ",
      "created_at": "2023-06-09T14:52:59Z",
      "updated_at": "2026-01-16T10:07:25Z",
      "closed_at": null,
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/issues/27843",
      "labels": [
        "Bug",
        "Net"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 0,
        "positive_keywords": 1,
        "text_length": 3445,
        "has_nack": false,
        "has_ack": true
      }
    },
    {
      "id": 2947965588,
      "number": 32142,
      "title": "Feature Request: testmempoolaccept with an argument to ignore nLocktime/nSequence time-locking",
      "body": "### Please describe the feature you'd like to see added.\n\nExecute `testmempoolaccept` in a way that will ignore the time/block-height validations of the transactions' `nSequence` and `nLocktime`.\n\n### Is your feature related to a problem, if so please describe it.\n\n`testmempoolaccept` is a very useful tool to verify transactions that aren't supposed to be broadcasted immediately - for example, for emergency recovery in case the seed is lost.\n`nLocktime` is also useful in such case, to prevent the recovery transaction from being broadcasted too early. However, after signing a transaction with a future `nLocktime`, I couldn't be sure that it is indeed valid: `testmempoolaccept` considers this transaction as `non-final` because of its future `nLocktime`, without explaining whether it has other problems (i.e. invalid signatures etc.).\n\n### Describe the solution you'd like\n\nA third optional parameter to `testmempoolaccept` (after `rawtxs` and `maxfeerate`) called `ignoretimelocks`, that will be a boolean.\n\n### Describe any alternatives you've considered\n\nI've tried writing code that would parse the transaction and, given the current mempool utxos, verify its scripts. This becomes complicated to implement in multisig and segwit transactions, and doesn't give me the guarantees that I want for such long-term transaction.\n\nAnother suggestion is that `testmempoolaccept` will accumulate all the reasons a transaction is unacceptable, and not exit after the first reason.\n\n### Please leave any additional context\n\n`nSequence` is a bitfield with multiple purposes, like RBF, and possibly other features in the future. My suggestion only regards BIP-68 validations of `nSequence` and not other features.",
      "state": "open",
      "user": "oren-z0",
      "created_at": "2025-03-25T23:07:46Z",
      "updated_at": "2026-01-16T03:59:18Z",
      "closed_at": null,
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32142",
      "labels": [
        "Feature",
        "RPC/REST/ZMQ",
        "Mempool"
      ],
      "comment_data": [],
      "drama_signals": {
        "drama_keywords": 1,
        "positive_keywords": 0,
        "text_length": 1807,
        "has_nack": false,
        "has_ack": false
      }
    }
  ],
  "summary": {
    "total_prs": 315,
    "total_issues": 60,
    "total_comments": 78,
    "unique_participants": 113
  }
}