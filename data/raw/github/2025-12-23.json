{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:42:24.627453+00:00",
  "date": "2025-12-23",
  "pull_requests": [
    {
      "number": 34143,
      "title": "build: Switch to \"versioned\" install layout for `boost` package and add missed `Boost::headers`",
      "body": "It is difficult for the build system to enforce adding the Boost headers include directory only for targets that actually need it. In CMake this is handled via the [`Boost::headers`](https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/cmake/module/AddBoostIfNeeded.cmake#L10-L17) target. However, the issue is not specific to CMake.\r\n\r\nThe underlying problem is that any dependency of a given build target brings its own include directories, which often coincide with include paths used by Boost. As a result, dependencies such as `libevent` or `sqlite` can mask the fact that a target is missing an explicit dependency on `Boost::headers`.\r\n\r\nWhile we cannot influence the installation layout of system packages, we _can_ control the layout of packages built by the depends build subsystem.\r\n\r\nThis PR therefore changes the layout of the `boost` package in depends from a \"system\" layout to a \"versioned\" one. The Boost include directory becomes more specific by incorporating the `boost-<version>` component in its path.\r\n\r\nApplying this change alone to the master branch exposes a latent [bug](https://github.com/hebasto/bitcoin/actions/runs/20471980938) in the build system. This bug is potentially dangerous because, when building with depends, Boost headers from the system include directory may be used instead of the headers provided by depends, as the compiler may implicitly search system include paths.\r\n\r\nThe exposed bug is addressed in the first commit of this PR.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-12-23T22:17:29Z",
      "updated_at": "2025-12-28T15:21:42Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/34143",
      "labels": [
        "Bug",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34143.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-23T22:17:35Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit d861c3820528fad2e17a45549bec70b6ba434dcc<br>(master) | commit fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e<br>(pull/34143/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`f9d3466be61a6744...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-aarch64-linux-gnu-debug.tar.gz) | [`aa205a142b3e0679...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`eeba55f49bb0cea8...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-aarch64-linux-gnu.tar.gz) | [`1f63f2ac82a3a9d6...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`377cb91a664d226d...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-arm-linux-gnueabihf-debug.tar.gz) | [`7382c420ee6d9afa...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`e9439c9e75940962...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-arm-linux-gnueabihf.tar.gz) | [`f1d7d1df4e0b27e1...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`e24ade4558599abc...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-arm64-apple-darwin-codesigning.tar.gz) | [`36db4b587b2a1f80...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`139e5c93b62e6bd9...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-arm64-apple-darwin-unsigned.tar.gz) | [`8a2c8c8c4ddecd97...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`7938b4588c399d57...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-arm64-apple-darwin-unsigned.zip) | [`7601a21a0eb3b5ea...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`c673cfd562f48b6b...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-powerpc64-linux-gnu-debug.tar.gz) | [`c5cf337561643c15...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`6089f3e1aeaff9f2...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-powerpc64-linux-gnu.tar.gz) | [`f0e69970d9148f61...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`81def88068aa605d...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-riscv64-linux-gnu-debug.tar.gz) | [`e0bcdda86d024735...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`ca77e2eeff5a7997...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-riscv64-linux-gnu.tar.gz) | [`1b276f8d8b508587...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`0c79942deef08bb4...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-x86_64-apple-darwin-codesigning.tar.gz) | [`4445c35eabc5a5c0...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`6f6a22f4292aa086...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-x86_64-apple-darwin-unsigned.tar.gz) | [`7e9725da2a01d31e...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`9bd50bc5b804299f...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-x86_64-apple-darwin-unsigned.zip) | [`cd302fca0fe6acf5...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`a6f0a158b31947a7...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-x86_64-linux-gnu-debug.tar.gz) | [`8832ff496bdef1c0...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`152bfb79e73d6c5c...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528-x86_64-linux-gnu.tar.gz) | [`c314349c64f3b42f...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`11c03cf932f54c54...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/bitcoin-d861c3820528.tar.gz) | [`42bd5bfa5f3c093d...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/bitcoin-fc47676ef267.tar.gz) |\n| SHA256SUMS.part | [`1d1e22a8c246fe3b...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/SHA256SUMS.part) | [`5d7796eab94e93f7...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/SHA256SUMS.part) |\n| guix_build.log | [`ec31c8f59d97cbaa...`](https://drahtbot.space/guix/monotree/d861c3820528fad2e17a45549bec70b6ba434dcc/guix_build.log) | [`97ab9e864bd8a123...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/guix_build.log) |\n| guix_build.log.diff |  | [`08e07a75cde5ff16...`](https://drahtbot.space/guix/monotree/fc47676ef267d8cb38ce370b7c8cfe846c0e4e0e/guix_build.log.diff) |\n\n",
          "created_at": "2025-12-26T14:33:31Z"
        },
        {
          "user": "janb84",
          "body": "my Guix Build Output \r\n\r\n**Host architecture:** `aarch64`\r\n**Commit:** `2a6901529c73`\r\n\r\n```shell\r\n5eb1bd5a15708f4270eebbbb8f9e7f7f431da2c8d69603826f47ac18e58b31fd  guix-build-2a6901529c73/output/aarch64-linux-gnu/SHA256SUMS.part\r\nb46120b21bacb54cb999a7ee34906203b74a82a7a797adfaf5160ffe39df179f  guix-build-2a6901529c73/output/aarch64-linux-gnu/bitcoin-2a6901529c73-aarch64-linux-gnu-debug.tar.gz\r\n8d0ab4938c9b3dab75d0a3c75b97aca6ed35644fcdd42eedd95b5b6152892285  guix-build-2a6901529c73/output/aarch64-linux-gnu/bitcoin-2a6901529c73-aarch64-linux-gnu.tar.gz\r\nd61e0f3bdb67fb09bd95f9457f2e4fa5949b88045a21ec5519291ee6bea77051  guix-build-2a6901529c73/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nb0b1ded64d6f62e4e42fd24e8429a616d372b3d1302a041f73737b2593588558  guix-build-2a6901529c73/output/arm-linux-gnueabihf/bitcoin-2a6901529c73-arm-linux-gnueabihf-debug.tar.gz\r\n004b14d5513ce82262cc9510401714a97af37522eff3481a0d70db581f06cd3c  guix-build-2a6901529c73/output/arm-linux-gnueabihf/bitcoin-2a6901529c73-arm-linux-gnueabihf.tar.gz\r\n9dad3b1374d23171fa400dc286551ee61ac188bec14d576a038ed6de1820fd1a  guix-build-2a6901529c73/output/arm64-apple-darwin/SHA256SUMS.part\r\ne101af1b0fd333d5e498da19278b00d844e44f14e46678804577124bd1d9eaef  guix-build-2a6901529c73/output/arm64-apple-darwin/bitcoin-2a6901529c73-arm64-apple-darwin-codesigning.tar.gz\r\nb21d7e342bf3e3dbf4a30b547d0eab4c5482e6c48cafc7e52ed6ce84f274f771  guix-build-2a6901529c73/output/arm64-apple-darwin/bitcoin-2a6901529c73-arm64-apple-darwin-unsigned.tar.gz\r\n57fe0760877802005946963d87c3a6b5849f3d03fd7ad412b2c55f345d0af163  guix-build-2a6901529c73/output/arm64-apple-darwin/bitcoin-2a6901529c73-arm64-apple-darwin-unsigned.zip\r\n7f074c95551f7bbf9f23a85f0ad46aebf9a6069f17e3c89230257ae96b107338  guix-build-2a6901529c73/output/dist-archive/bitcoin-2a6901529c73.tar.gz\r\n920dc7d726be94004b3003b7d0d1e7ac59ce1fe64275cc42712bb1fa63737e8d  guix-build-2a6901529c73/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nd3f6f76cc2df64b263612224efdbc5cda29960d939ed7fef56fdb2547618f23e  guix-build-2a6901529c73/output/powerpc64-linux-gnu/bitcoin-2a6901529c73-powerpc64-linux-gnu-debug.tar.gz\r\n0970e286347486e9fef88f15e2409911d09fbbf2cf1d52e8a06a4cc247923e48  guix-build-2a6901529c73/output/powerpc64-linux-gnu/bitcoin-2a6901529c73-powerpc64-linux-gnu.tar.gz\r\n1a9b469909c685d46aeea0668dff6f532570154e4f8abe7224d94c92ef28d1c5  guix-build-2a6901529c73/output/riscv64-linux-gnu/SHA256SUMS.part\r\nc5a49c68ae6346d1510b497c483e25b04c1aac22f4b9580a15efb80c5590a3cb  guix-build-2a6901529c73/output/riscv64-linux-gnu/bitcoin-2a6901529c73-riscv64-linux-gnu-debug.tar.gz\r\n2bd07c73dc5a13ee33d27db52d903a7f4a71fac45db7b636c37b02c6d3fb4b5f  guix-build-2a6901529c73/output/riscv64-linux-gnu/bitcoin-2a6901529c73-riscv64-linux-gnu.tar.gz\r\n55b3a2b6258cb645547eb01c3ef46fcd97d4cb27ca8dd84c9c9a91ea1314cf81  guix-build-2a6901529c73/output/x86_64-apple-darwin/SHA256SUMS.part\r\n8e52dc444786c392ac6010b6bb2c8d2536d8da4731a4ef87f211af548bf9dced  guix-build-2a6901529c73/output/x86_64-apple-darwin/bitcoin-2a6901529c73-x86_64-apple-darwin-codesigning.tar.gz\r\n373ceed73edcc41a343d2bce9b3f6d36634ca873b5d53959464f89435417f585  guix-build-2a6901529c73/output/x86_64-apple-darwin/bitcoin-2a6901529c73-x86_64-apple-darwin-unsigned.tar.gz\r\n80e3980143fd4d5d8728e660ff01d029c1a8aab69f9718decd0b2149e287d88d  guix-build-2a6901529c73/output/x86_64-apple-darwin/bitcoin-2a6901529c73-x86_64-apple-darwin-unsigned.zip\r\n392c4d7911daf946bbf913ee27975bfda37693a992ca61794018e39c2fbad68f  guix-build-2a6901529c73/output/x86_64-linux-gnu/SHA256SUMS.part\r\n6bc8ce0727114c65006e98392795d255ed74e2f7a2ebf9ea7518c369fe577fe3  guix-build-2a6901529c73/output/x86_64-linux-gnu/bitcoin-2a6901529c73-x86_64-linux-gnu-debug.tar.gz\r\n95207f982880b179ec329efd8f0c8cee89868874953d7c8125c2fde44c1edf0f  guix-build-2a6901529c73/output/x86_64-linux-gnu/bitcoin-2a6901529c73-x86_64-linux-gnu.tar.gz\r\ne269e1eae037b5c76f168945566c44d0695398f287ca6b131f789591ec88462c  guix-build-2a6901529c73/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n65961e3ab4f98f24db751802a58e1bb1640d956f3b0ae5ee081cef4a8fe897f4  guix-build-2a6901529c73/output/x86_64-w64-mingw32/bitcoin-2a6901529c73-win64-codesigning.tar.gz\r\n928be5ef461640e856bb9ded3e40a2e8ef131beb8423aa930f43cec34a50a973  guix-build-2a6901529c73/output/x86_64-w64-mingw32/bitcoin-2a6901529c73-win64-debug.zip\r\n5521ed52afad02466930117496741114e7c62792bac25fc707869711c4a115c8  guix-build-2a6901529c73/output/x86_64-w64-mingw32/bitcoin-2a6901529c73-win64-setup-unsigned.exe\r\nadc5553e1a162662ef668093dba297874a075ddb04992c9f15b58e4fe2131e43  guix-build-2a6901529c73/output/x86_64-w64-mingw32/bitcoin-2a6901529c73-win64-unsigned.zip\r\n```",
          "created_at": "2025-12-28T15:21:42Z"
        }
      ]
    },
    {
      "number": 34142,
      "title": "policy: Check Taproot control block size correctly in `IsWitnessStandard`",
      "body": "I'd like to improve the Taproot [control size check](https://github.com/bitcoin/bitcoin/blob/d861c3820528fad2e17a45549bec70b6ba434dcc/src/policy/policy.cpp#L321) in `IsWitnessStandard`. Rather than just checking emptiness, we should perform all three checks implemented in `VerifyTaprootControlBlockSize` (see below). This way we can invalidate the transaction earlier when it's clear that the control size is incompatible with consensus rules (saving compute).\r\n\r\nOld checks:\r\n-  `control.size() > 0`\r\n\r\nNew checks:\r\n- `control.size() >= TAPROOT_CONTROL_BASE_SIZE`\r\n- `control.size() <= TAPROOT_CONTROL_MAX_SIZE`\r\n- `(control.size() - TAPROOT_CONTROL_BASE_SIZE) % TAPROOT_CONTROL_NODE_SIZE == 0`\r\n\r\nFor example, a single byte control block wouldn't be empty, but it would be invalid because it's shorter than `TAPROOT_CONTROL_BASE_SIZE` (33). `IsWitnessStandard` should return false in that case.\r\n\r\nThis PR also adds a helper function for the control block size check to reduce repetition and to improve readability of the (rather heavy) functions that call it. We have four instances of the same check.\r\n\r\nI ran:\r\n`cmake -B build -DENABLE_WALLET=OFF && cmake --build build -j 8 && ctest --test-dir build -j 8`\r\n\r\nLooking forward to your feedback.",
      "state": "open",
      "user": "billymcbip",
      "created_at": "2025-12-23T12:43:01Z",
      "updated_at": "2026-01-14T12:53:59Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34142",
      "labels": [
        "TX fees and policy"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34142.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34142#issuecomment-3711622886) |\n| Concept NACK | [darosior](https://github.com/bitcoin/bitcoin/pull/34142#pullrequestreview-3657735728) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-23T12:43:08Z"
        },
        {
          "user": "sedited",
          "body": "Can you expand in the desccription what this actually improves and why this change should be done?",
          "created_at": "2025-12-23T13:21:27Z"
        },
        {
          "user": "billymcbip",
          "body": "@sedited done (the new checks are those in `VerifyTaprootControlBlockSize`).",
          "created_at": "2025-12-23T13:59:23Z"
        },
        {
          "user": "billymcbip",
          "body": "To be clear, this does not change which transactions are policy-valid. It just adds the control size check to `IsWitnessStandard` because it's a light-weight check we can run with the context available at that point.",
          "created_at": "2025-12-23T14:05:54Z"
        },
        {
          "user": "bensig",
          "body": "ACK c567abf33821263e68b66dcccca0bca057a0ab09\r\n\r\nTested on macOS - build and script_tests pass.\r\n\r\nClean refactor - consolidates 4 instances of the same control block size check into `VerifyTaprootControlBlockSize()` - so the improved policy check in `IsWitnessStandard` does now correctly rejects invalid control blocks early, not just empty ones. Good test coverage added.",
          "created_at": "2026-01-05T18:30:42Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 2,
    "issues": 0
  }
}