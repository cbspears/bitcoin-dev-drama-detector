{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:03:54.237416+00:00",
  "date": "2025-08-04",
  "pull_requests": [
    {
      "number": 33134,
      "title": "refactor, index: Remove member variables in coinstatsindex",
      "body": "This picks up a review comment from #30469 which [suggested to remove the member variables in coinstatsindex](https://github.com/bitcoin/bitcoin/pull/30469#discussion_r2219983800) and replace them with local variables where needed.\r\n\r\nThis is a pure refactor and performance should not be impacted because there is no increase in disk reads or writes.",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-08-04T16:21:18Z",
      "updated_at": "2025-08-15T23:31:26Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33134",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33134.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/33134#pullrequestreview-3085116698) |\n| Concept ACK | [mzumsande](https://github.com/bitcoin/bitcoin/pull/33134#pullrequestreview-3085407112), [l0rinc](https://github.com/bitcoin/bitcoin/pull/33134#pullrequestreview-3085337044), [Sammie05](https://github.com/bitcoin/bitcoin/pull/33134#issuecomment-3153027156) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30469](https://github.com/bitcoin/bitcoin/pull/30469) (index: Fix coinstats overflow by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-08-04T16:21:23Z"
        },
        {
          "user": "Sammie05",
          "body": "Concept ACK, I agree with the goal of removing unnecessary class members to simplify the code.\r\n\r\nBut consider splitting the commit as suggested by @l0rinc to isolate the risky accounting changes.\r\n\r\nReusing DBVal as a container simplifies the logic. Good improvement.\r\n\r\nPlease update the docstring of the method (still says ‚Äúinitialize internal state‚Äù), which might no longer be accurate.\r\n\r\n",
          "created_at": "2025-08-05T02:08:51Z"
        },
        {
          "user": "fjahr",
          "body": "I addressed @l0rinc 's feedback but pulled the changes here into #30469 as requested by reviewers there, so closing here.",
          "created_at": "2025-08-15T23:31:25Z"
        }
      ]
    },
    {
      "number": 33133,
      "title": "rpc: fix getpeerinfo ping duration unit docs",
      "body": "The docs have been incorrect since a3789c700b5a43efd4b366b4241ae840d63f2349 (released in v25; master since Sept. 2022). Noticed while setting up monitoring using getpeerinfo.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/0cb1ed2b7c634754f4ad0a0083d7cf40989d7f48/src/rpc/net.cpp#L249-L257",
      "state": "closed",
      "user": "0xB10C",
      "created_at": "2025-08-04T14:26:28Z",
      "updated_at": "2025-08-06T12:10:37Z",
      "comments": 11,
      "url": "https://github.com/bitcoin/bitcoin/pull/33133",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33133.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/33133#pullrequestreview-3085715524), [theStack](https://github.com/bitcoin/bitcoin/pull/33133#pullrequestreview-3085748775), [luke-jr](https://github.com/bitcoin/bitcoin/pull/33133#issuecomment-3153083380), [maflcko](https://github.com/bitcoin/bitcoin/pull/33133#issuecomment-3153746243), [janb84](https://github.com/bitcoin/bitcoin/pull/33133#pullrequestreview-3086979853) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-08-04T14:26:33Z"
        },
        {
          "user": "0xB10C",
          "body": "It's correctly documented in the `ping` RPC docs https://github.com/bitcoin/bitcoin/blob/0cb1ed2b7c634754f4ad0a0083d7cf40989d7f48/src/rpc/net.cpp#L85-L88",
          "created_at": "2025-08-04T14:30:34Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 12df1a72831bf950c5d625b80c6fd6ef15b4117d",
          "created_at": "2025-08-04T14:35:50Z"
        },
        {
          "user": "jonatack",
          "body": "> It's correctly documented in the `ping` RPC docs\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/0cb1ed2b7c634754f4ad0a0083d7cf40989d7f48/src/rpc/net.cpp#L85-L88\r\n\r\nWould it make sense to add \"minping\" here? e.g. `getpeerinfo (pingtime, minping, and pingwait fields)` ",
          "created_at": "2025-08-04T15:20:26Z"
        },
        {
          "user": "0xB10C",
          "body": "> Would it make sense to add \"minping\" here? e.g. `getpeerinfo (pingtime, minping, and pingwait fields)`\r\n\r\nIMO it makes more sense to remove pingtime and min_ping from the ping docs. Just having `Requests that a ping be sent to all other nodes, to measure ping time. Results provided in getpeerinfo.` should be enough and ensures that it doesn't become outdated somewhere down the line?",
          "created_at": "2025-08-04T19:27:48Z"
        },
        {
          "user": "jonatack",
          "body": "> IMO it makes more sense to remove pingtime and min_ping from the ping docs\r\n\r\nIndeed, that is better. Fewer ducks to keep in a row.",
          "created_at": "2025-08-04T19:54:26Z"
        },
        {
          "user": "0xB10C",
          "body": "- removed the `(s)` unit from the docs: https://github.com/bitcoin/bitcoin/pull/33133#discussion_r2251809033\r\n- removed the `getpeerinfo` field documentation from the `ping` RPC: https://github.com/bitcoin/bitcoin/pull/33133#issuecomment-3152076777\r\n- added a bit more details to the commit message: https://github.com/bitcoin/bitcoin/pull/33133#pullrequestreview-3085116958",
          "created_at": "2025-08-04T20:33:13Z"
        },
        {
          "user": "luke-jr",
          "body": "utACK 1252eeb997df2eb12c33d92eb1a5c9d6643a67ff",
          "created_at": "2025-08-05T02:45:53Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 1252eeb997df2eb12c33d92eb1a5c9d6643a67ff",
          "created_at": "2025-08-05T06:57:42Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to `29.x` in #33074.",
          "created_at": "2025-08-05T08:46:37Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to `28.x` in #33143.",
          "created_at": "2025-08-06T12:10:37Z"
        }
      ]
    },
    {
      "number": 33132,
      "title": "fuzz: txgraph: fix `real_is_optimal` flag propagation in `CommitStaging`",
      "body": "In the `txgraph` fuzz test, the `CommitStaging` step updates the `SimTxGraph` levels simply by erasing the front (=main) one in the `sims` vector, i.e. the staging level instance takes the place of the main level instance:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/83a2216f5278c1123ba740f1c8a055652e033ddd/src/test/fuzz/txgraph.cpp#L668-L672\r\n\r\nThis also includes the `real_is_optimal` flag (reflecting whether the corresponding real graph is known to be optimally linearized), without taking into account that this flag should only be set if _both_ levels before the commiting are optimal.\r\n\r\nE.g. in case of #33097, at this point the main level is not optimally linearized, while the staging level is, and due to the incorrect propagation of the latter the simulation incorrectly assumes that the main level is optimal after, leading to the assertion fail in the additional checks that are ran in this case[1]. Fix this by setting the flag in the resulting main level explicitly. This is done in a generic way, in case there will ever be more than two levels (not sure what is planned in this direction), a simpler alternative would be e.g. `main_optimal = sim[0].real_is_optimal && sim[1].real_is_optimal`.\r\n\r\nFixes #33097.\r\n\r\n[1] see https://github.com/theStack/bitcoin/commit/0aedf09ccc0ad4fff5956bdc012778534612c017 for the printf-debug-session-clutter, if that is useful/interesting for anyone (most of the output turned out to be irrelevant to the actual cause of #33097, but it was an entertaining way to discover the interface and get a first glimpse of `TxGraph` internals as a cluster-mempool newbie).",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-08-04T00:45:49Z",
      "updated_at": "2025-10-30T13:57:46Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33132",
      "labels": [
        "Tests",
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33132.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/33132#pullrequestreview-3084265420), [sipa](https://github.com/bitcoin/bitcoin/pull/33132#issuecomment-3150855612) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-08-04T13:37:39Z"
        },
        {
          "user": "sipa",
          "body": "ACK 444dcb2f9944ad5208bf00c9f197da7b2c98063c",
          "created_at": "2025-08-04T14:03:51Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 3,
    "issues": 0
  }
}