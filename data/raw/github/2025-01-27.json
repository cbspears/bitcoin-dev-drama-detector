{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:13:27.779338+00:00",
  "date": "2025-01-27",
  "pull_requests": [
    {
      "number": 31742,
      "title": "contrib: fix BUILDDIR in gen-bitcoin-conf script and gen-manpages.py",
      "body": "The `gen-bitcoin-conf.sh` and `gen-manpages.py` scripts assume a top level `src/` build dir, but in-tree builds are no longer allowed, nor recommended in the build steps. If a user builds `bitcoind` as recommended, these scripts fail. To fix it, we update the `BUILDDIR` env var and update the README accordingly. \r\nFollows up on initial work and discussion in #31332 . ",
      "state": "closed",
      "user": "jurraca",
      "created_at": "2025-01-27T20:37:39Z",
      "updated_at": "2025-02-20T20:21:23Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/31742",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31742.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/31742#issuecomment-2672229030), [achow101](https://github.com/bitcoin/bitcoin/pull/31742#issuecomment-2672527071) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31161](https://github.com/bitcoin/bitcoin/pull/31161) (cmake: Set top-level target output locations by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-01-27T20:37:43Z"
        },
        {
          "user": "fjahr",
          "body": "Concept ACK\r\n\r\nI agree that referencing in-tree builds doesn't make sense if we disallowed them with cmake.",
          "created_at": "2025-01-27T20:46:34Z"
        },
        {
          "user": "fanquake",
          "body": "Added to 29.0 as at least the in-tree build mentions should be removed.",
          "created_at": "2025-02-20T17:31:10Z"
        },
        {
          "user": "fjahr",
          "body": "Code review ACK 63a8791e15c3ffb44b84ab3e85db62d7997d25fd",
          "created_at": "2025-02-20T17:43:44Z"
        },
        {
          "user": "achow101",
          "body": "ACK 63a8791e15c3ffb44b84ab3e85db62d7997d25fd",
          "created_at": "2025-02-20T19:49:56Z"
        }
      ]
    },
    {
      "number": 31741,
      "title": "multiprocess: Add libmultiprocess git subtree",
      "body": "This adds the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library and code generator as a subtree in `src/ipc/libmultiprocess` and allows it to be built with the cmake `-DENABLE_IPC` option, which is disabled by default.\r\n\r\nThis PR does not entirely remove the depends system [libmultiprocess package](https://github.com/bitcoin/bitcoin/blob/master/depends/packages/native_libmultiprocess.mk) because the package is useful when cross compiling. (A cross-compiling cmake build cannot easily build and run a native code generation tool.) However, it does update the depends package to build from the new git subtree, instead of being downloaded separately from github, so the same sources are used to build both the runtime library and the code generator.\r\n\r\nThis PR includes the following manual changes (not created automatically with `git subtree add`) which just update the build system and documentation:\r\n\r\n- [`d6244f85c509` depends: Update libmultiprocess library to simplify cmake subtree build](https://github.com/bitcoin/bitcoin/pull/31741/commits/d6244f85c509d7644a57def892298a4dde988c3b)\r\n- [`69f0d4adb72c` scripted-diff: s/WITH_MULTIPROCESS/ENABLE_IPC/ in cmake](https://github.com/bitcoin/bitcoin/pull/31741/commits/69f0d4adb72c1dc5c261517899d87b0fe8b88304)\r\n- [`d597ab1dee6b` cmake: Support building with libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/d597ab1dee6b3541c827e6be61fc8a9b61d1e23d)\r\n- [`8532fcb1c30d` cmake: Fix ctest mptest \"Unable to find executable\" errors](https://github.com/bitcoin/bitcoin/pull/31741/commits/8532fcb1c30d6556c273bd77a2a7daa6b0a2448d)\r\n- [`abdf3cb6456f` cmake: Fix warnings from boost headers](https://github.com/bitcoin/bitcoin/pull/31741/commits/abdf3cb6456f3f79b3130d2001bf780deadccf87)\r\n- [`d4bc5639829f` cmake: Fix clang-tidy \"no input files\" errors](https://github.com/bitcoin/bitcoin/pull/31741/commits/d4bc5639829f0c98bd2faeddba9be4e8c6667875)\r\n- [`e88ab394c163` doc: Update documentation to explain libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/e88ab394c163a8ebe59ee240b09430d788ef274e)\r\n- [`2d373e27071f` lint: Add exclusions for libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/2d373e27071f54e04f8aaf6753e5481ccbc9ed3f)\r\n- [`9b35518d2f3f` depends, moveonly: split up int_get_build_id function](https://github.com/bitcoin/bitcoin/pull/31741/commits/9b35518d2f3ff67cbc87d30bd3b882fe72fd5d87)\r\n- [`5d105fb8c3ff` depends: Switch libmultiprocess packages to use local git subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/5d105fb8c3ffa39c3e716c3147ee74795b129113)\r\n- [`babb9f5db641` depends: remove non-native libmultiprocess build](https://github.com/bitcoin/bitcoin/pull/31741/commits/babb9f5db64145a4adec07dee1c8328195363777)\r\n\r\n---\r\n\r\nPrevious minisketch subtree PR #23114 may be useful for comparison\r\n\r\nInstructions for subtree verification can be found:\r\n\r\n- https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees\r\n- https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh\r\n \r\nTL&DR: \r\n\r\n```sh\r\ngit remote add --fetch libmultiprocess https://github.com/chaincodelabs/libmultiprocess.git\r\ntest/lint/git-subtree-check.sh -r src/ipc/libmultiprocess\r\n```\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-01-27T16:48:43Z",
      "updated_at": "2025-04-14T20:37:37Z",
      "comments": 82,
      "url": "https://github.com/bitcoin/bitcoin/pull/31741",
      "labels": [
        "interfaces"
      ]
    },
    {
      "number": 31740,
      "title": "depends: Update libmultiprocess library before converting to subtree",
      "body": "This should be the final update to the libmultiprocess package via the depends system. It brings in the libmultiprocess cmake changes from https://github.com/chaincodelabs/libmultiprocess/pull/136 needed to support building as subtree. After this, followup PR #31741 will add libmultiprocess as a git subtree and depends will just use the git subtree instead of hardcoding its own version hash.\r\n\r\nSince there have been libmultiprocess API changes since the last update, this commit also updates bitcoin code to be compatible with them.\r\n\r\nThis update has the following new changes since previous update #31105:\r\n\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/121 ProxyClientBase: avoid static_cast to partially constructed object\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/120 proxy-types.h: add static_assert to detect int/enum size mismatch\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/127 ProxyClientBase: avoid static_cast to partially destructed object\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/129 Fix \"disconnected: write(m_post_fd, &buffer, 1): Broken pipe\" EventLoop shutdown races.\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/130 refactor: Add CleanupRun function to dedup clean list code\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/131 doc: fix startAsyncThread comment\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/133 Fix debian \"libatomic not found\" error in downstream builds\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/94 c++ 20 cleanups\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/135 refactor: proxy-types.h API cleanup\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/136 cmake: Support being included with add_subdirectory\r\nhttps://github.com/chaincodelabs/libmultiprocess/pull/137 doc: Fix broken markdown links\r\n",
      "state": "closed",
      "user": "ryanofsky",
      "created_at": "2025-01-27T16:46:29Z",
      "updated_at": "2025-01-29T12:10:36Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31740",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31740.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/31740#issuecomment-2618284762), [vasild](https://github.com/bitcoin/bitcoin/pull/31740#pullrequestreview-2577898644), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31740#pullrequestreview-2580718512) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31564](https://github.com/bitcoin/bitcoin/pull/31564) (Add checkblock RPC and checkBlock() to Mining interface by Sjors)\n* [#29409](https://github.com/bitcoin/bitcoin/pull/29409) (multiprocess: Add capnp wrapper for Chain interface by ryanofsky)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-01-27T16:46:33Z"
        },
        {
          "user": "ryanofsky",
          "body": "Updated 9983eb6f6bc731099c8222a9390f48a38465f478 -> 4e0aa1835b3e980ceda29ec90e7115d7fef53f51 ([`pr/bumptree.1`](https://github.com/ryanofsky/bitcoin/commits/pr/bumptree.1) -> [`pr/bumptree.2`](https://github.com/ryanofsky/bitcoin/commits/pr/bumptree.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/bumptree.1..pr/bumptree.2)) to include https://github.com/chaincodelabs/libmultiprocess/pull/137 and make the linter happy in #31741",
          "created_at": "2025-01-27T18:48:26Z"
        },
        {
          "user": "Sjors",
          "body": "ACK 4e0aa1835b3e980ceda29ec90e7115d7fef53f51\r\n\r\nI tested most of the changes with #30975 and reviewed some of them.\r\n\r\nhttps://github.com/ryanofsky/libmultiprocess/compare/abe254b9734f2e2b220d1456de195532d6e6ac1e...07c917f7ca910d66abc6d3873162fc9061704074",
          "created_at": "2025-01-28T08:39:30Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 3,
    "issues": 0
  }
}