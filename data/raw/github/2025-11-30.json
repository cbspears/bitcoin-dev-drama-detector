{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:35:50.524324+00:00",
  "date": "2025-11-30",
  "pull_requests": [
    {
      "number": 33975,
      "title": "depends, doc: Add `tcl` as build dependency for `sqlite` package",
      "body": "Since https://github.com/bitcoin/bitcoin/pull/32655, the `sqlite` package has relied on a native C compiler being incidentally available on the system under the default names. However, this is not always the case. For example, on Ubuntu 24.04:\r\n```\r\n$ gmake -C depends sqlite CC=gcc-14 CXX=g++-14\r\ngmake: Entering directory '/bitcoin/depends'\r\nConfiguring sqlite...\r\nNo installed jimsh or tclsh, building local bootstrap jimsh0\r\nNo working C compiler found. Tried cc and gcc.\r\ngmake: *** [funcs.mk:344: /bitcoin/depends/x86_64-pc-linux-gnu/.sqlite_stamp_configured] Error 1\r\ngmake: Leaving directory '/bitcoin/depends'\r\n```\r\n\r\nAdding the `tcl` package as an explicit build dependency, as is [done](https://github.com/fanquake/bitcoin/blob/f6acbef1084e34f126bf530df99e4ef6a11c38e8/contrib/guix/manifest.scm#L552) in the Guix script, avoids this behaviour and improves robustness.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T22:26:38Z",
      "updated_at": "2025-12-05T17:29:52Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/33975",
      "labels": [
        "Docs",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33975.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33975#issuecomment-3595081065), [janb84](https://github.com/bitcoin/bitcoin/pull/33975#pullrequestreview-3526330943) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33902](https://github.com/bitcoin/bitcoin/pull/33902) (doc: Document compiler configuration for native depends packages by willcl-ark)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-30T22:26:45Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 632cf872a584e4a373a669aca5b885f63a2b7add",
          "created_at": "2025-12-01T07:48:32Z"
        },
        {
          "user": "janb84",
          "body": "This doesn't work for me on ubuntu 24.04, if I only install what is specified and then execute: \r\n```sh\r\ngmake -C depends sqlite CC=gcc-14 CXX=g++-14\r\n```\r\nit will fail to find  C compiler (with the error state above), I needed to install g++:\r\n```sh\r\napt install g++ \r\n```\r\n\r\nBut it will install g++13 so I needed to run :\r\n```sh\r\ngmake -C depends sqlite CC=gcc-13 CXX=g++-13\r\n```",
          "created_at": "2025-12-01T16:00:35Z"
        },
        {
          "user": "hebasto",
          "body": "@janb84 \r\n\r\n> This doesn't work for me on ubuntu 24.04, if I only install what is specified and then execute:\r\n> \r\n> ```shell\r\n> gmake -C depends sqlite CC=gcc-14 CXX=g++-14\r\n> ```\r\n\r\nThe example above assumes that the [`gcc-14`](https://packages.ubuntu.com/noble/gcc-14) and [`g++-14`](https://packages.ubuntu.com/noble/g++-14) packages are installed.",
          "created_at": "2025-12-01T17:45:26Z"
        },
        {
          "user": "janb84",
          "body": "> @janb84\r\n> \r\n> > This doesn't work for me on ubuntu 24.04, if I only install what is specified and then execute:\r\n> > ```shell\r\n> > gmake -C depends sqlite CC=gcc-14 CXX=g++-14\r\n> > ```\r\n> \r\n> The example above assumes that the [`gcc-14`](https://packages.ubuntu.com/noble/gcc-14) and [`g++-14`](https://packages.ubuntu.com/noble/g++-14) packages are installed.\r\n\r\nAh Sorry, my mistake, took your example to literally.  ",
          "created_at": "2025-12-01T17:57:38Z"
        },
        {
          "user": "fanquake",
          "body": "Can we just pass the compiler through?",
          "created_at": "2025-12-02T10:18:39Z"
        },
        {
          "user": "hebasto",
          "body": "> Can we just pass the compiler through?\r\n\r\nSee https://github.com/bitcoin/bitcoin/pull/33995.",
          "created_at": "2025-12-02T14:50:41Z"
        },
        {
          "user": "hebasto",
          "body": "> > Can we just pass the compiler through?\r\n> \r\n> See #33995.\r\n\r\nClosing in favour of https://github.com/bitcoin/bitcoin/pull/33995.",
          "created_at": "2025-12-03T15:25:06Z"
        }
      ]
    },
    {
      "number": 33974,
      "title": "cmake: Check dependencies after build option interaction",
      "body": "At present, `CMakeLists.txt` interleaves configuration-option handling with dependency discovery. As a result, unnecessary checks may be performed. For example:\r\n```\r\n$ cmake -B build --preset dev-mode -DBUILD_FOR_FUZZING=ON\r\n<snip>\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"2.3.0\")\r\n-- Found ZeroMQ: /usr/lib64 (found suitable version \"4.3.5\", minimum required is \"4.0.0\")\r\n-- Performing Test HAVE_USDT_H\r\n-- Performing Test HAVE_USDT_H - Success\r\n-- Found USDT: /usr/include\r\n-- Found QRencode: /usr/lib64/libqrencode.so (found version \"4.1.1\")\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\r\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\r\n-- Found Threads: TRUE\r\n-- Performing Test HAVE_STDATOMIC\r\n-- Performing Test HAVE_STDATOMIC - Success\r\n-- Found WrapAtomic: TRUE\r\n-- Found OpenGL: /usr/lib64/libOpenGL.so\r\n-- Found WrapOpenGL: TRUE\r\n-- Found WrapVulkanHeaders: /usr/include\r\n-- Found Qt: /usr/lib64/cmake/Qt6 (found suitable version \"6.10.1\", minimum required is \"6.2\")\r\nCMake Warning at CMakeLists.txt:206 (message):\r\n  BUILD_FOR_FUZZING=ON will disable all other targets and force\r\n  BUILD_FUZZ_BINARY=ON.\r\n\r\n<snip>\r\n```\r\n\r\nThis PR restructures the code to ensure that all dependencies are checked only after the final build option interaction.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-11-30T15:50:06Z",
      "updated_at": "2025-12-24T05:45:44Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33974",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33974.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/33974#pullrequestreview-3601730395) |\n| Stale ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/33974#pullrequestreview-3543500447) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33861](https://github.com/bitcoin/bitcoin/pull/33861) (build: Bump VS minimum supported version to 18.0 by hebasto)\n* [#31723](https://github.com/bitcoin/bitcoin/pull/31723) (qa: Facilitate debugging bitcoind inside functional tests by hodlinator)\n* [#31507](https://github.com/bitcoin/bitcoin/pull/31507) (build: Use clang-cl to build on Windows natively by hebasto)\n* [#31425](https://github.com/bitcoin/bitcoin/pull/31425) (RFC: Riscv bare metal CI job by sedited)\n* [#28792](https://github.com/bitcoin/bitcoin/pull/28792) (build: Embedded ASMap [3/3]: Build binary dump header file by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-30T15:51:00Z"
        },
        {
          "user": "hebasto",
          "body": "@sedited @fanquake \r\n\r\nThank you for the review! Your feedback has been addressed.",
          "created_at": "2025-12-05T12:14:28Z"
        }
      ]
    },
    {
      "number": 33972,
      "title": "cmake: Make `BUILD_KERNEL_TEST` depend on `BUILD_KERNEL_LIB`",
      "body": "The CMake script in the `test/kernel` subdirectory is already gated by `BUILD_KERNEL_LIB`:https://github.com/bitcoin/bitcoin/blob/f6acbef1084e34f126bf530df99e4ef6a11c38e8/src/CMakeLists.txt#L405-L409\r\n\r\nAs a result, the following configuration summary is misleading:\r\n```\r\n$ cmake -B build -DBUILD_KERNEL_LIB=OFF -DBUILD_KERNEL_TEST=ON\r\n<snip>\r\n  bitcoin-chainstate (experimental) ... OFF\r\n  libbitcoinkernel (experimental) ..... OFF\r\n  kernel-test (experimental) .......... ON\r\n<snip>\r\n```\r\n\r\nThis PR fixes the behaviour by making the `BUILD_KERNEL_TEST` option explicitly depend on `BUILD_KERNEL_LIB`.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T13:45:57Z",
      "updated_at": "2025-12-01T10:41:09Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/33972",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33972.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33972#issuecomment-3595208102), [sedited](https://github.com/bitcoin/bitcoin/pull/33972#pullrequestreview-3523828047) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-30T13:46:05Z"
        },
        {
          "user": "hebasto",
          "body": "cc @sedited ",
          "created_at": "2025-11-30T13:47:17Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK fe1815d48f0cee57d2f1af50b377c7f9e462369e",
          "created_at": "2025-12-01T08:18:05Z"
        }
      ]
    },
    {
      "number": 33971,
      "title": "cmake: Set `WITH_ZMQ` to `ON` in Windows presets",
      "body": "The \"zeromq\" feature is already enabled by default in `vcpkg.json`, and there appears to be no reason to omit this configuration option when building on Windows.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-30T13:13:02Z",
      "updated_at": "2025-12-01T10:02:35Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33971",
      "labels": [
        "Windows",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33971.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33971#issuecomment-3595102351) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-30T13:13:10Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 49c672853503e561cd1e7fed19a32f21ad345370",
          "created_at": "2025-12-01T07:54:52Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 4,
    "issues": 0
  }
}