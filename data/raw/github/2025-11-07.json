{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:29:30.437567+00:00",
  "date": "2025-11-07",
  "pull_requests": [
    {
      "number": 33822,
      "title": "kernel: Add block header support and validation",
      "body": "Adds a new `btck_BlockHeader` type and associated functions to create, access, and validate block headers. Block headers will have their own type (`btck_BlockHeader`) that can be created from raw data, copied, and queried for all the standard header fields (hash, prev hash, timestamp, bits, version, nonce). We can also extract headers from full blocks or block tree entries.\r\n\r\nThe first commit here refactors `BlockValidationState` to use Handle/View pattern so external code can own them, which is required for the header processing in the API.\r\n\r\n #### New Block Header API\r\n\r\n  - **`btck_BlockHeader` type**: Opaque handle for block headers\r\n  - **Header methods**:\r\n    - `btck_block_header_create()`: Create header from 80-byte serialized data\r\n    - `btck_block_header_copy()`: Copy block headers\r\n    - `btck_block_header_destroy()`: Destroy header object\r\n    - `btck_block_header_get_hash()`: Calculate block hash\r\n    - `btck_block_header_get_prev_hash()`: Get previous block hash\r\n    - `btck_block_header_get_timestamp()`: Get block timestamp\r\n    - `btck_block_header_get_bits()`: Get difficulty target (compact format)\r\n    - `btck_block_header_get_version()`: Get block version\r\n    - `btck_block_header_get_nonce()`: Get proof-of-work nonce\r\n    \r\n    - `btck_block_get_header()`: Extract header from a full block\r\n    - `btck_block_tree_entry_get_block_header()`: Get header associated with a block tree entry\r\n  \r\n  - **Header Processing Methods:**\r\n    - **`btck_chainstate_manager_process_block_header()`**: Validates and processes a block header without requiring the full block. This performs proof-of-work verification, timestamp validation, and updates the internal chain state.\r\n    - **`btck_chainstate_manager_get_best_entry()`**: Returns the block tree entry with the most cumulative proof-of-work.\r\n\r\nWhy `btck_chainstate_manager_get_best_entry()` is included alongside header validation? Just as we have logic to get the tip for block validation (so you can request more blocks extending your best from your peers), we need the equivalent for header validation. To make header validation worthwhile, knowing what the best current header is seems usefulâ€”it tells you what headers to request next from peers.\r\n\r\n\r\n\r\n  ### Testing\r\n\r\n  Added tests in `test_kernel.cpp` that cover creating headers from raw data, extracting all header fields, and processing headers through the chainstate manager.\r\n  \r\n  CC @TheCharlatan ",
      "state": "open",
      "user": "yuvicc",
      "created_at": "2025-11-07T17:16:01Z",
      "updated_at": "2026-01-04T16:49:25Z",
      "comments": 16,
      "url": "https://github.com/bitcoin/bitcoin/pull/33822",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33822.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/33822#pullrequestreview-3624251084), [stringintech](https://github.com/bitcoin/bitcoin/pull/33822#pullrequestreview-3624255377) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/33822#pullrequestreview-3448629035) |\n| Stale ACK | [alexanderwiederin](https://github.com/bitcoin/bitcoin/pull/33822#issuecomment-3616771992) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33856](https://github.com/bitcoin/bitcoin/pull/33856) (kernel, validation: Refactor ProcessNewBlockHeaders to return BlockValidationState by yuvicc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T17:16:09Z"
        },
        {
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/19175802541/job/54820162776?pr=33822#step:5:179:\r\n```bash\r\n<snip>\r\nsrc/kernel/bitcoinkernel.h:1726: * \r\nsrc/kernel/bitcoinkernel_wrapper.h:759:    \r\nsrc/kernel/bitcoinkernel_wrapper.h:762:    \r\n^^^\r\nTrailing whitespace (including Windows line endings [CR LF]) is problematic\r\n```",
          "created_at": "2025-11-07T17:27:05Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19175802541/job/54820162776</sub>\n<sub>LLM reason (âœ¨ experimental): Trailing whitespace detected by lint, causing the CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-11-07T17:27:58Z"
        },
        {
          "user": "yuvicc",
          "body": "Fixed some lint errors.",
          "created_at": "2025-11-08T05:20:02Z"
        },
        {
          "user": "Aa777263100",
          "body": "Ù†Ø¹Ù… Ø§Ø±ÙŠØ¯ Ø³Ø­Ø¨\r\n\r\nhsan saed abd alwhap\r\n\r\nÙÙŠ Ø§Ù„Ø£Ø­Ø¯ØŒ 9 Ù†ÙˆÙÙ…Ø¨Ø± 2025 7:43 Ù… yancy ***@***.***> ÙƒØªØ¨:\r\n\r\n> ***@***.**** commented on this pull request.\r\n> ------------------------------\r\n>\r\n> In src/kernel/bitcoinkernel.cpp\r\n> <https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508162294>:\r\n>\r\n> > @@ -1225,6 +1258,16 @@ int btck_chainstate_manager_process_block(\r\n>      return result ? 0 : -1;\r\n>  }\r\n>\r\n> +int btck_chainstate_manager_process_block_header(\r\n> +    btck_ChainstateManager* chainstate_manager,\r\n> +    const btck_BlockHeader* header,\r\n> +    btck_BlockValidationState* state)\r\n> +{\r\n> +    auto& chainman = btck_ChainstateManager::get(chainstate_manager).m_chainman;\r\n> +    auto result = chainman->ProcessNewBlockHeaders({&btck_BlockHeader::get(header), 1}, true, btck_BlockValidationState::get(state), nullptr);\r\n>\r\n> Isn't this something the fuzz harness can help answer?\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508162294>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BVZIU6M4XOH3WNDVIC2JYLD335VLNAVCNFSM6AAAAACLO3ZMFSVHI2DSMVQWIX3LMV43YUDVNRWFEZLROVSXG5CSMV3GSZLXHMZTINBQGEZDOOBQGY>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
          "created_at": "2025-11-09T16:52:31Z"
        },
        {
          "user": "yuvicc",
          "body": "Thank you @TheCharlatan and @stickies-v  for the review.\r\n\r\n- Adressed [@TheCharlatan comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2507927303) to keep the variable name as state\r\n- Adressed [@TheCharlatan comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508027260) and [@stickies-v comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2514692129) on adding empty header check and entire block header interface tests.\r\n- Addressed [@TheCharlatan comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2508070029) on adding `BITCOINKERNEL_WARN_UNUSED_RESULT` for `*_copy()` and `*_create()` method.\r\n- Split the commit into two (first for `BlockValidation` interface and second for chainman logic) as per [@stickies-v comment](https://github.com/bitcoin/bitcoin/pull/33822#pullrequestreview-3448629035).\r\n- Addressed [@stickies-v comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2514666155) on removing the comment for not owned block header.",
          "created_at": "2025-11-12T06:38:04Z"
        },
        {
          "user": "yuvicc",
          "body": "Thanks for the review @TheCharlatan \r\n- Removed some unnecessary comments and indentation\r\n- Added inline doc [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2528773169)",
          "created_at": "2025-11-16T06:00:30Z"
        },
        {
          "user": "yuvicc",
          "body": "Thanks for the review @stringintech.\r\n- Fixed some indentations and removed some extra comments to maintain consistency.\r\n- Simplified `BlockValidationState` create method by @stringintech [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2532058549)",
          "created_at": "2025-11-17T06:11:07Z"
        },
        {
          "user": "yuvicc",
          "body": "Thanks for the review @stickies-v \r\n- Address usage of `LogError` instead of `LogDebug` [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2534865290)\r\n- Addressed some nits and removed docstrings.",
          "created_at": "2025-11-18T13:15:42Z"
        },
        {
          "user": "yuvicc",
          "body": "Updated commit message an PR description to better reflect the changes and intention as suggested by @TheCharlatan @stickies-v.",
          "created_at": "2025-11-18T14:36:15Z"
        },
        {
          "user": "yuvicc",
          "body": "Rebased to fix the CI error. For reference check https://github.com/bitcoin/bitcoin/issues/33884.",
          "created_at": "2025-11-22T12:34:10Z"
        },
        {
          "user": "yuvicc",
          "body": "- Addressed some clang-format nits\r\n- Updated the comments to use struct name instead of raw names as suggested by @stickies-v.",
          "created_at": "2025-11-27T18:00:49Z"
        },
        {
          "user": "alexanderwiederin",
          "body": "ACK https://github.com/bitcoin/bitcoin/pull/33822/commits/30367c1b3e7e94ed59d0a3ee816da14a3ee0424f",
          "created_at": "2025-12-05T12:39:20Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/20568596692/job/59071182413</sub>\n<sub>LLM reason (âœ¨ experimental): Lint failure: tabs used for whitespace (tabs_whitespace) in src/kernel/bitcoinkernel.cpp, causing CI to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-29T09:09:07Z"
        },
        {
          "user": "yuvicc",
          "body": "Thanks for the review @stringintech \r\n- Addressed nits related to opaque struct naming\r\n- Addressed [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2623138029) on allowing null args and adding a check as well as test case for it\r\n- Removed const-ness from BlockChecked methods for `BlockValidationStateView` [comment](https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2623306248)\r\n- Rebased",
          "created_at": "2025-12-29T09:14:10Z"
        },
        {
          "user": "yuvicc",
          "body": "Fixed nit https://github.com/bitcoin/bitcoin/pull/33822#discussion_r2658403710.",
          "created_at": "2026-01-03T05:57:32Z"
        }
      ]
    },
    {
      "number": 33821,
      "title": "guix: build glibc with `--enable-static-pie`",
      "body": "From the glibc `2.27` release notes:\r\n\r\n> Major new features:\r\n> The GNU C Library can now be compiled with support for building static\r\n> PIE executables (See --enable-static-pie in INSTALL).\r\n> These static PIE executables are like static executables but can be\r\n> loaded at any address and provide additional security hardening benefits\r\n> at the cost of some memory and performance.  When the library is built with\r\n> --enable-static-pic the resulting libc.a is usable with GCC 8 and above to\r\n> create static PIE executables using the GCC option '-static-pie'. This\r\n> feature is currently supported on i386, x86_64 and x32 with binutils\r\n> 2.29 or later, and on aarch64 with binutils 2.30 or later.\r\n\r\nNote that from glibc 2.35 onwards, this option is replaced with a `--disable-*` variant, as glibc started defaulting to this behaviour.\r\n\r\nThis not give us `-static-pie` release binaries, that requires further changes, see #25573. This change makes it easier to experiment with the current release glibc, by being able to just use `-static-pie`, and not rebuild the toolchain.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-11-07T17:04:00Z",
      "updated_at": "2025-11-10T10:32:16Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/33821",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33821.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T17:04:10Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 513a0da2e0c89d4833aeeb9f799cf43548d6441f<br>(master) | commit a038e65fcb2baaa76a72aac18f637b03de310499<br>(pull/33821/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`e2fb3b26b5a91ad3...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-aarch64-linux-gnu-debug.tar.gz) | [`e53294b170117b6d...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`ba231c3d1479c0f7...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-aarch64-linux-gnu.tar.gz) | [`f0ddef27dc1eb7ea...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`8301fb7dc22dfe4b...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-arm-linux-gnueabihf-debug.tar.gz) | [`e4b52d8589b9a406...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`716e440e612808d4...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-arm-linux-gnueabihf.tar.gz) | [`9aa6a76169b770ad...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`805f3c6c49285fb1...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-arm64-apple-darwin-codesigning.tar.gz) |  |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`5b763ad7e05f1c95...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-arm64-apple-darwin-unsigned.tar.gz) |  |\n| *-arm64-apple-darwin-unsigned.zip | [`361a0d14440d910a...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-arm64-apple-darwin-unsigned.zip) |  |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`65a747b0abd595e3...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-powerpc64-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64-linux-gnu.tar.gz | [`7c017332d7fc6281...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-powerpc64-linux-gnu.tar.gz) |  |\n| *-riscv64-linux-gnu-debug.tar.gz | [`ee61e9a036f794d6...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-riscv64-linux-gnu-debug.tar.gz) |  |\n| *-riscv64-linux-gnu.tar.gz | [`ec5afa2e038b93fe...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-riscv64-linux-gnu.tar.gz) |  |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`002ee153a2c3615c...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-x86_64-apple-darwin-codesigning.tar.gz) |  |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`c561cae09122aa20...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-x86_64-apple-darwin-unsigned.tar.gz) |  |\n| *-x86_64-apple-darwin-unsigned.zip | [`1479a35ba6d9011d...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-x86_64-apple-darwin-unsigned.zip) |  |\n| *-x86_64-linux-gnu-debug.tar.gz | [`7aab8b410c431dfa...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-x86_64-linux-gnu-debug.tar.gz) | [`810f6bc40a6f8776...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`741e788de5ace4e1...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8-x86_64-linux-gnu.tar.gz) | [`ea61f00e75504231...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`9917b4537102f543...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/bitcoin-513a0da2e0c8.tar.gz) | [`dd7f07a2de409d2e...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/bitcoin-a038e65fcb2b.tar.gz) |\n| SHA256SUMS.part | [`1e0433200fbba6ff...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/SHA256SUMS.part) | [`01c63eee69bda4dc...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/SHA256SUMS.part) |\n| guix_build.log | [`804401f78232c89d...`](https://drahtbot.space/guix/monotree/513a0da2e0c89d4833aeeb9f799cf43548d6441f/guix_build.log) | [`16046571c9e7396c...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/guix_build.log) |\n| guix_build.log.diff |  | [`d9d006fdce4f3e14...`](https://drahtbot.space/guix/monotree/a038e65fcb2baaa76a72aac18f637b03de310499/guix_build.log.diff) |\n\n",
          "created_at": "2025-11-09T04:20:33Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like the error was:\r\n\r\n```\r\n...\r\nThe following derivations will be built:\r\n  /gnu/store/mv6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv\r\n  /gnu/store/q96z7xnxs4py883rasgyy6hxkcp11cdi-gcc-cross-riscv64-linux-gnu-13.3.0.drv\r\n  /gnu/store/ia37k6ramx87qg6vi2gffap5ikkzjhaj-riscv64-linux-gnu-toolchain-13.3.0.drv\r\n\r\nbuilding /gnu/store/mv6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv...\r\nnote: keeping build directory `/guix_temp_dir/guix-build-glibc-cross-riscv64-linux-gnu-2.31.drv-0'\r\nbuilder for `/gnu/store/mv6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv' failed with exit code 1\r\nbuild of /gnu/store/mv6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv failed\r\nView build log at '/var/log/guix/drvs/mv/6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv.gz'.\r\nguix shell: error: build of `/gnu/store/mv6c9hq3xpl208kwdj1akzy3md11fn8d-glibc-cross-riscv64-linux-gnu-2.31.drv' failed",
          "created_at": "2025-11-10T08:17:18Z"
        },
        {
          "user": "fanquake",
          "body": "Given more patching needed, wont bother with this.",
          "created_at": "2025-11-10T10:32:11Z"
        }
      ]
    },
    {
      "number": 33820,
      "title": "kernel: trim Chain interface",
      "body": "Removes `btck_chain_get_genesis` and `btck_chain_get_tip`. \r\n\r\nThey are trivially replaced with `btck_chain_get_by_height` (as indicated in the updated `bitcoinkernel_wrapper.h`), so I think it makes sense to trim the interface. \r\n\r\nFor `btck_chain_get_tip`: on `master` we don't provide any guarantees that the returned block index still corresponds to the actual tip, so the extra call doesn't seem like a regression to me.",
      "state": "closed",
      "user": "stickies-v",
      "created_at": "2025-11-07T16:50:57Z",
      "updated_at": "2025-11-11T11:40:41Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33820",
      "labels": [
        "Validation"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33820.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/33820#pullrequestreview-3438917702) |\n| Stale ACK | [yuvicc](https://github.com/bitcoin/bitcoin/pull/33820#pullrequestreview-3438421965) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T16:51:15Z"
        },
        {
          "user": "stickies-v",
          "body": "Force-pushed to remove the `bitcoinkernel_wrapper.h` `Tip()` and `Genesis()` methods too, as suggested [here](https://github.com/bitcoin/bitcoin/pull/33820#discussion_r2507308573).",
          "created_at": "2025-11-10T12:51:32Z"
        }
      ]
    },
    {
      "number": 33819,
      "title": "mining: getCoinbase() returns struct instead of raw tx",
      "body": "The first commit renames `getCoinbaseTx()` to `getCoinbaseRawTx()` to reflect that it returns a serialised transaction. This does not impact IPC clients, because they do not use the function name.\r\n\r\nThe second commit then introduces a replacement `getCoinbase()` that provides a struct with everything clients need to construct a coinbase. This avoids clients having to parse and manipulate our dummy transaction.\r\n\r\nDeprecate but don't remove `getCoinbaseRawTx()`, `getCoinbaseCommitment()` and `getWitnessCommitmentIndex()`.\r\n\r\nAfter this change we can drop these deprecated methods, which in turn would allow us to clear the dummy transaction from the `getBlock()` result. But that is left for a followup to keep this PR focussed. See https://github.com/Sjors/bitcoin/pull/106 for an approach.\r\n\r\nExpand the `interface_ipc.py` functional test to document its usage.\r\n\r\nCan be tested using:\r\n- https://github.com/stratum-mining/sv2-tp/pull/59",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-11-07T14:30:41Z",
      "updated_at": "2026-01-13T15:19:19Z",
      "comments": 37,
      "url": "https://github.com/bitcoin/bitcoin/pull/33819",
      "labels": [
        "Mining"
      ]
    },
    {
      "number": 33818,
      "title": "ci: Extend tidy job to cover kernel code",
      "body": "",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-11-07T12:44:46Z",
      "updated_at": "2025-11-07T15:31:57Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33818",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33818.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/33818#issuecomment-3503088429) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T14:09:02Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 5d0a40d607d4d2902cc0372c2c9c6569dfe2d20c",
          "created_at": "2025-11-07T15:07:43Z"
        }
      ]
    },
    {
      "number": 33817,
      "title": "validation: reduce persisted UTXO set size by prioritizing positive lookups (RFC)",
      "body": "*draft to gather comments and conceptual reviews*\r\n\r\n-----\r\n\r\n### Context\r\n\r\nBIP30 prevents duplicate transaction IDs by checking whether outputs already exist in the UTXO set before adding them.\r\nLevelDB's `FilterPolicy` stores a per-table probabilistic filter to optimize for negative lookups.\r\n\r\nAfter the first ~230k blocks (BIP30/BIP34 windows), validation does not deliberately probe the UTXO set for missing entries (missing coins imply invalid transactions).\r\nBloom filters therefore slow the common case (present-key lookups) while bloating the on-disk tables.\r\n\r\n### History\r\n\r\nBloom filters were introduced in the Ultraprune PR (#1677) without explicit documentation of their purpose.\r\n\r\n### Fix\r\n\r\nFor blocks prior to the `assumevalid` anchor, we already skip script verification, relying on accumulated proof of work. Skipping BIP30 for those deeply buried blocks is consistent with assumevalid's purpose (especially after the recent [checkpoint](https://github.com/bitcoin/bitcoin/pull/31649) removal).\r\n\r\nRemoving the `LevelDB` bloom filters slightly speeds up present-key workloads (~11% faster `AssumeUTXO` load) and reduces the on-disk chainstate size by ~2% because filter blocks are not stored.\r\n\r\n### Disclaimer\r\n\r\nNodes syncing from genesis with `-assumevalid=0` still perform full BIP30 validation, which may be a few seconds slower.\r\nChecks beyond 1,983,701 remain enforced regardless of `fScriptChecks`.\r\n\r\n### Performance\r\n\r\nPerformance change is best demonstrated by an `AssumeUTXO` loading - since this change was mostly motivated by UTXO set size and memory reduction.\r\n\r\n`AssumeUTXO` loads with default dbcache show ~11% faster bootstrapping.\r\n\r\n<details>\r\n<summary>11%, 8% and 1% faster assumeutxo load | 880000 blocks | dbcache 450/4500/45000 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD</summary>\r\n\r\n```\r\nCOMMITS=\"745eb053a41c487cc10f20644c65dc8455cf8974 5cb93dad7c06db82642169d8f7d07442d215f49c\"; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/ShallowBitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; UTXO_SNAPSHOT_PATH=\"$BASE_DIR/utxo-880000.dat\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done; echo \"\") && \\\r\nfor DBCACHE in 450 4500 45000; do \\\r\n  (echo \"assumeutxo load | 880000 blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') |\r\n$(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\";) &&\\\r\n  hyperfine \\\r\n  --sort command \\\r\n  --runs 5 \\\r\n  --export-json \"$BASE_DIR/assumeutxo-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$DBCACHE-$CC-$(date +%s).json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -rf $DATA_DIR/blocks $DATA_DIR/chainstate $DATA_DIR/chainstate_snapshot $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n             cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind bitcoin-cli -j2 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=1 -printtoconsole=0; sleep 20 && \\\r\n             ./build/bin/bitcoind -datadir=$DATA_DIR -daemon -blocksonly -connect=0 -dbcache=$DBCACHE -printtoconsole=0; sleep 20\" \\\r\n   --conclude \"build/bin/bitcoin-cli -datadir=$DATA_DIR stop || true; killall bitcoind || true; sleep 10; \\\r\n               echo '{COMMIT} | dbcache=$DBCACHE | chainstate: $(find $DATA_DIR/chainstate_snapshot -type f 2>/dev/null | wc -l) files, $(du -sb $DATA_DIR/chainstate_snapshot 2>/dev/null | cut -f1) bytes' >> $DATA_DIR/debug.log; \\\r\n               cp $DATA_DIR/debug.log $LOG_DIR/debug-assumeutxo-{COMMIT}-dbcache-$DBCACHE-$(date +%s).log\" \\\r\n    \"COMPILER=$CC DBCACHE=$DBCACHE ./build/bin/bitcoin-cli -datadir=$DATA_DIR -rpcclienttimeout=0 loadtxoutset $UTXO_SNAPSHOT_PATH\"; \\\r\ndone\r\n\r\n745eb053a4 Merge bitcoin-core/gui#901: Add createwallet, createwalletdescriptor, and migratewallet to history filter\r\n5cb93dad7c leveldb: remove bloom filters from leveldb\r\n\r\nBenchmark 1: COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean Â± Ïƒ):     696.452 s Â± 57.904 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   655.482 s â€¦ 797.623 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean Â± Ïƒ):     628.999 s Â± 37.939 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   596.216 s â€¦ 673.440 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.11 Â±  0.11  COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=450 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\nassumeutxo load | 880000 blocks | dbcache 4500 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD\r\nBenchmark 1: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean Â± Ïƒ):     674.430 s Â± 37.704 s    [User: 0.001 s, System: 0.001 s]\r\n  Range (min â€¦ max):   642.483 s â€¦ 734.178 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean Â± Ïƒ):     622.827 s Â± 16.068 s    [User: 0.001 s, System: 0.002 s]\r\n  Range (min â€¦ max):   610.489 s â€¦ 650.770 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.08 Â±  0.07  COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=4500 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\nassumeutxo load | 880000 blocks | dbcache 45000 | i7-hdd | x86_64 | Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz | 8 cores | 62Gi RAM | ext4 | HDD\r\nBenchmark 1: COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n  Time (mean Â± Ïƒ):     484.569 s Â± 16.260 s    [User: 0.001 s, System: 0.002 s]\r\n  Range (min â€¦ max):   469.979 s â€¦ 507.771 s    5 runs\r\n\r\nBenchmark 2: COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n  Time (mean Â± Ïƒ):     482.040 s Â± 12.817 s    [User: 0.002 s, System: 0.001 s]\r\n  Range (min â€¦ max):   465.205 s â€¦ 500.719 s    5 runs\r\n\r\nRelative speed comparison\r\n        1.01 Â±  0.04  COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 745eb053a41c487cc10f20644c65dc8455cf8974)\r\n        1.00          COMPILER=gcc DBCACHE=45000 ./build/bin/bitcoin-cli -datadir=/mnt/my_storage/ShallowBitcoinData -rpcclienttimeout=0 loadtxoutset /mnt/my_storage/utxo-880000.dat (COMMIT = 5cb93dad7c06db82642169d8f7d07442d215f49c)\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"1477\" height=\"802\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e1c7720b-59f3-4dda-80fd-f7eeb1066f41\" />\r\n(note: image will be moved to a comment later)\r\n\r\nFor reference, here is how the change affects `reindex-chainstate` per 100k block chunk:\r\n<img width=\"4500\" height=\"3000\" alt=\"block_chunk_comparison\" src=\"https://github.com/user-attachments/assets/b51b9224-ad4f-4f5d-899d-df3d32c75d69\" />\r\n(note: image will be moved to a comment later)\r\n\r\n### Persisted Size\r\n\r\nUTXO set size depends on LevelDB compaction scheduling. To stability stabilize measurements, we have instrumented the code to compact after every block connect to see the exact effect of the bloom filters on number of LevelDB files and their total sizes.  This is for on-disk size measurement only, not for performance.\r\n\r\n<details>\r\n<summary>compact after each block connection for stable size</summary>\r\n\r\n> log index directory stats for every update tip\r\n```patch\r\nFrom 3e5414c6ef6f4cefbb0ad49d3c164823850e42b2 Mon Sep 17 00:00:00 2001\r\nFrom: =?UTF-8?q?L=C5=91rinc?= <pap.lorinc@gmail.com>\r\nDate: Wed, 29 Oct 2025 08:53:07 +0100\r\nSubject: [PATCH] log index directory stats for every update tip\r\n\r\n---\r\n src/validation.cpp | 33 +++++++++++++++++++++++++++++++--\r\n 1 file changed, 31 insertions(+), 2 deletions(-)\r\n\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex af523b06d74e4..cc68023b1e7dc 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -68,11 +68,13 @@\r\n #include <cassert>\r\n #include <chrono>\r\n #include <deque>\r\n+#include <filesystem>\r\n #include <numeric>\r\n #include <optional>\r\n #include <ranges>\r\n #include <span>\r\n #include <string>\r\n+#include <thread>\r\n #include <tuple>\r\n #include <utility>\r\n\r\n@@ -2942,6 +2944,27 @@ void Chainstate::PruneAndFlush()\r\n     }\r\n }\r\n\r\n+static std::pair<size_t, size_t> GetDirectoryStats(const fs::path& dir_path)\r\n+{\r\n+    assert(fs::exists(dir_path) && fs::is_directory(dir_path));\r\n+    for (int attempts{0}; attempts < 100; ++attempts) {\r\n+        try {\r\n+            size_t file_count{0}, total_bytes{0};\r\n+            for (const auto& entry : fs::recursive_directory_iterator(dir_path)) {\r\n+                if (entry.is_regular_file()) {\r\n+                    ++file_count;\r\n+                    total_bytes += entry.file_size();\r\n+                }\r\n+            }\r\n+            return {file_count, total_bytes};\r\n+        } catch (const fs::filesystem_error&) {\r\n+            // can fail during compaction\r\n+            std::this_thread::sleep_for(std::chrono::seconds(5));\r\n+        }\r\n+    }\r\n+    std::terminate();\r\n+}\r\n+\r\n static void UpdateTipLog(\r\n     const ChainstateManager& chainman,\r\n     const CCoinsViewCache& coins_tip,\r\n@@ -2953,8 +2976,12 @@ static void UpdateTipLog(\r\n\r\n     AssertLockHeld(::cs_main);\r\n\r\n-    // Disable rate limiting in LogPrintLevel_ so this source location may log during IBD.\r\n-    LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false, \"%s%s: new best=%s height=%d version=0x%08x log2_work=%f tx=%lu date='%s' progress=%f cache=%.1fMiB(%utxo)%s\\n\",\r\n+    const fs::path datadir{\"/mnt/my_storage/BitcoinData\"}; // TODO shouldn't be hard-coded\r\n+    auto [chainstate_files, chainstate_bytes] = GetDirectoryStats(datadir / \"chainstate\");\r\n+    auto [index_files, index_bytes] = GetDirectoryStats(datadir / \"blocks\" / \"index\");\r\n+\r\n+    LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false,\r\n+                   \"%s%s: new best=%s height=%d version=0x%08x log2_work=%f tx=%lu date='%s' progress=%f cache=%.1fMiB(%utxo) chainstate=%zu files/%zu bytes index=%zu files/%zu bytes%s\\n\",\r\n                    prefix, func_name,\r\n                    tip->GetBlockHash().ToString(), tip->nHeight, tip->nVersion,\r\n                    log(tip->nChainWork.getdouble()) / log(2.0), tip->m_chain_tx_count,\r\n@@ -2962,6 +2989,8 @@ static void UpdateTipLog(\r\n                    chainman.GuessVerificationProgress(tip),\r\n                    coins_tip.DynamicMemoryUsage() * (1.0 / (1 << 20)),\r\n                    coins_tip.GetCacheSize(),\r\n+                   chainstate_files, chainstate_bytes,\r\n+                   index_files, index_bytes,\r\n                    !warning_messages.empty() ? strprintf(\" warning='%s'\", warning_messages) : \"\");\r\n }\r\n\r\n ```\r\n\r\n```patch\r\nFrom 76d866de450e30bd60edddd221a64266fb6488da Mon Sep 17 00:00:00 2001\r\nFrom: =?UTF-8?q?L=C5=91rinc?= <pap.lorinc@gmail.com>\r\nDate: Tue, 4 Nov 2025 18:07:59 +0100\r\nSubject: [PATCH] compact after each block connection\r\n\r\n---\r\n src/dbwrapper.cpp  | 7 ++++++-\r\n src/dbwrapper.h    | 2 ++\r\n src/txdb.h         | 1 +\r\n src/validation.cpp | 2 ++\r\n 4 files changed, 11 insertions(+), 1 deletion(-)\r\n\r\ndiff --git a/src/dbwrapper.cpp b/src/dbwrapper.cpp\r\nindex fe5f9cb0893d7..8e2be54f35fd3 100644\r\n--- a/src/dbwrapper.cpp\r\n+++ b/src/dbwrapper.cpp\r\n@@ -245,7 +245,7 @@ CDBWrapper::CDBWrapper(const DBParams& params)\r\n\r\n     if (params.options.force_compact) {\r\n         LogInfo(\"Starting database compaction of %s\", fs::PathToString(params.path));\r\n-        DBContext().pdb->CompactRange(nullptr, nullptr);\r\n+        CompactFull();\r\n         LogInfo(\"Finished database compaction of %s\", fs::PathToString(params.path));\r\n     }\r\n\r\n@@ -348,6 +348,11 @@ bool CDBWrapper::IsEmpty()\r\n     return !(it->Valid());\r\n }\r\n\r\n+void CDBWrapper::CompactFull()\r\n+{\r\n+    DBContext().pdb->CompactRange(nullptr, nullptr);\r\n+}\r\n+\r\n struct CDBIterator::IteratorImpl {\r\n     const std::unique_ptr<leveldb::Iterator> iter;\r\n\r\ndiff --git a/src/dbwrapper.h b/src/dbwrapper.h\r\nindex b9b98bd96ade3..8aba4feb08e6c 100644\r\n--- a/src/dbwrapper.h\r\n+++ b/src/dbwrapper.h\r\n@@ -284,6 +284,8 @@ class CDBWrapper\r\n         ssKey2 << key_end;\r\n         return EstimateSizeImpl(ssKey1, ssKey2);\r\n     }\r\n+\r\n+    void CompactFull();\r\n };\r\n\r\n #endif // BITCOIN_DBWRAPPER_H\r\ndiff --git a/src/txdb.h b/src/txdb.h\r\nindex ea0cf9d77e596..394993fa5264a 100644\r\n--- a/src/txdb.h\r\n+++ b/src/txdb.h\r\n@@ -56,6 +56,7 @@ class CCoinsViewDB final : public CCoinsView\r\n\r\n     //! @returns filesystem path to on-disk storage or std::nullopt if in memory.\r\n     std::optional<fs::path> StoragePath() { return m_db->StoragePath(); }\r\n+    void CompactFull() const { m_db->CompactFull(); }\r\n };\r\n\r\n #endif // BITCOIN_TXDB_H\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex cc68023b1e7dc..b6e796d539357 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -3027,6 +3027,8 @@ void Chainstate::UpdateTip(const CBlockIndex* pindexNew)\r\n             }\r\n         }\r\n     }\r\n+    m_blockman.m_block_tree_db->CompactFull();\r\n+    this->CoinsDB().CompactFull();\r\n     UpdateTipLog(m_chainman, coins_tip, pindexNew, __func__, \"\",\r\n                  util::Join(warning_messages, Untranslated(\", \")).original);\r\n }\r\n```\r\n\r\n</details>\r\n\r\nRunning a before/after `reindex-chainstate` and plotting the on-disk size of the chainstate index for every block shows that the PR reduces the UTXO index by roughly 222MB (2%).\r\n\r\n<details>\r\n<summary>instrumented benchmark patch</summary>\r\n\r\n```\r\nCOMMITS=\"76d866de450e30bd60edddd221a64266fb6488da fd69291daff5cee0763023203a24d52cd7aab183\"; \\\r\nSTOP=921129; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n(echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 1 \\\r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n  --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n76d866de45 compact after each block connection\r\nfd69291daf leveldb: remove bloom filters from leveldb\r\n\r\nreindex-chainstate | 921129 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 76d866de450e30bd60edddd221a64266fb6488da)\r\n  Time (abs â‰¡):        56611.911 s               [User: 45475.199 s, System: 5006.131 s]\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = fd69291daff5cee0763023203a24d52cd7aab183)\r\n  Time (abs â‰¡):        53522.995 s               [User: 41015.776 s, System: 4894.659 s]\r\n\r\nRelative speed comparison\r\n        1.06          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 76d866de450e30bd60edddd221a64266fb6488da)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=921129 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = fd69291daff5cee0763023203a24d52cd7aab183)\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"4500\" height=\"3600\" alt=\"chainstate_growth\" src=\"https://github.com/user-attachments/assets/e3196d2c-0155-463a-a7e5-db42b6fe0844\" />\r\n(note: image will be moved to a comment later)\r\n\r\n### Full validation\r\n\r\nTo help with reproducibility, the first commit introduces a slight regression to demonstrate the need for the second commit.\r\n\r\nWith BIP30 checks still active and without LevelDB bloom filters, the first 230k blocks validate ~7% slower.\r\n<details>\r\n<summary>7% slower reindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"2b9c3511986bb2f55310dd5fe7b6367fcc63e44e 166d35713cf61986bb4b37283cb8b001ad013771\"; STOP=230000; DBCACHE=450; CC=gcc; CXX=g++; BASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; (echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && (echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2 | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $BASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&hyperfine   --sort command   --runs 2   --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\"   --parameter-list COMMIT ${COMMITS// /,}   --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\"   --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/debug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\"   \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n2b9c351198 Merge bitcoin/bitcoin#33768: refactor: remove dead branches in `SingletonClusterImpl`\r\n166d35713c leveldb: remove bloom filters from leveldb\r\n\r\nreindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n  Time (mean Â± Ïƒ):     170.615 s Â±  0.468 s    [User: 186.278 s, System: 10.035 s]\r\n  Range (min â€¦ max):   170.285 s â€¦ 170.946 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 166d35713cf61986bb4b37283cb8b001ad013771)\r\n  Time (mean Â± Ïƒ):     181.904 s Â±  0.534 s    [User: 196.567 s, System: 10.482 s]\r\n  Range (min â€¦ max):   181.526 s â€¦ 182.281 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n        1.07 Â±  0.00  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 166d35713cf61986bb4b37283cb8b001ad013771)\r\n```\r\n\r\n</details>\r\n\r\nWith BIP30 buried behind assumevalid and without LevelDB bloom filters, the first 230k blocks validate ~33% faster.\r\n\r\n<details>\r\n<summary>33% faster reindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD</summary>\r\n\r\n```\r\nCOMMITS=\"2b9c3511986bb2f55310dd5fe7b6367fcc63e44e 060a83df97a84e39a44a7f4a8ea27512d2e7b008\"; \\\r\nSTOP=230000; DBCACHE=450; \\\r\nCC=gcc; CXX=g++; \\\r\nBASE_DIR=\"/mnt/my_storage\"; DATA_DIR=\"$BASE_DIR/BitcoinData\"; LOG_DIR=\"$BASE_DIR/logs\"; \\\r\n(echo \"\"; for c in $COMMITS; do git fetch -q origin $c && git log -1 --pretty='%h %s' $c || exit 1; done) && \\\r\n(echo \"\" && echo \"reindex-chainstate | ${STOP} blocks | dbcache ${DBCACHE} | $(hostname) | $(uname -m) | $(lscpu | grep 'Model name' | head -1 | cut -d: -f2\r\n | xargs) | $(nproc) cores | $(free -h | awk '/^Mem:/{print $2}') RAM | $(df -T $BASE_DIR | awk 'NR==2{print $2}') | $(lsblk -no ROTA $(df --output=source $\r\nBASE_DIR | tail -1) | grep -q 0 && echo SSD || echo HDD)\"; echo \"\") &&\\\r\nhyperfine \\\r\n  --sort command \\\r\n  --runs 2 \\\r\n  --export-json \"$BASE_DIR/rdx-$(sed -E 's/(\\w{8})\\w+ ?/\\1-/g;s/-$//'<<<\"$COMMITS\")-$STOP-$DBCACHE-$CC.json\" \\\r\n  --parameter-list COMMIT ${COMMITS// /,} \\\r\n  --prepare \"killall bitcoind 2>/dev/null; rm -f $DATA_DIR/debug.log; git checkout {COMMIT}; git clean -fxd; git reset --hard && \\\r\n    cmake -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DENABLE_IPC=OFF && ninja -C build bitcoind -j2 && \\\r\n    ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=1000 -printtoconsole=0; sleep 20\" \\\r\n  --conclude \"killall bitcoind || true; sleep 5; grep -q 'height=0' $DATA_DIR/debug.log && grep -q 'Disabling script verification at block #1' $DATA_DIR/deb\r\nug.log && grep -q 'height=$STOP' $DATA_DIR/debug.log; \\\r\n              cp $DATA_DIR/debug.log $LOG_DIR/debug-{COMMIT}-$(date +%s).log\" \\\r\n  \"COMPILER=$CC ./build/bin/bitcoind -datadir=$DATA_DIR -stopatheight=$STOP -dbcache=$DBCACHE -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0\"\r\n\r\n2b9c351198 Merge bitcoin/bitcoin#33768: refactor: remove dead branches in `SingletonClusterImpl`\r\n060a83df97 validation: bury bip30 checks behind assumevalid\r\n\r\nreindex-chainstate | 230000 blocks | dbcache 450 | i9-ssd | x86_64 | Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz | 16 cores | 62Gi RAM | xfs | SSD\r\n\r\nBenchmark 1: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n  Time (mean Â± Ïƒ):     170.827 s Â±  0.718 s    [User: 186.351 s, System: 10.223 s]\r\n  Range (min â€¦ max):   170.319 s â€¦ 171.334 s    2 runs\r\n\r\nBenchmark 2: COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 060a83df97a84e39a44a7f4a8ea27512d2e7b008)\r\n  Time (mean Â± Ïƒ):     128.569 s Â±  0.168 s    [User: 143.057 s, System: 10.436 s]\r\n  Range (min â€¦ max):   128.449 s â€¦ 128.688 s    2 runs\r\n\r\nRelative speed comparison\r\n        1.33 Â±  0.01  COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 2b9c3511986bb2f55310dd5fe7b6367fcc63e44e)\r\n        1.00          COMPILER=gcc ./build/bin/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=230000 -dbcache=450 -reindex-chainstate -blocksonly -connect=0 -printtoconsole=0 (COMMIT = 060a83df97a84e39a44a7f4a8ea27512d2e7b008)\r\n```\r\n\r\n</details>\r\n",
      "state": "open",
      "user": "l0rinc",
      "created_at": "2025-11-07T12:43:23Z",
      "updated_at": "2025-12-16T15:28:59Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/33817",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33817.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#34004](https://github.com/bitcoin/bitcoin/pull/34004) (Implementation of SwiftSync by rustaceanrob)\n* [#32317](https://github.com/bitcoin/bitcoin/pull/32317) (kernel: Separate UTXO set access from validation functions by sedited)\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T12:43:34Z"
        },
        {
          "user": "maflcko",
          "body": "> Skipping BIP30 for those deeply buried blocks\r\n\r\nNot sure about this. Wouldn't this mean someone can feed a `-nominimumchainwork` node a bogus chain, so that the node crashes or is stuck irrecoverably on the bogus chain?\r\n\r\nEven if it wasn't, I am not sure if touching validation.cpp is worth it for basically a rounding error on overall IBD speed?",
          "created_at": "2025-11-07T15:29:48Z"
        },
        {
          "user": "l0rinc",
          "body": ">  I am not sure if touching validation.cpp is worth it \r\n\r\nIt's not about IBD necessarily, but reduced disk footprint and adjusting the database to resemble the usage more closely:\r\n> Removing the LevelDB bloom filters slightly speeds up present-key workloads (~11% faster AssumeUTXO load) and reduces the on-disk chainstate size by ~2% because filter blocks are not stored.",
          "created_at": "2025-11-07T15:34:14Z"
        },
        {
          "user": "gmaxwell",
          "body": "Hm.  I don't know we were aware that you could turn off the filters in leveldb-- I thought they were used to also decide what level an entry might be in!  \r\n\r\nHave you tried to characterize if this opens up any DOS attacks with unconfirmed transactions?\r\n\r\nI think assumeutxo load time is not the best benchmark for this-- it's a one time operation and already pretty fast.  It would be more compelling if it could be shown to reduce IBD time or block validation time at tip-- though the validation time graph you've provided isn't very compelling.\r\n\r\nNor do I think 2% storage is particularly compelling.  But if there isn't a potential downside, why not?",
          "created_at": "2025-11-07T21:51:45Z"
        },
        {
          "user": "l0rinc",
          "body": "Thanks for the comments!\r\nI'm still testing how this combines with other `LevelDB` options, and how it integrates with other changes such as https://github.com/bitcoin/bitcoin/pull/31132, which could benefit from faster reads (I'm getting mixed results on different systems for now), and how much memory is saved by skipping the filters (these are all really slow to measure reliably).\r\nIn the meantime please keep the conceptual reviews coming, appreciate the high-level context.",
          "created_at": "2025-11-09T18:49:13Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-12-16T15:28:58Z"
        }
      ]
    },
    {
      "number": 33813,
      "title": "init: Changing the rpcbind argument being ignored to a pop up warning",
      "body": "When we ignore a users explicit request to an `rpcbind`, i think it warrants for a warning instead of a debug log.",
      "state": "closed",
      "user": "Ataraxia009",
      "created_at": "2025-11-07T06:02:12Z",
      "updated_at": "2025-12-04T05:08:04Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/33813",
      "labels": [
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33813.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33960](https://github.com/bitcoin/bitcoin/pull/33960) (log: Use more severe log level (warn/err) where appropriate by maflcko)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T06:02:20Z"
        },
        {
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/19159736145/job/54788142845?pr=33813#step:5:171:\r\n```bash\r\n Duplicate include(s) in src/httpserver.cpp:\r\n#include <node/interface_ui.h>\r\n```\r\n\r\nCan you also shorten the length of the commit title, and add a proper `prefix:`.",
          "created_at": "2025-11-07T11:19:05Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/actions/runs/19159736145/job/54788142845</sub>\n<sub>LLM reason (âœ¨ experimental): Lint failures caused the CI to fail (duplicate include in src/httpserver.cpp and all_python_linters errors).</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-11-07T11:52:56Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nðŸ™ This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-12-02T14:49:03Z"
        },
        {
          "user": "Ataraxia009",
          "body": "closing this, this is resolved by: https://github.com/bitcoin/bitcoin/commit/fa45a1503eee603059166071857215ea9bd7242a",
          "created_at": "2025-12-04T05:08:03Z"
        }
      ]
    },
    {
      "number": 33811,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "OGbencox",
      "created_at": "2025-11-07T00:57:58Z",
      "updated_at": "2025-11-07T07:44:22Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/33811",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "â™»ï¸ Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-11-07T00:58:03Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33811.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-11-07T00:58:08Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 33816,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "alejandrothugs9119",
      "created_at": "2025-11-07T12:17:20Z",
      "updated_at": "2025-11-07T12:18:41Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33816",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "\nLLM spam detection (âœ¨ experimental): SPAM\nThe body consists solely of a link to an external repository with no context, description, or justification for the issue/PR, making it promotional or irrelevant content.\n\nâ™»ï¸ Automatically suggested to close for now based on heuristics. Please leave a comment, if this was erroneous.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n\nðŸ“ Moderators: If this is spam, please replace the title with `.`, so that the issue does not appear in\nsearch results.\n",
          "created_at": "2025-11-07T12:17:25Z"
        }
      ]
    },
    {
      "number": 33815,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "alejandrothugs9119",
      "created_at": "2025-11-07T12:00:10Z",
      "updated_at": "2025-11-07T12:13:33Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/33815",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "\nLLM spam detection (âœ¨ experimental): SPAM\nThe body only contains a link to a mining-related commit with no context, problem statement, or legitimate relevance to a GitHub project, indicating promotional/spam content.\n\nâ™»ï¸ Automatically suggested to close for now based on heuristics. Please leave a comment, if this was erroneous.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n\nðŸ“ Moderators: If this is spam, please replace the title with `.`, so that the issue does not appear in\nsearch results.\n",
          "created_at": "2025-11-07T12:00:16Z"
        },
        {
          "user": "maflcko",
          "body": "@willcl-ark @pinheadmz Probably off-topic here, but I am thinking about just having those spam issues be auto-closed, wiped and locked by @DrahtBot . Any thoughts? ",
          "created_at": "2025-11-07T12:06:52Z"
        },
        {
          "user": "pinheadmz",
          "body": "@maflcko yes ACK to that... can the bot edit title and description to null as well? (Will and I don't have permission)\n\nBot has been doing great with these heuristics auto closes. I just stroll by later and block the account if its total nonsense",
          "created_at": "2025-11-07T12:10:09Z"
        },
        {
          "user": "willcl-ark",
          "body": "Yeah ack from me too",
          "created_at": "2025-11-07T12:12:19Z"
        }
      ]
    },
    {
      "number": 33814,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "alejandrothugs9119",
      "created_at": "2025-11-07T07:37:30Z",
      "updated_at": "2025-11-07T12:26:59Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/33814",
      "labels": []
    },
    {
      "number": 33812,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "alejandrothugs9119",
      "created_at": "2025-11-07T04:47:14Z",
      "updated_at": "2025-11-07T07:46:45Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/33812",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "SPAM Explanation: The issue title is meaningless and the body contains only a link to an external repository with no context, description, or clear purpose. This resembles promotional or placeholder spam rather than a legitimate discussion or feature/request.",
          "created_at": "2025-11-07T07:46:45Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 8,
    "issues": 4
  }
}