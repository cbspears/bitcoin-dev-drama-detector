{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:55:10.175088+00:00",
  "date": "2025-07-06",
  "pull_requests": [
    {
      "number": 32887,
      "title": ".",
      "body": "Here's a `cmake-multi-platform.yml` GitHub Actions workflow that builds and tests a CMake project on multiple platforms (Linux, macOS, Windows) with different compilers:\r\n\r\n```yaml\r\nname: CMake Multi-Platform Build\r\n\r\non:\r\n  push:\r\n    branches: [ main, master ]\r\n  pull_request:\r\n    branches: [ main, master ]\r\n\r\njobs:\r\n  build:\r\n    runs-on: ${{ matrix.os }}\r\n    strategy:\r\n      matrix:\r\n        include:\r\n          # Linux configurations\r\n          - os: ubuntu-22.04\r\n            compiler: gcc\r\n            cc: gcc\r\n            cxx: g++\r\n            generator: Ninja\r\n          - os: ubuntu-22.04\r\n            compiler: clang\r\n            cc: clang\r\n            cxx: clang++\r\n            generator: Ninja\r\n\r\n          # macOS configurations\r\n          - os: macos-13\r\n            compiler: appleclang\r\n            cc: clang\r\n            cxx: clang++\r\n            generator: Ninja\r\n\r\n          # Windows configurations\r\n          - os: windows-latest\r\n            compiler: msvc\r\n            generator: Visual Studio 17 2022\r\n            architecture: x64\r\n          - os: windows-latest\r\n            compiler: mingw\r\n            cc: gcc\r\n            cxx: g++\r\n            generator: MinGW Makefiles\r\n\r\n    steps:\r\n      - name: Checkout code\r\n        uses: actions/checkout@v4\r\n\r\n      # Install dependencies\r\n      - name: Install Linux dependencies\r\n        if: runner.os == 'Linux'\r\n        run: |\r\n          sudo apt-get update\r\n          sudo apt-get install -y ninja-build\r\n\r\n      - name: Install macOS dependencies\r\n        if: runner.os == 'macOS'\r\n        run: brew install ninja\r\n\r\n      - name: Install Windows dependencies (MinGW)\r\n        if: matrix.os == 'windows-latest' && matrix.compiler == 'mingw'\r\n        uses: msys2/setup-msys2@v2\r\n        with:\r\n          update: true\r\n          install: mingw-w64-x86_64-gcc mingw-w64-x86_64-ninja\r\n\r\n      # Setup compilers\r\n      - name: Set up GCC (Linux)\r\n        if: matrix.os == 'ubuntu-22.04' && matrix.compiler == 'gcc'\r\n        run: |\r\n          sudo apt-get update\r\n          sudo apt-get install -y gcc g++\r\n\r\n      - name: Set up Clang (Linux)\r\n        if: matrix.os == 'ubuntu-22.04' && matrix.compiler == 'clang'\r\n        run: |\r\n          sudo apt-get update\r\n          sudo apt-get install -y clang\r\n\r\n      # Configure CMake\r\n      - name: Configure CMake\r\n        shell: bash\r\n        run: |\r\n          cmake -B build \\\r\n          -G \"${{ matrix.generator }}\" \\\r\n          ${{ matrix.architecture && '-A ' + matrix.architecture || '' }} \\\r\n          ${{ matrix.cc && '-DCMAKE_C_COMPILER=' + matrix.cc || '' }} \\\r\n          ${{ matrix.cxx && '-DCMAKE_CXX_COMPILER=' + matrix.cxx || '' }} \\\r\n          -DCMAKE_BUILD_TYPE=Release\r\n\r\n      # Build project\r\n      - name: Build\r\n        shell: bash\r\n        run: cmake --build build --config Release --parallel\r\n\r\n      # Run tests\r\n      - name: Run tests\r\n        shell: bash\r\n        run: ctest --test-dir build --output-on-failure -C Release\r\n```\r\n\r\n### Key Features:\r\n1. **Multi-Platform Support**:\r\n   - Ubuntu Linux (GCC, Clang)\r\n   - macOS (Apple Clang)\r\n   - Windows (MSVC, MinGW)\r\n\r\n2. **Compiler Matrix**:\r\n   - GCC (Linux)\r\n   - Clang (Linux)\r\n   - Apple Clang (macOS)\r\n   - MSVC (Windows)\r\n   - MinGW (Windows)\r\n\r\n3. **Build System**:\r\n   - Uses Ninja for Linux/macOS\r\n   - Uses Visual Studio generator for MSVC\r\n   - Uses MinGW Makefiles for MinGW\r\n\r\n4. **Configuration Options**:\r\n   - Automatic generator selection\r\n   - Compiler detection\r\n   - Architecture specification for Windows\r\n   - Release builds\r\n\r\n5. **Testing**:\r\n   - Runs tests using CTest\r\n   - Shows failure outputs\r\n\r\n### Customization Notes:\r\n1. **CMake Options**: Add additional CMake flags in the \"Configure CMake\" step: ```yaml -DCMAKE_CXX_STANDARD=17 -DOPTION_NAME=ON ```\r\n\r\n2. **Build Types**: To add Debug builds, duplicate matrix entries and change `CMAKE_BUILD_TYPE`.\r\n\r\n3. **Windows Architecture**: For ARM builds, change `architecture: ARM64`.\r\n\r\n4. **macOS Version**: Adjust `macos-13` to other versions like `macos-12` or `macos-latest`.\r\n\r\n5. **Dependencies**: Add system dependencies in the appropriate \"Install dependencies\" section.\r\n\r\nThis workflow provides a solid foundation for CI/CD of CMake projects across different platforms and compilers. The matrix strategy ensures all configurations are tested independently, and the setup optimizes build times through parallelization.\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Sazwan96",
      "created_at": "2025-07-06T22:24:38Z",
      "updated_at": "2025-07-08T15:21:29Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32887",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "‚ôªÔ∏è Automatically closing for now based on heuristics. Please leave a comment, if this was erroneous. Generally, please focus on creating high-quality, original content that demonstrates a clear understanding of the project's requirements and goals.",
          "created_at": "2025-07-06T22:24:42Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32887.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-06T22:24:43Z"
        },
        {
          "user": "Sazwan96",
          "body": "Heloo",
          "created_at": "2025-07-06T22:52:11Z"
        }
      ]
    },
    {
      "number": 32886,
      "title": "Remove redundant else statements",
      "body": "",
      "state": "closed",
      "user": "Raimo33",
      "created_at": "2025-07-06T18:44:29Z",
      "updated_at": "2025-07-08T15:21:48Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32886",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32886.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-06T18:44:32Z"
        },
        {
          "user": "l0rinc",
          "body": "Please stop spamming, a lot of people are getting email notifications in these cases.",
          "created_at": "2025-07-06T18:46:36Z"
        },
        {
          "user": "Raimo33",
          "body": "Got it. But I see a lot of bad code through the whole repo",
          "created_at": "2025-07-06T18:58:13Z"
        },
        {
          "user": "pinheadmz",
          "body": "Please don't open new pull requests just for tiny typo fixes, they are a drag on our integration testing infrastructure, maintainer time and reviewer time. See https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#refactoring:\r\n\r\n> Trivial pull requests or pull requests that refactor the code with no clear benefits may be immediately closed by the maintainers to reduce unnecessary workload on reviewing.\r\n\r\nThere are many more significant ways to contribute to Bitcoin -- for example, look for [good first issues](https://github.com/bitcoin/bitcoin/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22good%20first%20issue).",
          "created_at": "2025-07-06T19:11:12Z"
        }
      ]
    },
    {
      "number": 32885,
      "title": "Cache m_cached_finished_ibd where SetTip is called.",
      "body": "As IsInitialBlockDownload latches to false only once the Tip is sufficiently\r\nadvanced there is no need to check the Tip everytime IsIBD is called.\r\n\r\nBy caching this in advance we can avoid extra work and more importantly a lock.\r\n\r\n",
      "state": "closed",
      "user": "pstratem",
      "created_at": "2025-07-06T09:29:26Z",
      "updated_at": "2026-01-12T09:58:45Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/32885",
      "labels": [
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32885.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32885#pullrequestreview-2998927241), [l0rinc](https://github.com/bitcoin/bitcoin/pull/32885#pullrequestreview-3530040461) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#29640](https://github.com/bitcoin/bitcoin/pull/29640) (Fix tiebreak when loading blocks from disk (and add tests for comparing chain ties) by sr-gi)\n* [#24230](https://github.com/bitcoin/bitcoin/pull/24230) (indexes: Stop using node internal types and locking cs_main, improve sync logic by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-06T09:29:30Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/45440913265</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by compilation errors due to missing mutex lock assertions in validation.cpp.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-07T01:58:25Z"
        },
        {
          "user": "pstratem",
          "body": "> Conceptually not a bad idea to cache and lock less, but imo this makes the code more brittle (and harder to understand), e.g. if any tip updates happen without the cache being updated separately.\r\n> \r\n> Do you have any data as to the actual performance improvements from this PR?\r\n\r\nI'm (very) open to suggestions on how to make the caching call more robust. (Indeed I expected some.)\r\n\r\nThere's no performance improvement from this PR, it's the first in a series of proposed changes I'll be making to remove locking where it's not necessary, with the end goal being some form of concurrency being possible in message processing.",
          "created_at": "2025-07-08T00:09:14Z"
        },
        {
          "user": "pstratem",
          "body": "> I think something like this, if properly implemented (I haven't thought much about the code yet), would reduce the GUI freezes during IBD in a noticeable manner.\r\n\r\nI hadn't even considered that, but certainly that's a possible direct improvement.",
          "created_at": "2025-07-08T00:43:43Z"
        },
        {
          "user": "l0rinc",
          "body": "@pstratem, not sure if you saw this, but could be helpful: https://github.com/bitcoin/bitcoin/pull/25081",
          "created_at": "2025-07-08T05:53:06Z"
        },
        {
          "user": "maflcko",
          "body": "tight polling of is_ibd seems like a mistake in the first place, so i am not sure if this is something to optimize for.\r\n\r\nLooking at the remaining call sites of the ibd check, most have cs_main already, so they won't be affected by this? The remaining ones (I only found `MaybeSendFeefilter`), if they are relevant, could either re-order their code to call it less often, or  cache the bool themselves? For the gui, see also https://github.com/bitcoin/bitcoin/issues/17145",
          "created_at": "2025-07-08T10:01:23Z"
        },
        {
          "user": "pstratem",
          "body": "> Concept ACK, but I'm not convinced this implementation is safe as-is. If we want to maintain the current behaviour, it's not sufficient to update only when the tip changes. We also need to re-check when importing/reindexing completes, and schedule an update timer if max_tip_age is the final cause of not exiting IBD.\r\n\r\nThis made me revisit the function and consider what we're trying to achieve.\r\n\r\nThe function is only interesting when it can latch to the IBD finished state.\r\n\r\nThat's only possible when all four conditions are met, which can only happen when the tip is updated.\r\n\r\nThe final time based condition can only change when the tip changes as it gets further away with time, not closer.",
          "created_at": "2025-07-10T05:28:21Z"
        },
        {
          "user": "pstratem",
          "body": "> @pstratem, not sure if you saw this, but could be helpful: #25081\r\n\r\nThat seems like it would be useful, but for now I'm just parsing the lock contention messages out of debug.log",
          "created_at": "2025-07-24T17:28:46Z"
        },
        {
          "user": "pstratem",
          "body": "Ok I thought about it and it just wasn't obviously correct enough.\r\n\r\nSo I've rewritten into three commits to be simpler.",
          "created_at": "2025-07-26T20:02:44Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-10-27T17:09:09Z"
        },
        {
          "user": "l0rinc",
          "body": "@pstratem, are you still working on this or would you like me to take over?",
          "created_at": "2025-12-29T21:02:12Z"
        },
        {
          "user": "sedited",
          "body": "There hasn't been progress here in many months. Maybe time to re-open it? ",
          "created_at": "2026-01-11T13:48:30Z"
        },
        {
          "user": "l0rinc",
          "body": "I will open an alternative PR for this today\r\nEdit: pushed https://github.com/bitcoin/bitcoin/pull/34253",
          "created_at": "2026-01-11T13:50:36Z"
        }
      ]
    },
    {
      "number": 32884,
      "title": "rest: replace `rf_names[0].rf` by `RESTResponseFormat::UNDEF`",
      "body": "I'm reviewing the bitcoin's rest.cpp source code.\r\nIn the function: `ParseDataFormat`, `rf_names[0].rf` is actualy `RESTResponseFormat::UNDEF`: \r\nhttps://github.com/bitcoin/bitcoin/blob/e3f416dbf7633b2fb19c933e5508bd231cc7e9cf/src/rest.cpp#L48-L57\r\nso it would be more clarity and code readability to use `return RESTResponseFormat::UNDEF;` to replace `return rf_names[0].rf;`\r\n",
      "state": "closed",
      "user": "eval-exec",
      "created_at": "2025-07-06T03:22:50Z",
      "updated_at": "2025-07-10T17:33:33Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32884",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32884.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32884#issuecomment-3048247912), [brunoerg](https://github.com/bitcoin/bitcoin/pull/32884#pullrequestreview-2997939984) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-06T03:22:54Z"
        },
        {
          "user": "eval-exec",
          "body": "Friendly request @fanquake to review this PR.",
          "created_at": "2025-07-07T08:03:15Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 6d19815cd44031ff2b45fc9532f579cd81c62749",
          "created_at": "2025-07-08T10:09:41Z"
        }
      ]
    }
  ],
  "issues": [],
  "summary": {
    "pull_requests": 4,
    "issues": 0
  }
}