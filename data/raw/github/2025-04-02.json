{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:30:03.134910+00:00",
  "date": "2025-04-02",
  "pull_requests": [
    {
      "number": 32207,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Pekis-crypto",
      "created_at": "2025-04-02T19:31:40Z",
      "updated_at": "2025-04-02T23:30:59Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32207",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32207.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-02T19:31:44Z"
        }
      ]
    },
    {
      "number": 32206,
      "title": "doc: Add fuzz based coverage report generation",
      "body": "Followup from [comment 1 31933](https://github.com/bitcoin/bitcoin/pull/31933#pullrequestreview-2685168897) and [comment 2 31933](https://github.com/bitcoin/bitcoin/pull/31933#pullrequestreview-2683653107) , have added the instructions to generate coverage report for fuzz tests. ",
      "state": "closed",
      "user": "Prabhat1308",
      "created_at": "2025-04-02T18:58:43Z",
      "updated_at": "2025-04-09T08:40:30Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32206",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32206.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32206#issuecomment-2782865223), [mabu44](https://github.com/bitcoin/bitcoin/pull/32206#pullrequestreview-2747788930) |\n| Stale ACK | [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/32206#issuecomment-2780723539) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-02T18:58:46Z"
        },
        {
          "user": "instagibbs",
          "body": "I just went through figuring this out myself, will review",
          "created_at": "2025-04-02T19:00:10Z"
        },
        {
          "user": "Prabhat1308",
          "body": "> Interesting. It works for me. Concept ACK [8613099](https://github.com/bitcoin/bitcoin/commit/861309946c3a8bb4c0793129f0f307ed908f1a76) After running the commands, I have some \"slow-unit-xxxxx\" files in the project root directory that are tracked by git. Can those be created in the build directory?\r\n\r\nI don't seem to have these files . Which system are you running on ?\r\n",
          "created_at": "2025-04-03T06:58:24Z"
        },
        {
          "user": "maflcko",
          "body": "> > Interesting. It works for me. Concept ACK [8613099](https://github.com/bitcoin/bitcoin/commit/861309946c3a8bb4c0793129f0f307ed908f1a76) After running the commands, I have some \"slow-unit-xxxxx\" files in the project root directory that are tracked by git. Can those be created in the build directory?\r\n> \r\n> I don't seem to have these files . Which system are you running on ?\r\n\r\nThey are created by libFuzzer. See the `-artifact_prefix` option by libFuzzer.\r\n\r\nMy recommendation would be to just not use libFuzzer here when it is not needed and given the non-determinism and other issues it introduces.",
          "created_at": "2025-04-03T07:32:23Z"
        },
        {
          "user": "Prabhat1308",
          "body": "> > I don't seem to have these files. Which system are you running on?\r\n> \r\n> I am running on Debian. With the new version I cannot get it working. The LLVM_PROFILE_FILE variable seem to be ignored. A \"default.profraw\" file is generated in the root directory of the source code. I don't get any files in raw_profile_data.\r\n\r\nThis PR depends on https://github.com/bitcoin/bitcoin/pull/32209 to solve this issue.\r\n",
          "created_at": "2025-04-03T16:19:10Z"
        },
        {
          "user": "kevkevinpal",
          "body": "Tested ACK [5dcbec](https://github.com/bitcoin/bitcoin/commit/65dcbec75661d1652beb927f03b1feab4fab932e)\r\n\r\nI tested these commands on master, running the fuzz tests against (qa-assets) and inspecting the coverage reports",
          "created_at": "2025-04-05T13:26:10Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40085914234</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-07T09:39:57Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 7677fde4c788bc3051edfe81b3b564388b2d5da1",
          "created_at": "2025-04-07T10:34:33Z"
        }
      ]
    },
    {
      "number": 32205,
      "title": "doc: update .lldbinit configuration for cmake builds to see source code in debugger",
      "body": "Closes https://github.com/bitcoin/bitcoin/issues/31204\r\n\r\nTo reproduce:\r\n\r\n1. build bitcoin with `-DCMAKE_BUILD_TYPE=Debug`\r\n2. run with lldb, add a breakpoint and trigger it (with a second local bitcoind peer, for example):\r\n    - `lldb buld/bin/bitcoind`\r\n    - `(lldb) b ProcessMessage`\r\n    - `(lldb) r -regtest`\r\nOutput will probably look like this:\r\n```\r\nProcess 6764 stopped\r\n* thread #34, name = 'b-msghand', stop reason = breakpoint 1.1\r\n    frame #0: 0x00000001003380c0 bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(this=0x000000013e80e400, pfrom=0x000000013c70a830, interruptMsgProc=0x000000013d009d40) at net_processing.cpp:4933:5\r\n\r\n```\r\n\r\nTo fix (following the doc in this PR)\r\nCreate or append to `~/.lldbinit` in your $HOME directory, using absolute paths. (My example)\r\n\r\n```\r\nsettings set target.source-map /Users/matthewzipkin/Desktop/work/bitcoin/build/src /Users/matthewzipkin/Desktop/work/bitcoin/src\r\n```\r\n\r\nImproved output:\r\n```\r\nProcess 6811 stopped\r\n* thread #34, name = 'b-msghand', stop reason = breakpoint 1.1\r\n    frame #0: 0x00000001003380c0 bitcoind`(anonymous namespace)::PeerManagerImpl::ProcessMessages(this=0x000000011c808800, pfrom=0x0000000104004080, interruptMsgProc=0x000000011d009140) at net_processing.cpp:4933:5\r\n   4930\r\n   4931 bool PeerManagerImpl::ProcessMessages(CNode* pfrom, std::atomic<bool>& interruptMsgProc)\r\n   4932 {\r\n-> 4933     AssertLockNotHeld(m_tx_download_mutex);\r\n   4934     AssertLockHeld(g_msgproc_mutex);\r\n   4935\r\n   4936     PeerRef peer = GetPeerRef(pfrom->GetId());\r\n\r\n```",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-04-02T18:43:57Z",
      "updated_at": "2025-12-24T11:44:45Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32205",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32205.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [janb84](https://github.com/bitcoin/bitcoin/pull/32205#pullrequestreview-2739249593) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n",
          "created_at": "2025-04-02T18:44:00Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "@pinheadmz re https://github.com/bitcoin/bitcoin/pull/34081#issuecomment-3684119131\r\n\r\nI also see the same output for `test_bitcoin` after updating the `target.source-map`  based on the steps you provided here.",
          "created_at": "2025-12-24T11:14:43Z"
        },
        {
          "user": "pinheadmz",
          "body": "Closing, the approach in https://github.com/bitcoin/bitcoin/pull/34081 is way better",
          "created_at": "2025-12-24T11:44:42Z"
        }
      ]
    },
    {
      "number": 32204,
      "title": "fix: several typos of various value",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "DeVikingMark",
      "created_at": "2025-04-02T16:51:45Z",
      "updated_at": "2025-04-02T17:03:16Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32204",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32204.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-02T16:51:48Z"
        },
        {
          "user": "pinheadmz",
          "body": "Please don't open PRs with only tiny typo fixes, it is a drag on CI resources and reviewer time. There are many more significant ways to contribute!",
          "created_at": "2025-04-02T17:03:15Z"
        }
      ]
    },
    {
      "number": 32203,
      "title": "ci: Merge master in test-each-commit task",
      "body": "The `test-each-commit` task will often fail, when the CI config yaml is updated along with code changes.\r\n\r\nThis is because, GitHub seems to be merging the CI config on a fresh pull with the current target branch (`master`). However, the code changes are not.\r\n\r\nA tedious workaround would be for every developer to rebase on every intermittent (https://github.com/bitcoin/bitcoin/issues/31946#issuecomment-2740911853) and non-intermittent CI issue.\r\n\r\nHowever, fix this instead by merging with `master`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-02T16:49:46Z",
      "updated_at": "2025-04-04T06:50:05Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32203",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32203.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32203#pullrequestreview-2737253365), [laanwj](https://github.com/bitcoin/bitcoin/pull/32203#issuecomment-2777600097) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31802](https://github.com/bitcoin/bitcoin/pull/31802) (Add bitcoin-{node,gui} to release binaries for IPC by Sjors)\n* [#30975](https://github.com/bitcoin/bitcoin/pull/30975) (ci: build multiprocess on most jobs by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-02T16:49:49Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/39862623915</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-04-02T17:01:12Z"
        },
        {
          "user": "maflcko",
          "body": "An example failure can be seen in https://github.com/bitcoin/bitcoin/actions/runs/14225501221/job/39863973090?pr=32203:\r\n\r\n```\r\n-- Could NOT find Qt5 (missing: Qt5_DIR)\r\nCMake Error at /usr/local/share/cmake-4.0/Modules/FindPackageHandleStandardArgs.cmake:227 (message):\r\n  Could NOT find Qt (missing: Qt5_DIR) (Required is at least version\r\n  \"5.11.3\")\r\n  ```\r\n  \r\n  Hopefully, it will be fixed by the next commit.",
          "created_at": "2025-04-02T17:14:39Z"
        },
        {
          "user": "maflcko",
          "body": "Sure, squashed.\r\n\r\nFor reference, the passing CI was https://github.com/bitcoin/bitcoin/actions/runs/14226088164/job/39865851320?pr=32203\r\n\r\n",
          "created_at": "2025-04-02T18:47:10Z"
        },
        {
          "user": "hebasto",
          "body": "cc @willcl-ark ",
          "created_at": "2025-04-03T12:03:39Z"
        },
        {
          "user": "laanwj",
          "body": "Concept ACK, i think \"every intermediate commit should merge cleanly into master\" might put some extra onus on contributors, but it's better than forcing a rebase of everything every time there's a significant change to the build system.",
          "created_at": "2025-04-03T12:12:39Z"
        },
        {
          "user": "maflcko",
          "body": "> i think \"every intermediate commit should merge cleanly into master\" might put some extra onus on contributors, but it's better than forcing a rebase of everything every time there's a significant change to the build system.\r\n\r\nThis is true. I suspect the issue could only arise when something is removed/added in one commit and then reverted in another commit. Though, this should be avoided anyway, and real cases where this is an issue should hopefully be rare.",
          "created_at": "2025-04-03T12:23:41Z"
        },
        {
          "user": "laanwj",
          "body": "ACK faa807bdf8c3002a28005b4765604f518a6f2736\r\nTested by cherry picking into #32176.",
          "created_at": "2025-04-04T05:33:29Z"
        },
        {
          "user": "fanquake",
          "body": "Note that the code here didn't actually work. See the failed run in https://github.com/bitcoin/bitcoin/actions/runs/14259358898/job/39967624081?pr=30756, and the followup: https://github.com/bitcoin/bitcoin/pull/32218.",
          "created_at": "2025-04-04T06:44:50Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, sorry for missing this. Effectively this only fixed the issue of merging into master (when it works). Though, when the CI previously failed with the QT6 error, it will still fail with a different \"bash script missing\" error.\r\n\r\nSo this was an improvement, but it didn't fix all issues. :(",
          "created_at": "2025-04-04T06:49:49Z"
        }
      ]
    },
    {
      "number": 32200,
      "title": "net: Add Tor extended SOCKS5 error codes",
      "body": "Add support for reporting Tor extended SOCKS5 error codes as defined here:\r\n\r\n- https://spec.torproject.org/socks-extensions.html#extended-error-codes\r\n- https://gitlab.torproject.org/tpo/core/arti/-/blob/main/crates/tor-socksproto/src/msg.rs?ref_type=heads#L183\r\n\r\nThese give a more direct indication of the problem in case of errors connecting to hidden services, for example:\r\n```\r\n2025-04-02T10:34:13Z [net] Socks5() connect to [elided].onion:8333 failed: onion service descriptor can not be found\r\n```\r\n\r\nIn the C Tor implementation, to get these one should set the \"ExtendedErrors\" flag on the \"SocksPort\" definition, introduced in version 0.4.3.1.\r\n\r\nIn Arti, extended error codes are always enabled.\r\n\r\nAlso, report the raw error code in case of unknown reply values.",
      "state": "closed",
      "user": "laanwj",
      "created_at": "2025-04-02T10:52:09Z",
      "updated_at": "2025-07-31T19:15:33Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32200",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32200.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [1440000bytes](https://github.com/bitcoin/bitcoin/pull/32200#issuecomment-2773160909), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32200#issuecomment-2773714501), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32200#pullrequestreview-2739809268) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-04-02T10:52:13Z"
        },
        {
          "user": "1440000bytes",
          "body": "utACK https://github.com/bitcoin/bitcoin/pull/32200/commits/b639417b39cced5223953fca65cdcd5d84475127",
          "created_at": "2025-04-02T16:45:18Z"
        },
        {
          "user": "w0xlt",
          "body": "utACK https://github.com/bitcoin/bitcoin/pull/32200/commits/b639417b39cced5223953fca65cdcd5d84475127",
          "created_at": "2025-04-02T20:52:49Z"
        }
      ]
    },
    {
      "number": 32199,
      "title": "util: Ensure UninterruptibleSleep does not return too early",
      "body": "Both, `sleep_for` and `sleep_until` may sleep less than the specified time, because the implementation is free to be susceptible to system clock adjustments (albeit it is recommended to not be).\r\n\r\nClock adjustments should be rare, and I don't think any caller of `UninterruptibleSleep` (except for one unit test) relies on it always sleeping at least that much.\r\n\r\nHowever, it shouldn't hurt to fix this by ensuring a steady clock is used to measure the lower bound.\r\n\r\nPresumably fixes https://github.com/bitcoin/bitcoin/issues/32197",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-02T09:35:17Z",
      "updated_at": "2025-04-08T00:47:07Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32199",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32199.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32199#issuecomment-2773794626) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32061](https://github.com/bitcoin/bitcoin/pull/32061) (Replace libevent with our own HTTP and socket-handling implementation by pinheadmz)\n* [#31672](https://github.com/bitcoin/bitcoin/pull/31672) (rpc: add cpu_load to getpeerinfo by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-04-02T09:35:20Z"
        },
        {
          "user": "laanwj",
          "body": "> Both, sleep_for and sleep_until may sleep less than the specified time, because the implementation is free to be susceptible to system clock adjustments (albeit it is recommended to not be).\r\n\r\nHuh. You would expect `sleep_for` to map directly to OS delay functions. This implementation involving a loop and checking the time seems over-compicated to me. But if it fixes an actual issue that's fine.",
          "created_at": "2025-04-02T11:18:19Z"
        },
        {
          "user": "maflcko",
          "body": "From https://en.cppreference.com/w/cpp/thread/sleep_for I got:\r\n\r\n> If an implementation uses a system clock instead, the wait time may also be sensitive to clock adjustments. \r\n\r\nand similarly for https://en.cppreference.com/w/cpp/thread/sleep_until.\r\n\r\n(It is correctly implemented in Rust, but that is probably  unrelated and out of scope here: https://doc.rust-lang.org/std/thread/fn.sleep.html says \"It will never sleep less.\")",
          "created_at": "2025-04-02T12:52:31Z"
        },
        {
          "user": "w0xlt",
          "body": "Code review ACK https://github.com/bitcoin/bitcoin/pull/32199/commits/faa0e87e0be8289307829f77b1c9e9854c175c36\r\n\r\nThis basically addresses the issue by continuously checking the time and sleeping until the target time is reached, making it effectively â€œuninterruptible.â€ (not susceptible to interruptions or adjustments to the Windows clock).",
          "created_at": "2025-04-02T21:36:02Z"
        },
        {
          "user": "maflcko",
          "body": "> But if it fixes an actual issue that's fine.\r\n\r\nI don't have Windows, so I can't test if this actually fixes the issue. And on a second look, it looks like GCC is just passing this on to `Sleep`: https://github.com/gcc-mirror/gcc/blame/92ca72b41a74aef53978cadbda33dd38b69d3ed3/libstdc%2B%2B-v3/src/c%2B%2B11/thread.cc#L275-L280, which would be https://learn.microsoft.com/en-us/windows/win32/api/synchapi/nf-synchapi-sleep, but that page isn't mentioning anything about time adjustments.\r\n\r\nSo just from reading the docs, it would appear that this may not fix the issue, depending on what the issue is.\r\n\r\n(\r\nUnrelatedly, GCC maps `sleep_until` to `sleep_for` (https://github.com/gcc-mirror/gcc/blob/1bfc026035e6bade36538077dc1dd4f9baff0bf2/libstdc%2B%2B-v3/include/bits/this_thread_sleep.h#L89-L109) and `sleep_for`, on GCC is doing a while-loop on non-Windows as well, just like the code in this pull right now.\r\n\r\nGoing further, libc++ just maps the `sleep_until` (at least the steady one) to `sleep_for` (https://github.com/llvm/llvm-project/blob/edc22c64e527171041876f26a491bb1d03d905d5/libcxx/include/__thread/this_thread.h#L66), which again is mapped directly to `thrd_sleep` (https://github.com/llvm/llvm-project/blob/3295970d846b0d820b863f9eeac559b80239297e/libcxx/include/__thread/support/c11.h#L169C3-L169C13) or `Sleep`  (https://github.com/llvm/llvm-project/blame/3295970d846b0d820b863f9eeac559b80239297e/libcxx/src/support/win32/thread_win32.cpp#L194), or `nanosleep` (historically), and the only one with a loop: https://github.com/llvm/llvm-project/blob/3295970d846b0d820b863f9eeac559b80239297e/libcxx/include/__cxx03/__thread/support/pthread.h#L198\r\n\r\nNeither https://en.cppreference.com/w/c/thread/thrd_sleep, nor https://www.man7.org/linux/man-pages/man2/nanosleep.2.html mention anything about time adjustments, so :shrug: .\r\n)\r\n\r\nIf it is important to fix the intermittent CI failure in one go, the only reliable way would be to remove the test.",
          "created_at": "2025-04-03T09:22:30Z"
        },
        {
          "user": "laanwj",
          "body": "> Neither https://en.cppreference.com/w/c/thread/thrd_sleep, nor https://www.man7.org/linux/man-pages/man2/nanosleep.2.html mention anything about time adjustments, so ðŸ¤· .\r\n\r\nRight. OS sleep functions generally just pause the thread in the scheduler for a given number of timeslices. Making them dependent on system time would break a lot of assumptions.\r\n\r\n> If it is important to fix the intermittent CI failure in one go, the only reliable way would be to remove the test.\r\n\r\nSeems the best option to me. Anything realtime-related tends to make tests more brittle, and we don't need to test all kinds of base OS or C++ library functionality as part of the bitcoin core tests. Especially as none of our uses of sleep are *that* critical.",
          "created_at": "2025-04-07T10:46:00Z"
        },
        {
          "user": "maflcko",
          "body": "> > If it is important to fix the intermittent CI failure in one go, the only reliable way would be to remove the test.\r\n> \r\n> Seems the best option to me. Anything realtime-related tends to make tests more brittle, and we don't need to test all kinds of base OS or C++ library functionality as part of the bitcoin core tests. Especially as none of our uses of sleep are _that_ critical.\r\n\r\nYeah, I agree.",
          "created_at": "2025-04-07T10:56:17Z"
        }
      ]
    },
    {
      "number": 32198,
      "title": "fuzz: Make p2p_headers_presync more deterministic",
      "body": "This should make the `p2p_headers_presync` fuzz target more deterministic.\r\n\r\nTracking issue: https://github.com/bitcoin/bitcoin/issues/29018.\r\n\r\nThe first commits adds an `ElapseSteady` helper and type aliases. The second commit uses those helpers in `ReportHeadersPresync` and in the fuzz target to increase determinism.\r\n\r\n### Testing\r\n\r\nIt can be tested via (setting 32 parallel threads):\r\n\r\n```\r\ncargo run --manifest-path ./contrib/devtools/deterministic-fuzz-coverage/Cargo.toml -- $PWD/bld-cmake/ $PWD/../b-c-qa-assets/fuzz_corpora/ p2p_headers_presync 32\r\n```\r\n\r\nThe failing diff is contained in the commit messages, if applicable.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-02T08:14:59Z",
      "updated_at": "2025-10-30T13:59:09Z",
      "comments": 31,
      "url": "https://github.com/bitcoin/bitcoin/pull/32198",
      "labels": [
        "Tests",
        "Fuzzing"
      ]
    },
    {
      "number": 32195,
      "title": "test: fix spelling in Python code comment",
      "body": "Fixed a typo\r\n",
      "state": "closed",
      "user": "jbampton",
      "created_at": "2025-04-02T02:56:01Z",
      "updated_at": "2025-04-02T03:40:22Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32195",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32195.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-04-02T02:56:04Z"
        },
        {
          "user": "pinheadmz",
          "body": "Please avoid opening PRs just for tiny typo fixes, it is a waste of our CI resources and reviewer time. There are more significant ways to contribute!",
          "created_at": "2025-04-02T03:40:22Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32202,
      "title": "Please help bitcoin",
      "body": "Protocol developers work for grants, they have no clue how bitcoin works.\n\nThey dont even interact with application devs or users.\n\nPlease help bitcoin.\n\nMarkets is about you.",
      "state": "closed",
      "user": "1440000bytes",
      "created_at": "2025-04-02T16:31:27Z",
      "updated_at": "2025-04-03T01:38:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/32202",
      "labels": [],
      "comment_list": [
        {
          "user": "l0rinc",
          "body": "@1440000bytes please stop this aggressive spamming, you're not helping ",
          "created_at": "2025-04-02T17:21:44Z"
        },
        {
          "user": "pinheadmz",
          "body": "@1440000bytes blocked for 3 days for spam, next block will be for 7 and after that, 30 days.",
          "created_at": "2025-04-02T17:53:28Z"
        }
      ]
    },
    {
      "number": 32201,
      "title": "BIP32: Maximal length of derivation paths and depth of extended keys",
      "body": "Hi folks,\nI have started to notice and report an overflow of the depth of extended keys (as described in BIP32) and some confusion regarding the depth came up. On one hand, the depth is, I'd say indirectly, limited to the range [0 , 255] due to the serialization into a [single byte](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#serialization-format). On the other hand, I don't see an inherent technical reason(s) that would prevent deriving even _lower_ keys (with depth 255+).\n\nThe list of libraries, where I see the depth overflowing is increasing:  https://github.com/libbitcoin/libbitcoin-system/pull/1624, https://github.com/bitcoinj/bitcoinj/pull/3693, https://github.com/tyler-smith/go-bip32/issues/27, https://github.com/MetacoSA/NBitcoin/issues/1260, https://github.com/piotrnar/gocoin/issues/71,...\n\nIn bitcoin repository, the overflow is caught [here](https://github.com/bitcoin/bitcoin/blob/639279e86a6edd6cb68e8cf077d14337bcd13959/src/key.cpp#L360) (and also [here](https://github.com/bitcoin/bitcoin/blob/639279e86a6edd6cb68e8cf077d14337bcd13959/src/pubkey.cpp#L407)) and there is also a [test case](https://github.com/bitcoin/bitcoin/blob/449e2eb7e40f7e14300af92bce8e70a9fde91e1b/src/test/bip32_tests.cpp#L187-L203) for it. But the [derivation paths](https://github.com/bitcoin/bitcoin/blob/449e2eb7e40f7e14300af92bce8e70a9fde91e1b/src/util/bip32.cpp#L18) themselves aren't restricted in the size. Due to the variety of implementations and libraries APIs' for the derivation paths and key derivation (priv -> priv, priv -> pub, pub -> pub), there are also a few different ways how to possibly hit the overflow.\n\nKeys that overflow could be _hiding_ coins (as they would appear to live at different levels), but the valid parents are likely still identifiable via the fingerprints. (Possibly, in some edge-cases, overflown keys could be invalid in such a way that the coins would get locked.) I am not familiar with how the depth is used later on, e.g., after key deserialization, and if it could cause other issues.\n\nAre there any legitimate reasons to allow longer paths and keys with depth > 255? Or shall any such overflow be considered a bug? Not sure, if I can tag Pieter Wuille, to get his thoughts regarding the depth validity and if there is more to it.",
      "state": "open",
      "user": "quapka",
      "created_at": "2025-04-02T16:20:19Z",
      "updated_at": "2026-01-15T09:23:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/32201",
      "labels": [
        "Bug",
        "Questions and Help"
      ],
      "comment_list": [
        {
          "user": "quapka",
          "body": "I would ask about this in the [bips](https://www.github.com/bitcoin/bips) repository, but I don't see the option to raise issues there. And since I don't have a definitive answer, I wasn't sure how to maybe clarify or highlight this in BIP32 itself via a PR.",
          "created_at": "2025-04-02T16:29:49Z"
        },
        {
          "user": "quapka",
          "body": "Linking https://github.com/bitcoinj/bitcoinj/issues/3683, to keep things in one place.",
          "created_at": "2025-09-15T15:47:50Z"
        }
      ]
    },
    {
      "number": 32197,
      "title": "ci: failures in cross-built Windows CI",
      "body": "Seen in https://github.com/bitcoin/bitcoin/actions/runs/14209827577/job/39815242086:\n```bash\n ./test/util_tests.cpp(570): Entering test case \"util_time_GetTime\"\n./test/util_tests.cpp(593): error: in \"util_tests/util_time_GetTime\": check steady_ms_0 < Now<SteadyMilliseconds>() has failed\n./test/util_tests.cpp(594): error: in \"util_tests/util_time_GetTime\": check steady_0 + 1ms <= std::chrono::steady_clock::now() has failed\n./test/util_tests.cpp(595): error: in \"util_tests/util_time_GetTime\": check ms_0 < GetTime<std::chrono::milliseconds>() has failed\n./test/util_tests.cpp(570): Leaving test case \"util_time_GetTime\"; testing time: 34870us\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-02T05:12:53Z",
      "updated_at": "2025-05-06T10:20:20Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/issues/32197",
      "labels": [
        "Windows",
        "Tests",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "Reminds me of the other clock issue on Windows, which is still present today and only worked around by not using the clock at all in that wallet RPC: https://github.com/bitcoin/bitcoin/issues/25482",
          "created_at": "2025-04-02T08:27:08Z"
        },
        {
          "user": "maflcko",
          "body": "According to https://en.cppreference.com/w/cpp/thread/sleep_for, the implementation may take clock adjustments into account. So I guess the failure here is expected.\n\nSo a possible fix would be to implement the sleep oneself.",
          "created_at": "2025-04-02T08:32:02Z"
        },
        {
          "user": "maflcko",
          "body": "After discussion in https://github.com/bitcoin/bitcoin/pull/32199#issuecomment-2782893926, it is unclear why this fails and how to fix it.\n\nAlso, as discussed, the test isn't too important, so it could just be removed.",
          "created_at": "2025-04-07T10:55:34Z"
        },
        {
          "user": "maflcko",
          "body": "Looks like the failure did not happen again for the last two weeks, so far?",
          "created_at": "2025-04-24T12:40:47Z"
        },
        {
          "user": "maflcko",
          "body": "4eee328a9820fe4f9b70129f25b65a2be1833596",
          "created_at": "2025-05-06T10:20:19Z"
        }
      ]
    },
    {
      "number": 32196,
      "title": ".",
      "body": "### Motivation\n\nI'm new to crypto and desperate to learn it. Any ideas on where to go or what to do? \n\n### Possible solution\n\nObviously go online, but where? \n\n### Useful Skills\n\n* Compiling Bitcoin Core from source\n* Running the C++ unit tests and the Python functional tests\n* ...\n\n\n### Guidance for new contributors\n\nWant to work on this issue?\n\nFor guidance on contributing, please read [CONTRIBUTING.md](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md) before opening your pull request.\n",
      "state": "closed",
      "user": "Birdie2024",
      "created_at": "2025-04-02T04:35:00Z",
      "updated_at": "2025-04-03T02:18:43Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32196",
      "labels": []
    }
  ],
  "summary": {
    "pull_requests": 9,
    "issues": 4
  }
}