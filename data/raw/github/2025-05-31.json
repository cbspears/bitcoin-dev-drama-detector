{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:46:58.045928+00:00",
  "date": "2025-05-31",
  "pull_requests": [
    {
      "number": 32654,
      "title": "init: make `-blockmaxweight` startup option debug only",
      "body": "This PR updates `-blockmaxweight` startup option to be debug-only so that it will be hidden from help text.\r\n\r\nThe option is currently unlikely to be used on mainnet, after the addition of the new `blockreservedweight` option. however it can be useful for test and signet network see https://github.com/bitcoin/bitcoin/pull/32654#issuecomment-2925674473\r\n\r\n\r\n\r\n",
      "state": "closed",
      "user": "ismaelsadeeq",
      "created_at": "2025-05-31T15:47:31Z",
      "updated_at": "2025-10-03T15:03:09Z",
      "comments": 14,
      "url": "https://github.com/bitcoin/bitcoin/pull/32654",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32654.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/32654#issuecomment-2962337460), [fjahr](https://github.com/bitcoin/bitcoin/pull/32654#issuecomment-3000301728), [polespinasa](https://github.com/bitcoin/bitcoin/pull/32654#issuecomment-3000887231) |\n| User requested bot ignore | [ajtowns](https://github.com/bitcoin/bitcoin/pull/32654#issuecomment-2925674473) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-05-31T15:47:34Z"
        },
        {
          "user": "ajtowns",
          "body": "Concept NACK. Lowering the block max weight can be a useful thing to do to (eg, signet blocks are limited to 1M weight units in order to help generate fee pressure, and mildly discourage wasteful usage), and having to pretend to pad the coinbase is a very awkward alternative.",
          "created_at": "2025-05-31T19:58:48Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "> Concept NACK. Lowering the block max weight can be a useful thing to do to (eg, signet blocks are limited to 1M weight units in order to help generate fee pressure, and mildly discourage wasteful usage), and having to pretend to pad the coinbase is a very awkward alternative.\r\n\r\n\r\nNot sure what you mean by â€œhaving to pretend to pad the coinbase is a very awkward alternative.â€\r\n\r\nThe reservedweight isnâ€™t just for the coinbase it also applies to the block header and transaction count. It seems reasonable to use the blockreservedweight option to lower the block weight to the desired magnitude.\r\n\r\nClosed for now due to lack of conceptual support. cc @Sjors",
          "created_at": "2025-06-01T09:07:45Z"
        },
        {
          "user": "ajtowns",
          "body": "> The reservedweight isnâ€™t just for the coinbase it also applies to the block header and transaction count. It seems reasonable to use the blockreservedweight option to lower the block weight to the desired magnitude.\r\n\r\nWell, you can't pad the block header or transaction count encoding? :)\r\n\r\nI think it makes sense to combine the two values into one internal option that controls the maximum cumulative tx weight, but I think the options both individually make sense from a user's point of view. (TBH, I think these options should move into the template request, rather than being node startup options)",
          "created_at": "2025-06-01T23:30:27Z"
        },
        {
          "user": "Sjors",
          "body": "I don't think we should recommend `-blockreservedweight` as an alternative to `-blockmaxweight`, as that just adds confusion.\r\n\r\nAt this point `-blockmaxweight` seems useless in production, but it appears to be useful in test networks and our owns tests. We could hide the option under `--help-debug` in order to unclutter the `--help` output. But I wouldn't drop it.\r\n\r\n\r\n",
          "created_at": "2025-06-02T09:39:44Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "> (TBH, I think these options should move into the template request, rather than being node startup options)\r\n\r\nYes, the `BlockCreateOptions` have `block_reserved_weight` variable. From recent @Sjors comment I think there's no need for the `blockmaxweight` option for TP  that's why it was not added. \r\n\r\nIt makes sense to add these options to the template request RPC parameter as well, since test networks and other protocols still rely on the RPC feels natural for this to be runtime option.\r\n\r\nMy only concern with having both is the added complexity of two different ways to cap the block limit. \r\nAlthough unlikely, users could do something like what @pinheadmz mentioned https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907812521 also see thread https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1944136249 this is the motivation for this PR.\r\n\r\n\r\n> We could hide the option under --help-debug in order to unclutter the --help output. But I wouldn't drop it.\r\n\r\nYeah, I'm inclined to agree with this suggestion, since the primary use case is for test networks and our functional tests.\r\n\r\nI can reopen and push this here if it sounds good to @ajtowns \r\n\r\n\r\n> I think it makes sense to combine the two values into one internal option that controls the maximum cumulative tx weight.\r\n\r\nThat sounds like a good idea. Could you expand on that?",
          "created_at": "2025-06-02T12:52:36Z"
        },
        {
          "user": "ajtowns",
          "body": "> > (TBH, I think these options should move into the template request, rather than being node startup options)\r\n> \r\n> Yes, the `BlockCreateOptions` have `block_reserved_weight` variable. From recent @Sjors comment I think there's no need for the `blockmaxweight` option for TP that's why it was not added.\r\n\r\n> > I think it makes sense to combine the two values into one internal option that controls the maximum cumulative tx weight.\r\n> \r\n> That sounds like a good idea. Could you expand on that?\r\n\r\nWe already combine them in `ClampOptions`; could do that `ApplyArgsManOptions` instead, and only have a single field for our internal structures. I guess something like:\r\n\r\n```\r\nblock_reserved_weight = clamp(block_reserved_weight, MAX_BLOCK_WEIGHT - nBlockMaxWeight, MAX_BLOCK_WEIGHT);\r\n```\r\n\r\nwould allow replacing the `nBlockWeight` vs `nMaxBlockWeight` comparisons with `nBlockWeight` vs `MAX_BLOCK_WEIGHT`.\r\n \r\n> It makes sense to add these options to the template request RPC parameter as well, since test networks and other protocols still rely on the RPC feels natural for this to be runtime option.\r\n> \r\n> My only concern with having both is the added complexity of two different ways to cap the block limit. Although unlikely, users could do something like what @pinheadmz mentioned [#31384 (comment)](https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907812521) also see thread [#31384 (comment)](https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1944136249) this is the motivation for this PR.\r\n\r\nI think clamping the values into reasonable ranges and just giving a best effort response to an impossible request is fine; checking and giving an error in response to an RPC request also seems fine.\r\n\r\n> > We could hide the option under --help-debug in order to unclutter the --help output. But I wouldn't drop it.\r\n> \r\n> Yeah, I'm inclined to agree with this suggestion, since the primary use case is for test networks and our functional tests.\r\n\r\nNo particular objection to that.",
          "created_at": "2025-06-04T06:09:39Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "> No particular objection to that.\r\n\r\nDone.",
          "created_at": "2025-06-11T11:09:07Z"
        },
        {
          "user": "Sjors",
          "body": "tACK e017ef3c7eb775e2cf999674df341be56f7ba72d\r\n\r\nAlthough I don't think this is super important, it's nice to declutter the default `--help` output.\r\n\r\nMeta point: it probably would have been better to open a fresh PR with such a scope change.",
          "created_at": "2025-06-11T11:34:16Z"
        },
        {
          "user": "ajtowns",
          "body": "Apparently a thumbs down doesn't make drahtbot remove my now inapplicable review? Maybe a comment will trigger an update? Anyway, I don't have an opinion on whether this should be a debug option or not, so don't intend to give an updated review. The diff looks correct for achieving the goal at least.\r\n\r\nBeing able to adjust the target block weight at getblocktemplate time without having to restart would have been helpful for [clearing out the signet mempool](https://mempool.space/signet/block/00000007de92195f3d7bfdf8fabcd83890a3848465d0f1b6842f8753cf132f90) the other day, fwiw.",
          "created_at": "2025-06-13T02:40:59Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "> Being able to adjust the target block weight at getblocktemplate time without having to restart would have been helpful for [clearing out the signet mempool](https://mempool.space/signet/block/00000007de92195f3d7bfdf8fabcd83890a3848465d0f1b6842f8753cf132f90) the other day, fwiw.\r\n\r\n\r\nApparently `getblocktemplate` is implemented in accordance with specifications of BIPs 22, 23, 9, and 145.\r\n\r\nSo I think this needs a new bip update for the new field I guess, I think @Sjors run into similar blocker while working on https://github.com/bitcoin/bitcoin/pull/27433?  \r\n\r\nIf it worth having a bip update for the `blockmaxweight` field, then we can also add `blockreservedweight`  as well. ",
          "created_at": "2025-06-13T15:09:33Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "cc @fjahr and @polespinasa, friendly ping since you take a look initially.",
          "created_at": "2025-06-24T11:21:35Z"
        },
        {
          "user": "fjahr",
          "body": "ACK e017ef3c7eb775e2cf999674df341be56f7ba72d\r\n\r\nSeems like moving this to debug is in line with what we do with test-only RPC.",
          "created_at": "2025-06-24T12:43:37Z"
        },
        {
          "user": "polespinasa",
          "body": "tACK e017ef3c7eb775e2cf999674df341be56f7ba72d\r\n\r\nNothing to add to the comments already done.",
          "created_at": "2025-06-24T15:09:10Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32653,
      "title": "cmake: Replace f`ile(GLOB ...)` command with an explicit list of `*.ts` files",
      "body": "From CMake [docs](https://cmake.org/cmake/help/latest/command/file.html#glob):\n> We do not recommend using GLOB to collect a list of source files from your source tree. If no CMakeLists.txt file changes when a source is added or removed then the generated build system cannot know when to ask CMake to regenerate.\n\nSo the following case has to be reworked:https://github.com/bitcoin/bitcoin/blob/4b1d48a6866b24f0ed027334c6de642fc848d083/src/qt/CMakeLists.txt#L57-L60",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-05-31T06:30:09Z",
      "updated_at": "2025-08-06T09:47:11Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32653",
      "labels": [
        "GUI",
        "Build system"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "What's the actual blocker to just making this change?",
          "created_at": "2025-06-02T10:01:02Z"
        },
        {
          "user": "hebasto",
          "body": "> What's the actual blocker to just making this change?\n\nThere are no blockers.\n\nHowever, [`bitcoin-maintainer-tools/update-translations.py`](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/main/update-translations.py) should be updated first.",
          "created_at": "2025-06-02T10:37:18Z"
        },
        {
          "user": "laanwj",
          "body": "Concept ACK. Using a glob is kind of fragile here, harder to ensure the build matches git when there's loose `.ts` files around.",
          "created_at": "2025-06-02T11:15:21Z"
        },
        {
          "user": "fanquake",
          "body": "PR open in the maintainer tools repo: https://github.com/bitcoin-core/bitcoin-maintainer-tools/pull/185.",
          "created_at": "2025-07-22T09:59:11Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 1,
    "issues": 1
  }
}