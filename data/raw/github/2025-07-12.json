{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:57:00.145204+00:00",
  "date": "2025-07-12",
  "pull_requests": [
    {
      "number": 32954,
      "title": "cmake: Drop no longer necessary \"cmakeMinimumRequired\" object",
      "body": "The minimum required CMake version is 3.22:https://github.com/bitcoin/bitcoin/blob/6a13a6106e3c1ebe95ba6430184d6260a7b942bd/CMakeLists.txt#L10",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-07-12T13:05:52Z",
      "updated_at": "2025-07-14T10:10:39Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32954",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32954.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/32954#pullrequestreview-3015664087) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-12T13:05:56Z"
        }
      ]
    },
    {
      "number": 32953,
      "title": "[POC] ci: Skip compilation when running static code analysis",
      "body": "This PR is a proof of concept for using a compilation database with static analysis tools such as clang-tidy or IWYU. The idea was suggested in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2935293250:\r\n> Shouldn't this be excluded in the tidy CI task as well?\r\n\r\nAdditionally, this PR makes use of the `codegen` target, following the suggestion in https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2991861497:\r\n> It does seem nice to be able to run clang-tidy on generated files... Maybe more ideally there could be ...  target like `make --build build -t codegen` that only runs code generation steps and doesn't compile the sources.\r\n\r\nA few tasks remain to be addressed. Here's the current TODO list:\r\n- [ ] Implement the `codegen` target for CMake versions older than 3.31.\r\n- [ ] Handle files generated by the `mpgen` tool.\r\n- [ ] Handle files generated by Qt tools.\r\n- [ ] Enable `RUN_CHECK_DEPS=true` elsewhere.\r\n\r\nWhile https://github.com/bitcoin/bitcoin/issues/31965 is still under discussion, it may make sense to move this CI job to GHA to provide quicker feedback.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-07-12T12:51:19Z",
      "updated_at": "2025-11-04T17:37:25Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32953",
      "labels": [
        "Tests",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32953.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30595](https://github.com/bitcoin/bitcoin/pull/30595) (kernel: Introduce C header API by TheCharlatan)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-12T12:51:23Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-11-04T17:37:25Z"
        }
      ]
    },
    {
      "number": 32952,
      "title": "[WIP] tracing: lock contention",
      "body": "Currently there is a macro `DEBUG_LOCKCONTENTION` (see developer-notes.md) to enable logging of contention. The disadvantage of this method is that `bitcoind` needs to be especially compiled with that enabled, and when enabled this quickly produces huge log files, and has a relatively large overhead.\r\n\r\nThis is a rework of PR #25081.\r\n\r\nPreviously the binary(`bitcoind`) shows multiple [ELF](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format) notes which is problematic as it can bloat the binary with redundant metadata, and can also confuse tracing tools(bcc, etc) when using binary path. see [comment](https://github.com/bitcoin/bitcoin/pull/25081#issuecomment-1129370599).\r\n\r\nI am keeping this as DRAFT for now and research more on the better way to handle the duplication of ELF notes, currently we use a check to omit multiple instantiation of TRACEPOINT. After a suitable workaround is found, I will be updating the commits with  bpftrace scripts for lock analysis.\r\n\r\nCC 0xB10C ",
      "state": "closed",
      "user": "yuvicc",
      "created_at": "2025-07-12T08:55:26Z",
      "updated_at": "2025-07-28T04:45:22Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32952",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32952.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-12T08:55:29Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45847110436</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by a commit message formatting error, specifically missing a blank line after the subject line.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-12T09:54:29Z"
        },
        {
          "user": "0xB10C",
          "body": "a bit of feedback since you cc'd me:\r\n- I'm not sure if opening this draft PR at this stage is worth it. There is nothing to experiment with, CI fails, and the feedback from the original PR is still a TODO. I'd recommend you finish your research first, come up with something that works, and then open a PR :)\r\n- You are obviously free to work on this, and I'm sure it's interesting work, but I'm not sure if there is real developer interest for this feature. The original PR died down for a similar reason\r\n\r\nAt the moment this looks like a \"I want to work on this soon, so I open a PR for others to see\" PR and I don't think this adds value for anyone, for now",
          "created_at": "2025-07-14T08:44:02Z"
        },
        {
          "user": "yuvicc",
          "body": "> I'm not sure if opening this draft PR at this stage is worth it. There is nothing to experiment with, CI fails, and the\r\n>  feedback from the original PR is still a TODO. I'd recommend you finish your research first, come up with something that > works, and then open a PR :)\r\n  \r\n@0xB10C I think you're right ‚Äî I opened this draft PR a bit prematurely. I'll take your advice and focus on finishing my research and having something more concrete before opening this PR again.\r\n\r\nClosing this for now. Thanks for taking the time to share your thoughts\r\n\r\n\r\n",
          "created_at": "2025-07-14T09:15:18Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32955,
      "title": "Bitcoin Core v29.0 incorrectly enters IBD mode when only ~600 blocks behind, preventing normal sync",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nHi, I have a full node on a development machine that is not always run. It runs a self compiled none modified v29.0 node as systemd service on an Ubuntu 24.04 system. I had it twice now that the node, after not using it for a few days would go into IBD mode. This time I tried rebuilding the chain state but it would only go as far as the same block it was stuck on before. By running `bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf reconsiderblock 000000000000000000009d1dd2f71099471a348f4074285707b17e0588c41002` it would synced 48 blocks to then get stuck again. Running reconsiderblock again using `bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf reconsiderblock $(bitcoin-cli -conf=/mnt/btc/.bitcoin/bitcoin.conf getbestblockhash)` did not trigger the sync to continue. After restarting with parameters -minimumchainwork=0 -maxtipage=31536000 it is now syncing again normally.\n\n### Expected behaviour\n\nShould sync normally without manual intervention\n\n### Steps to reproduce\n\nTurn of the PC normally and let it fall behind a few days. I cannot say how reproducible this is since it only happened twice so far and it does not happen often that the machine is not used for more than ~12 hours. With shorter times offline it seems not to happen.\n\n### Relevant log output\n\nThis is my startup log from a try where it was in IBD:\n\nJul 12 10:48:31 linuxpc systemd[1]: Starting bitcoind.service - Bitcoin Daemon...\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Bitcoin Core version v29.0 (release build)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using the 'x86_shani(1way,2way)' SHA256 implementation\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using RdSeed as an additional entropy source\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using RdRand as an additional entropy source\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Default data directory /nonexistent/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using data directory /mnt/btc/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file: /mnt/btc/.bitcoin/bitcoin.conf\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: bind=\"0.0.0.0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: checkblocks=\"24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: checklevel=\"0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: dbcache=\"8000\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: listen=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: maxconnections=\"24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: port=\"8333\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcallowip=\"192.168.1.0/24\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcbind=\"0.0.0.0\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcpassword=****\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcport=\"8332\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: rpcuser=****\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: server=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config file arg: txindex=\"1\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Setting file arg: wallet = [\"cormorant\"]\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: conf=\"/mnt/btc/.bitcoin/bitcoin.conf\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: datadir=\"/mnt/btc/.bitcoin\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Command-line arg: startupnotify=\"systemd-notify --ready\"\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using at most 24 automatic connections (65535 file descriptors available)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z scheduler thread start\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Binding RPC on address 0.0.0.0 port 8332\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Starting HTTP server with 16 worker threads\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using wallet directory /mnt/btc/.bitcoin\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Verifying wallet(s)‚Ä¶\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using SQLite Version 3.45.1\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using wallet /mnt/btc/.bitcoin/cormorant\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using /16 prefix for IP bucketing\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading P2P addresses‚Ä¶\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Loaded 67617 addresses from peers.dat  132ms\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading banlist‚Ä¶\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z SetNetworkActive: true\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Cache configuration:\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 2.0 MiB for block index database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 1000.0 MiB for transaction index database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 8.0 MiB for chain state database\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z * Using 6990.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Script verification uses 15 additional threads\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using obfuscation key for blocksdir *.dat files (/mnt/btc/.bitcoin/blocks): 'cb7f2abf983a0e66'\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Opening LevelDB in /mnt/btc/.bitcoin/blocks/index\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Opened LevelDB successfully\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using obfuscation key for /mnt/btc/.bitcoin/blocks/index: 0000000000000000\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using 16 MiB out of 16 MiB requested for signature cache, able to store 524288 elements\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Using 16 MiB out of 16 MiB requested for script execution cache, able to store 524288 elements\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z init message: Loading block index‚Ä¶\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Assuming ancestors of block 00000000000000000001b658dd1120e82e66d2790811f89ede9742ada3ed6d77 have valid signatures.\nJul 12 10:48:31 linuxpc bitcoind[335661]: 2025-07-12T13:48:31Z Setting nMinimumChainWork=0000000000000000000000000000000000000000b1f3b93b65b16d035a82be84\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z LoadBlockIndexDB: last block file = 5021\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=45, size=62616878, heights=904539...904606, time=2025-07-08...2025-07-08)\nJul 12 10:48:34 linuxpc bitcoind[335661]: 2025-07-12T13:48:34Z Checking all blk files are present...\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opening LevelDB in /mnt/btc/.bitcoin/chainstate\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opened LevelDB successfully\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using obfuscation key for /mnt/btc/.bitcoin/chainstate: 922d01a00a52f620\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loaded best chain: hashBestChain=000000000000000000009d1dd2f71099471a348f4074285707b17e0588c41002 height=904558 date=2025-07-08T05:32:02Z progress=0.998569\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Verifying blocks‚Ä¶\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verifying last 24 blocks at level 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 0%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 12%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 20%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 33%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 41%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 50%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 62%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 70%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 83%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification progress: 91%\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Verification: No coin database inconsistencies in last 24 blocks (0 transactions)\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Block index and chainstate loaded\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opening LevelDB in /mnt/btc/.bitcoin/indexes/txindex\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Opened LevelDB successfully\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using obfuscation key for /mnt/btc/.bitcoin/indexes/txindex: 0000000000000000\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using SQLite Version 3.45.1\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Using wallet /mnt/btc/.bitcoin/cormorant\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Loading wallet‚Ä¶\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Wallet file version = 10500, last client version = 290000\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Descriptors: 0, Descriptor Keys: 0 plaintext, 0 encrypted, 0 total.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] Wallet completed loading in               0ms\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] setKeyPool.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] mapWallet.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z [cormorant] m_address_book.size() = 0\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Setting NODE_NETWORK on non-prune mode\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z block tree size = 904607\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z nBestHeight = 904558\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z initload thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Bound to 0.0.0.0:8333\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z torcontrol thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loaded 0 addresses from \"anchors.dat\"\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Loading 14572 mempool transactions from file...\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z 0 block-relay-only anchors will be tried for connections.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Starting network threads‚Ä¶\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z net thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z addcon thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z dnsseed thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Waiting 300 seconds before querying DNS seeds.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z init message: Done loading\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z opencon thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z msghand thread start\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex is enabled at height 904559\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z txindex thread exit\nJul 12 10:48:35 linuxpc systemd[1]: Started bitcoind.service - Bitcoin Daemon.\nJul 12 10:48:35 linuxpc bitcoind[335661]: 2025-07-12T13:48:35Z Progress loading mempool transactions from file: 10% (tried 1458, 13114 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 20% (tried 2915, 11657 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 30% (tried 4372, 10200 remaining)\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z New outbound-full-relay v2 peer connected: version: 70016, blocks=905230, peer=0\nJul 12 10:48:36 linuxpc bitcoind[335661]: 2025-07-12T13:48:36Z Progress loading mempool transactions from file: 40% (tried 5829, 8743 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 50% (tried 7286, 7286 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 60% (tried 8744, 5828 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=1\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 70% (tried 10201, 4371 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 80% (tried 11658, 2914 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Progress loading mempool transactions from file: 90% (tried 13115, 1457 remaining)\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z Imported mempool transactions from file: 14572 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z initload thread exit\nJul 12 10:48:37 linuxpc bitcoind[335661]: 2025-07-12T13:48:37Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=2\nJul 12 10:48:38 linuxpc bitcoind[335661]: 2025-07-12T13:48:38Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=3\nJul 12 10:48:39 linuxpc bitcoind[335661]: 2025-07-12T13:48:39Z New outbound-full-relay v1 peer connected: version: 70016, blocks=905230, peer=4\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv29.0\n\n### Operating system and version\n\nUbuntu 24.04 LTS\n\n### Machine specifications\n\nRyzen 7 5700G, 64GB Ram, NVME Disks, wired network with 550Mbit Optical Fibre Internet with good reliable connection.",
      "state": "open",
      "user": "anhilde",
      "created_at": "2025-07-12T14:30:04Z",
      "updated_at": "2025-08-26T03:05:26Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/issues/32955",
      "labels": [],
      "comment_list": [
        {
          "user": "soosho",
          "body": "up",
          "created_at": "2025-07-13T11:48:51Z"
        },
        {
          "user": "pinheadmz",
          "body": "What's the issue here? What do you consider \"IBD\" and \"normal sync\"?",
          "created_at": "2025-07-13T11:51:38Z"
        },
        {
          "user": "anhilde",
          "body": "It goes into Initial Block download mode although it has completed that before. So after restart I would expect it syncs up to the latest block, but it does not do so. It does not sync at all although it has peers and good connection. Only employing the steps described above makes it sync up to the latest block and then continue processing blocks.",
          "created_at": "2025-07-14T01:22:45Z"
        },
        {
          "user": "sipa",
          "body": "What does the `getchaintips` RPC report when it's stuck?\n\nI think the IBD you observe is a red herring; Bitcoin Core should *always* sync with the chain, whether it's in IBD or not. IBD just modifies a few heuristics to favor bulk processing.",
          "created_at": "2025-07-14T01:27:27Z"
        },
        {
          "user": "anhilde",
          "body": "That makes sense, I will check it, when it gets stuck again. It may take some time until that happens. I have had it happen about twice in 2 months.",
          "created_at": "2025-07-14T02:39:28Z"
        },
        {
          "user": "maflcko",
          "body": "> This is my startup log from a try where it was in IBD:\n\nIt looks like the log is truncated. It would be good to include the next 20 minutes as well, as it is possible you have hit a peer timeout, which can happen normally and is also handled normally (after the timeout), without the need for user intervention.",
          "created_at": "2025-07-14T06:22:43Z"
        },
        {
          "user": "anhilde",
          "body": "ok, I will look out for that the next time. I am pretty sure the node was up a few hours before I noticed that the block number had not changed. What is the normal time until a node must have resumed syncing again? Is there a timeframe where I can be sure something is wrong?",
          "created_at": "2025-07-14T15:49:07Z"
        },
        {
          "user": "sipa",
          "body": "It should literally *always* be syncing. If it doesn't pick up an announced block immediately (within seconds, at the very longest), there is something wrong.",
          "created_at": "2025-07-14T15:59:26Z"
        },
        {
          "user": "maflcko",
          "body": "stalling probably doesn't apply here, if it is less than 600 blocks, but a remote timeout can still be hit: (which is variable, but in your case could be 10 minutes)\n\nhttps://github.com/bitcoin/bitcoin/blob/b53fab1467fde73c40402e2022b25edfff1e4668/src/net_processing.cpp#L5844-L5873\n\n`getpeerinfo` should give an `\"inflight\"` array of blocks for each peer.",
          "created_at": "2025-07-15T07:37:15Z"
        },
        {
          "user": "Aditya-PS-05",
          "body": "I think, the main problem is in the IBD detection logic in ChainstateManager::IsInitialBlockDownload()\n\nhttps://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L2035\n\nhere, the max_tip_age defaults to 24 hours. When a node is offline for \"a few days\" and restarts ~600 blocks behind, the tip is older than 24 hours, incorrectly triggering IBD mode.\n\nI think this can be solved by modifying IBD detection to consider both tip age and block distance.",
          "created_at": "2025-07-19T17:21:59Z"
        },
        {
          "user": "sipa",
          "body": "> here, the max_tip_age defaults to 24 hours. When a node is offline for \\\"a few days\\\" and restarts ~600 blocks behind, the tip is older than 24 hours, incorrectly triggering IBD mode.\n\nIt *should* be in IBD mode in this case.",
          "created_at": "2025-07-19T17:32:10Z"
        },
        {
          "user": "Aditya-PS-05",
          "body": "> > here, the max_tip_age defaults to 24 hours. When a node is offline for \"a few days\" and restarts ~600 blocks behind, the tip is older than 24 hours, incorrectly triggering IBD mode.\n> \n> It _should_ be in IBD mode in this case.\n\nYou're absolutely right that IBD mode should sync.",
          "created_at": "2025-07-19T19:06:44Z"
        },
        {
          "user": "Aditya-PS-05",
          "body": "It should be in sync but I guess it can't due to highly restrictive block download logic. IBD mode's overly restrictive block download logic https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp#L5915\n\nprevents syncing when no preferred download peers are available, causing complete sync failure despite having connected peers.",
          "created_at": "2025-07-19T19:17:57Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 3,
    "issues": 1
  }
}