{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:17:06.044857+00:00",
  "date": "2025-02-13",
  "pull_requests": [
    {
      "number": 31861,
      "title": "RFC: Generated headers with \"\"_hex user-defined literal",
      "body": "This is based on a [suggestion by sipa](https://github.com/bitcoin/bitcoin/pull/28792#discussion_r1934116502) in #28792.\r\n\r\nThe generated header could be a lot smaller when using the \"\"_hex user-defined literal defined in `util/strencodings.h`. Primarily this would be nice for an embedded asmap file but since we already generate these headers it's a conversation that doesn't have to be tied to the asmap PR.\r\n\r\nI am looking for feedback on:\r\n- Do people take issue with including `util/strencodings.h` in the generated headers\r\n- I found that this doesn't compile in my `clang` this doesn't compile without bumping template depth and constexpr steps (I set `-DAPPEND_CXXFLAGS='-ftemplate-depth=100000 -fconstexpr-steps=100000000'` and didn't try to find the cut-off point). We are dealing with data of up to 2MB, primarily the asmap file and the block we have in our test data. Would that be a dealbreaker for people?",
      "state": "closed",
      "user": "fjahr",
      "created_at": "2025-02-13T20:58:58Z",
      "updated_at": "2025-02-13T22:11:10Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/31861",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31861.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
          "created_at": "2025-02-13T20:59:02Z"
        },
        {
          "user": "sipa",
          "body": "Eh, needing `-ftemplate-depth` and `-fconstexpr-steps` sounds pretty terrible. Thank you for investigating, though.",
          "created_at": "2025-02-13T21:59:16Z"
        },
        {
          "user": "fjahr",
          "body": "Alright, closing ‚úÖ ",
          "created_at": "2025-02-13T22:11:09Z"
        }
      ]
    },
    {
      "number": 31860,
      "title": "init: Take lock on blocks directory in BlockManager ctor",
      "body": "This ensures consistent directory locking for users of the kernel library by disallowing mistakenly creating multiple BlockManagers that might write into the same block or undo files.\r\n\r\nThe change here makes `LockDirectory` more strict: It now returns an error even if it is called again on the same directory from the same process. However from the description in https://github.com/bitcoin/bitcoin/pull/12422 , where this feature was introduced, it is not immediately clear what its usage was at the time. Supporting multiple wallets in the same directory is mentioned there, but it is not said why that might be a desirable feature.",
      "state": "open",
      "user": "sedited",
      "created_at": "2025-02-13T20:49:22Z",
      "updated_at": "2025-12-17T21:57:50Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/31860",
      "labels": [
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31860.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/31860#pullrequestreview-2617967456) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33192](https://github.com/bitcoin/bitcoin/pull/33192) (refactor: unify container presence checks by l0rinc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- util::LockDirectory(m_path, \".lock\", false) in src/util/fs_helpers.cpp\n\n\n\n<sup>2025-12-14</sup>\n",
          "created_at": "2025-02-13T20:49:26Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/37256718772</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
          "created_at": "2025-02-14T21:31:58Z"
        },
        {
          "user": "sedited",
          "body": "> I would be a fan of going further and making the BlockManagerOptions ctor take a BlockDirLock (or, as per my comment a DirectoryLock) to allow more granular error feedback, but this is already a step in the right direction regardless.\r\n\r\nI attempted implementing this, but giving the options the lock starts to introduce non-trivial additional semantics to the options: Since the lock needs to be moved from the options to the block manager, the options cannot be re-used. I'm not sure how to implement that and make it clear to the user what is going on.",
          "created_at": "2025-02-17T08:32:50Z"
        },
        {
          "user": "maflcko",
          "body": "> Supporting multiple wallets in the same directory is mentioned there, but it is not said why that might be a desirable feature.\r\n\r\nI haven't tested this, but it may have been required in the past, because BDB wallets may just be files, not folders, so they could all sit in the same walletdir (which could even be the datadir)? If true, this requirement may go away with dropping bdb?",
          "created_at": "2025-02-28T11:49:56Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-12-17T21:57:50Z"
        }
      ]
    },
    {
      "number": 31859,
      "title": "test: Rename send_message to send_without_ping",
      "body": "`send_message` is problematic, because it is easy to forget a `sync_with_ping` (or other `wait_until`), leading to intermittent test failures. (Example: https://github.com/bitcoin/bitcoin/pull/31837#discussion_r1950370246)\r\n\r\nThere are more uses of `send_and_ping` in the codebase than `send_message`, so in most cases `send_and_ping` is needed anyway.\r\n\r\nFor the remaining cases, clearly document that no sync happens by renaming `send_message` to `send_without_ping`.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-02-13T15:44:49Z",
      "updated_at": "2025-03-16T15:22:08Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/31859",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31859.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [instagibbs](https://github.com/bitcoin/bitcoin/pull/31859#issuecomment-2725240640) |\n| Concept ACK | [i-am-yuvi](https://github.com/bitcoin/bitcoin/pull/31859#issuecomment-2661290722) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31829](https://github.com/bitcoin/bitcoin/pull/31829) (p2p: improve TxOrphanage denial of service bounds and increase -maxorphantxs by glozow)\n* [#29664](https://github.com/bitcoin/bitcoin/pull/29664) (p2p: When close to the tip, download blocks in parallel from additional peers to prevent stalling by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
          "created_at": "2025-02-13T15:44:53Z"
        },
        {
          "user": "maflcko",
          "body": "(Looks like there are 4 conflicts, so best to wait until there are 0. Otherwise there will be useless churn)",
          "created_at": "2025-02-13T15:59:45Z"
        },
        {
          "user": "instagibbs",
          "body": "concept ACK, many intermittent test failures end up being this",
          "created_at": "2025-02-14T14:11:35Z"
        },
        {
          "user": "yuvicc",
          "body": "Concept ACK \r\nI agree!",
          "created_at": "2025-02-16T07:10:42Z"
        },
        {
          "user": "maflcko",
          "body": "rebased and taken out of draft. This should be ready for review, as all conflicts are draft pull requests.",
          "created_at": "2025-03-14T12:50:04Z"
        },
        {
          "user": "instagibbs",
          "body": "ACK https://github.com/bitcoin/bitcoin/pull/31859/commits/fa9cf38ab666b50b0d8e82cb17f9e5a8a613547d\r\n\r\nSome one-time churn that should help future-proof testing code a bit.",
          "created_at": "2025-03-14T16:53:56Z"
        }
      ]
    },
    {
      "number": 31858,
      "title": "chore: remove redundant word",
      "body": "Remove redundant word\r\n\r\nFor https://github.com/bitcoin/bitcoin/pull/31855#issuecomment-2656392782\r\n",
      "state": "closed",
      "user": "tianzedavid",
      "created_at": "2025-02-13T14:10:35Z",
      "updated_at": "2025-02-13T14:33:49Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/31858",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31858.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/31858#issuecomment-2656752950), [delta1](https://github.com/bitcoin/bitcoin/pull/31858#pullrequestreview-2615179552) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-13T14:10:40Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 4c62b37fcd23e94ea482efc5974acc2560f57f5f",
          "created_at": "2025-02-13T14:23:49Z"
        }
      ]
    },
    {
      "number": 31857,
      "title": "depends: avoid an unset `CMAKE_OBJDUMP`",
      "body": "Similar to #31840, currently our Linux toolchain file contains:\r\n```bash\r\nset(CMAKE_AR \"aarch64-linux-gnu-ar\")\r\nset(CMAKE_RANLIB \"aarch64-linux-gnu-ranlib\")\r\nset(CMAKE_STRIP \"aarch64-linux-gnu-strip\")\r\nset(CMAKE_OBJCOPY \"aarch64-linux-gnu-objcopy\")\r\nset(CMAKE_OBJDUMP \"\")\r\n```\r\n\r\n`objdump` is currently only used for the macOS cross build, where it's `llvm-objdump`, but we should be consistent in producing a toolchain file that points to actual tools, rather than leaving variables unset.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-02-13T13:07:58Z",
      "updated_at": "2025-02-14T09:49:57Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/31857",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31857.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/31857#pullrequestreview-2615016680), [theuni](https://github.com/bitcoin/bitcoin/pull/31857#pullrequestreview-2616087124) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-13T13:08:03Z"
        }
      ]
    },
    {
      "number": 31855,
      "title": "chore: remove redundant word",
      "body": "Remove redundant word\r\nFor https://github.com/ElementsProject/elements/pull/1407",
      "state": "closed",
      "user": "tianzedavid",
      "created_at": "2025-02-13T10:56:07Z",
      "updated_at": "2025-02-13T14:11:33Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/31855",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31855.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/31855#issuecomment-2656376795), [delta1](https://github.com/bitcoin/bitcoin/pull/31855#issuecomment-2656383645) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
          "created_at": "2025-02-13T10:56:12Z"
        },
        {
          "user": "willcl-ark",
          "body": "Thanks for the contribution, but this should probably be closed.\r\n\r\nIn this project we prefer typos to be fixed organically as that area of the codebase is worked on to avoid diluting precious developer review time. See our https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#pull-request-philosophy",
          "created_at": "2025-02-13T11:09:47Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 033acdf03da4a77d69fb58f7cab97dd1073fb83e",
          "created_at": "2025-02-13T11:57:39Z"
        },
        {
          "user": "delta1",
          "body": "ACK https://github.com/bitcoin/bitcoin/commit/033acdf03da4a77d69fb58f7cab97dd1073fb83e",
          "created_at": "2025-02-13T12:00:22Z"
        },
        {
          "user": "delta1",
          "body": "similar instance on line 94 now that i see it \r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/31855/files#diff-91d294c18d2f63ceb1c9aadff3b3ae046b252b763d69b13f930f7de7b399f440R94 ",
          "created_at": "2025-02-13T12:03:54Z"
        },
        {
          "user": "tianzedavid",
          "body": "> similar instance on line 94 now that i see it\r\n> \r\n> https://github.com/bitcoin/bitcoin/pull/31855/files#diff-91d294c18d2f63ceb1c9aadff3b3ae046b252b763d69b13f930f7de7b399f440R94\r\n\r\nThanks for pointing out.  The new pr https://github.com/bitcoin/bitcoin/pull/31858",
          "created_at": "2025-02-13T14:11:31Z"
        }
      ]
    },
    {
      "number": 31854,
      "title": "net: reduce CAddress usage to CService or CNetAddr",
      "body": "Using `CAddress` when only `CService` or `CNetAddr` is needed is excessive and confusing. Fix those occurrences to use the class they need:\r\n\r\n* `CConnman::CalculateKeyedNetGroup()` needs `CNetAddr`, not `CAddress`, thus change its argument.\r\n\r\n* Both callers of `CConnman::CreateNodeFromAcceptedSocket()` create a dummy `CAddress` from `CService`, so use `CService` instead.\r\n\r\n* `GetBindAddress()` only needs to return `CService`.\r\n\r\n* `CNode::addrBind` only needs to be `CService`.",
      "state": "closed",
      "user": "vasild",
      "created_at": "2025-02-13T10:50:17Z",
      "updated_at": "2025-02-17T18:45:16Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/31854",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31854.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/31854#pullrequestreview-2615228759), [Sjors](https://github.com/bitcoin/bitcoin/pull/31854#issuecomment-2658830814), [laanwj](https://github.com/bitcoin/bitcoin/pull/31854#pullrequestreview-2617470398), [achow101](https://github.com/bitcoin/bitcoin/pull/31854#issuecomment-2660041953) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
          "created_at": "2025-02-13T10:50:22Z"
        },
        {
          "user": "vasild",
          "body": "`74f42a5920...cd4bfaee10`: address https://github.com/bitcoin/bitcoin/pull/31854#discussion_r1954320762",
          "created_at": "2025-02-13T11:39:37Z"
        },
        {
          "user": "laanwj",
          "body": "Concept ACK",
          "created_at": "2025-02-13T12:57:23Z"
        },
        {
          "user": "Sjors",
          "body": "ACK cd4bfaee10",
          "created_at": "2025-02-14T10:06:34Z"
        },
        {
          "user": "achow101",
          "body": "ACK cd4bfaee103591f212b88afd17969c16c1056eb6",
          "created_at": "2025-02-14T18:49:16Z"
        },
        {
          "user": "jonatack",
          "body": "Post-merge ACK cd4bfaee103591f212b88afd17969c16c1056eb6. Good idea.",
          "created_at": "2025-02-14T19:00:07Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 31856,
      "title": "doc/zmq: Note about endianness does not match reality",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nPR #23471 added a note to [ZMQ's documentation page](https://github.com/bitcoin/bitcoin/blob/master/doc/zmq.md) saying that:\n\n> [‚Ä¶] 32-byte hashes are in Little Endian and not in the Big Endian format that the RPC interface and block explorers use to display transaction and block hashes.\n\nAlso:\n\n> `| hashtx | <32-byte transaction hash in Little Endian> | <uint32 sequence number in Little Endian>`\n> `| hashblock | <32-byte block hash in Little Endian> | <uint32 sequence number in Little Endian>`\n\nHowever, unless I am missing something, transaction and block hashes in both ZMQ and RPC appear in the same, reversed byte order (big endian).\n\nIf this is confirmed, I would like to prepare PR for the documentation.\n\n### Expected behaviour\n\nDocumentation would not contain references to hashes being in Little Endian.\n\n### Steps to reproduce\n\nStart regtest with ZMQ hashblock:\n\n```sh\nbitcoind -regtest -datadir=zmqtest -server --daemon -zmqpubhashblock=tcp://0.0.0.0:43441\nbitcoin-cli -regtest -datadir=zmqtest createwallet \"\"\n```\n\nRun independent ZMQ client in Python:\n\n```python\n  import zmq\n  import binascii\n\n  context = zmq.Context()\n  socket = context.socket(zmq.SUB)\n\n  socket.connect(\"tcp://localhost:43441\")\n  socket.setsockopt_string(zmq.SUBSCRIBE, \"hashblock\")\n\n  topic = socket.recv()\n  data = socket.recv()\n  seq = socket.recv()\n\n  print(f\"Topic: {topic}\")\n  print(f\"Data:  {binascii.hexlify(data)}\")\n  print(f\"Seq:   {binascii.hexlify(seq)}\")\n```\n\nGenerate block:\n\n```sh\nbitcoin-cli -regtest -datadir=zmqtest -generate 1\n```\n\n```json\n{\n  \"address\": \"bcrt1qpjy0a3ply66pwpj6mp8sn36aslwr3gvdq727v6\",\n  \"blocks\": [\n    \"4f36a8e4e1ff6ebcc13f6bec62841e44a8b4c281f1f1346f148987735fb72e0e\"\n  ]\n}\n```\n\nOutput of ZMQ client:\n\n```\nTopic: b'hashblock'\nData:  b'4f36a8e4e1ff6ebcc13f6bec62841e44a8b4c281f1f1346f148987735fb72e0e'\nSeq:   b'00000000'\n```\n\nCalculate hash of the block header to crosscheck:\n\n```sh\n  header=$(bitcoin-cli -regtest -datadir=zmqtest getblockheader 4f36a8e4e1ff6ebcc13f6bec62841e44a8b4c281f1f1346f148987735fb72e0e false)\n  echo $header | xxd -r -p | sha256sum | xxd -r -p | sha256sum\n```\n\n```\n0e2eb75f738789146f34f1f181c2b4a8441e8462ec6b3fc1bc6effe1e4a8364f  -\n```\n\n`0e2eb75f738789146f34f1f181c2b4a8441e8462ec6b3fc1bc6effe1e4a8364f` ‚Üê hash in natural order (output of SHA256; little endian)\n`4f36a8e4e1ff6ebcc13f6bec62841e44a8b4c281f1f1346f148987735fb72e0e` ‚Üê hash in reversed order (ZMQ, RPC; big endian)\n\n---\n\nI assume hashes are printed by `GetHex()`. The bytes are printed in reversed order:\n\nhttps://github.com/bitcoin/bitcoin/blob/55cf39e4c54da6639a8f1f7c813c2909454cada1/src/uint256.cpp#L10-L18\n\nTo ZMQ, they are also sent in reversed order:\n\nhttps://github.com/bitcoin/bitcoin/blob/55cf39e4c54da6639a8f1f7c813c2909454cada1/src/zmq/zmqpublishnotifier.cpp#L220-L229\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\n28.0.0\n\n### Operating system and version\n\nArch Linux, 6.12\n\n### Machine specifications\n\n_No response_",
      "state": "closed",
      "user": "jirijakes",
      "created_at": "2025-02-13T12:15:49Z",
      "updated_at": "2025-04-16T23:26:20Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/31856",
      "labels": [
        "Docs",
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "l0rinc",
          "body": "For reference, @hodlinator fixed a few of these in https://github.com/bitcoin/bitcoin/pull/30526 and @ryanofsky a few more in https://github.com/bitcoin/bitcoin/pull/31596.",
          "created_at": "2025-02-13T13:09:38Z"
        },
        {
          "user": "ryanofsky",
          "body": "Agree with bug report and earlier comment. Relevant ZMQ code is [Lines 220 to 240 in zmqpublishnotifier.cpp](https://github.com/bitcoin/bitcoin/blob/c242fa5be358150d83c2446896b6f4c45c6365e9/src/zmq/zmqpublishnotifier.cpp#L220-L240) and the ZMQ documentation cited is pretty wrong or at least misleading:\n\n> [‚Ä¶] 32-byte hashes are in Little Endian and not in the Big Endian format that the RPC interface and block explorers use to display transaction and block hashes. [...]\n>\n> `| hashtx | <32-byte transaction hash in Little Endian> | <uint32 sequence number in Little Endian>`\n> `| hashblock | <32-byte block hash in Little Endian> | <uint32 sequence number in Little Endian>`\n\nThe most straightforward way to think about hashtx and hashblock values is as byte arrays, not as numbers. And ZMQ and RPC both interface return the same reversed byte arrays (with bytes produced by the original hash functions in reverse order). So current ZMQ documentation is wrong to describe ZMQ and RPC interfaces as being inconsistent.\n\nSince the RPC interface returns the byte array as strings in hex format, you can interpret these strings as hexadecimal numbers, and these are the same numbers you would get if you interpreted output of the hash functions as little-endian numbers. So current ZMQ documentation is mostly wrong describe RPC interface as using big endian format, though if you squint maybe you could say it is right because the RPC interface is sending the numbers in a big endian byte representation that it previously happened to decode from a little-endian byte representation.\n\nThe ZMQ documentation is also maybe somewhat right to describe its own output as little-endian, because similar to the RPC if you just display the ZMQ output as hex, you will see numbers that match little a endian interpretation of hash function outputs. But it is also misleading because actual bytes produced by ZMQ are definitely a big-endian not a little-endian representation of those numbers.\n\nBest way to fix this would be to avoid using terms little endian and big endian at all and just say ZMQ outputs bytes of tx and block hashes, with bytes reversed, which is the same way they are shown in the RPC interface.",
          "created_at": "2025-02-13T15:44:05Z"
        },
        {
          "user": "jirijakes",
          "body": "> current ZMQ documentation is mostly wrong describe RPC interface as using big endian format\n\nI don't know where the notion of Big/Little Endian of hashes comes from but I have seen the RPC-style (reversed by order) to be mostly described as Big Endian, for example [learnmebitcoin](https://learnmeabitcoin.com/technical/general/byte-order/#reverse-byte-order) uses it. Anyway, it is apparently very misleading.\n\n> Best way to fix this would be to avoid using terms little endian and big endian at all \n\nYes, I took this approach in #31862.\n\nThanks!",
          "created_at": "2025-02-14T07:36:03Z"
        },
        {
          "user": "laanwj",
          "body": "> The most straightforward way to think about hashtx and hashblock values is as byte arrays, not as numbers.\n\nYes, we should never use the word 'endian' in the context of hashes in our documentation. They're just byte blobs. Which can be reversed or in original order.\n\nIt's mistaken terminology that Satoshi introduced back in the day and unfortunately still sticks around.",
          "created_at": "2025-02-14T09:08:08Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 7,
    "issues": 1
  }
}