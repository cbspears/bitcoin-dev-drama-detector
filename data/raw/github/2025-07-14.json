{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:57:40.137110+00:00",
  "date": "2025-07-14",
  "pull_requests": [
    {
      "number": 32974,
      "title": "test: Improve getbalance minconf behavior documentation and testing",
      "body": "Enhances the wallet_balance.py test to document better and test the current incorrect behaviour of getbalance with minconf parameter.\r\n\r\nThe getbalance RPC with minconf incorrectly excludes coins that have been spent, even when those coins had sufficient confirmations when they existed. This commit:\r\n\r\n- Adds detailed comments explaining current vs expected behaviour\r\n- Creates a comprehensive test method that demonstrates the issue\r\n- Documents what the correct behaviour should be when the bug is fixed\r\n- Provides clear test cases for future developers working on the fix\r\n\r\nThe test shows that getbalance(minconf=N) should consider all coins that had N or more confirmations when they existed, regardless of whether they were later spent.\r\n",
      "state": "closed",
      "user": "fgarau",
      "created_at": "2025-07-14T22:20:25Z",
      "updated_at": "2025-07-15T06:13:06Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32974",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32974.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T22:20:31Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45965026864</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by lint errors related to trailing whitespace, indicating code style issues rather than build or test failures.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-14T22:58:37Z"
        },
        {
          "user": "luke-jr",
          "body": "Spent coins should never be included in the balance (though the change should be)\r\n\r\nHowever, getbalance has basically been completely broken in Core since 2018. My last attempt to fix it \"properly\" was here: https://github.com/bitcoin/bitcoin/pull/14602 (but there were still bugs)\r\n\r\nKnots has a mostly-functional getbalance by reverting the 2018 changes: https://github.com/luke-jr/bitcoin/tree/bugfix_rpc_getbalance_hacky\r\n\r\nHappy to discuss at more length if you're up for fixing getbalance.",
          "created_at": "2025-07-15T03:36:14Z"
        },
        {
          "user": "l0rinc",
          "body": "> Spent coins should never be included in the balance\r\n\r\nSpentness checks are still problematic all over coins caching as well - not sure it helps, but @andrewtoth attempted a cleanup in https://github.com/bitcoin/bitcoin/pull/30673",
          "created_at": "2025-07-15T03:59:56Z"
        },
        {
          "user": "fgarau",
          "body": "Closing to make additional improvements before resubmission",
          "created_at": "2025-07-15T06:13:05Z"
        }
      ]
    },
    {
      "number": 32973,
      "title": "validation: docs and cleanups for MemPoolAccept coins views",
      "body": "Deletes `test_mid_package_eviction` that is brittle and already covered in other places. It was introduced in #28251 addressing 2 issues: (1) calling `LimitMempoolSize()` in the middle of package validation and (2) not updating coins view cache when the mempool contents change, leading to \"disappearing coins.\"\r\n\r\n(1) If you let `AcceptSingleTransaction` call `LimitMempoolSize` in the middle of package validation, you should get a failure in `test_mid_package_eviction_success` (the package is rejected):\r\n```\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex f2f6098e214..4bd6f059849 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -1485,7 +1485,7 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\r\n     FinalizeSubpackage(args);\r\n \r\n     // Limit the mempool, if appropriate.\r\n-    if (!args.m_package_submission && !args.m_bypass_limits) {\r\n+    if (!args.m_bypass_limits) {\r\n         LimitMempoolSize(m_pool, m_active_chainstate.CoinsTip());\r\n         // If mempool contents change, then the m_view cache is dirty. Given this isn't a package\r\n         // submission, we won't be using the cache anymore, but clear it anyway for clarity.\r\n```\r\nMempool modifications have a pretty narrow interface since #31122 and `TrimToSize()` cannot be called while there is an outstanding mempool changeset. So I think there is a low likelihood of accidentally reintroducing this problem and not immediately hitting e.g. a fuzzer crash on this line https://github.com/bitcoin/bitcoin/blob/b53fab1467fde73c40402e2022b25edfff1e4668/src/txmempool.cpp#L1143\r\n\r\n(2) If you remove the `CleanupTemporaryCoins()` call from `ClearSubPackageState()` you should get a failure from `test_mid_package_replacement`:\r\n```\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex f2f6098e214..01b904b69ef 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -779,7 +779,7 @@ private:\r\n         m_subpackage = SubPackageState{};\r\n \r\n         // And clean coins while at it\r\n-        CleanupTemporaryCoins();\r\n+        // CleanupTemporaryCoins();\r\n     }\r\n };\r\n```\r\nI also added/cleaned up the documentation about coins views to hopefully make it extremely clear when people should `CleanupTemporaryCoins`.",
      "state": "closed",
      "user": "glozow",
      "created_at": "2025-07-14T19:39:31Z",
      "updated_at": "2025-07-29T09:01:08Z",
      "comments": 8,
      "url": "https://github.com/bitcoin/bitcoin/pull/32973",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32973.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [instagibbs](https://github.com/bitcoin/bitcoin/pull/32973#issuecomment-3083835263), [marcofleon](https://github.com/bitcoin/bitcoin/pull/32973#pullrequestreview-3029414103), [sdaftuar](https://github.com/bitcoin/bitcoin/pull/32973#issuecomment-3129561181) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T19:39:35Z"
        },
        {
          "user": "instagibbs",
          "body": "in op and commit message: `test_mid_package_evaluation` doesn't exist, it's named `test_mid_package_eviction`\r\n\r\nThe bull case for keeping `test_mid_package_replacement` is that it involves an RBF, not a mempool overflow, right? The comment in that test seems slightly erroneous, mentioning `replaced_tx` needs to be at the bottom of the mempool, when I think it just has to be low feerate enough to be RBF'd?",
          "created_at": "2025-07-15T21:29:52Z"
        },
        {
          "user": "glozow",
          "body": "> op and commit message: `test_mid_package_evaluation` doesn't exist, it's named `test_mid_package_eviction`\r\n\r\nFixed\r\n\r\n> The bull case for keeping `test_mid_package_replacement` is that it involves an RBF, not a mempool overflow, right? The comment in that test seems slightly erroneous, mentioning `replaced_tx` needs to be at the bottom of the mempool, when I think it just has to be low feerate enough to be RBF'd?\r\n\r\nThanks, yeah, I think it had an incorrect copy-paste from the other test. I think this one is good to keep for when we're working on generalized package validation.",
          "created_at": "2025-07-16T17:31:17Z"
        },
        {
          "user": "instagibbs",
          "body": "reACK https://github.com/bitcoin/bitcoin/pull/32973/commits/b6d4688f77df9e31fd64e2be300f55bb8e944bd0",
          "created_at": "2025-07-17T12:12:36Z"
        },
        {
          "user": "glozow",
          "body": ">  Fwiw if I add LimitMempoolSize() right before ClearSubPackageState() in AcceptSubPackage there is an almost immediate crash.\r\n\r\nThat's the kind of scenario I was thinking - somehow reintroducing a trim somewhere mid-subpackage.",
          "created_at": "2025-07-17T13:02:17Z"
        },
        {
          "user": "instagibbs",
          "body": "@marcofleon \r\n\r\nThis seed:\r\nALoAAAAAAAABAAAAAAAAAAAAAAAAAZNpogAyAAAAAAAAgAAAAAAAAAAAAAEAAAAAAAAAAAB5AAAA\r\nAAAhAQAAAAEAAAAAAAAAAAAAAAABk2miADIAAAAAAACAAAAAAAAAAAAAAQAAAAAAAAAAAHkAAAAA\r\nACEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAGTaaIAMgAAAAAAAAEAAAAAAAAAAAABAAAA\r\nAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAn////AZNpogAyAAAAAAAAAQAA\r\nAAAAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAACNAAEAAAAAAAAAAAAAAAAA\r\nAAAAAQAAAAAAAAAAAAAAAAAAAAAAAABkYXRhZGlyYXRhAAAA\r\n\r\nShould cause failure if you apply this patch:\r\n\r\n```\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex f2f6098e21..b1daee1f28 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -780,5 +780,5 @@ private:\r\n \r\n         // And clean coins while at it\r\n-        CleanupTemporaryCoins();\r\n+        //CleanupTemporaryCoins();\r\n     }\r\n };\r\n@@ -1486,9 +1486,9 @@ MempoolAcceptResult MemPoolAccept::AcceptSingleTransaction(const CTransactionRef\r\n \r\n     // Limit the mempool, if appropriate.\r\n-    if (!args.m_package_submission && !args.m_bypass_limits) {\r\n+    if (!args.m_bypass_limits) {\r\n         LimitMempoolSize(m_pool, m_active_chainstate.CoinsTip());\r\n         // If mempool contents change, then the m_view cache is dirty. Given this isn't a package\r\n         // submission, we won't be using the cache anymore, but clear it anyway for clarity.\r\n-        CleanupTemporaryCoins();\r\n+        //CleanupTemporaryCoins();\r\n \r\n         if (!m_pool.exists(ws.m_hash)) {\r\n```\r\n\r\nNo coin cleanup, and lets it call `LimitMempoolSize` in single tx subpackage case.",
          "created_at": "2025-07-17T13:55:31Z"
        },
        {
          "user": "marcofleon",
          "body": "Thanks, was able to reproduce.\r\n\r\n```c\r\nfuzz: ../../src/validation.cpp:428: bool CheckInputsFromMempoolAndCache(const CTransaction &, TxValidationState &, const CCoinsViewCache &, const CTxMemPool &, unsigned int, PrecomputedTransactionData &, CCoinsViewCache &, ValidationCache &): Assertion `!coinFromUTXOSet.IsSpent()' failed.\r\n```\r\n\r\nNow the comment for `m_view` in 98ba2b1db2eb81e08b550ba0d5069a9289f30e13 makes more sense to me as well.",
          "created_at": "2025-07-18T15:00:03Z"
        },
        {
          "user": "sdaftuar",
          "body": "utACK b6d4688f77df9e31fd64e2be300f55bb8e944bd0",
          "created_at": "2025-07-28T20:27:52Z"
        }
      ]
    },
    {
      "number": 32972,
      "title": "rpc,net: Add getpeerbyid and listpeersbyids RPCs",
      "body": "Add fast peer lookup by NodeId using `m_node_id_map` in CConnman.\r\n\r\nAdds `GetNodeStatsById` and `GetNodeStatsByIds` in `net.{cpp,h}` for efficient internal access.\r\n\r\nIntroduces two new RPCs:\r\n- `getpeerbyid(id)`: returns info for a single connected peer\r\n- `listpeersbyids([ids], strict=false)`: batch query with optional strict mode\r\n\r\nIncludes functional tests covering expected behavior and edge cases.\r\n\r\nUseful for tools that track peers by ID without scanning the full list, or for quickly looking up peer IDs seen in debug logs.\r\n",
      "state": "closed",
      "user": "waketraindev",
      "created_at": "2025-07-14T16:40:45Z",
      "updated_at": "2025-09-25T09:44:53Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32972",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32972.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32741](https://github.com/bitcoin/bitcoin/pull/32741) (rpc: add optional nodeid param to filter getpeerinfo by waketraindev)\n* [#32394](https://github.com/bitcoin/bitcoin/pull/32394) (net: make m_nodes_mutex non-recursive by vasild)\n* [#32278](https://github.com/bitcoin/bitcoin/pull/32278) (doc: better document NetEventsInterface and the deletion of \"CNode\"s by vasild)\n* [#32015](https://github.com/bitcoin/bitcoin/pull/32015) (net: replace manual reference counting of CNode with shared_ptr by vasild)\n* [#31672](https://github.com/bitcoin/bitcoin/pull/31672) (rpc: add cpu_load to getpeerinfo by vasild)\n* [#30988](https://github.com/bitcoin/bitcoin/pull/30988) (Split CConnman by vasild)\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T16:40:49Z"
        },
        {
          "user": "waketraindev",
          "body": "> Is anything here not already provided by getpeerinfo?\r\n\r\nyes, the option to retrieve result by peer id.",
          "created_at": "2025-07-14T18:37:55Z"
        },
        {
          "user": "waketraindev",
          "body": "> > yes, the option to retrieve result by peer id.\r\n> \r\n> Isn't this what your other PR #32741 suggests? Is this meant to be an alternative to that?\r\n\r\nYes, this is essentially a more complete version of that, incorporating feedback and suggestions from other contributors. It serves as an alternative approach to PR #32741.",
          "created_at": "2025-07-14T21:30:38Z"
        },
        {
          "user": "fanquake",
          "body": "Yea, please combine these changes into #32741.",
          "created_at": "2025-07-15T08:57:09Z"
        },
        {
          "user": "mzumsande",
          "body": "I also prefer the current approach from #32741 to this -  while users can always just filter `getpeerinfo` output with jq or other tools I can see how that is inconvenient for some - but  introducing multiple new RPCs for this seems overkill to me.",
          "created_at": "2025-07-15T14:50:42Z"
        }
      ]
    },
    {
      "number": 32971,
      "title": "chore: rename misspelling variable",
      "body": "### Description\r\n\r\nThis pull request refactors the variable name from `shuffled_indeces` to `shuffled_indices` for improved code readability and consistency with standard naming conventions.\r\n\r\n### Impact\r\n\r\n- No changes to logic or functionality.\r\n- No new tests are required, as this is a non-functional refactor.\r\n- This change improves the developer experience by making the codebase easier to read and maintain.",
      "state": "closed",
      "user": "crypomen9",
      "created_at": "2025-07-14T15:38:12Z",
      "updated_at": "2025-07-14T18:29:39Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32971",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32971.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T15:38:16Z"
        },
        {
          "user": "glozow",
          "body": "Thanks for your interest in contributing! However, as we have hundreds of pull requests, I am closing this to focus review on the others. (See [contributing guidelines on refactoring](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#refactoring)).",
          "created_at": "2025-07-14T18:29:38Z"
        }
      ]
    },
    {
      "number": 32970,
      "title": "ci: Enable more shellcheck",
      "body": "shellcheck is often the main \"reviewer\" of CI code written in Bash, so it seems odd to disable it by putting commands into `bash -c \"cmd...\"`.\r\n\r\nFix that by removing `bash -c`, where it isn't intended and where the removal is easily possible.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-07-14T12:44:47Z",
      "updated_at": "2025-09-26T09:57:25Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32970",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32970.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32970#pullrequestreview-3030212877) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T12:44:51Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45926063054</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by errors in shell script linting, specifically from shellcheck warnings that caused the lint check to fail.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-14T14:25:18Z"
        }
      ]
    },
    {
      "number": 32969,
      "title": "[28.x] Backports",
      "body": "Backports:\r\n* #32943",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-07-14T12:41:03Z",
      "updated_at": "2025-07-23T15:54:25Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32969",
      "labels": [
        "Backport",
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32969.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [marcofleon](https://github.com/bitcoin/bitcoin/pull/32969#pullrequestreview-3047900115) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T12:41:08Z"
        }
      ]
    },
    {
      "number": 32968,
      "title": "test: fix intermittent failure in rpc_invalidateblock.py",
      "body": "resolves #32965.\r\n\r\nnode1 (with 24 blocks) causes node0 (with 6 blocks + 1 extra header) to silently reorg. so move the subtest to a point before the 20 blocks are generated so that node1's state doesn't cause node0 to silently reorg.",
      "state": "closed",
      "user": "stratospher",
      "created_at": "2025-07-14T09:27:48Z",
      "updated_at": "2025-07-15T10:35:52Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32968",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32968.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32968#issuecomment-3069863625), [mzumsande](https://github.com/bitcoin/bitcoin/pull/32968#pullrequestreview-3016812338) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- ‚ÄúSince header doesn't have block data, it can't be chain tip‚Äù -> ‚ÄúSince the header doesn't have block data, it can't be the chain tip‚Äù [missing definite articles]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-07-14T09:27:52Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 4aa0e4d9ce6283665b1aac185da67543b8df606e\r\n\r\nAlso, left a nit/questsion ",
          "created_at": "2025-07-14T09:53:38Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 28416f367a5d720d89214aa8ef94013caa1d1a40\r\n\r\nCan be tested via by moving the lines after `        self.nodes[0].reconsiderblock(block.hash)` down again and observing a failure.",
          "created_at": "2025-07-14T14:40:38Z"
        }
      ]
    },
    {
      "number": 32967,
      "title": "log: [refactor] Use info level for init logs",
      "body": "Many of the normal, and expected init logs, which are run once after startup use the deprecated alias of `LogInfo`.\r\n\r\nFix that by using `LogInfo` directly, which is a refactor, except for a few log lines that also have `__func__` removed.\r\n\r\n(Also remove the unused trailing `\\n` char while touching those logs)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-07-14T09:16:19Z",
      "updated_at": "2025-07-26T00:32:14Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32967",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32967.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/32967#issuecomment-3117179644), [fanquake](https://github.com/bitcoin/bitcoin/pull/32967#issuecomment-3117355305) |\n| Stale ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32967#pullrequestreview-3052616273) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33026](https://github.com/bitcoin/bitcoin/pull/33026) (test, refactor: Embedded ASmap selected preparatory work by fjahr)\n* [#32748](https://github.com/bitcoin/bitcoin/pull/32748) (fees: prevent redundant estimates flushes by ismaelsadeeq)\n* [#31644](https://github.com/bitcoin/bitcoin/pull/31644) (leveldb: show non-default options during init by l0rinc)\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#29640](https://github.com/bitcoin/bitcoin/pull/29640) (Fix tiebreak when loading blocks from disk (and add tests for comparing chain ties) by sr-gi)\n* [#28792](https://github.com/bitcoin/bitcoin/pull/28792) (Embed default ASMap as binary dump header file by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- LogInfo(\"Setting NODE_NETWORK on non-prune mode\") -> LogInfo(\"Setting NODE_NETWORK in non-prune mode\") [‚Äúin non-prune mode‚Äù is the correct preposition]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-07-14T09:16:24Z"
        },
        {
          "user": "fanquake",
          "body": "> I personally would prefer doing every single LogPrintf -> LogInfo inlining here in a scripted diff \r\n\r\n#29641.",
          "created_at": "2025-07-20T17:08:43Z"
        },
        {
          "user": "l0rinc",
          "body": "> #29641\r\n\r\nYes, I'm aware - was there a discussion that I missed for why we're not doing that instead?",
          "created_at": "2025-07-20T17:32:59Z"
        },
        {
          "user": "stickies-v",
          "body": "re-ACK face8123fdc10549676c6679ee3225c178a7f30c",
          "created_at": "2025-07-25T10:09:15Z"
        },
        {
          "user": "fanquake",
          "body": "ACK face8123fdc10549676c6679ee3225c178a7f30c",
          "created_at": "2025-07-25T10:59:13Z"
        },
        {
          "user": "l0rinc",
          "body": "Post-merge ACK\r\n\r\nIt seems the post-merge build was partially cancelled for some reason, but the follow-ups passed fully üëç ",
          "created_at": "2025-07-26T00:32:14Z"
        }
      ]
    },
    {
      "number": 32966,
      "title": "Silent Payments: Receiving",
      "body": "This PR is part of integrating silent payments into Bitcoin Core. Status and tracking for the project is managed in https://github.com/bitcoin/bitcoin/issues/28536\r\nThis PR is based on https://github.com/bitcoin/bitcoin/pull/28201 and will remain in draft until https://github.com/bitcoin/bitcoin/pull/28201 is merged.\r\n\r\nThis PR:\r\n- Adds a Silent Payments descriptor implemenation\r\n- Adds a `SilentPaymentsDescriptorScriptPubKeyMan` Impl that is a subclass of `DescriptorScriptPubKeyMan`\r\n- Implements Silent Payments scanning for the wallet\r\n- Updates sending logic to use `silent-payments` destination for change when sending to `silent-payments` destination\r\n- Adds unit and functional tests for silent payments-related functionality\r\n\r\n**Follow-ups**\r\n- Silent Payments Label functionality is incomplete in this PR and will be added as a follow-up PR.\r\n",
      "state": "open",
      "user": "Eunovo",
      "created_at": "2025-07-14T08:30:35Z",
      "updated_at": "2025-12-16T15:36:02Z",
      "comments": 25,
      "url": "https://github.com/bitcoin/bitcoin/pull/32966",
      "labels": [
        "Needs rebase"
      ]
    },
    {
      "number": 32964,
      "title": "descriptor: don't underestimate the size of a Taproot spend (instead, overestimate it)",
      "body": "This PR revives #26573 since it has some ACKs and is labeled \"Up for grabs\". \r\nI just added a comment explaining the behavior change.",
      "state": "closed",
      "user": "w0xlt",
      "created_at": "2025-07-14T06:55:12Z",
      "updated_at": "2025-10-21T10:11:01Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32964",
      "labels": [
        "Descriptors"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32964.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32857](https://github.com/bitcoin/bitcoin/pull/32857) (wallet: allow skipping script paths by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T06:55:17Z"
        },
        {
          "user": "Sjors",
          "body": "I don't think we should be overpaying by default, for two reasons:\r\n1. it's expensive\r\n2. it reveals the presence of script paths\r\n\r\nAn intermediate solution could be that we never sign script paths by default, i.e. make `keypath_only` the default after #32857. Only when the user opts in to script path spending do we apply this solution of using the worst case fee.\r\n\r\nThat seems better than the current \"solution\" of manually picking a higher fee rate for script path spends, while not impacting the default case of a working key path. It would reveal the presence of potentially longer script paths though.",
          "created_at": "2025-07-14T11:31:30Z"
        },
        {
          "user": "w0xlt",
          "body": "Closing in favor of https://github.com/bitcoin/bitcoin/pull/32857.",
          "created_at": "2025-10-21T05:08:33Z"
        }
      ]
    },
    {
      "number": 32963,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Sameera1994",
      "created_at": "2025-07-14T06:21:36Z",
      "updated_at": "2025-07-15T17:19:04Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32963",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32963.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T06:21:40Z"
        },
        {
          "user": "maflcko",
          "body": "Thanks, but there is little point in touching files only for touching the copyright years, and touching them manually. This should be done with a script.\r\n\r\nAlso, you can't include merge commits.\r\n\r\nI'll close this for now. Future contributions are welcome, but please familiarize yourself with the contribution guideline and dev docs.",
          "created_at": "2025-07-14T06:25:43Z"
        }
      ]
    },
    {
      "number": 32962,
      "title": ".",
      "body": "<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "Sameera1994",
      "created_at": "2025-07-14T04:10:50Z",
      "updated_at": "2025-07-15T17:19:10Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32962",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32962.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-14T04:10:54Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32965,
      "title": "Intermittent failure in rpc_invalidateblock.py                                        assert_equal(self.nodes[0].getblockchaininfo()['headers'], 7) [                                   AssertionError: not(24 == 7)]",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/16238294537/job/45851271663?pr=32954#step:13:3105\n\n```\n test  2025-07-12T13:43:20.090739Z TestFramework (ERROR): Assertion failed \n                                   Traceback (most recent call last):\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\test_framework.py\", line 195, in main\n                                       self.run_test()\n                                       ~~~~~~~~~~~~~^^\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\rpc_invalidateblock.py\", line 137, in run_test\n                                       assert_equal(self.nodes[0].getblockchaininfo()['headers'], 7)\n                                       ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\util.py\", line 78, in assert_equal\n                                       raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\n                                   AssertionError: not(24 == 7)",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-07-14T07:03:57Z",
      "updated_at": "2025-07-15T10:35:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/32965",
      "labels": [
        "CI failed"
      ],
      "comment_list": [
        {
          "user": "stratospher",
          "body": "> 2025-07-12T13:43:21.8573662Z  node1 2025-07-12T13:43:20.090914Z [msghand] [D:\\a\\bitcoin\\bitcoin\\src\\net.cpp:3870] [void __cdecl CConnman::PushMessage(class CNode *,struct CSerializedNetMsg &&)] [net] sending block (260 bytes) peer=0 \n2025-07-12T13:43:21.8574419Z  node0 2025-07-12T13:43:20.091379Z [msghand] [D:\\a\\bitcoin\\bitcoin\\src\\net_processing.cpp:5939] [bool __cdecl `anonymous-namespace'::PeerManagerImpl::SendMessages(class CNode *)] [net] Requesting block 72876656a1468aa0784c5624a377651fb3e5055671d7ced16833ed1d7cbca044 (21) peer=0 \n\noh node1 (which has 24 blocks) is causing node0 (which has 6 blocks + 7 headers) to silently reorg. disconnecting node0 and node1 so that they don't exchange blocks should fix this. will open a PR.",
          "created_at": "2025-07-14T09:21:02Z"
        },
        {
          "user": "stratospher",
          "body": "        # Reconsider the header\n        self.nodes[0].reconsiderblock(block.hash)\n        import time; time.sleep(200)\n        # Since header doesn't have block data, it can't be chain tip\n        # Check if it's possible for an ancestor (with block data) to be the chain tip\n        assert_equal(self.nodes[0].getbestblockhash(), blockhash_6)\n        assert_equal(self.nodes[0].getblockchaininfo()['blocks'], 6)\n        assert_equal(self.nodes[0].getblockchaininfo()['headers'], 7)\n\nI am not sure why they started exchanging blocks in the CI failure job though.\nwhen I put a 200s sleep in the test locally, node0 and node1 didn't exchange any message.",
          "created_at": "2025-07-14T09:53:04Z"
        },
        {
          "user": "maflcko",
          "body": "You can test this by replacing the newly added `disconnect_nodes` in your fix with `self.nodes[0].reconsiderblock(block.hash)`.",
          "created_at": "2025-07-14T09:54:37Z"
        },
        {
          "user": "fanquake",
          "body": "https://github.com/bitcoin/bitcoin/actions/runs/16263971992/job/45915380111#step:13:114",
          "created_at": "2025-07-14T11:09:28Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 12,
    "issues": 1
  }
}