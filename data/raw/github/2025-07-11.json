{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:56:48.115691+00:00",
  "date": "2025-07-11",
  "pull_requests": [
    {
      "number": 32951,
      "title": "build: Explicitly set Qt's `AUTO{MOC,RCC,UIC}` property per target",
      "body": "The codebase, which is compiled, consists of both files in the source tree and additional files generated during the build process.  These generated files include headers such as `bitcoin-build-config.h`, headers generated for tests and benchmarks from data files, and files produced by Qt's tools, such as `moc`, `rcc` and `uic`.\r\n\r\nWhen using Makefile or Ninja generators, CMake 3.31 and later provides a [convenient](https://github.com/bitcoin/bitcoin/pull/32662#issuecomment-2991861497) builtin build target `codegen`, which builds ~all~ generated files. For example:\r\n```\r\n$ cmake -B build -DCMAKE_GENERATOR=\"Ninja\"\r\n$ cmake --build build --target codegen\r\n```\r\nor\r\n```\r\n$ cmake -B build -DCMAKE_GENERATOR=\"Unix Makefiles\"\r\n$ cmake --build build --target codegen\r\n```\r\n\r\nHowever, when building with `-DBUILD_GUI=ON`, setting the `CMAKE_{AUTOMOC,RCC,UIC}` variables globally introduces undesired dependencies for Makefiles generators, resulting in building dependencies directly unrelated to the generated files.\r\n\r\nThis PR resolves that issue. The first commit refactors the build system by factoring out the main library from the `test_bitcoin-qt` executable, just as is already done for `bitcoinqt` and `bitcoin-qt`, and prepares the ground for the second commit.",
      "state": "open",
      "user": "hebasto",
      "created_at": "2025-07-11T22:21:22Z",
      "updated_at": "2025-12-23T07:20:06Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32951",
      "labels": [
        "Build system",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32951.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32380](https://github.com/bitcoin/bitcoin/pull/32380) (Modernize use of UTF-8 in Windows code by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-11T22:21:27Z"
        },
        {
          "user": "hebasto",
          "body": "My Guix build:\r\n```\r\naarch64\r\n6ab7ae50b219efd4675878dabfc783e0335bc67af31ad8bdfeb4d6317b66a054  guix-build-d38eca989aeb/output/aarch64-linux-gnu/SHA256SUMS.part\r\n0ab47d80a7cc03eb654c5ad3b80b7a7ca7f0e02a92b072f21a395ff2508c1ee1  guix-build-d38eca989aeb/output/aarch64-linux-gnu/bitcoin-d38eca989aeb-aarch64-linux-gnu-debug.tar.gz\r\n5fb1183124482b3c49411b8981743e9dba2c959b935a67e7ca938f5aad677ba3  guix-build-d38eca989aeb/output/aarch64-linux-gnu/bitcoin-d38eca989aeb-aarch64-linux-gnu.tar.gz\r\n3eb65847d1cf953458d800cb588a4e317b735cecdb5af9c3a734fd207b557155  guix-build-d38eca989aeb/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n7e0d149f42ff3949c66108c77869cfd7df787b2217268b5049e793ab148e9d6e  guix-build-d38eca989aeb/output/arm-linux-gnueabihf/bitcoin-d38eca989aeb-arm-linux-gnueabihf-debug.tar.gz\r\nc9c4b36656100973f95aeed26ec4c704a78487106fe137204b3324d093664406  guix-build-d38eca989aeb/output/arm-linux-gnueabihf/bitcoin-d38eca989aeb-arm-linux-gnueabihf.tar.gz\r\n826d759bf47667462da61cbbc04081ce37cac445f592a5b2d57419837a7e03fc  guix-build-d38eca989aeb/output/arm64-apple-darwin/SHA256SUMS.part\r\n96def2b09dd83462eb6d565249ef5aa94bd73cdeb3a524d55d9c4d871426bc90  guix-build-d38eca989aeb/output/arm64-apple-darwin/bitcoin-d38eca989aeb-arm64-apple-darwin-codesigning.tar.gz\r\n20a89762c11a3565743de23f6db39f4575a99b2568ec481e41702b781c08bcdf  guix-build-d38eca989aeb/output/arm64-apple-darwin/bitcoin-d38eca989aeb-arm64-apple-darwin-unsigned.tar.gz\r\nf4624b5cb88cecdc69f323a2b5bd3e86356e77ffaebd3798c1fecc3aaf437878  guix-build-d38eca989aeb/output/arm64-apple-darwin/bitcoin-d38eca989aeb-arm64-apple-darwin-unsigned.zip\r\n0b5672e80b265cbbb166d6442a3ba380fc6d6e52c39d8c15283597334b9d4f81  guix-build-d38eca989aeb/output/dist-archive/bitcoin-d38eca989aeb.tar.gz\r\nb84567da803c2b8e04406b45db813f10a3f905c0abce5a4133268e504c6184ee  guix-build-d38eca989aeb/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n6d2d408bb8900c3e76d278f481f29704b080c8276da1275cf97d3ba2e96da152  guix-build-d38eca989aeb/output/powerpc64-linux-gnu/bitcoin-d38eca989aeb-powerpc64-linux-gnu-debug.tar.gz\r\n09a401b73311a50a0deb1972951ac178508a9244a1113d654b262b55a4b772cc  guix-build-d38eca989aeb/output/powerpc64-linux-gnu/bitcoin-d38eca989aeb-powerpc64-linux-gnu.tar.gz\r\nab2978cb9ddabb28efde5143623ff7ec55a55243635cade122f863456c0ae655  guix-build-d38eca989aeb/output/riscv64-linux-gnu/SHA256SUMS.part\r\necaeb86e43702388c63b92b84608ed11ae0cc658e5eb05a49bf47ac98c52a08f  guix-build-d38eca989aeb/output/riscv64-linux-gnu/bitcoin-d38eca989aeb-riscv64-linux-gnu-debug.tar.gz\r\n08d7e4648d7215d95fbbef67d0b2eb7a874d01cb880e82ac39dad832441ec9d7  guix-build-d38eca989aeb/output/riscv64-linux-gnu/bitcoin-d38eca989aeb-riscv64-linux-gnu.tar.gz\r\na7e076e98319fcee9801b4eb7096d19949f82754f663b9ef787cabe6b5f9df5f  guix-build-d38eca989aeb/output/x86_64-apple-darwin/SHA256SUMS.part\r\n99e506860232ac54e2e3a506f276e4eb0bf668ac307173ec67432e589eb66e8d  guix-build-d38eca989aeb/output/x86_64-apple-darwin/bitcoin-d38eca989aeb-x86_64-apple-darwin-codesigning.tar.gz\r\n9bf50d479a345a02a269e630381ab33d3abf44274b195523ee7af93fabc88d14  guix-build-d38eca989aeb/output/x86_64-apple-darwin/bitcoin-d38eca989aeb-x86_64-apple-darwin-unsigned.tar.gz\r\nfc8053128ab1e188819154cad0ab7cde63cad9922c25f8fcd16d28e03f866b7e  guix-build-d38eca989aeb/output/x86_64-apple-darwin/bitcoin-d38eca989aeb-x86_64-apple-darwin-unsigned.zip\r\n7a434995857d0644a5e4944ba86e486964c05401da23b49301902ff1830c79d6  guix-build-d38eca989aeb/output/x86_64-linux-gnu/SHA256SUMS.part\r\nf8c19bed4c56d806323142fc4179fa500c97737d11b1014bf0fed34f859d7c61  guix-build-d38eca989aeb/output/x86_64-linux-gnu/bitcoin-d38eca989aeb-x86_64-linux-gnu-debug.tar.gz\r\n289324b09407c552f62b03035142683da3484449446b0adfaee324b215d7cb5d  guix-build-d38eca989aeb/output/x86_64-linux-gnu/bitcoin-d38eca989aeb-x86_64-linux-gnu.tar.gz\r\n390349a7082587523de38e646e06b2bebb938747168315b9a3c10b6cec32bf8b  guix-build-d38eca989aeb/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n71957c222392c032fdb88c730912e93570ffe1e73a5758f71e210b60d3c799d7  guix-build-d38eca989aeb/output/x86_64-w64-mingw32/bitcoin-d38eca989aeb-win64-codesigning.tar.gz\r\nae7b58e6c6106259d391238fd82a6dbcfb7ffd2f292f2c89f89b58f9327d97fb  guix-build-d38eca989aeb/output/x86_64-w64-mingw32/bitcoin-d38eca989aeb-win64-debug.zip\r\n1ec49ebfd3e0816e55398d3d05020301331ef85a9facce53d8c7d50362930ccf  guix-build-d38eca989aeb/output/x86_64-w64-mingw32/bitcoin-d38eca989aeb-win64-setup-unsigned.exe\r\nc527f2cb9bf43d471d562e973d09ff97f48ed67cdfa7043f14956ac0ec888a84  guix-build-d38eca989aeb/output/x86_64-w64-mingw32/bitcoin-d38eca989aeb-win64-unsigned.zip\r\n```",
          "created_at": "2025-07-11T22:23:33Z"
        },
        {
          "user": "achow101",
          "body": "Are you still working on this?",
          "created_at": "2025-10-22T15:34:59Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-10-28T23:54:12Z"
        },
        {
          "user": "maflcko",
          "body": "Could rebase, to fixup the new iwyu CI config (https://github.com/bitcoin/bitcoin/pull/33810#discussion_r2622991895)?",
          "created_at": "2025-12-23T07:20:06Z"
        }
      ]
    },
    {
      "number": 32950,
      "title": "validation: remove BLOCK_FAILED_CHILD",
      "body": "Fixes https://github.com/bitcoin/bitcoin/issues/32173\r\n\r\neven though we have a distinction between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` in the codebase,\r\nwe don't use it for anything. Whenever we check for BlockStatus, we use `BLOCK_FAILED_MASK` which encompasses both of them.\r\n\r\nSince there is no functional difference between `BLOCK_FAILED_VALID` and `BLOCK_FAILED_CHILD` and it's added\r\ncode complexity to correctly categorise them (ex: https://github.com/bitcoin/bitcoin/pull/31405#discussion_r1914366243, https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-565506585), we could just remove it.\r\n\r\nLooking for conceptual feedback on whether it's better to improve handling of `BLOCK_FAILED_CHILD` in the codebase or remove `BLOCK_FAILED_CHILD`.\r\n\r\nOf less relevance, but it would also fix a `reconsiderblock` crash that could happen in the situation mentioned in https://github.com/bitcoin/bitcoin/issues/32173#issuecomment-2767030982\r\n\r\nSimilar attempt in the past in https://github.com/bitcoin/bitcoin/pull/16856#issuecomment-568073859",
      "state": "open",
      "user": "stratospher",
      "created_at": "2025-07-11T15:04:52Z",
      "updated_at": "2025-12-16T15:36:16Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32950",
      "labels": [
        "Validation",
        "Needs rebase"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32950.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/32950#issuecomment-3062757072), [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3013295386), [mzumsande](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3022472981), [yuvicc](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3029521987), [sipa](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3288768556), [stringintech](https://github.com/bitcoin/bitcoin/pull/32950#issuecomment-3485329617) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3303574618) |\n| Stale ACK | [naiyoma](https://github.com/bitcoin/bitcoin/pull/32950#pullrequestreview-3098701894) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30342](https://github.com/bitcoin/bitcoin/pull/30342) (kernel, logging: Pass Logger instances to kernel objects by ryanofsky)\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n* [#29700](https://github.com/bitcoin/bitcoin/pull/29700) (kernel, refactor: return error status on all fatal errors by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- // check grand_parent, parent, child is marked as BLOCK_FAILED_VALID after reloading the block index -> is -> are [subjects \"grand_parent, parent, child\" are plural, so use \"are\"]\n- // This prevents a case where pruned nodes may fail to invalidateblock -> invalidateblock -> InvalidateBlock() [likely intended to refer to the function name; \"invalidateblock\" is unclear/incorrect casing]\n\n<sup>drahtbot_id_5_m</sup>\n",
          "created_at": "2025-07-11T15:04:58Z"
        },
        {
          "user": "sedited",
          "body": "Concept ACK",
          "created_at": "2025-07-11T15:32:24Z"
        },
        {
          "user": "stratospher",
          "body": "thanks @stickies-v! I've addressed your review comments.\r\n- added a test in https://github.com/bitcoin/bitcoin/pull/32950/commits/cfadc8038c08f9804c81af7950164483761f1db5\r\n- used the `{disconnected,new}_tip` variable tracking suggestions in https://github.com/bitcoin/bitcoin/pull/32950#discussion_r2405494993",
          "created_at": "2025-10-08T15:27:11Z"
        },
        {
          "user": "stringintech",
          "body": "Concept ACK. Left two comments: [1](https://github.com/bitcoin/bitcoin/pull/32950#discussion_r2489983149) and [2](https://github.com/bitcoin/bitcoin/pull/32950#discussion_r2495351885)",
          "created_at": "2025-11-04T10:58:51Z"
        },
        {
          "user": "stratospher",
          "body": "thanks for the great catches @stringintech and the nicer tests @stickies-v! I've pushed an [update](https://github.com/bitcoin/bitcoin/compare/cfadc8038c08f9804c81af7950164483761f1db5..b22d8b89c29a0a0d385d38d8ab74e5b940ddf7d5).",
          "created_at": "2025-11-22T06:22:32Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
          "created_at": "2025-12-16T15:36:16Z"
        }
      ]
    },
    {
      "number": 32949,
      "title": "contrib: Check build options for gen-manpages",
      "body": "This fixes #17506. Let me know what you think.",
      "state": "closed",
      "user": "duduta",
      "created_at": "2025-07-11T13:48:12Z",
      "updated_at": "2025-07-14T09:04:51Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32949",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32949.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32297](https://github.com/bitcoin/bitcoin/pull/32297) (bitcoin-cli: Add -ipcconnect option by ryanofsky)\n* [#30437](https://github.com/bitcoin/bitcoin/pull/30437) (ipc: add bitcoin-mine test program by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-11T13:48:18Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45803395401</sub>\n<sub>LLM reason (‚ú® experimental): Lint check failed due to a Python code style error identified by ruff.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-11T13:53:26Z"
        },
        {
          "user": "maflcko",
          "body": "> This fixes #17506. Let me know what you think.\r\n\r\nHave you read the issue? It mentions `HAVE_SYSTEM` and others, but they are not checked here.\r\n\r\nIs this llm generated?",
          "created_at": "2025-07-11T14:01:09Z"
        },
        {
          "user": "duduta",
          "body": "@maflcko  Oh, sorry. I should have asked first. \r\nRight now, if one builds, for example, with ZMQ, the bitcoind --help reflects that, which is reflected in the man pages that are generated for bitcoind. The same is true for HAVE_SYSTEM (-alertnotify does appear in the man pages generated for bitcoind).\r\nAs for USE_UPNP, I have grepped for it, couldn't even find it in the sources. \r\nSo I did a first step at least: to check config.ini for the list of binaries that should have been built.\r\nI am open to suggestions :) \r\n",
          "created_at": "2025-07-11T14:41:09Z"
        },
        {
          "user": "maflcko",
          "body": "Thanks, but I'll close this for now:\r\n\r\n* It is unclear how this fixes the issue, given that it about something else. Also, it is unclear what your goal is (try to fix the issue, or something else)\r\n* It is unclear how this is different from `skip_missing_binaries`, which already exists.\r\n* It is unclear how to test this, given that there are no steps to test.\r\n* It is unclear how to review this, given that there is no description of the changes.\r\n\r\nFeel free to work on this again, or anything else. However, the goal of a pull request is not to open it and then ask others to do the work for you. At a minimum you'll have to address everything from above.",
          "created_at": "2025-07-14T09:04:51Z"
        }
      ]
    },
    {
      "number": 32948,
      "title": "refactor: cleanup index logging",
      "body": "This PR removes the use of `__func__` from index logging, since we have `-logsourcelocations`.\r\n\r\nIt also improves readability by putting `GetName()` in a more logical place.\r\n\r\nBefore\r\n\r\n> coinstatsindex: best block of the index not found. Please rebuild the index.\r\n\r\nAfter:\r\n\r\n> best block of coinstatsindex not found. Please rebuild the index.\r\n\r\nI found myself maintaining this commit as part of https://github.com/Sjors/bitcoin/pull/86, but since that might never land here, it seemed better to split it into its own PR (or get rid of it).",
      "state": "closed",
      "user": "Sjors",
      "created_at": "2025-07-11T12:46:01Z",
      "updated_at": "2025-07-14T15:27:02Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32948",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32948.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32948#issuecomment-3065338523), [maflcko](https://github.com/bitcoin/bitcoin/pull/32948#issuecomment-3069982232) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: initial sync speedup, parallelize process by furszy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-11T12:46:07Z"
        },
        {
          "user": "Sjors",
          "body": "I missed a few `__func__`. Replaced `LogPrintf` with `LogInfo` and removed trailing `\\n`'s",
          "created_at": "2025-07-11T12:59:40Z"
        },
        {
          "user": "dergoegge",
          "body": "While we're touching all of these, it might be worthwhile to change to `LogWarn/LogError` where appropriate.",
          "created_at": "2025-07-11T13:03:06Z"
        },
        {
          "user": "Sjors",
          "body": "@dergoegge any suggestions? Despite the new guidance, it's still not always obvious what log level to use.",
          "created_at": "2025-07-11T13:05:09Z"
        },
        {
          "user": "Sjors",
          "body": "Thanks for the suggestions @dergoegge.\r\n\r\nI replaced:\r\n- `LogInfo(\"WARNING: ` with `LogWarning`,\r\n-  `LogInfo(\"Failed` with `LogError`",
          "created_at": "2025-07-11T13:16:28Z"
        },
        {
          "user": "l0rinc",
          "body": "Lightweight code review ACK c18bf0bd9be632e54591493a5309e9ed4020f2e5",
          "created_at": "2025-07-12T13:04:43Z"
        },
        {
          "user": "maflcko",
          "body": "review ACK c18bf0bd9be632e54591493a5309e9ed4020f2e5 üö£\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK c18bf0bd9be632e54591493a5309e9ed4020f2e5 üö£\r\nHVfKE6iYNJQgqhL99MmsFQIj2G47AGelwdrYUcE5dd/bXGM5iW1Ozo6jXoO90pDfqNSY2VTu1mLyTa+UdkZqAg==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-07-14T15:16:20Z"
        }
      ]
    },
    {
      "number": 32945,
      "title": "tests: speed up coins_tests by parallelizing",
      "body": "Updates the cmake logic to generate a separate test for each BOOST_FIXTURE_TEST_SUITE declaration in a file, and splits coins_tests.cpp into three separate suites so that they can be run in parallel. Also updates the convention enforced by test/lint/lint-tests.py.",
      "state": "closed",
      "user": "ajtowns",
      "created_at": "2025-07-11T08:41:39Z",
      "updated_at": "2025-07-25T08:37:45Z",
      "comments": 15,
      "url": "https://github.com/bitcoin/bitcoin/pull/32945",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32945.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [l0rinc](https://github.com/bitcoin/bitcoin/pull/32945#issuecomment-3100621871), [maflcko](https://github.com/bitcoin/bitcoin/pull/32945#issuecomment-3101567218), [achow101](https://github.com/bitcoin/bitcoin/pull/32945#issuecomment-3104201511) |\n| Concept ACK | [willcl-ark](https://github.com/bitcoin/bitcoin/pull/32945#issuecomment-3089316864) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-11T08:41:47Z"
        },
        {
          "user": "ajtowns",
          "body": "For me, coins_tests it's a pretty significant bottleneck to running tests. With this patch and -j20 I go from:\r\n\r\n```\r\n137/139 Test  #26: checkqueue_tests .....................   Passed   50.37 sec\r\n138/139 Test #126: coinselector_tests ...................   Passed   52.53 sec\r\n139/139 Test  #28: coins_tests ..........................   Passed  137.43 sec\r\n\r\n100% tests passed, 0 tests failed out of 139\r\n\r\nTotal Test time (real) = 137.43 sec\r\n```\r\n\r\nto\r\n\r\n```\r\n 69/141 Test  #30: coins_tests ..........................   Passed   24.46 sec\r\n...\r\n138/141 Test #128: coinselector_tests ...................   Passed   50.16 sec\r\n139/141 Test  #28: coins_base_tests .....................   Passed   53.28 sec\r\n140/141 Test  #26: checkqueue_tests .....................   Passed   54.31 sec\r\n141/141 Test  #29: coins_dbbase_tests ...................   Passed   63.89 sec\r\n\r\n100% tests passed, 0 tests failed out of 141\r\n\r\nTotal Test time (real) =  63.89 sec\r\n```\r\n\r\nie, less than half the time. (The bench_sanity test is also pretty slow though, if benchmarking is enabled)",
          "created_at": "2025-07-11T08:44:42Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45784666394</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by errors in the linting step.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-11T08:55:20Z"
        },
        {
          "user": "sedited",
          "body": "Are you running this on an older machine, or are missing some of the crypto accelerator features? Your reported runtimes are about an order of magnitude longer than mine and even our CI machines report the tests running much faster.",
          "created_at": "2025-07-11T21:04:22Z"
        },
        {
          "user": "ajtowns",
          "body": "> Are you running this on an older machine, or are missing some of the crypto accelerator features? Your reported runtimes are about an order of magnitude longer than mine and even our CI machines report the tests running much faster.\r\n\r\nHmm, it's a bit old I guess; 2019-era high-end desktop cpu, and running in a vm under qemu. It's also a debug build, with the extra checks that implies.\r\n\r\nCI failures seem to indicate my cmake code doesn't work with something other than ninja as the test conductor?",
          "created_at": "2025-07-11T21:31:18Z"
        },
        {
          "user": "l0rinc",
          "body": "Given that the `and`s and `also`s in the description, I personally would find it useful to split the PR into smaller commits accordingly.\r\nI'd ACK the `coins_tests.cpp` changes (had problems because of that simulation test being part of the suite numerous times), no opinion about the rest. ",
          "created_at": "2025-07-12T13:26:54Z"
        },
        {
          "user": "ajtowns",
          "body": "> Given that the `and`s and `also`s in the description, I personally would find it useful to split the PR into smaller commits accordingly. I'd ACK the `coins_tests.cpp` changes (had problems because of that simulation test being part of the suite numerous times), no opinion about the rest.\r\n\r\nWithout the lint changes, having multiple test fixtures in a single cpp file causes CI failures. Without the cmake changes, the additional test fixtures aren't executed via ctest. So I don't think it makes sense to do the coins_test changes without the other changes.",
          "created_at": "2025-07-17T04:44:39Z"
        },
        {
          "user": "willcl-ark",
          "body": "On my machine I see this go from master:\r\n\r\n```bash\r\n135/139 Test  #28: coins_tests ..........................   Passed    7.61 sec\r\n136/139 Test   #5: secp256k1_exhaustive_tests ...........   Passed    8.13 sec\r\n137/139 Test #126: coinselector_tests ...................   Passed   11.85 sec\r\n138/139 Test   #3: secp256k1_noverify_tests .............   Passed   14.59 sec\r\n139/139 Test   #4: secp256k1_tests ......................   Passed   29.11 sec\r\n```\r\n\r\nThis branch (with a small patch):\r\n<details>\r\n<summary>diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/CMakeLists.txt b/src/test/CMakeLists.txt\r\nindex 93db34d5a21..41bac7286b9 100644\r\n--- a/src/test/CMakeLists.txt\r\n+++ b/src/test/CMakeLists.txt\r\n@@ -183,7 +183,7 @@ function(add_boost_test source_file)\r\n \r\n   file(READ \"${source_file}\" source_file_content)\r\n   string(REGEX\r\n-    MATCHALL \"(BOOST_FIXTURE_TEST_SUITE|BOOST_AUTO_TEST_SUITE)\\\\(([A-Za-z0-9_]+)\"\r\n+    MATCHALL \"(BOOST_FIXTURE_TEST_SUITE|BOOST_AUTO_TEST_SUITE)\\\\(([A-Za-z0-9_-]+)\"\r\n     test_suite_macro \"${source_file_content}\"\r\n   )\r\n   list(TRANSFORM test_suite_macro\r\ndiff --git a/src/test/coins_tests.cpp b/src/test/coins_tests.cpp\r\nindex a3dfad3168d..6ce0c7996f8 100644\r\n--- a/src/test/coins_tests.cpp\r\n+++ b/src/test/coins_tests.cpp\r\n@@ -281,7 +281,7 @@ void SimulationTest(CCoinsView* base, bool fake_best_block)\r\n }\r\n }; // struct CacheTest\r\n \r\n-BOOST_FIXTURE_TEST_SUITE(coins_tests-base, BasicTestingSetup)\r\n+BOOST_FIXTURE_TEST_SUITE(coins_tests_base, BasicTestingSetup)\r\n \r\n // Run the above simulation for multiple base types.\r\n BOOST_FIXTURE_TEST_CASE(coins_cache_base_simulation_test, CacheTest)\r\n@@ -292,7 +292,7 @@ BOOST_FIXTURE_TEST_CASE(coins_cache_base_simulation_test, CacheTest)\r\n \r\n BOOST_AUTO_TEST_SUITE_END()\r\n \r\n-BOOST_FIXTURE_TEST_SUITE(coins_tests-dbbase, BasicTestingSetup)\r\n+BOOST_FIXTURE_TEST_SUITE(coins_tests_dbbase, BasicTestingSetup)\r\n \r\n BOOST_FIXTURE_TEST_CASE(coins_cache_dbbase_simulation_test, CacheTest)\r\n {\r\n```\r\n\r\n</details>\r\n\r\n```bash\r\n 62/141 Test  #30: coins_tests ..........................   Passed    1.49 sec\r\n 89/141 Test  #28: coins_tests_base .....................   Passed    2.31 sec\r\n135/141 Test  #29: coins_tests_dbbase ...................   Passed    5.70 sec\r\n138/141 Test   #5: secp256k1_exhaustive_tests ...........   Passed    8.03 sec\r\n139/141 Test #128: coinselector_tests ...................   Passed    9.90 sec\r\n140/141 Test   #3: secp256k1_noverify_tests .............   Passed   14.14 sec\r\n141/141 Test   #4: secp256k1_tests ......................   Passed   29.01 sec\r\n```\r\n\r\nOn the new Cirrus Runners we are currently testing, I see the [MSAN job](https://github.com/testing-cirrus-runners/bitcoin2/actions/runs/16368410249/job/46250909685#step:9:2435) taking:\r\n\r\n```bash\r\n136/140 Test #127: coinselector_tests ...................   Passed   96.82 sec\r\n137/140 Test  #29: coins_tests ..........................   Passed  145.81 sec\r\n138/140 Test   #3: secp256k1_noverify_tests .............   Passed  172.30 sec\r\n139/140 Test   #6: bench_sanity_check ...................   Passed  253.65 sec\r\n140/140 Test   #4: secp256k1_tests ......................   Passed  522.70 sec\r\n\r\nTotal Test time (real) = 522.71 sec\r\n```\r\n\r\nAnd the [MSAN job](https://github.com/testing-cirrus-runners/bitcoin/actions/runs/16371858648/job/46261955469#step:9:2432) with this patch:\r\n\r\n```bash\r\n128/142 Test  #31: coins_tests ..........................   Passed   21.71 sec\r\n131/142 Test  #29: coins_tests_base .....................   Passed   25.68 sec\r\n134/142 Test   #5: secp256k1_exhaustive_tests ...........   Passed   38.39 sec\r\n138/142 Test  #30: coins_tests_dbbase ...................   Passed   51.80 sec\r\n139/142 Test #129: coinselector_tests ...................   Passed   58.30 sec\r\n140/142 Test   #3: secp256k1_noverify_tests .............   Passed  136.68 sec\r\n141/142 Test   #6: bench_sanity_check ...................   Passed  170.47 sec\r\n142/142 Test   #4: secp256k1_tests ......................   Passed  218.99 sec\r\n\r\nTotal Test time (real) = 219.00 sec\r\n```\r\n\r\nand on the [ASAN job](https://github.com/testing-cirrus-runners/bitcoin2/actions/runs/16368410249/job/46250909652#step:9:2359):\r\n\r\n```bash\r\n 137/141 Test #128: coinselector_tests ...................   Passed  124.68 sec\r\n138/141 Test   #3: secp256k1_noverify_tests .............   Passed  159.47 sec\r\n139/141 Test   #7: bench_sanity_check ...................   Passed  185.79 sec\r\n140/141 Test   #4: secp256k1_tests ......................   Passed  271.56 sec\r\n141/141 Test  #30: coins_tests ..........................   Passed  341.78 sec\r\n\r\nTotal Test time (real) = 341.84 sec\r\n```\r\n\r\nWith this patch the same [ASAN job](https://github.com/testing-cirrus-runners/bitcoin/actions/runs/16371858648/job/46261955442#step:9:2360):\r\n\r\n```bash\r\n133/143 Test  #32: coins_tests ..........................   Passed   59.72 sec\r\n134/143 Test   #5: secp256k1_exhaustive_tests ...........   Passed   61.56 sec\r\n135/143 Test #139: wallet_crypto_tests ..................   Passed   53.21 sec\r\n138/143 Test #130: coinselector_tests ...................   Passed  144.01 sec\r\n139/143 Test   #3: secp256k1_noverify_tests .............   Passed  184.61 sec\r\n140/143 Test  #30: coins_tests_base .....................   Passed  202.01 sec\r\n141/143 Test  #31: coins_tests_dbbase ...................   Passed  211.12 sec\r\n142/143 Test   #7: bench_sanity_check ...................   Passed  215.51 sec\r\n143/143 Test   #4: secp256k1_tests ......................   Passed  314.80 sec\r\n\r\nTotal Test time (real) = 314.81 sec\r\n```\r\n\r\nSo concept ACK from me!",
          "created_at": "2025-07-18T12:24:13Z"
        },
        {
          "user": "ajtowns",
          "body": "> This branch (with a small patch):\r\n\r\nNice, that seems to have fixed my cmake errors.",
          "created_at": "2025-07-20T04:56:43Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 2a8fdddd4df4b630c0a580f4df6521cb3af01804\r\n\r\n",
          "created_at": "2025-07-21T07:43:08Z"
        },
        {
          "user": "l0rinc",
          "body": "ACK 2a8fdddd4df4b630c0a580f4df6521cb3af01804\r\n\r\nRan the tests a few times in debug mode.\r\nBefore:\r\n> 139/140 Test  #29: coins_tests ..........................   Passed   71.43 sec\r\n\r\nand\r\n> 138/140 Test  #29: coins_tests ..........................   Passed   60.65 sec\r\n\r\nAfter:\r\n> 66/142 Test  #31: coins_tests ..........................   Passed   10.86 sec\r\n> 128/142 Test  #29: coins_tests_base .....................   Passed   23.53 sec\r\n> 138/142 Test  #30: coins_tests_dbbase ...................   Passed   42.49 sec\r\n\r\nand\r\n\r\n> 66/142 Test  #31: coins_tests ..........................   Passed   10.12 sec\r\n> 115/142 Test  #29: coins_tests_base .....................   Passed   19.21 sec\r\n> 137/142 Test  #30: coins_tests_dbbase ...................   Passed   34.29 sec",
          "created_at": "2025-07-21T19:47:59Z"
        },
        {
          "user": "l0rinc",
          "body": "reACK 06ab3a394ade1e0d4fdb1fef636ff0d6bad71948\r\n\r\nOnly difference since last review was applying https://github.com/bitcoin/bitcoin/pull/32945#discussion_r2218430945",
          "created_at": "2025-07-22T02:59:41Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 06ab3a394ade1e0d4fdb1fef636ff0d6bad71948",
          "created_at": "2025-07-22T08:11:12Z"
        },
        {
          "user": "achow101",
          "body": "ACK 06ab3a394ade1e0d4fdb1fef636ff0d6bad71948\r\n\r\nThe test isn't that slow for me, but this is still a significant improvement.",
          "created_at": "2025-07-22T18:13:53Z"
        },
        {
          "user": "willcl-ark",
          "body": "Post-merge ACK 06ab3a394ade1e0d4fdb1fef636ff0d6bad71948",
          "created_at": "2025-07-25T08:37:45Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32947,
      "title": "Why bitcoin use so many RecursiveMutex",
      "body": "### Please describe the feature you'd like to see added.\n\nI have noticed that in the Bitcoin source code, almost all thread-safe sections use RecursiveGuard.\nAs we all know, RecursiveGuard is exclusive, which can impact system performance and concurrency.\n\nAt the same time, I have also noticed https://github.com/bitcoin/bitcoin/issues/19303 specifically tracking the replacement of RecursiveMutex with Mutex, which would help reduce some of the locking overhead.\n\nHowever, I think Mutex is still exclusive. For modules like the transaction pool, which involve both reading and writing transactions‚Äîsuch as querying pending transactions and inserting new ones.\n\nwouldn't using a read-write lock (SharedMutex) directly provide better performance? If I make this kind of modification, is it officially recommended?\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
      "state": "closed",
      "user": "cyjseagull",
      "created_at": "2025-07-11T11:13:07Z",
      "updated_at": "2025-07-11T19:47:15Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/32947",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "achow101",
          "body": "Stop opening duplicate issues.",
          "created_at": "2025-07-11T19:47:15Z"
        }
      ]
    },
    {
      "number": 32946,
      "title": "Why bitcoin use so many RecursiveMutex",
      "body": "I have noticed that in the Bitcoin source code, almost all thread-safe sections use `RecursiveGuard`. \nAs we all know, `RecursiveGuard` is **exclusive**, which can **impact system performance and concurrency**.\n\nAt the same time, I have also noticed [another issue](https://github.com/bitcoin/bitcoin/issues/19303) specifically tracking the replacement of `RecursiveMutex` with `Mutex`, which would help reduce some of the locking overhead.\n\nHowever, I think `Mutex` is still **exclusive**. For modules like the **transaction pool**, which involve both reading and writing transactions‚Äîsuch as querying pending transactions and inserting new ones.\n\nwouldn't using a `read-write lock (SharedMutex)` directly provide better performance? If I make this kind of modification, is it officially recommended?",
      "state": "closed",
      "user": "cyjseagull",
      "created_at": "2025-07-11T11:07:31Z",
      "updated_at": "2025-07-11T11:08:50Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32946",
      "labels": []
    }
  ],
  "summary": {
    "pull_requests": 5,
    "issues": 2
  }
}