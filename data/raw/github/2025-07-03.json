{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:54:32.112627+00:00",
  "date": "2025-07-03",
  "pull_requests": [
    {
      "number": 32871,
      "title": "New SVG, Icons, PNGs and X PixMaps",
      "body": "This PR clean up the old SVG, Icons, PNGs and X PixMaps by providing optimized much smaller file size versions while at the same time keeping resolutions untouched. SVG resolution is changed because that doesn't matter. \r\nShadows are removed.\r\n\r\nPing: @jonasschnelli because he was the author of the previous files. Please check the PR. \r\n\r\nNew SVG source code: \r\n`<svg width=\"16.93153mm\" height=\"16.933504mm\" version=\"1.1\" viewBox=\"0 0 16.93153 16.933504\" xmlns=\"http://www.w3.org/2000/svg\">\r\n <g transform=\"translate(-143.48066,-175.22967)\">\r\n  <g transform=\"matrix(.26458333 0 0 .26458333 91.672724 163.78713)\">\r\n   <path d=\"m258.845 82.989c-4.274 17.143-21.637 27.576-38.782 23.301-17.138-4.274-27.571-21.638-23.295-38.78 4.272-17.145 21.635-27.579 38.775-23.305 17.144 4.274 27.576 21.64 23.302 38.784z\" fill=\"#f7931a\"/>\r\n   <path d=\"m217.28 80.637c-.174.432-.615 1.08-1.609.834.035.051-2.552-.637-2.552-.637l-1.743 4.019 4.569 1.139c.85.213 1.683.436 2.503.646l-1.453 5.834 3.507.875 1.439-5.772c.958.26 1.888.5 2.798.726l-1.434 5.745 3.511.875 1.453-5.823c5.987 1.133 10.489.676 12.384-4.739 1.527-4.36-.076-6.875-3.226-8.515 2.294-.529 4.022-2.038 4.483-5.155.637-4.258-2.605-6.547-7.038-8.074l1.438-5.768-3.511-.875-1.4 5.616c-.923-.23-1.871-.447-2.813-.662l1.41-5.653-3.509-.875-1.439 5.766c-.764-.174-1.514-.346-2.242-.527l.004-.018-4.842-1.209-.934 3.75s2.605.597 2.55.634c1.422.355 1.679 1.296 1.636 2.042m12.668 17.102c-1.085 4.36-8.426 2.003-10.806 1.412l1.928-7.729c2.38.594 10.012 1.77 8.878 6.317zm1.086-11.312c-.99 3.966-7.1 1.951-9.082 1.457l1.748-7.01c1.982.494 8.365 1.416 7.334 5.553z\" fill=\"#ffffff\"/>\r\n  </g>\r\n </g>\r\n</svg>`\r\n\r\nThank you",
      "state": "closed",
      "user": "ghost",
      "created_at": "2025-07-03T20:35:03Z",
      "updated_at": "2025-07-04T09:25:21Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32871",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32871.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T20:35:07Z"
        },
        {
          "user": "Sjors",
          "body": "TIL it's possible to make a PR with 0 commits in it. Did you mean to open an issue?",
          "created_at": "2025-07-04T07:19:12Z"
        },
        {
          "user": "ghost",
          "body": "@Sjors @maflcko the pull (bot) destroyed my PR. I see some of my changes reverted here: https://github.com/bitcoin/bitcoin/compare/a7270b8fb8fd6c92d88de87de492cf88aef1eda7..e3f416dbf7633b2fb19c933e5508bd231cc7e9cf \r\n\r\nI use a the pull github app to keep the master branch up to date with bitcoin/bitcoin/master maybe that caused the issue. I will turn it off and send a new PR. \r\n![Screenshot_20250704_095902](https://github.com/user-attachments/assets/6cdd866e-f2a0-453d-b695-85555fe1b6fa)",
          "created_at": "2025-07-04T08:01:33Z"
        }
      ]
    },
    {
      "number": 32869,
      "title": "p2p: Relax BlockRequestAllowed to respond to advertised blocks",
      "body": "First commit adds coverage to a similar case to #13370 . h/t dergoegge for detecting this issue independently. Documentation of this behavior with a test is then followed by a proposed change where anytime we considered something `VALID_TRANSACTIONS` and potentially advertised via compact blocks, we should respond to requests for the `getdata` if the peer fell back for whatever reason.\r\n\r\nIf the second commit is deemed controversial it can be shelved and current behavior documented alone.",
      "state": "closed",
      "user": "instagibbs",
      "created_at": "2025-07-03T13:42:41Z",
      "updated_at": "2025-07-18T14:20:16Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/pull/32869",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32869.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/32869#issuecomment-3032377986) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T13:42:47Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45297064338</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by an unfixable lint error detected by rust and Python linters, leading to the overall build failure.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-03T13:46:02Z"
        },
        {
          "user": "dergoegge",
          "body": "Concept ACK\r\n\r\n>  h/t dergoegge for detecting this issue independently.\r\n\r\nFor context, I found this case (as demonstrated by the first commit in the PR) by adding a netsplit oracle (see https://gist.github.com/dergoegge/3036796551095a9ce7535fb5d74e6656#detecting-network-split-bugs) to [fuzzamoto](https://github.com/dergoegge/fuzzamoto). While extremely unrealistic/unlikely to trigger in the wild, I'd still consider this timeout case a bug, especially because it could cause disconnects across the whole network (as opposed to isolated instances with short id collisions).\r\n\r\nResolving this will help avoid special casing the oracle for this scenario.",
          "created_at": "2025-07-03T13:56:05Z"
        },
        {
          "user": "davidgumberg",
          "body": "Maybe a dumb question, but why not relax the other side here? I don't know what the new criteria would be, but in an ideal world, nodes should not be sending block announcements for blocks they have identified as invalid just to avoid upsetting their peers, so maybe the constraints set by `PeerManagerImpl::SendMessages()` are too rigid?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/e3f416dbf7633b2fb19c933e5508bd231cc7e9cf/src/net_processing.cpp#L5865-L5873",
          "created_at": "2025-07-04T00:24:36Z"
        },
        {
          "user": "instagibbs",
          "body": "@davidgumberg might be talking past each other, but what's happening here is that locally as soon as the block is reconstructed (including merkle checks), prior to script checks, the block is advertised forward via compact blocks to its peers. This is inline with the protocol description, and helps speed up block propagation. ",
          "created_at": "2025-07-07T11:35:15Z"
        },
        {
          "user": "davidgumberg",
          "body": "> @davidgumberg might be talking past each other, but what's happening here is that locally as soon as the block is reconstructed (including merkle checks), prior to script checks, the block is advertised forward via compact blocks to its peers. This is inline with the protocol description, and helps speed up block propagation.\r\n\r\nI'm not suggesting any changes to the pre-validation relay described in BIP-152. I'm asking about propagating blocks post-validation that a node knows to be invalid, shouldn't this be avoided if possible? \r\n\r\n----\r\n\r\nOne thought I had about an approach that relaxes the \"other side\" of the restriction here would be to only disconnect peers after the time-out period if the `BlockRequested` is part of the active chain, something like:\r\n\r\n```diff\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex 92a2a17956..bce906dd83 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -5866,9 +5866,13 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\r\n             QueuedBlock &queuedBlock = state.vBlocksInFlight.front();\r\n             int nOtherPeersWithValidatedDownloads = m_peers_downloading_from - 1;\r\n             if (current_time > state.m_downloading_since + std::chrono::seconds{consensusParams.nPowTargetSpacing} * (BLOCK_DOWNLOAD_TIMEOUT_BASE + BLOCK_DOWNLOAD_TIMEOUT_PER_PEER * nOtherPeersWithValidatedDownloads)) {\r\n-                LogInfo(\"Timeout downloading block %s, %s\\n\", queuedBlock.pindex->GetBlockHash().ToString(), pto->DisconnectMsg(fLogIPs));\r\n-                pto->fDisconnect = true;\r\n-                return true;\r\n+                if (!m_chainman.ActiveChain().Contains(queuedBlock.pindex)) {\r\n+                    RemoveBlockRequest(queuedBlock.pindex->GetBlockHash(), pto->GetId());\r\n+                } else {\r\n+                    LogInfo(\"Timeout downloading block %s, %s\\n\", queuedBlock.pindex->GetBlockHash().ToString(), pto->DisconnectMsg(fLogIPs));\r\n+                    pto->fDisconnect = true;\r\n+                    return true;\r\n+                }\r\n             }\r\n         }\r\n```\r\n\r\nBut, maybe this approach doesn't sufficiently punish peers that send headers for blocks that don't exist. (Surprisingly, this change breaks no existing tests!)\r\n\r\n\r\n",
          "created_at": "2025-07-07T16:23:20Z"
        },
        {
          "user": "mzumsande",
          "body": "> disconnect peers after the time-out period if the BlockRequested is part of the active chain\r\n\r\nNot sure I understand this - why would the block be part of the active chain by that time? We started a request in the first place because we don't know the full block yet, and if that request has timed out, chances are we still don't have the block, in which case it won't be part of our active chain. Or do you count on a parallel compact-block download being successful in the meantime?\r\n\r\n> But, maybe this approach doesn't sufficiently punish peers that send headers for blocks that don't exist.\r\n\r\nheaders contain the PoW, so headers for blocks that don't exist are very expensive to create.",
          "created_at": "2025-07-07T17:15:54Z"
        },
        {
          "user": "davidgumberg",
          "body": "> Not sure I understand this - why would the block be part of the active chain by that time? We started a request in the first place because we don't know the full block yet, and if that request has timed out, chances are we still don't have the block, in which case it won't be part of our active chain. Or do you count on a parallel compact-block download being successful in the meantime?\r\n\r\nMy assumption was that it was pretty unlikely for it to ever take >= 10 minutes to receive a block after hearing about it unless all of a node's peers are stalling or all of its connections are extremely slow (4 MiB / 10min = 6.8 KiB/s) but I didn't realize that a node will not `GETDATA` a block that is already in flight:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/831e1b44de7596e703d68e92657863afbc3bdf90/src/net_processing.cpp#L1492-L1499\r\n\r\nBut won't a node `GETDATA` a block that it has received a `HEADERS` message for in [`HeadersDirectFetchBlocks()`](https://github.com/bitcoin/bitcoin/blob/831e1b44de7596e703d68e92657863afbc3bdf90/src/net_processing.cpp#L2737)?\r\n\r\n-----\r\n\r\nThis particular approach I suggested probably doesn't work, but I think the more general question is prior: Should https://github.com/bitcoin/bitcoin/issues/13370 be solved by relaxing `BlockRequestAllowed()` to allow nodes to send invalid blocks when they were likely to have announced the invalid blocks or should it be solved by relaxing the block download timeout (https://github.com/bitcoin/bitcoin/pull/5608) criteria?",
          "created_at": "2025-07-07T18:48:06Z"
        },
        {
          "user": "instagibbs",
          "body": "@davidgumberg for completeness, the other solution, as stated in the issue tracker, would be to send a `notfound` in response to requests for invalid blocks. I'm not sure where people landed on that as that discussion was a long time ago",
          "created_at": "2025-07-09T18:47:56Z"
        },
        {
          "user": "dergoegge",
          "body": "Drafted a branch for the `notfound` approach here: https://github.com/dergoegge/bitcoin/commits/2025-07-blk-notfound/. I think I'd slightly prefer it because:\r\n\r\n* we wouldn't propagate invalid blocks (this does not really matter that much but why do it if we can avoid it)\r\n* we wouldn't get rid of the timeout punishment\r\n\r\nHappy to review if someone wants to run with it (haven't tested my branch and it's missing a functional test).",
          "created_at": "2025-07-11T14:40:14Z"
        },
        {
          "user": "instagibbs",
          "body": "@dergoegge a node can still avoid punishment by announcing the sending a `notfound` after 9m59s, but this may be better behaved average behavior. Might be worth bringing up on an irc meeting to get some more eyes on this problem and potential solution?",
          "created_at": "2025-07-11T17:23:38Z"
        },
        {
          "user": "instagibbs",
          "body": "> we wouldn't propagate invalid blocks (this does not really matter that much but why do it if we can avoid it)\r\n\r\nThinking about this some more, I don't think this particular point is persuasive. Invalid blocks are propagated quite easily through compact blocks' high bandwidth connections already.\r\n\r\n1. If all txns are known to the receiving peer, the block is forwarded before full validation\r\n2. If txns are missing, they are requested, the sending peer unconditionally responds to these messages, and the block is thus forwarded by the receiver once merkle checks are complete.\r\n\r\nStill considering all the options presented here\r\n\r\nedit: oops, this approach is clearly broken because full BLOCK messages do cause disconnect, my test setup was just wrong:\r\n```\r\n2025-07-18T14:14:27.891958Z (mocktime: 2025-07-18T20:54:26Z) [msghand] [net_processing.cpp:4970] [MaybeDiscourageAndDisconnect] Warning: not punishing manually connected peer 0!\r\n```",
          "created_at": "2025-07-18T14:06:42Z"
        }
      ]
    },
    {
      "number": 32868,
      "title": "test: refactor: overhaul block hash determination for `CBlock{,Header}` objects",
      "body": "Similar to what #32421 did for `CTransaction` instances, this PR aims to improve the block hash determination of `CBlockHeader`/`CBlock` (the latter is a subclass of the former) instances by removing the block header caching mechanism and introducing consistent naming. Without the statefulness, sneaky testing bugs like #32742 and #32823 are less likely to happen in the future. Note that performance is even less of an issue here compared to `CTransaction`, as we only need to hash 80 bytes, which is less than typical standard transaction sizes [2].\r\nThe only instance where the testing logic was relying on caching (i.e. we want to return an outdated value) is tackled in the second commit, the rest should be straight-forward to review, especially for contributors who already reviewed #32421.\r\n\r\nSummary table showing block hash determaination before/after this PR:\r\n| Task                               | master                   | PR           |\r\n|:-----------------------------------|:-------------------------|:-------------|\r\n| get block header hash (hex string) | `.hash`[1]               | `.hash_hex`  |\r\n| get block header hash (integer)    | `rehash()`, `.sha256`[1] | `.hash_int`  |\r\n\r\n[1] = returned value might be `None` or out-of-date, if rehashing function wasn't called after modification\r\n[2] = the only exception I could think of are transaction with pay-to-anchor (P2A) outputs",
      "state": "closed",
      "user": "theStack",
      "created_at": "2025-07-03T12:39:27Z",
      "updated_at": "2025-07-18T14:42:40Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32868",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32868.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32868#issuecomment-3083793468), [maflcko](https://github.com/bitcoin/bitcoin/pull/32868#issuecomment-3084778278), [danielabrozzoni](https://github.com/bitcoin/bitcoin/pull/32868#pullrequestreview-3033499281) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32587](https://github.com/bitcoin/bitcoin/pull/32587) (test: Fix reorg patterns in tests to use proper fork-based approach by yuvicc)\n* [#32468](https://github.com/bitcoin/bitcoin/pull/32468) (rpc: generateblock to allow multiple outputs by polespinasa)\n* [#32180](https://github.com/bitcoin/bitcoin/pull/32180) (p2p: Advance pindexLastCommonBlock early after connecting blocks by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T12:39:33Z"
        },
        {
          "user": "DrahtBot",
          "body": "```\r\n                                     File \"/ci_container_base/ci/scratch/build-x86_64-pc-linux-gnu/test/functional/rpc_invalidateblock.py\", line 106, in run_test\r\n[16:30:23.107]                                        self.nodes[0].reconsiderblock(block.hash)\r\n[16:30:23.107]                                    AttributeError: 'CBlock' object has no attribute 'hash'",
          "created_at": "2025-07-17T05:13:28Z"
        },
        {
          "user": "maflcko",
          "body": "very nice, but it would be good to rebase and fix the ci failure.\r\n\r\nreview ACK 50b41bcfbfd93f103cf6e2af1999c43947bc3f40 üèã\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 50b41bcfbfd93f103cf6e2af1999c43947bc3f40 üèã\r\n1AdwqBpKUS0ThRi8ki58iQ/NLbuZpUQCF3X9UOUB1UkrnUJO6yhG7aKAqw2gbt4yARMmVXkKWtfJdnCesbpkBg==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-07-17T07:23:46Z"
        },
        {
          "user": "theStack",
          "body": "Thanks for the reviews! Rebased on master as suggested (to fix the silent merge conflict related to #32968).",
          "created_at": "2025-07-17T11:21:21Z"
        },
        {
          "user": "rkrux",
          "body": "re-ACK 5fa34951ead2eebcced919537f5e27526f61d909 modulo failing CI due to silent merge conflict.",
          "created_at": "2025-07-17T12:03:13Z"
        },
        {
          "user": "maflcko",
          "body": "all good now\r\n\r\nre-ACK 5fa34951ead2eebcced919537f5e27526f61d909 üé©\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 5fa34951ead2eebcced919537f5e27526f61d909 üé©\r\nR6OOF6mVpb8npwFpqx1dJ9oobRWV8TvIDcAFT1hp+ZWMiRsJ0bqrZGQu8bCTLCGIw2FX8Qn8xsUtsSEsLdnKBg==\r\n```\r\n\r\n</details>\r\n",
          "created_at": "2025-07-17T17:00:43Z"
        }
      ]
    },
    {
      "number": 32867,
      "title": "doc: mention key removal in rpc interface modification",
      "body": "A discussion in a previous PR 32618 prompted me to add this note: https://github.com/bitcoin/bitcoin/pull/32618#discussion_r2181951390\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-07-03T12:15:28Z",
      "updated_at": "2025-10-28T15:45:28Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32867",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32867.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32867#issuecomment-3436024124), [stickies-v](https://github.com/bitcoin/bitcoin/pull/32867#issuecomment-3436638183), [glozow](https://github.com/bitcoin/bitcoin/pull/32867#pullrequestreview-3389486508) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T12:15:34Z"
        },
        {
          "user": "rkrux",
          "body": "I want to mention about how long is the deprecation/grace period generally but I don't know right now. Suggestions welcome.",
          "created_at": "2025-07-03T12:16:20Z"
        },
        {
          "user": "Sammie05",
          "body": "I checked this branch locally and saw that it removes -Werror=dev from the CMake generation step.\r\nJust to understand better: is this to prevent CI from failing on dev warnings? Looks reasonable to me, but curious if it‚Äôs meant to be temporary or permanent.",
          "created_at": "2025-07-13T01:55:55Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK e7b1c33b41334a9c2ce80033d92e3fac466eb70c",
          "created_at": "2025-07-14T06:46:41Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 944e5ff848f656d2ee6202b2330f3ae178ad0fbe",
          "created_at": "2025-10-23T09:46:04Z"
        },
        {
          "user": "stickies-v",
          "body": "ACK 944e5ff848f656d2ee6202b2330f3ae178ad0fbe",
          "created_at": "2025-10-23T12:20:55Z"
        }
      ]
    },
    {
      "number": 32866,
      "title": "doc: add note for watch-only wallet migration",
      "body": "This was suggested in a previous PR #31423.",
      "state": "closed",
      "user": "rkrux",
      "created_at": "2025-07-03T11:57:26Z",
      "updated_at": "2025-07-29T18:40:32Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32866",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32866.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/32866#pullrequestreview-3067374697), [jonatack](https://github.com/bitcoin/bitcoin/pull/32866#pullrequestreview-3067803558), [achow101](https://github.com/bitcoin/bitcoin/pull/32866#issuecomment-3133529680) |\n| Stale ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32866#pullrequestreview-3022558530) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T11:57:32Z"
        },
        {
          "user": "Sammie05",
          "body": "Checked this branch locally. the added note clarifies what happens if the legacy wallet only contains watch-only scripts.\r\nIt helps make migration behavior clearer for users. it actually Looks good to me!\r\nAlso noticed the LLM linter suggested rewording ‚Äòwhich the wallet knows but is not watching‚Ä¶‚Äô maybe worth considering for clarity.\r\nThanks for adding this",
          "created_at": "2025-07-13T02:47:58Z"
        },
        {
          "user": "rkrux",
          "body": "> ACK [9d25880](https://github.com/bitcoin/bitcoin/commit/9d25880bb720bc675a533098268b9e02f86e17ce)\r\n> \r\n> Happy to re-ack if you touch it again to address the LLM linter suggestion.\r\n\r\nDone",
          "created_at": "2025-07-28T09:29:36Z"
        },
        {
          "user": "brunoerg",
          "body": "reACK 3d7a0219a9819e67690ed5acfc1331703dd0eb3a",
          "created_at": "2025-07-28T11:01:33Z"
        },
        {
          "user": "achow101",
          "body": "ACK 5888b4a2a5566c64141b78a0e7660a166ec99775",
          "created_at": "2025-07-29T18:06:11Z"
        }
      ]
    },
    {
      "number": 32865,
      "title": "cmake: Use `AUTHOR_WARNING` for warnings",
      "body": "Rather than create our own warning logging/handling, which isn't ideal (#31476), use CMakes [`AUTHOR_WARNING`](https://cmake.org/cmake/help/latest/command/message.html) (also pointed out by purpleKarrot here: https://github.com/bitcoin/bitcoin/pull/31665#issuecomment-2667723356).\r\n\r\nWould result in failures like:\r\n```bash\r\n-- Performing Test LINKER_SUPPORTS__WL__Z_SEPARATE_CODE - Success\r\n-- Could NOT find Python3 (missing: Python3_EXECUTABLE Interpreter) (Required is at least version \"3.10\")\r\nCMake Error (dev) at CMakeLists.txt:592 (message):\r\n  Minimum required Python not found.  Rpcauth tests are disabled.\r\nThis error is for project developers. Use -Wno-error=dev to suppress it.\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```\r\n\r\nAlternative to #31665 & #31669.\r\nWould close #31476.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-07-03T11:21:31Z",
      "updated_at": "2025-09-01T16:09:22Z",
      "comments": 13,
      "url": "https://github.com/bitcoin/bitcoin/pull/32865",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32865.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32865#issuecomment-3046447987) |\n| Stale ACK | [purpleKarrot](https://github.com/bitcoin/bitcoin/pull/32865#issuecomment-3032802799), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/32865#pullrequestreview-2997583190) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33144](https://github.com/bitcoin/bitcoin/pull/33144) (build: Set AUTHOR_WARNING on warnings by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T11:21:38Z"
        },
        {
          "user": "fanquake",
          "body": "cc @purpleKarrot ",
          "created_at": "2025-07-03T11:46:53Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nüöß At least one of the CI tasks failed.\n<sub>Task `macOS-cross, gui, no tests`: https://github.com/bitcoin/bitcoin/runs/45287145804</sub>\n<sub>LLM reason (‚ú® experimental): The CI failure is caused by an linker error: \"ld64.lld: error: unknown argument '--exclude-libs'\" indicating that the linker does not support the '--exclude-libs' option used in the build process.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-07-03T12:45:23Z"
        },
        {
          "user": "fanquake",
          "body": "Guix Build:\r\n```bash\r\n7c9bae09c11b66251bcab7abe66d3446da64ca2386fbc67066c1f8194df778b9  guix-build-04c4cc059e44/output/aarch64-linux-gnu/SHA256SUMS.part\r\nffb0670da219af40ce2c986e33b8446bbc6d60ebfa31fd142f91a22a50a3ba89  guix-build-04c4cc059e44/output/aarch64-linux-gnu/bitcoin-04c4cc059e44-aarch64-linux-gnu-debug.tar.gz\r\n1b54fb59042b8abc7d2b7079de3f9b16770f6434c41049aebf4e0bbb4278596b  guix-build-04c4cc059e44/output/aarch64-linux-gnu/bitcoin-04c4cc059e44-aarch64-linux-gnu.tar.gz\r\nfc14d2a51e6a1b12e8a7b96450e15809bf1db5dd1a8c5a378763641e20f871a4  guix-build-04c4cc059e44/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nbb0fe708f4fb50a917c29299de96d7afb7d7e387ab55dfc7f75d162afaa9e493  guix-build-04c4cc059e44/output/arm-linux-gnueabihf/bitcoin-04c4cc059e44-arm-linux-gnueabihf-debug.tar.gz\r\nd0691b820933c849e5e52f3b2deca15b43866c7260fad403cfa396f224b5bf49  guix-build-04c4cc059e44/output/arm-linux-gnueabihf/bitcoin-04c4cc059e44-arm-linux-gnueabihf.tar.gz\r\n0de94186e11f0e483a82bf3ce073eda190e6a0a0c84935299fa331c2fe62c9e5  guix-build-04c4cc059e44/output/arm64-apple-darwin/SHA256SUMS.part\r\n8f2068572bd83964591d6d420c72f4ac9388aecd152e75e9319ae35238f83fc7  guix-build-04c4cc059e44/output/arm64-apple-darwin/bitcoin-04c4cc059e44-arm64-apple-darwin-codesigning.tar.gz\r\n9e31de4e53573c2479fc1061dd0769861d186de30c52dc8a27e1cd5aa0519d07  guix-build-04c4cc059e44/output/arm64-apple-darwin/bitcoin-04c4cc059e44-arm64-apple-darwin-unsigned.tar.gz\r\nbb493e8cdb9939e595f0d9de9c0df446e71f3bf9298577b70442e6440d65be00  guix-build-04c4cc059e44/output/arm64-apple-darwin/bitcoin-04c4cc059e44-arm64-apple-darwin-unsigned.zip\r\nb764580cf796e3350179c054598228e350bb767e3f21654b8541474c226bb201  guix-build-04c4cc059e44/output/dist-archive/bitcoin-04c4cc059e44.tar.gz\r\nf741c4d7b5d72241624216bd07ae8454f02decac70129cd92a72d9016de82ca1  guix-build-04c4cc059e44/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nfd2f76976f1cf2ebf995d0b24f7545d6a863673e3629940967617d3cae6da752  guix-build-04c4cc059e44/output/powerpc64-linux-gnu/bitcoin-04c4cc059e44-powerpc64-linux-gnu-debug.tar.gz\r\necf9fcfaf75c5542bd2b3346efebc01299bdeeab9604916a8dc1174993216cfc  guix-build-04c4cc059e44/output/powerpc64-linux-gnu/bitcoin-04c4cc059e44-powerpc64-linux-gnu.tar.gz\r\necb8cdb345525219203d4921ba3586315649d3b9c46417ebe8bc1ebb40aff52f  guix-build-04c4cc059e44/output/riscv64-linux-gnu/SHA256SUMS.part\r\nd5cb27d211f7d5e639708b057e4cf3bb738d7c8b0b13c9023a6bee3a1af598c3  guix-build-04c4cc059e44/output/riscv64-linux-gnu/bitcoin-04c4cc059e44-riscv64-linux-gnu-debug.tar.gz\r\n1b807b6e2fe23d63e9d84b1d27c4ec0bfae45f8595bb20ae015dbdf62b45462e  guix-build-04c4cc059e44/output/riscv64-linux-gnu/bitcoin-04c4cc059e44-riscv64-linux-gnu.tar.gz\r\nec7c9113b4acad38b112812ce9bc0bf6dcffd9e6eb9b6f89bbf08da42cb93ae1  guix-build-04c4cc059e44/output/x86_64-apple-darwin/SHA256SUMS.part\r\n82bc0df4fcefe8ecd6dc9336ab17de24e4d42812de0e860f34c7b1ebe2fd8552  guix-build-04c4cc059e44/output/x86_64-apple-darwin/bitcoin-04c4cc059e44-x86_64-apple-darwin-codesigning.tar.gz\r\n05320e706a0082b7cdd63aa8d004046aeb042f5742bae2c1531a38c0885d3f19  guix-build-04c4cc059e44/output/x86_64-apple-darwin/bitcoin-04c4cc059e44-x86_64-apple-darwin-unsigned.tar.gz\r\n047df0d762d3f67ed814cc98a375781d3e4588d6fb0ae226b73278ef9339d9b9  guix-build-04c4cc059e44/output/x86_64-apple-darwin/bitcoin-04c4cc059e44-x86_64-apple-darwin-unsigned.zip\r\nef85f647d71c0d5999acf9c2ab84a13b2971475d64781d7d595122e129dc8565  guix-build-04c4cc059e44/output/x86_64-linux-gnu/SHA256SUMS.part\r\n913e6c99c854298d4414441dfee8bb0e0cb378a6c5e7470080c2f68da24152bf  guix-build-04c4cc059e44/output/x86_64-linux-gnu/bitcoin-04c4cc059e44-x86_64-linux-gnu-debug.tar.gz\r\na5c01a598b1dff050ea820416266989207f62db9937e4836025def585bb9ae5f  guix-build-04c4cc059e44/output/x86_64-linux-gnu/bitcoin-04c4cc059e44-x86_64-linux-gnu.tar.gz\r\n43f67909195c5b32f337659489758ec350eb555d31c33c952b58478e942a22d1  guix-build-04c4cc059e44/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n2f09e27676290afa2bb0172a6ce94a5e0188cd516f3771cb9a85ae9102cad2ef  guix-build-04c4cc059e44/output/x86_64-w64-mingw32/bitcoin-04c4cc059e44-win64-codesigning.tar.gz\r\n5938f7b23de5701fa02720290b008c1b4c7f5ca95faa45051ab1dfb6c9c32256  guix-build-04c4cc059e44/output/x86_64-w64-mingw32/bitcoin-04c4cc059e44-win64-debug.zip\r\n7d2008ba3affffb705b9271c0e29d88ccb1e3c1dd225ffc91963da2ecbc49fb2  guix-build-04c4cc059e44/output/x86_64-w64-mingw32/bitcoin-04c4cc059e44-win64-setup-unsigned.exe\r\n8aa293975b097d2890fe9efb521a9a330d9f3332e74a4bec63a9102c2ecbf799  guix-build-04c4cc059e44/output/x86_64-w64-mingw32/bitcoin-04c4cc059e44-win64-unsigned.zip\r\n```",
          "created_at": "2025-07-03T14:58:23Z"
        },
        {
          "user": "purpleKarrot",
          "body": "ACK 04c4cc059e44a6d1b4f520af10c649648a002ebc",
          "created_at": "2025-07-03T16:01:02Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds (on x86_64) [untrusted test-only build, possibly unsafe, not for production use]\n\n| File | commit 51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8<br>(master) | commit 45a458fd01bb32a16954f825325d5e7135d46732<br>(pull/32865/merge) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`b4f62a03fed68e6e...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-aarch64-linux-gnu-debug.tar.gz) | [`17d5966123ada5cb...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`67da2dd39446e055...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-aarch64-linux-gnu.tar.gz) | [`f7453b63f1556576...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`224d178ed09b58ce...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-arm-linux-gnueabihf-debug.tar.gz) | [`10529d1e616e0215...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`2d8d8e1901fa7f17...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-arm-linux-gnueabihf.tar.gz) | [`09039650386fa94a...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin-codesigning.tar.gz | [`aaa96ec17bc009bf...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-arm64-apple-darwin-codesigning.tar.gz) | [`3838c6763cfb8a4b...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-arm64-apple-darwin-codesigning.tar.gz) |\n| *-arm64-apple-darwin-unsigned.tar.gz | [`6351e4ec85221874...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-arm64-apple-darwin-unsigned.tar.gz) | [`13b314f13ed66030...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-arm64-apple-darwin-unsigned.tar.gz) |\n| *-arm64-apple-darwin-unsigned.zip | [`5b5977fab0619831...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-arm64-apple-darwin-unsigned.zip) | [`f815b8dcfd4446cc...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-arm64-apple-darwin-unsigned.zip) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`4a6d90213362c408...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-powerpc64-linux-gnu-debug.tar.gz) | [`7ce7745554f02d03...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`623b924620830e3f...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-powerpc64-linux-gnu.tar.gz) | [`513e36358d096f3e...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-powerpc64-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`29acf8d38a47618f...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-riscv64-linux-gnu-debug.tar.gz) | [`9cdd17e576c70584...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`396297bf42899816...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-riscv64-linux-gnu.tar.gz) | [`56ea7076196578cf...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-apple-darwin-codesigning.tar.gz | [`3eaa5212fcca90db...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-x86_64-apple-darwin-codesigning.tar.gz) | [`2a930ac29ca4a02b...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-x86_64-apple-darwin-codesigning.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.tar.gz | [`2baee23a3e8aa15a...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-x86_64-apple-darwin-unsigned.tar.gz) | [`e313a52242151801...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-x86_64-apple-darwin-unsigned.tar.gz) |\n| *-x86_64-apple-darwin-unsigned.zip | [`99e52233a0e9db27...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-x86_64-apple-darwin-unsigned.zip) | [`3b561705e62916ea...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-x86_64-apple-darwin-unsigned.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`4246718f7c02ecdf...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-x86_64-linux-gnu-debug.tar.gz) | [`327449434c43b21a...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`57491003214db776...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9-x86_64-linux-gnu.tar.gz) | [`83e913b03cd534c1...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`d014f5b396d4a0d4...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/bitcoin-51ccc71b1bf9.tar.gz) | [`82ccd3a5878b3a0c...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/bitcoin-45a458fd01bb.tar.gz) |\n| SHA256SUMS.part | [`5e57caac3e97ba45...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/SHA256SUMS.part) | [`b47d852635150b67...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/SHA256SUMS.part) |\n| guix_build.log | [`c32f66181eb0e72c...`](https://drahtbot.space/guix/monotree/51ccc71b1bf9ab3cd211f48b9805d3b7b957ced8/guix_build.log) | [`977b2aeb3198d668...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/guix_build.log) |\n| guix_build.log.diff |  | [`75d6680c4b3970c4...`](https://drahtbot.space/guix/monotree/45a458fd01bb32a16954f825325d5e7135d46732/guix_build.log.diff) |\n\n",
          "created_at": "2025-07-04T08:10:02Z"
        },
        {
          "user": "luke-jr",
          "body": "Concept NACK: These warnings don't appear to be just for developers, but also relevant to builders.",
          "created_at": "2025-07-07T20:35:40Z"
        },
        {
          "user": "fanquake",
          "body": "> Concept NACK: These warnings don't appear to be just for developers, but also relevant to builders.\r\n\r\nNot sure I understand your NACK. The warnings will still be shown to builders; using `AUTHOR_WARNING` just gives us a proper mechanism to turn warnings into errors.",
          "created_at": "2025-07-07T20:50:11Z"
        },
        {
          "user": "ryanofsky",
          "body": "> Not sure I understand your NACK. The warnings will still be shown to builders; using `AUTHOR_WARNING` just gives us a proper mechanism to turn warnings into errors.\r\n\r\nI think luke's concern might be that author warnings can be suppressed with `-Wno-dev` and might be suppressed by default in certain environments, since author warnings are only supposed to be relevant to project maintainers, not to users.\r\n\r\nIn 02955f3af3bcdc9d978784cad6a98badf5d1117b we are turning normal warnings about ignored options into the author warnings so the change does not really make sense semantically and could cause these warnings to be ignored or hidden in cases where they might not be ignored before.\r\n\r\nBut since cmake only provides an easy way to turn author warnings into errors, not other types of warnings, I do think this change is probably good overall, just maybe not ideal.",
          "created_at": "2025-07-08T13:16:45Z"
        },
        {
          "user": "fanquake",
          "body": "@ryanofsky Yea, it's a shame CMake doesn't have something builtin to do this. I think this change, while not perfect, is better than the current state of having our own warning handling (where warnings are still easily missed (#31476), we have no option to turn them into errors, and someone still needs to pass `-Wdev` to get CMake warnings turned into errors). As well as the alternatives of, just adding even more options to the build system (#31669) which doesn't actually fix the issue generically, and still requires someone to use the CMake options if they want all errors, or adding even more custom warning handling (#31665).",
          "created_at": "2025-07-09T09:01:24Z"
        },
        {
          "user": "purpleKarrot",
          "body": "@fanquake, what exactly would fix the issue upstream? A generic `-Werror` option (without the `=` part) that simply turns all warnings into errors?",
          "created_at": "2025-07-09T09:16:01Z"
        },
        {
          "user": "fanquake",
          "body": "> A generic -Werror option (without the = part) that simply turns all warnings into errors?\r\n\r\nI think so. The downside in this PR is that we have to somewhat (even if semantically) misuse `AUTHOR_WARNING()`, to get the warning into error behaviour. Ideally we could just use `WARNING()`, and `-Werror` would turn those warnings into errors.",
          "created_at": "2025-07-09T09:22:42Z"
        },
        {
          "user": "fanquake",
          "body": "Maybe CMake will provide an option to properly do this in future, but not going to work on this further.",
          "created_at": "2025-09-01T16:09:18Z"
        }
      ]
    },
    {
      "number": 32864,
      "title": "fix typos and improve clarity in documentation",
      "body": "\r\n\r\n---\r\n\r\n\r\n**Description:**  \r\nThis pull request corrects minor typos and improves clarity in the following documentation files:\r\n- build-osx.md: Fixes `useable` to `usable`\r\n- tor.md: Fixes `occurences` to `occurrences`\r\n- tracing.md: Fixes `calulation` to `calculation`\r\n\r\n\r\n---",
      "state": "closed",
      "user": "kilavvy",
      "created_at": "2025-07-03T11:14:58Z",
      "updated_at": "2025-07-03T11:33:29Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/32864",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32864.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T11:15:03Z"
        },
        {
          "user": "fanquake",
          "body": "Thanks. I'll squash this and pull it into another branch.",
          "created_at": "2025-07-03T11:23:27Z"
        },
        {
          "user": "kilavvy",
          "body": "> Thanks. I'll squash this and pull it into another branch.\r\n\r\n@fanquake why not merged?",
          "created_at": "2025-07-03T11:25:43Z"
        },
        {
          "user": "kilavvy",
          "body": "@l0rinc I can revert the change if needed, no problem. I also fixed a typo in the function name ‚Äî it's now correctly spelled as `expensive_calculation`. I do believe that documentation and naming consistency are important, especially in a project like Bitcoin, where clarity helps both users and developers avoid confusion.",
          "created_at": "2025-07-03T11:33:29Z"
        }
      ]
    },
    {
      "number": 32863,
      "title": "[29.x] Backports",
      "body": "Backports\r\n- #32463\r\n- #32716\r\n- #32823\r\n- #32826\r\n- #32837\r\n- #32841\r\n- #32846\r\n- #32850\r\n- #32858\r\n- #32859\r\n- #32943\r\n- #32954",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-07-03T11:08:23Z",
      "updated_at": "2025-07-19T09:59:14Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/pull/32863",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32863.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32863#pullrequestreview-3028987019), [glozow](https://github.com/bitcoin/bitcoin/pull/32863#pullrequestreview-3034292282) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\nPossible typos and grammar issues:\n\n- defintions -> definitions [spelling error]\n\n<sup>drahtbot_id_4_m</sup>\n",
          "created_at": "2025-07-03T11:08:28Z"
        }
      ]
    },
    {
      "number": 32862,
      "title": "rpc: use CScheduler for relocking wallet and remove RPCTimer",
      "body": "This removes the dependency on libevent for events scheduled by RPC commands, like re-locking a wallet some time after decryption with walletpassphrase. Since walletpassphrase is currently the only RPC that does this, `RPCRunLater`, `RPCTimerInterface` and all related methods are left unused, and deleted in the second commit. Any future RPC that needs to execute a callback in the future can follow the pattern in this PR and just use a scheduler from node or wallet context.\r\n\r\n\r\nThis is an alternative approach to #32796, described in https://github.com/bitcoin/bitcoin/pull/32796#issuecomment-3014309449\r\n\r\n",
      "state": "closed",
      "user": "pinheadmz",
      "created_at": "2025-07-03T11:06:19Z",
      "updated_at": "2025-07-30T12:04:20Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/pull/32862",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32862.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32862#pullrequestreview-2983397697), [fjahr](https://github.com/bitcoin/bitcoin/pull/32862#issuecomment-3040312858), [achow101](https://github.com/bitcoin/bitcoin/pull/32862#issuecomment-3046962563) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/866](https://github.com/bitcoin-core/gui/pull/866) (Enhanced Traffic Graph Widget with Multi-timeframe Support and Data Persistence by rebroad)\n* [#32061](https://github.com/bitcoin/bitcoin/pull/32061) (Replace libevent with our own HTTP and socket-handling implementation by pinheadmz)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-03T11:06:25Z"
        },
        {
          "user": "fjahr",
          "body": "Code Review ACK fcfd3db563e89fd79820a4cdfa102d624d801de1\r\n\r\nNice code removal, I did some additional grepping to make sure nothing was missed and didn't see anything.",
          "created_at": "2025-07-05T21:51:26Z"
        },
        {
          "user": "achow101",
          "body": "ACK fcfd3db563e89fd79820a4cdfa102d624d801de1",
          "created_at": "2025-07-08T00:32:52Z"
        },
        {
          "user": "maflcko",
          "body": "Just wanted to leave a note that this uncovers a false positive libc++ tsan warning, if anyone runs into this.\r\n\r\n<details><summary>more details</summary>\r\n\r\nhttps://cirrus-ci.com/task/5230471308640256?logs=check#L1679:\r\n\r\n```\r\nWARNING: ThreadSanitizer: data race (pid=22900)\r\n  Write of size 8 at 0x720c00021ab0 by thread T1 (mutexes: write M0):\r\n    #0 operator delete(void*, unsigned long) <null> (bitcoind+0x17e6cc) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #1 void std::__1::__libcpp_operator_delete[abi:ne200100]<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long>(std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__new/allocate.h:46:3 (bitcoind+0x828ae0) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #2 void std::__1::__libcpp_deallocate[abi:ne200100]<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>(std::__1::__type_identity<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>::type*, std::__1::__element_count, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__new/allocate.h:86:12 (bitcoind+0x828ae0)\r\n    #3 std::__1::allocator<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>::deallocate[abi:ne200100](std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/allocator.h:120:7 (bitcoind+0x828ae0)\r\n    #4 std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>::__on_zero_shared_weak() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:134:7 (bitcoind+0x828ae0)\r\n    #5 std::__1::weak_ptr<wallet::CWallet>::~weak_ptr() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:1315:15 (bitcoind+0x8ec01a) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #6 wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()::~() /tmp/cirrus-ci-build/bitcoin-core/bld/src/wallet/./wallet/rpc/encrypt.cpp:102:40 (bitcoind+0x8ec01a)\r\n    #7 std::__1::__function::__alloc_func<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'(), std::__1::allocator<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()>, void ()>::destroy[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:181:14 (bitcoind+0x8ec01a)\r\n    #8 std::__1::__function::__func<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'(), std::__1::allocator<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()>, void ()>::destroy() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:305:8 (bitcoind+0x8ec01a)\r\n    #9 std::__1::__function::__value_func<void ()>::~__value_func[abi:ne200100]() /tmp/cirrus-ci-build/bitcoin-core/bld/src/./scheduler.h (bitcoind+0xadd907) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #10 std::__1::function<void ()>::~function() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:986:43 (bitcoind+0xadd907)\r\n    #11 CScheduler::serviceQueue() /tmp/cirrus-ci-build/bitcoin-core/bld/src/./scheduler.cpp:62:9 (bitcoind+0xadd907)\r\n    #12 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6::operator()() const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./init.cpp:1365:94 (bitcoind+0x1abe95) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #13 decltype(std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&>()()) std::__1::__invoke[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x1abe95)\r\n    #14 void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:251:5 (bitcoind+0x1abe95)\r\n    #15 void std::__1::__invoke_r[abi:ne200100]<void, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x1abe95)\r\n    #16 std::__1::__function::__alloc_func<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6, std::__1::allocator<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>, void ()>::operator()[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x1abe95)\r\n    #17 std::__1::__function::__func<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6, std::__1::allocator<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>, void ()>::operator()() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x1abe95)\r\n    #18 std::__1::__function::__value_func<void ()>::operator()[abi:ne200100]() const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0xbd0222) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #19 std::__1::function<void ()>::operator()() const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0xbd0222)\r\n    #20 util::TraceThread(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>) /tmp/cirrus-ci-build/bitcoin-core/bld/src/util/./util/thread.cpp:21:9 (bitcoind+0xbd0222)\r\n    #21 decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*&&, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x1aba8c) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #22 void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:199:3 (bitcoind+0x1aba8c)\r\n    #23 void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6>>(void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:208:3 (bitcoind+0x1aba8c)\r\n  Previous read of size 8 at 0x720c00021ab0 by thread T16:\r\n    #0 std::__1::__shared_count::__release_shared[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_count.h:91:7 (bitcoind+0x7d466e) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #1 std::__1::__shared_weak_count::__release_shared[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_count.h:120:25 (bitcoind+0x7d466e)\r\n    #2 std::__1::shared_ptr<wallet::CWallet>::~shared_ptr[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:558:17 (bitcoind+0x7d466e)\r\n    #3 std::__1::shared_ptr<wallet::CWallet>::reset[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:608:50 (bitcoind+0x7d466e)\r\n    #4 wallet::WaitForDeleteWallet(std::__1::shared_ptr<wallet::CWallet>&&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/wallet/./wallet/wallet.cpp:264:12 (bitcoind+0x7d466e)\r\n    #5 wallet::unloadwallet()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/wallet/./wallet/rpc/wallet.cpp:490:5 (bitcoind+0x772633) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #6 decltype(std::declval<wallet::unloadwallet()::$_0&>()(std::declval<RPCHelpMan const&>(), std::declval<JSONRPCRequest const&>())) std::__1::__invoke[abi:ne200100]<wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x772633)\r\n    #7 UniValue std::__1::__invoke_void_return_wrapper<UniValue, false>::__call[abi:ne200100]<wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x772633)\r\n    #8 UniValue std::__1::__invoke_r[abi:ne200100]<UniValue, wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x772633)\r\n    #9 std::__1::__function::__alloc_func<wallet::unloadwallet()::$_0, std::__1::allocator<wallet::unloadwallet()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:ne200100](RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x772633)\r\n    #10 std::__1::__function::__func<wallet::unloadwallet()::$_0, std::__1::allocator<wallet::unloadwallet()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x772633)\r\n    #11 std::__1::__function::__value_func<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:ne200100](RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0xac26da) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #12 std::__1::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0xac26da)\r\n    #13 RPCHelpMan::HandleRequest(JSONRPCRequest const&) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/util.cpp:663:20 (bitcoind+0xac26da)\r\n    #14 CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/server.h:60:91 (bitcoind+0x41df78) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #15 decltype(std::declval<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x41df78)\r\n    #16 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x41df78)\r\n    #17 bool std::__1::__invoke_r[abi:ne200100]<bool, CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x41df78)\r\n    #18 std::__1::__function::__alloc_func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x41df78)\r\n    #19 std::__1::__function::__func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x41df78)\r\n    #20 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x71db01) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #21 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x71db01)\r\n    #22 wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/wallet/./wallet/interfaces.cpp:564:24 (bitcoind+0x71db01)\r\n    #23 decltype(std::declval<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x71db01)\r\n    #24 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x71db01)\r\n    #25 bool std::__1::__invoke_r[abi:ne200100]<bool, wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x71db01)\r\n    #26 std::__1::__function::__alloc_func<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x71db01)\r\n    #27 std::__1::__function::__func<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x71db01)\r\n    #28 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x31c3cc) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #29 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x31c3cc)\r\n    #30 node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./node/interfaces.cpp:511:24 (bitcoind+0x31c3cc)\r\n    #31 decltype(std::declval<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x31c3cc)\r\n    #32 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x31c3cc)\r\n    #33 bool std::__1::__invoke_r[abi:ne200100]<bool, node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x31c3cc)\r\n    #34 std::__1::__function::__alloc_func<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x31c3cc)\r\n    #35 std::__1::__function::__func<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x31c3cc)\r\n    #36 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x58ac56) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #37 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x58ac56)\r\n    #38 ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/server.cpp:504:20 (bitcoind+0x58ac56)\r\n    #39 ExecuteCommands(std::__1::vector<CRPCCommand const*, std::__1::allocator<CRPCCommand const*>> const&, JSONRPCRequest const&, UniValue&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/server.cpp:471:13 (bitcoind+0x58ac56)\r\n    #40 CRPCTable::execute(JSONRPCRequest const&) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/server.cpp:491:13 (bitcoind+0x589831) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #41 JSONRPCExec(JSONRPCRequest const&, bool) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./rpc/server.cpp:347:31 (bitcoind+0x588e38) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #42 HTTPReq_JSONRPC(std::__1::any const&, HTTPRequest*) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httprpc.cpp:165:21 (bitcoind+0x6cf06d) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #43 StartHTTPRPC(std::__1::any const&)::$_0::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httprpc.cpp:337:80 (bitcoind+0x6cf06d)\r\n    #44 decltype(std::declval<StartHTTPRPC(std::__1::any const&)::$_0&>()(std::declval<HTTPRequest*>(), std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>())) std::__1::__invoke[abi:ne200100]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x6cf06d)\r\n    #45 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x6cf06d)\r\n    #46 bool std::__1::__invoke_r[abi:ne200100]<bool, StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x6cf06d)\r\n    #47 std::__1::__function::__alloc_func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:ne200100](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x6cf06d)\r\n    #48 std::__1::__function::__func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x6cf06d)\r\n    #49 std::__1::__function::__value_func<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:ne200100](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x6ddf10) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #50 std::__1::function<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x6ddf10)\r\n    #51 HTTPWorkItem::operator()() /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httpserver.cpp:62:9 (bitcoind+0x6ddf10)\r\n    #52 WorkQueue<HTTPClosure>::Run() /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httpserver.cpp:117:13 (bitcoind+0x6e0f92) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #53 HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httpserver.cpp:419:12 (bitcoind+0x6d8090) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #54 decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(void (*&&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x6e0de7) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #55 void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:199:3 (bitcoind+0x6e0de7)\r\n    #56 void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:208:3 (bitcoind+0x6e0de7)\r\n  Mutex M0 (0x722000000588) created at:\r\n    #0 pthread_mutex_lock <null> (bitcoind+0xfb93b) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #1 std::__1::mutex::lock() <null> (libc++.so.1.0.20+0x7160c) (BuildId: f9f8eb7e398c095067b1e1cffb9b2252bf006a38)\r\n    #2 CScheduler::scheduleFromNow(std::__1::function<void ()>, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l>>) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./scheduler.h:55:9 (bitcoind+0x257246) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #3 CScheduler::scheduleEvery(std::__1::function<void ()>, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l>>) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./scheduler.cpp:110:5 (bitcoind+0xade477) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #4 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./init.cpp:1368:15 (bitcoind+0x19c865) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #5 AppInit(node::NodeContext&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:237:43 (bitcoind+0x17fc2a) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #6 main /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:283:10 (bitcoind+0x17fc2a)\r\n  Thread T1 'b-scheduler' (tid=22912, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0xf9c2e) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #1 std::__1::__libcpp_thread_create[abi:ne200100](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/support/pthread.h:182:10 (bitcoind+0x19c7d8) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #2 std::__1::thread::thread<void (&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const (&) [10], AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6, 0>(void (&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const (&) [10], AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_6&&) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:218:14 (bitcoind+0x19c7d8)\r\n    #3 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./init.cpp:1365:34 (bitcoind+0x19c7d8)\r\n    #4 AppInit(node::NodeContext&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:237:43 (bitcoind+0x17fc2a) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #5 main /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:283:10 (bitcoind+0x17fc2a)\r\n  Thread T16 'b-httpworker.13' (tid=22927, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0xf9c2e) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #1 std::__1::__libcpp_thread_create[abi:ne200100](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/support/pthread.h:182:10 (bitcoind+0x6e0c9b) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #2 std::__1::thread::thread<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, 0>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:218:14 (bitcoind+0x6e0c9b)\r\n    #3 std::__1::thread* std::__1::construct_at[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, std::__1::thread*>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/construct_at.h:40:49 (bitcoind+0x6d7d4c) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #4 std::__1::thread* std::__1::__construct_at[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, std::__1::thread*>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/construct_at.h:48:10 (bitcoind+0x6d7d4c)\r\n    #5 void std::__1::allocator_traits<std::__1::allocator<std::__1::thread>>::construct[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void, 0>(std::__1::allocator<std::__1::thread>&, std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/allocator_traits.h:318:5 (bitcoind+0x6d7d4c)\r\n    #6 void std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::__construct_one_at_end[abi:ne200100]<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__vector/vector.h:742:5 (bitcoind+0x6d7d4c)\r\n    #7 std::__1::thread& std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::emplace_back<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__vector/vector.h:1133:5 (bitcoind+0x6d7d4c)\r\n    #8 StartHTTPServer() /tmp/cirrus-ci-build/bitcoin-core/bld/src/./httpserver.cpp:508:31 (bitcoind+0x6d7d4c)\r\n    #9 AppInitServers(node::NodeContext&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./init.cpp:721:5 (bitcoind+0x1a72d5) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #10 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./init.cpp:1457:14 (bitcoind+0x19d537) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #11 AppInit(node::NodeContext&) /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:237:43 (bitcoind+0x17fc2a) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd)\r\n    #12 main /tmp/cirrus-ci-build/bitcoin-core/bld/src/./bitcoind.cpp:283:10 (bitcoind+0x17fc2a)\r\nSUMMARY: ThreadSanitizer: data race (/tmp/cirrus-ci-build/bitcoin-core/bld/bin/bitcoind+0x17e6cc) (BuildId: cfbd7d2fe965bb79ec7e44f4d6b230691518e5cd) in operator delete(void*, unsigned long)\r\n```\r\n\r\nThis can be reproduced locally via:\r\n\r\n`rm -rf ./bld-cmake && cmake -B ./bld-cmake -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++;-stdlib=libc++' -DBUILD_GUI=OFF -DBUILD_TESTS=OFF  -DSANITIZERS=thread && cmake --build ./bld-cmake --parallel $( nproc ) && TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan:halt_on_error=1:second_deadlock_stack=1\" ./bld-cmake/test/functional/wallet_multiwallet.py`\r\n\r\n\r\nA minimal libc++ reproducer may look like: https://godbolt.org/z/TMEWcYTEK\r\n\r\n\r\n</details>",
          "created_at": "2025-07-24T19:41:23Z"
        },
        {
          "user": "fanquake",
          "body": "Reproduced locally (and consistently) on aarch64 and x86_64. Wondered why this isn't happening in the TSAN CI, it's because of `DEBUG_LOCKORDER`. If you drop that, then the CI will reproduce:\r\n\r\n<details><summary>more details</summary>\r\n\r\n```bash\r\n134/143 Test #107: transaction_tests ....................   Passed   19.46 sec\r\n135/143 Test #116: txvalidationcache_tests ..............   Passed   21.00 sec\r\n136/143 Test #140: wallet_tests .........................   Passed   18.79 sec\r\n137/143 Test   #5: secp256k1_exhaustive_tests ...........   Passed   67.90 sec\r\n138/143 Test  #79: random_tests .........................   Passed   63.75 sec\r\n139/143 Test  #31: coins_tests_dbbase ...................   Passed   93.41 sec\r\n140/143 Test #130: coinselector_tests ...................   Passed  100.65 sec\r\n141/143 Test   #7: bench_sanity_check ...................   Passed  173.72 sec\r\n142/143 Test   #3: secp256k1_noverify_tests .............   Passed  258.21 sec\r\n143/143 Test   #4: secp256k1_tests ......................   Passed  541.78 sec\r\n\r\n100% tests passed, 0 tests failed out of 143\r\n\r\nTotal Test time (real) = 541.79 sec\r\n+ '[' '' = true ']'\r\n+ '[' true = true ']'\r\n+ eval 'TEST_RUNNER_EXTRA=()'\r\n++ TEST_RUNNER_EXTRA=()\r\n+ LD_LIBRARY_PATH=/ci_container_base/depends/aarch64-unknown-linux-gnu/lib\r\n+ /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/test/functional/test_runner.py --ci -j17 --tmpdirprefix /ci_container_base/ci/scratch/test_runner/ --ansi --combinedlogslen=99999999 --timeout-factor=40 --quiet --failfast\r\n16/270 - wallet_multiwallet.py failed, Duration: 15 s\r\n\r\nstdout:\r\n2025-07-25T10:37:15.282773Z TestFramework (INFO): PRNG seed is: 9066748361541480888\r\n2025-07-25T10:37:15.283864Z TestFramework (INFO): Initializing test directory /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242\r\n2025-07-25T10:37:16.186982Z TestFramework (INFO): Verify warning is emitted when failing to scan the wallets directory\r\n2025-07-25T10:37:16.187188Z TestFramework (WARNING): Skipping test involving chmod as it requires a non-root user.\r\n2025-07-25T10:37:20.220825Z TestFramework (INFO): Do not allow -upgradewallet with multiwallet\r\n2025-07-25T10:37:25.749244Z TestFramework (INFO): Check for per-wallet settxfee call\r\n2025-07-25T10:37:25.760051Z TestFramework (INFO): Test dynamic wallet loading\r\n2025-07-25T10:37:27.498254Z TestFramework (INFO): Load first wallet\r\n2025-07-25T10:37:27.543494Z TestFramework (INFO): Load second wallet\r\n2025-07-25T10:37:27.585449Z TestFramework (INFO): Concurrent wallet loading\r\n2025-07-25T10:37:27.627434Z TestFramework (INFO): Load remaining wallets\r\n2025-07-25T10:37:27.800707Z TestFramework (INFO): Test dynamic wallet creation.\r\n2025-07-25T10:37:27.918250Z TestFramework (INFO): Test dynamic wallet unloading\r\n2025-07-25T10:37:30.117073Z TestFramework (ERROR): Unexpected exception\r\nTraceback (most recent call last):\r\n  File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 195, in main\r\n    self.run_test()\r\n  File \"/ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/test/functional/wallet_multiwallet.py\", line 366, in run_test\r\n    ensure_for(duration=1.1, f=lambda: 'w2' not in self.nodes[0].listwallets())\r\n  File \"/ci_container_base/test/functional/test_framework/util.py\", line 289, in ensure_for\r\n    if not f():\r\n           ^^^\r\n  File \"/ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/test/functional/wallet_multiwallet.py\", line 366, in <lambda>\r\n    ensure_for(duration=1.1, f=lambda: 'w2' not in self.nodes[0].listwallets())\r\n                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/ci_container_base/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 111, in _request\r\n    return self._get_response()\r\n           ^^^^^^^^^^^^^^^^^^^^\r\n  File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 174, in _get_response\r\n    http_response = self.__conn.getresponse()\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/usr/lib/python3.12/http/client.py\", line 1428, in getresponse\r\n    response.begin()\r\n  File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\r\n    version, status, reason = self._read_status()\r\n                              ^^^^^^^^^^^^^^^^^^^\r\n  File \"/usr/lib/python3.12/http/client.py\", line 300, in _read_status\r\n    raise RemoteDisconnected(\"Remote end closed connection without\"\r\nhttp.client.RemoteDisconnected: Remote end closed connection without response\r\n2025-07-25T10:37:30.170430Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\r\n2025-07-25T10:37:30.170649Z TestFramework (WARNING): Not cleaning up dir /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242\r\n2025-07-25T10:37:30.170732Z TestFramework (ERROR): Test failed. Test logging available at /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/test_framework.log\r\n2025-07-25T10:37:30.171130Z TestFramework (ERROR): \r\n2025-07-25T10:37:30.171630Z TestFramework (ERROR): Hint: Call /ci_container_base/test/functional/combine_logs.py '/ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242' to consolidate all logs\r\n2025-07-25T10:37:30.171799Z TestFramework (ERROR): \r\n2025-07-25T10:37:30.171906Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2025-07-25T10:37:30.172049Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2025-07-25T10:37:30.172133Z TestFramework (ERROR): \r\n\r\n\r\nstderr:\r\n[node 0] Cleaning up leftover process\r\n\r\n\r\nCombine the logs and print the last 99999999 lines ...\r\n\r\n============\r\nCombined log for /ci_container_base/ci/scratch/test_runner//test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242:\r\n============\r\n\r\n test  2025-07-25T10:37:15.282773Z TestFramework (INFO): PRNG seed is: 9066748361541480888 \r\n test  2025-07-25T10:37:15.282988Z TestFramework (DEBUG): Setting up network thread \r\n test  2025-07-25T10:37:15.283864Z TestFramework (INFO): Initializing test directory /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242 \r\n test  2025-07-25T10:37:15.286296Z TestFramework.node0 (DEBUG): bitcoind started, waiting for RPC to come up \r\n test  2025-07-25T10:37:15.288884Z TestFramework.node1 (DEBUG): bitcoind started, waiting for RPC to come up \r\n node0 2025-07-25T10:37:15.313892Z [init] [init/common.cpp:151] [void init::LogPackageVersion()] Bitcoin Core version v29.99.0-443c32a3e686-dirty (release build) \r\n node0 2025-07-25T10:37:15.313940Z [init] [init.cpp:731] [void InitParameterInteraction(ArgsManager &)] parameter interaction: -bind set -> setting -listen=1 \r\n node0 2025-07-25T10:37:15.314658Z [init] [kernel/context.cpp:20] [auto kernel::Context::Context()::(anonymous class)::operator()() const] Using the 'arm_shani(1way,2way)' SHA256 implementation \r\n node1 2025-07-25T10:37:15.316791Z [init] [init/common.cpp:151] [void init::LogPackageVersion()] Bitcoin Core version v29.99.0-443c32a3e686-dirty (release build) \r\n node1 2025-07-25T10:37:15.316825Z [init] [init.cpp:731] [void InitParameterInteraction(ArgsManager &)] parameter interaction: -bind set -> setting -listen=1 \r\n node1 2025-07-25T10:37:15.317582Z [init] [kernel/context.cpp:20] [auto kernel::Context::Context()::(anonymous class)::operator()() const] Using the 'arm_shani(1way,2way)' SHA256 implementation \r\n node0 2025-07-25T10:37:15.420537Z [init] [init/common.cpp:119] [bool init::StartLogging(const ArgsManager &)] Default data directory /root/.bitcoin \r\n node0 2025-07-25T10:37:15.420605Z [init] [init/common.cpp:120] [bool init::StartLogging(const ArgsManager &)] Using data directory /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/node0/regtest \r\n node0 2025-07-25T10:37:15.420697Z [init] [init/common.cpp:129] [bool init::StartLogging(const ArgsManager &)] Config file: /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/node0/bitcoin.conf \r\n node0 2025-07-25T10:37:15.420826Z [init] [common/args.cpp:850] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Config file arg: regtest=\"1\" \r\n node0 2025-07-25T10:37:15.420924Z [init] [common/args.cpp:850] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Config file arg: [regtest] bind=\"127.0.0.1\" \r\n node0 2025-07-25T10:37:15.420984Z [init] [common/args.cpp:850] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Config file arg: [regtest] connect=\"0\" \r\n node0 2025-07-25T10:37:15.421061Z [init] [common/args.cpp:850] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Config file arg: [regtest] discover=\"0\" \r\n node0 2025-07-25T10:37:15.421119Z [init] [common/args.cpp:850] [void ArgsManager::logArgsPrefix(const std::string &, const std::string &, const std::map<std::string, std::vector<common::SettingsValue>> &) const] Config file arg: [regtest] dnsseed=\"0\" \r\n <snip>\r\n node0 2025-07-25T10:37:29.304838Z [httpworker.3] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=listwallets user=__cookie__ \r\n node0 2025-07-25T10:37:29.507042Z [http] [httpserver.cpp:308] [void http_request_cb(struct evhttp_request *, void *)] [http] Received a POST request for / from 127.0.0.1:39730 \r\n node0 2025-07-25T10:37:29.507621Z [httpworker.4] [rpc/request.cpp:243] [void JSONRPCRequest::parse(const UniValue &)] [rpc] ThreadRPCServer method=listwallets user=__cookie__ \r\n test  2025-07-25T10:37:30.117073Z TestFramework (ERROR): Unexpected exception \r\n                                   Traceback (most recent call last):\r\n                                     File \"/ci_container_base/test/functional/test_framework/test_framework.py\", line 195, in main\r\n                                       self.run_test()\r\n                                     File \"/ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/test/functional/wallet_multiwallet.py\", line 366, in run_test\r\n                                       ensure_for(duration=1.1, f=lambda: 'w2' not in self.nodes[0].listwallets())\r\n                                     File \"/ci_container_base/test/functional/test_framework/util.py\", line 289, in ensure_for\r\n                                       if not f():\r\n                                              ^^^\r\n                                     File \"/ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/test/functional/wallet_multiwallet.py\", line 366, in <lambda>\r\n                                       ensure_for(duration=1.1, f=lambda: 'w2' not in self.nodes[0].listwallets())\r\n                                                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 137, in __call__\r\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 111, in _request\r\n                                       return self._get_response()\r\n                                              ^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/ci_container_base/test/functional/test_framework/authproxy.py\", line 174, in _get_response\r\n                                       http_response = self.__conn.getresponse()\r\n                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/usr/lib/python3.12/http/client.py\", line 1428, in getresponse\r\n                                       response.begin()\r\n                                     File \"/usr/lib/python3.12/http/client.py\", line 331, in begin\r\n                                       version, status, reason = self._read_status()\r\n                                                                 ^^^^^^^^^^^^^^^^^^^\r\n                                     File \"/usr/lib/python3.12/http/client.py\", line 300, in _read_status\r\n                                       raise RemoteDisconnected(\"Remote end closed connection without\"\r\n                                   http.client.RemoteDisconnected: Remote end closed connection without response\r\n test  2025-07-25T10:37:30.119931Z TestFramework (DEBUG): Closing down network thread \r\n test  2025-07-25T10:37:30.170430Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later. \r\n test  2025-07-25T10:37:30.170649Z TestFramework (WARNING): Not cleaning up dir /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242 \r\n test  2025-07-25T10:37:30.170732Z TestFramework (ERROR): Test failed. Test logging available at /ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/test_framework.log \r\n test  2025-07-25T10:37:30.171130Z TestFramework (ERROR): \r\n test  2025-07-25T10:37:30.171630Z TestFramework (ERROR): Hint: Call /ci_container_base/test/functional/combine_logs.py '/ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242' to consolidate all logs \r\n test  2025-07-25T10:37:30.171799Z TestFramework (ERROR): \r\n test  2025-07-25T10:37:30.171906Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log. \r\n test  2025-07-25T10:37:30.172049Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues \r\n test  2025-07-25T10:37:30.172133Z TestFramework (ERROR): \r\n\r\n node0 stderr ==================\r\nWARNING: ThreadSanitizer: data race (pid=17110)\r\n  Write of size 8 at 0xffff92417b20 by thread T1 (mutexes: write M0):\r\n    #0 operator delete(void*, unsigned long) <null> (bitcoind+0x1af774) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #1 void std::__1::__libcpp_operator_delete[abi:ne200100]<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long>(std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__new/allocate.h:46:3 (bitcoind+0x741cd8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #2 void std::__1::__libcpp_deallocate[abi:ne200100]<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>(std::__1::__type_identity<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>::type*, std::__1::__element_count, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__new/allocate.h:86:12 (bitcoind+0x741cd8)\r\n    #3 std::__1::allocator<std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>>::deallocate[abi:ne200100](std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>*, unsigned long) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/allocator.h:120:7 (bitcoind+0x741cd8)\r\n    #4 std::__1::__shared_ptr_pointer<wallet::CWallet*, void (*)(wallet::CWallet*), std::__1::allocator<wallet::CWallet>>::__on_zero_shared_weak() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:134:7 (bitcoind+0x741cd8)\r\n    #5 std::__1::weak_ptr<wallet::CWallet>::~weak_ptr() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:1315:15 (bitcoind+0x7e2bcc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #6 wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()::~() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/wallet/./wallet/rpc/encrypt.cpp:102:40 (bitcoind+0x7e2bcc)\r\n    #7 std::__1::__function::__alloc_func<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'(), std::__1::allocator<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()>, void ()>::destroy[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:181:14 (bitcoind+0x7e2bcc)\r\n    #8 std::__1::__function::__func<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'(), std::__1::allocator<wallet::walletpassphrase()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const::'lambda'()>, void ()>::destroy() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:305:8 (bitcoind+0x7e2bcc)\r\n    #9 std::__1::__function::__value_func<void ()>::~__value_func[abi:ne200100]() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./scheduler.h (bitcoind+0x9f0af0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #10 std::__1::function<void ()>::~function() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:986:43 (bitcoind+0x9f0af0)\r\n    #11 CScheduler::serviceQueue() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./scheduler.cpp:62:9 (bitcoind+0x9f0af0)\r\n    #12 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7::operator()() const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./init.cpp:1364:94 (bitcoind+0x1d383c) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #13 decltype(std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&>()()) std::__1::__invoke[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x1d383c)\r\n    #14 void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne200100]<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:251:5 (bitcoind+0x1d383c)\r\n    #15 void std::__1::__invoke_r[abi:ne200100]<void, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&>(AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x1d383c)\r\n    #16 std::__1::__function::__alloc_func<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7, std::__1::allocator<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>, void ()>::operator()[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x1d383c)\r\n    #17 std::__1::__function::__func<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7, std::__1::allocator<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>, void ()>::operator()() /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x1d383c)\r\n    #18 std::__1::__function::__value_func<void ()>::operator()[abi:ne200100]() const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0xab77f8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #19 std::__1::function<void ()>::operator()() const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0xab77f8)\r\n    #20 util::TraceThread(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/util/./util/thread.cpp:21:9 (bitcoind+0xab77f8)\r\n    #21 decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<char const*>(), std::declval<AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>())) std::__1::__invoke[abi:ne200100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*&&, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x1d33c0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #22 void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:199:3 (bitcoind+0x1d33c0)\r\n    #23 void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const*, AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7>>(void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:208:3 (bitcoind+0x1d33c0)\r\n\r\n  Previous read of size 8 at 0xffff92417b20 by thread T16:\r\n    #0 std::__1::__shared_count::__release_shared[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_count.h:91:7 (bitcoind+0x6f70cc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #1 std::__1::__shared_weak_count::__release_shared[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_count.h:120:25 (bitcoind+0x6f70cc)\r\n    #2 std::__1::shared_ptr<wallet::CWallet>::~shared_ptr[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:558:17 (bitcoind+0x6f70cc)\r\n    #3 std::__1::shared_ptr<wallet::CWallet>::reset[abi:ne200100]() /usr/lib/llvm-20/bin/../include/c++/v1/__memory/shared_ptr.h:608:50 (bitcoind+0x6f70cc)\r\n    #4 wallet::WaitForDeleteWallet(std::__1::shared_ptr<wallet::CWallet>&&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/wallet/./wallet/wallet.cpp:264:12 (bitcoind+0x6f70cc)\r\n    #5 wallet::unloadwallet()::$_0::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/wallet/./wallet/rpc/wallet.cpp:490:5 (bitcoind+0x6a3ad0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #6 decltype(std::declval<wallet::unloadwallet()::$_0&>()(std::declval<RPCHelpMan const&>(), std::declval<JSONRPCRequest const&>())) std::__1::__invoke[abi:ne200100]<wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x6a3ad0)\r\n    #7 UniValue std::__1::__invoke_void_return_wrapper<UniValue, false>::__call[abi:ne200100]<wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x6a3ad0)\r\n    #8 UniValue std::__1::__invoke_r[abi:ne200100]<UniValue, wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&>(wallet::unloadwallet()::$_0&, RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x6a3ad0)\r\n    #9 std::__1::__function::__alloc_func<wallet::unloadwallet()::$_0, std::__1::allocator<wallet::unloadwallet()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:ne200100](RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x6a3ad0)\r\n    #10 std::__1::__function::__func<wallet::unloadwallet()::$_0, std::__1::allocator<wallet::unloadwallet()::$_0>, UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x6a3ad0)\r\n    #11 std::__1::__function::__value_func<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()[abi:ne200100](RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x9da0e0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #12 std::__1::function<UniValue (RPCHelpMan const&, JSONRPCRequest const&)>::operator()(RPCHelpMan const&, JSONRPCRequest const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x9da0e0)\r\n    #13 RPCHelpMan::HandleRequest(JSONRPCRequest const&) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/util.cpp:663:20 (bitcoind+0x9da0e0)\r\n    #14 CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/server.h:60:91 (bitcoind+0x3f7570) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #15 decltype(std::declval<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x3f7570)\r\n    #16 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x3f7570)\r\n    #17 bool std::__1::__invoke_r[abi:ne200100]<bool, CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x3f7570)\r\n    #18 std::__1::__function::__alloc_func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x3f7570)\r\n    #19 std::__1::__function::__func<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<CRPCCommand::CRPCCommand(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, RPCHelpMan (*)())::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x3f7570)\r\n    #20 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x65c7a8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #21 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x65c7a8)\r\n    #22 wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/wallet/./wallet/interfaces.cpp:562:24 (bitcoind+0x65c7a8)\r\n    #23 decltype(std::declval<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x65c7a8)\r\n    #24 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x65c7a8)\r\n    #25 bool std::__1::__invoke_r[abi:ne200100]<bool, wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x65c7a8)\r\n    #26 std::__1::__function::__alloc_func<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x65c7a8)\r\n    #27 std::__1::__function::__func<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<wallet::(anonymous namespace)::WalletLoaderImpl::registerRpcs()::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x65c7a8)\r\n    #28 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x31c3fc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #29 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x31c3fc)\r\n    #30 node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)::operator()(JSONRPCRequest const&, UniValue&, bool) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./node/interfaces.cpp:511:24 (bitcoind+0x31c3fc)\r\n    #31 decltype(std::declval<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&>()(std::declval<JSONRPCRequest const&>(), std::declval<UniValue&>(), std::declval<bool>())) std::__1::__invoke[abi:ne200100]<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x31c3fc)\r\n    #32 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x31c3fc)\r\n    #33 bool std::__1::__invoke_r[abi:ne200100]<bool, node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool>(node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)&, JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x31c3fc)\r\n    #34 std::__1::__function::__alloc_func<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x31c3fc)\r\n    #35 std::__1::__function::__func<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool), std::__1::allocator<node::(anonymous namespace)::RpcHandlerImpl::RpcHandlerImpl(CRPCCommand const&)::'lambda'(JSONRPCRequest const&, UniValue&, bool)>, bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool&&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x31c3fc)\r\n    #36 std::__1::__function::__value_func<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()[abi:ne200100](JSONRPCRequest const&, UniValue&, bool&&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x5147e0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #37 std::__1::function<bool (JSONRPCRequest const&, UniValue&, bool)>::operator()(JSONRPCRequest const&, UniValue&, bool) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x5147e0)\r\n    #38 ExecuteCommand(CRPCCommand const&, JSONRPCRequest const&, UniValue&, bool) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/server.cpp:504:20 (bitcoind+0x5147e0)\r\n    #39 ExecuteCommands(std::__1::vector<CRPCCommand const*, std::__1::allocator<CRPCCommand const*>> const&, JSONRPCRequest const&, UniValue&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/server.cpp:471:13 (bitcoind+0x5147e0)\r\n    #40 CRPCTable::execute(JSONRPCRequest const&) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/server.cpp:491:13 (bitcoind+0x513848) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #41 JSONRPCExec(JSONRPCRequest const&, bool) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./rpc/server.cpp:347:31 (bitcoind+0x513070) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #42 HTTPReq_JSONRPC(std::__1::any const&, HTTPRequest*) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httprpc.cpp:165:21 (bitcoind+0x61a3cc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #43 StartHTTPRPC(std::__1::any const&)::$_0::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httprpc.cpp:337:80 (bitcoind+0x61a3cc)\r\n    #44 decltype(std::declval<StartHTTPRPC(std::__1::any const&)::$_0&>()(std::declval<HTTPRequest*>(), std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>())) std::__1::__invoke[abi:ne200100]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x61a3cc)\r\n    #45 bool std::__1::__invoke_void_return_wrapper<bool, false>::__call[abi:ne200100]<StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:243:12 (bitcoind+0x61a3cc)\r\n    #46 bool std::__1::__invoke_r[abi:ne200100]<bool, StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&>(StartHTTPRPC(std::__1::any const&)::$_0&, HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:273:10 (bitcoind+0x61a3cc)\r\n    #47 std::__1::__function::__alloc_func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:ne200100](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:167:12 (bitcoind+0x61a3cc)\r\n    #48 std::__1::__function::__func<StartHTTPRPC(std::__1::any const&)::$_0, std::__1::allocator<StartHTTPRPC(std::__1::any const&)::$_0>, bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:319:10 (bitcoind+0x61a3cc)\r\n    #49 std::__1::__function::__value_func<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()[abi:ne200100](HTTPRequest*&&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:436:12 (bitcoind+0x626e64) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #50 std::__1::function<bool (HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&)>::operator()(HTTPRequest*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>> const&) const /usr/lib/llvm-20/bin/../include/c++/v1/__functional/function.h:995:10 (bitcoind+0x626e64)\r\n    #51 HTTPWorkItem::operator()() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httpserver.cpp:62:9 (bitcoind+0x626e64)\r\n    #52 WorkQueue<HTTPClosure>::Run() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httpserver.cpp:117:13 (bitcoind+0x6297a8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #53 HTTPWorkQueueRun(WorkQueue<HTTPClosure>*, int) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httpserver.cpp:419:12 (bitcoind+0x6216e8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #54 decltype(std::declval<void (*)(WorkQueue<HTTPClosure>*, int)>()(std::declval<WorkQueue<HTTPClosure>*>(), std::declval<int>())) std::__1::__invoke[abi:ne200100]<void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>(void (*&&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&&) /usr/lib/llvm-20/bin/../include/c++/v1/__type_traits/invoke.h:179:25 (bitcoind+0x629490) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #55 void std::__1::__thread_execute[abi:ne200100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int, 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:199:3 (bitcoind+0x629490)\r\n    #56 void* std::__1::__thread_proxy[abi:ne200100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int>>(void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:208:3 (bitcoind+0x629490)\r\n\r\n  Mutex M0 (0xffff90401dd8) created at:\r\n    #0 pthread_mutex_trylock <null> (bitcoind+0x12017c) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #1 std::__1::mutex::try_lock() <null> (libc++.so.1+0x6d524) (BuildId: d86dd6c86e9893451404de81c223ae225f27a256)\r\n    #2 UniqueLock<AnnotatedMixin<std::__1::mutex>>::UniqueLock(AnnotatedMixin<std::__1::mutex>&, char const*, char const*, int, bool) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./sync.h:183:13 (bitcoind+0x9f0fb8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #3 CScheduler::schedule(std::__1::function<void ()>, std::__1::chrono::time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l>>>) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./scheduler.cpp:74:9 (bitcoind+0x9f0fb8)\r\n    #4 CScheduler::scheduleFromNow(std::__1::function<void ()>, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l>>) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./scheduler.h:55:9 (bitcoind+0x267dcc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #5 CScheduler::scheduleEvery(std::__1::function<void ()>, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l>>) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./scheduler.cpp:110:5 (bitcoind+0x9f1594) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #6 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./init.cpp:1367:15 (bitcoind+0x1c7974) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #7 AppInit(node::NodeContext&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:237:43 (bitcoind+0x1b1168) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #8 main /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:283:10 (bitcoind+0x1b1168)\r\n\r\n  Thread T1 'b-scheduler' (tid=17117, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0x11dbb0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #1 std::__1::__libcpp_thread_create[abi:ne200100](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/support/pthread.h:182:10 (bitcoind+0x1c790c) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #2 std::__1::thread::thread<void (&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const (&) [10], AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7, 0>(void (&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), char const (&) [10], AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*)::$_7&&) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:218:14 (bitcoind+0x1c790c)\r\n    #3 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./init.cpp:1364:34 (bitcoind+0x1c790c)\r\n    #4 AppInit(node::NodeContext&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:237:43 (bitcoind+0x1b1168) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #5 main /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:283:10 (bitcoind+0x1b1168)\r\n\r\n  Thread T16 'b-httpworker.13' (tid=17216, running) created by main thread at:\r\n    #0 pthread_create <null> (bitcoind+0x11dbb0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #1 std::__1::__libcpp_thread_create[abi:ne200100](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/support/pthread.h:182:10 (bitcoind+0x629364) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #2 std::__1::thread::thread<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, 0>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__thread/thread.h:218:14 (bitcoind+0x629364)\r\n    #3 std::__1::thread* std::__1::construct_at[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, std::__1::thread*>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/construct_at.h:40:49 (bitcoind+0x6213f0) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #4 std::__1::thread* std::__1::__construct_at[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, std::__1::thread*>(std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/construct_at.h:48:10 (bitcoind+0x6213f0)\r\n    #5 void std::__1::allocator_traits<std::__1::allocator<std::__1::thread>>::construct[abi:ne200100]<std::__1::thread, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&, void, 0>(std::__1::allocator<std::__1::thread>&, std::__1::thread*, void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__memory/allocator_traits.h:318:5 (bitcoind+0x6213f0)\r\n    #6 void std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::__construct_one_at_end[abi:ne200100]<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__vector/vector.h:742:5 (bitcoind+0x6213f0)\r\n    #7 std::__1::thread& std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::emplace_back<void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*, int&>(void (&)(WorkQueue<HTTPClosure>*, int), WorkQueue<HTTPClosure>*&&, int&) /usr/lib/llvm-20/bin/../include/c++/v1/__vector/vector.h:1133:5 (bitcoind+0x6213f0)\r\n    #8 StartHTTPServer() /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./httpserver.cpp:508:31 (bitcoind+0x6213f0)\r\n    #9 AppInitServers(node::NodeContext&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./init.cpp:720:5 (bitcoind+0x1cf4a8) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #10 AppInitMain(node::NodeContext&, interfaces::BlockAndHeaderTipInfo*) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./init.cpp:1456:14 (bitcoind+0x1c83cc) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #11 AppInit(node::NodeContext&) /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:237:43 (bitcoind+0x1b1168) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8)\r\n    #12 main /ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/src/./bitcoind.cpp:283:10 (bitcoind+0x1b1168)\r\n\r\nSUMMARY: ThreadSanitizer: data race (/ci_container_base/ci/scratch/build-aarch64-unknown-linux-gnu/bin/bitcoind+0x1af774) (BuildId: b2fa3bc40a41b9880f72bdbcb3cd045b97456fe8) in operator delete(void*, unsigned long)\r\n================== \r\n node0 stderr Error: Invalid -wallet path 'w8_symlink'. -wallet path should point to a directory where wallet.dat and database/log.?????????? files can be stored, a location where such a directory could be created, or (for backwards compatibility) the name of an existing data file in -walletdir (\"/ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/node0/regtest/wallets\") \r\n node0 stderr Error: Specified -walletdir \"debug.log\" is not a directory \r\n node0 stderr Error: Specified -walletdir \"/ci_container_base/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250725_103610/wallet_multiwallet_242/node0/regtest/wallets/notadir\" is not a directory \r\n node0 stderr Error: Specified -walletdir \"wallets\" is a relative path \r\n node0 stderr Error: Specified -walletdir \"bad\" does not exist \r\n node0 stderr Warning: Ignoring duplicate -wallet w1. \r\n node0 stderr Error: Specified -walletdir \"wallets\" does not exist \r\n node0 stderr Error: Error parsing command line arguments: Invalid parameter -upgradewallet \r\n node1 stderr Error: SQLiteDatabase: Unable to obtain an exclusive lock on the database, is it being used by another instance of Bitcoin Core? \r\n```\r\n\r\n</details>",
          "created_at": "2025-07-25T10:57:22Z"
        },
        {
          "user": "pinheadmz",
          "body": "I'm unable to reproduce so far building master at 6cdc5a90cffe9ced4ec50d2028c9896d25a9cb6a\r\n\r\n\r\non Debian:\r\n\r\n`cmake -B ./bld-cmake -DCMAKE_C_COMPILER='clang-16' -DCMAKE_CXX_COMPILER='clang++-16' -DCMAKE_CXX_FLAGS='-std=c++20' -DBUILD_GUI=OFF -DBUILD_TESTS=OFF  -DSANITIZERS=thread && cmake --build ./bld-cmake --parallel $( nproc ) && TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan:halt_on_error=1:second_deadlock_stack=1\" ./bld-cmake/test/functional/wallet_multiwallet.py`\r\n\r\non macos (AppleClang 16.0.0)\r\n\r\n`cmake -B ./bld-cmake -DBUILD_GUI=OFF -DBUILD_TESTS=OFF  -DSANITIZERS=thread && cmake --build ./bld-cmake --parallel $( nproc ) && TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan:halt_on_error=1:second_deadlock_stack=1\" ./bld-cmake/test/functional/wallet_multiwallet.py`",
          "created_at": "2025-07-25T15:43:03Z"
        },
        {
          "user": "maflcko",
          "body": "> I'm unable to reproduce so far building master at [6cdc5a9](https://github.com/bitcoin/bitcoin/commit/6cdc5a90cffe9ced4ec50d2028c9896d25a9cb6a)\r\n\r\nYou'll have to use libc++, I guess?",
          "created_at": "2025-07-28T10:45:37Z"
        },
        {
          "user": "pinheadmz",
          "body": "Ok got a reliable crash on debian after upgrading to clang-20:\r\n\r\n```\r\n~/bitcoin$ rm -rf ./bld-cmake && \\\r\ncmake -B ./bld-cmake \\\r\n -DCMAKE_C_COMPILER='clang-20' \\\r\n -DCMAKE_CXX_COMPILER='clang++-20;-stdlib=libc++' \\\r\n -DBUILD_GUI=OFF \\\r\n -DBUILD_TESTS=OFF \\\r\n -DSANITIZERS=thread && \\\r\ncmake --build ./bld-cmake --parallel $( nproc ) && \\\r\nTSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan:halt_on_error=1:second_deadlock_stack=1\" ./bld-cmake/test/functional/wallet_multiwallet.py\r\n```\r\n\r\nStill could not reproduce on macos using clang-20 and essentially the same command, but will use debian to investigate and try to fix",
          "created_at": "2025-07-28T14:43:49Z"
        },
        {
          "user": "maflcko",
          "body": "It looks like a false positive, so I guess if you really want to fix it, you'll have to do it upstream.",
          "created_at": "2025-07-28T14:45:36Z"
        },
        {
          "user": "theuni",
          "body": "Looks like https://github.com/llvm/llvm-project/issues/111048 to me?",
          "created_at": "2025-07-29T16:23:36Z"
        },
        {
          "user": "theuni",
          "body": "Nm, I misunderstood that report. We don't have a shared lib missing instrumentation.\r\n\r\nEdit: Nope, looking again, the problem seems to be that `libc++` itself isn't instrumented.",
          "created_at": "2025-07-29T16:30:03Z"
        },
        {
          "user": "fanquake",
          "body": "> the problem seems to be that libc++ itself isn't instrumented.\r\n\r\nFollowing up on this in #33099.",
          "created_at": "2025-07-30T12:04:20Z"
        }
      ]
    },
    {
      "number": 32861,
      "title": "Have createwalletdescriptor auto-detect an unused(KEY)",
      "body": "The `createwalletdescriptor` was introduced in #29130 to let users add a `tr()` descriptor to an existing SegWit wallet. The new `addhdkey` method from #29136 introduces a new potential workflow: start from a blank wallet, generate an HD and then add only the descriptors you need, e.g.:\r\n\r\n```sh\r\nbitcoin rpc createwallet TaprootMaxi blank=true\r\nbitcoin rpc addhdkey\r\nbitcoin rpc createwalletdescriptor bech32m\r\n```\r\n\r\nBefore this PR the last line would fail, requiring the user to call `gethdkeys` and copy-paste the xpub.\r\n\r\nThis PR makes `createwalletdescriptor` a bit smarter so it just finds the `unused(KEY)` generated by `hdkey` and uses that.\r\n\r\nIf multiple `unused(KEY)` descriptors are present the user still has to pick one.\r\n\r\nA potential followup is to make our [multisig tutorial](https://github.com/bitcoin/bitcoin/blob/master/doc/multisig-tutorial.md) slightly safer to use. Rather than creating a full wallet, the instruction could be changed to start with a blank wallet and only generate the default legacy descriptor. This avoids accidental use of single sig `p2sh-segwit` and `bech32` addresses.\r\n\r\n(I might do that in #32784, which introduces some other improvements to the tutorial. The situation is still not great; ideally the `importdescriptors` RPC is enhanced to detect when an `xpub` is a child of an hd key and then treats it as if an xpriv was imported.)\r\n\r\nBuilds on #29136.",
      "state": "open",
      "user": "Sjors",
      "created_at": "2025-07-03T08:55:40Z",
      "updated_at": "2026-01-06T11:57:45Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32861",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32861.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33874](https://github.com/bitcoin/bitcoin/pull/33874) (wallet: refactor ProcessDescriptorImport by naiyoma)\n* [#33008](https://github.com/bitcoin/bitcoin/pull/33008) (wallet: support bip388 policy with external signer by Sjors)\n* [#32489](https://github.com/bitcoin/bitcoin/pull/32489) (wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet by achow101)\n* [#31668](https://github.com/bitcoin/bitcoin/pull/31668) (Added rescan option for import descriptors by saikiran57)\n* [#29136](https://github.com/bitcoin/bitcoin/pull/29136) (wallet: `addhdkey` RPC to add just keys to wallets via new `unused(KEY)` descriptor by achow101)\n* [#28333](https://github.com/bitcoin/bitcoin/pull/28333) (wallet: Construct ScriptPubKeyMans with all data rather than loaded progressively by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (‚ú® experimental)\n\n\n\nPossible places where named args for integral literals may be used (e.g. `func(x, /*named_arg=*/0)` in C++, and `func(x, named_arg=0)` in Python):\n\n- Parse(desc_str, keys, error, false) in src/wallet/rpc/wallet.cpp\n\n\n\n<sup>2026-01-05</sup>\n",
          "created_at": "2025-07-03T08:55:45Z"
        },
        {
          "user": "rkrux",
          "body": "> This PR makes createwalletdescriptor a bit smarter so it just finds the unused(KEY) generated by hdkey and uses that.\r\n\r\nOnce the unused(KEY) descriptor is used, doesn't it become used? Keeping it as an unused descriptor later might come across as confusing.",
          "created_at": "2025-07-18T09:38:11Z"
        },
        {
          "user": "Sjors",
          "body": "> Keeping it as an unused descriptor later might come across as confusing.\r\n\r\nI agree, and it was also brought up here: https://github.com/bitcoin/bitcoin/pull/29136#issuecomment-1868202696. It's orthogonal to this PR.",
          "created_at": "2025-07-18T09:50:28Z"
        },
        {
          "user": "rkrux",
          "body": "Thanks, I recall reading this comment earlier but forgot about it later. If I am not missing anything, I don't suppose this point is orthogonal to this PR? \r\n\r\nThe linked comment also states that any RPC using the unused descriptor should delete it immediately afterwords.\r\n> add logic to importdescriptors and generatewalletdescriptor to delete any unused(KEY) descriptor as soon as the KEY which it references is used by an new descriptor (taking into account both public and private parts of the key)\r\n\r\nI don't believe `generatewalletdescriptor` is present as an RPC in the codebase, and `createwalletdescriptor` stores the newly created descriptor in the database as I verified from the below patch. I can see the unused descriptor present after this RPC as well. Shouldn't we add the deletion of the unused descriptor in this PR itself?\r\n\r\n```diff\r\ndiff --git a/test/functional/wallet_createwalletdescriptor.py b/test/functional/wallet_createwalletdescriptor.py\r\nindex 6de0ca4782..a7086c5b9e 100755\r\n--- a/test/functional/wallet_createwalletdescriptor.py\r\n+++ b/test/functional/wallet_createwalletdescriptor.py\r\n@@ -125,7 +125,11 @@ class WalletCreateDescriptorTest(BitcoinTestFramework):\r\n \r\n         # Create unused(KEY) descriptor and try again\r\n         w1.addhdkey()\r\n+        print(\"listdescriptors: \", w1.listdescriptors())\r\n+        print(\"gethdkeys: \", w1.gethdkeys())\r\n         w1.createwalletdescriptor(type=\"bech32\")\r\n+        print(\"listdescriptors: \", w1.listdescriptors())\r\n+        print(\"gethdkeys: \", w1.gethdkeys())\r\n \r\n         self.nodes[0].createwallet(\"w2\", blank=True)\r\n         w2 = self.nodes[0].get_wallet_rpc(\"w2\")\r\n(END)\r\n```",
          "created_at": "2025-07-18T10:19:13Z"
        },
        {
          "user": "Sjors",
          "body": "> The linked comment also states that any RPC using the unused descriptor should delete it immediately afterwords.\r\n\r\nThat should be done in #29136 which introduces `createwalletdescriptor `, or in a followup, but not in this PR (which consists of only the last two commits).",
          "created_at": "2025-07-25T07:12:28Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32870,
      "title": "fuzz: Speed up mini_miner fuzz target?",
      "body": "Looks like it is somewhat slow (c.f. https://cirrus-ci.com/task/6602192649453568?logs=ci#L5401), so it would be nice to make it faster.\n\nPossibly with txgraph, see https://github.com/bitcoin-core/qa-assets/pull/227#issuecomment-3032434420",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-07-03T15:39:00Z",
      "updated_at": "2025-09-20T13:56:19Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/32870",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "enirox001",
          "body": "Interested in working on speeding up the mini_miner fuzz target. Are you already on this, or should I take a stab at it?\n",
          "created_at": "2025-07-07T12:51:07Z"
        },
        {
          "user": "maflcko",
          "body": "I am not. If you want to work on something, you can just do it without asking. In case there are two pull requests for the same thing, the authors should be glad about it, because they should be qualified to review each others pull request and pick the one that is more suitable to be merged.",
          "created_at": "2025-07-07T13:17:55Z"
        },
        {
          "user": "warp-records",
          "body": "> Looks like it is somewhat slow (c.f. https://cirrus-ci.com/task/6602192649453568?logs=ci#L5401), so it would be nice to make it faster.\n> \n> Possibly with txgraph, see [bitcoin-core/qa-assets#227 (comment)](https://github.com/bitcoin-core/qa-assets/pull/227#issuecomment-3032434420)\n\nCan you close this now?",
          "created_at": "2025-07-29T19:29:28Z"
        },
        {
          "user": "fanquake",
          "body": "No, this is still an issue. See here: https://github.com/bitcoin/bitcoin/pull/33425#issuecomment-3307360138. `mini_miner` is running for ~half an hour. cc @murchandamus @glozow ",
          "created_at": "2025-09-18T13:13:32Z"
        },
        {
          "user": "glozow",
          "body": "Unsure what the best course of action is, since the plan is to reimplement MiniMiner anyway after #28676. If there's a timeout/infinite loop then that's a bug we should fix for current wallet users. But if it's just a slow test, then I'd suggest leaving it as is and it will probably fix itself when mempool is more efficient at cluster calculation.\n\nI haven't looked into the input itself (idk if @enirox001 or somebody wants to do it) but if the culprit is just too many potential outpoints then we can knock that down as an intermediate fix.",
          "created_at": "2025-09-18T13:34:49Z"
        },
        {
          "user": "fanquake",
          "body": "Think we can close this based on #33429.",
          "created_at": "2025-09-20T13:56:19Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 10,
    "issues": 1
  }
}