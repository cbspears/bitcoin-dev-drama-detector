{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:53:50.102257+00:00",
  "date": "2025-07-01",
  "pull_requests": [
    {
      "number": 32850,
      "title": "test: check P2SH sigop count for coinbase tx",
      "body": "We currently do not test that `GetP2SHSigOpCount` returns 0 for coinbase transactions (see line L129 at https://corecheck.dev/mutation/src/consensus/tx_verify.cpp). This PR addresses it.",
      "state": "closed",
      "user": "brunoerg",
      "created_at": "2025-07-01T15:10:15Z",
      "updated_at": "2025-07-03T12:59:12Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32850",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32850.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/32850#pullrequestreview-2976370364), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32850#pullrequestreview-2976606694), [ishaanam](https://github.com/bitcoin/bitcoin/pull/32850#pullrequestreview-2976751489), [darosior](https://github.com/bitcoin/bitcoin/pull/32850#issuecomment-3027122136), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32850#pullrequestreview-2980935709) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29060](https://github.com/bitcoin/bitcoin/pull/29060) (Policy: Report reason inputs are non standard by ismaelsadeeq)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-01T15:10:20Z"
        },
        {
          "user": "maflcko",
          "body": "the branch is dead code outside of tests, so it could also be removed/disabled. Though, it may be better to add a test than to refactor the consensus code here. So lgtm",
          "created_at": "2025-07-02T07:49:38Z"
        },
        {
          "user": "darosior",
          "body": "Yeah, i think it's preferable to remove dead code than to test it:\r\n```diff\r\ndiff --git a/src/consensus/tx_verify.cpp b/src/consensus/tx_verify.cpp\r\nindex 95466b759cb..5036e26e21a 100644\r\n--- a/src/consensus/tx_verify.cpp\r\n+++ b/src/consensus/tx_verify.cpp\r\n@@ -125,8 +125,7 @@ unsigned int GetLegacySigOpCount(const CTransaction& tx)\r\n \r\n unsigned int GetP2SHSigOpCount(const CTransaction& tx, const CCoinsViewCache& inputs)\r\n {\r\n-    if (tx.IsCoinBase())\r\n-        return 0;\r\n+    Assert(!tx.IsCoinBase());\r\n \r\n     unsigned int nSigOps = 0;\r\n     for (unsigned int i = 0; i < tx.vin.size(); i++)\r\n```\r\n\r\n(If you do this you might need to adapt fuzz targets.)\r\n\r\nThat said, i guess unit-tested dead consensus code is better than not-unit-tested dead consensus code. utACK d6aaffcb11adcf47480fcc5081af9dcb732decf3",
          "created_at": "2025-07-02T09:23:41Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 29.x in #32863.",
          "created_at": "2025-07-03T11:17:24Z"
        },
        {
          "user": "l0rinc",
          "body": "post-merge crACK",
          "created_at": "2025-07-03T11:32:02Z"
        }
      ]
    },
    {
      "number": 32847,
      "title": "Rename CMake required flags variable in crc32c",
      "body": "\r\n\r\n```markdown\r\n\r\nThis pull request fixes a typo in the variable name used to restore CMake required flags in `src/crc32c/CMakeLists.txt`\r\n\r\n- Corrected `REQURED` â†’ `REQUIRED`\r\n- Ensures the correct variable is referenced when resetting CMake flags\r\n\r\n```\r\n",
      "state": "closed",
      "user": "vtjl10",
      "created_at": "2025-07-01T09:43:18Z",
      "updated_at": "2025-07-01T09:44:31Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/32847",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32847.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-01T09:43:22Z"
        },
        {
          "user": "fanquake",
          "body": "Changes to this subtree should go to https://github.com/bitcoin-core/crc32c-subtree.",
          "created_at": "2025-07-01T09:44:31Z"
        }
      ]
    },
    {
      "number": 32846,
      "title": "doc: clarify that the \"-j N\" goes after the \"--build build\" part",
      "body": "I was surprised that something like `cmake -j 4 --build build` doesn't work, so this might help others to not make the same mistake.",
      "state": "closed",
      "user": "bigspider",
      "created_at": "2025-07-01T07:22:57Z",
      "updated_at": "2025-07-03T16:44:44Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/32846",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32846.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2974701234), [stickies-v](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2974825230), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2975993807), [theStack](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2976158406), [brunoerg](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2976319365), [w0xlt](https://github.com/bitcoin/bitcoin/pull/32846#pullrequestreview-2976354289), [achow101](https://github.com/bitcoin/bitcoin/pull/32846#issuecomment-3025180099) |\n| Stale ACK | [maflcko](https://github.com/bitcoin/bitcoin/pull/32846#issuecomment-3022289027) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32269](https://github.com/bitcoin/bitcoin/pull/32269) (doc: update unix build doc with build flags by bufo24)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-07-01T07:23:03Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 69f3b2039147558f5c9b452016ab980930e85222",
          "created_at": "2025-07-01T07:30:31Z"
        },
        {
          "user": "stickies-v",
          "body": "Concept ACK \r\n\r\n> See the output of git grep -i 'Use \"-j N\"' for relevant instances.\r\n\r\nAgreed with this. I also couldn't find any other patterns that should be updated here.",
          "created_at": "2025-07-01T09:06:38Z"
        },
        {
          "user": "bigspider",
          "body": "Done, and rebased.\r\n\r\nI also noticed that the analogous comments were capitalized in all other `build-*.md` files, so I capitalized them in `build-unix.md` as well.",
          "created_at": "2025-07-01T10:04:56Z"
        },
        {
          "user": "purpleKarrot",
          "body": "This may be unrelated, but cmake also respects some [environment variables](https://cmake.org/cmake/help/latest/manual/cmake-env-variables.7.html).\r\nSo instead of passing `-j` to each command, you could just set `CMAKE_BUILD_PARALLEL_LEVEL` in bashrc or whatever your favorite shell uses. In fish, I use the following:\r\n\r\n```fish\r\nfunction cmake\r\n  set -x CMAKE_C_COMPILER_LAUNCHER (which ccache)\r\n  set -x CMAKE_CXX_COMPILER_LAUNCHER (which ccache)\r\n  set -x CMAKE_BUILD_PARALLEL_LEVEL (nproc)\r\n  set -x CMAKE_COLOR_DIAGNOSTICS 1\r\n  set -x CMAKE_EXPORT_COMPILE_COMMANDS 1\r\n  set -x CMAKE_GENERATOR Ninja\r\n  set -x CMAKE_INSTALL_PREFIX $HOME/.local\r\n  set -x CMAKE_POLICY_VERSION_MINIMUM 3.5\r\n  command cmake $argv\r\nend\r\n```",
          "created_at": "2025-07-01T11:23:16Z"
        },
        {
          "user": "achow101",
          "body": "ACK 0e9f409db3b7b08aef75ce39765b018b69cc8e9d",
          "created_at": "2025-07-01T18:56:15Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 29.x in #32863.",
          "created_at": "2025-07-03T16:44:44Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32849,
      "title": "Internal bug detected: FinalizeAndExtractPSBT(psbtx_copy, mtx)",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\n```\nbitcoin-cli -testnet4 descriptorprocesspsbt cHNidP8BAF4CAAAAAfrAU8xRZDY7er/kAUGzVtup++LN4otxeOtANj9Tw8xYAAAAAAD9////AeAPlwAAAAAAIlEgmQIRpk7kW78uK6z/DBX37H4Pi4OLy3Fau0pXquQSXLUAAAAAAAEBK4CWmAAAAAAAIlEg5cugS+vKVwm3OSTEr0sIVU/ahEJzIS6iXjsvWNwJ0VUBAwSDAAAAAQhDAUFATOMkSjzzD+7k1AnzZgJ+G+sDZXX5ob0tlQ9mZIseDe73u4fU6SPKdtxve2Wm/mVNrRIP5cPEnkcMv0BJ2iIWgyEWtJa/uuFJh4F8U9WSvgqmbEXHuURDwfdFUTc/nONNI0YZAP/2NCNWAACAAAAAgAAAAIAAAAAAAAAAAAEXILSWv7rhSYeBfFPVkr4KpmxFx7lEQ8H3RVE3P5zjTSNGAAA= \"[\\\"tr([fff63423/86'/0'/0']tpubDDfvptb1GNdu4TRUUNf9bwsFFpHADAmwaB3uoC8ukv5JMsYPzEc3E6yg4w8t49Wq7jtL8LC3VPmuhXoSJxpamWDPfphAz3Fioki3WerwH3Y/0/0)#twc4a4lc\\\"]\"\nerror code: -1\nerror message:\nInternal bug detected: FinalizeAndExtractPSBT(psbtx_copy, mtx)\nrpc/rawtransaction.cpp:1986 (operator())\nBitcoin Core v29.0.0\nPlease report this issue here: https://github.com/bitcoin/bitcoin/issues\n```\n\n### Expected behaviour\n\nThis should give an error maybe stating that the signature inside the final_scriptwitness is an invalid schnorr signature.\nPlease note that the signature inside the psbt uses SIGHASH_SINGLE | ANYONECANPAY flag\n\n\n### Steps to reproduce\n\nThe same command should work on any local regtest or testnet4.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv29.0.0\n\n### Operating system and version\n\nmacOS Sequoia 15.1.1\n\n### Machine specifications\n\n_No response_",
      "state": "open",
      "user": "ekrembal",
      "created_at": "2025-07-01T13:57:25Z",
      "updated_at": "2025-10-25T11:52:55Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/32849",
      "labels": [
        "Bug",
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "uploaded to oss-fuzz (https://issues.oss-fuzz.com/issues/429003360) to get a regression range: https://github.com/bitcoin/bitcoin/compare/b000ed5ee54438efb72e190262faeb535489d35d...ac9fa6ec78158e41006d621ee62e44dec0f934c0 (exists since the beginning, when the line was added)",
          "created_at": "2025-07-02T05:55:14Z"
        },
        {
          "user": "b-l-u-e",
          "body": "I can confirm this bug exists in Bitcoin Core v29.0.0. I've reproduced it and found the root cause: the CHECK_NONFATAL assertion in src/rpc/rawtransaction.cpp around line 1986 triggers an internal bug when FinalizeAndExtractPSBT encounters invalid Schnorr signatures.\nThe fix is to replace the CHECK_NONFATAL with proper error handling that throws a JSONRPCError with a clear message instead of crashing.\nI'll submit a PR with the fix shortly.",
          "created_at": "2025-07-05T07:48:31Z"
        },
        {
          "user": "maflcko",
          "body": "Found a smaller reproducer: `descriptorprocesspsbt cHNidP8BADwAAAAAAXNjcmlwdG9ycHJvCQkJCQkJCQkJESd0fWF3DQ0FcjBwdGlvbgAAAAEIATABAAB5ACkAADEjCmwAAQcBAAAA '[\"raw(14)\"]'`\n\nOr the `rpc` fuzz target reproducer:\n\n```\necho 'ZGVzY3JpcHRvcnByb2Nlc3Nwc2J0XFRwc2J0/wEAPAAAAAABc2NyaXB0b3Jwcm8JCQkJCQkJCQkR\nJ3R9YXcNDQVyMHB0aW9uAAAAAQgBMAEAAHkAKQAAMSMKbAABBwEAAABc/HJhdygxNCkAJ3R9YXcN\nDQVyMA==' | base64 --decode > /tmp/fuzz.crash\n\nFUZZ=rpc ./bld-cmake/bin/fuzz /tmp/fuzz.crash\n",
          "created_at": "2025-08-18T10:22:53Z"
        },
        {
          "user": "rkrux",
          "body": "Is this bug still there? I am not able to reproduce it. \nUpon passing an incorrect/different sighash to `descriptorprocesspsbt`, I get the following error instead:\n\n```zsh\nSpecified sighash value does not match value stored in PSBT\n```\n\nI think v30 has resolved it because of this commit: https://github.com/bitcoin/bitcoin/commit/ee045b61efc1479c1866b786661ef39a863677d0",
          "created_at": "2025-10-24T13:38:38Z"
        },
        {
          "user": "maflcko",
          "body": "> Is this bug still there? I am not able to reproduce it.\n\nI can, and oss-fuzz can as well.",
          "created_at": "2025-10-24T14:07:38Z"
        },
        {
          "user": "rkrux",
          "body": "I see, this commit https://github.com/bitcoin/bitcoin/commit/ee045b61efc1479c1866b786661ef39a863677d0 returns the above error while signing an unsigned PSBT. This bug, however, is when the PSBT is already signed during the flow.\n\nI will try to reproduce the bug again.",
          "created_at": "2025-10-24T14:42:10Z"
        },
        {
          "user": "rkrux",
          "body": "Besides reproducing the cases mentioned in this issue via regtest, I was also able to reproduce the bug in functional tests and suggested adding it in the PR that contains the fix: https://github.com/bitcoin/bitcoin/pull/33014#pullrequestreview-3379921790 ",
          "created_at": "2025-10-25T11:52:55Z"
        }
      ]
    },
    {
      "number": 32848,
      "title": "[BTC signet v22.0] websocket not working as expect",
      "body": "Hi, I am running bitcoin signet node v22.0 with below parameters. I am unable to get any response on websocket port.\n\n```\n            - '-chain=signet'\n            - >-\n              -addnode=178.63.103.48,135.181.75.145,71.80.46.121,195.201.164.54,65.21.171.164,135.180.99.74,188.34.165.181,185.148.37.152\n            - '-rest'\n            - '-txindex'\n            - '-disablewallet'\n            - '-server'\n            - '-rpcbind=0.0.0.0'\n            - '-rpcport=38332'\n            - '-rpcallowip=0.0.0.0/0'\n            - '-rpcthreads=512'\n            - '-rpcworkqueue=4096'\n            - '-rpcuser=example'\n            - '-rpcpassword=example'\n            - '-dbcache=2048'\n            - '-zmqpubrawtx=tcp://*:38333'\n            - '-deprecatedrpc=addresses'\n            - '-printtoconsole'\n```\n\nAny idea what can be the reason?",
      "state": "closed",
      "user": "saravadeanil",
      "created_at": "2025-07-01T13:10:02Z",
      "updated_at": "2025-07-15T16:37:16Z",
      "comments": 9,
      "url": "https://github.com/bitcoin/bitcoin/issues/32848",
      "labels": [
        "RPC/REST/ZMQ",
        "Questions and Help"
      ],
      "comment_list": [
        {
          "user": "fanquake",
          "body": "Is this `v22.0` or `v26.0`: https://github.com/bitcoin/bitcoin/issues/32762#issuecomment-2978990456? Please only open issues when using a maintained version of Bitcoin Core, which is currently `27.x`, `28.x` or `29.x`.",
          "created_at": "2025-07-01T14:10:16Z"
        },
        {
          "user": "saravadeanil",
          "body": "@fanquake Thanks for checking I am using `v22.0` for signet node. \n\n```\nsignet-1-0:~/bitcoin# bitcoind --version\nBitcoin Core version v22.0.0\n```\n\nI was able to fix the initial sync issue by `addnode` referring https://github.com/bitcoin/bitcoin/issues/32762#issuecomment-2977713689",
          "created_at": "2025-07-01T14:14:39Z"
        },
        {
          "user": "sipa",
          "body": "Bitcoin Core has no websocket support whatsoever.",
          "created_at": "2025-07-01T14:16:43Z"
        },
        {
          "user": "maflcko",
          "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
          "created_at": "2025-07-01T14:35:09Z"
        },
        {
          "user": "saravadeanil",
          "body": "I am trying to perform rawtx using websocket.\n\nIt think it works on bitcoin testnet & mainnet network with version v22.0.0.\n\nI am wondering why it's not working with signet.",
          "created_at": "2025-07-01T15:05:19Z"
        },
        {
          "user": "sipa",
          "body": "Can you elaborate on what you're using? Because as I mentioned, Bitcoin Core has no websocket support. You may be using JSON-RPC, or ZMQ, or a P2P connection...",
          "created_at": "2025-07-01T15:07:06Z"
        },
        {
          "user": "saravadeanil",
          "body": "@sipa Sorry for the confusion, I am using zmqpubrawtx port on testnet & mainnet network.\n\nSame doesn't work with signet for me.",
          "created_at": "2025-07-01T15:08:48Z"
        },
        {
          "user": "maflcko",
          "body": "> It think it works on bitcoin testnet & mainnet network with version v22.0.0.\n> \n> I am wondering why it's not working with signet.\n\nWhat are the exact steps to reproduce the working case and the failing case. What is the error message?\n\nWithout any details there is nothing that can be done here.\n\n",
          "created_at": "2025-07-01T17:01:39Z"
        },
        {
          "user": "fanquake",
          "body": "Closing for now. Feel free to reopen, with all the required details and steps to reproduce.",
          "created_at": "2025-07-15T16:37:16Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 3,
    "issues": 2
  }
}