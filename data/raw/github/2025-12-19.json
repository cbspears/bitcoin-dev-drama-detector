{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T20:41:32.570590+00:00",
  "date": "2025-12-19",
  "pull_requests": [
    {
      "number": 34122,
      "title": "script: Default script_verify_flags comparisons",
      "body": "Replace the manual operator== and friend operator<=> in src/script/verify_flags.h with a defaulted member operator<=>.\r\n\r\nThis reduces boilerplate while preserving the existing semantics (m_value comparison) and continues to provide ==, <, >, <=, and >= via the compiler-generated comparison operators.\r\n\r\n**Note**: This is a small refactor, but it removes duplicated comparison logic and reduces the chance of == and <=> diverging in future edits. If thatâ€™s not considered worthwhile, I can close/drop it.",
      "state": "open",
      "user": "Brotcrunsher",
      "created_at": "2025-12-19T20:50:34Z",
      "updated_at": "2026-01-02T11:59:21Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34122",
      "labels": [
        "Consensus"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34122.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [billymcbip](https://github.com/bitcoin/bitcoin/pull/34122#issuecomment-3705181158) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T20:50:41Z"
        },
        {
          "user": "billymcbip",
          "body": "tACK eaf2f07e42ac3574ea4b1b2fc9a5d11d3ab6ded2",
          "created_at": "2026-01-02T11:59:18Z"
        }
      ]
    },
    {
      "number": 34119,
      "title": "contrib: remove `copyright_header.py`",
      "body": "After #34084, our copyright headers shouldn't need \"managing\"; so remove the Python script.",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-12-19T16:51:56Z",
      "updated_at": "2025-12-29T17:48:50Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34119",
      "labels": [
        "Scripts and tools"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34119.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/34119#issuecomment-3691741522), [rkrux](https://github.com/bitcoin/bitcoin/pull/34119#pullrequestreview-3615268113), [janb84](https://github.com/bitcoin/bitcoin/pull/34119#pullrequestreview-3615690586) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T16:52:17Z"
        },
        {
          "user": "l0rinc",
          "body": "Should we add copyrights to the sources that don't currently have any such header (see: https://github.com/bitcoin/bitcoin/pull/34084#issuecomment-3670396535)?",
          "created_at": "2025-12-19T17:53:06Z"
        },
        {
          "user": "fjahr",
          "body": "ACK ba6315d2f6fe550912ab2ba87f165329d9e2f834\r\n\r\nDouble-checked that no further references to the script anywhere else in the docs were missed with some grepping.",
          "created_at": "2025-12-25T21:01:07Z"
        },
        {
          "user": "fanquake",
          "body": "> Should we add\r\n\r\nI think they've all been added. `chainparamseeds.h` will be added when the script is next run.",
          "created_at": "2025-12-27T16:23:18Z"
        }
      ]
    },
    {
      "number": 34117,
      "title": "net: reduce log level for PCP/NAT-PMP NOT_AUTHORIZED failures",
      "body": "Users running Bitcoin Core on home networks with routers that don't support PCP (Port Control Protocol) or NAT-PMP port mapping receive frequent warning-level log messages every few minutes:\r\n\r\n  \"pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\"\r\n\r\nThis is expected behavior for many consumer routers that have PCP disabled by default, not an actionable error. The repeated warnings create unnecessary log noise.\r\n\r\nThis change:\r\n- Adds explicit constants for NOT_AUTHORIZED result code (value 2) for both NAT-PMP and PCP protocols\r\n- Downgrades NOT_AUTHORIZED failures from LogWarning to LogDebug since this is an expected condition on many networks\r\n- Keeps LogWarning for other failure types that may indicate actual configuration or network issues\r\n\r\nThe NOT_AUTHORIZED message will still be visible when running with -debug=net for users who need to troubleshoot port mapping issues.\r\n\r\nFixes #34114\r\n\r\n<!--\r\n*** Please remove the following help text before submitting: ***\r\n\r\nPull requests without a rationale and clear improvement may be closed\r\nimmediately.\r\n\r\nGUI-related pull requests should be opened against\r\nhttps://github.com/bitcoin-core/gui\r\nfirst. See CONTRIBUTING.md\r\n-->\r\n\r\n<!--\r\nPlease provide clear motivation for your patch and explain how it improves\r\nBitcoin Core user experience or Bitcoin Core developer experience\r\nsignificantly:\r\n\r\n* Any test improvements or new tests that improve coverage are always welcome.\r\n* All other changes should have accompanying unit tests (see `src/test/`) or\r\n  functional tests (see `test/`). Contributors should note which tests cover\r\n  modified code. If no tests exist for a region of modified code, new tests\r\n  should accompany the change.\r\n* Bug fixes are most welcome when they come with steps to reproduce or an\r\n  explanation of the potential issue as well as reasoning for the way the bug\r\n  was fixed.\r\n* Features are welcome, but might be rejected due to design or scope issues.\r\n  If a feature is based on a lot of dependencies, contributors should first\r\n  consider building the system outside of Bitcoin Core, if possible.\r\n* Refactoring changes are only accepted if they are required for a feature or\r\n  bug fix or otherwise improve developer experience significantly. For example,\r\n  most \"code style\" refactoring changes require a thorough explanation why they\r\n  are useful, what downsides they have and why they *significantly* improve\r\n  developer experience or avoid serious programming bugs. Note that code style\r\n  is often a subjective matter. Unless they are explicitly mentioned to be\r\n  preferred in the [developer notes](/doc/developer-notes.md), stylistic code\r\n  changes are usually rejected.\r\n-->\r\n\r\n<!--\r\nBitcoin Core has a thorough review process and even the most trivial change\r\nneeds to pass a lot of eyes and requires non-zero or even substantial time\r\neffort to review. There is a huge lack of active reviewers on the project, so\r\npatches often sit for a long time.\r\n-->\r\n",
      "state": "closed",
      "user": "ANAVHEOBA",
      "created_at": "2025-12-19T16:35:45Z",
      "updated_at": "2026-01-14T15:11:05Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/34117",
      "labels": [
        "P2P"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34117.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T16:35:52Z"
        },
        {
          "user": "janb84",
          "body": "you have created a PR with 2 commits, one is unrelated to this PR it seems",
          "created_at": "2025-12-19T17:35:34Z"
        },
        {
          "user": "ANAVHEOBA",
          "body": "Both commit were on the issues list ",
          "created_at": "2025-12-19T18:05:39Z"
        },
        {
          "user": "janb84",
          "body": "> Both commit were on the issues list\r\n\r\nNot how this works, one PR one topic. Currently the PR description describes the commit for fixing #34114, I suggest that you keep that commit and create a new PR for the other commit, that has code for fixing #33471.",
          "created_at": "2025-12-22T09:06:06Z"
        },
        {
          "user": "bensig",
          "body": "This PR mixes two unrelated changes:\r\n\r\n1. Log level reduction for PCP/NAT-PMP NOT_AUTHORIZED (pcp.cpp) - fixes #34114\r\n2. CJDNS address discovery fix when -externalip is set (net.cpp) - fixes #33471\r\n\r\nThese should be separate PRs. Each change looks reasonable on its own, but combining unrelated fixes makes review harder and complicates git history/bisecting.\r\n\r\nWould you please split this into two PRs and resubmit?\r\n",
          "created_at": "2026-01-05T03:10:33Z"
        },
        {
          "user": "maflcko",
          "body": "@ANAVHEOBA are you still working on this?",
          "created_at": "2026-01-05T10:13:23Z"
        },
        {
          "user": "ANAVHEOBA",
          "body": "Yes, I push today ",
          "created_at": "2026-01-05T16:56:13Z"
        },
        {
          "user": "ANAVHEOBA",
          "body": "I am interested in working with bitcoin what is it going to take ",
          "created_at": "2026-01-05T16:57:37Z"
        },
        {
          "user": "maflcko",
          "body": "I'll go ahead and close this for now. This clearly needs separate pull requests, so this one will need to be closed either way.",
          "created_at": "2026-01-06T07:14:12Z"
        },
        {
          "user": "willcl-ark",
          "body": "@ANAVHEOBA do you intend to open a new PR with the first commit only as a fix to #34114?\r\n\r\nIf you don't want to then I'd be happy to cherry-pick your commit and open a pr with it in, as the fix looks good to me.",
          "created_at": "2026-01-14T15:11:05Z"
        }
      ]
    },
    {
      "number": 34116,
      "title": "cmake: Fix debugging info",
      "body": "https://github.com/bitcoin/bitcoin/pull/30811 was intended to address https://github.com/bitcoin/bitcoin/issues/30799. However, it introduced several unforeseen consequences, including https://github.com/bitcoin/bitcoin/issues/31957 and https://github.com/bitcoin/bitcoin/issues/31204.\r\n\r\nThis PR takes an alternative approach to resolving https://github.com/bitcoin/bitcoin/pull/30799 and reverts https://github.com/bitcoin/bitcoin/pull/30811.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-12-19T15:57:19Z",
      "updated_at": "2026-01-14T13:17:38Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/34116",
      "labels": [
        "Build system"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34116.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [arejula27](https://github.com/bitcoin/bitcoin/pull/34116#issuecomment-3689736837) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T15:57:25Z"
        },
        {
          "user": "hebasto",
          "body": "@maflcko \r\n\r\nCould you please confirm that this PR fixes https://github.com/bitcoin/bitcoin/issues/31957 when the build system is being configured using `-DWITH_CCACHE=OFF`?",
          "created_at": "2025-12-19T15:58:46Z"
        },
        {
          "user": "arejula27",
          "body": "concept ACK [4d79472fe6956caa901f3c8fc872f34c8dc9d682]\r\nThis PR attempts to solve issue  #31204 as PR  #34081; however, this PR also solves #30799. **I would prefer this one** for the following reasons:\r\n- This one feels cleaner; instead of overwriting remaps, it just deletes deprecated code, removing unnecessary remaps and applying only when it is required (`WITH_CCACHE=ON`).\r\n- Address two issues at once that have been related since the beginning, finally closing both.\r\n- The #34081 PR [currently only works for `bitcoind` ](https://github.com/bitcoin/bitcoin/pull/34081#issuecomment-3684119131) binary, while this one also works for other binaries such as `test_bitcoin`.  This has been verified:\r\n``` \r\n$ gdb  build/bin/test_bitcoin                                                                                                      13:56\r\n\r\n(gdb) b addrman_tests.cpp:32\r\nBreakpoint 1 at 0xe08ae: file ./src/test/addrman_tests.cpp, line 32.\r\n(gdb) run\r\nStarting program: /home/arejula27/workspaces/bitcoin/build/bin/test_bitcoin\r\n\r\nRunning 688 test cases...\r\n\r\nBreakpoint 1, GetCheckRatio (node_ctx=...) at ./src/test/addrman_tests.cpp:32\r\n32          return std::clamp<int32_t>(node_ctx.args->GetIntArg(\"-checkaddrman\", 100), 0, 1000000);\r\nMissing rpms, try: dnf --enablerepo='*debug*' install libevent-debuginfo-2.1.12-15.fc42.x86_64 sqlite-libs-debuginfo-3.47.2-5.fc42.x86_64 capnproto-libs-debuginfo-1.0.1-5.fc42.x86_64 libstdc++-debuginfo-15.2.1-4.fc42.x86_64 glibc-debuginfo-2.41-11.fc42.x86_64 libgcc-debuginfo-15.2.1-4.fc42.x86_64 zlib-ng-compat-debuginfo-2.2.5-2.fc42.x86_64\r\n``` \r\n\r\n\r\nI have also inspected the debug symbols and these changes keeps relative paths as it is recommended on the conversation had on the issues mentioned before:\r\n\r\n```\r\n$ objdump -g ./build/bin/bitcoind | grep -A5 -B5 \"src/\" \r\n\r\n    <29531d3>   DW_AT_name        : (indirect line string, offset: 0x5cdc): ./src/wallet/init.cpp\r\n    <29531d7>   DW_AT_comp_dir    : (indirect line string, offset: 0x13): ./build/src\r\n``` ",
          "created_at": "2025-12-24T13:00:48Z"
        },
        {
          "user": "maflcko",
          "body": "Picked up in https://github.com/bitcoin/bitcoin/pull/34281, due to lack of progress here.",
          "created_at": "2026-01-14T12:31:47Z"
        },
        {
          "user": "fanquake",
          "body": "Closing for now.",
          "created_at": "2026-01-14T13:17:38Z"
        }
      ]
    },
    {
      "number": 34115,
      "title": "doc: Use multi-path descriptors in descriptors.md and linked tests",
      "body": "This PR updates the documentation and functional test to use multi-path descriptor syntax `/<0;1>/*` instead of separate external/internal descriptors, making examples more concise and aligned with modern descriptor usage.\r\nfixes #34086\r\n## Changes\r\n\r\n### Documentation (`doc/descriptors.md`)\r\n- Updated `sortedmulti` example to use `/<0;1>/*` syntax for both receiving and change addresses\r\n- Updated `thresh` (miniscript) example to use `/<0;1>/*` syntax\r\n- Updated descriptor checksums to match the new syntax\r\n- Updated explanation text to use `(/0)` and `(/1)` notation for clarity\r\n\r\n### Test (`test/functional/wallet_miniscript_decaying_multisig_descriptor_psbt.py`)\r\n- Modified to import a single multi-path descriptor instead of two separate descriptors\r\n- Updated `_get_xpub()` to strip trailing derivation paths for multi-path usage\r\n- Updated `create_multisig()` to construct and import multi-path descriptors\r\n- Added `descsum_create()` import to preserve `<0;1>` syntax (using `getdescriptorinfo()` would collapse it to a single path)\r\n- Added `range` parameter `[0, 1000]` for proper address generation\r\n\r\n## Rationale\r\nMulti-path descriptors with `<0;1>` syntax are more concise and easier to use than managing separate external and internal descriptors. When a descriptor contains exactly two elements in the multi-path specifier, Bitcoin Core automatically imports the second as an internal (change) descriptor.\r\n\r\nThe key technical fix in the test was using `descsum_create()` instead of `getdescriptorinfo()` to add the checksum, because `getdescriptorinfo()` expands multi-path descriptors and only returns the first path, preventing the multi-path syntax from being preserved during import.\r\n\r\n\r\n\r\n## Testing\r\n\r\nThe functional test `wallet_miniscript_decaying_multisig_descriptor_psbt.py` now passes successfully with the multi-path descriptor properly expanding to both receiving (`/0/*`) and change (`/1/*`) descriptors during import.\r\n\r\n```bash\r\npython3 [wallet_miniscript_decaying_multisig_descriptor_psbt.py](http://_vscodecontentref_/0)\r\n# Tests successful\r\n",
      "state": "closed",
      "user": "ritoban23",
      "created_at": "2025-12-19T15:32:24Z",
      "updated_at": "2025-12-19T15:33:52Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34115",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34115.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T15:32:32Z"
        },
        {
          "user": "fanquake",
          "body": "Duplicate of #34100.",
          "created_at": "2025-12-19T15:33:52Z"
        }
      ]
    },
    {
      "number": 34113,
      "title": "refactor: [rpc] Remove confusing and brittle integral casts",
      "body": "When constructing an UniValue from integral values, historically (long ago), in some cases casts where needed. With the current UniValue constructor, only very few are actually needed.\r\n\r\nKeeping the unused casts around is:\r\n\r\n* confusing, because code readers do not understand why they are needed\r\n* brittle, because some may copy them into new places, where they will lead to hard-to-find logic bugs, such as the ones fixed in pull https://github.com/bitcoin/bitcoin/pull/34112\r\n\r\nSo fix all issues by removing them, except for a few cases, where casting was required:\r\n* `ret.pushKV(\"coinbase\", static_cast<bool>(coin->fCoinBase));`, or\r\n* `static_cast<std::underlying_type_t<decltype(info.nServices)>>(info.nServices)`.\r\n\r\nThis hardening refactor does not fix any bugs and does not change any behavior.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T10:46:36Z",
      "updated_at": "2025-12-29T10:14:33Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34113",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34113.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sedited](https://github.com/bitcoin/bitcoin/pull/34113#pullrequestreview-3600026217), [rkrux](https://github.com/bitcoin/bitcoin/pull/34113#pullrequestreview-3601072466) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33741](https://github.com/bitcoin/bitcoin/pull/33741) (rpc: Optionally print feerates in sat/vb by polespinasa)\n* [#32800](https://github.com/bitcoin/bitcoin/pull/32800) (rpc: Distinguish between vsize and sigop adjusted mempool vsize by musaHaruna)\n* [#31449](https://github.com/bitcoin/bitcoin/pull/31449) (coins,refactor: Reduce `getblockstats` RPC UTXO overhead estimation by l0rinc)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T10:46:43Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `No wallet`: https://github.com/bitcoin/bitcoin/actions/runs/20367678494/job/58526539222</sub>\n<sub>LLM reason (âœ¨ experimental): Build failure due to a type mismatch: passing ServiceFlags where UniValue is expected, causing JSON-RPC encoding errors.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-12-19T10:58:14Z"
        }
      ]
    },
    {
      "number": 34112,
      "title": "rpc: [mempool] Remove erroneous Univalue integral casts",
      "body": "Casting without reason can only be confusing (because it is not needed), or wrong (because it does the wrong thing).\r\n\r\nFor example, the added test that adds a positive chunk prioritization will fail:\r\n\r\n```\r\nAssertionError: not(-1.94936096 == 41.000312)\r\n```\r\n\r\nFix all issues by removing the erroneous casts, and by adding a test to check against regressions.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T09:48:42Z",
      "updated_at": "2025-12-30T12:16:33Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/pull/34112",
      "labels": [
        "RPC/REST/ZMQ"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34112.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/34112#pullrequestreview-3601046544), [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/34112#pullrequestreview-3614448199), [glozow](https://github.com/bitcoin/bitcoin/pull/34112#pullrequestreview-3616102487) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T09:48:48Z"
        },
        {
          "user": "maflcko",
          "body": "(This bugfix does not need backport)",
          "created_at": "2025-12-19T09:49:22Z"
        },
        {
          "user": "maflcko",
          "body": "Force pushed more tests, to catch more issues:\r\n\r\n```\r\n  in particular not({'chunks': [{'chunkfee': Decimal('-1.94936096'), 'chunkweight': 415, 'txs': ['2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349']}]} == {'chunks': [{'chunkfee': Decimal('41.000312'), 'chunkweight': 415, 'txs': ['2db3a22f9370eb32f110597882acebef1c76cf319837bac69b829917730d2349']}]})\r\n```\r\n\r\nAlso, remove all casts in the file completely.",
          "created_at": "2025-12-19T10:17:29Z"
        },
        {
          "user": "maflcko",
          "body": "> I applied the following patch to see if the test fails as mentioned and got the below error.\r\n> [...]\r\n> Also, went through the changes where the cast is removed and matched with the return type of the functions whose value was cast - made sense to me in all the cases to remove.\r\n\r\nSorry, it was a bit confusing on my part to mix random refactors with bugfixes. However, there are two bugfixes. I've moved the refactors to https://github.com/bitcoin/bitcoin/pull/34113, so that this only contains the two bugfixes.",
          "created_at": "2025-12-19T15:15:08Z"
        }
      ]
    },
    {
      "number": 34111,
      "title": "fuzz: Improve the fuzz target for `CCrypter`",
      "body": "Add the following improvements to the fuzz target for `CCrypter`:\r\n\r\n- Add roundtrip assertions: Add verification logic by decrypting the resulting ciphertext from a successful call to `Encrypt()` or `EncryptSecret()` and verifying that the output matches the original plaintext.\r\n\r\n- Cover untested methods: Extend the target to explicitly test `CCrypter::SetKey()` and `DecryptSecret()`.",
      "state": "closed",
      "user": "Chand-ra",
      "created_at": "2025-12-19T08:53:10Z",
      "updated_at": "2025-12-23T06:47:02Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/pull/34111",
      "labels": [
        "Fuzzing"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34111.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/34111#pullrequestreview-3605170070) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T08:53:16Z"
        },
        {
          "user": "Chand-ra",
          "body": "> Concept NACK\r\n> \r\n> We already have 100% coverage for `wallet/crypter`, see: https://maflcko.github.io/b-c-cov/fuzz.coverage/src/wallet/crypter.cpp.gcov.html.\r\n> \r\n> Also, we don't need to cover `DecryptSecret` directly if this is already exercised by `DecryptKey`, same idea for `SetKey`. For reference, see #32118 which fixed this target and removed a direct call to `DecryptSecret`.\r\n\r\nMakes sense. But shouldn't making the encryption tests roundtrip better help in future regression catching?\r\n\r\nClosing the PR for now.",
          "created_at": "2025-12-23T06:13:23Z"
        }
      ]
    },
    {
      "number": 34109,
      "title": "refactor: Use uint64_t over size_t for serialize corruption check in fees.dat",
      "body": "Serialization should not behave differently on different architectures. See also the related commit 3789215f73466606eb111714f596a2a5e9bb1933.\r\n\r\nHowever, on fees.dat file corruption, 32-bit builds may run into an unsigned integer overflow and report the wrong corruption reason, or may even silently continue after the corruption.\r\n\r\nThis is a bit hard to reproduce, because 32-bit platforms are rare and most of them don't support running the unsigned integer overflow sanitizer. So the possible options to reproduce are:\r\n\r\n* Run on armhf and manually annotate the code to detect the overflow\r\n* Run on i386 with the integer sanitizer (possibly via `podman run -it --rm --platform linux/i386 'debian:trixie'`)\r\n* Run the integer sanitizer on any 64-bit platform and manually replace type in the affected line by `uint32_t`\r\n\r\nAfterwards, the steps to reproduce are:\r\n\r\n```\r\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y\r\n\r\ncmake -B ./bld-cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero --preset=dev-mode\r\n\r\ncmake --build ./bld-cmake --parallel  $(nproc)\r\n\r\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/policy_estimator_io/607473137013139e3676e30ec4b29639e673fa9b'\r\n\r\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=policy_estimator_io ./bld-cmake/bin/fuzz ./607473137013139e3676e30ec4b29639e673fa9b \r\n```\r\n\r\nThe output will be something like:\r\n\r\n```\r\n/b-c/src/policy/fees/block_policy_estimator.cpp:448:25: runtime error: unsigned integer overflow: 346685954 * 219 cannot be represented in type 'unsigned int'\r\n    #0 0x5b0b1bbe in TxConfirmStats::Read(AutoFile&, unsigned int) /b-c/bld-cmake/src/./policy/fees/block_policy_estimator.cpp:448:25\r\n    #1 0x5b0b7d3f in CBlockPolicyEstimator::Read(AutoFile&) /b-c/bld-cmake/src/./policy/fees/block_policy_estimator.cpp:1037:29\r\n    #2 0x592a9783 in policy_estimator_io_fuzz_target(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/./test/fuzz/policy_estimator_io.cpp:32:32\r\n    #3 0x5896ba8e in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\r\n    #4 0x5896b8eb in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\r\n    #5 0x5896b44b in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\r\n    #6 0x59845c95 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\r\n    #7 0x5983a0da in test_one_input(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\r\n    #8 0x5983cb80 in main /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:271:13\r\n    #9 0xf75aecc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\r\n    #10 0xf75aed87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\r\n    #11 0x58932db6 in _start (/b-c/bld-cmake/bin/fuzz+0x235ddb6) (BuildId: 7d8d83a77923f14e99c0de64acbc5f5bfc2cce9b)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /b-c/src/policy/fees/block_policy_estimator.cpp:448:25 \r\n```\r\n\r\nNote: This is marked a \"refactor\", because the code change does not affect 64-bit builds, and on the still remaining rare 32-bit builds today it is extremely unlikely to happen in production.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T07:18:48Z",
      "updated_at": "2026-01-14T09:26:13Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/pull/34109",
      "labels": [
        "Refactoring"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/34109.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [bensig](https://github.com/bitcoin/bitcoin/pull/34109#issuecomment-3708822675), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/34109#issuecomment-3724450823), [luke-jr](https://github.com/bitcoin/bitcoin/pull/34109#issuecomment-3747402241) |\n\nIf your review is incorrectly listed, please copy-paste <code>&lt;!--meta-tag:bot-skip--&gt;</code> into the comment that the bot should ignore.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-12-19T07:18:55Z"
        },
        {
          "user": "bensig",
          "body": "ACK fa1d17d56c83d6ad89c1f688824ec0dc1c294012\r\n\r\nStraightforward fix - using `uint64_t` instead of `size_t` prevents potential overflow on 32-bit platforms where `size_t` is 32-bit.",
          "created_at": "2026-01-05T03:31:40Z"
        },
        {
          "user": "maflcko",
          "body": "> However, changing `maxConfirms` to `uint64_t` would only prevent the unsigned integer overflow by allowing it to store a very large value (or the modulo of that value).\r\n> \r\n> Let's extend this by adding another commit that validates the scale. Since we allow reading a corrupted scale, an overflow where the modulo of the multiplication result is stored in `maxConfirms` (scale* maxPeriods) may go undetected. If that modulo happens to fall within one 1-1008, the in L-454 check would pass, but the resulting scale would be invalid; this is a contrived, rare edge case.\r\n\r\nNot sure this is relevant to fix. A `scale` corruption is already extremely unlikely to happen (outside of fuzzing). And the `scale` corruption along with a file *size* corruption is impossible on modern filesystems, as they guard the metadata. And for older filesystems it would be cosmically unlikely and found by the next filesystem check.\r\n\r\nRecall, that `scale` is u32, and the code is:\r\n\r\n```cpp\r\n    filein >> Using<VectorFormatter<VectorFormatter<EncodedDoubleFormatter>>>(confAvg);\r\n    maxPeriods = confAvg.size();\r\n    maxConfirms = scale * maxPeriods;\r\n```\r\n\r\nSo, for u64 to overflow as a result of multiplication, a massive persisted file would be required (`confAvg` would have to deserialize correctly first). I don't think any of this can ever happen in practise.\r\n\r\nA `scale` corruption by itself may happen (and does happen in the fuzz target), so a trivial one-line fix for it seemed fine to me.\r\n\r\nI am less sure about adding code to further validate the `scale`: After all, the code here is just writing (and reading) constants. So, either the serialize can be skipped, because it is redundant, brittle and useless. Or, adding guards to it would be wrong, because there is a use-case out there to serialize a not constant `scale`. Not sure, but it doesn't seem worth it to me to write a larger patch for this.",
          "created_at": "2026-01-08T15:27:27Z"
        },
        {
          "user": "ismaelsadeeq",
          "body": "Itâ€™s fine with me to limit this to the unsigned integer overflow fix. \r\nA follow-up can be opened to further improve this and to validate the scale.\r\nI brought it up as a suggestion for improvement in the review, and the comment can be linked in future discussions.\r\n\r\nutACK fa1d17d56c83d6ad89c1f688824ec0dc1c294012",
          "created_at": "2026-01-08T15:41:53Z"
        },
        {
          "user": "maflcko",
          "body": "Yeah, seems fine to track this in a follow-up. Just for reference, if the `scale` serialization is indeed useless and brittle, it can be removed via:\r\n\r\n```diff\r\ndiff --git a/src/policy/fees/block_policy_estimator.cpp b/src/policy/fees/block_policy_estimator.cpp\r\nindex 23aecefea2..8f31b98212 100644\r\n--- a/src/policy/fees/block_policy_estimator.cpp\r\n+++ b/src/policy/fees/block_policy_estimator.cpp\r\n@@ -105,7 +105,7 @@ private:\r\n     double decay;\r\n \r\n     // Resolution (# of blocks) with which confirmations are tracked\r\n-    unsigned int scale;\r\n+    const unsigned int scale;\r\n \r\n     // Mempool counts of outstanding transactions\r\n     // For each bucket X, track the number of transactions in the mempool\r\n@@ -430,9 +430,12 @@ void TxConfirmStats::Read(AutoFile& filein, size_t numBuckets)\r\n     if (decay <= 0 || decay >= 1) {\r\n         throw std::runtime_error(\"Corrupt estimates file. Decay must be between 0 and 1 (non-inclusive)\");\r\n     }\r\n-    filein >> scale;\r\n-    if (scale == 0) {\r\n-        throw std::runtime_error(\"Corrupt estimates file. Scale must be non-zero\");\r\n+    {\r\n+    uint32_t dummy;\r\n+    filein >> dummy;\r\n+    if (scale == 0||scale!=dummy) {\r\n+        throw std::runtime_error(strprintf(\"Corrupt estimates file. Scale must be non-zero and must be equal to %s\", dummy));\r\n+    }\r\n     }\r\n \r\n     filein >> Using<VectorFormatter<EncodedDoubleFormatter>>(m_feerate_avg);\r\n```\r\n\r\n(passes tests, fwiw)",
          "created_at": "2026-01-08T15:55:23Z"
        },
        {
          "user": "luke-jr",
          "body": "https://github.com/bitcoin/bitcoin/commit/163d3e5c137401b0145ec57c7e24947e68f908e6 fixes also the hypothetical/impractical overflow. Use it if you want.\r\n\r\nAlso, utACK fa1d17d56c83d6ad89c1f688824ec0dc1c294012 as an improvement.",
          "created_at": "2026-01-14T02:27:01Z"
        },
        {
          "user": "maflcko",
          "body": "> [163d3e5](https://github.com/bitcoin/bitcoin/commit/163d3e5c137401b0145ec57c7e24947e68f908e6) fixes also the hypothetical/impractical overflow. Use it if you want.\r\n\r\nI'll leave as-is for now, because I don't think an additional patch is needed, and the change is also unclear, because three people wrote three different patches for this. So this seems better to leave as-is or for a follow-up.\r\n\r\nWhereas this pull request should be trivially correct and already has 3 acks.",
          "created_at": "2026-01-14T07:18:08Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 34121,
      "title": "Syncing takes many days with state of the art hardware now - Reviving bootstrapping as a solution?",
      "body": "### Please describe the feature you'd like to see added.\n\nI run the lightning node SilentBob and recently nuked my Bitcoin chainstate or blocks database while trying to fix my issues with running out of disc space.\n\nResyncing turned out to take many days, even on modern hardware. In fact, I'm still waiting two days later with the estimated time remaining constantly switching between many hours, many days or even many weeks at times (13th gen i7 10 core CPU, super fast NVME 2TB SSD, 16 gig ram, 12 gig reserved for bitcoin... 500 Mbit cable connection).\n\nLuckily @C-Otto saved me by providing me with his blocks and chainstate directories and he mentioned that he might be able to provide the same service to others if there is any demand.\n\nSo I thought I should bring this up here and inquire if there is any interest in reviving bootstrapping again, as it has existed until 2014: https://bitcoin.org/bin/block-chain/README.txt\n",
      "state": "closed",
      "user": "viaj3ro",
      "created_at": "2025-12-19T17:39:02Z",
      "updated_at": "2026-01-13T12:12:59Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/issues/34121",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "l0rinc",
          "body": "> Resyncing turned out to take many days\n\nDo I understand you correctly that this was a full Initial Block Download (i.e. no prior state locally) or was it a `-reindex` or `-reindex-chainstate`?\n\n> 12 gig reserved for bitcoin\n\nCan you please share the exact configs you have started the node with? Using a dbcache that large can sometimes result in memory swapping which dramatically slows down execution. We found that there's rarely a need to go beyond 3GB dbcache.\n\n> 500 Mbit cable connection\n\nThat should suffice, but if it's over TOR, it can often take days.\n\nLastly, which Core version were you using? Older ones have a low `assumevalid` which forces script (re)validation which can slow down simple devices a lot. Core v30 can do IBD 200% faster than e.g. v25 - make sure you use the latest.\n\nAlso, we're working on parallelizing part of the validation work (block input fetching for example), it should result in another 30-50% speedup, see: https://github.com/bitcoin/bitcoin/pull/31132. Even on simple Umbrel and Raspberry 5 devices we're getting validation speeds of 7-10 hours with that.",
          "created_at": "2025-12-19T18:02:05Z"
        },
        {
          "user": "viaj3ro",
          "body": "Initially I tried to just do -reindex on the nodes itself. While setting up a fresh installation on the above mentioned machine as a backup plan. The reindex was so painfully slow (much slower than starting from scratch on the soewhat faster machine) that I gave up on it.\n\nconfig:\nserver=1\ntxindex=1\ndbcache=12048\n\nIt never came even close to using 8 gig of RAM anyway.\n\nclearnet, not TOR. Syncing until 2020 was reasonably fast. slowed down a lot until 2024 and its a crawl since then",
          "created_at": "2025-12-19T18:09:18Z"
        },
        {
          "user": "sipa",
          "body": "> So I thought I should bring this up here and inquire if there is any interest in reviving bootstrapping again, as it has existed until 2014: https://bitcoin.org/bin/block-chain/README.txt\n\nIt won't help you. If synchronization takes days, it's not the downloading that's the bottleneck, but validation. Validating a bootstrap.dat would take just as long. (Unless of course your network connection somehow is that slow, but in that case downloading the bootstrap.dat file will just be as long)\n\nThe bootstrap.dat approach was abandoned because it's generally faster to just sync from the network since Bitcoin Core 0.12, as it downloads and validates in parallel. If you use bootstrap.dat, you need to first download the whole file, and only then validate it.",
          "created_at": "2025-12-19T18:09:28Z"
        },
        {
          "user": "viaj3ro",
          "body": "Downloading blocks and chainstate took around 7 hours. The node was starting right away. No need for revalidating.\n\nIt only took another 4h because eclair requires txindex=1 (which @C-Otto doesn't need since he runs LND)\n\nso boostrapping saved me at least 2 days at this point already. potentially many more",
          "created_at": "2025-12-19T18:13:55Z"
        },
        {
          "user": "C-Otto",
          "body": "To clarify: I provided the `blocks/` and `chainstate/` directories. I believe that a non-validating approach (like this) isn't in the best interest of the project.",
          "created_at": "2025-12-19T18:14:44Z"
        },
        {
          "user": "viaj3ro",
          "body": "wouldn't it be possible to provide it verifiably via checksum / hash?\n",
          "created_at": "2025-12-19T18:15:42Z"
        },
        {
          "user": "sipa",
          "body": "If you're copying the `chainstate` directory from someone else, you're not validating history. That will obviously be faster, but isn't comparable to the `bootstrap.dat` method (which still validated the whole history on import).\n\n> wouldn't it be possible to provide it verifiably via checksum / hash?\n\nYes, of course, if you somehow get the checksum from a trusted source. There is ongoing work in the Bitcoin Core project to enable that through the `assumeutxo` project, but it's a very different security tradeoff.",
          "created_at": "2025-12-19T18:17:09Z"
        },
        {
          "user": "l0rinc",
          "body": "Can you please try a -reindex-chainstate with -dbcache=3000 instead? It would be useful for us to know why it's so slow for some people...",
          "created_at": "2025-12-19T18:18:52Z"
        },
        {
          "user": "viaj3ro",
          "body": "> Can you please try a -reindex-chainstate with -dbcache=3000 instead? It would be useful for us to know why it's so slow for some people...\n\ncan do, once the fresh bitcoin installation is fully synced. I can't play around with bitcoin on my active lightning node unfortunately. I'm almost certain the large dbcache wasn't causing issues. I was monitoring RAM usage and it never came close to using all\n\nThe new sync stands at 53 hours currently (may 2025) with an estimated 10 hours to 3 days still to go",
          "created_at": "2025-12-19T18:23:23Z"
        },
        {
          "user": "andrewtoth",
          "body": "I recently benchmarked #31132 with network connected storage and it likely solves this problem https://github.com/bitcoin/bitcoin/pull/31132#issuecomment-3678847806. The issue is that fetching inputs single threaded with high latency but high throughput storage is unable to utilize any of the throughput.\n\nPlease review or test.",
          "created_at": "2025-12-21T19:01:18Z"
        },
        {
          "user": "Sjors",
          "body": "@viaj3ro you could also try the AssumeUTXO feature (`loadtxoutset`), https://github.com/bitcoin-core/bitcoincore.org/pull/1197 links to a torrent for the most recent snapshot. It doesn't reduce total sync time, but once it's synced to the tip your lightning node should work. ",
          "created_at": "2025-12-30T03:59:44Z"
        },
        {
          "user": "willcl-ark",
          "body": "Closing as unplanned, because as explained above I don't think there are any plans to re-introduce the bootstrap mechanism now that we have things like assumeutxo snapshotting, and other [related performance improvements](https://github.com/bitcoin/bitcoin/issues/34121#issuecomment-3679297841) in the pipeline. Feel free to continue conversation in here after close, if you like :)\n\nAs mentioned above, assumeutxo is still bottlenecked on validation speed, and therefore not comparable to a \"trusted datadir clone\" in terms of \"sync\" performance, but if you do want to try it out and find the torrent files unreliable or slow, I host some of the more recent snapshot files at https://utxo.download/ for direct download.",
          "created_at": "2026-01-13T12:12:59Z"
        }
      ]
    },
    {
      "number": 34120,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "meghwalsachin663-gif",
      "created_at": "2025-12-19T17:34:56Z",
      "updated_at": "2025-12-19T17:35:04Z",
      "comments": 1,
      "url": "https://github.com/bitcoin/bitcoin/issues/34120",
      "labels": [],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "\nLLM spam detection (âœ¨ experimental): SPAM. The issue body contains nonsensical numeric placeholders and personal contact strings rather than a clear problem description, reproduction details, or relevant logs. It appears to be garbage/irrelevant content rather than a legitimate bug report or feature request.\n\nâ™»ï¸ Automatically wiping, closing, and locking for now based on heuristics.\nGenerally, please focus on creating high-quality, original content that demonstrates a clear\nunderstanding of the project's requirements and goals.\n",
          "created_at": "2025-12-19T17:35:02Z"
        }
      ]
    },
    {
      "number": 34118,
      "title": "[feature] Scheduled Transaction Broadcast",
      "body": "### Please describe the feature you'd like to see added.\n\n## Overview\n\nIn certain cases the user creating a transaction would like to broadcast it to the bitcoin network delayed, not immediately. It's practical to implement scheduling in the node, as it is a software component designed to be always-on.\n\nWith Scheduled Transaction Broadcast the bitcoin node accepts a transaction for later broadcast, stores it, and broadcasts automatically at the specified target time.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n## Details / Caveats\n\nUses. Delayed transaction broadcast can be useful for/when (among others):\n\n- hiding the real time of transaction creation (with random delay; for non-urgent transactions; typically in the range of few hours -- few days)\n- broadcasting a transaction at a future date\n\nResult, error check. As the actual broadcast happens later, the broadcast result -- success or some error -- is not available at acceptance time. Only parsing checks are done at acceptance time. The client can check the result only by monitoring the bitcoin network. Note: some checks are not possible to be done at acceptance time, as conditions may change (e.g. inputs with timelocks). (Note: it could be possible to offer an API to query for broadcast result, but that's not planned.)\n\nAbsolute time vs. block time. The target time can be specified as an absolute time or a block height.\n\nNo guarantees. Delayed broadcast is best-effort, there is no delivery guarantee.\n\nFee. The transaction fee is contained in the scheduled transaction, and it is not possible to be changed. In case the network fee rate goes up by the time of submission, the fee may be insufficient. CFCP can be used to bump the fee if needed.\n\nRetries. It is possible to specify a number of retries, and a retry period. Then the scehduled broadcast is retried accordingly in case of failure.\n\n\n### Describe any alternatives you've considered\n\nThe following alternatives are identified, though they are outside of the scope of the node software:\n \n- Scheduling implemented in the wallet software. The drawback is that wallets are typically active (running) only for a short period, while there is user interaction. Running in the background may impose some design issues.\n- Implemented in a separate component sitting along the bitcoin node, proxying all RPC API calls, and implementing scheduled (delayed) transaction broadcast.\n\n## Miscellaneous\n\nNote (added Jan 15): earlier feature request #30471 also includes delayed broadcast.\n\nThis could interfere with the feature \"Broadcast own transactions only via short-lived Tor or I2P connections\" (PR ##29415).\nThis feature could be combined with this feature, to further mask the real transaction creation time, by creating the dedicated sending connection sometimes between the scheduling time and target time (randomized). \n\nAn APIs for cancelling an unsent scheduled TX would be possible to offer as well.\n\n\n### Please leave any additional context\n\n## Implementation Details\n\nScheduled transactions are kept in a separate memory structure, and are persisted to a separate file (for persistence accross restarts). The file is read at startup, and written whenever there is a relevant change to its content, and at shutdown.\n\nA new RPC 'schedulerawtransaction' is proposed, with syntax very similar to 'sendrawtransaction'. However, the transaction is not sent rigth away, but stored for later broadcast.\n\n\n## Status\n\nDelving discussion:\nhttps://delvingbitcoin.org/t/scheduled-delayed-transaction-broadcast/2148\n\nPrototype:\nhttps://github.com/optout21/sched-tx-ptoto/\nhttps://github.com/optout21/bitcoin/tree/sched-tx-proto1\nhttps://github.com/optout21/bitcoin/tree/sched-tx-proto0\n\n## History\n\nJan 14: Added ref to #30471, @craigraw .\nJan 5, 2026: Edits w.r.t. to the alternative of implementing in the client; removing speculative fuzzy use case; in response to comments by @ismaelsadeeq .\nDec 19, 2025: Created. ",
      "state": "open",
      "user": "optout21",
      "created_at": "2025-12-19T16:44:42Z",
      "updated_at": "2026-01-15T11:05:51Z",
      "comments": 4,
      "url": "https://github.com/bitcoin/bitcoin/issues/34118",
      "labels": [
        "Feature"
      ],
      "comment_list": [
        {
          "user": "ismaelsadeeq",
          "body": "> In certain cases the user creating a transaction would like to broadcast it to the bitcoin network delayed, not immediately. This scheduling can be done on the client side, but it's practical if it's handled by the node.\n\n> there is some precondition that is expected to occur in the future (e.g. occurrence of a transaction), condition that is not possible (or desired) to be expressed in bitcoin scripts.\n\nThese two points are not convincing enough IMO.\n\n1. As you mentioned, this can be easily handled by the client.\n2. The preconditions you mentioned are unclear and a bit speculative.\nThe specific example you gave can still be achieved from the client: we already have mechanisms for clients to query the state of the mempool, via RPC, REST, as well as push-based ZMQ notifications.\n\nSo, conceptually, Iâ€™m ~0.  This adds complexity of maintaining an additional pool of scheduled transactions on the node side for a niche use case.",
          "created_at": "2025-12-22T13:28:04Z"
        },
        {
          "user": "optout21",
          "body": "> These two points are not convincing enough IMO.\n\n1. For the client part, if I consider the client-node pair, typically the client is active (running) only for short time, while there is user interaction. The node on the other hand, is designed to run in the background. This is an argument for implementing the delayed broadcast in the node. I will re-word my description to be more explicit on this.\n\n2. Indeed, probably best is to remove the speculative use case altogether from the description.\n\nThanks for the feedback.",
          "created_at": "2026-01-05T09:58:57Z"
        },
        {
          "user": "craigraw",
          "body": "This functionality has already been proposed in #30471 (although I am happy to see further support for this feature).",
          "created_at": "2026-01-15T07:33:34Z"
        },
        {
          "user": "optout21",
          "body": "Thanks for the info, I was not aware of it! My proposal here deals only with delayed broadcast, and it is a subset of #30471.\nThere are several different things considered:\n\n- Mitigation for the case when a submitted transaction gets lost (when it is dropped from the node mempool and does not live on in any other mempool). Done by keeping pending local transactions and periodically resubmitting.\n- Mitigation for disappearing/reappearing pending transaction (when a tx is dropped from the node mempool but later it gets confirmed; this is mostly a UX issue). Done by providing info about txs stored in the local pool (and also periodical resubmit)\n- Delayed tx broadcast, for extra privacy\n- Using more private means (connection) when broadcasting, for extra privacy -- #29415 \n\nAll of these are related, but have different goal and technical issues.\n\nExcept for the last, which has to be handled inside the node, the rest could be handled:\n\n- in the wallet software -- here the main issue is that wallets are not designed/used in an 'always-on' mode\n- inside indexer (electrum) implementation (I have no idea how much of these different electrum implementations do)\n- as an add-on next to the bitcoin core node (think RPC proxy style with enhancement)\n- inside the node\n",
          "created_at": "2026-01-15T11:00:40Z"
        }
      ]
    },
    {
      "number": 34114,
      "title": "log: frequent `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs as `net:warning`",
      "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nOn my node at home (not a monitoring node), I'm seeing three `pcp: Mapping failed with result NOT_AUTHORIZED (code 2)` logs every five minutes logged as `net:warnings`. I think that's too frequent.\n\n```\n...\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:32:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:37:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:42:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:47:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:52:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T10:57:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:00:54Z Flushed fee estimates to fee_estimates.dat.\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n2025-12-19T11:02:26Z [net:warning] pcp: Mapping failed with result NOT_AUTHORIZED (code 2)\n...\n```\n\n### Expected behaviour\n\nFewer of the pcp warnings.\n\n### Steps to reproduce\n\nRun a node behind a router that returns NOT_AUTHORIZED for PCP (?)\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv30.0 (via nixpkgs)\n\n### Operating system and version\n\nNixOS\n\n### Machine specifications\n\nMachine is behind a home internet router with PCP disabled by default.  I'm running the node with `txindex=1`, `addnode`, and otherwise default configuration.",
      "state": "open",
      "user": "0xB10C",
      "created_at": "2025-12-19T11:16:06Z",
      "updated_at": "2026-01-14T14:55:09Z",
      "comments": 2,
      "url": "https://github.com/bitcoin/bitcoin/issues/34114",
      "labels": [
        "Utils/log/libs"
      ],
      "comment_list": [
        {
          "user": "0xB10C",
          "body": "My understanding is that this is a different log message from https://github.com/bitcoin/bitcoin/issues/33301 and https://github.com/bitcoinknots/bitcoin/issues/184. However, I haven't checked if  https://github.com/bitcoin/bitcoin/pull/33311 fixed it too.\n\nedit: It seems related, but is a different log message.\n\nhttps://github.com/bitcoin/bitcoin/blob/516ae5ede44a8a6abc59e90f9d89913e254524f4/src/common/pcp.cpp#L511",
          "created_at": "2025-12-19T11:20:56Z"
        },
        {
          "user": "fanquake",
          "body": "cc @laanwj @willcl-ark ",
          "created_at": "2025-12-19T15:25:20Z"
        }
      ]
    },
    {
      "number": 34110,
      "title": "scriptpubkeyman fuzz target creates Base58 too large; Fails on 32-bit (armhf, ...)",
      "body": "Decoding should not behave differently on different architectures. See also the related commit 3789215f73466606eb111714f596a2a5e9bb1933.\n\nHowever, the `scriptpubkeyman` fuzz target seems to create base58 strings so large that `uint32_t` overflows for calculations in base58.cpp.\n\nThis is a bit hard to reproduce, because 32-bit platforms are rare and most of them don't support running the unsigned integer overflow sanitizer. So the possible options to reproduce are:\n\n* Run on armhf and manually annotate the code to detect the overflow\n* Run on i386 with the integer sanitizer (possibly via `podman run -it --rm --platform linux/i386 'debian:trixie'`)\n* Run the integer sanitizer on any 64-bit platform and manually replace type in the affected line by `uint32_t`\n\nAfterwards, the steps to reproduce are:\n\n```\nexport DEBIAN_FRONTEND=noninteractive && apt update && apt install curl wget htop git vim ccache -y && git clone https://github.com/bitcoin/bitcoin.git  --depth=1 ./b-c && cd b-c && apt install build-essential cmake pkg-config  python3-zmq libzmq3-dev libevent-dev libboost-dev libsqlite3-dev  systemtap-sdt-dev  libcapnp-dev capnproto  libqrencode-dev qt6-tools-dev qt6-l10n-tools qt6-base-dev  clang llvm libc++-dev libc++abi-dev   -y\n\ncmake -B ./bld-cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang' -DCMAKE_CXX_COMPILER='clang++' -DSANITIZERS=undefined,integer,float-divide-by-zero --preset=dev-mode\n\ncmake --build ./bld-cmake --parallel  $(nproc)\n\ncurl -fLO 'https://github.com/bitcoin-core/qa-assets/raw/b5ad78e070e4cf36beb415d7b490d948d70ba73f/fuzz_corpora/scriptpubkeyman/1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5'\n\nUBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1:report_error_type=1\" FUZZ=scriptpubkeyman ./bld-cmake/bin/fuzz ./1cf91e0c6bfff9dafcd4db5b0ba36b1e906f4cf5\n```\n\nThe output will be something like:\n\n```\n/b-c/src/base58.cpp:54:28: runtime error: unsigned integer overflow: 8744655 * 733 cannot be represented in type 'size_t' (aka 'unsigned int')\n    #0 0x5985f849 in DecodeBase58(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:54:28\n    #1 0x59860a8b in DecodeBase58Check(char const*, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:148:10\n    #2 0x5986093b in DecodeBase58Check(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&, std::vector<unsigned char, std::allocator<unsigned char>>&, int) /b-c/bld-cmake/src/./base58.cpp:168:12\n    #3 0x599c4fc8 in DecodeSecret(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>> const&) /b-c/bld-cmake/src/./key_io.cpp:217:9\n    #4 0x59b05478 in (anonymous namespace)::ParsePubkeyInner(unsigned int, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, bool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1789:20\n    #5 0x59af4256 in (anonymous namespace)::ParsePubkey(unsigned int&, std::span<char const, 4294967295u> const&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:1978:16\n    #6 0x59adc3af in (anonymous namespace)::ParseScript(unsigned int&, std::span<char const, 4294967295u>&, (anonymous namespace)::ParseScriptContext, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&) /b-c/bld-cmake/src/./script/descriptor.cpp:2148:24\n    #7 0x59adbc65 in Parse(std::basic_string_view<char, std::char_traits<char>>, FlatSigningProvider&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>&, bool) /b-c/bld-cmake/src/./script/descriptor.cpp:2751:16\n    #8 0x597ad5de in wallet::(anonymous namespace)::CreateWalletDescriptor(FuzzedDataProvider&) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:73:61\n    #9 0x597ac489 in wallet::(anonymous namespace)::scriptpubkeyman_fuzz_target(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/./wallet/test/fuzz/scriptpubkeyman.cpp:104:22\n    #10 0x58950a8e in void std::__invoke_impl<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(std::__invoke_other, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:61:14\n    #11 0x589508eb in std::enable_if<is_invocable_r_v<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>, void>::type std::__invoke_r<void, void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>>(void (*&)(std::span<unsigned char const, 4294967295u>), std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/invoke.h:111:2\n    #12 0x5895044b in std::_Function_handler<void (std::span<unsigned char const, 4294967295u>), void (*)(std::span<unsigned char const, 4294967295u>)>::_M_invoke(std::_Any_data const&, std::span<unsigned char const, 4294967295u>&&) /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:290:9\n    #13 0x5982ac95 in std::function<void (std::span<unsigned char const, 4294967295u>)>::operator()(std::span<unsigned char const, 4294967295u>) const /usr/lib/gcc/i686-linux-gnu/14/../../../../include/c++/14/bits/std_function.h:591:9\n    #14 0x5981f0da in test_one_input(std::span<unsigned char const, 4294967295u>) /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:88:5\n    #15 0x59821b80 in main /b-c/bld-cmake/src/test/fuzz/util/./test/fuzz/fuzz.cpp:271:13\n    #16 0xf75a8cc2  (/lib/i386-linux-gnu/libc.so.6+0x24cc2) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #17 0xf75a8d87 in __libc_start_main (/lib/i386-linux-gnu/libc.so.6+0x24d87) (BuildId: 2dc5f2945fad35c1b07d1a5a32520b3c41afaa75)\n    #18 0x58917db6 in _start (/b-c/bld-cmake/bin/fuzz+0x235ddb6) (BuildId: 7d8d83a77923f14e99c0de64acbc5f5bfc2cce9b)\n\nSUMMARY: UndefinedBehaviorSanitizer: unsigned-integer-overflow /b-c/src/base58.cpp:54:28 \n```\n\n\nObviously, it would be trivial to fix this by using the same type on 64-bit and 32-bit:\n\n```diff\n    refactor: Use uint64_t over size_t for multiplications in DecodeBase58\n\ndiff --git a/src/base58.cpp b/src/base58.cpp\nindex 19a5bd3e55..5364b8276b 100644\n--- a/src/base58.cpp\n+++ b/src/base58.cpp\n@@ -51,7 +51,7 @@ static const int8_t mapBase58[256] = {\n         psz++;\n     }\n     // Allocate enough space in big-endian base256 representation.\n-    int size = strlen(psz) * 733 /1000 + 1; // log(58) / log(256), rounded up.\n+    int size(uint64_t{std::strlen(psz)} * 733 / 1000 + 1); // log(58) / log(256), rounded up.\n     std::vector<unsigned char> b256(size);\n     // Process the characters.\n     static_assert(std::size(mapBase58) == 256, \"mapBase58.size() should be 256\"); // guarantee not out of range\n```\n\nHowever, this seems like the wrong fix. A string of size `8744655` seems a bit large and should probably be rejected by the wallet code (if applicable), or by the fuzz target, if the condition is unreachable in  a production wallet.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-12-19T08:12:11Z",
      "updated_at": "2026-01-13T23:28:47Z",
      "comments": 7,
      "url": "https://github.com/bitcoin/bitcoin/issues/34110",
      "labels": [
        "Wallet"
      ],
      "comment_list": [
        {
          "user": "brunoerg",
          "body": "The `scriptpubkeyman` target creates a wallet based on a descriptor from the input. So it basically creates random descriptors which is leading to create this specific case where it's a `pk()` fragment with a super large content into it. Besides this overflow issue I think these large descriptors are unproductive and makes the target slower, so could we reject large descriptors in the fuzz target?",
          "created_at": "2025-12-26T16:59:03Z"
        },
        {
          "user": "maflcko",
          "body": "> could we reject large descriptors in the fuzz target?\n\nYeah, that makes sense. I wonder if there is ever a use-case to expand any immediately following `%ij%kl` in the `GetDescriptor` helper. (Assuming this is what happens here). If no use-case exists, a requirement could be added to have any character in-between.\n\nA hacky one-line diff to achieve that could be:\n\n```diff\ndiff --git a/src/test/fuzz/util/descriptor.cpp b/src/test/fuzz/util/descriptor.cpp\nindex 9e52e990a2..debd6a43fd 100644\n--- a/src/test/fuzz/util/descriptor.cpp\n+++ b/src/test/fuzz/util/descriptor.cpp\n@@ -62,7 +62,7 @@ std::optional<std::string> MockedDescriptorConverter::GetDescriptor(std::string_\n             if (i + 3 >= mocked_desc.size()) return {};\n             if (const auto idx = IdxFromHex(mocked_desc.substr(i + 1, 2))) {\n                 desc += keys_str[*idx];\n-                i += 3;\n+                i += 4;\n             } else {\n                 return {};\n             }\n```\n\nI haven't tried that, and if it works, it will need an explanatory comment.",
          "created_at": "2025-12-26T17:15:40Z"
        },
        {
          "user": "brunoerg",
          "body": ">  I wonder if there is ever a use-case to expand any immediately following %ij%kl in the GetDescriptor helper. (Assuming this is what happens here). If no use-case exists, a requirement could be added to have any character in-between.\n\nI think there is no use-case for expanding it, keys typically need to be separated by something so your suggestion makes sense. Perhaps a comment that explains it could be:\n\n```diff\ndiff --git a/src/test/fuzz/util/descriptor.cpp b/src/test/fuzz/util/descriptor.cpp\nindex 9e52e990a2..7c5e43206a 100644\n--- a/src/test/fuzz/util/descriptor.cpp\n+++ b/src/test/fuzz/util/descriptor.cpp\n@@ -62,7 +62,8 @@ std::optional<std::string> MockedDescriptorConverter::GetDescriptor(std::string_\n             if (i + 3 >= mocked_desc.size()) return {};\n             if (const auto idx = IdxFromHex(mocked_desc.substr(i + 1, 2))) {\n                 desc += keys_str[*idx];\n-                i += 3;\n+               // Consume %ij (3 chars) + 1 separator. Prevents invalid consecutive placeholders like %00%01\n+                i += 4;\n             } else {\n```",
          "created_at": "2025-12-29T15:30:08Z"
        },
        {
          "user": "maflcko",
          "body": "I guess my above diff may not fully fix long strings and requiring a separator like `,` or `)` after any `%ij` may also be needed.",
          "created_at": "2025-12-30T12:08:10Z"
        },
        {
          "user": "brunoerg",
          "body": "I still think we should reject long strings in the target anyway. I think it's maybe the only way to avoid these large descriptors that are improductive and make the target slower.",
          "created_at": "2025-12-30T12:34:25Z"
        },
        {
          "user": "maflcko",
          "body": "The rpc target has base58 strings capped at `max_base58_bytes_length{64}`. Not sure if we want to limit all descriptors to this size.\n\nI think to check that each inner fragment string is less than maximum meaningful byte length, could make sense.",
          "created_at": "2025-12-30T12:59:30Z"
        },
        {
          "user": "maflcko",
          "body": "> I think to check that each inner fragment string is less than maximum meaningful byte length, could make sense.\n\nDid that in https://github.com/bitcoin/bitcoin/pull/34230",
          "created_at": "2026-01-08T11:24:10Z"
        }
      ]
    }
  ],
  "summary": {
    "pull_requests": 9,
    "issues": 5
  }
}