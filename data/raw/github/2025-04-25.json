{
  "source": "github",
  "repository": "bitcoin/bitcoin",
  "fetched_at": "2026-01-15T19:35:45.792016+00:00",
  "date": "2025-04-25",
  "pull_requests": [
    {
      "number": 32354,
      "title": "tests: Added progress tracker when running fuzz test_runner.py",
      "body": "### Summary\r\nRight now if you run `test_runner.py` on all the targets it is hard to tell how far you are in the progress even with `--loglevel=DEBUG` on. As it just spits out the target that was completed an no info on how many targets are left. \r\n\r\nThis change gives you a count down to the last target being run and some additional info provided by libfuzzer\r\n\r\nThis also applies when you use `-g/--generate` and `--m_dir`\r\n\r\n---\r\n\r\n### Note\r\nI can append this change to either change the percent increments or move it to the `DEBUG` logs instead if preferred\r\n\r\n---\r\n\r\n### Example run\r\n```\r\n./build_fuzz/test/fuzz/test_runner.py ../qa-assets/fuzz_corpora\r\n219 of 219 detected fuzz target(s) selected: addition_overflow addr_info_deserialize address_deserialize addrman addrman_serdeser asmap asmap_direct autofile banman base32_encode_decode base58_encode_decode base58check_encode_decode base64_encode_decode bech32_random_decode bech32_roundtrip bip324_cipher_roundtrip bip324_ecdh bitdeque bitset block block_deserialize block_file_info_deserialize block_filter_deserialize block_header block_header_and_short_txids_deserialize block_index blockfilter blockheader_deserialize blocklocator_deserialize blockmerkleroot blocktransactions_deserialize blocktransactionsrequest_deserialize blockundo_deserialize bloom_filter bloomfilter_deserialize buffered_file build_and_compare_feerate_diagram chacha20_split_crypt chacha20_split_keystream chain checkqueue clusterlin_ancestor_finder clusterlin_chunking clusterlin_components clusterlin_depgraph_serialization clusterlin_depgraph_sim clusterlin_fix_linearization clusterlin_linearization_chunking clusterlin_linearize clusterlin_make_connected clusterlin_merge clusterlin_postlinearize clusterlin_postlinearize_moved_leaf clusterlin_postlinearize_tree clusterlin_search_finder coin_grinder coin_grinder_is_optimal coincontrol coins_deserialize coins_view coinscache_sim coinselection_bnb coinselection_knapsack coinselection_srd connman crypter crypto crypto_aeadchacha20poly1305 crypto_aes256 crypto_aes256cbc crypto_chacha20 crypto_common crypto_diff_fuzz_chacha20 crypto_fschacha20 crypto_fschacha20poly1305 crypto_hkdf_hmac_sha256_l32 crypto_poly1305 crypto_poly1305_split cuckoocache data_stream_addr_man decode_tx descriptor_parse diskblockindex_deserialize ellswift_roundtrip ephemeral_package_eval eval_script fee_rate fee_rate_deserialize feefrac fees flat_file_pos_deserialize flatfile float golomb_rice headers_sync_state hex http_request i2p integer inv_deserialize key key_io key_origin_info_deserialize kitchen_sink load_external_block_file local_address locale merkle_block_deserialize merkleblock message messageheader_deserialize mini_miner mini_miner_selection miniscript_script miniscript_smart miniscript_stable miniscript_string minisketch mocked_descriptor_parse muhash multiplication_overflow natpmp_request_port_map net net_permissions netaddr_deserialize netaddress netbase_dns_lookup node_eviction num3072_inv num3072_mul out_point_deserialize overflow p2p_handshake p2p_headers_presync p2p_transport_bidirectional p2p_transport_bidirectional_v1v2 p2p_transport_bidirectional_v2 p2p_transport_serialization package_rbf parse_hd_keypath parse_iso8601 parse_numbers parse_script parse_univalue partial_merkle_tree_deserialize partially_downloaded_block partially_signed_transaction_deserialize pcp_request_port_map policy_estimator policy_estimator_io pool_resource pow pow_transition prefilled_transaction_deserialize prevector primitives_transaction process_message process_messages protocol psbt psbt_base64_decode psbt_input_deserialize psbt_output_deserialize pub_key_deserialize random rbf rolling_bloom_filter rpc script script_descriptor_cache script_deserialize script_flags script_format script_interpreter script_ops script_parsing script_sigcache script_sign scriptnum_ops scriptpubkeyman secp256k1_ec_seckey_import_export_der secp256k1_ecdsa_signature_parse_der_lax service_deserialize signature_checker signet snapshotmetadata_deserialize socks5 span str_printf string system timeoffsets torcontrol transaction tx_in tx_in_deserialize tx_out tx_package_eval tx_pool tx_pool_standard txdownloadman txdownloadman_impl txgraph txorphan txoutcompressor_deserialize txrequest txundo_deserialize uint160_deserialize uint256_deserialize utxo_snapshot utxo_snapshot_invalid utxo_total_supply validation_load_mempool vecdeque versionbits wallet_bdb_parser wallet_create_transaction wallet_fees wallet_notifications\r\n(1/219)   addition_overflow                            #1650    DONE   cov: 338 ft: 440 corp: 70/2760b lim: 62 exec/s: 0 rss: 141Mb\r\n(2/219)   address_deserialize                          #2709    DONE   cov: 681 ft: 1394 corp: 131/4575b lim: 272 exec/s: 0 rss: 165Mb\r\n(3/219)   addr_info_deserialize                        #2989    DONE   cov: 530 ft: 942 corp: 146/4619b lim: 262 exec/s: 0 rss: 168Mb\r\n(4/219)   asmap                                        #1341    DONE   cov: 536 ft: 1403 corp: 181/5182b lim: 136 exec/s: 0 rss: 142Mb\r\n(5/219)   asmap_direct                                 #435     DONE   cov: 237 ft: 1147 corp: 143/42Kb lim: 8290 exec/s: 435 rss: 171Mb\r\n(6/219)   autofile                                     #574     DONE   cov: 501 ft: 3127 corp: 277/4181Kb lim: 1041292 exec/s: 574 rss: 508Mb\r\n(7/219)   base32_encode_decode                         #928     DONE   cov: 159 ft: 429 corp: 51/3070b lim: 888 exec/s: 0 rss: 134Mb\r\n(8/219)   base58_encode_decode                         #1413    DONE   cov: 260 ft: 868 corp: 159/2673b lim: 102 exec/s: 0 rss: 141Mb\r\n(9/219)   base58check_encode_decode                    #1107    DONE   cov: 405 ft: 1236 corp: 149/4043b lim: 121 exec/s: 0 rss: 141Mb\r\n(10/219)  base64_encode_decode                         #518     DONE   cov: 140 ft: 368 corp: 31/1515b lim: 220 exec/s: 0 rss: 128Mb\r\n(11/219)  bech32_random_decode                         #684     DONE   cov: 310 ft: 944 corp: 136/2388b lim: 91 exec/s: 0 rss: 130Mb\r\n(12/219)  bech32_roundtrip                             #791     DONE   cov: 287 ft: 688 corp: 86/2012b lim: 130 exec/s: 0 rss: 134Mb\r\n```",
      "state": "closed",
      "user": "kevkevinpal",
      "created_at": "2025-04-25T22:34:51Z",
      "updated_at": "2025-10-22T14:42:27Z",
      "comments": 10,
      "url": "https://github.com/bitcoin/bitcoin/pull/32354",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32354.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [monlovesmango](https://github.com/bitcoin/bitcoin/pull/32354#issuecomment-2848432297) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T22:34:54Z"
        },
        {
          "user": "dergoegge",
          "body": "Concept ~0\r\n\r\n> it is hard to tell how far you are in the progress\r\n\r\nI think there is only a handful of harnesses that take up most of the time, so a progress bar like you have here won't do much to show progress. It'll look like you're stuck at 9x% percent for a long time, so answering \"when will this finish\" is about as hard as before.",
          "created_at": "2025-04-28T12:29:54Z"
        },
        {
          "user": "maflcko",
          "body": "Agree. The only case where it'd help is possibly generate, which is based on a fixed time.\r\n\r\nIf this was done,  i'd say it is fine to log all completed futures, and remove the 5 percent \"step\".\r\n\r\nMore useful in theory could be to log the name of the remaining fuzz tests, like the functional tests.",
          "created_at": "2025-04-28T12:47:33Z"
        },
        {
          "user": "kevkevinpal",
          "body": "Updated to [7ca9b5e](https://github.com/bitcoin/bitcoin/pull/32354/commits/7ca9b5eb6f1f375d25a2e5731ec5a2279db46e5e)\r\n\r\n\r\nThis is now what it looks like, it will print \r\n`<targets_finished>/<total_targets>) - <target_name>`\r\nthen when there are less than 10 fuzz targets it will print the name of the remaining targets\r\n\r\nExample\r\n```\r\n./build_fuzz/test/fuzz/test_runner.py ../qa-assets/fuzz_corpora asmap_direct base64_encode_decode addition_overflow asmap txgraph base58_encode_decode autofile bech32_roundtrip addition_overflow addr_info_deserialize asmap banman bitdeque bip324_ecdh bip324_cipher_roundtrip\r\n13 of 219 detected fuzz target(s) selected: addition_overflow addr_info_deserialize asmap asmap_direct autofile banman base58_encode_decode base64_encode_decode bech32_roundtrip bip324_cipher_roundtrip bip324_ecdh bitdeque txgraph\r\n1/13 - addition_overflow\r\n2/13 - asmap\r\nRemaining targets: ['asmap_direct', 'autofile', 'banman', 'base58_encode_decode', 'base64_encode_decode', 'bech32_roundtrip', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['asmap_direct', 'autofile', 'banman', 'base64_encode_decode', 'bech32_roundtrip', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['asmap_direct', 'autofile', 'banman', 'bech32_roundtrip', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['asmap_direct', 'banman', 'bech32_roundtrip', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['asmap_direct', 'banman', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['banman', 'bip324_cipher_roundtrip', 'bip324_ecdh', 'bitdeque', 'txgraph']\r\nRemaining targets: ['banman', 'bip324_cipher_roundtrip', 'bitdeque', 'txgraph']\r\nRemaining targets: ['banman', 'bip324_cipher_roundtrip', 'txgraph']\r\nRemaining targets: ['banman', 'txgraph']\r\nRemaining targets: ['txgraph']\r\nRemaining targets: []\r\nSummary:\r\naddition_overflow       #60     DONE   cov: 338 ft: 424 corp: 42/1544b lim: 62 exec/s: 0 rss: 121Mb\r\naddr_info_deserialize   #110    DONE   cov: 533 ft: 938 corp: 77/3503b lim: 346 exec/s: 0 rss: 128Mb\r\nasmap                   #205    DONE   cov: 536 ft: 1400 corp: 151/4806b lim: 136 exec/s: 0 rss: 123Mb\r\nasmap_direct            #178    DONE   cov: 237 ft: 1147 corp: 129/44Kb lim: 8298 exec/s: 178 rss: 160Mb\r\nautofile                #235    DONE   cov: 501 ft: 3122 corp: 225/4731Kb lim: 1041292 exec/s: 0 rss: 459Mb\r\nbanman                  #1076   DONE   cov: 3340 ft: 20804 corp: 915/5474Kb lim: 1032263 exec/s: 63 rss: 777Mb\r\nbase58_encode_decode    #91     DONE   cov: 260 ft: 854 corp: 87/4668b lim: 857 exec/s: 0 rss: 121Mb\r\nbase64_encode_decode    #25     DONE   cov: 140 ft: 365 corp: 18/853b lim: 220 exec/s: 0 rss: 120Mb\r\nbech32_roundtrip        #45     DONE   cov: 287 ft: 656 corp: 41/1626b lim: 516 exec/s: 0 rss: 120Mb\r\nbip324_cipher_roundtrip #1446   DONE   cov: 2868 ft: 8853 corp: 263/45Kb lim: 1830 exec/s: 144 rss: 652Mb\r\nbip324_ecdh             #1508   DONE   cov: 2174 ft: 6235 corp: 142/6812b lim: 192 exec/s: 502 rss: 146Mb\r\nbitdeque                #588    DONE   cov: 2077 ft: 16123 corp: 470/617Kb lim: 418902 exec/s: 117 rss: 415Mb\r\ntxgraph                 #3944   DONE   cov: 5461 ft: 32244 corp: 2180/175Kb lim: 357 exec/s: 187 rss: 377Mb\r\n```",
          "created_at": "2025-04-30T20:06:14Z"
        },
        {
          "user": "kevkevinpal",
          "body": "Pushed [9d08d71](https://github.com/bitcoin/bitcoin/pull/32354/commits/9d08d7140fc91f60d6d09497633b207a18aa5d92)\r\n\r\nIt adds the duration it took to run the fuzz target\r\n\r\nExample\r\n```\r\n1/219 - addition_overflow, Duration: 0.44 s\r\n2/219 - address_deserialize, Duration: 0.56 s\r\n3/219 - addr_info_deserialize, Duration: 0.72 s\r\n4/219 - asmap, Duration: 0.36 s\r\n5/219 - asmap_direct, Duration: 1.41 s\r\n6/219 - autofile, Duration: 1.41 s\r\n7/219 - base32_encode_decode, Duration: 0.28 s\r\n8/219 - base58_encode_decode, Duration: 0.42 s\r\n9/219 - base58check_encode_decode, Duration: 0.34 s\r\n```",
          "created_at": "2025-04-30T20:43:40Z"
        },
        {
          "user": "monlovesmango",
          "body": "Concept ACK, but I think approach NACK.\r\n\r\nInstead of creating a whole new set of output, why not just take the summary and print it as results arrive rather than holding them all until the end? I put together a quick POC which produces the output below in real time (rather than waiting until end):\r\n```bash\r\n(1/221)   addition_overflow                            #60\tDONE   cov: 265 ft: 320 corp: 47/1674b lim: 62 exec/s: 0 rss: 115Mb\r\n(2/221)   addr_info_deserialize                        #110\tDONE   cov: 520 ft: 831 corp: 97/5356b lim: 346 exec/s: 0 rss: 122Mb\r\n(3/221)   address_deserialize                          #131\tDONE   cov: 628 ft: 1243 corp: 107/5276b lim: 262 exec/s: 0 rss: 122Mb\r\n(4/221)   asmap                                        #205\tDONE   cov: 554 ft: 1456 corp: 158/4758b lim: 136 exec/s: 0 rss: 118Mb\r\n(5/221)   autofile                                     #235\tDONE   cov: 555 ft: 3280 corp: 228/4733Kb lim: 1041292 exec/s: 0 rss: 446Mb\r\n(6/221)   asmap_direct                                 #178\tDONE   cov: 226 ft: 1094 corp: 129/41Kb lim: 8298 exec/s: 178 rss: 150Mb\r\n(7/221)   base32_encode_decode                         #35\tDONE   cov: 132 ft: 354 corp: 28/2034b lim: 888 exec/s: 0 rss: 115Mb\r\n(8/221)   base58_encode_decode                         #91\tDONE   cov: 228 ft: 766 corp: 85/4232b lim: 857 exec/s: 0 rss: 115Mb\r\n(9/221)   base58check_encode_decode                    #98\tDONE   cov: 365 ft: 1084 corp: 89/24Kb lim: 21168 exec/s: 0 rss: 116Mb\r\n(10/221)  base64_encode_decode                         #25\tDONE   cov: 113 ft: 307 corp: 19/861b lim: 220 exec/s: 0 rss: 113Mb\r\n(11/221)  bech32_random_decode                         #77\tDONE   cov: 272 ft: 880 corp: 74/1594b lim: 91 exec/s: 0 rss: 115Mb\r\n(12/221)  bech32_roundtrip                             #45\tDONE   cov: 251 ft: 688 corp: 40/1675b lim: 516 exec/s: 0 rss: 114Mb\r\n```\r\n\r\ncode is here: https://github.com/monlovesmango/bitcoin/tree/fuzz-test-progress",
          "created_at": "2025-05-02T05:12:30Z"
        },
        {
          "user": "kevkevinpal",
          "body": "> 5d39a39\r\n\r\nThank you for the review, I agree that looks much better and makes sense to use the current output we get from libfuzzer\r\n\r\nI pushed [5d39a39](https://github.com/bitcoin/bitcoin/pull/32354/commits/5d39a3995dbf23e78f17a46e4793b28322d95ebe) with similar changes to what you suggested",
          "created_at": "2025-05-02T12:29:33Z"
        },
        {
          "user": "DrahtBot",
          "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/41572070330</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is caused by errors detected during the lint check, specifically a 'ruff' error indicating an issue with Python code, leading to the failure of the lint job.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
          "created_at": "2025-05-03T00:42:34Z"
        },
        {
          "user": "monlovesmango",
          "body": "ACK 3af8f625fa1087fc659f5cbf0c5f568f15d89ee1",
          "created_at": "2025-05-03T04:56:58Z"
        },
        {
          "user": "achow101",
          "body": "This PR does not seem to have attracted much attention from reviewers. As such, it does not seem important enough right now to keep it sitting idle in the list of open PRs.\r\n\r\nClosing due to lack of interest.",
          "created_at": "2025-10-22T14:42:26Z"
        }
      ]
    },
    {
      "number": 32353,
      "title": "doc: Fix fuzz test_runner.py path",
      "body": "This commit fixes the path listed in the documentation for the fuzz testing test_runner.py. Previously the --help option worked but running fuzz tests from the documented path did not.\r\n",
      "state": "closed",
      "user": "monlovesmango",
      "created_at": "2025-04-25T16:40:14Z",
      "updated_at": "2025-05-01T03:26:15Z",
      "comments": 5,
      "url": "https://github.com/bitcoin/bitcoin/pull/32353",
      "labels": [
        "Docs"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32353.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [kevkevinpal](https://github.com/bitcoin/bitcoin/pull/32353#issuecomment-2830999023), [maflcko](https://github.com/bitcoin/bitcoin/pull/32353#issuecomment-2833354624), [mabu44](https://github.com/bitcoin/bitcoin/pull/32353#pullrequestreview-2797651133), [hebasto](https://github.com/bitcoin/bitcoin/pull/32353#pullrequestreview-2797667681) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T16:40:17Z"
        },
        {
          "user": "kevkevinpal",
          "body": "ACK [61f238e](https://github.com/bitcoin/bitcoin/pull/32353/commits/61f238e84ac6d24d8f420c2eabcbb2980d7fcb1e)\r\n\r\n---\r\n\r\nThis is the error I get if I try running `test_runner.py` from the non build dir\r\n```\r\n./test/fuzz/test_runner.py ../qa-assets/fuzz_corpora\r\nTraceback (most recent call last):\r\n  File \"/mnt/shared_drive/DEVDIR/bitcoin/./test/fuzz/test_runner.py\", line 407, in <module>\r\n    main()\r\n  File \"/mnt/shared_drive/DEVDIR/bitcoin/./test/fuzz/test_runner.py\", line 102, in main\r\n    config.read_file(open(configfile, encoding=\"utf8\"))\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nFileNotFoundError: [Errno 2] No such file or directory: '/mnt/shared_drive/DEVDIR/bitcoin/test/fuzz/../config.ini'\r\n```\r\n\r\nWhile the command in the doc does work for `--help` one would assume that running the fuzz tests with that script should work too",
          "created_at": "2025-04-25T17:22:10Z"
        },
        {
          "user": "maflcko",
          "body": "lgtm ACK 61f238e84ac6d24d8f420c2eabcbb2980d7fcb1e",
          "created_at": "2025-04-27T09:37:39Z"
        },
        {
          "user": "fanquake",
          "body": "Backported to 29.x in #32292.",
          "created_at": "2025-04-28T09:20:30Z"
        },
        {
          "user": "monlovesmango",
          "body": "For anyone interested, I just opened another PR for this same type of documentation fix in the Unit Test README.md, https://github.com/bitcoin/bitcoin/pull/32389",
          "created_at": "2025-05-01T03:26:14Z"
        }
      ]
    },
    {
      "number": 32352,
      "title": "[29.x] qt: 29.1 translations update",
      "body": "This PR fetches the recent translation updates from Transifex.\r\n\r\nCloses https://github.com/bitcoin/bitcoin/issues/32295.\r\n\r\n**Notes for reviewers:**\r\n\r\n1. \"fr_CM\" and \"fr_LU\" have been dropped as part of [phasing out of territory-specific translations](https://app.transifex.com/bitcoin/communication/d:402657d1-6254-4ce9-8d26-e7827652c627/?q=project%3Abitcoin).\r\n\r\n2. The translations for the following languages, which appear to be the result of a mistake or an act of vandalism, have been discarded (also see https://github.com/bitcoin/bitcoin/pull/32004):\r\n    - Czech (cs)\r\n    - Danish (da)\r\n    - Dutch (nl)\r\n    - Vietnamese (vi)\r\n\r\n3. Update for Silesian (szl) has been discarded as malicious.",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-25T14:21:58Z",
      "updated_at": "2025-05-06T20:34:32Z",
      "comments": 18,
      "url": "https://github.com/bitcoin/bitcoin/pull/32352",
      "labels": [
        "Backport"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32352.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/32352#pullrequestreview-2818619507) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T14:22:01Z"
        },
        {
          "user": "hebasto",
          "body": "> Closes #32295.\r\n\r\nHowever, the Polish (pl) translation still have a couple of issues:\r\n\r\n1. String 160: Mismatch between 'S&how' and '%WyÅ›wietl'\r\n\r\n2. String 452: Mismatch between 'Transaction broadcast successfully! Transaction ID: %1' and 'transakcja'",
          "created_at": "2025-04-25T14:26:56Z"
        },
        {
          "user": "hebasto",
          "body": "> > Closes #32295.\r\n> \r\n> However, the Polish (pl) translation still have a couple of issues:\r\n> \r\n>     1. String 160: Mismatch between 'S&how' and '%WyÅ›wietl'\r\n> \r\n>     2. String 452: Mismatch between 'Transaction broadcast successfully! Transaction ID: %1' and 'transakcja'\r\n\r\nFriendly ping @jesterhodl :)",
          "created_at": "2025-04-25T14:53:49Z"
        },
        {
          "user": "jesterhodl",
          "body": "> Transaction broadcast successfully\r\n\r\nBoth fixed in Transifex.",
          "created_at": "2025-04-25T14:57:53Z"
        },
        {
          "user": "hebasto",
          "body": "> > Transaction broadcast successfully\r\n> \r\n> Both fixed in Transifex.\r\n\r\nThanks! Updated and undrafted.",
          "created_at": "2025-04-25T15:19:59Z"
        },
        {
          "user": "jesterhodl",
          "body": "So I rerun the script and found some more issues and updated Transifex.\r\nv29 is not translated 100% yet from what I see, but at least the worst offenders: spam, typos, gross errors should be fixed now.",
          "created_at": "2025-04-25T17:19:21Z"
        },
        {
          "user": "hebasto",
          "body": "> So I rerun the script and found some more issues and updated Transifex. v29 is not translated 100% yet from what I see, but at least the worst offenders: spam, typos, gross errors should be fixed now.\r\n\r\nThank you! Updated.",
          "created_at": "2025-04-25T17:57:16Z"
        },
        {
          "user": "maflcko",
          "body": "The erroneous format specs still remain: https://github.com/bitcoin/bitcoin/issues/32295#issuecomment-2827238571",
          "created_at": "2025-04-27T08:08:58Z"
        },
        {
          "user": "jesterhodl",
          "body": "> The erroneous format specs still remain: [#32295 (comment)](https://github.com/bitcoin/bitcoin/issues/32295#issuecomment-2827238571)\r\n\r\nOk, for Polish there was one. I just corrected it.\r\nI'm happy to correct other languages for this sort of issue, but I'm only granted access to Polish team in Transifex.\r\nIf someone grants me temporary access I can fix others and go back to being just Polish Team.",
          "created_at": "2025-04-27T12:44:26Z"
        },
        {
          "user": "jesterhodl",
          "body": "check_translations shouldn't complain for any polish labels as of now. I ran it.\r\nTransifex is updated.",
          "created_at": "2025-04-27T15:44:03Z"
        },
        {
          "user": "maflcko",
          "body": "> check_translations shouldn't complain for any polish labels as of now. I ran it.\r\n\r\nThanks. Just for reference, the script doesn't *need* to report no complaints. Sometimes it complains about perfectly fine translations. Also, it may not even be deterministic if called several times with a cleared cache.",
          "created_at": "2025-04-27T16:00:25Z"
        },
        {
          "user": "jesterhodl",
          "body": "> > check_translations shouldn't complain for any polish labels as of now. I ran it.\r\n> \r\n> Thanks. Just for reference, the script doesn't _need_ to report no complaints. Sometimes it complains about perfectly fine translations. Also, it may not even be deterministic if called several times with a cleared cache.\r\n\r\nOK. By the way I noticed it. It complained A should be B, and then B should be A. Neither form would make it happy. I opted for something else.",
          "created_at": "2025-04-27T16:03:01Z"
        },
        {
          "user": "hebasto",
          "body": "Fetched the updated Polish (pl) translation. Thanks to @jesterhodl !\r\n\r\n@maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/32352#issuecomment-2833289993) has also been addressed.\r\n\r\nI believe that any further translation improvements should be made through communication with the language coordinators, which I'm currently trying to arrange.",
          "created_at": "2025-05-02T10:50:03Z"
        },
        {
          "user": "jesterhodl",
          "body": "Going forward:\n- who do I contact if there's an issue with source labels?\n- do I have to do anything when I just maintain new or updated labels? eg. when I align wording across the app",
          "created_at": "2025-05-02T10:56:46Z"
        },
        {
          "user": "hebasto",
          "body": "cc @stickies-v @pablomartin4btc @johnny9 as regular reviewers of similar previous PRs.\r\n\r\ncc @fanquake as the 29.1 release manager.",
          "created_at": "2025-05-02T10:57:01Z"
        },
        {
          "user": "hebasto",
          "body": "> Going forward:\r\n> \r\n>    * who do I contact if there's an issue with source labels?\r\n\r\nFeel free to ping me.\r\n\r\n> \r\n>    * do I have to do anything when I just maintain new or updated labels? eg. when I align wording across the app\r\n\r\nMind clarifying please?",
          "created_at": "2025-05-02T10:57:59Z"
        },
        {
          "user": "jesterhodl",
          "body": "> >    * do I have to do anything when I just maintain new or updated labels? eg. when I align wording across the app\n> \n> \n> \n> Mind clarifying please?\n\nSure. I translate lots of apps on Transifex, Weblate, etc.\nI routinely revisit to check for new things to update or correct existing translations based on my experience or feedback.\nSo I update the transifex translations.\n\nWhen I do this, is it sufficient and github pulls the .ts files automatically, or would it be wise to ping someone?",
          "created_at": "2025-05-02T12:08:39Z"
        },
        {
          "user": "hebasto",
          "body": "> > > * do I have to do anything when I just maintain new or updated labels? eg. when I align wording across the app\r\n> > \r\n> > \r\n> > Mind clarifying please?\r\n> \r\n> Sure. I translate lots of apps on Transifex, Weblate, etc. I routinely revisit to check for new things to update or correct existing translations based on my experience or feedback. So I update the transifex translations.\r\n> \r\n> When I do this, is it sufficient and github pulls the .ts files automatically, or would it be wise to ping someone?\r\n\r\nYes, that is sufficient, provided no one else has modified your translations. In that case, marking translations as reviewed might help.\r\n\r\nUPD. However, not \"automatically\", rather in pull requests like this one.",
          "created_at": "2025-05-02T13:26:20Z"
        }
      ]
    },
    {
      "number": 32351,
      "title": "test: avoid stack overflow in `FindChallenges` via manual iteration",
      "body": "`FindChallenges` explores the `Miniscript` node tree by going deep into the first child's subtree, then the second, and so on - effectively performing a pre-order Traversal (Depth-First Search) recursively, using the call stack which can result in stack overflows on Windows debug builds.\r\n\r\nThis change replaces the recursive implementation with an iterative version using an explicit stack. The new implementation also performs a pre-order depth-first traversal, though it processes children in right-to-left order (rather than left-to-right) due to the LIFO nature of the stack. Since both versions store results in a `std::set`, which automatically sorts and deduplicates elements, the exact traversal order doesn't affect the final result.\r\n\r\nIt is an alternative to increasing the Windows stack size, as proposed in #32349, and addresses the issue raised in #32341 by avoiding deep recursion altogether.\r\n\r\nThe change is done in two commits:\r\n* add a new iterative `FindChallenges` method and rename the old method to `*_recursive` (to simplify the next commit where we remove it), asserting that its result matches the original;\r\n* remove the original recursive implementation.\r\n\r\nThis approach avoids ignoring the `misc-no-recursion` warning as well.\r\n\r\nI tried modifying the new method to store results in a vector instead, but it demonstrated that the deduplication provided by `std::set` was necessary. One example showing the need for deduplication:\r\n\r\nRecursive (using set):\r\n```\r\n  (6, 9070746)\r\n  (6, 19532513)\r\n  (6, 3343376967)\r\n```\r\nIterative (using vector attempt):\r\n```\r\n  (6, 19532513)\r\n  (6, 9070746)\r\n  (6, 3343376967)\r\n  (6, 9070746)  // Duplicate entry\r\n```\r\n\r\nThe performance of the test is the same as before, with the recursive method.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32341",
      "state": "closed",
      "user": "l0rinc",
      "created_at": "2025-04-25T14:15:23Z",
      "updated_at": "2025-04-30T05:29:50Z",
      "comments": 12,
      "url": "https://github.com/bitcoin/bitcoin/pull/32351",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32351.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sipa](https://github.com/bitcoin/bitcoin/pull/32351#pullrequestreview-2799484506), [hodlinator](https://github.com/bitcoin/bitcoin/pull/32351#pullrequestreview-2799813040), [achow101](https://github.com/bitcoin/bitcoin/pull/32351#issuecomment-2840371986) |\n| Concept ACK | [darosior](https://github.com/bitcoin/bitcoin/pull/32351#pullrequestreview-2794937685) |\n| Stale ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/32351#pullrequestreview-2797575186) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31713](https://github.com/bitcoin/bitcoin/pull/31713) (miniscript refactor: Remove unique_ptr-indirection (#30866 follow-up) by hodlinator)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T14:15:26Z"
        },
        {
          "user": "hebasto",
          "body": "cc @darosior ",
          "created_at": "2025-04-25T14:30:31Z"
        },
        {
          "user": "hebasto",
          "body": "[Here](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/14667837569/job/41166981753) is a \"Windows, Debug\" CI job for this branch in https://github.com/hebasto/bitcoin-core-nightly.",
          "created_at": "2025-04-25T15:15:20Z"
        },
        {
          "user": "l0rinc",
          "body": "> miniscript_tests (SEGFAULT)\r\n\r\nThis was the original failure in debug mode\r\n\r\n> [Here](https://github.com/hebasto/bitcoin-core-nightly/actions/runs/14667837569/job/41166981753) is a \"Windows, Debug\" CI job\r\n\r\nWhile the build is till running, this test passed already:\r\n ```python\r\n 89/140 Test  # 60: miniscript_tests .....................   Passed  126.23 sec\r\n ```\r\n \r\n > Should this marked as Fixes https://github.com/bitcoin/bitcoin/issues/32341?\r\n \r\n Added it to the description",
          "created_at": "2025-04-25T20:16:57Z"
        },
        {
          "user": "l0rinc",
          "body": "> On master we do a depth-first gathering of challenges, the new stack based version does breadth-first, but result is put in a std::set so traversal order does not matter.\r\n\r\nI've reworded the commit message and PR description to make this clearer.\r\nThe original method is pre-order depth-first, where the children are processed in the same order they appear (Left-to-right). The new method is still pre-order depth-first, but children are inserted in the reverse order (Right-to-left). But as you mention, it's in a set, so the iteration order will still be the same.\r\nAlso, narrowed the scope of `stack` by encapsulating it into a `for` loop, making `chal` the only variable in-scope when we get to the return statement.\r\n\r\n> the changes in this PR could be much smaller and easier to review\r\n\r\nYou mean to avoid the use of the switch statement? If you feel strongly about it I can revert that, but the code seemed easy to review in either way.",
          "created_at": "2025-04-27T09:26:09Z"
        },
        {
          "user": "hebasto",
          "body": "> > the changes in this PR could be much smaller and easier to review\n> \n> \n> \n> You mean to avoid the use of the switch statement? If you feel strongly about it I can revert that, but the code seemed easy to review in either way.\n\nI mean to squash all changes into a single commit with functionality changes only. Refactoring changes, such as introducing the `switch` statement, could be added in a separate commit.\n\nBut not a strong opinion, though.",
          "created_at": "2025-04-27T12:11:38Z"
        },
        {
          "user": "l0rinc",
          "body": "Since CI is checking every commit, I have split out the introduction of the new algorithm, demonstrating that it results in the same output as the original.\r\nI'm not sure how to do that in a single commit - unless I add it as a test, which didn't seem necessary here.",
          "created_at": "2025-04-27T12:14:36Z"
        },
        {
          "user": "hebasto",
          "body": "@theuni \r\n\r\nDue to your https://github.com/bitcoin/bitcoin/pull/31367#issuecomment-2524210640, you might b e interested in reviewing this PR.",
          "created_at": "2025-04-28T09:32:55Z"
        },
        {
          "user": "l0rinc",
          "body": "> Refactoring changes, such as introducing the switch statement, could be added in a separate commit\r\n\r\nGood idea, done in latest push.\r\nI have also checked https://corecheck.dev/bitcoin/bitcoin/pulls/32351 and saw that Sonar was also compaining about https://sonarcloud.io/organizations/aureleoules/rules?open=cpp%3AS4998&rule_key=cpp%3AS4998, addressed it also in a separate commit.",
          "created_at": "2025-04-28T14:12:41Z"
        },
        {
          "user": "darosior",
          "body": "My review was requested but since Pieter and Hodlinator beat me to it i think this had enough review already?",
          "created_at": "2025-04-28T18:44:26Z"
        },
        {
          "user": "l0rinc",
          "body": "If you don't have time to review, a concept ack would still be useful\r\nedit: seems your https://github.com/bitcoin/bitcoin/pull/32351#pullrequestreview-2794937685 is still active",
          "created_at": "2025-04-28T18:48:29Z"
        },
        {
          "user": "achow101",
          "body": "ACK 7e8ef959d0637ca5543ed33d3919937e0d053e70",
          "created_at": "2025-04-29T22:23:52Z"
        }
      ]
    },
    {
      "number": 32350,
      "title": "test: Slim down previous releases bdb check",
      "body": "The check iterates over several previous BDB-only releases to check that descriptor wallets are considered \"corrupt\" when loading. It is unclear why this needs to be done for more than one release.\r\n\r\nAvoid the confusion by removing the unused releases from the test and from the download script.",
      "state": "closed",
      "user": "maflcko",
      "created_at": "2025-04-25T14:13:20Z",
      "updated_at": "2025-04-29T06:03:23Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/pull/32350",
      "labels": [
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32350.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32350#pullrequestreview-2798880061), [achow101](https://github.com/bitcoin/bitcoin/pull/32350#issuecomment-2836295677) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T14:13:23Z"
        },
        {
          "user": "maflcko",
          "body": "> I have noticed that the 17 release was removed from this test recently in some PR and now 18, 19 are removed.\r\n\r\nCorrect. For reference, the reasons for removal were different. This removal in this pull request only became possible after the bdb removal removing the test for the v0.19 18075 behavior (https://github.com/bitcoin/bitcoin/issues/18075)\r\n\r\n> I'd assume that the 20 release is kept in this test for a considerable time as it marks the last release that didn't contain descriptors (& SQLite) wallets & had only legacy (& BDB) ones.\r\n\r\nYeah, it should be fine to keep for a while. I don't anticipate any issues popping up.\r\n\r\n",
          "created_at": "2025-04-28T11:44:50Z"
        },
        {
          "user": "achow101",
          "body": "ACK fa58f40b898ba6c57655bf38a241fb10107d4a3a",
          "created_at": "2025-04-28T19:30:14Z"
        }
      ]
    },
    {
      "number": 32349,
      "title": "test: Increase stack size for \"Debug\" builds with MSVC",
      "body": "This PR accommodates the deep recursion in the `FindChallenges()` function used in `test/miniscript_tests.cpp`.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/32341#issuecomment-2829441596.\r\n\r\nCI log: https://github.com/hebasto/bitcoin/actions/runs/14664806617/job/41156972137",
      "state": "closed",
      "user": "hebasto",
      "created_at": "2025-04-25T12:42:34Z",
      "updated_at": "2025-04-27T09:19:10Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/pull/32349",
      "labels": [
        "Windows",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "DrahtBot",
          "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32349.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
          "created_at": "2025-04-25T12:42:38Z"
        },
        {
          "user": "l0rinc",
          "body": "I'm not against increasing the Windows stack depth, but the underlying problem may be that we're ignoring warnings such as `misc-no-recursion`, even when the fix is quite simple.\r\n\r\n`FindChallenges` looks like a simple depth-first search, which should be straightforward to rewrite as an iterative walk:\r\n```diff\r\ndiff --git a/src/test/miniscript_tests.cpp b/src/test/miniscript_tests.cpp\r\nindex f253562a2f..14ac44e2c6 100644\r\n--- a/src/test/miniscript_tests.cpp\r\n+++ b/src/test/miniscript_tests.cpp\r\n@@ -323,6 +323,35 @@ std::set<Challenge> FindChallenges(const NodeRef& ref) {\r\n     return chal;\r\n }\r\n \r\n+std::set<Challenge> FindChallenges_no_recursion(const NodeRef& root)\r\n+{\r\n+    std::set<Challenge> chal;\r\n+    std::vector<const Node*> stack;\r\n+    stack.push_back(root.get());\r\n+\r\n+    while (!stack.empty()) {\r\n+        const Node* ref{stack.back()};\r\n+        stack.pop_back();\r\n+\r\n+        for (const auto& key : ref->keys) {\r\n+            chal.emplace(ChallengeType::PK, ChallengeNumber(key));\r\n+        }\r\n+        switch (ref->fragment) {\r\n+        case Fragment::OLDER: chal.emplace(ChallengeType::OLDER, ref->k); break;\r\n+        case Fragment::AFTER: chal.emplace(ChallengeType::AFTER, ref->k); break;\r\n+        case Fragment::SHA256: chal.emplace(ChallengeType::SHA256, ChallengeNumber(ref->data)); break;\r\n+        case Fragment::RIPEMD160: chal.emplace(ChallengeType::RIPEMD160, ChallengeNumber(ref->data)); break;\r\n+        case Fragment::HASH256: chal.emplace(ChallengeType::HASH256, ChallengeNumber(ref->data)); break;\r\n+        case Fragment::HASH160: chal.emplace(ChallengeType::HASH160, ChallengeNumber(ref->data)); break;\r\n+        default: break;\r\n+        }\r\n+        for (const auto& sub : ref->subs) {\r\n+            stack.push_back(sub.get());\r\n+        }\r\n+    }\r\n+    return chal;\r\n+}\r\n+\r\n //! The spk for this script under the given context. If it's a Taproot output also record the spend data.\r\n CScript ScriptPubKey(miniscript::MiniscriptContext ctx, const CScript& script, TaprootBuilder& builder)\r\n {\r\n@@ -348,6 +377,8 @@ struct MiniScriptTest : BasicTestingSetup {\r\n void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const NodeRef& node) {\r\n     auto script = node->ToScript(converter);\r\n     auto challenges = FindChallenges(node); // Find all challenges in the generated miniscript.\r\n+    auto challenges_no_recursion = FindChallenges_no_recursion(node); // Find all challenges in the generated miniscript.\r\n+    BOOST_CHECK(std::vector{challenges} == std::vector{challenges_no_recursion});\r\n     std::vector<Challenge> challist(challenges.begin(), challenges.end());\r\n     for (int iter = 0; iter < 3; ++iter) {\r\n         std::shuffle(challist.begin(), challist.end(), m_rng);\r\n```",
          "created_at": "2025-04-25T13:02:28Z"
        },
        {
          "user": "hebasto",
          "body": "> I'm not against increasing the Windows stack depth, but the underlying problem may be that we're ignoring warnings such as `misc-no-recursion`, even when the fix is quite simple.\r\n> \r\n> `FindChallenges` looks like a simple depth-first search, which should be straightforward to rewrite as an iterative walk:\r\n> \r\n> ```diff\r\n> diff --git a/src/test/miniscript_tests.cpp b/src/test/miniscript_tests.cpp\r\n> index f253562a2f..14ac44e2c6 100644\r\n> --- a/src/test/miniscript_tests.cpp\r\n> +++ b/src/test/miniscript_tests.cpp\r\n> @@ -323,6 +323,35 @@ std::set<Challenge> FindChallenges(const NodeRef& ref) {\r\n>      return chal;\r\n>  }\r\n>  \r\n> +std::set<Challenge> FindChallenges_no_recursion(const NodeRef& root)\r\n> +{\r\n> +    std::set<Challenge> chal;\r\n> +    std::vector<const Node*> stack;\r\n> +    stack.push_back(root.get());\r\n> +\r\n> +    while (!stack.empty()) {\r\n> +        const Node* ref{stack.back()};\r\n> +        stack.pop_back();\r\n> +\r\n> +        for (const auto& key : ref->keys) {\r\n> +            chal.emplace(ChallengeType::PK, ChallengeNumber(key));\r\n> +        }\r\n> +        switch (ref->fragment) {\r\n> +        case Fragment::OLDER: chal.emplace(ChallengeType::OLDER, ref->k); break;\r\n> +        case Fragment::AFTER: chal.emplace(ChallengeType::AFTER, ref->k); break;\r\n> +        case Fragment::SHA256: chal.emplace(ChallengeType::SHA256, ChallengeNumber(ref->data)); break;\r\n> +        case Fragment::RIPEMD160: chal.emplace(ChallengeType::RIPEMD160, ChallengeNumber(ref->data)); break;\r\n> +        case Fragment::HASH256: chal.emplace(ChallengeType::HASH256, ChallengeNumber(ref->data)); break;\r\n> +        case Fragment::HASH160: chal.emplace(ChallengeType::HASH160, ChallengeNumber(ref->data)); break;\r\n> +        default: break;\r\n> +        }\r\n> +        for (const auto& sub : ref->subs) {\r\n> +            stack.push_back(sub.get());\r\n> +        }\r\n> +    }\r\n> +    return chal;\r\n> +}\r\n> +\r\n>  //! The spk for this script under the given context. If it's a Taproot output also record the spend data.\r\n>  CScript ScriptPubKey(miniscript::MiniscriptContext ctx, const CScript& script, TaprootBuilder& builder)\r\n>  {\r\n> @@ -348,6 +377,8 @@ struct MiniScriptTest : BasicTestingSetup {\r\n>  void TestSatisfy(const KeyConverter& converter, const std::string& testcase, const NodeRef& node) {\r\n>      auto script = node->ToScript(converter);\r\n>      auto challenges = FindChallenges(node); // Find all challenges in the generated miniscript.\r\n> +    auto challenges_no_recursion = FindChallenges_no_recursion(node); // Find all challenges in the generated miniscript.\r\n> +    BOOST_CHECK(std::vector{challenges} == std::vector{challenges_no_recursion});\r\n>      std::vector<Challenge> challist(challenges.begin(), challenges.end());\r\n>      for (int iter = 0; iter < 3; ++iter) {\r\n>          std::shuffle(challist.begin(), challist.end(), m_rng);\r\n> ```\r\n\r\ncc @sipa @darosior ",
          "created_at": "2025-04-25T13:12:31Z"
        },
        {
          "user": "darosior",
          "body": "That sounds sensible, can you open a PR with this patch and tag me?",
          "created_at": "2025-04-25T13:17:12Z"
        },
        {
          "user": "l0rinc",
          "body": "Opened https://github.com/bitcoin/bitcoin/pull/32351 as an alternative fix, cc: @darosior",
          "created_at": "2025-04-25T14:16:03Z"
        },
        {
          "user": "hebasto",
          "body": "Closing in favour of https://github.com/bitcoin/bitcoin/pull/32351.",
          "created_at": "2025-04-27T09:19:09Z"
        }
      ]
    }
  ],
  "issues": [
    {
      "number": 32348,
      "title": ".",
      "body": ".",
      "state": "closed",
      "user": "Pimpim11",
      "created_at": "2025-04-25T12:24:21Z",
      "updated_at": "2025-04-25T15:43:38Z",
      "comments": 3,
      "url": "https://github.com/bitcoin/bitcoin/issues/32348",
      "labels": [],
      "comment_list": [
        {
          "user": "willcl-ark",
          "body": "For proposed protocol changes you can post to the [bitcoindev mailing list](https://groups.google.com/g/bitcoindev) or the [Delving Bitcoin](https://delvingbitcoin.org/) Discorse forum. However as this appears to be largely about \"Syamailcoin\" I am not sure it's particularly appropriate for there either.\n\nFor general bitcoin discussion you can try [bitcointalk](https://bitcointalk.org) or [https://reddit.com/r/bitcoin](reddit.com/r/bitcoin). ",
          "created_at": "2025-04-25T12:27:18Z"
        }
      ]
    },
    {
      "number": 32347,
      "title": "test: functional test failures under -DENABLE_WALLET=OFF",
      "body": "```bash\nmake -C depends/\ncmake -B build --toolchain /root/bitcoin/depends/aarch64-unknown-linux-gnu/toolchain.cmake -DENABLE_WALLET=OFF\ncmake --build build\n./build/test/functional/test_runner.py\n<snip>\nwallet_watchonly.py --legacy-wallet                                  | â—‹ Skipped | 1 s\nwallet_watchonly.py --usecli --legacy-wallet                         | â—‹ Skipped | 0 s\nfeature_rbf.py                                                       | âœ– Failed  | 10 s\ninterface_bitcoin_cli.py --legacy-wallet                             | âœ– Failed  | 2 s\nrpc_rawtransaction.py --legacy-wallet                                | âœ– Failed  | 4 s\n\nALL                                                                  | âœ– Failed  | 1649 s (accumulated) \nRuntime: 109 s\n```\n\n```bash\n./build/test/functional/test_runner.py feature_rbf.py\nTemporary test directory at /tmp/test_runner_â‚¿_ðŸƒ_20250425_095628\nRemaining jobs: [feature_rbf.py]\n1/1 - feature_rbf.py failed, Duration: 9 s\n\nstdout:\n2025-04-25T09:56:28.807000Z TestFramework (INFO): PRNG seed is: 5062381283780844628\n2025-04-25T09:56:28.810000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â‚¿_ðŸƒ_20250425_095628/feature_rbf_0\n2025-04-25T09:56:29.888000Z TestFramework (INFO): Running test simple doublespend...\n2025-04-25T09:56:29.900000Z TestFramework (INFO): Running test doublespend chain...\n2025-04-25T09:56:31.122000Z TestFramework (INFO): Running test doublespend tree...\n2025-04-25T09:56:35.126000Z TestFramework (INFO): Running test replacement feeperkb...\n2025-04-25T09:56:35.198000Z TestFramework (INFO): Running test spends of conflicting outputs...\n2025-04-25T09:56:35.273000Z TestFramework (INFO): Running test new unconfirmed inputs...\n2025-04-25T09:56:35.313000Z TestFramework (INFO): Running test too many replacements...\n2025-04-25T09:56:36.130000Z TestFramework (INFO): Running test too many replacements using default mempool params...\n2025-04-25T09:56:37.759000Z TestFramework (INFO): Running test RPC...\n2025-04-25T09:56:37.766000Z TestFramework (ERROR): JSONRPC error\nTraceback (most recent call last):\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 182, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/build/test/functional/feature_rbf.py\", line 69, in run_test\n    self.test_rpc()\n    ~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/build/test/functional/feature_rbf.py\", line 571, in test_rpc\n    self.init_wallet(node=0)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 500, in init_wallet\n    n.createwallet(wallet_name=wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_node.py\", line 943, in createwallet\n    return self.__getattr__('createwallet')(wallet_name, disable_private_keys, blank, passphrase, avoid_reuse, descriptors, load_on_startup, external_signer)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/root/bitcoin/test/functional/test_framework/authproxy.py\", line 151, in __call__\n    raise JSONRPCException(response['error'], status)\ntest_framework.authproxy.JSONRPCException: Method not found (-32601)\n2025-04-25T09:56:37.819000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n```\n\n```bash\n./build/test/functional/test_runner.py \"interface_bitcoin_cli.py --legacy-wallet\"\nTemporary test directory at /tmp/test_runner_â‚¿_ðŸƒ_20250425_095732\nRemaining jobs: [interface_bitcoin_cli.py --legacy-wallet]\n1/1 - interface_bitcoin_cli.py --legacy-wallet failed, Duration: 2 s\n\nstdout:\n2025-04-25T09:57:32.579000Z TestFramework (INFO): PRNG seed is: 8443230222166435487\n2025-04-25T09:57:32.580000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â‚¿_ðŸƒ_20250425_095732/interface_bitcoin_cli_0\n2025-04-25T09:57:32.936000Z TestFramework (INFO): Compare responses from getblockchaininfo RPC and `bitcoin-cli getblockchaininfo`\n2025-04-25T09:57:32.944000Z TestFramework (INFO): Test named arguments\n2025-04-25T09:57:32.963000Z TestFramework (INFO): Test that later cli named arguments values silently overwrite earlier ones\n2025-04-25T09:57:32.978000Z TestFramework (INFO): Test -stdinrpcpass option\n2025-04-25T09:57:33.243000Z TestFramework (INFO): Test -stdin and -stdinrpcpass\n2025-04-25T09:57:33.505000Z TestFramework (INFO): Test connecting to a non-existing server\n2025-04-25T09:57:33.512000Z TestFramework (INFO): Test handling of invalid ports in rpcconnect\n2025-04-25T09:57:33.531000Z TestFramework (INFO): Checking for IPv6\n2025-04-25T09:57:33.556000Z TestFramework (INFO): Test handling of invalid ports in rpcport\n2025-04-25T09:57:33.575000Z TestFramework (INFO): Test port usage preferences\n2025-04-25T09:57:33.622000Z TestFramework (INFO): Test connecting with non-existing RPC cookie file\n2025-04-25T09:57:33.879000Z TestFramework (INFO): Test connecting without RPC cookie file and with password arg\n2025-04-25T09:57:33.884000Z TestFramework (INFO): Test -getinfo with arguments fails\n2025-04-25T09:57:33.888000Z TestFramework (INFO): Test -getinfo with -color=never does not return ANSI escape codes\n2025-04-25T09:57:33.895000Z TestFramework (INFO): Test -getinfo with -color=always returns ANSI escape codes\n2025-04-25T09:57:33.906000Z TestFramework (INFO): Test -getinfo with invalid value for -color option\n2025-04-25T09:57:33.915000Z TestFramework (INFO): Test -getinfo returns expected network and blockchain info\n2025-04-25T09:57:33.917000Z TestFramework (ERROR): JSONRPC error\nTraceback (most recent call last):\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 182, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/build/test/functional/interface_bitcoin_cli.py\", line 184, in run_test\n    self.import_deterministic_coinbase_privkeys()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 493, in import_deterministic_coinbase_privkeys\n    self.init_wallet(node=i)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 500, in init_wallet\n    n.createwallet(wallet_name=wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_node.py\", line 943, in createwallet\n    return self.__getattr__('createwallet')(wallet_name, disable_private_keys, blank, passphrase, avoid_reuse, descriptors, load_on_startup, external_signer)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/root/bitcoin/test/functional/test_framework/authproxy.py\", line 151, in __call__\n    raise JSONRPCException(response['error'], status)\ntest_framework.authproxy.JSONRPCException: Method not found (-32601)\n2025-04-25T09:57:33.971000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n```\n\n```bash\n./build/test/functional/test_runner.py \"rpc_rawtransaction.py --legacy-wallet\"\nTemporary test directory at /tmp/test_runner_â‚¿_ðŸƒ_20250425_095758\nRemaining jobs: [rpc_rawtransaction.py --legacy-wallet]\n1/1 - rpc_rawtransaction.py --legacy-wallet failed, Duration: 4 s\n\nstdout:\n2025-04-25T09:57:58.860000Z TestFramework (INFO): PRNG seed is: 1212977684088360964\n2025-04-25T09:57:58.861000Z TestFramework (INFO): Initializing test directory /tmp/test_runner_â‚¿_ðŸƒ_20250425_095758/rpc_rawtransaction_0\n2025-04-25T09:58:01.196000Z TestFramework (INFO): Test getrawtransaction with -txindex\n2025-04-25T09:58:01.214000Z TestFramework (INFO): Test getrawtransaction without -txindex\n2025-04-25T09:58:02.260000Z TestFramework (INFO): Test getrawtransaction with -txindex, with blockhash\n2025-04-25T09:58:02.262000Z TestFramework (INFO): Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\n2025-04-25T09:58:02.282000Z TestFramework (INFO): Test getrawtransaction without -txindex, with blockhash\n2025-04-25T09:58:02.284000Z TestFramework (INFO): Test getrawtransaction without -txindex, without blockhash: expect the call to raise\n2025-04-25T09:58:02.298000Z TestFramework (INFO): Test getrawtransaction on genesis block coinbase returns an error\n2025-04-25T09:58:02.302000Z TestFramework (INFO): Test createrawtransaction\n2025-04-25T09:58:02.409000Z TestFramework (INFO): Test sendrawtransaction with missing input\n2025-04-25T09:58:02.422000Z TestFramework (INFO): Test sendrawtransaction exceeding, falling short of, and equaling maxburnamount\n2025-04-25T09:58:02.452000Z TestFramework (INFO): Test sendrawtransaction/testmempoolaccept with maxfeerate\n2025-04-25T09:58:02.468000Z TestFramework (INFO): Test sendrawtransaction/testmempoolaccept with tx outputs already in the utxo set\n2025-04-25T09:58:02.490000Z TestFramework (INFO): Test decoderawtransaction\n2025-04-25T09:58:02.498000Z TestFramework (INFO): Test transaction version numbers\n2025-04-25T09:58:02.505000Z TestFramework (ERROR): JSONRPC error\nTraceback (most recent call last):\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 182, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/build/test/functional/rpc_rawtransaction.py\", line 95, in run_test\n    self.import_deterministic_coinbase_privkeys()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 493, in import_deterministic_coinbase_privkeys\n    self.init_wallet(node=i)\n    ~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_framework.py\", line 500, in init_wallet\n    n.createwallet(wallet_name=wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/test_node.py\", line 943, in createwallet\n    return self.__getattr__('createwallet')(wallet_name, disable_private_keys, blank, passphrase, avoid_reuse, descriptors, load_on_startup, external_signer)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n  File \"/root/bitcoin/test/functional/test_framework/authproxy.py\", line 151, in __call__\n    raise JSONRPCException(response['error'], status)\ntest_framework.authproxy.JSONRPCException: Method not found (-32601)\n2025-04-25T09:58:02.559000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-25T09:58:34Z",
      "updated_at": "2025-05-02T09:39:31Z",
      "comments": 6,
      "url": "https://github.com/bitcoin/bitcoin/issues/32347",
      "labels": [
        "Wallet",
        "Tests"
      ],
      "comment_list": [
        {
          "user": "maflcko",
          "body": "The no wallet CI task passes: https://cirrus-ci.com/task/5884997988515840?logs=ci#L3274\n\nWhat is the configure summary?",
          "created_at": "2025-04-25T10:33:36Z"
        },
        {
          "user": "fanquake",
          "body": "```bash\nConfigure summary\n=================\nExecutables:\n  bitcoind ............................ ON\n  bitcoin-node (multiprocess) ......... OFF\n  bitcoin-qt (GUI) .................... ON\n  bitcoin-gui (GUI, multiprocess) ..... OFF\n  bitcoin-cli ......................... ON\n  bitcoin-tx .......................... ON\n  bitcoin-util ........................ ON\n  bitcoin-wallet ...................... OFF\n  bitcoin-chainstate (experimental) ... OFF\n  libbitcoinkernel (experimental) ..... OFF\nOptional features:\n  wallet support ...................... OFF\n  external signer ..................... ON\n  ZeroMQ .............................. ON\n  IPC ................................. OFF\n  USDT tracing ........................ ON\n  QR code (GUI) ....................... ON\n  DBus (GUI, Linux only) .............. ON\nTests:\n  test_bitcoin ........................ ON\n  test_bitcoin-qt ..................... ON\n  bench_bitcoin ....................... OFF\n  fuzz binary ......................... OFF\n\nCross compiling ....................... FALSE\nC++ compiler .......................... GNU 15.0.1, /usr/lib64/ccache/g++\nCMAKE_BUILD_TYPE ...................... RelWithDebInfo\nPreprocessor defined macros ........... \nC++ compiler flags .................... -pipe -std=c++20 -O2 -O2 -g -std=c++20 -fPIC -fno-extended-identifiers -fdebug-prefix-map=/root/bitcoin/src=. -fmacro-prefix-map=/root/bitcoin/src=. -fstack-reuse=none -Wall -Wextra -Wformat -Wformat-security -Wvla -Wredundant-decls -Wdate-time -Wduplicated-branches -Wduplicated-cond -Wlogical-op -Woverloaded-virtual -Wsuggest-override -Wimplicit-fallthrough -Wunreachable-code -Wbidi-chars=any -Wundef -Wno-unused-parameter -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=3 -Wstack-protector -fstack-protector-all -fstack-clash-protection -mbranch-protection=standard\nLinker flags .......................... -pipe -std=c++20 -O2 -O2 -g -fstack-reuse=none -fstack-protector-all -fstack-clash-protection -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -fPIE -pie\n\nNOTE: The summary above may not exactly match the final applied build flags\n      if any additional CMAKE_* or environment variables have been modified.\n      To see the exact flags applied, build with the --verbose option.\n\nAttempt to harden executables ......... ON\nTreat compiler warnings as errors ..... OFF\nUse ccache for compiling .............. ON\n\n\n-- Configuring done (33.7s)\n-- Generating done (0.2s)\n-- Build files have been written to: /root/bitcoin/build\n```",
          "created_at": "2025-04-25T10:40:22Z"
        },
        {
          "user": "davidgumberg",
          "body": "I couldn't reproduce this on x86_64 linux, could you share the `build/test/config.ini` file?\n\nAFAICT, none of these lines that result in a crash should be running when `is_wallet_compiled() == false`, and that's based on the contents of config.ini:\n\nhttps://github.com/bitcoin/bitcoin/blob/68ac9f116c0228a277f18f60ba2278b56356e6ac/test/functional/test_framework/test_framework.py#L268-L270\n\nhttps://github.com/bitcoin/bitcoin/blob/68ac9f116c0228a277f18f60ba2278b56356e6ac/test/functional/test_framework/test_framework.py#L1036-L1038",
          "created_at": "2025-04-30T22:29:05Z"
        },
        {
          "user": "fanquake",
          "body": "> could you share the build/test/config.ini file?\n\n```bash\n# Copyright (c) 2013-2016 The Bitcoin Core developers\n# Distributed under the MIT software license, see the accompanying\n# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n\n# These environment variables are set by the build process and read by\n# test/*/test_runner.py and test/util/rpcauth-test.py\n\n[environment]\nCLIENT_NAME=Bitcoin Core\nCLIENT_BUGREPORT=https://github.com/bitcoin/bitcoin/issues\nSRCDIR=/root/bitcoin\nBUILDDIR=/root/bitcoin/build\nEXEEXT=\nRPCAUTH=/root/bitcoin/share/rpcauth/rpcauth.py\n\n[components]\n# Which components are enabled. These are commented out by cmake if they were disabled during configuration.\n#ENABLE_WALLET=true\nUSE_BDB=true\nENABLE_CLI=true\nENABLE_BITCOIN_UTIL=true\n#ENABLE_BITCOIN_CHAINSTATE=true\n#ENABLE_WALLET_TOOL=true\nENABLE_BITCOIND=true\n#ENABLE_FUZZ_BINARY=true\nENABLE_ZMQ=true\nENABLE_EXTERNAL_SIGNER=true\nENABLE_USDT_TRACEPOINTS=true\n```\n\nLooks like this was \"fixed\" after #31250. I still see the failure if I checkout 971952588daebf0d4d08a7e0eeef1734fcd8a9b1 and run the same steps.",
          "created_at": "2025-05-01T09:58:06Z"
        },
        {
          "user": "davidgumberg",
          "body": "I think #31250 genuinely fixed this, https://github.com/bitcoin/bitcoin/pull/31250/commits/c847dee1488a294c9a9632a00ba1134b21e41947, changed the logic for whether or not tests are run in all the crash cases exhibited here.\n\nIt seems that the old `is_specified_wallet_compiled` used in these spots made the mistake of assuming that if BDB was enabled in the build, the wallet was enabled, when this is not the case.\n\n```diff\ndiff --git a/test/functional/test_framework/test_framework.py b/test/functional/test_framework/test_framework.py\nindex 659d62530d..17cb803eb9 100755\n--- a/test/functional/test_framework/test_framework.py\n+++ b/test/functional/test_framework/test_framework.py\n@@ -1067,14 +1037,6 @@ class BitcoinTestFramework(metaclass=BitcoinTestMetaClass):\n-    def is_specified_wallet_compiled(self):\n-        \"\"\"Checks whether wallet support for the specified type\n-           (legacy or descriptor wallet) was compiled.\"\"\"\n-        if self.options.descriptors:\n-            return self.is_wallet_compiled()\n-        else:\n-            return self.is_bdb_compiled()\n```\n\n\n```diff\ndiff --git a/test/functional/feature_rbf.py b/test/functional/feature_rbf.py\nindex c7f0cc5e43..ee79a27392 100755\n--- a/test/functional/feature_rbf.py\n+++ b/test/functional/feature_rbf.py\n@@ -567,7 +565,7 @@ class ReplaceByFeeTest(BitcoinTestFramework):\n         assert_equal(json0[\"vin\"][0][\"sequence\"], 4294967293)\n         assert_equal(json1[\"vin\"][0][\"sequence\"], 4294967295)\n \n-        if self.is_specified_wallet_compiled():\n+        if self.is_wallet_compiled():\n             self.init_wallet(node=0)\n\n```\n\n```diff\ndiff --git a/test/functional/interface_bitcoin_cli.py b/test/functional/interface_bitcoin_cli.py\nindex 2618c12e9f..5b27f0b850 100755\n--- a/test/functional/interface_bitcoin_cli.py\n+++ b/test/functional/interface_bitcoin_cli.py\nBitcoinCli(BitcoinTestFramework):\n         assert_raises_process_error(1, \"Invalid value for -color option. Valid values: always, auto, never.\", self.nodes[0].cli('-getinfo', '-color=foo').send_cli)\n \n         self.log.info(\"Test -getinfo returns expected network and blockchain info\")\n-        if self.is_specified_wallet_compiled():\n+        if self.is_wallet_compiled():\n             self.import_deterministic_coinbase_privkeys()\n             self.nodes[0].encryptwallet(password)\n         cli_get_info_string = self.nodes[0].cli('-getinfo').send_cli()\n```\n\n```diff\ndiff --git a/test/functional/rpc_rawtransaction.py b/test/functional/rpc_rawtransaction.py\nindex 3c3eb9fcb6..0f0224daaa 100755\n--- a/test/functional/rpc_rawtransaction.py\n+++ b/test/functional/rpc_rawtransaction.py\n@@ -91,12 +89,8 @@ class RawTransactionsTest(BitcoinTestFramework):\n         self.sendrawtransaction_testmempoolaccept_tests()\n         self.decoderawtransaction_tests()\n         self.transaction_version_number_tests()\n-        if self.is_specified_wallet_compiled() and not self.options.descriptors:\n-            self.import_deterministic_coinbase_privkeys()\n-            self.raw_multisig_transaction_legacy_tests()\n```",
          "created_at": "2025-05-01T20:11:41Z"
        },
        {
          "user": "maflcko",
          "body": "> genuinely fixed this\n\nI agree: With the removal of `is_specified_wallet_compiled` this should no longer happen. Closing for now, but feel free to re-open if the issue still exists.",
          "created_at": "2025-05-02T09:39:11Z"
        }
      ]
    },
    {
      "number": 32346,
      "title": "build: Windows cross Qt broken on macOS host",
      "body": "```bash\nmake -C depends HOST=x86_64-w64-mingw32\n<snip>\n-- Configure summary:\n\nBuilding for: win32-g++ (x86_64, CPU features: )\nCompiler: gcc 14.2.0\nBuild options:\n  Mode ................................... release\n  Optimize release build for size ........ no\n  Fully optimize release builds (-O3) .... no\n  Building shared libraries .............. no\n  Unity Build ............................ no\n  Relocatable ............................ no\n  Using precompiled headers .............. yes\n  Using Link Time Optimization (LTCG) .... no\n  Using Intel CET ........................ no\n  Target compiler supports:\n    x86 Intrinsics ....................... Basic VAES AVX512VBMI2\n  Sanitizers:\n    Addresses ............................ no\n    Threads .............................. no\n    Memory ............................... no\n    Fuzzer (instrumentation only) ........ no\n    Undefined ............................ no\n  Build parts ............................ libs\n  Install examples sources ............... no\n  App store compliance ................... no\nQt modules and options:\n  Qt Concurrent .......................... no\n  Qt D-Bus ............................... no\n  Qt D-Bus directly linked to libdbus .... no\n  Qt Gui ................................. yes\n  Qt Network ............................. yes\n  Qt PrintSupport ........................ no\n  Qt Sql ................................. no\n  Qt Testlib ............................. yes\n  Qt Widgets ............................. yes\n  Qt Xml ................................. yes\nSupport enabled for:\n  Using pkg-config ....................... no\n  Using vcpkg ............................ no\n  udev ................................... no\n  OpenSSL ................................ no\n    Qt directly linked to OpenSSL ........ no\n  OpenSSL 1.1 ............................ no\n  OpenSSL 3.0 ............................ no\n  Using system zlib ...................... no\n  Zstandard support ...................... no\n  Thread support ......................... yes\nCommon build options:\n  Linker can resolve circular dependencies  yes\nQt Core:\n  backtrace .............................. no\n  DoubleConversion ....................... yes\n    Using system DoubleConversion ........ no\n  GLib ................................... no\n  ICU .................................... no\n  Using system libb2 ..................... yes\n  Built-in copy of the MIME database ..... yes\n  Application permissions ................ yes\n  Tracing backend ........................ <none>\n  OpenSSL based cryptographic hash ....... no\n  Logging backends:\n    journald ............................. no\n    syslog ............................... no\n    slog2 ................................ no\n  PCRE2 .................................. yes\n    Using system PCRE2 ................... no\nQt Network:\n  getifaddrs() ........................... no\n  IPv6 ifname ............................ no\n  libproxy ............................... no\n  Schannel ............................... no\n  DTLS ................................... no\n  OCSP-stapling .......................... no\n  SCTP ................................... no\n  Use system proxies ..................... no\n  GSSAPI ................................. no\n  Brotli Decompression Support ........... no\n  qIsEffectiveTLD() ...................... no\n    Built-in publicsuffix database ....... no\n    System publicsuffix database ......... no\nCore tools:\n  Android deployment tool ................ no\n  macOS deployment tool .................. no\n  Windows deployment tool ................ no\n  qmake .................................. no\nQt Gui:\n  Accessibility .......................... yes\n  FreeType ............................... no\n    Using system FreeType ................ no\n  HarfBuzz ............................... yes\n    Using system HarfBuzz ................ no\n  Fontconfig ............................. no\n  Image formats:\n    GIF .................................. no\n    ICO .................................. no\n    JPEG ................................. no\n      Using system libjpeg ............... no\n    PNG .................................. yes\n      Using system libpng ................ no\n  Text formats:\n    HtmlParser ........................... yes\n    CssParser ............................ yes\n    OdfWriter ............................ no\n    MarkdownReader ....................... no\n      Using system libmd4c ............... no\n    MarkdownWriter ....................... no\n  EGL .................................... no\n  OpenVG ................................. no\n  OpenGL:\n    Desktop OpenGL ....................... no\n    Dynamic OpenGL ....................... no\n    OpenGL ES 2.0 ........................ no\n    OpenGL ES 3.0 ........................ no\n    OpenGL ES 3.1 ........................ no\n    OpenGL ES 3.2 ........................ no\n  Vulkan ................................. no\n  Session Management ..................... no\nFeatures used by QPA backends:\n  evdev .................................. no\n  libinput ............................... no\n  HiRes wheel support in libinput ........ no\n  INTEGRITY HID .......................... no\n  mtdev .................................. no\n  tslib .................................. no\n  xkbcommon .............................. no\n  X11 specific:\n    XLib ................................. no\n    XCB Xlib ............................. no\n    EGL on X11 ........................... no\n    xkbcommon-x11 ........................ no\n    xcb-sm ............................... no\nQPA backends:\n  DirectFB ............................... no\n  EGLFS .................................. no\n  EGLFS details:\n    EGLFS OpenWFD ........................ no\n    EGLFS i.Mx6 .......................... no\n    EGLFS i.Mx6 Wayland .................. no\n    EGLFS RCAR ........................... no\n    EGLFS EGLDevice ...................... no\n    EGLFS GBM ............................ no\n    EGLFS VSP2 ........................... no\n    EGLFS Mali ........................... no\n    EGLFS Raspberry Pi ................... no\n    EGLFS X11 ............................ no\n  LinuxFB ................................ no\n  VNC .................................... no\n  VK_KHR_display ......................... no\n  QNX:\n    lgmon ................................ no\n    IMF .................................. no\n  XCB:\n    Using system-provided xcb-xinput ..... no\n    GL integrations:\n      GLX Plugin ......................... no\n        XCB GLX .......................... no\n      EGL-X11 Plugin ..................... no\n  Windows:\n    Direct 2D ............................ yes\n    Direct 2D 1.1 ........................ yes\n    DirectWrite .......................... yes\n    DirectWrite 3 ........................ yes\nQt Widgets:\n  GTK+ ................................... no\n  Styles ................................. Fusion Windows WindowsVista\nQt Testlib:\n  Tester for item models ................. yes\n  Batch tests ............................ no\n \n\nNote: Using static linking will disable the use of dynamically loaded plugins. Make sure to import all needed static plugins, or compile needed modules into the library.\n\nWARNING: Basic cpp/winrt support missing. Some features might not be available.\n\n-- \n\nQt is now configured for building. Just run 'cmake --build . --parallel'\n\nOnce everything is built, you must run 'cmake --install .'\nQt will be installed into '/bitcoin/depends/x86_64-w64-mingw32'\n\nTo configure and build other Qt modules, you can use the following convenience script:\n        /bitcoin/depends/x86_64-w64-mingw32/bin/qt-configure-module\n\nIf reconfiguration fails for some reason, try removing 'CMakeCache.txt' from the build directory\nAlternatively, you can add the --fresh flag to your CMake flags.\n\n-- Configuring done (30.4s)\nCMake Error in qtbase/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"zstd::libzstd_shared\"\n  configuration \"Release\".\n\n\nCMake Error in qtbase/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"zstd::libzstd_shared\"\n  configuration \"Release\".\n\n\nCMake Error in qtbase/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"zstd::libzstd_shared\"\n  configuration \"Release\".\n\n\nCMake Error in qtbase/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"zstd::libzstd_shared\"\n  configuration \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target\n  \"double-conversion::double-conversion\" configuration \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target\n  \"double-conversion::double-conversion\" configuration \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target\n  \"double-conversion::double-conversion\" configuration \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target\n  \"double-conversion::double-conversion\" configuration \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"md4c::md4c\" configuration\n  \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"md4c::md4c\" configuration\n  \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"md4c::md4c\" configuration\n  \"Release\".\n\n\nCMake Error in qtbase/src/CMakeLists.txt:\n  IMPORTED_IMPLIB not set for imported target \"md4c::md4c\" configuration\n  \"Release\".\n\n\n-- Generating done (0.7s)\nCMake Generate step failed.  Build files cannot be regenerated correctly.\nCMake Error at qtbase/cmake/QtProcessConfigureArgs.cmake:1077 (message):\n  CMake exited with code 1.\n```",
      "state": "closed",
      "user": "fanquake",
      "created_at": "2025-04-25T09:22:17Z",
      "updated_at": "2025-04-28T15:15:18Z",
      "comments": 0,
      "url": "https://github.com/bitcoin/bitcoin/issues/32346",
      "labels": [
        "Build system"
      ]
    }
  ],
  "summary": {
    "pull_requests": 6,
    "issues": 3
  }
}